import{r as o,a3 as d,a4 as p,a5 as S,h as j,a6 as h,j as e,P as f,L as m,b,t as v,I as L}from"./index-B9PwOwK_.js";const k=o.memo(function({layoutId:r}){const s=d(l=>l.layouts.find(a=>a.id===r)),i=d(l=>l.updateLayout),[c,g]=o.useState(null),t=s?.slug||"",n=o.useCallback(async l=>{const a=l?p(l):"";if(a){const u=S(a);if(!u.isValid){g(u.error||"Invalid slug");return}}g(null),console.log("ðŸ“ Layout Slug changed:",{layoutId:r,oldSlug:t,newSlug:a||null});try{const u=await j();i(r,{slug:a||null}),await u.layouts.update(r,{slug:a||null}),console.log("âœ… Layout slug updated successfully")}catch(u){console.error("âŒ Failed to update layout slug:",u)}},[r,t,i]),y=o.useCallback(()=>{if(!s)return;const l=p(h(s.name));n(l)},[s,n]),x=o.useCallback(()=>{n("")},[n]);return s?e.jsx(f,{title:"URL Prefix",icon:m,children:e.jsxs("div",{className:"layout-slug-editor",children:[e.jsx(b,{label:"Slug",value:t,onChange:n,placeholder:`/${h(s.name)}`,description:"URL prefix for pages using this layout",icon:m}),c&&e.jsxs("div",{className:"page-slug-error",children:[e.jsx(v,{size:12}),e.jsx("span",{children:c})]}),e.jsxs("div",{className:"layout-slug-actions",children:[e.jsxs("button",{type:"button",className:"page-slug-generate",onClick:y,title:"Generate slug from layout name",children:[e.jsx(L,{size:12}),"Generate"]}),t&&e.jsx("button",{type:"button",className:"page-layout-clear",onClick:x,title:"Remove slug",children:"Clear"})]}),t&&e.jsxs("div",{className:"page-url-preview",children:[e.jsx("span",{className:"page-url-label",children:"Pages with this layout will have URLs like:"}),e.jsxs("code",{className:"page-url-value",children:[t,"/page-slug"]})]})]})}):null});export{k as LayoutSlugEditor,k as default};
