import{r as y,u as o,j as e,I as v,i as s,f,g as S,E as F,h as I,P as h,a as w,b as p,c as b,d as B,H as E}from"./index-s7MVcqKs.js";import{P as c}from"./labels-C7QIhqP9.js";import{P as C}from"./pointer-off-BEwmFlZq.js";const R=y.memo(function({elementId:n,currentProps:i,onUpdate:D}){const u=o(t=>t.addElement),j=o(t=>t.currentPageId),N=o(t=>t.setSelectedElement),x=o(t=>t.elements),T=x.find(t=>t.id===n)?.customId||"",r=(t,a)=>{const m={...i,[t]:a};D(m)},l=y.useMemo(()=>x.filter(t=>t.parent_id===n&&t.tag==="Field").sort((t,a)=>(t.order_num||0)-(a.order_num||0)),[x,n]);return l.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"properties-aria",children:[e.jsxs("legend",{className:"fieldset-legend",children:[e.jsx(v,{size:s.size})," Field Management"]}),e.jsxs("div",{className:"tab-overview",children:[e.jsxs("p",{className:"tab-overview-text",children:["Total fields: ",l.length]}),e.jsx("p",{className:"section-overview-help",children:"ğŸ’¡ This Tag uses Field elements for dynamic data rendering"})]}),l.length>0&&e.jsx("div",{className:"react-aria-ListBox",children:l.map(t=>{const a=t.props;return e.jsxs("div",{className:"react-aria-ListBoxItem",children:[e.jsxs("span",{className:"tab-title",children:[String(a.fieldKey||a.key||"Unnamed Field"),a.type?` (${a.type})`:""]}),e.jsx("button",{className:"tab-edit-button",onClick:()=>{N(t.id,a,a.style)},children:"Edit"})]},t.id)})}),e.jsx("div",{className:"tab-actions",children:e.jsxs("button",{className:"control-button add",onClick:async()=>{const t=j;if(!t){alert("í˜ì´ì§€ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.");return}const{elements:a}=o.getState(),m=Math.max(0,...l.map(d=>d.order_num||0)),g={id:F.generateId(),customId:S("Field",a),page_id:t,tag:"Field",props:{fieldKey:`field${l.length+1}`,label:`Field ${l.length+1}`,type:"string",showLabel:!1,visible:!0,style:{},className:""},parent_id:n,order_num:m+1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};try{const _=await(await I()).elements.insert(g);u(_),console.log("âœ… [IndexedDB] Field created successfully")}catch(d){console.error("âŒ [IndexedDB] Failed to create Field:",d),alert("Field ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}},children:[e.jsx(f,{color:s.color,strokeWidth:s.strokeWidth,size:s.size}),"Add Field"]})})]}),e.jsx("p",{style:{fontSize:"12px",color:"var(--text-color-secondary)",marginTop:"8px"},children:"ğŸ’¡ Variant and size are controlled by the parent TagGroup"})]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{title:"Basic",children:e.jsx(w,{label:"ID",value:T,elementId:n,placeholder:"tag_1"})}),e.jsx(h,{title:"Static Item Properties",children:e.jsx("p",{className:"section-overview-help",children:"ğŸ’¡ This is a static Tag. Add Field elements to enable dynamic data rendering."})}),e.jsxs(h,{title:"Content",children:[e.jsx(p,{label:c.TEXT,value:String(i.children||""),onChange:t=>r("children",t),icon:b}),e.jsx(p,{label:c.TEXT_VALUE,value:String(i.textValue||""),onChange:t=>r("textValue",t||void 0),icon:b,placeholder:"Text for accessibility and filtering"})]}),e.jsx(h,{title:"Behavior",children:e.jsx(B,{label:c.DISABLED,isSelected:!!i.isDisabled,onChange:t=>r("isDisabled",t),icon:C})}),e.jsxs(h,{title:"Accessibility",children:[e.jsx(p,{label:c.ARIA_LABEL,value:String(i["aria-label"]||""),onChange:t=>r("aria-label",t||void 0),icon:b,placeholder:"Tag label for screen readers"}),e.jsx(p,{label:c.ARIA_LABELLEDBY,value:String(i["aria-labelledby"]||""),onChange:t=>r("aria-labelledby",t||void 0),icon:E,placeholder:"label-element-id"}),e.jsx(p,{label:c.ARIA_DESCRIBEDBY,value:String(i["aria-describedby"]||""),onChange:t=>r("aria-describedby",t||void 0),icon:E,placeholder:"description-element-id"})]}),e.jsxs("div",{className:"properties-aria",children:[e.jsxs("legend",{className:"fieldset-legend",children:[e.jsx(v,{size:s.size})," Convert to Dynamic Item"]}),e.jsx("div",{className:"tab-overview",children:e.jsx("p",{className:"section-overview-help",children:"ğŸ’¡ Add Field elements to display dynamic data from DataTable"})}),e.jsx("div",{className:"tab-actions",children:e.jsxs("button",{className:"control-button add",onClick:async()=>{const t=j;if(!t){alert("í˜ì´ì§€ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.");return}const{elements:a}=o.getState(),m={id:F.generateId(),customId:S("Field",a),page_id:t,tag:"Field",props:{fieldKey:"name",label:"Name",type:"string",showLabel:!1,visible:!0,style:{},className:""},parent_id:n,order_num:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};try{const d=await(await I()).elements.insert(m);u(d),console.log("âœ… [IndexedDB] Field created successfully")}catch(g){console.error("âŒ [IndexedDB] Failed to create Field:",g),alert("Field ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}},children:[e.jsx(f,{color:s.color,strokeWidth:s.strokeWidth,size:s.size}),"Add First Field"]})})]}),e.jsx("p",{style:{fontSize:"12px",color:"var(--text-color-secondary)",marginTop:"8px"},children:"ğŸ’¡ Variant and size are controlled by the parent TagGroup"})]})});export{R as TagEditor};
