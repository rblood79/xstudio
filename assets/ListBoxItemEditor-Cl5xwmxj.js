import{r as v,u as m,j as t,I as j,i as l,f as I,g as y,E as F,h as S,P as x,a as C,b as r,T as _,F as w,d as A,c as T,H as E}from"./index-2kd0jdZn.js";import{P as n}from"./labels-C7QIhqP9.js";import{B as f}from"./binary-BNlU1_vE.js";import{P}from"./pointer-off-D4O5ZRuG.js";const M=v.memo(function({elementId:o,currentProps:a,onUpdate:B}){const p=m(e=>e.addElement),u=m(e=>e.currentPageId),D=m(e=>e.setSelectedElement),g=m(e=>e.elements),N=g.find(e=>e.id===o)?.customId||"",i=(e,s)=>{const h={...a,[e]:s};B(h)},d=v.useMemo(()=>g.filter(e=>e.parent_id===o&&e.tag==="Field").sort((e,s)=>(e.order_num||0)-(s.order_num||0)),[g,o]);return d.length>0?t.jsx(t.Fragment,{children:t.jsxs("div",{className:"properties-aria",children:[t.jsxs("legend",{className:"fieldset-legend",children:[t.jsx(j,{size:l.size})," Field Management"]}),t.jsxs("div",{className:"tab-overview",children:[t.jsxs("p",{className:"tab-overview-text",children:["Total fields: ",d.length]}),t.jsx("p",{className:"section-overview-help",children:"ğŸ’¡ This ListBoxItem uses Field elements for dynamic data rendering"})]}),d.length>0&&t.jsx("div",{className:"react-aria-ListBox",children:d.map(e=>{const s=e.props;return t.jsxs("div",{className:"react-aria-ListBoxItem",children:[t.jsxs("span",{className:"tab-title",children:[String(s.key||"Unnamed Field"),s.type?` (${s.type})`:""]}),t.jsx("button",{className:"tab-edit-button",onClick:()=>{D(e.id,s,s.style)},children:"Edit"})]},e.id)})}),t.jsx("div",{className:"tab-actions",children:t.jsxs("button",{className:"control-button add",onClick:async()=>{const e=u;if(!e){alert("í˜ì´ì§€ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.");return}const{elements:s}=m.getState(),h=Math.max(0,...d.map(c=>c.order_num||0)),b={id:F.generateId(),customId:y("Field",s),page_id:e,tag:"Field",props:{key:`field${d.length+1}`,label:`Field ${d.length+1}`,type:"string",showLabel:!0,visible:!0,style:{},className:""},parent_id:o,order_num:h+1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};try{const L=await(await S()).elements.insert(b);p(L),console.log("âœ… [IndexedDB] Field created successfully")}catch(c){console.error("âŒ [IndexedDB] Failed to create Field:",c),alert("Field ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}},children:[t.jsx(I,{color:l.color,strokeWidth:l.strokeWidth,size:l.size}),"Add Field"]})})]})}):t.jsxs(t.Fragment,{children:[t.jsx(x,{title:"Basic",children:t.jsx(C,{label:"ID",value:N,elementId:o,placeholder:"listboxitem_1"})}),t.jsx(x,{title:"Static Item Properties",children:t.jsx("p",{className:"section-overview-help",children:"ğŸ’¡ This is a static ListBoxItem. Add Field elements to enable dynamic data rendering."})}),t.jsxs(x,{title:"Content",children:[t.jsx(r,{label:n.LABEL,value:String(a.label||""),onChange:e=>i("label",e||void 0),icon:_}),t.jsx(r,{label:n.VALUE,value:String(a.value||""),onChange:e=>i("value",e||void 0),icon:f}),t.jsx(r,{label:n.DESCRIPTION,value:String(a.description||""),onChange:e=>i("description",e||void 0),icon:w}),t.jsx(r,{label:n.TEXT_VALUE,value:String(a.textValue||""),onChange:e=>i("textValue",e||void 0),icon:f})]}),t.jsx(x,{title:"Behavior",children:t.jsx(A,{label:n.DISABLED,isSelected:!!a.isDisabled,onChange:e=>i("isDisabled",e),icon:P})}),t.jsxs(x,{title:"Accessibility",children:[t.jsx(r,{label:n.ARIA_LABEL,value:String(a["aria-label"]||""),onChange:e=>i("aria-label",e||void 0),icon:T,placeholder:"List box item label for screen readers"}),t.jsx(r,{label:n.ARIA_LABELLEDBY,value:String(a["aria-labelledby"]||""),onChange:e=>i("aria-labelledby",e||void 0),icon:E,placeholder:"label-element-id"}),t.jsx(r,{label:n.ARIA_DESCRIBEDBY,value:String(a["aria-describedby"]||""),onChange:e=>i("aria-describedby",e||void 0),icon:E,placeholder:"description-element-id"})]}),t.jsxs("div",{className:"properties-aria",children:[t.jsxs("legend",{className:"fieldset-legend",children:[t.jsx(j,{size:l.size})," Convert to Dynamic Item"]}),t.jsx("div",{className:"tab-overview",children:t.jsx("p",{className:"section-overview-help",children:"ğŸ’¡ Add Field elements to display dynamic data from API/Database"})}),t.jsx("div",{className:"tab-actions",children:t.jsxs("button",{className:"control-button add",onClick:async()=>{const e=u;if(!e){alert("í˜ì´ì§€ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.");return}const{elements:s}=m.getState(),h={id:F.generateId(),customId:y("Field",s),page_id:e,tag:"Field",props:{key:"field1",label:"Field 1",type:"string",showLabel:!0,visible:!0,style:{},className:""},parent_id:o,order_num:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};try{const c=await(await S()).elements.insert(h);p(c),console.log("âœ… [IndexedDB] Field created successfully")}catch(b){console.error("âŒ [IndexedDB] Failed to create Field:",b),alert("Field ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}},children:[t.jsx(I,{color:l.color,strokeWidth:l.strokeWidth,size:l.size}),"Add First Field"]})})]})]})});export{M as ListBoxItemEditor,M as default};
