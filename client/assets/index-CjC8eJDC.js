import{M as n,v as N,r as d,j as e}from"./index-BHE-KyRT.js";import{s as m}from"./supabase.client-C2dMp-kt.js";const H=({color:t="currentColor",size:s=24,className:l,...r})=>n.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:s,height:s,fill:t,...r,className:"remixicon "+(l||"")},n.createElement("path",{d:"M4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM5 5V19H19V5H5ZM11 11V7H13V11H17V13H13V17H11V13H7V11H11Z"})),E=({color:t="currentColor",size:s=24,className:l,...r})=>n.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:s,height:s,fill:t,...r,className:"remixicon "+(l||"")},n.createElement("path",{d:"M14.8287 7.75737L9.1718 13.4142C8.78127 13.8047 8.78127 14.4379 9.1718 14.8284C9.56232 15.219 10.1955 15.219 10.586 14.8284L16.2429 9.17158C17.4144 8.00001 17.4144 6.10052 16.2429 4.92894C15.0713 3.75737 13.1718 3.75737 12.0002 4.92894L6.34337 10.5858C4.39075 12.5384 4.39075 15.7042 6.34337 17.6569C8.29599 19.6095 11.4618 19.6095 13.4144 17.6569L19.0713 12L20.4855 13.4142L14.8287 19.0711C12.095 21.8047 7.66283 21.8047 4.92916 19.0711C2.19549 16.3374 2.19549 11.9053 4.92916 9.17158L10.586 3.51473C12.5386 1.56211 15.7045 1.56211 17.6571 3.51473C19.6097 5.46735 19.6097 8.63317 17.6571 10.5858L12.0002 16.2427C10.8287 17.4142 8.92916 17.4142 7.75759 16.2427C6.58601 15.0711 6.58601 13.1716 7.75759 12L13.4144 6.34316L14.8287 7.75737Z"})),L=({color:t="currentColor",size:s=24,className:l,...r})=>n.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:s,height:s,fill:t,...r,className:"remixicon "+(l||"")},n.createElement("path",{d:"M13 18V20H17V22H7V20H11V18H2.9918C2.44405 18 2 17.5511 2 16.9925V4.00748C2 3.45107 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44892 22 4.00748V16.9925C22 17.5489 21.5447 18 21.0082 18H13Z"})),M=({color:t="currentColor",size:s=24,className:l,...r})=>n.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:s,height:s,fill:t,...r,className:"remixicon "+(l||"")},n.createElement("path",{d:"M5 12.5C5 12.8134 5.46101 13.3584 6.53047 13.8931C7.91405 14.5849 9.87677 15 12 15C14.1232 15 16.0859 14.5849 17.4695 13.8931C18.539 13.3584 19 12.8134 19 12.5V10.3287C17.35 11.3482 14.8273 12 12 12C9.17273 12 6.64996 11.3482 5 10.3287V12.5ZM19 15.3287C17.35 16.3482 14.8273 17 12 17C9.17273 17 6.64996 16.3482 5 15.3287V17.5C5 17.8134 5.46101 18.3584 6.53047 18.8931C7.91405 19.5849 9.87677 20 12 20C14.1232 20 16.0859 19.5849 17.4695 18.8931C18.539 18.3584 19 17.8134 19 17.5V15.3287ZM3 17.5V7.5C3 5.01472 7.02944 3 12 3C16.9706 3 21 5.01472 21 7.5V17.5C21 19.9853 16.9706 22 12 22C7.02944 22 3 19.9853 3 17.5ZM12 10C14.1232 10 16.0859 9.58492 17.4695 8.89313C18.539 8.3584 19 7.81342 19 7.5C19 7.18658 18.539 6.6416 17.4695 6.10687C16.0859 5.41508 14.1232 5 12 5C9.87677 5 7.91405 5.41508 6.53047 6.10687C5.46101 6.6416 5 7.18658 5 7.5C5 7.81342 5.46101 8.3584 6.53047 8.89313C7.91405 9.58492 9.87677 10 12 10Z"})),Z=({color:t="currentColor",size:s=24,className:l,...r})=>n.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:s,height:s,fill:t,...r,className:"remixicon "+(l||"")},n.createElement("path",{d:"M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2ZM12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM12 7C14.7614 7 17 9.23858 17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 11.4872 7.07719 10.9925 7.22057 10.5268C7.61175 11.3954 8.48527 12 9.5 12C10.8807 12 12 10.8807 12 9.5C12 8.48527 11.3954 7.61175 10.5269 7.21995C10.9925 7.07719 11.4872 7 12 7Z"})),b=({color:t="currentColor",size:s=24,className:l,...r})=>n.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:s,height:s,fill:t,...r,className:"remixicon "+(l||"")},n.createElement("path",{d:"M15 4H5V20H19V8H15V4ZM3 2.9918C3 2.44405 3.44749 2 3.9985 2H16L20.9997 7L21 20.9925C21 21.5489 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5447 3 21.0082V2.9918ZM11 11V8H13V11H16V13H13V16H11V13H8V11H11Z"})),z=({color:t="currentColor",size:s=24,className:l,...r})=>n.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:s,height:s,fill:t,...r,className:"remixicon "+(l||"")},n.createElement("path",{d:"M3 4C3 3.44772 3.44772 3 4 3H10C10.5523 3 11 3.44772 11 4V10C11 10.5523 10.5523 11 10 11H4C3.44772 11 3 10.5523 3 10V4ZM3 14C3 13.4477 3.44772 13 4 13H10C10.5523 13 11 13.4477 11 14V20C11 20.5523 10.5523 21 10 21H4C3.44772 21 3 20.5523 3 20V14ZM13 4C13 3.44772 13.4477 3 14 3H20C20.5523 3 21 3.44772 21 4V10C21 10.5523 20.5523 11 20 11H14C13.4477 11 13 10.5523 13 10V4ZM13 14C13 13.4477 13.4477 13 14 13H20C20.5523 13 21 13.4477 21 14V20C21 20.5523 20.5523 21 20 21H14C13.4477 21 13 20.5523 13 20V14Z"})),_=({color:t="currentColor",size:s=24,className:l,...r})=>n.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:s,height:s,fill:t,...r,className:"remixicon "+(l||"")},n.createElement("path",{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934V13H20V5H4V18.999L14 9L17 12V14.829L14 11.8284L6.827 19H14V21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"})),y=({color:t="currentColor",size:s=24,className:l,...r})=>n.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:s,height:s,fill:t,...r,className:"remixicon "+(l||"")},n.createElement("path",{d:"M3 4H21V6H3V4ZM3 11H21V13H3V11ZM3 18H21V20H3V18Z"})),B=({color:t="currentColor",size:s=24,className:l,...r})=>n.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:s,height:s,fill:t,...r,className:"remixicon "+(l||"")},n.createElement("path",{d:"M19.376 12.4161L8.77735 19.4818C8.54759 19.635 8.23715 19.5729 8.08397 19.3432C8.02922 19.261 8 19.1645 8 19.0658V4.93433C8 4.65818 8.22386 4.43433 8.5 4.43433C8.59871 4.43433 8.69522 4.46355 8.77735 4.5183L19.376 11.584C19.6057 11.7372 19.6678 12.0477 19.5146 12.2774C19.478 12.3323 19.4309 12.3795 19.376 12.4161Z"})),P=({color:t="currentColor",size:s=24,className:l,...r})=>n.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:s,height:s,fill:t,...r,className:"remixicon "+(l||"")},n.createElement("path",{d:"M12 1L21.5 6.5V17.5L12 23L2.5 17.5V6.5L12 1ZM12 3.311L4.5 7.65311V16.3469L12 20.689L19.5 16.3469V7.65311L12 3.311ZM12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12C16 14.2091 14.2091 16 12 16ZM12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z"})),k=({color:t="currentColor",size:s=24,className:l,...r})=>n.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:s,height:s,fill:t,...r,className:"remixicon "+(l||"")},n.createElement("path",{d:"M6 2H18C18.5523 2 19 2.44772 19 3V21C19 21.5523 18.5523 22 18 22H6C5.44772 22 5 21.5523 5 21V3C5 2.44772 5.44772 2 6 2ZM12 17C11.4477 17 11 17.4477 11 18C11 18.5523 11.4477 19 12 19C12.5523 19 13 18.5523 13 18C13 17.4477 12.5523 17 12 17Z"})),S=({color:t="currentColor",size:s=24,className:l,...r})=>n.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:s,height:s,fill:t,...r,className:"remixicon "+(l||"")},n.createElement("path",{d:"M12 11C14.7614 11 17 13.2386 17 16V22H15V16C15 14.4023 13.7511 13.0963 12.1763 13.0051L12 13C10.4023 13 9.09634 14.2489 9.00509 15.8237L9 16V22H7V16C7 13.2386 9.23858 11 12 11ZM5.5 14C5.77885 14 6.05009 14.0326 6.3101 14.0942C6.14202 14.594 6.03873 15.122 6.00896 15.6693L6 16L6.0007 16.0856C5.88757 16.0456 5.76821 16.0187 5.64446 16.0069L5.5 16C4.7203 16 4.07955 16.5949 4.00687 17.3555L4 17.5V22H2V17.5C2 15.567 3.567 14 5.5 14ZM18.5 14C20.433 14 22 15.567 22 17.5V22H20V17.5C20 16.7203 19.4051 16.0796 18.6445 16.0069L18.5 16C18.3248 16 18.1566 16.03 18.0003 16.0852L18 16C18 15.3343 17.8916 14.694 17.6915 14.0956C17.9499 14.0326 18.2211 14 18.5 14ZM5.5 8C6.88071 8 8 9.11929 8 10.5C8 11.8807 6.88071 13 5.5 13C4.11929 13 3 11.8807 3 10.5C3 9.11929 4.11929 8 5.5 8ZM18.5 8C19.8807 8 21 9.11929 21 10.5C21 11.8807 19.8807 13 18.5 13C17.1193 13 16 11.8807 16 10.5C16 9.11929 17.1193 8 18.5 8ZM5.5 10C5.22386 10 5 10.2239 5 10.5C5 10.7761 5.22386 11 5.5 11C5.77614 11 6 10.7761 6 10.5C6 10.2239 5.77614 10 5.5 10ZM18.5 10C18.2239 10 18 10.2239 18 10.5C18 10.7761 18.2239 11 18.5 11C18.7761 11 19 10.7761 19 10.5C19 10.2239 18.7761 10 18.5 10ZM12 2C14.2091 2 16 3.79086 16 6C16 8.20914 14.2091 10 12 10C9.79086 10 8 8.20914 8 6C8 3.79086 9.79086 2 12 2ZM12 4C10.8954 4 10 4.89543 10 6C10 7.10457 10.8954 8 12 8C13.1046 8 14 7.10457 14 6C14 4.89543 13.1046 4 12 4Z"})),D=({color:t="currentColor",size:s=24,className:l,...r})=>n.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:s,height:s,fill:t,...r,className:"remixicon "+(l||"")},n.createElement("path",{d:"M4 5V19H13V21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H21C21.5523 3 22 3.44772 22 4V9H20V5H4ZM19.7071 11.2929L19 10.5858L18.2929 11.2929L15.2929 14.2929L16.7071 15.7071L19 13.4142L21.2929 15.7071L22.7071 14.2929L19.7071 11.2929ZM16.7071 17.2929L19 19.5858L21.2929 17.2929L22.7071 18.7071L19.7071 21.7071L19 22.4142L18.2929 21.7071L15.2929 18.7071L16.7071 17.2929Z"}));function A({projectId:t}){N();const[s,l]=d.useState([]),[r,x]=d.useState([]),[C,V]=d.useState(null),[h,w]=d.useState(null);d.useEffect(()=>{t&&(async()=>{const{data:i,error:o}=await m.from("pages").select("*").eq("project_id",t);o?console.error("프로젝트 조회 에러:",o):(l(i),console.log("프로젝트 조회 결과:",i))})()},[t]),d.useEffect(()=>{!C&&s.length>0&&u(s[0].id)},[s]);const u=async a=>{V(a),w(null);const{data:i,error:o}=await m.from("elements").select("*").eq("page_id",a);o?console.error("요소 조회 에러:",o):(x(i),console.log("요소 조회 결과:",i))},f=async()=>{if(!C){alert("먼저 페이지를 선택하세요.");return}const a={page_id:C,tag:"div",props:{style:{}},parent_id:h||null},{data:i,error:o}=await m.from("elements").insert([a]).select();o?console.error("요소 추가 에러:",o):i&&(x(c=>[...c,i[0]]),console.log("새 DIV 요소 추가:",i[0]))},p=async()=>{if(!h){alert("선택된 element가 없습니다.");return}const{error:a}=await m.from("elements").delete().eq("id",h);if(a)console.error("요소 삭제 에러:",a);else{if(C){const{data:i,error:o}=await m.from("elements").select("*").eq("page_id",C);o?console.error("요소 조회 에러:",o):x(i)}w(null)}},v=(a=null)=>e.jsx(e.Fragment,{children:r.filter(i=>i.parent_id===a).map(i=>e.jsxs("div",{onClick:o=>{o.stopPropagation(),w(i.id)},className:"element",style:{outline:h===i.id?"1px solid blue":void 0},children:[e.jsxs("div",{children:[e.jsx("span",{children:i.tag}),e.jsx("button",{onClick:async()=>{const{error:o}=await m.from("elements").delete().eq("id",i.id);o?console.error("요소 삭제 에러:",o):x(c=>c.filter(g=>g.id!==i.id))},children:"del"})]}),v(i.id)]},i.id))});return d.useEffect(()=>{const a=document.getElementById("previewFrame");a&&a.contentWindow&&a.contentWindow.postMessage({type:"UPDATE_ELEMENTS",elements:r},"*")},[r]),d.useEffect(()=>{const a=i=>{i.data.type==="ELEMENT_SELECTED"&&w(i.data.elementId)};return window.addEventListener("message",a),()=>window.removeEventListener("message",a)},[]),e.jsx("div",{className:"app",children:e.jsxs("div",{className:"contents",children:[e.jsx("main",{children:e.jsx("div",{className:"bg",children:e.jsxs("div",{className:"workspace",children:[e.jsx("iframe",{id:"previewFrame",src:t?`/preview/${t}?isIframe=true`:"/preview?isIframe=true",style:{width:"100%",height:"100%",border:"none"}}),e.jsx("div",{className:"workspace_overlay"})]})})}),e.jsxs("aside",{className:"sidebar",children:[e.jsxs("div",{className:"sidebar_nav",children:[e.jsxs("div",{className:"sidebar_group",children:[e.jsx("button",{children:e.jsx(z,{size:21,color:"#171717",className:"ri-function-fill"})}),e.jsx("button",{children:e.jsx(b,{size:21,color:"#171717",className:"ri-file-add-line"})}),e.jsx("button",{children:e.jsx(H,{size:21,color:"#171717",className:"ri-add-box-line"})}),e.jsx("button",{children:e.jsx(D,{size:21,color:"#171717",className:"ri-dropdown-list"})}),e.jsx("button",{children:e.jsx(E,{size:21,color:"#171717",className:"ri-attachment-2"})}),e.jsx("button",{children:e.jsx(_,{size:21,color:"#171717",className:"ri-image-add-line"})}),e.jsx("button",{children:e.jsx(M,{size:21,color:"#171717",className:"ri-database-2-line"})})]}),e.jsxs("div",{className:"sidebar_group",children:[e.jsx("button",{children:e.jsx(S,{size:21,color:"#171717",className:"ri-team-line"})}),e.jsx("button",{children:e.jsx(P,{size:21,color:"#171717",className:"ri-settings-line"})})]})]}),e.jsxs("div",{className:"sidebar_pages",children:[e.jsx("h3",{children:"Pages"}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("button",{onClick:async()=>{const a=prompt("Enter page title:"),i=prompt("Enter page slug:");if(!a||!i){alert("Title and slug are required.");return}const o={title:a,project_id:t,slug:i},{data:c,error:g}=await m.from("pages").insert([o]).select();g?console.error("페이지 생성 에러:",g):c&&l(j=>[...j,...c])},children:"Add"})}),e.jsx("div",{className:"elements",children:s.map(a=>e.jsxs("div",{className:"element",children:[e.jsx("span",{style:{cursor:"pointer"},onClick:()=>u(a.id),children:a.title}),e.jsx("button",{onClick:async()=>{const{error:i}=await m.from("pages").delete().eq("id",a.id);i?console.error("페이지 삭제 에러:",i):l(o=>o.filter(c=>c.id!==a.id))},children:"Delete"})]},a.id))})]})]}),e.jsxs("div",{className:"sidebar_elements",children:[e.jsx("h3",{children:"Elements Node"}),e.jsxs("div",{children:[e.jsx("button",{onClick:f,children:"add elm"}),e.jsx("button",{onClick:p,children:"del elm"})]}),e.jsx("div",{className:"elements",children:v()})]})]}),e.jsx("aside",{className:"inspector",children:"inspector"}),e.jsxs("nav",{className:"header",children:[e.jsxs("div",{className:"header_contents header_left",children:[e.jsx("button",{children:e.jsx(y,{size:21,color:"#171717",className:"button ri-menu-line"})}),t?`Project ID: ${t}`:"No project ID provided"]}),e.jsxs("div",{className:"header_contents screen_size",children:[e.jsx("button",{children:"1920"}),e.jsx("button",{children:e.jsx(k,{size:21,color:"#171717",className:"button ri-smartphone-fill"})}),e.jsx("button",{children:e.jsx(L,{size:21,color:"#171717",className:"button ri-computer-fill"})})]}),e.jsxs("div",{className:"header_contents header_right",children:[e.jsx("button",{children:e.jsx(Z,{size:21,color:"#171717",className:"button ri-eye-2-line"})}),e.jsx("button",{children:e.jsx(B,{size:21,color:"#171717",className:"button ri-play-fill"})}),e.jsx("button",{children:"Publish"})]})]}),e.jsx("footer",{className:"footer",children:"footer"})]})})}export{A as B};
