const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BadgeEditor-xifTIN6j.js","assets/labels-C7QIhqP9.js","assets/parentheses-BY5pt8M2.js","assets/BreadcrumbEditor-BDuJN68L.js","assets/pointer-off-CPJQi-Ad.js","assets/BreadcrumbsEditor-DFtfimAo.js","assets/ButtonEditor-DdstdRj8.js","assets/focus-BKRKJwgE.js","assets/CalendarEditor-GiXObt2h.js","assets/pen-off-B1fkf4FI.js","assets/CardEditor-DLyKAGC0.js","assets/pencil-ruler-B4wDnDjn.js","assets/arrow-up-down-DaCgNVT1.js","assets/eye-off-D1RDvwag.js","assets/CellEditor-a9jOBhFa.js","assets/CheckboxEditor-v0RawnxS.js","assets/minus-CUkkSEez.js","assets/CheckboxGroupEditor-BqQrNVI9.js","assets/ratio-CgpKi9QM.js","assets/ColumnEditor-Vmiuw1--.js","assets/move-DDFN7GGj.js","assets/ColumnGroupEditor-B9V8jp4I.js","assets/ComboBoxEditor-NQrhNOHo.js","assets/useCollectionItemManager-hZkqjiO7.js","assets/binary-BwHcH8nk.js","assets/ComboBoxItemEditor-BKCeoMKc.js","assets/DatePickerEditor-CNTfU-o6.js","assets/DateRangePickerEditor-BdLimzPg.js","assets/DialogEditor-BflwkcfG.js","assets/FieldEditor-hYBgRedX.js","assets/GridListEditor-DVaYFY8L.js","assets/square-x-BvbTlKlN.js","assets/GridListItemEditor-Ca8nZEpI.js","assets/GroupEditor-DzAuO0j5.js","assets/LayoutBodyEditor-CE1afRRo.js","assets/LayoutSlugEditor-BxHk1Vqj.js","assets/LayoutBodyEditor-BpWL5bwL.css","assets/LinkEditor-PQARmCgp.js","assets/ListBoxEditor-B-wxa0X_.js","assets/ListBoxItemEditor-CgiOlPNY.js","assets/MenuEditor-Cu6ZQNj6.js","assets/MenuItemEditor-DrzKw5Za.js","assets/MeterEditor-BP393aUY.js","assets/dollar-sign-CUTowcwk.js","assets/ModalEditor-DFBnloX-.js","assets/NumberFieldEditor-BlRtYjGk.js","assets/spell-check-2-Dr7pQMed.js","assets/PageBodyEditor-fzVtRg98.js","assets/PageLayoutSelector-Cvfbe800.js","assets/PageParentSelector-D0KIrB9d.js","assets/PanelEditor-BHac5po_.js","assets/PopoverEditor-B2Y_bY9_.js","assets/map-pin-2BkzxFUB.js","assets/ProgressBarEditor-DK9XZs_0.js","assets/RadioEditor-CwlO5txx.js","assets/check-check-CDVZ6lmR.js","assets/RadioGroupEditor-BS_tHlbZ.js","assets/ResponsiveVisibilityEditor-CtCe4It5.js","assets/RowEditor-Bd81J3p1.js","assets/SearchFieldEditor-DE9TkONV.js","assets/SelectEditor-DF32MA5H.js","assets/SelectItemEditor-CJdRozvf.js","assets/SeparatorEditor-DFEfLZx6.js","assets/SliderEditor-BSWp0Vw-.js","assets/SwitchEditor-DrZr--n7.js","assets/TabEditor-Ct-v_buu.js","assets/TableBodyEditor-CqBkiMsr.js","assets/table-B-xo-BCM.js","assets/TableEditor-ZsFkmJod.js","assets/TableEditor-CPvubtIO.css","assets/TableHeaderEditor-lmnPakbl.js","assets/TabsEditor-BSDBXaS1.js","assets/TagEditor-Dqc2NEvZ.js","assets/TagGroupEditor-BPNXzfzb.js","assets/TailSwatchEditor-D_vQ1nQc.js","assets/TextFieldEditor-BMcz5pUq.js","assets/TimeFieldEditor-BP9rDf5X.js","assets/ToggleButtonEditor-BZYx9v9J.js","assets/ToggleButtonGroupEditor-B36XEiFl.js","assets/ToolbarEditor-BxdLPmt3.js","assets/TooltipEditor-8XCrsH81.js","assets/TreeEditor-eApIBWps.js","assets/TreeItemEditor-COL8iu5s.js"])))=>i.map(i=>d[i]);
function oQ(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var AE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function L_(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var ZM={exports:{}},Gx={};var I$;function lQ(){if(I$)return Gx;I$=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return Gx.Fragment=e,Gx.jsx=n,Gx.jsxs=n,Gx}var $$;function cQ(){return $$||($$=1,ZM.exports=lQ()),ZM.exports}var l=cQ(),JM={exports:{}},An={};var j$;function uQ(){if(j$)return An;j$=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),m=Symbol.iterator;function g(Y){return Y===null||typeof Y!="object"?null:(Y=m&&Y[m]||Y["@@iterator"],typeof Y=="function"?Y:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,_={};function w(Y,Z,K){this.props=Y,this.context=Z,this.refs=_,this.updater=K||v}w.prototype.isReactComponent={},w.prototype.setState=function(Y,Z){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,Z,"setState")},w.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function S(){}S.prototype=w.prototype;function E(Y,Z,K){this.props=Y,this.context=Z,this.refs=_,this.updater=K||v}var A=E.prototype=new S;A.constructor=E,x(A,w.prototype),A.isPureReactComponent=!0;var N=Array.isArray;function P(){}var R={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function k(Y,Z,K){var X=K.ref;return{$$typeof:t,type:Y,key:Z,ref:X!==void 0?X:null,props:K}}function L(Y,Z){return k(Y.type,Z,Y.props)}function $(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===t}function B(Y){var Z={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(K){return Z[K]})}var q=/\/+/g;function U(Y,Z){return typeof Y=="object"&&Y!==null&&Y.key!=null?B(""+Y.key):Z.toString(36)}function J(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(P,P):(Y.status="pending",Y.then(function(Z){Y.status==="pending"&&(Y.status="fulfilled",Y.value=Z)},function(Z){Y.status==="pending"&&(Y.status="rejected",Y.reason=Z)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function O(Y,Z,K,X,ne){var G=typeof Y;(G==="undefined"||G==="boolean")&&(Y=null);var te=!1;if(Y===null)te=!0;else switch(G){case"bigint":case"string":case"number":te=!0;break;case"object":switch(Y.$$typeof){case t:case e:te=!0;break;case h:return te=Y._init,O(te(Y._payload),Z,K,X,ne)}}if(te)return ne=ne(Y),te=X===""?"."+U(Y,0):X,N(ne)?(K="",te!=null&&(K=te.replace(q,"$&/")+"/"),O(ne,Z,K,"",function(ye){return ye})):ne!=null&&($(ne)&&(ne=L(ne,K+(ne.key==null||Y&&Y.key===ne.key?"":(""+ne.key).replace(q,"$&/")+"/")+te)),Z.push(ne)),1;te=0;var ae=X===""?".":X+":";if(N(Y))for(var pe=0;pe<Y.length;pe++)X=Y[pe],G=ae+U(X,pe),te+=O(X,Z,K,G,ne);else if(pe=g(Y),typeof pe=="function")for(Y=pe.call(Y),pe=0;!(X=Y.next()).done;)X=X.value,G=ae+U(X,pe++),te+=O(X,Z,K,G,ne);else if(G==="object"){if(typeof Y.then=="function")return O(J(Y),Z,K,X,ne);throw Z=String(Y),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return te}function z(Y,Z,K){if(Y==null)return Y;var X=[],ne=0;return O(Y,X,"","",function(G){return Z.call(K,G,ne++)}),X}function V(Y){if(Y._status===-1){var Z=Y._result;Z=Z(),Z.then(function(K){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=K)},function(K){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=K)}),Y._status===-1&&(Y._status=0,Y._result=Z)}if(Y._status===1)return Y._result.default;throw Y._result}var H=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)},ee={map:z,forEach:function(Y,Z,K){z(Y,function(){Z.apply(this,arguments)},K)},count:function(Y){var Z=0;return z(Y,function(){Z++}),Z},toArray:function(Y){return z(Y,function(Z){return Z})||[]},only:function(Y){if(!$(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}};return An.Activity=f,An.Children=ee,An.Component=w,An.Fragment=n,An.Profiler=i,An.PureComponent=E,An.StrictMode=r,An.Suspense=c,An.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,An.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return R.H.useMemoCache(Y)}},An.cache=function(Y){return function(){return Y.apply(null,arguments)}},An.cacheSignal=function(){return null},An.cloneElement=function(Y,Z,K){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var X=x({},Y.props),ne=Y.key;if(Z!=null)for(G in Z.key!==void 0&&(ne=""+Z.key),Z)!D.call(Z,G)||G==="key"||G==="__self"||G==="__source"||G==="ref"&&Z.ref===void 0||(X[G]=Z[G]);var G=arguments.length-2;if(G===1)X.children=K;else if(1<G){for(var te=Array(G),ae=0;ae<G;ae++)te[ae]=arguments[ae+2];X.children=te}return k(Y.type,ne,X)},An.createContext=function(Y){return Y={$$typeof:s,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:a,_context:Y},Y},An.createElement=function(Y,Z,K){var X,ne={},G=null;if(Z!=null)for(X in Z.key!==void 0&&(G=""+Z.key),Z)D.call(Z,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(ne[X]=Z[X]);var te=arguments.length-2;if(te===1)ne.children=K;else if(1<te){for(var ae=Array(te),pe=0;pe<te;pe++)ae[pe]=arguments[pe+2];ne.children=ae}if(Y&&Y.defaultProps)for(X in te=Y.defaultProps,te)ne[X]===void 0&&(ne[X]=te[X]);return k(Y,G,ne)},An.createRef=function(){return{current:null}},An.forwardRef=function(Y){return{$$typeof:o,render:Y}},An.isValidElement=$,An.lazy=function(Y){return{$$typeof:h,_payload:{_status:-1,_result:Y},_init:V}},An.memo=function(Y,Z){return{$$typeof:u,type:Y,compare:Z===void 0?null:Z}},An.startTransition=function(Y){var Z=R.T,K={};R.T=K;try{var X=Y(),ne=R.S;ne!==null&&ne(K,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(P,H)}catch(G){H(G)}finally{Z!==null&&K.types!==null&&(Z.types=K.types),R.T=Z}},An.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},An.use=function(Y){return R.H.use(Y)},An.useActionState=function(Y,Z,K){return R.H.useActionState(Y,Z,K)},An.useCallback=function(Y,Z){return R.H.useCallback(Y,Z)},An.useContext=function(Y){return R.H.useContext(Y)},An.useDebugValue=function(){},An.useDeferredValue=function(Y,Z){return R.H.useDeferredValue(Y,Z)},An.useEffect=function(Y,Z){return R.H.useEffect(Y,Z)},An.useEffectEvent=function(Y){return R.H.useEffectEvent(Y)},An.useId=function(){return R.H.useId()},An.useImperativeHandle=function(Y,Z,K){return R.H.useImperativeHandle(Y,Z,K)},An.useInsertionEffect=function(Y,Z){return R.H.useInsertionEffect(Y,Z)},An.useLayoutEffect=function(Y,Z){return R.H.useLayoutEffect(Y,Z)},An.useMemo=function(Y,Z){return R.H.useMemo(Y,Z)},An.useOptimistic=function(Y,Z){return R.H.useOptimistic(Y,Z)},An.useReducer=function(Y,Z,K){return R.H.useReducer(Y,Z,K)},An.useRef=function(Y){return R.H.useRef(Y)},An.useState=function(Y){return R.H.useState(Y)},An.useSyncExternalStore=function(Y,Z,K){return R.H.useSyncExternalStore(Y,Z,K)},An.useTransition=function(){return R.H.useTransition()},An.version="19.2.1",An}var L$;function O_(){return L$||(L$=1,JM.exports=uQ()),JM.exports}var T=O_();const ve=vg(T);var QM={exports:{}},Wx={},e4={exports:{}},t4={};var O$;function dQ(){return O$||(O$=1,(function(t){function e(O,z){var V=O.length;O.push(z);e:for(;0<V;){var H=V-1>>>1,ee=O[H];if(0<i(ee,z))O[H]=z,O[V]=ee,V=H;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var z=O[0],V=O.pop();if(V!==z){O[0]=V;e:for(var H=0,ee=O.length,Y=ee>>>1;H<Y;){var Z=2*(H+1)-1,K=O[Z],X=Z+1,ne=O[X];if(0>i(K,V))X<ee&&0>i(ne,K)?(O[H]=ne,O[X]=V,H=X):(O[H]=K,O[Z]=V,H=Z);else if(X<ee&&0>i(ne,V))O[H]=ne,O[X]=V,H=X;else break e}}return z}function i(O,z){var V=O.sortIndex-z.sortIndex;return V!==0?V:O.id-z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],u=[],h=1,f=null,m=3,g=!1,v=!1,x=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function A(O){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=O)r(u),z.sortIndex=z.expirationTime,e(c,z);else break;z=n(u)}}function N(O){if(x=!1,A(O),!v)if(n(c)!==null)v=!0,P||(P=!0,B());else{var z=n(u);z!==null&&J(N,z.startTime-O)}}var P=!1,R=-1,D=5,k=-1;function L(){return _?!0:!(t.unstable_now()-k<D)}function $(){if(_=!1,P){var O=t.unstable_now();k=O;var z=!0;try{e:{v=!1,x&&(x=!1,S(R),R=-1),g=!0;var V=m;try{t:{for(A(O),f=n(c);f!==null&&!(f.expirationTime>O&&L());){var H=f.callback;if(typeof H=="function"){f.callback=null,m=f.priorityLevel;var ee=H(f.expirationTime<=O);if(O=t.unstable_now(),typeof ee=="function"){f.callback=ee,A(O),z=!0;break t}f===n(c)&&r(c),A(O)}else r(c);f=n(c)}if(f!==null)z=!0;else{var Y=n(u);Y!==null&&J(N,Y.startTime-O),z=!1}}break e}finally{f=null,m=V,g=!1}z=void 0}}finally{z?B():P=!1}}}var B;if(typeof E=="function")B=function(){E($)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,U=q.port2;q.port1.onmessage=$,B=function(){U.postMessage(null)}}else B=function(){w($,0)};function J(O,z){R=w(function(){O(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var V=m;m=z;try{return O()}finally{m=V}},t.unstable_requestPaint=function(){_=!0},t.unstable_runWithPriority=function(O,z){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var V=m;m=O;try{return z()}finally{m=V}},t.unstable_scheduleCallback=function(O,z,V){var H=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?H+V:H):V=H,O){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=V+ee,O={id:h++,callback:z,priorityLevel:O,startTime:V,expirationTime:ee,sortIndex:-1},V>H?(O.sortIndex=V,e(u,O),n(c)===null&&O===n(u)&&(x?(S(R),R=-1):x=!0,J(N,V-H))):(O.sortIndex=ee,e(c,O),v||g||(v=!0,P||(P=!0,B()))),O},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(O){var z=m;return function(){var V=m;m=z;try{return O.apply(this,arguments)}finally{m=V}}}})(t4)),t4}var F$;function hQ(){return F$||(F$=1,e4.exports=dQ()),e4.exports}var n4={exports:{}},us={};var B$;function fQ(){if(B$)return us;B$=1;var t=O_();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,u,h){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:f==null?null:""+f,children:c,containerInfo:u,implementation:h}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return us.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,us.createPortal=function(c,u){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(c,u,null,h)},us.flushSync=function(c){var u=s.T,h=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=u,r.p=h,r.d.f()}},us.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},us.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},us.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var h=u.as,f=o(h,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;h==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:m,fetchPriority:g}):h==="script"&&r.d.X(c,{crossOrigin:f,integrity:m,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},us.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var h=o(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},us.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var h=u.as,f=o(h,u.crossOrigin);r.d.L(c,h,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},us.preloadModule=function(c,u){if(typeof c=="string")if(u){var h=o(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},us.requestFormReset=function(c){r.d.r(c)},us.unstable_batchedUpdates=function(c,u){return c(u)},us.useFormState=function(c,u,h){return s.H.useFormState(c,u,h)},us.useFormStatus=function(){return s.H.useHostTransitionStatus()},us.version="19.2.1",us}var z$;function oB(){if(z$)return n4.exports;z$=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),n4.exports=fQ(),n4.exports}var U$;function pQ(){if(U$)return Wx;U$=1;var t=hQ(),e=O_(),n=oB();function r(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function a(d){var p=d,y=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do p=d,(p.flags&4098)!==0&&(y=p.return),d=p.return;while(d)}return p.tag===3?y:null}function s(d){if(d.tag===13){var p=d.memoizedState;if(p===null&&(d=d.alternate,d!==null&&(p=d.memoizedState)),p!==null)return p.dehydrated}return null}function o(d){if(d.tag===31){var p=d.memoizedState;if(p===null&&(d=d.alternate,d!==null&&(p=d.memoizedState)),p!==null)return p.dehydrated}return null}function c(d){if(a(d)!==d)throw Error(r(188))}function u(d){var p=d.alternate;if(!p){if(p=a(d),p===null)throw Error(r(188));return p!==d?null:d}for(var y=d,C=p;;){var I=y.return;if(I===null)break;var F=I.alternate;if(F===null){if(C=I.return,C!==null){y=C;continue}break}if(I.child===F.child){for(F=I.child;F;){if(F===y)return c(I),d;if(F===C)return c(I),p;F=F.sibling}throw Error(r(188))}if(y.return!==C.return)y=I,C=F;else{for(var Q=!1,le=I.child;le;){if(le===y){Q=!0,y=I,C=F;break}if(le===C){Q=!0,C=I,y=F;break}le=le.sibling}if(!Q){for(le=F.child;le;){if(le===y){Q=!0,y=F,C=I;break}if(le===C){Q=!0,C=F,y=I;break}le=le.sibling}if(!Q)throw Error(r(189))}}if(y.alternate!==C)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?d:p}function h(d){var p=d.tag;if(p===5||p===26||p===27||p===6)return d;for(d=d.child;d!==null;){if(p=h(d),p!==null)return p;d=d.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),E=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function B(d){return d===null||typeof d!="object"?null:(d=$&&d[$]||d["@@iterator"],typeof d=="function"?d:null)}var q=Symbol.for("react.client.reference");function U(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===q?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case x:return"Fragment";case w:return"Profiler";case _:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList";case k:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case v:return"Portal";case E:return d.displayName||"Context";case S:return(d._context.displayName||"Context")+".Consumer";case A:var p=d.render;return d=d.displayName,d||(d=p.displayName||p.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case R:return p=d.displayName||null,p!==null?p:U(d.type)||"Memo";case D:p=d._payload,d=d._init;try{return U(d(p))}catch{}}return null}var J=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},H=[],ee=-1;function Y(d){return{current:d}}function Z(d){0>ee||(d.current=H[ee],H[ee]=null,ee--)}function K(d,p){ee++,H[ee]=d.current,d.current=p}var X=Y(null),ne=Y(null),G=Y(null),te=Y(null);function ae(d,p){switch(K(G,p),K(ne,d),K(X,null),p.nodeType){case 9:case 11:d=(d=p.documentElement)&&(d=d.namespaceURI)?nm(d):0;break;default:if(d=p.tagName,p=p.namespaceURI)p=nm(p),d=ls(p,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}Z(X),K(X,d)}function pe(){Z(X),Z(ne),Z(G)}function ye(d){d.memoizedState!==null&&K(te,d);var p=X.current,y=ls(p,d.type);p!==y&&(K(ne,d),K(X,y))}function me(d){ne.current===d&&(Z(X),Z(ne)),te.current===d&&(Z(te),nf._currentValue=V)}var fe,ge;function be(d){if(fe===void 0)try{throw Error()}catch(y){var p=y.stack.trim().match(/\n( *(at )?)/);fe=p&&p[1]||"",ge=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fe+d+ge}var oe=!1;function Le(d,p){if(!d||oe)return"";oe=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(p){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(Ye){var He=Ye}Reflect.construct(d,[],st)}else{try{st.call()}catch(Ye){He=Ye}d.call(st.prototype)}}else{try{throw Error()}catch(Ye){He=Ye}(st=d())&&typeof st.catch=="function"&&st.catch(function(){})}}catch(Ye){if(Ye&&He&&typeof Ye.stack=="string")return[Ye.stack,He.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var I=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");I&&I.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var F=C.DetermineComponentFrameRoot(),Q=F[0],le=F[1];if(Q&&le){var Se=Q.split(`
`),Ue=le.split(`
`);for(I=C=0;C<Se.length&&!Se[C].includes("DetermineComponentFrameRoot");)C++;for(;I<Ue.length&&!Ue[I].includes("DetermineComponentFrameRoot");)I++;if(C===Se.length||I===Ue.length)for(C=Se.length-1,I=Ue.length-1;1<=C&&0<=I&&Se[C]!==Ue[I];)I--;for(;1<=C&&0<=I;C--,I--)if(Se[C]!==Ue[I]){if(C!==1||I!==1)do if(C--,I--,0>I||Se[C]!==Ue[I]){var nt=`
`+Se[C].replace(" at new "," at ");return d.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",d.displayName)),nt}while(1<=C&&0<=I);break}}}finally{oe=!1,Error.prepareStackTrace=y}return(y=d?d.displayName||d.name:"")?be(y):""}function Ve(d,p){switch(d.tag){case 26:case 27:case 5:return be(d.type);case 16:return be("Lazy");case 13:return d.child!==p&&p!==null?be("Suspense Fallback"):be("Suspense");case 19:return be("SuspenseList");case 0:case 15:return Le(d.type,!1);case 11:return Le(d.type.render,!1);case 1:return Le(d.type,!0);case 31:return be("Activity");default:return""}}function Ze(d){try{var p="",y=null;do p+=Ve(d,y),y=d,d=d.return;while(d);return p}catch(C){return`
Error generating stack: `+C.message+`
`+C.stack}}var xe=Object.prototype.hasOwnProperty,ht=t.unstable_scheduleCallback,Fe=t.unstable_cancelCallback,et=t.unstable_shouldYield,de=t.unstable_requestPaint,re=t.unstable_now,Ce=t.unstable_getCurrentPriorityLevel,ke=t.unstable_ImmediatePriority,De=t.unstable_UserBlockingPriority,je=t.unstable_NormalPriority,mt=t.unstable_LowPriority,rt=t.unstable_IdlePriority,bt=t.log,dt=t.unstable_setDisableYieldValue,Je=null,ot=null;function It(d){if(typeof bt=="function"&&dt(d),ot&&typeof ot.setStrictMode=="function")try{ot.setStrictMode(Je,d)}catch{}}var Ct=Math.clz32?Math.clz32:we,St=Math.log,Bt=Math.LN2;function we(d){return d>>>=0,d===0?32:31-(St(d)/Bt|0)|0}var xt=256,_t=262144,vt=4194304;function it(d){var p=d&42;if(p!==0)return p;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return d&261888;case 262144:case 524288:case 1048576:case 2097152:return d&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function Qe(d,p,y){var C=d.pendingLanes;if(C===0)return 0;var I=0,F=d.suspendedLanes,Q=d.pingedLanes;d=d.warmLanes;var le=C&134217727;return le!==0?(C=le&~F,C!==0?I=it(C):(Q&=le,Q!==0?I=it(Q):y||(y=le&~d,y!==0&&(I=it(y))))):(le=C&~F,le!==0?I=it(le):Q!==0?I=it(Q):y||(y=C&~d,y!==0&&(I=it(y)))),I===0?0:p!==0&&p!==I&&(p&F)===0&&(F=I&-I,y=p&-p,F>=y||F===32&&(y&4194048)!==0)?p:I}function At(d,p){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&p)===0}function We(d,p){switch(d){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ft(){var d=vt;return vt<<=1,(vt&62914560)===0&&(vt=4194304),d}function yt(d){for(var p=[],y=0;31>y;y++)p.push(d);return p}function gt(d,p){d.pendingLanes|=p,p!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function ln(d,p,y,C,I,F){var Q=d.pendingLanes;d.pendingLanes=y,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=y,d.entangledLanes&=y,d.errorRecoveryDisabledLanes&=y,d.shellSuspendCounter=0;var le=d.entanglements,Se=d.expirationTimes,Ue=d.hiddenUpdates;for(y=Q&~y;0<y;){var nt=31-Ct(y),st=1<<nt;le[nt]=0,Se[nt]=-1;var He=Ue[nt];if(He!==null)for(Ue[nt]=null,nt=0;nt<He.length;nt++){var Ye=He[nt];Ye!==null&&(Ye.lane&=-536870913)}y&=~st}C!==0&&vn(d,C,0),F!==0&&I===0&&d.tag!==0&&(d.suspendedLanes|=F&~(Q&~p))}function vn(d,p,y){d.pendingLanes|=p,d.suspendedLanes&=~p;var C=31-Ct(p);d.entangledLanes|=p,d.entanglements[C]=d.entanglements[C]|1073741824|y&261930}function Mt(d,p){var y=d.entangledLanes|=p;for(d=d.entanglements;y;){var C=31-Ct(y),I=1<<C;I&p|d[C]&p&&(d[C]|=p),y&=~I}}function $t(d,p){var y=p&-p;return y=(y&42)!==0?1:Fn(y),(y&(d.suspendedLanes|p))!==0?0:y}function Fn(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function Rn(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function Ur(){var d=z.p;return d!==0?d:(d=window.event,d===void 0?32:wE(d.type))}function Oa(d,p){var y=z.p;try{return z.p=d,p()}finally{z.p=y}}var ir=Math.random().toString(36).slice(2),Pr="__reactFiber$"+ir,Vr="__reactProps$"+ir,Bi="__reactContainer$"+ir,ws="__reactEvents$"+ir,qc="__reactListeners$"+ir,Wu="__reactHandles$"+ir,uh="__reactResources$"+ir,ec="__reactMarker$"+ir;function qu(d){delete d[Pr],delete d[Vr],delete d[ws],delete d[qc],delete d[Wu]}function gl(d){var p=d[Pr];if(p)return p;for(var y=d.parentNode;y;){if(p=y[Bi]||y[Pr]){if(y=p.alternate,p.child!==null||y!==null&&y.child!==null)for(d=aE(d);d!==null;){if(y=d[Pr])return y;d=aE(d)}return p}d=y,y=d.parentNode}return null}function ue(d){if(d=d[Pr]||d[Bi]){var p=d.tag;if(p===5||p===6||p===13||p===31||p===26||p===27||p===3)return d}return null}function Ae(d){var p=d.tag;if(p===5||p===26||p===27||p===6)return d.stateNode;throw Error(r(33))}function Ge(d){var p=d[uh];return p||(p=d[uh]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function Be(d){d[ec]=!0}var Re=new Set,wt={};function Tt(d,p){Rt(d,p),Rt(d+"Capture",p)}function Rt(d,p){for(wt[d]=p,d=0;d<p.length;d++)Re.add(p[d])}var jt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qt={},nn={};function Zt(d){return xe.call(nn,d)?!0:xe.call(Qt,d)?!1:jt.test(d)?nn[d]=!0:(Qt[d]=!0,!1)}function wn(d,p,y){if(Zt(p))if(y===null)d.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":d.removeAttribute(p);return;case"boolean":var C=p.toLowerCase().slice(0,5);if(C!=="data-"&&C!=="aria-"){d.removeAttribute(p);return}}d.setAttribute(p,""+y)}}function Kn(d,p,y){if(y===null)d.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(p);return}d.setAttribute(p,""+y)}}function Zn(d,p,y,C){if(C===null)d.removeAttribute(y);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(y);return}d.setAttributeNS(p,y,""+C)}}function Bn(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function tr(d){var p=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function en(d,p,y){var C=Object.getOwnPropertyDescriptor(d.constructor.prototype,p);if(!d.hasOwnProperty(p)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var I=C.get,F=C.set;return Object.defineProperty(d,p,{configurable:!0,get:function(){return I.call(this)},set:function(Q){y=""+Q,F.call(this,Q)}}),Object.defineProperty(d,p,{enumerable:C.enumerable}),{getValue:function(){return y},setValue:function(Q){y=""+Q},stopTracking:function(){d._valueTracker=null,delete d[p]}}}}function hr(d){if(!d._valueTracker){var p=tr(d)?"checked":"value";d._valueTracker=en(d,p,""+d[p])}}function Dn(d){if(!d)return!1;var p=d._valueTracker;if(!p)return!0;var y=p.getValue(),C="";return d&&(C=tr(d)?d.checked?"true":"false":d.value),d=C,d!==y?(p.setValue(d),!0):!1}function hi(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var vl=/[\n"\\]/g;function Sr(d){return d.replace(vl,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function Ya(d,p,y,C,I,F,Q,le){d.name="",Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?d.type=Q:d.removeAttribute("type"),p!=null?Q==="number"?(p===0&&d.value===""||d.value!=p)&&(d.value=""+Bn(p)):d.value!==""+Bn(p)&&(d.value=""+Bn(p)):Q!=="submit"&&Q!=="reset"||d.removeAttribute("value"),p!=null?Ri(d,Q,Bn(p)):y!=null?Ri(d,Q,Bn(y)):C!=null&&d.removeAttribute("value"),I==null&&F!=null&&(d.defaultChecked=!!F),I!=null&&(d.checked=I&&typeof I!="function"&&typeof I!="symbol"),le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?d.name=""+Bn(le):d.removeAttribute("name")}function br(d,p,y,C,I,F,Q,le){if(F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(d.type=F),p!=null||y!=null){if(!(F!=="submit"&&F!=="reset"||p!=null)){hr(d);return}y=y!=null?""+Bn(y):"",p=p!=null?""+Bn(p):y,le||p===d.value||(d.value=p),d.defaultValue=p}C=C??I,C=typeof C!="function"&&typeof C!="symbol"&&!!C,d.checked=le?d.checked:!!C,d.defaultChecked=!!C,Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"&&(d.name=Q),hr(d)}function Ri(d,p,y){p==="number"&&hi(d.ownerDocument)===d||d.defaultValue===""+y||(d.defaultValue=""+y)}function si(d,p,y,C){if(d=d.options,p){p={};for(var I=0;I<y.length;I++)p["$"+y[I]]=!0;for(y=0;y<d.length;y++)I=p.hasOwnProperty("$"+d[y].value),d[y].selected!==I&&(d[y].selected=I),I&&C&&(d[y].defaultSelected=!0)}else{for(y=""+Bn(y),p=null,I=0;I<d.length;I++){if(d[I].value===y){d[I].selected=!0,C&&(d[I].defaultSelected=!0);return}p!==null||d[I].disabled||(p=d[I])}p!==null&&(p.selected=!0)}}function Ii(d,p,y){if(p!=null&&(p=""+Bn(p),p!==d.value&&(d.value=p),y==null)){d.defaultValue!==p&&(d.defaultValue=p);return}d.defaultValue=y!=null?""+Bn(y):""}function zi(d,p,y,C){if(p==null){if(C!=null){if(y!=null)throw Error(r(92));if(J(C)){if(1<C.length)throw Error(r(93));C=C[0]}y=C}y==null&&(y=""),p=y}y=Bn(p),d.defaultValue=y,C=d.textContent,C===y&&C!==""&&C!==null&&(d.value=C),hr(d)}function Fa(d,p){if(p){var y=d.firstChild;if(y&&y===d.lastChild&&y.nodeType===3){y.nodeValue=p;return}}d.textContent=p}var yl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qy(d,p,y){var C=p.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?C?d.setProperty(p,""):p==="float"?d.cssFloat="":d[p]="":C?d.setProperty(p,y):typeof y!="number"||y===0||yl.has(p)?p==="float"?d.cssFloat=y:d[p]=(""+y).trim():d[p]=y+"px"}function xw(d,p,y){if(p!=null&&typeof p!="object")throw Error(r(62));if(d=d.style,y!=null){for(var C in y)!y.hasOwnProperty(C)||p!=null&&p.hasOwnProperty(C)||(C.indexOf("--")===0?d.setProperty(C,""):C==="float"?d.cssFloat="":d[C]="");for(var I in p)C=p[I],p.hasOwnProperty(I)&&y[I]!==C&&Qy(d,I,C)}else for(var F in p)p.hasOwnProperty(F)&&Qy(d,F,p[F])}function Dg(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _w=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ww=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qf(d){return ww.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}function tc(){}var eb=null;function tb(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var Ku=null,dh=null;function Sw(d){var p=ue(d);if(p&&(d=p.stateNode)){var y=d[Vr]||null;e:switch(d=p.stateNode,p.type){case"input":if(Ya(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),p=y.name,y.type==="radio"&&p!=null){for(y=d;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+Sr(""+p)+'"][type="radio"]'),p=0;p<y.length;p++){var C=y[p];if(C!==d&&C.form===d.form){var I=C[Vr]||null;if(!I)throw Error(r(90));Ya(C,I.value,I.defaultValue,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name)}}for(p=0;p<y.length;p++)C=y[p],C.form===d.form&&Dn(C)}break e;case"textarea":Ii(d,y.value,y.defaultValue);break e;case"select":p=y.value,p!=null&&si(d,!!y.multiple,p,!1)}}}var nb=!1;function Ew(d,p,y){if(nb)return d(p,y);nb=!0;try{var C=d(p);return C}finally{if(nb=!1,(Ku!==null||dh!==null)&&(I0(),Ku&&(p=Ku,d=dh,dh=Ku=null,Sw(p),d)))for(p=0;p<d.length;p++)Sw(d[p])}}function Xu(d,p){var y=d.stateNode;if(y===null)return null;var C=y[Vr]||null;if(C===null)return null;y=C[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(d=d.type,C=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!C;break e;default:d=!1}if(d)return null;if(y&&typeof y!="function")throw Error(r(231,p,typeof y));return y}var nc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rb=!1;if(nc)try{var ep={};Object.defineProperty(ep,"passive",{get:function(){rb=!0}}),window.addEventListener("test",ep,ep),window.removeEventListener("test",ep,ep)}catch{rb=!1}var Kc=null,ib=null,Nr=null;function jr(){if(Nr)return Nr;var d,p=ib,y=p.length,C,I="value"in Kc?Kc.value:Kc.textContent,F=I.length;for(d=0;d<y&&p[d]===I[d];d++);var Q=y-d;for(C=1;C<=Q&&p[y-C]===I[F-C];C++);return Nr=I.slice(d,1<C?1-C:void 0)}function kg(d){var p=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&p===13&&(d=13)):d=p,d===10&&(d=13),32<=d||d===13?d:0}function Rg(){return!0}function Cw(){return!1}function Za(d){function p(y,C,I,F,Q){this._reactName=y,this._targetInst=I,this.type=C,this.nativeEvent=F,this.target=Q,this.currentTarget=null;for(var le in d)d.hasOwnProperty(le)&&(y=d[le],this[le]=y?y(F):F[le]);return this.isDefaultPrevented=(F.defaultPrevented!=null?F.defaultPrevented:F.returnValue===!1)?Rg:Cw,this.isPropagationStopped=Cw,this}return f(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Rg)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Rg)},persist:function(){},isPersistent:Rg}),p}var Yu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ig=Za(Yu),hh=f({},Yu,{view:0,detail:0}),ZT=Za(hh),Ui,tp,Io,np=f({},hh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rp,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Io&&(Io&&d.type==="mousemove"?(Ui=d.screenX-Io.screenX,tp=d.screenY-Io.screenY):tp=Ui=0,Io=d),Ui)},movementY:function(d){return"movementY"in d?d.movementY:tp}}),$g=Za(np),Ys=f({},np,{dataTransfer:0}),Tw=Za(Ys),Mw=f({},hh,{relatedTarget:0}),jg=Za(Mw),Aw=f({},Yu,{animationName:0,elapsedTime:0,pseudoElement:0}),Pw=Za(Aw),Nw=f({},Yu,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),Ss=Za(Nw),JT=f({},Yu,{data:0}),Es=Za(JT),QT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lg(d){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(d):(d=Xc[d])?!!p[d]:!1}function rp(){return Lg}var Zr=f({},hh,{key:function(d){if(d.key){var p=QT[d.key]||d.key;if(p!=="Unidentified")return p}return d.type==="keypress"?(d=kg(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Dw[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rp,charCode:function(d){return d.type==="keypress"?kg(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?kg(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Yc=Za(Zr),ab=f({},np,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kw=Za(ab),sb=f({},hh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rp}),eM=Za(sb),tM=f({},Yu,{propertyName:0,elapsedTime:0,pseudoElement:0}),nM=Za(tM),Rw=f({},np,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),Og=Za(Rw),fh=f({},Yu,{newState:0,oldState:0}),rM=Za(fh),Iw=[9,13,27,32],Fg=nc&&"CompositionEvent"in window,Zu=null;nc&&"documentMode"in document&&(Zu=document.documentMode);var ob=nc&&"TextEvent"in window&&!Zu,lb=nc&&(!Fg||Zu&&8<Zu&&11>=Zu),$w=" ",Bg=!1;function zg(d,p){switch(d){case"keyup":return Iw.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jw(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Ju=!1;function Cs(d,p){switch(d){case"compositionend":return jw(p);case"keypress":return p.which!==32?null:(Bg=!0,$w);case"textInput":return d=p.data,d===$w&&Bg?null:d;default:return null}}function cb(d,p){if(Ju)return d==="compositionend"||!Fg&&zg(d,p)?(d=jr(),Nr=ib=Kc=null,Ju=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return lb&&p.locale!=="ko"?null:p.data;default:return null}}var ip={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ub(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p==="input"?!!ip[d.type]:p==="textarea"}function db(d,p,y,C){Ku?dh?dh.push(C):dh=[C]:Ku=C,p=Jp(p,"onChange"),0<p.length&&(y=new Ig("onChange","change",null,y,C),d.push({event:y,listeners:p}))}var ap=null,sp=null;function iM(d){YS(d,0)}function Ug(d){var p=Ae(d);if(Dn(p))return d}function Lw(d,p){if(d==="change")return p}var Qu=!1;if(nc){var hb;if(nc){var fb="oninput"in document;if(!fb){var Vg=document.createElement("div");Vg.setAttribute("oninput","return;"),fb=typeof Vg.oninput=="function"}hb=fb}else hb=!1;Qu=hb&&(!document.documentMode||9<document.documentMode)}function pb(){ap&&(ap.detachEvent("onpropertychange",rc),sp=ap=null)}function rc(d){if(d.propertyName==="value"&&Ug(sp)){var p=[];db(p,sp,d,tb(d)),Ew(iM,p)}}function Hg(d,p,y){d==="focusin"?(pb(),ap=p,sp=y,ap.attachEvent("onpropertychange",rc)):d==="focusout"&&pb()}function aM(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Ug(sp)}function sM(d,p){if(d==="click")return Ug(p)}function oM(d,p){if(d==="input"||d==="change")return Ug(p)}function ph(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var oi=typeof Object.is=="function"?Object.is:ph;function mh(d,p){if(oi(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var y=Object.keys(d),C=Object.keys(p);if(y.length!==C.length)return!1;for(C=0;C<y.length;C++){var I=y[C];if(!xe.call(p,I)||!oi(d[I],p[I]))return!1}return!0}function Ow(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Fw(d,p){var y=Ow(d);d=0;for(var C;y;){if(y.nodeType===3){if(C=d+y.textContent.length,d<=p&&C>=p)return{node:y,offset:p-d};d=C}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=Ow(y)}}function Bw(d,p){return d&&p?d===p?!0:d&&d.nodeType===3?!1:p&&p.nodeType===3?Bw(d,p.parentNode):"contains"in d?d.contains(p):d.compareDocumentPosition?!!(d.compareDocumentPosition(p)&16):!1:!1}function zw(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var p=hi(d.document);p instanceof d.HTMLIFrameElement;){try{var y=typeof p.contentWindow.location.href=="string"}catch{y=!1}if(y)d=p.contentWindow;else break;p=hi(d.document)}return p}function mb(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p&&(p==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||p==="textarea"||d.contentEditable==="true")}var gh=nc&&"documentMode"in document&&11>=document.documentMode,Me=null,tt=null,Ke=null,Ot=!1;function yn(d,p,y){var C=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;Ot||Me==null||Me!==hi(C)||(C=Me,"selectionStart"in C&&mb(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),Ke&&mh(Ke,C)||(Ke=C,C=Jp(tt,"onSelect"),0<C.length&&(p=new Ig("onSelect","select",null,p,y),d.push({event:p,listeners:C}),p.target=Me)))}function Hn(d,p){var y={};return y[d.toLowerCase()]=p.toLowerCase(),y["Webkit"+d]="webkit"+p,y["Moz"+d]="moz"+p,y}var Jr={animationend:Hn("Animation","AnimationEnd"),animationiteration:Hn("Animation","AnimationIteration"),animationstart:Hn("Animation","AnimationStart"),transitionrun:Hn("Transition","TransitionRun"),transitionstart:Hn("Transition","TransitionStart"),transitioncancel:Hn("Transition","TransitionCancel"),transitionend:Hn("Transition","TransitionEnd")},Er={},Gg={};nc&&(Gg=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);function ed(d){if(Er[d])return Er[d];if(!Jr[d])return d;var p=Jr[d],y;for(y in p)if(p.hasOwnProperty(y)&&y in Gg)return Er[d]=p[y];return d}var Ts=ed("animationend"),op=ed("animationiteration"),Uw=ed("animationstart"),vh=ed("transitionrun"),Wg=ed("transitionstart"),qg=ed("transitioncancel"),xr=ed("transitionend"),Vw=new Map,Kg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kg.push("scrollEnd");function Ja(d,p){Vw.set(d,p),Tt(p,[d])}var Xg=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)},Zs=[],yh=0,bh=0;function $o(){for(var d=yh,p=bh=yh=0;p<d;){var y=Zs[p];Zs[p++]=null;var C=Zs[p];Zs[p++]=null;var I=Zs[p];Zs[p++]=null;var F=Zs[p];if(Zs[p++]=null,C!==null&&I!==null){var Q=C.pending;Q===null?I.next=I:(I.next=Q.next,Q.next=I),C.pending=I}F!==0&&gb(y,I,F)}}function td(d,p,y,C){Zs[yh++]=d,Zs[yh++]=p,Zs[yh++]=y,Zs[yh++]=C,bh|=C,d.lanes|=C,d=d.alternate,d!==null&&(d.lanes|=C)}function Yg(d,p,y,C){return td(d,p,y,C),lp(d)}function bl(d,p){return td(d,null,null,p),lp(d)}function gb(d,p,y){d.lanes|=y;var C=d.alternate;C!==null&&(C.lanes|=y);for(var I=!1,F=d.return;F!==null;)F.childLanes|=y,C=F.alternate,C!==null&&(C.childLanes|=y),F.tag===22&&(d=F.stateNode,d===null||d._visibility&1||(I=!0)),d=F,F=F.return;return d.tag===3?(F=d.stateNode,I&&p!==null&&(I=31-Ct(y),d=F.hiddenUpdates,C=d[I],C===null?d[I]=[p]:C.push(p),p.lane=y|536870912),F):null}function lp(d){if(50<Gp)throw Gp=0,mx=null,Error(r(185));for(var p=d.return;p!==null;)d=p,p=d.return;return d.tag===3?d.stateNode:null}var ic={};function Hw(d,p,y,C){this.tag=d,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ha(d,p,y,C){return new Hw(d,p,y,C)}function ac(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Js(d,p){var y=d.alternate;return y===null?(y=ha(d.tag,p,d.key,d.mode),y.elementType=d.elementType,y.type=d.type,y.stateNode=d.stateNode,y.alternate=d,d.alternate=y):(y.pendingProps=p,y.type=d.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=d.flags&65011712,y.childLanes=d.childLanes,y.lanes=d.lanes,y.child=d.child,y.memoizedProps=d.memoizedProps,y.memoizedState=d.memoizedState,y.updateQueue=d.updateQueue,p=d.dependencies,y.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},y.sibling=d.sibling,y.index=d.index,y.ref=d.ref,y.refCleanup=d.refCleanup,y}function Gw(d,p){d.flags&=65011714;var y=d.alternate;return y===null?(d.childLanes=0,d.lanes=p,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=y.childLanes,d.lanes=y.lanes,d.child=y.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=y.memoizedProps,d.memoizedState=y.memoizedState,d.updateQueue=y.updateQueue,d.type=y.type,p=y.dependencies,d.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),d}function Zg(d,p,y,C,I,F){var Q=0;if(C=d,typeof d=="function")ac(d)&&(Q=1);else if(typeof d=="string")Q=UM(d,y,X.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case k:return d=ha(31,y,p,I),d.elementType=k,d.lanes=F,d;case x:return nd(y.children,I,F,p);case _:Q=8,I|=24;break;case w:return d=ha(12,y,p,I|2),d.elementType=w,d.lanes=F,d;case N:return d=ha(13,y,p,I),d.elementType=N,d.lanes=F,d;case P:return d=ha(19,y,p,I),d.elementType=P,d.lanes=F,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case E:Q=10;break e;case S:Q=9;break e;case A:Q=11;break e;case R:Q=14;break e;case D:Q=16,C=null;break e}Q=29,y=Error(r(130,d===null?"null":typeof d,"")),C=null}return p=ha(Q,y,p,I),p.elementType=d,p.type=C,p.lanes=F,p}function nd(d,p,y,C){return d=ha(7,d,C,p),d.lanes=y,d}function xh(d,p,y){return d=ha(6,d,null,p),d.lanes=y,d}function cp(d){var p=ha(18,null,null,0);return p.stateNode=d,p}function up(d,p,y){return p=ha(4,d.children!==null?d.children:[],d.key,p),p.lanes=y,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}var Ww=new WeakMap;function Ms(d,p){if(typeof d=="object"&&d!==null){var y=Ww.get(d);return y!==void 0?y:(p={value:d,source:p,stack:Ze(p)},Ww.set(d,p),p)}return{value:d,source:p,stack:Ze(p)}}var _h=[],wh=0,fi=null,$i=0,Qs=[],eo=0,sc=null,xl=1,to="";function As(d,p){_h[wh++]=$i,_h[wh++]=fi,fi=d,$i=p}function Jg(d,p,y){Qs[eo++]=xl,Qs[eo++]=to,Qs[eo++]=sc,sc=d;var C=xl;d=to;var I=32-Ct(C)-1;C&=~(1<<I),y+=1;var F=32-Ct(p)+I;if(30<F){var Q=I-I%5;F=(C&(1<<Q)-1).toString(32),C>>=Q,I-=Q,xl=1<<32-Ct(p)+I|y<<I|C,to=F+d}else xl=1<<F|y<<I|C,to=d}function Zc(d){d.return!==null&&(As(d,1),Jg(d,1,0))}function rd(d){for(;d===fi;)fi=_h[--wh],_h[wh]=null,$i=_h[--wh],_h[wh]=null;for(;d===sc;)sc=Qs[--eo],Qs[eo]=null,to=Qs[--eo],Qs[eo]=null,xl=Qs[--eo],Qs[eo]=null}function Sh(d,p){Qs[eo++]=xl,Qs[eo++]=to,Qs[eo++]=sc,xl=p.id,to=p.overflow,sc=d}var ji=null,_r=null,Jn=!1,Jc=null,no=!1,vb=Error(r(519));function Qc(d){var p=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tu(Ms(p,d)),vb}function dp(d){var p=d.stateNode,y=d.type,C=d.memoizedProps;switch(p[Pr]=d,p[Vr]=C,y){case"dialog":Wn("cancel",p),Wn("close",p);break;case"iframe":case"object":case"embed":Wn("load",p);break;case"video":case"audio":for(y=0;y<Zp.length;y++)Wn(Zp[y],p);break;case"source":Wn("error",p);break;case"img":case"image":case"link":Wn("error",p),Wn("load",p);break;case"details":Wn("toggle",p);break;case"input":Wn("invalid",p),br(p,C.value,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name,!0);break;case"select":Wn("invalid",p);break;case"textarea":Wn("invalid",p),zi(p,C.value,C.defaultValue,C.children)}y=C.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||p.textContent===""+y||C.suppressHydrationWarning===!0||QS(p.textContent,y)?(C.popover!=null&&(Wn("beforetoggle",p),Wn("toggle",p)),C.onScroll!=null&&Wn("scroll",p),C.onScrollEnd!=null&&Wn("scrollend",p),C.onClick!=null&&(p.onclick=tc),p=!0):p=!1,p||Qc(d,!0)}function Eh(d){for(ji=d.return;ji;)switch(ji.tag){case 5:case 31:case 13:no=!1;return;case 27:case 3:no=!0;return;default:ji=ji.return}}function id(d){if(d!==ji)return!1;if(!Jn)return Eh(d),Jn=!0,!1;var p=d.tag,y;if((y=p!==3&&p!==27)&&((y=p===5)&&(y=d.type,y=!(y!=="form"&&y!=="button")||vu(d.type,d.memoizedProps)),y=!y),y&&_r&&Qc(d),Eh(d),p===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));_r=iE(d)}else if(p===31){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));_r=iE(d)}else p===27?(p=_r,cn(d.type)?(d=$x,$x=null,_r=d):_r=p):_r=ji?co(d.stateNode.nextSibling):null;return!0}function ce(){_r=ji=null,Jn=!1}function eu(){var d=Jc;return d!==null&&(as===null?as=d:as.push.apply(as,d),Jc=null),d}function tu(d){Jc===null?Jc=[d]:Jc.push(d)}var Qa=Y(null),Cn=null,oc=null;function nu(d,p,y){K(Qa,p._currentValue),p._currentValue=y}function lc(d){d._currentValue=Qa.current,Z(Qa)}function cc(d,p,y){for(;d!==null;){var C=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,C!==null&&(C.childLanes|=p)):C!==null&&(C.childLanes&p)!==p&&(C.childLanes|=p),d===y)break;d=d.return}}function yb(d,p,y,C){var I=d.child;for(I!==null&&(I.return=d);I!==null;){var F=I.dependencies;if(F!==null){var Q=I.child;F=F.firstContext;e:for(;F!==null;){var le=F;F=I;for(var Se=0;Se<p.length;Se++)if(le.context===p[Se]){F.lanes|=y,le=F.alternate,le!==null&&(le.lanes|=y),cc(F.return,y,d),C||(Q=null);break e}F=le.next}}else if(I.tag===18){if(Q=I.return,Q===null)throw Error(r(341));Q.lanes|=y,F=Q.alternate,F!==null&&(F.lanes|=y),cc(Q,y,d),Q=null}else Q=I.child;if(Q!==null)Q.return=I;else for(Q=I;Q!==null;){if(Q===d){Q=null;break}if(I=Q.sibling,I!==null){I.return=Q.return,Q=I;break}Q=Q.return}I=Q}}function Ch(d,p,y,C){d=null;for(var I=p,F=!1;I!==null;){if(!F){if((I.flags&524288)!==0)F=!0;else if((I.flags&262144)!==0)break}if(I.tag===10){var Q=I.alternate;if(Q===null)throw Error(r(387));if(Q=Q.memoizedProps,Q!==null){var le=I.type;oi(I.pendingProps.value,Q.value)||(d!==null?d.push(le):d=[le])}}else if(I===te.current){if(Q=I.alternate,Q===null)throw Error(r(387));Q.memoizedState.memoizedState!==I.memoizedState.memoizedState&&(d!==null?d.push(nf):d=[nf])}I=I.return}d!==null&&yb(p,d,y,C),p.flags|=262144}function Qg(d){for(d=d.firstContext;d!==null;){if(!oi(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function ad(d){Cn=d,oc=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function fa(d){return qw(Cn,d)}function ro(d,p){return Cn===null&&ad(d),qw(d,p)}function qw(d,p){var y=p._currentValue;if(p={context:p,memoizedValue:y,next:null},oc===null){if(d===null)throw Error(r(308));oc=p,d.dependencies={lanes:0,firstContext:p},d.flags|=524288}else oc=oc.next=p;return y}var lM=typeof AbortController<"u"?AbortController:function(){var d=[],p=this.signal={aborted:!1,addEventListener:function(y,C){d.push(C)}};this.abort=function(){p.aborted=!0,d.forEach(function(y){return y()})}},cM=t.unstable_scheduleCallback,uM=t.unstable_NormalPriority,Li={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jo(){return{controller:new lM,data:new Map,refCount:0}}function hp(d){d.refCount--,d.refCount===0&&cM(uM,function(){d.controller.abort()})}var fp=null,bb=0,Th=0,Mh=null;function sd(d,p){if(fp===null){var y=fp=[];bb=0,Th=Ls(),Mh={status:"pending",value:void 0,then:function(C){y.push(C)}}}return bb++,p.then(Kw,Kw),p}function Kw(){if(--bb===0&&fp!==null){Mh!==null&&(Mh.status="fulfilled");var d=fp;fp=null,Th=0,Mh=null;for(var p=0;p<d.length;p++)(0,d[p])()}}function dM(d,p){var y=[],C={status:"pending",value:null,reason:null,then:function(I){y.push(I)}};return d.then(function(){C.status="fulfilled",C.value=p;for(var I=0;I<y.length;I++)(0,y[I])(p)},function(I){for(C.status="rejected",C.reason=I,I=0;I<y.length;I++)(0,y[I])(void 0)}),C}var io=O.S;O.S=function(d,p){kS=re(),typeof p=="object"&&p!==null&&typeof p.then=="function"&&sd(d,p),io!==null&&io(d,p)};var od=Y(null);function xb(){var d=od.current;return d!==null?d:Or.pooledCache}function e0(d,p){p===null?K(od,od.current):K(od,p.pool)}function Xw(){var d=xb();return d===null?null:{parent:Li._currentValue,pool:d}}var Ah=Error(r(460)),t0=Error(r(474)),pp=Error(r(542)),n0={then:function(){}};function Yw(d){return d=d.status,d==="fulfilled"||d==="rejected"}function r0(d,p,y){switch(y=d[y],y===void 0?d.push(p):y!==p&&(p.then(tc,tc),p=y),p.status){case"fulfilled":return p.value;case"rejected":throw d=p.reason,_b(d),d;default:if(typeof p.status=="string")p.then(tc,tc);else{if(d=Or,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=p,d.status="pending",d.then(function(C){if(p.status==="pending"){var I=p;I.status="fulfilled",I.value=C}},function(C){if(p.status==="pending"){var I=p;I.status="rejected",I.reason=C}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw d=p.reason,_b(d),d}throw _l=p,Ah}}function Lo(d){try{var p=d._init;return p(d._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(_l=y,Ah):y}}var _l=null;function Zw(){if(_l===null)throw Error(r(459));var d=_l;return _l=null,d}function _b(d){if(d===Ah||d===pp)throw Error(r(483))}var Ph=null,Ps=0;function Nh(d){var p=Ps;return Ps+=1,Ph===null&&(Ph=[]),r0(Ph,d,p)}function Oo(d,p){p=p.props.ref,d.ref=p!==void 0?p:null}function Ba(d,p){throw p.$$typeof===m?Error(r(525)):(d=Object.prototype.toString.call(p),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d)))}function Jw(d){function p(Ne,Te){if(d){var ze=Ne.deletions;ze===null?(Ne.deletions=[Te],Ne.flags|=16):ze.push(Te)}}function y(Ne,Te){if(!d)return null;for(;Te!==null;)p(Ne,Te),Te=Te.sibling;return null}function C(Ne){for(var Te=new Map;Ne!==null;)Ne.key!==null?Te.set(Ne.key,Ne):Te.set(Ne.index,Ne),Ne=Ne.sibling;return Te}function I(Ne,Te){return Ne=Js(Ne,Te),Ne.index=0,Ne.sibling=null,Ne}function F(Ne,Te,ze){return Ne.index=ze,d?(ze=Ne.alternate,ze!==null?(ze=ze.index,ze<Te?(Ne.flags|=67108866,Te):ze):(Ne.flags|=67108866,Te)):(Ne.flags|=1048576,Te)}function Q(Ne){return d&&Ne.alternate===null&&(Ne.flags|=67108866),Ne}function le(Ne,Te,ze,at){return Te===null||Te.tag!==6?(Te=xh(ze,Ne.mode,at),Te.return=Ne,Te):(Te=I(Te,ze),Te.return=Ne,Te)}function Se(Ne,Te,ze,at){var tn=ze.type;return tn===x?nt(Ne,Te,ze.props.children,at,ze.key):Te!==null&&(Te.elementType===tn||typeof tn=="object"&&tn!==null&&tn.$$typeof===D&&Lo(tn)===Te.type)?(Te=I(Te,ze.props),Oo(Te,ze),Te.return=Ne,Te):(Te=Zg(ze.type,ze.key,ze.props,null,Ne.mode,at),Oo(Te,ze),Te.return=Ne,Te)}function Ue(Ne,Te,ze,at){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==ze.containerInfo||Te.stateNode.implementation!==ze.implementation?(Te=up(ze,Ne.mode,at),Te.return=Ne,Te):(Te=I(Te,ze.children||[]),Te.return=Ne,Te)}function nt(Ne,Te,ze,at,tn){return Te===null||Te.tag!==7?(Te=nd(ze,Ne.mode,at,tn),Te.return=Ne,Te):(Te=I(Te,ze),Te.return=Ne,Te)}function st(Ne,Te,ze){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return Te=xh(""+Te,Ne.mode,ze),Te.return=Ne,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case g:return ze=Zg(Te.type,Te.key,Te.props,null,Ne.mode,ze),Oo(ze,Te),ze.return=Ne,ze;case v:return Te=up(Te,Ne.mode,ze),Te.return=Ne,Te;case D:return Te=Lo(Te),st(Ne,Te,ze)}if(J(Te)||B(Te))return Te=nd(Te,Ne.mode,ze,null),Te.return=Ne,Te;if(typeof Te.then=="function")return st(Ne,Nh(Te),ze);if(Te.$$typeof===E)return st(Ne,ro(Ne,Te),ze);Ba(Ne,Te)}return null}function He(Ne,Te,ze,at){var tn=Te!==null?Te.key:null;if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return tn!==null?null:le(Ne,Te,""+ze,at);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case g:return ze.key===tn?Se(Ne,Te,ze,at):null;case v:return ze.key===tn?Ue(Ne,Te,ze,at):null;case D:return ze=Lo(ze),He(Ne,Te,ze,at)}if(J(ze)||B(ze))return tn!==null?null:nt(Ne,Te,ze,at,null);if(typeof ze.then=="function")return He(Ne,Te,Nh(ze),at);if(ze.$$typeof===E)return He(Ne,Te,ro(Ne,ze),at);Ba(Ne,ze)}return null}function Ye(Ne,Te,ze,at,tn){if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return Ne=Ne.get(ze)||null,le(Te,Ne,""+at,tn);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case g:return Ne=Ne.get(at.key===null?ze:at.key)||null,Se(Te,Ne,at,tn);case v:return Ne=Ne.get(at.key===null?ze:at.key)||null,Ue(Te,Ne,at,tn);case D:return at=Lo(at),Ye(Ne,Te,ze,at,tn)}if(J(at)||B(at))return Ne=Ne.get(ze)||null,nt(Te,Ne,at,tn,null);if(typeof at.then=="function")return Ye(Ne,Te,ze,Nh(at),tn);if(at.$$typeof===E)return Ye(Ne,Te,ze,ro(Te,at),tn);Ba(Te,at)}return null}function zt(Ne,Te,ze,at){for(var tn=null,lr=null,Wt=Te,Nn=Te=0,Yn=null;Wt!==null&&Nn<ze.length;Nn++){Wt.index>Nn?(Yn=Wt,Wt=null):Yn=Wt.sibling;var cr=He(Ne,Wt,ze[Nn],at);if(cr===null){Wt===null&&(Wt=Yn);break}d&&Wt&&cr.alternate===null&&p(Ne,Wt),Te=F(cr,Te,Nn),lr===null?tn=cr:lr.sibling=cr,lr=cr,Wt=Yn}if(Nn===ze.length)return y(Ne,Wt),Jn&&As(Ne,Nn),tn;if(Wt===null){for(;Nn<ze.length;Nn++)Wt=st(Ne,ze[Nn],at),Wt!==null&&(Te=F(Wt,Te,Nn),lr===null?tn=Wt:lr.sibling=Wt,lr=Wt);return Jn&&As(Ne,Nn),tn}for(Wt=C(Wt);Nn<ze.length;Nn++)Yn=Ye(Wt,Ne,Nn,ze[Nn],at),Yn!==null&&(d&&Yn.alternate!==null&&Wt.delete(Yn.key===null?Nn:Yn.key),Te=F(Yn,Te,Nn),lr===null?tn=Yn:lr.sibling=Yn,lr=Yn);return d&&Wt.forEach(function(Su){return p(Ne,Su)}),Jn&&As(Ne,Nn),tn}function sn(Ne,Te,ze,at){if(ze==null)throw Error(r(151));for(var tn=null,lr=null,Wt=Te,Nn=Te=0,Yn=null,cr=ze.next();Wt!==null&&!cr.done;Nn++,cr=ze.next()){Wt.index>Nn?(Yn=Wt,Wt=null):Yn=Wt.sibling;var Su=He(Ne,Wt,cr.value,at);if(Su===null){Wt===null&&(Wt=Yn);break}d&&Wt&&Su.alternate===null&&p(Ne,Wt),Te=F(Su,Te,Nn),lr===null?tn=Su:lr.sibling=Su,lr=Su,Wt=Yn}if(cr.done)return y(Ne,Wt),Jn&&As(Ne,Nn),tn;if(Wt===null){for(;!cr.done;Nn++,cr=ze.next())cr=st(Ne,cr.value,at),cr!==null&&(Te=F(cr,Te,Nn),lr===null?tn=cr:lr.sibling=cr,lr=cr);return Jn&&As(Ne,Nn),tn}for(Wt=C(Wt);!cr.done;Nn++,cr=ze.next())cr=Ye(Wt,Ne,Nn,cr.value,at),cr!==null&&(d&&cr.alternate!==null&&Wt.delete(cr.key===null?Nn:cr.key),Te=F(cr,Te,Nn),lr===null?tn=cr:lr.sibling=cr,lr=cr);return d&&Wt.forEach(function(YM){return p(Ne,YM)}),Jn&&As(Ne,Nn),tn}function Rr(Ne,Te,ze,at){if(typeof ze=="object"&&ze!==null&&ze.type===x&&ze.key===null&&(ze=ze.props.children),typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case g:e:{for(var tn=ze.key;Te!==null;){if(Te.key===tn){if(tn=ze.type,tn===x){if(Te.tag===7){y(Ne,Te.sibling),at=I(Te,ze.props.children),at.return=Ne,Ne=at;break e}}else if(Te.elementType===tn||typeof tn=="object"&&tn!==null&&tn.$$typeof===D&&Lo(tn)===Te.type){y(Ne,Te.sibling),at=I(Te,ze.props),Oo(at,ze),at.return=Ne,Ne=at;break e}y(Ne,Te);break}else p(Ne,Te);Te=Te.sibling}ze.type===x?(at=nd(ze.props.children,Ne.mode,at,ze.key),at.return=Ne,Ne=at):(at=Zg(ze.type,ze.key,ze.props,null,Ne.mode,at),Oo(at,ze),at.return=Ne,Ne=at)}return Q(Ne);case v:e:{for(tn=ze.key;Te!==null;){if(Te.key===tn)if(Te.tag===4&&Te.stateNode.containerInfo===ze.containerInfo&&Te.stateNode.implementation===ze.implementation){y(Ne,Te.sibling),at=I(Te,ze.children||[]),at.return=Ne,Ne=at;break e}else{y(Ne,Te);break}else p(Ne,Te);Te=Te.sibling}at=up(ze,Ne.mode,at),at.return=Ne,Ne=at}return Q(Ne);case D:return ze=Lo(ze),Rr(Ne,Te,ze,at)}if(J(ze))return zt(Ne,Te,ze,at);if(B(ze)){if(tn=B(ze),typeof tn!="function")throw Error(r(150));return ze=tn.call(ze),sn(Ne,Te,ze,at)}if(typeof ze.then=="function")return Rr(Ne,Te,Nh(ze),at);if(ze.$$typeof===E)return Rr(Ne,Te,ro(Ne,ze),at);Ba(Ne,ze)}return typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint"?(ze=""+ze,Te!==null&&Te.tag===6?(y(Ne,Te.sibling),at=I(Te,ze),at.return=Ne,Ne=at):(y(Ne,Te),at=xh(ze,Ne.mode,at),at.return=Ne,Ne=at),Q(Ne)):y(Ne,Te)}return function(Ne,Te,ze,at){try{Ps=0;var tn=Rr(Ne,Te,ze,at);return Ph=null,tn}catch(Wt){if(Wt===Ah||Wt===pp)throw Wt;var lr=ha(29,Wt,null,Ne.mode);return lr.lanes=at,lr.return=Ne,lr}finally{}}}var ru=Jw(!0),wb=Jw(!1),ao=!1;function wl(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function i0(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function iu(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function Fo(d,p,y){var C=d.updateQueue;if(C===null)return null;if(C=C.shared,(fr&2)!==0){var I=C.pending;return I===null?p.next=p:(p.next=I.next,I.next=p),C.pending=p,p=lp(d),gb(d,null,y),p}return td(d,C,p,y),lp(d)}function mp(d,p,y){if(p=p.updateQueue,p!==null&&(p=p.shared,(y&4194048)!==0)){var C=p.lanes;C&=d.pendingLanes,y|=C,p.lanes=y,Mt(d,y)}}function a0(d,p){var y=d.updateQueue,C=d.alternate;if(C!==null&&(C=C.updateQueue,y===C)){var I=null,F=null;if(y=y.firstBaseUpdate,y!==null){do{var Q={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};F===null?I=F=Q:F=F.next=Q,y=y.next}while(y!==null);F===null?I=F=p:F=F.next=p}else I=F=p;y={baseState:C.baseState,firstBaseUpdate:I,lastBaseUpdate:F,shared:C.shared,callbacks:C.callbacks},d.updateQueue=y;return}d=y.lastBaseUpdate,d===null?y.firstBaseUpdate=p:d.next=p,y.lastBaseUpdate=p}var Vi=!1;function ld(){if(Vi){var d=Mh;if(d!==null)throw d}}function Dh(d,p,y,C){Vi=!1;var I=d.updateQueue;ao=!1;var F=I.firstBaseUpdate,Q=I.lastBaseUpdate,le=I.shared.pending;if(le!==null){I.shared.pending=null;var Se=le,Ue=Se.next;Se.next=null,Q===null?F=Ue:Q.next=Ue,Q=Se;var nt=d.alternate;nt!==null&&(nt=nt.updateQueue,le=nt.lastBaseUpdate,le!==Q&&(le===null?nt.firstBaseUpdate=Ue:le.next=Ue,nt.lastBaseUpdate=Se))}if(F!==null){var st=I.baseState;Q=0,nt=Ue=Se=null,le=F;do{var He=le.lane&-536870913,Ye=He!==le.lane;if(Ye?(Xn&He)===He:(C&He)===He){He!==0&&He===Th&&(Vi=!0),nt!==null&&(nt=nt.next={lane:0,tag:le.tag,payload:le.payload,callback:null,next:null});e:{var zt=d,sn=le;He=p;var Rr=y;switch(sn.tag){case 1:if(zt=sn.payload,typeof zt=="function"){st=zt.call(Rr,st,He);break e}st=zt;break e;case 3:zt.flags=zt.flags&-65537|128;case 0:if(zt=sn.payload,He=typeof zt=="function"?zt.call(Rr,st,He):zt,He==null)break e;st=f({},st,He);break e;case 2:ao=!0}}He=le.callback,He!==null&&(d.flags|=64,Ye&&(d.flags|=8192),Ye=I.callbacks,Ye===null?I.callbacks=[He]:Ye.push(He))}else Ye={lane:He,tag:le.tag,payload:le.payload,callback:le.callback,next:null},nt===null?(Ue=nt=Ye,Se=st):nt=nt.next=Ye,Q|=He;if(le=le.next,le===null){if(le=I.shared.pending,le===null)break;Ye=le,le=Ye.next,Ye.next=null,I.lastBaseUpdate=Ye,I.shared.pending=null}}while(!0);nt===null&&(Se=st),I.baseState=Se,I.firstBaseUpdate=Ue,I.lastBaseUpdate=nt,F===null&&(I.shared.lanes=0),hu|=Q,d.lanes=Q,d.memoizedState=st}}function Bo(d,p){if(typeof d!="function")throw Error(r(191,d));d.call(p)}function s0(d,p){var y=d.callbacks;if(y!==null)for(d.callbacks=null,d=0;d<y.length;d++)Bo(y[d],p)}var uc=Y(null),Sl=Y(0);function Sb(d,p){d=Wo,K(Sl,d),K(uc,p),Wo=d|p.baseLanes}function pa(){K(Sl,Wo),K(uc,uc.current)}function gp(){Wo=Sl.current,Z(uc),Z(Sl)}var Ns=Y(null),so=null;function au(d){var p=d.alternate;K(Ti,Ti.current&1),K(Ns,d),so===null&&(p===null||uc.current!==null||p.memoizedState!==null)&&(so=d)}function vp(d){K(Ti,Ti.current),K(Ns,d),so===null&&(so=d)}function Qw(d){d.tag===22?(K(Ti,Ti.current),K(Ns,d),so===null&&(so=d)):oo()}function oo(){K(Ti,Ti.current),K(Ns,Ns.current)}function es(d){Z(Ns),so===d&&(so=null),Z(Ti)}var Ti=Y(0);function o0(d){for(var p=d;p!==null;){if(p.tag===13){var y=p.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||H0(y)||Yh(y)))return p}else if(p.tag===19&&(p.memoizedProps.revealOrder==="forwards"||p.memoizedProps.revealOrder==="backwards"||p.memoizedProps.revealOrder==="unstable_legacy-backwards"||p.memoizedProps.revealOrder==="together")){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Ds=0,Tn=null,Dr=null,pi=null,yp=!1,kh=!1,cd=!1,l0=0,Rh=0,su=null,hM=0;function Qr(){throw Error(r(321))}function c0(d,p){if(p===null)return!1;for(var y=0;y<p.length&&y<d.length;y++)if(!oi(d[y],p[y]))return!1;return!0}function u0(d,p,y,C,I,F){return Ds=F,Tn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,O.H=d===null||d.memoizedState===null?uS:b0,cd=!1,F=y(C,I),cd=!1,kh&&(F=bp(p,y,C,I)),Eb(d),F}function Eb(d){O.H=lu;var p=Dr!==null&&Dr.next!==null;if(Ds=0,pi=Dr=Tn=null,yp=!1,Rh=0,su=null,p)throw Error(r(300));d===null||li||(d=d.dependencies,d!==null&&Qg(d)&&(li=!0))}function bp(d,p,y,C){Tn=d;var I=0;do{if(kh&&(su=null),Rh=0,kh=!1,25<=I)throw Error(r(301));if(I+=1,pi=Dr=null,d.updateQueue!=null){var F=d.updateQueue;F.lastEffect=null,F.events=null,F.stores=null,F.memoCache!=null&&(F.memoCache.index=0)}O.H=Mp,F=p(y,C)}while(kh);return F}function fM(){var d=O.H,p=d.useState()[0];return p=typeof p.then=="function"?$h(p):p,d=d.useState()[0],(Dr!==null?Dr.memoizedState:null)!==d&&(Tn.flags|=1024),p}function d0(){var d=l0!==0;return l0=0,d}function h0(d,p,y){p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~y}function Cb(d){if(yp){for(d=d.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}yp=!1}Ds=0,pi=Dr=Tn=null,kh=!1,Rh=l0=0,su=null}function Ea(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pi===null?Tn.memoizedState=pi=d:pi=pi.next=d,pi}function Mi(){if(Dr===null){var d=Tn.alternate;d=d!==null?d.memoizedState:null}else d=Dr.next;var p=pi===null?Tn.memoizedState:pi.next;if(p!==null)pi=p,Dr=d;else{if(d===null)throw Tn.alternate===null?Error(r(467)):Error(r(310));Dr=d,d={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},pi===null?Tn.memoizedState=pi=d:pi=pi.next=d}return pi}function Ih(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $h(d){var p=Rh;return Rh+=1,su===null&&(su=[]),d=r0(su,d,p),p=Tn,(pi===null?p.memoizedState:pi.next)===null&&(p=p.alternate,O.H=p===null||p.memoizedState===null?uS:b0),d}function jh(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return $h(d);if(d.$$typeof===E)return fa(d)}throw Error(r(438,String(d)))}function Tb(d){var p=null,y=Tn.updateQueue;if(y!==null&&(p=y.memoCache),p==null){var C=Tn.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(p={data:C.data.map(function(I){return I.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),y===null&&(y=Ih(),Tn.updateQueue=y),y.memoCache=p,y=p.data[p.index],y===void 0)for(y=p.data[p.index]=Array(d),C=0;C<d;C++)y[C]=L;return p.index++,y}function zo(d,p){return typeof p=="function"?p(d):p}function Mn(d){var p=Mi();return Mb(p,Dr,d)}function Mb(d,p,y){var C=d.queue;if(C===null)throw Error(r(311));C.lastRenderedReducer=y;var I=d.baseQueue,F=C.pending;if(F!==null){if(I!==null){var Q=I.next;I.next=F.next,F.next=Q}p.baseQueue=I=F,C.pending=null}if(F=d.baseState,I===null)d.memoizedState=F;else{p=I.next;var le=Q=null,Se=null,Ue=p,nt=!1;do{var st=Ue.lane&-536870913;if(st!==Ue.lane?(Xn&st)===st:(Ds&st)===st){var He=Ue.revertLane;if(He===0)Se!==null&&(Se=Se.next={lane:0,revertLane:0,gesture:null,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null}),st===Th&&(nt=!0);else if((Ds&He)===He){Ue=Ue.next,He===Th&&(nt=!0);continue}else st={lane:0,revertLane:Ue.revertLane,gesture:null,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},Se===null?(le=Se=st,Q=F):Se=Se.next=st,Tn.lanes|=He,hu|=He;st=Ue.action,cd&&y(F,st),F=Ue.hasEagerState?Ue.eagerState:y(F,st)}else He={lane:st,revertLane:Ue.revertLane,gesture:Ue.gesture,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},Se===null?(le=Se=He,Q=F):Se=Se.next=He,Tn.lanes|=st,hu|=st;Ue=Ue.next}while(Ue!==null&&Ue!==p);if(Se===null?Q=F:Se.next=le,!oi(F,d.memoizedState)&&(li=!0,nt&&(y=Mh,y!==null)))throw y;d.memoizedState=F,d.baseState=Q,d.baseQueue=Se,C.lastRenderedState=F}return I===null&&(C.lanes=0),[d.memoizedState,C.dispatch]}function Ab(d){var p=Mi(),y=p.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=d;var C=y.dispatch,I=y.pending,F=p.memoizedState;if(I!==null){y.pending=null;var Q=I=I.next;do F=d(F,Q.action),Q=Q.next;while(Q!==I);oi(F,p.memoizedState)||(li=!0),p.memoizedState=F,p.baseQueue===null&&(p.baseState=F),y.lastRenderedState=F}return[F,C]}function Lh(d,p,y){var C=Tn,I=Mi(),F=Jn;if(F){if(y===void 0)throw Error(r(407));y=y()}else y=p();var Q=!oi((Dr||I).memoizedState,y);if(Q&&(I.memoizedState=y,li=!0),I=I.queue,Sp(tS.bind(null,C,I,d),[d]),I.getSnapshot!==p||Q||pi!==null&&pi.memoizedState.tag&1){if(C.flags|=2048,Rs(9,{destroy:void 0},eS.bind(null,C,I,y,p),null),Or===null)throw Error(r(349));F||(Ds&127)!==0||Pb(C,p,y)}return y}function Pb(d,p,y){d.flags|=16384,d={getSnapshot:p,value:y},p=Tn.updateQueue,p===null?(p=Ih(),Tn.updateQueue=p,p.stores=[d]):(y=p.stores,y===null?p.stores=[d]:y.push(d))}function eS(d,p,y,C){p.value=y,p.getSnapshot=C,ks(p)&&nS(d)}function tS(d,p,y){return y(function(){ks(p)&&nS(d)})}function ks(d){var p=d.getSnapshot;d=d.value;try{var y=p();return!oi(d,y)}catch{return!0}}function nS(d){var p=bl(d,2);p!==null&&ss(p,d,2)}function Oh(d){var p=Ea();if(typeof d=="function"){var y=d;if(d=y(),cd){It(!0);try{y()}finally{It(!1)}}}return p.memoizedState=p.baseState=d,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:d},p}function f0(d,p,y,C){return d.baseState=y,Mb(d,Dr,typeof C=="function"?C:zo)}function rS(d,p,y,C,I){if(Cp(d))throw Error(r(485));if(d=p.action,d!==null){var F={payload:I,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Q){F.listeners.push(Q)}};O.T!==null?y(!0):F.isTransition=!1,C(F),y=p.pending,y===null?(F.next=p.pending=F,Nb(p,F)):(F.next=y.next,p.pending=y.next=F)}}function Nb(d,p){var y=p.action,C=p.payload,I=d.state;if(p.isTransition){var F=O.T,Q={};O.T=Q;try{var le=y(I,C),Se=O.S;Se!==null&&Se(Q,le),ts(d,p,le)}catch(Ue){xp(d,p,Ue)}finally{F!==null&&Q.types!==null&&(F.types=Q.types),O.T=F}}else try{F=y(I,C),ts(d,p,F)}catch(Ue){xp(d,p,Ue)}}function ts(d,p,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(C){dc(d,p,C)},function(C){return xp(d,p,C)}):dc(d,p,y)}function dc(d,p,y){p.status="fulfilled",p.value=y,Db(p),d.state=y,p=d.pending,p!==null&&(y=p.next,y===p?d.pending=null:(y=y.next,p.next=y,Nb(d,y)))}function xp(d,p,y){var C=d.pending;if(d.pending=null,C!==null){C=C.next;do p.status="rejected",p.reason=y,Db(p),p=p.next;while(p!==C)}d.action=null}function Db(d){d=d.listeners;for(var p=0;p<d.length;p++)(0,d[p])()}function _p(d,p){return p}function kb(d,p){if(Jn){var y=Or.formState;if(y!==null){e:{var C=Tn;if(Jn){if(_r){t:{for(var I=_r,F=no;I.nodeType!==8;){if(!F){I=null;break t}if(I=co(I.nextSibling),I===null){I=null;break t}}F=I.data,I=F==="F!"||F==="F"?I:null}if(I){_r=co(I.nextSibling),C=I.data==="F!";break e}}Qc(C)}C=!1}C&&(p=y[0])}}return y=Ea(),y.memoizedState=y.baseState=p,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_p,lastRenderedState:p},y.queue=C,y=Vb.bind(null,Tn,C),C.dispatch=y,C=Oh(!1),F=Bh.bind(null,Tn,!1,C.queue),C=Ea(),I={state:p,dispatch:null,action:d,pending:null},C.queue=I,y=rS.bind(null,Tn,I,F,y),I.dispatch=y,C.memoizedState=d,[p,y,!1]}function p0(d){var p=Mi();return Rb(p,Dr,d)}function Rb(d,p,y){if(p=Mb(d,p,_p)[0],d=Mn(zo)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var C=$h(p)}catch(Q){throw Q===Ah?pp:Q}else C=p;p=Mi();var I=p.queue,F=I.dispatch;return y!==p.memoizedState&&(Tn.flags|=2048,Rs(9,{destroy:void 0},Ib.bind(null,I,y),null)),[C,F,d]}function Ib(d,p){d.action=p}function m0(d){var p=Mi(),y=Dr;if(y!==null)return Rb(p,y,d);Mi(),p=p.memoizedState,y=Mi();var C=y.queue.dispatch;return y.memoizedState=d,[p,C,!1]}function Rs(d,p,y,C){return d={tag:d,create:y,deps:C,inst:p,next:null},p=Tn.updateQueue,p===null&&(p=Ih(),Tn.updateQueue=p),y=p.lastEffect,y===null?p.lastEffect=d.next=d:(C=y.next,y.next=d,d.next=C,p.lastEffect=d),d}function iS(){return Mi().memoizedState}function Uo(d,p,y,C){var I=Ea();Tn.flags|=d,I.memoizedState=Rs(1|p,{destroy:void 0},y,C===void 0?null:C)}function wp(d,p,y,C){var I=Mi();C=C===void 0?null:C;var F=I.memoizedState.inst;Dr!==null&&C!==null&&c0(C,Dr.memoizedState.deps)?I.memoizedState=Rs(p,F,y,C):(Tn.flags|=d,I.memoizedState=Rs(1|p,F,y,C))}function $b(d,p){Uo(8390656,8,d,p)}function Sp(d,p){wp(2048,8,d,p)}function pM(d){Tn.flags|=4;var p=Tn.updateQueue;if(p===null)p=Ih(),Tn.updateQueue=p,p.events=[d];else{var y=p.events;y===null?p.events=[d]:y.push(d)}}function aS(d){var p=Mi().memoizedState;return pM({ref:p,nextImpl:d}),function(){if((fr&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}function sS(d,p){return wp(4,2,d,p)}function jb(d,p){return wp(4,4,d,p)}function Lb(d,p){if(typeof p=="function"){d=d();var y=p(d);return function(){typeof y=="function"?y():p(null)}}if(p!=null)return d=d(),p.current=d,function(){p.current=null}}function oS(d,p,y){y=y!=null?y.concat([d]):null,wp(4,4,Lb.bind(null,p,d),y)}function g0(){}function Ob(d,p){var y=Mi();p=p===void 0?null:p;var C=y.memoizedState;return p!==null&&c0(p,C[1])?C[0]:(y.memoizedState=[d,p],d)}function za(d,p){var y=Mi();p=p===void 0?null:p;var C=y.memoizedState;if(p!==null&&c0(p,C[1]))return C[0];if(C=d(),cd){It(!0);try{d()}finally{It(!1)}}return y.memoizedState=[C,p],C}function lo(d,p,y){return y===void 0||(Ds&1073741824)!==0&&(Xn&261930)===0?d.memoizedState=p:(d.memoizedState=y,d=IS(),Tn.lanes|=d,hu|=d,y)}function lS(d,p,y,C){return oi(y,p)?y:uc.current!==null?(d=lo(d,y,C),oi(d,p)||(li=!0),d):(Ds&42)===0||(Ds&1073741824)!==0&&(Xn&261930)===0?(li=!0,d.memoizedState=y):(d=IS(),Tn.lanes|=d,hu|=d,p)}function cS(d,p,y,C,I){var F=z.p;z.p=F!==0&&8>F?F:8;var Q=O.T,le={};O.T=le,Bh(d,!1,p,y);try{var Se=I(),Ue=O.S;if(Ue!==null&&Ue(le,Se),Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var nt=dM(Se,C);Fh(d,p,nt,js(d))}else Fh(d,p,C,js(d))}catch(st){Fh(d,p,{then:function(){},status:"rejected",reason:st},js())}finally{z.p=F,Q!==null&&le.types!==null&&(Q.types=le.types),O.T=Q}}function v0(){}function ou(d,p,y,C){if(d.tag!==5)throw Error(r(476));var I=Fb(d).queue;cS(d,I,p,V,y===null?v0:function(){return Bb(d),y(C)})}function Fb(d){var p=d.memoizedState;if(p!==null)return p;p={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:V},next:null};var y={};return p.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:y},next:null},d.memoizedState=p,d=d.alternate,d!==null&&(d.memoizedState=p),p}function Bb(d){var p=Fb(d);p.next===null&&(p=d.alternate.memoizedState),Fh(d,p.next.queue,{},js())}function zb(){return fa(nf)}function Ub(){return Mi().memoizedState}function ud(){return Mi().memoizedState}function Ep(d){for(var p=d.return;p!==null;){switch(p.tag){case 24:case 3:var y=js();d=iu(y);var C=Fo(p,d,y);C!==null&&(ss(C,p,y),mp(C,p,y)),p={cache:jo()},d.payload=p;return}p=p.return}}function mM(d,p,y){var C=js();y={lane:C,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},Cp(d)?Tp(p,y):(y=Yg(d,p,y,C),y!==null&&(ss(y,d,C),y0(y,p,C)))}function Vb(d,p,y){var C=js();Fh(d,p,y,C)}function Fh(d,p,y,C){var I={lane:C,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(Cp(d))Tp(p,I);else{var F=d.alternate;if(d.lanes===0&&(F===null||F.lanes===0)&&(F=p.lastRenderedReducer,F!==null))try{var Q=p.lastRenderedState,le=F(Q,y);if(I.hasEagerState=!0,I.eagerState=le,oi(le,Q))return td(d,p,I,0),Or===null&&$o(),!1}catch{}finally{}if(y=Yg(d,p,I,C),y!==null)return ss(y,d,C),y0(y,p,C),!0}return!1}function Bh(d,p,y,C){if(C={lane:2,revertLane:Ls(),gesture:null,action:C,hasEagerState:!1,eagerState:null,next:null},Cp(d)){if(p)throw Error(r(479))}else p=Yg(d,y,C,2),p!==null&&ss(p,d,2)}function Cp(d){var p=d.alternate;return d===Tn||p!==null&&p===Tn}function Tp(d,p){kh=yp=!0;var y=d.pending;y===null?p.next=p:(p.next=y.next,y.next=p),d.pending=p}function y0(d,p,y){if((y&4194048)!==0){var C=p.lanes;C&=d.pendingLanes,y|=C,p.lanes=y,Mt(d,y)}}var lu={readContext:fa,use:jh,useCallback:Qr,useContext:Qr,useEffect:Qr,useImperativeHandle:Qr,useLayoutEffect:Qr,useInsertionEffect:Qr,useMemo:Qr,useReducer:Qr,useRef:Qr,useState:Qr,useDebugValue:Qr,useDeferredValue:Qr,useTransition:Qr,useSyncExternalStore:Qr,useId:Qr,useHostTransitionStatus:Qr,useFormState:Qr,useActionState:Qr,useOptimistic:Qr,useMemoCache:Qr,useCacheRefresh:Qr};lu.useEffectEvent=Qr;var uS={readContext:fa,use:jh,useCallback:function(d,p){return Ea().memoizedState=[d,p===void 0?null:p],d},useContext:fa,useEffect:$b,useImperativeHandle:function(d,p,y){y=y!=null?y.concat([d]):null,Uo(4194308,4,Lb.bind(null,p,d),y)},useLayoutEffect:function(d,p){return Uo(4194308,4,d,p)},useInsertionEffect:function(d,p){Uo(4,2,d,p)},useMemo:function(d,p){var y=Ea();p=p===void 0?null:p;var C=d();if(cd){It(!0);try{d()}finally{It(!1)}}return y.memoizedState=[C,p],C},useReducer:function(d,p,y){var C=Ea();if(y!==void 0){var I=y(p);if(cd){It(!0);try{y(p)}finally{It(!1)}}}else I=p;return C.memoizedState=C.baseState=I,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:I},C.queue=d,d=d.dispatch=mM.bind(null,Tn,d),[C.memoizedState,d]},useRef:function(d){var p=Ea();return d={current:d},p.memoizedState=d},useState:function(d){d=Oh(d);var p=d.queue,y=Vb.bind(null,Tn,p);return p.dispatch=y,[d.memoizedState,y]},useDebugValue:g0,useDeferredValue:function(d,p){var y=Ea();return lo(y,d,p)},useTransition:function(){var d=Oh(!1);return d=cS.bind(null,Tn,d.queue,!0,!1),Ea().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,p,y){var C=Tn,I=Ea();if(Jn){if(y===void 0)throw Error(r(407));y=y()}else{if(y=p(),Or===null)throw Error(r(349));(Xn&127)!==0||Pb(C,p,y)}I.memoizedState=y;var F={value:y,getSnapshot:p};return I.queue=F,$b(tS.bind(null,C,F,d),[d]),C.flags|=2048,Rs(9,{destroy:void 0},eS.bind(null,C,F,y,p),null),y},useId:function(){var d=Ea(),p=Or.identifierPrefix;if(Jn){var y=to,C=xl;y=(C&~(1<<32-Ct(C)-1)).toString(32)+y,p="_"+p+"R_"+y,y=l0++,0<y&&(p+="H"+y.toString(32)),p+="_"}else y=hM++,p="_"+p+"r_"+y.toString(32)+"_";return d.memoizedState=p},useHostTransitionStatus:zb,useFormState:kb,useActionState:kb,useOptimistic:function(d){var p=Ea();p.memoizedState=p.baseState=d;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=y,p=Bh.bind(null,Tn,!0,y),y.dispatch=p,[d,p]},useMemoCache:Tb,useCacheRefresh:function(){return Ea().memoizedState=Ep.bind(null,Tn)},useEffectEvent:function(d){var p=Ea(),y={impl:d};return p.memoizedState=y,function(){if((fr&2)!==0)throw Error(r(440));return y.impl.apply(void 0,arguments)}}},b0={readContext:fa,use:jh,useCallback:Ob,useContext:fa,useEffect:Sp,useImperativeHandle:oS,useInsertionEffect:sS,useLayoutEffect:jb,useMemo:za,useReducer:Mn,useRef:iS,useState:function(){return Mn(zo)},useDebugValue:g0,useDeferredValue:function(d,p){var y=Mi();return lS(y,Dr.memoizedState,d,p)},useTransition:function(){var d=Mn(zo)[0],p=Mi().memoizedState;return[typeof d=="boolean"?d:$h(d),p]},useSyncExternalStore:Lh,useId:Ub,useHostTransitionStatus:zb,useFormState:p0,useActionState:p0,useOptimistic:function(d,p){var y=Mi();return f0(y,Dr,d,p)},useMemoCache:Tb,useCacheRefresh:ud};b0.useEffectEvent=aS;var Mp={readContext:fa,use:jh,useCallback:Ob,useContext:fa,useEffect:Sp,useImperativeHandle:oS,useInsertionEffect:sS,useLayoutEffect:jb,useMemo:za,useReducer:Ab,useRef:iS,useState:function(){return Ab(zo)},useDebugValue:g0,useDeferredValue:function(d,p){var y=Mi();return Dr===null?lo(y,d,p):lS(y,Dr.memoizedState,d,p)},useTransition:function(){var d=Ab(zo)[0],p=Mi().memoizedState;return[typeof d=="boolean"?d:$h(d),p]},useSyncExternalStore:Lh,useId:Ub,useHostTransitionStatus:zb,useFormState:m0,useActionState:m0,useOptimistic:function(d,p){var y=Mi();return Dr!==null?f0(y,Dr,d,p):(y.baseState=d,[d,y.queue.dispatch])},useMemoCache:Tb,useCacheRefresh:ud};Mp.useEffectEvent=aS;function x0(d,p,y,C){p=d.memoizedState,y=y(C,p),y=y==null?p:f({},p,y),d.memoizedState=y,d.lanes===0&&(d.updateQueue.baseState=y)}var Ap={enqueueSetState:function(d,p,y){d=d._reactInternals;var C=js(),I=iu(C);I.payload=p,y!=null&&(I.callback=y),p=Fo(d,I,C),p!==null&&(ss(p,d,C),mp(p,d,C))},enqueueReplaceState:function(d,p,y){d=d._reactInternals;var C=js(),I=iu(C);I.tag=1,I.payload=p,y!=null&&(I.callback=y),p=Fo(d,I,C),p!==null&&(ss(p,d,C),mp(p,d,C))},enqueueForceUpdate:function(d,p){d=d._reactInternals;var y=js(),C=iu(y);C.tag=2,p!=null&&(C.callback=p),p=Fo(d,C,y),p!==null&&(ss(p,d,y),mp(p,d,y))}};function dS(d,p,y,C,I,F,Q){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(C,F,Q):p.prototype&&p.prototype.isPureReactComponent?!mh(y,C)||!mh(I,F):!0}function Hb(d,p,y,C){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(y,C),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(y,C),p.state!==d&&Ap.enqueueReplaceState(p,p.state,null)}function Ua(d,p){var y=p;if("ref"in p){y={};for(var C in p)C!=="ref"&&(y[C]=p[C])}if(d=d.defaultProps){y===p&&(y=f({},y));for(var I in d)y[I]===void 0&&(y[I]=d[I])}return y}function Gb(d){Xg(d)}function Wb(d){console.error(d)}function hS(d){Xg(d)}function Pp(d,p){try{var y=d.onUncaughtError;y(p.value,{componentStack:p.stack})}catch(C){setTimeout(function(){throw C})}}function fS(d,p,y){try{var C=d.onCaughtError;C(y.value,{componentStack:y.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(I){setTimeout(function(){throw I})}}function qb(d,p,y){return y=iu(y),y.tag=3,y.payload={element:null},y.callback=function(){Pp(d,p)},y}function El(d){return d=iu(d),d.tag=3,d}function _0(d,p,y,C){var I=y.type.getDerivedStateFromError;if(typeof I=="function"){var F=C.value;d.payload=function(){return I(F)},d.callback=function(){fS(p,y,C)}}var Q=y.stateNode;Q!==null&&typeof Q.componentDidCatch=="function"&&(d.callback=function(){fS(p,y,C),typeof I!="function"&&(fu===null?fu=new Set([this]):fu.add(this));var le=C.stack;this.componentDidCatch(C.value,{componentStack:le!==null?le:""})})}function Kb(d,p,y,C,I){if(y.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(p=y.alternate,p!==null&&Ch(p,y,I,!0),y=Ns.current,y!==null){switch(y.tag){case 31:case 13:return so===null?$0():y.alternate===null&&ci===0&&(ci=3),y.flags&=-257,y.flags|=65536,y.lanes=I,C===n0?y.flags|=16384:(p=y.updateQueue,p===null?y.updateQueue=new Set([C]):p.add(C),Sx(d,C,I)),!1;case 22:return y.flags|=65536,C===n0?y.flags|=16384:(p=y.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([C])},y.updateQueue=p):(y=p.retryQueue,y===null?p.retryQueue=new Set([C]):y.add(C)),Sx(d,C,I)),!1}throw Error(r(435,y.tag))}return Sx(d,C,I),$0(),!1}if(Jn)return p=Ns.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=I,C!==vb&&(d=Error(r(422),{cause:C}),tu(Ms(d,y)))):(C!==vb&&(p=Error(r(423),{cause:C}),tu(Ms(p,y))),d=d.current.alternate,d.flags|=65536,I&=-I,d.lanes|=I,C=Ms(C,y),I=qb(d.stateNode,C,I),a0(d,I),ci!==4&&(ci=2)),!1;var F=Error(r(520),{cause:C});if(F=Ms(F,y),Vp===null?Vp=[F]:Vp.push(F),ci!==4&&(ci=2),p===null)return!0;C=Ms(C,y),y=p;do{switch(y.tag){case 3:return y.flags|=65536,d=I&-I,y.lanes|=d,d=qb(y.stateNode,C,d),a0(y,d),!1;case 1:if(p=y.type,F=y.stateNode,(y.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(fu===null||!fu.has(F))))return y.flags|=65536,I&=-I,y.lanes|=I,I=El(I),_0(I,d,y,C),a0(y,I),!1}y=y.return}while(y!==null);return!1}var Np=Error(r(461)),li=!1;function mi(d,p,y,C){p.child=d===null?wb(p,null,y,C):ru(p,d.child,y,C)}function rn(d,p,y,C,I){y=y.render;var F=p.ref;if("ref"in C){var Q={};for(var le in C)le!=="ref"&&(Q[le]=C[le])}else Q=C;return ad(p),C=u0(d,p,y,Q,F,I),le=d0(),d!==null&&!li?(h0(d,p,I),Cl(d,p,I)):(Jn&&le&&Zc(p),p.flags|=1,mi(d,p,C,I),p.child)}function Dp(d,p,y,C,I){if(d===null){var F=y.type;return typeof F=="function"&&!ac(F)&&F.defaultProps===void 0&&y.compare===null?(p.tag=15,p.type=F,w0(d,p,F,C,I)):(d=Zg(y.type,null,C,p,p.mode,I),d.ref=p.ref,d.return=p,p.child=d)}if(F=d.child,!M0(d,I)){var Q=F.memoizedProps;if(y=y.compare,y=y!==null?y:mh,y(Q,C)&&d.ref===p.ref)return Cl(d,p,I)}return p.flags|=1,d=Js(F,C),d.ref=p.ref,d.return=p,p.child=d}function w0(d,p,y,C,I){if(d!==null){var F=d.memoizedProps;if(mh(F,C)&&d.ref===p.ref)if(li=!1,p.pendingProps=C=F,M0(d,I))(d.flags&131072)!==0&&(li=!0);else return p.lanes=d.lanes,Cl(d,p,I)}return C0(d,p,y,C,I)}function cu(d,p,y,C){var I=C.children,F=d!==null?d.memoizedState:null;if(d===null&&p.stateNode===null&&(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),C.mode==="hidden"){if((p.flags&128)!==0){if(F=F!==null?F.baseLanes|y:y,d!==null){for(C=p.child=d.child,I=0;C!==null;)I=I|C.lanes|C.childLanes,C=C.sibling;C=I&~F}else C=0,p.child=null;return S0(d,p,F,y,C)}if((y&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},d!==null&&e0(p,F!==null?F.cachePool:null),F!==null?Sb(p,F):pa(),Qw(p);else return C=p.lanes=536870912,S0(d,p,F!==null?F.baseLanes|y:y,y,C)}else F!==null?(e0(p,F.cachePool),Sb(p,F),oo(),p.memoizedState=null):(d!==null&&e0(p,null),pa(),oo());return mi(d,p,I,y),p.child}function kp(d,p){return d!==null&&d.tag===22||p.stateNode!==null||(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.sibling}function S0(d,p,y,C,I){var F=xb();return F=F===null?null:{parent:Li._currentValue,pool:F},p.memoizedState={baseLanes:y,cachePool:F},d!==null&&e0(p,null),pa(),Qw(p),d!==null&&Ch(d,p,C,!0),p.childLanes=I,null}function Rp(d,p){return p=T0({mode:p.mode,children:p.children},d.mode),p.ref=d.ref,d.child=p,p.return=d,p}function ma(d,p,y){return ru(p,d.child,null,y),d=Rp(p,p.pendingProps),d.flags|=2,es(p),p.memoizedState=null,d}function gM(d,p,y){var C=p.pendingProps,I=(p.flags&128)!==0;if(p.flags&=-129,d===null){if(Jn){if(C.mode==="hidden")return d=Rp(p,C),p.lanes=536870912,kp(null,d);if(vp(p),(d=_r)?(d=rE(d,no),d=d!==null&&d.data==="&"?d:null,d!==null&&(p.memoizedState={dehydrated:d,treeContext:sc!==null?{id:xl,overflow:to}:null,retryLane:536870912,hydrationErrors:null},y=cp(d),y.return=p,p.child=y,ji=p,_r=null)):d=null,d===null)throw Qc(p);return p.lanes=536870912,null}return Rp(p,C)}var F=d.memoizedState;if(F!==null){var Q=F.dehydrated;if(vp(p),I)if(p.flags&256)p.flags&=-257,p=ma(d,p,y);else if(p.memoizedState!==null)p.child=d.child,p.flags|=128,p=null;else throw Error(r(558));else if(li||Ch(d,p,y,!1),I=(y&d.childLanes)!==0,li||I){if(C=Or,C!==null&&(Q=$t(C,y),Q!==0&&Q!==F.retryLane))throw F.retryLane=Q,bl(d,Q),ss(C,d,Q),Np;$0(),p=ma(d,p,y)}else d=F.treeContext,_r=co(Q.nextSibling),ji=p,Jn=!0,Jc=null,no=!1,d!==null&&Sh(p,d),p=Rp(p,C),p.flags|=4096;return p}return d=Js(d.child,{mode:C.mode,children:C.children}),d.ref=p.ref,p.child=d,d.return=p,d}function E0(d,p){var y=p.ref;if(y===null)d!==null&&d.ref!==null&&(p.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(d===null||d.ref!==y)&&(p.flags|=4194816)}}function C0(d,p,y,C,I){return ad(p),y=u0(d,p,y,C,void 0,I),C=d0(),d!==null&&!li?(h0(d,p,I),Cl(d,p,I)):(Jn&&C&&Zc(p),p.flags|=1,mi(d,p,y,I),p.child)}function pS(d,p,y,C,I,F){return ad(p),p.updateQueue=null,y=bp(p,C,y,I),Eb(d),C=d0(),d!==null&&!li?(h0(d,p,F),Cl(d,p,F)):(Jn&&C&&Zc(p),p.flags|=1,mi(d,p,y,F),p.child)}function Xb(d,p,y,C,I){if(ad(p),p.stateNode===null){var F=ic,Q=y.contextType;typeof Q=="object"&&Q!==null&&(F=fa(Q)),F=new y(C,F),p.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,F.updater=Ap,p.stateNode=F,F._reactInternals=p,F=p.stateNode,F.props=C,F.state=p.memoizedState,F.refs={},wl(p),Q=y.contextType,F.context=typeof Q=="object"&&Q!==null?fa(Q):ic,F.state=p.memoizedState,Q=y.getDerivedStateFromProps,typeof Q=="function"&&(x0(p,y,Q,C),F.state=p.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(Q=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),Q!==F.state&&Ap.enqueueReplaceState(F,F.state,null),Dh(p,C,F,I),ld(),F.state=p.memoizedState),typeof F.componentDidMount=="function"&&(p.flags|=4194308),C=!0}else if(d===null){F=p.stateNode;var le=p.memoizedProps,Se=Ua(y,le);F.props=Se;var Ue=F.context,nt=y.contextType;Q=ic,typeof nt=="object"&&nt!==null&&(Q=fa(nt));var st=y.getDerivedStateFromProps;nt=typeof st=="function"||typeof F.getSnapshotBeforeUpdate=="function",le=p.pendingProps!==le,nt||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(le||Ue!==Q)&&Hb(p,F,C,Q),ao=!1;var He=p.memoizedState;F.state=He,Dh(p,C,F,I),ld(),Ue=p.memoizedState,le||He!==Ue||ao?(typeof st=="function"&&(x0(p,y,st,C),Ue=p.memoizedState),(Se=ao||dS(p,y,Se,C,He,Ue,Q))?(nt||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(p.flags|=4194308)):(typeof F.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=C,p.memoizedState=Ue),F.props=C,F.state=Ue,F.context=Q,C=Se):(typeof F.componentDidMount=="function"&&(p.flags|=4194308),C=!1)}else{F=p.stateNode,i0(d,p),Q=p.memoizedProps,nt=Ua(y,Q),F.props=nt,st=p.pendingProps,He=F.context,Ue=y.contextType,Se=ic,typeof Ue=="object"&&Ue!==null&&(Se=fa(Ue)),le=y.getDerivedStateFromProps,(Ue=typeof le=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(Q!==st||He!==Se)&&Hb(p,F,C,Se),ao=!1,He=p.memoizedState,F.state=He,Dh(p,C,F,I),ld();var Ye=p.memoizedState;Q!==st||He!==Ye||ao||d!==null&&d.dependencies!==null&&Qg(d.dependencies)?(typeof le=="function"&&(x0(p,y,le,C),Ye=p.memoizedState),(nt=ao||dS(p,y,nt,C,He,Ye,Se)||d!==null&&d.dependencies!==null&&Qg(d.dependencies))?(Ue||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(C,Ye,Se),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(C,Ye,Se)),typeof F.componentDidUpdate=="function"&&(p.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof F.componentDidUpdate!="function"||Q===d.memoizedProps&&He===d.memoizedState||(p.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||Q===d.memoizedProps&&He===d.memoizedState||(p.flags|=1024),p.memoizedProps=C,p.memoizedState=Ye),F.props=C,F.state=Ye,F.context=Se,C=nt):(typeof F.componentDidUpdate!="function"||Q===d.memoizedProps&&He===d.memoizedState||(p.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||Q===d.memoizedProps&&He===d.memoizedState||(p.flags|=1024),C=!1)}return F=C,E0(d,p),C=(p.flags&128)!==0,F||C?(F=p.stateNode,y=C&&typeof y.getDerivedStateFromError!="function"?null:F.render(),p.flags|=1,d!==null&&C?(p.child=ru(p,d.child,null,I),p.child=ru(p,null,y,I)):mi(d,p,y,I),p.memoizedState=F.state,d=p.child):d=Cl(d,p,I),d}function mS(d,p,y,C){return ce(),p.flags|=256,mi(d,p,y,C),p.child}var Yb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zb(d){return{baseLanes:d,cachePool:Xw()}}function Vo(d,p,y){return d=d!==null?d.childLanes&~y:0,p&&(d|=$s),d}function Ca(d,p,y){var C=p.pendingProps,I=!1,F=(p.flags&128)!==0,Q;if((Q=F)||(Q=d!==null&&d.memoizedState===null?!1:(Ti.current&2)!==0),Q&&(I=!0,p.flags&=-129),Q=(p.flags&32)!==0,p.flags&=-33,d===null){if(Jn){if(I?au(p):oo(),(d=_r)?(d=rE(d,no),d=d!==null&&d.data!=="&"?d:null,d!==null&&(p.memoizedState={dehydrated:d,treeContext:sc!==null?{id:xl,overflow:to}:null,retryLane:536870912,hydrationErrors:null},y=cp(d),y.return=p,p.child=y,ji=p,_r=null)):d=null,d===null)throw Qc(p);return Yh(d)?p.lanes=32:p.lanes=536870912,null}var le=C.children;return C=C.fallback,I?(oo(),I=p.mode,le=T0({mode:"hidden",children:le},I),C=nd(C,I,y,null),le.return=p,C.return=p,le.sibling=C,p.child=le,C=p.child,C.memoizedState=Zb(y),C.childLanes=Vo(d,Q,y),p.memoizedState=Yb,kp(null,C)):(au(p),Ip(p,le))}var Se=d.memoizedState;if(Se!==null&&(le=Se.dehydrated,le!==null)){if(F)p.flags&256?(au(p),p.flags&=-257,p=$p(d,p,y)):p.memoizedState!==null?(oo(),p.child=d.child,p.flags|=128,p=null):(oo(),le=C.fallback,I=p.mode,C=T0({mode:"visible",children:C.children},I),le=nd(le,I,y,null),le.flags|=2,C.return=p,le.return=p,C.sibling=le,p.child=C,ru(p,d.child,null,y),C=p.child,C.memoizedState=Zb(y),C.childLanes=Vo(d,Q,y),p.memoizedState=Yb,p=kp(null,C));else if(au(p),Yh(le)){if(Q=le.nextSibling&&le.nextSibling.dataset,Q)var Ue=Q.dgst;Q=Ue,C=Error(r(419)),C.stack="",C.digest=Q,tu({value:C,source:null,stack:null}),p=$p(d,p,y)}else if(li||Ch(d,p,y,!1),Q=(y&d.childLanes)!==0,li||Q){if(Q=Or,Q!==null&&(C=$t(Q,y),C!==0&&C!==Se.retryLane))throw Se.retryLane=C,bl(d,C),ss(Q,d,C),Np;H0(le)||$0(),p=$p(d,p,y)}else H0(le)?(p.flags|=192,p.child=d.child,p=null):(d=Se.treeContext,_r=co(le.nextSibling),ji=p,Jn=!0,Jc=null,no=!1,d!==null&&Sh(p,d),p=Ip(p,C.children),p.flags|=4096);return p}return I?(oo(),le=C.fallback,I=p.mode,Se=d.child,Ue=Se.sibling,C=Js(Se,{mode:"hidden",children:C.children}),C.subtreeFlags=Se.subtreeFlags&65011712,Ue!==null?le=Js(Ue,le):(le=nd(le,I,y,null),le.flags|=2),le.return=p,C.return=p,C.sibling=le,p.child=C,kp(null,C),C=p.child,le=d.child.memoizedState,le===null?le=Zb(y):(I=le.cachePool,I!==null?(Se=Li._currentValue,I=I.parent!==Se?{parent:Se,pool:Se}:I):I=Xw(),le={baseLanes:le.baseLanes|y,cachePool:I}),C.memoizedState=le,C.childLanes=Vo(d,Q,y),p.memoizedState=Yb,kp(d.child,C)):(au(p),y=d.child,d=y.sibling,y=Js(y,{mode:"visible",children:C.children}),y.return=p,y.sibling=null,d!==null&&(Q=p.deletions,Q===null?(p.deletions=[d],p.flags|=16):Q.push(d)),p.child=y,p.memoizedState=null,y)}function Ip(d,p){return p=T0({mode:"visible",children:p},d.mode),p.return=d,d.child=p}function T0(d,p){return d=ha(22,d,null,p),d.lanes=0,d}function $p(d,p,y){return ru(p,d.child,null,y),d=Ip(p,p.pendingProps.children),d.flags|=2,p.memoizedState=null,d}function gS(d,p,y){d.lanes|=p;var C=d.alternate;C!==null&&(C.lanes|=p),cc(d.return,p,y)}function Jb(d,p,y,C,I,F){var Q=d.memoizedState;Q===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:C,tail:y,tailMode:I,treeForkCount:F}:(Q.isBackwards=p,Q.rendering=null,Q.renderingStartTime=0,Q.last=C,Q.tail=y,Q.tailMode=I,Q.treeForkCount=F)}function zh(d,p,y){var C=p.pendingProps,I=C.revealOrder,F=C.tail;C=C.children;var Q=Ti.current,le=(Q&2)!==0;if(le?(Q=Q&1|2,p.flags|=128):Q&=1,K(Ti,Q),mi(d,p,C,y),C=Jn?$i:0,!le&&d!==null&&(d.flags&128)!==0)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&gS(d,y,p);else if(d.tag===19)gS(d,y,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}switch(I){case"forwards":for(y=p.child,I=null;y!==null;)d=y.alternate,d!==null&&o0(d)===null&&(I=y),y=y.sibling;y=I,y===null?(I=p.child,p.child=null):(I=y.sibling,y.sibling=null),Jb(p,!1,I,y,F,C);break;case"backwards":case"unstable_legacy-backwards":for(y=null,I=p.child,p.child=null;I!==null;){if(d=I.alternate,d!==null&&o0(d)===null){p.child=I;break}d=I.sibling,I.sibling=y,y=I,I=d}Jb(p,!0,y,null,F,C);break;case"together":Jb(p,!1,null,null,void 0,C);break;default:p.memoizedState=null}return p.child}function Cl(d,p,y){if(d!==null&&(p.dependencies=d.dependencies),hu|=p.lanes,(y&p.childLanes)===0)if(d!==null){if(Ch(d,p,y,!1),(y&p.childLanes)===0)return null}else return null;if(d!==null&&p.child!==d.child)throw Error(r(153));if(p.child!==null){for(d=p.child,y=Js(d,d.pendingProps),p.child=y,y.return=p;d.sibling!==null;)d=d.sibling,y=y.sibling=Js(d,d.pendingProps),y.return=p;y.sibling=null}return p.child}function M0(d,p){return(d.lanes&p)!==0?!0:(d=d.dependencies,!!(d!==null&&Qg(d)))}function vM(d,p,y){switch(p.tag){case 3:ae(p,p.stateNode.containerInfo),nu(p,Li,d.memoizedState.cache),ce();break;case 27:case 5:ye(p);break;case 4:ae(p,p.stateNode.containerInfo);break;case 10:nu(p,p.type,p.memoizedProps.value);break;case 31:if(p.memoizedState!==null)return p.flags|=128,vp(p),null;break;case 13:var C=p.memoizedState;if(C!==null)return C.dehydrated!==null?(au(p),p.flags|=128,null):(y&p.child.childLanes)!==0?Ca(d,p,y):(au(p),d=Cl(d,p,y),d!==null?d.sibling:null);au(p);break;case 19:var I=(d.flags&128)!==0;if(C=(y&p.childLanes)!==0,C||(Ch(d,p,y,!1),C=(y&p.childLanes)!==0),I){if(C)return zh(d,p,y);p.flags|=128}if(I=p.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),K(Ti,Ti.current),C)break;return null;case 22:return p.lanes=0,cu(d,p,y,p.pendingProps);case 24:nu(p,Li,d.memoizedState.cache)}return Cl(d,p,y)}function vS(d,p,y){if(d!==null)if(d.memoizedProps!==p.pendingProps)li=!0;else{if(!M0(d,y)&&(p.flags&128)===0)return li=!1,vM(d,p,y);li=(d.flags&131072)!==0}else li=!1,Jn&&(p.flags&1048576)!==0&&Jg(p,$i,p.index);switch(p.lanes=0,p.tag){case 16:e:{var C=p.pendingProps;if(d=Lo(p.elementType),p.type=d,typeof d=="function")ac(d)?(C=Ua(d,C),p.tag=1,p=Xb(null,p,d,C,y)):(p.tag=0,p=C0(null,p,d,C,y));else{if(d!=null){var I=d.$$typeof;if(I===A){p.tag=11,p=rn(null,p,d,C,y);break e}else if(I===R){p.tag=14,p=Dp(null,p,d,C,y);break e}}throw p=U(d)||d,Error(r(306,p,""))}}return p;case 0:return C0(d,p,p.type,p.pendingProps,y);case 1:return C=p.type,I=Ua(C,p.pendingProps),Xb(d,p,C,I,y);case 3:e:{if(ae(p,p.stateNode.containerInfo),d===null)throw Error(r(387));C=p.pendingProps;var F=p.memoizedState;I=F.element,i0(d,p),Dh(p,C,null,y);var Q=p.memoizedState;if(C=Q.cache,nu(p,Li,C),C!==F.cache&&yb(p,[Li],y,!0),ld(),C=Q.element,F.isDehydrated)if(F={element:C,isDehydrated:!1,cache:Q.cache},p.updateQueue.baseState=F,p.memoizedState=F,p.flags&256){p=mS(d,p,C,y);break e}else if(C!==I){I=Ms(Error(r(424)),p),tu(I),p=mS(d,p,C,y);break e}else{switch(d=p.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(_r=co(d.firstChild),ji=p,Jn=!0,Jc=null,no=!0,y=wb(p,null,C,y),p.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(ce(),C===I){p=Cl(d,p,y);break e}mi(d,p,C,y)}p=p.child}return p;case 26:return E0(d,p),d===null?(y=cE(p.type,null,p.pendingProps,null))?p.memoizedState=y:Jn||(y=p.type,d=p.pendingProps,C=tm(G.current).createElement(y),C[Pr]=p,C[Vr]=d,ga(C,y,d),Be(C),p.stateNode=C):p.memoizedState=cE(p.type,d.memoizedProps,p.pendingProps,d.memoizedState),null;case 27:return ye(p),d===null&&Jn&&(C=p.stateNode=sE(p.type,p.pendingProps,G.current),ji=p,no=!0,I=_r,cn(p.type)?($x=I,_r=co(C.firstChild)):_r=I),mi(d,p,p.pendingProps.children,y),E0(d,p),d===null&&(p.flags|=4194304),p.child;case 5:return d===null&&Jn&&((I=C=_r)&&(C=RM(C,p.type,p.pendingProps,no),C!==null?(p.stateNode=C,ji=p,_r=co(C.firstChild),no=!1,I=!0):I=!1),I||Qc(p)),ye(p),I=p.type,F=p.pendingProps,Q=d!==null?d.memoizedProps:null,C=F.children,vu(I,F)?C=null:Q!==null&&vu(I,Q)&&(p.flags|=32),p.memoizedState!==null&&(I=u0(d,p,fM,null,null,y),nf._currentValue=I),E0(d,p),mi(d,p,C,y),p.child;case 6:return d===null&&Jn&&((d=y=_r)&&(y=wr(y,p.pendingProps,no),y!==null?(p.stateNode=y,ji=p,_r=null,d=!0):d=!1),d||Qc(p)),null;case 13:return Ca(d,p,y);case 4:return ae(p,p.stateNode.containerInfo),C=p.pendingProps,d===null?p.child=ru(p,null,C,y):mi(d,p,C,y),p.child;case 11:return rn(d,p,p.type,p.pendingProps,y);case 7:return mi(d,p,p.pendingProps,y),p.child;case 8:return mi(d,p,p.pendingProps.children,y),p.child;case 12:return mi(d,p,p.pendingProps.children,y),p.child;case 10:return C=p.pendingProps,nu(p,p.type,C.value),mi(d,p,C.children,y),p.child;case 9:return I=p.type._context,C=p.pendingProps.children,ad(p),I=fa(I),C=C(I),p.flags|=1,mi(d,p,C,y),p.child;case 14:return Dp(d,p,p.type,p.pendingProps,y);case 15:return w0(d,p,p.type,p.pendingProps,y);case 19:return zh(d,p,y);case 31:return gM(d,p,y);case 22:return cu(d,p,y,p.pendingProps);case 24:return ad(p),C=fa(Li),d===null?(I=xb(),I===null&&(I=Or,F=jo(),I.pooledCache=F,F.refCount++,F!==null&&(I.pooledCacheLanes|=y),I=F),p.memoizedState={parent:C,cache:I},wl(p),nu(p,Li,I)):((d.lanes&y)!==0&&(i0(d,p),Dh(p,null,null,y),ld()),I=d.memoizedState,F=p.memoizedState,I.parent!==C?(I={parent:C,cache:C},p.memoizedState=I,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=I),nu(p,Li,C)):(C=F.cache,nu(p,Li,C),C!==I.cache&&yb(p,[Li],y,!0))),mi(d,p,p.pendingProps.children,y),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function hc(d){d.flags|=4}function Qb(d,p,y,C,I){if((p=(d.mode&32)!==0)&&(p=!1),p){if(d.flags|=16777216,(I&335544128)===I)if(d.stateNode.complete)d.flags|=8192;else if(Wp())d.flags|=8192;else throw _l=n0,t0}else d.flags&=-16777217}function ex(d,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!pE(p))if(Wp())d.flags|=8192;else throw _l=n0,t0}function jp(d,p){p!==null&&(d.flags|=4),d.flags&16384&&(p=d.tag!==22?ft():536870912,d.lanes|=p,Gh|=p)}function Lp(d,p){if(!Jn)switch(d.tailMode){case"hidden":p=d.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?d.tail=null:y.sibling=null;break;case"collapsed":y=d.tail;for(var C=null;y!==null;)y.alternate!==null&&(C=y),y=y.sibling;C===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:C.sibling=null}}function Lr(d){var p=d.alternate!==null&&d.alternate.child===d.child,y=0,C=0;if(p)for(var I=d.child;I!==null;)y|=I.lanes|I.childLanes,C|=I.subtreeFlags&65011712,C|=I.flags&65011712,I.return=d,I=I.sibling;else for(I=d.child;I!==null;)y|=I.lanes|I.childLanes,C|=I.subtreeFlags,C|=I.flags,I.return=d,I=I.sibling;return d.subtreeFlags|=C,d.childLanes=y,p}function yS(d,p,y){var C=p.pendingProps;switch(rd(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lr(p),null;case 1:return Lr(p),null;case 3:return y=p.stateNode,C=null,d!==null&&(C=d.memoizedState.cache),p.memoizedState.cache!==C&&(p.flags|=2048),lc(Li),pe(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(d===null||d.child===null)&&(id(p)?hc(p):d===null||d.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,eu())),Lr(p),null;case 26:var I=p.type,F=p.memoizedState;return d===null?(hc(p),F!==null?(Lr(p),ex(p,F)):(Lr(p),Qb(p,I,null,C,y))):F?F!==d.memoizedState?(hc(p),Lr(p),ex(p,F)):(Lr(p),p.flags&=-16777217):(d=d.memoizedProps,d!==C&&hc(p),Lr(p),Qb(p,I,d,C,y)),null;case 27:if(me(p),y=G.current,I=p.type,d!==null&&p.stateNode!=null)d.memoizedProps!==C&&hc(p);else{if(!C){if(p.stateNode===null)throw Error(r(166));return Lr(p),null}d=X.current,id(p)?dp(p):(d=sE(I,C,y),p.stateNode=d,hc(p))}return Lr(p),null;case 5:if(me(p),I=p.type,d!==null&&p.stateNode!=null)d.memoizedProps!==C&&hc(p);else{if(!C){if(p.stateNode===null)throw Error(r(166));return Lr(p),null}if(F=X.current,id(p))dp(p);else{var Q=tm(G.current);switch(F){case 1:F=Q.createElementNS("http://www.w3.org/2000/svg",I);break;case 2:F=Q.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;default:switch(I){case"svg":F=Q.createElementNS("http://www.w3.org/2000/svg",I);break;case"math":F=Q.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;case"script":F=Q.createElement("div"),F.innerHTML="<script><\/script>",F=F.removeChild(F.firstChild);break;case"select":F=typeof C.is=="string"?Q.createElement("select",{is:C.is}):Q.createElement("select"),C.multiple?F.multiple=!0:C.size&&(F.size=C.size);break;default:F=typeof C.is=="string"?Q.createElement(I,{is:C.is}):Q.createElement(I)}}F[Pr]=p,F[Vr]=C;e:for(Q=p.child;Q!==null;){if(Q.tag===5||Q.tag===6)F.appendChild(Q.stateNode);else if(Q.tag!==4&&Q.tag!==27&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===p)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===p)break e;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}p.stateNode=F;e:switch(ga(F,I,C),I){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}C&&hc(p)}}return Lr(p),Qb(p,p.type,d===null?null:d.memoizedProps,p.pendingProps,y),null;case 6:if(d&&p.stateNode!=null)d.memoizedProps!==C&&hc(p);else{if(typeof C!="string"&&p.stateNode===null)throw Error(r(166));if(d=G.current,id(p)){if(d=p.stateNode,y=p.memoizedProps,C=null,I=ji,I!==null)switch(I.tag){case 27:case 5:C=I.memoizedProps}d[Pr]=p,d=!!(d.nodeValue===y||C!==null&&C.suppressHydrationWarning===!0||QS(d.nodeValue,y)),d||Qc(p,!0)}else d=tm(d).createTextNode(C),d[Pr]=p,p.stateNode=d}return Lr(p),null;case 31:if(y=p.memoizedState,d===null||d.memoizedState!==null){if(C=id(p),y!==null){if(d===null){if(!C)throw Error(r(318));if(d=p.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(557));d[Pr]=p}else ce(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Lr(p),d=!1}else y=eu(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=y),d=!0;if(!d)return p.flags&256?(es(p),p):(es(p),null);if((p.flags&128)!==0)throw Error(r(558))}return Lr(p),null;case 13:if(C=p.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(I=id(p),C!==null&&C.dehydrated!==null){if(d===null){if(!I)throw Error(r(318));if(I=p.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(r(317));I[Pr]=p}else ce(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Lr(p),I=!1}else I=eu(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=I),I=!0;if(!I)return p.flags&256?(es(p),p):(es(p),null)}return es(p),(p.flags&128)!==0?(p.lanes=y,p):(y=C!==null,d=d!==null&&d.memoizedState!==null,y&&(C=p.child,I=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(I=C.alternate.memoizedState.cachePool.pool),F=null,C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(F=C.memoizedState.cachePool.pool),F!==I&&(C.flags|=2048)),y!==d&&y&&(p.child.flags|=8192),jp(p,p.updateQueue),Lr(p),null);case 4:return pe(),d===null&&Ax(p.stateNode.containerInfo),Lr(p),null;case 10:return lc(p.type),Lr(p),null;case 19:if(Z(Ti),C=p.memoizedState,C===null)return Lr(p),null;if(I=(p.flags&128)!==0,F=C.rendering,F===null)if(I)Lp(C,!1);else{if(ci!==0||d!==null&&(d.flags&128)!==0)for(d=p.child;d!==null;){if(F=o0(d),F!==null){for(p.flags|=128,Lp(C,!1),d=F.updateQueue,p.updateQueue=d,jp(p,d),p.subtreeFlags=0,d=y,y=p.child;y!==null;)Gw(y,d),y=y.sibling;return K(Ti,Ti.current&1|2),Jn&&As(p,C.treeForkCount),p.child}d=d.sibling}C.tail!==null&&re()>fd&&(p.flags|=128,I=!0,Lp(C,!1),p.lanes=4194304)}else{if(!I)if(d=o0(F),d!==null){if(p.flags|=128,I=!0,d=d.updateQueue,p.updateQueue=d,jp(p,d),Lp(C,!0),C.tail===null&&C.tailMode==="hidden"&&!F.alternate&&!Jn)return Lr(p),null}else 2*re()-C.renderingStartTime>fd&&y!==536870912&&(p.flags|=128,I=!0,Lp(C,!1),p.lanes=4194304);C.isBackwards?(F.sibling=p.child,p.child=F):(d=C.last,d!==null?d.sibling=F:p.child=F,C.last=F)}return C.tail!==null?(d=C.tail,C.rendering=d,C.tail=d.sibling,C.renderingStartTime=re(),d.sibling=null,y=Ti.current,K(Ti,I?y&1|2:y&1),Jn&&As(p,C.treeForkCount),d):(Lr(p),null);case 22:case 23:return es(p),gp(),C=p.memoizedState!==null,d!==null?d.memoizedState!==null!==C&&(p.flags|=8192):C&&(p.flags|=8192),C?(y&536870912)!==0&&(p.flags&128)===0&&(Lr(p),p.subtreeFlags&6&&(p.flags|=8192)):Lr(p),y=p.updateQueue,y!==null&&jp(p,y.retryQueue),y=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),C=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),C!==y&&(p.flags|=2048),d!==null&&Z(od),null;case 24:return y=null,d!==null&&(y=d.memoizedState.cache),p.memoizedState.cache!==y&&(p.flags|=2048),lc(Li),Lr(p),null;case 25:return null;case 30:return null}throw Error(r(156,p.tag))}function Op(d,p){switch(rd(p),p.tag){case 1:return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 3:return lc(Li),pe(),d=p.flags,(d&65536)!==0&&(d&128)===0?(p.flags=d&-65537|128,p):null;case 26:case 27:case 5:return me(p),null;case 31:if(p.memoizedState!==null){if(es(p),p.alternate===null)throw Error(r(340));ce()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 13:if(es(p),d=p.memoizedState,d!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(r(340));ce()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 19:return Z(Ti),null;case 4:return pe(),null;case 10:return lc(p.type),null;case 22:case 23:return es(p),gp(),d!==null&&Z(od),d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 24:return lc(Li),null;case 25:return null;default:return null}}function A0(d,p){switch(rd(p),p.tag){case 3:lc(Li),pe();break;case 26:case 27:case 5:me(p);break;case 4:pe();break;case 31:p.memoizedState!==null&&es(p);break;case 13:es(p);break;case 19:Z(Ti);break;case 10:lc(p.type);break;case 22:case 23:es(p),gp(),d!==null&&Z(od);break;case 24:lc(Li)}}function Uh(d,p){try{var y=p.updateQueue,C=y!==null?y.lastEffect:null;if(C!==null){var I=C.next;y=I;do{if((y.tag&d)===d){C=void 0;var F=y.create,Q=y.inst;C=F(),Q.destroy=C}y=y.next}while(y!==I)}}catch(le){Tr(p,p.return,le)}}function fc(d,p,y){try{var C=p.updateQueue,I=C!==null?C.lastEffect:null;if(I!==null){var F=I.next;C=F;do{if((C.tag&d)===d){var Q=C.inst,le=Q.destroy;if(le!==void 0){Q.destroy=void 0,I=p;var Se=y,Ue=le;try{Ue()}catch(nt){Tr(I,Se,nt)}}}C=C.next}while(C!==F)}}catch(nt){Tr(p,p.return,nt)}}function Fp(d){var p=d.updateQueue;if(p!==null){var y=d.stateNode;try{s0(p,y)}catch(C){Tr(d,d.return,C)}}}function tx(d,p,y){y.props=Ua(d.type,d.memoizedProps),y.state=d.memoizedState;try{y.componentWillUnmount()}catch(C){Tr(d,p,C)}}function ns(d,p){try{var y=d.ref;if(y!==null){switch(d.tag){case 26:case 27:case 5:var C=d.stateNode;break;case 30:C=d.stateNode;break;default:C=d.stateNode}typeof y=="function"?d.refCleanup=y(C):y.current=C}}catch(I){Tr(d,p,I)}}function Ta(d,p){var y=d.ref,C=d.refCleanup;if(y!==null)if(typeof C=="function")try{C()}catch(I){Tr(d,p,I)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(I){Tr(d,p,I)}else y.current=null}function bS(d){var p=d.type,y=d.memoizedProps,C=d.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":y.autoFocus&&C.focus();break e;case"img":y.src?C.src=y.src:y.srcSet&&(C.srcset=y.srcSet)}}catch(I){Tr(d,d.return,I)}}function P0(d,p,y){try{var C=d.stateNode;NM(C,d.type,y,p),C[Vr]=p}catch(I){Tr(d,d.return,I)}}function xS(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&cn(d.type)||d.tag===4}function nx(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||xS(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&cn(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function rx(d,p,y){var C=d.tag;if(C===5||C===6)d=d.stateNode,p?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(d,p):(p=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,p.appendChild(d),y=y._reactRootContainer,y!=null||p.onclick!==null||(p.onclick=tc));else if(C!==4&&(C===27&&cn(d.type)&&(y=d.stateNode,p=null),d=d.child,d!==null))for(rx(d,p,y),d=d.sibling;d!==null;)rx(d,p,y),d=d.sibling}function N0(d,p,y){var C=d.tag;if(C===5||C===6)d=d.stateNode,p?y.insertBefore(d,p):y.appendChild(d);else if(C!==4&&(C===27&&cn(d.type)&&(y=d.stateNode),d=d.child,d!==null))for(N0(d,p,y),d=d.sibling;d!==null;)N0(d,p,y),d=d.sibling}function _S(d){var p=d.stateNode,y=d.memoizedProps;try{for(var C=d.type,I=p.attributes;I.length;)p.removeAttributeNode(I[0]);ga(p,C,y),p[Pr]=d,p[Vr]=y}catch(F){Tr(d,d.return,F)}}var pc=!1,Oi=!1,ix=!1,wS=typeof WeakSet=="function"?WeakSet:Set,ta=null;function yM(d,p){if(d=d.containerInfo,em=Z0,d=zw(d),mb(d)){if("selectionStart"in d)var y={start:d.selectionStart,end:d.selectionEnd};else e:{y=(y=d.ownerDocument)&&y.defaultView||window;var C=y.getSelection&&y.getSelection();if(C&&C.rangeCount!==0){y=C.anchorNode;var I=C.anchorOffset,F=C.focusNode;C=C.focusOffset;try{y.nodeType,F.nodeType}catch{y=null;break e}var Q=0,le=-1,Se=-1,Ue=0,nt=0,st=d,He=null;t:for(;;){for(var Ye;st!==y||I!==0&&st.nodeType!==3||(le=Q+I),st!==F||C!==0&&st.nodeType!==3||(Se=Q+C),st.nodeType===3&&(Q+=st.nodeValue.length),(Ye=st.firstChild)!==null;)He=st,st=Ye;for(;;){if(st===d)break t;if(He===y&&++Ue===I&&(le=Q),He===F&&++nt===C&&(Se=Q),(Ye=st.nextSibling)!==null)break;st=He,He=st.parentNode}st=Ye}y=le===-1||Se===-1?null:{start:le,end:Se}}else y=null}y=y||{start:0,end:0}}else y=null;for(kx={focusedElem:d,selectionRange:y},Z0=!1,ta=p;ta!==null;)if(p=ta,d=p.child,(p.subtreeFlags&1028)!==0&&d!==null)d.return=p,ta=d;else for(;ta!==null;){switch(p=ta,F=p.alternate,d=p.flags,p.tag){case 0:if((d&4)!==0&&(d=p.updateQueue,d=d!==null?d.events:null,d!==null))for(y=0;y<d.length;y++)I=d[y],I.ref.impl=I.nextImpl;break;case 11:case 15:break;case 1:if((d&1024)!==0&&F!==null){d=void 0,y=p,I=F.memoizedProps,F=F.memoizedState,C=y.stateNode;try{var zt=Ua(y.type,I);d=C.getSnapshotBeforeUpdate(zt,F),C.__reactInternalSnapshotBeforeUpdate=d}catch(sn){Tr(y,y.return,sn)}}break;case 3:if((d&1024)!==0){if(d=p.stateNode.containerInfo,y=d.nodeType,y===9)V0(d);else if(y===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":V0(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=p.sibling,d!==null){d.return=p.return,ta=d;break}ta=p.return}}function ax(d,p,y){var C=y.flags;switch(y.tag){case 0:case 11:case 15:gc(d,y),C&4&&Uh(5,y);break;case 1:if(gc(d,y),C&4)if(d=y.stateNode,p===null)try{d.componentDidMount()}catch(Q){Tr(y,y.return,Q)}else{var I=Ua(y.type,p.memoizedProps);p=p.memoizedState;try{d.componentDidUpdate(I,p,d.__reactInternalSnapshotBeforeUpdate)}catch(Q){Tr(y,y.return,Q)}}C&64&&Fp(y),C&512&&ns(y,y.return);break;case 3:if(gc(d,y),C&64&&(d=y.updateQueue,d!==null)){if(p=null,y.child!==null)switch(y.child.tag){case 27:case 5:p=y.child.stateNode;break;case 1:p=y.child.stateNode}try{s0(d,p)}catch(Q){Tr(y,y.return,Q)}}break;case 27:p===null&&C&4&&_S(y);case 26:case 5:gc(d,y),p===null&&C&4&&bS(y),C&512&&ns(y,y.return);break;case 12:gc(d,y);break;case 31:gc(d,y),C&4&&ox(d,y);break;case 13:gc(d,y),C&4&&ES(d,y),C&64&&(d=y.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(y=O0.bind(null,y),IM(d,y))));break;case 22:if(C=y.memoizedState!==null||pc,!C){p=p!==null&&p.memoizedState!==null||Oi,I=pc;var F=Oi;pc=C,(Oi=p)&&!F?Tl(d,y,(y.subtreeFlags&8772)!==0):gc(d,y),pc=I,Oi=F}break;case 30:break;default:gc(d,y)}}function sx(d){var p=d.alternate;p!==null&&(d.alternate=null,sx(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode,p!==null&&qu(p)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var Gr=null,rs=!1;function mc(d,p,y){for(y=y.child;y!==null;)SS(d,p,y),y=y.sibling}function SS(d,p,y){if(ot&&typeof ot.onCommitFiberUnmount=="function")try{ot.onCommitFiberUnmount(Je,y)}catch{}switch(y.tag){case 26:Oi||Ta(y,p),mc(d,p,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:Oi||Ta(y,p);var C=Gr,I=rs;cn(y.type)&&(Gr=y.stateNode,rs=!1),mc(d,p,y),rm(y.stateNode),Gr=C,rs=I;break;case 5:Oi||Ta(y,p);case 6:if(C=Gr,I=rs,Gr=null,mc(d,p,y),Gr=C,rs=I,Gr!==null)if(rs)try{(Gr.nodeType===9?Gr.body:Gr.nodeName==="HTML"?Gr.ownerDocument.body:Gr).removeChild(y.stateNode)}catch(F){Tr(y,p,F)}else try{Gr.removeChild(y.stateNode)}catch(F){Tr(y,p,F)}break;case 18:Gr!==null&&(rs?(d=Gr,Ix(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,y.stateNode),af(d)):Ix(Gr,y.stateNode));break;case 4:C=Gr,I=rs,Gr=y.stateNode.containerInfo,rs=!0,mc(d,p,y),Gr=C,rs=I;break;case 0:case 11:case 14:case 15:fc(2,y,p),Oi||fc(4,y,p),mc(d,p,y);break;case 1:Oi||(Ta(y,p),C=y.stateNode,typeof C.componentWillUnmount=="function"&&tx(y,p,C)),mc(d,p,y);break;case 21:mc(d,p,y);break;case 22:Oi=(C=Oi)||y.memoizedState!==null,mc(d,p,y),Oi=C;break;default:mc(d,p,y)}}function ox(d,p){if(p.memoizedState===null&&(d=p.alternate,d!==null&&(d=d.memoizedState,d!==null))){d=d.dehydrated;try{af(d)}catch(y){Tr(p,p.return,y)}}}function ES(d,p){if(p.memoizedState===null&&(d=p.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{af(d)}catch(y){Tr(p,p.return,y)}}function bM(d){switch(d.tag){case 31:case 13:case 19:var p=d.stateNode;return p===null&&(p=d.stateNode=new wS),p;case 22:return d=d.stateNode,p=d._retryCache,p===null&&(p=d._retryCache=new wS),p;default:throw Error(r(435,d.tag))}}function D0(d,p){var y=bM(d);p.forEach(function(C){if(!y.has(C)){y.add(C);var I=TM.bind(null,d,C);C.then(I,I)}})}function is(d,p){var y=p.deletions;if(y!==null)for(var C=0;C<y.length;C++){var I=y[C],F=d,Q=p,le=Q;e:for(;le!==null;){switch(le.tag){case 27:if(cn(le.type)){Gr=le.stateNode,rs=!1;break e}break;case 5:Gr=le.stateNode,rs=!1;break e;case 3:case 4:Gr=le.stateNode.containerInfo,rs=!0;break e}le=le.return}if(Gr===null)throw Error(r(160));SS(F,Q,I),Gr=null,rs=!1,F=I.alternate,F!==null&&(F.return=null),I.return=null}if(p.subtreeFlags&13886)for(p=p.child;p!==null;)CS(p,d),p=p.sibling}var Ho=null;function CS(d,p){var y=d.alternate,C=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:is(p,d),Wr(d),C&4&&(fc(3,d,d.return),Uh(3,d),fc(5,d,d.return));break;case 1:is(p,d),Wr(d),C&512&&(Oi||y===null||Ta(y,y.return)),C&64&&pc&&(d=d.updateQueue,d!==null&&(C=d.callbacks,C!==null&&(y=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=y===null?C:y.concat(C))));break;case 26:var I=Ho;if(is(p,d),Wr(d),C&512&&(Oi||y===null||Ta(y,y.return)),C&4){var F=y!==null?y.memoizedState:null;if(C=d.memoizedState,y===null)if(C===null)if(d.stateNode===null){e:{C=d.type,y=d.memoizedProps,I=I.ownerDocument||I;t:switch(C){case"title":F=I.getElementsByTagName("title")[0],(!F||F[ec]||F[Pr]||F.namespaceURI==="http://www.w3.org/2000/svg"||F.hasAttribute("itemprop"))&&(F=I.createElement(C),I.head.insertBefore(F,I.querySelector("head > title"))),ga(F,C,y),F[Pr]=d,Be(F),C=F;break e;case"link":var Q=hE("link","href",I).get(C+(y.href||""));if(Q){for(var le=0;le<Q.length;le++)if(F=Q[le],F.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&F.getAttribute("rel")===(y.rel==null?null:y.rel)&&F.getAttribute("title")===(y.title==null?null:y.title)&&F.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){Q.splice(le,1);break t}}F=I.createElement(C),ga(F,C,y),I.head.appendChild(F);break;case"meta":if(Q=hE("meta","content",I).get(C+(y.content||""))){for(le=0;le<Q.length;le++)if(F=Q[le],F.getAttribute("content")===(y.content==null?null:""+y.content)&&F.getAttribute("name")===(y.name==null?null:y.name)&&F.getAttribute("property")===(y.property==null?null:y.property)&&F.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&F.getAttribute("charset")===(y.charSet==null?null:y.charSet)){Q.splice(le,1);break t}}F=I.createElement(C),ga(F,C,y),I.head.appendChild(F);break;default:throw Error(r(468,C))}F[Pr]=d,Be(F),C=F}d.stateNode=C}else fE(I,d.type,d.stateNode);else d.stateNode=dE(I,C,d.memoizedProps);else F!==C?(F===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):F.count--,C===null?fE(I,d.type,d.stateNode):dE(I,C,d.memoizedProps)):C===null&&d.stateNode!==null&&P0(d,d.memoizedProps,y.memoizedProps)}break;case 27:is(p,d),Wr(d),C&512&&(Oi||y===null||Ta(y,y.return)),y!==null&&C&4&&P0(d,d.memoizedProps,y.memoizedProps);break;case 5:if(is(p,d),Wr(d),C&512&&(Oi||y===null||Ta(y,y.return)),d.flags&32){I=d.stateNode;try{Fa(I,"")}catch(zt){Tr(d,d.return,zt)}}C&4&&d.stateNode!=null&&(I=d.memoizedProps,P0(d,I,y!==null?y.memoizedProps:I)),C&1024&&(ix=!0);break;case 6:if(is(p,d),Wr(d),C&4){if(d.stateNode===null)throw Error(r(162));C=d.memoizedProps,y=d.stateNode;try{y.nodeValue=C}catch(zt){Tr(d,d.return,zt)}}break;case 3:if(im=null,I=Ho,Ho=G0(p.containerInfo),is(p,d),Ho=I,Wr(d),C&4&&y!==null&&y.memoizedState.isDehydrated)try{af(p.containerInfo)}catch(zt){Tr(d,d.return,zt)}ix&&(ix=!1,TS(d));break;case 4:C=Ho,Ho=G0(d.stateNode.containerInfo),is(p,d),Wr(d),Ho=C;break;case 12:is(p,d),Wr(d);break;case 31:is(p,d),Wr(d),C&4&&(C=d.updateQueue,C!==null&&(d.updateQueue=null,D0(d,C)));break;case 13:is(p,d),Wr(d),d.child.flags&8192&&d.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(Hp=re()),C&4&&(C=d.updateQueue,C!==null&&(d.updateQueue=null,D0(d,C)));break;case 22:I=d.memoizedState!==null;var Se=y!==null&&y.memoizedState!==null,Ue=pc,nt=Oi;if(pc=Ue||I,Oi=nt||Se,is(p,d),Oi=nt,pc=Ue,Wr(d),C&8192)e:for(p=d.stateNode,p._visibility=I?p._visibility&-2:p._visibility|1,I&&(y===null||Se||pc||Oi||dd(d)),y=null,p=d;;){if(p.tag===5||p.tag===26){if(y===null){Se=y=p;try{if(F=Se.stateNode,I)Q=F.style,typeof Q.setProperty=="function"?Q.setProperty("display","none","important"):Q.display="none";else{le=Se.stateNode;var st=Se.memoizedProps.style,He=st!=null&&st.hasOwnProperty("display")?st.display:null;le.style.display=He==null||typeof He=="boolean"?"":(""+He).trim()}}catch(zt){Tr(Se,Se.return,zt)}}}else if(p.tag===6){if(y===null){Se=p;try{Se.stateNode.nodeValue=I?"":Se.memoizedProps}catch(zt){Tr(Se,Se.return,zt)}}}else if(p.tag===18){if(y===null){Se=p;try{var Ye=Se.stateNode;I?Fs(Ye,!0):Fs(Se.stateNode,!1)}catch(zt){Tr(Se,Se.return,zt)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===d)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break e;for(;p.sibling===null;){if(p.return===null||p.return===d)break e;y===p&&(y=null),p=p.return}y===p&&(y=null),p.sibling.return=p.return,p=p.sibling}C&4&&(C=d.updateQueue,C!==null&&(y=C.retryQueue,y!==null&&(C.retryQueue=null,D0(d,y))));break;case 19:is(p,d),Wr(d),C&4&&(C=d.updateQueue,C!==null&&(d.updateQueue=null,D0(d,C)));break;case 30:break;case 21:break;default:is(p,d),Wr(d)}}function Wr(d){var p=d.flags;if(p&2){try{for(var y,C=d.return;C!==null;){if(xS(C)){y=C;break}C=C.return}if(y==null)throw Error(r(160));switch(y.tag){case 27:var I=y.stateNode,F=nx(d);N0(d,F,I);break;case 5:var Q=y.stateNode;y.flags&32&&(Fa(Q,""),y.flags&=-33);var le=nx(d);N0(d,le,Q);break;case 3:case 4:var Se=y.stateNode.containerInfo,Ue=nx(d);rx(d,Ue,Se);break;default:throw Error(r(161))}}catch(nt){Tr(d,d.return,nt)}d.flags&=-3}p&4096&&(d.flags&=-4097)}function TS(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var p=d;TS(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),d=d.sibling}}function gc(d,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)ax(d,p.alternate,p),p=p.sibling}function dd(d){for(d=d.child;d!==null;){var p=d;switch(p.tag){case 0:case 11:case 14:case 15:fc(4,p,p.return),dd(p);break;case 1:Ta(p,p.return);var y=p.stateNode;typeof y.componentWillUnmount=="function"&&tx(p,p.return,y),dd(p);break;case 27:rm(p.stateNode);case 26:case 5:Ta(p,p.return),dd(p);break;case 22:p.memoizedState===null&&dd(p);break;case 30:dd(p);break;default:dd(p)}d=d.sibling}}function Tl(d,p,y){for(y=y&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var C=p.alternate,I=d,F=p,Q=F.flags;switch(F.tag){case 0:case 11:case 15:Tl(I,F,y),Uh(4,F);break;case 1:if(Tl(I,F,y),C=F,I=C.stateNode,typeof I.componentDidMount=="function")try{I.componentDidMount()}catch(Ue){Tr(C,C.return,Ue)}if(C=F,I=C.updateQueue,I!==null){var le=C.stateNode;try{var Se=I.shared.hiddenCallbacks;if(Se!==null)for(I.shared.hiddenCallbacks=null,I=0;I<Se.length;I++)Bo(Se[I],le)}catch(Ue){Tr(C,C.return,Ue)}}y&&Q&64&&Fp(F),ns(F,F.return);break;case 27:_S(F);case 26:case 5:Tl(I,F,y),y&&C===null&&Q&4&&bS(F),ns(F,F.return);break;case 12:Tl(I,F,y);break;case 31:Tl(I,F,y),y&&Q&4&&ox(I,F);break;case 13:Tl(I,F,y),y&&Q&4&&ES(I,F);break;case 22:F.memoizedState===null&&Tl(I,F,y),ns(F,F.return);break;case 30:break;default:Tl(I,F,y)}p=p.sibling}}function lx(d,p){var y=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),d=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(d=p.memoizedState.cachePool.pool),d!==y&&(d!=null&&d.refCount++,y!=null&&hp(y))}function cx(d,p){d=null,p.alternate!==null&&(d=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==d&&(p.refCount++,d!=null&&hp(d))}function Go(d,p,y,C){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)MS(d,p,y,C),p=p.sibling}function MS(d,p,y,C){var I=p.flags;switch(p.tag){case 0:case 11:case 15:Go(d,p,y,C),I&2048&&Uh(9,p);break;case 1:Go(d,p,y,C);break;case 3:Go(d,p,y,C),I&2048&&(d=null,p.alternate!==null&&(d=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==d&&(p.refCount++,d!=null&&hp(d)));break;case 12:if(I&2048){Go(d,p,y,C),d=p.stateNode;try{var F=p.memoizedProps,Q=F.id,le=F.onPostCommit;typeof le=="function"&&le(Q,p.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(Se){Tr(p,p.return,Se)}}else Go(d,p,y,C);break;case 31:Go(d,p,y,C);break;case 13:Go(d,p,y,C);break;case 23:break;case 22:F=p.stateNode,Q=p.alternate,p.memoizedState!==null?F._visibility&2?Go(d,p,y,C):Bp(d,p):F._visibility&2?Go(d,p,y,C):(F._visibility|=2,uu(d,p,y,C,(p.subtreeFlags&10256)!==0||!1)),I&2048&&lx(Q,p);break;case 24:Go(d,p,y,C),I&2048&&cx(p.alternate,p);break;default:Go(d,p,y,C)}}function uu(d,p,y,C,I){for(I=I&&((p.subtreeFlags&10256)!==0||!1),p=p.child;p!==null;){var F=d,Q=p,le=y,Se=C,Ue=Q.flags;switch(Q.tag){case 0:case 11:case 15:uu(F,Q,le,Se,I),Uh(8,Q);break;case 23:break;case 22:var nt=Q.stateNode;Q.memoizedState!==null?nt._visibility&2?uu(F,Q,le,Se,I):Bp(F,Q):(nt._visibility|=2,uu(F,Q,le,Se,I)),I&&Ue&2048&&lx(Q.alternate,Q);break;case 24:uu(F,Q,le,Se,I),I&&Ue&2048&&cx(Q.alternate,Q);break;default:uu(F,Q,le,Se,I)}p=p.sibling}}function Bp(d,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var y=d,C=p,I=C.flags;switch(C.tag){case 22:Bp(y,C),I&2048&&lx(C.alternate,C);break;case 24:Bp(y,C),I&2048&&cx(C.alternate,C);break;default:Bp(y,C)}p=p.sibling}}var zp=8192;function Vh(d,p,y){if(d.subtreeFlags&zp)for(d=d.child;d!==null;)AS(d,p,y),d=d.sibling}function AS(d,p,y){switch(d.tag){case 26:Vh(d,p,y),d.flags&zp&&d.memoizedState!==null&&tf(y,Ho,d.memoizedState,d.memoizedProps);break;case 5:Vh(d,p,y);break;case 3:case 4:var C=Ho;Ho=G0(d.stateNode.containerInfo),Vh(d,p,y),Ho=C;break;case 22:d.memoizedState===null&&(C=d.alternate,C!==null&&C.memoizedState!==null?(C=zp,zp=16777216,Vh(d,p,y),zp=C):Vh(d,p,y));break;default:Vh(d,p,y)}}function PS(d){var p=d.alternate;if(p!==null&&(d=p.child,d!==null)){p.child=null;do p=d.sibling,d.sibling=null,d=p;while(d!==null)}}function Up(d){var p=d.deletions;if((d.flags&16)!==0){if(p!==null)for(var y=0;y<p.length;y++){var C=p[y];ta=C,DS(C,d)}PS(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)NS(d),d=d.sibling}function NS(d){switch(d.tag){case 0:case 11:case 15:Up(d),d.flags&2048&&fc(9,d,d.return);break;case 3:Up(d);break;case 12:Up(d);break;case 22:var p=d.stateNode;d.memoizedState!==null&&p._visibility&2&&(d.return===null||d.return.tag!==13)?(p._visibility&=-3,k0(d)):Up(d);break;default:Up(d)}}function k0(d){var p=d.deletions;if((d.flags&16)!==0){if(p!==null)for(var y=0;y<p.length;y++){var C=p[y];ta=C,DS(C,d)}PS(d)}for(d=d.child;d!==null;){switch(p=d,p.tag){case 0:case 11:case 15:fc(8,p,p.return),k0(p);break;case 22:y=p.stateNode,y._visibility&2&&(y._visibility&=-3,k0(p));break;default:k0(p)}d=d.sibling}}function DS(d,p){for(;ta!==null;){var y=ta;switch(y.tag){case 0:case 11:case 15:fc(8,y,p);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var C=y.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:hp(y.memoizedState.cache)}if(C=y.child,C!==null)C.return=y,ta=C;else e:for(y=d;ta!==null;){C=ta;var I=C.sibling,F=C.return;if(sx(C),C===y){ta=null;break e}if(I!==null){I.return=F,ta=I;break e}ta=F}}}var xM={getCacheForType:function(d){var p=fa(Li),y=p.data.get(d);return y===void 0&&(y=d(),p.data.set(d,y)),y},cacheSignal:function(){return fa(Li).controller.signal}},_M=typeof WeakMap=="function"?WeakMap:Map,fr=0,Or=null,Gn=null,Xn=0,Cr=0,Is=null,du=!1,Hh=!1,ux=!1,Wo=0,ci=0,hu=0,hd=0,dx=0,$s=0,Gh=0,Vp=null,as=null,hx=!1,Hp=0,kS=0,fd=1/0,R0=null,fu=null,Hi=0,pu=null,Wh=null,vc=0,fx=0,px=null,RS=null,Gp=0,mx=null;function js(){return(fr&2)!==0&&Xn!==0?Xn&-Xn:O.T!==null?Ls():Ur()}function IS(){if($s===0)if((Xn&536870912)===0||Jn){var d=_t;_t<<=1,(_t&3932160)===0&&(_t=262144),$s=d}else $s=536870912;return d=Ns.current,d!==null&&(d.flags|=32),$s}function ss(d,p,y){(d===Or&&(Cr===2||Cr===9)||d.cancelPendingCommit!==null)&&(qh(d,0),yc(d,Xn,$s,!1)),gt(d,y),((fr&2)===0||d!==Or)&&(d===Or&&((fr&2)===0&&(hd|=y),ci===4&&yc(d,Xn,$s,!1)),Ml(d))}function $S(d,p,y){if((fr&6)!==0)throw Error(r(327));var C=!y&&(p&127)===0&&(p&d.expiredLanes)===0||At(d,p),I=C?SM(d,p):vx(d,p,!0),F=C;do{if(I===0){Hh&&!C&&yc(d,p,0,!1);break}else{if(y=d.current.alternate,F&&!LS(y)){I=vx(d,p,!1),F=!1;continue}if(I===2){if(F=p,d.errorRecoveryDisabledLanes&F)var Q=0;else Q=d.pendingLanes&-536870913,Q=Q!==0?Q:Q&536870912?536870912:0;if(Q!==0){p=Q;e:{var le=d;I=Vp;var Se=le.current.memoizedState.isDehydrated;if(Se&&(qh(le,Q).flags|=256),Q=vx(le,Q,!1),Q!==2){if(ux&&!Se){le.errorRecoveryDisabledLanes|=F,hd|=F,I=4;break e}F=as,as=I,F!==null&&(as===null?as=F:as.push.apply(as,F))}I=Q}if(F=!1,I!==2)continue}}if(I===1){qh(d,0),yc(d,p,0,!0);break}e:{switch(C=d,F=I,F){case 0:case 1:throw Error(r(345));case 4:if((p&4194048)!==p)break;case 6:yc(C,p,$s,!du);break e;case 2:as=null;break;case 3:case 5:break;default:throw Error(r(329))}if((p&62914560)===p&&(I=Hp+300-re(),10<I)){if(yc(C,p,$s,!du),Qe(C,0,!0)!==0)break e;vc=p,C.timeoutHandle=eE(jS.bind(null,C,y,as,R0,hx,p,$s,hd,Gh,du,F,"Throttled",-0,0),I);break e}jS(C,y,as,R0,hx,p,$s,hd,Gh,du,F,null,-0,0)}}break}while(!0);Ml(d)}function jS(d,p,y,C,I,F,Q,le,Se,Ue,nt,st,He,Ye){if(d.timeoutHandle=-1,st=p.subtreeFlags,st&8192||(st&16785408)===16785408){st={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:tc},AS(p,F,st);var zt=(F&62914560)===F?Hp-re():(F&4194048)===F?kS-re():0;if(zt=VM(st,zt),zt!==null){vc=F,d.cancelPendingCommit=zt(VS.bind(null,d,p,F,y,C,I,Q,le,Se,nt,st,null,He,Ye)),yc(d,F,Q,!Ue);return}}VS(d,p,F,y,C,I,Q,le,Se)}function LS(d){for(var p=d;;){var y=p.tag;if((y===0||y===11||y===15)&&p.flags&16384&&(y=p.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var C=0;C<y.length;C++){var I=y[C],F=I.getSnapshot;I=I.value;try{if(!oi(F(),I))return!1}catch{return!1}}if(y=p.child,p.subtreeFlags&16384&&y!==null)y.return=p,p=y;else{if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function yc(d,p,y,C){p&=~dx,p&=~hd,d.suspendedLanes|=p,d.pingedLanes&=~p,C&&(d.warmLanes|=p),C=d.expirationTimes;for(var I=p;0<I;){var F=31-Ct(I),Q=1<<F;C[F]=-1,I&=~Q}y!==0&&vn(d,y,p)}function I0(){return(fr&6)===0?(Yp(0),!1):!0}function gx(){if(Gn!==null){if(Cr===0)var d=Gn.return;else d=Gn,oc=Cn=null,Cb(d),Ph=null,Ps=0,d=Gn;for(;d!==null;)A0(d.alternate,d),d=d.return;Gn=null}}function qh(d,p){var y=d.timeoutHandle;y!==-1&&(d.timeoutHandle=-1,kM(y)),y=d.cancelPendingCommit,y!==null&&(d.cancelPendingCommit=null,y()),vc=0,gx(),Or=d,Gn=y=Js(d.current,null),Xn=p,Cr=0,Is=null,du=!1,Hh=At(d,p),ux=!1,Gh=$s=dx=hd=hu=ci=0,as=Vp=null,hx=!1,(p&8)!==0&&(p|=p&32);var C=d.entangledLanes;if(C!==0)for(d=d.entanglements,C&=p;0<C;){var I=31-Ct(C),F=1<<I;p|=d[I],C&=~F}return Wo=p,$o(),y}function OS(d,p){Tn=null,O.H=lu,p===Ah||p===pp?(p=Zw(),Cr=3):p===t0?(p=Zw(),Cr=4):Cr=p===Np?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Is=p,Gn===null&&(ci=1,Pp(d,Ms(p,d.current)))}function Wp(){var d=Ns.current;return d===null?!0:(Xn&4194048)===Xn?so===null:(Xn&62914560)===Xn||(Xn&536870912)!==0?d===so:!1}function FS(){var d=O.H;return O.H=lu,d===null?lu:d}function BS(){var d=O.A;return O.A=xM,d}function $0(){ci=4,du||(Xn&4194048)!==Xn&&Ns.current!==null||(Hh=!0),(hu&134217727)===0&&(hd&134217727)===0||Or===null||yc(Or,Xn,$s,!1)}function vx(d,p,y){var C=fr;fr|=2;var I=FS(),F=BS();(Or!==d||Xn!==p)&&(R0=null,qh(d,p)),p=!1;var Q=ci;e:do try{if(Cr!==0&&Gn!==null){var le=Gn,Se=Is;switch(Cr){case 8:gx(),Q=6;break e;case 3:case 2:case 9:case 6:Ns.current===null&&(p=!0);var Ue=Cr;if(Cr=0,Is=null,Kh(d,le,Se,Ue),y&&Hh){Q=0;break e}break;default:Ue=Cr,Cr=0,Is=null,Kh(d,le,Se,Ue)}}wM(),Q=ci;break}catch(nt){OS(d,nt)}while(!0);return p&&d.shellSuspendCounter++,oc=Cn=null,fr=C,O.H=I,O.A=F,Gn===null&&(Or=null,Xn=0,$o()),Q}function wM(){for(;Gn!==null;)zS(Gn)}function SM(d,p){var y=fr;fr|=2;var C=FS(),I=BS();Or!==d||Xn!==p?(R0=null,fd=re()+500,qh(d,p)):Hh=At(d,p);e:do try{if(Cr!==0&&Gn!==null){p=Gn;var F=Is;t:switch(Cr){case 1:Cr=0,Is=null,Kh(d,p,F,1);break;case 2:case 9:if(Yw(F)){Cr=0,Is=null,US(p);break}p=function(){Cr!==2&&Cr!==9||Or!==d||(Cr=7),Ml(d)},F.then(p,p);break e;case 3:Cr=7;break e;case 4:Cr=5;break e;case 7:Yw(F)?(Cr=0,Is=null,US(p)):(Cr=0,Is=null,Kh(d,p,F,7));break;case 5:var Q=null;switch(Gn.tag){case 26:Q=Gn.memoizedState;case 5:case 27:var le=Gn;if(Q?pE(Q):le.stateNode.complete){Cr=0,Is=null;var Se=le.sibling;if(Se!==null)Gn=Se;else{var Ue=le.return;Ue!==null?(Gn=Ue,j0(Ue)):Gn=null}break t}}Cr=0,Is=null,Kh(d,p,F,5);break;case 6:Cr=0,Is=null,Kh(d,p,F,6);break;case 8:gx(),ci=6;break e;default:throw Error(r(462))}}EM();break}catch(nt){OS(d,nt)}while(!0);return oc=Cn=null,O.H=C,O.A=I,fr=y,Gn!==null?0:(Or=null,Xn=0,$o(),ci)}function EM(){for(;Gn!==null&&!et();)zS(Gn)}function zS(d){var p=vS(d.alternate,d,Wo);d.memoizedProps=d.pendingProps,p===null?j0(d):Gn=p}function US(d){var p=d,y=p.alternate;switch(p.tag){case 15:case 0:p=pS(y,p,p.pendingProps,p.type,void 0,Xn);break;case 11:p=pS(y,p,p.pendingProps,p.type.render,p.ref,Xn);break;case 5:Cb(p);default:A0(y,p),p=Gn=Gw(p,Wo),p=vS(y,p,Wo)}d.memoizedProps=d.pendingProps,p===null?j0(d):Gn=p}function Kh(d,p,y,C){oc=Cn=null,Cb(p),Ph=null,Ps=0;var I=p.return;try{if(Kb(d,I,p,y,Xn)){ci=1,Pp(d,Ms(y,d.current)),Gn=null;return}}catch(F){if(I!==null)throw Gn=I,F;ci=1,Pp(d,Ms(y,d.current)),Gn=null;return}p.flags&32768?(Jn||C===1?d=!0:Hh||(Xn&536870912)!==0?d=!1:(du=d=!0,(C===2||C===9||C===3||C===6)&&(C=Ns.current,C!==null&&C.tag===13&&(C.flags|=16384))),qp(p,d)):j0(p)}function j0(d){var p=d;do{if((p.flags&32768)!==0){qp(p,du);return}d=p.return;var y=yS(p.alternate,p,Wo);if(y!==null){Gn=y;return}if(p=p.sibling,p!==null){Gn=p;return}Gn=p=d}while(p!==null);ci===0&&(ci=5)}function qp(d,p){do{var y=Op(d.alternate,d);if(y!==null){y.flags&=32767,Gn=y;return}if(y=d.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!p&&(d=d.sibling,d!==null)){Gn=d;return}Gn=d=y}while(d!==null);ci=6,Gn=null}function VS(d,p,y,C,I,F,Q,le,Se){d.cancelPendingCommit=null;do Kp();while(Hi!==0);if((fr&6)!==0)throw Error(r(327));if(p!==null){if(p===d.current)throw Error(r(177));if(F=p.lanes|p.childLanes,F|=bh,ln(d,y,F,Q,le,Se),d===Or&&(Gn=Or=null,Xn=0),Wh=p,pu=d,vc=y,fx=F,px=I,RS=C,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,MM(je,function(){return _x(),null})):(d.callbackNode=null,d.callbackPriority=0),C=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||C){C=O.T,O.T=null,I=z.p,z.p=2,Q=fr,fr|=4;try{yM(d,p,y)}finally{fr=Q,z.p=I,O.T=C}}Hi=1,yx(),bx(),L0()}}function yx(){if(Hi===1){Hi=0;var d=pu,p=Wh,y=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||y){y=O.T,O.T=null;var C=z.p;z.p=2;var I=fr;fr|=4;try{CS(p,d);var F=kx,Q=zw(d.containerInfo),le=F.focusedElem,Se=F.selectionRange;if(Q!==le&&le&&le.ownerDocument&&Bw(le.ownerDocument.documentElement,le)){if(Se!==null&&mb(le)){var Ue=Se.start,nt=Se.end;if(nt===void 0&&(nt=Ue),"selectionStart"in le)le.selectionStart=Ue,le.selectionEnd=Math.min(nt,le.value.length);else{var st=le.ownerDocument||document,He=st&&st.defaultView||window;if(He.getSelection){var Ye=He.getSelection(),zt=le.textContent.length,sn=Math.min(Se.start,zt),Rr=Se.end===void 0?sn:Math.min(Se.end,zt);!Ye.extend&&sn>Rr&&(Q=Rr,Rr=sn,sn=Q);var Ne=Fw(le,sn),Te=Fw(le,Rr);if(Ne&&Te&&(Ye.rangeCount!==1||Ye.anchorNode!==Ne.node||Ye.anchorOffset!==Ne.offset||Ye.focusNode!==Te.node||Ye.focusOffset!==Te.offset)){var ze=st.createRange();ze.setStart(Ne.node,Ne.offset),Ye.removeAllRanges(),sn>Rr?(Ye.addRange(ze),Ye.extend(Te.node,Te.offset)):(ze.setEnd(Te.node,Te.offset),Ye.addRange(ze))}}}}for(st=[],Ye=le;Ye=Ye.parentNode;)Ye.nodeType===1&&st.push({element:Ye,left:Ye.scrollLeft,top:Ye.scrollTop});for(typeof le.focus=="function"&&le.focus(),le=0;le<st.length;le++){var at=st[le];at.element.scrollLeft=at.left,at.element.scrollTop=at.top}}Z0=!!em,kx=em=null}finally{fr=I,z.p=C,O.T=y}}d.current=p,Hi=2}}function bx(){if(Hi===2){Hi=0;var d=pu,p=Wh,y=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||y){y=O.T,O.T=null;var C=z.p;z.p=2;var I=fr;fr|=4;try{ax(d,p.alternate,p)}finally{fr=I,z.p=C,O.T=y}}Hi=3}}function L0(){if(Hi===4||Hi===3){Hi=0,de();var d=pu,p=Wh,y=vc,C=RS;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?Hi=5:(Hi=0,Wh=pu=null,xx(d,d.pendingLanes));var I=d.pendingLanes;if(I===0&&(fu=null),Rn(y),p=p.stateNode,ot&&typeof ot.onCommitFiberRoot=="function")try{ot.onCommitFiberRoot(Je,p,void 0,(p.current.flags&128)===128)}catch{}if(C!==null){p=O.T,I=z.p,z.p=2,O.T=null;try{for(var F=d.onRecoverableError,Q=0;Q<C.length;Q++){var le=C[Q];F(le.value,{componentStack:le.stack})}}finally{O.T=p,z.p=I}}(vc&3)!==0&&Kp(),Ml(d),I=d.pendingLanes,(y&261930)!==0&&(I&42)!==0?d===mx?Gp++:(Gp=0,mx=d):Gp=0,Yp(0)}}function xx(d,p){(d.pooledCacheLanes&=p)===0&&(p=d.pooledCache,p!=null&&(d.pooledCache=null,hp(p)))}function Kp(){return yx(),bx(),L0(),_x()}function _x(){if(Hi!==5)return!1;var d=pu,p=fx;fx=0;var y=Rn(vc),C=O.T,I=z.p;try{z.p=32>y?32:y,O.T=null,y=px,px=null;var F=pu,Q=vc;if(Hi=0,Wh=pu=null,vc=0,(fr&6)!==0)throw Error(r(331));var le=fr;if(fr|=4,NS(F.current),MS(F,F.current,Q,y),fr=le,Yp(0,!1),ot&&typeof ot.onPostCommitFiberRoot=="function")try{ot.onPostCommitFiberRoot(Je,F)}catch{}return!0}finally{z.p=I,O.T=C,xx(d,p)}}function wx(d,p,y){p=Ms(y,p),p=qb(d.stateNode,p,2),d=Fo(d,p,2),d!==null&&(gt(d,2),Ml(d))}function Tr(d,p,y){if(d.tag===3)wx(d,d,y);else for(;p!==null;){if(p.tag===3){wx(p,d,y);break}else if(p.tag===1){var C=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(fu===null||!fu.has(C))){d=Ms(y,d),y=El(2),C=Fo(p,y,2),C!==null&&(_0(y,C,p,d),gt(C,2),Ml(C));break}}p=p.return}}function Sx(d,p,y){var C=d.pingCache;if(C===null){C=d.pingCache=new _M;var I=new Set;C.set(p,I)}else I=C.get(p),I===void 0&&(I=new Set,C.set(p,I));I.has(y)||(ux=!0,I.add(y),d=CM.bind(null,d,p,y),p.then(d,d))}function CM(d,p,y){var C=d.pingCache;C!==null&&C.delete(p),d.pingedLanes|=d.suspendedLanes&y,d.warmLanes&=~y,Or===d&&(Xn&y)===y&&(ci===4||ci===3&&(Xn&62914560)===Xn&&300>re()-Hp?(fr&2)===0&&qh(d,0):dx|=y,Gh===Xn&&(Gh=0)),Ml(d)}function Xp(d,p){p===0&&(p=ft()),d=bl(d,p),d!==null&&(gt(d,p),Ml(d))}function O0(d){var p=d.memoizedState,y=0;p!==null&&(y=p.retryLane),Xp(d,y)}function TM(d,p){var y=0;switch(d.tag){case 31:case 13:var C=d.stateNode,I=d.memoizedState;I!==null&&(y=I.retryLane);break;case 19:C=d.stateNode;break;case 22:C=d.stateNode._retryCache;break;default:throw Error(r(314))}C!==null&&C.delete(p),Xp(d,y)}function MM(d,p){return ht(d,p)}var Xh=null,pd=null,Ex=!1,F0=!1,Cx=!1,mu=0;function Ml(d){d!==pd&&d.next===null&&(pd===null?Xh=pd=d:pd=pd.next=d),F0=!0,Ex||(Ex=!0,PM())}function Yp(d,p){if(!Cx&&F0){Cx=!0;do for(var y=!1,C=Xh;C!==null;){if(d!==0){var I=C.pendingLanes;if(I===0)var F=0;else{var Q=C.suspendedLanes,le=C.pingedLanes;F=(1<<31-Ct(42|d)+1)-1,F&=I&~(Q&~le),F=F&201326741?F&201326741|1:F?F|2:0}F!==0&&(y=!0,qS(C,F))}else F=Xn,F=Qe(C,C===Or?F:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),(F&3)===0||At(C,F)||(y=!0,qS(C,F));C=C.next}while(y);Cx=!1}}function AM(){HS()}function HS(){F0=Ex=!1;var d=0;mu!==0&&DM()&&(d=mu);for(var p=re(),y=null,C=Xh;C!==null;){var I=C.next,F=GS(C,p);F===0?(C.next=null,y===null?Xh=I:y.next=I,I===null&&(pd=y)):(y=C,(d!==0||(F&3)!==0)&&(F0=!0)),C=I}Hi!==0&&Hi!==5||Yp(d),mu!==0&&(mu=0)}function GS(d,p){for(var y=d.suspendedLanes,C=d.pingedLanes,I=d.expirationTimes,F=d.pendingLanes&-62914561;0<F;){var Q=31-Ct(F),le=1<<Q,Se=I[Q];Se===-1?((le&y)===0||(le&C)!==0)&&(I[Q]=We(le,p)):Se<=p&&(d.expiredLanes|=le),F&=~le}if(p=Or,y=Xn,y=Qe(d,d===p?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),C=d.callbackNode,y===0||d===p&&(Cr===2||Cr===9)||d.cancelPendingCommit!==null)return C!==null&&C!==null&&Fe(C),d.callbackNode=null,d.callbackPriority=0;if((y&3)===0||At(d,y)){if(p=y&-y,p===d.callbackPriority)return p;switch(C!==null&&Fe(C),Rn(y)){case 2:case 8:y=De;break;case 32:y=je;break;case 268435456:y=rt;break;default:y=je}return C=WS.bind(null,d),y=ht(y,C),d.callbackPriority=p,d.callbackNode=y,p}return C!==null&&C!==null&&Fe(C),d.callbackPriority=2,d.callbackNode=null,2}function WS(d,p){if(Hi!==0&&Hi!==5)return d.callbackNode=null,d.callbackPriority=0,null;var y=d.callbackNode;if(Kp()&&d.callbackNode!==y)return null;var C=Xn;return C=Qe(d,d===Or?C:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),C===0?null:($S(d,C,p),GS(d,re()),d.callbackNode!=null&&d.callbackNode===y?WS.bind(null,d):null)}function qS(d,p){if(Kp())return null;$S(d,p,!0)}function PM(){nE(function(){(fr&6)!==0?ht(ke,AM):HS()})}function Ls(){if(mu===0){var d=Th;d===0&&(d=xt,xt<<=1,(xt&261888)===0&&(xt=256)),mu=d}return mu}function KS(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:Qf(""+d)}function XS(d,p){var y=p.ownerDocument.createElement("input");return y.name=p.name,y.value=p.value,d.id&&y.setAttribute("form",d.id),p.parentNode.insertBefore(y,p),d=new FormData(d),y.parentNode.removeChild(y),d}function md(d,p,y,C,I){if(p==="submit"&&y&&y.stateNode===I){var F=KS((I[Vr]||null).action),Q=C.submitter;Q&&(p=(p=Q[Vr]||null)?KS(p.formAction):Q.getAttribute("formAction"),p!==null&&(F=p,Q=null));var le=new Ig("action","action",null,C,I);d.push({event:le,listeners:[{instance:null,listener:function(){if(C.defaultPrevented){if(mu!==0){var Se=Q?XS(I,Q):new FormData(I);ou(y,{pending:!0,data:Se,method:I.method,action:F},null,Se)}}else typeof F=="function"&&(le.preventDefault(),Se=Q?XS(I,Q):new FormData(I),ou(y,{pending:!0,data:Se,method:I.method,action:F},F,Se))},currentTarget:I}]})}}for(var bn=0;bn<Kg.length;bn++){var Tx=Kg[bn],os=Tx.toLowerCase(),Ai=Tx[0].toUpperCase()+Tx.slice(1);Ja(os,"on"+Ai)}Ja(Ts,"onAnimationEnd"),Ja(op,"onAnimationIteration"),Ja(Uw,"onAnimationStart"),Ja("dblclick","onDoubleClick"),Ja("focusin","onFocus"),Ja("focusout","onBlur"),Ja(vh,"onTransitionRun"),Ja(Wg,"onTransitionStart"),Ja(qg,"onTransitionCancel"),Ja(xr,"onTransitionEnd"),Rt("onMouseEnter",["mouseout","mouseover"]),Rt("onMouseLeave",["mouseout","mouseover"]),Rt("onPointerEnter",["pointerout","pointerover"]),Rt("onPointerLeave",["pointerout","pointerover"]),Tt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zp));function YS(d,p){p=(p&4)!==0;for(var y=0;y<d.length;y++){var C=d[y],I=C.event;C=C.listeners;e:{var F=void 0;if(p)for(var Q=C.length-1;0<=Q;Q--){var le=C[Q],Se=le.instance,Ue=le.currentTarget;if(le=le.listener,Se!==F&&I.isPropagationStopped())break e;F=le,I.currentTarget=Ue;try{F(I)}catch(nt){Xg(nt)}I.currentTarget=null,F=Se}else for(Q=0;Q<C.length;Q++){if(le=C[Q],Se=le.instance,Ue=le.currentTarget,le=le.listener,Se!==F&&I.isPropagationStopped())break e;F=le,I.currentTarget=Ue;try{F(I)}catch(nt){Xg(nt)}I.currentTarget=null,F=Se}}}}function Wn(d,p){var y=p[ws];y===void 0&&(y=p[ws]=new Set);var C=d+"__bubble";y.has(C)||(z0(p,d,2,!1),y.add(C))}function Mx(d,p,y){var C=0;p&&(C|=4),z0(y,d,C,p)}var B0="_reactListening"+Math.random().toString(36).slice(2);function Ax(d){if(!d[B0]){d[B0]=!0,Re.forEach(function(y){y!=="selectionchange"&&(gu.has(y)||Mx(y,!1,d),Mx(y,!0,d))});var p=d.nodeType===9?d:d.ownerDocument;p===null||p[B0]||(p[B0]=!0,Mx("selectionchange",!1,p))}}function z0(d,p,y,C){switch(wE(p)){case 2:var I=GM;break;case 8:I=WM;break;default:I=Bx}y=I.bind(null,p,y,d),I=void 0,!rb||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(I=!0),C?I!==void 0?d.addEventListener(p,y,{capture:!0,passive:I}):d.addEventListener(p,y,!0):I!==void 0?d.addEventListener(p,y,{passive:I}):d.addEventListener(p,y,!1)}function Px(d,p,y,C,I){var F=C;if((p&1)===0&&(p&2)===0&&C!==null)e:for(;;){if(C===null)return;var Q=C.tag;if(Q===3||Q===4){var le=C.stateNode.containerInfo;if(le===I)break;if(Q===4)for(Q=C.return;Q!==null;){var Se=Q.tag;if((Se===3||Se===4)&&Q.stateNode.containerInfo===I)return;Q=Q.return}for(;le!==null;){if(Q=gl(le),Q===null)return;if(Se=Q.tag,Se===5||Se===6||Se===26||Se===27){C=F=Q;continue e}le=le.parentNode}}C=C.return}Ew(function(){var Ue=F,nt=tb(y),st=[];e:{var He=Vw.get(d);if(He!==void 0){var Ye=Ig,zt=d;switch(d){case"keypress":if(kg(y)===0)break e;case"keydown":case"keyup":Ye=Yc;break;case"focusin":zt="focus",Ye=jg;break;case"focusout":zt="blur",Ye=jg;break;case"beforeblur":case"afterblur":Ye=jg;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ye=$g;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ye=Tw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ye=eM;break;case Ts:case op:case Uw:Ye=Pw;break;case xr:Ye=nM;break;case"scroll":case"scrollend":Ye=ZT;break;case"wheel":Ye=Og;break;case"copy":case"cut":case"paste":Ye=Ss;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ye=kw;break;case"toggle":case"beforetoggle":Ye=rM}var sn=(p&4)!==0,Rr=!sn&&(d==="scroll"||d==="scrollend"),Ne=sn?He!==null?He+"Capture":null:He;sn=[];for(var Te=Ue,ze;Te!==null;){var at=Te;if(ze=at.stateNode,at=at.tag,at!==5&&at!==26&&at!==27||ze===null||Ne===null||(at=Xu(Te,Ne),at!=null&&sn.push(Os(Te,at,ze))),Rr)break;Te=Te.return}0<sn.length&&(He=new Ye(He,zt,null,y,nt),st.push({event:He,listeners:sn}))}}if((p&7)===0){e:{if(He=d==="mouseover"||d==="pointerover",Ye=d==="mouseout"||d==="pointerout",He&&y!==eb&&(zt=y.relatedTarget||y.fromElement)&&(gl(zt)||zt[Bi]))break e;if((Ye||He)&&(He=nt.window===nt?nt:(He=nt.ownerDocument)?He.defaultView||He.parentWindow:window,Ye?(zt=y.relatedTarget||y.toElement,Ye=Ue,zt=zt?gl(zt):null,zt!==null&&(Rr=a(zt),sn=zt.tag,zt!==Rr||sn!==5&&sn!==27&&sn!==6)&&(zt=null)):(Ye=null,zt=Ue),Ye!==zt)){if(sn=$g,at="onMouseLeave",Ne="onMouseEnter",Te="mouse",(d==="pointerout"||d==="pointerover")&&(sn=kw,at="onPointerLeave",Ne="onPointerEnter",Te="pointer"),Rr=Ye==null?He:Ae(Ye),ze=zt==null?He:Ae(zt),He=new sn(at,Te+"leave",Ye,y,nt),He.target=Rr,He.relatedTarget=ze,at=null,gl(nt)===Ue&&(sn=new sn(Ne,Te+"enter",zt,y,nt),sn.target=ze,sn.relatedTarget=Rr,at=sn),Rr=at,Ye&&zt)t:{for(sn=U0,Ne=Ye,Te=zt,ze=0,at=Ne;at;at=sn(at))ze++;at=0;for(var tn=Te;tn;tn=sn(tn))at++;for(;0<ze-at;)Ne=sn(Ne),ze--;for(;0<at-ze;)Te=sn(Te),at--;for(;ze--;){if(Ne===Te||Te!==null&&Ne===Te.alternate){sn=Ne;break t}Ne=sn(Ne),Te=sn(Te)}sn=null}else sn=null;Ye!==null&&ei(st,He,Ye,sn,!1),zt!==null&&Rr!==null&&ei(st,Rr,zt,sn,!0)}}e:{if(He=Ue?Ae(Ue):window,Ye=He.nodeName&&He.nodeName.toLowerCase(),Ye==="select"||Ye==="input"&&He.type==="file")var lr=Lw;else if(ub(He))if(Qu)lr=oM;else{lr=aM;var Wt=Hg}else Ye=He.nodeName,!Ye||Ye.toLowerCase()!=="input"||He.type!=="checkbox"&&He.type!=="radio"?Ue&&Dg(Ue.elementType)&&(lr=Lw):lr=sM;if(lr&&(lr=lr(d,Ue))){db(st,lr,y,nt);break e}Wt&&Wt(d,He,Ue),d==="focusout"&&Ue&&He.type==="number"&&Ue.memoizedProps.value!=null&&Ri(He,"number",He.value)}switch(Wt=Ue?Ae(Ue):window,d){case"focusin":(ub(Wt)||Wt.contentEditable==="true")&&(Me=Wt,tt=Ue,Ke=null);break;case"focusout":Ke=tt=Me=null;break;case"mousedown":Ot=!0;break;case"contextmenu":case"mouseup":case"dragend":Ot=!1,yn(st,y,nt);break;case"selectionchange":if(gh)break;case"keydown":case"keyup":yn(st,y,nt)}var Nn;if(Fg)e:{switch(d){case"compositionstart":var Yn="onCompositionStart";break e;case"compositionend":Yn="onCompositionEnd";break e;case"compositionupdate":Yn="onCompositionUpdate";break e}Yn=void 0}else Ju?zg(d,y)&&(Yn="onCompositionEnd"):d==="keydown"&&y.keyCode===229&&(Yn="onCompositionStart");Yn&&(lb&&y.locale!=="ko"&&(Ju||Yn!=="onCompositionStart"?Yn==="onCompositionEnd"&&Ju&&(Nn=jr()):(Kc=nt,ib="value"in Kc?Kc.value:Kc.textContent,Ju=!0)),Wt=Jp(Ue,Yn),0<Wt.length&&(Yn=new Es(Yn,d,null,y,nt),st.push({event:Yn,listeners:Wt}),Nn?Yn.data=Nn:(Nn=jw(y),Nn!==null&&(Yn.data=Nn)))),(Nn=ob?Cs(d,y):cb(d,y))&&(Yn=Jp(Ue,"onBeforeInput"),0<Yn.length&&(Wt=new Es("onBeforeInput","beforeinput",null,y,nt),st.push({event:Wt,listeners:Yn}),Wt.data=Nn)),md(st,d,Ue,y,nt)}YS(st,p)})}function Os(d,p,y){return{instance:d,listener:p,currentTarget:y}}function Jp(d,p){for(var y=p+"Capture",C=[];d!==null;){var I=d,F=I.stateNode;if(I=I.tag,I!==5&&I!==26&&I!==27||F===null||(I=Xu(d,y),I!=null&&C.unshift(Os(d,I,F)),I=Xu(d,p),I!=null&&C.push(Os(d,I,F))),d.tag===3)return C;d=d.return}return[]}function U0(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function ei(d,p,y,C,I){for(var F=p._reactName,Q=[];y!==null&&y!==C;){var le=y,Se=le.alternate,Ue=le.stateNode;if(le=le.tag,Se!==null&&Se===C)break;le!==5&&le!==26&&le!==27||Ue===null||(Se=Ue,I?(Ue=Xu(y,F),Ue!=null&&Q.unshift(Os(y,Ue,Se))):I||(Ue=Xu(y,F),Ue!=null&&Q.push(Os(y,Ue,Se)))),y=y.return}Q.length!==0&&d.push({event:p,listeners:Q})}var gi=/\r\n?/g,ZS=/\u0000|\uFFFD/g;function JS(d){return(typeof d=="string"?d:""+d).replace(gi,`
`).replace(ZS,"")}function QS(d,p){return p=JS(p),JS(d)===p}function kr(d,p,y,C,I,F){switch(y){case"children":typeof C=="string"?p==="body"||p==="textarea"&&C===""||Fa(d,C):(typeof C=="number"||typeof C=="bigint")&&p!=="body"&&Fa(d,""+C);break;case"className":Kn(d,"class",C);break;case"tabIndex":Kn(d,"tabindex",C);break;case"dir":case"role":case"viewBox":case"width":case"height":Kn(d,y,C);break;case"style":xw(d,C,F);break;case"data":if(p!=="object"){Kn(d,"data",C);break}case"src":case"href":if(C===""&&(p!=="a"||y!=="href")){d.removeAttribute(y);break}if(C==null||typeof C=="function"||typeof C=="symbol"||typeof C=="boolean"){d.removeAttribute(y);break}C=Qf(""+C),d.setAttribute(y,C);break;case"action":case"formAction":if(typeof C=="function"){d.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof F=="function"&&(y==="formAction"?(p!=="input"&&kr(d,p,"name",I.name,I,null),kr(d,p,"formEncType",I.formEncType,I,null),kr(d,p,"formMethod",I.formMethod,I,null),kr(d,p,"formTarget",I.formTarget,I,null)):(kr(d,p,"encType",I.encType,I,null),kr(d,p,"method",I.method,I,null),kr(d,p,"target",I.target,I,null)));if(C==null||typeof C=="symbol"||typeof C=="boolean"){d.removeAttribute(y);break}C=Qf(""+C),d.setAttribute(y,C);break;case"onClick":C!=null&&(d.onclick=tc);break;case"onScroll":C!=null&&Wn("scroll",d);break;case"onScrollEnd":C!=null&&Wn("scrollend",d);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(r(61));if(y=C.__html,y!=null){if(I.children!=null)throw Error(r(60));d.innerHTML=y}}break;case"multiple":d.multiple=C&&typeof C!="function"&&typeof C!="symbol";break;case"muted":d.muted=C&&typeof C!="function"&&typeof C!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(C==null||typeof C=="function"||typeof C=="boolean"||typeof C=="symbol"){d.removeAttribute("xlink:href");break}y=Qf(""+C),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":C!=null&&typeof C!="function"&&typeof C!="symbol"?d.setAttribute(y,""+C):d.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":C&&typeof C!="function"&&typeof C!="symbol"?d.setAttribute(y,""):d.removeAttribute(y);break;case"capture":case"download":C===!0?d.setAttribute(y,""):C!==!1&&C!=null&&typeof C!="function"&&typeof C!="symbol"?d.setAttribute(y,C):d.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":C!=null&&typeof C!="function"&&typeof C!="symbol"&&!isNaN(C)&&1<=C?d.setAttribute(y,C):d.removeAttribute(y);break;case"rowSpan":case"start":C==null||typeof C=="function"||typeof C=="symbol"||isNaN(C)?d.removeAttribute(y):d.setAttribute(y,C);break;case"popover":Wn("beforetoggle",d),Wn("toggle",d),wn(d,"popover",C);break;case"xlinkActuate":Zn(d,"http://www.w3.org/1999/xlink","xlink:actuate",C);break;case"xlinkArcrole":Zn(d,"http://www.w3.org/1999/xlink","xlink:arcrole",C);break;case"xlinkRole":Zn(d,"http://www.w3.org/1999/xlink","xlink:role",C);break;case"xlinkShow":Zn(d,"http://www.w3.org/1999/xlink","xlink:show",C);break;case"xlinkTitle":Zn(d,"http://www.w3.org/1999/xlink","xlink:title",C);break;case"xlinkType":Zn(d,"http://www.w3.org/1999/xlink","xlink:type",C);break;case"xmlBase":Zn(d,"http://www.w3.org/XML/1998/namespace","xml:base",C);break;case"xmlLang":Zn(d,"http://www.w3.org/XML/1998/namespace","xml:lang",C);break;case"xmlSpace":Zn(d,"http://www.w3.org/XML/1998/namespace","xml:space",C);break;case"is":wn(d,"is",C);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=_w.get(y)||y,wn(d,y,C))}}function Nx(d,p,y,C,I,F){switch(y){case"style":xw(d,C,F);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(r(61));if(y=C.__html,y!=null){if(I.children!=null)throw Error(r(60));d.innerHTML=y}}break;case"children":typeof C=="string"?Fa(d,C):(typeof C=="number"||typeof C=="bigint")&&Fa(d,""+C);break;case"onScroll":C!=null&&Wn("scroll",d);break;case"onScrollEnd":C!=null&&Wn("scrollend",d);break;case"onClick":C!=null&&(d.onclick=tc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wt.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(I=y.endsWith("Capture"),p=y.slice(2,I?y.length-7:void 0),F=d[Vr]||null,F=F!=null?F[y]:null,typeof F=="function"&&d.removeEventListener(p,F,I),typeof C=="function")){typeof F!="function"&&F!==null&&(y in d?d[y]=null:d.hasAttribute(y)&&d.removeAttribute(y)),d.addEventListener(p,C,I);break e}y in d?d[y]=C:C===!0?d.setAttribute(y,""):wn(d,y,C)}}}function ga(d,p,y){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Wn("error",d),Wn("load",d);var C=!1,I=!1,F;for(F in y)if(y.hasOwnProperty(F)){var Q=y[F];if(Q!=null)switch(F){case"src":C=!0;break;case"srcSet":I=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:kr(d,p,F,Q,y,null)}}I&&kr(d,p,"srcSet",y.srcSet,y,null),C&&kr(d,p,"src",y.src,y,null);return;case"input":Wn("invalid",d);var le=F=Q=I=null,Se=null,Ue=null;for(C in y)if(y.hasOwnProperty(C)){var nt=y[C];if(nt!=null)switch(C){case"name":I=nt;break;case"type":Q=nt;break;case"checked":Se=nt;break;case"defaultChecked":Ue=nt;break;case"value":F=nt;break;case"defaultValue":le=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(r(137,p));break;default:kr(d,p,C,nt,y,null)}}br(d,F,le,Se,Ue,Q,I,!1);return;case"select":Wn("invalid",d),C=Q=F=null;for(I in y)if(y.hasOwnProperty(I)&&(le=y[I],le!=null))switch(I){case"value":F=le;break;case"defaultValue":Q=le;break;case"multiple":C=le;default:kr(d,p,I,le,y,null)}p=F,y=Q,d.multiple=!!C,p!=null?si(d,!!C,p,!1):y!=null&&si(d,!!C,y,!0);return;case"textarea":Wn("invalid",d),F=I=C=null;for(Q in y)if(y.hasOwnProperty(Q)&&(le=y[Q],le!=null))switch(Q){case"value":C=le;break;case"defaultValue":I=le;break;case"children":F=le;break;case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(91));break;default:kr(d,p,Q,le,y,null)}zi(d,C,I,F);return;case"option":for(Se in y)if(y.hasOwnProperty(Se)&&(C=y[Se],C!=null))switch(Se){case"selected":d.selected=C&&typeof C!="function"&&typeof C!="symbol";break;default:kr(d,p,Se,C,y,null)}return;case"dialog":Wn("beforetoggle",d),Wn("toggle",d),Wn("cancel",d),Wn("close",d);break;case"iframe":case"object":Wn("load",d);break;case"video":case"audio":for(C=0;C<Zp.length;C++)Wn(Zp[C],d);break;case"image":Wn("error",d),Wn("load",d);break;case"details":Wn("toggle",d);break;case"embed":case"source":case"link":Wn("error",d),Wn("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ue in y)if(y.hasOwnProperty(Ue)&&(C=y[Ue],C!=null))switch(Ue){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:kr(d,p,Ue,C,y,null)}return;default:if(Dg(p)){for(nt in y)y.hasOwnProperty(nt)&&(C=y[nt],C!==void 0&&Nx(d,p,nt,C,y,void 0));return}}for(le in y)y.hasOwnProperty(le)&&(C=y[le],C!=null&&kr(d,p,le,C,y,null))}function NM(d,p,y,C){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var I=null,F=null,Q=null,le=null,Se=null,Ue=null,nt=null;for(Ye in y){var st=y[Ye];if(y.hasOwnProperty(Ye)&&st!=null)switch(Ye){case"checked":break;case"value":break;case"defaultValue":Se=st;default:C.hasOwnProperty(Ye)||kr(d,p,Ye,null,C,st)}}for(var He in C){var Ye=C[He];if(st=y[He],C.hasOwnProperty(He)&&(Ye!=null||st!=null))switch(He){case"type":F=Ye;break;case"name":I=Ye;break;case"checked":Ue=Ye;break;case"defaultChecked":nt=Ye;break;case"value":Q=Ye;break;case"defaultValue":le=Ye;break;case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(r(137,p));break;default:Ye!==st&&kr(d,p,He,Ye,C,st)}}Ya(d,Q,le,Se,Ue,nt,F,I);return;case"select":Ye=Q=le=He=null;for(F in y)if(Se=y[F],y.hasOwnProperty(F)&&Se!=null)switch(F){case"value":break;case"multiple":Ye=Se;default:C.hasOwnProperty(F)||kr(d,p,F,null,C,Se)}for(I in C)if(F=C[I],Se=y[I],C.hasOwnProperty(I)&&(F!=null||Se!=null))switch(I){case"value":He=F;break;case"defaultValue":le=F;break;case"multiple":Q=F;default:F!==Se&&kr(d,p,I,F,C,Se)}p=le,y=Q,C=Ye,He!=null?si(d,!!y,He,!1):!!C!=!!y&&(p!=null?si(d,!!y,p,!0):si(d,!!y,y?[]:"",!1));return;case"textarea":Ye=He=null;for(le in y)if(I=y[le],y.hasOwnProperty(le)&&I!=null&&!C.hasOwnProperty(le))switch(le){case"value":break;case"children":break;default:kr(d,p,le,null,C,I)}for(Q in C)if(I=C[Q],F=y[Q],C.hasOwnProperty(Q)&&(I!=null||F!=null))switch(Q){case"value":He=I;break;case"defaultValue":Ye=I;break;case"children":break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:I!==F&&kr(d,p,Q,I,C,F)}Ii(d,He,Ye);return;case"option":for(var zt in y)if(He=y[zt],y.hasOwnProperty(zt)&&He!=null&&!C.hasOwnProperty(zt))switch(zt){case"selected":d.selected=!1;break;default:kr(d,p,zt,null,C,He)}for(Se in C)if(He=C[Se],Ye=y[Se],C.hasOwnProperty(Se)&&He!==Ye&&(He!=null||Ye!=null))switch(Se){case"selected":d.selected=He&&typeof He!="function"&&typeof He!="symbol";break;default:kr(d,p,Se,He,C,Ye)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var sn in y)He=y[sn],y.hasOwnProperty(sn)&&He!=null&&!C.hasOwnProperty(sn)&&kr(d,p,sn,null,C,He);for(Ue in C)if(He=C[Ue],Ye=y[Ue],C.hasOwnProperty(Ue)&&He!==Ye&&(He!=null||Ye!=null))switch(Ue){case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(r(137,p));break;default:kr(d,p,Ue,He,C,Ye)}return;default:if(Dg(p)){for(var Rr in y)He=y[Rr],y.hasOwnProperty(Rr)&&He!==void 0&&!C.hasOwnProperty(Rr)&&Nx(d,p,Rr,void 0,C,He);for(nt in C)He=C[nt],Ye=y[nt],!C.hasOwnProperty(nt)||He===Ye||He===void 0&&Ye===void 0||Nx(d,p,nt,He,C,Ye);return}}for(var Ne in y)He=y[Ne],y.hasOwnProperty(Ne)&&He!=null&&!C.hasOwnProperty(Ne)&&kr(d,p,Ne,null,C,He);for(st in C)He=C[st],Ye=y[st],!C.hasOwnProperty(st)||He===Ye||He==null&&Ye==null||kr(d,p,st,He,C,Ye)}function Dx(d){switch(d){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Qp(){if(typeof performance.getEntriesByType=="function"){for(var d=0,p=0,y=performance.getEntriesByType("resource"),C=0;C<y.length;C++){var I=y[C],F=I.transferSize,Q=I.initiatorType,le=I.duration;if(F&&le&&Dx(Q)){for(Q=0,le=I.responseEnd,C+=1;C<y.length;C++){var Se=y[C],Ue=Se.startTime;if(Ue>le)break;var nt=Se.transferSize,st=Se.initiatorType;nt&&Dx(st)&&(Se=Se.responseEnd,Q+=nt*(Se<le?1:(le-Ue)/(Se-Ue)))}if(--C,p+=8*(F+Q)/(I.duration/1e3),d++,10<d)break}}if(0<d)return p/d/1e6}return navigator.connection&&(d=navigator.connection.downlink,typeof d=="number")?d:5}var em=null,kx=null;function tm(d){return d.nodeType===9?d:d.ownerDocument}function nm(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ls(d,p){if(d===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&p==="foreignObject"?0:d}function vu(d,p){return d==="textarea"||d==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var Rx=null;function DM(){var d=window.event;return d&&d.type==="popstate"?d===Rx?!1:(Rx=d,!0):(Rx=null,!1)}var eE=typeof setTimeout=="function"?setTimeout:void 0,kM=typeof clearTimeout=="function"?clearTimeout:void 0,tE=typeof Promise=="function"?Promise:void 0,nE=typeof queueMicrotask=="function"?queueMicrotask:typeof tE<"u"?function(d){return tE.resolve(null).then(d).catch(bc)}:eE;function bc(d){setTimeout(function(){throw d})}function cn(d){return d==="head"}function Ix(d,p){var y=p,C=0;do{var I=y.nextSibling;if(d.removeChild(y),I&&I.nodeType===8)if(y=I.data,y==="/$"||y==="/&"){if(C===0){d.removeChild(I),af(p);return}C--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")C++;else if(y==="html")rm(d.ownerDocument.documentElement);else if(y==="head"){y=d.ownerDocument.head,rm(y);for(var F=y.firstChild;F;){var Q=F.nextSibling,le=F.nodeName;F[ec]||le==="SCRIPT"||le==="STYLE"||le==="LINK"&&F.rel.toLowerCase()==="stylesheet"||y.removeChild(F),F=Q}}else y==="body"&&rm(d.ownerDocument.body);y=I}while(y);af(p)}function Fs(d,p){var y=d;d=0;do{var C=y.nextSibling;if(y.nodeType===1?p?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(p?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),C&&C.nodeType===8)if(y=C.data,y==="/$"){if(d===0)break;d--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||d++;y=C}while(y)}function V0(d){var p=d.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var y=p;switch(p=p.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":V0(y),qu(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}d.removeChild(y)}}function RM(d,p,y,C){for(;d.nodeType===1;){var I=y;if(d.nodeName.toLowerCase()!==p.toLowerCase()){if(!C&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(C){if(!d[ec])switch(p){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(F=d.getAttribute("rel"),F==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(F!==I.rel||d.getAttribute("href")!==(I.href==null||I.href===""?null:I.href)||d.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin)||d.getAttribute("title")!==(I.title==null?null:I.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(F=d.getAttribute("src"),(F!==(I.src==null?null:I.src)||d.getAttribute("type")!==(I.type==null?null:I.type)||d.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin))&&F&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(p==="input"&&d.type==="hidden"){var F=I.name==null?null:""+I.name;if(I.type==="hidden"&&d.getAttribute("name")===F)return d}else return d;if(d=co(d.nextSibling),d===null)break}return null}function wr(d,p,y){if(p==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!y||(d=co(d.nextSibling),d===null))return null;return d}function rE(d,p){for(;d.nodeType!==8;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!p||(d=co(d.nextSibling),d===null))return null;return d}function H0(d){return d.data==="$?"||d.data==="$~"}function Yh(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState!=="loading"}function IM(d,p){var y=d.ownerDocument;if(d.data==="$~")d._reactRetry=p;else if(d.data!=="$?"||y.readyState!=="loading")p();else{var C=function(){p(),y.removeEventListener("DOMContentLoaded",C)};y.addEventListener("DOMContentLoaded",C),d._reactRetry=C}}function co(d){for(;d!=null;d=d.nextSibling){var p=d.nodeType;if(p===1||p===3)break;if(p===8){if(p=d.data,p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"||p==="F!"||p==="F")break;if(p==="/$"||p==="/&")return null}}return d}var $x=null;function iE(d){d=d.nextSibling;for(var p=0;d;){if(d.nodeType===8){var y=d.data;if(y==="/$"||y==="/&"){if(p===0)return co(d.nextSibling);p--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||p++}d=d.nextSibling}return null}function aE(d){d=d.previousSibling;for(var p=0;d;){if(d.nodeType===8){var y=d.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(p===0)return d;p--}else y!=="/$"&&y!=="/&"||p++}d=d.previousSibling}return null}function sE(d,p,y){switch(p=tm(y),d){case"html":if(d=p.documentElement,!d)throw Error(r(452));return d;case"head":if(d=p.head,!d)throw Error(r(453));return d;case"body":if(d=p.body,!d)throw Error(r(454));return d;default:throw Error(r(451))}}function rm(d){for(var p=d.attributes;p.length;)d.removeAttributeNode(p[0]);qu(d)}var uo=new Map,oE=new Set;function G0(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var xc=z.d;z.d={f:$M,r:jM,D:jx,C:LM,L:OM,m:FM,X:cs,S:na,M:BM};function $M(){var d=xc.f(),p=I0();return d||p}function jM(d){var p=ue(d);p!==null&&p.tag===5&&p.type==="form"?Bb(p):xc.r(d)}var yu=typeof document>"u"?null:document;function lE(d,p,y){var C=yu;if(C&&typeof p=="string"&&p){var I=Sr(p);I='link[rel="'+d+'"][href="'+I+'"]',typeof y=="string"&&(I+='[crossorigin="'+y+'"]'),oE.has(I)||(oE.add(I),d={rel:d,crossOrigin:y,href:p},C.querySelector(I)===null&&(p=C.createElement("link"),ga(p,"link",d),Be(p),C.head.appendChild(p)))}}function jx(d){xc.D(d),lE("dns-prefetch",d,null)}function LM(d,p){xc.C(d,p),lE("preconnect",d,p)}function OM(d,p,y){xc.L(d,p,y);var C=yu;if(C&&d&&p){var I='link[rel="preload"][as="'+Sr(p)+'"]';p==="image"&&y&&y.imageSrcSet?(I+='[imagesrcset="'+Sr(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(I+='[imagesizes="'+Sr(y.imageSizes)+'"]')):I+='[href="'+Sr(d)+'"]';var F=I;switch(p){case"style":F=Zh(d);break;case"script":F=Qh(d)}uo.has(F)||(d=f({rel:"preload",href:p==="image"&&y&&y.imageSrcSet?void 0:d,as:p},y),uo.set(F,d),C.querySelector(I)!==null||p==="style"&&C.querySelector(Jh(F))||p==="script"&&C.querySelector(ef(F))||(p=C.createElement("link"),ga(p,"link",d),Be(p),C.head.appendChild(p)))}}function FM(d,p){xc.m(d,p);var y=yu;if(y&&d){var C=p&&typeof p.as=="string"?p.as:"script",I='link[rel="modulepreload"][as="'+Sr(C)+'"][href="'+Sr(d)+'"]',F=I;switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":F=Qh(d)}if(!uo.has(F)&&(d=f({rel:"modulepreload",href:d},p),uo.set(F,d),y.querySelector(I)===null)){switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(ef(F)))return}C=y.createElement("link"),ga(C,"link",d),Be(C),y.head.appendChild(C)}}}function na(d,p,y){xc.S(d,p,y);var C=yu;if(C&&d){var I=Ge(C).hoistableStyles,F=Zh(d);p=p||"default";var Q=I.get(F);if(!Q){var le={loading:0,preload:null};if(Q=C.querySelector(Jh(F)))le.loading=5;else{d=f({rel:"stylesheet",href:d,"data-precedence":p},y),(y=uo.get(F))&&Lx(d,y);var Se=Q=C.createElement("link");Be(Se),ga(Se,"link",d),Se._p=new Promise(function(Ue,nt){Se.onload=Ue,Se.onerror=nt}),Se.addEventListener("load",function(){le.loading|=1}),Se.addEventListener("error",function(){le.loading|=2}),le.loading|=4,W0(Q,p,C)}Q={type:"stylesheet",instance:Q,count:1,state:le},I.set(F,Q)}}}function cs(d,p){xc.X(d,p);var y=yu;if(y&&d){var C=Ge(y).hoistableScripts,I=Qh(d),F=C.get(I);F||(F=y.querySelector(ef(I)),F||(d=f({src:d,async:!0},p),(p=uo.get(I))&&q0(d,p),F=y.createElement("script"),Be(F),ga(F,"link",d),y.head.appendChild(F)),F={type:"script",instance:F,count:1,state:null},C.set(I,F))}}function BM(d,p){xc.M(d,p);var y=yu;if(y&&d){var C=Ge(y).hoistableScripts,I=Qh(d),F=C.get(I);F||(F=y.querySelector(ef(I)),F||(d=f({src:d,async:!0,type:"module"},p),(p=uo.get(I))&&q0(d,p),F=y.createElement("script"),Be(F),ga(F,"link",d),y.head.appendChild(F)),F={type:"script",instance:F,count:1,state:null},C.set(I,F))}}function cE(d,p,y,C){var I=(I=G.current)?G0(I):null;if(!I)throw Error(r(446));switch(d){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(p=Zh(y.href),y=Ge(I).hoistableStyles,C=y.get(p),C||(C={type:"style",instance:null,count:0,state:null},y.set(p,C)),C):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){d=Zh(y.href);var F=Ge(I).hoistableStyles,Q=F.get(d);if(Q||(I=I.ownerDocument||I,Q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},F.set(d,Q),(F=I.querySelector(Jh(d)))&&!F._p&&(Q.instance=F,Q.state.loading=5),uo.has(d)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},uo.set(d,y),F||zM(I,d,y,Q.state))),p&&C===null)throw Error(r(528,""));return Q}if(p&&C!==null)throw Error(r(529,""));return null;case"script":return p=y.async,y=y.src,typeof y=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=Qh(y),y=Ge(I).hoistableScripts,C=y.get(p),C||(C={type:"script",instance:null,count:0,state:null},y.set(p,C)),C):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,d))}}function Zh(d){return'href="'+Sr(d)+'"'}function Jh(d){return'link[rel="stylesheet"]['+d+"]"}function uE(d){return f({},d,{"data-precedence":d.precedence,precedence:null})}function zM(d,p,y,C){d.querySelector('link[rel="preload"][as="style"]['+p+"]")?C.loading=1:(p=d.createElement("link"),C.preload=p,p.addEventListener("load",function(){return C.loading|=1}),p.addEventListener("error",function(){return C.loading|=2}),ga(p,"link",y),Be(p),d.head.appendChild(p))}function Qh(d){return'[src="'+Sr(d)+'"]'}function ef(d){return"script[async]"+d}function dE(d,p,y){if(p.count++,p.instance===null)switch(p.type){case"style":var C=d.querySelector('style[data-href~="'+Sr(y.href)+'"]');if(C)return p.instance=C,Be(C),C;var I=f({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return C=(d.ownerDocument||d).createElement("style"),Be(C),ga(C,"style",I),W0(C,y.precedence,d),p.instance=C;case"stylesheet":I=Zh(y.href);var F=d.querySelector(Jh(I));if(F)return p.state.loading|=4,p.instance=F,Be(F),F;C=uE(y),(I=uo.get(I))&&Lx(C,I),F=(d.ownerDocument||d).createElement("link"),Be(F);var Q=F;return Q._p=new Promise(function(le,Se){Q.onload=le,Q.onerror=Se}),ga(F,"link",C),p.state.loading|=4,W0(F,y.precedence,d),p.instance=F;case"script":return F=Qh(y.src),(I=d.querySelector(ef(F)))?(p.instance=I,Be(I),I):(C=y,(I=uo.get(F))&&(C=f({},y),q0(C,I)),d=d.ownerDocument||d,I=d.createElement("script"),Be(I),ga(I,"link",C),d.head.appendChild(I),p.instance=I);case"void":return null;default:throw Error(r(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(C=p.instance,p.state.loading|=4,W0(C,y.precedence,d));return p.instance}function W0(d,p,y){for(var C=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),I=C.length?C[C.length-1]:null,F=I,Q=0;Q<C.length;Q++){var le=C[Q];if(le.dataset.precedence===p)F=le;else if(F!==I)break}F?F.parentNode.insertBefore(d,F.nextSibling):(p=y.nodeType===9?y.head:y,p.insertBefore(d,p.firstChild))}function Lx(d,p){d.crossOrigin==null&&(d.crossOrigin=p.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=p.referrerPolicy),d.title==null&&(d.title=p.title)}function q0(d,p){d.crossOrigin==null&&(d.crossOrigin=p.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=p.referrerPolicy),d.integrity==null&&(d.integrity=p.integrity)}var im=null;function hE(d,p,y){if(im===null){var C=new Map,I=im=new Map;I.set(y,C)}else I=im,C=I.get(y),C||(C=new Map,I.set(y,C));if(C.has(d))return C;for(C.set(d,null),y=y.getElementsByTagName(d),I=0;I<y.length;I++){var F=y[I];if(!(F[ec]||F[Pr]||d==="link"&&F.getAttribute("rel")==="stylesheet")&&F.namespaceURI!=="http://www.w3.org/2000/svg"){var Q=F.getAttribute(p)||"";Q=d+Q;var le=C.get(Q);le?le.push(F):C.set(Q,[F])}}return C}function fE(d,p,y){d=d.ownerDocument||d,d.head.insertBefore(y,p==="title"?d.querySelector("head > title"):null)}function UM(d,p,y){if(y===1||p.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return d=p.disabled,typeof p.precedence=="string"&&d==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function pE(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}function tf(d,p,y,C){if(y.type==="stylesheet"&&(typeof C.media!="string"||matchMedia(C.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var I=Zh(C.href),F=p.querySelector(Jh(I));if(F){p=F._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(d.count++,d=K0.bind(d),p.then(d,d)),y.state.loading|=4,y.instance=F,Be(F);return}F=p.ownerDocument||p,C=uE(C),(I=uo.get(I))&&Lx(C,I),F=F.createElement("link"),Be(F);var Q=F;Q._p=new Promise(function(le,Se){Q.onload=le,Q.onerror=Se}),ga(F,"link",C),y.instance=F}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(y,p),(p=y.state.preload)&&(y.state.loading&3)===0&&(d.count++,y=K0.bind(d),p.addEventListener("load",y),p.addEventListener("error",y))}}var Ox=0;function VM(d,p){return d.stylesheets&&d.count===0&&Y0(d,d.stylesheets),0<d.count||0<d.imgCount?function(y){var C=setTimeout(function(){if(d.stylesheets&&Y0(d,d.stylesheets),d.unsuspend){var F=d.unsuspend;d.unsuspend=null,F()}},6e4+p);0<d.imgBytes&&Ox===0&&(Ox=62500*Qp());var I=setTimeout(function(){if(d.waitingForImages=!1,d.count===0&&(d.stylesheets&&Y0(d,d.stylesheets),d.unsuspend)){var F=d.unsuspend;d.unsuspend=null,F()}},(d.imgBytes>Ox?50:800)+p);return d.unsuspend=y,function(){d.unsuspend=null,clearTimeout(C),clearTimeout(I)}}:null}function K0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Y0(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var X0=null;function Y0(d,p){d.stylesheets=null,d.unsuspend!==null&&(d.count++,X0=new Map,p.forEach(mE,d),X0=null,K0.call(d))}function mE(d,p){if(!(p.state.loading&4)){var y=X0.get(d);if(y)var C=y.get(null);else{y=new Map,X0.set(d,y);for(var I=d.querySelectorAll("link[data-precedence],style[data-precedence]"),F=0;F<I.length;F++){var Q=I[F];(Q.nodeName==="LINK"||Q.getAttribute("media")!=="not all")&&(y.set(Q.dataset.precedence,Q),C=Q)}C&&y.set(null,C)}I=p.instance,Q=I.getAttribute("data-precedence"),F=y.get(Q)||C,F===C&&y.set(null,I),y.set(Q,I),this.count++,C=K0.bind(this),I.addEventListener("load",C),I.addEventListener("error",C),F?F.parentNode.insertBefore(I,F.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(I,d.firstChild)),p.state.loading|=4}}var nf={$$typeof:E,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function HM(d,p,y,C,I,F,Q,le,Se){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.hiddenUpdates=yt(null),this.identifierPrefix=C,this.onUncaughtError=I,this.onCaughtError=F,this.onRecoverableError=Q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Se,this.incompleteTransitions=new Map}function gE(d,p,y,C,I,F,Q,le,Se,Ue,nt,st){return d=new HM(d,p,y,Q,Se,Ue,nt,st,le),p=1,F===!0&&(p|=24),F=ha(3,null,null,p),d.current=F,F.stateNode=d,p=jo(),p.refCount++,d.pooledCache=p,p.refCount++,F.memoizedState={element:C,isDehydrated:y,cache:p},wl(F),d}function vE(d){return d?(d=ic,d):ic}function yE(d,p,y,C,I,F){I=vE(I),C.context===null?C.context=I:C.pendingContext=I,C=iu(p),C.payload={element:y},F=F===void 0?null:F,F!==null&&(C.callback=F),y=Fo(d,C,p),y!==null&&(ss(y,d,p),mp(y,d,p))}function bE(d,p){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var y=d.retryLane;d.retryLane=y!==0&&y<p?y:p}}function Fx(d,p){bE(d,p),(d=d.alternate)&&bE(d,p)}function xE(d){if(d.tag===13||d.tag===31){var p=bl(d,67108864);p!==null&&ss(p,d,67108864),Fx(d,67108864)}}function _E(d){if(d.tag===13||d.tag===31){var p=js();p=Fn(p);var y=bl(d,p);y!==null&&ss(y,d,p),Fx(d,p)}}var Z0=!0;function GM(d,p,y,C){var I=O.T;O.T=null;var F=z.p;try{z.p=2,Bx(d,p,y,C)}finally{z.p=F,O.T=I}}function WM(d,p,y,C){var I=O.T;O.T=null;var F=z.p;try{z.p=8,Bx(d,p,y,C)}finally{z.p=F,O.T=I}}function Bx(d,p,y,C){if(Z0){var I=zx(C);if(I===null)Px(d,p,C,J0,y),SE(d,C);else if(EE(I,d,p,y,C))C.stopPropagation();else if(SE(d,C),p&4&&-1<qM.indexOf(d)){for(;I!==null;){var F=ue(I);if(F!==null)switch(F.tag){case 3:if(F=F.stateNode,F.current.memoizedState.isDehydrated){var Q=it(F.pendingLanes);if(Q!==0){var le=F;for(le.pendingLanes|=2,le.entangledLanes|=2;Q;){var Se=1<<31-Ct(Q);le.entanglements[1]|=Se,Q&=~Se}Ml(F),(fr&6)===0&&(fd=re()+500,Yp(0))}}break;case 31:case 13:le=bl(F,2),le!==null&&ss(le,F,2),I0(),Fx(F,2)}if(F=zx(C),F===null&&Px(d,p,C,J0,y),F===I)break;I=F}I!==null&&C.stopPropagation()}else Px(d,p,C,null,y)}}function zx(d){return d=tb(d),Ux(d)}var J0=null;function Ux(d){if(J0=null,d=gl(d),d!==null){var p=a(d);if(p===null)d=null;else{var y=p.tag;if(y===13){if(d=s(p),d!==null)return d;d=null}else if(y===31){if(d=o(p),d!==null)return d;d=null}else if(y===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;d=null}else p!==d&&(d=null)}}return J0=d,null}function wE(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ce()){case ke:return 2;case De:return 8;case je:case mt:return 32;case rt:return 268435456;default:return 32}default:return 32}}var Vx=!1,bu=null,xu=null,_u=null,am=new Map,sm=new Map,wu=[],qM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function SE(d,p){switch(d){case"focusin":case"focusout":bu=null;break;case"dragenter":case"dragleave":xu=null;break;case"mouseover":case"mouseout":_u=null;break;case"pointerover":case"pointerout":am.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":sm.delete(p.pointerId)}}function gd(d,p,y,C,I,F){return d===null||d.nativeEvent!==F?(d={blockedOn:p,domEventName:y,eventSystemFlags:C,nativeEvent:F,targetContainers:[I]},p!==null&&(p=ue(p),p!==null&&xE(p)),d):(d.eventSystemFlags|=C,p=d.targetContainers,I!==null&&p.indexOf(I)===-1&&p.push(I),d)}function EE(d,p,y,C,I){switch(p){case"focusin":return bu=gd(bu,d,p,y,C,I),!0;case"dragenter":return xu=gd(xu,d,p,y,C,I),!0;case"mouseover":return _u=gd(_u,d,p,y,C,I),!0;case"pointerover":var F=I.pointerId;return am.set(F,gd(am.get(F)||null,d,p,y,C,I)),!0;case"gotpointercapture":return F=I.pointerId,sm.set(F,gd(sm.get(F)||null,d,p,y,C,I)),!0}return!1}function Hx(d){var p=gl(d.target);if(p!==null){var y=a(p);if(y!==null){if(p=y.tag,p===13){if(p=s(y),p!==null){d.blockedOn=p,Oa(d.priority,function(){_E(y)});return}}else if(p===31){if(p=o(y),p!==null){d.blockedOn=p,Oa(d.priority,function(){_E(y)});return}}else if(p===3&&y.stateNode.current.memoizedState.isDehydrated){d.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}d.blockedOn=null}function Q0(d){if(d.blockedOn!==null)return!1;for(var p=d.targetContainers;0<p.length;){var y=zx(d.nativeEvent);if(y===null){y=d.nativeEvent;var C=new y.constructor(y.type,y);eb=C,y.target.dispatchEvent(C),eb=null}else return p=ue(y),p!==null&&xE(p),d.blockedOn=y,!1;p.shift()}return!0}function CE(d,p,y){Q0(d)&&y.delete(p)}function KM(){Vx=!1,bu!==null&&Q0(bu)&&(bu=null),xu!==null&&Q0(xu)&&(xu=null),_u!==null&&Q0(_u)&&(_u=null),am.forEach(CE),sm.forEach(CE)}function rf(d,p){d.blockedOn===p&&(d.blockedOn=null,Vx||(Vx=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,KM)))}var ev=null;function TE(d){ev!==d&&(ev=d,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ev===d&&(ev=null);for(var p=0;p<d.length;p+=3){var y=d[p],C=d[p+1],I=d[p+2];if(typeof C!="function"){if(Ux(C||y)===null)continue;break}var F=ue(y);F!==null&&(d.splice(p,3),p-=3,ou(F,{pending:!0,data:I,method:y.method,action:C},C,I))}}))}function af(d){function p(Se){return rf(Se,d)}bu!==null&&rf(bu,d),xu!==null&&rf(xu,d),_u!==null&&rf(_u,d),am.forEach(p),sm.forEach(p);for(var y=0;y<wu.length;y++){var C=wu[y];C.blockedOn===d&&(C.blockedOn=null)}for(;0<wu.length&&(y=wu[0],y.blockedOn===null);)Hx(y),y.blockedOn===null&&wu.shift();if(y=(d.ownerDocument||d).$$reactFormReplay,y!=null)for(C=0;C<y.length;C+=3){var I=y[C],F=y[C+1],Q=I[Vr]||null;if(typeof F=="function")Q||TE(y);else if(Q){var le=null;if(F&&F.hasAttribute("formAction")){if(I=F,Q=F[Vr]||null)le=Q.formAction;else if(Ux(I)!==null)continue}else le=Q.action;typeof le=="function"?y[C+1]=le:(y.splice(C,3),C-=3),TE(y)}}}function Va(){function d(F){F.canIntercept&&F.info==="react-transition"&&F.intercept({handler:function(){return new Promise(function(Q){return I=Q})},focusReset:"manual",scroll:"manual"})}function p(){I!==null&&(I(),I=null),C||setTimeout(y,20)}function y(){if(!C&&!navigation.transition){var F=navigation.currentEntry;F&&F.url!=null&&navigation.navigate(F.url,{state:F.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var C=!1,I=null;return navigation.addEventListener("navigate",d),navigation.addEventListener("navigatesuccess",p),navigation.addEventListener("navigateerror",p),setTimeout(y,100),function(){C=!0,navigation.removeEventListener("navigate",d),navigation.removeEventListener("navigatesuccess",p),navigation.removeEventListener("navigateerror",p),I!==null&&(I(),I=null)}}}function om(d){this._internalRoot=d}tv.prototype.render=om.prototype.render=function(d){var p=this._internalRoot;if(p===null)throw Error(r(409));var y=p.current,C=js();yE(y,C,d,p,null,null)},tv.prototype.unmount=om.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var p=d.containerInfo;yE(d.current,2,null,d,null,null),I0(),p[Bi]=null}};function tv(d){this._internalRoot=d}tv.prototype.unstable_scheduleHydration=function(d){if(d){var p=Ur();d={blockedOn:null,target:d,priority:p};for(var y=0;y<wu.length&&p!==0&&p<wu[y].priority;y++);wu.splice(y,0,d),y===0&&Hx(d)}};var ME=e.version;if(ME!=="19.2.1")throw Error(r(527,ME,"19.2.1"));z.findDOMNode=function(d){var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=u(p),d=d!==null?h(d):null,d=d===null?null:d.stateNode,d};var XM={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nv.isDisabled&&nv.supportsFiber)try{Je=nv.inject(XM),ot=nv}catch{}}return Wx.createRoot=function(d,p){if(!i(d))throw Error(r(299));var y=!1,C="",I=Gb,F=Wb,Q=hS;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(C=p.identifierPrefix),p.onUncaughtError!==void 0&&(I=p.onUncaughtError),p.onCaughtError!==void 0&&(F=p.onCaughtError),p.onRecoverableError!==void 0&&(Q=p.onRecoverableError)),p=gE(d,1,!1,null,null,y,C,null,I,F,Q,Va),d[Bi]=p.current,Ax(d),new om(p)},Wx.hydrateRoot=function(d,p,y){if(!i(d))throw Error(r(299));var C=!1,I="",F=Gb,Q=Wb,le=hS,Se=null;return y!=null&&(y.unstable_strictMode===!0&&(C=!0),y.identifierPrefix!==void 0&&(I=y.identifierPrefix),y.onUncaughtError!==void 0&&(F=y.onUncaughtError),y.onCaughtError!==void 0&&(Q=y.onCaughtError),y.onRecoverableError!==void 0&&(le=y.onRecoverableError),y.formState!==void 0&&(Se=y.formState)),p=gE(d,1,!0,p,y??null,C,I,Se,F,Q,le,Va),p.context=vE(null),y=p.current,C=js(),C=Fn(C),I=iu(C),I.callback=null,Fo(y,I,C),y=C,p.current.lanes=y,gt(p,y),Ml(p),d[Bi]=p.current,Ax(d),new tv(p)},Wx.version="19.2.1",Wx}var V$;function mQ(){if(V$)return QM.exports;V$=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),QM.exports=pQ(),QM.exports}var gQ=mQ();const vQ=vg(gQ);var H$="popstate";function yQ(t={}){function e(r,i){let{pathname:a,search:s,hash:o}=r.location;return iN("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Y1(i)}return xQ(e,n,null,t)}function xi(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bQ(){return Math.random().toString(36).substring(2,10)}function G$(t,e){return{usr:t.state,key:t.key,idx:e}}function iN(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ky(e):e,state:n,key:e&&e.key||r||bQ()}}function Y1({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ky(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function xQ(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",c=null,u=h();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function h(){return(s.state||{idx:null}).idx}function f(){o="POP";let _=h(),w=_==null?null:_-u;u=_,c&&c({action:o,location:x.location,delta:w})}function m(_,w){o="PUSH";let S=iN(x.location,_,w);u=h()+1;let E=G$(S,u),A=x.createHref(S);try{s.pushState(E,"",A)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(A)}a&&c&&c({action:o,location:x.location,delta:1})}function g(_,w){o="REPLACE";let S=iN(x.location,_,w);u=h();let E=G$(S,u),A=x.createHref(S);s.replaceState(E,"",A),a&&c&&c({action:o,location:x.location,delta:0})}function v(_){return _Q(_)}let x={get action(){return o},get location(){return t(i,s)},listen(_){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(H$,f),c=_,()=>{i.removeEventListener(H$,f),c=null}},createHref(_){return e(i,_)},createURL:v,encodeLocation(_){let w=v(_);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:g,go(_){return s.go(_)}};return x}function _Q(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),xi(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Y1(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function lB(t,e,n="/"){return wQ(t,e,n,!1)}function wQ(t,e,n,r){let i=typeof e=="string"?ky(e):e,a=Yd(i.pathname||"/",n);if(a==null)return null;let s=cB(t);SQ(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=IQ(a);o=kQ(s[c],u,r)}return o}function cB(t,e=[],n=[],r="",i=!1){let a=(s,o,c=i,u)=>{let h={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&c)return;xi(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let f=Vd([r,h.relativePath]),m=n.concat(h);s.children&&s.children.length>0&&(xi(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),cB(s.children,e,m,f,c)),!(s.path==null&&!s.index)&&e.push({path:f,score:NQ(f,s.index),routesMeta:m})};return t.forEach((s,o)=>{if(s.path===""||!s.path?.includes("?"))a(s,o);else for(let c of uB(s.path))a(s,o,!0,c)}),e}function uB(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=uB(r.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function SQ(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:DQ(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var EQ=/^:[\w-]+$/,CQ=3,TQ=2,MQ=1,AQ=10,PQ=-2,W$=t=>t==="*";function NQ(t,e){let n=t.split("/"),r=n.length;return n.some(W$)&&(r+=PQ),e&&(r+=TQ),n.filter(i=>!W$(i)).reduce((i,a)=>i+(EQ.test(a)?CQ:a===""?MQ:AQ),r)}function DQ(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function kQ(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let c=r[o],u=o===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",f=A3({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),m=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=A3({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:Vd([a,f.pathname]),pathnameBase:FQ(Vd([a,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(a=Vd([a,f.pathnameBase]))}return s}function A3(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=RQ(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,{paramName:h,isOptional:f},m)=>{if(h==="*"){let v=o[m]||"";s=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const g=o[m];return f&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:t}}function RQ(t,e=!1,n=!0){zl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function IQ(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zl(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Yd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var $Q=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jQ=t=>$Q.test(t);function LQ(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ky(t):t,a;if(n)if(jQ(n))a=n;else{if(n.includes("//")){let s=n;n=n.replace(/\/\/+/g,"/"),zl(!1,`Pathnames cannot have embedded double slashes - normalizing ${s} -> ${n}`)}n.startsWith("/")?a=q$(n.substring(1),"/"):a=q$(n,e)}else a=e;return{pathname:a,search:BQ(r),hash:zQ(i)}}function q$(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function r4(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function OQ(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function lR(t){let e=OQ(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function cR(t,e,n,r=!1){let i;typeof t=="string"?i=ky(t):(i={...t},xi(!i.pathname||!i.pathname.includes("?"),r4("?","pathname","search",i)),xi(!i.pathname||!i.pathname.includes("#"),r4("#","pathname","hash",i)),xi(!i.search||!i.search.includes("#"),r4("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let f=e.length-1;if(!r&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}o=f>=0?e[f]:"/"}let c=LQ(i,o),u=s&&s!=="/"&&s.endsWith("/"),h=(a||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}var Vd=t=>t.join("/").replace(/\/\/+/g,"/"),FQ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BQ=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,zQ=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function UQ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function VQ(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var dB=["POST","PUT","PATCH","DELETE"];new Set(dB);var HQ=["GET",...dB];new Set(HQ);var Ry=T.createContext(null);Ry.displayName="DataRouter";var k2=T.createContext(null);k2.displayName="DataRouterState";T.createContext(!1);var hB=T.createContext({isTransitioning:!1});hB.displayName="ViewTransition";var GQ=T.createContext(new Map);GQ.displayName="Fetchers";var WQ=T.createContext(null);WQ.displayName="Await";var ql=T.createContext(null);ql.displayName="Navigation";var F_=T.createContext(null);F_.displayName="Location";var Hc=T.createContext({outlet:null,matches:[],isDataRoute:!1});Hc.displayName="Route";var uR=T.createContext(null);uR.displayName="RouteError";function qQ(t,{relative:e}={}){xi(Iy(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=T.useContext(ql),{hash:i,pathname:a,search:s}=z_(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:Vd([n,a])),r.createHref({pathname:o,search:s,hash:i})}function Iy(){return T.useContext(F_)!=null}function nh(){return xi(Iy(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(F_).location}var fB="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pB(t){T.useContext(ql).static||T.useLayoutEffect(t)}function B_(){let{isDataRoute:t}=T.useContext(Hc);return t?see():KQ()}function KQ(){xi(Iy(),"useNavigate() may be used only in the context of a <Router> component.");let t=T.useContext(Ry),{basename:e,navigator:n}=T.useContext(ql),{matches:r}=T.useContext(Hc),{pathname:i}=nh(),a=JSON.stringify(lR(r)),s=T.useRef(!1);return pB(()=>{s.current=!0}),T.useCallback((c,u={})=>{if(zl(s.current,fB),!s.current)return;if(typeof c=="number"){n.go(c);return}let h=cR(c,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Vd([e,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[e,n,a,i,t])}T.createContext(null);function yg(){let{matches:t}=T.useContext(Hc),e=t[t.length-1];return e?e.params:{}}function z_(t,{relative:e}={}){let{matches:n}=T.useContext(Hc),{pathname:r}=nh(),i=JSON.stringify(lR(n));return T.useMemo(()=>cR(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function XQ(t,e){return mB(t,e)}function mB(t,e,n,r,i){xi(Iy(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=T.useContext(ql),{matches:s}=T.useContext(Hc),o=s[s.length-1],c=o?o.params:{},u=o?o.pathname:"/",h=o?o.pathnameBase:"/",f=o&&o.route;{let S=f&&f.path||"";gB(u,!f||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let m=nh(),g;if(e){let S=typeof e=="string"?ky(e):e;xi(h==="/"||S.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${S.pathname}" was given in the \`location\` prop.`),g=S}else g=m;let v=g.pathname||"/",x=v;if(h!=="/"){let S=h.replace(/^\//,"").split("/");x="/"+v.replace(/^\//,"").split("/").slice(S.length).join("/")}let _=lB(t,{pathname:x});zl(f||_!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),zl(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=eee(_&&_.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:Vd([h,a.encodeLocation?a.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?h:Vd([h,a.encodeLocation?a.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),s,n,r,i);return e&&w?T.createElement(F_.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},w):w}function YQ(){let t=aee(),e=UQ(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:a},"ErrorBoundary")," or"," ",T.createElement("code",{style:a},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:i},n):null,s)}var ZQ=T.createElement(YQ,null),JQ=class extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?T.createElement(Hc.Provider,{value:this.props.routeContext},T.createElement(uR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function QQ({routeContext:t,match:e,children:n}){let r=T.useContext(Ry);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(Hc.Provider,{value:t},n)}function eee(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=n?.errors;if(s!=null){let h=a.findIndex(f=>f.route.id&&s?.[f.route.id]!==void 0);xi(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let o=!1,c=-1;if(n)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:m,errors:g}=n,v=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!g||g[f.route.id]===void 0);if(f.route.lazy||v){o=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}let u=n&&r?(h,f)=>{r(h,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:VQ(n.matches),errorInfo:f})}:void 0;return a.reduceRight((h,f,m)=>{let g,v=!1,x=null,_=null;n&&(g=s&&f.route.id?s[f.route.id]:void 0,x=f.route.errorElement||ZQ,o&&(c<0&&m===0?(gB("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,_=null):c===m&&(v=!0,_=f.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,m+1)),S=()=>{let E;return g?E=x:v?E=_:f.route.Component?E=T.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=h,T.createElement(QQ,{match:f,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?T.createElement(JQ,{location:n.location,revalidation:n.revalidation,component:x,error:g,children:S(),routeContext:{outlet:null,matches:w,isDataRoute:!0},onError:u}):S()},null)}function dR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tee(t){let e=T.useContext(Ry);return xi(e,dR(t)),e}function nee(t){let e=T.useContext(k2);return xi(e,dR(t)),e}function ree(t){let e=T.useContext(Hc);return xi(e,dR(t)),e}function hR(t){let e=ree(t),n=e.matches[e.matches.length-1];return xi(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function iee(){return hR("useRouteId")}function aee(){let t=T.useContext(uR),e=nee("useRouteError"),n=hR("useRouteError");return t!==void 0?t:e.errors?.[n]}function see(){let{router:t}=tee("useNavigate"),e=hR("useNavigate"),n=T.useRef(!1);return pB(()=>{n.current=!0}),T.useCallback(async(i,a={})=>{zl(n.current,fB),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var K$={};function gB(t,e,n){!e&&!K$[t]&&(K$[t]=!0,zl(!1,n))}T.memo(oee);function oee({routes:t,future:e,state:n,unstable_onError:r}){return mB(t,void 0,n,r,e)}function lee({to:t,replace:e,state:n,relative:r}){xi(Iy(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=T.useContext(ql);zl(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=T.useContext(Hc),{pathname:s}=nh(),o=B_(),c=cR(t,lR(a),s,r==="path"),u=JSON.stringify(c);return T.useEffect(()=>{o(JSON.parse(u),{replace:e,state:n,relative:r})},[o,u,r,e,n]),null}function Dv(t){xi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function cee({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:s}){xi(!Iy(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:o,navigator:i,static:a,unstable_useTransitions:s,future:{}}),[o,i,a,s]);typeof n=="string"&&(n=ky(n));let{pathname:u="/",search:h="",hash:f="",state:m=null,key:g="default"}=n,v=T.useMemo(()=>{let x=Yd(u,o);return x==null?null:{location:{pathname:x,search:h,hash:f,state:m,key:g},navigationType:r}},[o,u,h,f,m,g,r]);return zl(v!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${f}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:T.createElement(ql.Provider,{value:c},T.createElement(F_.Provider,{children:e,value:v}))}function uee({children:t,location:e}){return XQ(aN(t),e)}function aN(t,e=[]){let n=[];return T.Children.forEach(t,(r,i)=>{if(!T.isValidElement(r))return;let a=[...e,i];if(r.type===T.Fragment){n.push.apply(n,aN(r.props.children,a));return}xi(r.type===Dv,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xi(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=aN(r.props.children,a)),n.push(s)}),n}var n3="get",r3="application/x-www-form-urlencoded";function R2(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function dee(t){return R2(t)&&t.tagName.toLowerCase()==="button"}function hee(t){return R2(t)&&t.tagName.toLowerCase()==="form"}function fee(t){return R2(t)&&t.tagName.toLowerCase()==="input"}function pee(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function mee(t,e){return t.button===0&&(!e||e==="_self")&&!pee(t)}var PE=null;function gee(){if(PE===null)try{new FormData(document.createElement("form"),0),PE=!1}catch{PE=!0}return PE}var vee=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function i4(t){return t!=null&&!vee.has(t)?(zl(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${r3}"`),null):t}function yee(t,e){let n,r,i,a,s;if(hee(t)){let o=t.getAttribute("action");r=o?Yd(o,e):null,n=t.getAttribute("method")||n3,i=i4(t.getAttribute("enctype"))||r3,a=new FormData(t)}else if(dee(t)||fee(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(r=c?Yd(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||n3,i=i4(t.getAttribute("formenctype"))||i4(o.getAttribute("enctype"))||r3,a=new FormData(o,t),!gee()){let{name:u,type:h,value:f}=t;if(h==="image"){let m=u?`${u}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else u&&a.append(u,f)}}else{if(R2(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=n3,r=null,i=r3,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function fR(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bee(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Yd(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function xee(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _ee(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function wee(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await xee(a,n);return s.links?s.links():[]}return[]}));return Tee(r.flat(1).filter(_ee).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function X$(t,e,n,r,i,a){let s=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,o=(c,u)=>n[u].pathname!==c.pathname||n[u].route.path?.endsWith("*")&&n[u].params["*"]!==c.params["*"];return a==="assets"?e.filter((c,u)=>s(c,u)||o(c,u)):a==="data"?e.filter((c,u)=>{let h=r.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(s(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function See(t,e,{includeHydrateFallback:n}={}){return Eee(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function Eee(t){return[...new Set(t)]}function Cee(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Tee(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(Cee(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function vB(){let t=T.useContext(Ry);return fR(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Mee(){let t=T.useContext(k2);return fR(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var pR=T.createContext(void 0);pR.displayName="FrameworkContext";function yB(){let t=T.useContext(pR);return fR(t,"You must render this element inside a <HydratedRouter> element"),t}function Aee(t,e){let n=T.useContext(pR),[r,i]=T.useState(!1),[a,s]=T.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:f}=e,m=T.useRef(null);T.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let x=w=>{w.forEach(S=>{s(S.isIntersecting)})},_=new IntersectionObserver(x,{threshold:.5});return m.current&&_.observe(m.current),()=>{_.disconnect()}}},[t]),T.useEffect(()=>{if(r){let x=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(x)}}},[r]);let g=()=>{i(!0)},v=()=>{i(!1),s(!1)};return n?t!=="intent"?[a,m,{}]:[a,m,{onFocus:qx(o,g),onBlur:qx(c,v),onMouseEnter:qx(u,g),onMouseLeave:qx(h,v),onTouchStart:qx(f,g)}]:[!1,m,{}]}function qx(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Pee({page:t,...e}){let{router:n}=vB(),r=T.useMemo(()=>lB(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?T.createElement(Dee,{page:t,matches:r,...e}):null}function Nee(t){let{manifest:e,routeModules:n}=yB(),[r,i]=T.useState([]);return T.useEffect(()=>{let a=!1;return wee(t,e,n).then(s=>{a||i(s)}),()=>{a=!0}},[t,e,n]),r}function Dee({page:t,matches:e,...n}){let r=nh(),{manifest:i,routeModules:a}=yB(),{basename:s}=vB(),{loaderData:o,matches:c}=Mee(),u=T.useMemo(()=>X$(t,e,c,i,r,"data"),[t,e,c,i,r]),h=T.useMemo(()=>X$(t,e,c,i,r,"assets"),[t,e,c,i,r]),f=T.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let v=new Set,x=!1;if(e.forEach(w=>{let S=i.routes[w.route.id];!S||!S.hasLoader||(!u.some(E=>E.route.id===w.route.id)&&w.route.id in o&&a[w.route.id]?.shouldRevalidate||S.hasClientLoader?x=!0:v.add(w.route.id))}),v.size===0)return[];let _=bee(t,s,"data");return x&&v.size>0&&_.searchParams.set("_routes",e.filter(w=>v.has(w.route.id)).map(w=>w.route.id).join(",")),[_.pathname+_.search]},[s,o,r,i,u,e,t,a]),m=T.useMemo(()=>See(h,i),[h,i]),g=Nee(h);return T.createElement(T.Fragment,null,f.map(v=>T.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),m.map(v=>T.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),g.map(({key:v,link:x})=>T.createElement("link",{key:v,nonce:n.nonce,...x})))}function kee(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var bB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bB&&(window.__reactRouterVersion="7.10.1")}catch{}function Ree({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=T.useRef();i.current==null&&(i.current=yQ({window:r,v5Compat:!0}));let a=i.current,[s,o]=T.useState({action:a.action,location:a.location}),c=T.useCallback(u=>{n===!1?o(u):T.startTransition(()=>o(u))},[n]);return T.useLayoutEffect(()=>a.listen(c),[a,c]),T.createElement(cee,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a,unstable_useTransitions:n===!0})}var xB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_B=T.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:o,target:c,to:u,preventScrollReset:h,viewTransition:f,...m},g){let{basename:v,unstable_useTransitions:x}=T.useContext(ql),_=typeof u=="string"&&xB.test(u),w,S=!1;if(typeof u=="string"&&_&&(w=u,bB))try{let L=new URL(window.location.href),$=u.startsWith("//")?new URL(L.protocol+u):new URL(u),B=Yd($.pathname,v);$.origin===L.origin&&B!=null?u=B+$.search+$.hash:S=!0}catch{zl(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=qQ(u,{relative:i}),[A,N,P]=Aee(r,m),R=Lee(u,{replace:s,state:o,target:c,preventScrollReset:h,relative:i,viewTransition:f,unstable_useTransitions:x});function D(L){e&&e(L),L.defaultPrevented||R(L)}let k=T.createElement("a",{...m,...P,href:w||E,onClick:S||a?e:D,ref:kee(g,N),target:c,"data-discover":!_&&n==="render"?"true":void 0});return A&&!_?T.createElement(T.Fragment,null,k,T.createElement(Pee,{page:E})):k});_B.displayName="Link";var Iee=T.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:c,...u},h){let f=z_(s,{relative:u.relative}),m=nh(),g=T.useContext(k2),{navigator:v,basename:x}=T.useContext(ql),_=g!=null&&Uee(f)&&o===!0,w=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,S=m.pathname,E=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(S=S.toLowerCase(),E=E?E.toLowerCase():null,w=w.toLowerCase()),E&&x&&(E=Yd(E,x)||E);const A=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let N=S===w||!i&&S.startsWith(w)&&S.charAt(A)==="/",P=E!=null&&(E===w||!i&&E.startsWith(w)&&E.charAt(w.length)==="/"),R={isActive:N,isPending:P,isTransitioning:_},D=N?e:void 0,k;typeof r=="function"?k=r(R):k=[r,N?"active":null,P?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let L=typeof a=="function"?a(R):a;return T.createElement(_B,{...u,"aria-current":D,className:k,ref:h,style:L,to:s,viewTransition:o},typeof c=="function"?c(R):c)});Iee.displayName="NavLink";var $ee=T.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:s=n3,action:o,onSubmit:c,relative:u,preventScrollReset:h,viewTransition:f,...m},g)=>{let{unstable_useTransitions:v}=T.useContext(ql),x=Bee(),_=zee(o,{relative:u}),w=s.toLowerCase()==="get"?"get":"post",S=typeof o=="string"&&xB.test(o),E=A=>{if(c&&c(A),A.defaultPrevented)return;A.preventDefault();let N=A.nativeEvent.submitter,P=N?.getAttribute("formmethod")||s,R=()=>x(N||A.currentTarget,{fetcherKey:e,method:P,navigate:n,replace:i,state:a,relative:u,preventScrollReset:h,viewTransition:f});v&&n!==!1?T.startTransition(()=>R()):R()};return T.createElement("form",{ref:g,method:w,action:_,onSubmit:r?c:E,...m,"data-discover":!S&&t==="render"?"true":void 0})});$ee.displayName="Form";function jee(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wB(t){let e=T.useContext(Ry);return xi(e,jee(t)),e}function Lee(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_useTransitions:o}={}){let c=B_(),u=nh(),h=z_(t,{relative:a});return T.useCallback(f=>{if(mee(f,e)){f.preventDefault();let m=n!==void 0?n:Y1(u)===Y1(h),g=()=>c(t,{replace:m,state:r,preventScrollReset:i,relative:a,viewTransition:s});o?T.startTransition(()=>g()):g()}},[u,c,h,n,r,e,t,i,a,s,o])}var Oee=0,Fee=()=>`__${String(++Oee)}__`;function Bee(){let{router:t}=wB("useSubmit"),{basename:e}=T.useContext(ql),n=iee(),r=t.fetch,i=t.navigate;return T.useCallback(async(a,s={})=>{let{action:o,method:c,encType:u,formData:h,body:f}=yee(a,e);if(s.navigate===!1){let m=s.fetcherKey||Fee();await r(m,n,s.action||o,{preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||c,formEncType:s.encType||u,flushSync:s.flushSync})}else await i(s.action||o,{preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||c,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,i,e,n])}function zee(t,{relative:e}={}){let{basename:n}=T.useContext(ql),r=T.useContext(Hc);xi(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...z_(t||".",{relative:e})},s=nh();if(t==null){a.search=s.search;let o=new URLSearchParams(a.search),c=o.getAll("index");if(c.some(h=>h==="")){o.delete("index"),c.filter(f=>f).forEach(f=>o.append("index",f));let h=o.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Vd([n,a.pathname])),Y1(a)}function Uee(t,{relative:e}={}){let n=T.useContext(hB);xi(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=wB("useViewTransitionState"),i=z_(t,{relative:e});if(!n.isTransitioning)return!1;let a=Yd(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Yd(n.nextLocation.pathname,r)||n.nextLocation.pathname;return A3(i.pathname,s)!=null||A3(i.pathname,a)!=null}var U_=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Vee={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Hee=class{#e=Vee;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},Im=new Hee;function Gee(t){setTimeout(t,0)}var Ym=typeof window>"u"||"Deno"in globalThis;function xo(){}function Wee(t,e){return typeof t=="function"?t(e):t}function sN(t){return typeof t=="number"&&t>=0&&t!==1/0}function SB(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Df(t,e){return typeof t=="function"?t(e):t}function Il(t,e){return typeof t=="function"?t(e):t}function Y$(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:a,queryKey:s,stale:o}=t;if(s){if(r){if(e.queryHash!==mR(s,e.options))return!1}else if(!J1(e.queryKey,s))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||i&&i!==e.state.fetchStatus||a&&!a(e))}function Z$(t,e){const{exact:n,status:r,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(Z1(e.options.mutationKey)!==Z1(a))return!1}else if(!J1(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function mR(t,e){return(e?.queryKeyHashFn||Z1)(t)}function Z1(t){return JSON.stringify(t,(e,n)=>lN(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function J1(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>J1(t[n],e[n])):!1}var qee=Object.prototype.hasOwnProperty;function EB(t,e){if(t===e)return t;const n=J$(t)&&J$(e);if(!n&&!(lN(t)&&lN(e)))return e;const i=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),s=a.length,o=n?new Array(s):{};let c=0;for(let u=0;u<s;u++){const h=n?u:a[u],f=t[h],m=e[h];if(f===m){o[h]=f,(n?u<i:qee.call(t,h))&&c++;continue}if(f===null||m===null||typeof f!="object"||typeof m!="object"){o[h]=m;continue}const g=EB(f,m);o[h]=g,g===f&&c++}return i===s&&c===i?t:o}function oN(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function J$(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function lN(t){if(!Q$(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Q$(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Q$(t){return Object.prototype.toString.call(t)==="[object Object]"}function Kee(t){return new Promise(e=>{Im.setTimeout(e,t)})}function cN(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?EB(t,e):e}function Xee(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Yee(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var gR=Symbol();function CB(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===gR?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Zee(t,e){return typeof t=="function"?t(...e):!!t}var Jee=class extends U_{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Ym&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},vR=new Jee;function uN(){let t,e;const n=new Promise((i,a)=>{t=i,e=a});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var Qee=Gee;function ete(){let t=[],e=0,n=o=>{o()},r=o=>{o()},i=Qee;const a=o=>{e?t.push(o):i(()=>{n(o)})},s=()=>{const o=t;t=[],o.length&&i(()=>{r(()=>{o.forEach(c=>{n(c)})})})};return{batch:o=>{let c;e++;try{c=o()}finally{e--,e||s()}return c},batchCalls:o=>(...c)=>{a(()=>{o(...c)})},schedule:a,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{i=o}}}var Ka=ete(),tte=class extends U_{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Ym&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},P3=new tte;function nte(t){return Math.min(1e3*2**t,3e4)}function TB(t){return(t??"online")==="online"?P3.isOnline():!0}var dN=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function MB(t){let e=!1,n=0,r;const i=uN(),a=()=>i.status!=="pending",s=x=>{if(!a()){const _=new dN(x);m(_),t.onCancel?.(_)}},o=()=>{e=!0},c=()=>{e=!1},u=()=>vR.isFocused()&&(t.networkMode==="always"||P3.isOnline())&&t.canRun(),h=()=>TB(t.networkMode)&&t.canRun(),f=x=>{a()||(r?.(),i.resolve(x))},m=x=>{a()||(r?.(),i.reject(x))},g=()=>new Promise(x=>{r=_=>{(a()||u())&&x(_)},t.onPause?.()}).then(()=>{r=void 0,a()||t.onContinue?.()}),v=()=>{if(a())return;let x;const _=n===0?t.initialPromise:void 0;try{x=_??t.fn()}catch(w){x=Promise.reject(w)}Promise.resolve(x).then(f).catch(w=>{if(a())return;const S=t.retry??(Ym?0:3),E=t.retryDelay??nte,A=typeof E=="function"?E(n,w):E,N=S===!0||typeof S=="number"&&n<S||typeof S=="function"&&S(n,w);if(e||!N){m(w);return}n++,t.onFail?.(n,w),Kee(A).then(()=>u()?void 0:g()).then(()=>{e?m(w):v()})})};return{promise:i,status:()=>i.status,cancel:s,continue:()=>(r?.(),i),cancelRetry:o,continueRetry:c,canStart:h,start:()=>(h()?v():g().then(v),i)}}var AB=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),sN(this.gcTime)&&(this.#e=Im.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ym?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Im.clearTimeout(this.#e),this.#e=void 0)}},rte=class extends AB{#e;#t;#n;#i;#r;#o;#s;constructor(t){super(),this.#s=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#i=t.client,this.#n=this.#i.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=t5(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=t5(this.options);e.data!==void 0&&(this.setState(e5(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=cN(this.state.data,t,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#a({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(xo).catch(xo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Il(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===gR||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Df(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!SB(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#s?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const o=this.observers.find(c=>c.options.queryFn);o&&this.setOptions(o.options)}const n=new AbortController,r=o=>{Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(this.#s=!0,n.signal)})},i=()=>{const o=CB(this.options,e),u=(()=>{const h={client:this.#i,queryKey:this.queryKey,meta:this.meta};return r(h),h})();return this.#s=!1,this.options.persister?this.options.persister(o,u,this):o(u)},s=(()=>{const o={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:i};return r(o),o})();this.options.behavior?.onFetch(s,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==s.fetchOptions?.meta)&&this.#a({type:"fetch",meta:s.fetchOptions?.meta}),this.#r=MB({initialPromise:e?.initialPromise,fn:s.fetchFn,onCancel:o=>{o instanceof dN&&o.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(o,c)=>{this.#a({type:"failed",failureCount:o,error:c})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0});try{const o=await this.#r.start();if(o===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(o),this.#n.config.onSuccess?.(o,this),this.#n.config.onSettled?.(o,this.state.error,this),o}catch(o){if(o instanceof dN){if(o.silent)return this.#r.promise;if(o.revert){if(this.state.data===void 0)throw o;return this.state.data}}throw this.#a({type:"error",error:o}),this.#n.config.onError?.(o,this),this.#n.config.onSettled?.(this.state.data,o,this),o}finally{this.scheduleGc()}}#a(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...PB(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,...e5(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Ka.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function PB(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:TB(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function e5(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function t5(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ite=class extends U_{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#s=uN(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#i=void 0;#r;#o;#s;#a;#m;#h;#f;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),n5(this.#t,this.options)?this.#d():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return hN(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return hN(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#_(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Il(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),e._defaulted&&!oN(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&r5(this.#t,n,this.options,e)&&this.#d(),this.updateResult(),r&&(this.#t!==n||Il(this.options.enabled,this.#t)!==Il(e.enabled,this.#t)||Df(this.options.staleTime,this.#t)!==Df(e.staleTime,this.#t))&&this.#g();const i=this.#v();r&&(this.#t!==n||Il(this.options.enabled,this.#t)!==Il(e.enabled,this.#t)||i!==this.#l)&&this.#y(i)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return ste(this,n)&&(this.#i=n,this.#o=this.options,this.#r=this.#t.state),n}getCurrentResult(){return this.#i}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#s.status==="pending"&&this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#d(t){this.#w();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(xo)),e}#g(){this.#x();const t=Df(this.options.staleTime,this.#t);if(Ym||this.#i.isStale||!sN(t))return;const n=SB(this.#i.dataUpdatedAt,t)+1;this.#c=Im.setTimeout(()=>{this.#i.isStale||this.updateResult()},n)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(t){this.#_(),this.#l=t,!(Ym||Il(this.options.enabled,this.#t)===!1||!sN(this.#l)||this.#l===0)&&(this.#u=Im.setInterval(()=>{(this.options.refetchIntervalInBackground||vR.isFocused())&&this.#d()},this.#l))}#b(){this.#g(),this.#y(this.#v())}#x(){this.#c&&(Im.clearTimeout(this.#c),this.#c=void 0)}#_(){this.#u&&(Im.clearInterval(this.#u),this.#u=void 0)}createResult(t,e){const n=this.#t,r=this.options,i=this.#i,a=this.#r,s=this.#o,c=t!==n?t.state:this.#n,{state:u}=t;let h={...u},f=!1,m;if(e._optimisticResults){const D=this.hasListeners(),k=!D&&n5(t,e),L=D&&r5(t,n,e,r);(k||L)&&(h={...h,...PB(u.data,t.options)}),e._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:g,errorUpdatedAt:v,status:x}=h;m=h.data;let _=!1;if(e.placeholderData!==void 0&&m===void 0&&x==="pending"){let D;i?.isPlaceholderData&&e.placeholderData===s?.placeholderData?(D=i.data,_=!0):D=typeof e.placeholderData=="function"?e.placeholderData(this.#f?.state.data,this.#f):e.placeholderData,D!==void 0&&(x="success",m=cN(i?.data,D,e),f=!0)}if(e.select&&m!==void 0&&!_)if(i&&m===a?.data&&e.select===this.#m)m=this.#h;else try{this.#m=e.select,m=e.select(m),m=cN(i?.data,m,e),this.#h=m,this.#a=null}catch(D){this.#a=D}this.#a&&(g=this.#a,m=this.#h,v=Date.now(),x="error");const w=h.fetchStatus==="fetching",S=x==="pending",E=x==="error",A=S&&w,N=m!==void 0,R={status:x,fetchStatus:h.fetchStatus,isPending:S,isSuccess:x==="success",isError:E,isInitialLoading:A,isLoading:A,data:m,dataUpdatedAt:h.dataUpdatedAt,error:g,errorUpdatedAt:v,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:w,isRefetching:w&&!S,isLoadingError:E&&!N,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:E&&N,isStale:yR(t,e),refetch:this.refetch,promise:this.#s,isEnabled:Il(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const D=$=>{R.status==="error"?$.reject(R.error):R.data!==void 0&&$.resolve(R.data)},k=()=>{const $=this.#s=R.promise=uN();D($)},L=this.#s;switch(L.status){case"pending":t.queryHash===n.queryHash&&D(L);break;case"fulfilled":(R.status==="error"||R.data!==L.value)&&k();break;case"rejected":(R.status!=="error"||R.error!==L.reason)&&k();break}}return R}updateResult(){const t=this.#i,e=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#o=this.options,this.#r.data!==void 0&&(this.#f=this.#t),oN(e,t))return;this.#i=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!this.#p.size)return!0;const a=new Set(i??this.#p);return this.options.throwOnError&&a.add("error"),Object.keys(this.#i).some(s=>{const o=s;return this.#i[o]!==t[o]&&a.has(o)})};this.#S({listeners:n()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(t){Ka.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function ate(t,e){return Il(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function n5(t,e){return ate(t,e)||t.state.data!==void 0&&hN(t,e,e.refetchOnMount)}function hN(t,e,n){if(Il(e.enabled,t)!==!1&&Df(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&yR(t,e)}return!1}function r5(t,e,n,r){return(t!==e||Il(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&yR(t,n)}function yR(t,e){return Il(e.enabled,t)!==!1&&t.isStaleByTime(Df(e.staleTime,t))}function ste(t,e){return!oN(t.getCurrentResult(),e)}function i5(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],s=e.state.data?.pageParams||[];let o={pages:[],pageParams:[]},c=0;const u=async()=>{let h=!1;const f=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?h=!0:e.signal.addEventListener("abort",()=>{h=!0}),e.signal)})},m=CB(e.options,e.fetchOptions),g=async(v,x,_)=>{if(h)return Promise.reject();if(x==null&&v.pages.length)return Promise.resolve(v);const S=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:x,direction:_?"backward":"forward",meta:e.options.meta};return f(P),P})(),E=await m(S),{maxPages:A}=e.options,N=_?Yee:Xee;return{pages:N(v.pages,E,A),pageParams:N(v.pageParams,x,A)}};if(i&&a.length){const v=i==="backward",x=v?ote:a5,_={pages:a,pageParams:s},w=x(r,_);o=await g(_,w,v)}else{const v=t??a.length;do{const x=c===0?s[0]??r.initialPageParam:a5(r,o);if(c>0&&x==null)break;o=await g(o,x),c++}while(c<v)}return o};e.options.persister?e.fetchFn=()=>e.options.persister?.(u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=u}}}function a5(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function ote(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var lte=class extends AB{#e;#t;#n;#i;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||cte(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#r({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=MB({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(a,s)=>{this.#r({type:"failed",failureCount:a,error:s})},onPause:()=>{this.#r({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",i=!this.#i.canStart();try{if(r)e();else{this.#r({type:"pending",variables:t,isPaused:i}),await this.#n.config.onMutate?.(t,this,n);const s=await this.options.onMutate?.(t,n);s!==this.state.context&&this.#r({type:"pending",context:s,variables:t,isPaused:i})}const a=await this.#i.start();return await this.#n.config.onSuccess?.(a,t,this.state.context,this,n),await this.options.onSuccess?.(a,t,this.state.context,n),await this.#n.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,t,this.state.context,n),this.#r({type:"success",data:a}),a}catch(a){try{throw await this.#n.config.onError?.(a,t,this.state.context,this,n),await this.options.onError?.(a,t,this.state.context,n),await this.#n.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,a,t,this.state.context,n),a}finally{this.#r({type:"error",error:a})}}finally{this.#n.runNext(this)}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Ka.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function cte(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ute=class extends U_{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new lte({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=NE(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=NE(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=NE(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=NE(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ka.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Z$(e,n))}findAll(t={}){return this.getAll().filter(e=>Z$(t,e))}notify(t){Ka.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Ka.batch(()=>Promise.all(t.map(e=>e.continue().catch(xo))))}};function NE(t){return t.options.scope?.id}var dte=class extends U_{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??mR(r,e);let a=this.get(i);return a||(a=new rte({client:t,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(a)),a}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ka.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Y$(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>Y$(t,n)):e}notify(t){Ka.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Ka.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ka.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},hte=class{#e;#t;#n;#i;#r;#o;#s;#a;constructor(t={}){this.#e=t.queryCache||new dte,this.#t=t.mutationCache||new ute,this.#n=t.defaultOptions||{},this.#i=new Map,this.#r=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#s=vR.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=P3.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#s?.(),this.#s=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Df(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),a=this.#e.get(r.queryHash)?.state.data,s=Wee(e,a);if(s!==void 0)return this.#e.build(this,r).setData(s,{...n,manual:!0})}setQueriesData(t,e,n){return Ka.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Ka.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return Ka.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Ka.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(xo).catch(xo)}invalidateQueries(t,e={}){return Ka.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Ka.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(xo)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(xo)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(Df(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(xo).catch(xo)}fetchInfiniteQuery(t){return t.behavior=i5(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(xo).catch(xo)}ensureInfiniteQueryData(t){return t.behavior=i5(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return P3.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#i.set(Z1(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#i.values()],n={};return e.forEach(r=>{J1(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#r.set(Z1(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{J1(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=mR(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===gR&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},NB=T.createContext(void 0),fte=t=>{const e=T.useContext(NB);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},pte=({client:t,children:e})=>(T.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),l.jsx(NB.Provider,{value:t,children:e})),DB=T.createContext(!1),mte=()=>T.useContext(DB);DB.Provider;function gte(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var vte=T.createContext(gte()),yte=()=>T.useContext(vte),bte=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},xte=t=>{T.useEffect(()=>{t.clearReset()},[t])},_te=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||Zee(n,[t.error,r])),wte=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Ste=(t,e)=>t.isLoading&&t.isFetching&&!e,Ete=(t,e)=>t?.suspense&&e.isPending,s5=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function Cte(t,e,n){const r=mte(),i=yte(),a=fte(),s=a.defaultQueryOptions(t);a.getDefaultOptions().queries?._experimental_beforeQuery?.(s),s._optimisticResults=r?"isRestoring":"optimistic",wte(s),bte(s,i),xte(i);const o=!a.getQueryCache().get(s.queryHash),[c]=T.useState(()=>new e(a,s)),u=c.getOptimisticResult(s),h=!r&&t.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(f=>{const m=h?c.subscribe(Ka.batchCalls(f)):xo;return c.updateResult(),m},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),T.useEffect(()=>{c.setOptions(s)},[s,c]),Ete(s,u))throw s5(s,c,i);if(_te({result:u,errorResetBoundary:i,throwOnError:s.throwOnError,query:a.getQueryCache().get(s.queryHash),suspense:s.suspense}))throw u.error;return a.getDefaultOptions().queries?._experimental_afterQuery?.(s,u),s.experimental_prefetchInRender&&!Ym&&Ste(u,r)&&(o?s5(s,c,i):a.getQueryCache().get(s.queryHash)?.promise)?.catch(xo).finally(()=>{c.updateResult()}),s.notifyOnChangeProps?u:c.trackResult(u)}function I2(t,e){return Cte(t,ite)}const Tte="modulepreload",Mte=function(t){return"/xstudio/"+t},o5={},Lt=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=s?.nonce||s?.getAttribute("nonce");i=c(n.map(u=>{if(u=Mte(u),u in o5)return;o5[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":Tte,h||(m.as="script"),m.crossOrigin="",m.href=u,o&&m.setAttribute("nonce",o),document.head.appendChild(m),h)return new Promise((g,v)=>{m.addEventListener("load",g),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};var Zm=oB();const Ate=vg(Zm);const Pte=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Nte=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),l5=t=>{const e=Nte(t);return e.charAt(0).toUpperCase()+e.slice(1)},kB=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Dte=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var kte={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Rte=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},c)=>T.createElement("svg",{ref:c,...kte,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:kB("lucide",i),...!a&&!Dte(o)&&{"aria-hidden":"true"},...o},[...s.map(([u,h])=>T.createElement(u,h)),...Array.isArray(a)?a:[a]]));const Oe=(t,e)=>{const n=T.forwardRef(({className:r,...i},a)=>T.createElement(Rte,{ref:a,iconNode:e,className:kB(`lucide-${Pte(l5(t))}`,`lucide-${t}`,r),...i}));return n.displayName=l5(t),n};const Ite=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],yf=Oe("activity",Ite);const $te=[["rect",{width:"6",height:"14",x:"4",y:"5",rx:"2",key:"1wwnby"}],["rect",{width:"6",height:"10",x:"14",y:"7",rx:"2",key:"1fe6j6"}],["path",{d:"M17 22v-5",key:"4b6g73"}],["path",{d:"M17 7V2",key:"hnrr36"}],["path",{d:"M7 22v-3",key:"1r4jpn"}],["path",{d:"M7 5V2",key:"liy1u9"}]],jte=Oe("align-horizontal-distribute-center",$te);const Lte=[["rect",{width:"6",height:"10",x:"9",y:"7",rx:"2",key:"yn7j0q"}],["path",{d:"M4 22V2",key:"tsjzd3"}],["path",{d:"M20 22V2",key:"1bnhr8"}]],c5=Oe("align-horizontal-space-around",Lte);const Ote=[["path",{d:"M22 17h-3",key:"1lwga1"}],["path",{d:"M22 7h-5",key:"o2endc"}],["path",{d:"M5 17H2",key:"1gx9xc"}],["path",{d:"M7 7H2",key:"6bq26l"}],["rect",{x:"5",y:"14",width:"14",height:"6",rx:"2",key:"1qrzuf"}],["rect",{x:"7",y:"4",width:"10",height:"6",rx:"2",key:"we8e9z"}]],Fte=Oe("align-vertical-distribute-center",Ote);const Bte=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],RB=Oe("align-vertical-justify-center",Bte);const zte=[["rect",{width:"14",height:"6",x:"5",y:"12",rx:"2",key:"4l4tp2"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 22h20",key:"272qi7"}]],IB=Oe("align-vertical-justify-end",zte);const Ute=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"6",rx:"2",key:"13squh"}],["path",{d:"M2 2h20",key:"1ennik"}]],$B=Oe("align-vertical-justify-start",Ute);const Vte=[["rect",{width:"10",height:"6",x:"7",y:"9",rx:"2",key:"b1zbii"}],["path",{d:"M22 20H2",key:"1p1f7z"}],["path",{d:"M22 4H2",key:"1b7qnq"}]],Hte=Oe("align-vertical-space-around",Vte);const Gte=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M14 8h.01",key:"1primd"}]],fN=Oe("app-window-mac",Gte);const Wte=[["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}],["path",{d:"M10 4v4",key:"pp8u80"}],["path",{d:"M2 8h20",key:"d11cs7"}],["path",{d:"M6 4v4",key:"1svtjw"}]],qte=Oe("app-window",Wte);const Kte=[["path",{d:"M19 3H5",key:"1236rx"}],["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m6 15 6 6 6-6",key:"h15q88"}]],Xte=Oe("arrow-down-from-line",Kte);const Yte=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Zte=Oe("arrow-down",Yte);const Jte=[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M21 12H7",key:"13ipq5"}],["path",{d:"m15 18 6-6-6-6",key:"6tx3qv"}]],Qte=Oe("arrow-right-from-line",Jte);const ene=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],tne=Oe("arrow-right-left",ene);const nne=[["path",{d:"M17 12H3",key:"8awo09"}],["path",{d:"m11 18 6-6-6-6",key:"8c2y43"}],["path",{d:"M21 5v14",key:"nzette"}]],rne=Oe("arrow-right-to-line",nne);const ine=[["path",{d:"M12 6v12",key:"1vza4d"}],["path",{d:"M17.196 9 6.804 15",key:"1ah31z"}],["path",{d:"m6.804 9 10.392 6",key:"1b6pxd"}]],ane=Oe("asterisk",ine);const sne=[["path",{d:"M4 20h16",key:"14thso"}],["path",{d:"m6 16 6-12 6 12",key:"1b4byz"}],["path",{d:"M8 12h8",key:"1wcyev"}]],one=Oe("baseline",sne);const lne=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],cne=Oe("bell",lne);const une=[["path",{d:"M12 6V2H8",key:"1155em"}],["path",{d:"M15 11v2",key:"i11awn"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 16a2 2 0 0 1-2 2H8.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 4 20.286V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2z",key:"11gyqh"}],["path",{d:"M9 11v2",key:"1ueba0"}]],dne=Oe("bot-message-square",une);const hne=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],jB=Oe("bot",hne);const fne=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Mr=Oe("box",fne);const pne=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],LB=Oe("building-2",pne);const mne=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],u5=Oe("calendar-check",mne);const gne=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],vne=Oe("calendar-days",gne);const yne=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],bne=Oe("calendar",yne);const xne=[["path",{d:"M10 9v7",key:"ylp826"}],["path",{d:"M14 6v10",key:"1jy4vg"}],["circle",{cx:"17.5",cy:"12.5",r:"3.5",key:"1a9481"}],["circle",{cx:"6.5",cy:"12.5",r:"3.5",key:"2jlv1r"}]],_ne=Oe("case-lower",xne);const wne=[["path",{d:"m2 16 4.039-9.69a.5.5 0 0 1 .923 0L11 16",key:"d5nyq2"}],["path",{d:"M22 9v7",key:"pvm9v3"}],["path",{d:"M3.304 13h6.392",key:"1q3zxz"}],["circle",{cx:"18.5",cy:"12.5",r:"3.5",key:"z97x68"}]],Sne=Oe("case-sensitive",wne);const Ene=[["path",{d:"M15 11h4.5a1 1 0 0 1 0 5h-4a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h3a1 1 0 0 1 0 5",key:"nxs35"}],["path",{d:"m2 16 4.039-9.69a.5.5 0 0 1 .923 0L11 16",key:"d5nyq2"}],["path",{d:"M3.304 13h6.392",key:"1q3zxz"}]],Cne=Oe("case-upper",Ene);const Tne=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],OB=Oe("chart-column",Tne);const Mne=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],Ane=Oe("chart-line",Mne);const Pne=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],FB=Oe("check",Pne);const Nne=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],_i=Oe("chevron-down",Nne);const Dne=[["path",{d:"m17 18-6-6 6-6",key:"1yerx2"}],["path",{d:"M7 6v12",key:"1p53r6"}]],d5=Oe("chevron-first",Dne);const kne=[["path",{d:"m7 18 6-6-6-6",key:"lwmzdw"}],["path",{d:"M17 6v12",key:"1o0aio"}]],a4=Oe("chevron-last",kne);const Rne=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ia=Oe("chevron-right",Rne);const Ine=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Q1=Oe("chevron-left",Ine);const $ne=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],e_=Oe("chevron-up",$ne);const jne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],bR=Oe("circle-alert",jne);const Lne=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],BB=Oe("circle-check-big",Lne);const One=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],oy=Oe("circle-plus",One);const Fne=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]],Bne=Oe("clipboard-copy",Fne);const zne=[["path",{d:"M11 14h10",key:"1w8e9d"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v1.344",key:"1e62lh"}],["path",{d:"m17 18 4-4-4-4",key:"z2g111"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113",key:"bjbb7m"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]],xR=Oe("clipboard-paste",zne);const Une=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],zB=Oe("clock",Une);const Vne=[["path",{d:"M12 12v4",key:"tww15h"}],["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M17 18h.5a1 1 0 0 0 0-9h-1.79A7 7 0 1 0 7 17.708",key:"xsb5ju"}]],Hne=Oe("cloud-alert",Vne);const Gne=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],UB=Oe("cloud-upload",Gne);const Wne=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],VB=Oe("cloud",Wne);const qne=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],V_=Oe("code",qne);const Kne=[["line",{x1:"12",x2:"18",y1:"15",y2:"15",key:"1nscbv"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],HB=Oe("copy-minus",Kne);const Xne=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],_R=Oe("copy",Xne);const Yne=[["path",{d:"M20 4v7a4 4 0 0 1-4 4H4",key:"6o5b7l"}],["path",{d:"m9 10-5 5 5 5",key:"1kshq7"}]],Zne=Oe("corner-down-left",Yne);const Jne=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],wm=Oe("cpu",Jne);const Qne=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],ba=Oe("database",Qne);const ere=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],$2=Oe("download",ere);const tre=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Ef=Oe("ellipsis-vertical",tre);const nre=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],I1=Oe("eye",nre);const rre=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],GB=Oe("factory",rre);const ire=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],h5=Oe("file-braces",ire);const are=[["path",{d:"M12.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v9.34",key:"o6klzx"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10.378 12.622a1 1 0 0 1 3 3.003L8.36 20.637a2 2 0 0 1-.854.506l-2.867.837a.5.5 0 0 1-.62-.62l.836-2.869a2 2 0 0 1 .506-.853z",key:"zhnas1"}]],wR=Oe("file-pen",are);const sre=[["path",{d:"M11 21a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1",key:"likhh7"}],["path",{d:"M16 16a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1",key:"17ky3x"}],["path",{d:"M21 6a2 2 0 0 0-.586-1.414l-2-2A2 2 0 0 0 17 2h-3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1z",key:"1hyeo0"}]],ore=Oe("file-stack",sre);const lre=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],SR=Oe("file-text",lre);const cre=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],Fv=Oe("file",cre);const ure=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],dre=Oe("folder-tree",ure);const hre=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],N3=Oe("folder",hre);const fre=[["line",{x1:"22",x2:"2",y1:"6",y2:"6",key:"15w7dq"}],["line",{x1:"22",x2:"2",y1:"18",y2:"18",key:"1ip48p"}],["line",{x1:"6",x2:"6",y1:"2",y2:"22",key:"a2lnyx"}],["line",{x1:"18",x2:"18",y1:"2",y2:"22",key:"8vb6jd"}]],pre=Oe("frame",fre);const mre=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],f5=Oe("funnel",mre);const gre=[["path",{d:"M2 3v18",key:"pzttux"}],["rect",{width:"12",height:"18",x:"6",y:"3",rx:"2",key:"btr8bg"}],["path",{d:"M22 3v18",key:"6jf3v"}]],vre=Oe("gallery-horizontal",gre);const yre=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],WB=Oe("gauge",yre);const bre=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],qB=Oe("git-branch",bre);const xre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],t_=Oe("globe",xre);const _re=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],KB=Oe("grid-3x3",_re);const wre=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],Sre=Oe("grip-horizontal",wre);const Ere=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],XB=Oe("grip-vertical",Ere);const Cre=[["path",{d:"M3 7V5c0-1.1.9-2 2-2h2",key:"adw53z"}],["path",{d:"M17 3h2c1.1 0 2 .9 2 2v2",key:"an4l38"}],["path",{d:"M21 17v2c0 1.1-.9 2-2 2h-2",key:"144t0e"}],["path",{d:"M7 21H5c-1.1 0-2-.9-2-2v-2",key:"rtnfgi"}],["rect",{width:"7",height:"5",x:"7",y:"7",rx:"1",key:"1eyiv7"}],["rect",{width:"7",height:"5",x:"10",y:"12",rx:"1",key:"1qlmkx"}]],ly=Oe("group",Cre);const Tre=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Mre=Oe("hard-drive",Tre);const Are=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],ER=Oe("hash",Are);const Pre=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],p5=Oe("history",Pre);const Nre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Dre=Oe("info",Nre);const kre=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 7h.01",key:"7u93v4"}],["path",{d:"M17 7h.01",key:"14a9sn"}],["path",{d:"M7 17h.01",key:"19xn7k"}],["path",{d:"M17 17h.01",key:"1sd3ek"}]],YB=Oe("inspection-panel",kre);const Rre=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],Ire=Oe("italic",Rre);const $re=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],jre=Oe("key",$re);const Lre=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],Ore=Oe("keyboard",Lre);const Fre=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],n_=Oe("layers",Fre);const Bre=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],pN=Oe("layout-grid",Bre);const zre=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],ZB=Oe("link-2",zre);const Ure=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],H_=Oe("link",Ure);const Vre=[["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"M3 10a2 2 0 0 0 2 2h3",key:"1npucw"}],["path",{d:"M3 5v12a2 2 0 0 0 2 2h3",key:"x1gjn2"}]],Hre=Oe("list-tree",Vre);const Gre=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Wre=Oe("list",Gre);const qre=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Kre=Oe("lock",qre);const Xre=[["path",{d:"m12 15 4 4",key:"lnac28"}],["path",{d:"M2.352 10.648a1.205 1.205 0 0 0 0 1.704l2.296 2.296a1.205 1.205 0 0 0 1.704 0l6.029-6.029a1 1 0 1 1 3 3l-6.029 6.029a1.205 1.205 0 0 0 0 1.704l2.296 2.296a1.205 1.205 0 0 0 1.704 0l6.365-6.367A1 1 0 0 0 8.716 4.282z",key:"nlhkjb"}],["path",{d:"m5 8 4 4",key:"j6kj7e"}]],Yre=Oe("magnet",Xre);const Zre=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Jre=Oe("mail",Zre);const Qre=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],mN=Oe("maximize-2",Qre);const eie=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],CR=Oe("menu",eie);const tie=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],nie=Oe("message-circle",tie);const rie=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],JB=Oe("message-square",rie);const iie=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],aie=Oe("minimize-2",iie);const sie=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],oie=Oe("monitor",sie);const lie=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],$1=Oe("moon",lie);const cie=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],j1=Oe("mouse-pointer",cie);const uie=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],die=Oe("navigation",uie);const hie=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],QB=Oe("package",hie);const fie=[["rect",{width:"16",height:"6",x:"2",y:"2",rx:"2",key:"jcyz7m"}],["path",{d:"M10 16v-2a2 2 0 0 1 2-2h8a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2",key:"1b9h7c"}],["rect",{width:"4",height:"6",x:"8",y:"16",rx:"1",key:"d6e7yl"}]],pie=Oe("paint-roller",fie);const mie=[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]],gie=Oe("paintbrush",mie);const vie=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Bv=Oe("palette",vie);const yie=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],G_=Oe("panels-top-left",yie);const bie=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],j2=Oe("pen",bie);const xie=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],_ie=Oe("percent",xie);const wie=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],$y=Oe("play",wie);const Sie=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],No=Oe("plus",Sie);const Eie=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M17 12h.01",key:"1m0b6t"}],["path",{d:"M7 12h.01",key:"eqddd0"}]],Cie=Oe("rectangle-ellipsis",Eie);const Tie=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],Mie=Oe("redo",Tie);const Aie=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Jm=Oe("refresh-cw",Aie);const Pie=[["path",{d:"M4 7V4h16v3",key:"9msm58"}],["path",{d:"M5 20h6",key:"1h6pxn"}],["path",{d:"M13 4 8 20",key:"kqq6aj"}],["path",{d:"m15 15 5 5",key:"me55sn"}],["path",{d:"m20 15-5 5",key:"11p7ol"}]],Nie=Oe("remove-formatting",Pie);const Die=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],TR=Oe("rotate-ccw",Die);const kie=[["path",{d:"M10 15v-3",key:"1pjskw"}],["path",{d:"M14 15v-3",key:"1o1mqj"}],["path",{d:"M18 15v-3",key:"cws6he"}],["path",{d:"M2 8V4",key:"3jv1jz"}],["path",{d:"M22 6H2",key:"1iqbfk"}],["path",{d:"M22 8V4",key:"16f4ou"}],["path",{d:"M6 15v-3",key:"1ij1qe"}],["rect",{x:"2",y:"12",width:"20",height:"8",rx:"2",key:"1tqiko"}]],gN=Oe("ruler-dimension-line",kie);const Rie=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Iie=Oe("ruler",Rie);const $ie=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],jie=Oe("save",$ie);const Lie=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],al=Oe("search",Lie);const Oie=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],s4=Oe("send",Oie);const Fie=[["path",{d:"m16 16-4 4-4-4",key:"3dv8je"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"m8 8 4-4 4 4",key:"2bscm2"}]],Bie=Oe("separator-horizontal",Fie);const zie=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Iu=Oe("settings-2",zie);const Uie=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Kl=Oe("settings",Uie);const Vie=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Hie=Oe("shield",Vie);const Gie=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],e9=Oe("shopping-cart",Gie);const Wie=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],qie=Oe("sliders-horizontal",Wie);const Kie=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Xie=Oe("smartphone",Kie);const Yie=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],vN=Oe("sparkles",Yie);const Zie=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Jie=Oe("square-check",Zie);const Qie=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],eae=Oe("square-check-big",Qie);const tae=[["path",{d:"M5 21a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2",key:"as5y1o"}],["path",{d:"M9 21h1",key:"15o7lz"}],["path",{d:"M14 21h1",key:"v9vybs"}]],nae=Oe("square-dashed-bottom",tae);const rae=[["path",{d:"M5 3a2 2 0 0 0-2 2",key:"y57alp"}],["path",{d:"M19 3a2 2 0 0 1 2 2",key:"18rm91"}],["path",{d:"M21 19a2 2 0 0 1-2 2",key:"1j7049"}],["path",{d:"M5 21a2 2 0 0 1-2-2",key:"sbafld"}],["path",{d:"M9 3h1",key:"1yesri"}],["path",{d:"M9 21h1",key:"15o7lz"}],["path",{d:"M14 3h1",key:"1ec4yj"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"M3 9v1",key:"1r0deq"}],["path",{d:"M21 9v1",key:"mxsmne"}],["path",{d:"M3 14v1",key:"vnatye"}],["path",{d:"M21 14v1",key:"169vum"}]],iae=Oe("square-dashed",rae);const aae=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M9 17c2 0 2.8-1 2.8-2.8V10c0-2 1-3.3 3.2-3",key:"m1af9g"}],["path",{d:"M9 11.2h5.7",key:"3zgcl2"}]],sae=Oe("square-function",aae);const oae=[["path",{d:"M12.034 12.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.943l-3.444 1.068a1 1 0 0 0-.66.66l-1.067 3.443a.5.5 0 0 1-.943.033z",key:"xwnzip"}],["path",{d:"M21 11V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6",key:"14rsvq"}]],MR=Oe("square-mouse-pointer",oae);const lae=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],cae=Oe("square-plus",lae);const uae=[["path",{d:"M21 11a8 8 0 0 0-8-8",key:"1lxwo5"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1dv2y5"}]],dae=Oe("square-round-corner",uae);const hae=[["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],fae=Oe("square-square",hae);const pae=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Of=Oe("square",pae);const mae=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],t9=Oe("star",mae);const gae=[["rect",{width:"20",height:"6",x:"2",y:"4",rx:"2",key:"qdearl"}],["rect",{width:"20",height:"6",x:"2",y:"14",rx:"2",key:"1xrn6j"}]],vae=Oe("stretch-horizontal",gae);const yae=[["rect",{width:"6",height:"20",x:"4",y:"2",rx:"2",key:"19qu7m"}],["rect",{width:"6",height:"20",x:"14",y:"2",rx:"2",key:"24v0nk"}]],bae=Oe("stretch-vertical",yae);const xae=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],_ae=Oe("strikethrough",xae);const wae=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],yN=Oe("sun",wae);const Sae=[["path",{d:"M11 17a4 4 0 0 1-8 0V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2Z",key:"1ldrpk"}],["path",{d:"M16.7 13H19a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H7",key:"11i5po"}],["path",{d:"M 7 17h.01",key:"1euzgo"}],["path",{d:"m11 8 2.3-2.3a2.4 2.4 0 0 1 3.404.004L18.6 7.6a2.4 2.4 0 0 1 .026 3.434L9.9 19.8",key:"o2gii7"}]],r_=Oe("swatch-book",Sae);const Eae=[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]],i_=Oe("table-2",Eae);const Cae=[["path",{d:"M15 3v18",key:"14nvp0"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]],Tae=Oe("table-properties",Cae);const Mae=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]],Aae=Oe("tablet",Mae);const Pae=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],L2=Oe("tag",Pae);const Nae=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],Dae=Oe("test-tube",Nae);const kae=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],n9=Oe("text-align-center",kae);const Rae=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],r9=Oe("text-align-end",Rae);const Iae=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],AR=Oe("text-align-start",Iae);const $ae=[["path",{d:"m16 16-3 3 3 3",key:"117b85"}],["path",{d:"M3 12h14.5a1 1 0 0 1 0 7H13",key:"18xa6z"}],["path",{d:"M3 19h6",key:"1ygdsz"}],["path",{d:"M3 5h18",key:"1u36vt"}]],jae=Oe("text-wrap",$ae);const Lae=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Oae=Oe("toggle-left",Lae);const Fae=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Bae=Oe("toggle-right",Fae);const zae=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ws=Oe("trash-2",zae);const Uae=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Qo=Oe("trash",Uae);const Vae=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],i9=Oe("triangle-alert",Vae);const Hae=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Pu=Oe("type",Hae);const Gae=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],Wae=Oe("underline",Gae);const qae=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],Kae=Oe("undo",qae);const Xae=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Yae=Oe("upload",Xae);const Zae=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Jae=Oe("user",Zae);const Qae=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],PR=Oe("users",Qae);const ese=[["path",{d:"M8 21s-4-3-4-9 4-9 4-9",key:"uto9ud"}],["path",{d:"M16 3s4 3 4 9-4 9-4 9",key:"4w2vsq"}],["line",{x1:"15",x2:"9",y1:"9",y2:"15",key:"f7djnv"}],["line",{x1:"9",x2:"15",y1:"9",y2:"15",key:"1shsy8"}]],D3=Oe("variable",ese);const tse=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],nse=Oe("wand-sparkles",tse);const rse=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],bN=Oe("workflow",rse);const ise=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],ase=Oe("wrench",ise);const sse=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ol=Oe("x",sse);const ose=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],lse=Oe("zoom-in",ose);const cse=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Vm=Oe("zap",cse),$u=18e3,Ld=2400,$m=1200,m5=4,g5=.28,DE=30,o4=260,O2=.08,F2=.024,a9=.045,NR=.015,use=150,dse={type:"text",value:"BESPOKE"},s9={name:"sand",colors:{dark:{primary:{r:.92,g:.78,b:.52},secondary:{r:.75,g:.58,b:.35},dust:{r:.85,g:.72,b:.48}},light:{primary:{r:.35,g:.25,b:.12},secondary:{r:.28,g:.18,b:.08},dust:{r:.42,g:.32,b:.18}}},drift:{primarySpeed:1.2,primaryDirection:-1,lowLayerEffect:2.5,midLayerEffect:1.8,highLayerEffect:.8,waveSpeed:.4,waveScale:.015,clusterStrength:1.5,clusterScale:.008},vortex:{growthRate:.15,maxRadius:180,minRadius:20,maxHeight:250,rotationSpeed:3,spiralTightness:.03,suctionStrength:15,liftForce:8,coreDensity:1,edgeDensity:.3,tiltAmount:.15,tiltDirection:1},form:{turbulence:4,gustStrength:12,gustFrequency:.6,convergenceForce:.85,layerCount:5},particleBaseSize:250,particleSizeVariance:80,layerSizeReduction:.5,blending:"additive",baseAlpha:{low:.7,high:.4},shaderTweaks:{vortexFadeMultiplier:160,formIntensityMultiplier:4,aliveBreathScale:2.5,vibrationScale:.7}};let rv=null,v5=null;function hse(){return rv||(rv=document.createElement("canvas"),rv.width=Ld,rv.height=$m,v5=rv.getContext("2d",{willReadFrequently:!0})),{canvas:rv,ctx:v5}}function ds(t,e,n=0){return parseFloat(t.getAttribute(e)||String(n))}function y5(t,e,n){const r=t.getAttribute("points")?.trim().split(/\s+|,/).map(Number)||[];if(!(r.length<4)){e.beginPath(),e.moveTo(r[0],r[1]);for(let i=2;i<r.length;i+=2)e.lineTo(r[i],r[i+1]);n&&e.closePath(),e.stroke()}}const fse={path:(t,e)=>{const n=t.getAttribute("d");n&&e.stroke(new Path2D(n))},circle:(t,e)=>{e.beginPath(),e.arc(ds(t,"cx"),ds(t,"cy"),ds(t,"r"),0,Math.PI*2),e.stroke()},line:(t,e)=>{e.beginPath(),e.moveTo(ds(t,"x1"),ds(t,"y1")),e.lineTo(ds(t,"x2"),ds(t,"y2")),e.stroke()},rect:(t,e)=>{const n=ds(t,"x"),r=ds(t,"y"),i=ds(t,"width"),a=ds(t,"height"),s=ds(t,"rx");s>0?(e.beginPath(),e.roundRect(n,r,i,a,s),e.stroke()):e.strokeRect(n,r,i,a)},ellipse:(t,e)=>{e.beginPath(),e.ellipse(ds(t,"cx"),ds(t,"cy"),ds(t,"rx"),ds(t,"ry"),0,0,Math.PI*2),e.stroke()},polyline:(t,e)=>y5(t,e,!1),polygon:(t,e)=>y5(t,e,!0)};function pse(t,e){const r=new DOMParser().parseFromString(t,"image/svg+xml").querySelector("svg");if(!r)return;const i=r.getAttribute("viewBox")?.split(" ").map(Number)||[0,0,24,24],[,,a,s]=i;e.save(),e.translate(Ld/2-a*DE/2,$m/2-s*DE/2),e.scale(DE,DE),e.lineWidth=2,e.strokeStyle=e.fillStyle="white",e.lineCap=e.lineJoin="round",r.querySelectorAll("path, circle, line, rect, ellipse, polyline, polygon").forEach(o=>{const c=fse[o.tagName.toLowerCase()];c&&c(o,e)}),e.restore()}function mse(t,e){e.textAlign="center";const n=Ld*.85;e.font=`bold ${o4}px sans-serif`;let r=o4;const i=e.measureText(t).width;i>n&&(r=Math.floor(o4*n/i),e.font=`bold ${r}px sans-serif`);const a=e.measureText(t),s=a.actualBoundingBoxAscent+a.actualBoundingBoxDescent,o=$m/2+a.actualBoundingBoxAscent-s/2;e.fillText(t,Ld/2,o)}function Qm(t){const{ctx:e}=hse();e.fillStyle="black",e.fillRect(0,0,Ld,$m),e.fillStyle="white",t.type==="text"?mse(t.value,e):pse(t.value,e);const{data:n}=e.getImageData(0,0,Ld,$m),r=[],i=Ld/2,a=$m/2;for(let o=0;o<$m;o+=m5)for(let c=0;c<Ld;c+=m5)n[(o*Ld+c)*4]>128&&r.push((c-i)*g5,-(o-a)*g5,(Math.random()-.5)*12);const s=r.length/3;for(;r.length/3<$u;){const o=Math.floor(Math.random()*s)*3;r.push(r[o]+(Math.random()-.5)*7,r[o+1]+(Math.random()-.5)*7,r[o+2])}return new Float32Array(r.slice(0,$u*3))}const gse=`
  vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
  vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
  vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
  vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }

  float snoise(vec3 v) {
    const vec2 C = vec2(1.0/6.0, 1.0/3.0);
    const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);
    vec3 i  = floor(v + dot(v, C.yyy));
    vec3 x0 = v - i + dot(i, C.xxx);
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min(g.xyz, l.zxy);
    vec3 i2 = max(g.xyz, l.zxy);
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy;
    vec3 x3 = x0 - D.yyy;
    i = mod289(i);
    vec4 p = permute(permute(permute(
              i.z + vec4(0.0, i1.z, i2.z, 1.0))
            + i.y + vec4(0.0, i1.y, i2.y, 1.0))
            + i.x + vec4(0.0, i1.x, i2.x, 1.0));
    float n_ = 0.142857142857;
    vec3 ns = n_ * D.wyz - D.xzx;
    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);
    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_);
    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);
    vec4 b0 = vec4(x.xy, y.xy);
    vec4 b1 = vec4(x.zw, y.zw);
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));
    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww;
    vec3 p0 = vec3(a0.xy, h.x);
    vec3 p1 = vec3(a0.zw, h.y);
    vec3 p2 = vec3(a1.xy, h.z);
    vec3 p3 = vec3(a1.zw, h.w);
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2,p2), dot(p3,p3)));
    p0 *= norm.x; p1 *= norm.y; p2 *= norm.z; p3 *= norm.w;
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot(m*m, vec4(dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3)));
  }
`,vse=`
  attribute float random;
  attribute float heightLayer;
  attribute float particleSize;
  attribute vec3 targetPos;
  attribute vec3 prevTargetPos;

  uniform float morphProgress;
  uniform float transitionProgress;
  uniform float time;

  //  
  uniform float vortexActive;
  uniform vec2 vortexCenter;
  uniform float vortexStrength;
  uniform float vortexRadius;
  uniform float vortexHeight;

  // / 
  uniform float primarySpeed;
  uniform float primaryDirection;
  uniform float lowLayerEffect;
  uniform float midLayerEffect;
  uniform float highLayerEffect;
  uniform float waveSpeed;
  uniform float waveScale;
  uniform float clusterStrength;
  uniform float clusterScale;

  //  
  uniform float turbulence;
  uniform float gustStrength;
  uniform float gustFrequency;
  uniform float convergenceForce;

  //  
  uniform float rotationSpeed;
  uniform float spiralTightness;
  uniform float suctionStrength;
  uniform float liftForce;
  uniform float coreDensity;
  uniform float edgeDensity;
  uniform float tiltAmount;
  uniform float tiltDirection;
  uniform float maxVortexHeight;

  //  
  uniform float formIntensityMultiplier;
  uniform float aliveBreathScale;
  uniform float vibrationScale;
  uniform float baseAlphaLow;
  uniform float baseAlphaHigh;

  varying float vAlpha;
  varying float vHeightLayer;
  varying float vMorph;
  varying float vVortexInfluence;
  varying float vDistortion;

  ${gse}

  void main() {
    vec3 currentTarget = mix(prevTargetPos, targetPos, transitionProgress);
    vec3 pos = position;

    float layerFactor = heightLayer;

    // ========== : /  ==========
    float baseMove = time * primarySpeed;
    float moveNoise = snoise(vec3(pos.x * 0.008, pos.y * 0.008, time * 0.2)) * 0.4;

    //  
    float lowEffect = (1.0 - layerFactor) * lowLayerEffect;
    float lowMove = sin(time * 1.8 + random * 6.28 + pos.x * 0.01) * lowEffect;

    float midEffect = (1.0 - abs(layerFactor - 0.5) * 2.0) * midLayerEffect;
    float midMove = sin(time * 0.6 + pos.y * 0.005 + random * 3.14) * midEffect * 8.0;

    float highEffect = layerFactor * highLayerEffect;
    float highMoveX = cos(time * 0.2 + random * 6.28) * highEffect * 12.0;
    float highMoveY = sin(time * 0.25 + random * 4.0) * highEffect * 10.0;

    // 
    float wave = sin(time * waveSpeed + pos.x * waveScale * 40.0) *
                 cos(time * waveSpeed * 0.6 + pos.y * waveScale * 25.0) *
                 (1.0 - layerFactor) * 4.0;

    // 
    vec3 clusterPos = vec3(pos.x * clusterScale, pos.y * clusterScale, time * 0.1);
    float clusterX = snoise(clusterPos) * clusterStrength * 20.0;
    float clusterY = snoise(clusterPos + vec3(100.0, 0.0, 0.0)) * clusterStrength * 15.0;

    //   (Curl  -     )
    vec3 windPos = vec3(pos.xy * 0.003, time * 0.08);
    float windAngle = snoise(windPos) * 6.28; //   
    vec2 circularWind = vec2(cos(windAngle), sin(windAngle)) * primarySpeed * 8.0;

    //    (  )
    float distFromCenter = length(pos.xy);
    float convergeFactor = smoothstep(100.0, 250.0, distFromCenter);
    vec2 toCenter = -normalize(pos.xy + vec2(0.001)) * convergeFactor * 2.0;

    vec3 driftMove = vec3(
      circularWind.x + moveNoise * 8.0 + highMoveX + clusterX + lowMove + toCenter.x,
      circularWind.y + midMove + wave + clusterY + highMoveY + toCenter.y,
      snoise(vec3(pos.xy * 0.008, time * 0.3)) * 4.0 * (0.3 + layerFactor * 0.7)
    );

    // ==========   ==========
    float vortexInfluence = 0.0;
    vec3 vortexMove = vec3(0.0);

    if (vortexActive > 0.5 && vortexStrength > 0.01) {
      vec2 toVortex = pos.xy - vortexCenter;
      float distToVortex = length(toVortex);
      float normalizedDist = distToVortex / vortexRadius;

      vortexInfluence = smoothstep(1.2, 0.0, normalizedDist) * vortexStrength;

      if (vortexInfluence > 0.01) {
        float angle = atan(toVortex.y, toVortex.x);
        float spiralAngle = angle + time * rotationSpeed * (1.0 + vortexStrength);
        float rotSpeed = rotationSpeed * (1.0 + (1.0 - normalizedDist) * 1.5);
        spiralAngle += time * rotSpeed;

        float spiralRadius = distToVortex * (1.0 + vortexStrength * spiralTightness * 0.3);

        vec2 rotatedPos = vec2(
          cos(spiralAngle) * spiralRadius,
          sin(spiralAngle) * spiralRadius
        );

        float suction = suctionStrength * vortexInfluence * (1.0 - layerFactor * 0.3);
        vec2 suctionDir = -normalize(toVortex + vec2(0.001));

        float lift = liftForce * vortexInfluence * vortexStrength;
        lift *= (1.0 - normalizedDist * 0.4);

        float maxLift = vortexHeight * (1.0 - normalizedDist * 0.2);
        float currentLift = lift * (1.0 - smoothstep(0.0, maxLift, pos.y + 80.0));

        float tilt = tiltAmount * vortexStrength * pos.y * 0.008 * tiltDirection;

        vortexMove = vec3(
          (rotatedPos.x - toVortex.x) * vortexInfluence + suctionDir.x * suction + tilt,
          currentLift + (rotatedPos.y - toVortex.y) * vortexInfluence * 0.4,
          suctionDir.y * suction * 0.4
        );

        vec3 turbNoisePos = vec3(pos.xy * 0.015, time * 1.2);
        vortexMove += vec3(
          snoise(turbNoisePos) * 6.0,
          snoise(turbNoisePos + vec3(50.0, 0.0, 0.0)) * 5.0,
          snoise(turbNoisePos + vec3(0.0, 50.0, 0.0)) * 3.0
        ) * vortexInfluence * vortexStrength;
      }
    }

    // ==========    ==========
    vec3 formMove = vec3(0.0);

    if (morphProgress > 0.01) {
      vec3 turbPos = vec3(pos.xy * 0.01, time * 0.5);
      float turbX = snoise(turbPos) * turbulence;
      float turbY = snoise(turbPos + vec3(80.0, 0.0, 0.0)) * turbulence * 0.7;

      float gustTime = time * gustFrequency;
      float gust = sin(gustTime + random * 6.28) * cos(gustTime * 0.6) * gustStrength;

      formMove = vec3(turbX + gust, turbY, snoise(turbPos + vec3(0.0, 80.0, 0.0)) * turbulence * 0.4);
    }

    // ==========    ==========
    vec3 morphedPos = mix(position, currentTarget, morphProgress);

    float driftIntensity = (1.0 - morphProgress) * (1.0 - morphProgress);
    morphedPos += driftMove * driftIntensity;

    float formIntensity = morphProgress * (1.0 - morphProgress) * formIntensityMultiplier;
    morphedPos += formMove * formIntensity * 0.6;

    morphedPos += vortexMove * (1.0 - morphProgress * 0.25);

    pos = morphedPos;

    // ==========      ==========
    if (morphProgress > 0.5) {
      float aliveIntensity = (morphProgress - 0.5) * 2.0;

      float breathe = sin(time * 1.0) * 0.4 + sin(time * 0.5) * 0.25;
      vec3 breatheMove = normalize(currentTarget) * breathe * aliveBreathScale * aliveIntensity;

      float wavePhase = length(currentTarget.xy) * 0.04 + time * 1.8;
      float waveAmp = sin(wavePhase + random * 6.28) * 0.4;
      vec3 waveMove = vec3(
        cos(wavePhase) * waveAmp,
        sin(wavePhase * 0.7) * waveAmp,
        sin(wavePhase * 1.0) * waveAmp * 0.25
      ) * aliveIntensity;

      vec3 jitter = vec3(
        sin(time * 6.0 + random * 25.0),
        cos(time * 5.5 + random * 20.0),
        sin(time * 4.5 + random * 15.0)
      ) * 0.6 * aliveIntensity;

      float edgeFactor = smoothstep(0.0, 40.0, length(currentTarget.xy));
      vec3 edgeWobble = vec3(
        sin(time * 2.5 + currentTarget.x * 0.08) * 0.6,
        cos(time * 2.0 + currentTarget.y * 0.08) * 0.6,
        sin(time * 1.5) * 0.3
      ) * edgeFactor * aliveIntensity;

      pos += breatheMove + waveMove + jitter + edgeWobble;
    }

    //  
    vec3 vibration = vec3(
      sin(time * 4.0 + random * 15.0) * 0.3,
      cos(time * 3.5 + random * 12.0) * 0.3,
      sin(time * 2.5 + random * 8.0) * 0.2
    ) * (morphProgress * vibrationScale + vortexInfluence * 0.7);
    pos += vibration;

    // ==========  ==========
    float distFade = 1.0 - smoothstep(180.0, 350.0, length(pos.xy));
    float vortexBrightness = 1.0 + vortexInfluence * 0.4;
    float formBrightness = 1.0 + morphProgress * 0.25;

    float layerAlpha = mix(baseAlphaLow, baseAlphaHigh, layerFactor);

    vAlpha = layerAlpha * distFade * vortexBrightness * formBrightness;
    vHeightLayer = heightLayer;
    vMorph = morphProgress;
    vVortexInfluence = vortexInfluence;
    vDistortion = vortexInfluence * vortexStrength + morphProgress * 0.25;

    vec4 mvPos = modelViewMatrix * vec4(pos, 1.0);
    gl_Position = projectionMatrix * mvPos;

    float layerSize = mix(1.2, 0.8, layerFactor);
    float vortexSize = 1.0 + vortexInfluence * 0.3;
    float formSize = 1.0 + morphProgress * 0.15;

    float finalSize = particleSize * layerSize * vortexSize * formSize;
    gl_PointSize = (finalSize / -mvPos.z) * (0.9 + random * 0.3);
  }
`,yse=`
  uniform vec3 colorPrimary;
  uniform vec3 colorSecondary;
  uniform vec3 colorDust;
  uniform float time;
  uniform vec3 morphColorTint;
  uniform vec3 hazeColor;

  varying float vAlpha;
  varying float vHeightLayer;
  varying float vMorph;
  varying float vVortexInfluence;
  varying float vDistortion;

  void main() {
    vec2 uv = gl_PointCoord - 0.5;
    float dist = length(uv);
    if (dist > 0.5) discard;

    float alpha = exp(-dist * dist * 4.0);
    alpha = smoothstep(0.0, 1.0, alpha);
    alpha *= vAlpha;

    vec3 baseColor = mix(colorSecondary, colorDust, vHeightLayer);
    baseColor = mix(baseColor, colorPrimary, vVortexInfluence * 0.4);
    baseColor += morphColorTint * vMorph;
    baseColor += vec3(0.03, 0.03, 0.03) * sin(time * 0.6 + vHeightLayer * 3.14);

    float haze = vDistortion * 0.12;
    baseColor = mix(baseColor, hazeColor, haze);

    gl_FragColor = vec4(baseColor, alpha * 0.85);
  }
`,o9=T.createContext(null);function bse({children:t,initialContent:e=dse,leaveDelayMs:n=use,preset:r,initialEffectType:i="sand"}){const a=T.useRef(0),s=T.useRef(e),[o,c]=T.useState(0),u=T.useRef(null),[h,f]=T.useState(i),m=r?.vortex.minRadius??15,g=T.useRef({active:!1,x:0,y:0,strength:0,radius:m,height:0}),v=T.useRef(!1),x=T.useCallback(_=>{u.current&&(clearTimeout(u.current),u.current=null),_?(v.current=!1,s.current=_,a.current=1,c(w=>w+1)):(v.current=!0,u.current=setTimeout(()=>{v.current&&(a.current=0,v.current=!1),u.current=null},n))},[n]);return l.jsx(o9.Provider,{value:{targetMorphRef:a,contentRef:s,setHoverContent:x,contentVersion:o,vortexRef:g,effectType:h,setEffectType:f},children:t})}function bg(){const t=T.useContext(o9);if(!t)throw new Error("useParticleBackground must be used within ParticleBackgroundProvider");return t}const DR="181",xse=0,b5=1,_se=2,l9=1,wse=2,Pd=3,Ff=0,Mo=1,ju=2,Oc=0,Hm=1,eg=2,x5=3,_5=4,Sse=5,Am=100,Ese=101,Cse=102,Tse=103,Mse=104,Ase=200,Pse=201,Nse=202,Dse=203,xN=204,_N=205,kse=206,Rse=207,Ise=208,$se=209,jse=210,Lse=211,Ose=212,Fse=213,Bse=214,wN=0,SN=1,EN=2,cy=3,CN=4,TN=5,MN=6,AN=7,c9=0,zse=1,Use=2,kf=0,u9=1,d9=2,h9=3,f9=4,p9=5,m9=6,g9=7,v9=300,uy=301,dy=302,PN=303,NN=304,B2=306,DN=1e3,Fd=1001,kN=1002,Hs=1003,Vse=1004,kE=1005,ys=1006,l4=1007,jm=1008,Zd=1009,y9=1010,b9=1011,a_=1012,kR=1013,tg=1014,Rc=1015,Bl=1016,RR=1017,IR=1018,s_=1020,x9=35902,_9=35899,w9=1021,S9=1022,Ol=1023,o_=1026,l_=1027,$R=1028,jR=1029,LR=1030,OR=1031,FR=1033,i3=33776,a3=33777,s3=33778,o3=33779,RN=35840,IN=35841,$N=35842,jN=35843,LN=36196,ON=37492,FN=37496,BN=37808,zN=37809,UN=37810,VN=37811,HN=37812,GN=37813,WN=37814,qN=37815,KN=37816,XN=37817,YN=37818,ZN=37819,JN=37820,QN=37821,eD=36492,tD=36494,nD=36495,rD=36283,iD=36284,aD=36285,sD=36286,Hse=3200,Gse=3201,Wse=0,qse=1,bf="",$l="srgb",hy="srgb-linear",k3="linear",Fr="srgb",iv=7680,w5=519,Kse=512,Xse=513,Yse=514,E9=515,Zse=516,Jse=517,Qse=518,eoe=519,S5=35044,E5="300 es",Lu=2e3,R3=2001;function C9(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function I3(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function toe(){const t=I3("canvas");return t.style.display="block",t}const C5={};function T5(...t){const e="THREE."+t.shift();console.log(e,...t)}function kn(...t){const e="THREE."+t.shift();console.warn(e,...t)}function Yi(...t){const e="THREE."+t.shift();console.error(e,...t)}function c_(...t){const e=t.join(" ");e in C5||(C5[e]=!0,kn(...t))}function noe(t,e,n){return new Promise(function(r,i){function a(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(a,n);break;default:r()}}setTimeout(a,n)})}class jy{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const a=i.indexOf(n);a!==-1&&i.splice(a,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const r=n[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}}const hs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],c4=Math.PI/180,oD=180/Math.PI;function W_(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(hs[t&255]+hs[t>>8&255]+hs[t>>16&255]+hs[t>>24&255]+"-"+hs[e&255]+hs[e>>8&255]+"-"+hs[e>>16&15|64]+hs[e>>24&255]+"-"+hs[n&63|128]+hs[n>>8&255]+"-"+hs[n>>16&255]+hs[n>>24&255]+hs[r&255]+hs[r>>8&255]+hs[r>>16&255]+hs[r>>24&255]).toLowerCase()}function sr(t,e,n){return Math.max(e,Math.min(n,t))}function roe(t,e){return(t%e+e)%e}function u4(t,e,n){return(1-n)*t+n*e}function Kx(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function ho(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}class Sn{constructor(e=0,n=0){Sn.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=sr(this.x,e.x,n.x),this.y=sr(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=sr(this.x,e,n),this.y=sr(this.y,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(sr(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(sr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),a=this.x-e.x,s=this.y-e.y;return this.x=a*r-s*i+e.x,this.y=a*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class q_{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,a,s,o){let c=r[i+0],u=r[i+1],h=r[i+2],f=r[i+3],m=a[s+0],g=a[s+1],v=a[s+2],x=a[s+3];if(o<=0){e[n+0]=c,e[n+1]=u,e[n+2]=h,e[n+3]=f;return}if(o>=1){e[n+0]=m,e[n+1]=g,e[n+2]=v,e[n+3]=x;return}if(f!==x||c!==m||u!==g||h!==v){let _=c*m+u*g+h*v+f*x;_<0&&(m=-m,g=-g,v=-v,x=-x,_=-_);let w=1-o;if(_<.9995){const S=Math.acos(_),E=Math.sin(S);w=Math.sin(w*S)/E,o=Math.sin(o*S)/E,c=c*w+m*o,u=u*w+g*o,h=h*w+v*o,f=f*w+x*o}else{c=c*w+m*o,u=u*w+g*o,h=h*w+v*o,f=f*w+x*o;const S=1/Math.sqrt(c*c+u*u+h*h+f*f);c*=S,u*=S,h*=S,f*=S}}e[n]=c,e[n+1]=u,e[n+2]=h,e[n+3]=f}static multiplyQuaternionsFlat(e,n,r,i,a,s){const o=r[i],c=r[i+1],u=r[i+2],h=r[i+3],f=a[s],m=a[s+1],g=a[s+2],v=a[s+3];return e[n]=o*v+h*f+c*g-u*m,e[n+1]=c*v+h*m+u*f-o*g,e[n+2]=u*v+h*g+o*m-c*f,e[n+3]=h*v-o*f-c*m-u*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,a=e._z,s=e._order,o=Math.cos,c=Math.sin,u=o(r/2),h=o(i/2),f=o(a/2),m=c(r/2),g=c(i/2),v=c(a/2);switch(s){case"XYZ":this._x=m*h*f+u*g*v,this._y=u*g*f-m*h*v,this._z=u*h*v+m*g*f,this._w=u*h*f-m*g*v;break;case"YXZ":this._x=m*h*f+u*g*v,this._y=u*g*f-m*h*v,this._z=u*h*v-m*g*f,this._w=u*h*f+m*g*v;break;case"ZXY":this._x=m*h*f-u*g*v,this._y=u*g*f+m*h*v,this._z=u*h*v+m*g*f,this._w=u*h*f-m*g*v;break;case"ZYX":this._x=m*h*f-u*g*v,this._y=u*g*f+m*h*v,this._z=u*h*v-m*g*f,this._w=u*h*f+m*g*v;break;case"YZX":this._x=m*h*f+u*g*v,this._y=u*g*f+m*h*v,this._z=u*h*v-m*g*f,this._w=u*h*f-m*g*v;break;case"XZY":this._x=m*h*f-u*g*v,this._y=u*g*f-m*h*v,this._z=u*h*v+m*g*f,this._w=u*h*f+m*g*v;break;default:kn("Quaternion: .setFromEuler() encountered an unknown order: "+s)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],a=n[8],s=n[1],o=n[5],c=n[9],u=n[2],h=n[6],f=n[10],m=r+o+f;if(m>0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(h-c)*g,this._y=(a-u)*g,this._z=(s-i)*g}else if(r>o&&r>f){const g=2*Math.sqrt(1+r-o-f);this._w=(h-c)/g,this._x=.25*g,this._y=(i+s)/g,this._z=(a+u)/g}else if(o>f){const g=2*Math.sqrt(1+o-r-f);this._w=(a-u)/g,this._x=(i+s)/g,this._y=.25*g,this._z=(c+h)/g}else{const g=2*Math.sqrt(1+f-r-o);this._w=(s-i)/g,this._x=(a+u)/g,this._y=(c+h)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<1e-8?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(sr(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,a=e._z,s=e._w,o=n._x,c=n._y,u=n._z,h=n._w;return this._x=r*h+s*o+i*u-a*c,this._y=i*h+s*c+a*o-r*u,this._z=a*h+s*u+r*c-i*o,this._w=s*h-r*o-i*c-a*u,this._onChangeCallback(),this}slerp(e,n){if(n<=0)return this;if(n>=1)return this.copy(e);let r=e._x,i=e._y,a=e._z,s=e._w,o=this.dot(e);o<0&&(r=-r,i=-i,a=-a,s=-s,o=-o);let c=1-n;if(o<.9995){const u=Math.acos(o),h=Math.sin(u);c=Math.sin(c*u)/h,n=Math.sin(n*u)/h,this._x=this._x*c+r*n,this._y=this._y*c+i*n,this._z=this._z*c+a*n,this._w=this._w*c+s*n,this._onChangeCallback()}else this._x=this._x*c+r*n,this._y=this._y*c+i*n,this._z=this._z*c+a*n,this._w=this._w*c+s*n,this.normalize();return this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),a=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),a*Math.sin(n),a*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class qe{constructor(e=0,n=0,r=0){qe.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(M5.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(M5.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*n+a[3]*r+a[6]*i,this.y=a[1]*n+a[4]*r+a[7]*i,this.z=a[2]*n+a[5]*r+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,a=e.elements,s=1/(a[3]*n+a[7]*r+a[11]*i+a[15]);return this.x=(a[0]*n+a[4]*r+a[8]*i+a[12])*s,this.y=(a[1]*n+a[5]*r+a[9]*i+a[13])*s,this.z=(a[2]*n+a[6]*r+a[10]*i+a[14])*s,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,a=e.x,s=e.y,o=e.z,c=e.w,u=2*(s*i-o*r),h=2*(o*n-a*i),f=2*(a*r-s*n);return this.x=n+c*u+s*f-o*h,this.y=r+c*h+o*u-a*f,this.z=i+c*f+a*h-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*i,this.y=a[1]*n+a[5]*r+a[9]*i,this.z=a[2]*n+a[6]*r+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=sr(this.x,e.x,n.x),this.y=sr(this.y,e.y,n.y),this.z=sr(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=sr(this.x,e,n),this.y=sr(this.y,e,n),this.z=sr(this.z,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(sr(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,a=e.z,s=n.x,o=n.y,c=n.z;return this.x=i*c-a*o,this.y=a*s-r*c,this.z=r*o-i*s,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return d4.copy(this).projectOnVector(e),this.sub(d4)}reflect(e){return this.sub(d4.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(sr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const d4=new qe,M5=new q_;class $n{constructor(e,n,r,i,a,s,o,c,u){$n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,a,s,o,c,u)}set(e,n,r,i,a,s,o,c,u){const h=this.elements;return h[0]=e,h[1]=i,h[2]=o,h[3]=n,h[4]=a,h[5]=c,h[6]=r,h[7]=s,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,a=this.elements,s=r[0],o=r[3],c=r[6],u=r[1],h=r[4],f=r[7],m=r[2],g=r[5],v=r[8],x=i[0],_=i[3],w=i[6],S=i[1],E=i[4],A=i[7],N=i[2],P=i[5],R=i[8];return a[0]=s*x+o*S+c*N,a[3]=s*_+o*E+c*P,a[6]=s*w+o*A+c*R,a[1]=u*x+h*S+f*N,a[4]=u*_+h*E+f*P,a[7]=u*w+h*A+f*R,a[2]=m*x+g*S+v*N,a[5]=m*_+g*E+v*P,a[8]=m*w+g*A+v*R,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],c=e[6],u=e[7],h=e[8];return n*s*h-n*o*u-r*a*h+r*o*c+i*a*u-i*s*c}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],c=e[6],u=e[7],h=e[8],f=h*s-o*u,m=o*c-h*a,g=u*a-s*c,v=n*f+r*m+i*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/v;return e[0]=f*x,e[1]=(i*u-h*r)*x,e[2]=(o*r-i*s)*x,e[3]=m*x,e[4]=(h*n-i*c)*x,e[5]=(i*a-o*n)*x,e[6]=g*x,e[7]=(r*c-u*n)*x,e[8]=(s*n-r*a)*x,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,a,s,o){const c=Math.cos(a),u=Math.sin(a);return this.set(r*c,r*u,-r*(c*s+u*o)+s+e,-i*u,i*c,-i*(-u*s+c*o)+o+n,0,0,1),this}scale(e,n){return this.premultiply(h4.makeScale(e,n)),this}rotate(e){return this.premultiply(h4.makeRotation(-e)),this}translate(e,n){return this.premultiply(h4.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const h4=new $n,A5=new $n().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),P5=new $n().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function ioe(){const t={enabled:!0,workingColorSpace:hy,spaces:{},convert:function(i,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===Fr&&(i.r=Hd(i.r),i.g=Hd(i.g),i.b=Hd(i.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(i.applyMatrix3(this.spaces[a].toXYZ),i.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Fr&&(i.r=qv(i.r),i.g=qv(i.g),i.b=qv(i.b))),i},workingToColorSpace:function(i,a){return this.convert(i,this.workingColorSpace,a)},colorSpaceToWorking:function(i,a){return this.convert(i,a,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===bf?k3:this.spaces[i].transfer},getToneMappingMode:function(i){return this.spaces[i].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(i,a=this.workingColorSpace){return i.fromArray(this.spaces[a].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,a,s){return i.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,a){return c_("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),t.workingToColorSpace(i,a)},toWorkingColorSpace:function(i,a){return c_("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),t.colorSpaceToWorking(i,a)}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[hy]:{primaries:e,whitePoint:r,transfer:k3,toXYZ:A5,fromXYZ:P5,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:$l},outputColorSpaceConfig:{drawingBufferColorSpace:$l}},[$l]:{primaries:e,whitePoint:r,transfer:Fr,toXYZ:A5,fromXYZ:P5,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:$l}}}),t}const pr=ioe();function Hd(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function qv(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let av;class aoe{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{av===void 0&&(av=I3("canvas")),av.width=e.width,av.height=e.height;const i=av.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=av}return r.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=I3("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),a=i.data;for(let s=0;s<a.length;s++)a[s]=Hd(a[s]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Hd(n[r]/255)*255):n[r]=Hd(n[r]);return{data:n,width:e.width,height:e.height}}else return kn("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let soe=0;class BR{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:soe++}),this.uuid=W_(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const n=this.data;return typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement?e.set(n.videoWidth,n.videoHeight,0):n instanceof VideoFrame?e.set(n.displayHeight,n.displayWidth,0):n!==null?e.set(n.width,n.height,n.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?a.push(f4(i[s].image)):a.push(f4(i[s]))}else a=f4(i);r.url=a}return n||(e.images[this.uuid]=r),r}}function f4(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?aoe.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(kn("Texture: Unable to serialize Texture."),{})}let ooe=0;const p4=new qe;class _s extends jy{constructor(e=_s.DEFAULT_IMAGE,n=_s.DEFAULT_MAPPING,r=Fd,i=Fd,a=ys,s=jm,o=Ol,c=Zd,u=_s.DEFAULT_ANISOTROPY,h=bf){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ooe++}),this.uuid=W_(),this.name="",this.source=new BR(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=a,this.minFilter=s,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=c,this.offset=new Sn(0,0),this.repeat=new Sn(1,1),this.center=new Sn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new $n,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(p4).x}get height(){return this.source.getSize(p4).y}get depth(){return this.source.getSize(p4).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const n in e){const r=e[n];if(r===void 0){kn(`Texture.setValues(): parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){kn(`Texture.setValues(): property '${n}' does not exist.`);continue}i&&r&&i.isVector2&&r.isVector2||i&&r&&i.isVector3&&r.isVector3||i&&r&&i.isMatrix3&&r.isMatrix3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==v9)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case DN:e.x=e.x-Math.floor(e.x);break;case Fd:e.x=e.x<0?0:1;break;case kN:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case DN:e.y=e.y-Math.floor(e.y);break;case Fd:e.y=e.y<0?0:1;break;case kN:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}_s.DEFAULT_IMAGE=null;_s.DEFAULT_MAPPING=v9;_s.DEFAULT_ANISOTROPY=1;class Zi{constructor(e=0,n=0,r=0,i=1){Zi.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,a=this.w,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i+s[12]*a,this.y=s[1]*n+s[5]*r+s[9]*i+s[13]*a,this.z=s[2]*n+s[6]*r+s[10]*i+s[14]*a,this.w=s[3]*n+s[7]*r+s[11]*i+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,a;const c=e.elements,u=c[0],h=c[4],f=c[8],m=c[1],g=c[5],v=c[9],x=c[2],_=c[6],w=c[10];if(Math.abs(h-m)<.01&&Math.abs(f-x)<.01&&Math.abs(v-_)<.01){if(Math.abs(h+m)<.1&&Math.abs(f+x)<.1&&Math.abs(v+_)<.1&&Math.abs(u+g+w-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const E=(u+1)/2,A=(g+1)/2,N=(w+1)/2,P=(h+m)/4,R=(f+x)/4,D=(v+_)/4;return E>A&&E>N?E<.01?(r=0,i=.707106781,a=.707106781):(r=Math.sqrt(E),i=P/r,a=R/r):A>N?A<.01?(r=.707106781,i=0,a=.707106781):(i=Math.sqrt(A),r=P/i,a=D/i):N<.01?(r=.707106781,i=.707106781,a=0):(a=Math.sqrt(N),r=R/a,i=D/a),this.set(r,i,a,n),this}let S=Math.sqrt((_-v)*(_-v)+(f-x)*(f-x)+(m-h)*(m-h));return Math.abs(S)<.001&&(S=1),this.x=(_-v)/S,this.y=(f-x)/S,this.z=(m-h)/S,this.w=Math.acos((u+g+w-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=sr(this.x,e.x,n.x),this.y=sr(this.y,e.y,n.y),this.z=sr(this.z,e.z,n.z),this.w=sr(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=sr(this.x,e,n),this.y=sr(this.y,e,n),this.z=sr(this.z,e,n),this.w=sr(this.w,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(sr(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class loe extends jy{constructor(e=1,n=1,r={}){super(),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ys,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},r),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=r.depth,this.scissor=new Zi(0,0,e,n),this.scissorTest=!1,this.viewport=new Zi(0,0,e,n);const i={width:e,height:n,depth:r.depth},a=new _s(i);this.textures=[];const s=r.count;for(let o=0;o<s;o++)this.textures[o]=a.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(r),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples,this.multiview=r.multiview}_setTextureOptions(e={}){const n={minFilter:ys,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(n.mapping=e.mapping),e.wrapS!==void 0&&(n.wrapS=e.wrapS),e.wrapT!==void 0&&(n.wrapT=e.wrapT),e.wrapR!==void 0&&(n.wrapR=e.wrapR),e.magFilter!==void 0&&(n.magFilter=e.magFilter),e.minFilter!==void 0&&(n.minFilter=e.minFilter),e.format!==void 0&&(n.format=e.format),e.type!==void 0&&(n.type=e.type),e.anisotropy!==void 0&&(n.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(n.colorSpace=e.colorSpace),e.flipY!==void 0&&(n.flipY=e.flipY),e.generateMipmaps!==void 0&&(n.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(n.internalFormat=e.internalFormat);for(let r=0;r<this.textures.length;r++)this.textures[r].setValues(n)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,a=this.textures.length;i<a;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r,this.textures[i].isData3DTexture!==!0&&(this.textures[i].isArrayTexture=this.textures[i].image.depth>1);this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const i=Object.assign({},e.textures[n].image);this.textures[n].source=new BR(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class sl extends loe{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class T9 extends _s{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Hs,this.minFilter=Hs,this.wrapR=Fd,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class coe extends _s{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Hs,this.minFilter=Hs,this.wrapR=Fd,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class xg{constructor(e=new qe(1/0,1/0,1/0),n=new qe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(wc.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(wc.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=wc.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const a=r.getAttribute("position");if(n===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,wc):wc.fromBufferAttribute(a,s),wc.applyMatrix4(e.matrixWorld),this.expandByPoint(wc);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),RE.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),RE.copy(r.boundingBox)),RE.applyMatrix4(e.matrixWorld),this.union(RE)}const i=e.children;for(let a=0,s=i.length;a<s;a++)this.expandByObject(i[a],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,wc),wc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Xx),IE.subVectors(this.max,Xx),sv.subVectors(e.a,Xx),ov.subVectors(e.b,Xx),lv.subVectors(e.c,Xx),sf.subVectors(ov,sv),of.subVectors(lv,ov),lm.subVectors(sv,lv);let n=[0,-sf.z,sf.y,0,-of.z,of.y,0,-lm.z,lm.y,sf.z,0,-sf.x,of.z,0,-of.x,lm.z,0,-lm.x,-sf.y,sf.x,0,-of.y,of.x,0,-lm.y,lm.x,0];return!m4(n,sv,ov,lv,IE)||(n=[1,0,0,0,1,0,0,0,1],!m4(n,sv,ov,lv,IE))?!1:($E.crossVectors(sf,of),n=[$E.x,$E.y,$E.z],m4(n,sv,ov,lv,IE))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,wc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(wc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(yd[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),yd[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),yd[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),yd[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),yd[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),yd[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),yd[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),yd[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(yd),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const yd=[new qe,new qe,new qe,new qe,new qe,new qe,new qe,new qe],wc=new qe,RE=new xg,sv=new qe,ov=new qe,lv=new qe,sf=new qe,of=new qe,lm=new qe,Xx=new qe,IE=new qe,$E=new qe,cm=new qe;function m4(t,e,n,r,i){for(let a=0,s=t.length-3;a<=s;a+=3){cm.fromArray(t,a);const o=i.x*Math.abs(cm.x)+i.y*Math.abs(cm.y)+i.z*Math.abs(cm.z),c=e.dot(cm),u=n.dot(cm),h=r.dot(cm);if(Math.max(-Math.max(c,u,h),Math.min(c,u,h))>o)return!1}return!0}const uoe=new xg,Yx=new qe,g4=new qe;class Ly{constructor(e=new qe,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):uoe.setFromPoints(e).getCenter(r);let i=0;for(let a=0,s=e.length;a<s;a++)i=Math.max(i,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Yx.subVectors(e,this.center);const n=Yx.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(Yx,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(g4.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Yx.copy(e.center).add(g4)),this.expandByPoint(Yx.copy(e.center).sub(g4))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const bd=new qe,v4=new qe,jE=new qe,lf=new qe,y4=new qe,LE=new qe,b4=new qe;class M9{constructor(e=new qe,n=new qe(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,bd)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=bd.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(bd.copy(this.origin).addScaledVector(this.direction,n),bd.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){v4.copy(e).add(n).multiplyScalar(.5),jE.copy(n).sub(e).normalize(),lf.copy(this.origin).sub(v4);const a=e.distanceTo(n)*.5,s=-this.direction.dot(jE),o=lf.dot(this.direction),c=-lf.dot(jE),u=lf.lengthSq(),h=Math.abs(1-s*s);let f,m,g,v;if(h>0)if(f=s*c-o,m=s*o-c,v=a*h,f>=0)if(m>=-v)if(m<=v){const x=1/h;f*=x,m*=x,g=f*(f+s*m+2*o)+m*(s*f+m+2*c)+u}else m=a,f=Math.max(0,-(s*m+o)),g=-f*f+m*(m+2*c)+u;else m=-a,f=Math.max(0,-(s*m+o)),g=-f*f+m*(m+2*c)+u;else m<=-v?(f=Math.max(0,-(-s*a+o)),m=f>0?-a:Math.min(Math.max(-a,-c),a),g=-f*f+m*(m+2*c)+u):m<=v?(f=0,m=Math.min(Math.max(-a,-c),a),g=m*(m+2*c)+u):(f=Math.max(0,-(s*a+o)),m=f>0?a:Math.min(Math.max(-a,-c),a),g=-f*f+m*(m+2*c)+u);else m=s>0?-a:a,f=Math.max(0,-(s*m+o)),g=-f*f+m*(m+2*c)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(v4).addScaledVector(jE,m),g}intersectSphere(e,n){bd.subVectors(e.center,this.origin);const r=bd.dot(this.direction),i=bd.dot(bd)-r*r,a=e.radius*e.radius;if(i>a)return null;const s=Math.sqrt(a-i),o=r-s,c=r+s;return c<0?null:o<0?this.at(c,n):this.at(o,n)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,a,s,o,c;const u=1/this.direction.x,h=1/this.direction.y,f=1/this.direction.z,m=this.origin;return u>=0?(r=(e.min.x-m.x)*u,i=(e.max.x-m.x)*u):(r=(e.max.x-m.x)*u,i=(e.min.x-m.x)*u),h>=0?(a=(e.min.y-m.y)*h,s=(e.max.y-m.y)*h):(a=(e.max.y-m.y)*h,s=(e.min.y-m.y)*h),r>s||a>i||((a>r||isNaN(r))&&(r=a),(s<i||isNaN(i))&&(i=s),f>=0?(o=(e.min.z-m.z)*f,c=(e.max.z-m.z)*f):(o=(e.max.z-m.z)*f,c=(e.min.z-m.z)*f),r>c||o>i)||((o>r||r!==r)&&(r=o),(c<i||i!==i)&&(i=c),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,bd)!==null}intersectTriangle(e,n,r,i,a){y4.subVectors(n,e),LE.subVectors(r,e),b4.crossVectors(y4,LE);let s=this.direction.dot(b4),o;if(s>0){if(i)return null;o=1}else if(s<0)o=-1,s=-s;else return null;lf.subVectors(this.origin,e);const c=o*this.direction.dot(LE.crossVectors(lf,LE));if(c<0)return null;const u=o*this.direction.dot(y4.cross(lf));if(u<0||c+u>s)return null;const h=-o*lf.dot(b4);return h<0?null:this.at(h/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Pi{constructor(e,n,r,i,a,s,o,c,u,h,f,m,g,v,x,_){Pi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,a,s,o,c,u,h,f,m,g,v,x,_)}set(e,n,r,i,a,s,o,c,u,h,f,m,g,v,x,_){const w=this.elements;return w[0]=e,w[4]=n,w[8]=r,w[12]=i,w[1]=a,w[5]=s,w[9]=o,w[13]=c,w[2]=u,w[6]=h,w[10]=f,w[14]=m,w[3]=g,w[7]=v,w[11]=x,w[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Pi().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/cv.setFromMatrixColumn(e,0).length(),a=1/cv.setFromMatrixColumn(e,1).length(),s=1/cv.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*a,n[5]=r[5]*a,n[6]=r[6]*a,n[7]=0,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,a=e.z,s=Math.cos(r),o=Math.sin(r),c=Math.cos(i),u=Math.sin(i),h=Math.cos(a),f=Math.sin(a);if(e.order==="XYZ"){const m=s*h,g=s*f,v=o*h,x=o*f;n[0]=c*h,n[4]=-c*f,n[8]=u,n[1]=g+v*u,n[5]=m-x*u,n[9]=-o*c,n[2]=x-m*u,n[6]=v+g*u,n[10]=s*c}else if(e.order==="YXZ"){const m=c*h,g=c*f,v=u*h,x=u*f;n[0]=m+x*o,n[4]=v*o-g,n[8]=s*u,n[1]=s*f,n[5]=s*h,n[9]=-o,n[2]=g*o-v,n[6]=x+m*o,n[10]=s*c}else if(e.order==="ZXY"){const m=c*h,g=c*f,v=u*h,x=u*f;n[0]=m-x*o,n[4]=-s*f,n[8]=v+g*o,n[1]=g+v*o,n[5]=s*h,n[9]=x-m*o,n[2]=-s*u,n[6]=o,n[10]=s*c}else if(e.order==="ZYX"){const m=s*h,g=s*f,v=o*h,x=o*f;n[0]=c*h,n[4]=v*u-g,n[8]=m*u+x,n[1]=c*f,n[5]=x*u+m,n[9]=g*u-v,n[2]=-u,n[6]=o*c,n[10]=s*c}else if(e.order==="YZX"){const m=s*c,g=s*u,v=o*c,x=o*u;n[0]=c*h,n[4]=x-m*f,n[8]=v*f+g,n[1]=f,n[5]=s*h,n[9]=-o*h,n[2]=-u*h,n[6]=g*f+v,n[10]=m-x*f}else if(e.order==="XZY"){const m=s*c,g=s*u,v=o*c,x=o*u;n[0]=c*h,n[4]=-f,n[8]=u*h,n[1]=m*f+x,n[5]=s*h,n[9]=g*f-v,n[2]=v*f-g,n[6]=o*h,n[10]=x*f+m}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(doe,e,hoe)}lookAt(e,n,r){const i=this.elements;return Xo.subVectors(e,n),Xo.lengthSq()===0&&(Xo.z=1),Xo.normalize(),cf.crossVectors(r,Xo),cf.lengthSq()===0&&(Math.abs(r.z)===1?Xo.x+=1e-4:Xo.z+=1e-4,Xo.normalize(),cf.crossVectors(r,Xo)),cf.normalize(),OE.crossVectors(Xo,cf),i[0]=cf.x,i[4]=OE.x,i[8]=Xo.x,i[1]=cf.y,i[5]=OE.y,i[9]=Xo.y,i[2]=cf.z,i[6]=OE.z,i[10]=Xo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,a=this.elements,s=r[0],o=r[4],c=r[8],u=r[12],h=r[1],f=r[5],m=r[9],g=r[13],v=r[2],x=r[6],_=r[10],w=r[14],S=r[3],E=r[7],A=r[11],N=r[15],P=i[0],R=i[4],D=i[8],k=i[12],L=i[1],$=i[5],B=i[9],q=i[13],U=i[2],J=i[6],O=i[10],z=i[14],V=i[3],H=i[7],ee=i[11],Y=i[15];return a[0]=s*P+o*L+c*U+u*V,a[4]=s*R+o*$+c*J+u*H,a[8]=s*D+o*B+c*O+u*ee,a[12]=s*k+o*q+c*z+u*Y,a[1]=h*P+f*L+m*U+g*V,a[5]=h*R+f*$+m*J+g*H,a[9]=h*D+f*B+m*O+g*ee,a[13]=h*k+f*q+m*z+g*Y,a[2]=v*P+x*L+_*U+w*V,a[6]=v*R+x*$+_*J+w*H,a[10]=v*D+x*B+_*O+w*ee,a[14]=v*k+x*q+_*z+w*Y,a[3]=S*P+E*L+A*U+N*V,a[7]=S*R+E*$+A*J+N*H,a[11]=S*D+E*B+A*O+N*ee,a[15]=S*k+E*q+A*z+N*Y,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],a=e[12],s=e[1],o=e[5],c=e[9],u=e[13],h=e[2],f=e[6],m=e[10],g=e[14],v=e[3],x=e[7],_=e[11],w=e[15];return v*(+a*c*f-i*u*f-a*o*m+r*u*m+i*o*g-r*c*g)+x*(+n*c*g-n*u*m+a*s*m-i*s*g+i*u*h-a*c*h)+_*(+n*u*f-n*o*g-a*s*f+r*s*g+a*o*h-r*u*h)+w*(-i*o*h-n*c*f+n*o*m+i*s*f-r*s*m+r*c*h)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],c=e[6],u=e[7],h=e[8],f=e[9],m=e[10],g=e[11],v=e[12],x=e[13],_=e[14],w=e[15],S=f*_*u-x*m*u+x*c*g-o*_*g-f*c*w+o*m*w,E=v*m*u-h*_*u-v*c*g+s*_*g+h*c*w-s*m*w,A=h*x*u-v*f*u+v*o*g-s*x*g-h*o*w+s*f*w,N=v*f*c-h*x*c-v*o*m+s*x*m+h*o*_-s*f*_,P=n*S+r*E+i*A+a*N;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/P;return e[0]=S*R,e[1]=(x*m*a-f*_*a-x*i*g+r*_*g+f*i*w-r*m*w)*R,e[2]=(o*_*a-x*c*a+x*i*u-r*_*u-o*i*w+r*c*w)*R,e[3]=(f*c*a-o*m*a-f*i*u+r*m*u+o*i*g-r*c*g)*R,e[4]=E*R,e[5]=(h*_*a-v*m*a+v*i*g-n*_*g-h*i*w+n*m*w)*R,e[6]=(v*c*a-s*_*a-v*i*u+n*_*u+s*i*w-n*c*w)*R,e[7]=(s*m*a-h*c*a+h*i*u-n*m*u-s*i*g+n*c*g)*R,e[8]=A*R,e[9]=(v*f*a-h*x*a-v*r*g+n*x*g+h*r*w-n*f*w)*R,e[10]=(s*x*a-v*o*a+v*r*u-n*x*u-s*r*w+n*o*w)*R,e[11]=(h*o*a-s*f*a-h*r*u+n*f*u+s*r*g-n*o*g)*R,e[12]=N*R,e[13]=(h*x*i-v*f*i+v*r*m-n*x*m-h*r*_+n*f*_)*R,e[14]=(v*o*i-s*x*i-v*r*c+n*x*c+s*r*_-n*o*_)*R,e[15]=(s*f*i-h*o*i+h*r*c-n*f*c-s*r*m+n*o*m)*R,this}scale(e){const n=this.elements,r=e.x,i=e.y,a=e.z;return n[0]*=r,n[4]*=i,n[8]*=a,n[1]*=r,n[5]*=i,n[9]*=a,n[2]*=r,n[6]*=i,n[10]*=a,n[3]*=r,n[7]*=i,n[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),a=1-r,s=e.x,o=e.y,c=e.z,u=a*s,h=a*o;return this.set(u*s+r,u*o-i*c,u*c+i*o,0,u*o+i*c,h*o+r,h*c-i*s,0,u*c-i*o,h*c+i*s,a*c*c+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,a,s){return this.set(1,r,a,0,e,1,s,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,a=n._x,s=n._y,o=n._z,c=n._w,u=a+a,h=s+s,f=o+o,m=a*u,g=a*h,v=a*f,x=s*h,_=s*f,w=o*f,S=c*u,E=c*h,A=c*f,N=r.x,P=r.y,R=r.z;return i[0]=(1-(x+w))*N,i[1]=(g+A)*N,i[2]=(v-E)*N,i[3]=0,i[4]=(g-A)*P,i[5]=(1-(m+w))*P,i[6]=(_+S)*P,i[7]=0,i[8]=(v+E)*R,i[9]=(_-S)*R,i[10]=(1-(m+x))*R,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let a=cv.set(i[0],i[1],i[2]).length();const s=cv.set(i[4],i[5],i[6]).length(),o=cv.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],Sc.copy(this);const u=1/a,h=1/s,f=1/o;return Sc.elements[0]*=u,Sc.elements[1]*=u,Sc.elements[2]*=u,Sc.elements[4]*=h,Sc.elements[5]*=h,Sc.elements[6]*=h,Sc.elements[8]*=f,Sc.elements[9]*=f,Sc.elements[10]*=f,n.setFromRotationMatrix(Sc),r.x=a,r.y=s,r.z=o,this}makePerspective(e,n,r,i,a,s,o=Lu,c=!1){const u=this.elements,h=2*a/(n-e),f=2*a/(r-i),m=(n+e)/(n-e),g=(r+i)/(r-i);let v,x;if(c)v=a/(s-a),x=s*a/(s-a);else if(o===Lu)v=-(s+a)/(s-a),x=-2*s*a/(s-a);else if(o===R3)v=-s/(s-a),x=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return u[0]=h,u[4]=0,u[8]=m,u[12]=0,u[1]=0,u[5]=f,u[9]=g,u[13]=0,u[2]=0,u[6]=0,u[10]=v,u[14]=x,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,n,r,i,a,s,o=Lu,c=!1){const u=this.elements,h=2/(n-e),f=2/(r-i),m=-(n+e)/(n-e),g=-(r+i)/(r-i);let v,x;if(c)v=1/(s-a),x=s/(s-a);else if(o===Lu)v=-2/(s-a),x=-(s+a)/(s-a);else if(o===R3)v=-1/(s-a),x=-a/(s-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return u[0]=h,u[4]=0,u[8]=0,u[12]=m,u[1]=0,u[5]=f,u[9]=0,u[13]=g,u[2]=0,u[6]=0,u[10]=v,u[14]=x,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const cv=new qe,Sc=new Pi,doe=new qe(0,0,0),hoe=new qe(1,1,1),cf=new qe,OE=new qe,Xo=new qe,N5=new Pi,D5=new q_;class Jd{constructor(e=0,n=0,r=0,i=Jd.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,a=i[0],s=i[4],o=i[8],c=i[1],u=i[5],h=i[9],f=i[2],m=i[6],g=i[10];switch(n){case"XYZ":this._y=Math.asin(sr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,g),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(m,u),this._z=0);break;case"YXZ":this._x=Math.asin(-sr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,g),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-f,a),this._z=0);break;case"ZXY":this._x=Math.asin(sr(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-f,g),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-sr(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(sr(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(o,g));break;case"XZY":this._z=Math.asin(-sr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(m,u),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-h,g),this._y=0);break;default:kn("Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return N5.makeRotationFromQuaternion(e),this.setFromRotationMatrix(N5,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return D5.setFromEuler(this),this.setFromQuaternion(D5,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Jd.DEFAULT_ORDER="XYZ";let A9=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},foe=0;const k5=new qe,uv=new q_,xd=new Pi,FE=new qe,Zx=new qe,poe=new qe,moe=new q_,R5=new qe(1,0,0),I5=new qe(0,1,0),$5=new qe(0,0,1),j5={type:"added"},goe={type:"removed"},dv={type:"childadded",child:null},x4={type:"childremoved",child:null};class Gs extends jy{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:foe++}),this.uuid=W_(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Gs.DEFAULT_UP.clone();const e=new qe,n=new Jd,r=new q_,i=new qe(1,1,1);function a(){r.setFromEuler(n,!1)}function s(){n.setFromQuaternion(r,void 0,!1)}n._onChange(a),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Pi},normalMatrix:{value:new $n}}),this.matrix=new Pi,this.matrixWorld=new Pi,this.matrixAutoUpdate=Gs.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Gs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new A9,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return uv.setFromAxisAngle(e,n),this.quaternion.multiply(uv),this}rotateOnWorldAxis(e,n){return uv.setFromAxisAngle(e,n),this.quaternion.premultiply(uv),this}rotateX(e){return this.rotateOnAxis(R5,e)}rotateY(e){return this.rotateOnAxis(I5,e)}rotateZ(e){return this.rotateOnAxis($5,e)}translateOnAxis(e,n){return k5.copy(e).applyQuaternion(this.quaternion),this.position.add(k5.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(R5,e)}translateY(e){return this.translateOnAxis(I5,e)}translateZ(e){return this.translateOnAxis($5,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(xd.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?FE.copy(e):FE.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Zx.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?xd.lookAt(Zx,FE,this.up):xd.lookAt(FE,Zx,this.up),this.quaternion.setFromRotationMatrix(xd),i&&(xd.extractRotation(i.matrixWorld),uv.setFromRotationMatrix(xd),this.quaternion.premultiply(uv.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(Yi("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(j5),dv.child=e,this.dispatchEvent(dv),dv.child=null):Yi("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(goe),x4.child=e,this.dispatchEvent(x4),x4.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),xd.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),xd.multiply(e.parent.matrixWorld)),e.applyMatrix4(xd),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(j5),dv.child=e,this.dispatchEvent(dv),dv.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,n);if(s!==void 0)return s}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zx,e,poe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zx,moe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(o=>({...o})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function a(o,c){return o[c.uuid]===void 0&&(o[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const c=o.shapes;if(Array.isArray(c))for(let u=0,h=c.length;u<h;u++){const f=c[u];a(e.shapes,f)}else a(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let c=0,u=this.material.length;c<u;c++)o.push(a(e.materials,this.material[c]));i.material=o}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const c=this.animations[o];i.animations.push(a(e.animations,c))}}if(n){const o=s(e.geometries),c=s(e.materials),u=s(e.textures),h=s(e.images),f=s(e.shapes),m=s(e.skeletons),g=s(e.animations),v=s(e.nodes);o.length>0&&(r.geometries=o),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),h.length>0&&(r.images=h),f.length>0&&(r.shapes=f),m.length>0&&(r.skeletons=m),g.length>0&&(r.animations=g),v.length>0&&(r.nodes=v)}return r.object=i,r;function s(o){const c=[];for(const u in o){const h=o[u];delete h.metadata,c.push(h)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Gs.DEFAULT_UP=new qe(0,1,0);Gs.DEFAULT_MATRIX_AUTO_UPDATE=!0;Gs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ec=new qe,_d=new qe,_4=new qe,wd=new qe,hv=new qe,fv=new qe,L5=new qe,w4=new qe,S4=new qe,E4=new qe,C4=new Zi,T4=new Zi,M4=new Zi;class Nc{constructor(e=new qe,n=new qe,r=new qe){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Ec.subVectors(e,n),i.cross(Ec);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,n,r,i,a){Ec.subVectors(i,n),_d.subVectors(r,n),_4.subVectors(e,n);const s=Ec.dot(Ec),o=Ec.dot(_d),c=Ec.dot(_4),u=_d.dot(_d),h=_d.dot(_4),f=s*u-o*o;if(f===0)return a.set(0,0,0),null;const m=1/f,g=(u*c-o*h)*m,v=(s*h-o*c)*m;return a.set(1-g-v,v,g)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,wd)===null?!1:wd.x>=0&&wd.y>=0&&wd.x+wd.y<=1}static getInterpolation(e,n,r,i,a,s,o,c){return this.getBarycoord(e,n,r,i,wd)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(a,wd.x),c.addScaledVector(s,wd.y),c.addScaledVector(o,wd.z),c)}static getInterpolatedAttribute(e,n,r,i,a,s){return C4.setScalar(0),T4.setScalar(0),M4.setScalar(0),C4.fromBufferAttribute(e,n),T4.fromBufferAttribute(e,r),M4.fromBufferAttribute(e,i),s.setScalar(0),s.addScaledVector(C4,a.x),s.addScaledVector(T4,a.y),s.addScaledVector(M4,a.z),s}static isFrontFacing(e,n,r,i){return Ec.subVectors(r,n),_d.subVectors(e,n),Ec.cross(_d).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ec.subVectors(this.c,this.b),_d.subVectors(this.a,this.b),Ec.cross(_d).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Nc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Nc.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,a){return Nc.getInterpolation(e,this.a,this.b,this.c,n,r,i,a)}containsPoint(e){return Nc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Nc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,a=this.c;let s,o;hv.subVectors(i,r),fv.subVectors(a,r),w4.subVectors(e,r);const c=hv.dot(w4),u=fv.dot(w4);if(c<=0&&u<=0)return n.copy(r);S4.subVectors(e,i);const h=hv.dot(S4),f=fv.dot(S4);if(h>=0&&f<=h)return n.copy(i);const m=c*f-h*u;if(m<=0&&c>=0&&h<=0)return s=c/(c-h),n.copy(r).addScaledVector(hv,s);E4.subVectors(e,a);const g=hv.dot(E4),v=fv.dot(E4);if(v>=0&&g<=v)return n.copy(a);const x=g*u-c*v;if(x<=0&&u>=0&&v<=0)return o=u/(u-v),n.copy(r).addScaledVector(fv,o);const _=h*v-g*f;if(_<=0&&f-h>=0&&g-v>=0)return L5.subVectors(a,i),o=(f-h)/(f-h+(g-v)),n.copy(i).addScaledVector(L5,o);const w=1/(_+x+m);return s=x*w,o=m*w,n.copy(r).addScaledVector(hv,s).addScaledVector(fv,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const P9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},uf={h:0,s:0,l:0},BE={h:0,s:0,l:0};function A4(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}let or=class{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=$l){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,pr.colorSpaceToWorking(this,n),this}setRGB(e,n,r,i=pr.workingColorSpace){return this.r=e,this.g=n,this.b=r,pr.colorSpaceToWorking(this,i),this}setHSL(e,n,r,i=pr.workingColorSpace){if(e=roe(e,1),n=sr(n,0,1),r=sr(r,0,1),n===0)this.r=this.g=this.b=r;else{const a=r<=.5?r*(1+n):r+n-r*n,s=2*r-a;this.r=A4(s,a,e+1/3),this.g=A4(s,a,e),this.b=A4(s,a,e-1/3)}return pr.colorSpaceToWorking(this,i),this}setStyle(e,n=$l){function r(a){a!==void 0&&parseFloat(a)<1&&kn("Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:kn("Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,n);if(s===6)return this.setHex(parseInt(a,16),n);kn("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=$l){const r=P9[e.toLowerCase()];return r!==void 0?this.setHex(r,n):kn("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Hd(e.r),this.g=Hd(e.g),this.b=Hd(e.b),this}copyLinearToSRGB(e){return this.r=qv(e.r),this.g=qv(e.g),this.b=qv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=$l){return pr.workingToColorSpace(fs.copy(this),e),Math.round(sr(fs.r*255,0,255))*65536+Math.round(sr(fs.g*255,0,255))*256+Math.round(sr(fs.b*255,0,255))}getHexString(e=$l){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=pr.workingColorSpace){pr.workingToColorSpace(fs.copy(this),n);const r=fs.r,i=fs.g,a=fs.b,s=Math.max(r,i,a),o=Math.min(r,i,a);let c,u;const h=(o+s)/2;if(o===s)c=0,u=0;else{const f=s-o;switch(u=h<=.5?f/(s+o):f/(2-s-o),s){case r:c=(i-a)/f+(i<a?6:0);break;case i:c=(a-r)/f+2;break;case a:c=(r-i)/f+4;break}c/=6}return e.h=c,e.s=u,e.l=h,e}getRGB(e,n=pr.workingColorSpace){return pr.workingToColorSpace(fs.copy(this),n),e.r=fs.r,e.g=fs.g,e.b=fs.b,e}getStyle(e=$l){pr.workingToColorSpace(fs.copy(this),e);const n=fs.r,r=fs.g,i=fs.b;return e!==$l?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(uf),this.setHSL(uf.h+e,uf.s+n,uf.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(uf),e.getHSL(BE);const r=u4(uf.h,BE.h,n),i=u4(uf.s,BE.s,n),a=u4(uf.l,BE.l,n);return this.setHSL(r,i,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,a=e.elements;return this.r=a[0]*n+a[3]*r+a[6]*i,this.g=a[1]*n+a[4]*r+a[7]*i,this.b=a[2]*n+a[5]*r+a[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const fs=new or;or.NAMES=P9;let voe=0;class K_ extends jy{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:voe++}),this.uuid=W_(),this.name="",this.type="Material",this.blending=Hm,this.side=Ff,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=xN,this.blendDst=_N,this.blendEquation=Am,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new or(0,0,0),this.blendAlpha=0,this.depthFunc=cy,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=w5,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=iv,this.stencilZFail=iv,this.stencilZPass=iv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){kn(`Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){kn(`Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(r.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(r.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Hm&&(r.blending=this.blending),this.side!==Ff&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==xN&&(r.blendSrc=this.blendSrc),this.blendDst!==_N&&(r.blendDst=this.blendDst),this.blendEquation!==Am&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==cy&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==w5&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==iv&&(r.stencilFail=this.stencilFail),this.stencilZFail!==iv&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==iv&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(a){const s=[];for(const o in a){const c=a[o];delete c.metadata,s.push(c)}return s}if(n){const a=i(e.textures),s=i(e.images);a.length>0&&(r.textures=a),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let a=0;a!==i;++a)r[a]=n[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class zR extends K_{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new or(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jd,this.combine=c9,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ra=new qe,zE=new Sn;let yoe=0;class er{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:yoe++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=S5,this.updateRanges=[],this.gpuType=Rc,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)zE.fromBufferAttribute(this,n),zE.applyMatrix3(e),this.setXY(n,zE.x,zE.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)ra.fromBufferAttribute(this,n),ra.applyMatrix3(e),this.setXYZ(n,ra.x,ra.y,ra.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)ra.fromBufferAttribute(this,n),ra.applyMatrix4(e),this.setXYZ(n,ra.x,ra.y,ra.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)ra.fromBufferAttribute(this,n),ra.applyNormalMatrix(e),this.setXYZ(n,ra.x,ra.y,ra.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)ra.fromBufferAttribute(this,n),ra.transformDirection(e),this.setXYZ(n,ra.x,ra.y,ra.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=Kx(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=ho(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Kx(n,this.array)),n}setX(e,n){return this.normalized&&(n=ho(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Kx(n,this.array)),n}setY(e,n){return this.normalized&&(n=ho(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Kx(n,this.array)),n}setZ(e,n){return this.normalized&&(n=ho(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Kx(n,this.array)),n}setW(e,n){return this.normalized&&(n=ho(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=ho(n,this.array),r=ho(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=ho(n,this.array),r=ho(r,this.array),i=ho(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,a){return e*=this.itemSize,this.normalized&&(n=ho(n,this.array),r=ho(r,this.array),i=ho(i,this.array),a=ho(a,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==S5&&(e.usage=this.usage),e}}class N9 extends er{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class D9 extends er{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Gd extends er{constructor(e,n,r){super(new Float32Array(e),n,r)}}let boe=0;const Al=new Pi,P4=new Gs,pv=new qe,Yo=new xg,Jx=new xg,Ma=new qe;class hl extends jy{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:boe++}),this.uuid=W_(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(C9(e)?D9:N9)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const a=new $n().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Al.makeRotationFromQuaternion(e),this.applyMatrix4(Al),this}rotateX(e){return Al.makeRotationX(e),this.applyMatrix4(Al),this}rotateY(e){return Al.makeRotationY(e),this.applyMatrix4(Al),this}rotateZ(e){return Al.makeRotationZ(e),this.applyMatrix4(Al),this}translate(e,n,r){return Al.makeTranslation(e,n,r),this.applyMatrix4(Al),this}scale(e,n,r){return Al.makeScale(e,n,r),this.applyMatrix4(Al),this}lookAt(e){return P4.lookAt(e),P4.updateMatrix(),this.applyMatrix4(P4.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(pv).negate(),this.translate(pv.x,pv.y,pv.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let i=0,a=e.length;i<a;i++){const s=e[i];r.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Gd(r,3))}else{const r=Math.min(e.length,n.count);for(let i=0;i<r;i++){const a=e[i];n.setXYZ(i,a.x,a.y,a.z||0)}e.length>n.count&&kn("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new xg);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Yi("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new qe(-1/0,-1/0,-1/0),new qe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const a=n[r];Yo.setFromBufferAttribute(a),this.morphTargetsRelative?(Ma.addVectors(this.boundingBox.min,Yo.min),this.boundingBox.expandByPoint(Ma),Ma.addVectors(this.boundingBox.max,Yo.max),this.boundingBox.expandByPoint(Ma)):(this.boundingBox.expandByPoint(Yo.min),this.boundingBox.expandByPoint(Yo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Yi('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ly);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Yi("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new qe,1/0);return}if(e){const r=this.boundingSphere.center;if(Yo.setFromBufferAttribute(e),n)for(let a=0,s=n.length;a<s;a++){const o=n[a];Jx.setFromBufferAttribute(o),this.morphTargetsRelative?(Ma.addVectors(Yo.min,Jx.min),Yo.expandByPoint(Ma),Ma.addVectors(Yo.max,Jx.max),Yo.expandByPoint(Ma)):(Yo.expandByPoint(Jx.min),Yo.expandByPoint(Jx.max))}Yo.getCenter(r);let i=0;for(let a=0,s=e.count;a<s;a++)Ma.fromBufferAttribute(e,a),i=Math.max(i,r.distanceToSquared(Ma));if(n)for(let a=0,s=n.length;a<s;a++){const o=n[a],c=this.morphTargetsRelative;for(let u=0,h=o.count;u<h;u++)Ma.fromBufferAttribute(o,u),c&&(pv.fromBufferAttribute(e,u),Ma.add(pv)),i=Math.max(i,r.distanceToSquared(Ma))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&Yi('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){Yi("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,a=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new er(new Float32Array(4*r.count),4));const s=this.getAttribute("tangent"),o=[],c=[];for(let D=0;D<r.count;D++)o[D]=new qe,c[D]=new qe;const u=new qe,h=new qe,f=new qe,m=new Sn,g=new Sn,v=new Sn,x=new qe,_=new qe;function w(D,k,L){u.fromBufferAttribute(r,D),h.fromBufferAttribute(r,k),f.fromBufferAttribute(r,L),m.fromBufferAttribute(a,D),g.fromBufferAttribute(a,k),v.fromBufferAttribute(a,L),h.sub(u),f.sub(u),g.sub(m),v.sub(m);const $=1/(g.x*v.y-v.x*g.y);isFinite($)&&(x.copy(h).multiplyScalar(v.y).addScaledVector(f,-g.y).multiplyScalar($),_.copy(f).multiplyScalar(g.x).addScaledVector(h,-v.x).multiplyScalar($),o[D].add(x),o[k].add(x),o[L].add(x),c[D].add(_),c[k].add(_),c[L].add(_))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let D=0,k=S.length;D<k;++D){const L=S[D],$=L.start,B=L.count;for(let q=$,U=$+B;q<U;q+=3)w(e.getX(q+0),e.getX(q+1),e.getX(q+2))}const E=new qe,A=new qe,N=new qe,P=new qe;function R(D){N.fromBufferAttribute(i,D),P.copy(N);const k=o[D];E.copy(k),E.sub(N.multiplyScalar(N.dot(k))).normalize(),A.crossVectors(P,k);const $=A.dot(c[D])<0?-1:1;s.setXYZW(D,E.x,E.y,E.z,$)}for(let D=0,k=S.length;D<k;++D){const L=S[D],$=L.start,B=L.count;for(let q=$,U=$+B;q<U;q+=3)R(e.getX(q+0)),R(e.getX(q+1)),R(e.getX(q+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new er(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let m=0,g=r.count;m<g;m++)r.setXYZ(m,0,0,0);const i=new qe,a=new qe,s=new qe,o=new qe,c=new qe,u=new qe,h=new qe,f=new qe;if(e)for(let m=0,g=e.count;m<g;m+=3){const v=e.getX(m+0),x=e.getX(m+1),_=e.getX(m+2);i.fromBufferAttribute(n,v),a.fromBufferAttribute(n,x),s.fromBufferAttribute(n,_),h.subVectors(s,a),f.subVectors(i,a),h.cross(f),o.fromBufferAttribute(r,v),c.fromBufferAttribute(r,x),u.fromBufferAttribute(r,_),o.add(h),c.add(h),u.add(h),r.setXYZ(v,o.x,o.y,o.z),r.setXYZ(x,c.x,c.y,c.z),r.setXYZ(_,u.x,u.y,u.z)}else for(let m=0,g=n.count;m<g;m+=3)i.fromBufferAttribute(n,m+0),a.fromBufferAttribute(n,m+1),s.fromBufferAttribute(n,m+2),h.subVectors(s,a),f.subVectors(i,a),h.cross(f),r.setXYZ(m+0,h.x,h.y,h.z),r.setXYZ(m+1,h.x,h.y,h.z),r.setXYZ(m+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)Ma.fromBufferAttribute(e,n),Ma.normalize(),e.setXYZ(n,Ma.x,Ma.y,Ma.z)}toNonIndexed(){function e(o,c){const u=o.array,h=o.itemSize,f=o.normalized,m=new u.constructor(c.length*h);let g=0,v=0;for(let x=0,_=c.length;x<_;x++){o.isInterleavedBufferAttribute?g=c[x]*o.data.stride+o.offset:g=c[x]*h;for(let w=0;w<h;w++)m[v++]=u[g++]}return new er(m,h,f)}if(this.index===null)return kn("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new hl,r=this.index.array,i=this.attributes;for(const o in i){const c=i[o],u=e(c,r);n.setAttribute(o,u)}const a=this.morphAttributes;for(const o in a){const c=[],u=a[o];for(let h=0,f=u.length;h<f;h++){const m=u[h],g=e(m,r);c.push(g)}n.morphAttributes[o]=c}n.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,c=s.length;o<c;o++){const u=s[o];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const c in r){const u=r[c];e.data.attributes[c]=u.toJSON(e.data)}const i={};let a=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],h=[];for(let f=0,m=u.length;f<m;f++){const g=u[f];h.push(g.toJSON(e.data))}h.length>0&&(i[c]=h,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const u in i){const h=i[u];this.setAttribute(u,h.clone(n))}const a=e.morphAttributes;for(const u in a){const h=[],f=a[u];for(let m=0,g=f.length;m<g;m++)h.push(f[m].clone(n));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let u=0,h=s.length;u<h;u++){const f=s[u];this.addGroup(f.start,f.count,f.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const O5=new Pi,um=new M9,UE=new Ly,F5=new qe,VE=new qe,HE=new qe,GE=new qe,N4=new qe,WE=new qe,B5=new qe,qE=new qe;class zc extends Gs{constructor(e=new hl,n=new zR){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,a=r.morphAttributes.position,s=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(a&&o){WE.set(0,0,0);for(let c=0,u=a.length;c<u;c++){const h=o[c],f=a[c];h!==0&&(N4.fromBufferAttribute(f,e),s?WE.addScaledVector(N4,h):WE.addScaledVector(N4.sub(n),h))}n.add(WE)}return n}raycast(e,n){const r=this.geometry,i=this.material,a=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),UE.copy(r.boundingSphere),UE.applyMatrix4(a),um.copy(e.ray).recast(e.near),!(UE.containsPoint(um.origin)===!1&&(um.intersectSphere(UE,F5)===null||um.origin.distanceToSquared(F5)>(e.far-e.near)**2))&&(O5.copy(a).invert(),um.copy(e.ray).applyMatrix4(O5),!(r.boundingBox!==null&&um.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,um)))}_computeIntersections(e,n,r){let i;const a=this.geometry,s=this.material,o=a.index,c=a.attributes.position,u=a.attributes.uv,h=a.attributes.uv1,f=a.attributes.normal,m=a.groups,g=a.drawRange;if(o!==null)if(Array.isArray(s))for(let v=0,x=m.length;v<x;v++){const _=m[v],w=s[_.materialIndex],S=Math.max(_.start,g.start),E=Math.min(o.count,Math.min(_.start+_.count,g.start+g.count));for(let A=S,N=E;A<N;A+=3){const P=o.getX(A),R=o.getX(A+1),D=o.getX(A+2);i=KE(this,w,e,r,u,h,f,P,R,D),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=_.materialIndex,n.push(i))}}else{const v=Math.max(0,g.start),x=Math.min(o.count,g.start+g.count);for(let _=v,w=x;_<w;_+=3){const S=o.getX(_),E=o.getX(_+1),A=o.getX(_+2);i=KE(this,s,e,r,u,h,f,S,E,A),i&&(i.faceIndex=Math.floor(_/3),n.push(i))}}else if(c!==void 0)if(Array.isArray(s))for(let v=0,x=m.length;v<x;v++){const _=m[v],w=s[_.materialIndex],S=Math.max(_.start,g.start),E=Math.min(c.count,Math.min(_.start+_.count,g.start+g.count));for(let A=S,N=E;A<N;A+=3){const P=A,R=A+1,D=A+2;i=KE(this,w,e,r,u,h,f,P,R,D),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=_.materialIndex,n.push(i))}}else{const v=Math.max(0,g.start),x=Math.min(c.count,g.start+g.count);for(let _=v,w=x;_<w;_+=3){const S=_,E=_+1,A=_+2;i=KE(this,s,e,r,u,h,f,S,E,A),i&&(i.faceIndex=Math.floor(_/3),n.push(i))}}}}function xoe(t,e,n,r,i,a,s,o){let c;if(e.side===Mo?c=r.intersectTriangle(s,a,i,!0,o):c=r.intersectTriangle(i,a,s,e.side===Ff,o),c===null)return null;qE.copy(o),qE.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(qE);return u<n.near||u>n.far?null:{distance:u,point:qE.clone(),object:t}}function KE(t,e,n,r,i,a,s,o,c,u){t.getVertexPosition(o,VE),t.getVertexPosition(c,HE),t.getVertexPosition(u,GE);const h=xoe(t,e,n,r,VE,HE,GE,B5);if(h){const f=new qe;Nc.getBarycoord(B5,VE,HE,GE,f),i&&(h.uv=Nc.getInterpolatedAttribute(i,o,c,u,f,new Sn)),a&&(h.uv1=Nc.getInterpolatedAttribute(a,o,c,u,f,new Sn)),s&&(h.normal=Nc.getInterpolatedAttribute(s,o,c,u,f,new qe),h.normal.dot(r.direction)>0&&h.normal.multiplyScalar(-1));const m={a:o,b:c,c:u,normal:new qe,materialIndex:0};Nc.getNormal(VE,HE,GE,m.normal),h.face=m,h.barycoord=f}return h}class X_ extends hl{constructor(e=1,n=1,r=1,i=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:a,depthSegments:s};const o=this;i=Math.floor(i),a=Math.floor(a),s=Math.floor(s);const c=[],u=[],h=[],f=[];let m=0,g=0;v("z","y","x",-1,-1,r,n,e,s,a,0),v("z","y","x",1,-1,r,n,-e,s,a,1),v("x","z","y",1,1,e,r,n,i,s,2),v("x","z","y",1,-1,e,r,-n,i,s,3),v("x","y","z",1,-1,e,n,r,i,a,4),v("x","y","z",-1,-1,e,n,-r,i,a,5),this.setIndex(c),this.setAttribute("position",new Gd(u,3)),this.setAttribute("normal",new Gd(h,3)),this.setAttribute("uv",new Gd(f,2));function v(x,_,w,S,E,A,N,P,R,D,k){const L=A/R,$=N/D,B=A/2,q=N/2,U=P/2,J=R+1,O=D+1;let z=0,V=0;const H=new qe;for(let ee=0;ee<O;ee++){const Y=ee*$-q;for(let Z=0;Z<J;Z++){const K=Z*L-B;H[x]=K*S,H[_]=Y*E,H[w]=U,u.push(H.x,H.y,H.z),H[x]=0,H[_]=0,H[w]=P>0?1:-1,h.push(H.x,H.y,H.z),f.push(Z/R),f.push(1-ee/D),z+=1}}for(let ee=0;ee<D;ee++)for(let Y=0;Y<R;Y++){const Z=m+Y+J*ee,K=m+Y+J*(ee+1),X=m+(Y+1)+J*(ee+1),ne=m+(Y+1)+J*ee;c.push(Z,K,ne),c.push(K,X,ne),V+=6}o.addGroup(g,V,k),g+=V,m+=z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new X_(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function fy(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(kn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function zs(t){const e={};for(let n=0;n<t.length;n++){const r=fy(t[n]);for(const i in r)e[i]=r[i]}return e}function _oe(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function k9(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:pr.workingColorSpace}const ng={clone:fy,merge:zs};var woe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Soe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Fi extends K_{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=woe,this.fragmentShader=Soe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=fy(e.uniforms),this.uniformsGroups=_oe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?n.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?n.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?n.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?n.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?n.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?n.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?n.uniforms[i]={type:"m4",value:s.toArray()}:n.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class R9 extends Gs{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Pi,this.projectionMatrix=new Pi,this.projectionMatrixInverse=new Pi,this.coordinateSystem=Lu,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const df=new qe,z5=new Sn,U5=new Sn;class Us extends R9{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=oD*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(c4*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return oD*2*Math.atan(Math.tan(c4*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){df.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(df.x,df.y).multiplyScalar(-e/df.z),df.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(df.x,df.y).multiplyScalar(-e/df.z)}getViewSize(e,n){return this.getViewBounds(e,z5,U5),n.subVectors(U5,z5)}setViewOffset(e,n,r,i,a,s){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(c4*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,a=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const c=s.fullWidth,u=s.fullHeight;a+=s.offsetX*i/c,n-=s.offsetY*r/u,i*=s.width/c,r*=s.height/u}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,n,n-r,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const mv=-90,gv=1;class Eoe extends Gs{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Us(mv,gv,e,n);i.layers=this.layers,this.add(i);const a=new Us(mv,gv,e,n);a.layers=this.layers,this.add(a);const s=new Us(mv,gv,e,n);s.layers=this.layers,this.add(s);const o=new Us(mv,gv,e,n);o.layers=this.layers,this.add(o);const c=new Us(mv,gv,e,n);c.layers=this.layers,this.add(c);const u=new Us(mv,gv,e,n);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,a,s,o,c]=n;for(const u of n)this.remove(u);if(e===Lu)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===R3)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of n)this.add(u),u.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,c,u,h]=this.children,f=e.getRenderTarget(),m=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const x=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,a),e.setRenderTarget(r,1,i),e.render(n,s),e.setRenderTarget(r,2,i),e.render(n,o),e.setRenderTarget(r,3,i),e.render(n,c),e.setRenderTarget(r,4,i),e.render(n,u),r.texture.generateMipmaps=x,e.setRenderTarget(r,5,i),e.render(n,h),e.setRenderTarget(f,m,g),e.xr.enabled=v,r.texture.needsPMREMUpdate=!0}}class I9 extends _s{constructor(e=[],n=uy,r,i,a,s,o,c,u,h){super(e,n,r,i,a,s,o,c,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Coe extends sl{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new I9(i),this._setTextureOptions(n),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new X_(5,5,5),a=new Fi({name:"CubemapFromEquirect",uniforms:fy(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Mo,blending:Oc});a.uniforms.tEquirect.value=n;const s=new zc(i,a),o=n.minFilter;return n.minFilter===jm&&(n.minFilter=ys),new Eoe(1,10,this).update(e,s),n.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,n=!0,r=!0,i=!0){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(n,r,i);e.setRenderTarget(a)}}class XE extends Gs{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Toe={type:"move"};class D4{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new XE,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new XE,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new qe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new qe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new XE,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new qe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new qe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,a=null,s=null;const o=this._targetRay,c=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(const x of e.hand.values()){const _=n.getJointPose(x,r),w=this._getHandJoint(u,x);_!==null&&(w.matrix.fromArray(_.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=_.radius),w.visible=_!==null}const h=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],m=h.position.distanceTo(f.position),g=.02,v=.005;u.inputState.pinching&&m>g+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&m<=g-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(a=n.getPose(e.gripSpace,r),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1));o!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&a!==null&&(i=a),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Toe)))}return o!==null&&(o.visible=i!==null),c!==null&&(c.visible=a!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new XE;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class UR{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new or(e),this.near=n,this.far=r}clone(){return new UR(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class z2 extends Gs{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Jd,this.environmentIntensity=1,this.environmentRotation=new Jd,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class VR extends _s{constructor(e=null,n=1,r=1,i,a,s,o,c,u=Hs,h=Hs,f,m){super(null,s,o,c,u,h,i,a,f,m),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Dd extends er{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const vv=new Pi,V5=new Pi,YE=[],H5=new xg,Moe=new Pi,Qx=new zc,e1=new Ly;class Aoe extends zc{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Dd(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,Moe)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new xg),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,vv),H5.copy(e.boundingBox).applyMatrix4(vv),this.boundingBox.union(H5)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ly),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,vv),e1.copy(e.boundingSphere).applyMatrix4(vv),this.boundingSphere.union(e1)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const r=n.morphTargetInfluences,i=this.morphTexture.source.data.data,a=r.length+1,s=e*a+1;for(let o=0;o<r.length;o++)r[o]=i[s+o]}raycast(e,n){const r=this.matrixWorld,i=this.count;if(Qx.geometry=this.geometry,Qx.material=this.material,Qx.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),e1.copy(this.boundingSphere),e1.applyMatrix4(r),e.ray.intersectsSphere(e1)!==!1))for(let a=0;a<i;a++){this.getMatrixAt(a,vv),V5.multiplyMatrices(r,vv),Qx.matrixWorld=V5,Qx.raycast(e,YE);for(let s=0,o=YE.length;s<o;s++){const c=YE[s];c.instanceId=a,c.object=this,n.push(c)}YE.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Dd(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const r=n.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new VR(new Float32Array(i*this.count),i,this.count,$R,Rc));const a=this.morphTexture.source.data.data;let s=0;for(let u=0;u<r.length;u++)s+=r[u];const o=this.geometry.morphTargetsRelative?1:1-s,c=i*e;a[c]=o,a.set(r,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const k4=new qe,Poe=new qe,Noe=new $n;class Sm{constructor(e=new qe(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=k4.subVectors(r,n).cross(Poe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(k4),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:n.copy(e.start).addScaledVector(r,a)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||Noe.getNormalMatrix(e),i=this.coplanarPoint(k4).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const dm=new Ly,Doe=new Sn(.5,.5),ZE=new qe;class $9{constructor(e=new Sm,n=new Sm,r=new Sm,i=new Sm,a=new Sm,s=new Sm){this.planes=[e,n,r,i,a,s]}set(e,n,r,i,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(n),o[2].copy(r),o[3].copy(i),o[4].copy(a),o[5].copy(s),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=Lu,r=!1){const i=this.planes,a=e.elements,s=a[0],o=a[1],c=a[2],u=a[3],h=a[4],f=a[5],m=a[6],g=a[7],v=a[8],x=a[9],_=a[10],w=a[11],S=a[12],E=a[13],A=a[14],N=a[15];if(i[0].setComponents(u-s,g-h,w-v,N-S).normalize(),i[1].setComponents(u+s,g+h,w+v,N+S).normalize(),i[2].setComponents(u+o,g+f,w+x,N+E).normalize(),i[3].setComponents(u-o,g-f,w-x,N-E).normalize(),r)i[4].setComponents(c,m,_,A).normalize(),i[5].setComponents(u-c,g-m,w-_,N-A).normalize();else if(i[4].setComponents(u-c,g-m,w-_,N-A).normalize(),n===Lu)i[5].setComponents(u+c,g+m,w+_,N+A).normalize();else if(n===R3)i[5].setComponents(c,m,_,A).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),dm.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),dm.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(dm)}intersectsSprite(e){dm.center.set(0,0,0);const n=Doe.distanceTo(e.center);return dm.radius=.7071067811865476+n,dm.applyMatrix4(e.matrixWorld),this.intersectsSphere(dm)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(ZE.x=i.normal.x>0?e.max.x:e.min.x,ZE.y=i.normal.y>0?e.max.y:e.min.y,ZE.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(ZE)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class koe extends K_{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new or(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const G5=new Pi,lD=new M9,JE=new Ly,QE=new qe;class HR extends Gs{constructor(e=new hl,n=new koe){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),JE.copy(r.boundingSphere),JE.applyMatrix4(i),JE.radius+=a,e.ray.intersectsSphere(JE)===!1)return;G5.copy(i).invert(),lD.copy(e.ray).applyMatrix4(G5);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,u=r.index,f=r.attributes.position;if(u!==null){const m=Math.max(0,s.start),g=Math.min(u.count,s.start+s.count);for(let v=m,x=g;v<x;v++){const _=u.getX(v);QE.fromBufferAttribute(f,_),W5(QE,_,c,i,e,n,this)}}else{const m=Math.max(0,s.start),g=Math.min(f.count,s.start+s.count);for(let v=m,x=g;v<x;v++)QE.fromBufferAttribute(f,v),W5(QE,v,c,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function W5(t,e,n,r,i,a,s){const o=lD.distanceSqToPoint(t);if(o<n){const c=new qe;lD.closestPointToPoint(t,c),c.applyMatrix4(r);const u=i.ray.origin.distanceTo(c);if(u<i.near||u>i.far)return;a.push({distance:u,distanceToRay:Math.sqrt(o),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}class j9 extends _s{constructor(e,n,r,i,a,s,o,c,u){super(e,n,r,i,a,s,o,c,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class L9 extends _s{constructor(e,n,r=tg,i,a,s,o=Hs,c=Hs,u,h=o_,f=1){if(h!==o_&&h!==l_)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const m={width:e,height:n,depth:f};super(m,i,a,s,o,c,h,r,u),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new BR(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class O9 extends _s{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Y_ extends hl{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const a=e/2,s=n/2,o=Math.floor(r),c=Math.floor(i),u=o+1,h=c+1,f=e/o,m=n/c,g=[],v=[],x=[],_=[];for(let w=0;w<h;w++){const S=w*m-s;for(let E=0;E<u;E++){const A=E*f-a;v.push(A,-S,0),x.push(0,0,1),_.push(E/o),_.push(1-w/c)}}for(let w=0;w<c;w++)for(let S=0;S<o;S++){const E=S+u*w,A=S+u*(w+1),N=S+1+u*(w+1),P=S+1+u*w;g.push(E,A,P),g.push(A,N,P)}this.setIndex(g),this.setAttribute("position",new Gd(v,3)),this.setAttribute("normal",new Gd(x,3)),this.setAttribute("uv",new Gd(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Y_(e.width,e.height,e.widthSegments,e.heightSegments)}}class Roe extends Fi{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Ioe extends K_{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Hse,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class $oe extends K_{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class F9 extends R9{constructor(e=-1,n=1,r=1,i=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=r-e,s=r+e,o=i+n,c=i-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,s=a+u*this.view.width,o-=h*this.view.offsetY,c=o-h*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class joe extends Us{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class Z_{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=performance.now();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function q5(t,e,n,r){const i=Loe(r);switch(n){case w9:return t*e;case $R:return t*e/i.components*i.byteLength;case jR:return t*e/i.components*i.byteLength;case LR:return t*e*2/i.components*i.byteLength;case OR:return t*e*2/i.components*i.byteLength;case S9:return t*e*3/i.components*i.byteLength;case Ol:return t*e*4/i.components*i.byteLength;case FR:return t*e*4/i.components*i.byteLength;case i3:case a3:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case s3:case o3:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case IN:case jN:return Math.max(t,16)*Math.max(e,8)/4;case RN:case $N:return Math.max(t,8)*Math.max(e,8)/2;case LN:case ON:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case FN:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case BN:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case zN:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case UN:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case VN:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case HN:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case GN:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case WN:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case qN:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case KN:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case XN:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case YN:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case ZN:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case JN:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case QN:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case eD:case tD:case nD:return Math.ceil(t/4)*Math.ceil(e/4)*16;case rD:case iD:return Math.ceil(t/4)*Math.ceil(e/4)*8;case aD:case sD:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function Loe(t){switch(t){case Zd:case y9:return{byteLength:1,components:1};case a_:case b9:case Bl:return{byteLength:2,components:1};case RR:case IR:return{byteLength:2,components:4};case tg:case kR:case Rc:return{byteLength:4,components:1};case x9:case _9:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:DR}}));typeof window<"u"&&(window.__THREE__?kn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=DR);function B9(){let t=null,e=!1,n=null,r=null;function i(a,s){n(a,s),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(a){n=a},setContext:function(a){t=a}}}function Ooe(t){const e=new WeakMap;function n(o,c){const u=o.array,h=o.usage,f=u.byteLength,m=t.createBuffer();t.bindBuffer(c,m),t.bufferData(c,u,h),o.onUploadCallback();let g;if(u instanceof Float32Array)g=t.FLOAT;else if(typeof Float16Array<"u"&&u instanceof Float16Array)g=t.HALF_FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?g=t.HALF_FLOAT:g=t.UNSIGNED_SHORT;else if(u instanceof Int16Array)g=t.SHORT;else if(u instanceof Uint32Array)g=t.UNSIGNED_INT;else if(u instanceof Int32Array)g=t.INT;else if(u instanceof Int8Array)g=t.BYTE;else if(u instanceof Uint8Array)g=t.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)g=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:m,type:g,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:f}}function r(o,c,u){const h=c.array,f=c.updateRanges;if(t.bindBuffer(u,o),f.length===0)t.bufferSubData(u,0,h);else{f.sort((g,v)=>g.start-v.start);let m=0;for(let g=1;g<f.length;g++){const v=f[m],x=f[g];x.start<=v.start+v.count+1?v.count=Math.max(v.count,x.start+x.count-v.start):(++m,f[m]=x)}f.length=m+1;for(let g=0,v=f.length;g<v;g++){const x=f[g];t.bufferSubData(u,x.start*h.BYTES_PER_ELEMENT,h,x.start,x.count)}c.clearUpdateRanges()}c.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function a(o){o.isInterleavedBufferAttribute&&(o=o.data);const c=e.get(o);c&&(t.deleteBuffer(c.buffer),e.delete(o))}function s(o,c){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const h=e.get(o);(!h||h.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const u=e.get(o);if(u===void 0)e.set(o,n(o,c));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(u.buffer,o,c),u.version=o.version}}return{get:i,remove:a,update:s}}var Foe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Boe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,zoe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Uoe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Voe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Hoe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Goe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Woe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,qoe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Koe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Xoe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Yoe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Zoe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Joe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Qoe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,ele=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,tle=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,nle=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,rle=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,ile=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ale=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,sle=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,ole=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,lle=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cle=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,ule=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,dle=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,hle=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,fle=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,ple=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,mle="gl_FragColor = linearToOutputTexel( gl_FragColor );",gle=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,vle=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,yle=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,ble=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,xle=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,_le=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,wle=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Sle=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Ele=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Cle=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Tle=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Mle=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Ale=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Ple=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Nle=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Dle=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,kle=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Rle=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Ile=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,$le=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,jle=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Lle=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 uv = vec2( roughness, dotNV );
	return texture2D( dfgLUT, uv ).rg;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNV * dotNV), 0.0, dotNV), material.roughness );
	vec2 dfgL = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNL * dotNL), 0.0, dotNL), material.roughness );
	vec3 FssEss_V = material.specularColor * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColor * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColor + ( 1.0 - material.specularColor ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Ole=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Fle=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Ble=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,zle=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Ule=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Vle=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Hle=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Gle=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Wle=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,qle=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Kle=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Xle=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Yle=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Zle=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Jle=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Qle=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,ece=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,tce=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,nce=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,rce=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,ice=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ace=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,sce=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,oce=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,lce=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,cce=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,uce=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,dce=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,hce=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,fce=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,pce=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,mce=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,gce=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,vce=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,yce=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,bce=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,xce=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,_ce=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,wce=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Sce=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Ece=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Cce=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Tce=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Mce=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Ace=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Pce=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Nce=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Dce=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,kce=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Rce=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Ice=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,$ce=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,jce=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Lce=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Oce=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Fce=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Bce=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,zce=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Uce=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Vce=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Hce=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Gce=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Wce=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,qce=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Kce=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Xce=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Yce=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Zce=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Jce=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Qce=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eue=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tue=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nue=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,rue=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iue=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,aue=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,sue=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oue=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lue=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,cue=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uue=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,due=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hue=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fue=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,pue=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mue=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,gue=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,vue=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Un={alphahash_fragment:Foe,alphahash_pars_fragment:Boe,alphamap_fragment:zoe,alphamap_pars_fragment:Uoe,alphatest_fragment:Voe,alphatest_pars_fragment:Hoe,aomap_fragment:Goe,aomap_pars_fragment:Woe,batching_pars_vertex:qoe,batching_vertex:Koe,begin_vertex:Xoe,beginnormal_vertex:Yoe,bsdfs:Zoe,iridescence_fragment:Joe,bumpmap_pars_fragment:Qoe,clipping_planes_fragment:ele,clipping_planes_pars_fragment:tle,clipping_planes_pars_vertex:nle,clipping_planes_vertex:rle,color_fragment:ile,color_pars_fragment:ale,color_pars_vertex:sle,color_vertex:ole,common:lle,cube_uv_reflection_fragment:cle,defaultnormal_vertex:ule,displacementmap_pars_vertex:dle,displacementmap_vertex:hle,emissivemap_fragment:fle,emissivemap_pars_fragment:ple,colorspace_fragment:mle,colorspace_pars_fragment:gle,envmap_fragment:vle,envmap_common_pars_fragment:yle,envmap_pars_fragment:ble,envmap_pars_vertex:xle,envmap_physical_pars_fragment:Dle,envmap_vertex:_le,fog_vertex:wle,fog_pars_vertex:Sle,fog_fragment:Ele,fog_pars_fragment:Cle,gradientmap_pars_fragment:Tle,lightmap_pars_fragment:Mle,lights_lambert_fragment:Ale,lights_lambert_pars_fragment:Ple,lights_pars_begin:Nle,lights_toon_fragment:kle,lights_toon_pars_fragment:Rle,lights_phong_fragment:Ile,lights_phong_pars_fragment:$le,lights_physical_fragment:jle,lights_physical_pars_fragment:Lle,lights_fragment_begin:Ole,lights_fragment_maps:Fle,lights_fragment_end:Ble,logdepthbuf_fragment:zle,logdepthbuf_pars_fragment:Ule,logdepthbuf_pars_vertex:Vle,logdepthbuf_vertex:Hle,map_fragment:Gle,map_pars_fragment:Wle,map_particle_fragment:qle,map_particle_pars_fragment:Kle,metalnessmap_fragment:Xle,metalnessmap_pars_fragment:Yle,morphinstance_vertex:Zle,morphcolor_vertex:Jle,morphnormal_vertex:Qle,morphtarget_pars_vertex:ece,morphtarget_vertex:tce,normal_fragment_begin:nce,normal_fragment_maps:rce,normal_pars_fragment:ice,normal_pars_vertex:ace,normal_vertex:sce,normalmap_pars_fragment:oce,clearcoat_normal_fragment_begin:lce,clearcoat_normal_fragment_maps:cce,clearcoat_pars_fragment:uce,iridescence_pars_fragment:dce,opaque_fragment:hce,packing:fce,premultiplied_alpha_fragment:pce,project_vertex:mce,dithering_fragment:gce,dithering_pars_fragment:vce,roughnessmap_fragment:yce,roughnessmap_pars_fragment:bce,shadowmap_pars_fragment:xce,shadowmap_pars_vertex:_ce,shadowmap_vertex:wce,shadowmask_pars_fragment:Sce,skinbase_vertex:Ece,skinning_pars_vertex:Cce,skinning_vertex:Tce,skinnormal_vertex:Mce,specularmap_fragment:Ace,specularmap_pars_fragment:Pce,tonemapping_fragment:Nce,tonemapping_pars_fragment:Dce,transmission_fragment:kce,transmission_pars_fragment:Rce,uv_pars_fragment:Ice,uv_pars_vertex:$ce,uv_vertex:jce,worldpos_vertex:Lce,background_vert:Oce,background_frag:Fce,backgroundCube_vert:Bce,backgroundCube_frag:zce,cube_vert:Uce,cube_frag:Vce,depth_vert:Hce,depth_frag:Gce,distanceRGBA_vert:Wce,distanceRGBA_frag:qce,equirect_vert:Kce,equirect_frag:Xce,linedashed_vert:Yce,linedashed_frag:Zce,meshbasic_vert:Jce,meshbasic_frag:Qce,meshlambert_vert:eue,meshlambert_frag:tue,meshmatcap_vert:nue,meshmatcap_frag:rue,meshnormal_vert:iue,meshnormal_frag:aue,meshphong_vert:sue,meshphong_frag:oue,meshphysical_vert:lue,meshphysical_frag:cue,meshtoon_vert:uue,meshtoon_frag:due,points_vert:hue,points_frag:fue,shadow_vert:pue,shadow_frag:mue,sprite_vert:gue,sprite_frag:vue},Dt={common:{diffuse:{value:new or(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new $n},alphaMap:{value:null},alphaMapTransform:{value:new $n},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new $n}},envmap:{envMap:{value:null},envMapRotation:{value:new $n},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new $n}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new $n}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new $n},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new $n},normalScale:{value:new Sn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new $n},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new $n}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new $n}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new $n}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new or(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new or(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new $n},alphaTest:{value:0},uvTransform:{value:new $n}},sprite:{diffuse:{value:new or(16777215)},opacity:{value:1},center:{value:new Sn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new $n},alphaMap:{value:null},alphaMapTransform:{value:new $n},alphaTest:{value:0}}},ku={basic:{uniforms:zs([Dt.common,Dt.specularmap,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.fog]),vertexShader:Un.meshbasic_vert,fragmentShader:Un.meshbasic_frag},lambert:{uniforms:zs([Dt.common,Dt.specularmap,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.fog,Dt.lights,{emissive:{value:new or(0)}}]),vertexShader:Un.meshlambert_vert,fragmentShader:Un.meshlambert_frag},phong:{uniforms:zs([Dt.common,Dt.specularmap,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.fog,Dt.lights,{emissive:{value:new or(0)},specular:{value:new or(1118481)},shininess:{value:30}}]),vertexShader:Un.meshphong_vert,fragmentShader:Un.meshphong_frag},standard:{uniforms:zs([Dt.common,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.roughnessmap,Dt.metalnessmap,Dt.fog,Dt.lights,{emissive:{value:new or(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Un.meshphysical_vert,fragmentShader:Un.meshphysical_frag},toon:{uniforms:zs([Dt.common,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.gradientmap,Dt.fog,Dt.lights,{emissive:{value:new or(0)}}]),vertexShader:Un.meshtoon_vert,fragmentShader:Un.meshtoon_frag},matcap:{uniforms:zs([Dt.common,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.fog,{matcap:{value:null}}]),vertexShader:Un.meshmatcap_vert,fragmentShader:Un.meshmatcap_frag},points:{uniforms:zs([Dt.points,Dt.fog]),vertexShader:Un.points_vert,fragmentShader:Un.points_frag},dashed:{uniforms:zs([Dt.common,Dt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Un.linedashed_vert,fragmentShader:Un.linedashed_frag},depth:{uniforms:zs([Dt.common,Dt.displacementmap]),vertexShader:Un.depth_vert,fragmentShader:Un.depth_frag},normal:{uniforms:zs([Dt.common,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,{opacity:{value:1}}]),vertexShader:Un.meshnormal_vert,fragmentShader:Un.meshnormal_frag},sprite:{uniforms:zs([Dt.sprite,Dt.fog]),vertexShader:Un.sprite_vert,fragmentShader:Un.sprite_frag},background:{uniforms:{uvTransform:{value:new $n},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Un.background_vert,fragmentShader:Un.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new $n}},vertexShader:Un.backgroundCube_vert,fragmentShader:Un.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Un.cube_vert,fragmentShader:Un.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Un.equirect_vert,fragmentShader:Un.equirect_frag},distanceRGBA:{uniforms:zs([Dt.common,Dt.displacementmap,{referencePosition:{value:new qe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Un.distanceRGBA_vert,fragmentShader:Un.distanceRGBA_frag},shadow:{uniforms:zs([Dt.lights,Dt.fog,{color:{value:new or(0)},opacity:{value:1}}]),vertexShader:Un.shadow_vert,fragmentShader:Un.shadow_frag}};ku.physical={uniforms:zs([ku.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new $n},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new $n},clearcoatNormalScale:{value:new Sn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new $n},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new $n},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new $n},sheen:{value:0},sheenColor:{value:new or(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new $n},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new $n},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new $n},transmissionSamplerSize:{value:new Sn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new $n},attenuationDistance:{value:0},attenuationColor:{value:new or(0)},specularColor:{value:new or(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new $n},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new $n},anisotropyVector:{value:new Sn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new $n}}]),vertexShader:Un.meshphysical_vert,fragmentShader:Un.meshphysical_frag};const eC={r:0,b:0,g:0},hm=new Jd,yue=new Pi;function bue(t,e,n,r,i,a,s){const o=new or(0);let c=a===!0?0:1,u,h,f=null,m=0,g=null;function v(E){let A=E.isScene===!0?E.background:null;return A&&A.isTexture&&(A=(E.backgroundBlurriness>0?n:e).get(A)),A}function x(E){let A=!1;const N=v(E);N===null?w(o,c):N&&N.isColor&&(w(N,1),A=!0);const P=t.xr.getEnvironmentBlendMode();P==="additive"?r.buffers.color.setClear(0,0,0,1,s):P==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(t.autoClear||A)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function _(E,A){const N=v(A);N&&(N.isCubeTexture||N.mapping===B2)?(h===void 0&&(h=new zc(new X_(1,1,1),new Fi({name:"BackgroundCubeMaterial",uniforms:fy(ku.backgroundCube.uniforms),vertexShader:ku.backgroundCube.vertexShader,fragmentShader:ku.backgroundCube.fragmentShader,side:Mo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(P,R,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),hm.copy(A.backgroundRotation),hm.x*=-1,hm.y*=-1,hm.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(hm.y*=-1,hm.z*=-1),h.material.uniforms.envMap.value=N,h.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=A.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(yue.makeRotationFromEuler(hm)),h.material.toneMapped=pr.getTransfer(N.colorSpace)!==Fr,(f!==N||m!==N.version||g!==t.toneMapping)&&(h.material.needsUpdate=!0,f=N,m=N.version,g=t.toneMapping),h.layers.enableAll(),E.unshift(h,h.geometry,h.material,0,0,null)):N&&N.isTexture&&(u===void 0&&(u=new zc(new Y_(2,2),new Fi({name:"BackgroundMaterial",uniforms:fy(ku.background.uniforms),vertexShader:ku.background.vertexShader,fragmentShader:ku.background.fragmentShader,side:Ff,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=N,u.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,u.material.toneMapped=pr.getTransfer(N.colorSpace)!==Fr,N.matrixAutoUpdate===!0&&N.updateMatrix(),u.material.uniforms.uvTransform.value.copy(N.matrix),(f!==N||m!==N.version||g!==t.toneMapping)&&(u.material.needsUpdate=!0,f=N,m=N.version,g=t.toneMapping),u.layers.enableAll(),E.unshift(u,u.geometry,u.material,0,0,null))}function w(E,A){E.getRGB(eC,k9(t)),r.buffers.color.setClear(eC.r,eC.g,eC.b,A,s)}function S(){h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return o},setClearColor:function(E,A=1){o.set(E),c=A,w(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(E){c=E,w(o,c)},render:x,addToRenderList:_,dispose:S}}function xue(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=m(null);let a=i,s=!1;function o(L,$,B,q,U){let J=!1;const O=f(q,B,$);a!==O&&(a=O,u(a.object)),J=g(L,q,B,U),J&&v(L,q,B,U),U!==null&&e.update(U,t.ELEMENT_ARRAY_BUFFER),(J||s)&&(s=!1,A(L,$,B,q),U!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(U).buffer))}function c(){return t.createVertexArray()}function u(L){return t.bindVertexArray(L)}function h(L){return t.deleteVertexArray(L)}function f(L,$,B){const q=B.wireframe===!0;let U=r[L.id];U===void 0&&(U={},r[L.id]=U);let J=U[$.id];J===void 0&&(J={},U[$.id]=J);let O=J[q];return O===void 0&&(O=m(c()),J[q]=O),O}function m(L){const $=[],B=[],q=[];for(let U=0;U<n;U++)$[U]=0,B[U]=0,q[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:B,attributeDivisors:q,object:L,attributes:{},index:null}}function g(L,$,B,q){const U=a.attributes,J=$.attributes;let O=0;const z=B.getAttributes();for(const V in z)if(z[V].location>=0){const ee=U[V];let Y=J[V];if(Y===void 0&&(V==="instanceMatrix"&&L.instanceMatrix&&(Y=L.instanceMatrix),V==="instanceColor"&&L.instanceColor&&(Y=L.instanceColor)),ee===void 0||ee.attribute!==Y||Y&&ee.data!==Y.data)return!0;O++}return a.attributesNum!==O||a.index!==q}function v(L,$,B,q){const U={},J=$.attributes;let O=0;const z=B.getAttributes();for(const V in z)if(z[V].location>=0){let ee=J[V];ee===void 0&&(V==="instanceMatrix"&&L.instanceMatrix&&(ee=L.instanceMatrix),V==="instanceColor"&&L.instanceColor&&(ee=L.instanceColor));const Y={};Y.attribute=ee,ee&&ee.data&&(Y.data=ee.data),U[V]=Y,O++}a.attributes=U,a.attributesNum=O,a.index=q}function x(){const L=a.newAttributes;for(let $=0,B=L.length;$<B;$++)L[$]=0}function _(L){w(L,0)}function w(L,$){const B=a.newAttributes,q=a.enabledAttributes,U=a.attributeDivisors;B[L]=1,q[L]===0&&(t.enableVertexAttribArray(L),q[L]=1),U[L]!==$&&(t.vertexAttribDivisor(L,$),U[L]=$)}function S(){const L=a.newAttributes,$=a.enabledAttributes;for(let B=0,q=$.length;B<q;B++)$[B]!==L[B]&&(t.disableVertexAttribArray(B),$[B]=0)}function E(L,$,B,q,U,J,O){O===!0?t.vertexAttribIPointer(L,$,B,U,J):t.vertexAttribPointer(L,$,B,q,U,J)}function A(L,$,B,q){x();const U=q.attributes,J=B.getAttributes(),O=$.defaultAttributeValues;for(const z in J){const V=J[z];if(V.location>=0){let H=U[z];if(H===void 0&&(z==="instanceMatrix"&&L.instanceMatrix&&(H=L.instanceMatrix),z==="instanceColor"&&L.instanceColor&&(H=L.instanceColor)),H!==void 0){const ee=H.normalized,Y=H.itemSize,Z=e.get(H);if(Z===void 0)continue;const K=Z.buffer,X=Z.type,ne=Z.bytesPerElement,G=X===t.INT||X===t.UNSIGNED_INT||H.gpuType===kR;if(H.isInterleavedBufferAttribute){const te=H.data,ae=te.stride,pe=H.offset;if(te.isInstancedInterleavedBuffer){for(let ye=0;ye<V.locationSize;ye++)w(V.location+ye,te.meshPerAttribute);L.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let ye=0;ye<V.locationSize;ye++)_(V.location+ye);t.bindBuffer(t.ARRAY_BUFFER,K);for(let ye=0;ye<V.locationSize;ye++)E(V.location+ye,Y/V.locationSize,X,ee,ae*ne,(pe+Y/V.locationSize*ye)*ne,G)}else{if(H.isInstancedBufferAttribute){for(let te=0;te<V.locationSize;te++)w(V.location+te,H.meshPerAttribute);L.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=H.meshPerAttribute*H.count)}else for(let te=0;te<V.locationSize;te++)_(V.location+te);t.bindBuffer(t.ARRAY_BUFFER,K);for(let te=0;te<V.locationSize;te++)E(V.location+te,Y/V.locationSize,X,ee,Y*ne,Y/V.locationSize*te*ne,G)}}else if(O!==void 0){const ee=O[z];if(ee!==void 0)switch(ee.length){case 2:t.vertexAttrib2fv(V.location,ee);break;case 3:t.vertexAttrib3fv(V.location,ee);break;case 4:t.vertexAttrib4fv(V.location,ee);break;default:t.vertexAttrib1fv(V.location,ee)}}}}S()}function N(){D();for(const L in r){const $=r[L];for(const B in $){const q=$[B];for(const U in q)h(q[U].object),delete q[U];delete $[B]}delete r[L]}}function P(L){if(r[L.id]===void 0)return;const $=r[L.id];for(const B in $){const q=$[B];for(const U in q)h(q[U].object),delete q[U];delete $[B]}delete r[L.id]}function R(L){for(const $ in r){const B=r[$];if(B[L.id]===void 0)continue;const q=B[L.id];for(const U in q)h(q[U].object),delete q[U];delete B[L.id]}}function D(){k(),s=!0,a!==i&&(a=i,u(a.object))}function k(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:D,resetDefaultState:k,dispose:N,releaseStatesOfGeometry:P,releaseStatesOfProgram:R,initAttributes:x,enableAttribute:_,disableUnusedAttributes:S}}function _ue(t,e,n){let r;function i(u){r=u}function a(u,h){t.drawArrays(r,u,h),n.update(h,r,1)}function s(u,h,f){f!==0&&(t.drawArraysInstanced(r,u,h,f),n.update(h,r,f))}function o(u,h,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,u,0,h,0,f);let g=0;for(let v=0;v<f;v++)g+=h[v];n.update(g,r,1)}function c(u,h,f,m){if(f===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let v=0;v<u.length;v++)s(u[v],h[v],m[v]);else{g.multiDrawArraysInstancedWEBGL(r,u,0,h,0,m,0,f);let v=0;for(let x=0;x<f;x++)v+=h[x]*m[x];n.update(v,r,1)}}this.setMode=i,this.render=a,this.renderInstances=s,this.renderMultiDraw=o,this.renderMultiDrawInstances=c}function wue(t,e,n,r){let i;function a(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(R){return!(R!==Ol&&r.convert(R)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(R){const D=R===Bl&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(R!==Zd&&r.convert(R)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&R!==Rc&&!D)}function c(R){if(R==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=n.precision!==void 0?n.precision:"highp";const h=c(u);h!==u&&(kn("WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const f=n.logarithmicDepthBuffer===!0,m=n.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),g=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),v=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=t.getParameter(t.MAX_TEXTURE_SIZE),_=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),w=t.getParameter(t.MAX_VERTEX_ATTRIBS),S=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),E=t.getParameter(t.MAX_VARYING_VECTORS),A=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),N=v>0,P=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:f,reversedDepthBuffer:m,maxTextures:g,maxVertexTextures:v,maxTextureSize:x,maxCubemapSize:_,maxAttributes:w,maxVertexUniforms:S,maxVaryings:E,maxFragmentUniforms:A,vertexTextures:N,maxSamples:P}}function Sue(t){const e=this;let n=null,r=0,i=!1,a=!1;const s=new Sm,o=new $n,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(f,m){const g=f.length!==0||m||r!==0||i;return i=m,r=f.length,g},this.beginShadows=function(){a=!0,h(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(f,m){n=h(f,m,0)},this.setState=function(f,m,g){const v=f.clippingPlanes,x=f.clipIntersection,_=f.clipShadows,w=t.get(f);if(!i||v===null||v.length===0||a&&!_)a?h(null):u();else{const S=a?0:r,E=S*4;let A=w.clippingState||null;c.value=A,A=h(v,m,E,g);for(let N=0;N!==E;++N)A[N]=n[N];w.clippingState=A,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=S}};function u(){c.value!==n&&(c.value=n,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function h(f,m,g,v){const x=f!==null?f.length:0;let _=null;if(x!==0){if(_=c.value,v!==!0||_===null){const w=g+x*4,S=m.matrixWorldInverse;o.getNormalMatrix(S),(_===null||_.length<w)&&(_=new Float32Array(w));for(let E=0,A=g;E!==x;++E,A+=4)s.copy(f[E]).applyMatrix4(S,o),s.normal.toArray(_,A),_[A+3]=s.constant}c.value=_,c.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,_}}function Eue(t){let e=new WeakMap;function n(s,o){return o===PN?s.mapping=uy:o===NN&&(s.mapping=dy),s}function r(s){if(s&&s.isTexture){const o=s.mapping;if(o===PN||o===NN)if(e.has(s)){const c=e.get(s).texture;return n(c,s.mapping)}else{const c=s.image;if(c&&c.height>0){const u=new Coe(c.height);return u.fromEquirectangularTexture(t,s),e.set(s,u),s.addEventListener("dispose",i),n(u.texture,s.mapping)}else return null}}return s}function i(s){const o=s.target;o.removeEventListener("dispose",i);const c=e.get(o);c!==void 0&&(e.delete(o),c.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}const Cf=4,K5=[.125,.215,.35,.446,.526,.582],Pm=20,Cue=256,t1=new F9,X5=new or;let R4=null,I4=0,$4=0,j4=!1;const Tue=new qe;class Y5{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,n=0,r=.1,i=100,a={}){const{size:s=256,position:o=Tue}=a;R4=this._renderer.getRenderTarget(),I4=this._renderer.getActiveCubeFace(),$4=this._renderer.getActiveMipmapLevel(),j4=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,r,i,c,o),n>0&&this._blur(c,0,0,n),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Q5(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=J5(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(R4,I4,$4),this._renderer.xr.enabled=j4,e.scissorTest=!1,yv(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===uy||e.mapping===dy?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),R4=this._renderer.getRenderTarget(),I4=this._renderer.getActiveCubeFace(),$4=this._renderer.getActiveMipmapLevel(),j4=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:ys,minFilter:ys,generateMipmaps:!1,type:Bl,format:Ol,colorSpace:hy,depthBuffer:!1},i=Z5(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Z5(e,n,r);const{_lodMax:a}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=Mue(a)),this._blurMaterial=Pue(a,e,n),this._ggxMaterial=Aue(a,e,n)}return i}_compileMaterial(e){const n=new zc(new hl,e);this._renderer.compile(n,t1)}_sceneToCubeUV(e,n,r,i,a){const c=new Us(90,1,n,r),u=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],f=this._renderer,m=f.autoClear,g=f.toneMapping;f.getClearColor(X5),f.toneMapping=kf,f.autoClear=!1,f.state.buffers.depth.getReversed()&&(f.setRenderTarget(i),f.clearDepth(),f.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new zc(new X_,new zR({name:"PMREM.Background",side:Mo,depthWrite:!1,depthTest:!1})));const x=this._backgroundBox,_=x.material;let w=!1;const S=e.background;S?S.isColor&&(_.color.copy(S),e.background=null,w=!0):(_.color.copy(X5),w=!0);for(let E=0;E<6;E++){const A=E%3;A===0?(c.up.set(0,u[E],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x+h[E],a.y,a.z)):A===1?(c.up.set(0,0,u[E]),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y+h[E],a.z)):(c.up.set(0,u[E],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y,a.z+h[E]));const N=this._cubeSize;yv(i,A*N,E>2?N:0,N,N),f.setRenderTarget(i),w&&f.render(x,c),f.render(e,c)}f.toneMapping=g,f.autoClear=m,e.background=S}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===uy||e.mapping===dy;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=Q5()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=J5());const a=i?this._cubemapMaterial:this._equirectMaterial,s=this._lodMeshes[0];s.material=a;const o=a.uniforms;o.envMap.value=e;const c=this._cubeSize;yv(n,0,0,3*c,2*c),r.setRenderTarget(n),r.render(s,t1)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodMeshes.length;for(let a=1;a<i;a++)this._applyGGXFilter(e,a-1,a);n.autoClear=r}_applyGGXFilter(e,n,r){const i=this._renderer,a=this._pingPongRenderTarget,s=this._ggxMaterial,o=this._lodMeshes[r];o.material=s;const c=s.uniforms,u=r/(this._lodMeshes.length-1),h=n/(this._lodMeshes.length-1),f=Math.sqrt(u*u-h*h),m=.05+u*.95,g=f*m,{_lodMax:v}=this,x=this._sizeLods[r],_=3*x*(r>v-Cf?r-v+Cf:0),w=4*(this._cubeSize-x);c.envMap.value=e.texture,c.roughness.value=g,c.mipInt.value=v-n,yv(a,_,w,3*x,2*x),i.setRenderTarget(a),i.render(o,t1),c.envMap.value=a.texture,c.roughness.value=0,c.mipInt.value=v-r,yv(e,_,w,3*x,2*x),i.setRenderTarget(e),i.render(o,t1)}_blur(e,n,r,i,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,n,r,i,"latitudinal",a),this._halfBlur(s,e,r,r,i,"longitudinal",a)}_halfBlur(e,n,r,i,a,s,o){const c=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&Yi("blur direction must be either latitudinal or longitudinal!");const h=3,f=this._lodMeshes[i];f.material=u;const m=u.uniforms,g=this._sizeLods[r]-1,v=isFinite(a)?Math.PI/(2*g):2*Math.PI/(2*Pm-1),x=a/v,_=isFinite(a)?1+Math.floor(h*x):Pm;_>Pm&&kn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${Pm}`);const w=[];let S=0;for(let R=0;R<Pm;++R){const D=R/x,k=Math.exp(-D*D/2);w.push(k),R===0?S+=k:R<_&&(S+=2*k)}for(let R=0;R<w.length;R++)w[R]=w[R]/S;m.envMap.value=e.texture,m.samples.value=_,m.weights.value=w,m.latitudinal.value=s==="latitudinal",o&&(m.poleAxis.value=o);const{_lodMax:E}=this;m.dTheta.value=v,m.mipInt.value=E-r;const A=this._sizeLods[i],N=3*A*(i>E-Cf?i-E+Cf:0),P=4*(this._cubeSize-A);yv(n,N,P,3*A,2*A),c.setRenderTarget(n),c.render(f,t1)}}function Mue(t){const e=[],n=[],r=[];let i=t;const a=t-Cf+1+K5.length;for(let s=0;s<a;s++){const o=Math.pow(2,i);e.push(o);let c=1/o;s>t-Cf?c=K5[s-t+Cf-1]:s===0&&(c=0),n.push(c);const u=1/(o-2),h=-u,f=1+u,m=[h,h,f,h,f,f,h,h,f,f,h,f],g=6,v=6,x=3,_=2,w=1,S=new Float32Array(x*v*g),E=new Float32Array(_*v*g),A=new Float32Array(w*v*g);for(let P=0;P<g;P++){const R=P%3*2/3-1,D=P>2?0:-1,k=[R,D,0,R+2/3,D,0,R+2/3,D+1,0,R,D,0,R+2/3,D+1,0,R,D+1,0];S.set(k,x*v*P),E.set(m,_*v*P);const L=[P,P,P,P,P,P];A.set(L,w*v*P)}const N=new hl;N.setAttribute("position",new er(S,x)),N.setAttribute("uv",new er(E,_)),N.setAttribute("faceIndex",new er(A,w)),r.push(new zc(N,null)),i>Cf&&i--}return{lodMeshes:r,sizeLods:e,sigmas:n}}function Z5(t,e,n){const r=new sl(t,e,n);return r.texture.mapping=B2,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function yv(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Aue(t,e,n){return new Fi({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:Cue,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:U2(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Oc,depthTest:!1,depthWrite:!1})}function Pue(t,e,n){const r=new Float32Array(Pm),i=new qe(0,1,0);return new Fi({name:"SphericalGaussianBlur",defines:{n:Pm,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:U2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Oc,depthTest:!1,depthWrite:!1})}function J5(){return new Fi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:U2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Oc,depthTest:!1,depthWrite:!1})}function Q5(){return new Fi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:U2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Oc,depthTest:!1,depthWrite:!1})}function U2(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Nue(t){let e=new WeakMap,n=null;function r(o){if(o&&o.isTexture){const c=o.mapping,u=c===PN||c===NN,h=c===uy||c===dy;if(u||h){let f=e.get(o);const m=f!==void 0?f.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==m)return n===null&&(n=new Y5(t)),f=u?n.fromEquirectangular(o,f):n.fromCubemap(o,f),f.texture.pmremVersion=o.pmremVersion,e.set(o,f),f.texture;if(f!==void 0)return f.texture;{const g=o.image;return u&&g&&g.height>0||h&&g&&i(g)?(n===null&&(n=new Y5(t)),f=u?n.fromEquirectangular(o):n.fromCubemap(o),f.texture.pmremVersion=o.pmremVersion,e.set(o,f),o.addEventListener("dispose",a),f.texture):null}}}return o}function i(o){let c=0;const u=6;for(let h=0;h<u;h++)o[h]!==void 0&&c++;return c===u}function a(o){const c=o.target;c.removeEventListener("dispose",a);const u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function s(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:s}}function Due(t){const e={};function n(r){if(e[r]!==void 0)return e[r];const i=t.getExtension(r);return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&c_("WebGLRenderer: "+r+" extension not supported."),i}}}function kue(t,e,n,r){const i={},a=new WeakMap;function s(f){const m=f.target;m.index!==null&&e.remove(m.index);for(const v in m.attributes)e.remove(m.attributes[v]);m.removeEventListener("dispose",s),delete i[m.id];const g=a.get(m);g&&(e.remove(g),a.delete(m)),r.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,n.memory.geometries--}function o(f,m){return i[m.id]===!0||(m.addEventListener("dispose",s),i[m.id]=!0,n.memory.geometries++),m}function c(f){const m=f.attributes;for(const g in m)e.update(m[g],t.ARRAY_BUFFER)}function u(f){const m=[],g=f.index,v=f.attributes.position;let x=0;if(g!==null){const S=g.array;x=g.version;for(let E=0,A=S.length;E<A;E+=3){const N=S[E+0],P=S[E+1],R=S[E+2];m.push(N,P,P,R,R,N)}}else if(v!==void 0){const S=v.array;x=v.version;for(let E=0,A=S.length/3-1;E<A;E+=3){const N=E+0,P=E+1,R=E+2;m.push(N,P,P,R,R,N)}}else return;const _=new(C9(m)?D9:N9)(m,1);_.version=x;const w=a.get(f);w&&e.remove(w),a.set(f,_)}function h(f){const m=a.get(f);if(m){const g=f.index;g!==null&&m.version<g.version&&u(f)}else u(f);return a.get(f)}return{get:o,update:c,getWireframeAttribute:h}}function Rue(t,e,n){let r;function i(m){r=m}let a,s;function o(m){a=m.type,s=m.bytesPerElement}function c(m,g){t.drawElements(r,g,a,m*s),n.update(g,r,1)}function u(m,g,v){v!==0&&(t.drawElementsInstanced(r,g,a,m*s,v),n.update(g,r,v))}function h(m,g,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,g,0,a,m,0,v);let _=0;for(let w=0;w<v;w++)_+=g[w];n.update(_,r,1)}function f(m,g,v,x){if(v===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let w=0;w<m.length;w++)u(m[w]/s,g[w],x[w]);else{_.multiDrawElementsInstancedWEBGL(r,g,0,a,m,0,x,0,v);let w=0;for(let S=0;S<v;S++)w+=g[S]*x[S];n.update(w,r,1)}}this.setMode=i,this.setIndex=o,this.render=c,this.renderInstances=u,this.renderMultiDraw=h,this.renderMultiDrawInstances=f}function Iue(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,s,o){switch(n.calls++,s){case t.TRIANGLES:n.triangles+=o*(a/3);break;case t.LINES:n.lines+=o*(a/2);break;case t.LINE_STRIP:n.lines+=o*(a-1);break;case t.LINE_LOOP:n.lines+=o*a;break;case t.POINTS:n.points+=o*a;break;default:Yi("WebGLInfo: Unknown draw mode:",s);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function $ue(t,e,n){const r=new WeakMap,i=new Zi;function a(s,o,c){const u=s.morphTargetInfluences,h=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,f=h!==void 0?h.length:0;let m=r.get(o);if(m===void 0||m.count!==f){let k=function(){R.dispose(),r.delete(o),o.removeEventListener("dispose",k)};m!==void 0&&m.texture.dispose();const g=o.morphAttributes.position!==void 0,v=o.morphAttributes.normal!==void 0,x=o.morphAttributes.color!==void 0,_=o.morphAttributes.position||[],w=o.morphAttributes.normal||[],S=o.morphAttributes.color||[];let E=0;g===!0&&(E=1),v===!0&&(E=2),x===!0&&(E=3);let A=o.attributes.position.count*E,N=1;A>e.maxTextureSize&&(N=Math.ceil(A/e.maxTextureSize),A=e.maxTextureSize);const P=new Float32Array(A*N*4*f),R=new T9(P,A,N,f);R.type=Rc,R.needsUpdate=!0;const D=E*4;for(let L=0;L<f;L++){const $=_[L],B=w[L],q=S[L],U=A*N*4*L;for(let J=0;J<$.count;J++){const O=J*D;g===!0&&(i.fromBufferAttribute($,J),P[U+O+0]=i.x,P[U+O+1]=i.y,P[U+O+2]=i.z,P[U+O+3]=0),v===!0&&(i.fromBufferAttribute(B,J),P[U+O+4]=i.x,P[U+O+5]=i.y,P[U+O+6]=i.z,P[U+O+7]=0),x===!0&&(i.fromBufferAttribute(q,J),P[U+O+8]=i.x,P[U+O+9]=i.y,P[U+O+10]=i.z,P[U+O+11]=q.itemSize===4?i.w:1)}}m={count:f,texture:R,size:new Sn(A,N)},r.set(o,m),o.addEventListener("dispose",k)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(t,"morphTexture",s.morphTexture,n);else{let g=0;for(let x=0;x<u.length;x++)g+=u[x];const v=o.morphTargetsRelative?1:1-g;c.getUniforms().setValue(t,"morphTargetBaseInfluence",v),c.getUniforms().setValue(t,"morphTargetInfluences",u)}c.getUniforms().setValue(t,"morphTargetsTexture",m.texture,n),c.getUniforms().setValue(t,"morphTargetsTextureSize",m.size)}return{update:a}}function jue(t,e,n,r){let i=new WeakMap;function a(c){const u=r.render.frame,h=c.geometry,f=e.get(c,h);if(i.get(f)!==u&&(e.update(f),i.set(f,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",o)===!1&&c.addEventListener("dispose",o),i.get(c)!==u&&(n.update(c.instanceMatrix,t.ARRAY_BUFFER),c.instanceColor!==null&&n.update(c.instanceColor,t.ARRAY_BUFFER),i.set(c,u))),c.isSkinnedMesh){const m=c.skeleton;i.get(m)!==u&&(m.update(),i.set(m,u))}return f}function s(){i=new WeakMap}function o(c){const u=c.target;u.removeEventListener("dispose",o),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:a,dispose:s}}const z9=new _s,ej=new L9(1,1),U9=new T9,V9=new coe,H9=new I9,tj=[],nj=[],rj=new Float32Array(16),ij=new Float32Array(9),aj=new Float32Array(4);function Oy(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let a=tj[i];if(a===void 0&&(a=new Float32Array(i),tj[i]=a),e!==0){r.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=n,t[s].toArray(a,o)}return a}function _a(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function wa(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function V2(t,e){let n=nj[e];n===void 0&&(n=new Int32Array(e),nj[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Lue(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Oue(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(_a(n,e))return;t.uniform2fv(this.addr,e),wa(n,e)}}function Fue(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(_a(n,e))return;t.uniform3fv(this.addr,e),wa(n,e)}}function Bue(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(_a(n,e))return;t.uniform4fv(this.addr,e),wa(n,e)}}function zue(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(_a(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),wa(n,e)}else{if(_a(n,r))return;aj.set(r),t.uniformMatrix2fv(this.addr,!1,aj),wa(n,r)}}function Uue(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(_a(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),wa(n,e)}else{if(_a(n,r))return;ij.set(r),t.uniformMatrix3fv(this.addr,!1,ij),wa(n,r)}}function Vue(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(_a(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),wa(n,e)}else{if(_a(n,r))return;rj.set(r),t.uniformMatrix4fv(this.addr,!1,rj),wa(n,r)}}function Hue(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Gue(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(_a(n,e))return;t.uniform2iv(this.addr,e),wa(n,e)}}function Wue(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(_a(n,e))return;t.uniform3iv(this.addr,e),wa(n,e)}}function que(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(_a(n,e))return;t.uniform4iv(this.addr,e),wa(n,e)}}function Kue(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Xue(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(_a(n,e))return;t.uniform2uiv(this.addr,e),wa(n,e)}}function Yue(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(_a(n,e))return;t.uniform3uiv(this.addr,e),wa(n,e)}}function Zue(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(_a(n,e))return;t.uniform4uiv(this.addr,e),wa(n,e)}}function Jue(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let a;this.type===t.SAMPLER_2D_SHADOW?(ej.compareFunction=E9,a=ej):a=z9,n.setTexture2D(e||a,i)}function Que(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||V9,i)}function ede(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||H9,i)}function tde(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||U9,i)}function nde(t){switch(t){case 5126:return Lue;case 35664:return Oue;case 35665:return Fue;case 35666:return Bue;case 35674:return zue;case 35675:return Uue;case 35676:return Vue;case 5124:case 35670:return Hue;case 35667:case 35671:return Gue;case 35668:case 35672:return Wue;case 35669:case 35673:return que;case 5125:return Kue;case 36294:return Xue;case 36295:return Yue;case 36296:return Zue;case 35678:case 36198:case 36298:case 36306:case 35682:return Jue;case 35679:case 36299:case 36307:return Que;case 35680:case 36300:case 36308:case 36293:return ede;case 36289:case 36303:case 36311:case 36292:return tde}}function rde(t,e){t.uniform1fv(this.addr,e)}function ide(t,e){const n=Oy(e,this.size,2);t.uniform2fv(this.addr,n)}function ade(t,e){const n=Oy(e,this.size,3);t.uniform3fv(this.addr,n)}function sde(t,e){const n=Oy(e,this.size,4);t.uniform4fv(this.addr,n)}function ode(t,e){const n=Oy(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function lde(t,e){const n=Oy(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function cde(t,e){const n=Oy(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function ude(t,e){t.uniform1iv(this.addr,e)}function dde(t,e){t.uniform2iv(this.addr,e)}function hde(t,e){t.uniform3iv(this.addr,e)}function fde(t,e){t.uniform4iv(this.addr,e)}function pde(t,e){t.uniform1uiv(this.addr,e)}function mde(t,e){t.uniform2uiv(this.addr,e)}function gde(t,e){t.uniform3uiv(this.addr,e)}function vde(t,e){t.uniform4uiv(this.addr,e)}function yde(t,e,n){const r=this.cache,i=e.length,a=V2(n,i);_a(r,a)||(t.uniform1iv(this.addr,a),wa(r,a));for(let s=0;s!==i;++s)n.setTexture2D(e[s]||z9,a[s])}function bde(t,e,n){const r=this.cache,i=e.length,a=V2(n,i);_a(r,a)||(t.uniform1iv(this.addr,a),wa(r,a));for(let s=0;s!==i;++s)n.setTexture3D(e[s]||V9,a[s])}function xde(t,e,n){const r=this.cache,i=e.length,a=V2(n,i);_a(r,a)||(t.uniform1iv(this.addr,a),wa(r,a));for(let s=0;s!==i;++s)n.setTextureCube(e[s]||H9,a[s])}function _de(t,e,n){const r=this.cache,i=e.length,a=V2(n,i);_a(r,a)||(t.uniform1iv(this.addr,a),wa(r,a));for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||U9,a[s])}function wde(t){switch(t){case 5126:return rde;case 35664:return ide;case 35665:return ade;case 35666:return sde;case 35674:return ode;case 35675:return lde;case 35676:return cde;case 5124:case 35670:return ude;case 35667:case 35671:return dde;case 35668:case 35672:return hde;case 35669:case 35673:return fde;case 5125:return pde;case 36294:return mde;case 36295:return gde;case 36296:return vde;case 35678:case 36198:case 36298:case 36306:case 35682:return yde;case 35679:case 36299:case 36307:return bde;case 35680:case 36300:case 36308:case 36293:return xde;case 36289:case 36303:case 36311:case 36292:return _de}}class Sde{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=nde(n.type)}}class Ede{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=wde(n.type)}}class Cde{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let a=0,s=i.length;a!==s;++a){const o=i[a];o.setValue(e,n[o.id],r)}}}const L4=/(\w+)(\])?(\[|\.)?/g;function sj(t,e){t.seq.push(e),t.map[e.id]=e}function Tde(t,e,n){const r=t.name,i=r.length;for(L4.lastIndex=0;;){const a=L4.exec(r),s=L4.lastIndex;let o=a[1];const c=a[2]==="]",u=a[3];if(c&&(o=o|0),u===void 0||u==="["&&s+2===i){sj(n,u===void 0?new Sde(o,t,e):new Ede(o,t,e));break}else{let f=n.map[o];f===void 0&&(f=new Cde(o),sj(n,f)),n=f}}}class l3{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const a=e.getActiveUniform(n,i),s=e.getUniformLocation(n,a.name);Tde(a,s,this)}}setValue(e,n,r,i){const a=this.map[n];a!==void 0&&a.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let a=0,s=n.length;a!==s;++a){const o=n[a],c=r[o.id];c.needsUpdate!==!1&&o.setValue(e,c.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,a=e.length;i!==a;++i){const s=e[i];s.id in n&&r.push(s)}return r}}function oj(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const Mde=37297;let Ade=0;function Pde(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),a=Math.min(e+6,n.length);for(let s=i;s<a;s++){const o=s+1;r.push(`${o===e?">":" "} ${o}: ${n[s]}`)}return r.join(`
`)}const lj=new $n;function Nde(t){pr._getMatrix(lj,pr.workingColorSpace,t);const e=`mat3( ${lj.elements.map(n=>n.toFixed(4))} )`;switch(pr.getTransfer(t)){case k3:return[e,"LinearTransferOETF"];case Fr:return[e,"sRGBTransferOETF"];default:return kn("WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function cj(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),a=(t.getShaderInfoLog(e)||"").trim();if(r&&a==="")return"";const s=/ERROR: 0:(\d+)/.exec(a);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+a+`

`+Pde(t.getShaderSource(e),o)}else return a}function Dde(t,e){const n=Nde(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function kde(t,e){let n;switch(e){case u9:n="Linear";break;case d9:n="Reinhard";break;case h9:n="Cineon";break;case f9:n="ACESFilmic";break;case m9:n="AgX";break;case g9:n="Neutral";break;case p9:n="Custom";break;default:kn("WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const tC=new qe;function Rde(){pr.getLuminanceCoefficients(tC);const t=tC.x.toFixed(4),e=tC.y.toFixed(4),n=tC.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Ide(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(y1).join(`
`)}function $de(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function jde(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const a=t.getActiveAttrib(e,i),s=a.name;let o=1;a.type===t.FLOAT_MAT2&&(o=2),a.type===t.FLOAT_MAT3&&(o=3),a.type===t.FLOAT_MAT4&&(o=4),n[s]={type:a.type,location:t.getAttribLocation(e,s),locationSize:o}}return n}function y1(t){return t!==""}function uj(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function dj(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Lde=/^[ \t]*#include +<([\w\d./]+)>/gm;function cD(t){return t.replace(Lde,Fde)}const Ode=new Map;function Fde(t,e){let n=Un[e];if(n===void 0){const r=Ode.get(e);if(r!==void 0)n=Un[r],kn('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return cD(n)}const Bde=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function hj(t){return t.replace(Bde,zde)}function zde(t,e,n,r){let i="";for(let a=parseInt(e);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function fj(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Ude(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===l9?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===wse?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Pd&&(e="SHADOWMAP_TYPE_VSM"),e}function Vde(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case uy:case dy:e="ENVMAP_TYPE_CUBE";break;case B2:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Hde(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case dy:e="ENVMAP_MODE_REFRACTION";break}return e}function Gde(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case c9:e="ENVMAP_BLENDING_MULTIPLY";break;case zse:e="ENVMAP_BLENDING_MIX";break;case Use:e="ENVMAP_BLENDING_ADD";break}return e}function Wde(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}function qde(t,e,n,r){const i=t.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const c=Ude(n),u=Vde(n),h=Hde(n),f=Gde(n),m=Wde(n),g=Ide(n),v=$de(a),x=i.createProgram();let _,w,S=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(_=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(y1).join(`
`),_.length>0&&(_+=`
`),w=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(y1).join(`
`),w.length>0&&(w+=`
`)):(_=[fj(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(y1).join(`
`),w=[fj(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",n.envMap?"#define "+f:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==kf?"#define TONE_MAPPING":"",n.toneMapping!==kf?Un.tonemapping_pars_fragment:"",n.toneMapping!==kf?kde("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Un.colorspace_pars_fragment,Dde("linearToOutputTexel",n.outputColorSpace),Rde(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(y1).join(`
`)),s=cD(s),s=uj(s,n),s=dj(s,n),o=cD(o),o=uj(o,n),o=dj(o,n),s=hj(s),o=hj(o),n.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,_=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,w=["#define varying in",n.glslVersion===E5?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===E5?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const E=S+_+s,A=S+w+o,N=oj(i,i.VERTEX_SHADER,E),P=oj(i,i.FRAGMENT_SHADER,A);i.attachShader(x,N),i.attachShader(x,P),n.index0AttributeName!==void 0?i.bindAttribLocation(x,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(x,0,"position"),i.linkProgram(x);function R($){if(t.debug.checkShaderErrors){const B=i.getProgramInfoLog(x)||"",q=i.getShaderInfoLog(N)||"",U=i.getShaderInfoLog(P)||"",J=B.trim(),O=q.trim(),z=U.trim();let V=!0,H=!0;if(i.getProgramParameter(x,i.LINK_STATUS)===!1)if(V=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,x,N,P);else{const ee=cj(i,N,"vertex"),Y=cj(i,P,"fragment");Yi("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(x,i.VALIDATE_STATUS)+`

Material Name: `+$.name+`
Material Type: `+$.type+`

Program Info Log: `+J+`
`+ee+`
`+Y)}else J!==""?kn("WebGLProgram: Program Info Log:",J):(O===""||z==="")&&(H=!1);H&&($.diagnostics={runnable:V,programLog:J,vertexShader:{log:O,prefix:_},fragmentShader:{log:z,prefix:w}})}i.deleteShader(N),i.deleteShader(P),D=new l3(i,x),k=jde(i,x)}let D;this.getUniforms=function(){return D===void 0&&R(this),D};let k;this.getAttributes=function(){return k===void 0&&R(this),k};let L=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=i.getProgramParameter(x,Mde)),L},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(x),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Ade++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=N,this.fragmentShader=P,this}let Kde=0;class Xde{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),a=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new Yde(e),n.set(e,r)),r}}class Yde{constructor(e){this.id=Kde++,this.code=e,this.usedTimes=0}}function Zde(t,e,n,r,i,a,s){const o=new A9,c=new Xde,u=new Set,h=[],f=i.logarithmicDepthBuffer,m=i.vertexTextures;let g=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(k){return u.add(k),k===0?"uv":`uv${k}`}function _(k,L,$,B,q){const U=B.fog,J=q.geometry,O=k.isMeshStandardMaterial?B.environment:null,z=(k.isMeshStandardMaterial?n:e).get(k.envMap||O),V=z&&z.mapping===B2?z.image.height:null,H=v[k.type];k.precision!==null&&(g=i.getMaxPrecision(k.precision),g!==k.precision&&kn("WebGLProgram.getParameters:",k.precision,"not supported, using",g,"instead."));const ee=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,Y=ee!==void 0?ee.length:0;let Z=0;J.morphAttributes.position!==void 0&&(Z=1),J.morphAttributes.normal!==void 0&&(Z=2),J.morphAttributes.color!==void 0&&(Z=3);let K,X,ne,G;if(H){const yt=ku[H];K=yt.vertexShader,X=yt.fragmentShader}else K=k.vertexShader,X=k.fragmentShader,c.update(k),ne=c.getVertexShaderID(k),G=c.getFragmentShaderID(k);const te=t.getRenderTarget(),ae=t.state.buffers.depth.getReversed(),pe=q.isInstancedMesh===!0,ye=q.isBatchedMesh===!0,me=!!k.map,fe=!!k.matcap,ge=!!z,be=!!k.aoMap,oe=!!k.lightMap,Le=!!k.bumpMap,Ve=!!k.normalMap,Ze=!!k.displacementMap,xe=!!k.emissiveMap,ht=!!k.metalnessMap,Fe=!!k.roughnessMap,et=k.anisotropy>0,de=k.clearcoat>0,re=k.dispersion>0,Ce=k.iridescence>0,ke=k.sheen>0,De=k.transmission>0,je=et&&!!k.anisotropyMap,mt=de&&!!k.clearcoatMap,rt=de&&!!k.clearcoatNormalMap,bt=de&&!!k.clearcoatRoughnessMap,dt=Ce&&!!k.iridescenceMap,Je=Ce&&!!k.iridescenceThicknessMap,ot=ke&&!!k.sheenColorMap,It=ke&&!!k.sheenRoughnessMap,Ct=!!k.specularMap,St=!!k.specularColorMap,Bt=!!k.specularIntensityMap,we=De&&!!k.transmissionMap,xt=De&&!!k.thicknessMap,_t=!!k.gradientMap,vt=!!k.alphaMap,it=k.alphaTest>0,Qe=!!k.alphaHash,At=!!k.extensions;let We=kf;k.toneMapped&&(te===null||te.isXRRenderTarget===!0)&&(We=t.toneMapping);const ft={shaderID:H,shaderType:k.type,shaderName:k.name,vertexShader:K,fragmentShader:X,defines:k.defines,customVertexShaderID:ne,customFragmentShaderID:G,isRawShaderMaterial:k.isRawShaderMaterial===!0,glslVersion:k.glslVersion,precision:g,batching:ye,batchingColor:ye&&q._colorsTexture!==null,instancing:pe,instancingColor:pe&&q.instanceColor!==null,instancingMorph:pe&&q.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:te===null?t.outputColorSpace:te.isXRRenderTarget===!0?te.texture.colorSpace:hy,alphaToCoverage:!!k.alphaToCoverage,map:me,matcap:fe,envMap:ge,envMapMode:ge&&z.mapping,envMapCubeUVHeight:V,aoMap:be,lightMap:oe,bumpMap:Le,normalMap:Ve,displacementMap:m&&Ze,emissiveMap:xe,normalMapObjectSpace:Ve&&k.normalMapType===qse,normalMapTangentSpace:Ve&&k.normalMapType===Wse,metalnessMap:ht,roughnessMap:Fe,anisotropy:et,anisotropyMap:je,clearcoat:de,clearcoatMap:mt,clearcoatNormalMap:rt,clearcoatRoughnessMap:bt,dispersion:re,iridescence:Ce,iridescenceMap:dt,iridescenceThicknessMap:Je,sheen:ke,sheenColorMap:ot,sheenRoughnessMap:It,specularMap:Ct,specularColorMap:St,specularIntensityMap:Bt,transmission:De,transmissionMap:we,thicknessMap:xt,gradientMap:_t,opaque:k.transparent===!1&&k.blending===Hm&&k.alphaToCoverage===!1,alphaMap:vt,alphaTest:it,alphaHash:Qe,combine:k.combine,mapUv:me&&x(k.map.channel),aoMapUv:be&&x(k.aoMap.channel),lightMapUv:oe&&x(k.lightMap.channel),bumpMapUv:Le&&x(k.bumpMap.channel),normalMapUv:Ve&&x(k.normalMap.channel),displacementMapUv:Ze&&x(k.displacementMap.channel),emissiveMapUv:xe&&x(k.emissiveMap.channel),metalnessMapUv:ht&&x(k.metalnessMap.channel),roughnessMapUv:Fe&&x(k.roughnessMap.channel),anisotropyMapUv:je&&x(k.anisotropyMap.channel),clearcoatMapUv:mt&&x(k.clearcoatMap.channel),clearcoatNormalMapUv:rt&&x(k.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:bt&&x(k.clearcoatRoughnessMap.channel),iridescenceMapUv:dt&&x(k.iridescenceMap.channel),iridescenceThicknessMapUv:Je&&x(k.iridescenceThicknessMap.channel),sheenColorMapUv:ot&&x(k.sheenColorMap.channel),sheenRoughnessMapUv:It&&x(k.sheenRoughnessMap.channel),specularMapUv:Ct&&x(k.specularMap.channel),specularColorMapUv:St&&x(k.specularColorMap.channel),specularIntensityMapUv:Bt&&x(k.specularIntensityMap.channel),transmissionMapUv:we&&x(k.transmissionMap.channel),thicknessMapUv:xt&&x(k.thicknessMap.channel),alphaMapUv:vt&&x(k.alphaMap.channel),vertexTangents:!!J.attributes.tangent&&(Ve||et),vertexColors:k.vertexColors,vertexAlphas:k.vertexColors===!0&&!!J.attributes.color&&J.attributes.color.itemSize===4,pointsUvs:q.isPoints===!0&&!!J.attributes.uv&&(me||vt),fog:!!U,useFog:k.fog===!0,fogExp2:!!U&&U.isFogExp2,flatShading:k.flatShading===!0&&k.wireframe===!1,sizeAttenuation:k.sizeAttenuation===!0,logarithmicDepthBuffer:f,reversedDepthBuffer:ae,skinning:q.isSkinnedMesh===!0,morphTargets:J.morphAttributes.position!==void 0,morphNormals:J.morphAttributes.normal!==void 0,morphColors:J.morphAttributes.color!==void 0,morphTargetsCount:Y,morphTextureStride:Z,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:k.dithering,shadowMapEnabled:t.shadowMap.enabled&&$.length>0,shadowMapType:t.shadowMap.type,toneMapping:We,decodeVideoTexture:me&&k.map.isVideoTexture===!0&&pr.getTransfer(k.map.colorSpace)===Fr,decodeVideoTextureEmissive:xe&&k.emissiveMap.isVideoTexture===!0&&pr.getTransfer(k.emissiveMap.colorSpace)===Fr,premultipliedAlpha:k.premultipliedAlpha,doubleSided:k.side===ju,flipSided:k.side===Mo,useDepthPacking:k.depthPacking>=0,depthPacking:k.depthPacking||0,index0AttributeName:k.index0AttributeName,extensionClipCullDistance:At&&k.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(At&&k.extensions.multiDraw===!0||ye)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:k.customProgramCacheKey()};return ft.vertexUv1s=u.has(1),ft.vertexUv2s=u.has(2),ft.vertexUv3s=u.has(3),u.clear(),ft}function w(k){const L=[];if(k.shaderID?L.push(k.shaderID):(L.push(k.customVertexShaderID),L.push(k.customFragmentShaderID)),k.defines!==void 0)for(const $ in k.defines)L.push($),L.push(k.defines[$]);return k.isRawShaderMaterial===!1&&(S(L,k),E(L,k),L.push(t.outputColorSpace)),L.push(k.customProgramCacheKey),L.join()}function S(k,L){k.push(L.precision),k.push(L.outputColorSpace),k.push(L.envMapMode),k.push(L.envMapCubeUVHeight),k.push(L.mapUv),k.push(L.alphaMapUv),k.push(L.lightMapUv),k.push(L.aoMapUv),k.push(L.bumpMapUv),k.push(L.normalMapUv),k.push(L.displacementMapUv),k.push(L.emissiveMapUv),k.push(L.metalnessMapUv),k.push(L.roughnessMapUv),k.push(L.anisotropyMapUv),k.push(L.clearcoatMapUv),k.push(L.clearcoatNormalMapUv),k.push(L.clearcoatRoughnessMapUv),k.push(L.iridescenceMapUv),k.push(L.iridescenceThicknessMapUv),k.push(L.sheenColorMapUv),k.push(L.sheenRoughnessMapUv),k.push(L.specularMapUv),k.push(L.specularColorMapUv),k.push(L.specularIntensityMapUv),k.push(L.transmissionMapUv),k.push(L.thicknessMapUv),k.push(L.combine),k.push(L.fogExp2),k.push(L.sizeAttenuation),k.push(L.morphTargetsCount),k.push(L.morphAttributeCount),k.push(L.numDirLights),k.push(L.numPointLights),k.push(L.numSpotLights),k.push(L.numSpotLightMaps),k.push(L.numHemiLights),k.push(L.numRectAreaLights),k.push(L.numDirLightShadows),k.push(L.numPointLightShadows),k.push(L.numSpotLightShadows),k.push(L.numSpotLightShadowsWithMaps),k.push(L.numLightProbes),k.push(L.shadowMapType),k.push(L.toneMapping),k.push(L.numClippingPlanes),k.push(L.numClipIntersection),k.push(L.depthPacking)}function E(k,L){o.disableAll(),L.supportsVertexTextures&&o.enable(0),L.instancing&&o.enable(1),L.instancingColor&&o.enable(2),L.instancingMorph&&o.enable(3),L.matcap&&o.enable(4),L.envMap&&o.enable(5),L.normalMapObjectSpace&&o.enable(6),L.normalMapTangentSpace&&o.enable(7),L.clearcoat&&o.enable(8),L.iridescence&&o.enable(9),L.alphaTest&&o.enable(10),L.vertexColors&&o.enable(11),L.vertexAlphas&&o.enable(12),L.vertexUv1s&&o.enable(13),L.vertexUv2s&&o.enable(14),L.vertexUv3s&&o.enable(15),L.vertexTangents&&o.enable(16),L.anisotropy&&o.enable(17),L.alphaHash&&o.enable(18),L.batching&&o.enable(19),L.dispersion&&o.enable(20),L.batchingColor&&o.enable(21),L.gradientMap&&o.enable(22),k.push(o.mask),o.disableAll(),L.fog&&o.enable(0),L.useFog&&o.enable(1),L.flatShading&&o.enable(2),L.logarithmicDepthBuffer&&o.enable(3),L.reversedDepthBuffer&&o.enable(4),L.skinning&&o.enable(5),L.morphTargets&&o.enable(6),L.morphNormals&&o.enable(7),L.morphColors&&o.enable(8),L.premultipliedAlpha&&o.enable(9),L.shadowMapEnabled&&o.enable(10),L.doubleSided&&o.enable(11),L.flipSided&&o.enable(12),L.useDepthPacking&&o.enable(13),L.dithering&&o.enable(14),L.transmission&&o.enable(15),L.sheen&&o.enable(16),L.opaque&&o.enable(17),L.pointsUvs&&o.enable(18),L.decodeVideoTexture&&o.enable(19),L.decodeVideoTextureEmissive&&o.enable(20),L.alphaToCoverage&&o.enable(21),k.push(o.mask)}function A(k){const L=v[k.type];let $;if(L){const B=ku[L];$=ng.clone(B.uniforms)}else $=k.uniforms;return $}function N(k,L){let $;for(let B=0,q=h.length;B<q;B++){const U=h[B];if(U.cacheKey===L){$=U,++$.usedTimes;break}}return $===void 0&&($=new qde(t,L,k,a),h.push($)),$}function P(k){if(--k.usedTimes===0){const L=h.indexOf(k);h[L]=h[h.length-1],h.pop(),k.destroy()}}function R(k){c.remove(k)}function D(){c.dispose()}return{getParameters:_,getProgramCacheKey:w,getUniforms:A,acquireProgram:N,releaseProgram:P,releaseShaderCache:R,programs:h,dispose:D}}function Jde(){let t=new WeakMap;function e(s){return t.has(s)}function n(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function r(s){t.delete(s)}function i(s,o,c){t.get(s)[o]=c}function a(){t=new WeakMap}return{has:e,get:n,remove:r,update:i,dispose:a}}function Qde(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function pj(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function mj(){const t=[];let e=0;const n=[],r=[],i=[];function a(){e=0,n.length=0,r.length=0,i.length=0}function s(f,m,g,v,x,_){let w=t[e];return w===void 0?(w={id:f.id,object:f,geometry:m,material:g,groupOrder:v,renderOrder:f.renderOrder,z:x,group:_},t[e]=w):(w.id=f.id,w.object=f,w.geometry=m,w.material=g,w.groupOrder=v,w.renderOrder=f.renderOrder,w.z=x,w.group=_),e++,w}function o(f,m,g,v,x,_){const w=s(f,m,g,v,x,_);g.transmission>0?r.push(w):g.transparent===!0?i.push(w):n.push(w)}function c(f,m,g,v,x,_){const w=s(f,m,g,v,x,_);g.transmission>0?r.unshift(w):g.transparent===!0?i.unshift(w):n.unshift(w)}function u(f,m){n.length>1&&n.sort(f||Qde),r.length>1&&r.sort(m||pj),i.length>1&&i.sort(m||pj)}function h(){for(let f=e,m=t.length;f<m;f++){const g=t[f];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:n,transmissive:r,transparent:i,init:a,push:o,unshift:c,finish:h,sort:u}}function ehe(){let t=new WeakMap;function e(r,i){const a=t.get(r);let s;return a===void 0?(s=new mj,t.set(r,[s])):i>=a.length?(s=new mj,a.push(s)):s=a[i],s}function n(){t=new WeakMap}return{get:e,dispose:n}}function the(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new qe,color:new or};break;case"SpotLight":n={position:new qe,direction:new qe,color:new or,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new qe,color:new or,distance:0,decay:0};break;case"HemisphereLight":n={direction:new qe,skyColor:new or,groundColor:new or};break;case"RectAreaLight":n={color:new or,position:new qe,halfWidth:new qe,halfHeight:new qe};break}return t[e.id]=n,n}}}function nhe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Sn};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Sn};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Sn,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let rhe=0;function ihe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function ahe(t){const e=new the,n=nhe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new qe);const i=new qe,a=new Pi,s=new Pi;function o(u){let h=0,f=0,m=0;for(let k=0;k<9;k++)r.probe[k].set(0,0,0);let g=0,v=0,x=0,_=0,w=0,S=0,E=0,A=0,N=0,P=0,R=0;u.sort(ihe);for(let k=0,L=u.length;k<L;k++){const $=u[k],B=$.color,q=$.intensity,U=$.distance,J=$.shadow&&$.shadow.map?$.shadow.map.texture:null;if($.isAmbientLight)h+=B.r*q,f+=B.g*q,m+=B.b*q;else if($.isLightProbe){for(let O=0;O<9;O++)r.probe[O].addScaledVector($.sh.coefficients[O],q);R++}else if($.isDirectionalLight){const O=e.get($);if(O.color.copy($.color).multiplyScalar($.intensity),$.castShadow){const z=$.shadow,V=n.get($);V.shadowIntensity=z.intensity,V.shadowBias=z.bias,V.shadowNormalBias=z.normalBias,V.shadowRadius=z.radius,V.shadowMapSize=z.mapSize,r.directionalShadow[g]=V,r.directionalShadowMap[g]=J,r.directionalShadowMatrix[g]=$.shadow.matrix,S++}r.directional[g]=O,g++}else if($.isSpotLight){const O=e.get($);O.position.setFromMatrixPosition($.matrixWorld),O.color.copy(B).multiplyScalar(q),O.distance=U,O.coneCos=Math.cos($.angle),O.penumbraCos=Math.cos($.angle*(1-$.penumbra)),O.decay=$.decay,r.spot[x]=O;const z=$.shadow;if($.map&&(r.spotLightMap[N]=$.map,N++,z.updateMatrices($),$.castShadow&&P++),r.spotLightMatrix[x]=z.matrix,$.castShadow){const V=n.get($);V.shadowIntensity=z.intensity,V.shadowBias=z.bias,V.shadowNormalBias=z.normalBias,V.shadowRadius=z.radius,V.shadowMapSize=z.mapSize,r.spotShadow[x]=V,r.spotShadowMap[x]=J,A++}x++}else if($.isRectAreaLight){const O=e.get($);O.color.copy(B).multiplyScalar(q),O.halfWidth.set($.width*.5,0,0),O.halfHeight.set(0,$.height*.5,0),r.rectArea[_]=O,_++}else if($.isPointLight){const O=e.get($);if(O.color.copy($.color).multiplyScalar($.intensity),O.distance=$.distance,O.decay=$.decay,$.castShadow){const z=$.shadow,V=n.get($);V.shadowIntensity=z.intensity,V.shadowBias=z.bias,V.shadowNormalBias=z.normalBias,V.shadowRadius=z.radius,V.shadowMapSize=z.mapSize,V.shadowCameraNear=z.camera.near,V.shadowCameraFar=z.camera.far,r.pointShadow[v]=V,r.pointShadowMap[v]=J,r.pointShadowMatrix[v]=$.shadow.matrix,E++}r.point[v]=O,v++}else if($.isHemisphereLight){const O=e.get($);O.skyColor.copy($.color).multiplyScalar(q),O.groundColor.copy($.groundColor).multiplyScalar(q),r.hemi[w]=O,w++}}_>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Dt.LTC_FLOAT_1,r.rectAreaLTC2=Dt.LTC_FLOAT_2):(r.rectAreaLTC1=Dt.LTC_HALF_1,r.rectAreaLTC2=Dt.LTC_HALF_2)),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=m;const D=r.hash;(D.directionalLength!==g||D.pointLength!==v||D.spotLength!==x||D.rectAreaLength!==_||D.hemiLength!==w||D.numDirectionalShadows!==S||D.numPointShadows!==E||D.numSpotShadows!==A||D.numSpotMaps!==N||D.numLightProbes!==R)&&(r.directional.length=g,r.spot.length=x,r.rectArea.length=_,r.point.length=v,r.hemi.length=w,r.directionalShadow.length=S,r.directionalShadowMap.length=S,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=A,r.spotShadowMap.length=A,r.directionalShadowMatrix.length=S,r.pointShadowMatrix.length=E,r.spotLightMatrix.length=A+N-P,r.spotLightMap.length=N,r.numSpotLightShadowsWithMaps=P,r.numLightProbes=R,D.directionalLength=g,D.pointLength=v,D.spotLength=x,D.rectAreaLength=_,D.hemiLength=w,D.numDirectionalShadows=S,D.numPointShadows=E,D.numSpotShadows=A,D.numSpotMaps=N,D.numLightProbes=R,r.version=rhe++)}function c(u,h){let f=0,m=0,g=0,v=0,x=0;const _=h.matrixWorldInverse;for(let w=0,S=u.length;w<S;w++){const E=u[w];if(E.isDirectionalLight){const A=r.directional[f];A.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),A.direction.sub(i),A.direction.transformDirection(_),f++}else if(E.isSpotLight){const A=r.spot[g];A.position.setFromMatrixPosition(E.matrixWorld),A.position.applyMatrix4(_),A.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),A.direction.sub(i),A.direction.transformDirection(_),g++}else if(E.isRectAreaLight){const A=r.rectArea[v];A.position.setFromMatrixPosition(E.matrixWorld),A.position.applyMatrix4(_),s.identity(),a.copy(E.matrixWorld),a.premultiply(_),s.extractRotation(a),A.halfWidth.set(E.width*.5,0,0),A.halfHeight.set(0,E.height*.5,0),A.halfWidth.applyMatrix4(s),A.halfHeight.applyMatrix4(s),v++}else if(E.isPointLight){const A=r.point[m];A.position.setFromMatrixPosition(E.matrixWorld),A.position.applyMatrix4(_),m++}else if(E.isHemisphereLight){const A=r.hemi[x];A.direction.setFromMatrixPosition(E.matrixWorld),A.direction.transformDirection(_),x++}}}return{setup:o,setupView:c,state:r}}function gj(t){const e=new ahe(t),n=[],r=[];function i(h){u.camera=h,n.length=0,r.length=0}function a(h){n.push(h)}function s(h){r.push(h)}function o(){e.setup(n)}function c(h){e.setupView(n,h)}const u={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:u,setupLights:o,setupLightsView:c,pushLight:a,pushShadow:s}}function she(t){let e=new WeakMap;function n(i,a=0){const s=e.get(i);let o;return s===void 0?(o=new gj(t),e.set(i,[o])):a>=s.length?(o=new gj(t),s.push(o)):o=s[a],o}function r(){e=new WeakMap}return{get:n,dispose:r}}const ohe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,lhe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function che(t,e,n){let r=new $9;const i=new Sn,a=new Sn,s=new Zi,o=new Ioe({depthPacking:Gse}),c=new $oe,u={},h=n.maxTextureSize,f={[Ff]:Mo,[Mo]:Ff,[ju]:ju},m=new Fi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Sn},radius:{value:4}},vertexShader:ohe,fragmentShader:lhe}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const v=new hl;v.setAttribute("position",new er(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new zc(v,m),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=l9;let w=this.type;this.render=function(P,R,D){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||P.length===0)return;const k=t.getRenderTarget(),L=t.getActiveCubeFace(),$=t.getActiveMipmapLevel(),B=t.state;B.setBlending(Oc),B.buffers.depth.getReversed()===!0?B.buffers.color.setClear(0,0,0,0):B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);const q=w!==Pd&&this.type===Pd,U=w===Pd&&this.type!==Pd;for(let J=0,O=P.length;J<O;J++){const z=P[J],V=z.shadow;if(V===void 0){kn("WebGLShadowMap:",z,"has no shadow.");continue}if(V.autoUpdate===!1&&V.needsUpdate===!1)continue;i.copy(V.mapSize);const H=V.getFrameExtents();if(i.multiply(H),a.copy(V.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(a.x=Math.floor(h/H.x),i.x=a.x*H.x,V.mapSize.x=a.x),i.y>h&&(a.y=Math.floor(h/H.y),i.y=a.y*H.y,V.mapSize.y=a.y)),V.map===null||q===!0||U===!0){const Y=this.type!==Pd?{minFilter:Hs,magFilter:Hs}:{};V.map!==null&&V.map.dispose(),V.map=new sl(i.x,i.y,Y),V.map.texture.name=z.name+".shadowMap",V.camera.updateProjectionMatrix()}t.setRenderTarget(V.map),t.clear();const ee=V.getViewportCount();for(let Y=0;Y<ee;Y++){const Z=V.getViewport(Y);s.set(a.x*Z.x,a.y*Z.y,a.x*Z.z,a.y*Z.w),B.viewport(s),V.updateMatrices(z,Y),r=V.getFrustum(),A(R,D,V.camera,z,this.type)}V.isPointLightShadow!==!0&&this.type===Pd&&S(V,D),V.needsUpdate=!1}w=this.type,_.needsUpdate=!1,t.setRenderTarget(k,L,$)};function S(P,R){const D=e.update(x);m.defines.VSM_SAMPLES!==P.blurSamples&&(m.defines.VSM_SAMPLES=P.blurSamples,g.defines.VSM_SAMPLES=P.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),P.mapPass===null&&(P.mapPass=new sl(i.x,i.y)),m.uniforms.shadow_pass.value=P.map.texture,m.uniforms.resolution.value=P.mapSize,m.uniforms.radius.value=P.radius,t.setRenderTarget(P.mapPass),t.clear(),t.renderBufferDirect(R,null,D,m,x,null),g.uniforms.shadow_pass.value=P.mapPass.texture,g.uniforms.resolution.value=P.mapSize,g.uniforms.radius.value=P.radius,t.setRenderTarget(P.map),t.clear(),t.renderBufferDirect(R,null,D,g,x,null)}function E(P,R,D,k){let L=null;const $=D.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if($!==void 0)L=$;else if(L=D.isPointLight===!0?c:o,t.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0||R.alphaToCoverage===!0){const B=L.uuid,q=R.uuid;let U=u[B];U===void 0&&(U={},u[B]=U);let J=U[q];J===void 0&&(J=L.clone(),U[q]=J,R.addEventListener("dispose",N)),L=J}if(L.visible=R.visible,L.wireframe=R.wireframe,k===Pd?L.side=R.shadowSide!==null?R.shadowSide:R.side:L.side=R.shadowSide!==null?R.shadowSide:f[R.side],L.alphaMap=R.alphaMap,L.alphaTest=R.alphaToCoverage===!0?.5:R.alphaTest,L.map=R.map,L.clipShadows=R.clipShadows,L.clippingPlanes=R.clippingPlanes,L.clipIntersection=R.clipIntersection,L.displacementMap=R.displacementMap,L.displacementScale=R.displacementScale,L.displacementBias=R.displacementBias,L.wireframeLinewidth=R.wireframeLinewidth,L.linewidth=R.linewidth,D.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const B=t.properties.get(L);B.light=D}return L}function A(P,R,D,k,L){if(P.visible===!1)return;if(P.layers.test(R.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&L===Pd)&&(!P.frustumCulled||r.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,P.matrixWorld);const q=e.update(P),U=P.material;if(Array.isArray(U)){const J=q.groups;for(let O=0,z=J.length;O<z;O++){const V=J[O],H=U[V.materialIndex];if(H&&H.visible){const ee=E(P,H,k,L);P.onBeforeShadow(t,P,R,D,q,ee,V),t.renderBufferDirect(D,null,q,ee,P,V),P.onAfterShadow(t,P,R,D,q,ee,V)}}}else if(U.visible){const J=E(P,U,k,L);P.onBeforeShadow(t,P,R,D,q,J,null),t.renderBufferDirect(D,null,q,J,P,null),P.onAfterShadow(t,P,R,D,q,J,null)}}const B=P.children;for(let q=0,U=B.length;q<U;q++)A(B[q],R,D,k,L)}function N(P){P.target.removeEventListener("dispose",N);for(const D in u){const k=u[D],L=P.target.uuid;L in k&&(k[L].dispose(),delete k[L])}}}const uhe={[wN]:SN,[EN]:MN,[CN]:AN,[cy]:TN,[SN]:wN,[MN]:EN,[AN]:CN,[TN]:cy};function dhe(t,e){function n(){let we=!1;const xt=new Zi;let _t=null;const vt=new Zi(0,0,0,0);return{setMask:function(it){_t!==it&&!we&&(t.colorMask(it,it,it,it),_t=it)},setLocked:function(it){we=it},setClear:function(it,Qe,At,We,ft){ft===!0&&(it*=We,Qe*=We,At*=We),xt.set(it,Qe,At,We),vt.equals(xt)===!1&&(t.clearColor(it,Qe,At,We),vt.copy(xt))},reset:function(){we=!1,_t=null,vt.set(-1,0,0,0)}}}function r(){let we=!1,xt=!1,_t=null,vt=null,it=null;return{setReversed:function(Qe){if(xt!==Qe){const At=e.get("EXT_clip_control");Qe?At.clipControlEXT(At.LOWER_LEFT_EXT,At.ZERO_TO_ONE_EXT):At.clipControlEXT(At.LOWER_LEFT_EXT,At.NEGATIVE_ONE_TO_ONE_EXT),xt=Qe;const We=it;it=null,this.setClear(We)}},getReversed:function(){return xt},setTest:function(Qe){Qe?te(t.DEPTH_TEST):ae(t.DEPTH_TEST)},setMask:function(Qe){_t!==Qe&&!we&&(t.depthMask(Qe),_t=Qe)},setFunc:function(Qe){if(xt&&(Qe=uhe[Qe]),vt!==Qe){switch(Qe){case wN:t.depthFunc(t.NEVER);break;case SN:t.depthFunc(t.ALWAYS);break;case EN:t.depthFunc(t.LESS);break;case cy:t.depthFunc(t.LEQUAL);break;case CN:t.depthFunc(t.EQUAL);break;case TN:t.depthFunc(t.GEQUAL);break;case MN:t.depthFunc(t.GREATER);break;case AN:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}vt=Qe}},setLocked:function(Qe){we=Qe},setClear:function(Qe){it!==Qe&&(xt&&(Qe=1-Qe),t.clearDepth(Qe),it=Qe)},reset:function(){we=!1,_t=null,vt=null,it=null,xt=!1}}}function i(){let we=!1,xt=null,_t=null,vt=null,it=null,Qe=null,At=null,We=null,ft=null;return{setTest:function(yt){we||(yt?te(t.STENCIL_TEST):ae(t.STENCIL_TEST))},setMask:function(yt){xt!==yt&&!we&&(t.stencilMask(yt),xt=yt)},setFunc:function(yt,gt,ln){(_t!==yt||vt!==gt||it!==ln)&&(t.stencilFunc(yt,gt,ln),_t=yt,vt=gt,it=ln)},setOp:function(yt,gt,ln){(Qe!==yt||At!==gt||We!==ln)&&(t.stencilOp(yt,gt,ln),Qe=yt,At=gt,We=ln)},setLocked:function(yt){we=yt},setClear:function(yt){ft!==yt&&(t.clearStencil(yt),ft=yt)},reset:function(){we=!1,xt=null,_t=null,vt=null,it=null,Qe=null,At=null,We=null,ft=null}}}const a=new n,s=new r,o=new i,c=new WeakMap,u=new WeakMap;let h={},f={},m=new WeakMap,g=[],v=null,x=!1,_=null,w=null,S=null,E=null,A=null,N=null,P=null,R=new or(0,0,0),D=0,k=!1,L=null,$=null,B=null,q=null,U=null;const J=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let O=!1,z=0;const V=t.getParameter(t.VERSION);V.indexOf("WebGL")!==-1?(z=parseFloat(/^WebGL (\d)/.exec(V)[1]),O=z>=1):V.indexOf("OpenGL ES")!==-1&&(z=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),O=z>=2);let H=null,ee={};const Y=t.getParameter(t.SCISSOR_BOX),Z=t.getParameter(t.VIEWPORT),K=new Zi().fromArray(Y),X=new Zi().fromArray(Z);function ne(we,xt,_t,vt){const it=new Uint8Array(4),Qe=t.createTexture();t.bindTexture(we,Qe),t.texParameteri(we,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(we,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let At=0;At<_t;At++)we===t.TEXTURE_3D||we===t.TEXTURE_2D_ARRAY?t.texImage3D(xt,0,t.RGBA,1,1,vt,0,t.RGBA,t.UNSIGNED_BYTE,it):t.texImage2D(xt+At,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,it);return Qe}const G={};G[t.TEXTURE_2D]=ne(t.TEXTURE_2D,t.TEXTURE_2D,1),G[t.TEXTURE_CUBE_MAP]=ne(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),G[t.TEXTURE_2D_ARRAY]=ne(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),G[t.TEXTURE_3D]=ne(t.TEXTURE_3D,t.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),te(t.DEPTH_TEST),s.setFunc(cy),Le(!1),Ve(b5),te(t.CULL_FACE),be(Oc);function te(we){h[we]!==!0&&(t.enable(we),h[we]=!0)}function ae(we){h[we]!==!1&&(t.disable(we),h[we]=!1)}function pe(we,xt){return f[we]!==xt?(t.bindFramebuffer(we,xt),f[we]=xt,we===t.DRAW_FRAMEBUFFER&&(f[t.FRAMEBUFFER]=xt),we===t.FRAMEBUFFER&&(f[t.DRAW_FRAMEBUFFER]=xt),!0):!1}function ye(we,xt){let _t=g,vt=!1;if(we){_t=m.get(xt),_t===void 0&&(_t=[],m.set(xt,_t));const it=we.textures;if(_t.length!==it.length||_t[0]!==t.COLOR_ATTACHMENT0){for(let Qe=0,At=it.length;Qe<At;Qe++)_t[Qe]=t.COLOR_ATTACHMENT0+Qe;_t.length=it.length,vt=!0}}else _t[0]!==t.BACK&&(_t[0]=t.BACK,vt=!0);vt&&t.drawBuffers(_t)}function me(we){return v!==we?(t.useProgram(we),v=we,!0):!1}const fe={[Am]:t.FUNC_ADD,[Ese]:t.FUNC_SUBTRACT,[Cse]:t.FUNC_REVERSE_SUBTRACT};fe[Tse]=t.MIN,fe[Mse]=t.MAX;const ge={[Ase]:t.ZERO,[Pse]:t.ONE,[Nse]:t.SRC_COLOR,[xN]:t.SRC_ALPHA,[jse]:t.SRC_ALPHA_SATURATE,[Ise]:t.DST_COLOR,[kse]:t.DST_ALPHA,[Dse]:t.ONE_MINUS_SRC_COLOR,[_N]:t.ONE_MINUS_SRC_ALPHA,[$se]:t.ONE_MINUS_DST_COLOR,[Rse]:t.ONE_MINUS_DST_ALPHA,[Lse]:t.CONSTANT_COLOR,[Ose]:t.ONE_MINUS_CONSTANT_COLOR,[Fse]:t.CONSTANT_ALPHA,[Bse]:t.ONE_MINUS_CONSTANT_ALPHA};function be(we,xt,_t,vt,it,Qe,At,We,ft,yt){if(we===Oc){x===!0&&(ae(t.BLEND),x=!1);return}if(x===!1&&(te(t.BLEND),x=!0),we!==Sse){if(we!==_||yt!==k){if((w!==Am||A!==Am)&&(t.blendEquation(t.FUNC_ADD),w=Am,A=Am),yt)switch(we){case Hm:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case eg:t.blendFunc(t.ONE,t.ONE);break;case x5:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case _5:t.blendFuncSeparate(t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ZERO,t.ONE);break;default:Yi("WebGLState: Invalid blending: ",we);break}else switch(we){case Hm:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case eg:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE,t.ONE,t.ONE);break;case x5:Yi("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case _5:Yi("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Yi("WebGLState: Invalid blending: ",we);break}S=null,E=null,N=null,P=null,R.set(0,0,0),D=0,_=we,k=yt}return}it=it||xt,Qe=Qe||_t,At=At||vt,(xt!==w||it!==A)&&(t.blendEquationSeparate(fe[xt],fe[it]),w=xt,A=it),(_t!==S||vt!==E||Qe!==N||At!==P)&&(t.blendFuncSeparate(ge[_t],ge[vt],ge[Qe],ge[At]),S=_t,E=vt,N=Qe,P=At),(We.equals(R)===!1||ft!==D)&&(t.blendColor(We.r,We.g,We.b,ft),R.copy(We),D=ft),_=we,k=!1}function oe(we,xt){we.side===ju?ae(t.CULL_FACE):te(t.CULL_FACE);let _t=we.side===Mo;xt&&(_t=!_t),Le(_t),we.blending===Hm&&we.transparent===!1?be(Oc):be(we.blending,we.blendEquation,we.blendSrc,we.blendDst,we.blendEquationAlpha,we.blendSrcAlpha,we.blendDstAlpha,we.blendColor,we.blendAlpha,we.premultipliedAlpha),s.setFunc(we.depthFunc),s.setTest(we.depthTest),s.setMask(we.depthWrite),a.setMask(we.colorWrite);const vt=we.stencilWrite;o.setTest(vt),vt&&(o.setMask(we.stencilWriteMask),o.setFunc(we.stencilFunc,we.stencilRef,we.stencilFuncMask),o.setOp(we.stencilFail,we.stencilZFail,we.stencilZPass)),xe(we.polygonOffset,we.polygonOffsetFactor,we.polygonOffsetUnits),we.alphaToCoverage===!0?te(t.SAMPLE_ALPHA_TO_COVERAGE):ae(t.SAMPLE_ALPHA_TO_COVERAGE)}function Le(we){L!==we&&(we?t.frontFace(t.CW):t.frontFace(t.CCW),L=we)}function Ve(we){we!==xse?(te(t.CULL_FACE),we!==$&&(we===b5?t.cullFace(t.BACK):we===_se?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):ae(t.CULL_FACE),$=we}function Ze(we){we!==B&&(O&&t.lineWidth(we),B=we)}function xe(we,xt,_t){we?(te(t.POLYGON_OFFSET_FILL),(q!==xt||U!==_t)&&(t.polygonOffset(xt,_t),q=xt,U=_t)):ae(t.POLYGON_OFFSET_FILL)}function ht(we){we?te(t.SCISSOR_TEST):ae(t.SCISSOR_TEST)}function Fe(we){we===void 0&&(we=t.TEXTURE0+J-1),H!==we&&(t.activeTexture(we),H=we)}function et(we,xt,_t){_t===void 0&&(H===null?_t=t.TEXTURE0+J-1:_t=H);let vt=ee[_t];vt===void 0&&(vt={type:void 0,texture:void 0},ee[_t]=vt),(vt.type!==we||vt.texture!==xt)&&(H!==_t&&(t.activeTexture(_t),H=_t),t.bindTexture(we,xt||G[we]),vt.type=we,vt.texture=xt)}function de(){const we=ee[H];we!==void 0&&we.type!==void 0&&(t.bindTexture(we.type,null),we.type=void 0,we.texture=void 0)}function re(){try{t.compressedTexImage2D(...arguments)}catch(we){we("WebGLState:",we)}}function Ce(){try{t.compressedTexImage3D(...arguments)}catch(we){we("WebGLState:",we)}}function ke(){try{t.texSubImage2D(...arguments)}catch(we){we("WebGLState:",we)}}function De(){try{t.texSubImage3D(...arguments)}catch(we){we("WebGLState:",we)}}function je(){try{t.compressedTexSubImage2D(...arguments)}catch(we){we("WebGLState:",we)}}function mt(){try{t.compressedTexSubImage3D(...arguments)}catch(we){we("WebGLState:",we)}}function rt(){try{t.texStorage2D(...arguments)}catch(we){we("WebGLState:",we)}}function bt(){try{t.texStorage3D(...arguments)}catch(we){we("WebGLState:",we)}}function dt(){try{t.texImage2D(...arguments)}catch(we){we("WebGLState:",we)}}function Je(){try{t.texImage3D(...arguments)}catch(we){we("WebGLState:",we)}}function ot(we){K.equals(we)===!1&&(t.scissor(we.x,we.y,we.z,we.w),K.copy(we))}function It(we){X.equals(we)===!1&&(t.viewport(we.x,we.y,we.z,we.w),X.copy(we))}function Ct(we,xt){let _t=u.get(xt);_t===void 0&&(_t=new WeakMap,u.set(xt,_t));let vt=_t.get(we);vt===void 0&&(vt=t.getUniformBlockIndex(xt,we.name),_t.set(we,vt))}function St(we,xt){const vt=u.get(xt).get(we);c.get(xt)!==vt&&(t.uniformBlockBinding(xt,vt,we.__bindingPointIndex),c.set(xt,vt))}function Bt(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),s.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),h={},H=null,ee={},f={},m=new WeakMap,g=[],v=null,x=!1,_=null,w=null,S=null,E=null,A=null,N=null,P=null,R=new or(0,0,0),D=0,k=!1,L=null,$=null,B=null,q=null,U=null,K.set(0,0,t.canvas.width,t.canvas.height),X.set(0,0,t.canvas.width,t.canvas.height),a.reset(),s.reset(),o.reset()}return{buffers:{color:a,depth:s,stencil:o},enable:te,disable:ae,bindFramebuffer:pe,drawBuffers:ye,useProgram:me,setBlending:be,setMaterial:oe,setFlipSided:Le,setCullFace:Ve,setLineWidth:Ze,setPolygonOffset:xe,setScissorTest:ht,activeTexture:Fe,bindTexture:et,unbindTexture:de,compressedTexImage2D:re,compressedTexImage3D:Ce,texImage2D:dt,texImage3D:Je,updateUBOMapping:Ct,uniformBlockBinding:St,texStorage2D:rt,texStorage3D:bt,texSubImage2D:ke,texSubImage3D:De,compressedTexSubImage2D:je,compressedTexSubImage3D:mt,scissor:ot,viewport:It,reset:Bt}}function hhe(t,e,n,r,i,a,s){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Sn,h=new WeakMap;let f;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(de,re){return g?new OffscreenCanvas(de,re):I3("canvas")}function x(de,re,Ce){let ke=1;const De=et(de);if((De.width>Ce||De.height>Ce)&&(ke=Ce/Math.max(De.width,De.height)),ke<1)if(typeof HTMLImageElement<"u"&&de instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&de instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&de instanceof ImageBitmap||typeof VideoFrame<"u"&&de instanceof VideoFrame){const je=Math.floor(ke*De.width),mt=Math.floor(ke*De.height);f===void 0&&(f=v(je,mt));const rt=re?v(je,mt):f;return rt.width=je,rt.height=mt,rt.getContext("2d").drawImage(de,0,0,je,mt),kn("WebGLRenderer: Texture has been resized from ("+De.width+"x"+De.height+") to ("+je+"x"+mt+")."),rt}else return"data"in de&&kn("WebGLRenderer: Image in DataTexture is too big ("+De.width+"x"+De.height+")."),de;return de}function _(de){return de.generateMipmaps}function w(de){t.generateMipmap(de)}function S(de){return de.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:de.isWebGL3DRenderTarget?t.TEXTURE_3D:de.isWebGLArrayRenderTarget||de.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function E(de,re,Ce,ke,De=!1){if(de!==null){if(t[de]!==void 0)return t[de];kn("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+de+"'")}let je=re;if(re===t.RED&&(Ce===t.FLOAT&&(je=t.R32F),Ce===t.HALF_FLOAT&&(je=t.R16F),Ce===t.UNSIGNED_BYTE&&(je=t.R8)),re===t.RED_INTEGER&&(Ce===t.UNSIGNED_BYTE&&(je=t.R8UI),Ce===t.UNSIGNED_SHORT&&(je=t.R16UI),Ce===t.UNSIGNED_INT&&(je=t.R32UI),Ce===t.BYTE&&(je=t.R8I),Ce===t.SHORT&&(je=t.R16I),Ce===t.INT&&(je=t.R32I)),re===t.RG&&(Ce===t.FLOAT&&(je=t.RG32F),Ce===t.HALF_FLOAT&&(je=t.RG16F),Ce===t.UNSIGNED_BYTE&&(je=t.RG8)),re===t.RG_INTEGER&&(Ce===t.UNSIGNED_BYTE&&(je=t.RG8UI),Ce===t.UNSIGNED_SHORT&&(je=t.RG16UI),Ce===t.UNSIGNED_INT&&(je=t.RG32UI),Ce===t.BYTE&&(je=t.RG8I),Ce===t.SHORT&&(je=t.RG16I),Ce===t.INT&&(je=t.RG32I)),re===t.RGB_INTEGER&&(Ce===t.UNSIGNED_BYTE&&(je=t.RGB8UI),Ce===t.UNSIGNED_SHORT&&(je=t.RGB16UI),Ce===t.UNSIGNED_INT&&(je=t.RGB32UI),Ce===t.BYTE&&(je=t.RGB8I),Ce===t.SHORT&&(je=t.RGB16I),Ce===t.INT&&(je=t.RGB32I)),re===t.RGBA_INTEGER&&(Ce===t.UNSIGNED_BYTE&&(je=t.RGBA8UI),Ce===t.UNSIGNED_SHORT&&(je=t.RGBA16UI),Ce===t.UNSIGNED_INT&&(je=t.RGBA32UI),Ce===t.BYTE&&(je=t.RGBA8I),Ce===t.SHORT&&(je=t.RGBA16I),Ce===t.INT&&(je=t.RGBA32I)),re===t.RGB&&(Ce===t.UNSIGNED_INT_5_9_9_9_REV&&(je=t.RGB9_E5),Ce===t.UNSIGNED_INT_10F_11F_11F_REV&&(je=t.R11F_G11F_B10F)),re===t.RGBA){const mt=De?k3:pr.getTransfer(ke);Ce===t.FLOAT&&(je=t.RGBA32F),Ce===t.HALF_FLOAT&&(je=t.RGBA16F),Ce===t.UNSIGNED_BYTE&&(je=mt===Fr?t.SRGB8_ALPHA8:t.RGBA8),Ce===t.UNSIGNED_SHORT_4_4_4_4&&(je=t.RGBA4),Ce===t.UNSIGNED_SHORT_5_5_5_1&&(je=t.RGB5_A1)}return(je===t.R16F||je===t.R32F||je===t.RG16F||je===t.RG32F||je===t.RGBA16F||je===t.RGBA32F)&&e.get("EXT_color_buffer_float"),je}function A(de,re){let Ce;return de?re===null||re===tg||re===s_?Ce=t.DEPTH24_STENCIL8:re===Rc?Ce=t.DEPTH32F_STENCIL8:re===a_&&(Ce=t.DEPTH24_STENCIL8,kn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):re===null||re===tg||re===s_?Ce=t.DEPTH_COMPONENT24:re===Rc?Ce=t.DEPTH_COMPONENT32F:re===a_&&(Ce=t.DEPTH_COMPONENT16),Ce}function N(de,re){return _(de)===!0||de.isFramebufferTexture&&de.minFilter!==Hs&&de.minFilter!==ys?Math.log2(Math.max(re.width,re.height))+1:de.mipmaps!==void 0&&de.mipmaps.length>0?de.mipmaps.length:de.isCompressedTexture&&Array.isArray(de.image)?re.mipmaps.length:1}function P(de){const re=de.target;re.removeEventListener("dispose",P),D(re),re.isVideoTexture&&h.delete(re)}function R(de){const re=de.target;re.removeEventListener("dispose",R),L(re)}function D(de){const re=r.get(de);if(re.__webglInit===void 0)return;const Ce=de.source,ke=m.get(Ce);if(ke){const De=ke[re.__cacheKey];De.usedTimes--,De.usedTimes===0&&k(de),Object.keys(ke).length===0&&m.delete(Ce)}r.remove(de)}function k(de){const re=r.get(de);t.deleteTexture(re.__webglTexture);const Ce=de.source,ke=m.get(Ce);delete ke[re.__cacheKey],s.memory.textures--}function L(de){const re=r.get(de);if(de.depthTexture&&(de.depthTexture.dispose(),r.remove(de.depthTexture)),de.isWebGLCubeRenderTarget)for(let ke=0;ke<6;ke++){if(Array.isArray(re.__webglFramebuffer[ke]))for(let De=0;De<re.__webglFramebuffer[ke].length;De++)t.deleteFramebuffer(re.__webglFramebuffer[ke][De]);else t.deleteFramebuffer(re.__webglFramebuffer[ke]);re.__webglDepthbuffer&&t.deleteRenderbuffer(re.__webglDepthbuffer[ke])}else{if(Array.isArray(re.__webglFramebuffer))for(let ke=0;ke<re.__webglFramebuffer.length;ke++)t.deleteFramebuffer(re.__webglFramebuffer[ke]);else t.deleteFramebuffer(re.__webglFramebuffer);if(re.__webglDepthbuffer&&t.deleteRenderbuffer(re.__webglDepthbuffer),re.__webglMultisampledFramebuffer&&t.deleteFramebuffer(re.__webglMultisampledFramebuffer),re.__webglColorRenderbuffer)for(let ke=0;ke<re.__webglColorRenderbuffer.length;ke++)re.__webglColorRenderbuffer[ke]&&t.deleteRenderbuffer(re.__webglColorRenderbuffer[ke]);re.__webglDepthRenderbuffer&&t.deleteRenderbuffer(re.__webglDepthRenderbuffer)}const Ce=de.textures;for(let ke=0,De=Ce.length;ke<De;ke++){const je=r.get(Ce[ke]);je.__webglTexture&&(t.deleteTexture(je.__webglTexture),s.memory.textures--),r.remove(Ce[ke])}r.remove(de)}let $=0;function B(){$=0}function q(){const de=$;return de>=i.maxTextures&&kn("WebGLTextures: Trying to use "+de+" texture units while this GPU supports only "+i.maxTextures),$+=1,de}function U(de){const re=[];return re.push(de.wrapS),re.push(de.wrapT),re.push(de.wrapR||0),re.push(de.magFilter),re.push(de.minFilter),re.push(de.anisotropy),re.push(de.internalFormat),re.push(de.format),re.push(de.type),re.push(de.generateMipmaps),re.push(de.premultiplyAlpha),re.push(de.flipY),re.push(de.unpackAlignment),re.push(de.colorSpace),re.join()}function J(de,re){const Ce=r.get(de);if(de.isVideoTexture&&ht(de),de.isRenderTargetTexture===!1&&de.isExternalTexture!==!0&&de.version>0&&Ce.__version!==de.version){const ke=de.image;if(ke===null)kn("WebGLRenderer: Texture marked for update but no image data found.");else if(ke.complete===!1)kn("WebGLRenderer: Texture marked for update but image is incomplete");else{G(Ce,de,re);return}}else de.isExternalTexture&&(Ce.__webglTexture=de.sourceTexture?de.sourceTexture:null);n.bindTexture(t.TEXTURE_2D,Ce.__webglTexture,t.TEXTURE0+re)}function O(de,re){const Ce=r.get(de);if(de.isRenderTargetTexture===!1&&de.version>0&&Ce.__version!==de.version){G(Ce,de,re);return}else de.isExternalTexture&&(Ce.__webglTexture=de.sourceTexture?de.sourceTexture:null);n.bindTexture(t.TEXTURE_2D_ARRAY,Ce.__webglTexture,t.TEXTURE0+re)}function z(de,re){const Ce=r.get(de);if(de.isRenderTargetTexture===!1&&de.version>0&&Ce.__version!==de.version){G(Ce,de,re);return}n.bindTexture(t.TEXTURE_3D,Ce.__webglTexture,t.TEXTURE0+re)}function V(de,re){const Ce=r.get(de);if(de.version>0&&Ce.__version!==de.version){te(Ce,de,re);return}n.bindTexture(t.TEXTURE_CUBE_MAP,Ce.__webglTexture,t.TEXTURE0+re)}const H={[DN]:t.REPEAT,[Fd]:t.CLAMP_TO_EDGE,[kN]:t.MIRRORED_REPEAT},ee={[Hs]:t.NEAREST,[Vse]:t.NEAREST_MIPMAP_NEAREST,[kE]:t.NEAREST_MIPMAP_LINEAR,[ys]:t.LINEAR,[l4]:t.LINEAR_MIPMAP_NEAREST,[jm]:t.LINEAR_MIPMAP_LINEAR},Y={[Kse]:t.NEVER,[eoe]:t.ALWAYS,[Xse]:t.LESS,[E9]:t.LEQUAL,[Yse]:t.EQUAL,[Qse]:t.GEQUAL,[Zse]:t.GREATER,[Jse]:t.NOTEQUAL};function Z(de,re){if(re.type===Rc&&e.has("OES_texture_float_linear")===!1&&(re.magFilter===ys||re.magFilter===l4||re.magFilter===kE||re.magFilter===jm||re.minFilter===ys||re.minFilter===l4||re.minFilter===kE||re.minFilter===jm)&&kn("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(de,t.TEXTURE_WRAP_S,H[re.wrapS]),t.texParameteri(de,t.TEXTURE_WRAP_T,H[re.wrapT]),(de===t.TEXTURE_3D||de===t.TEXTURE_2D_ARRAY)&&t.texParameteri(de,t.TEXTURE_WRAP_R,H[re.wrapR]),t.texParameteri(de,t.TEXTURE_MAG_FILTER,ee[re.magFilter]),t.texParameteri(de,t.TEXTURE_MIN_FILTER,ee[re.minFilter]),re.compareFunction&&(t.texParameteri(de,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(de,t.TEXTURE_COMPARE_FUNC,Y[re.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(re.magFilter===Hs||re.minFilter!==kE&&re.minFilter!==jm||re.type===Rc&&e.has("OES_texture_float_linear")===!1)return;if(re.anisotropy>1||r.get(re).__currentAnisotropy){const Ce=e.get("EXT_texture_filter_anisotropic");t.texParameterf(de,Ce.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(re.anisotropy,i.getMaxAnisotropy())),r.get(re).__currentAnisotropy=re.anisotropy}}}function K(de,re){let Ce=!1;de.__webglInit===void 0&&(de.__webglInit=!0,re.addEventListener("dispose",P));const ke=re.source;let De=m.get(ke);De===void 0&&(De={},m.set(ke,De));const je=U(re);if(je!==de.__cacheKey){De[je]===void 0&&(De[je]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,Ce=!0),De[je].usedTimes++;const mt=De[de.__cacheKey];mt!==void 0&&(De[de.__cacheKey].usedTimes--,mt.usedTimes===0&&k(re)),de.__cacheKey=je,de.__webglTexture=De[je].texture}return Ce}function X(de,re,Ce){return Math.floor(Math.floor(de/Ce)/re)}function ne(de,re,Ce,ke){const je=de.updateRanges;if(je.length===0)n.texSubImage2D(t.TEXTURE_2D,0,0,0,re.width,re.height,Ce,ke,re.data);else{je.sort((Je,ot)=>Je.start-ot.start);let mt=0;for(let Je=1;Je<je.length;Je++){const ot=je[mt],It=je[Je],Ct=ot.start+ot.count,St=X(It.start,re.width,4),Bt=X(ot.start,re.width,4);It.start<=Ct+1&&St===Bt&&X(It.start+It.count-1,re.width,4)===St?ot.count=Math.max(ot.count,It.start+It.count-ot.start):(++mt,je[mt]=It)}je.length=mt+1;const rt=t.getParameter(t.UNPACK_ROW_LENGTH),bt=t.getParameter(t.UNPACK_SKIP_PIXELS),dt=t.getParameter(t.UNPACK_SKIP_ROWS);t.pixelStorei(t.UNPACK_ROW_LENGTH,re.width);for(let Je=0,ot=je.length;Je<ot;Je++){const It=je[Je],Ct=Math.floor(It.start/4),St=Math.ceil(It.count/4),Bt=Ct%re.width,we=Math.floor(Ct/re.width),xt=St,_t=1;t.pixelStorei(t.UNPACK_SKIP_PIXELS,Bt),t.pixelStorei(t.UNPACK_SKIP_ROWS,we),n.texSubImage2D(t.TEXTURE_2D,0,Bt,we,xt,_t,Ce,ke,re.data)}de.clearUpdateRanges(),t.pixelStorei(t.UNPACK_ROW_LENGTH,rt),t.pixelStorei(t.UNPACK_SKIP_PIXELS,bt),t.pixelStorei(t.UNPACK_SKIP_ROWS,dt)}}function G(de,re,Ce){let ke=t.TEXTURE_2D;(re.isDataArrayTexture||re.isCompressedArrayTexture)&&(ke=t.TEXTURE_2D_ARRAY),re.isData3DTexture&&(ke=t.TEXTURE_3D);const De=K(de,re),je=re.source;n.bindTexture(ke,de.__webglTexture,t.TEXTURE0+Ce);const mt=r.get(je);if(je.version!==mt.__version||De===!0){n.activeTexture(t.TEXTURE0+Ce);const rt=pr.getPrimaries(pr.workingColorSpace),bt=re.colorSpace===bf?null:pr.getPrimaries(re.colorSpace),dt=re.colorSpace===bf||rt===bt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,re.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,re.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,re.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,dt);let Je=x(re.image,!1,i.maxTextureSize);Je=Fe(re,Je);const ot=a.convert(re.format,re.colorSpace),It=a.convert(re.type);let Ct=E(re.internalFormat,ot,It,re.colorSpace,re.isVideoTexture);Z(ke,re);let St;const Bt=re.mipmaps,we=re.isVideoTexture!==!0,xt=mt.__version===void 0||De===!0,_t=je.dataReady,vt=N(re,Je);if(re.isDepthTexture)Ct=A(re.format===l_,re.type),xt&&(we?n.texStorage2D(t.TEXTURE_2D,1,Ct,Je.width,Je.height):n.texImage2D(t.TEXTURE_2D,0,Ct,Je.width,Je.height,0,ot,It,null));else if(re.isDataTexture)if(Bt.length>0){we&&xt&&n.texStorage2D(t.TEXTURE_2D,vt,Ct,Bt[0].width,Bt[0].height);for(let it=0,Qe=Bt.length;it<Qe;it++)St=Bt[it],we?_t&&n.texSubImage2D(t.TEXTURE_2D,it,0,0,St.width,St.height,ot,It,St.data):n.texImage2D(t.TEXTURE_2D,it,Ct,St.width,St.height,0,ot,It,St.data);re.generateMipmaps=!1}else we?(xt&&n.texStorage2D(t.TEXTURE_2D,vt,Ct,Je.width,Je.height),_t&&ne(re,Je,ot,It)):n.texImage2D(t.TEXTURE_2D,0,Ct,Je.width,Je.height,0,ot,It,Je.data);else if(re.isCompressedTexture)if(re.isCompressedArrayTexture){we&&xt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,vt,Ct,Bt[0].width,Bt[0].height,Je.depth);for(let it=0,Qe=Bt.length;it<Qe;it++)if(St=Bt[it],re.format!==Ol)if(ot!==null)if(we){if(_t)if(re.layerUpdates.size>0){const At=q5(St.width,St.height,re.format,re.type);for(const We of re.layerUpdates){const ft=St.data.subarray(We*At/St.data.BYTES_PER_ELEMENT,(We+1)*At/St.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,it,0,0,We,St.width,St.height,1,ot,ft)}re.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,it,0,0,0,St.width,St.height,Je.depth,ot,St.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,it,Ct,St.width,St.height,Je.depth,0,St.data,0,0);else kn("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else we?_t&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,it,0,0,0,St.width,St.height,Je.depth,ot,It,St.data):n.texImage3D(t.TEXTURE_2D_ARRAY,it,Ct,St.width,St.height,Je.depth,0,ot,It,St.data)}else{we&&xt&&n.texStorage2D(t.TEXTURE_2D,vt,Ct,Bt[0].width,Bt[0].height);for(let it=0,Qe=Bt.length;it<Qe;it++)St=Bt[it],re.format!==Ol?ot!==null?we?_t&&n.compressedTexSubImage2D(t.TEXTURE_2D,it,0,0,St.width,St.height,ot,St.data):n.compressedTexImage2D(t.TEXTURE_2D,it,Ct,St.width,St.height,0,St.data):kn("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):we?_t&&n.texSubImage2D(t.TEXTURE_2D,it,0,0,St.width,St.height,ot,It,St.data):n.texImage2D(t.TEXTURE_2D,it,Ct,St.width,St.height,0,ot,It,St.data)}else if(re.isDataArrayTexture)if(we){if(xt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,vt,Ct,Je.width,Je.height,Je.depth),_t)if(re.layerUpdates.size>0){const it=q5(Je.width,Je.height,re.format,re.type);for(const Qe of re.layerUpdates){const At=Je.data.subarray(Qe*it/Je.data.BYTES_PER_ELEMENT,(Qe+1)*it/Je.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,Qe,Je.width,Je.height,1,ot,It,At)}re.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Je.width,Je.height,Je.depth,ot,It,Je.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,Ct,Je.width,Je.height,Je.depth,0,ot,It,Je.data);else if(re.isData3DTexture)we?(xt&&n.texStorage3D(t.TEXTURE_3D,vt,Ct,Je.width,Je.height,Je.depth),_t&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Je.width,Je.height,Je.depth,ot,It,Je.data)):n.texImage3D(t.TEXTURE_3D,0,Ct,Je.width,Je.height,Je.depth,0,ot,It,Je.data);else if(re.isFramebufferTexture){if(xt)if(we)n.texStorage2D(t.TEXTURE_2D,vt,Ct,Je.width,Je.height);else{let it=Je.width,Qe=Je.height;for(let At=0;At<vt;At++)n.texImage2D(t.TEXTURE_2D,At,Ct,it,Qe,0,ot,It,null),it>>=1,Qe>>=1}}else if(Bt.length>0){if(we&&xt){const it=et(Bt[0]);n.texStorage2D(t.TEXTURE_2D,vt,Ct,it.width,it.height)}for(let it=0,Qe=Bt.length;it<Qe;it++)St=Bt[it],we?_t&&n.texSubImage2D(t.TEXTURE_2D,it,0,0,ot,It,St):n.texImage2D(t.TEXTURE_2D,it,Ct,ot,It,St);re.generateMipmaps=!1}else if(we){if(xt){const it=et(Je);n.texStorage2D(t.TEXTURE_2D,vt,Ct,it.width,it.height)}_t&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,ot,It,Je)}else n.texImage2D(t.TEXTURE_2D,0,Ct,ot,It,Je);_(re)&&w(ke),mt.__version=je.version,re.onUpdate&&re.onUpdate(re)}de.__version=re.version}function te(de,re,Ce){if(re.image.length!==6)return;const ke=K(de,re),De=re.source;n.bindTexture(t.TEXTURE_CUBE_MAP,de.__webglTexture,t.TEXTURE0+Ce);const je=r.get(De);if(De.version!==je.__version||ke===!0){n.activeTexture(t.TEXTURE0+Ce);const mt=pr.getPrimaries(pr.workingColorSpace),rt=re.colorSpace===bf?null:pr.getPrimaries(re.colorSpace),bt=re.colorSpace===bf||mt===rt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,re.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,re.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,re.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,bt);const dt=re.isCompressedTexture||re.image[0].isCompressedTexture,Je=re.image[0]&&re.image[0].isDataTexture,ot=[];for(let Qe=0;Qe<6;Qe++)!dt&&!Je?ot[Qe]=x(re.image[Qe],!0,i.maxCubemapSize):ot[Qe]=Je?re.image[Qe].image:re.image[Qe],ot[Qe]=Fe(re,ot[Qe]);const It=ot[0],Ct=a.convert(re.format,re.colorSpace),St=a.convert(re.type),Bt=E(re.internalFormat,Ct,St,re.colorSpace),we=re.isVideoTexture!==!0,xt=je.__version===void 0||ke===!0,_t=De.dataReady;let vt=N(re,It);Z(t.TEXTURE_CUBE_MAP,re);let it;if(dt){we&&xt&&n.texStorage2D(t.TEXTURE_CUBE_MAP,vt,Bt,It.width,It.height);for(let Qe=0;Qe<6;Qe++){it=ot[Qe].mipmaps;for(let At=0;At<it.length;At++){const We=it[At];re.format!==Ol?Ct!==null?we?_t&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,At,0,0,We.width,We.height,Ct,We.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,At,Bt,We.width,We.height,0,We.data):kn("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):we?_t&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,At,0,0,We.width,We.height,Ct,St,We.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,At,Bt,We.width,We.height,0,Ct,St,We.data)}}}else{if(it=re.mipmaps,we&&xt){it.length>0&&vt++;const Qe=et(ot[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,vt,Bt,Qe.width,Qe.height)}for(let Qe=0;Qe<6;Qe++)if(Je){we?_t&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,0,0,ot[Qe].width,ot[Qe].height,Ct,St,ot[Qe].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,Bt,ot[Qe].width,ot[Qe].height,0,Ct,St,ot[Qe].data);for(let At=0;At<it.length;At++){const ft=it[At].image[Qe].image;we?_t&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,At+1,0,0,ft.width,ft.height,Ct,St,ft.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,At+1,Bt,ft.width,ft.height,0,Ct,St,ft.data)}}else{we?_t&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,0,0,Ct,St,ot[Qe]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,Bt,Ct,St,ot[Qe]);for(let At=0;At<it.length;At++){const We=it[At];we?_t&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,At+1,0,0,Ct,St,We.image[Qe]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,At+1,Bt,Ct,St,We.image[Qe])}}}_(re)&&w(t.TEXTURE_CUBE_MAP),je.__version=De.version,re.onUpdate&&re.onUpdate(re)}de.__version=re.version}function ae(de,re,Ce,ke,De,je){const mt=a.convert(Ce.format,Ce.colorSpace),rt=a.convert(Ce.type),bt=E(Ce.internalFormat,mt,rt,Ce.colorSpace),dt=r.get(re),Je=r.get(Ce);if(Je.__renderTarget=re,!dt.__hasExternalTextures){const ot=Math.max(1,re.width>>je),It=Math.max(1,re.height>>je);De===t.TEXTURE_3D||De===t.TEXTURE_2D_ARRAY?n.texImage3D(De,je,bt,ot,It,re.depth,0,mt,rt,null):n.texImage2D(De,je,bt,ot,It,0,mt,rt,null)}n.bindFramebuffer(t.FRAMEBUFFER,de),xe(re)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,ke,De,Je.__webglTexture,0,Ze(re)):(De===t.TEXTURE_2D||De>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&De<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,ke,De,Je.__webglTexture,je),n.bindFramebuffer(t.FRAMEBUFFER,null)}function pe(de,re,Ce){if(t.bindRenderbuffer(t.RENDERBUFFER,de),re.depthBuffer){const ke=re.depthTexture,De=ke&&ke.isDepthTexture?ke.type:null,je=A(re.stencilBuffer,De),mt=re.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,rt=Ze(re);xe(re)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,rt,je,re.width,re.height):Ce?t.renderbufferStorageMultisample(t.RENDERBUFFER,rt,je,re.width,re.height):t.renderbufferStorage(t.RENDERBUFFER,je,re.width,re.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,mt,t.RENDERBUFFER,de)}else{const ke=re.textures;for(let De=0;De<ke.length;De++){const je=ke[De],mt=a.convert(je.format,je.colorSpace),rt=a.convert(je.type),bt=E(je.internalFormat,mt,rt,je.colorSpace),dt=Ze(re);Ce&&xe(re)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,dt,bt,re.width,re.height):xe(re)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,dt,bt,re.width,re.height):t.renderbufferStorage(t.RENDERBUFFER,bt,re.width,re.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function ye(de,re){if(re&&re.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,de),!(re.depthTexture&&re.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ke=r.get(re.depthTexture);ke.__renderTarget=re,(!ke.__webglTexture||re.depthTexture.image.width!==re.width||re.depthTexture.image.height!==re.height)&&(re.depthTexture.image.width=re.width,re.depthTexture.image.height=re.height,re.depthTexture.needsUpdate=!0),J(re.depthTexture,0);const De=ke.__webglTexture,je=Ze(re);if(re.depthTexture.format===o_)xe(re)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,De,0,je):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,De,0);else if(re.depthTexture.format===l_)xe(re)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,De,0,je):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,De,0);else throw new Error("Unknown depthTexture format")}function me(de){const re=r.get(de),Ce=de.isWebGLCubeRenderTarget===!0;if(re.__boundDepthTexture!==de.depthTexture){const ke=de.depthTexture;if(re.__depthDisposeCallback&&re.__depthDisposeCallback(),ke){const De=()=>{delete re.__boundDepthTexture,delete re.__depthDisposeCallback,ke.removeEventListener("dispose",De)};ke.addEventListener("dispose",De),re.__depthDisposeCallback=De}re.__boundDepthTexture=ke}if(de.depthTexture&&!re.__autoAllocateDepthBuffer){if(Ce)throw new Error("target.depthTexture not supported in Cube render targets");const ke=de.texture.mipmaps;ke&&ke.length>0?ye(re.__webglFramebuffer[0],de):ye(re.__webglFramebuffer,de)}else if(Ce){re.__webglDepthbuffer=[];for(let ke=0;ke<6;ke++)if(n.bindFramebuffer(t.FRAMEBUFFER,re.__webglFramebuffer[ke]),re.__webglDepthbuffer[ke]===void 0)re.__webglDepthbuffer[ke]=t.createRenderbuffer(),pe(re.__webglDepthbuffer[ke],de,!1);else{const De=de.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,je=re.__webglDepthbuffer[ke];t.bindRenderbuffer(t.RENDERBUFFER,je),t.framebufferRenderbuffer(t.FRAMEBUFFER,De,t.RENDERBUFFER,je)}}else{const ke=de.texture.mipmaps;if(ke&&ke.length>0?n.bindFramebuffer(t.FRAMEBUFFER,re.__webglFramebuffer[0]):n.bindFramebuffer(t.FRAMEBUFFER,re.__webglFramebuffer),re.__webglDepthbuffer===void 0)re.__webglDepthbuffer=t.createRenderbuffer(),pe(re.__webglDepthbuffer,de,!1);else{const De=de.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,je=re.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,je),t.framebufferRenderbuffer(t.FRAMEBUFFER,De,t.RENDERBUFFER,je)}}n.bindFramebuffer(t.FRAMEBUFFER,null)}function fe(de,re,Ce){const ke=r.get(de);re!==void 0&&ae(ke.__webglFramebuffer,de,de.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),Ce!==void 0&&me(de)}function ge(de){const re=de.texture,Ce=r.get(de),ke=r.get(re);de.addEventListener("dispose",R);const De=de.textures,je=de.isWebGLCubeRenderTarget===!0,mt=De.length>1;if(mt||(ke.__webglTexture===void 0&&(ke.__webglTexture=t.createTexture()),ke.__version=re.version,s.memory.textures++),je){Ce.__webglFramebuffer=[];for(let rt=0;rt<6;rt++)if(re.mipmaps&&re.mipmaps.length>0){Ce.__webglFramebuffer[rt]=[];for(let bt=0;bt<re.mipmaps.length;bt++)Ce.__webglFramebuffer[rt][bt]=t.createFramebuffer()}else Ce.__webglFramebuffer[rt]=t.createFramebuffer()}else{if(re.mipmaps&&re.mipmaps.length>0){Ce.__webglFramebuffer=[];for(let rt=0;rt<re.mipmaps.length;rt++)Ce.__webglFramebuffer[rt]=t.createFramebuffer()}else Ce.__webglFramebuffer=t.createFramebuffer();if(mt)for(let rt=0,bt=De.length;rt<bt;rt++){const dt=r.get(De[rt]);dt.__webglTexture===void 0&&(dt.__webglTexture=t.createTexture(),s.memory.textures++)}if(de.samples>0&&xe(de)===!1){Ce.__webglMultisampledFramebuffer=t.createFramebuffer(),Ce.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,Ce.__webglMultisampledFramebuffer);for(let rt=0;rt<De.length;rt++){const bt=De[rt];Ce.__webglColorRenderbuffer[rt]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,Ce.__webglColorRenderbuffer[rt]);const dt=a.convert(bt.format,bt.colorSpace),Je=a.convert(bt.type),ot=E(bt.internalFormat,dt,Je,bt.colorSpace,de.isXRRenderTarget===!0),It=Ze(de);t.renderbufferStorageMultisample(t.RENDERBUFFER,It,ot,de.width,de.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+rt,t.RENDERBUFFER,Ce.__webglColorRenderbuffer[rt])}t.bindRenderbuffer(t.RENDERBUFFER,null),de.depthBuffer&&(Ce.__webglDepthRenderbuffer=t.createRenderbuffer(),pe(Ce.__webglDepthRenderbuffer,de,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(je){n.bindTexture(t.TEXTURE_CUBE_MAP,ke.__webglTexture),Z(t.TEXTURE_CUBE_MAP,re);for(let rt=0;rt<6;rt++)if(re.mipmaps&&re.mipmaps.length>0)for(let bt=0;bt<re.mipmaps.length;bt++)ae(Ce.__webglFramebuffer[rt][bt],de,re,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+rt,bt);else ae(Ce.__webglFramebuffer[rt],de,re,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+rt,0);_(re)&&w(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(mt){for(let rt=0,bt=De.length;rt<bt;rt++){const dt=De[rt],Je=r.get(dt);let ot=t.TEXTURE_2D;(de.isWebGL3DRenderTarget||de.isWebGLArrayRenderTarget)&&(ot=de.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(ot,Je.__webglTexture),Z(ot,dt),ae(Ce.__webglFramebuffer,de,dt,t.COLOR_ATTACHMENT0+rt,ot,0),_(dt)&&w(ot)}n.unbindTexture()}else{let rt=t.TEXTURE_2D;if((de.isWebGL3DRenderTarget||de.isWebGLArrayRenderTarget)&&(rt=de.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(rt,ke.__webglTexture),Z(rt,re),re.mipmaps&&re.mipmaps.length>0)for(let bt=0;bt<re.mipmaps.length;bt++)ae(Ce.__webglFramebuffer[bt],de,re,t.COLOR_ATTACHMENT0,rt,bt);else ae(Ce.__webglFramebuffer,de,re,t.COLOR_ATTACHMENT0,rt,0);_(re)&&w(rt),n.unbindTexture()}de.depthBuffer&&me(de)}function be(de){const re=de.textures;for(let Ce=0,ke=re.length;Ce<ke;Ce++){const De=re[Ce];if(_(De)){const je=S(de),mt=r.get(De).__webglTexture;n.bindTexture(je,mt),w(je),n.unbindTexture()}}}const oe=[],Le=[];function Ve(de){if(de.samples>0){if(xe(de)===!1){const re=de.textures,Ce=de.width,ke=de.height;let De=t.COLOR_BUFFER_BIT;const je=de.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,mt=r.get(de),rt=re.length>1;if(rt)for(let dt=0;dt<re.length;dt++)n.bindFramebuffer(t.FRAMEBUFFER,mt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+dt,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,mt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+dt,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,mt.__webglMultisampledFramebuffer);const bt=de.texture.mipmaps;bt&&bt.length>0?n.bindFramebuffer(t.DRAW_FRAMEBUFFER,mt.__webglFramebuffer[0]):n.bindFramebuffer(t.DRAW_FRAMEBUFFER,mt.__webglFramebuffer);for(let dt=0;dt<re.length;dt++){if(de.resolveDepthBuffer&&(de.depthBuffer&&(De|=t.DEPTH_BUFFER_BIT),de.stencilBuffer&&de.resolveStencilBuffer&&(De|=t.STENCIL_BUFFER_BIT)),rt){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,mt.__webglColorRenderbuffer[dt]);const Je=r.get(re[dt]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Je,0)}t.blitFramebuffer(0,0,Ce,ke,0,0,Ce,ke,De,t.NEAREST),c===!0&&(oe.length=0,Le.length=0,oe.push(t.COLOR_ATTACHMENT0+dt),de.depthBuffer&&de.resolveDepthBuffer===!1&&(oe.push(je),Le.push(je),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,Le)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,oe))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),rt)for(let dt=0;dt<re.length;dt++){n.bindFramebuffer(t.FRAMEBUFFER,mt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+dt,t.RENDERBUFFER,mt.__webglColorRenderbuffer[dt]);const Je=r.get(re[dt]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,mt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+dt,t.TEXTURE_2D,Je,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,mt.__webglMultisampledFramebuffer)}else if(de.depthBuffer&&de.resolveDepthBuffer===!1&&c){const re=de.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[re])}}}function Ze(de){return Math.min(i.maxSamples,de.samples)}function xe(de){const re=r.get(de);return de.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&re.__useRenderToTexture!==!1}function ht(de){const re=s.render.frame;h.get(de)!==re&&(h.set(de,re),de.update())}function Fe(de,re){const Ce=de.colorSpace,ke=de.format,De=de.type;return de.isCompressedTexture===!0||de.isVideoTexture===!0||Ce!==hy&&Ce!==bf&&(pr.getTransfer(Ce)===Fr?(ke!==Ol||De!==Zd)&&kn("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Yi("WebGLTextures: Unsupported texture color space:",Ce)),re}function et(de){return typeof HTMLImageElement<"u"&&de instanceof HTMLImageElement?(u.width=de.naturalWidth||de.width,u.height=de.naturalHeight||de.height):typeof VideoFrame<"u"&&de instanceof VideoFrame?(u.width=de.displayWidth,u.height=de.displayHeight):(u.width=de.width,u.height=de.height),u}this.allocateTextureUnit=q,this.resetTextureUnits=B,this.setTexture2D=J,this.setTexture2DArray=O,this.setTexture3D=z,this.setTextureCube=V,this.rebindTextures=fe,this.setupRenderTarget=ge,this.updateRenderTargetMipmap=be,this.updateMultisampleRenderTarget=Ve,this.setupDepthRenderbuffer=me,this.setupFrameBufferTexture=ae,this.useMultisampledRTT=xe}function fhe(t,e){function n(r,i=bf){let a;const s=pr.getTransfer(i);if(r===Zd)return t.UNSIGNED_BYTE;if(r===RR)return t.UNSIGNED_SHORT_4_4_4_4;if(r===IR)return t.UNSIGNED_SHORT_5_5_5_1;if(r===x9)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===_9)return t.UNSIGNED_INT_10F_11F_11F_REV;if(r===y9)return t.BYTE;if(r===b9)return t.SHORT;if(r===a_)return t.UNSIGNED_SHORT;if(r===kR)return t.INT;if(r===tg)return t.UNSIGNED_INT;if(r===Rc)return t.FLOAT;if(r===Bl)return t.HALF_FLOAT;if(r===w9)return t.ALPHA;if(r===S9)return t.RGB;if(r===Ol)return t.RGBA;if(r===o_)return t.DEPTH_COMPONENT;if(r===l_)return t.DEPTH_STENCIL;if(r===$R)return t.RED;if(r===jR)return t.RED_INTEGER;if(r===LR)return t.RG;if(r===OR)return t.RG_INTEGER;if(r===FR)return t.RGBA_INTEGER;if(r===i3||r===a3||r===s3||r===o3)if(s===Fr)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(r===i3)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===a3)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===s3)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===o3)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(r===i3)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===a3)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===s3)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===o3)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===RN||r===IN||r===$N||r===jN)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(r===RN)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===IN)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===$N)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===jN)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===LN||r===ON||r===FN)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(r===LN||r===ON)return s===Fr?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(r===FN)return s===Fr?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===BN||r===zN||r===UN||r===VN||r===HN||r===GN||r===WN||r===qN||r===KN||r===XN||r===YN||r===ZN||r===JN||r===QN)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(r===BN)return s===Fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===zN)return s===Fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===UN)return s===Fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===VN)return s===Fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===HN)return s===Fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===GN)return s===Fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===WN)return s===Fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===qN)return s===Fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===KN)return s===Fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===XN)return s===Fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===YN)return s===Fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===ZN)return s===Fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===JN)return s===Fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===QN)return s===Fr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===eD||r===tD||r===nD)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(r===eD)return s===Fr?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===tD)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===nD)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===rD||r===iD||r===aD||r===sD)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(r===rD)return a.COMPRESSED_RED_RGTC1_EXT;if(r===iD)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===aD)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===sD)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===s_?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}const phe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,mhe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class ghe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n){if(this.texture===null){const r=new O9(e.texture);(e.depthNear!==n.depthNear||e.depthFar!==n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new Fi({vertexShader:phe,fragmentShader:mhe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new zc(new Y_(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class vhe extends jy{constructor(e,n){super();const r=this;let i=null,a=1,s=null,o="local-floor",c=1,u=null,h=null,f=null,m=null,g=null,v=null;const x=typeof XRWebGLBinding<"u",_=new ghe,w={},S=n.getContextAttributes();let E=null,A=null;const N=[],P=[],R=new Sn;let D=null;const k=new Us;k.viewport=new Zi;const L=new Us;L.viewport=new Zi;const $=[k,L],B=new joe;let q=null,U=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(G){let te=N[G];return te===void 0&&(te=new D4,N[G]=te),te.getTargetRaySpace()},this.getControllerGrip=function(G){let te=N[G];return te===void 0&&(te=new D4,N[G]=te),te.getGripSpace()},this.getHand=function(G){let te=N[G];return te===void 0&&(te=new D4,N[G]=te),te.getHandSpace()};function J(G){const te=P.indexOf(G.inputSource);if(te===-1)return;const ae=N[te];ae!==void 0&&(ae.update(G.inputSource,G.frame,u||s),ae.dispatchEvent({type:G.type,data:G.inputSource}))}function O(){i.removeEventListener("select",J),i.removeEventListener("selectstart",J),i.removeEventListener("selectend",J),i.removeEventListener("squeeze",J),i.removeEventListener("squeezestart",J),i.removeEventListener("squeezeend",J),i.removeEventListener("end",O),i.removeEventListener("inputsourceschange",z);for(let G=0;G<N.length;G++){const te=P[G];te!==null&&(P[G]=null,N[G].disconnect(te))}q=null,U=null,_.reset();for(const G in w)delete w[G];e.setRenderTarget(E),g=null,m=null,f=null,i=null,A=null,ne.stop(),r.isPresenting=!1,e.setPixelRatio(D),e.setSize(R.width,R.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(G){a=G,r.isPresenting===!0&&kn("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(G){o=G,r.isPresenting===!0&&kn("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(G){u=G},this.getBaseLayer=function(){return m!==null?m:g},this.getBinding=function(){return f===null&&x&&(f=new XRWebGLBinding(i,n)),f},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(G){if(i=G,i!==null){if(E=e.getRenderTarget(),i.addEventListener("select",J),i.addEventListener("selectstart",J),i.addEventListener("selectend",J),i.addEventListener("squeeze",J),i.addEventListener("squeezestart",J),i.addEventListener("squeezeend",J),i.addEventListener("end",O),i.addEventListener("inputsourceschange",z),S.xrCompatible!==!0&&await n.makeXRCompatible(),D=e.getPixelRatio(),e.getSize(R),x&&"createProjectionLayer"in XRWebGLBinding.prototype){let ae=null,pe=null,ye=null;S.depth&&(ye=S.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,ae=S.stencil?l_:o_,pe=S.stencil?s_:tg);const me={colorFormat:n.RGBA8,depthFormat:ye,scaleFactor:a};f=this.getBinding(),m=f.createProjectionLayer(me),i.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),A=new sl(m.textureWidth,m.textureHeight,{format:Ol,type:Zd,depthTexture:new L9(m.textureWidth,m.textureHeight,pe,void 0,void 0,void 0,void 0,void 0,void 0,ae),stencilBuffer:S.stencil,colorSpace:e.outputColorSpace,samples:S.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}else{const ae={antialias:S.antialias,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:a};g=new XRWebGLLayer(i,n,ae),i.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),A=new sl(g.framebufferWidth,g.framebufferHeight,{format:Ol,type:Zd,colorSpace:e.outputColorSpace,stencilBuffer:S.stencil,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}A.isXRRenderTarget=!0,this.setFoveation(c),u=null,s=await i.requestReferenceSpace(o),ne.setContext(i),ne.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return _.getDepthTexture()};function z(G){for(let te=0;te<G.removed.length;te++){const ae=G.removed[te],pe=P.indexOf(ae);pe>=0&&(P[pe]=null,N[pe].disconnect(ae))}for(let te=0;te<G.added.length;te++){const ae=G.added[te];let pe=P.indexOf(ae);if(pe===-1){for(let me=0;me<N.length;me++)if(me>=P.length){P.push(ae),pe=me;break}else if(P[me]===null){P[me]=ae,pe=me;break}if(pe===-1)break}const ye=N[pe];ye&&ye.connect(ae)}}const V=new qe,H=new qe;function ee(G,te,ae){V.setFromMatrixPosition(te.matrixWorld),H.setFromMatrixPosition(ae.matrixWorld);const pe=V.distanceTo(H),ye=te.projectionMatrix.elements,me=ae.projectionMatrix.elements,fe=ye[14]/(ye[10]-1),ge=ye[14]/(ye[10]+1),be=(ye[9]+1)/ye[5],oe=(ye[9]-1)/ye[5],Le=(ye[8]-1)/ye[0],Ve=(me[8]+1)/me[0],Ze=fe*Le,xe=fe*Ve,ht=pe/(-Le+Ve),Fe=ht*-Le;if(te.matrixWorld.decompose(G.position,G.quaternion,G.scale),G.translateX(Fe),G.translateZ(ht),G.matrixWorld.compose(G.position,G.quaternion,G.scale),G.matrixWorldInverse.copy(G.matrixWorld).invert(),ye[10]===-1)G.projectionMatrix.copy(te.projectionMatrix),G.projectionMatrixInverse.copy(te.projectionMatrixInverse);else{const et=fe+ht,de=ge+ht,re=Ze-Fe,Ce=xe+(pe-Fe),ke=be*ge/de*et,De=oe*ge/de*et;G.projectionMatrix.makePerspective(re,Ce,ke,De,et,de),G.projectionMatrixInverse.copy(G.projectionMatrix).invert()}}function Y(G,te){te===null?G.matrixWorld.copy(G.matrix):G.matrixWorld.multiplyMatrices(te.matrixWorld,G.matrix),G.matrixWorldInverse.copy(G.matrixWorld).invert()}this.updateCamera=function(G){if(i===null)return;let te=G.near,ae=G.far;_.texture!==null&&(_.depthNear>0&&(te=_.depthNear),_.depthFar>0&&(ae=_.depthFar)),B.near=L.near=k.near=te,B.far=L.far=k.far=ae,(q!==B.near||U!==B.far)&&(i.updateRenderState({depthNear:B.near,depthFar:B.far}),q=B.near,U=B.far),B.layers.mask=G.layers.mask|6,k.layers.mask=B.layers.mask&3,L.layers.mask=B.layers.mask&5;const pe=G.parent,ye=B.cameras;Y(B,pe);for(let me=0;me<ye.length;me++)Y(ye[me],pe);ye.length===2?ee(B,k,L):B.projectionMatrix.copy(k.projectionMatrix),Z(G,B,pe)};function Z(G,te,ae){ae===null?G.matrix.copy(te.matrixWorld):(G.matrix.copy(ae.matrixWorld),G.matrix.invert(),G.matrix.multiply(te.matrixWorld)),G.matrix.decompose(G.position,G.quaternion,G.scale),G.updateMatrixWorld(!0),G.projectionMatrix.copy(te.projectionMatrix),G.projectionMatrixInverse.copy(te.projectionMatrixInverse),G.isPerspectiveCamera&&(G.fov=oD*2*Math.atan(1/G.projectionMatrix.elements[5]),G.zoom=1)}this.getCamera=function(){return B},this.getFoveation=function(){if(!(m===null&&g===null))return c},this.setFoveation=function(G){c=G,m!==null&&(m.fixedFoveation=G),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=G)},this.hasDepthSensing=function(){return _.texture!==null},this.getDepthSensingMesh=function(){return _.getMesh(B)},this.getCameraTexture=function(G){return w[G]};let K=null;function X(G,te){if(h=te.getViewerPose(u||s),v=te,h!==null){const ae=h.views;g!==null&&(e.setRenderTargetFramebuffer(A,g.framebuffer),e.setRenderTarget(A));let pe=!1;ae.length!==B.cameras.length&&(B.cameras.length=0,pe=!0);for(let ge=0;ge<ae.length;ge++){const be=ae[ge];let oe=null;if(g!==null)oe=g.getViewport(be);else{const Ve=f.getViewSubImage(m,be);oe=Ve.viewport,ge===0&&(e.setRenderTargetTextures(A,Ve.colorTexture,Ve.depthStencilTexture),e.setRenderTarget(A))}let Le=$[ge];Le===void 0&&(Le=new Us,Le.layers.enable(ge),Le.viewport=new Zi,$[ge]=Le),Le.matrix.fromArray(be.transform.matrix),Le.matrix.decompose(Le.position,Le.quaternion,Le.scale),Le.projectionMatrix.fromArray(be.projectionMatrix),Le.projectionMatrixInverse.copy(Le.projectionMatrix).invert(),Le.viewport.set(oe.x,oe.y,oe.width,oe.height),ge===0&&(B.matrix.copy(Le.matrix),B.matrix.decompose(B.position,B.quaternion,B.scale)),pe===!0&&B.cameras.push(Le)}const ye=i.enabledFeatures;if(ye&&ye.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&x){f=r.getBinding();const ge=f.getDepthInformation(ae[0]);ge&&ge.isValid&&ge.texture&&_.init(ge,i.renderState)}if(ye&&ye.includes("camera-access")&&x){e.state.unbindTexture(),f=r.getBinding();for(let ge=0;ge<ae.length;ge++){const be=ae[ge].camera;if(be){let oe=w[be];oe||(oe=new O9,w[be]=oe);const Le=f.getCameraImage(be);oe.sourceTexture=Le}}}}for(let ae=0;ae<N.length;ae++){const pe=P[ae],ye=N[ae];pe!==null&&ye!==void 0&&ye.update(pe,te,u||s)}K&&K(G,te),te.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:te}),v=null}const ne=new B9;ne.setAnimationLoop(X),this.setAnimationLoop=function(G){K=G},this.dispose=function(){}}}const fm=new Jd,yhe=new Pi;function bhe(t,e){function n(_,w){_.matrixAutoUpdate===!0&&_.updateMatrix(),w.value.copy(_.matrix)}function r(_,w){w.color.getRGB(_.fogColor.value,k9(t)),w.isFog?(_.fogNear.value=w.near,_.fogFar.value=w.far):w.isFogExp2&&(_.fogDensity.value=w.density)}function i(_,w,S,E,A){w.isMeshBasicMaterial||w.isMeshLambertMaterial?a(_,w):w.isMeshToonMaterial?(a(_,w),f(_,w)):w.isMeshPhongMaterial?(a(_,w),h(_,w)):w.isMeshStandardMaterial?(a(_,w),m(_,w),w.isMeshPhysicalMaterial&&g(_,w,A)):w.isMeshMatcapMaterial?(a(_,w),v(_,w)):w.isMeshDepthMaterial?a(_,w):w.isMeshDistanceMaterial?(a(_,w),x(_,w)):w.isMeshNormalMaterial?a(_,w):w.isLineBasicMaterial?(s(_,w),w.isLineDashedMaterial&&o(_,w)):w.isPointsMaterial?c(_,w,S,E):w.isSpriteMaterial?u(_,w):w.isShadowMaterial?(_.color.value.copy(w.color),_.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function a(_,w){_.opacity.value=w.opacity,w.color&&_.diffuse.value.copy(w.color),w.emissive&&_.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(_.map.value=w.map,n(w.map,_.mapTransform)),w.alphaMap&&(_.alphaMap.value=w.alphaMap,n(w.alphaMap,_.alphaMapTransform)),w.bumpMap&&(_.bumpMap.value=w.bumpMap,n(w.bumpMap,_.bumpMapTransform),_.bumpScale.value=w.bumpScale,w.side===Mo&&(_.bumpScale.value*=-1)),w.normalMap&&(_.normalMap.value=w.normalMap,n(w.normalMap,_.normalMapTransform),_.normalScale.value.copy(w.normalScale),w.side===Mo&&_.normalScale.value.negate()),w.displacementMap&&(_.displacementMap.value=w.displacementMap,n(w.displacementMap,_.displacementMapTransform),_.displacementScale.value=w.displacementScale,_.displacementBias.value=w.displacementBias),w.emissiveMap&&(_.emissiveMap.value=w.emissiveMap,n(w.emissiveMap,_.emissiveMapTransform)),w.specularMap&&(_.specularMap.value=w.specularMap,n(w.specularMap,_.specularMapTransform)),w.alphaTest>0&&(_.alphaTest.value=w.alphaTest);const S=e.get(w),E=S.envMap,A=S.envMapRotation;E&&(_.envMap.value=E,fm.copy(A),fm.x*=-1,fm.y*=-1,fm.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(fm.y*=-1,fm.z*=-1),_.envMapRotation.value.setFromMatrix4(yhe.makeRotationFromEuler(fm)),_.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=w.reflectivity,_.ior.value=w.ior,_.refractionRatio.value=w.refractionRatio),w.lightMap&&(_.lightMap.value=w.lightMap,_.lightMapIntensity.value=w.lightMapIntensity,n(w.lightMap,_.lightMapTransform)),w.aoMap&&(_.aoMap.value=w.aoMap,_.aoMapIntensity.value=w.aoMapIntensity,n(w.aoMap,_.aoMapTransform))}function s(_,w){_.diffuse.value.copy(w.color),_.opacity.value=w.opacity,w.map&&(_.map.value=w.map,n(w.map,_.mapTransform))}function o(_,w){_.dashSize.value=w.dashSize,_.totalSize.value=w.dashSize+w.gapSize,_.scale.value=w.scale}function c(_,w,S,E){_.diffuse.value.copy(w.color),_.opacity.value=w.opacity,_.size.value=w.size*S,_.scale.value=E*.5,w.map&&(_.map.value=w.map,n(w.map,_.uvTransform)),w.alphaMap&&(_.alphaMap.value=w.alphaMap,n(w.alphaMap,_.alphaMapTransform)),w.alphaTest>0&&(_.alphaTest.value=w.alphaTest)}function u(_,w){_.diffuse.value.copy(w.color),_.opacity.value=w.opacity,_.rotation.value=w.rotation,w.map&&(_.map.value=w.map,n(w.map,_.mapTransform)),w.alphaMap&&(_.alphaMap.value=w.alphaMap,n(w.alphaMap,_.alphaMapTransform)),w.alphaTest>0&&(_.alphaTest.value=w.alphaTest)}function h(_,w){_.specular.value.copy(w.specular),_.shininess.value=Math.max(w.shininess,1e-4)}function f(_,w){w.gradientMap&&(_.gradientMap.value=w.gradientMap)}function m(_,w){_.metalness.value=w.metalness,w.metalnessMap&&(_.metalnessMap.value=w.metalnessMap,n(w.metalnessMap,_.metalnessMapTransform)),_.roughness.value=w.roughness,w.roughnessMap&&(_.roughnessMap.value=w.roughnessMap,n(w.roughnessMap,_.roughnessMapTransform)),w.envMap&&(_.envMapIntensity.value=w.envMapIntensity)}function g(_,w,S){_.ior.value=w.ior,w.sheen>0&&(_.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),_.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(_.sheenColorMap.value=w.sheenColorMap,n(w.sheenColorMap,_.sheenColorMapTransform)),w.sheenRoughnessMap&&(_.sheenRoughnessMap.value=w.sheenRoughnessMap,n(w.sheenRoughnessMap,_.sheenRoughnessMapTransform))),w.clearcoat>0&&(_.clearcoat.value=w.clearcoat,_.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(_.clearcoatMap.value=w.clearcoatMap,n(w.clearcoatMap,_.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,n(w.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(_.clearcoatNormalMap.value=w.clearcoatNormalMap,n(w.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===Mo&&_.clearcoatNormalScale.value.negate())),w.dispersion>0&&(_.dispersion.value=w.dispersion),w.iridescence>0&&(_.iridescence.value=w.iridescence,_.iridescenceIOR.value=w.iridescenceIOR,_.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(_.iridescenceMap.value=w.iridescenceMap,n(w.iridescenceMap,_.iridescenceMapTransform)),w.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=w.iridescenceThicknessMap,n(w.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),w.transmission>0&&(_.transmission.value=w.transmission,_.transmissionSamplerMap.value=S.texture,_.transmissionSamplerSize.value.set(S.width,S.height),w.transmissionMap&&(_.transmissionMap.value=w.transmissionMap,n(w.transmissionMap,_.transmissionMapTransform)),_.thickness.value=w.thickness,w.thicknessMap&&(_.thicknessMap.value=w.thicknessMap,n(w.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=w.attenuationDistance,_.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(_.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(_.anisotropyMap.value=w.anisotropyMap,n(w.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=w.specularIntensity,_.specularColor.value.copy(w.specularColor),w.specularColorMap&&(_.specularColorMap.value=w.specularColorMap,n(w.specularColorMap,_.specularColorMapTransform)),w.specularIntensityMap&&(_.specularIntensityMap.value=w.specularIntensityMap,n(w.specularIntensityMap,_.specularIntensityMapTransform))}function v(_,w){w.matcap&&(_.matcap.value=w.matcap)}function x(_,w){const S=e.get(w).light;_.referencePosition.value.setFromMatrixPosition(S.matrixWorld),_.nearDistance.value=S.shadow.camera.near,_.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function xhe(t,e,n,r){let i={},a={},s=[];const o=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function c(S,E){const A=E.program;r.uniformBlockBinding(S,A)}function u(S,E){let A=i[S.id];A===void 0&&(v(S),A=h(S),i[S.id]=A,S.addEventListener("dispose",_));const N=E.program;r.updateUBOMapping(S,N);const P=e.render.frame;a[S.id]!==P&&(m(S),a[S.id]=P)}function h(S){const E=f();S.__bindingPointIndex=E;const A=t.createBuffer(),N=S.__size,P=S.usage;return t.bindBuffer(t.UNIFORM_BUFFER,A),t.bufferData(t.UNIFORM_BUFFER,N,P),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,E,A),A}function f(){for(let S=0;S<o;S++)if(s.indexOf(S)===-1)return s.push(S),S;return Yi("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(S){const E=i[S.id],A=S.uniforms,N=S.__cache;t.bindBuffer(t.UNIFORM_BUFFER,E);for(let P=0,R=A.length;P<R;P++){const D=Array.isArray(A[P])?A[P]:[A[P]];for(let k=0,L=D.length;k<L;k++){const $=D[k];if(g($,P,k,N)===!0){const B=$.__offset,q=Array.isArray($.value)?$.value:[$.value];let U=0;for(let J=0;J<q.length;J++){const O=q[J],z=x(O);typeof O=="number"||typeof O=="boolean"?($.__data[0]=O,t.bufferSubData(t.UNIFORM_BUFFER,B+U,$.__data)):O.isMatrix3?($.__data[0]=O.elements[0],$.__data[1]=O.elements[1],$.__data[2]=O.elements[2],$.__data[3]=0,$.__data[4]=O.elements[3],$.__data[5]=O.elements[4],$.__data[6]=O.elements[5],$.__data[7]=0,$.__data[8]=O.elements[6],$.__data[9]=O.elements[7],$.__data[10]=O.elements[8],$.__data[11]=0):(O.toArray($.__data,U),U+=z.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,B,$.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function g(S,E,A,N){const P=S.value,R=E+"_"+A;if(N[R]===void 0)return typeof P=="number"||typeof P=="boolean"?N[R]=P:N[R]=P.clone(),!0;{const D=N[R];if(typeof P=="number"||typeof P=="boolean"){if(D!==P)return N[R]=P,!0}else if(D.equals(P)===!1)return D.copy(P),!0}return!1}function v(S){const E=S.uniforms;let A=0;const N=16;for(let R=0,D=E.length;R<D;R++){const k=Array.isArray(E[R])?E[R]:[E[R]];for(let L=0,$=k.length;L<$;L++){const B=k[L],q=Array.isArray(B.value)?B.value:[B.value];for(let U=0,J=q.length;U<J;U++){const O=q[U],z=x(O),V=A%N,H=V%z.boundary,ee=V+H;A+=H,ee!==0&&N-ee<z.storage&&(A+=N-ee),B.__data=new Float32Array(z.storage/Float32Array.BYTES_PER_ELEMENT),B.__offset=A,A+=z.storage}}}const P=A%N;return P>0&&(A+=N-P),S.__size=A,S.__cache={},this}function x(S){const E={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(E.boundary=4,E.storage=4):S.isVector2?(E.boundary=8,E.storage=8):S.isVector3||S.isColor?(E.boundary=16,E.storage=12):S.isVector4?(E.boundary=16,E.storage=16):S.isMatrix3?(E.boundary=48,E.storage=48):S.isMatrix4?(E.boundary=64,E.storage=64):S.isTexture?kn("WebGLRenderer: Texture samplers can not be part of an uniforms group."):kn("WebGLRenderer: Unsupported uniform value type.",S),E}function _(S){const E=S.target;E.removeEventListener("dispose",_);const A=s.indexOf(E.__bindingPointIndex);s.splice(A,1),t.deleteBuffer(i[E.id]),delete i[E.id],delete a[E.id]}function w(){for(const S in i)t.deleteBuffer(i[S]);s=[],i={},a={}}return{bind:c,update:u,dispose:w}}const _he=new Uint16Array([11481,15204,11534,15171,11808,15015,12385,14843,12894,14716,13396,14600,13693,14483,13976,14366,14237,14171,14405,13961,14511,13770,14605,13598,14687,13444,14760,13305,14822,13066,14876,12857,14923,12675,14963,12517,14997,12379,15025,12230,15049,12023,15070,11843,15086,11687,15100,11551,15111,11433,15120,11330,15127,11217,15132,11060,15135,10922,15138,10801,15139,10695,15139,10600,13012,14923,13020,14917,13064,14886,13176,14800,13349,14666,13513,14526,13724,14398,13960,14230,14200,14020,14383,13827,14488,13651,14583,13491,14667,13348,14740,13132,14803,12908,14856,12713,14901,12542,14938,12394,14968,12241,14992,12017,15010,11822,15024,11654,15034,11507,15041,11380,15044,11269,15044,11081,15042,10913,15037,10764,15031,10635,15023,10520,15014,10419,15003,10330,13657,14676,13658,14673,13670,14660,13698,14622,13750,14547,13834,14442,13956,14317,14112,14093,14291,13889,14407,13704,14499,13538,14586,13389,14664,13201,14733,12966,14792,12758,14842,12577,14882,12418,14915,12272,14940,12033,14959,11826,14972,11646,14980,11490,14983,11355,14983,11212,14979,11008,14971,10830,14961,10675,14950,10540,14936,10420,14923,10315,14909,10204,14894,10041,14089,14460,14090,14459,14096,14452,14112,14431,14141,14388,14186,14305,14252,14130,14341,13941,14399,13756,14467,13585,14539,13430,14610,13272,14677,13026,14737,12808,14790,12617,14833,12449,14869,12303,14896,12065,14916,11845,14929,11655,14937,11490,14939,11347,14936,11184,14930,10970,14921,10783,14912,10621,14900,10480,14885,10356,14867,10247,14848,10062,14827,9894,14805,9745,14400,14208,14400,14206,14402,14198,14406,14174,14415,14122,14427,14035,14444,13913,14469,13767,14504,13613,14548,13463,14598,13324,14651,13082,14704,12858,14752,12658,14795,12483,14831,12330,14860,12106,14881,11875,14895,11675,14903,11501,14905,11351,14903,11178,14900,10953,14892,10757,14880,10589,14865,10442,14847,10313,14827,10162,14805,9965,14782,9792,14757,9642,14731,9507,14562,13883,14562,13883,14563,13877,14566,13862,14570,13830,14576,13773,14584,13689,14595,13582,14613,13461,14637,13336,14668,13120,14704,12897,14741,12695,14776,12516,14808,12358,14835,12150,14856,11910,14870,11701,14878,11519,14882,11361,14884,11187,14880,10951,14871,10748,14858,10572,14842,10418,14823,10286,14801,10099,14777,9897,14751,9722,14725,9567,14696,9430,14666,9309,14702,13604,14702,13604,14702,13600,14703,13591,14705,13570,14707,13533,14709,13477,14712,13400,14718,13305,14727,13106,14743,12907,14762,12716,14784,12539,14807,12380,14827,12190,14844,11943,14855,11727,14863,11539,14870,11376,14871,11204,14868,10960,14858,10748,14845,10565,14829,10406,14809,10269,14786,10058,14761,9852,14734,9671,14705,9512,14674,9374,14641,9253,14608,9076,14821,13366,14821,13365,14821,13364,14821,13358,14821,13344,14821,13320,14819,13252,14817,13145,14815,13011,14814,12858,14817,12698,14823,12539,14832,12389,14841,12214,14850,11968,14856,11750,14861,11558,14866,11390,14867,11226,14862,10972,14853,10754,14840,10565,14823,10401,14803,10259,14780,10032,14754,9820,14725,9635,14694,9473,14661,9333,14627,9203,14593,8988,14557,8798,14923,13014,14922,13014,14922,13012,14922,13004,14920,12987,14919,12957,14915,12907,14909,12834,14902,12738,14894,12623,14888,12498,14883,12370,14880,12203,14878,11970,14875,11759,14873,11569,14874,11401,14872,11243,14865,10986,14855,10762,14842,10568,14825,10401,14804,10255,14781,10017,14754,9799,14725,9611,14692,9445,14658,9301,14623,9139,14587,8920,14548,8729,14509,8562,15008,12672,15008,12672,15008,12671,15007,12667,15005,12656,15001,12637,14997,12605,14989,12556,14978,12490,14966,12407,14953,12313,14940,12136,14927,11934,14914,11742,14903,11563,14896,11401,14889,11247,14879,10992,14866,10767,14851,10570,14833,10400,14812,10252,14789,10007,14761,9784,14731,9592,14698,9424,14663,9279,14627,9088,14588,8868,14548,8676,14508,8508,14467,8360,15080,12386,15080,12386,15079,12385,15078,12383,15076,12378,15072,12367,15066,12347,15057,12315,15045,12253,15030,12138,15012,11998,14993,11845,14972,11685,14951,11530,14935,11383,14920,11228,14904,10981,14887,10762,14870,10567,14850,10397,14827,10248,14803,9997,14774,9771,14743,9578,14710,9407,14674,9259,14637,9048,14596,8826,14555,8632,14514,8464,14471,8317,14427,8182,15139,12008,15139,12008,15138,12008,15137,12007,15135,12003,15130,11990,15124,11969,15115,11929,15102,11872,15086,11794,15064,11693,15041,11581,15013,11459,14987,11336,14966,11170,14944,10944,14921,10738,14898,10552,14875,10387,14850,10239,14824,9983,14794,9758,14762,9563,14728,9392,14692,9244,14653,9014,14611,8791,14569,8597,14526,8427,14481,8281,14436,8110,14391,7885,15188,11617,15188,11617,15187,11617,15186,11618,15183,11617,15179,11612,15173,11601,15163,11581,15150,11546,15133,11495,15110,11427,15083,11346,15051,11246,15024,11057,14996,10868,14967,10687,14938,10517,14911,10362,14882,10206,14853,9956,14821,9737,14787,9543,14752,9375,14715,9228,14675,8980,14632,8760,14589,8565,14544,8395,14498,8248,14451,8049,14404,7824,14357,7630,15228,11298,15228,11298,15227,11299,15226,11301,15223,11303,15219,11302,15213,11299,15204,11290,15191,11271,15174,11217,15150,11129,15119,11015,15087,10886,15057,10744,15024,10599,14990,10455,14957,10318,14924,10143,14891,9911,14856,9701,14820,9516,14782,9352,14744,9200,14703,8946,14659,8725,14615,8533,14568,8366,14521,8220,14472,7992,14423,7770,14374,7578,14315,7408,15260,10819,15260,10819,15259,10822,15258,10826,15256,10832,15251,10836,15246,10841,15237,10838,15225,10821,15207,10788,15183,10734,15151,10660,15120,10571,15087,10469,15049,10359,15012,10249,14974,10041,14937,9837,14900,9647,14860,9475,14820,9320,14779,9147,14736,8902,14691,8688,14646,8499,14598,8335,14549,8189,14499,7940,14448,7720,14397,7529,14347,7363,14256,7218,15285,10410,15285,10411,15285,10413,15284,10418,15282,10425,15278,10434,15272,10442,15264,10449,15252,10445,15235,10433,15210,10403,15179,10358,15149,10301,15113,10218,15073,10059,15033,9894,14991,9726,14951,9565,14909,9413,14865,9273,14822,9073,14777,8845,14730,8641,14682,8459,14633,8300,14583,8129,14531,7883,14479,7670,14426,7482,14373,7321,14305,7176,14201,6939,15305,9939,15305,9940,15305,9945,15304,9955,15302,9967,15298,9989,15293,10010,15286,10033,15274,10044,15258,10045,15233,10022,15205,9975,15174,9903,15136,9808,15095,9697,15053,9578,15009,9451,14965,9327,14918,9198,14871,8973,14825,8766,14775,8579,14725,8408,14675,8259,14622,8058,14569,7821,14515,7615,14460,7435,14405,7276,14350,7108,14256,6866,14149,6653,15321,9444,15321,9445,15321,9448,15320,9458,15317,9470,15314,9490,15310,9515,15302,9540,15292,9562,15276,9579,15251,9577,15226,9559,15195,9519,15156,9463,15116,9389,15071,9304,15025,9208,14978,9023,14927,8838,14878,8661,14827,8496,14774,8344,14722,8206,14667,7973,14612,7749,14556,7555,14499,7382,14443,7229,14385,7025,14322,6791,14210,6588,14100,6409,15333,8920,15333,8921,15332,8927,15332,8943,15329,8965,15326,9002,15322,9048,15316,9106,15307,9162,15291,9204,15267,9221,15244,9221,15212,9196,15175,9134,15133,9043,15088,8930,15040,8801,14990,8665,14938,8526,14886,8391,14830,8261,14775,8087,14719,7866,14661,7664,14603,7482,14544,7322,14485,7178,14426,6936,14367,6713,14281,6517,14166,6348,14054,6198,15341,8360,15341,8361,15341,8366,15341,8379,15339,8399,15336,8431,15332,8473,15326,8527,15318,8585,15302,8632,15281,8670,15258,8690,15227,8690,15191,8664,15149,8612,15104,8543,15055,8456,15001,8360,14948,8259,14892,8122,14834,7923,14776,7734,14716,7558,14656,7397,14595,7250,14534,7070,14472,6835,14410,6628,14350,6443,14243,6283,14125,6135,14010,5889,15348,7715,15348,7717,15348,7725,15347,7745,15345,7780,15343,7836,15339,7905,15334,8e3,15326,8103,15310,8193,15293,8239,15270,8270,15240,8287,15204,8283,15163,8260,15118,8223,15067,8143,15014,8014,14958,7873,14899,7723,14839,7573,14778,7430,14715,7293,14652,7164,14588,6931,14524,6720,14460,6531,14396,6362,14330,6210,14207,6015,14086,5781,13969,5576,15352,7114,15352,7116,15352,7128,15352,7159,15350,7195,15348,7237,15345,7299,15340,7374,15332,7457,15317,7544,15301,7633,15280,7703,15251,7754,15216,7775,15176,7767,15131,7733,15079,7670,15026,7588,14967,7492,14906,7387,14844,7278,14779,7171,14714,6965,14648,6770,14581,6587,14515,6420,14448,6269,14382,6123,14299,5881,14172,5665,14049,5477,13929,5310,15355,6329,15355,6330,15355,6339,15355,6362,15353,6410,15351,6472,15349,6572,15344,6688,15337,6835,15323,6985,15309,7142,15287,7220,15260,7277,15226,7310,15188,7326,15142,7318,15090,7285,15036,7239,14976,7177,14914,7045,14849,6892,14782,6736,14714,6581,14645,6433,14576,6293,14506,6164,14438,5946,14369,5733,14270,5540,14140,5369,14014,5216,13892,5043,15357,5483,15357,5484,15357,5496,15357,5528,15356,5597,15354,5692,15351,5835,15347,6011,15339,6195,15328,6317,15314,6446,15293,6566,15268,6668,15235,6746,15197,6796,15152,6811,15101,6790,15046,6748,14985,6673,14921,6583,14854,6479,14785,6371,14714,6259,14643,6149,14571,5946,14499,5750,14428,5567,14358,5401,14242,5250,14109,5111,13980,4870,13856,4657,15359,4555,15359,4557,15358,4573,15358,4633,15357,4715,15355,4841,15353,5061,15349,5216,15342,5391,15331,5577,15318,5770,15299,5967,15274,6150,15243,6223,15206,6280,15161,6310,15111,6317,15055,6300,14994,6262,14928,6208,14860,6141,14788,5994,14715,5838,14641,5684,14566,5529,14492,5384,14418,5247,14346,5121,14216,4892,14079,4682,13948,4496,13822,4330,15359,3498,15359,3501,15359,3520,15359,3598,15358,3719,15356,3860,15355,4137,15351,4305,15344,4563,15334,4809,15321,5116,15303,5273,15280,5418,15250,5547,15214,5653,15170,5722,15120,5761,15064,5763,15002,5733,14935,5673,14865,5597,14792,5504,14716,5400,14640,5294,14563,5185,14486,5041,14410,4841,14335,4655,14191,4482,14051,4325,13918,4183,13790,4012,15360,2282,15360,2285,15360,2306,15360,2401,15359,2547,15357,2748,15355,3103,15352,3349,15345,3675,15336,4020,15324,4272,15307,4496,15285,4716,15255,4908,15220,5086,15178,5170,15128,5214,15072,5234,15010,5231,14943,5206,14871,5166,14796,5102,14718,4971,14639,4833,14559,4687,14480,4541,14402,4401,14315,4268,14167,4142,14025,3958,13888,3747,13759,3556,15360,923,15360,925,15360,946,15360,1052,15359,1214,15357,1494,15356,1892,15352,2274,15346,2663,15338,3099,15326,3393,15309,3679,15288,3980,15260,4183,15226,4325,15185,4437,15136,4517,15080,4570,15018,4591,14950,4581,14877,4545,14800,4485,14720,4411,14638,4325,14556,4231,14475,4136,14395,3988,14297,3803,14145,3628,13999,3465,13861,3314,13729,3177,15360,263,15360,264,15360,272,15360,325,15359,407,15358,548,15356,780,15352,1144,15347,1580,15339,2099,15328,2425,15312,2795,15292,3133,15264,3329,15232,3517,15191,3689,15143,3819,15088,3923,15025,3978,14956,3999,14882,3979,14804,3931,14722,3855,14639,3756,14554,3645,14470,3529,14388,3409,14279,3289,14124,3173,13975,3055,13834,2848,13701,2658,15360,49,15360,49,15360,52,15360,75,15359,111,15358,201,15356,283,15353,519,15348,726,15340,1045,15329,1415,15314,1795,15295,2173,15269,2410,15237,2649,15197,2866,15150,3054,15095,3140,15032,3196,14963,3228,14888,3236,14808,3224,14725,3191,14639,3146,14553,3088,14466,2976,14382,2836,14262,2692,14103,2549,13952,2409,13808,2278,13674,2154,15360,4,15360,4,15360,4,15360,13,15359,33,15358,59,15357,112,15353,199,15348,302,15341,456,15331,628,15316,827,15297,1082,15272,1332,15241,1601,15202,1851,15156,2069,15101,2172,15039,2256,14970,2314,14894,2348,14813,2358,14728,2344,14640,2311,14551,2263,14463,2203,14376,2133,14247,2059,14084,1915,13930,1761,13784,1609,13648,1464,15360,0,15360,0,15360,0,15360,3,15359,18,15358,26,15357,53,15354,80,15348,97,15341,165,15332,238,15318,326,15299,427,15275,529,15245,654,15207,771,15161,885,15108,994,15046,1089,14976,1170,14900,1229,14817,1266,14731,1284,14641,1282,14550,1260,14460,1223,14370,1174,14232,1116,14066,1050,13909,981,13761,910,13623,839]);let Sd=null;function whe(){return Sd===null&&(Sd=new VR(_he,32,32,LR,Bl),Sd.minFilter=ys,Sd.magFilter=ys,Sd.wrapS=Fd,Sd.wrapT=Fd,Sd.generateMipmaps=!1,Sd.needsUpdate=!0),Sd}class H2{constructor(e={}){const{canvas:n=toe(),context:r=null,depth:i=!0,stencil:a=!1,alpha:s=!1,antialias:o=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:f=!1,reversedDepthBuffer:m=!1}=e;this.isWebGLRenderer=!0;let g;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=r.getContextAttributes().alpha}else g=s;const v=new Set([FR,OR,jR]),x=new Set([Zd,tg,a_,s_,RR,IR]),_=new Uint32Array(4),w=new Int32Array(4);let S=null,E=null;const A=[],N=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=kf,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const P=this;let R=!1;this._outputColorSpace=$l;let D=0,k=0,L=null,$=-1,B=null;const q=new Zi,U=new Zi;let J=null;const O=new or(0);let z=0,V=n.width,H=n.height,ee=1,Y=null,Z=null;const K=new Zi(0,0,V,H),X=new Zi(0,0,V,H);let ne=!1;const G=new $9;let te=!1,ae=!1;const pe=new Pi,ye=new qe,me=new Zi,fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ge=!1;function be(){return L===null?ee:1}let oe=r;function Le(ue,Ae){return n.getContext(ue,Ae)}try{const ue={alpha:!0,depth:i,stencil:a,antialias:o,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${DR}`),n.addEventListener("webglcontextlost",it,!1),n.addEventListener("webglcontextrestored",Qe,!1),n.addEventListener("webglcontextcreationerror",At,!1),oe===null){const Ae="webgl2";if(oe=Le(Ae,ue),oe===null)throw Le(Ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ue){throw ue("WebGLRenderer: "+ue.message),ue}let Ve,Ze,xe,ht,Fe,et,de,re,Ce,ke,De,je,mt,rt,bt,dt,Je,ot,It,Ct,St,Bt,we,xt;function _t(){Ve=new Due(oe),Ve.init(),Bt=new fhe(oe,Ve),Ze=new wue(oe,Ve,e,Bt),xe=new dhe(oe,Ve),Ze.reversedDepthBuffer&&m&&xe.buffers.depth.setReversed(!0),ht=new Iue(oe),Fe=new Jde,et=new hhe(oe,Ve,xe,Fe,Ze,Bt,ht),de=new Eue(P),re=new Nue(P),Ce=new Ooe(oe),we=new xue(oe,Ce),ke=new kue(oe,Ce,ht,we),De=new jue(oe,ke,Ce,ht),It=new $ue(oe,Ze,et),dt=new Sue(Fe),je=new Zde(P,de,re,Ve,Ze,we,dt),mt=new bhe(P,Fe),rt=new ehe,bt=new she(Ve),ot=new bue(P,de,re,xe,De,g,c),Je=new che(P,De,Ze),xt=new xhe(oe,ht,Ze,xe),Ct=new _ue(oe,Ve,ht),St=new Rue(oe,Ve,ht),ht.programs=je.programs,P.capabilities=Ze,P.extensions=Ve,P.properties=Fe,P.renderLists=rt,P.shadowMap=Je,P.state=xe,P.info=ht}_t();const vt=new vhe(P,oe);this.xr=vt,this.getContext=function(){return oe},this.getContextAttributes=function(){return oe.getContextAttributes()},this.forceContextLoss=function(){const ue=Ve.get("WEBGL_lose_context");ue&&ue.loseContext()},this.forceContextRestore=function(){const ue=Ve.get("WEBGL_lose_context");ue&&ue.restoreContext()},this.getPixelRatio=function(){return ee},this.setPixelRatio=function(ue){ue!==void 0&&(ee=ue,this.setSize(V,H,!1))},this.getSize=function(ue){return ue.set(V,H)},this.setSize=function(ue,Ae,Ge=!0){if(vt.isPresenting){kn("WebGLRenderer: Can't change size while VR device is presenting.");return}V=ue,H=Ae,n.width=Math.floor(ue*ee),n.height=Math.floor(Ae*ee),Ge===!0&&(n.style.width=ue+"px",n.style.height=Ae+"px"),this.setViewport(0,0,ue,Ae)},this.getDrawingBufferSize=function(ue){return ue.set(V*ee,H*ee).floor()},this.setDrawingBufferSize=function(ue,Ae,Ge){V=ue,H=Ae,ee=Ge,n.width=Math.floor(ue*Ge),n.height=Math.floor(Ae*Ge),this.setViewport(0,0,ue,Ae)},this.getCurrentViewport=function(ue){return ue.copy(q)},this.getViewport=function(ue){return ue.copy(K)},this.setViewport=function(ue,Ae,Ge,Be){ue.isVector4?K.set(ue.x,ue.y,ue.z,ue.w):K.set(ue,Ae,Ge,Be),xe.viewport(q.copy(K).multiplyScalar(ee).round())},this.getScissor=function(ue){return ue.copy(X)},this.setScissor=function(ue,Ae,Ge,Be){ue.isVector4?X.set(ue.x,ue.y,ue.z,ue.w):X.set(ue,Ae,Ge,Be),xe.scissor(U.copy(X).multiplyScalar(ee).round())},this.getScissorTest=function(){return ne},this.setScissorTest=function(ue){xe.setScissorTest(ne=ue)},this.setOpaqueSort=function(ue){Y=ue},this.setTransparentSort=function(ue){Z=ue},this.getClearColor=function(ue){return ue.copy(ot.getClearColor())},this.setClearColor=function(){ot.setClearColor(...arguments)},this.getClearAlpha=function(){return ot.getClearAlpha()},this.setClearAlpha=function(){ot.setClearAlpha(...arguments)},this.clear=function(ue=!0,Ae=!0,Ge=!0){let Be=0;if(ue){let Re=!1;if(L!==null){const wt=L.texture.format;Re=v.has(wt)}if(Re){const wt=L.texture.type,Tt=x.has(wt),Rt=ot.getClearColor(),jt=ot.getClearAlpha(),Qt=Rt.r,nn=Rt.g,Zt=Rt.b;Tt?(_[0]=Qt,_[1]=nn,_[2]=Zt,_[3]=jt,oe.clearBufferuiv(oe.COLOR,0,_)):(w[0]=Qt,w[1]=nn,w[2]=Zt,w[3]=jt,oe.clearBufferiv(oe.COLOR,0,w))}else Be|=oe.COLOR_BUFFER_BIT}Ae&&(Be|=oe.DEPTH_BUFFER_BIT),Ge&&(Be|=oe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),oe.clear(Be)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",it,!1),n.removeEventListener("webglcontextrestored",Qe,!1),n.removeEventListener("webglcontextcreationerror",At,!1),ot.dispose(),rt.dispose(),bt.dispose(),Fe.dispose(),de.dispose(),re.dispose(),De.dispose(),we.dispose(),xt.dispose(),je.dispose(),vt.dispose(),vt.removeEventListener("sessionstart",Mt),vt.removeEventListener("sessionend",$t),Fn.stop()};function it(ue){ue.preventDefault(),T5("WebGLRenderer: Context Lost."),R=!0}function Qe(){T5("WebGLRenderer: Context Restored."),R=!1;const ue=ht.autoReset,Ae=Je.enabled,Ge=Je.autoUpdate,Be=Je.needsUpdate,Re=Je.type;_t(),ht.autoReset=ue,Je.enabled=Ae,Je.autoUpdate=Ge,Je.needsUpdate=Be,Je.type=Re}function At(ue){Yi("WebGLRenderer: A WebGL context could not be created. Reason: ",ue.statusMessage)}function We(ue){const Ae=ue.target;Ae.removeEventListener("dispose",We),ft(Ae)}function ft(ue){yt(ue),Fe.remove(ue)}function yt(ue){const Ae=Fe.get(ue).programs;Ae!==void 0&&(Ae.forEach(function(Ge){je.releaseProgram(Ge)}),ue.isShaderMaterial&&je.releaseShaderCache(ue))}this.renderBufferDirect=function(ue,Ae,Ge,Be,Re,wt){Ae===null&&(Ae=fe);const Tt=Re.isMesh&&Re.matrixWorld.determinant()<0,Rt=qc(ue,Ae,Ge,Be,Re);xe.setMaterial(Be,Tt);let jt=Ge.index,Qt=1;if(Be.wireframe===!0){if(jt=ke.getWireframeAttribute(Ge),jt===void 0)return;Qt=2}const nn=Ge.drawRange,Zt=Ge.attributes.position;let wn=nn.start*Qt,Kn=(nn.start+nn.count)*Qt;wt!==null&&(wn=Math.max(wn,wt.start*Qt),Kn=Math.min(Kn,(wt.start+wt.count)*Qt)),jt!==null?(wn=Math.max(wn,0),Kn=Math.min(Kn,jt.count)):Zt!=null&&(wn=Math.max(wn,0),Kn=Math.min(Kn,Zt.count));const Zn=Kn-wn;if(Zn<0||Zn===1/0)return;we.setup(Re,Be,Rt,Ge,jt);let Bn,tr=Ct;if(jt!==null&&(Bn=Ce.get(jt),tr=St,tr.setIndex(Bn)),Re.isMesh)Be.wireframe===!0?(xe.setLineWidth(Be.wireframeLinewidth*be()),tr.setMode(oe.LINES)):tr.setMode(oe.TRIANGLES);else if(Re.isLine){let en=Be.linewidth;en===void 0&&(en=1),xe.setLineWidth(en*be()),Re.isLineSegments?tr.setMode(oe.LINES):Re.isLineLoop?tr.setMode(oe.LINE_LOOP):tr.setMode(oe.LINE_STRIP)}else Re.isPoints?tr.setMode(oe.POINTS):Re.isSprite&&tr.setMode(oe.TRIANGLES);if(Re.isBatchedMesh)if(Re._multiDrawInstances!==null)c_("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),tr.renderMultiDrawInstances(Re._multiDrawStarts,Re._multiDrawCounts,Re._multiDrawCount,Re._multiDrawInstances);else if(Ve.get("WEBGL_multi_draw"))tr.renderMultiDraw(Re._multiDrawStarts,Re._multiDrawCounts,Re._multiDrawCount);else{const en=Re._multiDrawStarts,hr=Re._multiDrawCounts,Dn=Re._multiDrawCount,hi=jt?Ce.get(jt).bytesPerElement:1,vl=Fe.get(Be).currentProgram.getUniforms();for(let Sr=0;Sr<Dn;Sr++)vl.setValue(oe,"_gl_DrawID",Sr),tr.render(en[Sr]/hi,hr[Sr])}else if(Re.isInstancedMesh)tr.renderInstances(wn,Zn,Re.count);else if(Ge.isInstancedBufferGeometry){const en=Ge._maxInstanceCount!==void 0?Ge._maxInstanceCount:1/0,hr=Math.min(Ge.instanceCount,en);tr.renderInstances(wn,Zn,hr)}else tr.render(wn,Zn)};function gt(ue,Ae,Ge){ue.transparent===!0&&ue.side===ju&&ue.forceSinglePass===!1?(ue.side=Mo,ue.needsUpdate=!0,Vr(ue,Ae,Ge),ue.side=Ff,ue.needsUpdate=!0,Vr(ue,Ae,Ge),ue.side=ju):Vr(ue,Ae,Ge)}this.compile=function(ue,Ae,Ge=null){Ge===null&&(Ge=ue),E=bt.get(Ge),E.init(Ae),N.push(E),Ge.traverseVisible(function(Re){Re.isLight&&Re.layers.test(Ae.layers)&&(E.pushLight(Re),Re.castShadow&&E.pushShadow(Re))}),ue!==Ge&&ue.traverseVisible(function(Re){Re.isLight&&Re.layers.test(Ae.layers)&&(E.pushLight(Re),Re.castShadow&&E.pushShadow(Re))}),E.setupLights();const Be=new Set;return ue.traverse(function(Re){if(!(Re.isMesh||Re.isPoints||Re.isLine||Re.isSprite))return;const wt=Re.material;if(wt)if(Array.isArray(wt))for(let Tt=0;Tt<wt.length;Tt++){const Rt=wt[Tt];gt(Rt,Ge,Re),Be.add(Rt)}else gt(wt,Ge,Re),Be.add(wt)}),E=N.pop(),Be},this.compileAsync=function(ue,Ae,Ge=null){const Be=this.compile(ue,Ae,Ge);return new Promise(Re=>{function wt(){if(Be.forEach(function(Tt){Fe.get(Tt).currentProgram.isReady()&&Be.delete(Tt)}),Be.size===0){Re(ue);return}setTimeout(wt,10)}Ve.get("KHR_parallel_shader_compile")!==null?wt():setTimeout(wt,10)})};let ln=null;function vn(ue){ln&&ln(ue)}function Mt(){Fn.stop()}function $t(){Fn.start()}const Fn=new B9;Fn.setAnimationLoop(vn),typeof self<"u"&&Fn.setContext(self),this.setAnimationLoop=function(ue){ln=ue,vt.setAnimationLoop(ue),ue===null?Fn.stop():Fn.start()},vt.addEventListener("sessionstart",Mt),vt.addEventListener("sessionend",$t),this.render=function(ue,Ae){if(Ae!==void 0&&Ae.isCamera!==!0){Yi("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(R===!0)return;if(ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),Ae.parent===null&&Ae.matrixWorldAutoUpdate===!0&&Ae.updateMatrixWorld(),vt.enabled===!0&&vt.isPresenting===!0&&(vt.cameraAutoUpdate===!0&&vt.updateCamera(Ae),Ae=vt.getCamera()),ue.isScene===!0&&ue.onBeforeRender(P,ue,Ae,L),E=bt.get(ue,N.length),E.init(Ae),N.push(E),pe.multiplyMatrices(Ae.projectionMatrix,Ae.matrixWorldInverse),G.setFromProjectionMatrix(pe,Lu,Ae.reversedDepth),ae=this.localClippingEnabled,te=dt.init(this.clippingPlanes,ae),S=rt.get(ue,A.length),S.init(),A.push(S),vt.enabled===!0&&vt.isPresenting===!0){const wt=P.xr.getDepthSensingMesh();wt!==null&&Rn(wt,Ae,-1/0,P.sortObjects)}Rn(ue,Ae,0,P.sortObjects),S.finish(),P.sortObjects===!0&&S.sort(Y,Z),ge=vt.enabled===!1||vt.isPresenting===!1||vt.hasDepthSensing()===!1,ge&&ot.addToRenderList(S,ue),this.info.render.frame++,te===!0&&dt.beginShadows();const Ge=E.state.shadowsArray;Je.render(Ge,ue,Ae),te===!0&&dt.endShadows(),this.info.autoReset===!0&&this.info.reset();const Be=S.opaque,Re=S.transmissive;if(E.setupLights(),Ae.isArrayCamera){const wt=Ae.cameras;if(Re.length>0)for(let Tt=0,Rt=wt.length;Tt<Rt;Tt++){const jt=wt[Tt];Oa(Be,Re,ue,jt)}ge&&ot.render(ue);for(let Tt=0,Rt=wt.length;Tt<Rt;Tt++){const jt=wt[Tt];Ur(S,ue,jt,jt.viewport)}}else Re.length>0&&Oa(Be,Re,ue,Ae),ge&&ot.render(ue),Ur(S,ue,Ae);L!==null&&k===0&&(et.updateMultisampleRenderTarget(L),et.updateRenderTargetMipmap(L)),ue.isScene===!0&&ue.onAfterRender(P,ue,Ae),we.resetDefaultState(),$=-1,B=null,N.pop(),N.length>0?(E=N[N.length-1],te===!0&&dt.setGlobalState(P.clippingPlanes,E.state.camera)):E=null,A.pop(),A.length>0?S=A[A.length-1]:S=null};function Rn(ue,Ae,Ge,Be){if(ue.visible===!1)return;if(ue.layers.test(Ae.layers)){if(ue.isGroup)Ge=ue.renderOrder;else if(ue.isLOD)ue.autoUpdate===!0&&ue.update(Ae);else if(ue.isLight)E.pushLight(ue),ue.castShadow&&E.pushShadow(ue);else if(ue.isSprite){if(!ue.frustumCulled||G.intersectsSprite(ue)){Be&&me.setFromMatrixPosition(ue.matrixWorld).applyMatrix4(pe);const Tt=De.update(ue),Rt=ue.material;Rt.visible&&S.push(ue,Tt,Rt,Ge,me.z,null)}}else if((ue.isMesh||ue.isLine||ue.isPoints)&&(!ue.frustumCulled||G.intersectsObject(ue))){const Tt=De.update(ue),Rt=ue.material;if(Be&&(ue.boundingSphere!==void 0?(ue.boundingSphere===null&&ue.computeBoundingSphere(),me.copy(ue.boundingSphere.center)):(Tt.boundingSphere===null&&Tt.computeBoundingSphere(),me.copy(Tt.boundingSphere.center)),me.applyMatrix4(ue.matrixWorld).applyMatrix4(pe)),Array.isArray(Rt)){const jt=Tt.groups;for(let Qt=0,nn=jt.length;Qt<nn;Qt++){const Zt=jt[Qt],wn=Rt[Zt.materialIndex];wn&&wn.visible&&S.push(ue,Tt,wn,Ge,me.z,Zt)}}else Rt.visible&&S.push(ue,Tt,Rt,Ge,me.z,null)}}const wt=ue.children;for(let Tt=0,Rt=wt.length;Tt<Rt;Tt++)Rn(wt[Tt],Ae,Ge,Be)}function Ur(ue,Ae,Ge,Be){const{opaque:Re,transmissive:wt,transparent:Tt}=ue;E.setupLightsView(Ge),te===!0&&dt.setGlobalState(P.clippingPlanes,Ge),Be&&xe.viewport(q.copy(Be)),Re.length>0&&ir(Re,Ae,Ge),wt.length>0&&ir(wt,Ae,Ge),Tt.length>0&&ir(Tt,Ae,Ge),xe.buffers.depth.setTest(!0),xe.buffers.depth.setMask(!0),xe.buffers.color.setMask(!0),xe.setPolygonOffset(!1)}function Oa(ue,Ae,Ge,Be){if((Ge.isScene===!0?Ge.overrideMaterial:null)!==null)return;E.state.transmissionRenderTarget[Be.id]===void 0&&(E.state.transmissionRenderTarget[Be.id]=new sl(1,1,{generateMipmaps:!0,type:Ve.has("EXT_color_buffer_half_float")||Ve.has("EXT_color_buffer_float")?Bl:Zd,minFilter:jm,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:pr.workingColorSpace}));const wt=E.state.transmissionRenderTarget[Be.id],Tt=Be.viewport||q;wt.setSize(Tt.z*P.transmissionResolutionScale,Tt.w*P.transmissionResolutionScale);const Rt=P.getRenderTarget(),jt=P.getActiveCubeFace(),Qt=P.getActiveMipmapLevel();P.setRenderTarget(wt),P.getClearColor(O),z=P.getClearAlpha(),z<1&&P.setClearColor(16777215,.5),P.clear(),ge&&ot.render(Ge);const nn=P.toneMapping;P.toneMapping=kf;const Zt=Be.viewport;if(Be.viewport!==void 0&&(Be.viewport=void 0),E.setupLightsView(Be),te===!0&&dt.setGlobalState(P.clippingPlanes,Be),ir(ue,Ge,Be),et.updateMultisampleRenderTarget(wt),et.updateRenderTargetMipmap(wt),Ve.has("WEBGL_multisampled_render_to_texture")===!1){let wn=!1;for(let Kn=0,Zn=Ae.length;Kn<Zn;Kn++){const Bn=Ae[Kn],{object:tr,geometry:en,material:hr,group:Dn}=Bn;if(hr.side===ju&&tr.layers.test(Be.layers)){const hi=hr.side;hr.side=Mo,hr.needsUpdate=!0,Pr(tr,Ge,Be,en,hr,Dn),hr.side=hi,hr.needsUpdate=!0,wn=!0}}wn===!0&&(et.updateMultisampleRenderTarget(wt),et.updateRenderTargetMipmap(wt))}P.setRenderTarget(Rt,jt,Qt),P.setClearColor(O,z),Zt!==void 0&&(Be.viewport=Zt),P.toneMapping=nn}function ir(ue,Ae,Ge){const Be=Ae.isScene===!0?Ae.overrideMaterial:null;for(let Re=0,wt=ue.length;Re<wt;Re++){const Tt=ue[Re],{object:Rt,geometry:jt,group:Qt}=Tt;let nn=Tt.material;nn.allowOverride===!0&&Be!==null&&(nn=Be),Rt.layers.test(Ge.layers)&&Pr(Rt,Ae,Ge,jt,nn,Qt)}}function Pr(ue,Ae,Ge,Be,Re,wt){ue.onBeforeRender(P,Ae,Ge,Be,Re,wt),ue.modelViewMatrix.multiplyMatrices(Ge.matrixWorldInverse,ue.matrixWorld),ue.normalMatrix.getNormalMatrix(ue.modelViewMatrix),Re.onBeforeRender(P,Ae,Ge,Be,ue,wt),Re.transparent===!0&&Re.side===ju&&Re.forceSinglePass===!1?(Re.side=Mo,Re.needsUpdate=!0,P.renderBufferDirect(Ge,Ae,Be,Re,ue,wt),Re.side=Ff,Re.needsUpdate=!0,P.renderBufferDirect(Ge,Ae,Be,Re,ue,wt),Re.side=ju):P.renderBufferDirect(Ge,Ae,Be,Re,ue,wt),ue.onAfterRender(P,Ae,Ge,Be,Re,wt)}function Vr(ue,Ae,Ge){Ae.isScene!==!0&&(Ae=fe);const Be=Fe.get(ue),Re=E.state.lights,wt=E.state.shadowsArray,Tt=Re.state.version,Rt=je.getParameters(ue,Re.state,wt,Ae,Ge),jt=je.getProgramCacheKey(Rt);let Qt=Be.programs;Be.environment=ue.isMeshStandardMaterial?Ae.environment:null,Be.fog=Ae.fog,Be.envMap=(ue.isMeshStandardMaterial?re:de).get(ue.envMap||Be.environment),Be.envMapRotation=Be.environment!==null&&ue.envMap===null?Ae.environmentRotation:ue.envMapRotation,Qt===void 0&&(ue.addEventListener("dispose",We),Qt=new Map,Be.programs=Qt);let nn=Qt.get(jt);if(nn!==void 0){if(Be.currentProgram===nn&&Be.lightsStateVersion===Tt)return ws(ue,Rt),nn}else Rt.uniforms=je.getUniforms(ue),ue.onBeforeCompile(Rt,P),nn=je.acquireProgram(Rt,jt),Qt.set(jt,nn),Be.uniforms=Rt.uniforms;const Zt=Be.uniforms;return(!ue.isShaderMaterial&&!ue.isRawShaderMaterial||ue.clipping===!0)&&(Zt.clippingPlanes=dt.uniform),ws(ue,Rt),Be.needsLights=uh(ue),Be.lightsStateVersion=Tt,Be.needsLights&&(Zt.ambientLightColor.value=Re.state.ambient,Zt.lightProbe.value=Re.state.probe,Zt.directionalLights.value=Re.state.directional,Zt.directionalLightShadows.value=Re.state.directionalShadow,Zt.spotLights.value=Re.state.spot,Zt.spotLightShadows.value=Re.state.spotShadow,Zt.rectAreaLights.value=Re.state.rectArea,Zt.ltc_1.value=Re.state.rectAreaLTC1,Zt.ltc_2.value=Re.state.rectAreaLTC2,Zt.pointLights.value=Re.state.point,Zt.pointLightShadows.value=Re.state.pointShadow,Zt.hemisphereLights.value=Re.state.hemi,Zt.directionalShadowMap.value=Re.state.directionalShadowMap,Zt.directionalShadowMatrix.value=Re.state.directionalShadowMatrix,Zt.spotShadowMap.value=Re.state.spotShadowMap,Zt.spotLightMatrix.value=Re.state.spotLightMatrix,Zt.spotLightMap.value=Re.state.spotLightMap,Zt.pointShadowMap.value=Re.state.pointShadowMap,Zt.pointShadowMatrix.value=Re.state.pointShadowMatrix),Be.currentProgram=nn,Be.uniformsList=null,nn}function Bi(ue){if(ue.uniformsList===null){const Ae=ue.currentProgram.getUniforms();ue.uniformsList=l3.seqWithValue(Ae.seq,ue.uniforms)}return ue.uniformsList}function ws(ue,Ae){const Ge=Fe.get(ue);Ge.outputColorSpace=Ae.outputColorSpace,Ge.batching=Ae.batching,Ge.batchingColor=Ae.batchingColor,Ge.instancing=Ae.instancing,Ge.instancingColor=Ae.instancingColor,Ge.instancingMorph=Ae.instancingMorph,Ge.skinning=Ae.skinning,Ge.morphTargets=Ae.morphTargets,Ge.morphNormals=Ae.morphNormals,Ge.morphColors=Ae.morphColors,Ge.morphTargetsCount=Ae.morphTargetsCount,Ge.numClippingPlanes=Ae.numClippingPlanes,Ge.numIntersection=Ae.numClipIntersection,Ge.vertexAlphas=Ae.vertexAlphas,Ge.vertexTangents=Ae.vertexTangents,Ge.toneMapping=Ae.toneMapping}function qc(ue,Ae,Ge,Be,Re){Ae.isScene!==!0&&(Ae=fe),et.resetTextureUnits();const wt=Ae.fog,Tt=Be.isMeshStandardMaterial?Ae.environment:null,Rt=L===null?P.outputColorSpace:L.isXRRenderTarget===!0?L.texture.colorSpace:hy,jt=(Be.isMeshStandardMaterial?re:de).get(Be.envMap||Tt),Qt=Be.vertexColors===!0&&!!Ge.attributes.color&&Ge.attributes.color.itemSize===4,nn=!!Ge.attributes.tangent&&(!!Be.normalMap||Be.anisotropy>0),Zt=!!Ge.morphAttributes.position,wn=!!Ge.morphAttributes.normal,Kn=!!Ge.morphAttributes.color;let Zn=kf;Be.toneMapped&&(L===null||L.isXRRenderTarget===!0)&&(Zn=P.toneMapping);const Bn=Ge.morphAttributes.position||Ge.morphAttributes.normal||Ge.morphAttributes.color,tr=Bn!==void 0?Bn.length:0,en=Fe.get(Be),hr=E.state.lights;if(te===!0&&(ae===!0||ue!==B)){const Ii=ue===B&&Be.id===$;dt.setState(Be,ue,Ii)}let Dn=!1;Be.version===en.__version?(en.needsLights&&en.lightsStateVersion!==hr.state.version||en.outputColorSpace!==Rt||Re.isBatchedMesh&&en.batching===!1||!Re.isBatchedMesh&&en.batching===!0||Re.isBatchedMesh&&en.batchingColor===!0&&Re.colorTexture===null||Re.isBatchedMesh&&en.batchingColor===!1&&Re.colorTexture!==null||Re.isInstancedMesh&&en.instancing===!1||!Re.isInstancedMesh&&en.instancing===!0||Re.isSkinnedMesh&&en.skinning===!1||!Re.isSkinnedMesh&&en.skinning===!0||Re.isInstancedMesh&&en.instancingColor===!0&&Re.instanceColor===null||Re.isInstancedMesh&&en.instancingColor===!1&&Re.instanceColor!==null||Re.isInstancedMesh&&en.instancingMorph===!0&&Re.morphTexture===null||Re.isInstancedMesh&&en.instancingMorph===!1&&Re.morphTexture!==null||en.envMap!==jt||Be.fog===!0&&en.fog!==wt||en.numClippingPlanes!==void 0&&(en.numClippingPlanes!==dt.numPlanes||en.numIntersection!==dt.numIntersection)||en.vertexAlphas!==Qt||en.vertexTangents!==nn||en.morphTargets!==Zt||en.morphNormals!==wn||en.morphColors!==Kn||en.toneMapping!==Zn||en.morphTargetsCount!==tr)&&(Dn=!0):(Dn=!0,en.__version=Be.version);let hi=en.currentProgram;Dn===!0&&(hi=Vr(Be,Ae,Re));let vl=!1,Sr=!1,Ya=!1;const br=hi.getUniforms(),Ri=en.uniforms;if(xe.useProgram(hi.program)&&(vl=!0,Sr=!0,Ya=!0),Be.id!==$&&($=Be.id,Sr=!0),vl||B!==ue){xe.buffers.depth.getReversed()&&ue.reversedDepth!==!0&&(ue._reversedDepth=!0,ue.updateProjectionMatrix()),br.setValue(oe,"projectionMatrix",ue.projectionMatrix),br.setValue(oe,"viewMatrix",ue.matrixWorldInverse);const zi=br.map.cameraPosition;zi!==void 0&&zi.setValue(oe,ye.setFromMatrixPosition(ue.matrixWorld)),Ze.logarithmicDepthBuffer&&br.setValue(oe,"logDepthBufFC",2/(Math.log(ue.far+1)/Math.LN2)),(Be.isMeshPhongMaterial||Be.isMeshToonMaterial||Be.isMeshLambertMaterial||Be.isMeshBasicMaterial||Be.isMeshStandardMaterial||Be.isShaderMaterial)&&br.setValue(oe,"isOrthographic",ue.isOrthographicCamera===!0),B!==ue&&(B=ue,Sr=!0,Ya=!0)}if(Re.isSkinnedMesh){br.setOptional(oe,Re,"bindMatrix"),br.setOptional(oe,Re,"bindMatrixInverse");const Ii=Re.skeleton;Ii&&(Ii.boneTexture===null&&Ii.computeBoneTexture(),br.setValue(oe,"boneTexture",Ii.boneTexture,et))}Re.isBatchedMesh&&(br.setOptional(oe,Re,"batchingTexture"),br.setValue(oe,"batchingTexture",Re._matricesTexture,et),br.setOptional(oe,Re,"batchingIdTexture"),br.setValue(oe,"batchingIdTexture",Re._indirectTexture,et),br.setOptional(oe,Re,"batchingColorTexture"),Re._colorsTexture!==null&&br.setValue(oe,"batchingColorTexture",Re._colorsTexture,et));const si=Ge.morphAttributes;if((si.position!==void 0||si.normal!==void 0||si.color!==void 0)&&It.update(Re,Ge,hi),(Sr||en.receiveShadow!==Re.receiveShadow)&&(en.receiveShadow=Re.receiveShadow,br.setValue(oe,"receiveShadow",Re.receiveShadow)),Be.isMeshGouraudMaterial&&Be.envMap!==null&&(Ri.envMap.value=jt,Ri.flipEnvMap.value=jt.isCubeTexture&&jt.isRenderTargetTexture===!1?-1:1),Be.isMeshStandardMaterial&&Be.envMap===null&&Ae.environment!==null&&(Ri.envMapIntensity.value=Ae.environmentIntensity),Ri.dfgLUT!==void 0&&(Ri.dfgLUT.value=whe()),Sr&&(br.setValue(oe,"toneMappingExposure",P.toneMappingExposure),en.needsLights&&Wu(Ri,Ya),wt&&Be.fog===!0&&mt.refreshFogUniforms(Ri,wt),mt.refreshMaterialUniforms(Ri,Be,ee,H,E.state.transmissionRenderTarget[ue.id]),l3.upload(oe,Bi(en),Ri,et)),Be.isShaderMaterial&&Be.uniformsNeedUpdate===!0&&(l3.upload(oe,Bi(en),Ri,et),Be.uniformsNeedUpdate=!1),Be.isSpriteMaterial&&br.setValue(oe,"center",Re.center),br.setValue(oe,"modelViewMatrix",Re.modelViewMatrix),br.setValue(oe,"normalMatrix",Re.normalMatrix),br.setValue(oe,"modelMatrix",Re.matrixWorld),Be.isShaderMaterial||Be.isRawShaderMaterial){const Ii=Be.uniformsGroups;for(let zi=0,Fa=Ii.length;zi<Fa;zi++){const yl=Ii[zi];xt.update(yl,hi),xt.bind(yl,hi)}}return hi}function Wu(ue,Ae){ue.ambientLightColor.needsUpdate=Ae,ue.lightProbe.needsUpdate=Ae,ue.directionalLights.needsUpdate=Ae,ue.directionalLightShadows.needsUpdate=Ae,ue.pointLights.needsUpdate=Ae,ue.pointLightShadows.needsUpdate=Ae,ue.spotLights.needsUpdate=Ae,ue.spotLightShadows.needsUpdate=Ae,ue.rectAreaLights.needsUpdate=Ae,ue.hemisphereLights.needsUpdate=Ae}function uh(ue){return ue.isMeshLambertMaterial||ue.isMeshToonMaterial||ue.isMeshPhongMaterial||ue.isMeshStandardMaterial||ue.isShadowMaterial||ue.isShaderMaterial&&ue.lights===!0}this.getActiveCubeFace=function(){return D},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(ue,Ae,Ge){const Be=Fe.get(ue);Be.__autoAllocateDepthBuffer=ue.resolveDepthBuffer===!1,Be.__autoAllocateDepthBuffer===!1&&(Be.__useRenderToTexture=!1),Fe.get(ue.texture).__webglTexture=Ae,Fe.get(ue.depthTexture).__webglTexture=Be.__autoAllocateDepthBuffer?void 0:Ge,Be.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(ue,Ae){const Ge=Fe.get(ue);Ge.__webglFramebuffer=Ae,Ge.__useDefaultFramebuffer=Ae===void 0};const ec=oe.createFramebuffer();this.setRenderTarget=function(ue,Ae=0,Ge=0){L=ue,D=Ae,k=Ge;let Be=!0,Re=null,wt=!1,Tt=!1;if(ue){const jt=Fe.get(ue);if(jt.__useDefaultFramebuffer!==void 0)xe.bindFramebuffer(oe.FRAMEBUFFER,null),Be=!1;else if(jt.__webglFramebuffer===void 0)et.setupRenderTarget(ue);else if(jt.__hasExternalTextures)et.rebindTextures(ue,Fe.get(ue.texture).__webglTexture,Fe.get(ue.depthTexture).__webglTexture);else if(ue.depthBuffer){const Zt=ue.depthTexture;if(jt.__boundDepthTexture!==Zt){if(Zt!==null&&Fe.has(Zt)&&(ue.width!==Zt.image.width||ue.height!==Zt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");et.setupDepthRenderbuffer(ue)}}const Qt=ue.texture;(Qt.isData3DTexture||Qt.isDataArrayTexture||Qt.isCompressedArrayTexture)&&(Tt=!0);const nn=Fe.get(ue).__webglFramebuffer;ue.isWebGLCubeRenderTarget?(Array.isArray(nn[Ae])?Re=nn[Ae][Ge]:Re=nn[Ae],wt=!0):ue.samples>0&&et.useMultisampledRTT(ue)===!1?Re=Fe.get(ue).__webglMultisampledFramebuffer:Array.isArray(nn)?Re=nn[Ge]:Re=nn,q.copy(ue.viewport),U.copy(ue.scissor),J=ue.scissorTest}else q.copy(K).multiplyScalar(ee).floor(),U.copy(X).multiplyScalar(ee).floor(),J=ne;if(Ge!==0&&(Re=ec),xe.bindFramebuffer(oe.FRAMEBUFFER,Re)&&Be&&xe.drawBuffers(ue,Re),xe.viewport(q),xe.scissor(U),xe.setScissorTest(J),wt){const jt=Fe.get(ue.texture);oe.framebufferTexture2D(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,jt.__webglTexture,Ge)}else if(Tt){const jt=Ae;for(let Qt=0;Qt<ue.textures.length;Qt++){const nn=Fe.get(ue.textures[Qt]);oe.framebufferTextureLayer(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0+Qt,nn.__webglTexture,Ge,jt)}}else if(ue!==null&&Ge!==0){const jt=Fe.get(ue.texture);oe.framebufferTexture2D(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_2D,jt.__webglTexture,Ge)}$=-1},this.readRenderTargetPixels=function(ue,Ae,Ge,Be,Re,wt,Tt,Rt=0){if(!(ue&&ue.isWebGLRenderTarget)){Yi("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let jt=Fe.get(ue).__webglFramebuffer;if(ue.isWebGLCubeRenderTarget&&Tt!==void 0&&(jt=jt[Tt]),jt){xe.bindFramebuffer(oe.FRAMEBUFFER,jt);try{const Qt=ue.textures[Rt],nn=Qt.format,Zt=Qt.type;if(!Ze.textureFormatReadable(nn)){Yi("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ze.textureTypeReadable(Zt)){Yi("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ae>=0&&Ae<=ue.width-Be&&Ge>=0&&Ge<=ue.height-Re&&(ue.textures.length>1&&oe.readBuffer(oe.COLOR_ATTACHMENT0+Rt),oe.readPixels(Ae,Ge,Be,Re,Bt.convert(nn),Bt.convert(Zt),wt))}finally{const Qt=L!==null?Fe.get(L).__webglFramebuffer:null;xe.bindFramebuffer(oe.FRAMEBUFFER,Qt)}}},this.readRenderTargetPixelsAsync=async function(ue,Ae,Ge,Be,Re,wt,Tt,Rt=0){if(!(ue&&ue.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let jt=Fe.get(ue).__webglFramebuffer;if(ue.isWebGLCubeRenderTarget&&Tt!==void 0&&(jt=jt[Tt]),jt)if(Ae>=0&&Ae<=ue.width-Be&&Ge>=0&&Ge<=ue.height-Re){xe.bindFramebuffer(oe.FRAMEBUFFER,jt);const Qt=ue.textures[Rt],nn=Qt.format,Zt=Qt.type;if(!Ze.textureFormatReadable(nn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ze.textureTypeReadable(Zt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const wn=oe.createBuffer();oe.bindBuffer(oe.PIXEL_PACK_BUFFER,wn),oe.bufferData(oe.PIXEL_PACK_BUFFER,wt.byteLength,oe.STREAM_READ),ue.textures.length>1&&oe.readBuffer(oe.COLOR_ATTACHMENT0+Rt),oe.readPixels(Ae,Ge,Be,Re,Bt.convert(nn),Bt.convert(Zt),0);const Kn=L!==null?Fe.get(L).__webglFramebuffer:null;xe.bindFramebuffer(oe.FRAMEBUFFER,Kn);const Zn=oe.fenceSync(oe.SYNC_GPU_COMMANDS_COMPLETE,0);return oe.flush(),await noe(oe,Zn,4),oe.bindBuffer(oe.PIXEL_PACK_BUFFER,wn),oe.getBufferSubData(oe.PIXEL_PACK_BUFFER,0,wt),oe.deleteBuffer(wn),oe.deleteSync(Zn),wt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(ue,Ae=null,Ge=0){const Be=Math.pow(2,-Ge),Re=Math.floor(ue.image.width*Be),wt=Math.floor(ue.image.height*Be),Tt=Ae!==null?Ae.x:0,Rt=Ae!==null?Ae.y:0;et.setTexture2D(ue,0),oe.copyTexSubImage2D(oe.TEXTURE_2D,Ge,0,0,Tt,Rt,Re,wt),xe.unbindTexture()};const qu=oe.createFramebuffer(),gl=oe.createFramebuffer();this.copyTextureToTexture=function(ue,Ae,Ge=null,Be=null,Re=0,wt=null){wt===null&&(Re!==0?(c_("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),wt=Re,Re=0):wt=0);let Tt,Rt,jt,Qt,nn,Zt,wn,Kn,Zn;const Bn=ue.isCompressedTexture?ue.mipmaps[wt]:ue.image;if(Ge!==null)Tt=Ge.max.x-Ge.min.x,Rt=Ge.max.y-Ge.min.y,jt=Ge.isBox3?Ge.max.z-Ge.min.z:1,Qt=Ge.min.x,nn=Ge.min.y,Zt=Ge.isBox3?Ge.min.z:0;else{const si=Math.pow(2,-Re);Tt=Math.floor(Bn.width*si),Rt=Math.floor(Bn.height*si),ue.isDataArrayTexture?jt=Bn.depth:ue.isData3DTexture?jt=Math.floor(Bn.depth*si):jt=1,Qt=0,nn=0,Zt=0}Be!==null?(wn=Be.x,Kn=Be.y,Zn=Be.z):(wn=0,Kn=0,Zn=0);const tr=Bt.convert(Ae.format),en=Bt.convert(Ae.type);let hr;Ae.isData3DTexture?(et.setTexture3D(Ae,0),hr=oe.TEXTURE_3D):Ae.isDataArrayTexture||Ae.isCompressedArrayTexture?(et.setTexture2DArray(Ae,0),hr=oe.TEXTURE_2D_ARRAY):(et.setTexture2D(Ae,0),hr=oe.TEXTURE_2D),oe.pixelStorei(oe.UNPACK_FLIP_Y_WEBGL,Ae.flipY),oe.pixelStorei(oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ae.premultiplyAlpha),oe.pixelStorei(oe.UNPACK_ALIGNMENT,Ae.unpackAlignment);const Dn=oe.getParameter(oe.UNPACK_ROW_LENGTH),hi=oe.getParameter(oe.UNPACK_IMAGE_HEIGHT),vl=oe.getParameter(oe.UNPACK_SKIP_PIXELS),Sr=oe.getParameter(oe.UNPACK_SKIP_ROWS),Ya=oe.getParameter(oe.UNPACK_SKIP_IMAGES);oe.pixelStorei(oe.UNPACK_ROW_LENGTH,Bn.width),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,Bn.height),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,Qt),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,nn),oe.pixelStorei(oe.UNPACK_SKIP_IMAGES,Zt);const br=ue.isDataArrayTexture||ue.isData3DTexture,Ri=Ae.isDataArrayTexture||Ae.isData3DTexture;if(ue.isDepthTexture){const si=Fe.get(ue),Ii=Fe.get(Ae),zi=Fe.get(si.__renderTarget),Fa=Fe.get(Ii.__renderTarget);xe.bindFramebuffer(oe.READ_FRAMEBUFFER,zi.__webglFramebuffer),xe.bindFramebuffer(oe.DRAW_FRAMEBUFFER,Fa.__webglFramebuffer);for(let yl=0;yl<jt;yl++)br&&(oe.framebufferTextureLayer(oe.READ_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,Fe.get(ue).__webglTexture,Re,Zt+yl),oe.framebufferTextureLayer(oe.DRAW_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,Fe.get(Ae).__webglTexture,wt,Zn+yl)),oe.blitFramebuffer(Qt,nn,Tt,Rt,wn,Kn,Tt,Rt,oe.DEPTH_BUFFER_BIT,oe.NEAREST);xe.bindFramebuffer(oe.READ_FRAMEBUFFER,null),xe.bindFramebuffer(oe.DRAW_FRAMEBUFFER,null)}else if(Re!==0||ue.isRenderTargetTexture||Fe.has(ue)){const si=Fe.get(ue),Ii=Fe.get(Ae);xe.bindFramebuffer(oe.READ_FRAMEBUFFER,qu),xe.bindFramebuffer(oe.DRAW_FRAMEBUFFER,gl);for(let zi=0;zi<jt;zi++)br?oe.framebufferTextureLayer(oe.READ_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,si.__webglTexture,Re,Zt+zi):oe.framebufferTexture2D(oe.READ_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_2D,si.__webglTexture,Re),Ri?oe.framebufferTextureLayer(oe.DRAW_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,Ii.__webglTexture,wt,Zn+zi):oe.framebufferTexture2D(oe.DRAW_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_2D,Ii.__webglTexture,wt),Re!==0?oe.blitFramebuffer(Qt,nn,Tt,Rt,wn,Kn,Tt,Rt,oe.COLOR_BUFFER_BIT,oe.NEAREST):Ri?oe.copyTexSubImage3D(hr,wt,wn,Kn,Zn+zi,Qt,nn,Tt,Rt):oe.copyTexSubImage2D(hr,wt,wn,Kn,Qt,nn,Tt,Rt);xe.bindFramebuffer(oe.READ_FRAMEBUFFER,null),xe.bindFramebuffer(oe.DRAW_FRAMEBUFFER,null)}else Ri?ue.isDataTexture||ue.isData3DTexture?oe.texSubImage3D(hr,wt,wn,Kn,Zn,Tt,Rt,jt,tr,en,Bn.data):Ae.isCompressedArrayTexture?oe.compressedTexSubImage3D(hr,wt,wn,Kn,Zn,Tt,Rt,jt,tr,Bn.data):oe.texSubImage3D(hr,wt,wn,Kn,Zn,Tt,Rt,jt,tr,en,Bn):ue.isDataTexture?oe.texSubImage2D(oe.TEXTURE_2D,wt,wn,Kn,Tt,Rt,tr,en,Bn.data):ue.isCompressedTexture?oe.compressedTexSubImage2D(oe.TEXTURE_2D,wt,wn,Kn,Bn.width,Bn.height,tr,Bn.data):oe.texSubImage2D(oe.TEXTURE_2D,wt,wn,Kn,Tt,Rt,tr,en,Bn);oe.pixelStorei(oe.UNPACK_ROW_LENGTH,Dn),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,hi),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,vl),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,Sr),oe.pixelStorei(oe.UNPACK_SKIP_IMAGES,Ya),wt===0&&Ae.generateMipmaps&&oe.generateMipmap(hr),xe.unbindTexture()},this.initRenderTarget=function(ue){Fe.get(ue).__webglFramebuffer===void 0&&et.setupRenderTarget(ue)},this.initTexture=function(ue){ue.isCubeTexture?et.setTextureCube(ue,0):ue.isData3DTexture?et.setTexture3D(ue,0):ue.isDataArrayTexture||ue.isCompressedArrayTexture?et.setTexture2DArray(ue,0):et.setTexture2D(ue,0),xe.unbindTexture()},this.resetState=function(){D=0,k=0,L=null,xe.reset(),we.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Lu}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=pr._getDrawingBufferColorSpace(e),n.unpackColorSpace=pr._getUnpackColorSpace()}}const Gm={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class _g{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const She=new F9(-1,1,1,-1,0,1);class Ehe extends hl{constructor(){super(),this.setAttribute("position",new Gd([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Gd([0,2,0,0,2,0],2))}}const Che=new Ehe;class u_{constructor(e){this._mesh=new zc(Che,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,She)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class The extends _g{constructor(e,n="tDiffuse"){super(),this.textureID=n,this.uniforms=null,this.material=null,e instanceof Fi?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=ng.clone(e.uniforms),this.material=new Fi({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this._fsQuad=new u_(this.material)}render(e,n,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this._fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}}class vj extends _g{constructor(e,n){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,r){const i=e.getContext(),a=e.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0);let s,o;this.inverse?(s=0,o=1):(s=1,o=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),a.buffers.stencil.setFunc(i.ALWAYS,s,4294967295),a.buffers.stencil.setClear(o),a.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.color.setMask(!0),a.buffers.depth.setMask(!0),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(i.EQUAL,1,4294967295),a.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),a.buffers.stencil.setLocked(!0)}}class Mhe extends _g{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class G2{constructor(e,n){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),n===void 0){const r=e.getSize(new Sn);this._width=r.width,this._height=r.height,n=new sl(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Bl}),n.texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new The(Gm),this.copyPass.material.blending=Oc,this.clock=new Z_}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let r=!1;for(let i=0,a=this.passes.length;i<a;i++){const s=this.passes[i];if(s.enabled!==!1){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),s.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),s.needsSwap){if(r){const o=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}vj!==void 0&&(s instanceof vj?r=!0:s instanceof Mhe&&(r=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new Sn);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const r=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(r,i),this.renderTarget2.setSize(r,i);for(let a=0;a<this.passes.length;a++)this.passes[a].setSize(r,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class W2 extends _g{constructor(e,n,r=null,i=null,a=null){super(),this.scene=e,this.camera=n,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=a,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new or}render(e,n,r){const i=e.autoClear;e.autoClear=!1;let a,s;this.overrideMaterial!==null&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(a=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(a),this.overrideMaterial!==null&&(this.scene.overrideMaterial=s),e.autoClear=i}}const O4={uniforms:{damp:{value:.96},tOld:{value:null},tNew:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float damp;

		uniform sampler2D tOld;
		uniform sampler2D tNew;

		varying vec2 vUv;

		vec4 when_gt( vec4 x, float y ) {

			return max( sign( x - y ), 0.0 );

		}

		void main() {

			vec4 texelOld = texture2D( tOld, vUv );
			vec4 texelNew = texture2D( tNew, vUv );

			texelOld *= damp * when_gt( texelOld, 0.1 );

			gl_FragColor = max(texelNew, texelOld);

		}`};class GR extends _g{constructor(e=.96){super(),this.uniforms=ng.clone(O4.uniforms),this.damp=e,this.compFsMaterial=new Fi({uniforms:this.uniforms,vertexShader:O4.vertexShader,fragmentShader:O4.fragmentShader}),this.copyFsMaterial=new Fi({uniforms:ng.clone(Gm.uniforms),vertexShader:Gm.vertexShader,fragmentShader:Gm.fragmentShader,blending:Oc,depthTest:!1,depthWrite:!1}),this._textureComp=new sl(window.innerWidth,window.innerHeight,{magFilter:Hs,type:Bl}),this._textureOld=new sl(window.innerWidth,window.innerHeight,{magFilter:Hs,type:Bl}),this._compFsQuad=new u_(this.compFsMaterial),this._copyFsQuad=new u_(this.copyFsMaterial)}get damp(){return this.uniforms.damp.value}set damp(e){this.uniforms.damp.value=e}render(e,n,r){this.uniforms.tOld.value=this._textureOld.texture,this.uniforms.tNew.value=r.texture,e.setRenderTarget(this._textureComp),this._compFsQuad.render(e),this._copyFsQuad.material.uniforms.tDiffuse.value=this._textureComp.texture,this.renderToScreen?(e.setRenderTarget(null),this._copyFsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(),this._copyFsQuad.render(e));const i=this._textureOld;this._textureOld=this._textureComp,this._textureComp=i}setSize(e,n){this._textureComp.setSize(e,n),this._textureOld.setSize(e,n)}dispose(){this._textureComp.dispose(),this._textureOld.dispose(),this.compFsMaterial.dispose(),this.copyFsMaterial.dispose(),this._compFsQuad.dispose(),this._copyFsQuad.dispose()}}const Ahe={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new or(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class Bf extends _g{constructor(e,n=1,r,i){super(),this.strength=n,this.radius=r,this.threshold=i,this.resolution=e!==void 0?new Sn(e.x,e.y):new Sn(256,256),this.clearColor=new or(0,0,0),this.needsSwap=!1,this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let a=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);this.renderTargetBright=new sl(a,s,{type:Bl}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let h=0;h<this.nMips;h++){const f=new sl(a,s,{type:Bl});f.texture.name="UnrealBloomPass.h"+h,f.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(f);const m=new sl(a,s,{type:Bl});m.texture.name="UnrealBloomPass.v"+h,m.texture.generateMipmaps=!1,this.renderTargetsVertical.push(m),a=Math.round(a/2),s=Math.round(s/2)}const o=Ahe;this.highPassUniforms=ng.clone(o.uniforms),this.highPassUniforms.luminosityThreshold.value=i,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Fi({uniforms:this.highPassUniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader}),this.separableBlurMaterials=[];const c=[6,10,14,18,22];a=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);for(let h=0;h<this.nMips;h++)this.separableBlurMaterials.push(this._getSeparableBlurMaterial(c[h])),this.separableBlurMaterials[h].uniforms.invSize.value=new Sn(1/a,1/s),a=Math.round(a/2),s=Math.round(s/2);this.compositeMaterial=this._getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=n,this.compositeMaterial.uniforms.bloomRadius.value=.1;const u=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=u,this.bloomTintColors=[new qe(1,1,1),new qe(1,1,1),new qe(1,1,1),new qe(1,1,1),new qe(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,this.copyUniforms=ng.clone(Gm.uniforms),this.blendMaterial=new Fi({uniforms:this.copyUniforms,vertexShader:Gm.vertexShader,fragmentShader:Gm.fragmentShader,blending:eg,depthTest:!1,depthWrite:!1,transparent:!0}),this._oldClearColor=new or,this._oldClearAlpha=1,this._basic=new zR,this._fsQuad=new u_(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this._basic.dispose(),this._fsQuad.dispose()}setSize(e,n){let r=Math.round(e/2),i=Math.round(n/2);this.renderTargetBright.setSize(r,i);for(let a=0;a<this.nMips;a++)this.renderTargetsHorizontal[a].setSize(r,i),this.renderTargetsVertical[a].setSize(r,i),this.separableBlurMaterials[a].uniforms.invSize.value=new Sn(1/r,1/i),r=Math.round(r/2),i=Math.round(i/2)}render(e,n,r,i,a){e.getClearColor(this._oldClearColor),this._oldClearAlpha=e.getClearAlpha();const s=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),a&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this._fsQuad.material=this._basic,this._basic.map=r.texture,e.setRenderTarget(null),e.clear(),this._fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=r.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this._fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this._fsQuad.render(e);let o=this.renderTargetBright;for(let c=0;c<this.nMips;c++)this._fsQuad.material=this.separableBlurMaterials[c],this.separableBlurMaterials[c].uniforms.colorTexture.value=o.texture,this.separableBlurMaterials[c].uniforms.direction.value=Bf.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[c]),e.clear(),this._fsQuad.render(e),this.separableBlurMaterials[c].uniforms.colorTexture.value=this.renderTargetsHorizontal[c].texture,this.separableBlurMaterials[c].uniforms.direction.value=Bf.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[c]),e.clear(),this._fsQuad.render(e),o=this.renderTargetsVertical[c];this._fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this._fsQuad.render(e),this._fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,a&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(r),this._fsQuad.render(e)),e.setClearColor(this._oldClearColor,this._oldClearAlpha),e.autoClear=s}_getSeparableBlurMaterial(e){const n=[],r=e/3;for(let i=0;i<e;i++)n.push(.39894*Math.exp(-.5*i*i/(r*r))/r);return new Fi({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new Sn(.5,.5)},direction:{value:new Sn(.5,.5)},gaussianCoefficients:{value:n}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += ( sample1 + sample2 ) * w;
					}
					gl_FragColor = vec4( diffuseSum, 1.0 );
				}`})}_getCompositeMaterial(e){return new Fi({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}Bf.BlurDirectionX=new Sn(1,0);Bf.BlurDirectionY=new Sn(0,1);const nC={name:"OutputShader",uniforms:{tDiffuse:{value:null},toneMappingExposure:{value:1}},vertexShader:`
		precision highp float;

		uniform mat4 modelViewMatrix;
		uniform mat4 projectionMatrix;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D tDiffuse;

		#include <tonemapping_pars_fragment>
		#include <colorspace_pars_fragment>

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );

			// tone mapping

			#ifdef LINEAR_TONE_MAPPING

				gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );

			#elif defined( REINHARD_TONE_MAPPING )

				gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );

			#elif defined( CINEON_TONE_MAPPING )

				gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );

			#elif defined( ACES_FILMIC_TONE_MAPPING )

				gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );

			#elif defined( AGX_TONE_MAPPING )

				gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );

			#elif defined( NEUTRAL_TONE_MAPPING )

				gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );

			#elif defined( CUSTOM_TONE_MAPPING )

				gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );

			#endif

			// color space

			#ifdef SRGB_TRANSFER

				gl_FragColor = sRGBTransferOETF( gl_FragColor );

			#endif

		}`};class q2 extends _g{constructor(){super(),this.uniforms=ng.clone(nC.uniforms),this.material=new Roe({name:nC.name,uniforms:this.uniforms,vertexShader:nC.vertexShader,fragmentShader:nC.fragmentShader}),this._fsQuad=new u_(this.material),this._outputColorSpace=null,this._toneMapping=null}render(e,n,r){this.uniforms.tDiffuse.value=r.texture,this.uniforms.toneMappingExposure.value=e.toneMappingExposure,(this._outputColorSpace!==e.outputColorSpace||this._toneMapping!==e.toneMapping)&&(this._outputColorSpace=e.outputColorSpace,this._toneMapping=e.toneMapping,this.material.defines={},pr.getTransfer(this._outputColorSpace)===Fr&&(this.material.defines.SRGB_TRANSFER=""),this._toneMapping===u9?this.material.defines.LINEAR_TONE_MAPPING="":this._toneMapping===d9?this.material.defines.REINHARD_TONE_MAPPING="":this._toneMapping===h9?this.material.defines.CINEON_TONE_MAPPING="":this._toneMapping===f9?this.material.defines.ACES_FILMIC_TONE_MAPPING="":this._toneMapping===m9?this.material.defines.AGX_TONE_MAPPING="":this._toneMapping===g9?this.material.defines.NEUTRAL_TONE_MAPPING="":this._toneMapping===p9&&(this.material.defines.CUSTOM_TONE_MAPPING=""),this.material.needsUpdate=!0),this.renderToScreen===!0?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}}function Phe({preset:t,afterImageDamp:e=.35,bloomStrength:n=.4,bloomRadius:r=.3,bloomThreshold:i=.6}){const a=T.useRef(null),{targetMorphRef:s,contentRef:o,contentVersion:c,vortexRef:u}=bg(),h=T.useRef(0),f=T.useRef(1),m=T.useRef(null),g=T.useRef(null);return T.useEffect(()=>{const v=m.current;if(!v)return;const x=v.getAttribute("targetPos");x&&v.setAttribute("prevTargetPos",new er(new Float32Array(x.array),3)),v.setAttribute("targetPos",new er(Qm(o.current),3)),f.current=0},[c,o]),T.useEffect(()=>{if(!a.current)return;const v=a.current,x=new z2,_=new Us(60,window.innerWidth/window.innerHeight,.1,1e3);_.position.set(0,0,200),_.lookAt(0,0,0);const w=new H2({antialias:!0,alpha:!0,powerPreference:"high-performance"});w.setPixelRatio(Math.min(window.devicePixelRatio,2)),w.setSize(window.innerWidth,window.innerHeight),v.appendChild(w.domElement);const S=new hl,E=new Float32Array($u*3),A=new Float32Array($u),N=new Float32Array($u),P=new Float32Array($u);for(let G=0;G<$u;G++){const te=G*3;E[te]=(Math.random()-.5)*550,E[te+1]=(Math.random()-.5)*380,E[te+2]=(Math.random()-.5)*100,A[G]=Math.random();const ae=Math.random();N[G]=ae*ae;const pe=t.particleBaseSize+Math.random()*t.particleSizeVariance;P[G]=pe*(1-N[G]*t.layerSizeReduction)}const R=Qm(o.current);S.setAttribute("position",new er(E,3)),S.setAttribute("random",new er(A,1)),S.setAttribute("heightLayer",new er(N,1)),S.setAttribute("particleSize",new er(P,1)),S.setAttribute("targetPos",new er(R,3)),S.setAttribute("prevTargetPos",new er(new Float32Array(R),3)),m.current=S;const k=window.matchMedia("(prefers-color-scheme: dark)").matches?t.colors.dark:t.colors.light,L=t.name==="sand"?new qe(.12,.06,0):new qe(.05,.05,.05),$=t.name==="sand"?new qe(.9,.8,.6):new qe(.85,.85,.9),B=t.shaderTweaks??{},q=new Fi({uniforms:{time:{value:0},morphProgress:{value:0},transitionProgress:{value:1},colorPrimary:{value:new qe(k.primary.r,k.primary.g,k.primary.b)},colorSecondary:{value:new qe(k.secondary.r,k.secondary.g,k.secondary.b)},colorDust:{value:new qe(k.dust.r,k.dust.g,k.dust.b)},morphColorTint:{value:L},hazeColor:{value:$},vortexActive:{value:0},vortexCenter:{value:new Sn(0,0)},vortexStrength:{value:0},vortexRadius:{value:t.vortex.minRadius},vortexHeight:{value:0},primarySpeed:{value:t.drift.primarySpeed},primaryDirection:{value:t.drift.primaryDirection},lowLayerEffect:{value:t.drift.lowLayerEffect},midLayerEffect:{value:t.drift.midLayerEffect},highLayerEffect:{value:t.drift.highLayerEffect},waveSpeed:{value:t.drift.waveSpeed},waveScale:{value:t.drift.waveScale},clusterStrength:{value:t.drift.clusterStrength},clusterScale:{value:t.drift.clusterScale},turbulence:{value:t.form.turbulence},gustStrength:{value:t.form.gustStrength},gustFrequency:{value:t.form.gustFrequency},convergenceForce:{value:t.form.convergenceForce},rotationSpeed:{value:t.vortex.rotationSpeed},spiralTightness:{value:t.vortex.spiralTightness},suctionStrength:{value:t.vortex.suctionStrength},liftForce:{value:t.vortex.liftForce},coreDensity:{value:t.vortex.coreDensity},edgeDensity:{value:t.vortex.edgeDensity},tiltAmount:{value:t.vortex.tiltAmount},tiltDirection:{value:t.vortex.tiltDirection},maxVortexHeight:{value:t.vortex.maxHeight},formIntensityMultiplier:{value:B.formIntensityMultiplier??3.5},aliveBreathScale:{value:B.aliveBreathScale??2},vibrationScale:{value:B.vibrationScale??.6},baseAlphaLow:{value:t.baseAlpha.low},baseAlphaHigh:{value:t.baseAlpha.high}},vertexShader:vse,fragmentShader:yse,transparent:!0,blending:t.blending==="additive"?eg:Hm,depthWrite:!1});g.current=q;const U=window.matchMedia("(prefers-color-scheme: dark)"),J=G=>{const te=G.matches?t.colors.dark:t.colors.light;q.uniforms.colorPrimary.value.set(te.primary.r,te.primary.g,te.primary.b),q.uniforms.colorSecondary.value.set(te.secondary.r,te.secondary.g,te.secondary.b),q.uniforms.colorDust.value.set(te.dust.r,te.dust.g,te.dust.b)};U.addEventListener("change",J),x.add(new HR(S,q));const O=new G2(w),z=new W2(x,_);O.addPass(z);const V=new GR(e);O.addPass(V);const H=new Bf(new Sn(window.innerWidth,window.innerHeight),n,r,i);O.addPass(H);const ee=new q2;O.addPass(ee);const Y=new Z_;let Z;const K=B.vortexFadeMultiplier??135,X=()=>{const G=Y.getDelta();q.uniforms.time.value+=G;const te=s.current>h.current?O2:F2;h.current+=(s.current-h.current)*te,q.uniforms.morphProgress.value=h.current,f.current+=(1-f.current)*a9,q.uniforms.transitionProgress.value=f.current;const ae=u.current;!ae.active&&ae.strength>0&&(ae.strength=Math.max(0,ae.strength-NR),ae.radius=t.vortex.minRadius+ae.strength*K,ae.height=ae.strength*t.vortex.maxHeight),q.uniforms.vortexActive.value=ae.strength>.01?1:0,q.uniforms.vortexCenter.value.set(ae.x,ae.y),q.uniforms.vortexStrength.value=ae.strength,q.uniforms.vortexRadius.value=ae.radius,q.uniforms.vortexHeight.value=ae.height,O.render(),Z=requestAnimationFrame(X)};X();const ne=()=>{_.aspect=window.innerWidth/window.innerHeight,_.updateProjectionMatrix(),w.setSize(window.innerWidth,window.innerHeight),O.setSize(window.innerWidth,window.innerHeight),H.resolution.set(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",ne),()=>{m.current=null,g.current=null,cancelAnimationFrame(Z),window.removeEventListener("resize",ne),U.removeEventListener("change",J),v.removeChild(w.domElement),S.dispose(),q.dispose(),O.dispose(),w.dispose()}},[s,o,u,t,e,n,r,i]),l.jsx("div",{ref:a,style:{position:"fixed",inset:0,zIndex:-1,pointerEvents:"none"}})}const Nhe=.012,Dhe=`
  attribute float size;
  attribute float life;
  attribute vec3 velocity;
  attribute vec3 targetPos;
  attribute vec3 prevTargetPos;

  uniform float time;
  uniform float morphProgress;
  uniform float transitionProgress;
  uniform float vortexActive;
  uniform vec2 vortexCenter;
  uniform float vortexStrength;

  varying float vLife;
  varying float vMorph;
  varying float vSpeed;
  varying float vTransition;

  // Simplex noise functions
  vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
  vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
  vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
  vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }

  float snoise(vec3 v) {
    const vec2 C = vec2(1.0/6.0, 1.0/3.0);
    const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);
    vec3 i = floor(v + dot(v, C.yyy));
    vec3 x0 = v - i + dot(i, C.xxx);
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min(g.xyz, l.zxy);
    vec3 i2 = max(g.xyz, l.zxy);
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy;
    vec3 x3 = x0 - D.yyy;
    i = mod289(i);
    vec4 p = permute(permute(permute(
              i.z + vec4(0.0, i1.z, i2.z, 1.0))
            + i.y + vec4(0.0, i1.y, i2.y, 1.0))
            + i.x + vec4(0.0, i1.x, i2.x, 1.0));
    float n_ = 0.142857142857;
    vec3 ns = n_ * D.wyz - D.xzx;
    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);
    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_);
    vec4 x = x_ * ns.x + ns.yyyy;
    vec4 y = y_ * ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);
    vec4 b0 = vec4(x.xy, y.xy);
    vec4 b1 = vec4(x.zw, y.zw);
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));
    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww;
    vec3 p0 = vec3(a0.xy, h.x);
    vec3 p1 = vec3(a0.zw, h.y);
    vec3 p2 = vec3(a1.xy, h.z);
    vec3 p3 = vec3(a1.zw, h.w);
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2,p2), dot(p3,p3)));
    p0 *= norm.x; p1 *= norm.y; p2 *= norm.z; p3 *= norm.w;
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot(m*m, vec4(dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3)));
  }

  // Curl Noise -    ( )
  vec3 curlNoise(vec3 p) {
    float e = 0.1;
    vec3 dx = vec3(e, 0.0, 0.0);
    vec3 dy = vec3(0.0, e, 0.0);
    vec3 dz = vec3(0.0, 0.0, e);

    float n1 = snoise(p + dy) - snoise(p - dy);
    float n2 = snoise(p + dz) - snoise(p - dz);
    float n3 = snoise(p + dx) - snoise(p - dx);
    float n4 = snoise(p + dz) - snoise(p - dz);
    float n5 = snoise(p + dx) - snoise(p - dx);
    float n6 = snoise(p + dy) - snoise(p - dy);

    return normalize(vec3(
      n1 - n2,
      n3 - n4,
      n5 - n6
    )) / (2.0 * e);
  }

  // Smooth easing function
  float easeInOutCubic(float t) {
    return t < 0.5 ? 4.0 * t * t * t : 1.0 - pow(-2.0 * t + 2.0, 3.0) / 2.0;
  }

  void main() {
    // /  (easing )
    float easedTransition = easeInOutCubic(transitionProgress);
    vec3 currentTarget = mix(prevTargetPos, targetPos, easedTransition);

    //  
    vec3 pos = position;

    //    (0~1   )
    float isTransitioning = 1.0 - abs(transitionProgress * 2.0 - 1.0);
    isTransitioning = smoothstep(0.0, 0.3, isTransitioning);

    // Curl Noise  (   )
    float noiseScale = 0.008;
    float noiseSpeed = time * 0.15;
    vec3 noisePos = pos * noiseScale + vec3(0.0, 0.0, noiseSpeed);
    vec3 curl = curlNoise(noisePos);

    //      
    vec3 toTarget = normalize(currentTarget - pos);
    float distToTarget = length(currentTarget - pos);

    //  :   + curl noise 
    vec3 transitionFlow = mix(curl, toTarget, 0.3) * isTransitioning * 40.0;

    //    (life  ,   )
    float baseFlowStrength = 25.0 * (0.5 + life * 0.5);
    float flowStrength = baseFlowStrength * (1.0 - isTransitioning * 0.5);
    vec3 flowOffset = curl * flowStrength + transitionFlow;

    //    (  )
    float floatIntensity = 1.0 - isTransitioning * 0.7;
    float floatY = sin(time * 0.3 + life * 6.28) * 8.0 * floatIntensity;
    float floatX = cos(time * 0.2 + life * 4.0) * 6.0 * floatIntensity;

    //  
    vec3 vortexOffset = vec3(0.0);
    if (vortexActive > 0.5 && vortexStrength > 0.01) {
      vec2 toVortex = pos.xy - vortexCenter;
      float dist = length(toVortex);
      float influence = smoothstep(200.0, 0.0, dist) * vortexStrength;

      if (influence > 0.01) {
        float angle = atan(toVortex.y, toVortex.x) + time * 2.0 * vortexStrength;
        float spiralRadius = dist * (1.0 - influence * 0.3);

        vortexOffset.xy = vec2(cos(angle), sin(angle)) * spiralRadius - toVortex;
        vortexOffset.y += influence * 50.0;
      }
    }

    //   (curl noise + float)
    vec3 flowPos = pos + flowOffset + vec3(floatX, floatY, 0.0) + vortexOffset;

    //   (easing)
    float easedMorph = easeInOutCubic(morphProgress);
    vec3 morphedPos = mix(flowPos, currentTarget, easedMorph);

    //     
    if (morphProgress > 0.5) {
      float aliveIntensity = (morphProgress - 0.5) * 2.0;

      //  
      float breathe = sin(time * 1.2 + life * 3.14) * 2.0;
      morphedPos += normalize(currentTarget) * breathe * aliveIntensity * 0.5;

      //  (   )
      vec3 ripple = curlNoise(currentTarget * 0.02 + vec3(time * 0.5, 0.0, 0.0)) * 3.0;
      morphedPos += ripple * aliveIntensity;

      //     (     )
      if (isTransitioning > 0.1) {
        vec3 flowToNew = curlNoise(morphedPos * 0.01 + vec3(time * 0.3, 0.0, 0.0));
        morphedPos += flowToNew * isTransitioning * 5.0;
      }
    }

    pos = morphedPos;

    //   (/ )
    vSpeed = length(curl) + vortexStrength * 0.5 + isTransitioning * 0.3;

    vLife = life;
    vMorph = morphProgress;
    vTransition = isTransitioning;

    vec4 mvPos = modelViewMatrix * vec4(pos, 1.0);
    gl_Position = projectionMatrix * mvPos;

    //   (   )
    float baseSize = size * (1.0 + morphProgress * 0.3);
    float speedSize = 1.0 + vSpeed * 0.2;
    float transitionSize = 1.0 + isTransitioning * 0.2;
    gl_PointSize = (baseSize * speedSize * transitionSize / -mvPos.z) * 150.0;
  }
`,khe=`
  uniform vec3 color1;
  uniform vec3 color2;
  uniform vec3 color3;
  uniform float time;

  varying float vLife;
  varying float vMorph;
  varying float vSpeed;
  varying float vTransition;

  void main() {
    //   
    vec2 uv = gl_PointCoord - 0.5;
    float dist = length(uv);
    if (dist > 0.5) discard;

    //   
    float alpha = exp(-dist * dist * 8.0);

    //   (life + speed )
    float colorMix = vLife + vSpeed * 0.3;
    colorMix = fract(colorMix + time * 0.05);

    vec3 color;
    if (colorMix < 0.5) {
      color = mix(color1, color2, colorMix * 2.0);
    } else {
      color = mix(color2, color3, (colorMix - 0.5) * 2.0);
    }

    //   
    color += vec3(0.1) * vMorph;

    //    (  )
    color += vec3(0.08, 0.06, 0.1) * vTransition;

    //   
    color += vec3(0.05) * vSpeed;

    // 
    alpha *= 0.7 + vMorph * 0.3;

    gl_FragColor = vec4(color, alpha);
  }
`,rC={dark:{color1:{r:.4,g:.5,b:.7},color2:{r:.6,g:.6,b:.75},color3:{r:.75,g:.75,b:.85}},light:{color1:{r:.2,g:.25,b:.4},color2:{r:.3,g:.3,b:.45},color3:{r:.4,g:.4,b:.5}}};function Rhe({colors:t,particleCount:e=$u,afterImageDamp:n=.35}){const r=T.useRef(null),{targetMorphRef:i,contentRef:a,contentVersion:s,vortexRef:o}=bg(),c=T.useRef(0),u=T.useRef(1),h=T.useRef(null),f=T.useRef(null);return T.useEffect(()=>{const m=h.current;if(!m)return;const g=m.getAttribute("targetPos");g&&m.setAttribute("prevTargetPos",new er(new Float32Array(g.array),3)),m.setAttribute("targetPos",new er(Qm(a.current),3)),u.current=0},[s,a]),T.useEffect(()=>{if(!r.current)return;const m=r.current,g=new z2,v=new Us(60,window.innerWidth/window.innerHeight,.1,1e3);v.position.set(0,0,200),v.lookAt(0,0,0);const x=new H2({antialias:!0,alpha:!0,powerPreference:"high-performance"});x.setPixelRatio(Math.min(window.devicePixelRatio,2)),x.setSize(window.innerWidth,window.innerHeight),m.appendChild(x.domElement);const _=new hl,w=new Float32Array(e*3),S=new Float32Array(e),E=new Float32Array(e),A=new Float32Array(e*3);for(let H=0;H<e;H++){const ee=H*3;w[ee]=(Math.random()-.5)*500,w[ee+1]=(Math.random()-.5)*350,w[ee+2]=(Math.random()-.5)*80,S[H]=.8+Math.random()*1.2,E[H]=Math.random(),A[ee]=(Math.random()-.5)*2,A[ee+1]=(Math.random()-.5)*2,A[ee+2]=(Math.random()-.5)*.5}const N=Qm(a.current);_.setAttribute("position",new er(w,3)),_.setAttribute("size",new er(S,1)),_.setAttribute("life",new er(E,1)),_.setAttribute("velocity",new er(A,3)),_.setAttribute("targetPos",new er(N,3)),_.setAttribute("prevTargetPos",new er(new Float32Array(N),3)),h.current=_;const P=window.matchMedia("(prefers-color-scheme: dark)").matches,R=t||(P?rC.dark:rC.light),D=new Fi({uniforms:{time:{value:0},morphProgress:{value:0},transitionProgress:{value:1},vortexActive:{value:0},vortexCenter:{value:new Sn(0,0)},vortexStrength:{value:0},color1:{value:new qe(R.color1.r,R.color1.g,R.color1.b)},color2:{value:new qe(R.color2.r,R.color2.g,R.color2.b)},color3:{value:new qe(R.color3.r,R.color3.g,R.color3.b)}},vertexShader:Dhe,fragmentShader:khe,transparent:!0,blending:eg,depthWrite:!1});f.current=D;const k=window.matchMedia("(prefers-color-scheme: dark)"),L=H=>{const ee=H.matches?rC.dark:rC.light;D.uniforms.color1.value.set(ee.color1.r,ee.color1.g,ee.color1.b),D.uniforms.color2.value.set(ee.color2.r,ee.color2.g,ee.color2.b),D.uniforms.color3.value.set(ee.color3.r,ee.color3.g,ee.color3.b)};k.addEventListener("change",L),g.add(new HR(_,D));const $=new G2(x),B=new W2(g,v);$.addPass(B);const q=new GR(n);$.addPass(q);const U=new q2;$.addPass(U);const J=new Z_;let O;const z=()=>{const H=J.getDelta();D.uniforms.time.value+=H;const ee=i.current>c.current?O2:F2;c.current+=(i.current-c.current)*ee,D.uniforms.morphProgress.value=c.current,u.current+=(1-u.current)*Nhe,D.uniforms.transitionProgress.value=u.current;const Y=o.current;!Y.active&&Y.strength>0&&(Y.strength=Math.max(0,Y.strength-NR)),D.uniforms.vortexActive.value=Y.strength>.01?1:0,D.uniforms.vortexCenter.value.set(Y.x,Y.y),D.uniforms.vortexStrength.value=Y.strength,$.render(),O=requestAnimationFrame(z)};z();const V=()=>{v.aspect=window.innerWidth/window.innerHeight,v.updateProjectionMatrix(),x.setSize(window.innerWidth,window.innerHeight),$.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",V),()=>{h.current=null,f.current=null,cancelAnimationFrame(O),window.removeEventListener("resize",V),k.removeEventListener("change",L),m.removeChild(x.domElement),_.dispose(),D.dispose(),$.dispose(),x.dispose()}},[i,a,o,t,e,n]),l.jsx("div",{ref:r,style:{position:"fixed",inset:0,zIndex:-1,pointerEvents:"none"}})}const Aa=Math.min($u,2e4),n1=100,yj=168,Ihe=200,bv=.6,iC=2,pm=128,bj=150,aC=2,xj=.05,sC=168,_j=198,G9="",W9="",$he=(()=>{let t="";for(const e of G9)for(const n of W9){const r=44032+(e.charCodeAt(0)-12593)*588+(n.charCodeAt(0)-12623)*28;r>=44032&&r<=55203&&(t+=String.fromCharCode(r))}return t})(),jhe="",Lhe="",Ohe="",Fhe="",Bhe="",Tf="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz{}[]()<>+-*/=!?;:.,@#$%^&|~`_\\\"'"+jhe+Lhe+G9+W9+$he+Ohe+Fhe+Bhe;function zhe(){const e=Math.ceil(Tf.length/12),n=12*pm,r=e*pm,i=document.createElement("canvas");i.width=n,i.height=r;const a=i.getContext("2d");a.clearRect(0,0,n,r),a.font=`bold ${pm*.75}px "MS Gothic", "Meiryo", "Hiragino Kaku Gothic Pro", monospace`,a.textAlign="center",a.textBaseline="middle";for(let o=0;o<Tf.length;o++){const c=o%12,u=Math.floor(o/12),h=c*pm+pm/2,f=u*pm+pm/2;a.shadowColor="rgba(0, 255, 100, 1)",a.shadowBlur=8,a.fillStyle="#00ff66",a.fillText(Tf[o],h,f),a.shadowBlur=0,a.fillText(Tf[o],h,f)}const s=new j9(i);return s.minFilter=ys,s.magFilter=ys,s.needsUpdate=!0,s}const Uhe=`
  attribute vec3 instancePosition;
  attribute float instanceCharIndex;
  attribute float instanceBrightness;
  attribute float instanceDepth;
  attribute float instanceSpeed;
  attribute float instanceSize;
  attribute float instanceSpawnTime;

  uniform float time;
  uniform float morphProgress;
  uniform sampler2D targetPositions;
  uniform vec2 targetSize;
  uniform float screenHeight;
  uniform float depthSpeedMultiplier;
  uniform float mouseWorldY;
  uniform float mouseActive;

  varying vec2 vUv;
  varying float vBrightness;
  varying float vCharIndex;
  varying float vDepth;
  varying float vCollision;
  varying float vVisible;

  void main() {
    vUv = uv;
    vCharIndex = instanceCharIndex;
    vDepth = instanceDepth;

    //   :     
    float spawnProgress = step(instanceSpawnTime, time);
    vVisible = spawnProgress;

    //       
    if (spawnProgress < 0.5) {
      gl_Position = vec4(0.0, 0.0, -1000.0, 1.0);
      vBrightness = 0.0;
      vCollision = 0.0;
      return;
    }

    vec3 pos = instancePosition;

    // Matrix :   
    float vortexEffect = 0.0;

    //    ( )
    float instanceId = float(gl_InstanceID);
    vec2 targetUV = vec2(mod(instanceId, targetSize.x) / targetSize.x,
                         floor(instanceId / targetSize.x) / targetSize.y);
    vec4 targetData = texture2D(targetPositions, targetUV);
    vec3 targetPos = targetData.xyz;

    //  :     
    float distToTarget = length(pos.xy - targetPos.xy);
    float collisionRadius = 8.0;
    float collision = smoothstep(collisionRadius, 0.0, distToTarget) * morphProgress;
    vCollision = max(collision, vortexEffect); //   collision 

    //  :      
    if (collision > 0.1) {
      //   
      pos.xy = mix(pos.xy, targetPos.xy, collision * 0.8);
      //    :  ( depth)   
      float depthSpeedFactor = 1.0 + (1.0 - instanceDepth) * depthSpeedMultiplier;
      pos.y -= collision * time * instanceSpeed * depthSpeedFactor * 0.3;
      //   
      pos.x += sin(time * 2.0 + float(gl_InstanceID) * 0.1) * collision * 2.0;
    }

    //    ()
    float depthScale = 1.0 - instanceDepth * 0.4;

    //  Y     2 (hover )
    float mouseProximity = 1.0 - smoothstep(0.0, 15.0, abs(pos.y - mouseWorldY));
    float mouseSizeMultiplier = 1.0 + mouseProximity * mouseActive * 1.0; //  2

    //    +  
    float finalSize = instanceSize * depthScale * mouseSizeMultiplier;

    //       
    //   = 1.0 (,  )
    //   =   ()
    float age = time - instanceSpawnTime;
    float fadeTime = 8.0; //     ()
    float ageBrightness = max(0.05, 1.0 - age / fadeTime);

    // :    +  
    vBrightness = ageBrightness * (1.0 - instanceDepth * 0.3);

    // /   
    vBrightness += vCollision * 0.5;

    //      (  )
    vec3 transformed = position * finalSize + pos;

    // Billboard:   
    vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);
    mvPosition.xyz += position * finalSize;

    gl_Position = projectionMatrix * mvPosition;
  }
`,Vhe=`
  uniform sampler2D charAtlas;
  uniform float charsPerRow;
  uniform float charRows;
  uniform float time;

  varying vec2 vUv;
  varying float vBrightness;
  varying float vCharIndex;
  varying float vDepth;
  varying float vCollision;
  varying float vVisible;

  void main() {
    //      
    if (vVisible < 0.5) discard;
    //   UV 
    float charIdx = floor(vCharIndex);
    float col = mod(charIdx, charsPerRow);
    float row = floor(charIdx / charsPerRow);

    vec2 charUV = vec2(
      (col + vUv.x) / charsPerRow,
      (row + (1.0 - vUv.y)) / charRows
    );

    vec4 texColor = texture2D(charAtlas, charUV);

    //  
    vec3 baseGreen = vec3(0.0, 1.0, 0.4);
    vec3 brightGreen = vec3(0.5, 1.0, 0.6);
    vec3 headWhite = vec3(0.9, 1.0, 0.95);

    //   
    vec3 color;
    if (vBrightness > 0.9) {
      // : 
      color = mix(brightGreen, headWhite, (vBrightness - 0.9) * 10.0);
    } else {
      // :  
      color = mix(baseGreen * 0.3, brightGreen, vBrightness);
    }

    //     
    color = mix(color, headWhite, vCollision * 0.5);

    //  
    float flicker = 0.9 + 0.1 * sin(time * 10.0 + vCharIndex * 2.5);
    color *= flicker;

    //    
    float fog = 1.0 - vDepth * 0.3;
    color *= fog;

    // 
    float alpha = texColor.a * vBrightness;

    //     
    alpha = mix(alpha, min(alpha * 1.5, 1.0), vCollision);

    if (alpha < 0.05) discard;

    gl_FragColor = vec4(color, alpha);
  }
`;function Hhe({bloomStrength:t=1.2,bloomRadius:e=.8,bloomThreshold:n=.1,speedMultiplier:r=1}){const i=T.useRef(null),{targetMorphRef:a,contentRef:s,contentVersion:o}=bg(),c=T.useRef(0),u=T.useRef(null),h=T.useRef(null);return T.useEffect(()=>{if(!u.current)return;const f=Qm(s.current),m=Math.ceil(Math.sqrt(Aa)),g=new Float32Array(m*m*4);for(let x=0;x<Aa;x++){const _=x*3,w=x*4;g[w]=f[_]||0,g[w+1]=f[_+1]||0,g[w+2]=f[_+2]||0,g[w+3]=1}const v=u.current.image?.data;v&&(v.set(g),u.current.needsUpdate=!0)},[o,s]),T.useEffect(()=>{if(!i.current)return;const f=i.current,m=new z2;m.background=new or(0),m.fog=new UR(0,100,400);const g=new Us(75,window.innerWidth/window.innerHeight,.1,1e3);g.position.set(0,0,100),g.lookAt(0,0,0);const v=new H2({antialias:!0,alpha:!1,powerPreference:"high-performance"});v.setPixelRatio(Math.min(window.devicePixelRatio,2)),v.setSize(window.innerWidth,window.innerHeight),f.appendChild(v.domElement);const x=zhe(),_=12,w=Math.ceil(Tf.length/_),S=Math.ceil(Math.sqrt(Aa)),E=new Float32Array(S*S*4),A=new VR(E,S,S,Ol,Rc);A.needsUpdate=!0,u.current=A;const N=window.innerWidth/window.innerHeight,P=2*Math.tan(75*Math.PI/360)*100,R=P*N,D=R/2,k=P/2,L=new Y_(1,1),$=new Float32Array(Aa*3),B=new Float32Array(Aa),q=new Float32Array(Aa),U=new Float32Array(Aa),J=new Float32Array(Aa),O=new Float32Array(Aa),z=new Float32Array(Aa),V=R*1.2/n1,H=[];for(let Le=0;Le<n1;Le++)H.push({speed:(.3+Math.random()*.7)*r,length:sC+Math.floor(Math.random()*(_j-sC+1)),depth:Math.random(),headY:k+Math.random()*k*2,charCount:yj+Math.floor(Math.random()*(Ihe-yj+1)),startDelay:Math.random()*2,spawnedCount:0,lastSpawnTime:0});let ee=0;for(let Le=0;Le<n1&&ee<Aa;Le++){const Ve=H[Le],xe=-D*1.1+Le*V+V/2+(Math.random()-.5)*.3,ht=(bv+iC)/2*1.2;for(let Fe=0;Fe<Ve.charCount&&ee<Aa;Fe++){const et=ee*3;$[et]=xe;const de=bv+Math.random()*(iC-bv);$[et+1]=Ve.headY-Fe*ht,$[et+2]=-Ve.depth*bj,B[ee]=Math.floor(Math.random()*Tf.length);const re=Fe===0?1:Fe<Ve.length?Math.max(.1,1-Fe/Ve.length*.9):.05;q[ee]=re,U[ee]=Ve.depth;const Ce=1+(1-Ve.depth)*aC;J[ee]=Ve.speed*Ce,O[ee]=de,z[ee]=Ve.startDelay+Fe*xj,ee++}}const Y=L.clone();Y.setAttribute("instancePosition",new Dd($,3)),Y.setAttribute("instanceCharIndex",new Dd(B,1)),Y.setAttribute("instanceBrightness",new Dd(q,1)),Y.setAttribute("instanceDepth",new Dd(U,1)),Y.setAttribute("instanceSpeed",new Dd(J,1)),Y.setAttribute("instanceSize",new Dd(O,1)),Y.setAttribute("instanceSpawnTime",new Dd(z,1));const Z=new Fi({uniforms:{charAtlas:{value:x},charsPerRow:{value:_},charRows:{value:w},time:{value:0},morphProgress:{value:0},targetPositions:{value:A},targetSize:{value:new Sn(S,S)},screenHeight:{value:P},depthSpeedMultiplier:{value:aC},mouseWorldY:{value:0},mouseActive:{value:0}},vertexShader:Uhe,fragmentShader:Vhe,transparent:!0,blending:eg,depthWrite:!1,depthTest:!0,side:ju});h.current=Z;const K=new Aoe(Y,Z,Aa);K.frustumCulled=!1;const X=new Gs;for(let Le=0;Le<Aa;Le++)X.position.set(0,0,0),X.updateMatrix(),K.setMatrixAt(Le,X.matrix);K.instanceMatrix.needsUpdate=!0,m.add(K);const ne=new G2(v);ne.addPass(new W2(m,g));const G=new Bf(new Sn(window.innerWidth,window.innerHeight),t,e,n);ne.addPass(G),ne.addPass(new q2);const te=new Z_;let ae;const pe=new Float32Array(Aa);for(let Le=0;Le<Aa;Le++)pe[Le]=Math.random()*30;let ye=0,me=0;const fe=Le=>{ye=-(Le.clientY/window.innerHeight*2-1)*k,me=1},ge=()=>{me=0};window.addEventListener("mousemove",fe),window.addEventListener("mouseleave",ge);const be=()=>{const Le=te.getDelta(),Ve=te.getElapsedTime();Z.uniforms.time.value=Ve,Z.uniforms.mouseWorldY.value=ye,Z.uniforms.mouseActive.value=me;const xe=c.current>.1?.1:1,ht=a.current>c.current?O2:F2;c.current+=(a.current-c.current)*ht,Z.uniforms.morphProgress.value=c.current;const Fe=Y.getAttribute("instancePosition"),et=Y.getAttribute("instanceCharIndex"),de=Y.getAttribute("instanceBrightness"),re=Y.getAttribute("instanceDepth"),Ce=Y.getAttribute("instanceSize"),ke=Y.getAttribute("instanceSpeed"),De=Y.getAttribute("instanceSpawnTime"),je=[];let mt=0;for(let rt=0;rt<n1;rt++)je[rt]=mt,mt+=H[rt].charCount;for(let rt=0;rt<n1;rt++){const bt=H[rt],dt=-D*1.1+rt*V+V/2,Je=je[rt],ot=1+(1-bt.depth)*aC,It=bt.speed*ot*Le*30*xe;let Ct=1/0,St=bt.headY;for(let Bt=0;Bt<bt.charCount&&Je+Bt<Aa;Bt++){const we=Je+Bt,xt=we*3,_t=De.array[we];if(Ve>=_t){const it=Fe.array[xt+1]-It;Fe.array[xt+1]=it,Ct=it,St=it;const Qe=Bt===0;pe[we]-=Le*60*(Qe?4:1),pe[we]<=0&&(et.array[we]=Math.floor(Math.random()*Tf.length),pe[we]=Qe?2+Math.random()*5:8+Math.random()*25)}else{const it=Ce.array[we];Fe.array[xt+1]=St+it*1.5}}if(Ct!==1/0&&Ct<-k-30){const Bt=k+30+Math.random()*60,we=sC+Math.floor(Math.random()*(_j-sC+1)),xt=Math.random();bt.headY=Bt,bt.length=we,bt.depth=xt,bt.speed=(.3+Math.random()*.7)*r;const _t=dt+(Math.random()-.5)*.3,vt=(bv+iC)/2*1.2;for(let it=0;it<bt.charCount&&Je+it<Aa;it++){const Qe=Je+it,At=Qe*3;Fe.array[At]=_t;const We=bv+Math.random()*(iC-bv);Fe.array[At+1]=Bt-it*vt,Fe.array[At+2]=-xt*bj,et.array[Qe]=Math.floor(Math.random()*Tf.length);const ft=it===0?1:it<we?Math.max(.1,1-it/we*.9):.05;de.array[Qe]=ft,re.array[Qe]=xt;const yt=1+(1-xt)*aC;ke.array[Qe]=bt.speed*yt,Ce.array[Qe]=We,De.array[Qe]=Ve+it*xj}ke.needsUpdate=!0,De.needsUpdate=!0}}Fe.needsUpdate=!0,et.needsUpdate=!0,de.needsUpdate=!0,re.needsUpdate=!0,Ce.needsUpdate=!0,ne.render(),ae=requestAnimationFrame(be)};be();const oe=()=>{g.aspect=window.innerWidth/window.innerHeight,g.updateProjectionMatrix(),v.setSize(window.innerWidth,window.innerHeight),ne.setSize(window.innerWidth,window.innerHeight),G.resolution.set(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",oe),()=>{u.current=null,h.current=null,cancelAnimationFrame(ae),window.removeEventListener("resize",oe),window.removeEventListener("mousemove",fe),window.removeEventListener("mouseleave",ge),f.removeChild(v.domElement),Y.dispose(),L.dispose(),Z.dispose(),x.dispose(),A.dispose(),ne.dispose(),v.dispose()}},[a,s,t,e,n,r]),l.jsx("div",{ref:i,style:{position:"fixed",inset:0,zIndex:-1,pointerEvents:"none"}})}const Pl=Math.min($u,15e3),mm=24,q9="",K9="",Ghe=(()=>{let t="";for(const e of q9)for(const n of K9){const r=44032+(e.charCodeAt(0)-12593)*588+(n.charCodeAt(0)-12623)*28;r>=44032&&r<=55203&&(t+=String.fromCharCode(r))}return t})(),Whe="",qhe="",Khe="",Xhe="",Yhe="",Lm="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz{}[]()<>+-*/=!?;:.,@#$%^&|~`_\\\"'"+Whe+qhe+q9+K9+Ghe+Khe+Xhe+Yhe;function Zhe(){const e=Math.ceil(Lm.length/12),n=12*mm,r=e*mm,i=document.createElement("canvas");i.width=n,i.height=r;const a=i.getContext("2d");a.clearRect(0,0,n,r),a.font=`bold ${mm*.7}px "Fira Code", "Source Code Pro", "Consolas", monospace`,a.textAlign="center",a.textBaseline="middle";for(let o=0;o<Lm.length;o++){const c=o%12,u=Math.floor(o/12),h=c*mm+mm/2,f=u*mm+mm/2;a.shadowColor="rgba(0, 255, 180, 0.8)",a.shadowBlur=4,a.fillStyle="#00ffaa",a.fillText(Lm[o],h,f),a.shadowBlur=0,a.fillText(Lm[o],h,f)}const s=new j9(i);return s.minFilter=ys,s.magFilter=ys,s.needsUpdate=!0,s}const Jhe=`
  attribute float charIndex;
  attribute float random;
  attribute float heightLayer;
  attribute float particleSize;
  attribute float glowIntensity;
  attribute vec3 targetPos;
  attribute vec3 prevTargetPos;

  uniform float time;
  uniform float morphProgress;
  uniform float transitionProgress;

  // / 
  uniform float primarySpeed;
  uniform float primaryDirection;
  uniform float lowLayerEffect;
  uniform float midLayerEffect;
  uniform float highLayerEffect;
  uniform float waveSpeed;
  uniform float waveScale;
  uniform float clusterStrength;
  uniform float clusterScale;

  //  
  uniform float turbulence;
  uniform float gustStrength;
  uniform float gustFrequency;
  uniform float convergenceForce;
  uniform float formIntensityMultiplier;
  uniform float aliveBreathScale;
  uniform float vibrationScale;

  //  
  uniform float vortexActive;
  uniform vec2 vortexCenter;
  uniform float vortexStrength;
  uniform float vortexRadius;
  uniform float vortexHeight;
  uniform float rotationSpeed;
  uniform float spiralTightness;
  uniform float suctionStrength;
  uniform float liftForce;
  uniform float coreDensity;
  uniform float edgeDensity;
  uniform float tiltAmount;
  uniform float tiltDirection;
  uniform float maxVortexHeight;

  varying vec2 vUv;
  varying float vCharIndex;
  varying float vAlpha;
  varying float vMorphProgress;
  varying float vGlowIntensity;

  //   
  vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
  vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
  vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
  vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }

  float snoise(vec3 v) {
    const vec2 C = vec2(1.0/6.0, 1.0/3.0);
    const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);
    vec3 i = floor(v + dot(v, C.yyy));
    vec3 x0 = v - i + dot(i, C.xxx);
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min(g.xyz, l.zxy);
    vec3 i2 = max(g.xyz, l.zxy);
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy;
    vec3 x3 = x0 - D.yyy;
    i = mod289(i);
    vec4 p = permute(permute(permute(
              i.z + vec4(0.0, i1.z, i2.z, 1.0))
            + i.y + vec4(0.0, i1.y, i2.y, 1.0))
            + i.x + vec4(0.0, i1.x, i2.x, 1.0));
    float n_ = 0.142857142857;
    vec3 ns = n_ * D.wyz - D.xzx;
    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);
    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_);
    vec4 x = x_ * ns.x + ns.yyyy;
    vec4 y = y_ * ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);
    vec4 b0 = vec4(x.xy, y.xy);
    vec4 b1 = vec4(x.zw, y.zw);
    vec4 s0 = floor(b0) * 2.0 + 1.0;
    vec4 s1 = floor(b1) * 2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));
    vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy;
    vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww;
    vec3 p0 = vec3(a0.xy, h.x);
    vec3 p1 = vec3(a0.zw, h.y);
    vec3 p2 = vec3(a1.xy, h.z);
    vec3 p3 = vec3(a1.zw, h.w);
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2,p2), dot(p3,p3)));
    p0 *= norm.x; p1 *= norm.y; p2 *= norm.z; p3 *= norm.w;
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot(m*m, vec4(dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3)));
  }

  void main() {
    vUv = uv;
    vCharIndex = charIndex;
    vMorphProgress = morphProgress;

    //   
    vec3 currentTarget = mix(prevTargetPos, targetPos, transitionProgress);
    vec3 pos = position;

    // ===== Curl Noise    (sin/cos  -  ) =====
    // CurlNoiseCanvas   

    float layerEffect = mix(
      mix(lowLayerEffect, midLayerEffect, heightLayer),
      highLayerEffect,
      heightLayer * heightLayer
    );

    // Curl noise :    
    // curl(f) = (df/dy, -df/dx)  sin/cos 
    float noiseScale = 0.008; //  
    float flowSpeed = time * 0.4; //  

    //  curl   (3 )
    float px1 = pos.x * noiseScale + flowSpeed;
    float py1 = pos.y * noiseScale + flowSpeed * 0.7;
    float pz1 = pos.z * noiseScale * 0.5;

    //    (  )
    float curl1x = sin(py1 * 2.0 + pz1) * cos(px1 * 1.3) - sin(pz1 * 1.5 + px1) * cos(py1 * 0.8);
    float curl1y = sin(pz1 * 2.0 + px1) * cos(py1 * 1.3) - sin(px1 * 1.5 + py1) * cos(pz1 * 0.8);
    float curl1z = sin(px1 * 2.0 + py1) * cos(pz1 * 1.3) - sin(py1 * 1.5 + pz1) * cos(px1 * 0.8);

    //    ( )
    float px2 = pos.x * noiseScale * 2.0 + flowSpeed * 1.3;
    float py2 = pos.y * noiseScale * 2.0 + flowSpeed * 0.9;
    float curl2x = sin(py2 * 2.5 + random * 3.0) * cos(px2 * 1.8) * 0.5;
    float curl2y = sin(px2 * 2.5 + random * 2.0) * cos(py2 * 1.8) * 0.5;

    //    ( )
    float px3 = pos.x * noiseScale * 4.0 + flowSpeed * 2.0;
    float py3 = pos.y * noiseScale * 4.0 + flowSpeed * 1.5;
    float curl3x = sin(py3 * 3.0) * cos(px3 * 2.5) * 0.25;
    float curl3y = sin(px3 * 3.0) * cos(py3 * 2.5) * 0.25;

    //  curl 
    vec3 curlFlow = vec3(
      curl1x + curl2x + curl3x,
      curl1y + curl2y + curl3y,
      curl1z * 0.3 // z 
    );

    //   (CurlNoiseCanvas flowStrength = 25.0 )
    float flowStrength = 20.0 * (0.6 + heightLayer * 0.4); //   
    vec3 flowOffset = normalize(curlFlow + vec3(0.001)) * flowStrength;

    // Float  (CurlNoiseCanvas  -   amplitude)
    float floatPhase = time * 0.3 + random * 6.28;
    float floatY = sin(floatPhase) * 8.0; // Y amplitude 8.0
    float floatX = cos(time * 0.2 + random * 4.0) * 6.0; // X amplitude 6.0
    float floatZ = sin(time * 0.15 + random * 5.0) * 4.0; // Z amplitude 4.0
    vec3 floatOffset = vec3(floatX, floatY, floatZ);

    //   (  )
    float wavePhase = pos.x * waveScale * 50.0 + pos.y * waveScale * 30.0 + time * waveSpeed;
    float wave = (sin(wavePhase) + cos(wavePhase * 0.7)) * 0.5 * layerEffect * 5.0;

    //   ( )
    float clusterPhase = pos.x * clusterScale * 80.0 + pos.y * clusterScale * 60.0 + time * 0.15 + random * 10.0;
    float cluster = sin(clusterPhase) * clusterStrength * 1.5;

    //   drift   (  )
    float driftReduction = 1.0 - morphProgress * morphProgress * 0.95; //   95% 

    //  : curl flow + float + wave + cluster (  )
    vec3 driftOffset = (flowOffset + floatOffset + vec3(wave, cluster, 0.0)) * driftReduction;

    // ===== /  =====
    float formIntensity = morphProgress * formIntensityMultiplier;

    vec3 toTarget = currentTarget - pos;
    float dist = length(toTarget);
    vec3 dir = normalize(toTarget + vec3(0.001));

    //    (:   )
    float pullStrength = convergenceForce * formIntensity * (1.0 + dist * 0.02);
    vec3 convergence = dir * pullStrength * 25.0; // 15.0  25.0 

    //      (morphProgress    )
    float accuracyBoost = morphProgress * morphProgress * morphProgress; // 3 
    vec3 accuracyCorrection = toTarget * accuracyBoost * 0.15;

    //  (sin   -  ) -    
    float turbReduction = 1.0 - morphProgress * 0.8; //   80% 
    float turbPhase = pos.x * 0.02 + pos.y * 0.015 + time * 0.3 + random * 6.28;
    float turbNoise = sin(turbPhase) * cos(turbPhase * 1.3) * turbulence * formIntensity * turbReduction;
    vec3 turbulenceOffset = vec3(turbNoise, turbNoise * 0.8, turbNoise * 0.5);

    //  -    
    float gustPhase = time * gustFrequency + random * 6.28;
    float gustMask = smoothstep(0.7, 1.0, sin(gustPhase));
    vec3 gustOffset = vec3(
      sin(gustPhase * 2.3) * gustStrength,
      cos(gustPhase * 1.7) * gustStrength * 0.6,
      0.0
    ) * gustMask * formIntensity * 0.3 * turbReduction;

    //   -    
    float breath = sin(time * 1.5 + random * 6.28) * aliveBreathScale * morphProgress * (1.0 - morphProgress * 0.7);
    vec3 breathOffset = dir * breath;

    //   (sin   -  ) -    
    float vibPhaseX = pos.x * 0.1 + pos.y * 0.08 + time * 3.0;
    float vibPhaseY = pos.x * 0.08 + pos.y * 0.1 + time * 3.0 + 1.57;
    vec3 vibration = vec3(
      sin(vibPhaseX) * cos(vibPhaseX * 0.5),
      sin(vibPhaseY) * cos(vibPhaseY * 0.5),
      0.0
    ) * vibrationScale * morphProgress * turbReduction;

    // =====   =====
    vec3 vortexOffset = vec3(0.0);
    if (vortexActive > 0.5 && vortexStrength > 0.01) {
      vec2 toVortex = pos.xy - vortexCenter;
      float vDist = length(toVortex);

      float influence = smoothstep(vortexRadius * 1.5, 0.0, vDist);
      influence *= vortexStrength;

      float angle = atan(toVortex.y, toVortex.x);
      float rotAngle = angle + time * rotationSpeed * (1.0 + (1.0 - vDist / vortexRadius) * 2.0);

      float spiralR = vDist * (1.0 - influence * spiralTightness);
      vec2 rotatedPos = vec2(cos(rotAngle), sin(rotAngle)) * spiralR;

      vec2 suctionDir = -normalize(toVortex + vec2(0.001));
      float suctionForce = suctionStrength * influence * (1.0 - vDist / vortexRadius);

      float heightProgress = vDist / vortexRadius;
      float targetHeight = vortexHeight * (1.0 - heightProgress * heightProgress);
      float currentLift = (targetHeight - pos.z) * liftForce * influence;

      float tiltOffset = sin(angle + tiltDirection) * tiltAmount * vortexHeight * influence;

      vortexOffset = vec3(
        (rotatedPos.x - toVortex.x) * influence + suctionDir.x * suctionForce,
        (rotatedPos.y - toVortex.y) * influence + suctionDir.y * suctionForce,
        currentLift + tiltOffset
      );
    }

    // =====   =====
    vec3 alivePos = pos + driftOffset;

    //  : morphProgress    
    //     (   )
    float vibX = sin(time * 2.5 + random * 6.28) * 1.5;
    float vibY = cos(time * 2.0 + random * 5.0) * 1.2;
    float vibZ = sin(time * 1.5 + random * 4.0) * 0.8;
    vec3 formedPos = currentTarget + vec3(vibX, vibY, vibZ);

    //  : morphProgress  alivePos  formedPos
    vec3 blendedPos = mix(alivePos, formedPos, morphProgress);

    //    (  )
    blendedPos += vortexOffset;

    // =====   =====
    float baseAlpha = mix(0.7, 0.4, heightLayer);
    float morphAlpha = 1.0 - morphProgress * 0.2;
    float distAlpha = smoothstep(300.0, 0.0, dist) * morphProgress + (1.0 - morphProgress);
    vAlpha = baseAlpha * morphAlpha * distAlpha;

    // =====   =====
    vec4 mvPosition = modelViewMatrix * vec4(blendedPos, 1.0);
    gl_Position = projectionMatrix * mvPosition;

    //   
    float sizeMod = 1.0 + morphProgress * 0.3;
    gl_PointSize = particleSize * sizeMod * (200.0 / -mvPosition.z);

    // =====      =====
    //   :   (mvPosition.z  )
    // mvPosition.z :  -250 ~ -150 ( z=200 )
    float depthNormalized = clamp((-mvPosition.z - 150.0) / 100.0, 0.0, 1.0); // 0() ~ 1()
    float depthFactor = 1.0 - depthNormalized; // 0() ~ 1()

    // =====     (sin   -  ) =====
    //      (random   )
    float glowPhase1 = random * 50.0 + time * 0.5;
    float glowPhase2 = random * 30.0 + time * 0.3;
    float glowNoise = sin(glowPhase1) * cos(glowPhase2) + sin(glowPhase1 * 0.7) * 0.5; // -1.5 ~ 1.5
    float glowThreshold = 0.9; //  20%  (glowNoise  -1.5~1.5,  3.0  0.6)

    //    (  )
    bool isGlowing = glowNoise > glowThreshold;

    if (isGlowing) {
      //  :    (1.5 ~ 3.0)
      float glowStrength = (glowNoise - glowThreshold) / (1.5 - glowThreshold); // 0 ~ 1
      vGlowIntensity = (1.5 + depthFactor * 1.5) * (0.7 + glowStrength * 0.3);
    } else {
      //  :  0.5,  0.15
      vGlowIntensity = 0.15 + depthFactor * 0.35;
    }
  }
`,Qhe=`
  uniform sampler2D charAtlas;
  uniform float charsPerRow;
  uniform float charRows;
  uniform float time;

  uniform vec3 colorPrimary;
  uniform vec3 colorSecondary;
  uniform vec3 morphColorTint;

  varying vec2 vUv;
  varying float vCharIndex;
  varying float vAlpha;
  varying float vMorphProgress;
  varying float vGlowIntensity;

  void main() {
    //  UV 
    vec2 pointUV = gl_PointCoord;

    //   UV 
    float charIdx = floor(vCharIndex);
    float col = mod(charIdx, charsPerRow);
    float row = floor(charIdx / charsPerRow);

    vec2 charUV = vec2(
      (col + pointUV.x) / charsPerRow,
      (row + (1.0 - pointUV.y)) / charRows
    );

    vec4 texColor = texture2D(charAtlas, charUV);

    //   - /  
    vec3 baseColor = mix(colorPrimary, colorSecondary, pointUV.y * 0.5 + 0.25);

    //    
    baseColor = mix(baseColor, baseColor + morphColorTint, vMorphProgress * 0.5);

    //  
    float flicker = 0.9 + 0.1 * sin(time * 8.0 + vCharIndex * 1.5);
    baseColor *= flicker;

    //  :   (bloom threshold    )
    // vGlowIntensity    (1.0 = , 2.0+ = )
    baseColor *= vGlowIntensity;

    //  
    float alpha = texColor.a * vAlpha;

    if (alpha < 0.05) discard;

    gl_FragColor = vec4(baseColor, alpha);
  }
`;function efe({afterImageDamp:t=.5,bloomStrength:e=.6,bloomRadius:n=.5,bloomThreshold:r=.4}){const i=T.useRef(null),{targetMorphRef:a,contentRef:s,contentVersion:o,vortexRef:c}=bg(),u=T.useRef(0),h=T.useRef(1),f=T.useRef(null);T.useEffect(()=>{u.current=a.current},[a]);const m=s9;return T.useEffect(()=>{const g=f.current;if(!g)return;const v=g.getAttribute("targetPos");v&&g.setAttribute("prevTargetPos",new er(new Float32Array(v.array),3)),g.setAttribute("targetPos",new er(Qm(s.current),3)),h.current=0},[o,s]),T.useEffect(()=>{if(!i.current)return;const g=i.current,v=new z2,x=new Us(60,window.innerWidth/window.innerHeight,.1,1e3);x.position.set(0,0,200),x.lookAt(0,0,0);const _=new H2({antialias:!0,alpha:!0,powerPreference:"high-performance"});_.setPixelRatio(Math.min(window.devicePixelRatio,2)),_.setSize(window.innerWidth,window.innerHeight),g.appendChild(_.domElement);const w=Zhe(),S=12,E=Math.ceil(Lm.length/S),A=new hl,N=new Float32Array(Pl*3),P=new Float32Array(Pl),R=new Float32Array(Pl),D=new Float32Array(Pl),k=new Float32Array(Pl),L=new Float32Array(Pl),$=.15;for(let G=0;G<Pl;G++){const te=G*3;N[te]=(Math.random()-.5)*550,N[te+1]=(Math.random()-.5)*380,N[te+2]=(Math.random()-.5)*100,P[G]=Math.floor(Math.random()*Lm.length),R[G]=Math.random();const ae=Math.random();D[G]=ae*ae;const pe=12+Math.random()*8;k[G]=pe*(1-D[G]*.3),Math.random()<$?L[G]=1:L[G]=0}const B=Qm(s.current);A.setAttribute("position",new er(N,3)),A.setAttribute("charIndex",new er(P,1)),A.setAttribute("random",new er(R,1)),A.setAttribute("heightLayer",new er(D,1)),A.setAttribute("particleSize",new er(k,1)),A.setAttribute("glowIntensity",new er(L,1)),A.setAttribute("targetPos",new er(B,3)),A.setAttribute("prevTargetPos",new er(new Float32Array(B),3)),f.current=A;const q=new qe(0,1,.7),U=new qe(0,.8,.5),J=new qe(.1,.2,.1),O=m.shaderTweaks??{},z=new Fi({uniforms:{charAtlas:{value:w},charsPerRow:{value:S},charRows:{value:E},time:{value:0},morphProgress:{value:u.current},transitionProgress:{value:h.current},colorPrimary:{value:q},colorSecondary:{value:U},morphColorTint:{value:J},vortexActive:{value:0},vortexCenter:{value:new Sn(0,0)},vortexStrength:{value:0},vortexRadius:{value:m.vortex.minRadius},vortexHeight:{value:0},primarySpeed:{value:m.drift.primarySpeed},primaryDirection:{value:m.drift.primaryDirection},lowLayerEffect:{value:m.drift.lowLayerEffect},midLayerEffect:{value:m.drift.midLayerEffect},highLayerEffect:{value:m.drift.highLayerEffect},waveSpeed:{value:m.drift.waveSpeed},waveScale:{value:m.drift.waveScale},clusterStrength:{value:m.drift.clusterStrength},clusterScale:{value:m.drift.clusterScale},turbulence:{value:m.form.turbulence},gustStrength:{value:m.form.gustStrength},gustFrequency:{value:m.form.gustFrequency},convergenceForce:{value:m.form.convergenceForce},rotationSpeed:{value:m.vortex.rotationSpeed},spiralTightness:{value:m.vortex.spiralTightness},suctionStrength:{value:m.vortex.suctionStrength},liftForce:{value:m.vortex.liftForce},coreDensity:{value:m.vortex.coreDensity},edgeDensity:{value:m.vortex.edgeDensity},tiltAmount:{value:m.vortex.tiltAmount},tiltDirection:{value:m.vortex.tiltDirection},maxVortexHeight:{value:m.vortex.maxHeight},formIntensityMultiplier:{value:O.formIntensityMultiplier??4},aliveBreathScale:{value:O.aliveBreathScale??2.5},vibrationScale:{value:O.vibrationScale??.7}},vertexShader:Jhe,fragmentShader:Qhe,transparent:!0,blending:eg,depthWrite:!1});v.add(new HR(A,z));const V=new G2(_);V.addPass(new W2(v,x)),V.addPass(new GR(t));const H=new Bf(new Sn(window.innerWidth,window.innerHeight),e,n,r);V.addPass(H),V.addPass(new q2);const ee=new Float32Array(Pl);for(let G=0;G<Pl;G++)ee[G]=Math.random()*180;const Y=new Z_;let Z;const K=O.vortexFadeMultiplier??160,X=()=>{const G=Y.getDelta();z.uniforms.time.value+=G;const te=a.current>u.current?O2:F2;u.current+=(a.current-u.current)*te,z.uniforms.morphProgress.value=u.current,h.current+=(1-h.current)*a9,z.uniforms.transitionProgress.value=h.current;const ae=c.current;!ae.active&&ae.strength>0&&(ae.strength=Math.max(0,ae.strength-NR),ae.radius=m.vortex.minRadius+ae.strength*K,ae.height=ae.strength*m.vortex.maxHeight),z.uniforms.vortexActive.value=ae.strength>.01?1:0,z.uniforms.vortexCenter.value.set(ae.x,ae.y),z.uniforms.vortexStrength.value=ae.strength,z.uniforms.vortexRadius.value=ae.radius,z.uniforms.vortexHeight.value=ae.height;const pe=A.getAttribute("charIndex");let ye=!1;const me=Math.ceil(Pl/10),fe=Math.floor(Math.random()*Pl);for(let ge=0;ge<me;ge++){const be=(fe+ge)%Pl;ee[be]-=G*60*10,ee[be]<=0&&(pe.array[be]=Math.floor(Math.random()*Lm.length),ee[be]=120+Math.random()*180,ye=!0)}ye&&(pe.needsUpdate=!0),V.render(),Z=requestAnimationFrame(X)};X();const ne=()=>{x.aspect=window.innerWidth/window.innerHeight,x.updateProjectionMatrix(),_.setSize(window.innerWidth,window.innerHeight),V.setSize(window.innerWidth,window.innerHeight),H.resolution.set(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",ne),()=>{f.current=null,cancelAnimationFrame(Z),window.removeEventListener("resize",ne),g.removeChild(_.domElement),A.dispose(),z.dispose(),w.dispose(),V.dispose(),_.dispose()}},[a,s,c,m,t,e,n,r]),l.jsx("div",{ref:i,style:{position:"fixed",inset:0,zIndex:-1,pointerEvents:"none"}})}function tfe(){const{effectType:t}=bg();return t==="matrix"?l.jsx(Hhe,{bloomStrength:.8,bloomRadius:.5,bloomThreshold:.2,speedMultiplier:1}):t==="code"?l.jsx(efe,{afterImageDamp:.5,bloomStrength:.6,bloomRadius:.5,bloomThreshold:.4}):t==="curl"?l.jsx(Rhe,{afterImageDamp:.35}):l.jsx(Phe,{preset:s9,afterImageDamp:.65,bloomStrength:.4,bloomRadius:.6,bloomThreshold:.6})}function Eu({children:t,size:e="md",variant:n="default",onClick:r,className:i=""}){const{setHoverContent:a}=bg(),s=T.useRef(null),o=T.useCallback(()=>{if(typeof t=="string"){a({type:"text",value:t});return}if(ve.isValidElement(t)&&s.current){const u=s.current.querySelector("svg");if(u){const h=u.outerHTML;a({type:"svg",value:h});return}}if(Array.isArray(t)){const u=t[0];if(typeof u=="string"){a({type:"text",value:u});return}if(s.current){const h=s.current.querySelector("svg");if(h){const f=h.outerHTML;a({type:"svg",value:f});return}}}},[t,a]),c=T.useCallback(()=>{a(null)},[a]);return l.jsx("button",{ref:s,className:`particle-button particle-button-${n} particle-button-${e} ${i}`,onClick:r,onMouseEnter:o,onMouseLeave:c,children:t})}function Ul({title:t,icon:e,actions:n,className:r=""}){return l.jsxs("div",{className:`panel-header ${r}`.trim(),children:[l.jsxs("h3",{className:"panel-title",children:[e&&l.jsx("span",{className:"panel-icon",children:e}),t]}),n&&l.jsx("div",{className:"panel-actions",children:n})]})}const wj=t=>{let e;const n=new Set,r=(u,h)=>{const f=typeof u=="function"?u(e):u;if(!Object.is(f,e)){const m=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(g=>g(e,m))}},i=()=>e,o={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=e=t(r,i,o);return o},nfe=(t=>t?wj(t):wj),rfe=t=>t;function ife(t,e=rfe){const n=ve.useSyncExternalStore(t.subscribe,ve.useCallback(()=>e(t.getState()),[t,e]),ve.useCallback(()=>e(t.getInitialState()),[t,e]));return ve.useDebugValue(n),n}const Sj=t=>{const e=nfe(t),n=r=>ife(e,r);return Object.assign(n,e),n},Ks=(t=>t?Sj(t):Sj),Ej={BASE_URL:"/xstudio/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxpbHhwc2N3aXFnZ3htZHJvc2huIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU0NzI1NjYsImV4cCI6MjA3MTA0ODU2Nn0.XhCb-gSV9IM8w355prG4ebgKFHU4yasR3eXg3dr7_60",VITE_SUPABASE_URL:"https://lilxpscwiqggxmdroshn.supabase.co"},d_=new Map,oC=t=>{const e=d_.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},afe=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=d_.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return d_.set(n.name,i),{type:"tracked",store:t,...i}},sfe=(t,e)=>{if(e===void 0)return;const n=d_.get(t);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&d_.delete(t))},ofe=t=>{var e,n;if(!t)return;const r=t.split(`
`),i=r.findIndex(s=>s.includes("api.setState"));if(i<0)return;const a=((e=r[i+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(a))==null?void 0:n[1]},lfe=(t,e={})=>(n,r,i)=>{const{enabled:a,anonymousActionType:s,store:o,...c}=e;let u;try{u=(a??(Ej?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return t(n,r,i);const{connection:h,...f}=afe(o,u,c);let m=!0;i.setState=((x,_,w)=>{const S=n(x,_);if(!m)return S;const E=w===void 0?{type:s||ofe(new Error().stack)||"anonymous"}:typeof w=="string"?{type:w}:w;return o===void 0?(h?.send(E,r()),S):(h?.send({...E,type:`${o}/${E.type}`},{...oC(c.name),[o]:i.getState()}),S)}),i.devtools={cleanup:()=>{h&&typeof h.unsubscribe=="function"&&h.unsubscribe(),sfe(c.name,o)}};const g=(...x)=>{const _=m;m=!1,n(...x),m=_},v=t(i.setState,r,i);if(f.type==="untracked"?h?.init(v):(f.stores[f.store]=i,h?.init(Object.fromEntries(Object.entries(f.stores).map(([x,_])=>[x,x===f.store?v:_.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let x=!1;const _=i.dispatch;i.dispatch=(...w)=>{(Ej?"production":void 0)!=="production"&&w[0].type==="__setState"&&!x&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),x=!0),_(...w)}}return h.subscribe(x=>{var _;switch(x.type){case"ACTION":if(typeof x.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return F4(x.payload,w=>{if(w.type==="__setState"){if(o===void 0){g(w.state);return}Object.keys(w.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const S=w.state[o];if(S==null)return;JSON.stringify(i.getState())!==JSON.stringify(S)&&g(S);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(w)});case"DISPATCH":switch(x.payload.type){case"RESET":return g(v),o===void 0?h?.init(i.getState()):h?.init(oC(c.name));case"COMMIT":if(o===void 0){h?.init(i.getState());return}return h?.init(oC(c.name));case"ROLLBACK":return F4(x.state,w=>{if(o===void 0){g(w),h?.init(i.getState());return}g(w[o]),h?.init(oC(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return F4(x.state,w=>{if(o===void 0){g(w);return}JSON.stringify(i.getState())!==JSON.stringify(w[o])&&g(w[o])});case"IMPORT_STATE":{const{nextLiftedState:w}=x.payload,S=(_=w.computedStates.slice(-1)[0])==null?void 0:_.state;if(!S)return;g(o===void 0?S:S[o]),h?.send(null,w);return}case"PAUSE_RECORDING":return m=!m}return}}),v},cfe=lfe,F4=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)},ufe=t=>(e,n,r)=>{const i=r.subscribe;return r.subscribe=((s,o,c)=>{let u=s;if(o){const h=c?.equalityFn||Object.is;let f=s(r.getState());u=m=>{const g=s(m);if(!h(f,g)){const v=f;o(f=g,v)}},c?.fireImmediately&&o(f,f)}return i(u)}),t(e,n,r)},dfe=ufe;function hfe(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const s=c=>c===null?null:JSON.parse(c,void 0),o=(a=n.getItem(i))!=null?a:null;return o instanceof Promise?o.then(s):s(o)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const uD=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return uD(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return uD(r)(n)}}}},ffe=(t,e)=>(n,r,i)=>{let a={storage:hfe(()=>localStorage),partialize:x=>x,version:0,merge:(x,_)=>({..._,...x}),...e},s=!1;const o=new Set,c=new Set;let u=a.storage;if(!u)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...x)},r,i);const h=()=>{const x=a.partialize({...r()});return u.setItem(a.name,{state:x,version:a.version})},f=i.setState;i.setState=(x,_)=>(f(x,_),h());const m=t((...x)=>(n(...x),h()),r,i);i.getInitialState=()=>m;let g;const v=()=>{var x,_;if(!u)return;s=!1,o.forEach(S=>{var E;return S((E=r())!=null?E:m)});const w=((_=a.onRehydrateStorage)==null?void 0:_.call(a,(x=r())!=null?x:m))||void 0;return uD(u.getItem.bind(u))(a.name).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==a.version){if(a.migrate){const E=a.migrate(S.state,S.version);return E instanceof Promise?E.then(A=>[!0,A]):[!0,E]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,S.state];return[!1,void 0]}).then(S=>{var E;const[A,N]=S;if(g=a.merge(N,(E=r())!=null?E:m),n(g,!0),A)return h()}).then(()=>{w?.(g,void 0),g=r(),s=!0,c.forEach(S=>S(g))}).catch(S=>{w?.(void 0,S)})};return i.persist={setOptions:x=>{a={...a,...x},x.storage&&(u=x.storage)},clearStorage:()=>{u?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>v(),hasHydrated:()=>s,onHydrate:x=>(o.add(x),()=>{o.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},a.skipHydration||v(),g||m},K2=ffe,pfe=(t,e)=>({mode:"page",pageId:null,layoutId:null,enterPageMode:n=>{t({mode:"page",pageId:n,layoutId:null}),console.log(" Page   :",n)},enterLayoutMode:n=>{t({mode:"layout",pageId:null,layoutId:n}),console.log(" Layout   :",n)},getEditContext:()=>{const{mode:n,pageId:r,layoutId:i}=e();return{mode:n,pageId:r,layoutId:i}},setMode:n=>{t({mode:n}),console.log(` Edit Mode : ${n}`)},setCurrentPageId:n=>{t({pageId:n})},setCurrentLayoutId:n=>{t({layoutId:n})}}),Eo=Ks()(K2(pfe,{name:"xstudio-edit-mode",partialize:t=>({mode:t.mode})})),se={color:"var(--color-gray-500)",stroke:1,size:16},mfe=T.createContext(null),X9=T.createContext(null),Y9=T.createContext(null),Z9=T.createContext(null),gfe=T.createContext(null),J9=T.createContext({}),vfe=T.createContext(null),Q9=T.createContext(null),mr=typeof document<"u"?ve.useLayoutEffect:()=>{};var B4;const yfe=(B4=ve.useInsertionEffect)!==null&&B4!==void 0?B4:mr;function di(t){const e=T.useRef(null);return yfe(()=>{e.current=t},[t]),T.useCallback((...n)=>{const r=e.current;return r?.(...n)},[])}function bfe(t){let[e,n]=T.useState(t),r=T.useRef(null),i=di(()=>{if(!r.current)return;let s=r.current.next();if(s.done){r.current=null;return}e===s.value?i():n(s.value)});mr(()=>{r.current&&i()});let a=di(s=>{r.current=s(e),i()});return[e,a]}const ez={prefix:String(Math.round(Math.random()*1e10)),current:0},tz=ve.createContext(ez),xfe=ve.createContext(!1);let z4=new WeakMap;function _fe(t=!1){let e=T.useContext(tz),n=T.useRef(null);if(n.current===null&&!t){var r,i;let a=(i=ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||i===void 0||(r=i.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(a){let s=z4.get(a);s==null?z4.set(a,{id:e.current,state:a.memoizedState}):a.memoizedState!==s.state&&(e.current=s.id,z4.delete(a))}n.current=++e.current}return n.current}function wfe(t){let e=T.useContext(tz),n=_fe(!!t),r=`react-aria${e.prefix}`;return t||`${r}-${n}`}function Sfe(t){let e=ve.useId(),[n]=T.useState(wg()),r=n?"react-aria":`react-aria${ez.prefix}`;return t||`${r}-${e}`}const Efe=typeof ve.useId=="function"?Sfe:wfe;function Cfe(){return!1}function Tfe(){return!0}function Mfe(t){return()=>{}}function wg(){return typeof ve.useSyncExternalStore=="function"?ve.useSyncExternalStore(Mfe,Cfe,Tfe):T.useContext(xfe)}let Afe=!!(typeof window<"u"&&window.document&&window.document.createElement),Kv=new Map,b1;typeof FinalizationRegistry<"u"&&(b1=new FinalizationRegistry(t=>{Kv.delete(t)}));function Ji(t){let[e,n]=T.useState(t),r=T.useRef(null),i=Efe(e),a=T.useRef(null);if(b1&&b1.register(a,i),Afe){const s=Kv.get(i);s&&!s.includes(r)?s.push(r):Kv.set(i,[r])}return mr(()=>{let s=i;return()=>{b1&&b1.unregister(a),Kv.delete(s)}},[i]),T.useEffect(()=>{let s=r.current;return s&&n(s),()=>{s&&(r.current=null)}}),i}function Pfe(t,e){if(t===e)return t;let n=Kv.get(t);if(n)return n.forEach(i=>i.current=e),e;let r=Kv.get(e);return r?(r.forEach(i=>i.current=t),t):e}function h_(t=[]){let e=Ji(),[n,r]=bfe(e),i=T.useCallback(()=>{r(function*(){yield e,yield document.getElementById(e)?e:void 0})},[e,r]);return mr(i,[e,i,...t]),n}function Gc(...t){return(...e)=>{for(let n of t)typeof n=="function"&&n(...e)}}const gr=t=>{var e;return(e=t?.ownerDocument)!==null&&e!==void 0?e:document},Co=t=>t&&"window"in t&&t.window===t?t:gr(t).defaultView||window;function Nfe(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"}function Dfe(t){return Nfe(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in t}let kfe=!1;function X2(){return kfe}function bo(t,e){if(!X2())return e&&t?t.contains(e):!1;if(!t||!e)return!1;let n=e;for(;n!==null;){if(n===t)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:Dfe(n)?n=n.host:n=n.parentNode}return!1}const xa=(t=document)=>{var e;if(!X2())return t.activeElement;let n=t.activeElement;for(;n&&"shadowRoot"in n&&(!((e=n.shadowRoot)===null||e===void 0)&&e.activeElement);)n=n.shadowRoot.activeElement;return n};function qi(t){return X2()&&t.target.shadowRoot&&t.composedPath?t.composedPath()[0]:t.target}class Rfe{get currentNode(){return this._currentNode}set currentNode(e){if(!bo(this.root,e))throw new Error("Cannot set currentNode to a node that is not contained by the root node.");const n=[];let r=e,i=e;for(this._currentNode=e;r&&r!==this.root;)if(r.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const s=r,o=this._doc.createTreeWalker(s,this.whatToShow,{acceptNode:this._acceptNode});n.push(o),o.currentNode=i,this._currentSetFor.add(o),r=i=s.host}else r=r.parentNode;const a=this._doc.createTreeWalker(this.root,this.whatToShow,{acceptNode:this._acceptNode});n.push(a),a.currentNode=i,this._currentSetFor.add(a),this._walkerStack=n}get doc(){return this._doc}firstChild(){let e=this.currentNode,n=this.nextNode();return bo(e,n)?(n&&(this.currentNode=n),n):(this.currentNode=e,null)}lastChild(){let n=this._walkerStack[0].lastChild();return n&&(this.currentNode=n),n}nextNode(){const e=this._walkerStack[0].nextNode();if(e){if(e.shadowRoot){var n;let i;if(typeof this.filter=="function"?i=this.filter(e):!((n=this.filter)===null||n===void 0)&&n.acceptNode&&(i=this.filter.acceptNode(e)),i===NodeFilter.FILTER_ACCEPT)return this.currentNode=e,e;let a=this.nextNode();return a&&(this.currentNode=a),a}return e&&(this.currentNode=e),e}else if(this._walkerStack.length>1){this._walkerStack.shift();let r=this.nextNode();return r&&(this.currentNode=r),r}else return null}previousNode(){const e=this._walkerStack[0];if(e.currentNode===e.root){if(this._currentSetFor.has(e))if(this._currentSetFor.delete(e),this._walkerStack.length>1){this._walkerStack.shift();let i=this.previousNode();return i&&(this.currentNode=i),i}else return null;return null}const n=e.previousNode();if(n){if(n.shadowRoot){var r;let a;if(typeof this.filter=="function"?a=this.filter(n):!((r=this.filter)===null||r===void 0)&&r.acceptNode&&(a=this.filter.acceptNode(n)),a===NodeFilter.FILTER_ACCEPT)return n&&(this.currentNode=n),n;let s=this.lastChild();return s&&(this.currentNode=s),s}return n&&(this.currentNode=n),n}else if(this._walkerStack.length>1){this._walkerStack.shift();let i=this.previousNode();return i&&(this.currentNode=i),i}else return null}nextSibling(){return null}previousSibling(){return null}parentNode(){return null}constructor(e,n,r,i){this._walkerStack=[],this._currentSetFor=new Set,this._acceptNode=s=>{if(s.nodeType===Node.ELEMENT_NODE){const c=s.shadowRoot;if(c){const u=this._doc.createTreeWalker(c,this.whatToShow,{acceptNode:this._acceptNode});return this._walkerStack.unshift(u),NodeFilter.FILTER_ACCEPT}else{var o;if(typeof this.filter=="function")return this.filter(s);if(!((o=this.filter)===null||o===void 0)&&o.acceptNode)return this.filter.acceptNode(s);if(this.filter===null)return NodeFilter.FILTER_ACCEPT}}return NodeFilter.FILTER_SKIP},this._doc=e,this.root=n,this.filter=i??null,this.whatToShow=r??NodeFilter.SHOW_ALL,this._currentNode=n,this._walkerStack.unshift(e.createTreeWalker(n,r,this._acceptNode));const a=n.shadowRoot;if(a){const s=this._doc.createTreeWalker(a,this.whatToShow,{acceptNode:this._acceptNode});this._walkerStack.unshift(s)}}}function Ife(t,e,n,r){return X2()?new Rfe(t,e,n,r):t.createTreeWalker(e,n,r)}function nz(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=nz(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $fe(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=nz(t))&&(r&&(r+=" "),r+=e);return r}function Et(...t){let e={...t[0]};for(let n=1;n<t.length;n++){let r=t[n];for(let i in r){let a=e[i],s=r[i];typeof a=="function"&&typeof s=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?e[i]=Gc(a,s):(i==="className"||i==="UNSAFE_className")&&typeof a=="string"&&typeof s=="string"?e[i]=$fe(a,s):i==="id"&&a&&s?e.id=Pfe(a,s):e[i]=s!==void 0?s:a}}return e}function J_(...t){return t.length===1&&t[0]?t[0]:e=>{let n=!1;const r=t.map(i=>{const a=Cj(i,e);return n||(n=typeof a=="function"),a});if(n)return()=>{r.forEach((i,a)=>{typeof i=="function"?i():Cj(t[a],null)})}}}function Cj(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}const jfe=new Set(["id"]),Lfe=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),Ofe=new Set(["href","hrefLang","target","rel","download","ping","referrerPolicy"]),Ffe=new Set(["dir","lang","hidden","inert","translate"]),Tj=new Set(["onClick","onAuxClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut","onGotPointerCapture","onLostPointerCapture","onScroll","onWheel","onAnimationStart","onAnimationEnd","onAnimationIteration","onTransitionCancel","onTransitionEnd","onTransitionRun","onTransitionStart"]),Bfe=/^(data-.*)$/;function gn(t,e={}){let{labelable:n,isLink:r,global:i,events:a=i,propNames:s}=e,o={};for(const c in t)Object.prototype.hasOwnProperty.call(t,c)&&(jfe.has(c)||n&&Lfe.has(c)||r&&Ofe.has(c)||i&&Ffe.has(c)||a&&Tj.has(c)||c.endsWith("Capture")&&Tj.has(c.slice(0,-7))||s?.has(c)||Bfe.test(c))&&(o[c]=t[c]);return o}function ll(t){if(zfe())t.focus({preventScroll:!0});else{let e=Ufe(t);t.focus(),Vfe(e)}}let lC=null;function zfe(){if(lC==null){lC=!1;try{document.createElement("div").focus({get preventScroll(){return lC=!0,!0}})}catch{}}return lC}function Ufe(t){let e=t.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;e instanceof HTMLElement&&e!==r;)(e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)&&n.push({element:e,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),e=e.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function Vfe(t){for(let{element:e,scrollTop:n,scrollLeft:r}of t)e.scrollTop=n,e.scrollLeft=r}function Y2(t){var e;if(typeof window>"u"||window.navigator==null)return!1;let n=(e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands;return Array.isArray(n)&&n.some(r=>t.test(r.brand))||t.test(window.navigator.userAgent)}function WR(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function rh(t){let e=null;return()=>(e==null&&(e=t()),e)}const zf=rh(function(){return WR(/^Mac/i)}),rz=rh(function(){return WR(/^iPhone/i)}),iz=rh(function(){return WR(/^iPad/i)||zf()&&navigator.maxTouchPoints>1}),Fy=rh(function(){return rz()||iz()}),c3=rh(function(){return zf()||Fy()}),qR=rh(function(){return Y2(/AppleWebKit/i)&&!KR()}),KR=rh(function(){return Y2(/Chrome/i)}),Q_=rh(function(){return Y2(/Android/i)}),Hfe=rh(function(){return Y2(/Firefox/i)}),Gfe=T.createContext({isNative:!0,open:qfe,useHref:t=>t});function Z2(){return T.useContext(Gfe)}function rg(t,e,n=!0){var r,i;let{metaKey:a,ctrlKey:s,altKey:o,shiftKey:c}=e;Hfe()&&(!((i=window.event)===null||i===void 0||(r=i.type)===null||r===void 0)&&r.startsWith("key"))&&t.target==="_blank"&&(zf()?a=!0:s=!0);let u=qR()&&zf()&&!iz()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:a,ctrlKey:s,altKey:o,shiftKey:c}):new MouseEvent("click",{metaKey:a,ctrlKey:s,altKey:o,shiftKey:c,bubbles:!0,cancelable:!0});rg.isOpening=n,ll(t),t.dispatchEvent(u),rg.isOpening=!1}rg.isOpening=!1;function Wfe(t,e){if(t instanceof HTMLAnchorElement)e(t);else if(t.hasAttribute("data-href")){let n=document.createElement("a");n.href=t.getAttribute("data-href"),t.hasAttribute("data-target")&&(n.target=t.getAttribute("data-target")),t.hasAttribute("data-rel")&&(n.rel=t.getAttribute("data-rel")),t.hasAttribute("data-download")&&(n.download=t.getAttribute("data-download")),t.hasAttribute("data-ping")&&(n.ping=t.getAttribute("data-ping")),t.hasAttribute("data-referrer-policy")&&(n.referrerPolicy=t.getAttribute("data-referrer-policy")),t.appendChild(n),e(n),t.removeChild(n)}}function qfe(t,e){Wfe(t,n=>rg(n,e))}function az(t){let e=Z2();var n;const r=e.useHref((n=t?.href)!==null&&n!==void 0?n:"");return{href:t?.href?r:void 0,target:t?.target,rel:t?.rel,download:t?.download,ping:t?.ping,referrerPolicy:t?.referrerPolicy}}let xf=new Map,dD=new Set;function Mj(){if(typeof window>"u")return;function t(r){return"propertyName"in r}let e=r=>{if(!t(r)||!r.target)return;let i=xf.get(r.target);i||(i=new Set,xf.set(r.target,i),r.target.addEventListener("transitioncancel",n,{once:!0})),i.add(r.propertyName)},n=r=>{if(!t(r)||!r.target)return;let i=xf.get(r.target);if(i&&(i.delete(r.propertyName),i.size===0&&(r.target.removeEventListener("transitioncancel",n),xf.delete(r.target)),xf.size===0)){for(let a of dD)a();dD.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",n)}typeof document<"u"&&(document.readyState!=="loading"?Mj():document.addEventListener("DOMContentLoaded",Mj));function Kfe(){for(const[t]of xf)"isConnected"in t&&!t.isConnected&&xf.delete(t)}function sz(t){requestAnimationFrame(()=>{Kfe(),xf.size===0?t():dD.add(t)})}function ih(){let t=T.useRef(new Map),e=T.useCallback((i,a,s,o)=>{let c=o?.once?(...u)=>{t.current.delete(s),s(...u)}:s;t.current.set(s,{type:a,eventTarget:i,fn:c,options:o}),i.addEventListener(a,c,o)},[]),n=T.useCallback((i,a,s,o)=>{var c;let u=((c=t.current.get(s))===null||c===void 0?void 0:c.fn)||s;i.removeEventListener(a,u,o),t.current.delete(s)},[]),r=T.useCallback(()=>{t.current.forEach((i,a)=>{n(i.eventTarget,i.type,a,i.options)})},[n]);return T.useEffect(()=>r,[r]),{addGlobalListener:e,removeGlobalListener:n,removeAllGlobalListeners:r}}function Wd(t,e){let{id:n,"aria-label":r,"aria-labelledby":i}=t;return n=Ji(n),i&&r?i=[...new Set([n,...i.trim().split(/\s+/)])].join(" "):i&&(i=i.trim().split(/\s+/).join(" ")),!r&&!i&&e&&(r=e),{id:n,"aria-label":r,"aria-labelledby":i}}function fl(t){const e=T.useRef(null),n=T.useRef(void 0),r=T.useCallback(i=>{if(typeof t=="function"){const a=t,s=a(i);return()=>{typeof s=="function"?s():a(null)}}else if(t)return t.current=i,()=>{t.current=null}},[t]);return T.useMemo(()=>({get current(){return e.current},set current(i){e.current=i,n.current&&(n.current(),n.current=void 0),i!=null&&(n.current=r(i))}}),[r])}function Xfe(t,e){const n=T.useRef(!0),r=T.useRef(null);T.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),T.useEffect(()=>{let i=r.current;n.current?n.current=!1:(!i||e.some((a,s)=>!Object.is(a,i[s])))&&t(),r.current=e},e)}function Aj(t,e){const n=T.useRef(!0),r=T.useRef(null);mr(()=>(n.current=!0,()=>{n.current=!1}),[]),mr(()=>{n.current?n.current=!1:(!r.current||e.some((i,a)=>!Object.is(i,r[a])))&&t(),r.current=e},e)}function Yfe(){return typeof window.ResizeObserver<"u"}function f_(t){const{ref:e,box:n,onResize:r}=t;T.useEffect(()=>{let i=e?.current;if(i)if(Yfe()){const a=new window.ResizeObserver(s=>{s.length&&r()});return a.observe(i,{box:n}),()=>{i&&a.unobserve(i)}}else return window.addEventListener("resize",r,!1),()=>{window.removeEventListener("resize",r,!1)}},[r,e,n])}function XR(t,e){mr(()=>{if(t&&t.ref&&e)return t.ref.current=e.current,()=>{t.ref&&(t.ref.current=null)}})}function ig(t,e){if(!t)return!1;let n=window.getComputedStyle(t),r=/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY);return r&&e&&(r=t.scrollHeight!==t.clientHeight||t.scrollWidth!==t.clientWidth),r}function YR(t,e){let n=t;for(ig(n,e)&&(n=n.parentElement);n&&!ig(n,e);)n=n.parentElement;return n||document.scrollingElement||document.documentElement}function Zfe(t,e){const n=[];for(;t&&t!==document.documentElement;)ig(t,e)&&n.push(t),t=t.parentElement;return n}function kv(t){return zf()?t.metaKey:t.ctrlKey}const Jfe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function L1(t){return t instanceof HTMLInputElement&&!Jfe.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}let _o=typeof document<"u"&&window.visualViewport;function Qfe(){let t=wg(),[e,n]=T.useState(()=>t?{width:0,height:0}:Pj());return T.useEffect(()=>{let r=()=>{_o&&_o.scale>1||n(s=>{let o=Pj();return o.width===s.width&&o.height===s.height?s:o})},i,a=s=>{_o&&_o.scale>1||L1(s.target)&&(i=requestAnimationFrame(()=>{(!document.activeElement||!L1(document.activeElement))&&n(o=>{let c={width:window.innerWidth,height:window.innerHeight};return c.width===o.width&&c.height===o.height?o:c})}))};return window.addEventListener("blur",a,!0),_o?_o.addEventListener("resize",r):window.addEventListener("resize",r),()=>{cancelAnimationFrame(i),window.removeEventListener("blur",a,!0),_o?_o.removeEventListener("resize",r):window.removeEventListener("resize",r)}},[]),e}function Pj(){return{width:_o?_o.width*_o.scale:window.innerWidth,height:_o?_o.height*_o.scale:window.innerHeight}}let epe=0;const U4=new Map;function tpe(t){let[e,n]=T.useState();return mr(()=>{if(!t)return;let r=U4.get(t);if(r)n(r.element.id);else{let i=`react-aria-description-${epe++}`;n(i);let a=document.createElement("div");a.id=i,a.style.display="none",a.textContent=t,document.body.appendChild(a),r={refCount:0,element:a},U4.set(t,r)}return r.refCount++,()=>{r&&--r.refCount===0&&(r.element.remove(),U4.delete(t))}},[t]),{"aria-describedby":t?e:void 0}}function zv(t,e,n,r){let i=di(n),a=n==null;T.useEffect(()=>{if(a||!t.current)return;let s=t.current;return s.addEventListener(e,i,r),()=>{s.removeEventListener(e,i,r)}},[t,e,r,a,i])}function oz(t,e){let n=Nj(t,e,"left"),r=Nj(t,e,"top"),i=e.offsetWidth,a=e.offsetHeight,s=t.scrollLeft,o=t.scrollTop,{borderTopWidth:c,borderLeftWidth:u,scrollPaddingTop:h,scrollPaddingRight:f,scrollPaddingBottom:m,scrollPaddingLeft:g}=getComputedStyle(t),{scrollMarginTop:v,scrollMarginRight:x,scrollMarginBottom:_,scrollMarginLeft:w}=getComputedStyle(e),S=s+parseInt(u,10),E=o+parseInt(c,10),A=S+t.clientWidth,N=E+t.clientHeight,P=parseInt(h,10)||0,R=parseInt(m,10)||0,D=parseInt(f,10)||0,k=parseInt(g,10)||0,L=parseInt(v,10)||0,$=parseInt(_,10)||0,B=parseInt(x,10)||0,q=parseInt(w,10)||0,U=n-q,J=n+i+B,O=r-L,z=r+a+$,V=s+parseInt(u,10)+k,H=A-D,ee=o+parseInt(c,10)+P,Y=N-R;(U>V||J<H)&&(U<=s+k?s=U-parseInt(u,10)-k:J>A-D&&(s+=J-A+D)),(O>ee||z<Y)&&(O<=E+P?o=O-parseInt(c,10)-P:z>N-R&&(o+=z-N+R)),t.scrollTo({left:s,top:o})}function Nj(t,e,n){const r=n==="left"?"offsetLeft":"offsetTop";let i=0;for(;e.offsetParent&&(i+=e[r],e.offsetParent!==t);){if(e.offsetParent.contains(t)){i-=t[r];break}e=e.offsetParent}return i}function Dj(t,e){if(t&&document.contains(t)){let s=document.scrollingElement||document.documentElement;if(!(window.getComputedStyle(s).overflow==="hidden")&&!KR()){var n;let{left:c,top:u}=t.getBoundingClientRect();t==null||(n=t.scrollIntoView)===null||n===void 0||n.call(t,{block:"nearest"});let{left:h,top:f}=t.getBoundingClientRect();if(Math.abs(c-h)>1||Math.abs(u-f)>1){var r,i,a;e==null||(i=e.containingElement)===null||i===void 0||(r=i.scrollIntoView)===null||r===void 0||r.call(i,{block:"center",inline:"center"}),(a=t.scrollIntoView)===null||a===void 0||a.call(t,{block:"nearest"})}}else{let c=Zfe(t);for(let u of c)oz(u,t)}}}function lz(t){return t.pointerType===""&&t.isTrusted?!0:Q_()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function npe(t){return!Q_()&&t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"}function qf(t,e,n){let r=di(()=>{n&&n(e)});T.useEffect(()=>{var i;let a=t==null||(i=t.current)===null||i===void 0?void 0:i.form;return a?.addEventListener("reset",r),()=>{a?.removeEventListener("reset",r)}},[t,r])}function rpe(t,e){let{collection:n,onLoadMore:r,scrollOffset:i=1}=t,a=T.useRef(null),s=di(o=>{for(let c of o)c.isIntersecting&&r&&r()});mr(()=>(e.current&&(a.current=new IntersectionObserver(s,{root:YR(e?.current),rootMargin:`0px ${100*i}% ${100*i}% ${100*i}%`}),a.current.observe(e.current)),()=>{a.current&&a.current.disconnect()}),[n,s,e,i])}function hD(t){const e=T.version.split(".");return parseInt(e[0],10)>=19?t:t?"true":void 0}const ipe="react-aria-clear-focus",ape="react-aria-focus";function ZR(t,e=!0){let[n,r]=T.useState(!0),i=n&&e;return mr(()=>{if(i&&t.current&&"getAnimations"in t.current)for(let a of t.current.getAnimations())a instanceof CSSTransition&&a.cancel()},[t,i]),cz(t,i,T.useCallback(()=>r(!1),[])),i}function fD(t,e){let[n,r]=T.useState(e?"open":"closed");switch(n){case"open":e||r("exiting");break;case"closed":case"exiting":e&&r("open");break}let i=n==="exiting";return cz(t,i,T.useCallback(()=>{r(a=>a==="exiting"?"closed":a)},[])),i}function cz(t,e,n){mr(()=>{if(e&&t.current){if(!("getAnimations"in t.current)){n();return}let r=t.current.getAnimations();if(r.length===0){n();return}let i=!1;return Promise.all(r.map(a=>a.finished)).then(()=>{i||Zm.flushSync(()=>{n()})}).catch(()=>{}),()=>{i=!0}}},[t,e,n])}const spe=typeof Element<"u"&&"checkVisibility"in Element.prototype;function ope(t){const e=Co(t);if(!(t instanceof e.HTMLElement)&&!(t instanceof e.SVGElement))return!1;let{display:n,visibility:r}=t.style,i=n!=="none"&&r!=="hidden"&&r!=="collapse";if(i){const{getComputedStyle:a}=t.ownerDocument.defaultView;let{display:s,visibility:o}=a(t);i=s!=="none"&&o!=="hidden"&&o!=="collapse"}return i}function lpe(t,e){return!t.hasAttribute("hidden")&&!t.hasAttribute("data-react-aria-prevent-focus")&&(t.nodeName==="DETAILS"&&e&&e.nodeName!=="SUMMARY"?t.hasAttribute("open"):!0)}function JR(t,e){return spe?t.checkVisibility({visibilityProperty:!0})&&!t.closest("[data-react-aria-prevent-focus]"):t.nodeName!=="#comment"&&ope(t)&&lpe(t,e)&&(!t.parentElement||JR(t.parentElement,t))}const QR=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])',"permission"],cpe=QR.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";QR.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const upe=QR.join(':not([hidden]):not([tabindex="-1"]),');function uz(t){return t.matches(cpe)&&JR(t)&&!dz(t)}function dpe(t){return t.matches(upe)&&JR(t)&&!dz(t)}function dz(t){let e=t;for(;e!=null;){if(e instanceof e.ownerDocument.defaultView.HTMLElement&&e.inert)return!0;e=e.parentElement}return!1}function Xa(t,e,n){let[r,i]=T.useState(t||e),a=T.useRef(t!==void 0),s=t!==void 0;T.useEffect(()=>{a.current,a.current=s},[s]);let o=s?t:r,c=T.useCallback((u,...h)=>{let f=(m,...g)=>{n&&(Object.is(o,m)||n(m,...g)),s||(o=m)};typeof u=="function"?i((g,...v)=>{let x=u(s?o:g,...v);return f(x,...h),s?g:x}):(s||i(u),f(u,...h))},[s,o,n]);return[o,c]}function La(t,e=-1/0,n=1/0){return Math.min(Math.max(t,e),n)}function cC(t,e){let n=t,r=0,i=e.toString(),a=i.toLowerCase().indexOf("e-");if(a>0)r=Math.abs(Math.floor(Math.log10(Math.abs(e))))+a;else{let s=i.indexOf(".");s>=0&&(r=i.length-s)}if(r>0){let s=Math.pow(10,r);n=Math.round(n*s)/s}return n}function oa(t,e,n,r){e=Number(e),n=Number(n);let i=(t-(isNaN(e)?0:e))%r,a=cC(Math.abs(i)*2>=r?t+Math.sign(i)*(r-Math.abs(i)):t-i,r);return isNaN(e)?!isNaN(n)&&a>n&&(a=Math.floor(cC(n/r,r))*r):a<e?a=e:!isNaN(n)&&a>n&&(a=e+Math.floor(cC((n-e)/r,r))*r),a=cC(a,r),a}function la(t,e,n=10){const r=Math.pow(n,e);return Math.round(t*r)/r}const $3=Symbol("default");function Sa({values:t,children:e}){for(let[n,r]of t)e=ve.createElement(n.Provider,{value:r},e);return e}function On(t){let{className:e,style:n,children:r,defaultClassName:i,defaultChildren:a,defaultStyle:s,values:o}=t;return T.useMemo(()=>{let c,u,h;return typeof e=="function"?c=e({...o,defaultClassName:i}):c=e,typeof n=="function"?u=n({...o,defaultStyle:s||{}}):u=n,typeof r=="function"?h=r({...o,defaultChildren:a}):r==null?h=a:h=r,{className:c??i,style:u||s?{...s,...u}:void 0,children:h??a,"data-rac":""}},[e,n,r,i,a,s,o])}function ah(t,e){return n=>e(typeof t=="function"?t(n):t,n)}function Xl(t,e){let n=T.useContext(t);if(e===null)return null;if(n&&typeof n=="object"&&"slots"in n&&n.slots){let r=e||$3;if(!n.slots[r]){let i=new Intl.ListFormat().format(Object.keys(n.slots).map(s=>`"${s}"`)),a=e?`Invalid slot "${e}".`:"A slot prop is required.";throw new Error(`${a} Valid slot names are ${i}.`)}return n.slots[r]}return n}function rr(t,e,n){let r=Xl(n,t.slot)||{},{ref:i,...a}=r,s=fl(T.useMemo(()=>J_(e,i),[e,i])),o=Et(a,t);return"style"in a&&a.style&&"style"in t&&t.style&&(typeof a.style=="function"||typeof t.style=="function"?o.style=c=>{let u=typeof a.style=="function"?a.style(c):a.style,h={...c.defaultStyle,...u},f=typeof t.style=="function"?t.style({...c,defaultStyle:h}):t.style;return{...h,...f}}:o.style={...a.style,...t.style}),[o,s]}function Yl(t=!0){let[e,n]=T.useState(t),r=T.useRef(!1),i=T.useCallback(a=>{r.current=!0,n(!!a)},[]);return mr(()=>{r.current||n(!1)},[]),[i,e]}function Uc(t){const e=/^(data-.*)$/;let n={};for(const r in t)e.test(r)||(n[r]=t[r]);return n}var hz={};hz={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})} .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText} `};var fz={};fz={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})}  .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var pz={};pz={buttonLabel:"Zobrazit doporuen",countAnnouncement:(t,e)=>`K dispozici ${e.plural(t.optionCount,{one:()=>`je ${e.number(t.optionCount)} monost`,other:()=>`jsou/je ${e.number(t.optionCount)} monosti/-`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Zadan skupina ${t.groupTitle} ${e.plural(t.groupCount,{one:()=>`s ${e.number(t.groupCount)} monost`,other:()=>`se ${e.number(t.groupCount)} monostmi`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:" (vybrno)",other:""},t.isSelected)}`,listboxLabel:"Nvrhy",selectedAnnouncement:t=>`${t.optionText}, vybrno`};var mz={};mz={buttonLabel:"Vis forslag",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} mulighed tilgngelig`,other:()=>`${e.number(t.optionCount)} muligheder tilgngelige`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Angivet gruppe ${t.groupTitle}, med ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} mulighed`,other:()=>`${e.number(t.groupCount)} muligheder`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valgt",other:""},t.isSelected)}`,listboxLabel:"Forslag",selectedAnnouncement:t=>`${t.optionText}, valgt`};var gz={};gz={buttonLabel:"Empfehlungen anzeigen",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} Option`,other:()=>`${e.number(t.optionCount)} Optionen`})} verfgbar.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Eingetretene Gruppe ${t.groupTitle}, mit ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} Option`,other:()=>`${e.number(t.groupCount)} Optionen`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ausgewhlt",other:""},t.isSelected)}`,listboxLabel:"Empfehlungen",selectedAnnouncement:t=>`${t.optionText}, ausgewhlt`};var vz={};vz={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)}  `})} .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var yz={};yz={focusAnnouncement:(t,e)=>`${e.select({true:()=>`Entered group ${t.groupTitle}, with ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} option`,other:()=>`${e.number(t.groupCount)} options`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selected",other:""},t.isSelected)}`,countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} option`,other:()=>`${e.number(t.optionCount)} options`})} available.`,selectedAnnouncement:t=>`${t.optionText}, selected`,buttonLabel:"Show suggestions",listboxLabel:"Suggestions"};var bz={};bz={buttonLabel:"Mostrar sugerencias",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcin`,other:()=>`${e.number(t.optionCount)} opciones`})} disponible(s).`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Se ha unido al grupo ${t.groupTitle}, con ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcin`,other:()=>`${e.number(t.groupCount)} opciones`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", seleccionado",other:""},t.isSelected)}`,listboxLabel:"Sugerencias",selectedAnnouncement:t=>`${t.optionText}, seleccionado`};var xz={};xz={buttonLabel:"Kuva soovitused",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} valik`,other:()=>`${e.number(t.optionCount)} valikud`})} saadaval.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Sisestatud rhm ${t.groupTitle}, valikuga ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} valik`,other:()=>`${e.number(t.groupCount)} valikud`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valitud",other:""},t.isSelected)}`,listboxLabel:"Soovitused",selectedAnnouncement:t=>`${t.optionText}, valitud`};var _z={};_z={buttonLabel:"Nyt ehdotukset",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} vaihtoehto`,other:()=>`${e.number(t.optionCount)} vaihtoehdot`})} saatavilla.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Mentiin ryhmn ${t.groupTitle}, ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} vaihtoehdon`,other:()=>`${e.number(t.groupCount)} vaihtoehdon`})} kanssa.`,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valittu",other:""},t.isSelected)}`,listboxLabel:"Ehdotukset",selectedAnnouncement:t=>`${t.optionText}, valittu`};var wz={};wz={buttonLabel:"Afficher les suggestions",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} option`,other:()=>`${e.number(t.optionCount)} options`})} disponible(s).`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Groupe ${t.groupTitle} rejoint, avec ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} option`,other:()=>`${e.number(t.groupCount)} options`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", slectionn(s)",other:""},t.isSelected)}`,listboxLabel:"Suggestions",selectedAnnouncement:t=>`${t.optionText}, slectionn`};var Sz={};Sz={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>` ${e.number(t.optionCount)}`,other:()=>`${e.number(t.optionCount)} `})}  .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>` ${e.number(t.groupCount)}`,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var Ez={};Ez={buttonLabel:"Prikai prijedloge",countAnnouncement:(t,e)=>`Dostupno jo: ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcija`,other:()=>`${e.number(t.optionCount)} opcije/a`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Unesena skupina ${t.groupTitle}, s ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcijom`,other:()=>`${e.number(t.groupCount)} opcije/a`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", odabranih",other:""},t.isSelected)}`,listboxLabel:"Prijedlozi",selectedAnnouncement:t=>`${t.optionText}, odabrano`};var Cz={};Cz={buttonLabel:"Javaslatok megjelentse",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} lehetsg`,other:()=>`${e.number(t.optionCount)} lehetsg`})} ll rendelkezsre.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Belpett a(z) ${t.groupTitle} csoportba, amely ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} lehetsget`,other:()=>`${e.number(t.groupCount)} lehetsget`})} tartalmaz. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", kijellve",other:""},t.isSelected)}`,listboxLabel:"Javaslatok",selectedAnnouncement:t=>`${t.optionText}, kijellve`};var Tz={};Tz={buttonLabel:"Mostra suggerimenti",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opzione disponibile`,other:()=>`${e.number(t.optionCount)} opzioni disponibili`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Ingresso nel gruppo ${t.groupTitle}, con ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opzione`,other:()=>`${e.number(t.groupCount)} opzioni`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selezionato",other:""},t.isSelected)}`,listboxLabel:"Suggerimenti",selectedAnnouncement:t=>`${t.optionText}, selezionato`};var Mz={};Mz={buttonLabel:"",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})}`,focusAnnouncement:(t,e)=>`${e.select({true:()=>` ${t.groupTitle}${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}`,other:""},t.isGroupChange)}${t.optionText}${e.select({true:"",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}`};var Az={};Az={buttonLabel:"  ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})}   .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle}, ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var Pz={};Pz={buttonLabel:"Rodyti pasilymus",countAnnouncement:(t,e)=>`Yra ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} parinktis`,other:()=>`${e.number(t.optionCount)} parinktys (-i)`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`vesta grup ${t.groupTitle}, su ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} parinktimi`,other:()=>`${e.number(t.groupCount)} parinktimis (-i)`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", pasirinkta",other:""},t.isSelected)}`,listboxLabel:"Pasilymai",selectedAnnouncement:t=>`${t.optionText}, pasirinkta`};var Nz={};Nz={buttonLabel:"Rdt ieteikumus",countAnnouncement:(t,e)=>`Pieejamo opciju skaits: ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcija`,other:()=>`${e.number(t.optionCount)} opcijas`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Ievadta grupa ${t.groupTitle}, ar ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opciju`,other:()=>`${e.number(t.groupCount)} opcijm`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", atlasta",other:""},t.isSelected)}`,listboxLabel:"Ieteikumi",selectedAnnouncement:t=>`${t.optionText}, atlasta`};var Dz={};Dz={buttonLabel:"Vis forslag",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} alternativ`,other:()=>`${e.number(t.optionCount)} alternativer`})} finnes.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Angitt gruppe ${t.groupTitle}, med ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} alternativ`,other:()=>`${e.number(t.groupCount)} alternativer`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valgt",other:""},t.isSelected)}`,listboxLabel:"Forslag",selectedAnnouncement:t=>`${t.optionText}, valgt`};var kz={};kz={buttonLabel:"Suggesties weergeven",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} optie`,other:()=>`${e.number(t.optionCount)} opties`})} beschikbaar.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Groep ${t.groupTitle} ingevoerd met ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} optie`,other:()=>`${e.number(t.groupCount)} opties`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", geselecteerd",other:""},t.isSelected)}`,listboxLabel:"Suggesties",selectedAnnouncement:t=>`${t.optionText}, geselecteerd`};var Rz={};Rz={buttonLabel:"Wywietlaj sugestie",countAnnouncement:(t,e)=>`dostpna/dostpne(-nych) ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcja`,other:()=>`${e.number(t.optionCount)} opcje(-i)`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Doczono do grupy ${t.groupTitle}, z ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcj`,other:()=>`${e.number(t.groupCount)} opcjami`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", wybrano",other:""},t.isSelected)}`,listboxLabel:"Sugestie",selectedAnnouncement:t=>`${t.optionText}, wybrano`};var Iz={};Iz={buttonLabel:"Mostrar sugestes",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opo`,other:()=>`${e.number(t.optionCount)} opes`})} disponvel.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Grupo inserido ${t.groupTitle}, com ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opo`,other:()=>`${e.number(t.groupCount)} opes`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selecionado",other:""},t.isSelected)}`,listboxLabel:"Sugestes",selectedAnnouncement:t=>`${t.optionText}, selecionado`};var $z={};$z={buttonLabel:"Apresentar sugestes",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opo`,other:()=>`${e.number(t.optionCount)} opes`})} disponvel.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Grupo introduzido ${t.groupTitle}, com ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opo`,other:()=>`${e.number(t.groupCount)} opes`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selecionado",other:""},t.isSelected)}`,listboxLabel:"Sugestes",selectedAnnouncement:t=>`${t.optionText}, selecionado`};var jz={};jz={buttonLabel:"Afiare sugestii",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opiune`,other:()=>`${e.number(t.optionCount)} opiuni`})} disponibile.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Grup ${t.groupTitle} introdus, cu ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opiune`,other:()=>`${e.number(t.groupCount)} opiuni`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selectat",other:""},t.isSelected)}`,listboxLabel:"Sugestii",selectedAnnouncement:t=>`${t.optionText}, selectat`};var Lz={};Lz={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})} .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var Oz={};Oz={buttonLabel:"Zobrazi nvrhy",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} monos`,other:()=>`${e.number(t.optionCount)} monosti/-`})} k dispozcii.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Zadan skupina ${t.groupTitle}, s ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} monosou`,other:()=>`${e.number(t.groupCount)} monosami`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", vybrat",other:""},t.isSelected)}`,listboxLabel:"Nvrhy",selectedAnnouncement:t=>`${t.optionText}, vybrat`};var Fz={};Fz={buttonLabel:"Prikai predloge",countAnnouncement:(t,e)=>`Na voljo je ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcija`,other:()=>`${e.number(t.optionCount)} opcije`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Vnesena skupina ${t.groupTitle}, z ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcija`,other:()=>`${e.number(t.groupCount)} opcije`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", izbrano",other:""},t.isSelected)}`,listboxLabel:"Predlogi",selectedAnnouncement:t=>`${t.optionText}, izbrano`};var Bz={};Bz={buttonLabel:"Prikai predloge",countAnnouncement:(t,e)=>`Dostupno jo: ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcija`,other:()=>`${e.number(t.optionCount)} opcije/a`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Unesena grupa ${t.groupTitle}, s ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcijom`,other:()=>`${e.number(t.groupCount)} optione/a`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", izabranih",other:""},t.isSelected)}`,listboxLabel:"Predlozi",selectedAnnouncement:t=>`${t.optionText}, izabrano`};var zz={};zz={buttonLabel:"Visa frslag",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} alternativ`,other:()=>`${e.number(t.optionCount)} alternativ`})} tillgngliga.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Ingick i gruppen ${t.groupTitle} med ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} alternativ`,other:()=>`${e.number(t.groupCount)} alternativ`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valda",other:""},t.isSelected)}`,listboxLabel:"Frslag",selectedAnnouncement:t=>`${t.optionText}, valda`};var Uz={};Uz={buttonLabel:"nerileri gster",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} seenek`,other:()=>`${e.number(t.optionCount)} seenekler`})} kullanlabilir.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Girilen grup ${t.groupTitle}, ile ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} seenek`,other:()=>`${e.number(t.groupCount)} seenekler`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", seildi",other:""},t.isSelected)}`,listboxLabel:"neriler",selectedAnnouncement:t=>`${t.optionText}, seildi`};var Vz={};Vz={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} (-)`})} .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} (-)`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var Hz={};Hz={buttonLabel:"",countAnnouncement:(t,e)=>` ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})}`,focusAnnouncement:(t,e)=>`${e.select({true:()=>` ${t.groupTitle}  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var Gz={};Gz={buttonLabel:"",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})} `,focusAnnouncement:(t,e)=>`${e.select({true:()=>` ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var Wz={};Wz={"ar-AE":hz,"bg-BG":fz,"cs-CZ":pz,"da-DK":mz,"de-DE":gz,"el-GR":vz,"en-US":yz,"es-ES":bz,"et-EE":xz,"fi-FI":_z,"fr-FR":wz,"he-IL":Sz,"hr-HR":Ez,"hu-HU":Cz,"it-IT":Tz,"ja-JP":Mz,"ko-KR":Az,"lt-LT":Pz,"lv-LV":Nz,"nb-NO":Dz,"nl-NL":kz,"pl-PL":Rz,"pt-BR":Iz,"pt-PT":$z,"ro-RO":jz,"ru-RU":Lz,"sk-SK":Oz,"sl-SI":Fz,"sr-SP":Bz,"sv-SE":zz,"tr-TR":Uz,"uk-UA":Vz,"zh-CN":Hz,"zh-TW":Gz};const qz=7e3;let Nl=null;function Xv(t,e="assertive",n=qz){Nl?Nl.announce(t,e,n):(Nl=new fpe,(typeof IS_REACT_ACT_ENVIRONMENT=="boolean"?IS_REACT_ACT_ENVIRONMENT:typeof jest<"u")?Nl.announce(t,e,n):setTimeout(()=>{Nl?.isAttached()&&Nl?.announce(t,e,n)},100))}function hpe(t){Nl&&Nl.clear(t)}class fpe{isAttached(){var e;return(e=this.node)===null||e===void 0?void 0:e.isConnected}createLog(e){let n=document.createElement("div");return n.setAttribute("role","log"),n.setAttribute("aria-live",e),n.setAttribute("aria-relevant","additions"),n}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(e,n="assertive",r=qz){var i,a;if(!this.node)return;let s=document.createElement("div");typeof e=="object"?(s.setAttribute("role","img"),s.setAttribute("aria-labelledby",e["aria-labelledby"])):s.textContent=e,n==="assertive"?(i=this.assertiveLog)===null||i===void 0||i.appendChild(s):(a=this.politeLog)===null||a===void 0||a.appendChild(s),e!==""&&setTimeout(()=>{s.remove()},r)}clear(e){this.node&&((!e||e==="assertive")&&this.assertiveLog&&(this.assertiveLog.innerHTML=""),(!e||e==="polite")&&this.politeLog&&(this.politeLog.innerHTML=""))}constructor(){this.node=null,this.assertiveLog=null,this.politeLog=null,typeof document<"u"&&(this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node))}}const Ou={top:"top",bottom:"top",left:"left",right:"left"},j3={top:"bottom",bottom:"top",left:"right",right:"left"},ppe={top:"left",left:"top"},pD={top:"height",left:"width"},Kz={width:"totalWidth",height:"totalHeight"},uC={};let Pa=typeof document<"u"?window.visualViewport:null;function kj(t){let e=0,n=0,r=0,i=0,a=0,s=0,o={};var c;let u=((c=Pa?.scale)!==null&&c!==void 0?c:1)>1;if(t.tagName==="BODY"){let v=document.documentElement;r=v.clientWidth,i=v.clientHeight;var h;e=(h=Pa?.width)!==null&&h!==void 0?h:r;var f;n=(f=Pa?.height)!==null&&f!==void 0?f:i,o.top=v.scrollTop||t.scrollTop,o.left=v.scrollLeft||t.scrollLeft,Pa&&(a=Pa.offsetTop,s=Pa.offsetLeft)}else({width:e,height:n,top:a,left:s}=Yv(t,!1)),o.top=t.scrollTop,o.left=t.scrollLeft,r=e,i=n;if(qR()&&(t.tagName==="BODY"||t.tagName==="HTML")&&u){o.top=0,o.left=0;var m;a=(m=Pa?.pageTop)!==null&&m!==void 0?m:0;var g;s=(g=Pa?.pageLeft)!==null&&g!==void 0?g:0}return{width:e,height:n,totalWidth:r,totalHeight:i,scroll:o,top:a,left:s}}function mpe(t){return{top:t.scrollTop,left:t.scrollLeft,width:t.scrollWidth,height:t.scrollHeight}}function Rj(t,e,n,r,i,a,s){var o;let c=(o=i.scroll[t])!==null&&o!==void 0?o:0,u=r[pD[t]],h=r.scroll[Ou[t]]+a,f=u+r.scroll[Ou[t]]-a,m=e-c+s[t]-r[Ou[t]],g=e-c+n+s[t]-r[Ou[t]];return m<h?h-m:g>f?Math.max(f-g,h-m):0}function gpe(t){let e=window.getComputedStyle(t);return{top:parseInt(e.marginTop,10)||0,bottom:parseInt(e.marginBottom,10)||0,left:parseInt(e.marginLeft,10)||0,right:parseInt(e.marginRight,10)||0}}function Ij(t){if(uC[t])return uC[t];let[e,n]=t.split(" "),r=Ou[e]||"right",i=ppe[r];Ou[n]||(n="center");let a=pD[r],s=pD[i];return uC[t]={placement:e,crossPlacement:n,axis:r,crossAxis:i,size:a,crossSize:s},uC[t]}function V4(t,e,n,r,i,a,s,o,c,u){let{placement:h,crossPlacement:f,axis:m,crossAxis:g,size:v,crossSize:x}=r,_={};var w;_[g]=(w=t[g])!==null&&w!==void 0?w:0;var S,E,A,N;f==="center"?_[g]+=(((S=t[x])!==null&&S!==void 0?S:0)-((E=n[x])!==null&&E!==void 0?E:0))/2:f!==g&&(_[g]+=((A=t[x])!==null&&A!==void 0?A:0)-((N=n[x])!==null&&N!==void 0?N:0)),_[g]+=a;const P=t[g]-n[x]+c+u,R=t[g]+t[x]-c-u;if(_[g]=La(_[g],P,R),h===m){const D=o?s[v]:e[Kz[v]];_[j3[m]]=Math.floor(D-t[m]+i)}else _[m]=Math.floor(t[m]+t[v]+i);return _}function vpe(t,e,n,r,i,a,s,o){const c=r?n.height:e[Kz.height];var u;let h=t.top!=null?n.top+t.top:n.top+(c-((u=t.bottom)!==null&&u!==void 0?u:0)-s);var f,m,g,v,x,_;let w=o!=="top"?Math.max(0,e.height+e.top+((f=e.scroll.top)!==null&&f!==void 0?f:0)-h-(((m=i.top)!==null&&m!==void 0?m:0)+((g=i.bottom)!==null&&g!==void 0?g:0)+a)):Math.max(0,h+s-(e.top+((v=e.scroll.top)!==null&&v!==void 0?v:0))-(((x=i.top)!==null&&x!==void 0?x:0)+((_=i.bottom)!==null&&_!==void 0?_:0)+a));return Math.min(e.height-a*2,w)}function $j(t,e,n,r,i,a){let{placement:s,axis:o,size:c}=a;var u,h;if(s===o)return Math.max(0,n[o]-t[o]-((u=t.scroll[o])!==null&&u!==void 0?u:0)+e[o]-((h=r[o])!==null&&h!==void 0?h:0)-r[j3[o]]-i);var f;return Math.max(0,t[c]+t[o]+t.scroll[o]-e[o]-n[o]-n[c]-((f=r[o])!==null&&f!==void 0?f:0)-r[j3[o]]-i)}function ype(t,e,n,r,i,a,s,o,c,u,h,f,m,g,v,x){let _=Ij(t),{size:w,crossAxis:S,crossSize:E,placement:A,crossPlacement:N}=_,P=V4(e,o,n,_,h,f,u,m,v,x),R=h,D=$j(o,u,e,i,a+h,_);if(s&&r[w]>D){let te=Ij(`${j3[A]} ${N}`),ae=V4(e,o,n,te,h,f,u,m,v,x);$j(o,u,e,i,a+h,te)>D&&(_=te,P=ae,R=h)}let k="bottom";_.axis==="top"?_.placement==="top"?k="top":_.placement==="bottom"&&(k="bottom"):_.crossAxis==="top"&&(_.crossPlacement==="top"?k="bottom":_.crossPlacement==="bottom"&&(k="top"));let L=Rj(S,P[S],n[E],o,c,a,u);P[S]+=L;let $=vpe(P,o,u,m,i,a,n.height,k);g&&g<$&&($=g),n.height=Math.min(n.height,$),P=V4(e,o,n,_,R,f,u,m,v,x),L=Rj(S,P[S],n[E],o,c,a,u),P[S]+=L;let B={},q=e[S]-P[S]-i[Ou[S]],U=q+.5*e[E];const J=v/2+x;var O,z,V,H;const ee=Ou[S]==="left"?((O=i.left)!==null&&O!==void 0?O:0)+((z=i.right)!==null&&z!==void 0?z:0):((V=i.top)!==null&&V!==void 0?V:0)+((H=i.bottom)!==null&&H!==void 0?H:0),Y=n[E]-ee-v/2-x,Z=e[S]+v/2-(P[S]+i[Ou[S]]),K=e[S]+e[E]-v/2-(P[S]+i[Ou[S]]),X=La(U,Z,K);B[S]=La(X,J,Y),{placement:A,crossPlacement:N}=_,v?q=B[S]:N==="right"?q+=e[E]:N==="center"&&(q+=e[E]/2);let ne=A==="left"||A==="top"?n[w]:0,G={x:A==="top"||A==="bottom"?q:ne,y:A==="left"||A==="right"?q:ne};return{position:P,maxHeight:$,arrowOffsetLeft:B.left,arrowOffsetTop:B.top,placement:A,triggerAnchorPoint:G}}function bpe(t){let{placement:e,targetNode:n,overlayNode:r,scrollNode:i,padding:a,shouldFlip:s,boundaryElement:o,offset:c,crossOffset:u,maxHeight:h,arrowSize:f=0,arrowBoundaryOffset:m=0}=t,g=r instanceof HTMLElement?xpe(r):document.documentElement,v=g===document.documentElement;const x=window.getComputedStyle(g).position;let _=!!x&&x!=="static",w=v?Yv(n,!1):jj(n,g,!1);if(!v){let{marginTop:B,marginLeft:q}=window.getComputedStyle(n);w.top+=parseInt(B,10)||0,w.left+=parseInt(q,10)||0}let S=Yv(r,!0),E=gpe(r);var A,N;S.width+=((A=E.left)!==null&&A!==void 0?A:0)+((N=E.right)!==null&&N!==void 0?N:0);var P,R;S.height+=((P=E.top)!==null&&P!==void 0?P:0)+((R=E.bottom)!==null&&R!==void 0?R:0);let D=mpe(i),k=kj(o),L=kj(g),$=o.tagName==="BODY"?Yv(g,!1):jj(g,o,!1);return g.tagName==="HTML"&&o.tagName==="BODY"&&(L.scroll.top=0,L.scroll.left=0),ype(e,w,S,D,E,a,s,k,L,$,c,u,_,h,f,m)}function eI(t,e){let{top:n,left:r,width:i,height:a}=t.getBoundingClientRect();return e&&t instanceof t.ownerDocument.defaultView.HTMLElement&&(i=t.offsetWidth,a=t.offsetHeight),{top:n,left:r,width:i,height:a}}function Yv(t,e){let{top:n,left:r,width:i,height:a}=eI(t,e),{scrollTop:s,scrollLeft:o,clientTop:c,clientLeft:u}=document.documentElement;return{top:n+s-c,left:r+o-u,width:i,height:a}}function jj(t,e,n){let r=window.getComputedStyle(t),i;if(r.position==="fixed")i=eI(t,n);else{i=Yv(t,n);let a=Yv(e,n),s=window.getComputedStyle(e);a.top+=(parseInt(s.borderTopWidth,10)||0)-e.scrollTop,a.left+=(parseInt(s.borderLeftWidth,10)||0)-e.scrollLeft,i.top-=a.top,i.left-=a.left}return i.top-=parseInt(r.marginTop,10)||0,i.left-=parseInt(r.marginLeft,10)||0,i}function xpe(t){let e=t.offsetParent;if(e&&e===document.body&&window.getComputedStyle(e).position==="static"&&!Lj(e)&&(e=document.documentElement),e==null)for(e=t.parentElement;e&&!Lj(e);)e=e.parentElement;return e||document.documentElement}function Lj(t){let e=window.getComputedStyle(t);return e.transform!=="none"||/transform|perspective/.test(e.willChange)||e.filter!=="none"||e.contain==="paint"||"backdropFilter"in e&&e.backdropFilter!=="none"||"WebkitBackdropFilter"in e&&e.WebkitBackdropFilter!=="none"}const Xz=new WeakMap;function _pe(t){let{triggerRef:e,isOpen:n,onClose:r}=t;T.useEffect(()=>{if(!n||r===null)return;let i=a=>{let s=a.target;if(!e.current||s instanceof Node&&!s.contains(e.current)||a.target instanceof HTMLInputElement||a.target instanceof HTMLTextAreaElement)return;let o=r||Xz.get(e.current);o&&o()};return window.addEventListener("scroll",i,!0),()=>{window.removeEventListener("scroll",i,!0)}},[n,r,e])}const wpe=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),Spe=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function Epe(t){if(Intl.Locale){let n=new Intl.Locale(t).maximize(),r=typeof n.getTextInfo=="function"?n.getTextInfo():n.textInfo;if(r)return r.direction==="rtl";if(n.script)return wpe.has(n.script)}let e=t.split("-")[0];return Spe.has(e)}const Cpe=Symbol.for("react-aria.i18n.locale");function Yz(){let t=typeof window<"u"&&window[Cpe]||typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([t])}catch{t="en-US"}return{locale:t,direction:Epe(t)?"rtl":"ltr"}}let mD=Yz(),x1=new Set;function Oj(){mD=Yz();for(let t of x1)t(mD)}function Tpe(){let t=wg(),[e,n]=T.useState(mD);return T.useEffect(()=>(x1.size===0&&window.addEventListener("languagechange",Oj),x1.add(n),()=>{x1.delete(n),x1.size===0&&window.removeEventListener("languagechange",Oj)}),[]),t?{locale:"en-US",direction:"ltr"}:e}const Mpe=ve.createContext(null);function Qi(){let t=Tpe();return T.useContext(Mpe)||t}var gD=function(t,e){return gD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},gD(t,e)};function Zz(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");gD(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var L3=function(){return L3=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},L3.apply(this,arguments)};function By(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Jz(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function Qz(t,e){return function(n,r){e(n,r,t)}}function e7(t,e,n,r,i,a){function s(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var o=r.kind,c=o==="getter"?"get":o==="setter"?"set":"value",u=!e&&t?r.static?t:t.prototype:null,h=e||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),f,m=!1,g=n.length-1;g>=0;g--){var v={};for(var x in r)v[x]=x==="access"?{}:r[x];for(var x in r.access)v.access[x]=r.access[x];v.addInitializer=function(w){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(s(w||null))};var _=(0,n[g])(o==="accessor"?{get:h.get,set:h.set}:h[c],v);if(o==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(f=s(_.get))&&(h.get=f),(f=s(_.set))&&(h.set=f),(f=s(_.init))&&i.unshift(f)}else(f=s(_))&&(o==="field"?i.unshift(f):h[c]=f)}u&&Object.defineProperty(u,r.name,h),m=!0}function t7(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function n7(t){return typeof t=="symbol"?t:"".concat(t)}function r7(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function i7(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Vt(t,e,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(h){try{u(r.next(h))}catch(f){s(f)}}function c(h){try{u(r.throw(h))}catch(f){s(f)}}function u(h){h.done?a(h.value):i(h.value).then(o,c)}u((r=r.apply(t,e||[])).next())})}function a7(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(h){return c([u,h])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(h){u=[6,h],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var J2=Object.create?(function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]});function s7(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&J2(e,t,n)}function O3(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function tI(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a}function o7(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(tI(arguments[e]));return t}function l7(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function c7(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function py(t){return this instanceof py?(this.v=t,this):new py(t)}function u7(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(v){return Promise.resolve(v).then(g,f)}}function o(g,v){r[g]&&(i[g]=function(x){return new Promise(function(_,w){a.push([g,x,_,w])>1||c(g,x)})},v&&(i[g]=v(i[g])))}function c(g,v){try{u(r[g](v))}catch(x){m(a[0][3],x)}}function u(g){g.value instanceof py?Promise.resolve(g.value.v).then(h,f):m(a[0][2],g)}function h(g){c("next",g)}function f(g){c("throw",g)}function m(g,v){g(v),a.shift(),a.length&&c(a[0][0],a[0][1])}}function d7(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,a){e[i]=t[i]?function(s){return(n=!n)?{value:py(t[i](s)),done:!1}:a?a(s):s}:a}}function h7(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof O3=="function"?O3(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(s){return new Promise(function(o,c){s=t[a](s),i(o,c,s.done,s.value)})}}function i(a,s,o,c){Promise.resolve(c).then(function(u){a({value:u,done:o})},s)}}function f7(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Ape=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},vD=function(t){return vD=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},vD(t)};function p7(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=vD(t),r=0;r<n.length;r++)n[r]!=="default"&&J2(e,t,n[r]);return Ape(e,t),e}function m7(t){return t&&t.__esModule?t:{default:t}}function g7(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function v7(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function y7(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function b7(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var Ppe=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function x7(t){function e(a){t.error=t.hasError?new Ppe(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(i,function(s){return e(s),i()})}else r|=1}catch(s){e(s)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function _7(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,a,s){return r?e?".jsx":".js":i&&(!a||!s)?n:i+a+"."+s.toLowerCase()+"js"}):t}const Npe={__extends:Zz,__assign:L3,__rest:By,__decorate:Jz,__param:Qz,__esDecorate:e7,__runInitializers:t7,__propKey:n7,__setFunctionName:r7,__metadata:i7,__awaiter:Vt,__generator:a7,__createBinding:J2,__exportStar:s7,__values:O3,__read:tI,__spread:o7,__spreadArrays:l7,__spreadArray:c7,__await:py,__asyncGenerator:u7,__asyncDelegator:d7,__asyncValues:h7,__makeTemplateObject:f7,__importStar:p7,__importDefault:m7,__classPrivateFieldGet:g7,__classPrivateFieldSet:v7,__classPrivateFieldIn:y7,__addDisposableResource:b7,__disposeResources:x7,__rewriteRelativeImportExtension:_7},Dpe=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:b7,get __assign(){return L3},__asyncDelegator:d7,__asyncGenerator:u7,__asyncValues:h7,__await:py,__awaiter:Vt,__classPrivateFieldGet:g7,__classPrivateFieldIn:y7,__classPrivateFieldSet:v7,__createBinding:J2,__decorate:Jz,__disposeResources:x7,__esDecorate:e7,__exportStar:s7,__extends:Zz,__generator:a7,__importDefault:m7,__importStar:p7,__makeTemplateObject:f7,__metadata:i7,__param:Qz,__propKey:n7,__read:tI,__rest:By,__rewriteRelativeImportExtension:_7,__runInitializers:t7,__setFunctionName:r7,__spread:o7,__spreadArray:c7,__spreadArrays:l7,__values:O3,default:Npe},Symbol.toStringTag,{value:"Module"})),kpe=Symbol.for("react-aria.i18n.locale"),Rpe=Symbol.for("react-aria.i18n.strings");let xv;class Rf{getStringForLocale(e,n){let i=this.getStringsForLocale(n)[e];if(!i)throw new Error(`Could not find intl message ${e} in ${n} locale`);return i}getStringsForLocale(e){let n=this.strings[e];return n||(n=Ipe(e,this.strings,this.defaultLocale),this.strings[e]=n),n}static getGlobalDictionaryForPackage(e){if(typeof window>"u")return null;let n=window[kpe];if(xv===void 0){let i=window[Rpe];if(!i)return null;xv={};for(let a in i)xv[a]=new Rf({[n]:i[a]},n)}let r=xv?.[e];if(!r)throw new Error(`Strings for package "${e}" were not included by LocalizedStringProvider. Please add it to the list passed to createLocalizedStringDictionary.`);return r}constructor(e,n="en-US"){this.strings=Object.fromEntries(Object.entries(e).filter(([,r])=>r)),this.defaultLocale=n}}function Ipe(t,e,n="en-US"){if(e[t])return e[t];let r=$pe(t);if(e[r])return e[r];for(let i in e)if(i.startsWith(r+"-"))return e[i];return e[n]}function $pe(t){return Intl.Locale?new Intl.Locale(t).language:t.split("-")[0]}const Fj=new Map,Bj=new Map;class w7{format(e,n){let r=this.strings.getStringForLocale(e,this.locale);return typeof r=="function"?r(n,this):r}plural(e,n,r="cardinal"){let i=n["="+e];if(i)return typeof i=="function"?i():i;let a=this.locale+":"+r,s=Fj.get(a);s||(s=new Intl.PluralRules(this.locale,{type:r}),Fj.set(a,s));let o=s.select(e);return i=n[o]||n.other,typeof i=="function"?i():i}number(e){let n=Bj.get(this.locale);return n||(n=new Intl.NumberFormat(this.locale),Bj.set(this.locale,n)),n.format(e)}select(e,n){let r=e[n]||e.other;return typeof r=="function"?r():r}constructor(e,n){this.locale=e,this.strings=n}}const zj=new WeakMap;function jpe(t){let e=zj.get(t);return e||(e=new Rf(t),zj.set(t,e)),e}function Lpe(t,e){return e&&Rf.getGlobalDictionaryForPackage(e)||jpe(t)}function Hu(t,e){let{locale:n}=Qi(),r=Lpe(t,e);return T.useMemo(()=>new w7(n,r),[n,r])}function Ope(t={}){let{locale:e}=Qi();return T.useMemo(()=>new Intl.ListFormat(e,t),[e,t])}function Fpe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Bpe(t,e,n){Fpe(t,e),e.set(t,n)}let H4=new Map,yD=!1;try{yD=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let F3=!1;try{F3=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const S7={degree:{narrow:{default:"","ja-JP":" ","zh-TW":"","sl-SI":" "}}};class Uf{format(e){let n="";if(!yD&&this.options.signDisplay!=null?n=Upe(this.numberFormatter,this.options.signDisplay,e):n=this.numberFormatter.format(e),this.options.style==="unit"&&!F3){var r;let{unit:i,unitDisplay:a="short",locale:s}=this.resolvedOptions();if(!i)return n;let o=(r=S7[i])===null||r===void 0?void 0:r[a];n+=o[s]||o.default}return n}formatToParts(e){return this.numberFormatter.formatToParts(e)}formatRange(e,n){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(e,n);if(n<e)throw new RangeError("End date must be >= start date");return`${this.format(e)}  ${this.format(n)}`}formatRangeToParts(e,n){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(e,n);if(n<e)throw new RangeError("End date must be >= start date");let r=this.numberFormatter.formatToParts(e),i=this.numberFormatter.formatToParts(n);return[...r.map(a=>({...a,source:"startRange"})),{type:"literal",value:"  ",source:"shared"},...i.map(a=>({...a,source:"endRange"}))]}resolvedOptions(){let e=this.numberFormatter.resolvedOptions();return!yD&&this.options.signDisplay!=null&&(e={...e,signDisplay:this.options.signDisplay}),!F3&&this.options.style==="unit"&&(e={...e,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),e}constructor(e,n={}){this.numberFormatter=zpe(e,n),this.options=n}}function zpe(t,e={}){let{numberingSystem:n}=e;if(n&&t.includes("-nu-")&&(t.includes("-u-")||(t+="-u-"),t+=`-nu-${n}`),e.style==="unit"&&!F3){var r;let{unit:s,unitDisplay:o="short"}=e;if(!s)throw new Error('unit option must be provided with style: "unit"');if(!(!((r=S7[s])===null||r===void 0)&&r[o]))throw new Error(`Unsupported unit ${s} with unitDisplay = ${o}`);e={...e,style:"decimal"}}let i=t+(e?Object.entries(e).sort((s,o)=>s[0]<o[0]?-1:1).join():"");if(H4.has(i))return H4.get(i);let a=new Intl.NumberFormat(t,e);return H4.set(i,a),a}function Upe(t,e,n){if(e==="auto")return t.format(n);if(e==="never")return t.format(Math.abs(n));{let r=!1;if(e==="always"?r=n>0||Object.is(n,0):e==="exceptZero"&&(Object.is(n,-0)||Object.is(n,0)?n=Math.abs(n):r=n>0),r){let i=t.format(-n),a=t.format(n),s=i.replace(a,"").replace(/\u200e|\u061C/,"");return[...s].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),i.replace(a,"!!!").replace(s,"+").replace("!!!",a)}else return t.format(n)}}const Vpe=new RegExp("^.*\\(.*\\).*$"),Hpe=["latn","arab","hanidec","deva","beng","fullwide"];class E7{parse(e){return G4(this.locale,this.options,e).parse(e)}isValidPartialNumber(e,n,r){return G4(this.locale,this.options,e).isValidPartialNumber(e,n,r)}getNumberingSystem(e){return G4(this.locale,this.options,e).options.numberingSystem}constructor(e,n={}){this.locale=e,this.options=n}}const Uj=new Map;function G4(t,e,n){let r=Vj(t,e);if(!t.includes("-nu-")&&!r.isValidPartialNumber(n)){for(let i of Hpe)if(i!==r.options.numberingSystem){let a=Vj(t+(t.includes("-u-")?"-nu-":"-u-nu-")+i,e);if(a.isValidPartialNumber(n))return a}}return r}function Vj(t,e){let n=t+(e?Object.entries(e).sort((i,a)=>i[0]<a[0]?-1:1).join():""),r=Uj.get(n);return r||(r=new Gpe(t,e),Uj.set(n,r)),r}class Gpe{parse(e){let n=this.sanitize(e);if(this.symbols.group&&(n=_v(n,this.symbols.group,"")),this.symbols.decimal&&(n=n.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(n=n.replace(this.symbols.minusSign,"-")),n=n.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let s=n.indexOf("-");n=n.replace("-",""),n=n.replace("+","");let o=n.indexOf(".");o===-1&&(o=n.length),n=n.replace(".",""),o-2===0?n=`0.${n}`:o-2===-1?n=`0.0${n}`:o-2===-2?n="0.00":n=`${n.slice(0,o-2)}.${n.slice(o-2)}`,s>-1&&(n=`-${n}`)}let r=n?+n:NaN;if(isNaN(r))return NaN;if(this.options.style==="percent"){var i,a;let s={...this.options,style:"decimal",minimumFractionDigits:Math.min(((i=this.options.minimumFractionDigits)!==null&&i!==void 0?i:0)+2,20),maximumFractionDigits:Math.min(((a=this.options.maximumFractionDigits)!==null&&a!==void 0?a:0)+2,20)};return new E7(this.locale,s).parse(new Uf(this.locale,s).format(r))}return this.options.currencySign==="accounting"&&Vpe.test(e)&&(r=-1*r),r}sanitize(e){return e=e.replace(this.symbols.literals,""),this.symbols.minusSign&&(e=e.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(e=e.replace(",",this.symbols.decimal),e=e.replace("",this.symbols.decimal)),this.symbols.group&&(e=_v(e,".",this.symbols.group))),this.symbols.group===""&&e.includes("'")&&(e=_v(e,"'",this.symbols.group)),this.options.locale==="fr-FR"&&this.symbols.group&&(e=_v(e," ",this.symbols.group),e=_v(e,/\u00A0/g,this.symbols.group)),e}isValidPartialNumber(e,n=-1/0,r=1/0){return e=this.sanitize(e),this.symbols.minusSign&&e.startsWith(this.symbols.minusSign)&&n<0?e=e.slice(this.symbols.minusSign.length):this.symbols.plusSign&&e.startsWith(this.symbols.plusSign)&&r>0&&(e=e.slice(this.symbols.plusSign.length)),this.symbols.group&&e.startsWith(this.symbols.group)||this.symbols.decimal&&e.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(e=_v(e,this.symbols.group,"")),e=e.replace(this.symbols.numeral,""),this.symbols.decimal&&(e=e.replace(this.symbols.decimal,"")),e.length===0)}constructor(e,n={}){this.locale=e,n.roundingIncrement!==1&&n.roundingIncrement!=null&&(n.maximumFractionDigits==null&&n.minimumFractionDigits==null?(n.maximumFractionDigits=0,n.minimumFractionDigits=0):n.maximumFractionDigits==null?n.maximumFractionDigits=n.minimumFractionDigits:n.minimumFractionDigits==null&&(n.minimumFractionDigits=n.maximumFractionDigits)),this.formatter=new Intl.NumberFormat(e,n),this.options=this.formatter.resolvedOptions(),this.symbols=qpe(e,this.formatter,this.options,n);var r,i;this.options.style==="percent"&&(((r=this.options.minimumFractionDigits)!==null&&r!==void 0?r:0)>18||((i=this.options.maximumFractionDigits)!==null&&i!==void 0?i:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const Hj=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),Wpe=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function qpe(t,e,n,r){var i,a,s,o;let c=new Intl.NumberFormat(t,{...n,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),u=c.formatToParts(-10000.111),h=c.formatToParts(10000.111),f=Wpe.map(L=>c.formatToParts(L));var m;let g=(m=(i=u.find(L=>L.type==="minusSign"))===null||i===void 0?void 0:i.value)!==null&&m!==void 0?m:"-",v=(a=h.find(L=>L.type==="plusSign"))===null||a===void 0?void 0:a.value;!v&&(r?.signDisplay==="exceptZero"||r?.signDisplay==="always")&&(v="+");let _=(s=new Intl.NumberFormat(t,{...n,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(L=>L.type==="decimal"))===null||s===void 0?void 0:s.value,w=(o=u.find(L=>L.type==="group"))===null||o===void 0?void 0:o.value,S=u.filter(L=>!Hj.has(L.type)).map(L=>Gj(L.value)),E=f.flatMap(L=>L.filter($=>!Hj.has($.type)).map($=>Gj($.value))),A=[...new Set([...S,...E])].sort((L,$)=>$.length-L.length),N=A.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${A.join("|")}|[\\p{White_Space}]`,"gu"),P=[...new Intl.NumberFormat(n.locale,{useGrouping:!1}).format(9876543210)].reverse(),R=new Map(P.map((L,$)=>[L,$])),D=new RegExp(`[${P.join("")}]`,"g");return{minusSign:g,plusSign:v,decimal:_,group:w,literals:N,numeral:D,index:L=>String(R.get(L))}}function _v(t,e,n){return t.replaceAll?t.replaceAll(e,n):t.split(e).join(n)}function Gj(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function bD(t={}){let{locale:e}=Qi();return T.useMemo(()=>new Uf(e,t),[e,t])}let W4=new Map;function Q2(t){let{locale:e}=Qi(),n=e+(t?Object.entries(t).sort((i,a)=>i[0]<a[0]?-1:1).join():"");if(W4.has(n))return W4.get(n);let r=new Intl.Collator(e,t);return W4.set(n,r),r}function Kpe(t){let e=Q2({usage:"search",...t}),n=T.useCallback((a,s)=>s.length===0?!0:(a=a.normalize("NFC"),s=s.normalize("NFC"),e.compare(a.slice(0,s.length),s)===0),[e]),r=T.useCallback((a,s)=>s.length===0?!0:(a=a.normalize("NFC"),s=s.normalize("NFC"),e.compare(a.slice(-s.length),s)===0),[e]),i=T.useCallback((a,s)=>{if(s.length===0)return!0;a=a.normalize("NFC"),s=s.normalize("NFC");let o=0,c=s.length;for(;o+c<=a.length;o++){let u=a.slice(o,o+c);if(e.compare(s,u)===0)return!0}return!1},[e]);return T.useMemo(()=>({startsWith:n,endsWith:r,contains:i}),[n,r,i])}let Wi=typeof document<"u"?window.visualViewport:null;function Xpe(t){let{direction:e}=Qi(),{arrowSize:n,targetRef:r,overlayRef:i,arrowRef:a,scrollRef:s=i,placement:o="bottom",containerPadding:c=12,shouldFlip:u=!0,boundaryElement:h=typeof document<"u"?document.body:null,offset:f=0,crossOffset:m=0,shouldUpdatePosition:g=!0,isOpen:v=!0,onClose:x,maxHeight:_,arrowBoundaryOffset:w=0}=t,[S,E]=T.useState(null),A=[g,o,i.current,r.current,a?.current,s.current,c,u,h,f,m,v,e,_,w,n],N=T.useRef(Wi?.scale);T.useEffect(()=>{v&&(N.current=Wi?.scale)},[v]);let P=T.useCallback(()=>{if(g===!1||!v||!i.current||!r.current||!h||Wi?.scale!==N.current)return;let B=null;if(s.current&&s.current.contains(document.activeElement)){var q;let ee=(q=document.activeElement)===null||q===void 0?void 0:q.getBoundingClientRect(),Y=s.current.getBoundingClientRect();var U;if(B={type:"top",offset:((U=ee?.top)!==null&&U!==void 0?U:0)-Y.top},B.offset>Y.height/2){B.type="bottom";var J;B.offset=((J=ee?.bottom)!==null&&J!==void 0?J:0)-Y.bottom}}let O=i.current;if(!_&&i.current){var z;O.style.top="0px",O.style.bottom="";var V;O.style.maxHeight=((V=(z=window.visualViewport)===null||z===void 0?void 0:z.height)!==null&&V!==void 0?V:window.innerHeight)+"px"}let H=bpe({placement:Zpe(o,e),overlayNode:i.current,targetNode:r.current,scrollNode:s.current||i.current,padding:c,shouldFlip:u,boundaryElement:h,offset:f,crossOffset:m,maxHeight:_,arrowSize:n??(a?.current?eI(a.current,!0).width:0),arrowBoundaryOffset:w});if(H.position){if(O.style.top="",O.style.bottom="",O.style.left="",O.style.right="",Object.keys(H.position).forEach(ee=>O.style[ee]=H.position[ee]+"px"),O.style.maxHeight=H.maxHeight!=null?H.maxHeight+"px":"",B&&document.activeElement&&s.current){let ee=document.activeElement.getBoundingClientRect(),Y=s.current.getBoundingClientRect(),Z=ee[B.type]-Y[B.type];s.current.scrollTop+=Z-B.offset}E(H)}},A);mr(P,A),Ype(P),f_({ref:i,onResize:P}),f_({ref:r,onResize:P});let R=T.useRef(!1);mr(()=>{let B,q=()=>{R.current=!0,clearTimeout(B),B=setTimeout(()=>{R.current=!1},500),P()},U=()=>{R.current&&q()};return Wi?.addEventListener("resize",q),Wi?.addEventListener("scroll",U),()=>{Wi?.removeEventListener("resize",q),Wi?.removeEventListener("scroll",U)}},[P]);let D=T.useCallback(()=>{R.current||x?.()},[x,R]);_pe({triggerRef:r,isOpen:v,onClose:x&&D});var k,L,$;return{overlayProps:{style:{position:S?"absolute":"fixed",top:S?void 0:0,left:S?void 0:0,zIndex:1e5,...S?.position,maxHeight:(k=S?.maxHeight)!==null&&k!==void 0?k:"100vh"}},placement:(L=S?.placement)!==null&&L!==void 0?L:null,triggerAnchorPoint:($=S?.triggerAnchorPoint)!==null&&$!==void 0?$:null,arrowProps:{"aria-hidden":"true",role:"presentation",style:{left:S?.arrowOffsetLeft,top:S?.arrowOffsetTop}},updatePosition:P}}function Ype(t){mr(()=>(window.addEventListener("resize",t,!1),()=>{window.removeEventListener("resize",t,!1)}),[t])}function Zpe(t,e){return e==="rtl"?t.replace("start","right").replace("end","left"):t.replace("start","left").replace("end","right")}function nI(t){let e=t;return e.nativeEvent=t,e.isDefaultPrevented=()=>e.defaultPrevented,e.isPropagationStopped=()=>e.cancelBubble,e.persist=()=>{},e}function C7(t,e){Object.defineProperty(t,"target",{value:e}),Object.defineProperty(t,"currentTarget",{value:e})}function T7(t){let e=T.useRef({isFocused:!1,observer:null});mr(()=>{const r=e.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=di(r=>{t?.(r)});return T.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){e.current.isFocused=!0;let i=r.target,a=s=>{if(e.current.isFocused=!1,i.disabled){let o=nI(s);n(o)}e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};i.addEventListener("focusout",a,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&i.disabled){var s;(s=e.current.observer)===null||s===void 0||s.disconnect();let o=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:o})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:o}))}}),e.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let B3=!1;function Jpe(t){for(;t&&!uz(t);)t=t.parentElement;let e=Co(t),n=e.document.activeElement;if(!n||n===t)return;B3=!0;let r=!1,i=h=>{(h.target===n||r)&&h.stopImmediatePropagation()},a=h=>{(h.target===n||r)&&(h.stopImmediatePropagation(),!t&&!r&&(r=!0,ll(n),c()))},s=h=>{(h.target===t||r)&&h.stopImmediatePropagation()},o=h=>{(h.target===t||r)&&(h.stopImmediatePropagation(),r||(r=!0,ll(n),c()))};e.addEventListener("blur",i,!0),e.addEventListener("focusout",a,!0),e.addEventListener("focusin",o,!0),e.addEventListener("focus",s,!0);let c=()=>{cancelAnimationFrame(u),e.removeEventListener("blur",i,!0),e.removeEventListener("focusout",a,!0),e.removeEventListener("focusin",o,!0),e.removeEventListener("focus",s,!0),B3=!1,r=!1},u=requestAnimationFrame(c);return c}let Uv="default",xD="",u3=new WeakMap;function M7(t){if(Fy()){if(Uv==="default"){const e=gr(t);xD=e.documentElement.style.webkitUserSelect,e.documentElement.style.webkitUserSelect="none"}Uv="disabled"}else if(t instanceof HTMLElement||t instanceof SVGElement){let e="userSelect"in t.style?"userSelect":"webkitUserSelect";u3.set(t,t.style[e]),t.style[e]="none"}}function _D(t){if(Fy()){if(Uv!=="disabled")return;Uv="restoring",setTimeout(()=>{sz(()=>{if(Uv==="restoring"){const e=gr(t);e.documentElement.style.webkitUserSelect==="none"&&(e.documentElement.style.webkitUserSelect=xD||""),xD="",Uv="default"}})},300)}else if((t instanceof HTMLElement||t instanceof SVGElement)&&t&&u3.has(t)){let e=u3.get(t),n="userSelect"in t.style?"userSelect":"webkitUserSelect";t.style[n]==="none"&&(t.style[n]=e),t.getAttribute("style")===""&&t.removeAttribute("style"),u3.delete(t)}}const p_=ve.createContext({register:()=>{}});p_.displayName="PressResponderContext";function Qpe(t,e){return e.get?e.get.call(t):e.value}function A7(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function eme(t,e){var n=A7(t,e,"get");return Qpe(t,n)}function tme(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}function Wj(t,e,n){var r=A7(t,e,"set");return tme(t,r,n),n}function nme(t){let e=T.useContext(p_);if(e){let{register:n,...r}=e;t=Et(r,t),n()}return XR(e,t.ref),t}var dC=new WeakMap;class hC{continuePropagation(){Wj(this,dC,!1)}get shouldStopPropagation(){return eme(this,dC)}constructor(e,n,r,i){Bpe(this,dC,{writable:!0,value:void 0}),Wj(this,dC,!0);var a;let s=(a=i?.target)!==null&&a!==void 0?a:r.currentTarget;const o=s?.getBoundingClientRect();let c,u=0,h,f=null;r.clientX!=null&&r.clientY!=null&&(h=r.clientX,f=r.clientY),o&&(h!=null&&f!=null?(c=h-o.left,u=f-o.top):(c=o.width/2,u=o.height/2)),this.type=e,this.pointerType=n,this.target=r.currentTarget,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.x=c,this.y=u}}const qj=Symbol("linkClicked"),Kj="react-aria-pressable-style",Xj="data-react-aria-pressable";function Vf(t){let{onPress:e,onPressChange:n,onPressStart:r,onPressEnd:i,onPressUp:a,onClick:s,isDisabled:o,isPressed:c,preventFocusOnPress:u,shouldCancelOnPointerExit:h,allowTextSelectionOnPress:f,ref:m,...g}=nme(t),[v,x]=T.useState(!1),_=T.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:w,removeAllGlobalListeners:S}=ih(),E=di(($,B)=>{let q=_.current;if(o||q.didFirePressStart)return!1;let U=!0;if(q.isTriggeringEvent=!0,r){let J=new hC("pressstart",B,$);r(J),U=J.shouldStopPropagation}return n&&n(!0),q.isTriggeringEvent=!1,q.didFirePressStart=!0,x(!0),U}),A=di(($,B,q=!0)=>{let U=_.current;if(!U.didFirePressStart)return!1;U.didFirePressStart=!1,U.isTriggeringEvent=!0;let J=!0;if(i){let O=new hC("pressend",B,$);i(O),J=O.shouldStopPropagation}if(n&&n(!1),x(!1),e&&q&&!o){let O=new hC("press",B,$);e(O),J&&(J=O.shouldStopPropagation)}return U.isTriggeringEvent=!1,J}),N=di(($,B)=>{let q=_.current;if(o)return!1;if(a){q.isTriggeringEvent=!0;let U=new hC("pressup",B,$);return a(U),q.isTriggeringEvent=!1,U.shouldStopPropagation}return!0}),P=di($=>{let B=_.current;if(B.isPressed&&B.target){B.didFirePressStart&&B.pointerType!=null&&A(gm(B.target,$),B.pointerType,!1),B.isPressed=!1,B.isOverTarget=!1,B.activePointerId=null,B.pointerType=null,S(),f||_D(B.target);for(let q of B.disposables)q();B.disposables=[]}}),R=di($=>{h&&P($)}),D=di($=>{o||s?.($)}),k=di(($,B)=>{if(!o&&s){let q=new MouseEvent("click",$);C7(q,B),s(nI(q))}}),L=T.useMemo(()=>{let $=_.current,B={onKeyDown(U){if(q4(U.nativeEvent,U.currentTarget)&&bo(U.currentTarget,qi(U.nativeEvent))){var J;Yj(qi(U.nativeEvent),U.key)&&U.preventDefault();let O=!0;if(!$.isPressed&&!U.repeat){$.target=U.currentTarget,$.isPressed=!0,$.pointerType="keyboard",O=E(U,"keyboard");let z=U.currentTarget,V=H=>{q4(H,z)&&!H.repeat&&bo(z,qi(H))&&$.target&&N(gm($.target,H),"keyboard")};w(gr(U.currentTarget),"keyup",Gc(V,q),!0)}O&&U.stopPropagation(),U.metaKey&&zf()&&((J=$.metaKeyEvents)===null||J===void 0||J.set(U.key,U.nativeEvent))}else U.key==="Meta"&&($.metaKeyEvents=new Map)},onClick(U){if(!(U&&!bo(U.currentTarget,qi(U.nativeEvent)))&&U&&U.button===0&&!$.isTriggeringEvent&&!rg.isOpening){let J=!0;if(o&&U.preventDefault(),!$.ignoreEmulatedMouseEvents&&!$.isPressed&&($.pointerType==="virtual"||lz(U.nativeEvent))){let O=E(U,"virtual"),z=N(U,"virtual"),V=A(U,"virtual");D(U),J=O&&z&&V}else if($.isPressed&&$.pointerType!=="keyboard"){let O=$.pointerType||U.nativeEvent.pointerType||"virtual",z=N(gm(U.currentTarget,U),O),V=A(gm(U.currentTarget,U),O,!0);J=z&&V,$.isOverTarget=!1,D(U),P(U)}$.ignoreEmulatedMouseEvents=!1,J&&U.stopPropagation()}}},q=U=>{var J;if($.isPressed&&$.target&&q4(U,$.target)){var O;Yj(qi(U),U.key)&&U.preventDefault();let V=qi(U),H=bo($.target,qi(U));A(gm($.target,U),"keyboard",H),H&&k(U,$.target),S(),U.key!=="Enter"&&rI($.target)&&bo($.target,V)&&!U[qj]&&(U[qj]=!0,rg($.target,U,!1)),$.isPressed=!1,(O=$.metaKeyEvents)===null||O===void 0||O.delete(U.key)}else if(U.key==="Meta"&&(!((J=$.metaKeyEvents)===null||J===void 0)&&J.size)){var z;let V=$.metaKeyEvents;$.metaKeyEvents=void 0;for(let H of V.values())(z=$.target)===null||z===void 0||z.dispatchEvent(new KeyboardEvent("keyup",H))}};if(typeof PointerEvent<"u"){B.onPointerDown=O=>{if(O.button!==0||!bo(O.currentTarget,qi(O.nativeEvent)))return;if(npe(O.nativeEvent)){$.pointerType="virtual";return}$.pointerType=O.pointerType;let z=!0;if(!$.isPressed){$.isPressed=!0,$.isOverTarget=!0,$.activePointerId=O.pointerId,$.target=O.currentTarget,f||M7($.target),z=E(O,$.pointerType);let V=qi(O.nativeEvent);"releasePointerCapture"in V&&V.releasePointerCapture(O.pointerId),w(gr(O.currentTarget),"pointerup",U,!1),w(gr(O.currentTarget),"pointercancel",J,!1)}z&&O.stopPropagation()},B.onMouseDown=O=>{if(bo(O.currentTarget,qi(O.nativeEvent))&&O.button===0){if(u){let z=Jpe(O.target);z&&$.disposables.push(z)}O.stopPropagation()}},B.onPointerUp=O=>{!bo(O.currentTarget,qi(O.nativeEvent))||$.pointerType==="virtual"||O.button===0&&!$.isPressed&&N(O,$.pointerType||O.pointerType)},B.onPointerEnter=O=>{O.pointerId===$.activePointerId&&$.target&&!$.isOverTarget&&$.pointerType!=null&&($.isOverTarget=!0,E(gm($.target,O),$.pointerType))},B.onPointerLeave=O=>{O.pointerId===$.activePointerId&&$.target&&$.isOverTarget&&$.pointerType!=null&&($.isOverTarget=!1,A(gm($.target,O),$.pointerType,!1),R(O))};let U=O=>{if(O.pointerId===$.activePointerId&&$.isPressed&&O.button===0&&$.target){if(bo($.target,qi(O))&&$.pointerType!=null){let z=!1,V=setTimeout(()=>{$.isPressed&&$.target instanceof HTMLElement&&(z?P(O):(ll($.target),$.target.click()))},80);w(O.currentTarget,"click",()=>z=!0,!0),$.disposables.push(()=>clearTimeout(V))}else P(O);$.isOverTarget=!1}},J=O=>{P(O)};B.onDragStart=O=>{bo(O.currentTarget,qi(O.nativeEvent))&&P(O)}}return B},[w,o,u,S,f,P,R,A,E,N,D,k]);return T.useEffect(()=>{if(!m)return;const $=gr(m.current);if(!$||!$.head||$.getElementById(Kj))return;const B=$.createElement("style");B.id=Kj,B.textContent=`
@layer {
  [${Xj}] {
    touch-action: pan-x pan-y pinch-zoom;
  }
}
    `.trim(),$.head.prepend(B)},[m]),T.useEffect(()=>{let $=_.current;return()=>{var B;f||_D((B=$.target)!==null&&B!==void 0?B:void 0);for(let q of $.disposables)q();$.disposables=[]}},[f]),{isPressed:c||v,pressProps:Et(g,L,{[Xj]:!0})}}function rI(t){return t.tagName==="A"&&t.hasAttribute("href")}function q4(t,e){const{key:n,code:r}=t,i=e,a=i.getAttribute("role");return(n==="Enter"||n===" "||n==="Spacebar"||r==="Space")&&!(i instanceof Co(i).HTMLInputElement&&!P7(i,n)||i instanceof Co(i).HTMLTextAreaElement||i.isContentEditable)&&!((a==="link"||!a&&rI(i))&&n!=="Enter")}function gm(t,e){let n=e.clientX,r=e.clientY;return{currentTarget:t,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,clientX:n,clientY:r}}function rme(t){return t instanceof HTMLInputElement?!1:t instanceof HTMLButtonElement?t.type!=="submit"&&t.type!=="reset":!rI(t)}function Yj(t,e){return t instanceof HTMLInputElement?!P7(t,e):rme(t)}const ime=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function P7(t,e){return t.type==="checkbox"||t.type==="radio"?e===" ":ime.has(t.type)}let Sg=null,wD=new Set,O1=new Map,ag=!1,SD=!1;const ame={Tab:!0,Escape:!0};function eT(t,e){for(let n of wD)n(t,e)}function sme(t){return!(t.metaKey||!zf()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function z3(t){ag=!0,sme(t)&&(Sg="keyboard",eT("keyboard",t))}function Zv(t){Sg="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(ag=!0,eT("pointer",t))}function N7(t){lz(t)&&(ag=!0,Sg="virtual")}function D7(t){t.target===window||t.target===document||B3||!t.isTrusted||(!ag&&!SD&&(Sg="virtual",eT("virtual",t)),ag=!1,SD=!1)}function k7(){B3||(ag=!1,SD=!0)}function ED(t){if(typeof window>"u"||typeof document>"u"||O1.get(Co(t)))return;const e=Co(t),n=gr(t);let r=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){ag=!0,r.apply(this,arguments)},n.addEventListener("keydown",z3,!0),n.addEventListener("keyup",z3,!0),n.addEventListener("click",N7,!0),e.addEventListener("focus",D7,!0),e.addEventListener("blur",k7,!1),typeof PointerEvent<"u"&&(n.addEventListener("pointerdown",Zv,!0),n.addEventListener("pointermove",Zv,!0),n.addEventListener("pointerup",Zv,!0)),e.addEventListener("beforeunload",()=>{R7(t)},{once:!0}),O1.set(e,{focus:r})}const R7=(t,e)=>{const n=Co(t),r=gr(t);e&&r.removeEventListener("DOMContentLoaded",e),O1.has(n)&&(n.HTMLElement.prototype.focus=O1.get(n).focus,r.removeEventListener("keydown",z3,!0),r.removeEventListener("keyup",z3,!0),r.removeEventListener("click",N7,!0),n.removeEventListener("focus",D7,!0),n.removeEventListener("blur",k7,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",Zv,!0),r.removeEventListener("pointermove",Zv,!0),r.removeEventListener("pointerup",Zv,!0)),O1.delete(n))};function ome(t){const e=gr(t);let n;return e.readyState!=="loading"?ED(t):(n=()=>{ED(t)},e.addEventListener("DOMContentLoaded",n)),()=>R7(t,n)}typeof document<"u"&&ome();function U3(){return Sg!=="pointer"}function V3(){return Sg}function iI(t){Sg=t,eT(t,null)}const lme=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function cme(t,e,n){let r=gr(n?.target);const i=typeof window<"u"?Co(n?.target).HTMLInputElement:HTMLInputElement,a=typeof window<"u"?Co(n?.target).HTMLTextAreaElement:HTMLTextAreaElement,s=typeof window<"u"?Co(n?.target).HTMLElement:HTMLElement,o=typeof window<"u"?Co(n?.target).KeyboardEvent:KeyboardEvent;return t=t||r.activeElement instanceof i&&!lme.has(r.activeElement.type)||r.activeElement instanceof a||r.activeElement instanceof s&&r.activeElement.isContentEditable,!(t&&e==="keyboard"&&n instanceof o&&!ame[n.key])}function ume(t,e,n){ED(),T.useEffect(()=>{let r=(i,a)=>{cme(!!n?.isTextInput,i,a)&&t(U3())};return wD.add(r),()=>{wD.delete(r)}},e)}function Hf(t){const e=gr(t),n=xa(e);if(V3()==="virtual"){let r=n;sz(()=>{xa(e)===r&&t.isConnected&&ll(t)})}else ll(t)}function m_(t){let{isDisabled:e,onFocus:n,onBlur:r,onFocusChange:i}=t;const a=T.useCallback(c=>{if(c.target===c.currentTarget)return r&&r(c),i&&i(!1),!0},[r,i]),s=T7(a),o=T.useCallback(c=>{const u=gr(c.target),h=u?xa(u):xa();c.target===c.currentTarget&&h===qi(c.nativeEvent)&&(n&&n(c),i&&i(!0),s(c))},[i,n,s]);return{focusProps:{onFocus:!e&&(n||i||r)?o:void 0,onBlur:!e&&(r||i)?a:void 0}}}function Zj(t){if(!t)return;let e=!0;return n=>{let r={...n,preventDefault(){n.preventDefault()},isDefaultPrevented(){return n.isDefaultPrevented()},stopPropagation(){e=!0},continuePropagation(){e=!1},isPropagationStopped(){return e}};t(r),e&&n.stopPropagation()}}function aI(t){return{keyboardProps:t.isDisabled?{}:{onKeyDown:Zj(t.onKeyDown),onKeyUp:Zj(t.onKeyUp)}}}let CD=ve.createContext(null);function dme(t){let e=T.useContext(CD)||{};XR(e,t);let{ref:n,...r}=e;return r}function zy(t,e){let{focusProps:n}=m_(t),{keyboardProps:r}=aI(t),i=Et(n,r),a=dme(e),s=t.isDisabled?{}:a,o=T.useRef(t.autoFocus);T.useEffect(()=>{o.current&&e.current&&Hf(e.current),o.current=!1},[e]);let c=t.excludeFromTabOrder?-1:0;return t.isDisabled&&(c=void 0),{focusableProps:Et({...i,tabIndex:c},s)}}const hme=ve.forwardRef(({children:t,...e},n)=>{let r=T.useRef(!1),i=T.useContext(p_);n=fl(n||i?.ref);let a=Et(i||{},{...e,ref:n,register(){r.current=!0,i&&i.register()}});return XR(i,n),T.useEffect(()=>{r.current||(r.current=!0)},[]),ve.createElement(p_.Provider,{value:a},t)});function fme({children:t}){let e=T.useMemo(()=>({register:()=>{}}),[]);return ve.createElement(p_.Provider,{value:e},t)}function Kf(t){let{isDisabled:e,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=t,a=T.useRef({isFocusWithin:!1}),{addGlobalListener:s,removeAllGlobalListeners:o}=ih(),c=T.useCallback(f=>{f.currentTarget.contains(f.target)&&a.current.isFocusWithin&&!f.currentTarget.contains(f.relatedTarget)&&(a.current.isFocusWithin=!1,o(),n&&n(f),i&&i(!1))},[n,i,a,o]),u=T7(c),h=T.useCallback(f=>{if(!f.currentTarget.contains(f.target))return;const m=gr(f.target),g=xa(m);if(!a.current.isFocusWithin&&g===qi(f.nativeEvent)){r&&r(f),i&&i(!0),a.current.isFocusWithin=!0,u(f);let v=f.currentTarget;s(m,"focus",x=>{if(a.current.isFocusWithin&&!bo(v,x.target)){let _=new m.defaultView.FocusEvent("blur",{relatedTarget:x.target});C7(_,v);let w=nI(_);c(w)}},{capture:!0})}},[r,i,u,s,c]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:h,onBlur:c}}}let TD=!1,fC=0;function pme(){TD=!0,setTimeout(()=>{TD=!1},50)}function Jj(t){t.pointerType==="touch"&&pme()}function mme(){if(!(typeof document>"u"))return fC===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",Jj),fC++,()=>{fC--,!(fC>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",Jj)}}function pl(t){let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,isDisabled:i}=t,[a,s]=T.useState(!1),o=T.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;T.useEffect(mme,[]);let{addGlobalListener:c,removeAllGlobalListeners:u}=ih(),{hoverProps:h,triggerHoverEnd:f}=T.useMemo(()=>{let m=(x,_)=>{if(o.pointerType=_,i||_==="touch"||o.isHovered||!x.currentTarget.contains(x.target))return;o.isHovered=!0;let w=x.currentTarget;o.target=w,c(gr(x.target),"pointerover",S=>{o.isHovered&&o.target&&!bo(o.target,S.target)&&g(S,S.pointerType)},{capture:!0}),e&&e({type:"hoverstart",target:w,pointerType:_}),n&&n(!0),s(!0)},g=(x,_)=>{let w=o.target;o.pointerType="",o.target=null,!(_==="touch"||!o.isHovered||!w)&&(o.isHovered=!1,u(),r&&r({type:"hoverend",target:w,pointerType:_}),n&&n(!1),s(!1))},v={};return typeof PointerEvent<"u"&&(v.onPointerEnter=x=>{TD&&x.pointerType==="mouse"||m(x,x.pointerType)},v.onPointerLeave=x=>{!i&&x.currentTarget.contains(x.target)&&g(x,x.pointerType)}),{hoverProps:v,triggerHoverEnd:g}},[e,n,r,i,o,c,u]);return T.useEffect(()=>{i&&f({currentTarget:o.target},o.pointerType)},[i]),{hoverProps:h,isHovered:a}}function gme(t){let{ref:e,onInteractOutside:n,isDisabled:r,onInteractOutsideStart:i}=t,a=T.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),s=di(c=>{n&&Qj(c,e)&&(i&&i(c),a.current.isPointerDown=!0)}),o=di(c=>{n&&n(c)});T.useEffect(()=>{let c=a.current;if(r)return;const u=e.current,h=gr(u);if(typeof PointerEvent<"u"){let f=m=>{c.isPointerDown&&Qj(m,e)&&o(m),c.isPointerDown=!1};return h.addEventListener("pointerdown",s,!0),h.addEventListener("click",f,!0),()=>{h.removeEventListener("pointerdown",s,!0),h.removeEventListener("click",f,!0)}}},[e,r,s,o])}function Qj(t,e){if(t.button>0)return!1;if(t.target){const n=t.target.ownerDocument;if(!n||!n.documentElement.contains(t.target)||t.target.closest("[data-react-aria-top-layer]"))return!1}return e.current?!t.composedPath().includes(e.current):!1}function H3(t){let{onMoveStart:e,onMove:n,onMoveEnd:r}=t,i=T.useRef({didMove:!1,lastPosition:null,id:null}),{addGlobalListener:a,removeGlobalListener:s}=ih(),o=di((h,f,m,g)=>{m===0&&g===0||(i.current.didMove||(i.current.didMove=!0,e?.({type:"movestart",pointerType:f,shiftKey:h.shiftKey,metaKey:h.metaKey,ctrlKey:h.ctrlKey,altKey:h.altKey})),n?.({type:"move",pointerType:f,deltaX:m,deltaY:g,shiftKey:h.shiftKey,metaKey:h.metaKey,ctrlKey:h.ctrlKey,altKey:h.altKey}))}),c=di((h,f)=>{_D(),i.current.didMove&&r?.({type:"moveend",pointerType:f,shiftKey:h.shiftKey,metaKey:h.metaKey,ctrlKey:h.ctrlKey,altKey:h.altKey})});return{moveProps:T.useMemo(()=>{let h={},f=()=>{M7(),i.current.didMove=!1};{let g=x=>{if(x.pointerId===i.current.id){var _,w;let A=x.pointerType||"mouse";var S,E;o(x,A,x.pageX-((S=(_=i.current.lastPosition)===null||_===void 0?void 0:_.pageX)!==null&&S!==void 0?S:0),x.pageY-((E=(w=i.current.lastPosition)===null||w===void 0?void 0:w.pageY)!==null&&E!==void 0?E:0)),i.current.lastPosition={pageX:x.pageX,pageY:x.pageY}}},v=x=>{if(x.pointerId===i.current.id){let _=x.pointerType||"mouse";c(x,_),i.current.id=null,s(window,"pointermove",g,!1),s(window,"pointerup",v,!1),s(window,"pointercancel",v,!1)}};h.onPointerDown=x=>{x.button===0&&i.current.id==null&&(f(),x.stopPropagation(),x.preventDefault(),i.current.lastPosition={pageX:x.pageX,pageY:x.pageY},i.current.id=x.pointerId,a(window,"pointermove",g,!1),a(window,"pointerup",v,!1),a(window,"pointercancel",v,!1))}}let m=(g,v,x)=>{f(),o(g,"keyboard",v,x),c(g,"keyboard")};return h.onKeyDown=g=>{switch(g.key){case"Left":case"ArrowLeft":g.preventDefault(),g.stopPropagation(),m(g,-1,0);break;case"Right":case"ArrowRight":g.preventDefault(),g.stopPropagation(),m(g,1,0);break;case"Up":case"ArrowUp":g.preventDefault(),g.stopPropagation(),m(g,0,-1);break;case"Down":case"ArrowDown":g.preventDefault(),g.stopPropagation(),m(g,0,1);break}},h},[i,a,s,o,c])}}function I7(t,e){let{onScroll:n,isDisabled:r}=t,i=T.useCallback(a=>{a.ctrlKey||(a.preventDefault(),a.stopPropagation(),n&&n({deltaX:a.deltaX,deltaY:a.deltaY}))},[n]);zv(e,"wheel",r?void 0:i)}const vme=500;function $7(t){let{isDisabled:e,onLongPressStart:n,onLongPressEnd:r,onLongPress:i,threshold:a=vme,accessibilityDescription:s}=t;const o=T.useRef(void 0);let{addGlobalListener:c,removeGlobalListener:u}=ih(),{pressProps:h}=Vf({isDisabled:e,onPressStart(m){if(m.continuePropagation(),(m.pointerType==="mouse"||m.pointerType==="touch")&&(n&&n({...m,type:"longpressstart"}),o.current=setTimeout(()=>{m.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),gr(m.target).activeElement!==m.target&&ll(m.target),i&&i({...m,type:"longpress"}),o.current=void 0},a),m.pointerType==="touch")){let g=v=>{v.preventDefault()};c(m.target,"contextmenu",g,{once:!0}),c(window,"pointerup",()=>{setTimeout(()=>{u(m.target,"contextmenu",g)},30)},{once:!0})}},onPressEnd(m){o.current&&clearTimeout(o.current),r&&(m.pointerType==="mouse"||m.pointerType==="touch")&&r({...m,type:"longpressend"})}}),f=tpe(i&&!e?s:void 0);return{longPressProps:Et(h,f)}}const eL=ve.createContext(null),MD="react-aria-focus-scope-restore";let ni=null;function sI(t){let{children:e,contain:n,restoreFocus:r,autoFocus:i}=t,a=T.useRef(null),s=T.useRef(null),o=T.useRef([]),{parentNode:c}=T.useContext(eL)||{},u=T.useMemo(()=>new PD({scopeRef:o}),[o]);mr(()=>{let m=c||sa.root;if(sa.getTreeNode(m.scopeRef)&&ni&&!G3(ni,m.scopeRef)){let g=sa.getTreeNode(ni);g&&(m=g)}m.addChild(u),sa.addNode(u)},[u,c]),mr(()=>{let m=sa.getTreeNode(o);m&&(m.contain=!!n)},[n]),mr(()=>{var m;let g=(m=a.current)===null||m===void 0?void 0:m.nextSibling,v=[],x=_=>_.stopPropagation();for(;g&&g!==s.current;)v.push(g),g.addEventListener(MD,x),g=g.nextSibling;return o.current=v,()=>{for(let _ of v)_.removeEventListener(MD,x)}},[e]),Sme(o,r,n),xme(o,n),Eme(o,r,n),wme(o,i),T.useEffect(()=>{const m=xa(gr(o.current?o.current[0]:void 0));let g=null;if(Vl(m,o.current)){for(let v of sa.traverse())v.scopeRef&&Vl(m,v.scopeRef.current)&&(g=v);g===sa.getTreeNode(o)&&(ni=g.scopeRef)}},[o]),mr(()=>()=>{var m,g,v;let x=(v=(g=sa.getTreeNode(o))===null||g===void 0||(m=g.parent)===null||m===void 0?void 0:m.scopeRef)!==null&&v!==void 0?v:null;(o===ni||G3(o,ni))&&(!x||sa.getTreeNode(x))&&(ni=x),sa.removeTreeNode(o)},[o]);let h=T.useMemo(()=>yme(o),[]),f=T.useMemo(()=>({focusManager:h,parentNode:u}),[u,h]);return ve.createElement(eL.Provider,{value:f},ve.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:a}),e,ve.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:s}))}function yme(t){return{focusNext(e={}){let n=t.current,{from:r,tabbable:i,wrap:a,accept:s}=e;var o;let c=r||xa(gr((o=n[0])!==null&&o!==void 0?o:void 0)),u=n[0].previousElementSibling,h=Om(n),f=Vs(h,{tabbable:i,accept:s},n);f.currentNode=Vl(c,n)?c:u;let m=f.nextNode();return!m&&a&&(f.currentNode=u,m=f.nextNode()),m&&wo(m,!0),m},focusPrevious(e={}){let n=t.current,{from:r,tabbable:i,wrap:a,accept:s}=e;var o;let c=r||xa(gr((o=n[0])!==null&&o!==void 0?o:void 0)),u=n[n.length-1].nextElementSibling,h=Om(n),f=Vs(h,{tabbable:i,accept:s},n);f.currentNode=Vl(c,n)?c:u;let m=f.previousNode();return!m&&a&&(f.currentNode=u,m=f.previousNode()),m&&wo(m,!0),m},focusFirst(e={}){let n=t.current,{tabbable:r,accept:i}=e,a=Om(n),s=Vs(a,{tabbable:r,accept:i},n);s.currentNode=n[0].previousElementSibling;let o=s.nextNode();return o&&wo(o,!0),o},focusLast(e={}){let n=t.current,{tabbable:r,accept:i}=e,a=Om(n),s=Vs(a,{tabbable:r,accept:i},n);s.currentNode=n[n.length-1].nextElementSibling;let o=s.previousNode();return o&&wo(o,!0),o}}}function Om(t){return t[0].parentElement}function _1(t){let e=sa.getTreeNode(ni);for(;e&&e.scopeRef!==t;){if(e.contain)return!1;e=e.parent}return!0}function bme(t){if(t.checked)return!0;let e=[];if(!t.form)e=[...gr(t).querySelectorAll(`input[type="radio"][name="${CSS.escape(t.name)}"]`)].filter(a=>!a.form);else{var n,r;let a=(r=t.form)===null||r===void 0||(n=r.elements)===null||n===void 0?void 0:n.namedItem(t.name);e=[...a??[]]}return e?!e.some(a=>a.checked):!1}function xme(t,e){let n=T.useRef(void 0),r=T.useRef(void 0);mr(()=>{let i=t.current;if(!e){r.current&&(cancelAnimationFrame(r.current),r.current=void 0);return}const a=gr(i?i[0]:void 0);let s=u=>{if(u.key!=="Tab"||u.altKey||u.ctrlKey||u.metaKey||!_1(t)||u.isComposing)return;let h=xa(a),f=t.current;if(!f||!Vl(h,f))return;let m=Om(f),g=Vs(m,{tabbable:!0},f);if(!h)return;g.currentNode=h;let v=u.shiftKey?g.previousNode():g.nextNode();v||(g.currentNode=u.shiftKey?f[f.length-1].nextElementSibling:f[0].previousElementSibling,v=u.shiftKey?g.previousNode():g.nextNode()),u.preventDefault(),v&&wo(v,!0)},o=u=>{(!ni||G3(ni,t))&&Vl(qi(u),t.current)?(ni=t,n.current=qi(u)):_1(t)&&!Mf(qi(u),t)?n.current?n.current.focus():ni&&ni.current&&AD(ni.current):_1(t)&&(n.current=qi(u))},c=u=>{r.current&&cancelAnimationFrame(r.current),r.current=requestAnimationFrame(()=>{let h=V3(),f=(h==="virtual"||h===null)&&Q_()&&KR(),m=xa(a);if(!f&&m&&_1(t)&&!Mf(m,t)){ni=t;let v=qi(u);if(v&&v.isConnected){var g;n.current=v,(g=n.current)===null||g===void 0||g.focus()}else ni.current&&AD(ni.current)}})};return a.addEventListener("keydown",s,!1),a.addEventListener("focusin",o,!1),i?.forEach(u=>u.addEventListener("focusin",o,!1)),i?.forEach(u=>u.addEventListener("focusout",c,!1)),()=>{a.removeEventListener("keydown",s,!1),a.removeEventListener("focusin",o,!1),i?.forEach(u=>u.removeEventListener("focusin",o,!1)),i?.forEach(u=>u.removeEventListener("focusout",c,!1))}},[t,e]),mr(()=>()=>{r.current&&cancelAnimationFrame(r.current)},[r])}function j7(t){return Mf(t)}function Vl(t,e){return!t||!e?!1:e.some(n=>n.contains(t))}function Mf(t,e=null){if(t instanceof Element&&t.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:n}of sa.traverse(sa.getTreeNode(e)))if(n&&Vl(t,n.current))return!0;return!1}function _me(t){return Mf(t,ni)}function G3(t,e){var n;let r=(n=sa.getTreeNode(e))===null||n===void 0?void 0:n.parent;for(;r;){if(r.scopeRef===t)return!0;r=r.parent}return!1}function wo(t,e=!1){if(t!=null&&!e)try{Hf(t)}catch{}else if(t!=null)try{t.focus()}catch{}}function L7(t,e=!0){let n=t[0].previousElementSibling,r=Om(t),i=Vs(r,{tabbable:e},t);i.currentNode=n;let a=i.nextNode();return e&&!a&&(r=Om(t),i=Vs(r,{tabbable:!1},t),i.currentNode=n,a=i.nextNode()),a}function AD(t,e=!0){wo(L7(t,e))}function wme(t,e){const n=ve.useRef(e);T.useEffect(()=>{if(n.current){ni=t;const r=gr(t.current?t.current[0]:void 0);!Vl(xa(r),ni.current)&&t.current&&AD(t.current)}n.current=!1},[t])}function Sme(t,e,n){mr(()=>{if(e||n)return;let r=t.current;const i=gr(r?r[0]:void 0);let a=s=>{let o=qi(s);Vl(o,t.current)?ni=t:j7(o)||(ni=null)};return i.addEventListener("focusin",a,!1),r?.forEach(s=>s.addEventListener("focusin",a,!1)),()=>{i.removeEventListener("focusin",a,!1),r?.forEach(s=>s.removeEventListener("focusin",a,!1))}},[t,e,n])}function tL(t){let e=sa.getTreeNode(ni);for(;e&&e.scopeRef!==t;){if(e.nodeToRestore)return!1;e=e.parent}return e?.scopeRef===t}function Eme(t,e,n){const r=T.useRef(typeof document<"u"?xa(gr(t.current?t.current[0]:void 0)):null);mr(()=>{let i=t.current;const a=gr(i?i[0]:void 0);if(!e||n)return;let s=()=>{(!ni||G3(ni,t))&&Vl(xa(a),t.current)&&(ni=t)};return a.addEventListener("focusin",s,!1),i?.forEach(o=>o.addEventListener("focusin",s,!1)),()=>{a.removeEventListener("focusin",s,!1),i?.forEach(o=>o.removeEventListener("focusin",s,!1))}},[t,n]),mr(()=>{const i=gr(t.current?t.current[0]:void 0);if(!e)return;let a=s=>{if(s.key!=="Tab"||s.altKey||s.ctrlKey||s.metaKey||!_1(t)||s.isComposing)return;let o=i.activeElement;if(!Mf(o,t)||!tL(t))return;let c=sa.getTreeNode(t);if(!c)return;let u=c.nodeToRestore,h=Vs(i.body,{tabbable:!0});h.currentNode=o;let f=s.shiftKey?h.previousNode():h.nextNode();if((!u||!u.isConnected||u===i.body)&&(u=void 0,c.nodeToRestore=void 0),(!f||!Mf(f,t))&&u){h.currentNode=u;do f=s.shiftKey?h.previousNode():h.nextNode();while(Mf(f,t));s.preventDefault(),s.stopPropagation(),f?wo(f,!0):j7(u)?wo(u,!0):o.blur()}};return n||i.addEventListener("keydown",a,!0),()=>{n||i.removeEventListener("keydown",a,!0)}},[t,e,n]),mr(()=>{const i=gr(t.current?t.current[0]:void 0);if(!e)return;let a=sa.getTreeNode(t);if(a){var s;return a.nodeToRestore=(s=r.current)!==null&&s!==void 0?s:void 0,()=>{let o=sa.getTreeNode(t);if(!o)return;let c=o.nodeToRestore,u=xa(i);if(e&&c&&(u&&Mf(u,t)||u===i.body&&tL(t))){let h=sa.clone();requestAnimationFrame(()=>{if(i.activeElement===i.body){let f=h.getTreeNode(t);for(;f;){if(f.nodeToRestore&&f.nodeToRestore.isConnected){nL(f.nodeToRestore);return}f=f.parent}for(f=h.getTreeNode(t);f;){if(f.scopeRef&&f.scopeRef.current&&sa.getTreeNode(f.scopeRef)){let m=L7(f.scopeRef.current,!0);nL(m);return}f=f.parent}}})}}}},[t,e])}function nL(t){t.dispatchEvent(new CustomEvent(MD,{bubbles:!0,cancelable:!0}))&&wo(t)}function Vs(t,e,n){let r=e?.tabbable?dpe:uz,i=t?.nodeType===Node.ELEMENT_NODE?t:null,a=gr(i),s=Ife(a,t||a,NodeFilter.SHOW_ELEMENT,{acceptNode(o){var c;return!(e==null||(c=e.from)===null||c===void 0)&&c.contains(o)||e?.tabbable&&o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(!bme(o)||s.currentNode.tagName==="INPUT"&&s.currentNode.type==="radio"&&s.currentNode.name===o.name)?NodeFilter.FILTER_REJECT:r(o)&&(!n||Vl(o,n))&&(!e?.accept||e.accept(o))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return e?.from&&(s.currentNode=e.from),s}function Cme(t,e={}){return{focusNext(n={}){let r=t.current;if(!r)return null;let{from:i,tabbable:a=e.tabbable,wrap:s=e.wrap,accept:o=e.accept}=n,c=i||xa(gr(r)),u=Vs(r,{tabbable:a,accept:o});r.contains(c)&&(u.currentNode=c);let h=u.nextNode();return!h&&s&&(u.currentNode=r,h=u.nextNode()),h&&wo(h,!0),h},focusPrevious(n=e){let r=t.current;if(!r)return null;let{from:i,tabbable:a=e.tabbable,wrap:s=e.wrap,accept:o=e.accept}=n,c=i||xa(gr(r)),u=Vs(r,{tabbable:a,accept:o});if(r.contains(c))u.currentNode=c;else{let f=K4(u);return f&&wo(f,!0),f??null}let h=u.previousNode();if(!h&&s){u.currentNode=r;let f=K4(u);if(!f)return null;h=f}return h&&wo(h,!0),h??null},focusFirst(n=e){let r=t.current;if(!r)return null;let{tabbable:i=e.tabbable,accept:a=e.accept}=n,o=Vs(r,{tabbable:i,accept:a}).nextNode();return o&&wo(o,!0),o},focusLast(n=e){let r=t.current;if(!r)return null;let{tabbable:i=e.tabbable,accept:a=e.accept}=n,s=Vs(r,{tabbable:i,accept:a}),o=K4(s);return o&&wo(o,!0),o??null}}}function K4(t){let e,n;do n=t.lastChild(),n&&(e=n);while(n);return e}class oI{get size(){return this.fastMap.size}getTreeNode(e){return this.fastMap.get(e)}addTreeNode(e,n,r){let i=this.fastMap.get(n??null);if(!i)return;let a=new PD({scopeRef:e});i.addChild(a),a.parent=i,this.fastMap.set(e,a),r&&(a.nodeToRestore=r)}addNode(e){this.fastMap.set(e.scopeRef,e)}removeTreeNode(e){if(e===null)return;let n=this.fastMap.get(e);if(!n)return;let r=n.parent;for(let a of this.traverse())a!==n&&n.nodeToRestore&&a.nodeToRestore&&n.scopeRef&&n.scopeRef.current&&Vl(a.nodeToRestore,n.scopeRef.current)&&(a.nodeToRestore=n.nodeToRestore);let i=n.children;r&&(r.removeChild(n),i.size>0&&i.forEach(a=>r&&r.addChild(a))),this.fastMap.delete(n.scopeRef)}*traverse(e=this.root){if(e.scopeRef!=null&&(yield e),e.children.size>0)for(let n of e.children)yield*this.traverse(n)}clone(){var e;let n=new oI;var r;for(let i of this.traverse())n.addTreeNode(i.scopeRef,(r=(e=i.parent)===null||e===void 0?void 0:e.scopeRef)!==null&&r!==void 0?r:null,i.nodeToRestore);return n}constructor(){this.fastMap=new Map,this.root=new PD({scopeRef:null}),this.fastMap.set(null,this.root)}}class PD{addChild(e){this.children.add(e),e.parent=this}removeChild(e){this.children.delete(e),e.parent=void 0}constructor(e){this.children=new Set,this.contain=!1,this.scopeRef=e.scopeRef}}let sa=new oI;function Xs(t={}){let{autoFocus:e=!1,isTextInput:n,within:r}=t,i=T.useRef({isFocused:!1,isFocusVisible:e||U3()}),[a,s]=T.useState(!1),[o,c]=T.useState(()=>i.current.isFocused&&i.current.isFocusVisible),u=T.useCallback(()=>c(i.current.isFocused&&i.current.isFocusVisible),[]),h=T.useCallback(g=>{i.current.isFocused=g,s(g),u()},[u]);ume(g=>{i.current.isFocusVisible=g,u()},[],{isTextInput:n});let{focusProps:f}=m_({isDisabled:r,onFocusChange:h}),{focusWithinProps:m}=Kf({isDisabled:!r,onFocusWithinChange:h});return{isFocused:a,isFocusVisible:o,focusProps:r?m:f}}function Tme(t,e){let n=e?.isDisabled,[r,i]=T.useState(!1);return mr(()=>{if(t?.current&&!n){let a=()=>{if(t.current){let o=Vs(t.current,{tabbable:!0});i(!!o.nextNode())}};a();let s=new MutationObserver(a);return s.observe(t.current,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabIndex","disabled"]}),()=>{s.disconnect()}}}),n?!1:r}function O7(t){let e=Ame(gr(t));e!==t&&(e&&Mme(e,t),t&&lI(t,e))}function Mme(t,e){t.dispatchEvent(new FocusEvent("blur",{relatedTarget:e})),t.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:e}))}function lI(t,e){t.dispatchEvent(new FocusEvent("focus",{relatedTarget:e})),t.dispatchEvent(new FocusEvent("focusin",{bubbles:!0,relatedTarget:e}))}function Ame(t){let e=xa(t),n=e?.getAttribute("aria-activedescendant");return n&&t.getElementById(n)||e}const Cu=[];function F7(t,e){let{onClose:n,shouldCloseOnBlur:r,isOpen:i,isDismissable:a=!1,isKeyboardDismissDisabled:s=!1,shouldCloseOnInteractOutside:o}=t;T.useEffect(()=>{if(i&&!Cu.includes(e))return Cu.push(e),()=>{let v=Cu.indexOf(e);v>=0&&Cu.splice(v,1)}},[i,e]);let c=()=>{Cu[Cu.length-1]===e&&n&&n()},u=v=>{(!o||o(v.target))&&Cu[Cu.length-1]===e&&(v.stopPropagation(),v.preventDefault())},h=v=>{(!o||o(v.target))&&(Cu[Cu.length-1]===e&&(v.stopPropagation(),v.preventDefault()),c())},f=v=>{v.key==="Escape"&&!s&&!v.nativeEvent.isComposing&&(v.stopPropagation(),v.preventDefault(),c())};gme({ref:e,onInteractOutside:a&&i?h:void 0,onInteractOutsideStart:u});let{focusWithinProps:m}=Kf({isDisabled:!r,onBlurWithin:v=>{!v.relatedTarget||_me(v.relatedTarget)||(!o||o(v.relatedTarget))&&n?.()}}),g=v=>{v.target===v.currentTarget&&v.preventDefault()};return{overlayProps:{onKeyDown:f,...m},underlayProps:{onPointerDown:g}}}function B7(t,e,n){let{type:r}=t,{isOpen:i}=e;T.useEffect(()=>{n&&n.current&&Xz.set(n.current,e.close)});let a;r==="menu"?a=!0:r==="listbox"&&(a="listbox");let s=Ji();return{triggerProps:{"aria-haspopup":a,"aria-expanded":i,"aria-controls":i?s:void 0,onPress:e.toggle},overlayProps:{id:s}}}const F1=typeof document<"u"&&window.visualViewport;let pC=0,X4;function z7(t={}){let{isDisabled:e}=t;mr(()=>{if(!e)return pC++,pC===1&&(Fy()?X4=Nme():X4=Pme()),()=>{pC--,pC===0&&X4()}},[e])}function Pme(){let t=window.innerWidth-document.documentElement.clientWidth;return Gc(t>0&&("scrollbarGutter"in document.documentElement.style?Y4(document.documentElement,"scrollbarGutter","stable"):Y4(document.documentElement,"paddingRight",`${t}px`)),Y4(document.documentElement,"overflow","hidden"))}function Nme(){let t,e=!1,n=c=>{let u=c.target;t=ig(u)?u:YR(u,!0),e=!1;let h=u.ownerDocument.defaultView.getSelection();h&&!h.isCollapsed&&h.containsNode(u,!0)&&(e=!0),"selectionStart"in u&&"selectionEnd"in u&&u.selectionStart<u.selectionEnd&&u.ownerDocument.activeElement===u&&(e=!0)},r=document.createElement("style");r.textContent=`
@layer {
  * {
    overscroll-behavior: contain;
  }
}`.trim(),document.head.prepend(r);let i=c=>{if(!(c.touches.length===2||e)){if(!t||t===document.documentElement||t===document.body){c.preventDefault();return}t.scrollHeight===t.clientHeight&&t.scrollWidth===t.clientWidth&&c.preventDefault()}},a=c=>{let u=c.target,h=c.relatedTarget;if(h&&L1(h))h.focus({preventScroll:!0}),rL(h,L1(u));else if(!h){var f;let m=(f=u.parentElement)===null||f===void 0?void 0:f.closest("[tabindex]");m?.focus({preventScroll:!0})}},s=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(c){let u=document.activeElement!=null&&L1(document.activeElement);s.call(this,{...c,preventScroll:!0}),(!c||!c.preventScroll)&&rL(this,u)};let o=Gc(Z4(document,"touchstart",n,{passive:!1,capture:!0}),Z4(document,"touchmove",i,{passive:!1,capture:!0}),Z4(document,"blur",a,!0));return()=>{o(),r.remove(),HTMLElement.prototype.focus=s}}function Y4(t,e,n){let r=t.style[e];return t.style[e]=n,()=>{t.style[e]=r}}function Z4(t,e,n,r){return t.addEventListener(e,n,r),()=>{t.removeEventListener(e,n,r)}}function rL(t,e){e||!F1?iL(t):F1.addEventListener("resize",()=>iL(t),{once:!0})}function iL(t){let e=document.scrollingElement||document.documentElement,n=t;for(;n&&n!==e;){let r=YR(n);if(r!==document.documentElement&&r!==document.body&&r!==n){let i=r.getBoundingClientRect(),a=n.getBoundingClientRect();if(a.top<i.top||a.bottom>i.top+n.clientHeight){let s=i.bottom;F1&&(s=Math.min(s,F1.offsetTop+F1.height));let o=a.top-i.top-((s-i.top)/2-a.height/2);r.scrollTo({top:Math.max(0,Math.min(r.scrollHeight-r.clientHeight,r.scrollTop+o)),behavior:"smooth"})}}n=r.parentElement}}const Dme=T.createContext({});function kme(){var t;return(t=T.useContext(Dme))!==null&&t!==void 0?t:{}}var U7={};U7={dismiss:""};var V7={};V7={dismiss:""};var H7={};H7={dismiss:"Odstranit"};var G7={};G7={dismiss:"Luk"};var W7={};W7={dismiss:"Schlieen"};var q7={};q7={dismiss:""};var K7={};K7={dismiss:"Dismiss"};var X7={};X7={dismiss:"Descartar"};var Y7={};Y7={dismiss:"Lpeta"};var Z7={};Z7={dismiss:"Hylk"};var J7={};J7={dismiss:"Rejeter"};var Q7={};Q7={dismiss:""};var eU={};eU={dismiss:"Odbaci"};var tU={};tU={dismiss:"Elutasts"};var nU={};nU={dismiss:"Ignora"};var rU={};rU={dismiss:""};var iU={};iU={dismiss:""};var aU={};aU={dismiss:"Atmesti"};var sU={};sU={dismiss:"Nerdt"};var oU={};oU={dismiss:"Lukk"};var lU={};lU={dismiss:"Negeren"};var cU={};cU={dismiss:"Zignoruj"};var uU={};uU={dismiss:"Descartar"};var dU={};dU={dismiss:"Dispensar"};var hU={};hU={dismiss:"Revocare"};var fU={};fU={dismiss:""};var pU={};pU={dismiss:"Zrui"};var mU={};mU={dismiss:"Opusti"};var gU={};gU={dismiss:"Odbaci"};var vU={};vU={dismiss:"Avvisa"};var yU={};yU={dismiss:"Kapat"};var bU={};bU={dismiss:""};var xU={};xU={dismiss:""};var _U={};_U={dismiss:""};var wU={};wU={"ar-AE":U7,"bg-BG":V7,"cs-CZ":H7,"da-DK":G7,"de-DE":W7,"el-GR":q7,"en-US":K7,"es-ES":X7,"et-EE":Y7,"fi-FI":Z7,"fr-FR":J7,"he-IL":Q7,"hr-HR":eU,"hu-HU":tU,"it-IT":nU,"ja-JP":rU,"ko-KR":iU,"lt-LT":aU,"lv-LV":sU,"nb-NO":oU,"nl-NL":lU,"pl-PL":cU,"pt-BR":uU,"pt-PT":dU,"ro-RO":hU,"ru-RU":fU,"sk-SK":pU,"sl-SI":mU,"sr-SP":gU,"sv-SE":vU,"tr-TR":yU,"uk-UA":bU,"zh-CN":xU,"zh-TW":_U};const aL={border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"};function tT(t={}){let{style:e,isFocusable:n}=t,[r,i]=T.useState(!1),{focusWithinProps:a}=Kf({isDisabled:!n,onFocusWithinChange:o=>i(o)}),s=T.useMemo(()=>r?e:e?{...aL,...e}:aL,[r]);return{visuallyHiddenProps:{...a,style:s}}}function ew(t){let{children:e,elementType:n="div",isFocusable:r,style:i,...a}=t,{visuallyHiddenProps:s}=tT(t);return ve.createElement(n,Et(a,s),e)}function Rme(t){return t&&t.__esModule?t.default:t}function ND(t){let{onDismiss:e,...n}=t,r=Hu(Rme(wU),"@react-aria/overlays"),i=Wd(n,r.format("dismiss")),a=()=>{e&&e()};return ve.createElement(ew,null,ve.createElement("button",{...i,tabIndex:-1,onClick:a,style:{width:1,height:1}}))}const Ime=typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype;let r1=new WeakMap,go=[];function cI(t,e){let n=Co(t?.[0]),r=e instanceof n.Element?{root:e}:e;var i;let a=(i=r?.root)!==null&&i!==void 0?i:document.body,s=r?.shouldUseInert&&Ime,o=new Set(t),c=new Set,u=x=>s&&x instanceof n.HTMLElement?x.inert:x.getAttribute("aria-hidden")==="true",h=(x,_)=>{s&&x instanceof n.HTMLElement?x.inert=_:_?x.setAttribute("aria-hidden","true"):(x.removeAttribute("aria-hidden"),x instanceof n.HTMLElement&&(x.inert=!1))},f=x=>{for(let E of x.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))o.add(E);let _=E=>{if(c.has(E)||o.has(E)||E.parentElement&&c.has(E.parentElement)&&E.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let A of o)if(E.contains(A))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},w=document.createTreeWalker(x,NodeFilter.SHOW_ELEMENT,{acceptNode:_}),S=_(x);if(S===NodeFilter.FILTER_ACCEPT&&m(x),S!==NodeFilter.FILTER_REJECT){let E=w.nextNode();for(;E!=null;)m(E),E=w.nextNode()}},m=x=>{var _;let w=(_=r1.get(x))!==null&&_!==void 0?_:0;u(x)&&w===0||(w===0&&h(x,!0),c.add(x),r1.set(x,w+1))};go.length&&go[go.length-1].disconnect(),f(a);let g=new MutationObserver(x=>{for(let _ of x)if(_.type==="childList"&&![...o,...c].some(w=>w.contains(_.target)))for(let w of _.addedNodes)(w instanceof HTMLElement||w instanceof SVGElement)&&(w.dataset.liveAnnouncer==="true"||w.dataset.reactAriaTopLayer==="true")?o.add(w):w instanceof Element&&f(w)});g.observe(a,{childList:!0,subtree:!0});let v={visibleNodes:o,hiddenNodes:c,observe(){g.observe(a,{childList:!0,subtree:!0})},disconnect(){g.disconnect()}};return go.push(v),()=>{g.disconnect();for(let x of c){let _=r1.get(x);_!=null&&(_===1?(h(x,!1),r1.delete(x)):r1.set(x,_-1))}v===go[go.length-1]?(go.pop(),go.length&&go[go.length-1].observe()):go.splice(go.indexOf(v),1)}}function $me(t){let e=go[go.length-1];if(e&&!e.visibleNodes.has(t))return e.visibleNodes.add(t),()=>{e.visibleNodes.delete(t)}}function jme(t,e){let{triggerRef:n,popoverRef:r,groupRef:i,isNonModal:a,isKeyboardDismissDisabled:s,shouldCloseOnInteractOutside:o,...c}=t,u=c.trigger==="SubmenuTrigger",{overlayProps:h,underlayProps:f}=F7({isOpen:e.isOpen,onClose:e.close,shouldCloseOnBlur:!0,isDismissable:!a||u,isKeyboardDismissDisabled:s,shouldCloseOnInteractOutside:o},i??r),{overlayProps:m,arrowProps:g,placement:v,triggerAnchorPoint:x}=Xpe({...c,targetRef:n,overlayRef:r,isOpen:e.isOpen,onClose:a&&!u?e.close:null});return z7({isDisabled:a||!e.isOpen}),T.useEffect(()=>{if(e.isOpen&&r.current){var _,w;return a?$me((_=i?.current)!==null&&_!==void 0?_:r.current):cI([(w=i?.current)!==null&&w!==void 0?w:r.current],{shouldUseInert:!0})}},[a,e.isOpen,r,i]),{popoverProps:Et(h,m),arrowProps:g,underlayProps:f,placement:v,triggerAnchorPoint:x}}const SU=ve.createContext(null);function DD(t){let e=wg(),{portalContainer:n=e?null:document.body,isExiting:r}=t,[i,a]=T.useState(!1),s=T.useMemo(()=>({contain:i,setContain:a}),[i,a]),{getContainer:o}=kme();if(!t.portalContainer&&o&&(n=o()),!n)return null;let c=t.children;return t.disableFocusManagement||(c=ve.createElement(sI,{restoreFocus:!0,contain:(t.shouldContainFocus||i)&&!r},c)),c=ve.createElement(SU.Provider,{value:s},ve.createElement(fme,null,c)),Ate.createPortal(c,n)}function EU(){let t=T.useContext(SU),e=t?.setContain;mr(()=>{e?.(!0)},[e])}function Lme(t,e,n){let{overlayProps:r,underlayProps:i}=F7({...t,isOpen:e.isOpen,onClose:e.close},n);return z7({isDisabled:!e.isOpen}),EU(),T.useEffect(()=>{if(e.isOpen&&n.current)return cI([n.current],{shouldUseInert:!0})},[e.isOpen,n]),{modalProps:Et(r),underlayProps:i}}const nT=new WeakMap;function Ome(t){return typeof t=="string"?t.replace(/\s*/g,""):""+t}function CU(t,e){let n=nT.get(t);if(!n)throw new Error("Unknown list");return`${n.id}-option-${Ome(e)}`}function rT(t){let{id:e,label:n,"aria-labelledby":r,"aria-label":i,labelElementType:a="label"}=t;e=Ji(e);let s=Ji(),o={};n&&(r=r?`${s} ${r}`:s,o={id:s,htmlFor:a==="label"?e:void 0});let c=Wd({id:e,"aria-label":i,"aria-labelledby":r});return{labelProps:o,fieldProps:c}}function uI(t){let{description:e,errorMessage:n,isInvalid:r,validationState:i}=t,{labelProps:a,fieldProps:s}=rT(t),o=h_([!!e,!!n,r,i]),c=h_([!!e,!!n,r,i]);return s=Et(s,{"aria-describedby":[o,c,t["aria-describedby"]].filter(Boolean).join(" ")||void 0}),{labelProps:a,fieldProps:s,descriptionProps:{id:o},errorMessageProps:{id:c}}}function kD(t){return c3()?t.altKey:t.ctrlKey}function d3(t,e){var n,r;let i=`[data-key="${CSS.escape(String(e))}"]`,a=(n=t.current)===null||n===void 0?void 0:n.dataset.collection;return a&&(i=`[data-collection="${CSS.escape(a)}"]${i}`),(r=t.current)===null||r===void 0?void 0:r.querySelector(i)}const TU=new WeakMap;function Fme(t){let e=Ji();return TU.set(t,e),e}function Bme(t){return TU.get(t)}const zme=1e3;function MU(t){let{keyboardDelegate:e,selectionManager:n,onTypeSelect:r}=t,i=T.useRef({search:"",timeout:void 0}).current,a=s=>{let o=Ume(s.key);if(!(!o||s.ctrlKey||s.metaKey||!s.currentTarget.contains(s.target)||i.search.length===0&&o===" ")){if(o===" "&&i.search.trim().length>0&&(s.preventDefault(),"continuePropagation"in s||s.stopPropagation()),i.search+=o,e.getKeyForSearch!=null){let c=e.getKeyForSearch(i.search,n.focusedKey);c==null&&(c=e.getKeyForSearch(i.search)),c!=null&&(n.setFocusedKey(c),r&&r(c))}clearTimeout(i.timeout),i.timeout=setTimeout(()=>{i.search=""},zme)}};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?a:void 0}}}function Ume(t){return t.length===1||!/^[A-Z]/i.test(t)?t:""}function dI(t){let{selectionManager:e,keyboardDelegate:n,ref:r,autoFocus:i=!1,shouldFocusWrap:a=!1,disallowEmptySelection:s=!1,disallowSelectAll:o=!1,escapeKeyBehavior:c="clearSelection",selectOnFocus:u=e.selectionBehavior==="replace",disallowTypeAhead:h=!1,shouldUseVirtualFocus:f,allowsTabNavigation:m=!1,isVirtualized:g,scrollRef:v=r,linkBehavior:x="action"}=t,{direction:_}=Qi(),w=Z2(),S=z=>{var V;if(z.altKey&&z.key==="Tab"&&z.preventDefault(),!(!((V=r.current)===null||V===void 0)&&V.contains(z.target)))return;const H=(fe,ge)=>{if(fe!=null){if(e.isLink(fe)&&x==="selection"&&u&&!kD(z)){Zm.flushSync(()=>{e.setFocusedKey(fe,ge)});let be=d3(r,fe),oe=e.getItemProps(fe);be&&w.open(be,z,oe.href,oe.routerOptions);return}if(e.setFocusedKey(fe,ge),e.isLink(fe)&&x==="override")return;z.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(fe):u&&!kD(z)&&e.replaceSelection(fe)}};switch(z.key){case"ArrowDown":if(n.getKeyBelow){var ee,Y,Z;let fe=e.focusedKey!=null?(ee=n.getKeyBelow)===null||ee===void 0?void 0:ee.call(n,e.focusedKey):(Y=n.getFirstKey)===null||Y===void 0?void 0:Y.call(n);fe==null&&a&&(fe=(Z=n.getFirstKey)===null||Z===void 0?void 0:Z.call(n,e.focusedKey)),fe!=null&&(z.preventDefault(),H(fe))}break;case"ArrowUp":if(n.getKeyAbove){var K,X,ne;let fe=e.focusedKey!=null?(K=n.getKeyAbove)===null||K===void 0?void 0:K.call(n,e.focusedKey):(X=n.getLastKey)===null||X===void 0?void 0:X.call(n);fe==null&&a&&(fe=(ne=n.getLastKey)===null||ne===void 0?void 0:ne.call(n,e.focusedKey)),fe!=null&&(z.preventDefault(),H(fe))}break;case"ArrowLeft":if(n.getKeyLeftOf){var G,te,ae;let fe=e.focusedKey!=null?(G=n.getKeyLeftOf)===null||G===void 0?void 0:G.call(n,e.focusedKey):null;fe==null&&a&&(fe=_==="rtl"?(te=n.getFirstKey)===null||te===void 0?void 0:te.call(n,e.focusedKey):(ae=n.getLastKey)===null||ae===void 0?void 0:ae.call(n,e.focusedKey)),fe!=null&&(z.preventDefault(),H(fe,_==="rtl"?"first":"last"))}break;case"ArrowRight":if(n.getKeyRightOf){var pe,ye,me;let fe=e.focusedKey!=null?(pe=n.getKeyRightOf)===null||pe===void 0?void 0:pe.call(n,e.focusedKey):null;fe==null&&a&&(fe=_==="rtl"?(ye=n.getLastKey)===null||ye===void 0?void 0:ye.call(n,e.focusedKey):(me=n.getFirstKey)===null||me===void 0?void 0:me.call(n,e.focusedKey)),fe!=null&&(z.preventDefault(),H(fe,_==="rtl"?"last":"first"))}break;case"Home":if(n.getFirstKey){if(e.focusedKey===null&&z.shiftKey)return;z.preventDefault();let fe=n.getFirstKey(e.focusedKey,kv(z));e.setFocusedKey(fe),fe!=null&&(kv(z)&&z.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(fe):u&&e.replaceSelection(fe))}break;case"End":if(n.getLastKey){if(e.focusedKey===null&&z.shiftKey)return;z.preventDefault();let fe=n.getLastKey(e.focusedKey,kv(z));e.setFocusedKey(fe),fe!=null&&(kv(z)&&z.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(fe):u&&e.replaceSelection(fe))}break;case"PageDown":if(n.getKeyPageBelow&&e.focusedKey!=null){let fe=n.getKeyPageBelow(e.focusedKey);fe!=null&&(z.preventDefault(),H(fe))}break;case"PageUp":if(n.getKeyPageAbove&&e.focusedKey!=null){let fe=n.getKeyPageAbove(e.focusedKey);fe!=null&&(z.preventDefault(),H(fe))}break;case"a":kv(z)&&e.selectionMode==="multiple"&&o!==!0&&(z.preventDefault(),e.selectAll());break;case"Escape":c==="clearSelection"&&!s&&e.selectedKeys.size!==0&&(z.stopPropagation(),z.preventDefault(),e.clearSelection());break;case"Tab":if(!m){if(z.shiftKey)r.current.focus();else{let fe=Vs(r.current,{tabbable:!0}),ge,be;do be=fe.lastChild(),be&&(ge=be);while(be);ge&&!ge.contains(document.activeElement)&&ll(ge)}break}}},E=T.useRef({top:0,left:0});zv(v,"scroll",g?void 0:()=>{var z,V,H,ee;E.current={top:(H=(z=v.current)===null||z===void 0?void 0:z.scrollTop)!==null&&H!==void 0?H:0,left:(ee=(V=v.current)===null||V===void 0?void 0:V.scrollLeft)!==null&&ee!==void 0?ee:0}});let A=z=>{if(e.isFocused){z.currentTarget.contains(z.target)||e.setFocused(!1);return}if(z.currentTarget.contains(z.target)){if(e.setFocused(!0),e.focusedKey==null){var V,H;let Z=X=>{X!=null&&(e.setFocusedKey(X),u&&!e.isSelected(X)&&e.replaceSelection(X))},K=z.relatedTarget;var ee,Y;K&&z.currentTarget.compareDocumentPosition(K)&Node.DOCUMENT_POSITION_FOLLOWING?Z((ee=e.lastSelectedKey)!==null&&ee!==void 0?ee:(V=n.getLastKey)===null||V===void 0?void 0:V.call(n)):Z((Y=e.firstSelectedKey)!==null&&Y!==void 0?Y:(H=n.getFirstKey)===null||H===void 0?void 0:H.call(n))}else!g&&v.current&&(v.current.scrollTop=E.current.top,v.current.scrollLeft=E.current.left);if(e.focusedKey!=null&&v.current){let Z=d3(r,e.focusedKey);Z instanceof HTMLElement&&(!Z.contains(document.activeElement)&&!f&&ll(Z),V3()==="keyboard"&&Dj(Z,{containingElement:r.current}))}}},N=z=>{z.currentTarget.contains(z.relatedTarget)||e.setFocused(!1)},P=T.useRef(!1);zv(r,ape,f?z=>{let{detail:V}=z;z.stopPropagation(),e.setFocused(!0),V?.focusStrategy==="first"&&(P.current=!0)}:void 0);let R=di(()=>{var z,V;let H=(V=(z=n.getFirstKey)===null||z===void 0?void 0:z.call(n))!==null&&V!==void 0?V:null;if(H==null){let ee=xa();O7(r.current),lI(ee,null),e.collection.size>0&&(P.current=!1)}else e.setFocusedKey(H),P.current=!1});Aj(()=>{P.current&&R()},[e.collection,R]);let D=di(()=>{e.collection.size>0&&(P.current=!1)});Aj(()=>{D()},[e.focusedKey,D]),zv(r,ipe,f?z=>{var V;z.stopPropagation(),e.setFocused(!1),!((V=z.detail)===null||V===void 0)&&V.clearFocusKey&&e.setFocusedKey(null)}:void 0);const k=T.useRef(i),L=T.useRef(!1);T.useEffect(()=>{if(k.current){var z,V;let Y=null;var H;i==="first"&&(Y=(H=(z=n.getFirstKey)===null||z===void 0?void 0:z.call(n))!==null&&H!==void 0?H:null);var ee;i==="last"&&(Y=(ee=(V=n.getLastKey)===null||V===void 0?void 0:V.call(n))!==null&&ee!==void 0?ee:null);let Z=e.selectedKeys;if(Z.size){for(let K of Z)if(e.canSelectItem(K)){Y=K;break}}e.setFocused(!0),e.setFocusedKey(Y),Y==null&&!f&&r.current&&Hf(r.current),e.collection.size>0&&(k.current=!1,L.current=!0)}});let $=T.useRef(e.focusedKey),B=T.useRef(null);T.useEffect(()=>{if(e.isFocused&&e.focusedKey!=null&&(e.focusedKey!==$.current||L.current)&&v.current&&r.current){let z=V3(),V=d3(r,e.focusedKey);if(!(V instanceof HTMLElement))return;(z==="keyboard"||L.current)&&(B.current&&cancelAnimationFrame(B.current),B.current=requestAnimationFrame(()=>{v.current&&(oz(v.current,V),z!=="virtual"&&Dj(V,{containingElement:r.current}))}))}!f&&e.isFocused&&e.focusedKey==null&&$.current!=null&&r.current&&Hf(r.current),$.current=e.focusedKey,L.current=!1}),T.useEffect(()=>()=>{B.current&&cancelAnimationFrame(B.current)},[]),zv(r,"react-aria-focus-scope-restore",z=>{z.preventDefault(),e.setFocused(!0)});let q={onKeyDown:S,onFocus:A,onBlur:N,onMouseDown(z){v.current===z.target&&z.preventDefault()}},{typeSelectProps:U}=MU({keyboardDelegate:n,selectionManager:e});h||(q=Et(U,q));let J;f||(J=e.focusedKey==null?0:-1);let O=Fme(e.collection);return{collectionProps:Et(q,{tabIndex:J,"data-collection":O})}}function AU(t){let{id:e,selectionManager:n,key:r,ref:i,shouldSelectOnPressUp:a,shouldUseVirtualFocus:s,focus:o,isDisabled:c,onAction:u,allowsDifferentPressOrigin:h,linkBehavior:f="action"}=t,m=Z2();e=Ji(e);let g=ee=>{if(ee.pointerType==="keyboard"&&kD(ee))n.toggleSelection(r);else{if(n.selectionMode==="none")return;if(n.isLink(r)){if(f==="selection"&&i.current){let Y=n.getItemProps(r);m.open(i.current,ee,Y.href,Y.routerOptions),n.setSelectedKeys(n.selectedKeys);return}else if(f==="override"||f==="none")return}n.selectionMode==="single"?n.isSelected(r)&&!n.disallowEmptySelection?n.toggleSelection(r):n.replaceSelection(r):ee&&ee.shiftKey?n.extendSelection(r):n.selectionBehavior==="toggle"||ee&&(kv(ee)||ee.pointerType==="touch"||ee.pointerType==="virtual")?n.toggleSelection(r):n.replaceSelection(r)}};T.useEffect(()=>{r===n.focusedKey&&n.isFocused&&(s?O7(i.current):o?o():document.activeElement!==i.current&&i.current&&Hf(i.current))},[i,r,n.focusedKey,n.childFocusStrategy,n.isFocused,s]),c=c||n.isDisabled(r);let v={};!s&&!c?v={tabIndex:r===n.focusedKey?0:-1,onFocus(ee){ee.target===i.current&&n.setFocusedKey(r)}}:c&&(v.onMouseDown=ee=>{ee.preventDefault()});let x=n.isLink(r)&&f==="override",_=u&&t.UNSTABLE_itemBehavior==="action",w=n.isLink(r)&&f!=="selection"&&f!=="none",S=!c&&n.canSelectItem(r)&&!x&&!_,E=(u||w)&&!c,A=E&&(n.selectionBehavior==="replace"?!S:!S||n.isEmpty),N=E&&S&&n.selectionBehavior==="replace",P=A||N,R=T.useRef(null),D=P&&S,k=T.useRef(!1),L=T.useRef(!1),$=n.getItemProps(r),B=ee=>{if(u){var Y;u(),(Y=i.current)===null||Y===void 0||Y.dispatchEvent(new CustomEvent("react-aria-item-action",{bubbles:!0}))}w&&i.current&&m.open(i.current,ee,$.href,$.routerOptions)},q={ref:i};if(a?(q.onPressStart=ee=>{R.current=ee.pointerType,k.current=D,ee.pointerType==="keyboard"&&(!P||oL())&&g(ee)},h?(q.onPressUp=A?void 0:ee=>{ee.pointerType==="mouse"&&S&&g(ee)},q.onPress=A?B:ee=>{ee.pointerType!=="keyboard"&&ee.pointerType!=="mouse"&&S&&g(ee)}):q.onPress=ee=>{if(A||N&&ee.pointerType!=="mouse"){if(ee.pointerType==="keyboard"&&!sL())return;B(ee)}else ee.pointerType!=="keyboard"&&S&&g(ee)}):(q.onPressStart=ee=>{R.current=ee.pointerType,k.current=D,L.current=A,S&&(ee.pointerType==="mouse"&&!A||ee.pointerType==="keyboard"&&(!E||oL()))&&g(ee)},q.onPress=ee=>{(ee.pointerType==="touch"||ee.pointerType==="pen"||ee.pointerType==="virtual"||ee.pointerType==="keyboard"&&P&&sL()||ee.pointerType==="mouse"&&L.current)&&(P?B(ee):S&&g(ee))}),v["data-collection"]=Bme(n.collection),v["data-key"]=r,q.preventFocusOnPress=s,s&&(q=Et(q,{onPressStart(ee){ee.pointerType!=="touch"&&(n.setFocused(!0),n.setFocusedKey(r))},onPress(ee){ee.pointerType==="touch"&&(n.setFocused(!0),n.setFocusedKey(r))}})),$)for(let ee of["onPressStart","onPressEnd","onPressChange","onPress","onPressUp","onClick"])$[ee]&&(q[ee]=Gc(q[ee],$[ee]));let{pressProps:U,isPressed:J}=Vf(q),O=N?ee=>{R.current==="mouse"&&(ee.stopPropagation(),ee.preventDefault(),B(ee))}:void 0,{longPressProps:z}=$7({isDisabled:!D,onLongPress(ee){ee.pointerType==="touch"&&(g(ee),n.setSelectionBehavior("toggle"))}}),V=ee=>{R.current==="touch"&&k.current&&ee.preventDefault()},H=f!=="none"&&n.isLink(r)?ee=>{rg.isOpening||ee.preventDefault()}:void 0;return{itemProps:Et(v,S||A||s&&!c?U:{},D?z:{},{onDoubleClick:O,onDragStartCapture:V,onClick:H,id:e},s?{onMouseDown:ee=>ee.preventDefault()}:void 0),isPressed:J,isSelected:n.isSelected(r),isFocused:n.isFocused&&n.focusedKey===r,isDisabled:c,allowsSelection:S,hasAction:P}}function sL(){let t=window.event;return t?.key==="Enter"}function oL(){let t=window.event;return t?.key===" "||t?.code==="Space"}class lL{getItemRect(e){let n=this.ref.current;if(!n)return null;let r=e!=null?d3(this.ref,e):null;if(!r)return null;let i=n.getBoundingClientRect(),a=r.getBoundingClientRect();return{x:a.left-i.left-n.clientLeft+n.scrollLeft,y:a.top-i.top-n.clientTop+n.scrollTop,width:a.width,height:a.height}}getContentSize(){let e=this.ref.current;var n,r;return{width:(n=e?.scrollWidth)!==null&&n!==void 0?n:0,height:(r=e?.scrollHeight)!==null&&r!==void 0?r:0}}getVisibleRect(){let e=this.ref.current;var n,r,i,a;return{x:(n=e?.scrollLeft)!==null&&n!==void 0?n:0,y:(r=e?.scrollTop)!==null&&r!==void 0?r:0,width:(i=e?.clientWidth)!==null&&i!==void 0?i:0,height:(a=e?.clientHeight)!==null&&a!==void 0?a:0}}constructor(e){this.ref=e}}class iT{isDisabled(e){var n;return this.disabledBehavior==="all"&&(((n=e.props)===null||n===void 0?void 0:n.isDisabled)||this.disabledKeys.has(e.key))}findNextNonDisabled(e,n){let r=e;for(;r!=null;){let i=this.collection.getItem(r);if(i?.type==="item"&&!this.isDisabled(i))return r;r=n(r)}return null}getNextKey(e){let n=e;return n=this.collection.getKeyAfter(n),this.findNextNonDisabled(n,r=>this.collection.getKeyAfter(r))}getPreviousKey(e){let n=e;return n=this.collection.getKeyBefore(n),this.findNextNonDisabled(n,r=>this.collection.getKeyBefore(r))}findKey(e,n,r){let i=e,a=this.layoutDelegate.getItemRect(i);if(!a||i==null)return null;let s=a;do{if(i=n(i),i==null)break;a=this.layoutDelegate.getItemRect(i)}while(a&&r(s,a)&&i!=null);return i}isSameRow(e,n){return e.y===n.y||e.x!==n.x}isSameColumn(e,n){return e.x===n.x||e.y!==n.y}getKeyBelow(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,n=>this.getNextKey(n),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,n=>this.getPreviousKey(n),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,n){return n?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){let n=this.direction==="ltr"?"getKeyRightOf":"getKeyLeftOf";return this.layoutDelegate[n]?(e=this.layoutDelegate[n](e),this.findNextNonDisabled(e,r=>this.layoutDelegate[n](r))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="rtl"):this.findKey(e,r=>this.getNextColumn(r,this.direction==="rtl"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="rtl"):null}getKeyLeftOf(e){let n=this.direction==="ltr"?"getKeyLeftOf":"getKeyRightOf";return this.layoutDelegate[n]?(e=this.layoutDelegate[n](e),this.findNextNonDisabled(e,r=>this.layoutDelegate[n](r))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="ltr"):this.findKey(e,r=>this.getNextColumn(r,this.direction==="ltr"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="ltr"):null}getFirstKey(){let e=this.collection.getFirstKey();return this.findNextNonDisabled(e,n=>this.collection.getKeyAfter(n))}getLastKey(){let e=this.collection.getLastKey();return this.findNextNonDisabled(e,n=>this.collection.getKeyBefore(n))}getKeyPageAbove(e){let n=this.ref.current,r=this.layoutDelegate.getItemRect(e);if(!r)return null;if(n&&!ig(n))return this.getFirstKey();let i=e;if(this.orientation==="horizontal"){let a=Math.max(0,r.x+r.width-this.layoutDelegate.getVisibleRect().width);for(;r&&r.x>a&&i!=null;)i=this.getKeyAbove(i),r=i==null?null:this.layoutDelegate.getItemRect(i)}else{let a=Math.max(0,r.y+r.height-this.layoutDelegate.getVisibleRect().height);for(;r&&r.y>a&&i!=null;)i=this.getKeyAbove(i),r=i==null?null:this.layoutDelegate.getItemRect(i)}return i??this.getFirstKey()}getKeyPageBelow(e){let n=this.ref.current,r=this.layoutDelegate.getItemRect(e);if(!r)return null;if(n&&!ig(n))return this.getLastKey();let i=e;if(this.orientation==="horizontal"){let a=Math.min(this.layoutDelegate.getContentSize().width,r.y-r.width+this.layoutDelegate.getVisibleRect().width);for(;r&&r.x<a&&i!=null;)i=this.getKeyBelow(i),r=i==null?null:this.layoutDelegate.getItemRect(i)}else{let a=Math.min(this.layoutDelegate.getContentSize().height,r.y-r.height+this.layoutDelegate.getVisibleRect().height);for(;r&&r.y<a&&i!=null;)i=this.getKeyBelow(i),r=i==null?null:this.layoutDelegate.getItemRect(i)}return i??this.getLastKey()}getKeyForSearch(e,n){if(!this.collator)return null;let r=this.collection,i=n||this.getFirstKey();for(;i!=null;){let a=r.getItem(i);if(!a)return null;let s=a.textValue.slice(0,e.length);if(a.textValue&&this.collator.compare(s,e)===0)return i;i=this.getNextKey(i)}return null}constructor(...e){if(e.length===1){let n=e[0];this.collection=n.collection,this.ref=n.ref,this.collator=n.collator,this.disabledKeys=n.disabledKeys||new Set,this.disabledBehavior=n.disabledBehavior||"all",this.orientation=n.orientation||"vertical",this.direction=n.direction,this.layout=n.layout||"stack",this.layoutDelegate=n.layoutDelegate||new lL(n.ref)}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout="stack",this.orientation="vertical",this.disabledBehavior="all",this.layoutDelegate=new lL(this.ref);this.layout==="stack"&&this.orientation==="vertical"&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}function Vme(t){let{selectionManager:e,collection:n,disabledKeys:r,ref:i,keyboardDelegate:a,layoutDelegate:s}=t,o=Q2({usage:"search",sensitivity:"base"}),c=e.disabledBehavior,u=T.useMemo(()=>a||new iT({collection:n,disabledKeys:r,disabledBehavior:c,ref:i,collator:o,layoutDelegate:s}),[a,s,n,r,i,o,c]),{collectionProps:h}=dI({...t,ref:i,selectionManager:e,keyboardDelegate:u});return{listProps:h}}function Hme(t,e,n){let r=gn(t,{labelable:!0}),i=t.selectionBehavior||"toggle",a=t.linkBehavior||(i==="replace"?"action":"override");i==="toggle"&&a==="action"&&(a="override");let{listProps:s}=Vme({...t,ref:n,selectionManager:e.selectionManager,collection:e.collection,disabledKeys:e.disabledKeys,linkBehavior:a}),{focusWithinProps:o}=Kf({onFocusWithin:t.onFocus,onBlurWithin:t.onBlur,onFocusWithinChange:t.onFocusChange}),c=Ji(t.id);nT.set(e,{id:c,shouldUseVirtualFocus:t.shouldUseVirtualFocus,shouldSelectOnPressUp:t.shouldSelectOnPressUp,shouldFocusOnHover:t.shouldFocusOnHover,isVirtualized:t.isVirtualized,onAction:t.onAction,linkBehavior:a,UNSTABLE_itemBehavior:t.UNSTABLE_itemBehavior});let{labelProps:u,fieldProps:h}=rT({...t,id:c,labelElementType:"span"});return{labelProps:u,listBoxProps:Et(r,o,e.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",...Et(h,s)})}}class Gme{build(e,n){return this.context=n,cL(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:n,items:r}=e;if(ve.isValidElement(n)&&n.type===ve.Fragment)yield*this.iterateCollection({children:n.props.children,items:r});else if(typeof n=="function"){if(!r)throw new Error("props.children was a function but props.items is missing");let i=0;for(let a of r)yield*this.getFullNode({value:a,index:i},{renderer:n}),i++}else{let i=[];ve.Children.forEach(n,s=>{s&&i.push(s)});let a=0;for(let s of i){let o=this.getFullNode({element:s,index:a},{});for(let c of o)a++,yield c}}}getKey(e,n,r,i){if(e.key!=null)return e.key;if(n.type==="cell"&&n.key!=null)return`${i}${n.key}`;let a=n.value;if(a!=null){var s;let o=(s=a.key)!==null&&s!==void 0?s:a.id;if(o==null)throw new Error("No key found for item");return o}return i?`${i}.${n.index}`:`$.${n.index}`}getChildState(e,n){return{renderer:n.renderer||e.renderer}}*getFullNode(e,n,r,i){if(ve.isValidElement(e.element)&&e.element.type===ve.Fragment){let _=[];ve.Children.forEach(e.element.props.children,S=>{_.push(S)});var a;let w=(a=e.index)!==null&&a!==void 0?a:0;for(const S of _)yield*this.getFullNode({element:S,index:w++},n,r,i);return}let s=e.element;if(!s&&e.value&&n&&n.renderer){let _=this.cache.get(e.value);if(_&&(!_.shouldInvalidate||!_.shouldInvalidate(this.context))){_.index=e.index,_.parentKey=i?i.key:null,yield _;return}s=n.renderer(e.value)}if(ve.isValidElement(s)){let _=s.type;if(typeof _!="function"&&typeof _.getCollectionNode!="function"){let A=s.type;throw new Error(`Unknown element <${A}> in collection.`)}let w=_.getCollectionNode(s.props,this.context);var o;let S=(o=e.index)!==null&&o!==void 0?o:0,E=w.next();for(;!E.done&&E.value;){let A=E.value;e.index=S;var c;let N=(c=A.key)!==null&&c!==void 0?c:null;N==null&&(N=A.element?null:this.getKey(s,e,n,r));let R=[...this.getFullNode({...A,key:N,index:S,wrapper:Wme(e.wrapper,A.wrapper)},this.getChildState(n,A),r?`${r}${s.key}`:s.key,i)];for(let D of R){var u,h;D.value=(h=(u=A.value)!==null&&u!==void 0?u:e.value)!==null&&h!==void 0?h:null,D.value&&this.cache.set(D.value,D);var f;if(e.type&&D.type!==e.type)throw new Error(`Unsupported type <${J4(D.type)}> in <${J4((f=i?.type)!==null&&f!==void 0?f:"unknown parent type")}>. Only <${J4(e.type)}> is supported.`);S++,yield D}E=w.next(R)}return}if(e.key==null||e.type==null)return;let m=this;var g,v;let x={type:e.type,props:e.props,key:e.key,parentKey:i?i.key:null,value:(g=e.value)!==null&&g!==void 0?g:null,level:i?i.level+1:0,index:e.index,rendered:e.rendered,textValue:(v=e.textValue)!==null&&v!==void 0?v:"","aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes||!1,childNodes:cL(function*(){if(!e.hasChildNodes||!e.childNodes)return;let _=0;for(let w of e.childNodes()){w.key!=null&&(w.key=`${x.key}${w.key}`);let S=m.getFullNode({...w,index:_},m.getChildState(n,w),x.key,x);for(let E of S)_++,yield E}})};yield x}constructor(){this.cache=new WeakMap}}function cL(t){let e=[],n=null;return{*[Symbol.iterator](){for(let r of e)yield r;n||(n=t());for(let r of n)e.push(r),yield r}}}function Wme(t,e){if(t&&e)return n=>t(e(n));if(t)return t;if(e)return e}function J4(t){return t[0].toUpperCase()+t.slice(1)}function qme(t,e,n){let r=T.useMemo(()=>new Gme,[]),{children:i,items:a,collection:s}=t;return T.useMemo(()=>{if(s)return s;let c=r.build({children:i,items:a},n);return e(c)},[r,i,a,s,n,e])}function aT(t,e){return typeof e.getChildren=="function"?e.getChildren(t.key):t.childNodes}function Kme(t){return Xme(t)}function Xme(t,e){for(let n of t)return n}function Q4(t,e,n){if(e.parentKey===n.parentKey)return e.index-n.index;let r=[...uL(t,e),e],i=[...uL(t,n),n],a=r.slice(0,i.length).findIndex((s,o)=>s!==i[o]);return a!==-1?(e=r[a],n=i[a],e.index-n.index):r.findIndex(s=>s===n)>=0?1:(i.findIndex(s=>s===e)>=0,-1)}function uL(t,e){let n=[],r=e;for(;r?.parentKey!=null;)r=t.getItem(r.parentKey),r&&n.unshift(r);return n}const dL=new WeakMap;function PU(t){let e=dL.get(t);if(e!=null)return e;let n=0,r=i=>{for(let a of i)a.type==="section"?r(aT(a,t)):a.type==="item"&&n++};return r(t),dL.set(t,n),n}function Yme(t,e,n){var r,i;let{key:a}=t,s=nT.get(e);var o;let c=(o=t.isDisabled)!==null&&o!==void 0?o:e.selectionManager.isDisabled(a);var u;let h=(u=t.isSelected)!==null&&u!==void 0?u:e.selectionManager.isSelected(a);var f;let m=(f=t.shouldSelectOnPressUp)!==null&&f!==void 0?f:s?.shouldSelectOnPressUp;var g;let v=(g=t.shouldFocusOnHover)!==null&&g!==void 0?g:s?.shouldFocusOnHover;var x;let _=(x=t.shouldUseVirtualFocus)!==null&&x!==void 0?x:s?.shouldUseVirtualFocus;var w;let S=(w=t.isVirtualized)!==null&&w!==void 0?w:s?.isVirtualized,E=h_(),A=h_(),N={role:"option","aria-disabled":c||void 0,"aria-selected":e.selectionManager.selectionMode!=="none"?h:void 0};zf()&&qR()||(N["aria-label"]=t["aria-label"],N["aria-labelledby"]=E,N["aria-describedby"]=A);let P=e.collection.getItem(a);if(S){let z=Number(P?.index);N["aria-posinset"]=Number.isNaN(z)?void 0:z+1,N["aria-setsize"]=PU(e.collection)}let R=s?.onAction?()=>{var z;return s==null||(z=s.onAction)===null||z===void 0?void 0:z.call(s,a)}:void 0,D=CU(e,a),{itemProps:k,isPressed:L,isFocused:$,hasAction:B,allowsSelection:q}=AU({selectionManager:e.selectionManager,key:a,ref:n,shouldSelectOnPressUp:m,allowsDifferentPressOrigin:m&&v,isVirtualized:S,shouldUseVirtualFocus:_,isDisabled:c,onAction:R||!(P==null||(r=P.props)===null||r===void 0)&&r.onAction?Gc(P==null||(i=P.props)===null||i===void 0?void 0:i.onAction,R):void 0,linkBehavior:s?.linkBehavior,UNSTABLE_itemBehavior:s?.UNSTABLE_itemBehavior,id:D}),{hoverProps:U}=pl({isDisabled:c||!v,onHoverStart(){U3()||(e.selectionManager.setFocused(!0),e.selectionManager.setFocusedKey(a))}}),J=gn(P?.props);delete J.id;let O=az(P?.props);return{optionProps:{...N,...Et(J,k,U,O),id:D},labelProps:{id:E},descriptionProps:{id:A},isFocused:$,isFocusVisible:$&&e.selectionManager.isFocused&&U3(),isSelected:h,isDisabled:c,isPressed:L,allowsSelection:q,hasAction:B}}function Zme(t){let{heading:e,"aria-label":n}=t,r=Ji();return{itemProps:{role:"presentation"},headingProps:e?{id:r,role:"presentation"}:{},groupProps:{role:"group","aria-label":n,"aria-labelledby":e?r:void 0}}}const NU={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},DU={...NU,customError:!0,valid:!1},Rv={isInvalid:!1,validationDetails:NU,validationErrors:[]},Jme=T.createContext({}),sg="__formValidationState"+Date.now();function Xf(t){if(t[sg]){let{realtimeValidation:e,displayValidation:n,updateValidation:r,resetValidation:i,commitValidation:a}=t[sg];return{realtimeValidation:e,displayValidation:n,updateValidation:r,resetValidation:i,commitValidation:a}}return Qme(t)}function Qme(t){let{isInvalid:e,validationState:n,name:r,value:i,builtinValidation:a,validate:s,validationBehavior:o="aria"}=t;n&&(e||(e=n==="invalid"));let c=e!==void 0?{isInvalid:e,validationErrors:[],validationDetails:DU}:null,u=T.useMemo(()=>{if(!s||i==null)return null;let L=ege(s,i);return hL(L)},[s,i]);a?.validationDetails.valid&&(a=void 0);let h=T.useContext(Jme),f=T.useMemo(()=>r?Array.isArray(r)?r.flatMap(L=>RD(h[L])):RD(h[r]):[],[h,r]),[m,g]=T.useState(h),[v,x]=T.useState(!1);h!==m&&(g(h),x(!1));let _=T.useMemo(()=>hL(v?[]:f),[v,f]),w=T.useRef(Rv),[S,E]=T.useState(Rv),A=T.useRef(Rv),N=()=>{if(!P)return;R(!1);let L=u||a||w.current;eA(L,A.current)||(A.current=L,E(L))},[P,R]=T.useState(!1);return T.useEffect(N),{realtimeValidation:c||_||u||a||Rv,displayValidation:o==="native"?c||_||S:c||_||u||a||S,updateValidation(L){o==="aria"&&!eA(S,L)?E(L):w.current=L},resetValidation(){let L=Rv;eA(L,A.current)||(A.current=L,E(L)),o==="native"&&R(!1),x(!0)},commitValidation(){o==="native"&&R(!0),x(!0)}}}function RD(t){return t?Array.isArray(t)?t:[t]:[]}function ege(t,e){if(typeof t=="function"){let n=t(e);if(n&&typeof n!="boolean")return RD(n)}return[]}function hL(t){return t.length?{isInvalid:!0,validationErrors:t,validationDetails:DU}:null}function eA(t,e){return t===e?!0:!!t&&!!e&&t.isInvalid===e.isInvalid&&t.validationErrors.length===e.validationErrors.length&&t.validationErrors.every((n,r)=>n===e.validationErrors[r])&&Object.entries(t.validationDetails).every(([n,r])=>e.validationDetails[n]===r)}var kU={};kU={longPressMessage:"     Alt +    "};var RU={};RU={longPressMessage:"    Alt+  ,    "};var IU={};IU={longPressMessage:"Dlouhm stiskem nebo stisknutm klves Alt + ipka dol otevete nabdku"};var $U={};$U={longPressMessage:"Langt tryk eller tryk p Alt + pil ned for at bne menuen"};var jU={};jU={longPressMessage:"Drcken Sie lange oder drcken Sie Alt + Nach-unten, um das Men zu ffnen"};var LU={};LU={longPressMessage:"    Alt +       "};var OU={};OU={longPressMessage:"Long press or press Alt + ArrowDown to open menu"};var FU={};FU={longPressMessage:"Mantenga pulsado o pulse Alt + flecha abajo para abrir el men"};var BU={};BU={longPressMessage:"Men avamiseks vajutage pikalt vi vajutage klahve Alt + allanool"};var zU={};zU={longPressMessage:"Avaa valikko painamalla pohjassa tai nppinyhdistelmll Alt + Alanuoli"};var UU={};UU={longPressMessage:"Appuyez de manire prolonge ou appuyez sur Alt+Flche vers le bas pour ouvrir le menu."};var VU={};VU={longPressMessage:"     Alt + ArrowDown    "};var HU={};HU={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dolje za otvaranje izbornika"};var GU={};GU={longPressMessage:"Nyomja meg hosszan, vagy nyomja meg az Alt + lefele nyl gombot a men megnyitshoz"};var WU={};WU={longPressMessage:"Premere a lungo o premere Alt + Freccia gi per aprire il menu"};var qU={};qU={longPressMessage:" Alt+"};var KU={};KU={longPressMessage:"  Alt +     "};var XU={};XU={longPressMessage:"Nordami atidaryti meniu, nuspaud palaikykite arba paspauskite Alt + ArrowDown."};var YU={};YU={longPressMessage:"Lai atvrtu izvlni, turiet nospiestu vai nospiediet taustiu kombinciju Alt + lejupvrst bultia"};var ZU={};ZU={longPressMessage:"Langt trykk eller trykk Alt + PilNed for  pne menyen"};var JU={};JU={longPressMessage:"Druk lang op Alt + pijl-omlaag of druk op Alt om het menu te openen"};var QU={};QU={longPressMessage:"Nacinij i przytrzymaj lub nacinij klawisze Alt + Strzaka w d, aby otworzy menu"};var eV={};eV={longPressMessage:"Pressione e segure ou pressione Alt + Seta para baixo para abrir o menu"};var tV={};tV={longPressMessage:"Prima continuamente ou prima Alt + Seta Para Baixo para abrir o menu"};var nV={};nV={longPressMessage:"Apsai lung sau apsai pe Alt + sgeat n jos pentru a deschide meniul"};var rV={};rV={longPressMessage:"     Alt +  ,   "};var iV={};iV={longPressMessage:"Ponuku otvorte dlhm stlaenm alebo stlaenm klvesu Alt + klvesu so pkou nadol"};var aV={};aV={longPressMessage:"Za odprtje menija pritisnite in drite gumb ali pritisnite Alt+puica navzdol"};var sV={};sV={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dole da otvorite meni"};var oV={};oV={longPressMessage:"Hll nedtryckt eller tryck p Alt + pil nedt fr att ppna menyn"};var lV={};lV={longPressMessage:"Meny amak iin uzun basn veya Alt + Aa Ok tuuna basn"};var cV={};cV={longPressMessage:"      Alt   ,   "};var uV={};uV={longPressMessage:" Alt + "};var dV={};dV={longPressMessage:" Alt+"};var hV={};hV={"ar-AE":kU,"bg-BG":RU,"cs-CZ":IU,"da-DK":$U,"de-DE":jU,"el-GR":LU,"en-US":OU,"es-ES":FU,"et-EE":BU,"fi-FI":zU,"fr-FR":UU,"he-IL":VU,"hr-HR":HU,"hu-HU":GU,"it-IT":WU,"ja-JP":qU,"ko-KR":KU,"lt-LT":XU,"lv-LV":YU,"nb-NO":ZU,"nl-NL":JU,"pl-PL":QU,"pt-BR":eV,"pt-PT":tV,"ro-RO":nV,"ru-RU":rV,"sk-SK":iV,"sl-SI":aV,"sr-SP":sV,"sv-SE":oV,"tr-TR":lV,"uk-UA":cV,"zh-CN":uV,"zh-TW":dV};function tge(t){return t&&t.__esModule?t.default:t}function fV(t,e,n){let{type:r="menu",isDisabled:i,trigger:a="press"}=t,s=Ji(),{triggerProps:o,overlayProps:c}=B7({type:r},e,n),u=g=>{if(!i&&!(a==="longPress"&&!g.altKey)&&n&&n.current)switch(g.key){case"Enter":case" ":if(a==="longPress"||g.isDefaultPrevented())return;case"ArrowDown":"continuePropagation"in g||g.stopPropagation(),g.preventDefault(),e.toggle("first");break;case"ArrowUp":"continuePropagation"in g||g.stopPropagation(),g.preventDefault(),e.toggle("last");break;default:"continuePropagation"in g&&g.continuePropagation()}},h=Hu(tge(hV),"@react-aria/menu"),{longPressProps:f}=$7({isDisabled:i||a!=="longPress",accessibilityDescription:h.format("longPressMessage"),onLongPressStart(){e.close()},onLongPress(){e.open("first")}}),m={preventFocusOnPress:!0,onPressStart(g){g.pointerType!=="touch"&&g.pointerType!=="keyboard"&&!i&&(ll(g.target),e.open(g.pointerType==="virtual"?"first":null))},onPress(g){g.pointerType==="touch"&&!i&&(ll(g.target),e.toggle())}};return delete o.onPress,{menuTriggerProps:{...o,...a==="press"?m:f,id:s,onKeyDown:u},menuProps:{...c,"aria-labelledby":s,autoFocus:e.focusStrategy||!0,onClose:e.close}}}function sT(t,e,n){let{validationBehavior:r,focus:i}=t;mr(()=>{if(r==="native"&&n?.current&&!n.current.disabled){let u=e.realtimeValidation.isInvalid?e.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";n.current.setCustomValidity(u),n.current.hasAttribute("title")||(n.current.title=""),e.realtimeValidation.isInvalid||e.updateValidation(rge(n.current))}});let a=T.useRef(!1),s=di(()=>{a.current||e.resetValidation()}),o=di(u=>{var h;e.displayValidation.isInvalid||e.commitValidation();let f=n==null||(h=n.current)===null||h===void 0?void 0:h.form;if(!u.defaultPrevented&&n&&f&&ige(f)===n.current){var m;i?i():(m=n.current)===null||m===void 0||m.focus(),iI("keyboard")}u.preventDefault()}),c=di(()=>{e.commitValidation()});T.useEffect(()=>{let u=n?.current;if(!u)return;let h=u.form,f=h?.reset;return h&&(h.reset=()=>{a.current=!window.event||window.event.type==="message"&&window.event.target instanceof MessagePort,f?.call(h),a.current=!1}),u.addEventListener("invalid",o),u.addEventListener("change",c),h?.addEventListener("reset",s),()=>{u.removeEventListener("invalid",o),u.removeEventListener("change",c),h?.removeEventListener("reset",s),h&&(h.reset=f)}},[n,o,c,s,r])}function nge(t){let e=t.validity;return{badInput:e.badInput,customError:e.customError,patternMismatch:e.patternMismatch,rangeOverflow:e.rangeOverflow,rangeUnderflow:e.rangeUnderflow,stepMismatch:e.stepMismatch,tooLong:e.tooLong,tooShort:e.tooShort,typeMismatch:e.typeMismatch,valueMissing:e.valueMissing,valid:e.valid}}function rge(t){return{isInvalid:!t.validity.valid,validationDetails:nge(t),validationErrors:t.validationMessage?[t.validationMessage]:[]}}function ige(t){for(let e=0;e<t.elements.length;e++){let n=t.elements[e];if(!n.validity.valid)return n}return null}function oT(t,e){let{inputElementType:n="input",isDisabled:r=!1,isRequired:i=!1,isReadOnly:a=!1,type:s="text",validationBehavior:o="aria"}=t,[c,u]=Xa(t.value,t.defaultValue||"",t.onChange),{focusableProps:h}=zy(t,e),f=Xf({...t,value:c}),{isInvalid:m,validationErrors:g,validationDetails:v}=f.displayValidation,{labelProps:x,fieldProps:_,descriptionProps:w,errorMessageProps:S}=uI({...t,isInvalid:m,errorMessage:t.errorMessage||g}),E=gn(t,{labelable:!0});const A={type:s,pattern:t.pattern};let[N]=T.useState(c);var P;return qf(e,(P=t.defaultValue)!==null&&P!==void 0?P:N,u),sT(t,f,e),T.useEffect(()=>{if(e.current instanceof Co(e.current).HTMLTextAreaElement){let R=e.current;Object.defineProperty(R,"defaultValue",{get:()=>R.value,set:()=>{},configurable:!0})}},[e]),{labelProps:x,inputProps:Et(E,n==="input"?A:void 0,{disabled:r,readOnly:a,required:i&&o==="native","aria-required":i&&o==="aria"||void 0,"aria-invalid":m||void 0,"aria-errormessage":t["aria-errormessage"],"aria-activedescendant":t["aria-activedescendant"],"aria-autocomplete":t["aria-autocomplete"],"aria-haspopup":t["aria-haspopup"],"aria-controls":t["aria-controls"],value:c,onChange:R=>u(R.target.value),autoComplete:t.autoComplete,autoCapitalize:t.autoCapitalize,maxLength:t.maxLength,minLength:t.minLength,name:t.name,form:t.form,placeholder:t.placeholder,inputMode:t.inputMode,autoCorrect:t.autoCorrect,spellCheck:t.spellCheck,[parseInt(ve.version,10)>=17?"enterKeyHint":"enterkeyhint"]:t.enterKeyHint,onCopy:t.onCopy,onCut:t.onCut,onPaste:t.onPaste,onCompositionEnd:t.onCompositionEnd,onCompositionStart:t.onCompositionStart,onCompositionUpdate:t.onCompositionUpdate,onSelect:t.onSelect,onBeforeInput:t.onBeforeInput,onInput:t.onInput,...h,..._}),descriptionProps:w,errorMessageProps:S,isInvalid:m,validationErrors:g,validationDetails:v}}function fL(){return typeof window<"u"&&window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"}function pV(t,e,n){let r=di(f=>{let m=n.current;if(!m)return;let g=null;switch(f.inputType){case"historyUndo":case"historyRedo":return;case"insertLineBreak":return;case"deleteContent":case"deleteByCut":case"deleteByDrag":g=m.value.slice(0,m.selectionStart)+m.value.slice(m.selectionEnd);break;case"deleteContentForward":g=m.selectionEnd===m.selectionStart?m.value.slice(0,m.selectionStart)+m.value.slice(m.selectionEnd+1):m.value.slice(0,m.selectionStart)+m.value.slice(m.selectionEnd);break;case"deleteContentBackward":g=m.selectionEnd===m.selectionStart?m.value.slice(0,m.selectionStart-1)+m.value.slice(m.selectionStart):m.value.slice(0,m.selectionStart)+m.value.slice(m.selectionEnd);break;case"deleteSoftLineBackward":case"deleteHardLineBackward":g=m.value.slice(m.selectionStart);break;default:f.data!=null&&(g=m.value.slice(0,m.selectionStart)+f.data+m.value.slice(m.selectionEnd));break}(g==null||!e.validate(g))&&f.preventDefault()});T.useEffect(()=>{if(!fL()||!n.current)return;let f=n.current;return f.addEventListener("beforeinput",r,!1),()=>{f.removeEventListener("beforeinput",r,!1)}},[n,r]);let i=fL()?null:f=>{let m=f.target.value.slice(0,f.target.selectionStart)+f.data+f.target.value.slice(f.target.selectionEnd);e.validate(m)||f.preventDefault()},{labelProps:a,inputProps:s,descriptionProps:o,errorMessageProps:c,...u}=oT(t,n),h=T.useRef(null);return{inputProps:Et(s,{onBeforeInput:i,onCompositionStart(){let{value:f,selectionStart:m,selectionEnd:g}=n.current;h.current={value:f,selectionStart:m,selectionEnd:g}},onCompositionEnd(){if(n.current&&!e.validate(n.current.value)){let{value:f,selectionStart:m,selectionEnd:g}=h.current;n.current.value=f,n.current.setSelectionRange(m,g),e.setInputValue(f)}}}),labelProps:a,descriptionProps:o,errorMessageProps:c,...u}}function age(t){return t&&t.__esModule?t.default:t}function sge(t,e){let{buttonRef:n,popoverRef:r,inputRef:i,listBoxRef:a,keyboardDelegate:s,layoutDelegate:o,shouldFocusWrap:c,isReadOnly:u,isDisabled:h}=t,f=T.useRef(null);n=n??f;let m=Hu(age(Wz),"@react-aria/combobox"),{menuTriggerProps:g,menuProps:v}=fV({type:"listbox",isDisabled:h||u},e,n);nT.set(e,{id:v.id});let{collection:x}=e,{disabledKeys:_}=e.selectionManager,w=T.useMemo(()=>s||new iT({collection:x,disabledKeys:_,ref:a,layoutDelegate:o}),[s,o,x,_,a]),{collectionProps:S}=dI({selectionManager:e.selectionManager,keyboardDelegate:w,disallowTypeAhead:!0,disallowEmptySelection:!0,shouldFocusWrap:c,ref:i,isVirtualized:!0}),E=Z2(),A=me=>{if(!me.nativeEvent.isComposing)switch(me.key){case"Enter":case"Tab":if(e.isOpen&&me.key==="Enter"&&me.preventDefault(),e.isOpen&&a.current&&e.selectionManager.focusedKey!=null){let fe=e.collection.getItem(e.selectionManager.focusedKey);if(fe?.props.href){let ge=a.current.querySelector(`[data-key="${CSS.escape(e.selectionManager.focusedKey.toString())}"]`);me.key==="Enter"&&ge instanceof HTMLAnchorElement&&E.open(ge,me,fe.props.href,fe.props.routerOptions),e.close();break}else if(fe?.props.onAction){fe.props.onAction(),e.close();break}}e.commit();break;case"Escape":(e.selectedKey!==null||e.inputValue===""||t.allowsCustomValue)&&me.continuePropagation(),e.revert();break;case"ArrowDown":e.open("first","manual");break;case"ArrowUp":e.open("last","manual");break;case"ArrowLeft":case"ArrowRight":e.selectionManager.setFocusedKey(null);break}},N=me=>{var fe;let ge=n?.current&&n.current===me.relatedTarget,be=(fe=r.current)===null||fe===void 0?void 0:fe.contains(me.relatedTarget);ge||be||(t.onBlur&&t.onBlur(me),e.setFocused(!1))},P=me=>{e.isFocused||(t.onFocus&&t.onFocus(me),e.setFocused(!0))},{isInvalid:R,validationErrors:D,validationDetails:k}=e.displayValidation,{labelProps:L,inputProps:$,descriptionProps:B,errorMessageProps:q}=oT({...t,onChange:e.setInputValue,onKeyDown:u?t.onKeyDown:Gc(e.isOpen&&S.onKeyDown,A,t.onKeyDown),onBlur:N,value:e.inputValue,defaultValue:e.defaultInputValue,onFocus:P,autoComplete:"off",validate:void 0,[sg]:e},i),U=me=>{if(me.pointerType==="touch"){var fe;(fe=i.current)===null||fe===void 0||fe.focus(),e.toggle(null,"manual")}},J=me=>{if(me.pointerType!=="touch"){var fe;(fe=i.current)===null||fe===void 0||fe.focus(),e.toggle(me.pointerType==="keyboard"||me.pointerType==="virtual"?"first":null,"manual")}},O=Wd({id:g.id,"aria-label":m.format("buttonLabel"),"aria-labelledby":t["aria-labelledby"]||L.id}),z=Wd({id:v.id,"aria-label":m.format("listboxLabel"),"aria-labelledby":t["aria-labelledby"]||L.id}),V=T.useRef(0),H=me=>{if(h||u)return;if(me.timeStamp-V.current<500){var fe;me.preventDefault(),(fe=i.current)===null||fe===void 0||fe.focus();return}let ge=me.target.getBoundingClientRect(),be=me.changedTouches[0],oe=Math.ceil(ge.left+.5*ge.width),Le=Math.ceil(ge.top+.5*ge.height);if(be.clientX===oe&&be.clientY===Le){var Ve;me.preventDefault(),(Ve=i.current)===null||Ve===void 0||Ve.focus(),e.toggle(null,"manual"),V.current=me.timeStamp}},ee=e.selectionManager.focusedKey!=null&&e.isOpen?e.collection.getItem(e.selectionManager.focusedKey):void 0;var Y;let Z=(Y=ee?.parentKey)!==null&&Y!==void 0?Y:null;var K;let X=(K=e.selectionManager.focusedKey)!==null&&K!==void 0?K:null,ne=T.useRef(Z),G=T.useRef(X);T.useEffect(()=>{if(c3()&&ee!=null&&X!=null&&X!==G.current){let fe=e.selectionManager.isSelected(X),ge=Z!=null?e.collection.getItem(Z):null,be=ge?.["aria-label"]||(typeof ge?.rendered=="string"?ge.rendered:"")||"";var me;let oe=m.format("focusAnnouncement",{isGroupChange:(me=ge&&Z!==ne.current)!==null&&me!==void 0?me:!1,groupTitle:be,groupCount:ge?[...aT(ge,e.collection)].length:0,optionText:ee["aria-label"]||ee.textValue||"",isSelected:fe});Xv(oe)}ne.current=Z,G.current=X});let te=PU(e.collection),ae=T.useRef(te),pe=T.useRef(e.isOpen);T.useEffect(()=>{let me=e.isOpen!==pe.current&&(e.selectionManager.focusedKey==null||c3());if(e.isOpen&&(me||te!==ae.current)){let fe=m.format("countAnnouncement",{optionCount:te});Xv(fe)}ae.current=te,pe.current=e.isOpen});let ye=T.useRef(e.selectedKey);return T.useEffect(()=>{if(c3()&&e.isFocused&&e.selectedItem&&e.selectedKey!==ye.current){let me=e.selectedItem["aria-label"]||e.selectedItem.textValue||"",fe=m.format("selectedAnnouncement",{optionText:me});Xv(fe)}ye.current=e.selectedKey}),T.useEffect(()=>{if(e.isOpen)return cI([i.current,r.current].filter(me=>me!=null))},[e.isOpen,i,r]),Xfe(()=>{!ee&&i.current&&xa(gr(i.current))===i.current&&lI(i.current,null)},[ee]),zv(a,"react-aria-item-action",e.isOpen?()=>{e.close()}:void 0),{labelProps:L,buttonProps:{...g,...O,excludeFromTabOrder:!0,preventFocusOnPress:!0,onPress:U,onPressStart:J,isDisabled:h||u},inputProps:Et($,{role:"combobox","aria-expanded":g["aria-expanded"],"aria-controls":e.isOpen?v.id:void 0,"aria-autocomplete":"list","aria-activedescendant":ee?CU(e,ee.key):void 0,onTouchEnd:H,autoCorrect:"off",spellCheck:"false"}),listBoxProps:Et(v,z,{autoFocus:e.focusStrategy||!0,shouldUseVirtualFocus:!0,shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,linkBehavior:"selection",UNSTABLE_itemBehavior:"action"}),descriptionProps:B,errorMessageProps:q,isInvalid:R,validationErrors:D,validationDetails:k}}var mV={};mV={"Clear search":" "};var gV={};gV={"Clear search":"  "};var vV={};vV={"Clear search":"Vymazat hledn"};var yV={};yV={"Clear search":"Ryd sgning"};var bV={};bV={"Clear search":"Suche zurcksetzen"};var xV={};xV={"Clear search":" "};var _V={};_V={"Clear search":"Clear search"};var wV={};wV={"Clear search":"Borrar bsqueda"};var SV={};SV={"Clear search":"Thjenda otsing"};var EV={};EV={"Clear search":"Tyhjenn haku"};var CV={};CV={"Clear search":"Effacer la recherche"};var TV={};TV={"Clear search":" "};var MV={};MV={"Clear search":"Obrii pretragu"};var AV={};AV={"Clear search":"Keress trlse"};var PV={};PV={"Clear search":"Cancella ricerca"};var NV={};NV={"Clear search":""};var DV={};DV={"Clear search":" "};var kV={};kV={"Clear search":"Ivalyti iek"};var RV={};RV={"Clear search":"Notrt meklanu"};var IV={};IV={"Clear search":"Tm sk"};var $V={};$V={"Clear search":"Zoekactie wissen"};var jV={};jV={"Clear search":"Wyczy zawarto wyszukiwania"};var LV={};LV={"Clear search":"Limpar pesquisa"};var OV={};OV={"Clear search":"Limpar pesquisa"};var FV={};FV={"Clear search":"tergei cutarea"};var BV={};BV={"Clear search":" "};var zV={};zV={"Clear search":"Vymaza vyhadvanie"};var UV={};UV={"Clear search":"Poisti iskanje"};var VV={};VV={"Clear search":"Obrii pretragu"};var HV={};HV={"Clear search":"Rensa skning"};var GV={};GV={"Clear search":"Aramay temizle"};var WV={};WV={"Clear search":" "};var qV={};qV={"Clear search":""};var KV={};KV={"Clear search":""};var XV={};XV={"ar-AE":mV,"bg-BG":gV,"cs-CZ":vV,"da-DK":yV,"de-DE":bV,"el-GR":xV,"en-US":_V,"es-ES":wV,"et-EE":SV,"fi-FI":EV,"fr-FR":CV,"he-IL":TV,"hr-HR":MV,"hu-HU":AV,"it-IT":PV,"ja-JP":NV,"ko-KR":DV,"lt-LT":kV,"lv-LV":RV,"nb-NO":IV,"nl-NL":$V,"pl-PL":jV,"pt-BR":LV,"pt-PT":OV,"ro-RO":FV,"ru-RU":BV,"sk-SK":zV,"sl-SI":UV,"sr-SP":VV,"sv-SE":HV,"tr-TR":GV,"uk-UA":WV,"zh-CN":qV,"zh-TW":KV};function oge(t){return t&&t.__esModule?t.default:t}function lge(t,e,n){let r=Hu(oge(XV),"@react-aria/searchfield"),{isDisabled:i,isReadOnly:a,onSubmit:s,onClear:o,type:c="search"}=t,u=w=>{const S=w.key;S==="Enter"&&(i||a)&&w.preventDefault(),!(i||a)&&(S==="Enter"&&s&&(w.preventDefault(),s(e.value)),S==="Escape"&&(e.value===""&&(!n.current||n.current.value==="")?w.continuePropagation():(w.preventDefault(),e.setValue(""),o&&o())))},h=()=>{e.setValue(""),o&&o()},f=()=>{var w;(w=n.current)===null||w===void 0||w.focus()},{labelProps:m,inputProps:g,descriptionProps:v,errorMessageProps:x,..._}=oT({...t,value:e.value,onChange:e.setValue,onKeyDown:a?t.onKeyDown:Gc(u,t.onKeyDown),type:c},n);return{labelProps:m,inputProps:{...g,defaultValue:void 0},clearButtonProps:{"aria-label":r.format("Clear search"),excludeFromTabOrder:!0,preventFocusOnPress:!0,isDisabled:i||a,onPress:h,onPressStart:f},descriptionProps:v,errorMessageProps:x,..._}}class Eg{get childNodes(){throw new Error("childNodes is not supported")}clone(){let e=new this.constructor(this.key);return e.value=this.value,e.level=this.level,e.hasChildNodes=this.hasChildNodes,e.rendered=this.rendered,e.textValue=this.textValue,e["aria-label"]=this["aria-label"],e.index=this.index,e.parentKey=this.parentKey,e.prevKey=this.prevKey,e.nextKey=this.nextKey,e.firstChildKey=this.firstChildKey,e.lastChildKey=this.lastChildKey,e.props=this.props,e.render=this.render,e.colSpan=this.colSpan,e.colIndex=this.colIndex,e}filter(e,n,r){let i=this.clone();return n.addDescendants(i,e),i}constructor(e){this.value=null,this.level=0,this.hasChildNodes=!1,this.rendered=null,this.textValue="",this["aria-label"]=void 0,this.index=0,this.parentKey=null,this.prevKey=null,this.nextKey=null,this.firstChildKey=null,this.lastChildKey=null,this.props={},this.colSpan=null,this.colIndex=null,this.type=this.constructor.type,this.key=e}}class YV extends Eg{filter(e,n,r){let[i,a]=QV(e,n,this.firstChildKey,r),s=this.clone();return s.firstChildKey=i,s.lastChildKey=a,s}}class cge extends Eg{}cge.type="header";class ZV extends Eg{}ZV.type="loader";class JV extends YV{filter(e,n,r){if(r(this.textValue,this)){let i=this.clone();return n.addDescendants(i,e),i}return null}}JV.type="item";class uge extends YV{filter(e,n,r){let i=super.filter(e,n,r);if(i&&i.lastChildKey!==null){let a=e.getItem(i.lastChildKey);if(a&&a.type!=="header")return i}return null}}uge.type="section";class dge{get size(){return this.itemCount}getKeys(){return this.keyMap.keys()}*[Symbol.iterator](){let e=this.firstKey!=null?this.keyMap.get(this.firstKey):void 0;for(;e;)yield e,e=e.nextKey!=null?this.keyMap.get(e.nextKey):void 0}getChildren(e){let n=this.keyMap;return{*[Symbol.iterator](){let r=n.get(e),i=r?.firstChildKey!=null?n.get(r.firstChildKey):null;for(;i;)yield i,i=i.nextKey!=null?n.get(i.nextKey):void 0}}}getKeyBefore(e){let n=this.keyMap.get(e);if(!n)return null;if(n.prevKey!=null){for(n=this.keyMap.get(n.prevKey);n&&n.type!=="item"&&n.lastChildKey!=null;)n=this.keyMap.get(n.lastChildKey);var r;return(r=n?.key)!==null&&r!==void 0?r:null}return n.parentKey}getKeyAfter(e){let n=this.keyMap.get(e);if(!n)return null;if(n.type!=="item"&&n.firstChildKey!=null)return n.firstChildKey;for(;n;){if(n.nextKey!=null)return n.nextKey;if(n.parentKey!=null)n=this.keyMap.get(n.parentKey);else return null}return null}getFirstKey(){return this.firstKey}getLastKey(){let e=this.lastKey!=null?this.keyMap.get(this.lastKey):null;for(;e?.lastChildKey!=null;)e=this.keyMap.get(e.lastChildKey);var n;return(n=e?.key)!==null&&n!==void 0?n:null}getItem(e){var n;return(n=this.keyMap.get(e))!==null&&n!==void 0?n:null}at(){throw new Error("Not implemented")}clone(){let e=this.constructor,n=new e;return n.keyMap=new Map(this.keyMap),n.firstKey=this.firstKey,n.lastKey=this.lastKey,n.itemCount=this.itemCount,n}addNode(e){if(this.frozen)throw new Error("Cannot add a node to a frozen collection");e.type==="item"&&this.keyMap.get(e.key)==null&&this.itemCount++,this.keyMap.set(e.key,e)}addDescendants(e,n){this.addNode(e);let r=n.getChildren(e.key);for(let i of r)this.addDescendants(i,n)}removeNode(e){if(this.frozen)throw new Error("Cannot remove a node to a frozen collection");let n=this.keyMap.get(e);n!=null&&n.type==="item"&&this.itemCount--,this.keyMap.delete(e)}commit(e,n,r=!1){if(this.frozen)throw new Error("Cannot commit a frozen collection");this.firstKey=e,this.lastKey=n,this.frozen=!r}filter(e){let n=new this.constructor,[r,i]=QV(this,n,this.firstKey,e);return n?.commit(r,i),n}constructor(){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.frozen=!1,this.itemCount=0}}function QV(t,e,n,r){if(n==null)return[null,null];let i=null,a=null,s=t.getItem(n);for(;s!=null;){let u=s.filter(t,e,r);u!=null&&(u.nextKey=null,a&&(u.prevKey=a.key,a.nextKey=u.key),i==null&&(i=u),e.addNode(u),a=u),s=s.nextKey?t.getItem(s.nextKey):null}if(a&&a.type==="separator"){let u=a.prevKey;e.removeNode(a.key),u?(a=e.getItem(u),a.nextKey=null):a=null}var o,c;return[(o=i?.key)!==null&&o!==void 0?o:null,(c=a?.key)!==null&&c!==void 0?c:null]}class eH{*[Symbol.iterator](){let e=this.firstChild;for(;e;)yield e,e=e.nextSibling}get firstChild(){return this._firstChild}set firstChild(e){this._firstChild=e,this.ownerDocument.markDirty(this)}get lastChild(){return this._lastChild}set lastChild(e){this._lastChild=e,this.ownerDocument.markDirty(this)}get previousSibling(){return this._previousSibling}set previousSibling(e){this._previousSibling=e,this.ownerDocument.markDirty(this)}get nextSibling(){return this._nextSibling}set nextSibling(e){this._nextSibling=e,this.ownerDocument.markDirty(this)}get parentNode(){return this._parentNode}set parentNode(e){this._parentNode=e,this.ownerDocument.markDirty(this)}get isConnected(){var e;return((e=this.parentNode)===null||e===void 0?void 0:e.isConnected)||!1}invalidateChildIndices(e){(this._minInvalidChildIndex==null||!this._minInvalidChildIndex.isConnected||e.index<this._minInvalidChildIndex.index)&&(this._minInvalidChildIndex=e,this.ownerDocument.markDirty(this))}updateChildIndices(){let e=this._minInvalidChildIndex;for(;e;)e.index=e.previousSibling?e.previousSibling.index+1:0,e=e.nextSibling;this._minInvalidChildIndex=null}appendChild(e){e.parentNode&&e.parentNode.removeChild(e),this.firstChild==null&&(this.firstChild=e),this.lastChild?(this.lastChild.nextSibling=e,e.index=this.lastChild.index+1,e.previousSibling=this.lastChild):(e.previousSibling=null,e.index=0),e.parentNode=this,e.nextSibling=null,this.lastChild=e,this.ownerDocument.markDirty(this),this.isConnected&&this.ownerDocument.queueUpdate()}insertBefore(e,n){if(n==null)return this.appendChild(e);e.parentNode&&e.parentNode.removeChild(e),e.nextSibling=n,e.previousSibling=n.previousSibling,e.index=n.index-1,this.firstChild===n?this.firstChild=e:n.previousSibling&&(n.previousSibling.nextSibling=e),n.previousSibling=e,e.parentNode=n.parentNode,this.invalidateChildIndices(e),this.isConnected&&this.ownerDocument.queueUpdate()}removeChild(e){e.parentNode===this&&(this._minInvalidChildIndex===e&&(this._minInvalidChildIndex=null),e.nextSibling&&(this.invalidateChildIndices(e.nextSibling),e.nextSibling.previousSibling=e.previousSibling),e.previousSibling&&(e.previousSibling.nextSibling=e.nextSibling),this.firstChild===e&&(this.firstChild=e.nextSibling),this.lastChild===e&&(this.lastChild=e.previousSibling),e.parentNode=null,e.nextSibling=null,e.previousSibling=null,e.index=0,this.ownerDocument.markDirty(e),this.isConnected&&this.ownerDocument.queueUpdate())}addEventListener(){}removeEventListener(){}get previousVisibleSibling(){let e=this.previousSibling;for(;e&&e.isHidden;)e=e.previousSibling;return e}get nextVisibleSibling(){let e=this.nextSibling;for(;e&&e.isHidden;)e=e.nextSibling;return e}get firstVisibleChild(){let e=this.firstChild;for(;e&&e.isHidden;)e=e.nextSibling;return e}get lastVisibleChild(){let e=this.lastChild;for(;e&&e.isHidden;)e=e.previousSibling;return e}constructor(e){this._firstChild=null,this._lastChild=null,this._previousSibling=null,this._nextSibling=null,this._parentNode=null,this._minInvalidChildIndex=null,this.ownerDocument=e}}class Jv extends eH{get index(){return this._index}set index(e){this._index=e,this.ownerDocument.markDirty(this)}get level(){var e;return this.parentNode instanceof Jv?this.parentNode.level+(((e=this.node)===null||e===void 0?void 0:e.type)==="item"?1:0):0}getMutableNode(){return this.node==null?null:(this.isMutated||(this.node=this.node.clone(),this.isMutated=!0),this.ownerDocument.markDirty(this),this.node)}updateNode(){var e,n,r,i,a,s,o,c;let u=this.nextVisibleSibling,h=this.getMutableNode();if(h!=null){h.index=this.index,h.level=this.level;var f;h.parentKey=this.parentNode instanceof Jv&&(f=(e=this.parentNode.node)===null||e===void 0?void 0:e.key)!==null&&f!==void 0?f:null;var m;h.prevKey=(m=(r=this.previousVisibleSibling)===null||r===void 0||(n=r.node)===null||n===void 0?void 0:n.key)!==null&&m!==void 0?m:null;var g;h.nextKey=(g=u==null||(i=u.node)===null||i===void 0?void 0:i.key)!==null&&g!==void 0?g:null,h.hasChildNodes=!!this.firstChild;var v;h.firstChildKey=(v=(s=this.firstVisibleChild)===null||s===void 0||(a=s.node)===null||a===void 0?void 0:a.key)!==null&&v!==void 0?v:null;var x;if(h.lastChildKey=(x=(c=this.lastVisibleChild)===null||c===void 0||(o=c.node)===null||o===void 0?void 0:o.key)!==null&&x!==void 0?x:null,(h.colSpan!=null||h.colIndex!=null)&&u){var _,w;let S=((_=h.colIndex)!==null&&_!==void 0?_:h.index)+((w=h.colSpan)!==null&&w!==void 0?w:1);if(u.node!=null&&S!==u.node.colIndex){let E=u.getMutableNode();E.colIndex=S}}}}setProps(e,n,r,i,a){let s,{value:o,textValue:c,id:u,...h}=e;if(this.node==null?(s=new r(u??`react-aria-${++this.ownerDocument.nodeId}`),this.node=s):s=this.getMutableNode(),h.ref=n,s.props=h,s.rendered=i,s.render=a,s.value=o,s.textValue=c||(typeof h.children=="string"?h.children:"")||e["aria-label"]||"",u!=null&&u!==s.key)throw new Error("Cannot change the id of an item");h.colSpan!=null&&(s.colSpan=h.colSpan),this.isConnected&&this.ownerDocument.queueUpdate()}get style(){let e=this;return{get display(){return e.isHidden?"none":""},set display(n){let r=n==="none";if(e.isHidden!==r){var i,a;(((i=e.parentNode)===null||i===void 0?void 0:i.firstVisibleChild)===e||((a=e.parentNode)===null||a===void 0?void 0:a.lastVisibleChild)===e)&&e.ownerDocument.markDirty(e.parentNode);let s=e.previousVisibleSibling,o=e.nextVisibleSibling;s&&e.ownerDocument.markDirty(s),o&&e.ownerDocument.markDirty(o),e.isHidden=r,e.ownerDocument.markDirty(e)}}}}hasAttribute(){}setAttribute(){}setAttributeNS(){}removeAttribute(){}constructor(e,n){super(n),this.nodeType=8,this.isMutated=!0,this._index=0,this.isHidden=!1,this.node=null}}class hge extends eH{get isConnected(){return!0}createElement(e){return new Jv(e,this)}getMutableCollection(){return this.nextCollection||(this.nextCollection=this.collection.clone()),this.nextCollection}markDirty(e){this.dirtyNodes.add(e)}addNode(e){if(e.isHidden||e.node==null)return;let n=this.getMutableCollection();if(!n.getItem(e.node.key))for(let r of e)this.addNode(r);n.addNode(e.node)}removeNode(e){for(let n of e)this.removeNode(n);e.node&&this.getMutableCollection().removeNode(e.node.key)}getCollection(){return this.inSubscription?this.collection.clone():(this.queuedRender=!1,this.updateCollection(),this.collection)}updateCollection(){for(let o of this.dirtyNodes)o instanceof Jv&&(!o.isConnected||o.isHidden)?this.removeNode(o):o.updateChildIndices();for(let o of this.dirtyNodes)o instanceof Jv?(o.isConnected&&!o.isHidden&&(o.updateNode(),this.addNode(o)),o.node&&this.dirtyNodes.delete(o),o.isMutated=!1):this.dirtyNodes.delete(o);if(this.nextCollection){var e,n,r,i,a,s;this.nextCollection.commit((a=(n=this.firstVisibleChild)===null||n===void 0||(e=n.node)===null||e===void 0?void 0:e.key)!==null&&a!==void 0?a:null,(s=(i=this.lastVisibleChild)===null||i===void 0||(r=i.node)===null||r===void 0?void 0:r.key)!==null&&s!==void 0?s:null,this.isSSR),this.isSSR||(this.collection=this.nextCollection,this.nextCollection=null)}}queueUpdate(){if(!(this.dirtyNodes.size===0||this.queuedRender)){this.queuedRender=!0,this.inSubscription=!0;for(let e of this.subscriptions)e();this.inSubscription=!1}}subscribe(e){return this.subscriptions.add(e),()=>this.subscriptions.delete(e)}resetAfterSSR(){this.isSSR&&(this.isSSR=!1,this.firstChild=null,this.lastChild=null,this.nodeId=0)}constructor(e){super(null),this.nodeType=11,this.ownerDocument=this,this.dirtyNodes=new Set,this.isSSR=!1,this.nodeId=0,this.nodesByProps=new WeakMap,this.nextCollection=null,this.subscriptions=new Set,this.queuedRender=!1,this.inSubscription=!1,this.collection=e,this.nextCollection=e}}function tH(t){let{children:e,items:n,idScope:r,addIdAndValue:i,dependencies:a=[]}=t,s=T.useMemo(()=>new WeakMap,a);return T.useMemo(()=>{if(n&&typeof e=="function"){let u=[];for(let h of n){let f=s.get(h);if(!f){f=e(h);var o,c;let m=(c=(o=f.props.id)!==null&&o!==void 0?o:h.key)!==null&&c!==void 0?c:h.id;if(m==null)throw new Error("Could not determine key for item");r&&(m=r+":"+m),f=T.cloneElement(f,i?{key:m,id:m,value:h}:{key:m}),s.set(h,f)}u.push(f)}return u}else if(typeof e!="function")return e},[e,n,s,r,i])}if(typeof HTMLTemplateElement<"u"){const t=Object.getOwnPropertyDescriptor(Node.prototype,"firstChild").get;Object.defineProperty(HTMLTemplateElement.prototype,"firstChild",{configurable:!0,enumerable:!0,get:function(){return this.dataset.reactAriaHidden?this.content.firstChild:t.call(this)}})}const W3=T.createContext(!1);function fge(t){if(T.useContext(W3))return ve.createElement(ve.Fragment,null,t.children);let n=ve.createElement(W3.Provider,{value:!0},t.children);return ve.createElement("template",{"data-react-aria-hidden":!0},n)}function Cg(t){let e=(n,r)=>T.useContext(W3)?null:t(n,r);return e.displayName=t.displayName||t.name,T.forwardRef(e)}function pge(){return T.useContext(W3)}var tA={exports:{}},nA={};var pL;function mge(){if(pL)return nA;pL=1;var t=O_();function e(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(f,m){var g=m(),v=r({inst:{value:g,getSnapshot:m}}),x=v[0].inst,_=v[1];return a(function(){x.value=g,x.getSnapshot=m,c(x)&&_({inst:x})},[f,g,m]),i(function(){return c(x)&&_({inst:x}),f(function(){c(x)&&_({inst:x})})},[f]),s(g),g}function c(f){var m=f.getSnapshot;f=f.value;try{var g=m();return!n(f,g)}catch{return!0}}function u(f,m){return m()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return nA.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,nA}var mL;function nH(){return mL||(mL=1,tA.exports=mge()),tA.exports}var gge=nH();const rH=T.createContext(!1),g_=T.createContext(null);function lT(t){if(T.useContext(g_))return t.content;let{collection:n,document:r}=xge(t.createCollection);return ve.createElement(ve.Fragment,null,ve.createElement(fge,null,ve.createElement(g_.Provider,{value:r},t.content)),ve.createElement(vge,{render:t.children,collection:n}))}function vge({collection:t,render:e}){return e(t)}function yge(t,e,n){let r=wg(),i=T.useRef(r);i.current=r;let a=T.useCallback(()=>i.current?n():e(),[e,n]);return gge.useSyncExternalStore(t,a)}const bge=typeof ve.useSyncExternalStore=="function"?ve.useSyncExternalStore:yge;function xge(t){let[e]=T.useState(()=>new hge(t?.()||new dge)),n=T.useCallback(s=>e.subscribe(s),[e]),r=T.useCallback(()=>{let s=e.getCollection();return e.isSSR&&e.resetAfterSSR(),s},[e]),i=T.useCallback(()=>(e.isSSR=!0,e.getCollection()),[e]);return{collection:bge(n,r,i),document:e}}const ID=T.createContext(null);function _ge(t){var e;return e=class extends Eg{},e.type=t,e}function wge(t,e,n,r,i,a){typeof t=="string"&&(t=_ge(t));let s=T.useCallback(c=>{c?.setProps(e,n,t,r,a)},[e,n,r,a,t]),o=T.useContext(ID);if(o){let c=o.ownerDocument.nodesByProps.get(e);return c||(c=o.ownerDocument.createElement(t.type),c.setProps(e,n,t,r,a),o.appendChild(c),o.ownerDocument.updateCollection(),o.ownerDocument.nodesByProps.set(e,c)),i?ve.createElement(ID.Provider,{value:c},i):null}return ve.createElement(t.type,{ref:s},i)}function hI(t,e){let n=({node:i})=>e(i.props,i.props.ref,i),r=T.forwardRef((i,a)=>{let s=T.useContext(CD);if(!T.useContext(rH)){if(e.length>=3)throw new Error(e.name+" cannot be rendered outside a collection.");return e(i,a)}return wge(t,i,a,"children"in i?i.children:null,null,c=>ve.createElement(CD.Provider,{value:s},ve.createElement(n,{node:c})))});return r.displayName=e.name,r}function Sge(t){return tH({...t,addIdAndValue:!0})}const gL=T.createContext(null);function iH(t){let e=T.useContext(gL),n=(e?.dependencies||[]).concat(t.dependencies),r=t.idScope||e?.idScope,i=Sge({...t,idScope:r,dependencies:n});return T.useContext(g_)&&(i=ve.createElement(Ege,null,i)),e=T.useMemo(()=>({dependencies:n,idScope:r}),[r,...n]),ve.createElement(gL.Provider,{value:e},i)}function Ege({children:t}){let e=T.useContext(g_),n=T.useMemo(()=>ve.createElement(g_.Provider,{value:null},ve.createElement(rH.Provider,{value:!0},t)),[t]);return wg()?ve.createElement(ID.Provider,{value:e},n):Zm.createPortal(n,e)}const Cge=T.createContext(null),aH={CollectionRoot({collection:t,renderDropIndicator:e}){return vL(t,null,e)},CollectionBranch({collection:t,parent:e,renderDropIndicator:n}){return vL(t,e,n)}};function vL(t,e,n){return tH({items:e?t.getChildren(e.key):t,dependencies:[n],children(r){let i=r.render(r);return!n||r.type!=="item"?i:ve.createElement(ve.Fragment,null,n({type:"item",key:r.key,dropPosition:"before"}),i,Tge(t,r,n))}})}function Tge(t,e,n){let r=e.key,i=t.getKeyAfter(r),a=i!=null?t.getItem(i):null;for(;a!=null&&a.type!=="item";)i=t.getKeyAfter(a.key),a=i!=null?t.getItem(i):null;let s=e.nextKey!=null?t.getItem(e.nextKey):null;for(;s!=null&&s.type!=="item";)s=s.nextKey!=null?t.getItem(s.nextKey):null;let o=[];if(s==null){let c=e;for(;c&&(!a||c.parentKey!==a.parentKey&&a.level<c.level);){let u=n({type:"item",key:c.key,dropPosition:"after"});T.isValidElement(u)&&o.push(T.cloneElement(u,{key:`${c.key}-after`})),c=c.parentKey!=null?t.getItem(c.parentKey):null}}return o}const tw=T.createContext(aH);function Mge(t){return T.useMemo(()=>t!=null?new Set([t]):null,[t])}function sH(t,e){let{elementType:n="button",isDisabled:r,onPress:i,onPressStart:a,onPressEnd:s,onPressUp:o,onPressChange:c,preventFocusOnPress:u,allowFocusWhenDisabled:h,onClick:f,href:m,target:g,rel:v,type:x="button"}=t,_;n==="button"?_={type:x,disabled:r,form:t.form,formAction:t.formAction,formEncType:t.formEncType,formMethod:t.formMethod,formNoValidate:t.formNoValidate,formTarget:t.formTarget,name:t.name,value:t.value}:_={role:"button",href:n==="a"&&!r?m:void 0,target:n==="a"?g:void 0,type:n==="input"?x:void 0,disabled:n==="input"?r:void 0,"aria-disabled":!r||n==="input"?void 0:r,rel:n==="a"?v:void 0};let{pressProps:w,isPressed:S}=Vf({onPressStart:a,onPressEnd:s,onPressChange:c,onPress:i,onPressUp:o,onClick:f,isDisabled:r,preventFocusOnPress:u,ref:e}),{focusableProps:E}=zy(t,e);h&&(E.tabIndex=r?-1:E.tabIndex);let A=Et(E,w,gn(t,{labelable:!0}));return{isPressed:S,buttonProps:Et(_,A,{"aria-haspopup":t["aria-haspopup"],"aria-expanded":t["aria-expanded"],"aria-controls":t["aria-controls"],"aria-pressed":t["aria-pressed"],"aria-current":t["aria-current"],"aria-disabled":t["aria-disabled"]})}}function oH(t,e,n){const{isSelected:r}=e,{isPressed:i,buttonProps:a}=sH({...t,onPress:Gc(e.toggle,t.onPress)},n);return{isPressed:i,isSelected:r,isDisabled:t.isDisabled||!1,buttonProps:Et(a,{"aria-pressed":r})}}function Age(t,e){const{"aria-label":n,"aria-labelledby":r,orientation:i="horizontal"}=t;let[a,s]=T.useState(!1);mr(()=>{var v;s(!!(e.current&&(!((v=e.current.parentElement)===null||v===void 0)&&v.closest('[role="toolbar"]'))))});const{direction:o}=Qi(),c=o==="rtl"&&i==="horizontal";let u=Cme(e);const h=v=>{if(v.currentTarget.contains(v.target)){if(i==="horizontal"&&v.key==="ArrowRight"||i==="vertical"&&v.key==="ArrowDown")c?u.focusPrevious():u.focusNext();else if(i==="horizontal"&&v.key==="ArrowLeft"||i==="vertical"&&v.key==="ArrowUp")c?u.focusNext():u.focusPrevious();else if(v.key==="Tab"){v.stopPropagation(),f.current=document.activeElement,v.shiftKey?u.focusFirst():u.focusLast();return}else return;v.stopPropagation(),v.preventDefault()}},f=T.useRef(null),m=v=>{!v.currentTarget.contains(v.relatedTarget)&&!f.current&&(f.current=v.target)},g=v=>{var x;if(f.current&&!v.currentTarget.contains(v.relatedTarget)&&(!((x=e.current)===null||x===void 0)&&x.contains(v.target))){var _;(_=f.current)===null||_===void 0||_.focus(),f.current=null}};return{toolbarProps:{...gn(t,{labelable:!0}),role:a?"group":"toolbar","aria-orientation":i,"aria-label":n,"aria-labelledby":n==null?r:void 0,onKeyDownCapture:a?void 0:h,onFocusCapture:a?void 0:g,onBlurCapture:a?void 0:m}}}function Pge(t,e,n){let{isDisabled:r}=t,{toolbarProps:i}=Age(t,n);return{groupProps:{...i,role:e.selectionMode==="single"?"radiogroup":i.role,"aria-disabled":r}}}function Nge(t,e,n){let r={isSelected:e.selectedKeys.has(t.id),defaultSelected:!1,setSelected(c){e.setSelected(t.id,c)},toggle(){e.toggleKey(t.id)}},{isPressed:i,isSelected:a,isDisabled:s,buttonProps:o}=oH({...t,id:void 0,isDisabled:t.isDisabled||e.isDisabled},r,n);return e.selectionMode==="single"&&(o.role="radio",o["aria-checked"]=r.isSelected,delete o["aria-pressed"]),{isPressed:i,isSelected:a,isDisabled:s,buttonProps:o}}function lH(t,e,n){let{isDisabled:r=!1,isReadOnly:i=!1,value:a,name:s,form:o,children:c,"aria-label":u,"aria-labelledby":h,validationState:f="valid",isInvalid:m,onPressStart:g,onPressEnd:v,onPressChange:x,onPress:_,onPressUp:w,onClick:S}=t,E=$=>{$.stopPropagation(),e.setSelected($.target.checked)},{pressProps:A,isPressed:N}=Vf({onPressStart:g,onPressEnd:v,onPressChange:x,onPress:_,onPressUp:w,onClick:S,isDisabled:r}),{pressProps:P,isPressed:R}=Vf({onPressStart:g,onPressEnd:v,onPressChange:x,onPressUp:w,onClick:S,onPress($){var B;_?.($),e.toggle(),(B=n.current)===null||B===void 0||B.focus()},isDisabled:r||i}),{focusableProps:D}=zy(t,n),k=Et(A,D),L=gn(t,{labelable:!0});return qf(n,e.defaultSelected,e.setSelected),{labelProps:Et(P,{onClick:$=>$.preventDefault()}),inputProps:Et(L,{"aria-invalid":m||f==="invalid"||void 0,"aria-errormessage":t["aria-errormessage"],"aria-controls":t["aria-controls"],"aria-readonly":i||void 0,onChange:E,disabled:r,...a==null?{}:{value:a},name:s,form:o,type:"checkbox",...k}),isSelected:e.isSelected,isPressed:N||R,isDisabled:r,isReadOnly:i,isInvalid:m||f==="invalid"}}function cH(t,e,n){let r=Xf({...t,value:e.isSelected}),{isInvalid:i,validationErrors:a,validationDetails:s}=r.displayValidation,{labelProps:o,inputProps:c,isSelected:u,isPressed:h,isDisabled:f,isReadOnly:m}=lH({...t,isInvalid:i},e,n);sT(t,r,n);let{isIndeterminate:g,isRequired:v,validationBehavior:x="aria"}=t;T.useEffect(()=>{n.current&&(n.current.indeterminate=!!g)});let{pressProps:_}=Vf({isDisabled:f||m,onPress(){let{[sg]:w}=t,{commitValidation:S}=w||r;S()}});return{labelProps:Et(o,_,T.useMemo(()=>({onMouseDown:w=>w.preventDefault()}),[])),inputProps:{...c,checked:u,"aria-required":v&&x==="aria"||void 0,required:v&&x==="native"},isSelected:u,isPressed:h,isDisabled:f,isReadOnly:m,isInvalid:i,validationErrors:a,validationDetails:s}}const Dge=new WeakMap;function cT(t={}){let{isReadOnly:e}=t,[n,r]=Xa(t.isSelected,t.defaultSelected||!1,t.onChange),[i]=T.useState(n);function a(c){e||r(c)}function s(){e||r(!n)}var o;return{isSelected:n,defaultSelected:(o=t.defaultSelected)!==null&&o!==void 0?o:i,setSelected:a,toggle:s}}function kge(t){let{selectionMode:e="single",disallowEmptySelection:n,isDisabled:r=!1}=t,[i,a]=Xa(T.useMemo(()=>t.selectedKeys?new Set(t.selectedKeys):void 0,[t.selectedKeys]),T.useMemo(()=>t.defaultSelectedKeys?new Set(t.defaultSelectedKeys):new Set,[t.defaultSelectedKeys]),t.onSelectionChange);return{selectionMode:e,isDisabled:r,selectedKeys:i,setSelectedKeys:a,toggleKey(s){let o;e==="multiple"?(o=new Set(i),o.has(s)&&(!n||o.size>1)?o.delete(s):o.add(s)):o=new Set(i.has(s)&&!n?[]:[s]),a(o)},setSelected(s,o){o!==i.has(s)&&this.toggleKey(s)}}}function Rge(t,e,n){const r=cT({isReadOnly:t.isReadOnly||e.isReadOnly,isSelected:e.isSelected(t.value),defaultSelected:e.defaultValue.includes(t.value),onChange(w){w?e.addValue(t.value):e.removeValue(t.value),t.onChange&&t.onChange(w)}});let{name:i,form:a,descriptionId:s,errorMessageId:o,validationBehavior:c}=Dge.get(e);var u;c=(u=t.validationBehavior)!==null&&u!==void 0?u:c;let{realtimeValidation:h}=Xf({...t,value:r.isSelected,name:void 0,validationBehavior:"aria"}),f=T.useRef(Rv),m=()=>{e.setInvalid(t.value,h.isInvalid?h:f.current)};T.useEffect(m);let g=e.realtimeValidation.isInvalid?e.realtimeValidation:h,v=c==="native"?e.displayValidation:g;var x;let _=cH({...t,isReadOnly:t.isReadOnly||e.isReadOnly,isDisabled:t.isDisabled||e.isDisabled,name:t.name||i,form:t.form||a,isRequired:(x=t.isRequired)!==null&&x!==void 0?x:e.isRequired,validationBehavior:c,[sg]:{realtimeValidation:g,displayValidation:v,resetValidation:e.resetValidation,commitValidation:e.commitValidation,updateValidation(w){f.current=w,m()}}},r,n);return{..._,inputProps:{..._.inputProps,"aria-describedby":[t["aria-describedby"],e.isInvalid?o:null,s].filter(Boolean).join(" ")||void 0}}}var uH={};uH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"  ",colorSwatch:" ",transparent:"",twoDimensionalSlider:" 2D"};var dH={};dH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"    ",colorSwatch:" ",transparent:"",twoDimensionalSlider:"2D "};var hH={};hH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Vbr barvy",colorSwatch:"barevn vzorek",transparent:"prhledn",twoDimensionalSlider:"2D posuvnk"};var fH={};fH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Farvevlger",colorSwatch:"farveprve",transparent:"gennemsigtig",twoDimensionalSlider:"2D-skyder"};var pH={};pH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Farbwhler",colorSwatch:"Farbfeld",transparent:"transparent",twoDimensionalSlider:"2D-Schieberegler"};var mH={};mH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:" ",colorSwatch:" ",transparent:"",twoDimensionalSlider:" 2D"};var gH={};gH={colorPicker:"Color picker",twoDimensionalSlider:"2D slider",colorNameAndValue:t=>`${t.name}: ${t.value}`,colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorSwatch:"color swatch",transparent:"transparent"};var vH={};vH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Selector de color",colorSwatch:"muestra de color",transparent:"transparente",twoDimensionalSlider:"Regulador 2D"};var yH={};yH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Vrvivalija",colorSwatch:"vrvinidis",transparent:"lbipaistev",twoDimensionalSlider:"2D-liugur"};var bH={};bH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Vrimuokkain",colorSwatch:"vrimalli",transparent:"lpinkyv",twoDimensionalSlider:"2D-liukusdin"};var xH={};xH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Slecteur de couleurs",colorSwatch:"chantillon de couleurs",transparent:"Transparent",twoDimensionalSlider:"Curseur2D"};var _H={};_H={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:" ",colorSwatch:" ",transparent:"",twoDimensionalSlider:"  "};var wH={};wH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Odabir boje",colorSwatch:"uzorak boje",transparent:"transparentno",twoDimensionalSlider:"2D kliza"};var SH={};SH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Sznvlaszt",colorSwatch:"szntr",transparent:"tltsz",twoDimensionalSlider:"2D-csszka"};var EH={};EH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Selettore colore",colorSwatch:"campione di colore",transparent:"trasparente",twoDimensionalSlider:"Cursore 2D"};var CH={};CH={colorInputLabel:t=>`${t.label}${t.channelLabel}`,colorNameAndValue:t=>`${t.name} : ${t.value}`,colorPicker:"",colorSwatch:"",transparent:"",twoDimensionalSlider:"2D "};var TH={};TH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:" ",colorSwatch:" ",transparent:"",twoDimensionalSlider:"2D "};var MH={};MH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Spalv parinkiklis",colorSwatch:"spalv pavyzdys",transparent:"skaidrus",twoDimensionalSlider:"2D slankiklis"};var AH={};AH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Krsu atlastjs",colorSwatch:"krsu paraugs",transparent:"caurspdgs",twoDimensionalSlider:"2D sldnis"};var PH={};PH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Fargevelger",colorSwatch:"fargekart",transparent:"gjennomsiktig",twoDimensionalSlider:"2D-glidebryter"};var NH={};NH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Kleurkiezer",colorSwatch:"kleurstaal",transparent:"transparant",twoDimensionalSlider:"2D-schuifregelaar"};var DH={};DH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Prbnik kolorw",colorSwatch:"prbka koloru",transparent:"przezroczysty",twoDimensionalSlider:"Suwak 2D"};var kH={};kH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Seletor de cores",colorSwatch:"amostra de cores",transparent:"transparente",twoDimensionalSlider:"Controle deslizante 2D"};var RH={};RH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Seletor de cores",colorSwatch:"amostra de cor",transparent:"transparente",twoDimensionalSlider:"Controle deslizante 2D"};var IH={};IH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Selector de culori",colorSwatch:"specimen de culoare",transparent:"transparent",twoDimensionalSlider:"Glisor 2D"};var $H={};$H={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:" ",colorSwatch:" ",transparent:"",twoDimensionalSlider:" 2D"};var jH={};jH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Vber farieb",colorSwatch:"vzorkovnk farieb",transparent:"transparentn",twoDimensionalSlider:"2D jazdec"};var LH={};LH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Izbirnik barv",colorSwatch:"barvna paleta",transparent:"prozorno",twoDimensionalSlider:"2D drsnik"};var OH={};OH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Bira boja",colorSwatch:"Uzorak boje",transparent:"providno",twoDimensionalSlider:"2D kliza"};var FH={};FH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Frgvljaren",colorSwatch:"frgruta",transparent:"genomskinlig",twoDimensionalSlider:"2D-reglage"};var BH={};BH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Renk Seici",colorSwatch:"renk rnei",transparent:"saydam",twoDimensionalSlider:"2D srg"};var zH={};zH={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:" ",colorSwatch:" ",transparent:"",twoDimensionalSlider:" 2D"};var UH={};UH={colorInputLabel:t=>`${t.label}${t.channelLabel}`,colorNameAndValue:t=>`${t.name}${t.value}`,colorPicker:"",colorSwatch:"",transparent:"",twoDimensionalSlider:"2D "};var VH={};VH={colorInputLabel:t=>`${t.label}${t.channelLabel}`,colorNameAndValue:t=>`${t.name}${t.value}`,colorPicker:"",colorSwatch:"",transparent:"",twoDimensionalSlider:"2D "};var fI={};fI={"ar-AE":uH,"bg-BG":dH,"cs-CZ":hH,"da-DK":fH,"de-DE":pH,"el-GR":mH,"en-US":gH,"es-ES":vH,"et-EE":yH,"fi-FI":bH,"fr-FR":xH,"he-IL":_H,"hr-HR":wH,"hu-HU":SH,"it-IT":EH,"ja-JP":CH,"ko-KR":TH,"lt-LT":MH,"lv-LV":AH,"nb-NO":PH,"nl-NL":NH,"pl-PL":DH,"pt-BR":kH,"pt-PT":RH,"ro-RO":IH,"ru-RU":$H,"sk-SK":jH,"sl-SI":LH,"sr-SP":OH,"sv-SE":FH,"tr-TR":BH,"uk-UA":zH,"zh-CN":UH,"zh-TW":VH};var HH={};HH={alpha:"",black:"",blue:"","blue purple":" ",brightness:"",brown:"","brown yellow":" ",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"","cyan blue":" ",dark:"",gray:"",grayish:" ",green:"","green cyan":" ",hue:" ",light:"",lightness:"",magenta:"","magenta pink":" ",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":"",red:"","red orange":" ",saturation:"",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} `,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":" "};var GH={};GH={alpha:"",black:"",blue:"","blue purple":" ",brightness:"",brown:"","brown yellow":" ",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"","cyan blue":" ",dark:"",gray:"",grayish:"",green:"","green cyan":" ",hue:"",light:"",lightness:"",magenta:"","magenta pink":" ",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":" ",red:"","red orange":" ",saturation:"",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} `,"very dark":" ","very light":" ",vibrant:" ",white:"",yellow:"","yellow green":" "};var WH={};WH={alpha:"Alfa",black:"ern",blue:"Modr","blue purple":"modrofialov",brightness:"Jas",brown:"hnd","brown yellow":"hndolut",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"tyrkysov","cyan blue":"tyrkysovomodr",dark:"tmav",gray:"ed",grayish:"naedl",green:"Zelen","green cyan":"zelenotyrkysov",hue:"Odstn",light:"svtl",lightness:"Svtlost",magenta:"purpurov","magenta pink":"purpurov rov",orange:"oranov","orange yellow":"oranovolut",pale:"bled",pink:"rov","pink red":"rovoerven",purple:"fialov","purple magenta":"fialov purpurov",red:"erven","red orange":"ervenooranov",saturation:"Sytost",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} prhledn`,"very dark":"velmi tmav","very light":"velmi svtl",vibrant:"ziv",white:"bl",yellow:"lut","yellow green":"lutozelen"};var qH={};qH={alpha:"Alfa",black:"sort",blue:"Bl","blue purple":"bllilla",brightness:"Lysstyrke",brown:"brun","brown yellow":"brungul",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cyan","cyan blue":"cyan bl",dark:"mrk",gray:"gr",grayish:"grlig",green:"Grn","green cyan":"grn cyan",hue:"Tone",light:"lys",lightness:"Lyshed",magenta:"magenta","magenta pink":"magenta pink",orange:"orange","orange yellow":"orangegul",pale:"bleg",pink:"lyserd","pink red":"lyserdlig rd",purple:"lilla","purple magenta":"lilla magenta",red:"Rd","red orange":"rdorange",saturation:"Farvemtning",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} gennemsigtig`,"very dark":"meget mrk","very light":"meget lys",vibrant:"klar",white:"hvid",yellow:"gul","yellow green":"gulgrn"};var KH={};KH={alpha:"Alpha",black:"Schwarz",blue:"Blau","blue purple":"Blaulila",brightness:"Helligkeit",brown:"Braun","brown yellow":"Braungelb",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"Cyan","cyan blue":"Cyanblau",dark:"dunkles",gray:"Grau",grayish:"gruliches",green:"Grn","green cyan":"Grncyan",hue:"Farbton",light:"helles",lightness:"Leuchtkraft",magenta:"Magenta","magenta pink":"Magentarosa",orange:"Orange","orange yellow":"Orangegelb",pale:"blasses",pink:"Rosa","pink red":"Rosarot",purple:"Lila","purple magenta":"Lilamagenta",red:"Rot","red orange":"Rotorange",saturation:"Sttigung",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, zu ${t.percentTransparent} transparent`,"very dark":"sehr dunkles","very light":"sehr helles",vibrant:"lebhaftes",white:"Wei",yellow:"Gelb","yellow green":"Gelbgrn"};var XH={};XH={alpha:"",black:"",blue:"","blue purple":" ",brightness:"",brown:"","brown yellow":" ",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"","cyan blue":" ",dark:"",gray:"",grayish:"",green:"","green cyan":" ",hue:"",light:"",lightness:"",magenta:"","magenta pink":" ",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":" ",red:"","red orange":" ",saturation:"",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} `,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":" "};var YH={};YH={hue:"Hue",saturation:"Saturation",lightness:"Lightness",brightness:"Brightness",red:"Red",green:"Green",blue:"Blue",alpha:"Alpha",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} transparent`,"very dark":"very dark",dark:"dark",light:"light","very light":"very light",pale:"pale",grayish:"grayish",vibrant:"vibrant",black:"black",white:"white",gray:"gray",pink:"pink","pink red":"pink red","red orange":"red orange",brown:"brown",orange:"orange","orange yellow":"orange yellow","brown yellow":"brown yellow",yellow:"yellow","yellow green":"yellow green","green cyan":"green cyan",cyan:"cyan","cyan blue":"cyan blue","blue purple":"blue purple",purple:"purple","purple magenta":"purple magenta",magenta:"magenta","magenta pink":"magenta pink"};var ZH={};ZH={alpha:"Alpha",black:"negro",blue:"Azul","blue purple":"prpura azulado",brightness:"Brillo",brown:"marrn","brown yellow":"amarillo amarronado",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cian","cyan blue":"azul cian",dark:"oscuro",gray:"gris",grayish:"grisceo",green:"Verde","green cyan":"cian verdoso",hue:"Tono",light:"claro",lightness:"Luminosidad",magenta:"magenta","magenta pink":"rosa magenta",orange:"naranja","orange yellow":"amarillo anaranjado",pale:"plido",pink:"rosa","pink red":"rojo rosado",purple:"morado","purple magenta":"magenta violceo",red:"Rojo","red orange":"naranja rojizo",saturation:"Saturacin",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} transparente`,"very dark":"muy oscuro","very light":"muy claro",vibrant:"intenso",white:"blanco",yellow:"amarillo","yellow green":"verde amarillento"};var JH={};JH={alpha:"Alfa",black:"must",blue:"Sinine","blue purple":"sinakaslilla",brightness:"Heledus",brown:"pruun","brown yellow":"pruunikaskollane",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"tsaan","cyan blue":"tsaansinine",dark:"tume",gray:"hall",grayish:"hallikas",green:"Roheline","green cyan":"tsaanroheline",hue:"Vrv",light:"valgus",lightness:"Valgus",magenta:"magentapunane","magenta pink":"magentaroosa",orange:"oran","orange yellow":"oranikaskollane",pale:"kahvatu",pink:"roosa","pink red":"vaarikapunane",purple:"lilla","purple magenta":"purpurne magenta",red:"Punane","red orange":"punakasoran",saturation:"Kllastus",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} lbipaistev`,"very dark":"vga tume","very light":"vga hele",vibrant:"ere",white:"valge",yellow:"kollane","yellow green":"kollakasroheline"};var QH={};QH={alpha:"Alpha",black:"musta",blue:"Sininen","blue purple":"sinivioletti",brightness:"Kirkkaus",brown:"ruskea","brown yellow":"ruskeankeltainen",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"syaani","cyan blue":"syaaninsininen",dark:"tumma",gray:"harmaa",grayish:"harmahtava",green:"Vihre","green cyan":"vihrensyaani",hue:"Svy",light:"vaalea",lightness:"Valomr",magenta:"magenta","magenta pink":"magentapinkki",orange:"oranssi","orange yellow":"oranssinkeltainen",pale:"vaalea",pink:"pinkki","pink red":"vaaleanpunainen",purple:"violetti","purple magenta":"violettimagenta",red:"Punainen","red orange":"punaoranssi",saturation:"Vrikyllisyys",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} lpinkyv`,"very dark":"hyvin tumma","very light":"erittin vaalea",vibrant:"eloisa",white:"valkea",yellow:"keltainen","yellow green":"keltavihre"};var eG={};eG={alpha:"Alpha",black:"Noir",blue:"Bleu","blue purple":"Violet bleu",brightness:"Luminosit",brown:"Brun","brown yellow":"Jaune brun",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"Cyan","cyan blue":"Bleu cyan",dark:"Sombre",gray:"Gris",grayish:"Gristre",green:"Vert","green cyan":"Cyan vert",hue:"Teinte",light:"Clair",lightness:"Luminosit",magenta:"Magenta","magenta pink":"Rose magenta",orange:"Orange","orange yellow":"Jaune orang",pale:"Ple",pink:"Rose","pink red":"Rouge ros",purple:"Violet","purple magenta":"Magenta violet",red:"Rouge","red orange":"Orange rouge",saturation:"Saturation",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} transparent`,"very dark":"Trs sombre","very light":"Trs clair",vibrant:"Vif",white:"Blanc",yellow:"Jaune","yellow green":"Vert jaune"};var tG={};tG={alpha:"",black:"",blue:"","blue purple":" ",brightness:"",brown:"","brown yellow":" ",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"","cyan blue":" ",dark:"",gray:"",grayish:"",green:"","green cyan":" ",hue:"",light:"",lightness:" ",magenta:"'","magenta pink":" '",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":"' ",red:"","red orange":" ",saturation:"",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} `,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":" "};var nG={};nG={alpha:"Alfa",black:"crno",blue:"Plava","blue purple":"plavo ljubiasta",brightness:"Svjetlina",brown:"smea","brown yellow":"smee uta",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cijan","cyan blue":"cijan plava",dark:"tamno",gray:"siva",grayish:"sivkasto",green:"Zelena","green cyan":"zelena cijan",hue:"Nijansa",light:"svjetlo",lightness:"Osvijetljenost",magenta:"magenta","magenta pink":"magentno ruiasta",orange:"naranasta","orange yellow":"naranasto uta",pale:"blijeda",pink:"ruiasta","pink red":"ruiasto crvena",purple:"ljubiasta","purple magenta":"ljubiasta magenta",red:"Crvena","red orange":"crveno naranasta",saturation:"Zasienost",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} prozirnosti`,"very dark":"jako tamna","very light":"vrlo svijetlo",vibrant:"vibrantna",white:"bijela",yellow:"uto","yellow green":"uto zelena"};var rG={};rG={alpha:"Alfa",black:"fekete",blue:"Kk","blue purple":"kk lila",brightness:"Fnyessg",brown:"barna","brown yellow":"barna srga",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cinkk","cyan blue":"cinkk",dark:"stt",gray:"szrke",grayish:"szrks",green:"Zld","green cyan":"zld cinkk",hue:"Sznrnyalat",light:"vilgos",lightness:"Vilgossg",magenta:"bbor","magenta pink":"bbor rzsaszn",orange:"narancs","orange yellow":"narancssrga",pale:"halvny",pink:"rzsaszn","pink red":"rzsaszn piros",purple:"lila","purple magenta":"lila bbor",red:"Piros","red orange":"piros narancs",saturation:"Teltettsg",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} tltsz`,"very dark":"nagyon stt","very light":"nagyon vilgos",vibrant:"lnk",white:"fehr",yellow:"srga","yellow green":"srga zld"};var iG={};iG={alpha:"Alfa",black:"nero",blue:"Blu","blue purple":"blu viola",brightness:"Luminosit",brown:"marrone","brown yellow":"giallo bruno",colorName:t=>`${t.hue} ${t.chroma} ${t.lightness}`,cyan:"ciano","cyan blue":"blu ciano",dark:"scuro",gray:"grigio",grayish:"grigiastro",green:"Verde","green cyan":"verde ciano",hue:"Tonalit",light:"chiaro",lightness:"Luminosit",magenta:"magenta","magenta pink":"rosa magenta",orange:"arancio","orange yellow":"giallo arancio",pale:"tenue",pink:"rosa","pink red":"rosa rosso",purple:"viola","purple magenta":"viola magenta",red:"Rosso","red orange":"rosso arancio",saturation:"Saturazione",transparentColorName:t=>`${t.hue} ${t.chroma} ${t.lightness}, trasparenza ${t.percentTransparent}`,"very dark":"molto scuro","very light":"molto chiaro",vibrant:"vivace",white:"bianco",yellow:"giallo","yellow green":"giallo verde"};var aG={};aG={alpha:"",black:"",blue:"","blue purple":"",brightness:"",brown:"","brown yellow":"",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"","cyan blue":"",dark:"",gray:"",grayish:"",green:"","green cyan":"",hue:"",light:"",lightness:"",magenta:"","magenta pink":"",orange:"","orange yellow":"",pale:"",pink:"","pink red":"",purple:"","purple magenta":"",red:"","red orange":"",saturation:"",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} `,"very dark":"","very light":"",vibrant:"",white:"",yellow:"","yellow green":""};var sG={};sG={alpha:"",black:"",blue:"","blue purple":"",brightness:"",brown:"","brown yellow":"",colorName:t=>`${t.lightness}, ${t.chroma}, ${t.hue}`,cyan:"","cyan blue":"",dark:"",gray:"",grayish:"",green:"","green cyan":"",hue:"",light:"",lightness:"",magenta:"","magenta pink":" ",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":" ",red:"","red orange":" ",saturation:"",transparentColorName:t=>`${t.lightness}, ${t.chroma}, ${t.hue}, ${t.percentTransparent} `,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":""};var oG={};oG={alpha:"Alfa",black:"juoda",blue:"Mlyna","blue purple":"melsvai violetin",brightness:"Rykumas",brown:"ruda","brown yellow":"rusvai geltona",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"alsvai mlyna","cyan blue":"alsvai mlyna",dark:"tamsi",gray:"pilka",grayish:"pilkva",green:"alia","green cyan":"alsvai mlyna",hue:"Atspalvis",light:"viesi",lightness:"viesumas",magenta:"rausvai raudona","magenta pink":"purpurin",orange:"oranin","orange yellow":"oraninio atspalvio geltona",pale:"blyki",pink:"roin","pink red":"roin raudona",purple:"violetin","purple magenta":"purpurin rausvai raudona",red:"Raudona","red orange":"rausvai oranin",saturation:"sotinimas",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} skaidri`,"very dark":"labai tamsi","very light":"labai viesi",vibrant:"ryki",white:"balta",yellow:"geltona","yellow green":"gelsvai alia"};var lG={};lG={alpha:"Alfa",black:"melns",blue:"Zila","blue purple":"zili violets",brightness:"Spilgtums",brown:"brns","brown yellow":"brni dzeltens",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cins","cyan blue":"cina zils",dark:"tums",gray:"pelks",grayish:"pelcgs",green:"Zaa","green cyan":"za cins",hue:"Nokrsa",light:"gais",lightness:"Gaiums",magenta:"fuksiju","magenta pink":"fuksiju roz",orange:"orans","orange yellow":"orani dzeltens",pale:"bls",pink:"roz","pink red":"rozgi sarkans",purple:"violets","purple magenta":"violets fuksiju",red:"Sarkana","red orange":"sarkangi orans",saturation:"Piestinjums",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} caurspdgs`,"very dark":"oti tums","very light":"oti gais",vibrant:"kos",white:"balts",yellow:"dzeltens","yellow green":"dzelteni za"};var cG={};cG={alpha:"Alfa",black:"svart",blue:"Bl","blue purple":"bllilla",brightness:"Lysstyrke",brown:"brun","brown yellow":"brungul",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cyan","cyan blue":"cyanbl",dark:"mrk",gray:"gr",grayish:"graktig",green:"Grnn","green cyan":"grnncyan",hue:"Fargetone",light:"lys",lightness:"Lyshet",magenta:"magenta","magenta pink":"magentarosa",orange:"oransje","orange yellow":"oransjegul",pale:"blek",pink:"rosa","pink red":"rosard",purple:"lilla","purple magenta":"lillamagenta",red:"Rd","red orange":"rdoransje",saturation:"Metning",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} gjennomsiktig`,"very dark":"svrt mrk","very light":"svrt lys",vibrant:"levende",white:"hvit",yellow:"gul","yellow green":"gulgrnn"};var uG={};uG={alpha:"Alfa",black:"zwart",blue:"Blauw","blue purple":"paarsblauw",brightness:"Helderheid",brown:"bruin","brown yellow":"bruingeel",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cyaan","cyan blue":"cyaanblauw",dark:"donker",gray:"grijs",grayish:"grijsachtig",green:"Groen","green cyan":"cyaangroen",hue:"Kleurtoon",light:"licht",lightness:"Lichtsterkte",magenta:"magenta","magenta pink":"magentaroze",orange:"oranje","orange yellow":"oranjegeel",pale:"bleek",pink:"roze","pink red":"rozerood",purple:"paars","purple magenta":"magentapaars",red:"Rood","red orange":"roodoranje",saturation:"Verzadiging",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} transparant`,"very dark":"heel donker","very light":"heel licht",vibrant:"levendig",white:"wit",yellow:"geel","yellow green":"geelgroen"};var dG={};dG={alpha:"Alfa",black:"czarny",blue:"Niebieski","blue purple":"niebiesko-fioletowy",brightness:"Jasno",brown:"brzowy","brown yellow":"brzowo-ty",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cyjanowy","cyan blue":"cyjanowo-niebieski",dark:"ciemny",gray:"szary",grayish:"szarawy",green:"Zielony","green cyan":"zielono-cyjanowy",hue:"Odcie",light:"jasny",lightness:"Jaskrawo",magenta:"purpurowy","magenta pink":"purpurowo-rowy",orange:"pomaraczowy","orange yellow":"pomaraczowo-ty",pale:"blady",pink:"rowy","pink red":"rowo-czerwony",purple:"fioletowy","purple magenta":"fioletowo-purpurowy",red:"Czerwony","red orange":"czerwono-pomaraczowy",saturation:"Nasycenie",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} przezroczystoci`,"very dark":"bardzo ciemny","very light":"bardzo jasny",vibrant:"intensywny",white:"biay",yellow:"ty","yellow green":"to-zielony"};var hG={};hG={alpha:"Alfa",black:"preto",blue:"Azul","blue purple":"roxo azulado",brightness:"Brilho",brown:"marrom","brown yellow":"marrom amarelado",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"ciano","cyan blue":"azul-ciano",dark:"escuro",gray:"cinza",grayish:"acinzentado",green:"Verde","green cyan":"verde-ciano",hue:"Matiz",light:"claro",lightness:"Luminosidade",magenta:"magenta","magenta pink":"rosa-magenta",orange:"laranja","orange yellow":"amarelo alaranjado",pale:"plido",pink:"rosa","pink red":"rosa avermelhado",purple:"roxo","purple magenta":"roxo-magenta",red:"Vermelho","red orange":"laranja avermelhado",saturation:"Saturao",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} transparente`,"very dark":"muito escuro","very light":"muito claro",vibrant:"vibrante",white:"branco",yellow:"amarelo","yellow green":"verde amarelado"};var fG={};fG={alpha:"Alfa",black:"preto",blue:"Azul","blue purple":"azul-prpura",brightness:"Luminosidade",brown:"castanho","brown yellow":"amarelo-castanho",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"ciano","cyan blue":"azul-ciano",dark:"escuro",gray:"cinzento",grayish:"acinzentado",green:"Verde","green cyan":"verde-ciano",hue:"Tonalidade",light:"claro",lightness:"Claridade",magenta:"magenta","magenta pink":"rosa-magenta",orange:"laranja","orange yellow":"amarelo-laranja",pale:"plido",pink:"cor-de-rosa","pink red":"vermelho-rosa",purple:"prpura","purple magenta":"prpura-magenta",red:"Vermelho","red orange":"laranja-vermelho",saturation:"Saturao",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} transparente`,"very dark":"muito escuro","very light":"muito claro",vibrant:"vibrante",white:"branco",yellow:"amarelo","yellow green":"verde-amarelo"};var pG={};pG={alpha:"Alfa",black:"negru",blue:"Albastru","blue purple":"albastru-violet",brightness:"Luminozitate",brown:"maro","brown yellow":"galben maro",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"bleu","cyan blue":"albastru-bleu",dark:"nchis",gray:"gri",grayish:"cenuiu",green:"Verde","green cyan":"verde bleu",hue:"Nuan",light:"deschis",lightness:"Luminozitate",magenta:"fucsia","magenta pink":"roz-fucsia",orange:"portocaliu","orange yellow":"galben-portocaliu",pale:"pal",pink:"roz","pink red":"roz-rou",purple:"violet","purple magenta":"violet-fucsia",red:"Rou","red orange":"portocaliu-rou",saturation:"Saturaie",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} transparent`,"very dark":"foarte nchis","very light":"foarte deschis",vibrant:"plin de via",white:"alb",yellow:"galben","yellow green":"galben-verde"};var mG={};mG={alpha:"",black:"",blue:"","blue purple":"-",brightness:"",brown:"","brown yellow":"-",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"","cyan blue":"  ",dark:"",gray:"",grayish:"",green:"","green cyan":"-",hue:"",light:"",lightness:"",magenta:"","magenta pink":"-",orange:"","orange yellow":"-",pale:"",pink:"","pink red":"-",purple:"","purple magenta":"-",red:"","red orange":"-",saturation:"",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue},   ${t.percentTransparent}`,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":"-"};var gG={};gG={alpha:"Alfa",black:"ierna",blue:"Modr","blue purple":"modrofialov",brightness:"Jas",brown:"hned","brown yellow":"hnedolt",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"azrov","cyan blue":"azrov modr",dark:"tmav",gray:"siv",grayish:"sivast",green:"Zelen","green cyan":"zelen azrov",hue:"Odtie",light:"svetl",lightness:"Svetlos",magenta:"purpurov","magenta pink":"ruov purpurov",orange:"oranov","orange yellow":"oranovolt",pale:"bled",pink:"ruov","pink red":"ruovoerven",purple:"fialov","purple magenta":"fialov purpurov",red:"erven","red orange":"ervenooranov",saturation:"Stos",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} priehadn`,"very dark":"vemi tmav","very light":"vemi svetl",vibrant:"energick",white:"biela",yellow:"lt","yellow green":"ltozelen"};var vG={};vG={alpha:"Alfa",black:"rna",blue:"Modra","blue purple":"modro vijolina",brightness:"Svetlost",brown:"rjava","brown yellow":"rjavo rumena",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cian","cyan blue":"cian modra",dark:"temna",gray:"siva",grayish:"sivkasta",green:"Zelena","green cyan":"zelena cian",hue:"Barva",light:"svetla",lightness:"Lahkost",magenta:"krlatna","magenta pink":"krlatno roza",orange:"oranna","orange yellow":"oranno rumena",pale:"bleda",pink:"roza","pink red":"roza rdea",purple:"vijolina","purple magenta":"vijolino krlatna",red:"Rdea","red orange":"rdee oranna",saturation:"Nasienost",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} prozorna`,"very dark":"zelo temna","very light":"zelo svetla",vibrant:"ivahna",white:"bela",yellow:"rumena","yellow green":"rumeno zelena"};var yG={};yG={alpha:"Alfa",black:"crno",blue:"Plava","blue purple":"plavoljubiasta",brightness:"Osvetljenost",brown:"smea","brown yellow":"smeeuta",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cijan","cyan blue":"cijan plava",dark:"tamno",gray:"siva",grayish:"sivkasta",green:"Zelena","green cyan":"zeleno cijan",hue:"Nijansa",light:"svetla",lightness:"Osvetljenje",magenta:"purpurnocrvena","magenta pink":"magenta ruiasta",orange:"narandasta","orange yellow":"narandastouta",pale:"bledo",pink:"ruiasta","pink red":"ruiastocrvena",purple:"ljubiasta","purple magenta":"ljubiasta magenta",red:"Crvena","red orange":"crvenonarandasta",saturation:"Zasienje",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} prozirna`,"very dark":"veoma tamno","very light":"vrlo svetlo",vibrant:"ivopisna",white:"bela",yellow:"uto","yellow green":"utozelena"};var bG={};bG={alpha:"Alfa",black:"svart",blue:"Bltt","blue purple":"bllila",brightness:"Ljusstyrka",brown:"brun","brown yellow":"brungul",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cyan","cyan blue":"cyanbl",dark:"mrk",gray:"gr",grayish:"graktig",green:"Grnt","green cyan":"grn cyan",hue:"Nyans",light:"ljus",lightness:"Ljushet",magenta:"magenta","magenta pink":"magentarosa",orange:"orange","orange yellow":"orangegul",pale:"blek",pink:"rosa","pink red":"rosard",purple:"lila","purple magenta":"lila magenta",red:"Rtt","red orange":"rdorange",saturation:"Mttnad",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} genomskinlig`,"very dark":"mycket mrk","very light":"mycket ljus",vibrant:"livfull",white:"vit",yellow:"gul","yellow green":"gulgrn"};var xG={};xG={alpha:"Alfa",black:"siyah",blue:"Mavi","blue purple":"mavi mor",brightness:"Parlaklk",brown:"kahverengi","brown yellow":"kahverengi sar",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"camgbei","cyan blue":"camgbei mavi",dark:"koyu",gray:"gri",grayish:"grimsi",green:"Yeil","green cyan":"yeil camgbei",hue:"Ton",light:"ak",lightness:"Canllk",magenta:"eflatun","magenta pink":"eflatun pembe",orange:"turuncu","orange yellow":"turuncu sar",pale:"solgun",pink:"pembe","pink red":"pembe krmz",purple:"mor","purple magenta":"mor eflatun",red:"Krmz","red orange":"krmz portakal",saturation:"Doygunluk",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} saydam`,"very dark":"ok koyu","very light":"ok ak",vibrant:"canl",white:"beyaz",yellow:"sar","yellow green":"sar yeil"};var _G={};_G={alpha:"",black:"",blue:"","blue purple":"-",brightness:"",brown:"","brown yellow":"-",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"","cyan blue":"-",dark:"",gray:"",grayish:"",green:"","green cyan":"-",hue:"",light:"",lightness:"",magenta:"","magenta pink":"-",orange:"","orange yellow":"-",pale:"",pink:"","pink red":"-",purple:"","purple magenta":"-",red:"","red orange":"-",saturation:"",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue},   ${t.percentTransparent}`,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":"-"};var wG={};wG={alpha:"Alpha",black:"",blue:"","blue purple":"",brightness:"",brown:"","brown yellow":"",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"","cyan blue":"",dark:"",gray:"",grayish:"",green:"","green cyan":"",hue:"",light:"",lightness:"",magenta:"","magenta pink":"",orange:"","orange yellow":"",pale:"",pink:"","pink red":"",purple:"","purple magenta":"",red:"","red orange":"",saturation:"",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} `,"very dark":"","very light":"",vibrant:"",white:"",yellow:"","yellow green":"/"};var SG={};SG={alpha:"Alpha",black:"",blue:"","blue purple":"",brightness:"",brown:"","brown yellow":"",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"","cyan blue":"",dark:"",gray:"",grayish:"",green:"","green cyan":"",hue:"",light:"",lightness:"",magenta:"","magenta pink":"",orange:"","orange yellow":"",pale:"",pink:"","pink red":"",purple:"","purple magenta":"",red:"","red orange":"",saturation:"",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} `,"very dark":"","very light":"",vibrant:"",white:"",yellow:"","yellow green":""};var EG={};EG={"ar-AE":HH,"bg-BG":GH,"cs-CZ":WH,"da-DK":qH,"de-DE":KH,"el-GR":XH,"en-US":YH,"es-ES":ZH,"et-EE":JH,"fi-FI":QH,"fr-FR":eG,"he-IL":tG,"hr-HR":nG,"hu-HU":rG,"it-IT":iG,"ja-JP":aG,"ko-KR":sG,"lt-LT":oG,"lv-LV":lG,"nb-NO":cG,"nl-NL":uG,"pl-PL":dG,"pt-BR":hG,"pt-PT":fG,"ro-RO":pG,"ru-RU":mG,"sk-SK":gG,"sl-SI":vG,"sr-SP":yG,"sv-SE":bG,"tr-TR":xG,"uk-UA":_G,"zh-CN":wG,"zh-TW":SG};function Ige(t){return t&&t.__esModule?t.default:t}let rA=new Rf(Ige(EG));function Ao(t){let e=If.parse(t)||$f.parse(t)||jf.parse(t);if(e)return e;throw new Error("Invalid color value: "+t)}function Qv(t){return typeof t=="string"?Ao(t):t}function CG(t){return t===360?t:(t%360+360)%360}const yL=.68,$ge=.85,bL=.55,xL=.001,iA=[[0,"pink"],[15,"red"],[48,"orange"],[94,"yellow"],[135,"green"],[175,"cyan"],[264,"blue"],[284,"purple"],[320,"magenta"],[349,"pink"]];class pI{toHexInt(){return this.toFormat("rgb").toHexInt()}getChannelValue(e){if(e in this)return this[e];throw new Error("Unsupported color channel: "+e)}withChannelValue(e,n){if(e in this){let r=this.clone();return r[e]=n,r}throw new Error("Unsupported color channel: "+e)}getChannelName(e,n){return(Rf.getGlobalDictionaryForPackage("@react-stately/color")||rA).getStringForLocale(e,n)}getColorSpaceAxes(e){let{xChannel:n,yChannel:r}=e,i=n||this.getColorChannels().find(o=>o!==r),a=r||this.getColorChannels().find(o=>o!==i),s=this.getColorChannels().find(o=>o!==i&&o!==a);return{xChannel:i,yChannel:a,zChannel:s}}getColorName(e){let[n,r,i]=_L(this),a=Rf.getGlobalDictionaryForPackage("@react-stately/color")||rA;if(n>.999)return a.getStringForLocale("white",e);if(n<.001)return a.getStringForLocale("black",e);let s;[s,n]=this.getOklchHue(n,r,i,e);let o="",c="";r<=.1&&r>=xL?n>=.7?c="pale":c="grayish":r>=.15&&(c="vibrant"),n<.3?o="very dark":n<bL?o="dark":n<.7||(n<.85?o="light":o="very light"),c&&(c=a.getStringForLocale(c,e)),o&&(o=a.getStringForLocale(o,e));let u=this.getChannelValue("alpha"),h=new w7(e,a);if(u<1){let f=new Uf(e,{style:"percent"}).format(1-u);return h.format("transparentColorName",{lightness:o,chroma:c,hue:s,percentTransparent:f}).replace(/\s+/g," ").trim()}else return h.format("colorName",{lightness:o,chroma:c,hue:s}).replace(/\s+/g," ").trim()}getOklchHue(e,n,r,i){let a=Rf.getGlobalDictionaryForPackage("@react-stately/color")||rA;if(n<xL)return[a.getStringForLocale("gray",i),e];for(let s=0;s<iA.length;s++){let[o,c]=iA[s],[u,h]=iA[s+1]||[360,"pink"];if(r>=o&&r<u)return c==="orange"&&(e<yL?c="brown":e=e-yL+bL),r>o+(u-o)/2&&c!==h?c=`${c} ${h}`:c==="yellow"&&e<$ge&&(c="yellow green"),[a.getStringForLocale(c,i).toLocaleLowerCase(i),e]}throw new Error("Unexpected hue")}getHueName(e){let[n,r,i]=_L(this),[a]=this.getOklchHue(n,r,i,e);return a}}class If extends pI{static parse(e){let n=[];if(/^#[\da-f]+$/i.test(e)&&[4,5,7,9].includes(e.length)){const a=(e.length<6?e.replace(/[^#]/gi,"$&$&"):e).slice(1).split("");for(;a.length>0;)n.push(parseInt(a.splice(0,2).join(""),16));n[3]=n[3]!==void 0?n[3]/255:void 0}const r=e.match(/^rgba?\((.*)\)$/);if(r?.[1]&&(n=r[1].split(",").map(a=>Number(a.trim())),n=n.map((a,s)=>La(a??0,0,s<3?255:1))),!(n[0]===void 0||n[1]===void 0||n[2]===void 0)){var i;return n.length<3?void 0:new If(n[0],n[1],n[2],(i=n[3])!==null&&i!==void 0?i:1)}}toString(e="css"){switch(e){case"hex":return"#"+(this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")).toUpperCase();case"hexa":return"#"+(this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")+Math.round(this.alpha*255).toString(16).padStart(2,"0")).toUpperCase();case"rgb":return`rgb(${this.red}, ${this.green}, ${this.blue})`;case"css":case"rgba":return`rgba(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`;default:return this.toFormat(e).toString(e)}}toFormat(e){switch(e){case"hex":case"hexa":case"rgb":case"rgba":return this;case"hsb":case"hsba":return this.toHSB();case"hsl":case"hsla":return this.toHSL();default:throw new Error("Unsupported color conversion: rgb -> "+e)}}toHexInt(){return this.red<<16|this.green<<8|this.blue}toHSB(){const e=this.red/255,n=this.green/255,r=this.blue/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=a-i,o=a===0?0:s/a;let c=0;if(s!==0){switch(a){case e:c=(n-r)/s+(n<r?6:0);break;case n:c=(r-e)/s+2;break;case r:c=(e-n)/s+4;break}c/=6}return new $f(la(c*360,2),la(o*100,2),la(a*100,2),this.alpha)}toHSL(){const e=this.red/255,n=this.green/255,r=this.blue/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=(a+i)/2,o=a-i;let c,u;if(o===0)c=u=0;else{switch(u=o/(s<.5?a+i:2-a-i),a){case e:c=(n-r)/o+(n<r?6:0);break;case n:c=(r-e)/o+2;break;case r:default:c=(e-n)/o+4;break}c/=6}return new jf(la(c*360,2),la(u*100,2),la(s*100,2),this.alpha)}clone(){return new If(this.red,this.green,this.blue,this.alpha)}getChannelRange(e){switch(e){case"red":case"green":case"blue":return{minValue:0,maxValue:255,step:1,pageSize:17};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+e)}}getChannelFormatOptions(e){switch(e){case"red":case"green":case"blue":return{style:"decimal"};case"alpha":return{style:"percent"};default:throw new Error("Unknown color channel: "+e)}}formatChannelValue(e,n){let r=this.getChannelFormatOptions(e),i=this.getChannelValue(e);return new Uf(n,r).format(i)}getColorSpace(){return"rgb"}getColorChannels(){return If.colorChannels}constructor(e,n,r,i){super(),this.red=e,this.green=n,this.blue=r,this.alpha=i}}If.colorChannels=["red","green","blue"];const jge=/hsb\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsba\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/;class $f extends pI{static parse(e){let n;if(n=e.match(jge)){var r;const[i,a,s,o]=((r=n[1])!==null&&r!==void 0?r:n[2]).split(",").map(c=>Number(c.trim().replace("%","")));return new $f(CG(i),La(a,0,100),La(s,0,100),La(o??1,0,1))}}toString(e="css"){switch(e){case"css":return this.toHSL().toString("css");case"hex":return this.toRGB().toString("hex");case"hexa":return this.toRGB().toString("hexa");case"hsb":return`hsb(${this.hue}, ${la(this.saturation,2)}%, ${la(this.brightness,2)}%)`;case"hsba":return`hsba(${this.hue}, ${la(this.saturation,2)}%, ${la(this.brightness,2)}%, ${this.alpha})`;default:return this.toFormat(e).toString(e)}}toFormat(e){switch(e){case"hsb":case"hsba":return this;case"hsl":case"hsla":return this.toHSL();case"rgb":case"rgba":return this.toRGB();default:throw new Error("Unsupported color conversion: hsb -> "+e)}}toHSL(){let e=this.saturation/100,n=this.brightness/100,r=n*(1-e/2);return e=r===0||r===1?0:(n-r)/Math.min(r,1-r),new jf(la(this.hue,2),la(e*100,2),la(r*100,2),this.alpha)}toRGB(){let e=this.hue,n=this.saturation/100,r=this.brightness/100,i=(a,s=(a+e/60)%6)=>r-n*r*Math.max(Math.min(s,4-s,1),0);return new If(Math.round(i(5)*255),Math.round(i(3)*255),Math.round(i(1)*255),this.alpha)}clone(){return new $f(this.hue,this.saturation,this.brightness,this.alpha)}getChannelRange(e){switch(e){case"hue":return{minValue:0,maxValue:360,step:1,pageSize:15};case"saturation":case"brightness":return{minValue:0,maxValue:100,step:1,pageSize:10};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+e)}}getChannelFormatOptions(e){switch(e){case"hue":return{style:"unit",unit:"degree",unitDisplay:"narrow"};case"saturation":case"brightness":case"alpha":return{style:"percent"};default:throw new Error("Unknown color channel: "+e)}}formatChannelValue(e,n){let r=this.getChannelFormatOptions(e),i=this.getChannelValue(e);return(e==="saturation"||e==="brightness")&&(i/=100),new Uf(n,r).format(i)}getColorSpace(){return"hsb"}getColorChannels(){return $f.colorChannels}constructor(e,n,r,i){super(),this.hue=e,this.saturation=n,this.brightness=r,this.alpha=i}}$f.colorChannels=["hue","saturation","brightness"];const Lge=/hsl\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsla\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/;class jf extends pI{static parse(e){let n;if(n=e.match(Lge)){var r;const[i,a,s,o]=((r=n[1])!==null&&r!==void 0?r:n[2]).split(",").map(c=>Number(c.trim().replace("%","")));return new jf(CG(i),La(a,0,100),La(s,0,100),La(o??1,0,1))}}toString(e="css"){switch(e){case"hex":return this.toRGB().toString("hex");case"hexa":return this.toRGB().toString("hexa");case"hsl":return`hsl(${this.hue}, ${la(this.saturation,2)}%, ${la(this.lightness,2)}%)`;case"css":case"hsla":return`hsla(${this.hue}, ${la(this.saturation,2)}%, ${la(this.lightness,2)}%, ${this.alpha})`;default:return this.toFormat(e).toString(e)}}toFormat(e){switch(e){case"hsl":case"hsla":return this;case"hsb":case"hsba":return this.toHSB();case"rgb":case"rgba":return this.toRGB();default:throw new Error("Unsupported color conversion: hsl -> "+e)}}toHSB(){let e=this.saturation/100,n=this.lightness/100,r=n+e*Math.min(n,1-n);return e=r===0?0:2*(1-n/r),new $f(la(this.hue,2),la(e*100,2),la(r*100,2),this.alpha)}toRGB(){let e=this.hue,n=this.saturation/100,r=this.lightness/100,i=n*Math.min(r,1-r),a=(s,o=(s+e/30)%12)=>r-i*Math.max(Math.min(o-3,9-o,1),-1);return new If(Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255),this.alpha)}clone(){return new jf(this.hue,this.saturation,this.lightness,this.alpha)}getChannelRange(e){switch(e){case"hue":return{minValue:0,maxValue:360,step:1,pageSize:15};case"saturation":case"lightness":return{minValue:0,maxValue:100,step:1,pageSize:10};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+e)}}getChannelFormatOptions(e){switch(e){case"hue":return{style:"unit",unit:"degree",unitDisplay:"narrow"};case"saturation":case"lightness":case"alpha":return{style:"percent"};default:throw new Error("Unknown color channel: "+e)}}formatChannelValue(e,n){let r=this.getChannelFormatOptions(e),i=this.getChannelValue(e);return(e==="saturation"||e==="lightness")&&(i/=100),new Uf(n,r).format(i)}getColorSpace(){return"hsl"}getColorChannels(){return jf.colorChannels}constructor(e,n,r,i){super(),this.hue=e,this.saturation=n,this.lightness=r,this.alpha=i}}jf.colorChannels=["hue","saturation","lightness"];function _L(t){let e=t.toFormat("rgb"),n=e.getChannelValue("red")/255,r=e.getChannelValue("green")/255,i=e.getChannelValue("blue")/255;[n,r,i]=Fge(n,r,i);let[a,s,o]=Bge(n,r,i),[c,u,h]=zge(a,s,o);return Oge(c,u,h)}function Oge(t,e,n){var r=Math.atan2(n,e)*180/Math.PI;return[t,Math.sqrt(e**2+n**2),r>=0?r:r+360]}function Fge(t,e,n){return[aA(t),aA(e),aA(n)]}function aA(t){let e=t<0?-1:1,n=Math.abs(t);return n<=.04045?t/12.92:e*Math.pow((n+.055)/1.055,2.4)}function Bge(t,e,n){return $D([.4123907992659595,.35758433938387796,.1804807884018343,.21263900587151036,.7151686787677559,.07219231536073371,.01933081871559185,.11919477979462599,.9505321522496606],t,e,n)}function zge(t,e,n){const r=[.819022437996703,.3619062600528904,-.1288737815209879,.0329836539323885,.9292868615863434,.0361446663506424,.0481771893596242,.2642395317527308,.6335478284694309],i=[.210454268309314,.7936177747023054,-.0040720430116193,1.9779985324311684,-2.42859224204858,.450593709617411,.0259040424655478,.7827717124575296,-.8086757549230774];let[a,s,o]=$D(r,t,e,n);return $D(i,Math.cbrt(a),Math.cbrt(s),Math.cbrt(o))}function $D(t,e,n,r){let i=t[0]*e+t[1]*n+t[2]*r,a=t[3]*e+t[4]*n+t[5]*r,s=t[6]*e+t[7]*n+t[8]*r;return[i,a,s]}const Uge=Ao("#ffffff");function Vge(t){let{value:e,defaultValue:n,colorSpace:r,xChannel:i,yChannel:a,onChange:s,onChangeEnd:o}=t;!e&&!n&&(n=Uge),e&&(e=Qv(e)),n&&(n=Qv(n));let[c,u]=Xa(e,n,s),[h]=T.useState(c),f=T.useMemo(()=>r&&c?c.toFormat(r):c,[c,r]),m=T.useRef(f),g=O=>{m.current=O,u(O)},v=T.useMemo(()=>f.getColorSpaceAxes({xChannel:i,yChannel:a}),[f,i,a]),x=f.getChannelRange(v.xChannel),_=f.getChannelRange(v.yChannel),{minValue:w,maxValue:S,step:E,pageSize:A}=x,{minValue:N,maxValue:P,step:R,pageSize:D}=_,[k,L]=T.useState(!1),$=T.useRef(!1),B=f.getChannelValue(v.xChannel),q=f.getChannelValue(v.yChannel),U=O=>{if(O===B)return;let z=f.withChannelValue(v.xChannel,O);g(z)},J=O=>{if(O===q)return;let z=f.withChannelValue(v.yChannel,O);g(z)};return{channels:v,xChannelStep:E,yChannelStep:R,xChannelPageStep:A,yChannelPageStep:D,value:f,defaultValue:e!==void 0?h:n,setValue(O){g(Qv(O))},xValue:B,setXValue:U,yValue:q,setYValue:J,setColorFromPoint(O,z){let V=w+La(O,0,1)*(S-w),H=N+(1-La(z,0,1))*(P-N),ee;V!==B&&(V=oa(V,w,S,E),ee=f.withChannelValue(v.xChannel,V)),H!==q&&(H=oa(H,N,P,R),ee=(ee||f).withChannelValue(v.yChannel,H)),ee&&g(ee)},getThumbPosition(){let O=(B-w)/(S-w),z=1-(q-N)/(P-N);return{x:O,y:z}},incrementX(O=1){U(B+O>S?S:oa(B+O,w,S,E))},incrementY(O=1){J(q+O>P?P:oa(q+O,N,P,R))},decrementX(O=1){U(oa(B-O,w,S,E))},decrementY(O=1){J(oa(q-O,N,P,R))},setDragging(O){let z=$.current;$.current=O,o&&!O&&z&&o(m.current),L(O)},isDragging:k,getDisplayColor(){return f.withChannelValue("alpha",1)}}}const Hge=0,Gge=100,Wge=1;function TG(t){const{isDisabled:e=!1,minValue:n=Hge,maxValue:r=Gge,numberFormatter:i,step:a=Wge,orientation:s="horizontal"}=t;let o=T.useMemo(()=>{let Z=(r-n)/10;return Z=oa(Z,0,Z+a,a),Math.max(Z,a)},[a,r,n]),c=T.useCallback(Z=>Z?.map((K,X)=>{let ne=X===0?n:Z[X-1],G=X===Z.length-1?r:Z[X+1];return oa(K,ne,G,a)}),[n,r,a]),u=T.useMemo(()=>c(SL(t.value)),[t.value,c]),h=T.useMemo(()=>{var Z;return c((Z=SL(t.defaultValue))!==null&&Z!==void 0?Z:[n])},[t.defaultValue,n,c]),f=EL(t.value,t.defaultValue,t.onChange),m=EL(t.value,t.defaultValue,t.onChangeEnd);const[g,v]=Xa(u,h,f);let[x]=T.useState(g);const[_,w]=T.useState(new Array(g.length).fill(!1)),S=T.useRef(new Array(g.length).fill(!0)),[E,A]=T.useState(void 0),N=T.useRef(g),P=T.useRef(_);let R=Z=>{N.current=Z,v(Z)},D=Z=>{P.current=Z,w(Z)};function k(Z){return(Z-n)/(r-n)}function L(Z){return Z===0?n:g[Z-1]}function $(Z){return Z===g.length-1?r:g[Z+1]}function B(Z){return S.current[Z]}function q(Z,K){S.current[Z]=K}function U(Z,K){if(e||!B(Z))return;const X=L(Z),ne=$(Z);K=oa(K,X,ne,a);let G=wL(N.current,Z,K);R(G)}function J(Z,K){if(e||!B(Z))return;K&&(N.current=g);const X=P.current[Z];P.current=wL(P.current,Z,K),D(P.current),m&&X&&!P.current.some(Boolean)&&m(N.current)}function O(Z){return i.format(Z)}function z(Z,K){U(Z,H(K))}function V(Z){return Math.round((Z-n)/a)*a+n}function H(Z){const K=Z*(r-n)+n;return La(V(K),n,r)}function ee(Z,K=1){let X=Math.max(K,a);U(Z,oa(g[Z]+X,n,r,a))}function Y(Z,K=1){let X=Math.max(K,a);U(Z,oa(g[Z]-X,n,r,a))}return{values:g,defaultValues:t.defaultValue!==void 0?h:x,getThumbValue:Z=>g[Z],setThumbValue:U,setThumbPercent:z,isThumbDragging:Z=>_[Z],setThumbDragging:J,focusedThumb:E,setFocusedThumb:A,getThumbPercent:Z=>k(g[Z]),getValuePercent:k,getThumbValueLabel:Z=>O(g[Z]),getFormattedValue:O,getThumbMinValue:L,getThumbMaxValue:$,getPercentValue:H,isThumbEditable:B,setThumbEditable:q,incrementThumb:ee,decrementThumb:Y,step:a,pageSize:o,orientation:s,isDisabled:e}}function wL(t,e,n){return t[e]===n?t:[...t.slice(0,e),n,...t.slice(e+1)]}function SL(t){if(t!=null)return Array.isArray(t)?t:[t]}function EL(t,e,n){return r=>{n?.(typeof t=="number"||typeof e=="number"?r[0]:r)}}function qge(t){let{channel:e,colorSpace:n,value:r,defaultValue:i,onChange:a,locale:s,...o}=t;if(r==null&&i==null)throw new Error("useColorSliderState requires a value or defaultValue");r&&(r=Qv(r)),i&&(i=Qv(i));let[c,u]=Xa(r,i,a),h=T.useMemo(()=>n&&c?c.toFormat(n):c,[c,n]),[f]=T.useState(c),m=i??f,g=T.useMemo(()=>n&&m?m.toFormat(n):m,[m,n]),v=TG({...h.getChannelRange(e),...o,numberFormatter:null,value:h.getChannelValue(e),defaultValue:g.getChannelValue(e),onChange(w){u(h.withChannelValue(e,w))},onChangeEnd(w){t.onChangeEnd&&t.onChangeEnd(h.withChannelValue(e,w))}}),{step:x,pageSize:_}=h.getChannelRange(e);return{...v,value:h,setValue(w){u(Qv(w))},getDisplayColor(){switch(e){case"hue":return Ao(`hsl(${h.getChannelValue("hue")}, 100%, 50%)`);case"lightness":case"brightness":case"saturation":case"red":case"green":case"blue":return h.withChannelValue("alpha",1);case"alpha":return h;default:throw new Error("Unknown color channel: "+e)}},getThumbValueLabel(){return h.formatChannelValue(e,s)},step:x,pageSize:_,isDragging:v.isThumbDragging(0)}}function og(t){return T.useMemo(()=>{if(typeof t=="string")try{return Ao(t)}catch{return}return t},[t])}const q3=Ao("#000000"),MG=Ao("#FFFFFF"),Kge=q3.toHexInt(),Xge=MG.toHexInt();function Yge(t){let{value:e,defaultValue:n,onChange:r}=t,{step:i}=q3.getChannelRange("red"),a=og(n),[s,o]=Xa(og(e),a,r),[c]=T.useState(s),[u,h]=T.useState(()=>(e||n)&&s?s.toString("hex"):""),f=Xf({...t,value:s}),m=P=>{if(!s||!P){o(P);return}if(P.toHexInt()!==s.toHexInt()){o(P);return}},[g,v]=T.useState(s);g!==s&&(h(s?s.toString("hex"):""),v(s));let x=T.useMemo(()=>{let P;try{P=Ao(u.startsWith("#")?u:`#${u}`)}catch{P=null}return P},[u]);return{...f,validate:P=>{var R;return P===""||!!(!((R=P.match(/^#?[0-9a-f]{0,6}$/i))===null||R===void 0)&&R[0])},colorValue:s,defaultColorValue:a??c,setColorValue:o,inputValue:u,setInputValue:h,commit:()=>{if(!u.length){m(null),h(e===void 0||s===null?"":s.toString("hex"));return}if(x==null){h(s?s.toString("hex"):"");return}m(x);let P="";s&&(P=s.toString("hex")),h(P),f.commitValidation()},increment:()=>{let P=CL(x,i);P===s&&h(P.toString("hex")),m(P),f.commitValidation()},incrementToMax:()=>m(MG),decrement:()=>{let P=CL(x,-i);P===s&&h(P.toString("hex")),m(P),f.commitValidation()},decrementToMin:()=>m(q3)}}function CL(t,e){let n=t||q3,r=n.toHexInt(),i=Math.min(Math.max(r+e,Kge),Xge);if(i!==r){let a=`#${i.toString(16).padStart(6,"0").toUpperCase()}`;n=Ao(a)}return n}function AG(t){let{minValue:e,maxValue:n,step:r,formatOptions:i,value:a,defaultValue:s=NaN,onChange:o,locale:c,isDisabled:u,isReadOnly:h}=t;a===null&&(a=NaN),a!==void 0&&!isNaN(a)&&(r!==void 0&&!isNaN(r)?a=oa(a,e,n,r):a=La(a,e,n)),isNaN(s)||(r!==void 0&&!isNaN(r)?s=oa(s,e,n,r):s=La(s,e,n));let[f,m]=Xa(a,isNaN(s)?NaN:s,o),[g]=T.useState(f),[v,x]=T.useState(()=>isNaN(f)?"":new Uf(c,i).format(f)),_=T.useMemo(()=>new E7(c,i),[c,i]),w=T.useMemo(()=>_.getNumberingSystem(v),[_,v]),S=T.useMemo(()=>new Uf(c,{...i,numberingSystem:w}),[c,i,w]),E=T.useMemo(()=>S.resolvedOptions(),[S]),A=T.useCallback(K=>isNaN(K)||K===null?"":S.format(K),[S]),N=Xf({...t,value:f}),P=r!==void 0&&!isNaN(r)?r:1;E.style==="percent"&&(r===void 0||isNaN(r))&&(P=.01);let[R,D]=T.useState(f),[k,L]=T.useState(c),[$,B]=T.useState(i);(!Object.is(f,R)||c!==k||i!==$)&&(x(A(f)),D(f),L(c),B(i));let q=T.useMemo(()=>_.parse(v),[_,v]),U=()=>{if(!v.length){m(NaN),x(a===void 0?"":A(f));return}if(isNaN(q)){x(A(f));return}let K;r===void 0||isNaN(r)?K=La(q,e,n):K=oa(q,e,n,r),K=_.parse(A(K)),m(K),x(A(a===void 0?K:f)),N.commitValidation()},J=(K,X=0)=>{let ne=q;if(isNaN(ne)){let G=isNaN(X)?0:X;return oa(G,e,n,P)}else{let G=oa(ne,e,n,P);return K==="+"&&G>ne||K==="-"&&G<ne?G:oa(sA(K,ne,P),e,n,P)}},O=()=>{let K=J("+",e);K===f&&x(A(K)),m(K),N.commitValidation()},z=()=>{let K=J("-",n);K===f&&x(A(K)),m(K),N.commitValidation()},V=()=>{n!=null&&(m(oa(n,e,n,P)),N.commitValidation())},H=()=>{e!=null&&(m(e),N.commitValidation())},ee=T.useMemo(()=>!u&&!h&&(isNaN(q)||n===void 0||isNaN(n)||oa(q,e,n,P)>q||sA("+",q,P)<=n),[u,h,e,n,P,q]),Y=T.useMemo(()=>!u&&!h&&(isNaN(q)||e===void 0||isNaN(e)||oa(q,e,n,P)<q||sA("-",q,P)>=e),[u,h,e,n,P,q]);return{...N,validate:K=>_.isValidPartialNumber(K,e,n),increment:O,incrementToMax:V,decrement:z,decrementToMin:H,canIncrement:ee,canDecrement:Y,minValue:e,maxValue:n,numberValue:q,defaultNumberValue:isNaN(s)?g:s,setNumberValue:m,setInputValue:x,inputValue:v,commit:U}}function sA(t,e,n){let r=t==="+"?e+n:e-n;if(e%1!==0||n%1!==0){const i=e.toString().split("."),a=n.toString().split("."),s=i[1]&&i[1].length||0,o=a[1]&&a[1].length||0,c=Math.pow(10,Math.max(s,o));e=Math.round(e*c),n=Math.round(n*c),r=t==="+"?e+n:e-n,r/=c}return r}function Zge(t){let{channel:e,colorSpace:n,locale:r}=t,i=og(t.value),a=og(t.defaultValue),[s,o]=Xa(i,a??null,t.onChange),c=TL(s,n),[u]=T.useState(s),h=a??u,f=TL(h,n),m=c.getChannelValue(e),g=c.getChannelRange(e),v=T.useMemo(()=>c.getChannelFormatOptions(e),[c,e]),x=v.style==="percent"&&g.maxValue===100?100:1;return{...AG({locale:r,value:s===null?NaN:m/x,defaultValue:h===null?NaN:f.getChannelValue(e)/x,onChange:w=>{Number.isNaN(w)?o(null):o(c.withChannelValue(e,w*x))},minValue:g.minValue/x,maxValue:g.maxValue/x,step:g.step/x,formatOptions:v}),colorValue:c,defaultColorValue:h,setColorValue:o}}function TL(t,e){let n=og("#000");return T.useMemo(()=>{let r=t||n;return e&&r?r.toFormat(e):r},[n,t,e])}function PG(t){let e=og(t.value),n=og(t.defaultValue||"#000000"),[r,i]=Xa(e||void 0,n,t.onChange);return{color:r,setColor(a){a!=null&&i(a||Ao("#000000"))}}}const NG=t=>[0,60,120,180,240,300,360].map(e=>t.withChannelValue("hue",e).toString("css")).join(", "),DG=t=>`${t.withChannelValue("saturation",0)}, transparent`,Jge={hue:NG,saturation:DG,lightness:()=>"black, transparent, white"},Qge={hue:NG,saturation:DG,brightness:()=>"black, transparent"};function e0e({direction:t,state:e,zChannel:n,xChannel:r,yChannel:i}){return T.useMemo(()=>{let s=t==="rtl"?"left":"right",o={},c=e.value.getChannelValue(n);switch(e.value.getColorSpace()){case"rgb":{let m=Ao("rgb(0, 0, 0)");o={background:[`linear-gradient(to ${s}, ${m.withChannelValue(r,0)}, ${m.withChannelValue(r,255)})`,`linear-gradient(to top, ${m.withChannelValue(i,0)}, ${m.withChannelValue(i,255)})`,m.withChannelValue(n,c)].join(","),backgroundBlendMode:"screen"};break}case"hsl":{let m=e.value.getColorChannels(),g=Ao("hsl(0, 100%, 50%)").withChannelValue(n,c),v=m.filter(x=>x!==n).map(x=>`linear-gradient(to ${x===r?s:"top"}, ${Jge[x](g)})`).reverse();n==="hue"&&v.push(g.toString("css")),o={background:v.join(", ")};break}case"hsb":{let m=e.value.getColorChannels(),g=Ao("hsb(0, 100%, 100%)").withChannelValue(n,c),v=m.filter(x=>x!==n).map(x=>`linear-gradient(to ${x===r?s:"top"}, ${Qge[x](g)})`).reverse();n==="hue"&&v.push(g.toString("css")),o={background:v.join(", ")};break}}let{x:u,y:h}=e.getThumbPosition();t==="rtl"&&(u=1-u);let f={forcedColorAdjust:"none"};return{colorAreaStyleProps:{style:{position:"relative",touchAction:"none",...f,...o}},thumbStyleProps:{style:{position:"absolute",left:`${u*100}%`,top:`${h*100}%`,transform:"translate(-50%, -50%)",touchAction:"none",...f}}}},[t,e,n,r,i])}function t0e(t){return t&&t.__esModule?t.default:t}function n0e(t,e){let{isDisabled:n,inputXRef:r,inputYRef:i,containerRef:a,"aria-label":s,xName:o,yName:c,form:u}=t,h=Hu(t0e(fI),"@react-aria/color"),{addGlobalListener:f,removeGlobalListener:m}=ih(),{direction:g,locale:v}=Qi(),[x,_]=T.useState(null),w=T.useCallback((xe=r)=>{xe.current&&ll(xe.current)},[r]);qf(r,e.defaultValue,e.setValue);let[S,E]=T.useState(!1),[A,N]=T.useState(!1),{xChannel:P,yChannel:R,zChannel:D}=e.channels,k=e.xChannelStep,L=e.yChannelStep,$=T.useRef(null),{keyboardProps:B}=aI({onKeyDown(xe){if(!/^(PageUp|PageDown|Home|End)$/.test(xe.key)){xe.continuePropagation();return}xe.preventDefault(),e.setDragging(!0),E(!0);let ht;switch(xe.key){case"PageUp":e.incrementY(e.yChannelPageStep),ht="y";break;case"PageDown":e.decrementY(e.yChannelPageStep),ht="y";break;case"Home":g==="rtl"?e.incrementX(e.xChannelPageStep):e.decrementX(e.xChannelPageStep),ht="x";break;case"End":g==="rtl"?e.decrementX(e.xChannelPageStep):e.incrementX(e.xChannelPageStep),ht="x";break}e.setDragging(!1),ht&&(w(ht==="x"?r:i),_(ht))}}),q={onMoveStart(){$.current=null,e.setDragging(!0)},onMove({deltaX:xe,deltaY:ht,pointerType:Fe,shiftKey:et}){var de;let{incrementX:re,decrementX:Ce,incrementY:ke,decrementY:De,xChannelPageStep:je,xChannelStep:mt,yChannelPageStep:rt,yChannelStep:bt,getThumbPosition:dt,setColorFromPoint:Je}=e;$.current==null&&($.current=dt());let{width:ot,height:It}=((de=a.current)===null||de===void 0?void 0:de.getBoundingClientRect())||{width:0,height:0},Ct=xe!==0||ht!==0;if(Fe==="keyboard"){let St=et&&je>mt?je:mt,Bt=et&&rt>bt?rt:bt;xe>0&&g==="ltr"||xe<0&&g==="rtl"?re(St):xe<0&&g==="ltr"||xe>0&&g==="rtl"?Ce(St):ht>0?De(Bt):ht<0&&ke(Bt),E(Ct),x=Ct&&Math.abs(ht)>Math.abs(xe)?"y":"x",_(x)}else $.current.x+=(g==="rtl"?-1:1)*xe/ot,$.current.y+=ht/It,Je($.current.x,$.current.y)},onMoveEnd(){z.current=!1,e.setDragging(!1),w(x==="x"?r:i)}},{moveProps:U}=H3(q),{focusWithinProps:J}=Kf({onFocusWithinChange:xe=>{xe||(E(!1),N(!1))}}),O=T.useRef(void 0),z=T.useRef(!1),{moveProps:V}=H3({onMoveStart(){z.current&&q.onMoveStart()},onMove(xe){z.current&&q.onMove(xe)},onMoveEnd(){z.current&&q.onMoveEnd()}}),H=xe=>{e.isDragging||(O.current=xe,E(!1),w(),e.setDragging(!0),typeof PointerEvent<"u"?f(window,"pointerup",ee,!1):(f(window,"mouseup",ee,!1),f(window,"touchend",ee,!1)))},ee=xe=>{var ht,Fe;((Fe=xe.pointerId)!==null&&Fe!==void 0?Fe:(ht=xe.changedTouches)===null||ht===void 0?void 0:ht[0].identifier)===O.current&&(E(!1),w(),e.setDragging(!1),O.current=void 0,z.current=!1,typeof PointerEvent<"u"?m(window,"pointerup",ee,!1):(m(window,"mouseup",ee,!1),m(window,"touchend",ee,!1)))},Y=(xe,ht,Fe,et)=>{let de=xe.getBoundingClientRect(),{width:re,height:Ce}=de,ke=(Fe-de.x)/re,De=(et-de.y)/Ce;g==="rtl"&&(ke=1-ke),ke>=0&&ke<=1&&De>=0&&De<=1&&!e.isDragging&&O.current===void 0&&(z.current=!0,E(!1),O.current=ht,e.setColorFromPoint(ke,De),w(),e.setDragging(!0),typeof PointerEvent<"u"?f(window,"pointerup",Z,!1):(f(window,"mouseup",Z,!1),f(window,"touchend",Z,!1)))},Z=xe=>{var ht,Fe;let et=(Fe=xe.pointerId)!==null&&Fe!==void 0?Fe:(ht=xe.changedTouches)===null||ht===void 0?void 0:ht[0].identifier;z.current&&et===O.current&&(z.current=!1,E(!1),O.current=void 0,e.setDragging(!1),w(),typeof PointerEvent<"u"?m(window,"pointerup",Z,!1):(m(window,"mouseup",Z,!1),m(window,"touchend",Z,!1)))},K=n?{}:Et({...typeof PointerEvent<"u"?{onPointerDown:xe=>{xe.pointerType==="mouse"&&(xe.button!==0||xe.altKey||xe.ctrlKey||xe.metaKey)||Y(xe.currentTarget,xe.pointerId,xe.clientX,xe.clientY)}}:{onMouseDown:xe=>{xe.button!==0||xe.altKey||xe.ctrlKey||xe.metaKey||Y(xe.currentTarget,void 0,xe.clientX,xe.clientY)},onTouchStart:xe=>{Y(xe.currentTarget,xe.changedTouches[0].identifier,xe.changedTouches[0].clientX,xe.changedTouches[0].clientY)}}},V),X=n?{}:Et({...typeof PointerEvent<"u"?{onPointerDown:xe=>{xe.pointerType==="mouse"&&(xe.button!==0||xe.altKey||xe.ctrlKey||xe.metaKey)||H(xe.pointerId)}}:{onMouseDown:xe=>{xe.button!==0||xe.altKey||xe.ctrlKey||xe.metaKey||H(void 0)},onTouchStart:xe=>{H(xe.changedTouches[0].identifier)}}},J,B,U),{focusProps:ne}=m_({onFocus:()=>{_("x")}}),{focusProps:G}=m_({onFocus:()=>{_("y")}});const te=xe=>{const{target:ht}=xe;N(!0),ht===r.current?e.setXValue(parseFloat(ht.value)):ht===i.current&&e.setYValue(parseFloat(ht.value))};let ae=Fy()||Q_(),pe=e.getDisplayColor();const ye=T.useCallback(xe=>`${A||S?h.format("colorNameAndValue",{name:pe.getChannelName(xe,v),value:pe.formatChannelValue(xe,v)}):[h.format("colorNameAndValue",{name:pe.getChannelName(xe,v),value:pe.formatChannelValue(xe,v)}),h.format("colorNameAndValue",{name:pe.getChannelName(xe===R?P:R,v),value:pe.formatChannelValue(xe===R?P:R,v)}),h.format("colorNameAndValue",{name:pe.getChannelName(D,v),value:pe.formatChannelValue(D,v)})].join(", ")}, ${pe.getColorName(v)}`,[v,pe,h,A,S,P,R,D]);let me=h.format("colorPicker"),fe=Wd({...t,"aria-label":s?h.format("colorInputLabel",{label:s,channelLabel:me}):me}),ge=Wd({...t,"aria-label":s?h.format("colorInputLabel",{label:s,channelLabel:me}):me}),be=Wd({...t,"aria-label":s?`${s}, ${me}`:void 0},ae?me:void 0),oe=h.format("twoDimensionalSlider"),{visuallyHiddenProps:Le}=tT({style:{opacity:"0.0001",width:"100%",height:"100%",pointerEvents:"none"}}),{colorAreaStyleProps:Ve,thumbStyleProps:Ze}=e0e({direction:g,state:e,xChannel:P,yChannel:R,zChannel:D});return{colorAreaProps:{...be,...K,...Ve,role:"group"},thumbProps:{...X,...Ze,role:"presentation"},xInputProps:{...fe,...Le,...ne,type:"range",min:e.value.getChannelRange(P).minValue,max:e.value.getChannelRange(P).maxValue,step:k,"aria-roledescription":oe,"aria-valuetext":ye(P),"aria-orientation":"horizontal","aria-describedby":t["aria-describedby"],"aria-details":t["aria-details"],disabled:n,value:e.value.getChannelValue(P),name:o,form:u,tabIndex:ae||!x||x==="x"?void 0:-1,"aria-hidden":ae||!x||x==="x"||S?void 0:"true",onChange:te},yInputProps:{...ge,...Le,...G,type:"range",min:e.value.getChannelRange(R).minValue,max:e.value.getChannelRange(R).maxValue,step:L,"aria-roledescription":oe,"aria-valuetext":ye(R),"aria-orientation":"vertical","aria-describedby":t["aria-describedby"],"aria-details":t["aria-details"],disabled:n,value:e.value.getChannelValue(R),name:c,form:u,tabIndex:ae||x==="y"?void 0:-1,"aria-hidden":ae||x==="y"||S?void 0:"true",onChange:te}}}const mI=new WeakMap;function jD(t,e){let n=mI.get(t);if(!n)throw new Error("Unknown slider state");return`${n.id}-${e}`}function kG(t,e,n){let{labelProps:r,fieldProps:i}=rT(t),a=t.orientation==="vertical";var s;mI.set(e,{id:(s=r.id)!==null&&s!==void 0?s:i.id,"aria-describedby":t["aria-describedby"],"aria-details":t["aria-details"]});let{direction:o}=Qi(),{addGlobalListener:c,removeGlobalListener:u}=ih();const h=T.useRef(null),f=o==="rtl",m=T.useRef(null),{moveProps:g}=H3({onMoveStart(){m.current=null},onMove({deltaX:w,deltaY:S}){if(!n.current)return;let{height:E,width:A}=n.current.getBoundingClientRect(),N=a?E:A;m.current==null&&h.current!=null&&(m.current=e.getThumbPercent(h.current)*N);let P=a?S:w;if((a||f)&&(P=-P),m.current+=P,h.current!=null&&n.current){const R=La(m.current/N,0,1);e.setThumbPercent(h.current,R)}},onMoveEnd(){h.current!=null&&(e.setThumbDragging(h.current,!1),h.current=null)}});let v=T.useRef(void 0),x=(w,S,E,A)=>{if(n.current&&!t.isDisabled&&e.values.every((N,P)=>!e.isThumbDragging(P))){let{height:N,width:P,top:R,left:D}=n.current.getBoundingClientRect(),k=a?N:P,q=((a?A:E)-(a?R:D))/k;(o==="rtl"||a)&&(q=1-q);let U=e.getPercentValue(q),J,O=e.values.findIndex(z=>U-z<0);if(O===0)J=O;else if(O===-1)J=e.values.length-1;else{let z=e.values[O-1],V=e.values[O];Math.abs(z-U)<Math.abs(V-U)?J=O-1:J=O}J>=0&&e.isThumbEditable(J)?(w.preventDefault(),h.current=J,e.setFocusedThumb(J),v.current=S,e.setThumbDragging(h.current,!0),e.setThumbValue(J,U),c(window,"mouseup",_,!1),c(window,"touchend",_,!1),c(window,"pointerup",_,!1)):h.current=null}},_=w=>{var S,E;((E=w.pointerId)!==null&&E!==void 0?E:(S=w.changedTouches)===null||S===void 0?void 0:S[0].identifier)===v.current&&(h.current!=null&&(e.setThumbDragging(h.current,!1),h.current=null),u(window,"mouseup",_,!1),u(window,"touchend",_,!1),u(window,"pointerup",_,!1))};return"htmlFor"in r&&r.htmlFor&&(delete r.htmlFor,r.onClick=()=>{var w;(w=document.getElementById(jD(e,0)))===null||w===void 0||w.focus(),iI("keyboard")}),{labelProps:r,groupProps:{role:"group",...i},trackProps:Et({onMouseDown(w){w.button!==0||w.altKey||w.ctrlKey||w.metaKey||x(w,void 0,w.clientX,w.clientY)},onPointerDown(w){w.pointerType==="mouse"&&(w.button!==0||w.altKey||w.ctrlKey||w.metaKey)||x(w,w.pointerId,w.clientX,w.clientY)},onTouchStart(w){x(w,w.changedTouches[0].identifier,w.changedTouches[0].clientX,w.changedTouches[0].clientY)},style:{position:"relative",touchAction:"none"}},g),outputProps:{htmlFor:e.values.map((w,S)=>jD(e,S)).join(" "),"aria-live":"off"}}}function RG(t,e){let{index:n=0,isRequired:r,validationState:i,isInvalid:a,trackRef:s,inputRef:o,orientation:c=e.orientation,name:u,form:h}=t,f=t.isDisabled||e.isDisabled,m=c==="vertical",{direction:g}=Qi(),{addGlobalListener:v,removeGlobalListener:x}=ih(),_=mI.get(e);var w;const{labelProps:S,fieldProps:E}=rT({...t,id:jD(e,n),"aria-labelledby":`${_.id} ${(w=t["aria-labelledby"])!==null&&w!==void 0?w:""}`.trim()}),A=e.values[n],N=T.useCallback(()=>{o.current&&ll(o.current)},[o]),P=e.focusedThumb===n;T.useEffect(()=>{P&&N()},[P,N]);let R=g==="rtl",D=T.useRef(null),{keyboardProps:k}=aI({onKeyDown(z){let{getThumbMaxValue:V,getThumbMinValue:H,decrementThumb:ee,incrementThumb:Y,setThumbValue:Z,setThumbDragging:K,pageSize:X}=e;if(!/^(PageUp|PageDown|Home|End)$/.test(z.key)){z.continuePropagation();return}switch(z.preventDefault(),K(n,!0),z.key){case"PageUp":Y(n,X);break;case"PageDown":ee(n,X);break;case"Home":Z(n,H(n));break;case"End":Z(n,V(n));break}K(n,!1)}}),{moveProps:L}=H3({onMoveStart(){D.current=null,e.setThumbDragging(n,!0)},onMove({deltaX:z,deltaY:V,pointerType:H,shiftKey:ee}){const{getThumbPercent:Y,setThumbPercent:Z,decrementThumb:K,incrementThumb:X,step:ne,pageSize:G}=e;if(!s.current)return;let{width:te,height:ae}=s.current.getBoundingClientRect(),pe=m?ae:te;if(D.current==null&&(D.current=Y(n)*pe),H==="keyboard")z>0&&R||z<0&&!R||V>0?K(n,ee?G:ne):X(n,ee?G:ne);else{let ye=m?V:z;(m||R)&&(ye=-ye),D.current+=ye,Z(n,La(D.current/pe,0,1))}},onMoveEnd(){e.setThumbDragging(n,!1)}});e.setThumbEditable(n,!f);const{focusableProps:$}=zy(Et(t,{onFocus:()=>e.setFocusedThumb(n),onBlur:()=>e.setFocusedThumb(void 0)}),o);let B=T.useRef(void 0),q=z=>{N(),B.current=z,e.setThumbDragging(n,!0),v(window,"mouseup",U,!1),v(window,"touchend",U,!1),v(window,"pointerup",U,!1)},U=z=>{var V,H;((H=z.pointerId)!==null&&H!==void 0?H:(V=z.changedTouches)===null||V===void 0?void 0:V[0].identifier)===B.current&&(N(),e.setThumbDragging(n,!1),x(window,"mouseup",U,!1),x(window,"touchend",U,!1),x(window,"pointerup",U,!1))},J=e.getThumbPercent(n);(m||g==="rtl")&&(J=1-J);let O=f?{}:Et(k,L,{onMouseDown:z=>{z.button!==0||z.altKey||z.ctrlKey||z.metaKey||q()},onPointerDown:z=>{z.button!==0||z.altKey||z.ctrlKey||z.metaKey||q(z.pointerId)},onTouchStart:z=>{q(z.changedTouches[0].identifier)}});return qf(o,e.defaultValues[n],z=>{e.setThumbValue(n,z)}),{inputProps:Et($,E,{type:"range",tabIndex:f?void 0:0,min:e.getThumbMinValue(n),max:e.getThumbMaxValue(n),step:e.step,value:A,name:u,form:h,disabled:f,"aria-orientation":c,"aria-valuetext":e.getThumbValueLabel(n),"aria-required":r||void 0,"aria-invalid":a||i==="invalid"||void 0,"aria-errormessage":t["aria-errormessage"],"aria-describedby":[_["aria-describedby"],t["aria-describedby"]].filter(Boolean).join(" "),"aria-details":[_["aria-details"],t["aria-details"]].filter(Boolean).join(" "),onChange:z=>{e.setThumbValue(n,parseFloat(z.target.value))}}),thumbProps:{...O,style:{position:"absolute",[m?"top":"left"]:`${J*100}%`,transform:"translate(-50%, -50%)",touchAction:"none"}},labelProps:S,isDragging:e.isThumbDragging(n),isDisabled:f,isFocused:P}}function r0e(t,e){let{trackRef:n,inputRef:r,orientation:i,channel:a,"aria-label":s,name:o,form:c}=t,{locale:u,direction:h}=Qi();!t.label&&!s&&!t["aria-labelledby"]&&(s=e.value.getChannelName(a,u));let{groupProps:f,trackProps:m,labelProps:g,outputProps:v}=kG({...t,"aria-label":s},e,n),{inputProps:x,thumbProps:_}=RG({index:0,orientation:i,isDisabled:t.isDisabled,name:o,form:c,trackRef:n,inputRef:r},e),w=e.getDisplayColor(),S=()=>{let N;switch(i==="vertical"?N="top":h==="ltr"?N="right":N="left",a){case"hue":{let P=[0,60,120,180,240,300,360].map(R=>w.withChannelValue("hue",R).toString("css")).join(", ");return`linear-gradient(to ${N}, ${P})`}case"lightness":{let P=e.getThumbMinValue(0),R=e.getThumbMaxValue(0),D=w.withChannelValue(a,P).toString("css"),k=w.withChannelValue(a,(R-P)/2).toString("css"),L=w.withChannelValue(a,R).toString("css");return`linear-gradient(to ${N}, ${D}, ${k}, ${L})`}case"saturation":case"brightness":case"red":case"green":case"blue":case"alpha":{let P=w.withChannelValue(a,e.getThumbMinValue(0)).toString("css"),R=w.withChannelValue(a,e.getThumbMaxValue(0)).toString("css");return`linear-gradient(to ${N}, ${P}, ${R})`}default:throw new Error("Unknown color channel: "+a)}},E={forcedColorAdjust:"none"};a==="hue"?x["aria-valuetext"]+=`, ${w.getHueName(u)}`:a!=="alpha"&&(x["aria-valuetext"]+=`, ${w.getColorName(u)}`);let{visuallyHiddenProps:A}=tT({style:{opacity:"0.0001",width:"100%",height:"100%",pointerEvents:"none"}});return{trackProps:{...Et(f,m),style:{...m.style,...E,background:S()}},inputProps:{...x,style:{...x.style,...A.style}},thumbProps:{..._,style:{..._.style,...E}},labelProps:g,outputProps:v}}var IG={};IG={Empty:""};var $G={};$G={Empty:""};var jG={};jG={Empty:"Przdn"};var LG={};LG={Empty:"Tom"};var OG={};OG={Empty:"Leer"};var FG={};FG={Empty:""};var BG={};BG={Empty:"Empty"};var zG={};zG={Empty:"Vaco"};var UG={};UG={Empty:"Thjenda"};var VG={};VG={Empty:"Tyhj"};var HG={};HG={Empty:"Vide"};var GG={};GG={Empty:""};var WG={};WG={Empty:"Prazno"};var qG={};qG={Empty:"res"};var KG={};KG={Empty:"Vuoto"};var XG={};XG={Empty:""};var YG={};YG={Empty:" "};var ZG={};ZG={Empty:"Tuias"};var JG={};JG={Empty:"Tuks"};var QG={};QG={Empty:"Tom"};var eW={};eW={Empty:"Leeg"};var tW={};tW={Empty:"Pusty"};var nW={};nW={Empty:"Vazio"};var rW={};rW={Empty:"Vazio"};var iW={};iW={Empty:"Gol"};var aW={};aW={Empty:" "};var sW={};sW={Empty:"Przdne"};var oW={};oW={Empty:"Prazen"};var lW={};lW={Empty:"Prazno"};var cW={};cW={Empty:"Tomt"};var uW={};uW={Empty:"Bo"};var dW={};dW={Empty:""};var hW={};hW={Empty:""};var fW={};fW={Empty:""};var pW={};pW={"ar-AE":IG,"bg-BG":$G,"cs-CZ":jG,"da-DK":LG,"de-DE":OG,"el-GR":FG,"en-US":BG,"es-ES":zG,"et-EE":UG,"fi-FI":VG,"fr-FR":HG,"he-IL":GG,"hr-HR":WG,"hu-HU":qG,"it-IT":KG,"ja-JP":XG,"ko-KR":YG,"lt-LT":ZG,"lv-LV":JG,"nb-NO":QG,"nl-NL":eW,"pl-PL":tW,"pt-BR":nW,"pt-PT":rW,"ro-RO":iW,"ru-RU":aW,"sk-SK":sW,"sl-SI":oW,"sr-SP":lW,"sv-SE":cW,"tr-TR":uW,"uk-UA":dW,"zh-CN":hW,"zh-TW":fW};function i0e(t){return t&&t.__esModule?t.default:t}function mW(t){const e=T.useRef(void 0);let{value:n,textValue:r,minValue:i,maxValue:a,isDisabled:s,isReadOnly:o,isRequired:c,onIncrement:u,onIncrementPage:h,onDecrement:f,onDecrementPage:m,onDecrementToMin:g,onIncrementToMax:v}=t;const x=Hu(i0e(pW),"@react-aria/spinbutton"),_=()=>clearTimeout(e.current);T.useEffect(()=>()=>_(),[]);let w=$=>{if(!($.ctrlKey||$.metaKey||$.shiftKey||$.altKey||o||$.nativeEvent.isComposing))switch($.key){case"PageUp":if(h){$.preventDefault(),h?.();break}case"ArrowUp":case"Up":u&&($.preventDefault(),u?.());break;case"PageDown":if(m){$.preventDefault(),m?.();break}case"ArrowDown":case"Down":f&&($.preventDefault(),f?.());break;case"Home":g&&($.preventDefault(),g?.());break;case"End":v&&($.preventDefault(),v?.());break}},S=T.useRef(!1),E=()=>{S.current=!0},A=()=>{S.current=!1},N=r===""?x.format("Empty"):(r||`${n}`).replace("-","");T.useEffect(()=>{S.current&&(hpe("assertive"),Xv(N,"assertive"))},[N]);const P=di($=>{_(),u?.(),e.current=window.setTimeout(()=>{(a===void 0||isNaN(a)||n===void 0||isNaN(n)||n<a)&&P(60)},$)}),R=di($=>{_(),f?.(),e.current=window.setTimeout(()=>{(i===void 0||isNaN(i)||n===void 0||isNaN(n)||n>i)&&R(60)},$)});let D=$=>{$.preventDefault()},{addGlobalListener:k,removeAllGlobalListeners:L}=ih();return{spinButtonProps:{role:"spinbutton","aria-valuenow":n!==void 0&&!isNaN(n)?n:void 0,"aria-valuetext":N,"aria-valuemin":i,"aria-valuemax":a,"aria-disabled":s||void 0,"aria-readonly":o||void 0,"aria-required":c||void 0,onKeyDown:w,onFocus:E,onBlur:A},incrementButtonProps:{onPressStart:()=>{P(400),k(window,"contextmenu",D)},onPressEnd:()=>{_(),L()},onFocus:E,onBlur:A},decrementButtonProps:{onPressStart:()=>{R(400),k(window,"contextmenu",D)},onPressEnd:()=>{_(),L()},onFocus:E,onBlur:A}}}function a0e(t,e,n){let{isDisabled:r,isReadOnly:i,isRequired:a,isWheelDisabled:s,validationBehavior:o="aria"}=t,{colorValue:c,inputValue:u,increment:h,decrement:f,incrementToMax:m,decrementToMin:g,commit:v}=e,x=Ji(),{spinButtonProps:_}=mW({isDisabled:r,isReadOnly:i,isRequired:a,maxValue:16777215,minValue:0,onIncrement:h,onIncrementToMax:m,onDecrement:f,onDecrementToMin:g,value:c?c.toHexInt():void 0,textValue:c?c.toString("hex"):void 0}),[w,S]=T.useState(!1),{focusWithinProps:E}=Kf({isDisabled:r,onFocusWithinChange:S}),A=T.useCallback(k=>{Math.abs(k.deltaY)<=Math.abs(k.deltaX)||(k.deltaY>0?h():k.deltaY<0&&f())},[f,h]);I7({onScroll:A,isDisabled:s||r||i||!w},n);let P=k=>{e.validate(k)&&e.setInputValue(k)},{inputProps:R,...D}=pV({...t,id:x,value:u,defaultValue:"!",validate:void 0,[sg]:e,type:"text",autoComplete:"off",onChange:P},e,n);return qf(n,e.defaultColorValue,e.setColorValue),R=Et(R,_,E,{role:"textbox","aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null,autoCorrect:"off",spellCheck:"false",onBlur:v}),o==="native"&&(R["aria-required"]=void 0),{inputProps:R,...D}}function s0e(t){return t&&t.__esModule?t.default:t}function o0e(t){let{color:e,colorName:n}=t,r=e||"#fff0",i=T.useMemo(()=>typeof r=="string"?Ao(r):r,[r]),{locale:a}=Qi(),s=gn(t,{labelable:!0}),o=Hu(s0e(fI),"@react-aria/color"),c=Ji(t.id);return n||(n=i.getChannelValue("alpha")===0?o.format("transparent"):i.getColorName(a)),{colorSwatchProps:{...s,role:"img","aria-roledescription":o.format("colorSwatch"),"aria-label":[n,t["aria-label"]||""].filter(Boolean).join(", "),"aria-labelledby":t["aria-labelledby"]?`${c} ${t["aria-labelledby"]}`:void 0,id:c,style:{backgroundColor:i.toString("css"),forcedColorAdjust:"none"}},color:i||null}}var gW={};gW={decrease:t=>` ${t.fieldLabel}`,increase:t=>` ${t.fieldLabel}`,numberField:" "};var vW={};vW={decrease:t=>` ${t.fieldLabel}`,increase:t=>` ${t.fieldLabel}`,numberField:"  "};var yW={};yW={decrease:t=>`Snit ${t.fieldLabel}`,increase:t=>`Zvit ${t.fieldLabel}`,numberField:"seln pole"};var bW={};bW={decrease:t=>`Reducer ${t.fieldLabel}`,increase:t=>`g ${t.fieldLabel}`,numberField:"Talfelt"};var xW={};xW={decrease:t=>`${t.fieldLabel} verringern`,increase:t=>`${t.fieldLabel} erhhen`,numberField:"Nummernfeld"};var _W={};_W={decrease:t=>` ${t.fieldLabel}`,increase:t=>` ${t.fieldLabel}`,numberField:" "};var wW={};wW={decrease:t=>`Decrease ${t.fieldLabel}`,increase:t=>`Increase ${t.fieldLabel}`,numberField:"Number field"};var SW={};SW={decrease:t=>`Reducir ${t.fieldLabel}`,increase:t=>`Aumentar ${t.fieldLabel}`,numberField:"Campo de nmero"};var EW={};EW={decrease:t=>`Vhenda ${t.fieldLabel}`,increase:t=>`Suurenda ${t.fieldLabel}`,numberField:"Numbri vli"};var CW={};CW={decrease:t=>`Vhenn ${t.fieldLabel}`,increase:t=>`Lis ${t.fieldLabel}`,numberField:"Numerokentt"};var TW={};TW={decrease:t=>`Diminuer ${t.fieldLabel}`,increase:t=>`Augmenter ${t.fieldLabel}`,numberField:"Champ de nombre"};var MW={};MW={decrease:t=>` ${t.fieldLabel}`,increase:t=>` ${t.fieldLabel}`,numberField:" "};var AW={};AW={decrease:t=>`Smanji ${t.fieldLabel}`,increase:t=>`Poveaj ${t.fieldLabel}`,numberField:"Polje broja"};var PW={};PW={decrease:t=>`${t.fieldLabel} cskkentse`,increase:t=>`${t.fieldLabel} nvelse`,numberField:"Szmmez"};var NW={};NW={decrease:t=>`Riduci ${t.fieldLabel}`,increase:t=>`Aumenta ${t.fieldLabel}`,numberField:"Campo numero"};var DW={};DW={decrease:t=>`${t.fieldLabel}`,increase:t=>`${t.fieldLabel}`,numberField:""};var kW={};kW={decrease:t=>`${t.fieldLabel} `,increase:t=>`${t.fieldLabel} `,numberField:" "};var RW={};RW={decrease:t=>`Sumainti ${t.fieldLabel}`,increase:t=>`Padidinti ${t.fieldLabel}`,numberField:"Numerio laukas"};var IW={};IW={decrease:t=>`Samazinana ${t.fieldLabel}`,increase:t=>`Palielinana ${t.fieldLabel}`,numberField:"Skaitu lauks"};var $W={};$W={decrease:t=>`Reduser ${t.fieldLabel}`,increase:t=>`k ${t.fieldLabel}`,numberField:"Tallfelt"};var jW={};jW={decrease:t=>`${t.fieldLabel} verlagen`,increase:t=>`${t.fieldLabel} verhogen`,numberField:"Getalveld"};var LW={};LW={decrease:t=>`Zmniejsz ${t.fieldLabel}`,increase:t=>`Zwiksz ${t.fieldLabel}`,numberField:"Pole numeru"};var OW={};OW={decrease:t=>`Diminuir ${t.fieldLabel}`,increase:t=>`Aumentar ${t.fieldLabel}`,numberField:"Campo de nmero"};var FW={};FW={decrease:t=>`Diminuir ${t.fieldLabel}`,increase:t=>`Aumentar ${t.fieldLabel}`,numberField:"Campo numrico"};var BW={};BW={decrease:t=>`Scdere ${t.fieldLabel}`,increase:t=>`Cretere ${t.fieldLabel}`,numberField:"Cmp numeric"};var zW={};zW={decrease:t=>` ${t.fieldLabel}`,increase:t=>` ${t.fieldLabel}`,numberField:" "};var UW={};UW={decrease:t=>`Zni ${t.fieldLabel}`,increase:t=>`Zvi ${t.fieldLabel}`,numberField:"seln pole"};var VW={};VW={decrease:t=>`Upadati ${t.fieldLabel}`,increase:t=>`Poveajte ${t.fieldLabel}`,numberField:"tevilno polje"};var HW={};HW={decrease:t=>`Smanji ${t.fieldLabel}`,increase:t=>`Poveaj ${t.fieldLabel}`,numberField:"Polje broja"};var GW={};GW={decrease:t=>`Minska ${t.fieldLabel}`,increase:t=>`ka ${t.fieldLabel}`,numberField:"Nummerflt"};var WW={};WW={decrease:t=>`${t.fieldLabel} azalt`,increase:t=>`${t.fieldLabel} arttr`,numberField:"Say alan"};var qW={};qW={decrease:t=>` ${t.fieldLabel}`,increase:t=>` ${t.fieldLabel}`,numberField:" "};var KW={};KW={decrease:t=>` ${t.fieldLabel}`,increase:t=>` ${t.fieldLabel}`,numberField:""};var XW={};XW={decrease:t=>` ${t.fieldLabel}`,increase:t=>` ${t.fieldLabel}`,numberField:""};var YW={};YW={"ar-AE":gW,"bg-BG":vW,"cs-CZ":yW,"da-DK":bW,"de-DE":xW,"el-GR":_W,"en-US":wW,"es-ES":SW,"et-EE":EW,"fi-FI":CW,"fr-FR":TW,"he-IL":MW,"hr-HR":AW,"hu-HU":PW,"it-IT":NW,"ja-JP":DW,"ko-KR":kW,"lt-LT":RW,"lv-LV":IW,"nb-NO":$W,"nl-NL":jW,"pl-PL":LW,"pt-BR":OW,"pt-PT":FW,"ro-RO":BW,"ru-RU":zW,"sk-SK":UW,"sl-SI":VW,"sr-SP":HW,"sv-SE":GW,"tr-TR":WW,"uk-UA":qW,"zh-CN":KW,"zh-TW":XW};function l0e(t){return t&&t.__esModule?t.default:t}function ZW(t,e,n){let{id:r,decrementAriaLabel:i,incrementAriaLabel:a,isDisabled:s,isReadOnly:o,isRequired:c,minValue:u,maxValue:h,autoFocus:f,label:m,formatOptions:g,onBlur:v=()=>{},onFocus:x,onFocusChange:_,onKeyDown:w,onKeyUp:S,description:E,errorMessage:A,isWheelDisabled:N,...P}=t,{increment:R,incrementToMax:D,decrement:k,decrementToMin:L,numberValue:$,inputValue:B,commit:q,commitValidation:U}=e;const J=Hu(l0e(YW),"@react-aria/numberfield");let O=Ji(r),{focusProps:z}=m_({onBlur(){q()}}),V=bD(g),H=T.useMemo(()=>V.resolvedOptions(),[V]),ee=bD({...g,currencySign:void 0}),Y=T.useMemo(()=>isNaN($)?"":ee.format($),[ee,$]),{spinButtonProps:Z,incrementButtonProps:K,decrementButtonProps:X}=mW({isDisabled:s,isReadOnly:o,isRequired:c,maxValue:h,minValue:u,onIncrement:R,onIncrementToMax:D,onDecrement:k,onDecrementToMin:L,value:$,textValue:Y}),[ne,G]=T.useState(!1),{focusWithinProps:te}=Kf({isDisabled:s,onFocusWithinChange:G}),ae=T.useCallback(dt=>{Math.abs(dt.deltaY)<=Math.abs(dt.deltaX)||(dt.deltaY>0?R():dt.deltaY<0&&k())},[k,R]);I7({onScroll:ae,isDisabled:N||s||o||!ne},n);var ye;let me=((ye=H.maximumFractionDigits)!==null&&ye!==void 0?ye:0)>0,fe=e.minValue===void 0||isNaN(e.minValue)||e.minValue<0,ge="numeric";rz()?fe?ge="text":me&&(ge="decimal"):Q_()&&(fe?ge="numeric":me&&(ge="decimal"));let be=dt=>{e.validate(dt)&&e.setInputValue(dt)},oe=gn(t),Le=T.useCallback(dt=>{dt.nativeEvent.isComposing||(dt.key==="Enter"?(q(),U()):dt.continuePropagation())},[q,U]),{isInvalid:Ve,validationErrors:Ze,validationDetails:xe}=e.displayValidation,{labelProps:ht,inputProps:Fe,descriptionProps:et,errorMessageProps:de}=pV({...P,...oe,name:void 0,form:void 0,label:m,autoFocus:f,isDisabled:s,isReadOnly:o,isRequired:c,validate:void 0,[sg]:e,value:B,defaultValue:"!",autoComplete:"off","aria-label":t["aria-label"]||void 0,"aria-labelledby":t["aria-labelledby"]||void 0,id:O,type:"text",inputMode:ge,onChange:be,onBlur:v,onFocus:x,onFocusChange:_,onKeyDown:T.useMemo(()=>Gc(Le,w),[Le,w]),onKeyUp:S,description:E,errorMessage:A},e,n);qf(n,e.defaultNumberValue,e.setNumberValue);let re=Et(Z,z,Fe,{role:null,"aria-roledescription":Fy()?null:J.format("numberField"),"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null,autoCorrect:"off",spellCheck:"false"});t.validationBehavior==="native"&&(re["aria-required"]=void 0);let Ce=dt=>{var Je;document.activeElement!==n.current&&(dt.pointerType==="mouse"?(Je=n.current)===null||Je===void 0||Je.focus():dt.target.focus())},ke=t["aria-label"]||(typeof t.label=="string"?t.label:""),De;ke||(De=t.label!=null?ht.id:t["aria-labelledby"]);let je=Ji(),mt=Ji(),rt=Et(K,{"aria-label":a||J.format("increase",{fieldLabel:ke}).trim(),id:De&&!a?je:null,"aria-labelledby":De&&!a?`${je} ${De}`:null,"aria-controls":O,excludeFromTabOrder:!0,preventFocusOnPress:!0,allowFocusWhenDisabled:!0,isDisabled:!e.canIncrement,onPressStart:Ce}),bt=Et(X,{"aria-label":i||J.format("decrease",{fieldLabel:ke}).trim(),id:De&&!i?mt:null,"aria-labelledby":De&&!i?`${mt} ${De}`:null,"aria-controls":O,excludeFromTabOrder:!0,preventFocusOnPress:!0,allowFocusWhenDisabled:!0,isDisabled:!e.canDecrement,onPressStart:Ce});return{groupProps:{...te,role:"group","aria-disabled":s,"aria-invalid":Ve?"true":void 0},labelProps:ht,inputProps:re,incrementButtonProps:rt,decrementButtonProps:bt,errorMessageProps:de,descriptionProps:et,isInvalid:Ve,validationErrors:Ze,validationDetails:xe}}function c0e(t,e,n){let{locale:r}=Qi();return ZW({...t,value:void 0,defaultValue:void 0,onChange:void 0,validate:void 0,"aria-label":t["aria-label"]||(t.label||t["aria-labelledby"]?void 0:e.colorValue.getChannelName(t.channel,r))},e,n)}function u0e(t,e){let{role:n="dialog"}=t,r=h_();r=t["aria-label"]?void 0:r;let i=T.useRef(!1);return T.useEffect(()=>{if(e.current&&!e.current.contains(document.activeElement)){Hf(e.current);let a=setTimeout(()=>{(document.activeElement===e.current||document.activeElement===document.body)&&(i.current=!0,e.current&&(e.current.blur(),Hf(e.current)),i.current=!1)},500);return()=>{clearTimeout(a)}}},[e]),EU(),{dialogProps:{...gn(t,{labelable:!0}),role:n,tabIndex:-1,"aria-labelledby":t["aria-labelledby"]||r,onBlur:a=>{i.current&&a.stopPropagation()}},titleProps:{id:r}}}const JW=new WeakMap;function d0e(t,e,n){let{value:r,children:i,"aria-label":a,"aria-labelledby":s,onPressStart:o,onPressEnd:c,onPressChange:u,onPress:h,onPressUp:f,onClick:m}=t;const g=t.isDisabled||e.isDisabled;let v=e.selectedValue===r,x=q=>{q.stopPropagation(),e.setSelectedValue(r)},{pressProps:_,isPressed:w}=Vf({onPressStart:o,onPressEnd:c,onPressChange:u,onPress:h,onPressUp:f,onClick:m,isDisabled:g}),{pressProps:S,isPressed:E}=Vf({onPressStart:o,onPressEnd:c,onPressChange:u,onPressUp:f,onClick:m,isDisabled:g,onPress(q){var U;h?.(q),e.setSelectedValue(r),(U=n.current)===null||U===void 0||U.focus()}}),{focusableProps:A}=zy(Et(t,{onFocus:()=>e.setLastFocusedValue(r)}),n),N=Et(_,A),P=gn(t,{labelable:!0}),R=-1;e.selectedValue!=null?e.selectedValue===r&&(R=0):(e.lastFocusedValue===r||e.lastFocusedValue==null)&&(R=0),g&&(R=void 0);let{name:D,form:k,descriptionId:L,errorMessageId:$,validationBehavior:B}=JW.get(e);return qf(n,e.defaultSelectedValue,e.setSelectedValue),sT({validationBehavior:B},e,n),{labelProps:Et(S,T.useMemo(()=>({onClick:q=>q.preventDefault(),onMouseDown:q=>q.preventDefault()}),[])),inputProps:Et(P,{...N,type:"radio",name:D,form:k,tabIndex:R,disabled:g,required:e.isRequired&&B==="native",checked:v,value:r,onChange:x,"aria-describedby":[t["aria-describedby"],e.isInvalid?$:null,L].filter(Boolean).join(" ")||void 0}),isDisabled:g,isSelected:v,isPressed:w||E}}function h0e(t,e){let{name:n,form:r,isReadOnly:i,isRequired:a,isDisabled:s,orientation:o="vertical",validationBehavior:c="aria"}=t,{direction:u}=Qi(),{isInvalid:h,validationErrors:f,validationDetails:m}=e.displayValidation,{labelProps:g,fieldProps:v,descriptionProps:x,errorMessageProps:_}=uI({...t,labelElementType:"span",isInvalid:e.isInvalid,errorMessage:t.errorMessage||f}),w=gn(t,{labelable:!0}),{focusWithinProps:S}=Kf({onBlurWithin(N){var P;(P=t.onBlur)===null||P===void 0||P.call(t,N),e.selectedValue||e.setLastFocusedValue(null)},onFocusWithin:t.onFocus,onFocusWithinChange:t.onFocusChange}),E=N=>{let P;switch(N.key){case"ArrowRight":u==="rtl"&&o!=="vertical"?P="prev":P="next";break;case"ArrowLeft":u==="rtl"&&o!=="vertical"?P="next":P="prev";break;case"ArrowDown":P="next";break;case"ArrowUp":P="prev";break;default:return}N.preventDefault();let R=Vs(N.currentTarget,{from:N.target,accept:k=>k instanceof Co(k).HTMLInputElement&&k.type==="radio"}),D;P==="next"?(D=R.nextNode(),D||(R.currentNode=N.currentTarget,D=R.firstChild())):(D=R.previousNode(),D||(R.currentNode=N.currentTarget,D=R.lastChild())),D&&(D.focus(),e.setSelectedValue(D.value))},A=Ji(n);return JW.set(e,{name:A,form:r,descriptionId:x.id,errorMessageId:_.id,validationBehavior:c}),{radioGroupProps:Et(w,{role:"radiogroup",onKeyDown:E,"aria-invalid":e.isInvalid||void 0,"aria-errormessage":t["aria-errormessage"],"aria-readonly":i||void 0,"aria-required":a||void 0,"aria-disabled":s||void 0,"aria-orientation":o,...v,...S}),labelProps:g,descriptionProps:x,errorMessageProps:_,isInvalid:h,validationErrors:f,validationDetails:m}}const gI=new WeakMap;function f0e(t,e,n){let{keyboardDelegate:r,isDisabled:i,isRequired:a,name:s,form:o,validationBehavior:c="aria"}=t,u=Q2({usage:"search",sensitivity:"base"}),h=T.useMemo(()=>r||new iT(e.collection,e.disabledKeys,n,u),[r,e.collection,e.disabledKeys,u,n]),{menuTriggerProps:f,menuProps:m}=fV({isDisabled:i,type:"listbox"},e,n),g=k=>{if(e.selectionManager.selectionMode!=="multiple")switch(k.key){case"ArrowLeft":{var L,$;k.preventDefault();let U=e.selectedKey!=null?(L=h.getKeyAbove)===null||L===void 0?void 0:L.call(h,e.selectedKey):($=h.getFirstKey)===null||$===void 0?void 0:$.call(h);U&&e.setSelectedKey(U);break}case"ArrowRight":{var B,q;k.preventDefault();let U=e.selectedKey!=null?(B=h.getKeyBelow)===null||B===void 0?void 0:B.call(h,e.selectedKey):(q=h.getFirstKey)===null||q===void 0?void 0:q.call(h);U&&e.setSelectedKey(U);break}}},{typeSelectProps:v}=MU({keyboardDelegate:h,selectionManager:e.selectionManager,onTypeSelect(k){e.setSelectedKey(k)}}),{isInvalid:x,validationErrors:_,validationDetails:w}=e.displayValidation,{labelProps:S,fieldProps:E,descriptionProps:A,errorMessageProps:N}=uI({...t,labelElementType:"span",isInvalid:x,errorMessage:t.errorMessage||_});v.onKeyDown=v.onKeyDownCapture,delete v.onKeyDownCapture,e.selectionManager.selectionMode==="multiple"&&(v={});let P=gn(t,{labelable:!0}),R=Et(v,f,E),D=Ji();return gI.set(e,{isDisabled:i,isRequired:a,name:s,form:o,validationBehavior:c}),{labelProps:{...S,onClick:()=>{if(!t.isDisabled){var k;(k=n.current)===null||k===void 0||k.focus(),iI("keyboard")}}},triggerProps:Et(P,{...R,isDisabled:i,onKeyDown:Gc(R.onKeyDown,g,t.onKeyDown),onKeyUp:t.onKeyUp,"aria-labelledby":[D,R["aria-labelledby"],R["aria-label"]&&!R["aria-labelledby"]?R.id:null].filter(Boolean).join(" "),onFocus(k){e.isFocused||(t.onFocus&&t.onFocus(k),t.onFocusChange&&t.onFocusChange(!0),e.setFocused(!0))},onBlur(k){e.isOpen||(t.onBlur&&t.onBlur(k),t.onFocusChange&&t.onFocusChange(!1),e.setFocused(!1))}}),valueProps:{id:D},menuProps:{...m,autoFocus:e.focusStrategy||!0,shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,disallowEmptySelection:!0,linkBehavior:"selection",onBlur:k=>{k.currentTarget.contains(k.relatedTarget)||(t.onBlur&&t.onBlur(k),t.onFocusChange&&t.onFocusChange(!1),e.setFocused(!1))},"aria-labelledby":[E["aria-labelledby"],R["aria-label"]&&!E["aria-labelledby"]?R.id:null].filter(Boolean).join(" ")},descriptionProps:A,errorMessageProps:N,isInvalid:x,validationErrors:_,validationDetails:w,hiddenSelectProps:{isDisabled:i,name:s,label:t.label,state:e,triggerRef:n,form:o}}}function p0e(t,e,n){let r=gI.get(e)||{},{autoComplete:i,name:a=r.name,form:s=r.form,isDisabled:o=r.isDisabled}=t,{validationBehavior:c,isRequired:u}=r,{visuallyHiddenProps:h}=tT({style:{position:"fixed",top:0,left:0}});qf(t.selectRef,e.defaultValue,e.setValue),sT({validationBehavior:c,focus:()=>{var v;return(v=n.current)===null||v===void 0?void 0:v.focus()}},e,t.selectRef);let f=e.setValue,m=T.useCallback(v=>{v.target.multiple?f(Array.from(v.target.selectedOptions,x=>x.value)):f(v.currentTarget.value)},[f]);var g;return{containerProps:{...h,"aria-hidden":!0,"data-react-aria-prevent-focus":!0,"data-a11y-ignore":"aria-hidden-focus"},inputProps:{style:{display:"none"}},selectProps:{tabIndex:-1,autoComplete:i,disabled:o,multiple:e.selectionManager.selectionMode==="multiple",required:c==="native"&&u,name:a,form:s,value:(g=e.value)!==null&&g!==void 0?g:"",onChange:m,onInput:m}}}function m0e(t){let{state:e,triggerRef:n,label:r,name:i,form:a,isDisabled:s}=t,o=T.useRef(null),c=T.useRef(null),{containerProps:u,selectProps:h}=p0e({...t,selectRef:e.collection.size<=300?o:c},e,n);if(e.collection.size<=300)return ve.createElement("div",{...u,"data-testid":"hidden-select-container"},ve.createElement("label",null,r,ve.createElement("select",{...h,ref:o},ve.createElement("option",null),[...e.collection.getKeys()].map(f=>{let m=e.collection.getItem(f);if(m&&m.type==="item")return ve.createElement("option",{key:m.key,value:m.key},m.textValue)}))));if(i){let f=gI.get(e)||{},{validationBehavior:m}=f,g=Array.isArray(e.value)?e.value:[e.value];g.length===0&&(g=[null]);let v=g.map((x,_)=>{let w={type:"hidden",autoComplete:h.autoComplete,name:i,form:a,disabled:s,value:x??""};return m==="native"?ve.createElement("input",{key:_,...w,ref:_===0?c:null,style:{display:"none"},type:"text",required:_===0?h.required:!1,onChange:()=>{}}):ve.createElement("input",{key:_,...w,ref:_===0?c:null})});return ve.createElement(ve.Fragment,null,v)}return null}function g0e(t,e,n){let{labelProps:r,inputProps:i,isSelected:a,isPressed:s,isDisabled:o,isReadOnly:c}=lH(t,e,n);return{labelProps:r,inputProps:{...i,role:"switch",checked:a},isSelected:a,isPressed:s,isDisabled:o,isReadOnly:c}}const QW=new WeakMap;function K3(t,e,n){return t?(typeof e=="string"&&(e=e.replace(/\s+/g,"")),`${QW.get(t)}-${n}-${e}`):""}function v0e(t,e,n){let{key:r,isDisabled:i,shouldSelectOnPressUp:a}=t,{selectionManager:s,selectedKey:o}=e,c=r===o,u=i||e.isDisabled||e.selectionManager.isDisabled(r),{itemProps:h,isPressed:f}=AU({selectionManager:s,key:r,ref:n,isDisabled:u,shouldSelectOnPressUp:a,linkBehavior:"selection"}),m=K3(e,r,"tab"),g=K3(e,r,"tabpanel"),{tabIndex:v}=h,x=e.collection.getItem(r),_=gn(x?.props,{labelable:!0});delete _.id;let w=az(x?.props),{focusableProps:S}=zy({isDisabled:u},n);return{tabProps:Et(_,S,w,h,{id:m,"aria-selected":c,"aria-disabled":u||void 0,"aria-controls":c?g:void 0,tabIndex:u?void 0:v,role:"tab"}),isSelected:c,isDisabled:u,isPressed:f}}function y0e(t,e,n){let r=Tme(n)?void 0:0;var i;const a=K3(e,(i=t.id)!==null&&i!==void 0?i:e?.selectedKey,"tabpanel"),s=Wd({...t,id:a,"aria-labelledby":K3(e,e?.selectedKey,"tab")});return{tabPanelProps:Et(s,{tabIndex:r,role:"tabpanel","aria-describedby":t["aria-describedby"],"aria-details":t["aria-details"]})}}class b0e{getKeyLeftOf(e){return this.flipDirection?this.getNextKey(e):this.getPreviousKey(e)}getKeyRightOf(e){return this.flipDirection?this.getPreviousKey(e):this.getNextKey(e)}isDisabled(e){var n,r;return this.disabledKeys.has(e)||!!(!((r=this.collection.getItem(e))===null||r===void 0||(n=r.props)===null||n===void 0)&&n.isDisabled)}getFirstKey(){let e=this.collection.getFirstKey();return e!=null&&this.isDisabled(e)&&(e=this.getNextKey(e)),e}getLastKey(){let e=this.collection.getLastKey();return e!=null&&this.isDisabled(e)&&(e=this.getPreviousKey(e)),e}getKeyAbove(e){return this.tabDirection?null:this.getPreviousKey(e)}getKeyBelow(e){return this.tabDirection?null:this.getNextKey(e)}getNextKey(e){let n=e;do n=this.collection.getKeyAfter(n),n==null&&(n=this.collection.getFirstKey());while(n!=null&&this.isDisabled(n));return n}getPreviousKey(e){let n=e;do n=this.collection.getKeyBefore(n),n==null&&(n=this.collection.getLastKey());while(n!=null&&this.isDisabled(n));return n}constructor(e,n,r,i=new Set){this.collection=e,this.flipDirection=n==="rtl"&&r==="horizontal",this.disabledKeys=i,this.tabDirection=r==="horizontal"}}function x0e(t,e,n){let{orientation:r="horizontal",keyboardActivation:i="automatic"}=t,{collection:a,selectionManager:s,disabledKeys:o}=e,{direction:c}=Qi(),u=T.useMemo(()=>new b0e(a,c,r,o),[a,o,r,c]),{collectionProps:h}=dI({ref:n,selectionManager:s,keyboardDelegate:u,selectOnFocus:i==="automatic",disallowEmptySelection:!0,scrollRef:n,linkBehavior:"selection"}),f=Ji();QW.set(e,f);let m=Wd({...t,id:f});return{tabListProps:{...Et(h,m),role:"tablist","aria-orientation":r,tabIndex:void 0}}}const ml=T.createContext({}),kt=Cg(function(e,n){[e,n]=rr(e,n,ml);let{elementType:r="label",...i}=e;return ve.createElement(r,{className:"react-aria-Label",...i,ref:n})}),_0e=T.createContext(null),Yf=T.createContext({}),Pt=Cg(function(e,n){[e,n]=rr(e,n,Yf);let r=e,{isPending:i}=r,{buttonProps:a,isPressed:s}=sH(e,n);a=w0e(a,i);let{focusProps:o,isFocused:c,isFocusVisible:u}=Xs(e),{hoverProps:h,isHovered:f}=pl({...e,isDisabled:e.isDisabled||i}),m={isHovered:f,isPressed:(r.isPressed||s)&&!i,isFocused:c,isFocusVisible:u,isDisabled:e.isDisabled||!1,isPending:i??!1},g=On({...e,values:m,defaultClassName:"react-aria-Button"}),v=Ji(a.id),x=Ji(),_=a["aria-labelledby"];i&&(_?_=`${_} ${x}`:a["aria-label"]&&(_=`${v} ${x}`));let w=T.useRef(i);T.useEffect(()=>{let E={"aria-labelledby":_||v};(!w.current&&c&&i||w.current&&c&&!i)&&Xv(E,"assertive"),w.current=i},[i,c,_,v]);let S=gn(e,{global:!0});return delete S.onClick,ve.createElement("button",{...Et(S,g,a,o,h),type:a.type==="submit"&&i?"button":a.type,id:v,ref:n,"aria-labelledby":_,slot:e.slot||void 0,"aria-disabled":i?"true":a["aria-disabled"],"data-disabled":e.isDisabled||void 0,"data-pressed":m.isPressed||void 0,"data-hovered":f||void 0,"data-focused":c||void 0,"data-pending":i||void 0,"data-focus-visible":u||void 0},ve.createElement(_0e.Provider,{value:{id:x}},g.children))});function w0e(t,e){if(e){for(const n in t)n.startsWith("on")&&!(n.includes("Focus")||n.includes("Blur"))&&(t[n]=void 0);t.href=void 0,t.target=void 0}return t}const Zl=T.createContext({}),v_=T.forwardRef(function(e,n){[e,n]=rr(e,n,Zl);let{elementType:r="span",...i}=e;return ve.createElement(r,{className:"react-aria-Text",...i,ref:n})});class LD{*[Symbol.iterator](){yield*this.iterable}get size(){return this._size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){let n=this.keyMap.get(e);var r;return n&&(r=n.prevKey)!==null&&r!==void 0?r:null}getKeyAfter(e){let n=this.keyMap.get(e);var r;return n&&(r=n.nextKey)!==null&&r!==void 0?r:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){var n;return(n=this.keyMap.get(e))!==null&&n!==void 0?n:null}at(e){const n=[...this.getKeys()];return this.getItem(n[e])}getChildren(e){let n=this.keyMap.get(e);return n?.childNodes||[]}constructor(e){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.iterable=e;let n=o=>{if(this.keyMap.set(o.key,o),o.childNodes&&o.type==="section")for(let c of o.childNodes)n(c)};for(let o of e)n(o);let r=null,i=0,a=0;for(let[o,c]of this.keyMap)r?(r.nextKey=o,c.prevKey=r.key):(this.firstKey=o,c.prevKey=void 0),c.type==="item"&&(c.index=i++),(c.type==="section"||c.type==="item")&&a++,r=c,r.nextKey=void 0;this._size=a;var s;this.lastKey=(s=r?.key)!==null&&s!==void 0?s:null}}class Mc extends Set{constructor(e,n,r){super(e),e instanceof Mc?(this.anchorKey=n??e.anchorKey,this.currentKey=r??e.currentKey):(this.anchorKey=n??null,this.currentKey=r??null)}}function S0e(t,e){if(t.size!==e.size)return!1;for(let n of t)if(!e.has(n))return!1;return!0}function E0e(t){let{selectionMode:e="none",disallowEmptySelection:n=!1,allowDuplicateSelectionEvents:r,selectionBehavior:i="toggle",disabledBehavior:a="all"}=t,s=T.useRef(!1),[,o]=T.useState(!1),c=T.useRef(null),u=T.useRef(null),[,h]=T.useState(null),f=T.useMemo(()=>ML(t.selectedKeys),[t.selectedKeys]),m=T.useMemo(()=>ML(t.defaultSelectedKeys,new Mc),[t.defaultSelectedKeys]),[g,v]=Xa(f,m,t.onSelectionChange),x=T.useMemo(()=>t.disabledKeys?new Set(t.disabledKeys):new Set,[t.disabledKeys]),[_,w]=T.useState(i);i==="replace"&&_==="toggle"&&typeof g=="object"&&g.size===0&&w("replace");let S=T.useRef(i);return T.useEffect(()=>{i!==S.current&&(w(i),S.current=i)},[i]),{selectionMode:e,disallowEmptySelection:n,selectionBehavior:_,setSelectionBehavior:w,get isFocused(){return s.current},setFocused(E){s.current=E,o(E)},get focusedKey(){return c.current},get childFocusStrategy(){return u.current},setFocusedKey(E,A="first"){c.current=E,u.current=A,h(E)},selectedKeys:g,setSelectedKeys(E){(r||!S0e(E,g))&&v(E)},disabledKeys:x,disabledBehavior:a}}function ML(t,e){return t?t==="all"?"all":new Mc(t):e}class vI{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,n){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,n)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){if(this.state.selectionMode==="none")return!1;let n=this.getKey(e);return n==null?!1:this.state.selectedKeys==="all"?this.canSelectItem(n):this.state.selectedKeys.has(n)}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),n=this.state.selectedKeys;return this._isSelectAll=e.every(r=>n.has(r)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let r of this.state.selectedKeys){let i=this.collection.getItem(r);(!e||i&&Q4(this.collection,i,e)<0)&&(e=i)}var n;return(n=e?.key)!==null&&n!==void 0?n:null}get lastSelectedKey(){let e=null;for(let r of this.state.selectedKeys){let i=this.collection.getItem(r);(!e||i&&Q4(this.collection,i,e)>0)&&(e=i)}var n;return(n=e?.key)!==null&&n!==void 0?n:null}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}let n=this.getKey(e);if(n==null)return;let r;if(this.state.selectedKeys==="all")r=new Mc([n],n,n);else{let s=this.state.selectedKeys;var i;let o=(i=s.anchorKey)!==null&&i!==void 0?i:n;r=new Mc(s,o,n);var a;for(let c of this.getKeyRange(o,(a=s.currentKey)!==null&&a!==void 0?a:n))r.delete(c);for(let c of this.getKeyRange(n,o))this.canSelectItem(c)&&r.add(c)}this.state.setSelectedKeys(r)}getKeyRange(e,n){let r=this.collection.getItem(e),i=this.collection.getItem(n);return r&&i?Q4(this.collection,r,i)<=0?this.getKeyRangeInternal(e,n):this.getKeyRangeInternal(n,e):[]}getKeyRangeInternal(e,n){var r;if(!((r=this.layoutDelegate)===null||r===void 0)&&r.getKeyRange)return this.layoutDelegate.getKeyRange(e,n);let i=[],a=e;for(;a!=null;){let s=this.collection.getItem(a);if(s&&(s.type==="item"||s.type==="cell"&&this.allowsCellSelection)&&i.push(a),a===n)return i;a=this.collection.getKeyAfter(a)}return[]}getKey(e){let n=this.collection.getItem(e);if(!n||n.type==="cell"&&this.allowsCellSelection)return e;for(;n&&n.type!=="item"&&n.parentKey!=null;)n=this.collection.getItem(n.parentKey);return!n||n.type!=="item"?null:n.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}let n=this.getKey(e);if(n==null)return;let r=new Mc(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);r.has(n)?r.delete(n):this.canSelectItem(n)&&(r.add(n),r.anchorKey=n,r.currentKey=n),!(this.disallowEmptySelection&&r.size===0)&&this.state.setSelectedKeys(r)}replaceSelection(e){if(this.selectionMode==="none")return;let n=this.getKey(e);if(n==null)return;let r=this.canSelectItem(n)?new Mc([n],n,n):new Mc;this.state.setSelectedKeys(r)}setSelectedKeys(e){if(this.selectionMode==="none")return;let n=new Mc;for(let r of e){let i=this.getKey(r);if(i!=null&&(n.add(i),this.selectionMode==="single"))break}this.state.setSelectedKeys(n)}getSelectAllKeys(){let e=[],n=r=>{for(;r!=null;){if(this.canSelectItem(r)){var i;let s=this.collection.getItem(r);s?.type==="item"&&e.push(r);var a;s?.hasChildNodes&&(this.allowsCellSelection||s.type!=="item")&&n((a=(i=Kme(aT(s,this.collection)))===null||i===void 0?void 0:i.key)!==null&&a!==void 0?a:null)}r=this.collection.getKeyAfter(r)}};return n(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new Mc)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,n){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||n&&(n.pointerType==="touch"||n.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let n=this.selectedKeys;if(e.size!==n.size)return!1;for(let r of e)if(!n.has(r))return!1;for(let r of n)if(!e.has(r))return!1;return!0}canSelectItem(e){var n;if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let r=this.collection.getItem(e);return!(!r||!(r==null||(n=r.props)===null||n===void 0)&&n.isDisabled||r.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){var n,r;return this.state.disabledBehavior==="all"&&(this.state.disabledKeys.has(e)||!!(!((r=this.collection.getItem(e))===null||r===void 0||(n=r.props)===null||n===void 0)&&n.isDisabled))}isLink(e){var n,r;return!!(!((r=this.collection.getItem(e))===null||r===void 0||(n=r.props)===null||n===void 0)&&n.href)}getItemProps(e){var n;return(n=this.collection.getItem(e))===null||n===void 0?void 0:n.props}withCollection(e){return new vI(e,this.state,{allowsCellSelection:this.allowsCellSelection,layoutDelegate:this.layoutDelegate||void 0})}constructor(e,n,r){this.collection=e,this.state=n;var i;this.allowsCellSelection=(i=r?.allowsCellSelection)!==null&&i!==void 0?i:!1,this._isSelectAll=null,this.layoutDelegate=r?.layoutDelegate||null}}function yI(t){let{filter:e,layoutDelegate:n}=t,r=E0e(t),i=T.useMemo(()=>t.disabledKeys?new Set(t.disabledKeys):new Set,[t.disabledKeys]),a=T.useCallback(u=>e?new LD(e(u)):new LD(u),[e]),s=T.useMemo(()=>({suppressTextValueWarning:t.suppressTextValueWarning}),[t.suppressTextValueWarning]),o=qme(t,a,s),c=T.useMemo(()=>new vI(o,r,{layoutDelegate:n}),[o,r,n]);return eq(o,c),{collection:o,disabledKeys:i,selectionManager:c}}function C0e(t,e){let n=T.useMemo(()=>e?t.collection.filter(e):t.collection,[t.collection,e]),r=t.selectionManager.withCollection(n);return eq(n,r),{collection:n,selectionManager:r,disabledKeys:t.disabledKeys}}function eq(t,e){const n=T.useRef(null);T.useEffect(()=>{if(e.focusedKey!=null&&!t.getItem(e.focusedKey)&&n.current){const h=n.current.getItem(e.focusedKey),f=[...n.current.getKeys()].map(w=>{const S=n.current.getItem(w);return S?.type==="item"?S:null}).filter(w=>w!==null),m=[...t.getKeys()].map(w=>{const S=t.getItem(w);return S?.type==="item"?S:null}).filter(w=>w!==null);var r,i;const g=((r=f?.length)!==null&&r!==void 0?r:0)-((i=m?.length)!==null&&i!==void 0?i:0);var a,s,o;let v=Math.min(g>1?Math.max(((a=h?.index)!==null&&a!==void 0?a:0)-g+1,0):(s=h?.index)!==null&&s!==void 0?s:0,((o=m?.length)!==null&&o!==void 0?o:0)-1),x=null,_=!1;for(;v>=0;){if(!e.isDisabled(m[v].key)){x=m[v];break}if(v<m.length-1&&!_)v++;else{_=!0;var c,u;v>((c=h?.index)!==null&&c!==void 0?c:0)&&(v=(u=h?.index)!==null&&u!==void 0?u:0),v--}}e.setFocusedKey(x?x.key:null)}n.current=t},[t,e])}function tq(t){var e;let[n,r]=Xa(t.selectedKey,(e=t.defaultSelectedKey)!==null&&e!==void 0?e:null,t.onSelectionChange),i=T.useMemo(()=>n!=null?[n]:[],[n]),{collection:a,disabledKeys:s,selectionManager:o}=yI({...t,selectionMode:"single",disallowEmptySelection:!0,allowDuplicateSelectionEvents:!0,selectedKeys:i,onSelectionChange:u=>{if(u==="all")return;var h;let f=(h=u.values().next().value)!==null&&h!==void 0?h:null;f===n&&t.onSelectionChange&&t.onSelectionChange(f),r(f)}}),c=n!=null?a.getItem(n):null;return{collection:a,disabledKeys:s,selectionManager:o,selectedKey:n,setSelectedKey:r,selectedItem:c}}function nw(t){let[e,n]=Xa(t.isOpen,t.defaultOpen||!1,t.onOpenChange);const r=T.useCallback(()=>{n(!0)},[n]),i=T.useCallback(()=>{n(!1)},[n]),a=T.useCallback(()=>{n(!e)},[n,e]);return{isOpen:e,setOpen:n,open:r,close:i,toggle:a}}function T0e(t){var e;let{defaultFilter:n,menuTrigger:r="input",allowsEmptyCollection:i=!1,allowsCustomValue:a,shouldCloseOnBlur:s=!0}=t,[o,c]=T.useState(!1),[u,h]=T.useState(!1),[f,m]=T.useState(null),g=Fe=>{t.onSelectionChange&&t.onSelectionChange(Fe),Fe===w&&(K(),ee())};var v;let{collection:x,selectionManager:_,selectedKey:w,setSelectedKey:S,selectedItem:E,disabledKeys:A}=tq({...t,onSelectionChange:g,items:(v=t.items)!==null&&v!==void 0?v:t.defaultItems}),[N,P]=Xa(t.inputValue,AL(t.defaultInputValue,w,x)||"",t.onInputChange),[R]=T.useState(w),[D]=T.useState(N),k=x,L=T.useMemo(()=>t.items!=null||!n?x:M0e(x,N,n),[x,N,n,t.items]),[$,B]=T.useState(L),q=T.useRef("focus"),J=nw({...t,onOpenChange:Fe=>{t.onOpenChange&&t.onOpenChange(Fe,Fe?q.current:void 0),_.setFocused(Fe),Fe||_.setFocusedKey(null)},isOpen:void 0,defaultOpen:void 0}),O=(Fe=null,et)=>{let de=et==="manual"||et==="focus"&&r==="focus";(i||L.size>0||de&&k.size>0||t.items)&&(de&&!J.isOpen&&t.items===void 0&&c(!0),q.current=et,m(Fe),J.open())},z=(Fe=null,et)=>{let de=et==="manual"||et==="focus"&&r==="focus";!(i||L.size>0||de&&k.size>0||t.items)&&!J.isOpen||(de&&!J.isOpen&&t.items===void 0&&c(!0),J.isOpen||(q.current=et),H(Fe))},V=T.useCallback(()=>{B(o?k:L)},[o,k,L]),H=T.useCallback((Fe=null)=>{J.isOpen&&V(),m(Fe),J.toggle()},[J,V]),ee=T.useCallback(()=>{J.isOpen&&(V(),J.close())},[J,V]),[Y,Z]=T.useState(N),K=()=>{var Fe,et;let de=w!=null&&(et=(Fe=x.getItem(w))===null||Fe===void 0?void 0:Fe.textValue)!==null&&et!==void 0?et:"";Z(de),P(de)};var X,ne;let G=T.useRef((ne=(X=t.selectedKey)!==null&&X!==void 0?X:t.defaultSelectedKey)!==null&&ne!==void 0?ne:null);var te;let ae=T.useRef(w!=null&&(te=(e=x.getItem(w))===null||e===void 0?void 0:e.textValue)!==null&&te!==void 0?te:"");T.useEffect(()=>{var Fe;u&&(L.size>0||i)&&!J.isOpen&&N!==Y&&r!=="manual"&&O(null,"input"),!o&&!i&&J.isOpen&&L.size===0&&ee(),w!=null&&w!==G.current&&ee(),N!==Y&&(_.setFocusedKey(null),c(!1),N===""&&(t.inputValue===void 0||t.selectedKey===void 0)&&S(null)),w!==G.current&&(t.inputValue===void 0||t.selectedKey===void 0)?K():Y!==N&&Z(N);var et;let de=w!=null&&(et=(Fe=x.getItem(w))===null||Fe===void 0?void 0:Fe.textValue)!==null&&et!==void 0?et:"";!u&&w!=null&&t.inputValue===void 0&&w===G.current&&ae.current!==de&&(Z(de),P(de)),G.current=w,ae.current=de});let pe=Xf({...t,value:T.useMemo(()=>({inputValue:N,selectedKey:w}),[N,w])}),ye=()=>{a&&w==null?me():fe()},me=()=>{G.current=null,S(null),ee()},fe=()=>{if(t.selectedKey!==void 0&&t.inputValue!==void 0){var Fe,et;(Fe=t.onSelectionChange)===null||Fe===void 0||Fe.call(t,w);var de;let re=w!=null&&(de=(et=x.getItem(w))===null||et===void 0?void 0:et.textValue)!==null&&de!==void 0?de:"";Z(re),ee()}else K(),ee()};const ge=()=>{if(a){var Fe,et;const de=w!=null&&(et=(Fe=x.getItem(w))===null||Fe===void 0?void 0:Fe.textValue)!==null&&et!==void 0?et:"";N===de?fe():me()}else fe()};let be=()=>{J.isOpen&&_.focusedKey!=null?w===_.focusedKey?fe():S(_.focusedKey):ge()},oe=T.useRef(N),Le=Fe=>{Fe?(oe.current=N,r==="focus"&&!t.isReadOnly&&O(null,"focus")):(s&&ge(),N!==oe.current&&pe.commitValidation()),h(Fe)},Ve=T.useMemo(()=>J.isOpen?o?k:L:$,[J.isOpen,k,L,o,$]);var Ze;let xe=(Ze=t.defaultSelectedKey)!==null&&Ze!==void 0?Ze:R;var ht;return{...pe,...J,focusStrategy:f,toggle:z,open:O,close:ge,selectionManager:_,selectedKey:w,defaultSelectedKey:xe,setSelectedKey:S,disabledKeys:A,isFocused:u,setFocused:Le,selectedItem:E,collection:Ve,inputValue:N,defaultInputValue:(ht=AL(t.defaultInputValue,xe,x))!==null&&ht!==void 0?ht:D,setInputValue:P,commit:be,revert:ye}}function M0e(t,e,n){return new LD(nq(t,t,e,n))}function nq(t,e,n,r){let i=[];for(let a of e)if(a.type==="section"&&a.hasChildNodes){let s=nq(t,aT(a,t),n,r);[...s].some(o=>o.type==="item")&&i.push({...a,childNodes:s})}else a.type==="item"&&r(a.textValue,n)?i.push({...a}):a.type!=="item"&&i.push({...a});return i}function AL(t,e,n){if(t==null){var r,i;if(e!=null)return(i=(r=n.getItem(e))===null||r===void 0?void 0:r.textValue)!==null&&i!==void 0?i:""}return t}function Uy(t){let{initialItems:e=[],initialSelectedKeys:n,getKey:r=u=>{var h;return(h=u.id)!==null&&h!==void 0?h:u.key},filter:i,initialFilterText:a=""}=t,[s,o]=T.useState({items:e,selectedKeys:n==="all"?"all":new Set(n||[]),filterText:a}),c=T.useMemo(()=>i?s.items.filter(u=>i(u,s.filterText)):s.items,[s.items,s.filterText,i]);return{...s,items:c,...rq({getKey:r},o),getItem(u){return s.items.find(h=>r(h)===u)}}}function rq(t,e){let{cursor:n,getKey:r}=t;return{setSelectedKeys(i){e(a=>({...a,selectedKeys:i}))},addKeysToSelection(i){e(a=>a.selectedKeys==="all"?a:i==="all"?{...a,selectedKeys:"all"}:{...a,selectedKeys:new Set([...a.selectedKeys,...i])})},removeKeysFromSelection(i){e(a=>{if(i==="all")return{...a,selectedKeys:new Set};let s=a.selectedKeys==="all"?new Set(a.items.map(r)):new Set(a.selectedKeys);for(let o of i)s.delete(o);return{...a,selectedKeys:s}})},setFilterText(i){e(a=>({...a,filterText:i}))},insert(i,...a){e(s=>i1(s,i,...a))},insertBefore(i,...a){e(s=>{let o=s.items.findIndex(c=>r?.(c)===i);if(o===-1)if(s.items.length===0)o=0;else return s;return i1(s,o,...a)})},insertAfter(i,...a){e(s=>{let o=s.items.findIndex(c=>r?.(c)===i);if(o===-1)if(s.items.length===0)o=0;else return s;return i1(s,o+1,...a)})},prepend(...i){e(a=>i1(a,0,...i))},append(...i){e(a=>i1(a,a.items.length,...i))},remove(...i){e(a=>{let s=new Set(i),o=a.items.filter(u=>!s.has(r(u))),c="all";if(a.selectedKeys!=="all"){c=new Set(a.selectedKeys);for(let u of i)c.delete(u)}return n==null&&o.length===0&&(c=new Set),{...a,items:o,selectedKeys:c}})},removeSelectedItems(){e(i=>{if(i.selectedKeys==="all")return{...i,items:[],selectedKeys:new Set};let a=i.selectedKeys,s=i.items.filter(o=>!a.has(r(o)));return{...i,items:s,selectedKeys:new Set}})},move(i,a){e(s=>{let o=s.items.findIndex(h=>r(h)===i);if(o===-1)return s;let c=s.items.slice(),[u]=c.splice(o,1);return c.splice(a,0,u),{...s,items:c}})},moveBefore(i,a){e(s=>{let o=s.items.findIndex(h=>r(h)===i);if(o===-1)return s;let u=(Array.isArray(a)?a:[...a]).map(h=>s.items.findIndex(f=>r(f)===h)).sort((h,f)=>h-f);return PL(s,u,o)})},moveAfter(i,a){e(s=>{let o=s.items.findIndex(h=>r(h)===i);if(o===-1)return s;let u=(Array.isArray(a)?a:[...a]).map(h=>s.items.findIndex(f=>r(f)===h)).sort((h,f)=>h-f);return PL(s,u,o+1)})},update(i,a){e(s=>{let o=s.items.findIndex(c=>r(c)===i);return o===-1?s:{...s,items:[...s.items.slice(0,o),a,...s.items.slice(o+1)]}})}}}function i1(t,e,...n){return{...t,items:[...t.items.slice(0,e),...n,...t.items.slice(e)]}}function PL(t,e,n){n-=e.filter(a=>a<n).length;let r=e.map(a=>({from:a,to:n++}));for(let a=0;a<r.length;a++){let s=r[a].from;for(let o=a;o<r.length;o++)r[o].from>s&&r[o].from--}for(let a=0;a<r.length;a++){let s=r[a];for(let o=r.length-1;o>a;o--){let c=r[o];c.from<s.to?s.to++:c.from++}}let i=t.items.slice();for(let a of r){let[s]=i.splice(a.from,1);i.splice(a.to,0,s)}return{...t,items:i}}function A0e(t,e){let n;switch(t.state){case"idle":case"error":switch(e.type){case"loading":case"loadingMore":case"sorting":case"filtering":var r,i;return{...t,filterText:(r=e.filterText)!==null&&r!==void 0?r:t.filterText,state:e.type,items:e.type==="loading"?[]:t.items,sortDescriptor:(i=e.sortDescriptor)!==null&&i!==void 0?i:t.sortDescriptor,abortController:e.abortController};case"update":var a;return{...t,...(a=e.updater)===null||a===void 0?void 0:a.call(e,t)};case"success":case"error":return t;default:throw new Error(`Invalid action "${e.type}" in state "${t.state}"`)}case"loading":case"sorting":case"filtering":switch(e.type){case"success":if(e.abortController!==t.abortController)return t;var s;n=(s=e.selectedKeys)!==null&&s!==void 0?s:t.selectedKeys;var o,c,u;return{...t,filterText:(o=e.filterText)!==null&&o!==void 0?o:t.filterText,state:"idle",items:[...(c=e.items)!==null&&c!==void 0?c:[]],selectedKeys:n==="all"?"all":new Set(n),sortDescriptor:(u=e.sortDescriptor)!==null&&u!==void 0?u:t.sortDescriptor,abortController:void 0,cursor:e.cursor};case"error":return e.abortController!==t.abortController?t:{...t,state:"error",error:e.error,abortController:void 0};case"loading":case"loadingMore":case"sorting":case"filtering":var h;(h=t.abortController)===null||h===void 0||h.abort();var f;return{...t,filterText:(f=e.filterText)!==null&&f!==void 0?f:t.filterText,state:e.type,items:e.type==="loading"?[]:t.items,abortController:e.abortController};case"update":var m;return{...t,...(m=e.updater)===null||m===void 0?void 0:m.call(e,t)};default:throw new Error(`Invalid action "${e.type}" in state "${t.state}"`)}case"loadingMore":switch(e.type){case"success":var g;n=t.selectedKeys==="all"||e.selectedKeys==="all"?"all":new Set([...t.selectedKeys,...(g=e.selectedKeys)!==null&&g!==void 0?g:[]]);var v,x;return{...t,state:"idle",items:[...t.items,...(v=e.items)!==null&&v!==void 0?v:[]],selectedKeys:n,sortDescriptor:(x=e.sortDescriptor)!==null&&x!==void 0?x:t.sortDescriptor,abortController:void 0,cursor:e.cursor};case"error":return e.abortController!==t.abortController?t:{...t,state:"error",error:e.error};case"loading":case"sorting":case"filtering":var _;(_=t.abortController)===null||_===void 0||_.abort();var w;return{...t,filterText:(w=e.filterText)!==null&&w!==void 0?w:t.filterText,state:e.type,items:e.type==="loading"?[]:t.items,abortController:e.abortController};case"loadingMore":var S;return(S=e.abortController)===null||S===void 0||S.abort(),t;case"update":var E;return{...t,...(E=e.updater)===null||E===void 0?void 0:E.call(e,t)};default:throw new Error(`Invalid action "${e.type}" in state "${t.state}"`)}default:throw new Error(`Invalid state "${t.state}"`)}}function iq(t){const{load:e,sort:n,initialSelectedKeys:r,initialSortDescriptor:i,getKey:a=f=>f.id||f.key,initialFilterText:s=""}=t;let[o,c]=T.useReducer(A0e,{state:"idle",error:void 0,items:[],selectedKeys:r==="all"?"all":new Set(r),sortDescriptor:i,filterText:s});const u=async(f,m)=>{let g=new AbortController;try{c({...f,abortController:g});var v;let w=(v=f.filterText)!==null&&v!==void 0?v:o.filterText;var x;let S=await m({items:o.items.slice(),selectedKeys:o.selectedKeys,sortDescriptor:(x=f.sortDescriptor)!==null&&x!==void 0?x:o.sortDescriptor,signal:g.signal,cursor:f.type==="loadingMore"?o.cursor:void 0,filterText:w,loadingState:o.state});var _;let E=(_=S.filterText)!==null&&_!==void 0?_:w;c({type:"success",...S,abortController:g}),E&&E!==w&&!g.signal.aborted&&u({type:"filtering",filterText:E},e)}catch(w){c({type:"error",error:w,abortController:g})}};let h=T.useRef(!1);return T.useEffect(()=>{h.current||(u({type:"loading"},e),h.current=!0)},[]),{items:o.items,selectedKeys:o.selectedKeys,sortDescriptor:o.sortDescriptor,isLoading:o.state==="loading"||o.state==="loadingMore"||o.state==="sorting"||o.state==="filtering",loadingState:o.state,error:o.error,filterText:o.filterText,getItem(f){return o.items.find(m=>a(m)===f)},reload(){u({type:"loading"},e)},loadMore(){o.state==="loading"||o.state==="loadingMore"||o.state==="filtering"||o.cursor==null||u({type:"loadingMore"},e)},sort(f){u({type:"sorting",sortDescriptor:f},n||e)},...rq({...t,getKey:a,cursor:o.cursor},f=>{c({type:"update",updater:f})}),setFilterText(f){u({type:"filtering",filterText:f},e)}}}function P0e(t){let e=nw(t),[n,r]=T.useState(null),[i,a]=T.useState([]),s=()=>{a([]),e.close()};return{focusStrategy:n,...e,open(u=null){r(u),e.open()},toggle(u=null){r(u),e.toggle()},close(){s()},expandedKeysStack:i,openSubmenu:(u,h)=>{a(f=>h>f.length?f:[...f.slice(0,h),u])},closeSubmenu:(u,h)=>{a(f=>f[h]===u?f.slice(0,h):f)}}}let N0e=Math.round(Math.random()*1e10),D0e=0;function k0e(t){let e=T.useMemo(()=>t.name||`radio-group-${N0e}-${++D0e}`,[t.name]);var n;let[r,i]=Xa(t.value,(n=t.defaultValue)!==null&&n!==void 0?n:null,t.onChange),[a]=T.useState(r),[s,o]=T.useState(null),c=Xf({...t,value:r}),u=m=>{!t.isReadOnly&&!t.isDisabled&&(i(m),c.commitValidation())},h=c.displayValidation.isInvalid;var f;return{...c,name:e,selectedValue:r,defaultSelectedValue:t.value!==void 0?a:(f=t.defaultValue)!==null&&f!==void 0?f:null,setSelectedValue:u,lastFocusedValue:s,setLastFocusedValue:o,isDisabled:t.isDisabled||!1,isReadOnly:t.isReadOnly||!1,isRequired:t.isRequired||!1,validationState:t.validationState||(h?"invalid":null),isInvalid:h}}function R0e(t){let[e,n]=Xa(NL(t.value),NL(t.defaultValue)||"",t.onChange);return{value:e,setValue:n}}function NL(t){if(t!=null)return t.toString()}function I0e(t){let{selectionMode:e="single"}=t,n=nw(t),[r,i]=T.useState(null),a=T.useMemo(()=>{var A;return t.defaultValue!==void 0?t.defaultValue:e==="single"?(A=t.defaultSelectedKey)!==null&&A!==void 0?A:null:[]},[t.defaultValue,t.defaultSelectedKey,e]),s=T.useMemo(()=>t.value!==void 0?t.value:e==="single"?t.selectedKey:void 0,[t.value,t.selectedKey,e]),[o,c]=Xa(s,a,t.onChange),u=e==="single"&&Array.isArray(o)?o[0]:o,h=A=>{if(e==="single"){var N,P;let R=Array.isArray(A)?(P=A[0])!==null&&P!==void 0?P:null:A;c(R),R!==u&&((N=t.onSelectionChange)===null||N===void 0||N.call(t,R))}else{let R=[];Array.isArray(A)?R=A:A!=null&&(R=[A]),c(R)}},f=yI({...t,selectionMode:e,disallowEmptySelection:e==="single",allowDuplicateSelectionEvents:!0,selectedKeys:T.useMemo(()=>$0e(u),[u]),onSelectionChange:A=>{if(A!=="all"){if(e==="single"){var N;let P=(N=A.values().next().value)!==null&&N!==void 0?N:null;h(P),n.close()}else h([...A]);v.commitValidation()}}}),m=f.selectionManager.firstSelectedKey,g=T.useMemo(()=>[...f.selectionManager.selectedKeys].map(A=>f.collection.getItem(A)).filter(A=>A!=null),[f.selectionManager.selectedKeys,f.collection]),v=Xf({...t,value:Array.isArray(u)&&u.length===0?null:u}),[x,_]=T.useState(!1),[w]=T.useState(u);var S,E;return{...v,...f,...n,value:u,defaultValue:a??w,setValue:h,selectedKey:m,setSelectedKey:h,selectedItem:(S=g[0])!==null&&S!==void 0?S:null,selectedItems:g,defaultSelectedKey:(E=t.defaultSelectedKey)!==null&&E!==void 0?E:t.selectionMode==="single"?w:null,focusStrategy:r,open(A=null){f.collection.size!==0&&(i(A),n.open())},toggle(A=null){f.collection.size!==0&&(i(A),n.toggle())},isFocused:x,setFocused:_}}function $0e(t){if(t!==void 0)return t===null?[]:Array.isArray(t)?t:[t]}function j0e(t){var e,n;let r=tq({...t,onSelectionChange:t.onSelectionChange?c=>{var u;c!=null&&((u=t.onSelectionChange)===null||u===void 0||u.call(t,c))}:void 0,suppressTextValueWarning:!0,defaultSelectedKey:(n=(e=t.defaultSelectedKey)!==null&&e!==void 0?e:DL(t.collection,t.disabledKeys?new Set(t.disabledKeys):new Set))!==null&&n!==void 0?n:void 0}),{selectionManager:i,collection:a,selectedKey:s}=r,o=T.useRef(s);return T.useEffect(()=>{let c=s;t.selectedKey==null&&(i.isEmpty||c==null||!a.getItem(c))&&(c=DL(a,r.disabledKeys),c!=null&&i.setSelectedKeys([c])),(c!=null&&i.focusedKey==null||!i.isFocused&&c!==o.current)&&i.setFocusedKey(c),o.current=c}),{...r,isDisabled:t.isDisabled||!1}}function DL(t,e){let n=null;if(t){var r,i,a,s;for(n=t.getFirstKey();n!=null&&(e.has(n)||!((i=t.getItem(n))===null||i===void 0||(r=i.props)===null||r===void 0)&&r.isDisabled)&&n!==t.getLastKey();)n=t.getKeyAfter(n);n!=null&&(e.has(n)||!((s=t.getItem(n))===null||s===void 0||(a=s.props)===null||a===void 0)&&a.isDisabled)&&n===t.getLastKey()&&(n=t.getFirstKey())}return n}const sh=T.createContext(null),X3=T.forwardRef(function(e,n){let r=T.useContext(sh);return r?.isInvalid?ve.createElement(L0e,{...e,ref:n}):null}),L0e=T.forwardRef((t,e)=>{let n=T.useContext(sh),r=gn(t,{global:!0}),i=On({...t,defaultClassName:"react-aria-FieldError",defaultChildren:n.validationErrors.length===0?void 0:n.validationErrors.join(" "),values:n});return i.children==null?null:ve.createElement(v_,{slot:"errorMessage",...r,...i,ref:e})}),Tg=T.createContext(null),O0e=T.createContext(null),y_=T.forwardRef(function(e,n){let{inputRef:r=null,...i}=e;[e,n]=rr(i,n,mfe);let{validationBehavior:a}=Xl(Tg)||{};var s,o;let c=(o=(s=e.validationBehavior)!==null&&s!==void 0?s:a)!==null&&o!==void 0?o:"native",u=T.useContext(O0e),h=fl(T.useMemo(()=>J_(r,e.inputRef!==void 0?e.inputRef:null),[r,e.inputRef])),{labelProps:f,inputProps:m,isSelected:g,isDisabled:v,isReadOnly:x,isPressed:_,isInvalid:w}=u?Rge({...Uc(e),value:e.value,children:typeof e.children=="function"?!0:e.children},u,h):cH({...Uc(e),children:typeof e.children=="function"?!0:e.children,validationBehavior:c},cT(e),h),{isFocused:S,isFocusVisible:E,focusProps:A}=Xs(),N=v||x,{hoverProps:P,isHovered:R}=pl({...e,isDisabled:N}),D=On({...e,defaultClassName:"react-aria-Checkbox",values:{isSelected:g,isIndeterminate:e.isIndeterminate||!1,isPressed:_,isHovered:R,isFocused:S,isFocusVisible:E,isDisabled:v,isReadOnly:x,isInvalid:w,isRequired:e.isRequired||!1}}),k=gn(e,{global:!0});return delete k.id,delete k.onClick,ve.createElement("label",{...Et(k,f,P,D),ref:n,slot:e.slot||void 0,"data-selected":g||void 0,"data-indeterminate":e.isIndeterminate||void 0,"data-pressed":_||void 0,"data-hovered":R||void 0,"data-focused":S||void 0,"data-focus-visible":E||void 0,"data-disabled":v||void 0,"data-readonly":x||void 0,"data-invalid":w||void 0,"data-required":e.isRequired||void 0},ve.createElement(ew,{elementType:"span"},ve.createElement("input",{...Et(m,A),ref:h})),D.children)}),bI=T.createContext(null),uT=T.forwardRef(function(e,n){let{state:r,thumbProps:i,inputXRef:a,inputYRef:s,xInputProps:o,yInputProps:c,isDisabled:u=!1}=T.useContext(bI),{focusProps:h,isFocused:f,isFocusVisible:m}=Xs(),{hoverProps:g,isHovered:v}=pl(e),x=On({...e,defaultClassName:"react-aria-ColorThumb",defaultStyle:{...i.style,backgroundColor:r.getDisplayColor().toString()},values:{color:r.getDisplayColor(),isHovered:v,isDragging:r.isDragging,isFocused:f,isFocusVisible:m,isDisabled:u}}),_=gn(e,{global:!0});return delete _.id,ve.createElement("div",{...Et(i,g,_),...x,ref:n,"data-hovered":v||void 0,"data-dragging":r.isDragging||void 0,"data-focused":f||void 0,"data-focus-visible":m||void 0,"data-disabled":u||void 0},ve.createElement("input",{ref:a,...o,...h}),c&&ve.createElement("input",{ref:s,...c,...h}),x.children)}),F0e=T.createContext(null),aq=T.forwardRef(function(e,n){[e,n]=rr(e,n,X9);let r=T.useRef(null),i=T.useRef(null),a=Vge(e),{colorAreaProps:s,xInputProps:o,yInputProps:c,thumbProps:u}=n0e({...e,inputXRef:r,inputYRef:i,containerRef:n},a),h=On({...e,defaultClassName:"react-aria-ColorArea",defaultStyle:s.style,values:{state:a,isDisabled:e.isDisabled||!1}}),f=gn(e,{global:!0});return delete f.id,ve.createElement("div",{ref:n,...Et(f,s,h),slot:e.slot||void 0,"data-disabled":e.isDisabled||void 0},ve.createElement(Sa,{values:[[F0e,a],[bI,{state:a,thumbProps:u,inputXRef:r,xInputProps:o,inputYRef:i,yInputProps:c,isDisabled:e.isDisabled}]]},h.children))}),Vy=T.createContext({}),Mg=T.createContext({});let B0e=t=>{let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,...i}=t;return i};const Pn=Cg(function(e,n){[e,n]=rr(e,n,Mg);let{hoverProps:r,isHovered:i}=pl(e),{isFocused:a,isFocusVisible:s,focusProps:o}=Xs({isTextInput:!0,autoFocus:e.autoFocus}),c=!!e["aria-invalid"]&&e["aria-invalid"]!=="false",u=On({...e,values:{isHovered:i,isFocused:a,isFocusVisible:s,isDisabled:e.disabled||!1,isInvalid:c},defaultClassName:"react-aria-Input"});return ve.createElement("input",{...Et(B0e(e),o,r),...u,ref:n,"data-focused":a||void 0,"data-disabled":e.disabled||void 0,"data-hovered":i||void 0,"data-focus-visible":s||void 0,"data-invalid":c||void 0})}),z0e=T.createContext(null),U0e=T.forwardRef(function(e,n){return[e,n]=rr(e,n,Y9),e.channel?ve.createElement(V0e,{...e,channel:e.channel,forwardedRef:n}):ve.createElement(H0e,{...e,forwardedRef:n})});function V0e(t){let{locale:e}=Qi(),n=Zge({...t,locale:e}),r=T.useRef(null),[i,a]=Yl(!t["aria-label"]&&!t["aria-labelledby"]);var s;let{labelProps:o,inputProps:c,descriptionProps:u,errorMessageProps:h,...f}=c0e({...Uc(t),label:a,validationBehavior:(s=t.validationBehavior)!==null&&s!==void 0?s:"native"},n,r);return ve.createElement(ve.Fragment,null,sq(t,n,t.forwardedRef,c,r,o,i,u,h,f),t.name&&ve.createElement("input",{type:"hidden",name:t.name,form:t.form,value:isNaN(n.numberValue)?"":n.numberValue}))}function H0e(t){var e;let n=Yge({...t,validationBehavior:(e=t.validationBehavior)!==null&&e!==void 0?e:"native"}),r=T.useRef(null),[i,a]=Yl(!t["aria-label"]&&!t["aria-labelledby"]);var s;let{labelProps:o,inputProps:c,descriptionProps:u,errorMessageProps:h,...f}=a0e({...Uc(t),label:a,validationBehavior:(s=t.validationBehavior)!==null&&s!==void 0?s:"native"},n,r);return sq(t,n,t.forwardedRef,c,r,o,i,u,h,f)}function sq(t,e,n,r,i,a,s,o,c,u){let h=On({...t,values:{state:e,channel:t.channel||"hex",isDisabled:t.isDisabled||!1,isInvalid:u.isInvalid||!1},defaultClassName:"react-aria-ColorField"}),f=gn(t,{global:!0});return delete f.id,ve.createElement(Sa,{values:[[z0e,e],[Mg,{...r,ref:i}],[ml,{...a,ref:s}],[Vy,{role:"presentation",isInvalid:u.isInvalid,isDisabled:t.isDisabled||!1}],[Zl,{slots:{description:o,errorMessage:c}}],[sh,u]]},ve.createElement("div",{...f,...h,ref:n,slot:t.slot||void 0,"data-channel":t.channel||"hex","data-disabled":t.isDisabled||void 0,"data-invalid":u.isInvalid||void 0}))}const xI=T.createContext(null),G0e=T.forwardRef(function(e,n){[e,n]=rr(e,n,xI);let{colorSwatchProps:r,color:i}=o0e(e),a=On({...e,defaultClassName:"react-aria-ColorSwatch",defaultStyle:r.style,values:{color:i}}),s=gn(e,{global:!0});return ve.createElement("div",{...Et(s,r,a),slot:e.slot||void 0,ref:n})});var oq={};oq={colorSwatchPicker:" ",dropzoneLabel:"DropZone",selectPlaceholder:" ",tableResizer:"  "};var lq={};lq={colorSwatchPicker:" ",dropzoneLabel:"DropZone",selectPlaceholder:" ",tableResizer:""};var cq={};cq={colorSwatchPicker:"Vzorky barev",dropzoneLabel:"Msto pro petaen",selectPlaceholder:"Vyberte poloku",tableResizer:"Zmna velikosti"};var uq={};uq={colorSwatchPicker:"Farveprver",dropzoneLabel:"DropZone",selectPlaceholder:"Vlg et element",tableResizer:"Strrelsesndring"};var dq={};dq={colorSwatchPicker:"Farbfelder",dropzoneLabel:"Ablegebereich",selectPlaceholder:"Element whlen",tableResizer:"Grenanpassung"};var hq={};hq={colorSwatchPicker:" ",dropzoneLabel:"DropZone",selectPlaceholder:"  ",tableResizer:" "};var fq={};fq={selectPlaceholder:"Select an item",tableResizer:"Resizer",dropzoneLabel:"DropZone",colorSwatchPicker:"Color swatches"};var pq={};pq={colorSwatchPicker:"Muestras de colores",dropzoneLabel:"DropZone",selectPlaceholder:"Seleccionar un artculo",tableResizer:"Cambiador de tamao"};var mq={};mq={colorSwatchPicker:"Vrvinidised",dropzoneLabel:"DropZone",selectPlaceholder:"Valige ksus",tableResizer:"Suuruse muutja"};var gq={};gq={colorSwatchPicker:"Vrimallit",dropzoneLabel:"DropZone",selectPlaceholder:"Valitse kohde",tableResizer:"Koon muuttaja"};var vq={};vq={colorSwatchPicker:"chantillons de couleurs",dropzoneLabel:"DropZone",selectPlaceholder:"Slectionner un lment",tableResizer:"Redimensionneur"};var yq={};yq={colorSwatchPicker:" ",dropzoneLabel:"DropZone",selectPlaceholder:" ",tableResizer:" "};var bq={};bq={colorSwatchPicker:"Uzorci boja",dropzoneLabel:"Zona sputanja",selectPlaceholder:"Odaberite stavku",tableResizer:"Promjena veliine"};var xq={};xq={colorSwatchPicker:"Szntrak",dropzoneLabel:"DropZone",selectPlaceholder:"Vlasszon ki egy elemet",tableResizer:"tmretez"};var _q={};_q={colorSwatchPicker:"Campioni di colore",dropzoneLabel:"Zona di rilascio",selectPlaceholder:"Seleziona un elemento",tableResizer:"Ridimensionamento"};var wq={};wq={colorSwatchPicker:"",dropzoneLabel:"",selectPlaceholder:"",tableResizer:""};var Sq={};Sq={colorSwatchPicker:" ",dropzoneLabel:" ",selectPlaceholder:" ",tableResizer:" "};var Eq={};Eq={colorSwatchPicker:"Spalv pavyzdiai",dropzoneLabel:"DropZone",selectPlaceholder:"Pasirinkite element",tableResizer:"Dydio keitiklis"};var Cq={};Cq={colorSwatchPicker:"Krsu paraugi",dropzoneLabel:"DropZone",selectPlaceholder:"Izvlties vienumu",tableResizer:"Izmra maintjs"};var Tq={};Tq={colorSwatchPicker:"Fargekart",dropzoneLabel:"Droppsone",selectPlaceholder:"Velg et element",tableResizer:"Strrelsesendrer"};var Mq={};Mq={colorSwatchPicker:"kleurstalen",dropzoneLabel:"DropZone",selectPlaceholder:"Selecteer een item",tableResizer:"Resizer"};var Aq={};Aq={colorSwatchPicker:"Prbki kolorw",dropzoneLabel:"Strefa upuszczania",selectPlaceholder:"Wybierz element",tableResizer:"Zmiana rozmiaru"};var Pq={};Pq={colorSwatchPicker:"Amostras de cores",dropzoneLabel:"DropZone",selectPlaceholder:"Selecione um item",tableResizer:"Redimensionador"};var Nq={};Nq={colorSwatchPicker:"Amostras de cores",dropzoneLabel:"DropZone",selectPlaceholder:"Selecione um item",tableResizer:"Redimensionador"};var Dq={};Dq={colorSwatchPicker:"Specimene de culoare",dropzoneLabel:"Zon de plasare",selectPlaceholder:"Selectai un element",tableResizer:"Instrument de redimensionare"};var kq={};kq={colorSwatchPicker:" ",dropzoneLabel:"DropZone",selectPlaceholder:" ",tableResizer:"  "};var Rq={};Rq={colorSwatchPicker:"Vzorkovnky farieb",dropzoneLabel:"DropZone",selectPlaceholder:"Vyberte poloku",tableResizer:"Nstroj na zmenu vekosti"};var Iq={};Iq={colorSwatchPicker:"Barvne palete",dropzoneLabel:"DropZone",selectPlaceholder:"Izberite element",tableResizer:"Spreminjanje velikosti"};var $q={};$q={colorSwatchPicker:"Uzorci boje",dropzoneLabel:"DropZone",selectPlaceholder:"Izaberite stavku",tableResizer:"Promena veliine"};var jq={};jq={colorSwatchPicker:"Frgrutor",dropzoneLabel:"DropZone",selectPlaceholder:"Vlj en artikel",tableResizer:"Storleksndrare"};var Lq={};Lq={colorSwatchPicker:"Renk rnekleri",dropzoneLabel:"Brakma Blgesi",selectPlaceholder:"Bir e sein",tableResizer:"Yeniden boyutlandrc"};var Oq={};Oq={colorSwatchPicker:" ",dropzoneLabel:"DropZone",selectPlaceholder:" ",tableResizer:"  "};var Fq={};Fq={colorSwatchPicker:"",dropzoneLabel:"",selectPlaceholder:"",tableResizer:""};var Bq={};Bq={colorSwatchPicker:"",dropzoneLabel:"",selectPlaceholder:"",tableResizer:""};var _I={};_I={"ar-AE":oq,"bg-BG":lq,"cs-CZ":cq,"da-DK":uq,"de-DE":dq,"el-GR":hq,"en-US":fq,"es-ES":pq,"et-EE":mq,"fi-FI":gq,"fr-FR":vq,"he-IL":yq,"hr-HR":bq,"hu-HU":xq,"it-IT":_q,"ja-JP":wq,"ko-KR":Sq,"lt-LT":Eq,"lv-LV":Cq,"nb-NO":Tq,"nl-NL":Mq,"pl-PL":Aq,"pt-BR":Pq,"pt-PT":Nq,"ro-RO":Dq,"ru-RU":kq,"sk-SK":Rq,"sl-SI":Iq,"sr-SP":$q,"sv-SE":jq,"tr-TR":Lq,"uk-UA":Oq,"zh-CN":Fq,"zh-TW":Bq};const dT=T.createContext({}),zq=T.createContext(null),W0e=T.forwardRef(function(e,n){let{render:r}=T.useContext(zq);return ve.createElement(ve.Fragment,null,r(e,n))});function Uq(t,e){var n;let r=t?.renderDropIndicator,i=t==null||(n=t.isVirtualDragging)===null||n===void 0?void 0:n.call(t),a=T.useCallback(s=>{if(i||e?.isDropTarget(s))return r?r(s):ve.createElement(W0e,{target:s})},[e?.target,i,r]);return t?.useDropIndicator?a:void 0}function q0e(t,e,n){var r,i;let a=t.focusedKey,s=null;if(!(e==null||(r=e.isVirtualDragging)===null||r===void 0)&&r.call(e)&&(n==null||(i=n.target)===null||i===void 0?void 0:i.type)==="item"&&(s=n.target.key,n.target.dropPosition==="after")){let f=n.collection.getKeyAfter(s),m=null;if(f!=null){var o,c;let g=(c=(o=n.collection.getItem(s))===null||o===void 0?void 0:o.level)!==null&&c!==void 0?c:0;for(;f;){let v=n.collection.getItem(f);if(!v)break;if(v.type!=="item"){f=n.collection.getKeyAfter(f);continue}var u;if(((u=v.level)!==null&&u!==void 0?u:0)<=g)break;m=f,f=n.collection.getKeyAfter(f)}}var h;s=(h=f??m)!==null&&h!==void 0?h:s}return T.useMemo(()=>new Set([a,s].filter(f=>f!=null)),[a,s])}const K0e=T.createContext({}),Vq=T.createContext(null);function hT(t){let e=T.useRef({});return ve.createElement(Vq.Provider,{value:e},t.children)}const X0e=T.forwardRef(function(e,n){let{name:r,isVisible:i=!0,children:a,className:s,style:o,...c}=e,[u,h]=T.useState(i?"visible":"hidden"),f=T.useContext(Vq);if(!f)throw new Error("<SharedElement> must be rendered inside a <SharedElementTransition>");i&&u==="hidden"&&h("visible"),n=fl(n),mr(()=>{let g=n.current,v=f.current,x=v[r],_=null;if(g&&i&&x){h("visible");let w=g.getAnimations(),S=x.style.map(([E,A])=>{let N=g.style[E];if(E==="translate"){let P=x.rect,R=g.getBoundingClientRect(),D=P.left-R?.left,k=P.top-R?.top;g.style.translate=`${D}px ${k}px`}else g.style[E]=A;return[E,N]});for(let E of g.getAnimations())w.includes(E)||E.cancel();_=requestAnimationFrame(()=>{_=null;for(let[E,A]of S)g.style[E]=A}),delete v[r]}else g&&i&&!x?(queueMicrotask(()=>Zm.flushSync(()=>h("entering"))),_=requestAnimationFrame(()=>{_=null,h("visible")})):g&&!i&&queueMicrotask(()=>{v[r]?(delete v[r],Zm.flushSync(()=>h("exiting")),Promise.all(g.getAnimations().map(w=>w.finished)).then(()=>h("hidden")).catch(()=>{})):h("hidden")});return()=>{if(_!=null&&cancelAnimationFrame(_),g&&g.isConnected&&!g.hasAttribute("data-exiting")){let w=window.getComputedStyle(g);if(w.transitionProperty!=="none"){let S=w.transitionProperty.split(/\s*,\s*/);v[r]={rect:g.getBoundingClientRect(),style:S.map(E=>[E,w[E]])}}}}},[n,f,r,i]);let m=On({children:a,className:s,style:o,values:{isEntering:u==="entering",isExiting:u==="exiting"}});return u==="hidden"?null:ve.createElement("div",{...c,...m,ref:n,"data-entering":u==="entering"||void 0,"data-exiting":u==="exiting"||void 0})}),rw=T.createContext({isSelected:!1}),Y0e=T.forwardRef(function(e,n){[e,n]=rr(e,n,rw);let{isSelected:r,...i}=e;return ve.createElement(X0e,{...i,ref:n,className:e.className||"react-aria-SelectionIndicator",name:"SelectionIndicator",isVisible:r})}),Z0e=T.createContext({});class J0e extends Eg{filter(e,n){let r=n.getItem(this.prevKey);if(r&&r.type!=="separator"){let i=this.clone();return n.addDescendants(i,e),i}return null}}J0e.type="separator";const iw=T.createContext(null),Ag=T.createContext(null),Ar=T.forwardRef(function(e,n){[e,n]=rr(e,n,iw);let r=T.useContext(Ag);return r?ve.createElement(Hq,{state:r,props:e,listBoxRef:n}):ve.createElement(lT,{content:ve.createElement(iH,e)},i=>ve.createElement(Q0e,{props:e,listBoxRef:n,collection:i}))});function Q0e({props:t,listBoxRef:e,collection:n}){t={...t,collection:n,children:null,items:null};let{layoutDelegate:r}=T.useContext(tw),i=yI({...t,layoutDelegate:r});return ve.createElement(Hq,{state:i,props:t,listBoxRef:e})}function Hq({state:t,props:e,listBoxRef:n}){[e,n]=rr(e,n,vfe);let{dragAndDropHooks:r,layout:i="stack",orientation:a="vertical",filter:s}=e,o=C0e(t,s),{collection:c,selectionManager:u}=o,h=!!r?.useDraggableCollectionState,f=!!r?.useDroppableCollectionState,{direction:m}=Qi(),{disabledBehavior:g,disabledKeys:v}=u,x=Q2({usage:"search",sensitivity:"base"}),{isVirtualized:_,layoutDelegate:w,dropTargetDelegate:S,CollectionRoot:E}=T.useContext(tw),A=T.useMemo(()=>e.keyboardDelegate||new iT({collection:c,collator:x,ref:n,disabledKeys:v,disabledBehavior:g,layout:i,orientation:a,direction:m,layoutDelegate:w}),[c,x,n,g,v,a,m,e.keyboardDelegate,i,w]),{listBoxProps:N}=Hme({...e,shouldSelectOnPressUp:h||e.shouldSelectOnPressUp,keyboardDelegate:A,isVirtualized:_},o,n);T.useRef(h),T.useRef(f),T.useEffect(()=>{},[h,f]);let P,R,D,k=!1,L=null,$=T.useRef(null);if(h&&r){P=r.useDraggableCollectionState({collection:c,selectionManager:u,preview:r.renderDragPreview?$:void 0}),r.useDraggableCollection({},P,n);let ee=r.DragPreview;L=r.renderDragPreview?ve.createElement(ee,{ref:$},r.renderDragPreview):null}if(f&&r){R=r.useDroppableCollectionState({collection:c,selectionManager:u});let ee=r.dropTargetDelegate||S||new r.ListDropTargetDelegate(c,n,{orientation:a,layout:i,direction:m});D=r.useDroppableCollection({keyboardDelegate:A,dropTargetDelegate:ee},R,n),k=R.isDropTarget({type:"root"})}let{focusProps:B,isFocused:q,isFocusVisible:U}=Xs(),J=o.collection.size===0,O={isDropTarget:k,isEmpty:J,isFocused:q,isFocusVisible:U,layout:e.layout||"stack",state:o},z=On({className:e.className,style:e.style,defaultClassName:"react-aria-ListBox",values:O}),V=null;J&&e.renderEmptyState&&(V=ve.createElement("div",{role:"option",style:{display:"contents"}},e.renderEmptyState(O)));let H=gn(e,{global:!0});return ve.createElement(sI,null,ve.createElement("div",{...Et(H,z,N,B,D?.collectionProps),ref:n,slot:e.slot||void 0,onScroll:e.onScroll,"data-drop-target":k||void 0,"data-empty":J||void 0,"data-focused":q||void 0,"data-focus-visible":U||void 0,"data-layout":e.layout||"stack","data-orientation":e.orientation||"vertical"},ve.createElement(Sa,{values:[[iw,e],[Ag,o],[dT,{dragAndDropHooks:r,dragState:P,dropState:R}],[Z0e,{elementType:"div"}],[zq,{render:tve}],[Cge,{name:"ListBoxSection",render:eve}]]},ve.createElement(hT,null,ve.createElement(E,{collection:c,scrollRef:n,persistedKeys:q0e(u,r,R),renderDropIndicator:Uq(r,R)}))),V,L))}function eve(t,e,n,r="react-aria-ListBoxSection"){let i=T.useContext(Ag),{dragAndDropHooks:a,dropState:s}=T.useContext(dT),{CollectionBranch:o}=T.useContext(tw),[c,u]=Yl();var h;let{headingProps:f,groupProps:m}=Zme({heading:u,"aria-label":(h=t["aria-label"])!==null&&h!==void 0?h:void 0}),g=On({defaultClassName:r,className:t.className,style:t.style,values:{}}),v=gn(t,{global:!0});return delete v.id,ve.createElement("section",{...Et(v,g,m),ref:e},ve.createElement(K0e.Provider,{value:{...f,ref:c}},ve.createElement(o,{collection:i.collection,parent:n,renderDropIndicator:Uq(a,s)})))}const En=hI(JV,function(e,n,r){let i=fl(n),a=T.useContext(Ag),{dragAndDropHooks:s,dragState:o,dropState:c}=T.useContext(dT),{optionProps:u,labelProps:h,descriptionProps:f,...m}=Yme({key:r.key,"aria-label":e?.["aria-label"]},a,i),{hoverProps:g,isHovered:v}=pl({isDisabled:!m.allowsSelection&&!m.hasAction,onHoverStart:r.props.onHoverStart,onHoverChange:r.props.onHoverChange,onHoverEnd:r.props.onHoverEnd}),x=null;o&&s&&(x=s.useDraggableItem({key:r.key},o));let _=null;c&&s&&(_=s.useDroppableItem({target:{type:"item",key:r.key,dropPosition:"on"}},c,i));let w=o&&o.isDragging(r.key),S=On({...e,id:void 0,children:e.children,defaultClassName:"react-aria-ListBoxItem",values:{...m,isHovered:v,selectionMode:a.selectionManager.selectionMode,selectionBehavior:a.selectionManager.selectionBehavior,allowsDragging:!!o,isDragging:w,isDropTarget:_?.isDropTarget}});T.useEffect(()=>{r.textValue},[r.textValue]);let E=e.href?"a":"div",A=gn(e,{global:!0});return delete A.id,delete A.onClick,ve.createElement(E,{...Et(A,S,u,g,x?.dragProps,_?.dropProps),ref:i,"data-allows-dragging":!!o||void 0,"data-selected":m.isSelected||void 0,"data-disabled":m.isDisabled||void 0,"data-hovered":v||void 0,"data-focused":m.isFocused||void 0,"data-focus-visible":m.isFocusVisible||void 0,"data-pressed":m.isPressed||void 0,"data-dragging":w||void 0,"data-drop-target":_?.isDropTarget||void 0,"data-selection-mode":a.selectionManager.selectionMode==="none"?void 0:a.selectionManager.selectionMode},ve.createElement(Sa,{values:[[Zl,{slots:{[$3]:h,label:h,description:f}}],[rw,{isSelected:m.isSelected}]]},S.children))});function tve(t,e){e=fl(e);let{dragAndDropHooks:n,dropState:r}=T.useContext(dT),{dropIndicatorProps:i,isHidden:a,isDropTarget:s}=n.useDropIndicator(t,r,e);return a?null:ve.createElement(rve,{...t,dropIndicatorProps:i,isDropTarget:s,ref:e})}function nve(t,e){let{dropIndicatorProps:n,isDropTarget:r,...i}=t,a=On({...i,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:r}});return ve.createElement("div",{...n,...a,role:"option",ref:e,"data-drop-target":r||void 0})}const rve=T.forwardRef(nve);hI(ZV,function(e,n,r){let i=T.useContext(Ag),{isLoading:a,onLoadMore:s,scrollOffset:o,...c}=e,u=T.useRef(null),h=T.useMemo(()=>({onLoadMore:s,collection:i?.collection,sentinelRef:u,scrollOffset:o}),[s,o,i?.collection]);rpe(h,u);let f=On({...c,id:void 0,children:r.rendered,defaultClassName:"react-aria-ListBoxLoadingIndicator",values:null}),m={tabIndex:-1};return ve.createElement(ve.Fragment,null,ve.createElement("div",{style:{position:"relative",width:0,height:0},inert:hD(!0)},ve.createElement("div",{"data-testid":"loadMoreSentinel",ref:u,style:{position:"absolute",height:1,width:1}})),a&&f.children&&ve.createElement("div",{...Et(gn(e,{global:!0}),m),...f,role:"option",ref:n},f.children))});function ive(t){return t&&t.__esModule?t.default:t}const Gq=T.createContext(null),Wq=T.createContext(null),ave=T.forwardRef(function(e,n){[e,n]=rr(e,n,Gq);let r=PG(e),i=T.useMemo(()=>new Map,[]),a=Hu(ive(_I),"react-aria-components");return ve.createElement(Ar,{...gn(e,{labelable:!0}),ref:n,className:e.className||"react-aria-ColorSwatchPicker",style:e.style,"aria-label":e["aria-label"]||(e["aria-labelledby"]?void 0:a.format("colorSwatchPicker")),layout:e.layout||"grid",selectionMode:"single",selectedKeys:[r.color.toString("hexa")],onSelectionChange:s=>{s!=="all"&&r.setColor(i.get([...s][0]))},disallowEmptySelection:!0},ve.createElement(Wq.Provider,{value:i},e.children))}),sve=T.forwardRef(function(e,n){let r=e.color||"#0000",i=T.useMemo(()=>typeof r=="string"?Ao(r):r,[r]),{locale:a}=Qi(),s=T.useContext(Wq);T.useEffect(()=>{let c=i.toString("hexa");return s.set(c,i),()=>{s.delete(c)}},[i,s]);let o=c=>typeof c=="function"?u=>c({...u,color:i}):c;return ve.createElement(En,{...e,ref:n,id:i.toString("hexa"),textValue:i.getColorName(a),className:o(e.className||"react-aria-ColorSwatchPickerItem"),style:o(e.style)},ah(o(e.children),c=>ve.createElement(xI.Provider,{value:{color:i}},c)))}),ove=T.createContext(null),lve=T.createContext(null);function cve(t){let e=Xl(ove,t.slot);t=Et(e,t);let n=PG(t),r=On({...t,values:{color:n.color}});return ve.createElement(Sa,{values:[[lve,n],[Z9,{value:n.color,onChange:n.setColor}],[X9,{value:n.color,onChange:n.setColor}],[gfe,{value:n.color,onChange:n.setColor}],[Y9,{value:n.color,onChange:n.setColor}],[xI,{color:n.color}],[Gq,{value:n.color,onChange:n.setColor}]]},r.children)}const uve=T.createContext(null),aw=T.createContext(null),fT=T.createContext(null),wI=T.createContext(null),dve=T.forwardRef(function(e,n){[e,n]=rr(e,n,uve);let r=T.useRef(null),i=bD(e.formatOptions),a=TG({...e,numberFormatter:i}),[s,o]=Yl(!e["aria-label"]&&!e["aria-labelledby"]),{groupProps:c,trackProps:u,labelProps:h,outputProps:f}=kG({...e,label:o},a,r),m=On({...e,values:{orientation:a.orientation,isDisabled:a.isDisabled,state:a},defaultClassName:"react-aria-Slider"}),g=gn(e,{global:!0});return delete g.id,ve.createElement(Sa,{values:[[aw,a],[fT,{...u,ref:r}],[wI,f],[ml,{...h,ref:s}]]},ve.createElement("div",{...Et(g,m,c),ref:n,slot:e.slot||void 0,"data-orientation":a.orientation,"data-disabled":a.isDisabled||void 0}))}),hve=T.forwardRef(function(e,n){[e,n]=rr(e,n,wI);let{children:r,style:i,className:a,...s}=e,o=T.useContext(aw),c=On({className:a,style:i,children:r,defaultChildren:o.getThumbValueLabel(0),defaultClassName:"react-aria-SliderOutput",values:{orientation:o.orientation,isDisabled:o.isDisabled,state:o}});return ve.createElement("output",{...s,...c,ref:n,"data-orientation":o.orientation||void 0,"data-disabled":o.isDisabled||void 0})}),SI=T.forwardRef(function(e,n){[e,n]=rr(e,n,fT);let r=T.useContext(aw),{onHoverStart:i,onHoverEnd:a,onHoverChange:s,...o}=e,{hoverProps:c,isHovered:u}=pl({onHoverStart:i,onHoverEnd:a,onHoverChange:s}),h=On({...e,defaultClassName:"react-aria-SliderTrack",values:{orientation:r.orientation,isDisabled:r.isDisabled,isHovered:u,state:r}});return ve.createElement("div",{...Et(o,c),...h,ref:n,"data-hovered":u||void 0,"data-orientation":r.orientation||void 0,"data-disabled":r.isDisabled||void 0})}),fve=T.forwardRef(function(e,n){let{inputRef:r=null}=e,i=T.useContext(aw),{ref:a}=Xl(fT),{index:s=0}=e,o=T.useRef(null),c=r||o,[u,h]=Yl(!e["aria-label"]&&!e["aria-labelledby"]),{thumbProps:f,inputProps:m,labelProps:g,isDragging:v,isFocused:x,isDisabled:_}=RG({...e,index:s,trackRef:a,inputRef:c,label:h},i),{focusProps:w,isFocusVisible:S}=Xs(),{hoverProps:E,isHovered:A}=pl(e),N=On({...e,defaultClassName:"react-aria-SliderThumb",values:{state:i,isHovered:A,isDragging:v,isFocused:x,isFocusVisible:S,isDisabled:_}}),P=gn(e,{global:!0});return delete P.id,ve.createElement("div",{...Et(P,f,E),...N,ref:n,style:{...f.style,...N.style},"data-hovered":A||void 0,"data-dragging":v||void 0,"data-focused":x||void 0,"data-focus-visible":S||void 0,"data-disabled":_||void 0},ve.createElement(ew,null,ve.createElement("input",{ref:c,...Et(m,w)})),ve.createElement(Sa,{values:[[ml,{...g,ref:u}]]},N.children))}),pve=T.createContext(null),qq=T.forwardRef(function(e,n){[e,n]=rr(e,n,Z9);let{locale:r}=Qi(),i=qge({...e,locale:r}),a=ve.useRef(null),s=ve.useRef(null),[o,c]=Yl(!e["aria-label"]&&!e["aria-labelledby"]),{trackProps:u,thumbProps:h,inputProps:f,labelProps:m,outputProps:g}=r0e({...e,label:c,trackRef:a,inputRef:s},i),v=On({...e,values:{orientation:i.orientation,isDisabled:i.isDisabled,state:i},defaultClassName:"react-aria-ColorSlider"}),x=gn(e,{global:!0});return delete x.id,ve.createElement(Sa,{values:[[pve,i],[aw,i],[fT,{...u,ref:a}],[wI,g],[ml,{...m,ref:o,children:i.value.getChannelName(e.channel,r)}],[bI,{state:i,thumbProps:h,inputXRef:s,xInputProps:f,isDisabled:e.isDisabled}]]},ve.createElement("div",{...x,...v,ref:n,slot:e.slot||void 0,"data-orientation":i.orientation,"data-disabled":i.isDisabled||void 0}))}),Kq=T.createContext({placement:"bottom"}),mve=T.forwardRef(function(e,n){[e,n]=rr(e,n,Kq);let r=e.placement,i={position:"absolute",transform:r==="top"||r==="bottom"?"translateX(-50%)":"translateY(-50%)"};r!=null&&(i[r]="100%");let a=On({...e,defaultClassName:"react-aria-OverlayArrow",values:{placement:r}});a.style&&Object.keys(a.style).forEach(o=>a.style[o]===void 0&&delete a.style[o]);let s=gn(e);return ve.createElement("div",{...s,...a,style:{...i,...a.style},ref:n,"data-placement":r})}),pT=T.createContext(null),kL=T.createContext(null),Yr=T.forwardRef(function(e,n){[e,n]=rr(e,n,pT);let r=T.useContext(Zf),i=nw(e),a=e.isOpen!=null||e.defaultOpen!=null||!r?i:r,s=fD(n,a.isOpen)||e.isExiting||!1,o=pge(),{direction:c}=Qi();if(o){let u=e.children;return typeof u=="function"&&(u=u({trigger:e.trigger||null,placement:"bottom",isEntering:!1,isExiting:!1,defaultChildren:null})),ve.createElement(ve.Fragment,null,u)}return a&&!a.isOpen&&!s?null:ve.createElement(gve,{...e,triggerRef:e.triggerRef,state:a,popoverRef:n,isExiting:s,dir:c})});function gve({state:t,isExiting:e,UNSTABLE_portalContainer:n,clearContexts:r,...i}){let a=T.useRef(null),s=T.useRef(null),o=T.useContext(kL),c=o&&i.trigger==="SubmenuTrigger";var u;let{popoverProps:h,underlayProps:f,arrowProps:m,placement:g,triggerAnchorPoint:v}=jme({...i,offset:(u=i.offset)!==null&&u!==void 0?u:8,arrowRef:a,groupRef:c?o:s},t),x=i.popoverRef,_=ZR(x,!!g)||i.isEntering||!1,w=On({...i,defaultClassName:"react-aria-Popover",values:{trigger:i.trigger||null,placement:g,isEntering:_,isExiting:e}}),S=!i.isNonModal||i.trigger==="SubmenuTrigger",[E,A]=T.useState(!1);mr(()=>{x.current&&A(S&&!x.current.querySelector("[role=dialog]"))},[x,S]),T.useEffect(()=>{E&&i.trigger!=="SubmenuTrigger"&&x.current&&!x.current.contains(document.activeElement)&&Hf(x.current)},[E,x,i.trigger]);let N=T.useMemo(()=>{let k=w.children;if(r)for(let L of r)k=ve.createElement(L.Provider,{value:null},k);return k},[w.children,r]),P={...h.style,"--trigger-anchor-point":v?`${v.x}px ${v.y}px`:void 0,...w.style},R=ve.createElement("div",{...Et(gn(i,{global:!0}),h),...w,role:E?"dialog":void 0,tabIndex:E?-1:void 0,"aria-label":i["aria-label"],"aria-labelledby":i["aria-labelledby"],ref:x,slot:i.slot||void 0,style:P,dir:i.dir,"data-trigger":i.trigger,"data-placement":g,"data-entering":_||void 0,"data-exiting":e||void 0},!i.isNonModal&&ve.createElement(ND,{onDismiss:t.close}),ve.createElement(Kq.Provider,{value:{...m,placement:g,ref:a}},N),ve.createElement(ND,{onDismiss:t.close}));if(!c)return ve.createElement(DD,{...i,shouldContainFocus:E,isExiting:e,portalContainer:n},!i.isNonModal&&t.isOpen&&ve.createElement("div",{"data-testid":"underlay",...f,style:{position:"fixed",inset:0}}),ve.createElement("div",{ref:s,style:{display:"contents"}},ve.createElement(kL.Provider,{value:s},R)));var D;return ve.createElement(DD,{...i,shouldContainFocus:E,isExiting:e,portalContainer:(D=n??o?.current)!==null&&D!==void 0?D:void 0},R)}const vve=T.createContext(null);class yve extends Eg{filter(e,n,r){let i=e.getItem(this.firstChildKey);if(i&&r(i.textValue,this)){let a=this.clone();return n.addDescendants(a,e),a}return null}}yve.type="submenutrigger";const Xq=T.createContext(null),Zf=T.createContext(null);function my(t){let e=P0e(t),n=T.useRef(null),{triggerProps:r,overlayProps:i}=B7({type:"dialog"},e,n),[a,s]=T.useState(null),o=T.useCallback(()=>{n.current&&s(n.current.offsetWidth+"px")},[n]);return f_({ref:n,onResize:o}),r.id=Ji(),i["aria-labelledby"]=r.id,ve.createElement(Sa,{values:[[Zf,e],[vve,e],[Xq,i],[pT,{trigger:"DialogTrigger",triggerRef:n,"aria-labelledby":i["aria-labelledby"],style:{"--trigger-width":a}}]]},ve.createElement(hme,{...r,ref:n,isPressed:e.isOpen},t.children))}const Yq=T.forwardRef(function(e,n){let r=e["aria-labelledby"];[e,n]=rr(e,n,Xq);let{dialogProps:i,titleProps:a}=u0e({...e,"aria-labelledby":r},n),s=T.useContext(Zf);!i["aria-label"]&&!i["aria-labelledby"]&&e["aria-labelledby"]&&(i["aria-labelledby"]=e["aria-labelledby"]);let o=On({defaultClassName:"react-aria-Dialog",className:e.className,style:e.style,children:e.children,values:{close:s?.close||(()=>{})}}),c=gn(e,{global:!0});return ve.createElement("section",{...Et(c,o,i),ref:n,slot:e.slot||void 0},ve.createElement(Sa,{values:[[J9,{slots:{[$3]:{},title:{...a,level:2}}}],[Yf,{slots:{[$3]:{},close:{onPress:()=>s?.close()}}}]]},o.children))}),bve=T.createContext(null),xve=T.createContext(null),Zq=T.forwardRef(function(e,n){[e,n]=rr(e,n,bve);let{children:r,isDisabled:i=!1,isInvalid:a=!1,isRequired:s=!1}=e,o=T.useMemo(()=>{var c;return ve.createElement(iw.Provider,{value:{items:(c=e.items)!==null&&c!==void 0?c:e.defaultItems}},typeof r=="function"?r({isOpen:!1,isDisabled:i,isInvalid:a,isRequired:s,defaultChildren:null}):r)},[r,i,a,s,e.items,e.defaultItems]);return ve.createElement(lT,{content:o},c=>ve.createElement(wve,{props:e,collection:c,comboBoxRef:n}))}),_ve=[ml,Yf,Mg,Vy,Zl];function wve({props:t,collection:e,comboBoxRef:n}){let{name:r,formValue:i="key",allowsCustomValue:a}=t;a&&(i="text");let{validationBehavior:s}=Xl(Tg)||{};var o,c;let u=(c=(o=t.validationBehavior)!==null&&o!==void 0?o:s)!==null&&c!==void 0?c:"native",{contains:h}=Kpe({sensitivity:"base"}),f=T0e({defaultFilter:t.defaultFilter||h,...t,items:t.items,children:void 0,collection:e,validationBehavior:u}),m=T.useRef(null),g=T.useRef(null),v=T.useRef(null),x=T.useRef(null),[_,w]=Yl(!t["aria-label"]&&!t["aria-labelledby"]),{buttonProps:S,inputProps:E,listBoxProps:A,labelProps:N,descriptionProps:P,errorMessageProps:R,...D}=sge({...Uc(t),label:w,inputRef:g,buttonRef:m,listBoxRef:v,popoverRef:x,name:i==="text"?r:void 0,validationBehavior:u},f),[k,L]=T.useState(null),$=T.useCallback(()=>{if(g.current){var O;let z=(O=m.current)===null||O===void 0?void 0:O.getBoundingClientRect(),V=g.current.getBoundingClientRect(),H=z?Math.min(z.left,V.left):V.left,ee=z?Math.max(z.right,V.right):V.right;L(ee-H+"px")}},[m,g,L]);f_({ref:g,onResize:$});let B=T.useMemo(()=>({isOpen:f.isOpen,isDisabled:t.isDisabled||!1,isInvalid:D.isInvalid||!1,isRequired:t.isRequired||!1}),[f.isOpen,t.isDisabled,D.isInvalid,t.isRequired]),q=On({...t,values:B,defaultClassName:"react-aria-ComboBox"}),U=gn(t,{global:!0});delete U.id;var J;return ve.createElement(Sa,{values:[[xve,f],[ml,{...N,ref:_}],[Yf,{...S,ref:m,isPressed:f.isOpen}],[Mg,{...E,ref:g}],[Zf,f],[pT,{ref:x,triggerRef:g,scrollRef:v,placement:"bottom start",isNonModal:!0,trigger:"ComboBox",style:{"--trigger-width":k},clearContexts:_ve}],[iw,{...A,ref:v}],[Ag,f],[Zl,{slots:{description:P,errorMessage:R}}],[Vy,{isInvalid:D.isInvalid,isDisabled:t.isDisabled||!1}],[sh,D]]},ve.createElement("div",{...U,...q,ref:n,slot:t.slot||void 0,"data-focused":f.isFocused||void 0,"data-open":f.isOpen||void 0,"data-disabled":t.isDisabled||void 0,"data-invalid":D.isInvalid||void 0,"data-required":t.isRequired||void 0}),r&&i==="key"&&ve.createElement("input",{type:"hidden",name:r,form:t.form,value:(J=f.selectedKey)!==null&&J!==void 0?J:""}))}const Sve=T.forwardRef(function(e,n){[e,n]=rr(e,n,J9);let{children:r,level:i=3,className:a,...s}=e,o=`h${i}`;return ve.createElement(o,{...s,ref:n,className:a??"react-aria-Heading"},r)}),Eve=T.createContext(null),EI=T.createContext(null),Cve=T.forwardRef(function(e,n){if(T.useContext(EI))return ve.createElement(RL,{...e,modalRef:n},e.children);let{isDismissable:i,isKeyboardDismissDisabled:a,isOpen:s,defaultOpen:o,onOpenChange:c,children:u,isEntering:h,isExiting:f,UNSTABLE_portalContainer:m,shouldCloseOnInteractOutside:g,...v}=e;return ve.createElement(Mve,{isDismissable:i,isKeyboardDismissDisabled:a,isOpen:s,defaultOpen:o,onOpenChange:c,isEntering:h,isExiting:f,UNSTABLE_portalContainer:m,shouldCloseOnInteractOutside:g},ve.createElement(RL,{...v,modalRef:n},u))});function Tve(t,e){[t,e]=rr(t,e,Eve);let n=T.useContext(Zf),r=nw(t),i=t.isOpen!=null||t.defaultOpen!=null||!n?r:n,a=fl(e),s=T.useRef(null),o=fD(a,i.isOpen),c=fD(s,i.isOpen),u=o||c||t.isExiting||!1,h=wg();return!i.isOpen&&!u||h?null:ve.createElement(Ave,{...t,state:i,isExiting:u,overlayRef:a,modalRef:s})}const Mve=T.forwardRef(Tve);function Ave({UNSTABLE_portalContainer:t,...e}){let n=e.modalRef,{state:r}=e,{modalProps:i,underlayProps:a}=Lme(e,r,n),s=ZR(e.overlayRef)||e.isEntering||!1,o=On({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:s,isExiting:e.isExiting,state:r}}),c=Qfe(),u;if(typeof document<"u"){let f=ig(document.body)?document.body:document.scrollingElement||document.documentElement,m=f.getBoundingClientRect().height%1;u=f.scrollHeight-m}let h={...o.style,"--visual-viewport-height":c.height+"px","--page-height":u!==void 0?u+"px":void 0};return ve.createElement(DD,{isExiting:e.isExiting,portalContainer:t},ve.createElement("div",{...Et(gn(e,{global:!0}),a),...o,style:h,ref:e.overlayRef,"data-entering":s||void 0,"data-exiting":e.isExiting||void 0},ve.createElement(Sa,{values:[[EI,{modalProps:i,modalRef:n,isExiting:e.isExiting,isDismissable:e.isDismissable}],[Zf,r]]},o.children)))}function RL(t){let{modalProps:e,modalRef:n,isExiting:r,isDismissable:i}=T.useContext(EI),a=T.useContext(Zf),s=T.useMemo(()=>J_(t.modalRef,n),[t.modalRef,n]),o=fl(s),c=ZR(o),u=On({...t,defaultClassName:"react-aria-Modal",values:{isEntering:c,isExiting:r,state:a}});return ve.createElement("div",{...Et(gn(t,{global:!0}),e),...u,ref:o,"data-entering":c||void 0,"data-exiting":r||void 0},i&&ve.createElement(ND,{onDismiss:a.close}),u.children)}const Pve=T.createContext(null),Nve=T.createContext(null),Dve=T.forwardRef(function(e,n){[e,n]=rr(e,n,Pve);let{validationBehavior:r}=Xl(Tg)||{};var i,a;let s=(a=(i=e.validationBehavior)!==null&&i!==void 0?i:r)!==null&&a!==void 0?a:"native",{locale:o}=Qi(),c=AG({...e,locale:o,validationBehavior:s}),u=T.useRef(null),[h,f]=Yl(!e["aria-label"]&&!e["aria-labelledby"]),{labelProps:m,groupProps:g,inputProps:v,incrementButtonProps:x,decrementButtonProps:_,descriptionProps:w,errorMessageProps:S,...E}=ZW({...Uc(e),label:f,validationBehavior:s},c,u),A=On({...e,values:{state:c,isDisabled:e.isDisabled||!1,isInvalid:E.isInvalid||!1,isRequired:e.isRequired||!1},defaultClassName:"react-aria-NumberField"}),N=gn(e,{global:!0});return delete N.id,ve.createElement(Sa,{values:[[Nve,c],[Vy,g],[Mg,{...v,ref:u}],[ml,{...m,ref:h}],[Yf,{slots:{increment:x,decrement:_}}],[Zl,{slots:{description:w,errorMessage:S}}],[sh,E]]},ve.createElement("div",{...N,...A,ref:n,slot:e.slot||void 0,"data-disabled":e.isDisabled||void 0,"data-required":e.isRequired||void 0,"data-invalid":E.isInvalid||void 0}),e.name&&ve.createElement("input",{type:"hidden",name:e.name,form:e.form,value:isNaN(c.numberValue)?"":c.numberValue,disabled:e.isDisabled||void 0}))}),kve=T.createContext(null),Rve=T.createContext(null),Jq=T.createContext(null),Ive=T.forwardRef(function(e,n){[e,n]=rr(e,n,kve);let{validationBehavior:r}=Xl(Tg)||{};var i,a;let s=(a=(i=e.validationBehavior)!==null&&i!==void 0?i:r)!==null&&a!==void 0?a:"native",o=k0e({...e,validationBehavior:s}),[c,u]=Yl(!e["aria-label"]&&!e["aria-labelledby"]),{radioGroupProps:h,labelProps:f,descriptionProps:m,errorMessageProps:g,...v}=h0e({...e,label:u,validationBehavior:s},o),x=On({...e,values:{orientation:e.orientation||"vertical",isDisabled:o.isDisabled,isReadOnly:o.isReadOnly,isRequired:o.isRequired,isInvalid:o.isInvalid,state:o},defaultClassName:"react-aria-RadioGroup"}),_=gn(e,{global:!0});return ve.createElement("div",{...Et(_,x,h),ref:n,slot:e.slot||void 0,"data-orientation":e.orientation||"vertical","data-invalid":o.isInvalid||void 0,"data-disabled":o.isDisabled||void 0,"data-readonly":o.isReadOnly||void 0,"data-required":o.isRequired||void 0},ve.createElement(Sa,{values:[[Jq,o],[ml,{...f,ref:c,elementType:"span"}],[Zl,{slots:{description:m,errorMessage:g}}],[sh,v]]},ve.createElement(hT,null,x.children)))}),oA=T.forwardRef(function(e,n){let{inputRef:r=null,...i}=e;[e,n]=rr(i,n,Rve);let a=ve.useContext(Jq),s=fl(T.useMemo(()=>J_(r,e.inputRef!==void 0?e.inputRef:null),[r,e.inputRef])),{labelProps:o,inputProps:c,isSelected:u,isDisabled:h,isPressed:f}=d0e({...Uc(e),children:typeof e.children=="function"?!0:e.children},a,s),{isFocused:m,isFocusVisible:g,focusProps:v}=Xs(),x=h||a.isReadOnly,{hoverProps:_,isHovered:w}=pl({...e,isDisabled:x}),S=On({...e,defaultClassName:"react-aria-Radio",values:{isSelected:u,isPressed:f,isHovered:w,isFocused:m,isFocusVisible:g,isDisabled:h,isReadOnly:a.isReadOnly,isInvalid:a.isInvalid,isRequired:a.isRequired}}),E=gn(e,{global:!0});return delete E.id,delete E.onClick,ve.createElement("label",{...Et(E,o,_,S),ref:n,"data-selected":u||void 0,"data-pressed":f||void 0,"data-hovered":w||void 0,"data-focused":m||void 0,"data-focus-visible":g||void 0,"data-disabled":h||void 0,"data-readonly":a.isReadOnly||void 0,"data-invalid":a.isInvalid||void 0,"data-required":a.isRequired||void 0},ve.createElement(ew,{elementType:"span"},ve.createElement("input",{...Et(c,v),ref:s})),ve.createElement(rw.Provider,{value:{isSelected:u}},S.children))}),$ve=T.createContext(null),jve=Cg(function(e,n){[e,n]=rr(e,n,$ve);let{validationBehavior:r}=Xl(Tg)||{};var i,a;let s=(a=(i=e.validationBehavior)!==null&&i!==void 0?i:r)!==null&&a!==void 0?a:"native",o=T.useRef(null);[e,o]=rr(e,o,Q9);let[c,u]=Yl(!e["aria-label"]&&!e["aria-labelledby"]),h=R0e({...e,validationBehavior:s}),{labelProps:f,inputProps:m,clearButtonProps:g,descriptionProps:v,errorMessageProps:x,..._}=lge({...Uc(e),label:u,validationBehavior:s},h,o),w=On({...e,values:{isEmpty:h.value==="",isDisabled:e.isDisabled||!1,isInvalid:_.isInvalid||!1,state:h},defaultClassName:"react-aria-SearchField"}),S=gn(e,{global:!0});return delete S.id,ve.createElement("div",{...S,...w,ref:n,slot:e.slot||void 0,"data-empty":h.value===""||void 0,"data-disabled":e.isDisabled||void 0,"data-invalid":_.isInvalid||void 0},ve.createElement(Sa,{values:[[ml,{...f,ref:c}],[Mg,{...m,ref:o}],[Yf,g],[Zl,{slots:{description:v,errorMessage:x}}],[Vy,{isInvalid:_.isInvalid,isDisabled:e.isDisabled||!1}],[sh,_]]},w.children))});function Lve(t){return t&&t.__esModule?t.default:t}const CI=T.createContext(null),Qq=T.createContext(null),wi=T.forwardRef(function(e,n){[e,n]=rr(e,n,CI);let{children:r,isDisabled:i=!1,isInvalid:a=!1,isRequired:s=!1}=e,o=T.useMemo(()=>typeof r=="function"?r({isOpen:!1,isDisabled:i,isInvalid:a,isRequired:s,isFocused:!1,isFocusVisible:!1,defaultChildren:null}):r,[r,i,a,s]);return ve.createElement(lT,{content:o},c=>ve.createElement(Fve,{props:e,collection:c,selectRef:n}))}),Ove=[ml,Yf,Zl];function Fve({props:t,selectRef:e,collection:n}){let{validationBehavior:r}=Xl(Tg)||{};var i,a;let s=(a=(i=t.validationBehavior)!==null&&i!==void 0?i:r)!==null&&a!==void 0?a:"native",o=I0e({...t,collection:n,children:void 0,validationBehavior:s}),{isFocusVisible:c,focusProps:u}=Xs({within:!0}),h=T.useRef(null),[f,m]=Yl(!t["aria-label"]&&!t["aria-labelledby"]),{labelProps:g,triggerProps:v,valueProps:x,menuProps:_,descriptionProps:w,errorMessageProps:S,hiddenSelectProps:E,...A}=f0e({...Uc(t),label:m,validationBehavior:s},o,h),[N,P]=T.useState(null),R=T.useCallback(()=>{h.current&&P(h.current.offsetWidth+"px")},[h]);f_({ref:h,onResize:R});let D=T.useMemo(()=>({isOpen:o.isOpen,isFocused:o.isFocused,isFocusVisible:c,isDisabled:t.isDisabled||!1,isInvalid:A.isInvalid||!1,isRequired:t.isRequired||!1}),[o.isOpen,o.isFocused,c,t.isDisabled,A.isInvalid,t.isRequired]),k=On({...t,values:D,defaultClassName:"react-aria-Select"}),L=gn(t,{global:!0});delete L.id;let $=T.useRef(null);return ve.createElement(Sa,{values:[[CI,t],[Qq,o],[eK,x],[ml,{...g,ref:f,elementType:"span"}],[Yf,{...v,ref:h,isPressed:o.isOpen,autoFocus:t.autoFocus}],[Zf,o],[pT,{trigger:"Select",triggerRef:h,scrollRef:$,placement:"bottom start",style:{"--trigger-width":N},"aria-labelledby":_["aria-labelledby"],clearContexts:Ove}],[iw,{..._,ref:$}],[Ag,o],[Zl,{slots:{description:w,errorMessage:S}}],[sh,A]]},ve.createElement("div",{...Et(L,k,u),ref:e,slot:t.slot||void 0,"data-focused":o.isFocused||void 0,"data-focus-visible":c||void 0,"data-open":o.isOpen||void 0,"data-disabled":t.isDisabled||void 0,"data-invalid":A.isInvalid||void 0,"data-required":t.isRequired||void 0},k.children,ve.createElement(m0e,{...E,autoComplete:t.autoComplete})))}const eK=T.createContext(null),ai=Cg(function(e,n){var r;[e,n]=rr(e,n,eK);let i=T.useContext(Qq),{placeholder:a}=Xl(CI),s=i.selectedItems.map(w=>{var S;let E=(S=w.props)===null||S===void 0?void 0:S.children;return typeof E=="function"&&(E=E({isHovered:!1,isPressed:!1,isSelected:!1,isFocused:!1,isFocusVisible:!1,isDisabled:!1,selectionMode:"single",selectionBehavior:"toggle"})),E}),o=Ope(),c=T.useMemo(()=>i.selectedItems.map(w=>w?.textValue),[i.selectedItems]),u=i.selectionManager.selectionMode,h=T.useMemo(()=>{var w;return u==="single"?(w=c[0])!==null&&w!==void 0?w:"":o.format(c)},[u,o,c]),f=T.useMemo(()=>{if(u==="single")return s[0];let w=o.formatToParts(c);if(w.length===0)return null;let S=0;return w.map(E=>E.type==="element"?ve.createElement(T.Fragment,{key:S},s[S++]):E.value)},[u,o,c,s]),m=Hu(Lve(_I),"react-aria-components");var g,v;let x=On({...e,defaultChildren:(g=f??a)!==null&&g!==void 0?g:m.format("selectPlaceholder"),defaultClassName:"react-aria-SelectValue",values:{selectedItem:(v=(r=i.selectedItems[0])===null||r===void 0?void 0:r.value)!==null&&v!==void 0?v:null,selectedItems:T.useMemo(()=>i.selectedItems.map(w=>{var S;return(S=w.value)!==null&&S!==void 0?S:null}),[i.selectedItems]),selectedText:h,isPlaceholder:i.selectedItems.length===0,state:i}}),_=gn(e,{global:!0});return ve.createElement("span",{ref:n,..._,...x,"data-placeholder":i.selectedItems.length===0||void 0},ve.createElement(Zl.Provider,{value:void 0},x.children))}),Bve=T.createContext(null),mT=T.forwardRef(function(e,n){let{inputRef:r=null,...i}=e;[e,n]=rr(i,n,Bve);let a=fl(J_(r,e.inputRef!==void 0?e.inputRef:null)),s=cT(e),{labelProps:o,inputProps:c,isSelected:u,isDisabled:h,isReadOnly:f,isPressed:m}=g0e({...Uc(e),children:typeof e.children=="function"?!0:e.children},s,a),{isFocused:g,isFocusVisible:v,focusProps:x}=Xs(),_=e.isDisabled||e.isReadOnly,{hoverProps:w,isHovered:S}=pl({...e,isDisabled:_}),E=On({...e,defaultClassName:"react-aria-Switch",values:{isSelected:u,isPressed:m,isHovered:S,isFocused:g,isFocusVisible:v,isDisabled:h,isReadOnly:f,state:s}}),A=gn(e,{global:!0});return delete A.id,delete A.onClick,ve.createElement("label",{...Et(A,o,w,E),ref:n,slot:e.slot||void 0,"data-selected":u||void 0,"data-pressed":m||void 0,"data-hovered":S||void 0,"data-focused":g||void 0,"data-focus-visible":v||void 0,"data-disabled":h||void 0,"data-readonly":f||void 0},ve.createElement(ew,{elementType:"span"},ve.createElement("input",{...Et(c,x),ref:a})),E.children)}),gT=T.createContext(null),gy=T.createContext(null),zve=T.forwardRef(function(e,n){[e,n]=rr(e,n,gT);let{children:r,orientation:i="horizontal"}=e;return r=T.useMemo(()=>typeof r=="function"?r({orientation:i,defaultChildren:null}):r,[r,i]),ve.createElement(lT,{content:r},a=>ve.createElement(Uve,{props:e,collection:a,tabsRef:n}))});function Uve({props:t,tabsRef:e,collection:n}){let{orientation:r="horizontal"}=t,i=j0e({...t,collection:n,children:void 0}),{focusProps:a,isFocused:s,isFocusVisible:o}=Xs({within:!0}),c=T.useMemo(()=>({orientation:r,isFocusWithin:s,isFocusVisible:o}),[r,s,o]),u=On({...t,defaultClassName:"react-aria-Tabs",values:c}),h=gn(t,{global:!0});return ve.createElement("div",{...Et(h,u,a),ref:e,slot:t.slot||void 0,"data-focused":s||void 0,"data-orientation":r,"data-focus-visible":o||void 0,"data-disabled":i.isDisabled||void 0},ve.createElement(Sa,{values:[[gT,t],[gy,i]]},u.children))}const Vve=T.forwardRef(function(e,n){return T.useContext(gy)?ve.createElement(Hve,{props:e,forwardedRef:n}):ve.createElement(iH,e)});function Hve({props:t,forwardedRef:e}){let n=T.useContext(gy),{CollectionRoot:r}=T.useContext(tw),{orientation:i="horizontal",keyboardActivation:a="automatic"}=Xl(gT),s=fl(e),{tabListProps:o}=x0e({...t,orientation:i,keyboardActivation:a},n,s),c=On({...t,children:null,defaultClassName:"react-aria-TabList",values:{orientation:i,state:n}}),u=gn(t,{global:!0});return delete u.id,ve.createElement("div",{...Et(u,c,o),ref:s,"data-orientation":i||void 0},ve.createElement(hT,null,ve.createElement(r,{collection:n.collection,persistedKeys:Mge(n.selectionManager.focusedKey)})))}class tK extends Eg{}tK.type="item";const a1=hI(tK,(t,e,n)=>{let r=T.useContext(gy),i=fl(e),{tabProps:a,isSelected:s,isDisabled:o,isPressed:c}=v0e({key:n.key,...t},r,i),{focusProps:u,isFocused:h,isFocusVisible:f}=Xs(),{hoverProps:m,isHovered:g}=pl({isDisabled:o,onHoverStart:t.onHoverStart,onHoverEnd:t.onHoverEnd,onHoverChange:t.onHoverChange}),v=On({...t,id:void 0,children:n.rendered,defaultClassName:"react-aria-Tab",values:{isSelected:s,isDisabled:o,isFocused:h,isFocusVisible:f,isPressed:c,isHovered:g}}),x=n.props.href?"a":"div",_=gn(t,{global:!0});return delete _.id,delete _.onClick,ve.createElement(x,{...Et(_,v,a,u,m),ref:i,"data-selected":s||void 0,"data-disabled":o||void 0,"data-focused":h||void 0,"data-focus-visible":f||void 0,"data-pressed":c||void 0,"data-hovered":g||void 0},ve.createElement(rw.Provider,{value:{isSelected:s}},v.children))}),s1=Cg(function(e,n){const r=T.useContext(gy);let i=fl(n),{id:a,...s}=e,{tabPanelProps:o}=y0e(e,r,i),{focusProps:c,isFocused:u,isFocusVisible:h}=Xs(),f=r.selectedKey===e.id,m=On({...e,defaultClassName:"react-aria-TabPanel",values:{isFocused:u,isFocusVisible:h,isInert:hD(!f),state:r}});if(!f&&!e.shouldForceMount)return null;let g=gn(s,{global:!0});delete g.id;let v=f?Et(g,o,c,m):m;return ve.createElement("div",{...v,ref:i,"data-focused":u||void 0,"data-focus-visible":h||void 0,inert:hD(!f||e.inert),"data-inert":f?void 0:"true"},ve.createElement(Sa,{values:[[gT,null],[gy,null]]},ve.createElement(tw.Provider,{value:aH},m.children)))}),nK=T.createContext({});let Gve=t=>{let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,...i}=t;return i};const Do=T.forwardRef(function(e,n){[e,n]=rr(e,n,nK);let{hoverProps:r,isHovered:i}=pl(e),{isFocused:a,isFocusVisible:s,focusProps:o}=Xs({isTextInput:!0,autoFocus:e.autoFocus}),c=!!e["aria-invalid"]&&e["aria-invalid"]!=="false",u=On({...e,values:{isHovered:i,isFocused:a,isFocusVisible:s,isDisabled:e.disabled||!1,isInvalid:c},defaultClassName:"react-aria-TextArea"});return ve.createElement("textarea",{...Et(Gve(e),o,r),...u,ref:n,"data-focused":a||void 0,"data-disabled":e.disabled||void 0,"data-hovered":i||void 0,"data-focus-visible":s||void 0,"data-invalid":c||void 0})}),Wve=T.createContext(null),xn=Cg(function(e,n){[e,n]=rr(e,n,Wve);let{validationBehavior:r}=Xl(Tg)||{};var i,a;let s=(a=(i=e.validationBehavior)!==null&&i!==void 0?i:r)!==null&&a!==void 0?a:"native",o=T.useRef(null);[e,o]=rr(e,o,Q9);let[c,u]=Yl(!e["aria-label"]&&!e["aria-labelledby"]),[h,f]=T.useState("input"),{labelProps:m,inputProps:g,descriptionProps:v,errorMessageProps:x,..._}=oT({...Uc(e),inputElementType:h,label:u,validationBehavior:s},o),w=T.useCallback(A=>{o.current=A,A&&f(A instanceof HTMLTextAreaElement?"textarea":"input")},[o]),S=On({...e,values:{isDisabled:e.isDisabled||!1,isInvalid:_.isInvalid,isReadOnly:e.isReadOnly||!1,isRequired:e.isRequired||!1},defaultClassName:"react-aria-TextField"}),E=gn(e,{global:!0});return delete E.id,ve.createElement("div",{...E,...S,ref:n,slot:e.slot||void 0,"data-disabled":e.isDisabled||void 0,"data-invalid":_.isInvalid||void 0,"data-readonly":e.isReadOnly||void 0,"data-required":e.isRequired||void 0},ve.createElement(Sa,{values:[[ml,{...m,ref:c}],[Mg,{...g,ref:w}],[nK,{...g,ref:w}],[Vy,{role:"presentation",isInvalid:_.isInvalid,isDisabled:e.isDisabled||!1}],[Zl,{slots:{description:v,errorMessage:x}}],[sh,_]]},S.children))}),qve=T.createContext({}),rK=T.createContext(null),hf=T.forwardRef(function(e,n){[e,n]=rr(e,n,qve);let r=kge(e),{groupProps:i}=Pge(e,r,n),a=On({...e,values:{isDisabled:r.isDisabled,state:r},defaultClassName:"react-aria-ToggleButtonGroup"}),s=gn(e,{global:!0});return ve.createElement("div",{...Et(s,a,i),ref:n,slot:e.slot||void 0,"data-orientation":e.orientation||"horizontal","data-disabled":e.isDisabled||void 0},ve.createElement(rK.Provider,{value:r},ve.createElement(hT,null,a.children)))}),Kve=T.createContext({}),Iv=T.forwardRef(function(e,n){[e,n]=rr(e,n,Kve);let r=T.useContext(rK),i=cT(r&&e.id!=null?{isSelected:r.selectedKeys.has(e.id),onChange(_){r.setSelected(e.id,_)}}:e),{buttonProps:a,isPressed:s,isSelected:o,isDisabled:c}=r&&e.id!=null?Nge({...e,id:e.id},r,n):oH({...e,id:e.id!=null?String(e.id):void 0},i,n),{focusProps:u,isFocused:h,isFocusVisible:f}=Xs(e),{hoverProps:m,isHovered:g}=pl(e),v=On({...e,id:void 0,values:{isHovered:g,isPressed:s,isFocused:h,isSelected:i.isSelected,isFocusVisible:f,isDisabled:c,state:i},defaultClassName:"react-aria-ToggleButton"}),x=gn(e,{global:!0});return delete x.id,delete x.onClick,ve.createElement("button",{...Et(x,v,a,u,m),ref:n,slot:e.slot||void 0,"data-focused":h||void 0,"data-disabled":c||void 0,"data-pressed":s||void 0,"data-selected":o||void 0,"data-hovered":g||void 0,"data-focus-visible":f||void 0},ve.createElement(rw.Provider,{value:{isSelected:o}},v.children))});var Xve=/\s+/g,Yve=t=>typeof t!="string"||!t?t:t.replace(Xve," ").trim(),Y3=(...t)=>{const e=[],n=r=>{if(!r&&r!==0&&r!==0n)return;if(Array.isArray(r)){for(let a=0,s=r.length;a<s;a++)n(r[a]);return}const i=typeof r;if(i==="string"||i==="number"||i==="bigint"){if(i==="number"&&r!==r)return;e.push(String(r))}else if(i==="object"){const a=Object.keys(r);for(let s=0,o=a.length;s<o;s++){const c=a[s];r[c]&&e.push(c)}}};for(let r=0,i=t.length;r<i;r++){const a=t[r];a!=null&&n(a)}return e.length>0?Yve(e.join(" ")):void 0},IL=t=>t===!1?"false":t===!0?"true":t===0?"0":t,mo=t=>{if(!t||typeof t!="object")return!0;for(const e in t)return!1;return!0},Zve=(t,e)=>{if(t===e)return!0;if(!t||!e)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++){const a=n[i];if(!r.includes(a)||t[a]!==e[a])return!1}return!0},Jve=(t,e)=>{for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];n in t?t[n]=Y3(t[n],r):t[n]=r}return t},iK=(t,e)=>{for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)?iK(r,e):r&&e.push(r)}},aK=(...t)=>{const e=[];iK(t,e);const n=[];for(let r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},OD=(t,e)=>{const n={};for(const r in t){const i=t[r];if(r in e){const a=e[r];Array.isArray(i)||Array.isArray(a)?n[r]=aK(a,i):typeof i=="object"&&typeof a=="object"&&i&&a?n[r]=OD(i,a):n[r]=a+" "+i}else n[r]=i}for(const r in e)r in t||(n[r]=e[r]);return n},Qve={twMerge:!0,twMergeConfig:{}};function eye(){let t=null,e={},n=!1;return{get cachedTwMerge(){return t},set cachedTwMerge(r){t=r},get cachedTwMergeConfig(){return e},set cachedTwMergeConfig(r){e=r},get didTwMergeConfigChange(){return n},set didTwMergeConfigChange(r){n=r},reset(){t=null,e={},n=!1}}}var Rd=eye(),tye=t=>{const e=(r,i)=>{const{extend:a=null,slots:s={},variants:o={},compoundVariants:c=[],compoundSlots:u=[],defaultVariants:h={}}=r,f={...Qve,...i},m=a?.base?Y3(a.base,r?.base):r?.base,g=a?.variants&&!mo(a.variants)?OD(o,a.variants):o,v=a?.defaultVariants&&!mo(a.defaultVariants)?{...a.defaultVariants,...h}:h;!mo(f.twMergeConfig)&&!Zve(f.twMergeConfig,Rd.cachedTwMergeConfig)&&(Rd.didTwMergeConfigChange=!0,Rd.cachedTwMergeConfig=f.twMergeConfig);const x=mo(a?.slots),_=mo(s)?{}:{base:Y3(r?.base,x&&a?.base),...s},w=x?_:Jve({...a?.slots},mo(_)?{base:r?.base}:_),S=mo(a?.compoundVariants)?c:aK(a?.compoundVariants,c),E=N=>{if(mo(g)&&mo(s)&&x)return t(m,N?.class,N?.className)(f);if(S&&!Array.isArray(S))throw new TypeError(`The "compoundVariants" prop must be an array. Received: ${typeof S}`);if(u&&!Array.isArray(u))throw new TypeError(`The "compoundSlots" prop must be an array. Received: ${typeof u}`);const P=(U,J=g,O=null,z=null)=>{const V=J[U];if(!V||mo(V))return null;const H=z?.[U]??N?.[U];if(H===null)return null;const ee=IL(H);if(typeof ee=="object")return null;const Y=v?.[U],Z=ee??IL(Y);return V[Z||"false"]},R=()=>{if(!g)return null;const U=Object.keys(g),J=[];for(let O=0;O<U.length;O++){const z=P(U[O],g);z&&J.push(z)}return J},D=(U,J)=>{if(!g||typeof g!="object")return null;const O=[];for(const z in g){const V=P(z,g,U,J),H=U==="base"&&typeof V=="string"?V:V&&V[U];H&&O.push(H)}return O},k={};for(const U in N){const J=N[U];J!==void 0&&(k[U]=J)}const L=(U,J)=>{const O=typeof N?.[U]=="object"?{[U]:N[U]?.initial}:{};return{...v,...k,...O,...J}},$=(U=[],J)=>{const O=[],z=U.length;for(let V=0;V<z;V++){const{class:H,className:ee,...Y}=U[V];let Z=!0;const K=L(null,J);for(const X in Y){const ne=Y[X],G=K[X];if(Array.isArray(ne)){if(!ne.includes(G)){Z=!1;break}}else{if((ne==null||ne===!1)&&(G==null||G===!1))continue;if(G!==ne){Z=!1;break}}}Z&&(H&&O.push(H),ee&&O.push(ee))}return O},B=U=>{const J=$(S,U);if(!Array.isArray(J))return J;const O={},z=t;for(let V=0;V<J.length;V++){const H=J[V];if(typeof H=="string")O.base=z(O.base,H)(f);else if(typeof H=="object")for(const ee in H)O[ee]=z(O[ee],H[ee])(f)}return O},q=U=>{if(u.length<1)return null;const J={},O=L(null,U);for(let z=0;z<u.length;z++){const{slots:V=[],class:H,className:ee,...Y}=u[z];if(!mo(Y)){let Z=!0;for(const K in Y){const X=O[K],ne=Y[K];if(X===void 0||(Array.isArray(ne)?!ne.includes(X):ne!==X)){Z=!1;break}}if(!Z)continue}for(let Z=0;Z<V.length;Z++){const K=V[Z];J[K]||(J[K]=[]),J[K].push([H,ee])}}return J};if(!mo(s)||!x){const U={};if(typeof w=="object"&&!mo(w)){const J=t;for(const O in w)U[O]=z=>{const V=B(z),H=q(z);return J(w[O],D(O,z),V?V[O]:void 0,H?H[O]:void 0,z?.class,z?.className)(f)}}return U}return t(m,R(),$(S),N?.class,N?.className)(f)},A=()=>{if(!(!g||typeof g!="object"))return Object.keys(g)};return E.variantKeys=A(),E.extend=a,E.base=m,E.slots=w,E.variants=g,E.defaultVariants=v,E.compoundSlots=u,E.compoundVariants=S,E};return{tv:e,createTV:r=>(i,a)=>e(i,a?OD(r,a):r)}};const nye=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},rye=(t,e)=>({classGroupId:t,validator:e}),sK=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),Z3="-",$L=[],iye="arbitrary..",aye=t=>{const e=oye(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{if(s.startsWith("[")&&s.endsWith("]"))return sye(s);const o=s.split(Z3),c=o[0]===""&&o.length>1?1:0;return oK(o,c,e)},getConflictingClassGroupIds:(s,o)=>{if(o){const c=r[s],u=n[s];return c?u?nye(u,c):c:u||$L}return n[s]||$L}}},oK=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],a=n.nextPart.get(i);if(a){const u=oK(t,e+1,a);if(u)return u}const s=n.validators;if(s===null)return;const o=e===0?t.join(Z3):t.slice(e).join(Z3),c=s.length;for(let u=0;u<c;u++){const h=s[u];if(h.validator(o))return h.classGroupId}},sye=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?iye+r:void 0})(),oye=t=>{const{theme:e,classGroups:n}=t;return lye(n,e)},lye=(t,e)=>{const n=sK();for(const r in t){const i=t[r];TI(i,n,r,e)}return n},TI=(t,e,n,r)=>{const i=t.length;for(let a=0;a<i;a++){const s=t[a];cye(s,e,n,r)}},cye=(t,e,n,r)=>{if(typeof t=="string"){uye(t,e,n);return}if(typeof t=="function"){dye(t,e,n,r);return}hye(t,e,n,r)},uye=(t,e,n)=>{const r=t===""?e:lK(e,t);r.classGroupId=n},dye=(t,e,n,r)=>{if(fye(t)){TI(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(rye(n,t))},hye=(t,e,n,r)=>{const i=Object.entries(t),a=i.length;for(let s=0;s<a;s++){const[o,c]=i[s];TI(c,lK(e,o),n,r)}},lK=(t,e)=>{let n=t;const r=e.split(Z3),i=r.length;for(let a=0;a<i;a++){const s=r[a];let o=n.nextPart.get(s);o||(o=sK(),n.nextPart.set(s,o)),n=o}return n},fye=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,pye=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const i=(a,s)=>{n[a]=s,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(a){let s=n[a];if(s!==void 0)return s;if((s=r[a])!==void 0)return i(a,s),s},set(a,s){a in n?n[a]=s:i(a,s)}}},FD="!",jL=":",mye=[],LL=(t,e,n,r,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),gye=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const a=[];let s=0,o=0,c=0,u;const h=i.length;for(let x=0;x<h;x++){const _=i[x];if(s===0&&o===0){if(_===jL){a.push(i.slice(c,x)),c=x+1;continue}if(_==="/"){u=x;continue}}_==="["?s++:_==="]"?s--:_==="("?o++:_===")"&&o--}const f=a.length===0?i:i.slice(c);let m=f,g=!1;f.endsWith(FD)?(m=f.slice(0,-1),g=!0):f.startsWith(FD)&&(m=f.slice(1),g=!0);const v=u&&u>c?u-c:void 0;return LL(a,g,m,v)};if(e){const i=e+jL,a=r;r=s=>s.startsWith(i)?a(s.slice(i.length)):LL(mye,!1,s,void 0,!0)}if(n){const i=r;r=a=>n({className:a,parseClassName:i})}return r},vye=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let a=0;a<n.length;a++){const s=n[a],o=s[0]==="[",c=e.has(s);o||c?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(s)):i.push(s)}return i.length>0&&(i.sort(),r.push(...i)),r}},yye=t=>({cache:pye(t.cacheSize),parseClassName:gye(t),sortModifiers:vye(t),...aye(t)}),bye=/\s+/,xye=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:a}=e,s=[],o=t.trim().split(bye);let c="";for(let u=o.length-1;u>=0;u-=1){const h=o[u],{isExternal:f,modifiers:m,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:x}=n(h);if(f){c=h+(c.length>0?" "+c:c);continue}let _=!!x,w=r(_?v.substring(0,x):v);if(!w){if(!_){c=h+(c.length>0?" "+c:c);continue}if(w=r(v),!w){c=h+(c.length>0?" "+c:c);continue}_=!1}const S=m.length===0?"":m.length===1?m[0]:a(m).join(":"),E=g?S+FD:S,A=E+w;if(s.indexOf(A)>-1)continue;s.push(A);const N=i(w,_);for(let P=0;P<N.length;++P){const R=N[P];s.push(E+R)}c=h+(c.length>0?" "+c:c)}return c},_ye=(...t)=>{let e=0,n,r,i="";for(;e<t.length;)(n=t[e++])&&(r=cK(n))&&(i&&(i+=" "),i+=r);return i},cK=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=cK(t[r]))&&(n&&(n+=" "),n+=e);return n},BD=(t,...e)=>{let n,r,i,a;const s=c=>{const u=e.reduce((h,f)=>f(h),t());return n=yye(u),r=n.cache.get,i=n.cache.set,a=o,o(c)},o=c=>{const u=r(c);if(u)return u;const h=xye(c,n);return i(c,h),h};return a=s,(...c)=>a(_ye(...c))},wye=[],va=t=>{const e=n=>n[t]||wye;return e.isThemeGetter=!0,e},uK=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,dK=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Sye=/^\d+\/\d+$/,Eye=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Cye=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Tye=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Mye=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Aye=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wv=t=>Sye.test(t),qn=t=>!!t&&!Number.isNaN(Number(t)),ff=t=>!!t&&Number.isInteger(Number(t)),lA=t=>t.endsWith("%")&&qn(t.slice(0,-1)),Ed=t=>Eye.test(t),Pye=()=>!0,Nye=t=>Cye.test(t)&&!Tye.test(t),hK=()=>!1,Dye=t=>Mye.test(t),kye=t=>Aye.test(t),Rye=t=>!Ht(t)&&!Gt(t),Iye=t=>Hy(t,mK,hK),Ht=t=>uK.test(t),vm=t=>Hy(t,gK,Nye),cA=t=>Hy(t,Fye,qn),OL=t=>Hy(t,fK,hK),$ye=t=>Hy(t,pK,kye),mC=t=>Hy(t,vK,Dye),Gt=t=>dK.test(t),o1=t=>Gy(t,gK),jye=t=>Gy(t,Bye),FL=t=>Gy(t,fK),Lye=t=>Gy(t,mK),Oye=t=>Gy(t,pK),gC=t=>Gy(t,vK,!0),Hy=(t,e,n)=>{const r=uK.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Gy=(t,e,n=!1)=>{const r=dK.exec(t);return r?r[1]?e(r[1]):n:!1},fK=t=>t==="position"||t==="percentage",pK=t=>t==="image"||t==="url",mK=t=>t==="length"||t==="size"||t==="bg-size",gK=t=>t==="length",Fye=t=>t==="number",Bye=t=>t==="family-name",vK=t=>t==="shadow",zD=()=>{const t=va("color"),e=va("font"),n=va("text"),r=va("font-weight"),i=va("tracking"),a=va("leading"),s=va("breakpoint"),o=va("container"),c=va("spacing"),u=va("radius"),h=va("shadow"),f=va("inset-shadow"),m=va("text-shadow"),g=va("drop-shadow"),v=va("blur"),x=va("perspective"),_=va("aspect"),w=va("ease"),S=va("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],N=()=>[...A(),Gt,Ht],P=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],D=()=>[Gt,Ht,c],k=()=>[wv,"full","auto",...D()],L=()=>[ff,"none","subgrid",Gt,Ht],$=()=>["auto",{span:["full",ff,Gt,Ht]},ff,Gt,Ht],B=()=>[ff,"auto",Gt,Ht],q=()=>["auto","min","max","fr",Gt,Ht],U=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],O=()=>["auto",...D()],z=()=>[wv,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...D()],V=()=>[t,Gt,Ht],H=()=>[...A(),FL,OL,{position:[Gt,Ht]}],ee=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Y=()=>["auto","cover","contain",Lye,Iye,{size:[Gt,Ht]}],Z=()=>[lA,o1,vm],K=()=>["","none","full",u,Gt,Ht],X=()=>["",qn,o1,vm],ne=()=>["solid","dashed","dotted","double"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],te=()=>[qn,lA,FL,OL],ae=()=>["","none",v,Gt,Ht],pe=()=>["none",qn,Gt,Ht],ye=()=>["none",qn,Gt,Ht],me=()=>[qn,Gt,Ht],fe=()=>[wv,"full",...D()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ed],breakpoint:[Ed],color:[Pye],container:[Ed],"drop-shadow":[Ed],ease:["in","out","in-out"],font:[Rye],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ed],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ed],shadow:[Ed],spacing:["px",qn],text:[Ed],"text-shadow":[Ed],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",wv,Ht,Gt,_]}],container:["container"],columns:[{columns:[qn,Ht,Gt,o]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:N()}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[ff,"auto",Gt,Ht]}],basis:[{basis:[wv,"full","auto",o,...D()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[qn,wv,"auto","initial","none",Ht]}],grow:[{grow:["",qn,Gt,Ht]}],shrink:[{shrink:["",qn,Gt,Ht]}],order:[{order:[ff,"first","last","none",Gt,Ht]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:$()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:$()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":q()}],"auto-rows":[{"auto-rows":q()}],gap:[{gap:D()}],"gap-x":[{"gap-x":D()}],"gap-y":[{"gap-y":D()}],"justify-content":[{justify:[...U(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...U()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":U()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:D()}],px:[{px:D()}],py:[{py:D()}],ps:[{ps:D()}],pe:[{pe:D()}],pt:[{pt:D()}],pr:[{pr:D()}],pb:[{pb:D()}],pl:[{pl:D()}],m:[{m:O()}],mx:[{mx:O()}],my:[{my:O()}],ms:[{ms:O()}],me:[{me:O()}],mt:[{mt:O()}],mr:[{mr:O()}],mb:[{mb:O()}],ml:[{ml:O()}],"space-x":[{"space-x":D()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":D()}],"space-y-reverse":["space-y-reverse"],size:[{size:z()}],w:[{w:[o,"screen",...z()]}],"min-w":[{"min-w":[o,"screen","none",...z()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[s]},...z()]}],h:[{h:["screen","lh",...z()]}],"min-h":[{"min-h":["screen","lh","none",...z()]}],"max-h":[{"max-h":["screen","lh",...z()]}],"font-size":[{text:["base",n,o1,vm]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Gt,cA]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",lA,Ht]}],"font-family":[{font:[jye,Ht,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Gt,Ht]}],"line-clamp":[{"line-clamp":[qn,"none",Gt,cA]}],leading:[{leading:[a,...D()]}],"list-image":[{"list-image":["none",Gt,Ht]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Gt,Ht]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:V()}],"text-color":[{text:V()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ne(),"wavy"]}],"text-decoration-thickness":[{decoration:[qn,"from-font","auto",Gt,vm]}],"text-decoration-color":[{decoration:V()}],"underline-offset":[{"underline-offset":[qn,"auto",Gt,Ht]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Gt,Ht]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Gt,Ht]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:H()}],"bg-repeat":[{bg:ee()}],"bg-size":[{bg:Y()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ff,Gt,Ht],radial:["",Gt,Ht],conic:[ff,Gt,Ht]},Oye,$ye]}],"bg-color":[{bg:V()}],"gradient-from-pos":[{from:Z()}],"gradient-via-pos":[{via:Z()}],"gradient-to-pos":[{to:Z()}],"gradient-from":[{from:V()}],"gradient-via":[{via:V()}],"gradient-to":[{to:V()}],rounded:[{rounded:K()}],"rounded-s":[{"rounded-s":K()}],"rounded-e":[{"rounded-e":K()}],"rounded-t":[{"rounded-t":K()}],"rounded-r":[{"rounded-r":K()}],"rounded-b":[{"rounded-b":K()}],"rounded-l":[{"rounded-l":K()}],"rounded-ss":[{"rounded-ss":K()}],"rounded-se":[{"rounded-se":K()}],"rounded-ee":[{"rounded-ee":K()}],"rounded-es":[{"rounded-es":K()}],"rounded-tl":[{"rounded-tl":K()}],"rounded-tr":[{"rounded-tr":K()}],"rounded-br":[{"rounded-br":K()}],"rounded-bl":[{"rounded-bl":K()}],"border-w":[{border:X()}],"border-w-x":[{"border-x":X()}],"border-w-y":[{"border-y":X()}],"border-w-s":[{"border-s":X()}],"border-w-e":[{"border-e":X()}],"border-w-t":[{"border-t":X()}],"border-w-r":[{"border-r":X()}],"border-w-b":[{"border-b":X()}],"border-w-l":[{"border-l":X()}],"divide-x":[{"divide-x":X()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":X()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ne(),"hidden","none"]}],"divide-style":[{divide:[...ne(),"hidden","none"]}],"border-color":[{border:V()}],"border-color-x":[{"border-x":V()}],"border-color-y":[{"border-y":V()}],"border-color-s":[{"border-s":V()}],"border-color-e":[{"border-e":V()}],"border-color-t":[{"border-t":V()}],"border-color-r":[{"border-r":V()}],"border-color-b":[{"border-b":V()}],"border-color-l":[{"border-l":V()}],"divide-color":[{divide:V()}],"outline-style":[{outline:[...ne(),"none","hidden"]}],"outline-offset":[{"outline-offset":[qn,Gt,Ht]}],"outline-w":[{outline:["",qn,o1,vm]}],"outline-color":[{outline:V()}],shadow:[{shadow:["","none",h,gC,mC]}],"shadow-color":[{shadow:V()}],"inset-shadow":[{"inset-shadow":["none",f,gC,mC]}],"inset-shadow-color":[{"inset-shadow":V()}],"ring-w":[{ring:X()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:V()}],"ring-offset-w":[{"ring-offset":[qn,vm]}],"ring-offset-color":[{"ring-offset":V()}],"inset-ring-w":[{"inset-ring":X()}],"inset-ring-color":[{"inset-ring":V()}],"text-shadow":[{"text-shadow":["none",m,gC,mC]}],"text-shadow-color":[{"text-shadow":V()}],opacity:[{opacity:[qn,Gt,Ht]}],"mix-blend":[{"mix-blend":[...G(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":G()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[qn]}],"mask-image-linear-from-pos":[{"mask-linear-from":te()}],"mask-image-linear-to-pos":[{"mask-linear-to":te()}],"mask-image-linear-from-color":[{"mask-linear-from":V()}],"mask-image-linear-to-color":[{"mask-linear-to":V()}],"mask-image-t-from-pos":[{"mask-t-from":te()}],"mask-image-t-to-pos":[{"mask-t-to":te()}],"mask-image-t-from-color":[{"mask-t-from":V()}],"mask-image-t-to-color":[{"mask-t-to":V()}],"mask-image-r-from-pos":[{"mask-r-from":te()}],"mask-image-r-to-pos":[{"mask-r-to":te()}],"mask-image-r-from-color":[{"mask-r-from":V()}],"mask-image-r-to-color":[{"mask-r-to":V()}],"mask-image-b-from-pos":[{"mask-b-from":te()}],"mask-image-b-to-pos":[{"mask-b-to":te()}],"mask-image-b-from-color":[{"mask-b-from":V()}],"mask-image-b-to-color":[{"mask-b-to":V()}],"mask-image-l-from-pos":[{"mask-l-from":te()}],"mask-image-l-to-pos":[{"mask-l-to":te()}],"mask-image-l-from-color":[{"mask-l-from":V()}],"mask-image-l-to-color":[{"mask-l-to":V()}],"mask-image-x-from-pos":[{"mask-x-from":te()}],"mask-image-x-to-pos":[{"mask-x-to":te()}],"mask-image-x-from-color":[{"mask-x-from":V()}],"mask-image-x-to-color":[{"mask-x-to":V()}],"mask-image-y-from-pos":[{"mask-y-from":te()}],"mask-image-y-to-pos":[{"mask-y-to":te()}],"mask-image-y-from-color":[{"mask-y-from":V()}],"mask-image-y-to-color":[{"mask-y-to":V()}],"mask-image-radial":[{"mask-radial":[Gt,Ht]}],"mask-image-radial-from-pos":[{"mask-radial-from":te()}],"mask-image-radial-to-pos":[{"mask-radial-to":te()}],"mask-image-radial-from-color":[{"mask-radial-from":V()}],"mask-image-radial-to-color":[{"mask-radial-to":V()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[qn]}],"mask-image-conic-from-pos":[{"mask-conic-from":te()}],"mask-image-conic-to-pos":[{"mask-conic-to":te()}],"mask-image-conic-from-color":[{"mask-conic-from":V()}],"mask-image-conic-to-color":[{"mask-conic-to":V()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:H()}],"mask-repeat":[{mask:ee()}],"mask-size":[{mask:Y()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Gt,Ht]}],filter:[{filter:["","none",Gt,Ht]}],blur:[{blur:ae()}],brightness:[{brightness:[qn,Gt,Ht]}],contrast:[{contrast:[qn,Gt,Ht]}],"drop-shadow":[{"drop-shadow":["","none",g,gC,mC]}],"drop-shadow-color":[{"drop-shadow":V()}],grayscale:[{grayscale:["",qn,Gt,Ht]}],"hue-rotate":[{"hue-rotate":[qn,Gt,Ht]}],invert:[{invert:["",qn,Gt,Ht]}],saturate:[{saturate:[qn,Gt,Ht]}],sepia:[{sepia:["",qn,Gt,Ht]}],"backdrop-filter":[{"backdrop-filter":["","none",Gt,Ht]}],"backdrop-blur":[{"backdrop-blur":ae()}],"backdrop-brightness":[{"backdrop-brightness":[qn,Gt,Ht]}],"backdrop-contrast":[{"backdrop-contrast":[qn,Gt,Ht]}],"backdrop-grayscale":[{"backdrop-grayscale":["",qn,Gt,Ht]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[qn,Gt,Ht]}],"backdrop-invert":[{"backdrop-invert":["",qn,Gt,Ht]}],"backdrop-opacity":[{"backdrop-opacity":[qn,Gt,Ht]}],"backdrop-saturate":[{"backdrop-saturate":[qn,Gt,Ht]}],"backdrop-sepia":[{"backdrop-sepia":["",qn,Gt,Ht]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":D()}],"border-spacing-x":[{"border-spacing-x":D()}],"border-spacing-y":[{"border-spacing-y":D()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Gt,Ht]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[qn,"initial",Gt,Ht]}],ease:[{ease:["linear","initial",w,Gt,Ht]}],delay:[{delay:[qn,Gt,Ht]}],animate:[{animate:["none",S,Gt,Ht]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,Gt,Ht]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:pe()}],"rotate-x":[{"rotate-x":pe()}],"rotate-y":[{"rotate-y":pe()}],"rotate-z":[{"rotate-z":pe()}],scale:[{scale:ye()}],"scale-x":[{"scale-x":ye()}],"scale-y":[{"scale-y":ye()}],"scale-z":[{"scale-z":ye()}],"scale-3d":["scale-3d"],skew:[{skew:me()}],"skew-x":[{"skew-x":me()}],"skew-y":[{"skew-y":me()}],transform:[{transform:[Gt,Ht,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:fe()}],"translate-x":[{"translate-x":fe()}],"translate-y":[{"translate-y":fe()}],"translate-z":[{"translate-z":fe()}],"translate-none":["translate-none"],accent:[{accent:V()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:V()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Gt,Ht]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Gt,Ht]}],fill:[{fill:["none",...V()]}],"stroke-w":[{stroke:[qn,o1,vm,cA]}],stroke:[{stroke:["none",...V()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},zye=(t,{cacheSize:e,prefix:n,experimentalParseClassName:r,extend:i={},override:a={}})=>(w1(t,"cacheSize",e),w1(t,"prefix",n),w1(t,"experimentalParseClassName",r),vC(t.theme,a.theme),vC(t.classGroups,a.classGroups),vC(t.conflictingClassGroups,a.conflictingClassGroups),vC(t.conflictingClassGroupModifiers,a.conflictingClassGroupModifiers),w1(t,"orderSensitiveModifiers",a.orderSensitiveModifiers),yC(t.theme,i.theme),yC(t.classGroups,i.classGroups),yC(t.conflictingClassGroups,i.conflictingClassGroups),yC(t.conflictingClassGroupModifiers,i.conflictingClassGroupModifiers),yK(t,i,"orderSensitiveModifiers"),t),w1=(t,e,n)=>{n!==void 0&&(t[e]=n)},vC=(t,e)=>{if(e)for(const n in e)w1(t,n,e[n])},yC=(t,e)=>{if(e)for(const n in e)yK(t,e,n)},yK=(t,e,n)=>{const r=e[n];r!==void 0&&(t[n]=t[n]?t[n].concat(r):r)},Uye=(t,...e)=>typeof t=="function"?BD(zD,t,...e):BD(()=>zye(zD(),t),...e),bK=BD(zD);var Vye=t=>mo(t)?bK:Uye({...t,extend:{theme:t.theme,classGroups:t.classGroups,conflictingClassGroupModifiers:t.conflictingClassGroupModifiers,conflictingClassGroups:t.conflictingClassGroups,...t.extend}}),Hye=(t,e)=>{const n=Y3(t);return!n||!(e?.twMerge??!0)?n:((!Rd.cachedTwMerge||Rd.didTwMergeConfigChange)&&(Rd.didTwMergeConfigChange=!1,Rd.cachedTwMerge=Vye(Rd.cachedTwMergeConfig)),Rd.cachedTwMerge(n)||void 0)},Gye=(...t)=>e=>Hye(t,e),{tv:fn}=tye(Gye);const Wye=fn({base:"react-aria-SearchField",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});function qye({label:t,description:e,errorMessage:n,placeholder:r,variant:i="primary",size:a="md",...s}){return l.jsxs(jve,{...s,className:ah(s.className,(o,c)=>Wye({...c,variant:i,size:a,className:o})),children:[t&&l.jsx(kt,{children:t}),l.jsx(Pn,{placeholder:r}),l.jsx(Pt,{children:""}),e&&l.jsx(v_,{slot:"description",children:e}),l.jsx(X3,{children:n})]})}const MI="xstudio_recent_searches",BL=10;function Kye(){try{const t=localStorage.getItem(MI);if(t){const e=JSON.parse(t);if(Array.isArray(e))return e}}catch(t){console.error("Failed to load recent searches:",t)}return[]}function Xye(t){try{localStorage.setItem(MI,JSON.stringify(t))}catch(e){console.error("Failed to save recent searches:",e)}}function Yye(){const t=Uy({initialItems:Kye(),getKey:i=>i.id});T.useEffect(()=>{Xye(t.items)},[t.items]);const e=i=>{if(!i.trim())return;const a=i.trim().toLowerCase(),s=t.items.find(c=>c.query.toLowerCase()===a);s&&t.remove(s.id);const o={id:`${Date.now()}-${a}`,query:i.trim(),timestamp:Date.now()};if(t.prepend(o),t.items.length>BL){const c=t.items.slice(BL);t.remove(...c.map(u=>u.id))}},n=()=>{const i=t.items.map(a=>a.id);t.remove(...i),localStorage.removeItem(MI)},r=i=>{t.remove(i)};return{recentSearches:t.items,addSearch:e,clearSearches:n,removeSearch:r}}function Zye({onSearchChange:t}){const[e,n]=T.useState(""),r=T.useRef(null),{addSearch:i}=Yye(),o=`Search components... (${T.useMemo(()=>typeof navigator>"u"?!1:/Mac|iPhone|iPad|iPod/.test(navigator.platform)||/Mac|iPhone|iPad|iPod/.test(navigator.userAgent),[])?"K":"Ctrl+K"})`;return T.useEffect(()=>{const c=u=>{(u.metaKey||u.ctrlKey)&&u.key==="k"&&(u.preventDefault(),r.current?.focus())};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[]),T.useEffect(()=>{t(e)},[e,t]),T.useEffect(()=>{if(!e.trim())return;const c=setTimeout(()=>{i(e)},1e3);return()=>clearTimeout(c)},[e,i]),l.jsx("div",{className:"component-search",children:l.jsx(qye,{value:e,onChange:n,placeholder:o,"aria-label":"Search components",className:"component-search-field"})})}const AI="xstudio_recent_components",zL=8;function Jye(){try{const t=localStorage.getItem(AI);if(t){const e=JSON.parse(t);if(Array.isArray(e))return e.map(n=>typeof n=="string"?{id:n,tag:n,count:1}:n.tag&&typeof n.tag=="string"?{id:n.id||n.tag,tag:n.tag,count:n.count||1}:{id:n.id,tag:n.tag,count:n.count||1})}}catch(t){console.error("Failed to load recent components:",t)}return[]}function Qye(t){try{localStorage.setItem(AI,JSON.stringify(t))}catch(e){console.error("Failed to save recent components:",e)}}function ebe(){const t=Uy({initialItems:Jye(),getKey:a=>a.id});T.useEffect(()=>{Qye(t.items)},[t.items]);const e=a=>{const s=t.items.find(o=>o.tag===a);if(s?(t.remove(a),t.prepend({id:a,tag:a,count:s.count+1})):t.prepend({id:a,tag:a,count:1}),t.items.length>zL){const c=t.items.slice(zL).map(u=>u.id);t.remove(...c)}},n=()=>{const a=t.items.map(s=>s.id);t.remove(...a),localStorage.removeItem(AI)},r=a=>t.items.find(o=>o.tag===a)?.count||0;return{recentTags:t.items.map(a=>a.tag),addRecentComponent:e,clearRecentComponents:n,getComponentCount:r}}const PI="xstudio_favorite_components";function tbe(){try{const t=localStorage.getItem(PI);if(t){const e=JSON.parse(t);if(Array.isArray(e))return e.map(n=>({id:n,tag:n}))}}catch(t){console.error("Failed to load favorite components:",t)}return[]}function nbe(t){try{const e=t.map(n=>n.tag);localStorage.setItem(PI,JSON.stringify(e))}catch(e){console.error("Failed to save favorite components:",e)}}function rbe(){const t=Uy({initialItems:tbe(),getKey:a=>a.id});T.useEffect(()=>{nbe(t.items)},[t.items]);const e=a=>{t.items.some(o=>o.tag===a)?t.remove(a):t.append({id:a,tag:a})},n=a=>t.items.some(s=>s.tag===a),r=()=>{const a=t.items.map(s=>s.id);t.remove(...a),localStorage.removeItem(PI)};return{favoriteTags:t.items.map(a=>a.tag),toggleFavorite:e,isFavorite:n,clearFavorites:r}}const UL="xstudio_category_expansion";function ibe(t={}){const{initialExpanded:e=[],persist:n=!0}=t,r=T.useCallback(()=>{if(!n)return new Set(e);try{const f=localStorage.getItem(UL);if(f){const m=JSON.parse(f);return new Set(Array.isArray(m)?m:e)}}catch(f){console.warn("Failed to load category expansion state:",f)}return new Set(e)},[e,n]),[i,a]=T.useState(r);T.useEffect(()=>{if(n)try{const f=Array.from(i);localStorage.setItem(UL,JSON.stringify(f))}catch(f){console.warn("Failed to save category expansion state:",f)}},[i,n]);const s=T.useCallback(f=>i.has(f),[i]),o=T.useCallback(f=>{a(m=>{const g=new Set(m);return g.has(f)?g.delete(f):g.add(f),g})},[]),c=T.useCallback(f=>{a(m=>{const g=new Set(m);return f.forEach(v=>g.add(v)),g})},[]),u=T.useCallback(f=>{a(new Set(f))},[]),h=T.useCallback(()=>{a(new Set)},[]);return{expandedCategories:i,isExpanded:s,toggleCategory:o,expandCategories:c,expandAll:u,collapseAll:h}}const UD=fn({base:"react-aria-Skeleton",variants:{variant:{text:"text",circular:"circular",rectangular:"rectangular",rounded:"rounded"},animation:{shimmer:"shimmer",pulse:"pulse",wave:"wave",none:""},componentVariant:{button:"button",badge:"badge",link:"link",input:"input",checkbox:"checkbox",radio:"radio",switch:"switch",slider:"slider","list-item":"list-item","grid-item":"grid-item","table-row":"table-row","table-cell":"table-cell","tree-node":"tree-node",card:"card","card-gallery":"card-gallery","card-horizontal":"card-horizontal",tabs:"tabs",tab:"tab",calendar:"calendar","calendar-cell":"calendar-cell",progress:"progress",meter:"meter",avatar:"avatar",nav:"nav",breadcrumb:"breadcrumb",pagination:"pagination","color-swatch":"color-swatch","color-area":"color-area",tag:"tag","menu-item":"menu-item",disclosure:"disclosure"},size:{xs:"xs",sm:"sm",md:"md",lg:"lg",xl:"xl"}},defaultVariants:{variant:"text",animation:"shimmer",size:"md"}});function abe({width:t,height:e,isLast:n,lastLineWidth:r,animation:i,className:a,style:s}){const o=n&&r?r:t;return l.jsx("div",{className:UD({variant:"text",animation:i,className:a}),style:{width:typeof o=="number"?`${o}px`:o,height:typeof e=="number"?`${e}px`:e,...s},"aria-hidden":"true"})}function Hl({variant:t="text",animation:e="shimmer",width:n,height:r,lines:i=1,lineHeight:a,lastLineWidth:s="60%",lineGap:o,componentVariant:c,size:u="md",className:h,style:f,index:m,"aria-label":g="Loading...","data-testid":v="skeleton"}){return c?l.jsx("div",{className:UD({componentVariant:c,size:u,animation:e,className:h}),style:{"--skeleton-index":m,...f},role:"status","aria-label":g,"aria-busy":"true","data-testid":v,children:sbe(c)}):t==="text"&&i>1?l.jsx("div",{className:"react-aria-Skeleton-group",style:{display:"flex",flexDirection:"column",gap:typeof o=="number"?`${o}px`:o||"8px",...f},role:"status","aria-label":g,"aria-busy":"true","data-testid":v,children:Array.from({length:i}).map((x,_)=>l.jsx(abe,{width:n||"100%",height:a||r||14,isLast:_===i-1,lastLineWidth:s,animation:e},_))}):l.jsx("div",{className:UD({variant:t,animation:e,className:h}),style:{width:typeof n=="number"?`${n}px`:n,height:typeof r=="number"?`${r}px`:r,"--skeleton-index":m,...f},role:"status","aria-label":g,"aria-busy":"true","data-testid":v})}function sbe(t){switch(t){case"button":return l.jsx("span",{className:"skeleton-content"});case"badge":return l.jsx("span",{className:"skeleton-content"});case"input":return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"skeleton-label"}),l.jsx("span",{className:"skeleton-input"})]});case"checkbox":case"radio":return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"skeleton-box"}),l.jsx("span",{className:"skeleton-label"})]});case"switch":return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"skeleton-track"}),l.jsx("span",{className:"skeleton-label"})]});case"slider":return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"skeleton-track"}),l.jsx("span",{className:"skeleton-thumb"})]});case"list-item":case"menu-item":return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"skeleton-line title"}),l.jsx("span",{className:"skeleton-line desc"})]});case"grid-item":return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"skeleton-image"}),l.jsx("span",{className:"skeleton-line title"}),l.jsx("span",{className:"skeleton-line desc"})]});case"table-row":return l.jsx(l.Fragment,{children:[1,2,3,4].map(e=>l.jsx("span",{className:"skeleton-cell",style:{width:`${20+e*5}%`}},e))});case"table-cell":return l.jsx("span",{className:"skeleton-content"});case"tree-node":return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"skeleton-icon"}),l.jsx("span",{className:"skeleton-line title"})]});case"card":return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"skeleton-header",children:[l.jsx("span",{className:"skeleton-line title"}),l.jsx("span",{className:"skeleton-line subtitle"})]}),l.jsxs("div",{className:"skeleton-body",children:[l.jsx("span",{className:"skeleton-line"}),l.jsx("span",{className:"skeleton-line"}),l.jsx("span",{className:"skeleton-line short"})]})]});case"card-gallery":return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"skeleton-image"}),l.jsxs("div",{className:"skeleton-content",children:[l.jsx("span",{className:"skeleton-line title"}),l.jsx("span",{className:"skeleton-line desc"})]})]});case"card-horizontal":return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"skeleton-image"}),l.jsxs("div",{className:"skeleton-content",children:[l.jsx("span",{className:"skeleton-line title"}),l.jsx("span",{className:"skeleton-line desc"}),l.jsx("span",{className:"skeleton-line short"})]})]});case"tabs":return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"skeleton-tab-list",children:[1,2,3].map(e=>l.jsx("span",{className:"skeleton-tab"},e))}),l.jsxs("div",{className:"skeleton-tab-panel",children:[l.jsx("span",{className:"skeleton-line"}),l.jsx("span",{className:"skeleton-line"}),l.jsx("span",{className:"skeleton-line short"})]})]});case"tab":return l.jsx("span",{className:"skeleton-content"});case"calendar":return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"skeleton-calendar-header",children:[l.jsx("span",{className:"skeleton-nav"}),l.jsx("span",{className:"skeleton-title"}),l.jsx("span",{className:"skeleton-nav"})]}),l.jsx("div",{className:"skeleton-calendar-grid",children:Array.from({length:35}).map((e,n)=>l.jsx("span",{className:"skeleton-day"},n))})]});case"calendar-cell":return l.jsx("span",{className:"skeleton-content"});case"progress":case"meter":return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"skeleton-label"}),l.jsx("span",{className:"skeleton-bar"})]});case"avatar":return l.jsx("span",{className:"skeleton-circle"});case"breadcrumb":return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"skeleton-item"}),l.jsx("span",{className:"skeleton-separator"}),l.jsx("span",{className:"skeleton-item"}),l.jsx("span",{className:"skeleton-separator"}),l.jsx("span",{className:"skeleton-item current"})]});case"pagination":return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"skeleton-button"}),[1,2,3].map(e=>l.jsx("span",{className:"skeleton-page"},e)),l.jsx("span",{className:"skeleton-button"})]});case"color-swatch":return l.jsx("span",{className:"skeleton-swatch"});case"color-area":return l.jsx("span",{className:"skeleton-area"});case"tag":return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"skeleton-content"}),l.jsx("span",{className:"skeleton-remove"})]});case"disclosure":return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"skeleton-icon"}),l.jsx("span",{className:"skeleton-title"})]});default:return l.jsx("span",{className:"skeleton-content"})}}Hl.Text=function({lines:e=1,...n}){return l.jsx(Hl,{variant:"text",lines:e,...n})};Hl.Circle=function({size:e=48,...n}){return l.jsx(Hl,{variant:"circular",width:e,height:e,...n})};Hl.Rect=function(e){return l.jsx(Hl,{variant:"rectangular",...e})};const obe=fn({base:"react-aria-Badge",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"},isDot:{true:"dot",false:""},isPulsing:{true:"pulsing",false:""}},defaultVariants:{variant:"primary",size:"sm",isDot:!1,isPulsing:!1}});function lbe({variant:t="primary",size:e="sm",isDot:n=!1,isPulsing:r=!1,isLoading:i=!1,className:a,children:s,...o}){const c=obe({variant:t,size:e,isDot:n,isPulsing:r,className:a});return i?l.jsx(Hl,{componentVariant:"badge",size:e,className:a,"aria-label":"Loading badge..."}):l.jsx("span",{...o,className:c,"data-badge":!0,children:!n&&s})}const VL=[{tag:"Panel",label:"panel",icon:YB},{tag:"Card",label:"card",icon:fN},{tag:"Tabs",label:"tabs",icon:qte},{tag:"Breadcrumbs",label:"breadcrumbs",icon:Ia},{tag:"Link",label:"link",icon:H_},{tag:"Separator",label:"separator",icon:Bie},{tag:"Nav",label:"navigation",icon:CR},{tag:"Slot",label:"slot",icon:n_,layoutOnly:!0}],cbe=[{tag:"TextField",label:"text field",icon:Cie},{tag:"NumberField",label:"number field",icon:ER},{tag:"SearchField",label:"search field",icon:al},{tag:"Checkbox",label:"checkbox",icon:Jie},{tag:"CheckboxGroup",label:"checkbox group",icon:ly},{tag:"RadioGroup",label:"radio group",icon:ly},{tag:"Select",label:"select",icon:_i},{tag:"ComboBox",label:"combo box",icon:_i},{tag:"Switch",label:"switch",icon:Bae},{tag:"Slider",label:"slider",icon:qie},{tag:"TailSwatch",label:"color picker",icon:gie}],ube=[{tag:"Button",label:"button",icon:j1},{tag:"ToggleButton",label:"toggle button",icon:Oae},{tag:"ToggleButtonGroup",label:"toggle button group",icon:ly},{tag:"Menu",label:"menu",icon:CR},{tag:"Toolbar",label:"toolbar",icon:Kl}],dbe=[{tag:"Table",label:"table",icon:Tae},{tag:"ListBox",label:"list box",icon:Wre},{tag:"GridList",label:"grid list",icon:KB},{tag:"Tree",label:"tree",icon:Hre},{tag:"TagGroup",label:"tag group",icon:L2},{tag:"Field",label:"field",icon:ly}],hbe=[{tag:"Tooltip",label:"tooltip",icon:JB},{tag:"ProgressBar",label:"progress bar",icon:OB},{tag:"Meter",label:"meter",icon:WB},{tag:"Badge",label:"badge",icon:t9}],fbe=[{tag:"Calendar",label:"calendar",icon:bne},{tag:"DatePicker",label:"date picker",icon:u5},{tag:"DateRangePicker",label:"date range picker",icon:vne},{tag:"DateField",label:"date field",icon:u5},{tag:"TimeField",label:"time field",icon:_i}],pbe=[{tag:"Dialog",label:"dialog",icon:fN},{tag:"Modal",label:"modal",icon:YB},{tag:"Popover",label:"popover",icon:fN},{tag:"Tooltip",label:"tooltip",icon:JB}],mbe=[{tag:"Text",label:"text",icon:AR},{tag:"section",label:"section",icon:Of},{tag:"Div",label:"division",icon:V_}],gbe=[{tag:"Form",label:"form",icon:ly}],uA={layout:{label:"Layout",description:"Containers and structure"},inputs:{label:"Inputs",description:"Form controls"},actions:{label:"Actions",description:"Buttons and interactions"},collections:{label:"Collections",description:"Lists and data display"},feedback:{label:"Feedback",description:"Status indicators"},dateTime:{label:"Date & Time",description:"Date pickers"},overlays:{label:"Overlays",description:"Dialogs and modals"},structure:{label:"Structure",description:"Basic elements"},other:{label:"Other",description:"Item components"}},S1=({component:t,onAdd:e,selectedElementId:n,isRecent:r=!1,count:i=0})=>{const a=T.useCallback(()=>{e(t.tag,n||void 0)},[t.tag,e,n]);return l.jsxs("button",{className:"list-item",onClick:a,title:`Add ${t.label} element`,children:[l.jsx("div",{className:"list-item-icon",children:l.jsx(t.icon,{strokeWidth:1.5,width:16,height:16})}),r&&i>0&&l.jsx(lbe,{children:i}),l.jsx("span",{className:"list-item-name",children:t.label})]})};S1.displayName="ComponentItem";const xK=T.memo(({handleAddElement:t,selectedElementId:e})=>{const{recentTags:n,addRecentComponent:r,clearRecentComponents:i,getComponentCount:a}=ebe(),{favoriteTags:s}=rbe(),[o,c]=T.useState(""),h=Eo(P=>P.mode)==="layout",f=T.useMemo(()=>["layout","inputs","actions","collections","feedback","dateTime","overlays","structure","other"],[]),{isExpanded:m,toggleCategory:g,expandCategories:v}=ibe({initialExpanded:f,persist:!0}),x=T.useCallback((P,R)=>{t(P,R),r(P)},[t,r]),_=T.useMemo(()=>({layout:h?VL:VL.filter(P=>!("layoutOnly"in P&&P.layoutOnly)),inputs:cbe,actions:ube,collections:dbe,feedback:hbe,dateTime:fbe,overlays:pbe,structure:mbe,other:gbe}),[h]),w=T.useMemo(()=>Object.entries(_).flatMap(([P,R])=>{const D=uA[P];return R.map(k=>({...k,category:D.label,categoryKey:P}))}),[_]),S=T.useMemo(()=>{if(!o.trim())return null;const P=o.toLowerCase();return w.map(D=>{const k=D.label.toLowerCase(),L=D.tag.toLowerCase(),$=D.category.toLowerCase();let B=0;(k===P||L===P)&&(B+=100),(k.startsWith(P)||L.startsWith(P))&&(B+=50),k.includes(P)&&(B+=30),L.includes(P)&&(B+=25),$.includes(P)&&(B+=10);const q=P.split(" ").filter(J=>J.length>0);return q.every(J=>k.includes(J)||L.includes(J))&&q.length>1&&(B+=20),{...D,score:B}}).filter(D=>D.score>0).sort((D,k)=>k.score-D.score)},[o,w]),E=T.useMemo(()=>{if(!S)return null;const P={};return S.forEach(R=>{P[R.categoryKey]||(P[R.categoryKey]=[]),P[R.categoryKey].push(R)}),P},[S]),A=T.useMemo(()=>n.map(P=>w.find(R=>R.tag===P)).filter(P=>P!==void 0).slice(0,8),[n,w]),N=T.useMemo(()=>s.map(P=>w.find(R=>R.tag===P)).filter(P=>P!==void 0),[s,w]);return T.useEffect(()=>{if(o&&E){const P=Object.keys(E);v(P)}},[o,E,v]),l.jsxs("div",{className:"panel",children:[l.jsx(Ul,{icon:l.jsx(Mr,{size:16}),title:"Components",actions:l.jsx("button",{className:"iconButton","aria-label":"filter components",children:l.jsx(Iu,{color:se.color,strokeWidth:se.stroke,size:se.size})})}),l.jsx(Zye,{onSearchChange:c}),l.jsxs("div",{className:"panel-contents",children:[!o&&A.length>0&&l.jsxs("div",{className:"section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"category-info",children:[l.jsx("h3",{className:"section-title",children:"Recently Used"}),l.jsx("span",{className:"category-count",children:A.length})]}),l.jsx("div",{className:"section-actions",children:l.jsx("button",{className:"iconButton","aria-label":"Clear Recent History",onClick:i,children:l.jsx(Ws,{color:se.color,strokeWidth:se.stroke,size:se.size})})})]}),l.jsx("div",{className:"section-content",children:l.jsx("div",{className:"list-group",role:"list",children:A.map(P=>l.jsx(S1,{component:P,onAdd:x,selectedElementId:e,isRecent:!0,count:a(P.tag)},P.tag))})})]}),N.length>0&&l.jsxs("div",{className:"section",children:[l.jsx("div",{className:"section-header",children:l.jsxs("div",{className:"category-info",children:[l.jsx(t9,{size:14,className:"category-icon-small"}),l.jsx("h3",{className:"section-title",children:"Favorites"}),l.jsx("span",{className:"category-count",children:N.length})]})}),l.jsx("div",{className:"section-content",children:l.jsx("div",{className:"list-group",role:"list",children:N.map(P=>l.jsx(S1,{component:P,onAdd:x,selectedElementId:e},P.tag))})})]}),o&&E?Object.entries(E).map(([P,R])=>{const D=P,k=uA[D],L=m(D);return!R||R.length===0?null:l.jsxs("div",{className:"section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"category-info",children:[l.jsx("h3",{className:"section-title",children:k.label}),l.jsx("span",{className:"category-count",children:R.length})]}),l.jsx("div",{className:"section-actions",children:l.jsx("button",{className:"iconButton","aria-label":`Toggle ${k.label}`,onClick:()=>g(D),children:L?l.jsx(e_,{color:se.color,strokeWidth:se.stroke,size:se.size}):l.jsx(_i,{color:se.color,strokeWidth:se.stroke,size:se.size})})})]}),L&&l.jsx("div",{className:"section-content",children:l.jsx("div",{className:"list-group",role:"list",children:R.map($=>l.jsx(S1,{component:$,onAdd:x,selectedElementId:e},$.tag))})})]},P)}):o?l.jsx("div",{className:"section",children:l.jsxs("div",{className:"search-no-results",children:[l.jsx(al,{size:24,color:se.color}),l.jsx("p",{className:"no-results-title",children:"No components found"}),l.jsx("p",{className:"no-results-hint",children:"Try 'button', 'input', or 'table'"})]})}):Object.entries(_).map(([P,R])=>{const D=P,k=uA[D],L=m(D);return l.jsxs("div",{className:"section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("div",{className:"category-info",children:[l.jsx("h3",{className:"section-title",children:k.label}),l.jsx("span",{className:"category-count",children:R.length})]}),l.jsx("div",{className:"section-actions",children:l.jsx("button",{className:"iconButton","aria-label":`Toggle ${k.label}`,onClick:()=>g(D),children:L?l.jsx(e_,{color:se.color,strokeWidth:se.stroke,size:se.size}):l.jsx(_i,{color:se.color,strokeWidth:se.stroke,size:se.size})})})]}),L&&l.jsx("div",{className:"section-content",children:l.jsx("div",{className:"list-group",role:"list",children:R.map($=>l.jsx(S1,{component:$,onAdd:x,selectedElementId:e},$.tag))})})]},P)})]})]})});xK.displayName="ComponentList";fn({base:"react-aria-Slider",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"default",size:"md"}});const vbe=fn({base:"react-aria-Button",variants:{variant:{default:"",primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",surface:"surface",outline:"outline",ghost:"ghost"},size:{xs:"xs",sm:"sm",md:"md",lg:"lg",xl:"xl"},isFocusVisible:{true:"focus-visible",false:""}},defaultVariants:{variant:"default",size:"sm"}}),Ut=T.forwardRef(function(e,n){const{isLoading:r,loadingLabel:i="Loading...",children:a,size:s="sm",...o}=e,{focusProps:c,isFocusVisible:u}=Xs();return l.jsx(Pt,{ref:n,...Et(o,c),type:e.type,isDisabled:r||e.isDisabled,"data-focus-visible":u,"data-loading":r||void 0,"aria-busy":r||void 0,className:ah(e.className,(h,f)=>vbe({...f,variant:e.variant,size:s,isFocusVisible:u,className:h})),children:r?l.jsxs(l.Fragment,{children:[l.jsx(Hl,{componentVariant:"button",size:s,"aria-label":i}),l.jsx("span",{className:"sr-only",children:i})]}):a})}),l1=t=>({id:t,status:"idle",data:[],error:null,lastLoadedAt:null,consumers:[]});function ybe(t,e){if(!e)return t;let n=[...t];if(e.filter&&e.filter.length>0&&(n=n.filter(r=>e.filter.every(i=>{const a=r[i.field],s=i.value;switch(i.operator){case"eq":return a===s;case"ne":return a!==s;case"gt":return typeof a=="number"&&typeof s=="number"&&a>s;case"gte":return typeof a=="number"&&typeof s=="number"&&a>=s;case"lt":return typeof a=="number"&&typeof s=="number"&&a<s;case"lte":return typeof a=="number"&&typeof s=="number"&&a<=s;case"contains":return typeof a=="string"&&typeof s=="string"&&a.includes(s);case"startsWith":return typeof a=="string"&&typeof s=="string"&&a.startsWith(s);case"endsWith":return typeof a=="string"&&typeof s=="string"&&a.endsWith(s);default:return!0}}))),e.sort){const{field:r,direction:i}=e.sort;n.sort((a,s)=>{const o=a[r],c=s[r];if(o===c)return 0;if(o==null)return 1;if(c==null)return-1;const u=o<c?-1:1;return i==="asc"?u:-u})}return e.offset&&e.offset>0&&(n=n.slice(e.offset)),e.limit&&e.limit>0&&(n=n.slice(0,e.limit)),e.select&&e.select.length>0&&(n=n.map(r=>{const i={};return e.select.forEach(a=>{a in r&&(i[a]=r[a])}),i})),e.map&&Object.keys(e.map).length>0&&(n=n.map(r=>{const i={...r};return Object.entries(e.map).forEach(([a,s])=>{a in i&&(i[s]=i[a],delete i[a])}),i})),n}const NI=t=>`xstudio_datatable_cache_${t}`;function bbe(t,e){try{const n=NI(t),r=localStorage.getItem(n);if(!r)return null;const{data:i,timestamp:a}=JSON.parse(r);return Date.now()-a>e?(localStorage.removeItem(n),console.log(` DataTable cache expired: ${t}`),null):(console.log(` DataTable cache restored from localStorage: ${t}`),i)}catch(n){return console.warn(` Failed to load cached data for ${t}:`,n),null}}function xbe(t,e){try{const n=NI(t),r={data:e,timestamp:Date.now()};localStorage.setItem(n,JSON.stringify(r)),console.log(` DataTable cache saved to localStorage: ${t}`)}catch(n){console.warn(` Failed to save cache for ${t}:`,n)}}function HL(t){try{const e=NI(t);localStorage.removeItem(e),console.log(` DataTable cache cleared: ${t}`)}catch(e){console.warn(` Failed to clear cache for ${t}:`,e)}}async function _be(t,e){if(!t||t.type!=="collection")return[];if(t.source==="static"){const r=t.config.data;if(r&&Array.isArray(r))return r;throw new Error("Static data is not an array or is missing")}if(t.source==="api"){const n=t.config;if(!n.baseUrl||!n.endpoint)throw new Error("API configuration is incomplete");if(n.baseUrl==="MOCK_DATA"){const{apiConfig:s}=await Lt(async()=>{const{apiConfig:c}=await Promise.resolve().then(()=>wX);return{apiConfig:c}},[]),o=s.MOCK_DATA;if(o){const c=await o(n.endpoint||"/data",n.params),u=n.dataMapping?.resultPath?c[n.dataMapping.resultPath]:c;return Array.isArray(u)?u:[]}throw new Error("Mock API function not found")}const r=await fetch(`${n.baseUrl}${n.customUrl||n.endpoint}`,{method:n.method||"GET",headers:{...n.headers,"Content-Type":"application/json"},body:n.method!=="GET"?JSON.stringify(n.params):void 0,signal:e});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const i=await r.json(),a=n.dataMapping?.resultPath?i[n.dataMapping.resultPath]:i;return Array.isArray(a)?a:[]}throw t.source==="supabase"?new Error("Supabase data binding not yet implemented"):new Error(`Unknown data source: ${t.source}`)}const Fm=Ks((t,e)=>({dataTables:new Map,dataTableStates:new Map,registerDataTable:n=>{t(r=>{const i=new Map(r.dataTables),a=new Map(r.dataTableStates);return i.set(n.id,n),a.has(n.id)||a.set(n.id,l1(n.id)),console.log(` DataTable registered: ${n.id} (${n.name})`),{dataTables:i,dataTableStates:a}})},unregisterDataTable:n=>{const{dataTables:r}=e();r.get(n)?.persistCache&&HL(n),t(a=>{const s=new Map(a.dataTables),o=new Map(a.dataTableStates);return s.delete(n),o.delete(n),console.log(` DataTable unregistered: ${n}`),{dataTables:s,dataTableStates:o}})},loadDataTable:async n=>{const{dataTables:r,dataTableStates:i}=e(),a=r.get(n);if(!a){console.warn(` DataTable not found: ${n}`);return}const s=i.get(n),o=a.cacheTTL||300*1e3;if(a.useCache!==!1&&s?.status==="success"&&s.lastLoadedAt&&Date.now()-s.lastLoadedAt<o){console.log(` DataTable memory cache hit: ${n}`);return}if(a.persistCache&&a.useCache!==!1){const c=bbe(n,o);if(c){t(u=>{const h=new Map(u.dataTableStates),f=h.get(n)||l1(n);return h.set(n,{...f,status:"success",data:c,error:null,lastLoadedAt:Date.now()}),{dataTableStates:h}}),console.log(` DataTable localStorage cache hit: ${n}`);return}}t(c=>{const u=new Map(c.dataTableStates),h=u.get(n)||l1(n);return u.set(n,{...h,status:"loading",error:null}),{dataTableStates:u}});try{console.log(` DataTable loading: ${n}`);const c=await _be(a.dataBinding),u=ybe(c,a.transform);a.persistCache&&xbe(n,u),t(h=>{const f=new Map(h.dataTableStates),m=f.get(n)||l1(n);return f.set(n,{...m,status:"success",data:u,error:null,lastLoadedAt:Date.now()}),console.log(` DataTable loaded: ${n} (raw: ${c.length}, transformed: ${u.length} items)`),{dataTableStates:f}})}catch(c){const u=c instanceof Error?c.message:"Unknown error";t(h=>{const f=new Map(h.dataTableStates),m=f.get(n)||l1(n);return f.set(n,{...m,status:"error",error:u}),console.error(` DataTable load error: ${n}`,u),{dataTableStates:f}})}},refreshDataTable:async n=>{const{dataTables:r}=e();if(!r.get(n)){console.warn(` DataTable not found: ${n}`);return}t(a=>{const s=new Map(a.dataTableStates),o=s.get(n);return o&&s.set(n,{...o,lastLoadedAt:null}),{dataTableStates:s}}),await e().loadDataTable(n)},refreshAllDataTables:async()=>{const{dataTables:n,refreshDataTable:r}=e(),i=Array.from(n.keys());console.log(` Refreshing all dataTables (${i.length})`),await Promise.all(i.map(a=>r(a))),console.log(" All dataTables refreshed")},addConsumer:(n,r)=>{t(i=>{const a=new Map(i.dataTableStates),s=a.get(n);return s&&!s.consumers.includes(r)&&(a.set(n,{...s,consumers:[...s.consumers,r]}),console.log(` Consumer added to ${n}: ${r}`)),{dataTableStates:a}})},removeConsumer:(n,r)=>{t(i=>{const a=new Map(i.dataTableStates),s=a.get(n);return s&&(a.set(n,{...s,consumers:s.consumers.filter(o=>o!==r)}),console.log(` Consumer removed from ${n}: ${r}`)),{dataTableStates:a}})},getDataTableData:n=>{const{dataTableStates:r}=e();return r.get(n)?.data||[]},getDataTableState:n=>{const{dataTableStates:r}=e();return r.get(n)},updateDataTableConfig:(n,r)=>{t(i=>{const a=new Map(i.dataTables),s=a.get(n);return s&&(a.set(n,{...s,...r}),console.log(` DataTable config updated: ${n}`)),{dataTables:a}})},clearAllDataTables:()=>{const{dataTables:n}=e();n.forEach((r,i)=>{r.persistCache&&HL(i)}),t({dataTables:new Map,dataTableStates:new Map}),console.log(" All dataTables cleared")}}));class dA{capacity;cache;head=null;tail=null;hits=0;misses=0;constructor(e=1e3){this.capacity=e,this.cache=new Map}get(e){const n=this.cache.get(e);return n?(this.moveToFront(n),this.hits++,n.value):(this.misses++,null)}set(e,n){const r=this.cache.get(e);if(r){r.value=n,this.moveToFront(r);return}const i={key:e,value:n,prev:null,next:null};this.cache.set(e,i),this.addToFront(i),this.cache.size>this.capacity&&this.removeLRU()}delete(e){const n=this.cache.get(e);return n?(this.removeNode(n),this.cache.delete(e),!0):!1}clear(){this.cache.clear(),this.head=null,this.tail=null,this.hits=0,this.misses=0}has(e){return this.cache.has(e)}moveToFront(e){e!==this.head&&(this.removeNode(e),this.addToFront(e))}addToFront(e){e.next=this.head,e.prev=null,this.head&&(this.head.prev=e),this.head=e,this.tail||(this.tail=e)}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}removeLRU(){if(!this.tail)return;const e=this.tail;this.removeNode(e),this.cache.delete(e.key)}setMany(e){e.forEach(({key:n,value:r})=>{this.set(n,r)})}deleteMany(e){e.forEach(n=>{this.delete(n)})}getStats(){const e=this.hits+this.misses,n=e>0?this.hits/e*100:0;return{size:this.cache.size,capacity:this.capacity,hits:this.hits,misses:this.misses,hitRate:n.toFixed(2)+"%",memoryUsage:this.estimateMemoryUsage()}}resetStats(){this.hits=0,this.misses=0}estimateMemoryUsage(){const e=this.cache.size*2048;return e<1024?e+" B":e<1024*1024?(e/1024).toFixed(2)+" KB":(e/(1024*1024)).toFixed(2)+" MB"}getSize(){return this.cache.size}getCapacity(){return this.capacity}setCapacity(e){for(this.capacity=e;this.cache.size>this.capacity;)this.removeLRU()}}const wbe="xstudio",Sbe=7;class Ebe{db=null;elementCache=new dA(1e3);pageCache=new dA(100);projectCache=new dA(10);async init(){return new Promise((e,n)=>{const r=indexedDB.open(wbe,Sbe);r.onerror=()=>{n(new Error("Failed to open IndexedDB"))},r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=i=>{const a=i.target.result;if(a.objectStoreNames.contains("projects")||(a.createObjectStore("projects",{keyPath:"id"}),console.log("[IndexedDB] Created store: projects")),!a.objectStoreNames.contains("pages")){const s=a.createObjectStore("pages",{keyPath:"id"});s.createIndex("project_id","project_id",{unique:!1}),s.createIndex("order_num","order_num",{unique:!1}),console.log("[IndexedDB] Created store: pages")}if(a.objectStoreNames.contains("elements")){const s=i.target.transaction;if(s){const o=s.objectStore("elements");o.indexNames.contains("layout_id")||(o.createIndex("layout_id","layout_id",{unique:!1}),console.log("[IndexedDB] Added index: elements.layout_id"))}}else{const s=a.createObjectStore("elements",{keyPath:"id"});s.createIndex("page_id","page_id",{unique:!1}),s.createIndex("parent_id","parent_id",{unique:!1}),s.createIndex("order_num","order_num",{unique:!1}),s.createIndex("layout_id","layout_id",{unique:!1}),console.log("[IndexedDB] Created store: elements")}if(a.objectStoreNames.contains("design_tokens")){const s=i.target.transaction;if(s){const o=s.objectStore("design_tokens");o.indexNames.contains("theme_id")||(o.createIndex("theme_id","theme_id",{unique:!1}),console.log("[IndexedDB] Added index: design_tokens.theme_id"))}}else{const s=a.createObjectStore("design_tokens",{keyPath:"id"});s.createIndex("project_id","project_id",{unique:!1}),s.createIndex("theme_id","theme_id",{unique:!1}),console.log("[IndexedDB] Created store: design_tokens")}if(!a.objectStoreNames.contains("history")){const s=a.createObjectStore("history",{keyPath:"id"});s.createIndex("page_id","page_id",{unique:!1}),s.createIndex("created_at","created_at",{unique:!1}),console.log("[IndexedDB] Created store: history")}if(!a.objectStoreNames.contains("design_themes")){const s=a.createObjectStore("design_themes",{keyPath:"id"});s.createIndex("project_id","project_id",{unique:!1}),s.createIndex("status","status",{unique:!1}),console.log("[IndexedDB] Created store: design_themes")}if(a.objectStoreNames.contains("metadata")||(a.createObjectStore("metadata",{keyPath:"project_id"}),console.log("[IndexedDB] Created store: metadata")),a.objectStoreNames.contains("layouts")){const s=i.target.transaction;if(s){const o=s.objectStore("layouts");o.indexNames.contains("order_num")||(o.createIndex("order_num","order_num",{unique:!1}),console.log("[IndexedDB] Added index: layouts.order_num")),o.indexNames.contains("slug")||(o.createIndex("slug","slug",{unique:!1}),console.log("[IndexedDB] Added index: layouts.slug"))}}else{const s=a.createObjectStore("layouts",{keyPath:"id"});s.createIndex("project_id","project_id",{unique:!1}),s.createIndex("name","name",{unique:!1}),s.createIndex("order_num","order_num",{unique:!1}),s.createIndex("slug","slug",{unique:!1}),console.log("[IndexedDB] Created store: layouts with order_num, slug indexes")}if(!a.objectStoreNames.contains("data_tables")){const s=a.createObjectStore("data_tables",{keyPath:"id"});s.createIndex("project_id","project_id",{unique:!1}),s.createIndex("name","name",{unique:!1}),console.log("[IndexedDB] Created store: data_tables")}if(!a.objectStoreNames.contains("api_endpoints")){const s=a.createObjectStore("api_endpoints",{keyPath:"id"});s.createIndex("project_id","project_id",{unique:!1}),s.createIndex("name","name",{unique:!1}),s.createIndex("targetDataTable","targetDataTable",{unique:!1}),console.log("[IndexedDB] Created store: api_endpoints")}if(!a.objectStoreNames.contains("variables")){const s=a.createObjectStore("variables",{keyPath:"id"});s.createIndex("project_id","project_id",{unique:!1}),s.createIndex("name","name",{unique:!1}),s.createIndex("scope","scope",{unique:!1}),s.createIndex("page_id","page_id",{unique:!1}),console.log("[IndexedDB] Created store: variables")}if(!a.objectStoreNames.contains("transformers")){const s=a.createObjectStore("transformers",{keyPath:"id"});s.createIndex("project_id","project_id",{unique:!1}),s.createIndex("name","name",{unique:!1}),s.createIndex("level","level",{unique:!1}),s.createIndex("inputDataTable","inputDataTable",{unique:!1}),s.createIndex("outputDataTable","outputDataTable",{unique:!1}),console.log("[IndexedDB] Created store: transformers")}console.log("[IndexedDB] Schema upgrade completed")}})}async close(){this.db&&(this.db.close(),this.db=null,this.elementCache.clear(),this.pageCache.clear(),this.projectCache.clear(),console.log("[IndexedDB] Database closed and caches cleared"))}ensureDB(){if(!this.db)throw new Error("Database not initialized. Call init() first.");return this.db}async getFromStore(e,n){const r=this.ensureDB();return new Promise((i,a)=>{const c=r.transaction(e,"readonly").objectStore(e).get(n);c.onsuccess=()=>i(c.result||null),c.onerror=()=>a(c.error)})}async putToStore(e,n){const r=this.ensureDB();return new Promise((i,a)=>{const c=r.transaction(e,"readwrite").objectStore(e).put(n);c.onsuccess=()=>i(n),c.onerror=()=>a(c.error)})}async deleteFromStore(e,n){const r=this.ensureDB();return new Promise((i,a)=>{const c=r.transaction(e,"readwrite").objectStore(e).delete(n);c.onsuccess=()=>i(),c.onerror=()=>a(c.error)})}async getAllFromStore(e){const n=this.ensureDB();return new Promise((r,i)=>{const o=n.transaction(e,"readonly").objectStore(e).getAll();o.onsuccess=()=>r(o.result),o.onerror=()=>i(o.error)})}async getAllByIndex(e,n,r){const i=this.ensureDB();return new Promise((a,s)=>{const h=i.transaction(e,"readonly").objectStore(e).index(n).getAll(r);h.onsuccess=()=>a(h.result),h.onerror=()=>s(h.error)})}projects={insert:async e=>{const n=await this.putToStore("projects",e);return this.projectCache.set(e.id,n),n},update:async(e,n)=>{let r=this.projectCache.get(e);if(r||(r=await this.getFromStore("projects",e)),!r)throw new Error(`Project not found: ${e}`);const i={...r,...n,updated_at:new Date().toISOString()},a=await this.putToStore("projects",i);return this.projectCache.set(e,a),a},delete:async e=>{await this.deleteFromStore("projects",e),this.projectCache.delete(e)},getById:async e=>{const n=this.projectCache.get(e);if(n)return n;const r=await this.getFromStore("projects",e);return r&&this.projectCache.set(e,r),r},getAll:async()=>this.getAllFromStore("projects")};pages={insert:async e=>{const n=await this.putToStore("pages",e);return this.pageCache.set(e.id,n),n},insertMany:async e=>{if(e.length===0)return[];const n=this.ensureDB();return new Promise((r,i)=>{const a=n.transaction("pages","readwrite"),s=a.objectStore("pages");e.forEach(o=>{s.put(o)}),a.oncomplete=()=>{this.pageCache.setMany(e.map(o=>({key:o.id,value:o}))),r(e)},a.onerror=()=>{console.error(" [IndexedDB] pages.insertMany transaction failed:",a.error),i(a.error)}})},update:async(e,n)=>{let r=this.pageCache.get(e);if(r||(r=await this.getFromStore("pages",e)),!r)throw new Error(`Page not found: ${e}`);const i={...r,...n,updated_at:new Date().toISOString()},a=await this.putToStore("pages",i);return this.pageCache.set(e,a),a},delete:async e=>{await this.deleteFromStore("pages",e),this.pageCache.delete(e)},getById:async e=>{const n=this.pageCache.get(e);if(n)return n;const r=await this.getFromStore("pages",e);return r&&this.pageCache.set(e,r),r},getByProject:async e=>this.getAllByIndex("pages","project_id",e),getAll:async()=>this.getAllFromStore("pages")};elements={insert:async e=>{const n=await this.putToStore("elements",e);return this.elementCache.set(e.id,n),n},insertMany:async e=>{if(e.length===0)return[];const n=this.ensureDB();return new Promise((r,i)=>{const a=n.transaction("elements","readwrite"),s=a.objectStore("elements");e.forEach(o=>{s.put(o)}),a.oncomplete=()=>{this.elementCache.setMany(e.map(o=>({key:o.id,value:o}))),r(e)},a.onerror=()=>{console.error(" [IndexedDB] insertMany transaction failed:",a.error),i(a.error)}})},update:async(e,n)=>{let r=this.elementCache.get(e);if(r||(r=await this.getFromStore("elements",e)),!r)throw new Error(`Element not found: ${e}`);const i={...r,...n,updated_at:new Date().toISOString()},a=await this.putToStore("elements",i);return this.elementCache.set(e,a),a},updateMany:async e=>{if(e.length===0)return[];const n=this.ensureDB();return new Promise((r,i)=>{const a=n.transaction("elements","readwrite"),s=a.objectStore("elements"),o=[];e.forEach(({id:c,data:u})=>{const h=s.get(c);h.onsuccess=()=>{const f=h.result;if(f){const m={...f,...u,updated_at:new Date().toISOString()};s.put(m),o.push(m)}}}),a.oncomplete=()=>{this.elementCache.setMany(o.map(c=>({key:c.id,value:c}))),r(o)},a.onerror=()=>{console.error(" [IndexedDB] updateMany transaction failed:",a.error),i(a.error)}})},delete:async e=>{await this.deleteFromStore("elements",e),this.elementCache.delete(e)},deleteMany:async e=>{if(e.length===0)return;const n=this.ensureDB();return new Promise((r,i)=>{const a=n.transaction("elements","readwrite"),s=a.objectStore("elements");e.forEach(o=>{s.delete(o)}),a.oncomplete=()=>{this.elementCache.deleteMany(e),r()},a.onerror=()=>{console.error(" [IndexedDB] deleteMany transaction failed:",a.error),i(a.error)}})},getById:async e=>{const n=this.elementCache.get(e);if(n)return n;const r=await this.getFromStore("elements",e);return r&&this.elementCache.set(e,r),r},getByPage:async e=>this.getAllByIndex("elements","page_id",e),getByLayout:async e=>{console.log(` [IndexedDB] getByLayout : layoutId=${e}`);const n=await this.getAllByIndex("elements","layout_id",e);return console.log(` [IndexedDB] getByLayout : ${n.length} `),n},getChildren:async e=>this.getAllByIndex("elements","parent_id",e),getAll:async()=>this.getAllFromStore("elements")};designTokens={getById:async e=>this.getFromStore("design_tokens",e),insert:async e=>this.putToStore("design_tokens",e),insertMany:async e=>{if(e.length===0)return[];const n=this.ensureDB();return new Promise((r,i)=>{const a=n.transaction("design_tokens","readwrite"),s=a.objectStore("design_tokens");e.forEach(o=>{s.put(o)}),a.oncomplete=()=>{r(e)},a.onerror=()=>{console.error(" [IndexedDB] designTokens.insertMany transaction failed:",a.error),i(a.error)}})},update:async(e,n)=>{const r=await this.getFromStore("design_tokens",e);if(!r)throw new Error(`Design token not found: ${e}`);const i={...r,...n};return this.putToStore("design_tokens",i)},delete:async e=>this.deleteFromStore("design_tokens",e),getByProject:async e=>this.getAllByIndex("design_tokens","project_id",e),getByTheme:async e=>this.getAllByIndex("design_tokens","theme_id",e),getAll:async()=>this.getAllFromStore("design_tokens")};history={insert:async e=>this.putToStore("history",e),getByPage:async(e,n=50)=>{const r=this.ensureDB();return new Promise((i,a)=>{const u=r.transaction("history","readonly").objectStore("history").index("page_id").getAll(e);u.onsuccess=()=>{const h=u.result.sort((f,m)=>new Date(m.created_at).getTime()-new Date(f.created_at).getTime()).slice(0,n);i(h)},u.onerror=()=>a(u.error)})},deleteOldEntries:async(e,n)=>{const i=(await this.history.getByPage(e,1e3)).slice(n),a=this.ensureDB();return new Promise((s,o)=>{const u=a.transaction("history","readwrite").objectStore("history");let h=0;i.forEach(f=>{const m=u.delete(f.id);m.onsuccess=()=>{h++,h===i.length&&s()},m.onerror=()=>o(m.error)}),i.length===0&&s()})},clear:async e=>{const n=await this.history.getByPage(e,1e3),r=this.ensureDB();return new Promise((i,a)=>{const o=r.transaction("history","readwrite").objectStore("history");let c=0;n.forEach(u=>{const h=o.delete(u.id);h.onsuccess=()=>{c++,c===n.length&&i()},h.onerror=()=>a(h.error)}),n.length===0&&i()})}};themes={getAll:async()=>this.getAllFromStore("design_themes"),getById:async e=>this.getFromStore("design_themes",e),getByProject:async e=>{const n=this.ensureDB();return new Promise((r,i)=>{const c=n.transaction("design_themes","readonly").objectStore("design_themes").index("project_id").getAll(e);c.onsuccess=()=>r(c.result||[]),c.onerror=()=>i(c.error)})},getActiveTheme:async e=>{const n=await this.themes.getByProject(e);return n.find(i=>i.status==="active")||n[0]||null},insert:async e=>(await this.putToStore("design_themes",e),e),update:async(e,n)=>{const r=await this.themes.getById(e);if(!r)throw new Error(`Theme ${e} not found`);const i={...r,...n,updated_at:new Date().toISOString()};return await this.putToStore("design_themes",i),i},delete:async e=>{const n=this.ensureDB();return new Promise((r,i)=>{const o=n.transaction("design_themes","readwrite").objectStore("design_themes").delete(e);o.onsuccess=()=>r(),o.onerror=()=>i(o.error)})}};layouts={insert:async e=>{const n=new Date().toISOString(),r={...e,created_at:e.created_at||n,updated_at:e.updated_at||n};return await this.putToStore("layouts",r),r},update:async(e,n)=>{const r=await this.layouts.getById(e);if(!r)throw new Error(`Layout ${e} not found`);const i={...r,...n,updated_at:new Date().toISOString()};return await this.putToStore("layouts",i),i},delete:async e=>{await this.deleteFromStore("layouts",e)},getById:async e=>this.getFromStore("layouts",e),getByProject:async e=>this.getAllByIndex("layouts","project_id",e),getAll:async()=>this.getAllFromStore("layouts")};data_tables={insert:async e=>{const n=new Date().toISOString(),r={...e,created_at:e.created_at||n,updated_at:e.updated_at||n};return await this.putToStore("data_tables",r),r},update:async(e,n)=>{const r=await this.data_tables.getById(e);if(!r)throw new Error(`DataTable ${e} not found`);const i={...r,...n,updated_at:new Date().toISOString()};return await this.putToStore("data_tables",i),i},delete:async e=>{await this.deleteFromStore("data_tables",e)},getById:async e=>this.getFromStore("data_tables",e),getByProject:async e=>this.getAllByIndex("data_tables","project_id",e),getByName:async e=>(await this.getAllByIndex("data_tables","name",e))[0]||null,getAll:async()=>this.getAllFromStore("data_tables")};api_endpoints={insert:async e=>{const n=new Date().toISOString(),r={...e,created_at:e.created_at||n,updated_at:e.updated_at||n};return await this.putToStore("api_endpoints",r),r},update:async(e,n)=>{const r=await this.api_endpoints.getById(e);if(!r)throw new Error(`ApiEndpoint ${e} not found`);const i={...r,...n,updated_at:new Date().toISOString()};return await this.putToStore("api_endpoints",i),i},delete:async e=>{await this.deleteFromStore("api_endpoints",e)},getById:async e=>this.getFromStore("api_endpoints",e),getByProject:async e=>this.getAllByIndex("api_endpoints","project_id",e),getByName:async e=>(await this.getAllByIndex("api_endpoints","name",e))[0]||null,getByTargetDataTable:async e=>this.getAllByIndex("api_endpoints","targetDataTable",e),getAll:async()=>this.getAllFromStore("api_endpoints")};variables={insert:async e=>{const n=new Date().toISOString(),r={...e,created_at:e.created_at||n,updated_at:e.updated_at||n};return await this.putToStore("variables",r),r},update:async(e,n)=>{const r=await this.variables.getById(e);if(!r)throw new Error(`Variable ${e} not found`);const i={...r,...n,updated_at:new Date().toISOString()};return await this.putToStore("variables",i),i},delete:async e=>{await this.deleteFromStore("variables",e)},getById:async e=>this.getFromStore("variables",e),getByProject:async e=>this.getAllByIndex("variables","project_id",e),getByName:async e=>(await this.getAllByIndex("variables","name",e))[0]||null,getByScope:async e=>this.getAllByIndex("variables","scope",e),getByPage:async e=>this.getAllByIndex("variables","page_id",e),getAll:async()=>this.getAllFromStore("variables")};transformers={insert:async e=>{const n=new Date().toISOString(),r={...e,created_at:e.created_at||n,updated_at:e.updated_at||n};return await this.putToStore("transformers",r),r},update:async(e,n)=>{const r=await this.transformers.getById(e);if(!r)throw new Error(`Transformer ${e} not found`);const i={...r,...n,updated_at:new Date().toISOString()};return await this.putToStore("transformers",i),i},delete:async e=>{await this.deleteFromStore("transformers",e)},getById:async e=>this.getFromStore("transformers",e),getByProject:async e=>this.getAllByIndex("transformers","project_id",e),getByName:async e=>(await this.getAllByIndex("transformers","name",e))[0]||null,getByLevel:async e=>this.getAllByIndex("transformers","level",e),getByInputDataTable:async e=>this.getAllByIndex("transformers","inputDataTable",e),getByOutputDataTable:async e=>this.getAllByIndex("transformers","outputDataTable",e),getAll:async()=>this.getAllFromStore("transformers")};metadata={get:async()=>(await this.getAllFromStore("metadata"))[0]||null,set:async e=>{await this.putToStore("metadata",e)},update:async e=>{const n=await this.metadata.get();if(!n)throw new Error("Metadata not found. Call set() first.");const r={...n,...e};await this.putToStore("metadata",r)}};cache={getStats:()=>({elements:this.elementCache.getStats(),pages:this.pageCache.getStats(),projects:this.projectCache.getStats()}),clear:()=>{this.elementCache.clear(),this.pageCache.clear(),this.projectCache.clear(),console.log("[IndexedDB] All caches cleared")},resetStats:()=>{this.elementCache.resetStats(),this.pageCache.resetStats(),this.projectCache.resetStats(),console.log("[IndexedDB] Cache statistics reset")}};batch={export:async()=>{const[e,n,r,i,a]=await Promise.all([this.projects.getAll().then(s=>s[0]||null),this.pages.getAll(),this.elements.getAll(),this.designTokens.getAll(),this.metadata.get()]);return{project:e,pages:n,elements:r,designTokens:i,metadata:a}},import:async e=>{e.project&&await this.projects.insert(e.project),e.pages&&e.pages.length>0&&await this.pages.insertMany(e.pages),e.elements&&e.elements.length>0&&await this.elements.insertMany(e.elements),e.designTokens&&e.designTokens.length>0&&await this.designTokens.insertMany(e.designTokens),e.metadata&&await this.metadata.set(e.metadata),console.log("[IndexedDB] Import completed:",{pages:e.pages?.length||0,elements:e.elements?.length||0,designTokens:e.designTokens?.length||0})},clear:async()=>{const e=this.ensureDB();return new Promise((n,r)=>{const i=["projects","pages","elements","design_tokens","design_themes","history","metadata","layouts","data_tables","api_endpoints","variables","transformers"],a=e.transaction(i,"readwrite");let s=0;i.forEach(o=>{const c=a.objectStore(o).clear();c.onsuccess=()=>{s++,s===i.length&&(console.log("[IndexedDB] All stores cleared"),n())},c.onerror=()=>r(c.error)})})}}}let hA=null,c1=null;async function Yt(){return hA||c1||(c1=(async()=>{const t=new Ebe;return await t.init(),hA=t,c1=null,t})(),c1)}const VD=Object.freeze(Object.defineProperty({__proto__:null,getDB:Yt},Symbol.toStringTag,{value:"Module"}));function Wy(t){try{const e=document.getElementById("previewFrame");if(e?.contentWindow){const n=Array.from(t.values()).map(r=>({id:r.id,name:r.name,schema:r.schema,mockData:r.mockData,runtimeData:r.runtimeData,useMockData:r.useMockData}));e.contentWindow.postMessage({type:"UPDATE_DATA_TABLES",dataTables:n},"*"),console.log(" [Builder] DataTables Canvas :",n.length,""),console.log(" [Builder]  :",n.map(r=>({name:r.name,mockDataCount:r.mockData?.length||0,runtimeDataCount:r.runtimeData?.length||0,useMockData:r.useMockData})))}}catch(e){console.warn(" Canvas  :",e)}}const Cbe=t=>async e=>{t({isLoading:!0});try{const r=await(await Yt()).data_tables?.getByProject(e)||[],i=new Map;(r||[]).forEach(a=>{i.set(a.name,a)}),t(a=>({dataTables:i,isLoading:!1,errors:new Map(a.errors)})),Wy(i)}catch(n){console.error(" DataTable   :",n),t(r=>{const i=new Map(r.errors);return i.set("fetchDataTables",n),{errors:i,isLoading:!1}})}},Tbe=(t,e)=>async n=>{t({isLoading:!0});try{const r=await Yt(),i={id:crypto.randomUUID(),name:n.name,project_id:n.project_id,schema:n.schema||[],mockData:n.mockData||[],useMockData:n.useMockData??!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await r.data_tables?.insert(i);const{dataTables:a}=e(),s=new Map(a);return s.set(i.name,i),t({dataTables:s,isLoading:!1}),Wy(s),i}catch(r){throw console.error(" DataTable  :",r),t(i=>{const a=new Map(i.errors);return a.set("createDataTable",r),{errors:a,isLoading:!1}}),r}},Mbe=(t,e)=>async(n,r)=>{try{await(await Yt()).data_tables?.update(n,r);const{dataTables:a}=e(),s=new Map(a);let o;if(a.forEach((c,u)=>{c.id===n&&(o=u)}),o){const u={...s.get(o),...r,updated_at:new Date().toISOString()};r.name&&r.name!==o?(s.delete(o),s.set(r.name,u)):s.set(o,u)}t({dataTables:s}),Wy(s)}catch(i){throw console.error(" DataTable  :",i),t(a=>{const s=new Map(a.errors);return s.set("updateDataTable",i),{errors:s}}),i}},Abe=(t,e)=>async n=>{t({isLoading:!0}),console.log(` [DataTable]  : id="${n}"`);try{const i=(await Yt()).data_tables;if(!i)throw new Error("data_tables store not found in database");await i.delete(n),console.log(` [IndexedDB] DataTable  : id="${n}"`);const{dataTables:a}=e(),s=new Map(a);let o=null;a.forEach((c,u)=>{c.id===n&&(o=u,s.delete(u))}),console.log(` [Memory] DataTable "${o}"  ,  : ${s.size}`),t({dataTables:s,isLoading:!1}),Wy(s)}catch(r){throw console.error(" DataTable  :",r),t(i=>{const a=new Map(i.errors);return a.set("deleteDataTable",r),{errors:a,isLoading:!1}}),r}},Pbe=t=>e=>{const{dataTables:n}=t(),r=n.get(e);return r?r.useMockData?r.mockData||[]:r.runtimeData||[]:(console.warn(` DataTable "${e}" not found`),[])},Nbe=(t,e)=>(n,r)=>{const{dataTables:i}=e(),a=i.get(n);if(!a){console.warn(` DataTable "${n}" not found`);return}const s=new Map(i);s.set(n,{...a,runtimeData:r}),t({dataTables:s}),Wy(s)},Dbe=t=>async e=>{t({isLoading:!0});try{const r=await(await Yt()).api_endpoints?.getByProject(e)||[],i=new Map;(r||[]).forEach(a=>{i.set(a.name,a)}),t(a=>({apiEndpoints:i,isLoading:!1,errors:new Map(a.errors)}))}catch(n){console.error(" ApiEndpoint   :",n),t(r=>{const i=new Map(r.errors);return i.set("fetchApiEndpoints",n),{errors:i,isLoading:!1}})}},kbe=(t,e)=>async n=>{t({isLoading:!0});try{const r=await Yt(),i={id:crypto.randomUUID(),name:n.name,project_id:n.project_id,method:n.method,baseUrl:n.baseUrl,path:n.path,headers:n.headers||[],queryParams:n.queryParams||[],bodyType:n.bodyType||"none",bodyTemplate:n.bodyTemplate,responseMapping:n.responseMapping||{dataPath:"data"},targetDataTable:n.targetDataTable,executionMode:n.executionMode||"client",serverConfig:n.serverConfig,timeout:n.timeout||3e4,retryCount:n.retryCount||0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await r.api_endpoints?.insert(i);const{apiEndpoints:a}=e(),s=new Map(a);return s.set(i.name,i),t({apiEndpoints:s,isLoading:!1}),i}catch(r){throw console.error(" ApiEndpoint  :",r),t(i=>{const a=new Map(i.errors);return a.set("createApiEndpoint",r),{errors:a,isLoading:!1}}),r}},Rbe=(t,e)=>async(n,r)=>{try{await(await Yt()).api_endpoints?.update(n,r);const{apiEndpoints:a}=e(),s=new Map(a);let o;if(a.forEach((c,u)=>{c.id===n&&(o=u)}),o){const u={...s.get(o),...r,updated_at:new Date().toISOString()};r.name&&r.name!==o?(s.delete(o),s.set(r.name,u)):s.set(o,u)}t({apiEndpoints:s})}catch(i){throw console.error(" ApiEndpoint  :",i),t(a=>{const s=new Map(a.errors);return s.set("updateApiEndpoint",i),{errors:s}}),i}},Ibe=(t,e)=>async n=>{t({isLoading:!0});try{await(await Yt()).api_endpoints?.delete(n);const{apiEndpoints:i}=e(),a=new Map(i);i.forEach((s,o)=>{s.id===n&&a.delete(o)}),t({apiEndpoints:a,isLoading:!1})}catch(r){throw console.error(" ApiEndpoint  :",r),t(i=>{const a=new Map(i.errors);return a.set("deleteApiEndpoint",r),{errors:a,isLoading:!1}}),r}},$be=(t,e)=>async(n,r)=>{const{apiEndpoints:i,loadingApis:a}=e();let s;if(i.forEach(c=>{c.id===n&&(s=c)}),!s)throw new Error(`ApiEndpoint not found: ${n}`);const o=new Set(a);o.add(n),t({loadingApis:o});try{let c=`${s.baseUrl}${s.path}`;if(r&&Object.entries(r).forEach(([E,A])=>{c=c.replace(`{{${E}}}`,String(A))}),s.queryParams.length>0){const E=new URLSearchParams;s.queryParams.forEach(N=>{if(N.key){let P=N.value;r&&Object.entries(r).forEach(([R,D])=>{P=P.replace(`{{${R}}}`,String(D))}),E.append(N.key,P)}});const A=E.toString();A&&(c+=`?${A}`)}const u={};s.headers.forEach(E=>{if(E.enabled&&E.key){let A=E.value;r&&Object.entries(r).forEach(([N,P])=>{A=A.replace(`{{${N}}}`,String(P))}),u[E.key]=A}});let h;s.bodyType!=="none"&&s.bodyTemplate&&(h=s.bodyTemplate,r&&Object.entries(r).forEach(([E,A])=>{h=h.replace(`{{${E}}}`,JSON.stringify(A))}));let f=c;const m=c.startsWith("http://")||c.startsWith("https://"),g=!1,v=new AbortController,x=setTimeout(()=>v.abort(),s.timeout||3e4),_=await fetch(f,{method:s.method,headers:u,body:h,signal:v.signal});if(clearTimeout(x),!_.ok)throw new Error(`HTTP ${_.status}: ${_.statusText}`);const w=await _.json();let S=w;if(s.responseMapping.dataPath&&(S=s.responseMapping.dataPath.split(".").reduce((A,N)=>A?.[N],w)),s.targetDataTable&&S){const{dataTables:E}=e(),A=E.get(s.targetDataTable);if(A){const N=new Map(E);N.set(s.targetDataTable,{...A,runtimeData:Array.isArray(S)?S:[S]}),t({dataTables:N}),Wy(N),console.log(` API "${s.name}"  DataTable "${s.targetDataTable}"  `)}}return S}catch(c){throw console.error(` ApiEndpoint "${s?.name}"  :`,c),t(u=>{const h=new Map(u.errors);return h.set(`executeApi_${n}`,c),{errors:h}}),c}finally{const c=e().loadingApis,u=new Set(c);u.delete(n),t({loadingApis:u})}},jbe=t=>async e=>{t({isLoading:!0});try{const r=await(await Yt()).variables?.getByProject(e)||[],i=new Map;(r||[]).forEach(a=>{i.set(a.name,a)}),t(a=>({variables:i,isLoading:!1,errors:new Map(a.errors)}))}catch(n){console.error(" Variable   :",n),t(r=>{const i=new Map(r.errors);return i.set("fetchVariables",n),{errors:i,isLoading:!1}})}},Lbe=(t,e)=>async n=>{t({isLoading:!0});try{const r=await Yt(),i={id:crypto.randomUUID(),name:n.name,project_id:n.project_id,type:n.type,defaultValue:n.defaultValue,persist:n.persist??!1,scope:n.scope||"global",page_id:n.page_id,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await r.variables?.insert(i);const{variables:a}=e(),s=new Map(a);return s.set(i.name,i),t({variables:s,isLoading:!1}),i}catch(r){throw console.error(" Variable  :",r),t(i=>{const a=new Map(i.errors);return a.set("createVariable",r),{errors:a,isLoading:!1}}),r}},Obe=(t,e)=>async(n,r)=>{try{await(await Yt()).variables?.update(n,r);const{variables:a}=e(),s=new Map(a);let o;if(a.forEach((c,u)=>{c.id===n&&(o=u)}),o){const u={...s.get(o),...r,updated_at:new Date().toISOString()};r.name&&r.name!==o?(s.delete(o),s.set(r.name,u)):s.set(o,u)}t({variables:s})}catch(i){throw console.error(" Variable  :",i),t(a=>{const s=new Map(a.errors);return s.set("updateVariable",i),{errors:s}}),i}},Fbe=(t,e)=>async n=>{t({isLoading:!0});try{await(await Yt()).variables?.delete(n);const{variables:i}=e(),a=new Map(i);i.forEach((s,o)=>{s.id===n&&a.delete(o)}),t({variables:a,isLoading:!1})}catch(r){throw console.error(" Variable  :",r),t(i=>{const a=new Map(i.errors);return a.set("deleteVariable",r),{errors:a,isLoading:!1}}),r}},Bbe=t=>e=>{const{variables:n}=t(),r=n.get(e);if(!r){console.warn(` Variable "${e}" not found`);return}return r.defaultValue},zbe=(t,e)=>(n,r)=>{const{variables:i}=e(),a=i.get(n);if(!a){console.warn(` Variable "${n}" not found`);return}const s=new Map(i);s.set(n,{...a,defaultValue:r}),t({variables:s})},Ube=t=>async e=>{t({isLoading:!0});try{const r=await(await Yt()).transformers?.getByProject(e)||[],i=new Map;(r||[]).forEach(a=>{i.set(a.name,a)}),t(a=>({transformers:i,isLoading:!1,errors:new Map(a.errors)}))}catch(n){console.error(" Transformer   :",n),t(r=>{const i=new Map(r.errors);return i.set("fetchTransformers",n),{errors:i,isLoading:!1}})}},Vbe=(t,e)=>async n=>{t({isLoading:!0});try{const r=await Yt(),i={id:crypto.randomUUID(),name:n.name,project_id:n.project_id,level:n.level,responseMapping:n.responseMapping,jsTransformer:n.jsTransformer,customFunction:n.customFunction,inputDataTable:n.inputDataTable,outputDataTable:n.outputDataTable,enabled:n.enabled??!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await r.transformers?.insert(i);const{transformers:a}=e(),s=new Map(a);return s.set(i.name,i),t({transformers:s,isLoading:!1}),i}catch(r){throw console.error(" Transformer  :",r),t(i=>{const a=new Map(i.errors);return a.set("createTransformer",r),{errors:a,isLoading:!1}}),r}},Hbe=(t,e)=>async(n,r)=>{t({isLoading:!0});try{await(await Yt()).transformers?.update(n,r);const{transformers:a}=e(),s=new Map(a);let o;if(a.forEach((c,u)=>{c.id===n&&(o=u)}),o){const u={...s.get(o),...r,updated_at:new Date().toISOString()};r.name&&r.name!==o?(s.delete(o),s.set(r.name,u)):s.set(o,u)}t({transformers:s,isLoading:!1})}catch(i){throw console.error(" Transformer  :",i),t(a=>{const s=new Map(a.errors);return s.set("updateTransformer",i),{errors:s,isLoading:!1}}),i}},Gbe=(t,e)=>async n=>{t({isLoading:!0});try{await(await Yt()).transformers?.delete(n);const{transformers:i}=e(),a=new Map(i);i.forEach((s,o)=>{s.id===n&&a.delete(o)}),t({transformers:a,isLoading:!1})}catch(r){throw console.error(" Transformer  :",r),t(i=>{const a=new Map(i.errors);return a.set("deleteTransformer",r),{errors:a,isLoading:!1}}),r}},Wbe=t=>async(e,n)=>{const{transformers:r,dataTables:i,variables:a}=t();let s;if(r.forEach(o=>{o.id===e&&(s=o)}),!s)throw new Error(`Transformer not found: ${e}`);if(!s.enabled)return console.warn(` Transformer "${s.name}" is disabled`),n;try{const o={dataTables:Object.fromEntries(Array.from(i.entries()).map(([u,h])=>[u,h.useMockData?h.mockData:h.runtimeData||[]])),variables:Object.fromEntries(Array.from(a.entries()).map(([u,h])=>[u,h.defaultValue])),api:{fetch:async(u,h)=>(await fetch(u,h)).json()},utils:{formatDate:(u,h)=>{const f=new Date(u);return h.replace("YYYY",f.getFullYear().toString()).replace("MM",(f.getMonth()+1).toString().padStart(2,"0")).replace("DD",f.getDate().toString().padStart(2,"0"))},formatCurrency:(u,h)=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:h}).format(u)}};let c=n;switch(s.level){case"level1_mapping":if(s.responseMapping){const{dataPath:u,fieldMappings:h}=s.responseMapping;u&&typeof n=="object"&&(c=u.split(".").reduce((m,g)=>m&&typeof m=="object"&&g in m?m[g]:m,n)),h&&Array.isArray(c)&&(c=c.map(f=>{const m={};return h.forEach(g=>{let v=f[g.sourceKey];if(g.transform&&v!==void 0)switch(g.transform){case"uppercase":v=String(v).toUpperCase();break;case"lowercase":v=String(v).toLowerCase();break;case"trim":v=String(v).trim();break;case"number":v=Number(v);break;case"boolean":v=!!v;break;case"date":v=new Date(String(v)).toISOString();break}m[g.targetKey]=v}),m}))}break;case"level2_transformer":s.jsTransformer?.code&&(c=new Function("data","context",s.jsTransformer.code)(n,o));break;case"level3_custom":console.warn("Level 3 Custom Function   .");break}return Array.isArray(c)?c:[c]}catch(o){throw console.error(` Transformer "${s?.name}"  :`,o),o}},qbe=t=>()=>{t({errors:new Map})},Kbe=t=>()=>{t({dataTables:new Map,apiEndpoints:new Map,variables:new Map,transformers:new Map,loadingApis:new Set,errors:new Map,isLoading:!1})},_K="xstudio-runtime-values";function Xbe(){try{const t=localStorage.getItem(_K);if(t){const e=JSON.parse(t);return new Map(Object.entries(e))}}catch(t){console.warn("[DataStore] Failed to load persisted runtime values:",t)}return new Map}function Ybe(t,e){try{const n={};e.forEach((r,i)=>{r.persist&&t.has(i)&&(n[i]=t.get(i))}),localStorage.setItem(_K,JSON.stringify(n))}catch(n){console.warn("[DataStore] Failed to save persisted runtime values:",n)}}const Zbe=(t,e)=>{const n=Cbe(t),r=Tbe(t,e),i=Mbe(t,e),a=Abe(t,e),s=Pbe(e),o=Nbe(t,e),c=Dbe(t),u=kbe(t,e),h=Rbe(t,e),f=Ibe(t,e),m=$be(t,e),g=jbe(t),v=Lbe(t,e),x=Obe(t,e),_=Fbe(t,e),w=Bbe(e),S=zbe(t,e),E=Ube(t),A=Vbe(t,e),N=Hbe(t,e),P=Gbe(t,e),R=Wbe(e),D=qbe(t),k=Kbe(t);return{dataTables:new Map,apiEndpoints:new Map,variables:new Map,transformers:new Map,loadingApis:new Set,errors:new Map,isLoading:!1,runtimeValues:new Map,isInitialized:!1,currentProjectId:null,fetchDataTables:n,createDataTable:r,updateDataTable:i,deleteDataTable:a,getDataTableData:s,setRuntimeData:o,fetchApiEndpoints:c,createApiEndpoint:u,updateApiEndpoint:h,deleteApiEndpoint:f,executeApiEndpoint:m,fetchVariables:g,createVariable:v,updateVariable:x,deleteVariable:_,getVariableValue:w,setVariableValue:S,fetchTransformers:E,createTransformer:A,updateTransformer:N,deleteTransformer:P,executeTransformer:R,setRuntimeValue:(q,U)=>{const{runtimeValues:J,variables:O}=e(),z=new Map(J);z.set(q,U),t({runtimeValues:z}),Ybe(z,O)},getRuntimeValue:q=>{const{runtimeValues:U,variables:J}=e();return U.has(q)?U.get(q):J.get(q)?.defaultValue},initializeForProject:async q=>{const{currentProjectId:U,isInitialized:J}=e();if(J&&U===q){console.log(`[DataStore] Already initialized for project: ${q}`);return}console.log(`[DataStore] Initializing for project: ${q}`),t({isLoading:!0,currentProjectId:q});try{await Promise.all([g(q),n(q),c(q),E(q)]);const O=Xbe(),{variables:z}=e(),V=new Map;z.forEach((H,ee)=>{H.persist&&O.has(ee)&&V.set(ee,O.get(ee))}),t({isInitialized:!0,isLoading:!1,runtimeValues:V}),console.log(`[DataStore] Initialized: ${z.size} variables, ${e().dataTables.size} tables`)}catch(O){throw console.error("[DataStore] Initialization failed:",O),t({isLoading:!1}),O}},clearErrors:D,reset:k}},vr=Ks()(dfe(Zbe)),DI=()=>{const t=vr(e=>e.dataTables);return Array.from(t.values())},vT=()=>{const t=vr(e=>e.apiEndpoints);return Array.from(t.values())},kI=()=>{const t=vr(e=>e.variables);return Array.from(t.values())},Jbe=()=>{const t=vr(e=>e.transformers);return Array.from(t.values())},Qbe=()=>{const{variables:t,getRuntimeValue:e}=vr.getState();return Array.from(t.values()).map(n=>({id:n.id,name:n.name,type:n.type,defaultValue:e(n.name),persist:n.persist,scope:n.scope,page_id:n.page_id}))},exe=()=>Ks((t,e)=>({elements:[],setElements:n=>t({elements:n}),updateElementProps:(n,r)=>{t(i=>({elements:i.elements.map(a=>a.id===n?{...a,props:{...a.props,...r}}:a)}))},addElement:n=>{t(r=>({elements:[...r.elements,n]}))},addElements:n=>{t(r=>({elements:[...r.elements,...n]}))},removeElement:n=>{t(r=>({elements:r.elements.filter(i=>i.id!==n)}))},removeElements:n=>{const r=new Set(n);t(i=>({elements:i.elements.filter(a=>!r.has(a.id))}))},updateElement:(n,r)=>{t(i=>({elements:i.elements.map(a=>a.id===n?{...a,...r}:a)}))},getElements:()=>e().elements,pages:[],setPages:n=>t({pages:n}),currentPageId:null,setCurrentPageId:n=>t({currentPageId:n}),currentPath:"/",setCurrentPath:n=>t({currentPath:n}),routeParams:{},setRouteParams:n=>t({routeParams:n}),layouts:[],setLayouts:n=>t({layouts:n}),currentLayoutId:null,setCurrentLayoutId:n=>t({currentLayoutId:n}),themeVars:[],setThemeVars:n=>{t({themeVars:n}),GL(n,e().isDarkMode)},isDarkMode:!1,setDarkMode:n=>{t({isDarkMode:n}),document.documentElement.setAttribute("data-theme",n?"dark":"light"),GL(e().themeVars,n)},dataSources:[],setDataSources:n=>t({dataSources:n}),dataStates:new Map,setDataState:(n,r)=>{t(i=>{const a=new Map(i.dataStates);return a.set(n,r),{dataStates:a}})},dataTables:[],setDataTables:n=>t({dataTables:n}),apiEndpoints:[],setApiEndpoints:n=>t({apiEndpoints:n}),variables:[],setVariables:n=>{t({variables:n});const i={...e().appState};n.forEach(a=>{a.scope==="global"&&a.defaultValue!==void 0&&(a.name in i||(i[a.name]=a.defaultValue))}),t({appState:i})},authToken:null,setAuthToken:n=>t({authToken:n}),appState:{},pageStates:new Map,componentStates:new Map,setState:(n,r)=>{const[i,...a]=n.split("."),s=a.join(".");switch(i){case"app":t(o=>({appState:{...o.appState,[s]:r}}));break;case"page":{const o=e().currentPageId;o&&t(c=>{const u=new Map(c.pageStates),h=u.get(o)||{};return u.set(o,{...h,[s]:r}),{pageStates:u}});break}case"component":{const o=s.indexOf(".");if(o>0){const c=s.slice(0,o),u=s.slice(o+1);t(h=>{const f=new Map(h.componentStates),m=f.get(c)||{};return f.set(c,{...m,[u]:r}),{componentStates:f}})}break}default:t(o=>({appState:{...o.appState,[n]:r}}))}},getState:n=>{const[r,...i]=n.split("."),a=i.join("."),s=e();switch(r){case"app":return bC(s.appState,a);case"page":return bC(s.pageStates.get(s.currentPageId||"")||{},a);case"component":{const o=a.indexOf(".");if(o>0){const c=a.slice(0,o),u=a.slice(o+1);return bC(s.componentStates.get(c)||{},u)}return}default:return bC(s.appState,n)}},isReady:!1,setReady:n=>t({isReady:n})}));function bC(t,e){if(!e)return t;const n=e.split(".");let r=t;for(const i of n){if(r==null||typeof r!="object")return;r=r[i]}return r}function GL(t,e){const n=document.documentElement,r=document.getElementById("runtime-theme-vars");r&&r.remove();const i=t.filter(c=>!c.isDark),a=t.filter(c=>c.isDark);let s=`:root {
`;i.forEach(c=>{s+=`  ${c.name}: ${c.value};
`}),s+=`}
`,a.length>0&&(s+=`[data-theme="dark"] {
`,a.forEach(c=>{s+=`  ${c.name}: ${c.value};
`}),s+=`}
`);const o=document.createElement("style");o.id="runtime-theme-vars",o.textContent=s,document.head.appendChild(o),n.setAttribute("data-theme",e?"dark":"light")}let fA=null;function txe(){return fA||(fA=exe()),fA}function WL(t){return txe()(t)}const wK=300*1e3,SK=100;class EK{cache=new Map;ttl;maxEntries;constructor(e={}){this.ttl=e.ttl||wK,this.maxEntries=e.maxEntries||SK}static createKey(e){if(!e)return"";try{if(typeof e=="object"&&"source"in e&&"name"in e){const n=e;return`prop:${n.source}:${n.name}:${n.path||""}`}return typeof e=="object"&&"type"in e&&"config"in e?`data:${JSON.stringify(e)}`:""}catch{return""}}get(e){const n=this.cache.get(e);if(!n)return;const r=Date.now();if(r-n.createdAt>n.ttl){this.cache.delete(e);return}return n.lastAccessedAt=r,n.data}set(e,n,r){this.cache.size>=this.maxEntries&&this.evictLRU();const i=Date.now();this.cache.set(e,{data:n,createdAt:i,lastAccessedAt:i,ttl:r||this.ttl})}invalidate(e){this.cache.delete(e)}invalidateMatching(e){const n=typeof e=="string"?new RegExp(e):e;for(const r of this.cache.keys())n.test(r)&&this.cache.delete(r)}clear(){this.cache.clear()}getStats(){return{size:this.cache.size,maxEntries:this.maxEntries,ttl:this.ttl}}evictLRU(){let e=null,n=1/0;for(const[r,i]of this.cache.entries())i.lastAccessedAt<n&&(n=i.lastAccessedAt,e=r);e&&this.cache.delete(e)}}const xC=new EK({ttl:wK,maxEntries:SK}),pA=EK.createKey;async function nxe(t){const n=t.config.data;if(n&&Array.isArray(n))return n;throw new Error("Static data is not an array or is missing")}async function rxe(t,e,n,r){const i=t.config;if(!i.baseUrl||!i.endpoint)throw new Error("API configuration is incomplete");if(i.baseUrl==="MOCK_DATA")try{const{apiConfig:f}=await Lt(async()=>{const{apiConfig:g}=await Promise.resolve().then(()=>wX);return{apiConfig:g}},void 0),m=f.MOCK_DATA;if(m){const g=await m(i.endpoint||"/data",i.params),v=i.dataMapping?.resultPath?g[i.dataMapping.resultPath]:g;return Array.isArray(v)?v:[]}else throw new Error("Mock API function not found")}catch(f){if(n.length>0)return n;throw f}let a=i.baseUrl||"";switch(i.baseUrl){case"JSONPLACEHOLDER":a="https://jsonplaceholder.typicode.com";break;case"DUMMYJSON":a="https://dummyjson.com";break;case"CUSTOM":a=i.customUrl||"";break}const s=`${a}${i.endpoint}`,o=await fetch(s,{method:i.method||"GET",headers:{...i.headers,"Content-Type":"application/json"},body:i.method!=="GET"?JSON.stringify(i.params):void 0,signal:r});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const c=await o.json(),u=i.dataMapping?.resultPath?c[i.dataMapping.resultPath]:c;return Array.isArray(u)?u:[]}function RI({dataBinding:t,componentName:e,fallbackData:n=[],datatableId:r,elementId:i}){const a=Fm(ge=>r?ge.datatableStates.get(r):void 0),s=Fm(ge=>ge.addConsumer),o=Fm(ge=>ge.removeConsumer),c=Fm(ge=>ge.loadDataTable),u=T.useMemo(()=>typeof window>"u"?!1:window.parent!==window,[]),h=DI(),f=WL(ge=>ge.dataTables),m=u?f:h,g=vT(),v=WL(ge=>ge.apiEndpoints),x=u?v:g,_=vr(ge=>ge.executeApiEndpoint);T.useEffect(()=>{if(r&&i)return s(r,i),(!a||a.status==="idle")&&c(r),()=>{o(r,i)}},[r,i,s,o,c,a]);const[w,S]=T.useState(null),[E,A]=T.useState(""),N=T.useMemo(()=>{if(!t)return"";try{return JSON.stringify(t)}catch{return String(t)}},[t]),P=T.useMemo(()=>t,[N]),R=P&&"source"in P&&"name"in P&&!("type"in P),D=T.useMemo(()=>R&&P.refreshMode||"manual",[R,P]),k=T.useMemo(()=>R&&P.refreshInterval||5e3,[R,P]),L=T.useMemo(()=>{if(R){const ge=P;if(ge.source==="dataTable"&&ge.name){const be=m.find(oe=>oe.name===ge.name);if(be){const oe=be.runtimeData&&be.runtimeData.length>0,Le=be.useMockData?be.mockData:oe?be.runtimeData:be.mockData,Ve=(be.schema||[]).map(Ze=>({key:Ze.key,type:Ze.type,label:Ze.label}));return{data:Le,schema:Ve}}}}return null},[R,N,m,P,u]),$=L?.data||null,B=L?.schema,[q,U]=T.useState(null),[J,O]=T.useState(!1),[z,V]=T.useState(null),[H,ee]=T.useState(0);T.useEffect(()=>{if(!R)return;const ge=P;if(ge.source!=="api"||!ge.name)return;const be=x.find(Ve=>Ve.name===ge.name);if(!be){V(`API Endpoint '${ge.name}'   `);return}const oe=pA(P);if(H===0&&oe){const Ve=xC.get(oe);if(Ve){U(Ve),O(!1),V(null);return}}O(!0),V(null),(async()=>{try{let Ve;if(u){const xe=`${be.baseUrl}${be.path}`,ht=`/api/proxy?url=${encodeURIComponent(xe)}`,Fe=await fetch(ht,{method:be.method||"GET",headers:be.headers||{}});if(!Fe.ok)throw new Error(`HTTP error! status: ${Fe.status}`);Ve=await Fe.json()}else Ve=await _(be.id);let Ze=[];if(Array.isArray(Ve))Ze=Ve;else if(Ve&&typeof Ve=="object"){const xe=Ve;Array.isArray(xe.results)?Ze=xe.results:Array.isArray(xe.data)?Ze=xe.data:Array.isArray(xe.items)?Ze=xe.items:Ze=[xe]}oe&&xC.set(oe,Ze),U(Ze),O(!1)}catch(Ve){console.error("API Endpoint data load failed:",Ve),V(Ve.message||"  "),O(!1)}})()},[R,N,x,_,u,H,P]);const Y=iq({async load({signal:ge}){if(R)return{items:[]};if(r)return{items:[]};if(!t||t.type!=="collection")return{items:[]};try{let be=[];if(t.source==="static")be=await nxe(t);else if(t.source==="api")be=await rxe(t,e,n,ge);else throw t.source==="supabase"?new Error("Supabase data binding not yet implemented"):new Error(`Unknown data source: ${t.source}`);return{items:be}}catch(be){if(be.name==="AbortError")return{items:[]};throw be}},getKey:ge=>String(ge.id||Math.random())}),Z=T.useCallback(ge=>{S(ge)},[]),K=T.useMemo(()=>{let ge;$&&$.length>0?ge=$:q&&q.length>0?ge=q:r&&a?ge=a.data:ge=Y.items;let be=[...ge];if(E.trim()){const oe=E.toLowerCase();be=be.filter(Le=>Object.values(Le).some(Ve=>String(Ve).toLowerCase().includes(oe)))}return w&&be.sort((oe,Le)=>{const Ve=oe[w.column],Ze=Le[w.column];let xe=0;return Ve<Ze?xe=-1:Ve>Ze&&(xe=1),w.direction==="descending"?-xe:xe}),be},[Y.items,E,w,r,a,$,q]),X=void 0,ne=!1,G=T.useCallback(()=>{if(r)c(r);else if(R){const ge=P;if(ge.source==="api"&&ge.name){const be=pA(P);be&&xC.invalidate(be),ee(oe=>oe+1)}}else Y.reload()},[r,c,Y,R,P]);T.useEffect(()=>{if(R&&P.source==="api"&&D==="interval"&&k>0){const be=setInterval(()=>{G()},k);return()=>{clearInterval(be)}}},[D,k,R,P,G,e]);const te=R&&P.source==="api",pe=R&&P.source==="dataTable"&&m.length===0,ye=R?te?J:pe:r?a?.status==="loading":Y.isLoading,me=R?te?z:$===null&&P&&!pe?"DataTable   ":null:r?a?.error||null:Y.error?Y.error.message:null,fe=T.useCallback(()=>{const ge=pA(P);ge&&xC.invalidate(ge)},[P]);return{data:K,loading:ye,error:me,reload:G,clearCache:fe,schema:B,sort:Z,filterText:E,setFilterText:A,loadMore:X,hasMore:ne}}const Nd=T.createContext(!1);function ixe(){return T.useContext(Nd)}const axe=fn({base:"react-aria-ToggleButtonGroup",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"default",size:"sm"}});function Ll({indicator:t=!1,variant:e="default",size:n="sm",dataBinding:r,columnMapping:i,children:a,...s}){const{data:o,loading:c,error:u}=RI({dataBinding:r,componentName:"ToggleButtonGroup",fallbackData:[{id:1,name:"Button 1",value:"button-1"},{id:2,name:"Button 2",value:"button-2"}]}),h=r&&"source"in r&&"name"in r&&!("type"in r),f=!h&&r&&"type"in r&&r.type==="collection"||h,m=ah(s.className,g=>axe({variant:e,size:n,className:g}));if(f&&i)return console.log(" ToggleButtonGroup: columnMapping  -  ToggleButton ",{columnMapping:i,hasChildren:!!a,dataCount:o.length}),c?l.jsx(hf,{...s,"data-indicator":t?"true":"false","data-togglebutton-variant":e,"data-togglebutton-size":n,className:m,isDisabled:!0,children:l.jsx(Nd.Provider,{value:t,children:l.jsx(Iv,{className:"react-aria-ToggleButton",children:"  ..."})})}):u?l.jsx(hf,{...s,"data-indicator":t?"true":"false","data-togglebutton-variant":e,"data-togglebutton-size":n,className:m,isDisabled:!0,children:l.jsx(Nd.Provider,{value:t,children:l.jsx(Iv,{className:"react-aria-ToggleButton",children:" "})})}):o.length>0?(console.log(" ToggleButtonGroup with columnMapping - using children template"),l.jsx(hf,{...s,"data-indicator":t?"true":"false","data-togglebutton-variant":e,"data-togglebutton-size":n,className:m,children:l.jsx(Nd.Provider,{value:t,children:a})})):l.jsx(hf,{...s,"data-indicator":t?"true":"false","data-togglebutton-variant":e,"data-togglebutton-size":n,className:m,children:l.jsx(Nd.Provider,{value:t,children:a})});if(f){if(c)return l.jsx(hf,{...s,"data-indicator":t?"true":"false","data-togglebutton-variant":e,"data-togglebutton-size":n,className:m,isDisabled:!0,children:l.jsx(Nd.Provider,{value:t,children:l.jsx(Iv,{className:"react-aria-ToggleButton",children:"  ..."})})});if(u)return l.jsx(hf,{...s,"data-indicator":t?"true":"false","data-togglebutton-variant":e,"data-togglebutton-size":n,className:m,isDisabled:!0,children:l.jsx(Nd.Provider,{value:t,children:l.jsx(Iv,{className:"react-aria-ToggleButton",children:" "})})});if(o.length>0){const g=o.map((v,x)=>({id:String(v.id||v.value||x),label:String(v.name||v.title||v.label||`Button ${x+1}`),isDisabled:!!v.isDisabled}));return console.log(" ToggleButtonGroup Dynamic Collection - items:",g),l.jsx(hf,{...s,"data-indicator":t?"true":"false","data-togglebutton-variant":e,"data-togglebutton-size":n,className:m,children:l.jsx(Nd.Provider,{value:t,children:g.map(v=>l.jsx(Iv,{id:v.id,isDisabled:v.isDisabled,className:"react-aria-ToggleButton",children:v.label},v.id))})})}}return l.jsx(hf,{...s,"data-indicator":t?"true":"false","data-togglebutton-variant":e,"data-togglebutton-size":n,className:m,children:l.jsx(Nd.Provider,{value:t,children:a})})}const sxe=fn({base:"react-aria-ToggleButton",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"default",size:"sm"}});function In({variant:t="default",size:e="sm",children:n,...r}){const i=ixe(),a=ah(r.className,s=>sxe({variant:t,size:e,className:s}));return l.jsxs(Iv,{...r,className:a,children:[i&&l.jsx(Y0e,{}),n]})}fn({base:"react-aria-Group",variants:{isDisabled:{true:"disabled"},isInvalid:{true:"invalid"},isReadOnly:{true:"read-only"}}});function CK({handleAddElement:t,selectedElementId:e}){return l.jsx(xK,{handleAddElement:t,selectedElementId:e})}const oxe=.02,lxe=1;function cxe(){const t=B_(),{vortexRef:e,effectType:n,setEffectType:r}=bg(),i=T.useRef(null),a=T.useCallback(()=>{r(g=>g==="sand"?"curl":g==="curl"?"matrix":g==="matrix"?"code":"sand")},[r]),[s,o]=T.useState(()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});T.useEffect(()=>{document.documentElement.setAttribute("data-theme",s?"dark":"light"),localStorage.setItem("theme",s?"dark":"light")},[s]);const c=T.useCallback(g=>{o(g)},[]),u=T.useCallback((g,v)=>{const x=g/window.innerWidth*2-1,_=-(v/window.innerHeight*2-1),w=200,S=60*Math.PI/180,E=Math.tan(S/2)*w,A=E*(window.innerWidth/window.innerHeight);return{x:x*A,y:_*E}},[]),h=T.useCallback(g=>{if(g.target.closest("button"))return;const{x:v,y:x}=u(g.clientX,g.clientY);e.current={active:!0,x:v,y:x,strength:.1,radius:20,height:0},i.current=setInterval(()=>{e.current.active&&(e.current.strength=Math.min(e.current.strength+oxe,lxe),e.current.radius=20+e.current.strength*160,e.current.height=e.current.strength*250)},16)},[e,u]),f=T.useCallback(g=>{if(g.target.closest("button")||!e.current.active)return;const{x:v,y:x}=u(g.clientX,g.clientY);e.current.x=v,e.current.y=x},[e,u]),m=T.useCallback(()=>{i.current&&(clearInterval(i.current),i.current=null),e.current.active=!1},[e]);return l.jsxs("main",{className:"main",onMouseDown:h,onMouseMove:f,onMouseUp:m,onMouseLeave:m,children:[l.jsx("section",{className:"welcome-wrapper",children:l.jsxs("div",{className:"welcome-container",children:[l.jsx("div",{className:"logo-container",children:l.jsx("div",{className:"logo",children:"ICONIC FUTURE"})}),l.jsx("div",{className:"header-container",children:l.jsxs("div",{className:"landing-header",children:[l.jsx("h1",{className:"landing-header-title",children:"COMPOSITION"}),l.jsx("p",{className:"landing-header-subtitle",children:"Bespoke by design, cutting-edge platform."})]})}),l.jsx("div",{className:"landing-cta",children:l.jsx(Eu,{className:"react-aria-Button",variant:"primary",onClick:()=>t("/signin"),children:"Start App"})}),l.jsxs("div",{className:"landing-features",children:[l.jsx(Eu,{size:"sm",variant:"ghost",children:l.jsx(oy,{})}),l.jsx(Eu,{size:"sm",variant:"ghost",children:l.jsx(sae,{})}),l.jsx(Eu,{size:"sm",variant:"ghost",children:l.jsx(Ane,{})}),l.jsx(Eu,{size:"sm",variant:"ghost",children:l.jsx(ba,{})}),l.jsx(Eu,{size:"sm",variant:"ghost",children:l.jsx(dne,{})}),l.jsx(Eu,{size:"sm",variant:"ghost",children:l.jsx(Mr,{})}),l.jsx(Eu,{size:"sm",variant:"ghost",children:l.jsx(UB,{})}),l.jsx(Eu,{size:"sm",variant:"ghost",children:l.jsx(r_,{})}),l.jsx(Eu,{size:"sm",variant:"ghost",children:l.jsx($y,{})})]})]})}),l.jsxs("footer",{className:"footer",children:[l.jsx(In,{id:"effect",className:"toggle-button",isSelected:n==="matrix"||n==="code",onChange:a,children:n.toUpperCase()}),l.jsx(In,{id:"day",className:"toggle-button",isSelected:s,onChange:c,children:s?"DARK":"LIGHT"})]})]})}var Cd={},_C={};const uxe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let yT=class extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}},TK=class extends yT{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},HD=class extends yT{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},GD=class extends yT{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var J3;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(J3||(J3={}));class dxe{constructor(e,{headers:n={},customFetch:r,region:i=J3.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=uxe(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Vt(this,arguments,void 0,function*(n,r={}){var i;let a,s;try{const{headers:o,method:c,body:u,signal:h,timeout:f}=r;let m={},{region:g}=r;g||(g=this.region);const v=new URL(`${this.url}/${n}`);g&&g!=="any"&&(m["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let x;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",x=u):typeof u=="string"?(m["Content-Type"]="text/plain",x=u):typeof FormData<"u"&&u instanceof FormData?x=u:(m["Content-Type"]="application/json",x=JSON.stringify(u)):x=u;let _=h;f&&(s=new AbortController,a=setTimeout(()=>s.abort(),f),h?(_=s.signal,h.addEventListener("abort",()=>s.abort())):_=s.signal);const w=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),o),body:x,signal:_}).catch(N=>{throw new TK(N)}),S=w.headers.get("x-relay-error");if(S&&S==="true")throw new HD(w);if(!w.ok)throw new GD(w);let E=((i=w.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),A;return E==="application/json"?A=yield w.json():E==="application/octet-stream"||E==="application/pdf"?A=yield w.blob():E==="text/event-stream"?A=w:E==="multipart/form-data"?A=yield w.formData():A=yield w.text(),{data:A,error:null,response:w}}catch(o){return{data:null,error:o,response:o instanceof GD||o instanceof HD?o.context:void 0}}finally{a&&clearTimeout(a)}})}}const hxe=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return J3},FunctionsClient:dxe,FunctionsError:yT,FunctionsFetchError:TK,FunctionsHttpError:GD,FunctionsRelayError:HD},Symbol.toStringTag,{value:"Module"})),MK=L_(hxe);var ps={};const qy=L_(Dpe);var wC={},SC={},EC={},CC={},TC={},MC={},qL;function AK(){if(qL)return MC;qL=1,Object.defineProperty(MC,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return MC.default=t,MC}var KL;function PK(){if(KL)return TC;KL=1,Object.defineProperty(TC,"__esModule",{value:!0});const e=qy.__importDefault(AK());let n=class{constructor(i){var a,s;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(s=i.isMaybeSingle)!==null&&s!==void 0?s:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let o=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,h,f,m;let g=null,v=null,x=null,_=c.status,w=c.statusText;if(c.ok){if(this.method!=="HEAD"){const N=await c.text();N===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?v=N:v=JSON.parse(N))}const E=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),A=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");E&&A&&A.length>1&&(x=parseInt(A[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(g={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,x=null,_=406,w="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const E=await c.text();try{g=JSON.parse(E),Array.isArray(g)&&c.status===404&&(v=[],g=null,_=200,w="OK")}catch{c.status===404&&E===""?(_=204,w="No Content"):g={message:E}}if(g&&this.isMaybeSingle&&(!((m=g?.details)===null||m===void 0)&&m.includes("0 rows"))&&(g=null,_=200,w="OK"),g&&this.shouldThrowOnError)throw new e.default(g)}return{error:g,data:v,count:x,status:_,statusText:w}});return this.shouldThrowOnError||(o=o.catch(c=>{var u,h,f,m,g,v;let x="";const _=c?.cause;if(_){const w=(u=_?.message)!==null&&u!==void 0?u:"",S=(h=_?.code)!==null&&h!==void 0?h:"";x=`${(f=c?.name)!==null&&f!==void 0?f:"FetchError"}: ${c?.message}`,x+=`

Caused by: ${(m=_?.name)!==null&&m!==void 0?m:"Error"}: ${w}`,S&&(x+=` (${S})`),_?.stack&&(x+=`
${_.stack}`)}else x=(g=c?.stack)!==null&&g!==void 0?g:"";return{error:{message:`${(v=c?.name)!==null&&v!==void 0?v:"FetchError"}: ${c?.message}`,details:x,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(i,a)}returns(){return this}overrideTypes(){return this}};return TC.default=n,TC}var XL;function NK(){if(XL)return CC;XL=1,Object.defineProperty(CC,"__esModule",{value:!0});const e=qy.__importDefault(PK());let n=class extends e.default{select(i){let a=!1;const s=(i??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:s,foreignTable:o,referencedTable:c=o}={}){const u=c?`${c}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${i}.${a?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:s=a}={}){const o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${i}`),this}range(i,a,{foreignTable:s,referencedTable:o=s}={}){const c=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(u,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:s=!1,buffers:o=!1,wal:c=!1,format:u="text"}={}){var h;const f=[i?"analyze":null,a?"verbose":null,s?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};return CC.default=n,CC}var YL;function II(){if(YL)return EC;YL=1,Object.defineProperty(EC,"__esModule",{value:!0});const e=qy.__importDefault(NK()),n=new RegExp("[,()]");let r=class extends e.default{eq(a,s){return this.url.searchParams.append(a,`eq.${s}`),this}neq(a,s){return this.url.searchParams.append(a,`neq.${s}`),this}gt(a,s){return this.url.searchParams.append(a,`gt.${s}`),this}gte(a,s){return this.url.searchParams.append(a,`gte.${s}`),this}lt(a,s){return this.url.searchParams.append(a,`lt.${s}`),this}lte(a,s){return this.url.searchParams.append(a,`lte.${s}`),this}like(a,s){return this.url.searchParams.append(a,`like.${s}`),this}likeAllOf(a,s){return this.url.searchParams.append(a,`like(all).{${s.join(",")}}`),this}likeAnyOf(a,s){return this.url.searchParams.append(a,`like(any).{${s.join(",")}}`),this}ilike(a,s){return this.url.searchParams.append(a,`ilike.${s}`),this}ilikeAllOf(a,s){return this.url.searchParams.append(a,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(a,s){return this.url.searchParams.append(a,`ilike(any).{${s.join(",")}}`),this}regexMatch(a,s){return this.url.searchParams.append(a,`match.${s}`),this}regexIMatch(a,s){return this.url.searchParams.append(a,`imatch.${s}`),this}is(a,s){return this.url.searchParams.append(a,`is.${s}`),this}isDistinct(a,s){return this.url.searchParams.append(a,`isdistinct.${s}`),this}in(a,s){const o=Array.from(new Set(s)).map(c=>typeof c=="string"&&n.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(a,`in.(${o})`),this}contains(a,s){return typeof s=="string"?this.url.searchParams.append(a,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(a,`cs.{${s.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(s)}`),this}containedBy(a,s){return typeof s=="string"?this.url.searchParams.append(a,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(a,`cd.{${s.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(s)}`),this}rangeGt(a,s){return this.url.searchParams.append(a,`sr.${s}`),this}rangeGte(a,s){return this.url.searchParams.append(a,`nxl.${s}`),this}rangeLt(a,s){return this.url.searchParams.append(a,`sl.${s}`),this}rangeLte(a,s){return this.url.searchParams.append(a,`nxr.${s}`),this}rangeAdjacent(a,s){return this.url.searchParams.append(a,`adj.${s}`),this}overlaps(a,s){return typeof s=="string"?this.url.searchParams.append(a,`ov.${s}`):this.url.searchParams.append(a,`ov.{${s.join(",")}}`),this}textSearch(a,s,{config:o,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const h=o===void 0?"":`(${o})`;return this.url.searchParams.append(a,`${u}fts${h}.${s}`),this}match(a){return Object.entries(a).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(a,s,o){return this.url.searchParams.append(a,`not.${s}.${o}`),this}or(a,{foreignTable:s,referencedTable:o=s}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${a})`),this}filter(a,s,o){return this.url.searchParams.append(a,`${s}.${o}`),this}};return EC.default=r,EC}var ZL;function DK(){if(ZL)return SC;ZL=1,Object.defineProperty(SC,"__esModule",{value:!0});const e=qy.__importDefault(II());let n=class{constructor(i,{headers:a={},schema:s,fetch:o}){this.url=i,this.headers=new Headers(a),this.schema=s,this.fetch=o}select(i,a){const{head:s=!1,count:o}=a??{},c=s?"HEAD":"GET";let u=!1;const h=(i??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",h),o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:s=!0}={}){var o;const c="POST";if(a&&this.headers.append("Prefer",`count=${a}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(u.length>0){const h=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:s=!1,count:o,defaultToNull:c=!0}={}){var u;const h="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(f.length>0){const m=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:a}={}){var s;const o="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:i}={}){var a;const s="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};return SC.default=n,SC}var JL;function fxe(){if(JL)return wC;JL=1,Object.defineProperty(wC,"__esModule",{value:!0});const t=qy,e=t.__importDefault(DK()),n=t.__importDefault(II());let r=class kK{constructor(a,{headers:s={},schema:o,fetch:c}={}){this.url=a,this.headers=new Headers(s),this.schemaName=o,this.fetch=c}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const s=new URL(`${this.url}/${a}`);return new e.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new kK(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,s={},{head:o=!1,get:c=!1,count:u}={}){var h;let f;const m=new URL(`${this.url}/rpc/${a}`);let g;o||c?(f=o?"HEAD":"GET",Object.entries(s).filter(([x,_])=>_!==void 0).map(([x,_])=>[x,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([x,_])=>{m.searchParams.append(x,_)})):(f="POST",g=s);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new n.default({method:f,url:m,headers:v,schema:this.schemaName,body:g,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};return wC.default=r,wC}var QL;function RK(){if(QL)return ps;QL=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.PostgrestError=ps.PostgrestBuilder=ps.PostgrestTransformBuilder=ps.PostgrestFilterBuilder=ps.PostgrestQueryBuilder=ps.PostgrestClient=void 0;const t=qy,e=t.__importDefault(fxe());ps.PostgrestClient=e.default;const n=t.__importDefault(DK());ps.PostgrestQueryBuilder=n.default;const r=t.__importDefault(II());ps.PostgrestFilterBuilder=r.default;const i=t.__importDefault(NK());ps.PostgrestTransformBuilder=i.default;const a=t.__importDefault(PK());ps.PostgrestBuilder=a.default;const s=t.__importDefault(AK());return ps.PostgrestError=s.default,ps.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:s.default},ps}class IK{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const pxe="2.87.1",mxe=`realtime-js/${pxe}`,$K="1.0.0",gxe="2.0.0",e6=$K,WD=1e4,vxe=1e3,yxe=100;var Nm;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Nm||(Nm={}));var ia;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ia||(ia={}));var Ac;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ac||(Ac={}));var qD;(function(t){t.websocket="websocket"})(qD||(qD={}));var Dm;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Dm||(Dm={}));class bxe{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},s=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(e,n,r){var i,a;const s=e.topic,o=(i=e.ref)!==null&&i!==void 0?i:"",c=(a=e.join_ref)!==null&&a!==void 0?a:"",u=e.payload.event,h=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},f=Object.keys(h).length===0?"":JSON.stringify(h);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+s.length+u.length+f.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let v=new DataView(g),x=0;v.setUint8(x++,this.KINDS.userBroadcastPush),v.setUint8(x++,c.length),v.setUint8(x++,o.length),v.setUint8(x++,s.length),v.setUint8(x++,u.length),v.setUint8(x++,f.length),v.setUint8(x++,n),Array.from(c,w=>v.setUint8(x++,w.charCodeAt(0))),Array.from(o,w=>v.setUint8(x++,w.charCodeAt(0))),Array.from(s,w=>v.setUint8(x++,w.charCodeAt(0))),Array.from(u,w=>v.setUint8(x++,w.charCodeAt(0))),Array.from(f,w=>v.setUint8(x++,w.charCodeAt(0)));var _=new Uint8Array(g.byteLength+r.byteLength);return _.set(new Uint8Array(g),0),_.set(new Uint8Array(r),g.byteLength),_.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,a,s,o,c]=r;return n({join_ref:i,ref:a,topic:s,event:o,payload:c})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),a=n.getUint8(2),s=n.getUint8(3),o=n.getUint8(4);let c=this.HEADER_LENGTH+4;const u=r.decode(e.slice(c,c+i));c=c+i;const h=r.decode(e.slice(c,c+a));c=c+a;const f=r.decode(e.slice(c,c+s));c=c+s;const m=e.slice(c,e.byteLength),g=o===this.JSON_ENCODING?JSON.parse(r.decode(m)):m,v={type:this.BROADCAST_EVENT,event:h,payload:g};return s>0&&(v.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}let jK=class{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ti;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ti||(ti={}));const t6=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,s)=>(a[s]=xxe(s,t,e,i),a),{}):{}},xxe=(t,e,n,r)=>{const i=e.find(o=>o.name===t),a=i?.type,s=n[t];return a&&!r.includes(a)?LK(a,s):KD(s)},LK=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Exe(e,n)}switch(t){case ti.bool:return _xe(e);case ti.float4:case ti.float8:case ti.int2:case ti.int4:case ti.int8:case ti.numeric:case ti.oid:return wxe(e);case ti.json:case ti.jsonb:return Sxe(e);case ti.timestamp:return Cxe(e);case ti.abstime:case ti.date:case ti.daterange:case ti.int4range:case ti.int8range:case ti.money:case ti.reltime:case ti.text:case ti.time:case ti.timestamptz:case ti.timetz:case ti.tsrange:case ti.tstzrange:return KD(e);default:return KD(e)}},KD=t=>t,_xe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},wxe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Sxe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Exe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const s=t.slice(1,n);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(o=>LK(e,o))}return t},Cxe=t=>typeof t=="string"?t.replace(" ","T"):t,OK=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class mA{constructor(e,n,r={},i=WD){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var XD;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(XD||(XD={}));let FK=class h3{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=h3.syncState(this.state,i,a,s),this.pendingDiffs.forEach(c=>{this.state=h3.syncDiff(this.state,c,a,s)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=h3.syncDiff(this.state,i,a,s),o())}),this.onJoin((i,a,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:s})}),this.onLeave((i,a,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const a=this.cloneDeep(e),s=this.transformState(n),o={},c={};return this.map(a,(u,h)=>{s[u]||(c[u]=h)}),this.map(s,(u,h)=>{const f=a[u];if(f){const m=h.map(_=>_.presence_ref),g=f.map(_=>_.presence_ref),v=h.filter(_=>g.indexOf(_.presence_ref)<0),x=f.filter(_=>m.indexOf(_.presence_ref)<0);v.length>0&&(o[u]=v),x.length>0&&(c[u]=x)}else o[u]=h}),this.syncDiff(a,{joins:o,leaves:c},r,i)}static syncDiff(e,n,r,i){const{joins:a,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(o,c)=>{var u;const h=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(c),h.length>0){const f=e[o].map(g=>g.presence_ref),m=h.filter(g=>f.indexOf(g.presence_ref)<0);e[o].unshift(...m)}r(o,h,c)}),this.map(s,(o,c)=>{let u=e[o];if(!u)return;const h=c.map(f=>f.presence_ref);u=u.filter(f=>h.indexOf(f.presence_ref)<0),e[o]=u,i(o,u,c),u.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var YD;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(YD||(YD={}));var ey;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ey||(ey={}));var Nu;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Nu||(Nu={}));const Txe=ia;let BK=class E1{constructor(e,n={config:{}},r){var i,a;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ia.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new mA(this,Ac.join,this.params,this.timeout),this.rejoinTimer=new jK(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ia.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ia.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ia.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ia.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ia.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ac.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new FK(this),this.broadcastEndpointURL=OK(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ia.closed){const{config:{broadcast:s,presence:o,private:c}}=this.params,u=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[ey.PRESENCE]&&this.bindings[ey.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,f={},m={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:h}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(g=>e?.(Nu.CHANNEL_ERROR,g)),this._onClose(()=>e?.(Nu.CLOSED)),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){e?.(Nu.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,_=(v=x?.length)!==null&&v!==void 0?v:0,w=[];for(let S=0;S<_;S++){const E=x[S],{filter:{event:A,schema:N,table:P,filter:R}}=E,D=g&&g[S];if(D&&D.event===A&&E1.isFilterValueEqual(D.schema,N)&&E1.isFilterValueEqual(D.table,P)&&E1.isFilterValueEqual(D.filter,R))w.push(Object.assign(Object.assign({},E),{id:D.id}));else{this.unsubscribe(),this.state=ia.errored,e?.(Nu.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(Nu.SUBSCRIBED);return}}).receive("error",g=>{this.state=ia.errored,e?.(Nu.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e?.(Nu.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ia.joined&&e===ey.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const u=await o.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:s}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,o,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(s=this.params)===null||s===void 0?void 0:s.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ia.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ac.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new mA(this,Ac.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ia.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),s}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new mA(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>yxe){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,a;const s=e.toLocaleLowerCase(),{close:o,error:c,leave:u,join:h}=Ac;if(r&&[o,c,u,h].indexOf(s)>=0&&r!==this._joinRef())return;let m=this._onMessage(s,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var v,x,_;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((_=(x=g.filter)===null||x===void 0?void 0:x.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===s}).map(g=>g.callback(m,r)):(a=this.bindings[s])===null||a===void 0||a.filter(g=>{var v,x,_,w,S,E;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in g){const A=g.id,N=(v=g.filter)===null||v===void 0?void 0:v.event;return A&&((x=n.ids)===null||x===void 0?void 0:x.includes(A))&&(N==="*"||N?.toLocaleLowerCase()===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const A=(S=(w=g?.filter)===null||w===void 0?void 0:w.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return A==="*"||A===((E=n?.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===s}).map(g=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:x,table:_,commit_timestamp:w,type:S,errors:E}=v;m=Object.assign(Object.assign({},{schema:x,table:_,commit_timestamp:w,eventType:S,new:{},old:{},errors:E}),this._getPayloadRecords(v))}g.callback(m,r)})}_isClosed(){return this.state===ia.closed}_isJoined(){return this.state===ia.joined}_isJoining(){return this.state===ia.joining}_isLeaving(){return this.state===ia.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&E1.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ac.close,{},e)}_onError(e){this._on(Ac.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ia.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=t6(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=t6(e.columns,e.old_record)),n}};const gA=()=>{},AC={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Mxe=[1e3,2e3,5e3,1e4],Axe=1e4,Pxe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let Nxe=class{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=WD,this.transport=null,this.heartbeatIntervalMs=AC.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=gA,this.ref=0,this.reconnectTimer=null,this.vsn=e6,this.logger=gA,this.conn=null,this.sendBuffer=[],this.serializer=new bxe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${qD.websocket}`,this.httpEndpoint=OK(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=IK.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Nm.connecting:return Dm.Connecting;case Nm.open:return Dm.Open;case Nm.closing:return Dm.Closing;default:return Dm.Closed}}isConnected(){return this.connectionState()===Dm.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new BK(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:i,ref:a}=e,s=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(vxe,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},AC.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:s}=n,o=s?`(${s})`:"",c=a.status||"";this.log("receive",`${c} ${r} ${i} ${o}`.trim(),a),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,a,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Nm.open||this.conn.readyState===Nm.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ac.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Pxe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const a={access_token:n,version:mxe};n&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(Ac.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new jK(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},AC.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,a,s,o,c,u,h,f,m,g;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:WD,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:AC.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(s=e?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(o=e?.heartbeatCallback)!==null&&o!==void 0?o:gA,this.vsn=(c=e?.vsn)!==null&&c!==void 0?c:e6,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e?.reconnectAfterMs)!==null&&u!==void 0?u:(v=>Mxe[v-1]||Axe),this.vsn){case $K:this.encode=(h=e?.encode)!==null&&h!==void 0?h:((v,x)=>x(JSON.stringify(v))),this.decode=(f=e?.decode)!==null&&f!==void 0?f:((v,x)=>x(JSON.parse(v)));break;case gxe:this.encode=(m=e?.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(g=e?.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}};const Dxe=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:Txe,get REALTIME_LISTEN_TYPES(){return ey},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return YD},get REALTIME_PRESENCE_LISTEN_EVENTS(){return XD},get REALTIME_SUBSCRIBE_STATES(){return Nu},RealtimeChannel:BK,RealtimeClient:Nxe,RealtimePresence:FK,WebSocketFactory:IK},Symbol.toStringTag,{value:"Module"})),zK=L_(Dxe);class sw extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function vi(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class UK extends sw{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Q3 extends sw{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const $I=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),kxe=()=>Response,ZD=t=>{if(Array.isArray(t))return t.map(n=>ZD(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=ZD(r)}),e},Rxe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ixe=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),vA=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},$xe=(t,e,n)=>Vt(void 0,void 0,void 0,function*(){const r=yield kxe();t instanceof r&&!n?.noResolveJson?t.json().then(i=>{const a=t.status||500,s=i?.statusCode||a+"";e(new UK(vA(i),a,s))}).catch(i=>{e(new Q3(vA(i),i))}):e(new Q3(vA(t),t))}),jxe=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||!r?i:(Rxe(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function ow(t,e,n,r,i,a){return Vt(this,void 0,void 0,function*(){return new Promise((s,o)=>{t(n,jxe(e,r,i,a)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>$xe(c,o,r))})})}function b_(t,e,n,r){return Vt(this,void 0,void 0,function*(){return ow(t,"GET",e,n,r)})}function Tc(t,e,n,r,i){return Vt(this,void 0,void 0,function*(){return ow(t,"POST",e,r,i,n)})}function JD(t,e,n,r,i){return Vt(this,void 0,void 0,function*(){return ow(t,"PUT",e,r,i,n)})}function Lxe(t,e,n,r){return Vt(this,void 0,void 0,function*(){return ow(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function jI(t,e,n,r,i){return Vt(this,void 0,void 0,function*(){return ow(t,"DELETE",e,r,i,n)})}class Oxe{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return Vt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(vi(e))return{data:null,error:e};throw e}})}}var VK;class Fxe{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[VK]="BlobDownloadBuilder",this.promise=null}asStream(){return new Oxe(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Vt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(vi(e))return{data:null,error:e};throw e}})}}VK=Symbol.toStringTag;const Bxe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},n6={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class zxe{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=$I(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return Vt(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},n6),i);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",s.cacheControl),c&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(c))):(a=r,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!s.duplex&&(s.duplex="half")),i?.headers&&(o=Object.assign(Object.assign({},o),i.headers));const u=this._removeEmptyFolders(n),h=this._getFinalPath(u),f=yield(e=="PUT"?JD:Tc)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:o},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(vi(a))return{data:null,error:a};throw a}})}upload(e,n,r){return Vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return Vt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),s=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${s}`);o.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:n6.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const f=yield JD(this.fetch,o.toString(),c,{headers:h});return{data:{path:a,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(vi(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Vt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n?.upsert&&(i["x-upsert"]="true");const a=yield Tc(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+a.url),o=s.searchParams.get("token");if(!o)throw new sw("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:o},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vi(r))return{data:null,error:r};throw r}})}update(e,n,r){return Vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Vt(this,void 0,void 0,function*(){try{return{data:yield Tc(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vi(i))return{data:null,error:i};throw i}})}copy(e,n,r){return Vt(this,void 0,void 0,function*(){try{return{data:{path:(yield Tc(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vi(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return Vt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Tc(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vi(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return Vt(this,void 0,void 0,function*(){try{const i=yield Tc(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vi(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof n?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(n?.transform||{}),s=a?`?${a}`:"",o=this._getFinalPath(e),c=()=>b_(this.fetch,`${this.url}/${i}/${o}${s}`,{headers:this.headers,noResolveJson:!0});return new Fxe(c,this.shouldThrowOnError)}info(e){return Vt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield b_(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:ZD(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vi(r))return{data:null,error:r};throw r}})}exists(e){return Vt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Lxe(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vi(r)&&r instanceof Q3){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],a=n?.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const o=typeof n?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(n?.transform||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield jI(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vi(n))return{data:null,error:n};throw n}})}list(e,n,r){return Vt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Bxe),n),{prefix:e||""});return{data:yield Tc(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vi(i))return{data:null,error:i};throw i}})}listV2(e,n){return Vt(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Tc(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vi(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const HK="2.87.1",GK={"X-Client-Info":`storage-js/${HK}`};class Uxe{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const a=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},GK),n),this.fetch=$I(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Vt(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield b_(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vi(n))return{data:null,error:n};throw n}})}getBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield b_(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vi(n))return{data:null,error:n};throw n}})}createBucket(e){return Vt(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Tc(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vi(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return Vt(this,void 0,void 0,function*(){try{return{data:yield JD(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vi(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield Tc(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vi(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield jI(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vi(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var x_=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Vxe(t,e,n){const r=new URL(e,t);if(n)for(const[i,a]of Object.entries(n))a!==void 0&&r.searchParams.set(i,a);return r.toString()}async function Hxe(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Gxe(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:a,headers:s}){const o=Vxe(t.baseUrl,r,i),c=await Hxe(t.auth),u=await e(o,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...c,...s},body:a?JSON.stringify(a):void 0}),h=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),m=f&&h?JSON.parse(h):h;if(!u.ok){const g=f?m:void 0,v=g?.error;throw new x_(v?.message??`Request failed with status ${u.status}`,{status:u.status,icebergType:v?.type,icebergCode:v?.code,details:g})}return{status:u.status,headers:u.headers,data:m}}}}function PC(t){return t.join("")}var Wxe=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:PC(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${PC(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${PC(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${PC(t.namespace)}`}),!0}catch(e){if(e instanceof x_&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof x_&&n.status===409)return;throw n}}};function Sv(t){return t.join("")}var qxe=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Sv(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Sv(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Sv(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Sv(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Sv(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Sv(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof x_&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof x_&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},Kxe=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Gxe({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new Wxe(this.client,e),this.tableOps=new qxe(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class WK{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},GK),n),this.fetch=$I(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield Tc(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vi(n))return{data:null,error:n};throw n}})}listBuckets(e){return Vt(this,void 0,void 0,function*(){try{const n=new URLSearchParams;e?.limit!==void 0&&n.set("limit",e.limit.toString()),e?.offset!==void 0&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield b_(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vi(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield jI(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vi(n))return{data:null,error:n};throw n}})}from(e){if(!Ixe(e))throw new sw("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Kxe({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>Vt(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(a,s){const o=a[s];return typeof o!="function"?o:(...c)=>Vt(this,void 0,void 0,function*(){try{return{data:yield o.apply(a,c),error:null}}catch(u){if(r)throw u;return{data:null,error:u}}})}})}}const LI={"X-Client-Info":`storage-js/${HK}`,"Content-Type":"application/json"};class OI extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function So(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class f3 extends OI{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class qK extends OI{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var QD;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(QD||(QD={}));const bT=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Xxe=()=>Response,KK=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Yxe=t=>Array.from(new Float32Array(t)),Zxe=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},r6=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Jxe=(t,e,n)=>Vt(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const i=t.status||500,a=t;if(typeof a.json=="function")a.json().then(s=>{const o=s?.statusCode||s?.code||i+"";e(new f3(r6(s),i,o))}).catch(()=>{const s=i+"",o=a.statusText||`HTTP ${i} error`;e(new f3(o,i,s))});else{const s=i+"",o=a.statusText||`HTTP ${i} error`;e(new f3(o,i,s))}}else e(new qK(r6(t),t))}),Qxe=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return r?(KK(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function e1e(t,e,n,r,i,a){return Vt(this,void 0,void 0,function*(){return new Promise((s,o)=>{t(n,Qxe(e,r,i,a)).then(c=>{if(!c.ok)throw c;if(r?.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>s(c)).catch(c=>Jxe(c,o,r))})})}function el(t,e,n,r,i){return Vt(this,void 0,void 0,function*(){return e1e(t,"POST",e,r,i,n)})}class XK{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},LI),n),this.fetch=bT(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Vt(this,void 0,void 0,function*(){try{return{data:(yield el(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(So(n))return{data:null,error:n};throw n}})}getIndex(e,n){return Vt(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(So(r))return{data:null,error:r};throw r}})}listIndexes(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(So(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return Vt(this,void 0,void 0,function*(){try{return{data:(yield el(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(So(r))return{data:null,error:r};throw r}})}}class YK{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},LI),n),this.fetch=bT(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Vt(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield el(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(So(n))return{data:null,error:n};throw n}})}getVectors(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(So(n))return{data:null,error:n};throw n}})}listVectors(e){return Vt(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield el(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(So(n))return{data:null,error:n};throw n}})}queryVectors(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(So(n))return{data:null,error:n};throw n}})}deleteVectors(e){return Vt(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield el(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(So(n))return{data:null,error:n};throw n}})}}class ZK{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},LI),n),this.fetch=bT(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:(yield el(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(So(n))return{data:null,error:n};throw n}})}getBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(So(n))return{data:null,error:n};throw n}})}listBuckets(){return Vt(this,arguments,void 0,function*(e={}){try{return{data:yield el(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(So(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:(yield el(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(So(n))return{data:null,error:n};throw n}})}}class JK extends ZK{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new QK(this.url,this.headers,e,this.fetch)}createBucket(e){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Vt(this,void 0,void 0,function*(){return n.createBucket.call(this,e)})}getBucket(e){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Vt(this,void 0,void 0,function*(){return n.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Vt(this,arguments,void 0,function*(n={}){return e.listBuckets.call(this,n)})}deleteBucket(e){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Vt(this,void 0,void 0,function*(){return n.deleteBucket.call(this,e)})}}class QK extends XK{constructor(e,n,r,i){super(e,n,i),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Vt(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Vt(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Vt(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Vt(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new eX(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class eX extends YK{constructor(e,n,r,i,a){super(e,n,a),this.vectorBucketName=r,this.indexName=i}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Vt(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Vt(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Vt(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Vt(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Vt(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class t1e extends Uxe{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new zxe(this.url,this.headers,e,this.fetch)}get vectors(){return new JK(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new WK(this.url+"/iceberg",this.headers,this.fetch)}}const n1e=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:WK,StorageApiError:UK,StorageClient:t1e,StorageError:sw,StorageUnknownError:Q3,StorageVectorsApiError:f3,StorageVectorsClient:JK,StorageVectorsError:OI,get StorageVectorsErrorCode(){return QD},StorageVectorsUnknownError:qK,VectorBucketApi:ZK,VectorBucketScope:QK,VectorDataApi:YK,VectorIndexApi:XK,VectorIndexScope:eX,isPlainObject:KK,isStorageError:vi,isStorageVectorsError:So,normalizeToFloat32:Yxe,resolveFetch:bT,resolveResponse:Xxe,validateVectorDimension:Zxe},Symbol.toStringTag,{value:"Module"})),r1e=L_(n1e);var yA={},u1={},i6;function i1e(){return i6||(i6=1,Object.defineProperty(u1,"__esModule",{value:!0}),u1.version=void 0,u1.version="2.87.1"),u1}var a6;function a1e(){return a6||(a6=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=i1e();let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(yA)),yA}var bA={},s6;function s1e(){return s6||(s6=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=i=>i?(...a)=>i(...a):(...a)=>fetch(...a);t.resolveFetch=e;const n=()=>Headers;t.resolveHeadersConstructor=n;const r=(i,a,s)=>{const o=(0,t.resolveFetch)(s),c=(0,t.resolveHeadersConstructor)();return async(u,h)=>{var f;const m=(f=await a())!==null&&f!==void 0?f:i;let g=new c(h?.headers);return g.has("apikey")||g.set("apikey",i),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),o(u,Object.assign(Object.assign({},h),{headers:g}))}};t.fetchWithAuth=r})(bA)),bA}var Td={},o6;function o1e(){if(o6)return Td;o6=1,Object.defineProperty(Td,"__esModule",{value:!0}),Td.isBrowser=void 0,Td.uuid=t,Td.ensureTrailingSlash=e,Td.applySettingDefaults=r,Td.validateSupabaseUrl=i;function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var s=Math.random()*16|0,o=a=="x"?s:s&3|8;return o.toString(16)})}function e(a){return a.endsWith("/")?a:a+"/"}const n=()=>typeof window<"u";Td.isBrowser=n;function r(a,s){var o,c;const{db:u,auth:h,realtime:f,global:m}=a,{db:g,auth:v,realtime:x,global:_}=s,w={db:Object.assign(Object.assign({},g),u),auth:Object.assign(Object.assign({},v),h),realtime:Object.assign(Object.assign({},x),f),storage:{},global:Object.assign(Object.assign(Object.assign({},_),m),{headers:Object.assign(Object.assign({},(o=_?.headers)!==null&&o!==void 0?o:{}),(c=m?.headers)!==null&&c!==void 0?c:{})}),accessToken:async()=>""};return a.accessToken?w.accessToken=a.accessToken:delete w.accessToken,w}function i(a){const s=a?.trim();if(!s)throw new Error("supabaseUrl is required.");if(!s.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(e(s))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return Td}var d1={};const tX="2.87.1",$v=30*1e3,ek=3,xA=ek*$v,l1e="http://localhost:9999",c1e="supabase.auth.token",u1e={"X-Client-Info":`gotrue-js/${tX}`},tk="X-Supabase-Api-Version",nX={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},d1e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,h1e=600*1e3;let vy=class extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function Xt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let rX=class extends vy{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function iX(t){return Xt(t)&&t.name==="AuthApiError"}let _f=class extends vy{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}},oh=class extends vy{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}},vo=class extends oh{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function aX(t){return Xt(t)&&t.name==="AuthSessionMissingError"}let Em=class extends oh{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},C1=class extends oh{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},T1=class extends oh{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function sX(t){return Xt(t)&&t.name==="AuthImplicitGrantRedirectError"}let nk=class extends oh{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},e2=class extends oh{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}};function p3(t){return Xt(t)&&t.name==="AuthRetryableFetchError"}let rk=class extends oh{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};function f1e(t){return Xt(t)&&t.name==="AuthWeakPasswordError"}let t2=class extends oh{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const n2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),l6=` 	
\r=`.split(""),p1e=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<l6.length;e+=1)t[l6[e].charCodeAt(0)]=-2;for(let e=0;e<n2.length;e+=1)t[n2[e].charCodeAt(0)]=e;return t})();function c6(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(n2[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(n2[r]),e.queuedBits-=6}}function oX(t,e,n){const r=p1e[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function u6(t){const e=[],n=s=>{e.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=s=>{v1e(s,r,n)};for(let s=0;s<t.length;s+=1)oX(t.charCodeAt(s),i,a);return e.join("")}function m1e(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function g1e(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}m1e(r,e)}}function v1e(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function ty(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)oX(t.charCodeAt(i),n,r);return new Uint8Array(e)}function y1e(t){const e=[];return g1e(t,n=>e.push(n)),new Uint8Array(e)}function Bm(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>c6(i,n,r)),c6(null,n,r),e.join("")}function b1e(t){return Math.round(Date.now()/1e3)+t}function x1e(){return Symbol("auth-callback")}const Wa=()=>typeof window<"u"&&typeof document<"u",ym={tested:!1,writable:!1},lX=()=>{if(!Wa())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ym.tested)return ym.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ym.tested=!0,ym.writable=!0}catch{ym.tested=!0,ym.writable=!1}return ym.writable};function _1e(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const cX=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),w1e=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",jv=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},bm=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ha=async(t,e)=>{await t.removeItem(e)};class xT{constructor(){this.promise=new xT.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}xT.promiseConstructor=Promise;function _A(t){const e=t.split(".");if(e.length!==3)throw new t2("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!d1e.test(e[r]))throw new t2("JWT not in base64url format");return{header:JSON.parse(u6(e[0])),payload:JSON.parse(u6(e[1])),signature:ty(e[2]),raw:{header:e[0],payload:e[1]}}}async function S1e(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function E1e(t,e){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await t(a);if(!e(a,null,s)){r(s);return}}catch(s){if(!e(a,s)){i(s);return}}})()})}function C1e(t){return("0"+t.toString(16)).substr(-2)}function T1e(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,C1e).join("")}async function M1e(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function A1e(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await M1e(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ev(t,e,n=!1){const r=T1e();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await jv(t,`${e}-code-verifier`,i);const a=await A1e(r);return[a,r===a?"plain":"s256"]}const P1e=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function N1e(t){const e=t.headers.get(tk);if(!e||!e.match(P1e))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function D1e(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function k1e(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const R1e=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Cv(t){if(!R1e.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function wA(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function I1e(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function d6(t){return JSON.parse(JSON.stringify(t))}const Cm=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),$1e=[502,503,504];async function h6(t){var e;if(!w1e(t))throw new e2(Cm(t),0);if($1e.includes(t.status))throw new e2(Cm(t),t.status);let n;try{n=await t.json()}catch(a){throw new _f(Cm(a),a)}let r;const i=N1e(t);if(i&&i.getTime()>=nX["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new rk(Cm(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new vo}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new rk(Cm(n),t.status,n.weak_password.reasons);throw new rX(Cm(n),t.status||500,r)}const j1e=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function hn(t,e,n,r){var i;const a=Object.assign({},r?.headers);a[tk]||(a[tk]=nX["2024-01-01"].name),r?.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await L1e(t,e,n+o,{headers:a,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function L1e(t,e,n,r,i,a){const s=j1e(e,r,i,a);let o;try{o=await t(n,Object.assign({},s))}catch(c){throw console.error(c),new e2(Cm(c),0)}if(o.ok||await h6(o),r?.noResolveJson)return o;try{return await o.json()}catch(c){await h6(c)}}function Cc(t){var e;let n=null;B1e(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=b1e(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function f6(t){const e=Cc(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function wf(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function O1e(t){return{data:t,error:null}}function F1e(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=t,s=By(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},c=Object.assign({},s);return{data:{properties:o,user:c},error:null}}function p6(t){return t}function B1e(t){return t.access_token&&t.refresh_token&&t.expires_in}const m3=["global","local","others"];let FI=class{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=cX(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=m3[0]){if(m3.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${m3.join(", ")}`);try{return await hn(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Xt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await hn(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:wf})}catch(r){if(Xt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=By(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await hn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:F1e,redirectTo:n?.redirectTo})}catch(n){if(Xt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await hn(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:wf})}catch(n){if(Xt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,a,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},h=await hn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:p6});if(h.error)throw h.error;const f=await h.json(),m=(s=h.headers.get("x-total-count"))!==null&&s!==void 0?s:0,g=(c=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(v.split(";")[1].split("=")[1]);u[`${_}Page`]=x}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Xt(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Cv(e);try{return await hn(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:wf})}catch(n){if(Xt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Cv(e);try{return await hn(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:wf})}catch(r){if(Xt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Cv(e);try{return await hn(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:wf})}catch(r){if(Xt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Cv(e.userId);try{const{data:n,error:r}=await hn(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Xt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Cv(e.userId),Cv(e.id);try{return{data:await hn(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Xt(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,a,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},h=await hn(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:p6});if(h.error)throw h.error;const f=await h.json(),m=(s=h.headers.get("x-total-count"))!==null&&s!==void 0?s:0,g=(c=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(v.split(";")[1].split("=")[1]);u[`${_}Page`]=x}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Xt(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await hn(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xt(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await hn(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xt(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await hn(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Xt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await hn(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Xt(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await hn(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xt(n))return{data:null,error:n};throw n}}};function m6(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Tm={debug:!!(globalThis&&lX()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class BI extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let uX=class extends BI{};class z1e extends BI{}async function dX(t,e,n){Tm.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Tm.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Tm.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Tm.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Tm.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new uX(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Tm.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const g6={};async function U1e(t,e,n){var r;const i=(r=g6[t])!==null&&r!==void 0?r:Promise.resolve(),a=Promise.race([i.catch(()=>null),e>=0?new Promise((s,o)=>{setTimeout(()=>{o(new z1e(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(s=>s)).catch(s=>{if(s&&s.isAcquireTimeout)throw s;return null}).then(async()=>await n());return g6[t]=a.catch(async s=>{if(s&&s.isAcquireTimeout)return await i,null;throw s}),await a}function V1e(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function hX(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function H1e(t){return parseInt(t,16)}function G1e(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function W1e(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:s,notBefore:o,requestId:c,resources:u,scheme:h,uri:f,version:m}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=hX(t.address),v=h?`${h}://${r}`:r,x=t.statement?`${t.statement}
`:"",_=`${v} wants you to sign in with your Ethereum account:
${g}

${x}`;let w=`URI: ${f}
Version: ${m}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${a.toISOString()}`;if(i&&(w+=`
Expiration Time: ${i.toISOString()}`),o&&(w+=`
Not Before: ${o.toISOString()}`),c&&(w+=`
Request ID: ${c}`),u){let S=`
Resources:`;for(const E of u){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);S+=`
- ${E}`}w+=S}return`${_}
${w}`}class aa extends Error{constructor({message:e,code:n,cause:r,name:i}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=i??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class r2 extends aa{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function q1e({error:t,options:e}){var n,r,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new aa({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new aa({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new aa({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new aa({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new aa({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new aa({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new aa({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new aa({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(fX(s)){if(a.rp.id!==s)return new aa({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new aa({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new aa({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new aa({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new aa({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function K1e({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new aa({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new aa({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(fX(r)){if(n.rpId!==r)return new aa({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new aa({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new aa({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new aa({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class X1e{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Y1e=new X1e;function Z1e(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=By(t,["challenge","user","excludeCredentials"]),a=ty(e).buffer,s=Object.assign(Object.assign({},n),{id:ty(n.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:a,user:s});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];o.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:ty(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function J1e(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=By(t,["challenge","allowCredentials"]),i=ty(e).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){const o=n[s];a.allowCredentials[s]=Object.assign(Object.assign({},o),{id:ty(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return a}function Q1e(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Bm(new Uint8Array(t.response.attestationObject)),clientDataJSON:Bm(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function e_e(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Bm(new Uint8Array(i.authenticatorData)),clientDataJSON:Bm(new Uint8Array(i.clientDataJSON)),signature:Bm(new Uint8Array(i.signature)),userHandle:i.userHandle?Bm(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function fX(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function v6(){var t,e;return!!(Wa()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function t_e(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new r2("Browser returned unexpected credential type",e)}:{data:null,error:new r2("Empty credential response",e)}}catch(e){return{data:null,error:q1e({error:e,options:t})}}}async function n_e(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new r2("Browser returned unexpected credential type",e)}:{data:null,error:new r2("Empty credential response",e)}}catch(e){return{data:null,error:K1e({error:e,options:t})}}}const r_e={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},i_e={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function i2(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const a in i){const s=i[a];if(s!==void 0)if(Array.isArray(s))r[a]=s;else if(n(s))r[a]=s;else if(e(s)){const o=r[a];e(o)?r[a]=i2(o,s):r[a]=i2(s)}else r[a]=s}return r}function a_e(t,e){return i2(r_e,t,e||{})}function s_e(t,e){return i2(i_e,t,e||{})}class o_e{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},a){try{const{data:s,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!s)return{data:null,error:o};const c=i??Y1e.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=a_e(s.webauthn.credential_options.publicKey,a?.create),{data:h,error:f}=await t_e({publicKey:u,signal:c});return h?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const u=s_e(s.webauthn.credential_options.publicKey,a?.request),{data:h,error:f}=await n_e(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return h?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(s){return Xt(s)?{data:null,error:s}:{data:null,error:new _f("Unexpected error in challenge",s)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new vy("rpId is required for WebAuthn authentication")};try{if(!v6())return{data:null,error:new _f("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:a});if(!s)return{data:null,error:o};const{webauthn:c}=s;return this._verify({factorId:e,challengeId:s.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(s){return Xt(s)?{data:null,error:s}:{data:null,error:new _f("Unexpected error in authenticate",s)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new vy("rpId is required for WebAuthn registration")};try{if(!v6())return{data:null,error:new _f("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this._enroll({friendlyName:e});if(!s)return await this.client.mfa.listFactors().then(h=>{var f;return(f=h.data)===null||f===void 0?void 0:f.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h?.id}):void 0),{data:null,error:o};const{data:c,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:a});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(s){return Xt(s)?{data:null,error:s}:{data:null,error:new _f("Unexpected error in register",s)}}}}V1e();const l_e={url:l1e,storageKey:c1e,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:u1e,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function y6(t,e,n){return await n()}const Tv={};let zI=class ik{get jwks(){var e,n;return(n=(e=Tv[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Tv[this.storageKey]=Object.assign(Object.assign({},Tv[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Tv[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Tv[this.storageKey]=Object.assign(Object.assign({},Tv[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},l_e),e);if(this.storageKey=a.storageKey,this.instanceID=(n=ik.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,ik.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Wa()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new FI({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=cX(a.fetch),this.lock=a.lock||y6,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:this.persistSession&&Wa()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=dX:this.lock=y6,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new o_e(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:lX()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=m6(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=m6(this.memoryStorage)),Wa()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${tX}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Wa()&&(n=_1e(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Wa()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),sX(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Xt(n)?this._returnResult({error:n}):this._returnResult({error:new _f("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const a=await hn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Cc}),{data:s,error:o}=a;if(o||!s)return this._returnResult({data:{user:null,session:null},error:o});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(Xt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var n,r,i;try{let a;if("email"in e){const{email:h,password:f,options:m}=e;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Ev(this.storage,this.storageKey)),a=await hn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:h,password:f,data:(n=m?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:g,code_challenge_method:v},xform:Cc})}else if("phone"in e){const{phone:h,password:f,options:m}=e;a=await hn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(r=m?.data)!==null&&r!==void 0?r:{},channel:(i=m?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Cc})}else throw new C1("You must provide either an email or phone number and a password");const{data:s,error:o}=a;if(o||!s)return await Ha(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(await Ha(this.storage,`${this.storageKey}-code-verifier`),Xt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:s,options:o}=e;n=await hn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:f6})}else if("phone"in e){const{phone:a,password:s,options:o}=e;n=await hn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:f6})}else throw new C1("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const a=new Em;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Xt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,a,s,o,c,u,h,f,m;let g,v;if("message"in e)g=e.message,v=e.signature;else{const{chain:x,wallet:_,statement:w,options:S}=e;let E;if(Wa())if(typeof _=="object")E=_;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")E=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!S?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=_}const A=new URL((n=S?.url)!==null&&n!==void 0?n:window.location.href),N=await E.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=hX(N[0]);let R=(r=S?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!R){const k=await E.request({method:"eth_chainId"});R=H1e(k)}const D={domain:A.host,address:P,statement:w,uri:A.href,version:"1",chainId:R,nonce:(i=S?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(s=(a=S?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(o=S?.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=S?.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=S?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=S?.signInWithEthereum)===null||h===void 0?void 0:h.resources};g=W1e(D),v=await E.request({method:"personal_sign",params:[G1e(g),P]})}try{const{data:x,error:_}=await hn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:v},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Cc});if(_)throw _;if(!x||!x.session||!x.user){const w=new Em;return this._returnResult({data:{user:null,session:null},error:w})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:_})}catch(x){if(Xt(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var n,r,i,a,s,o,c,u,h,f,m,g;let v,x;if("message"in e)v=e.message,x=e.signature;else{const{chain:_,wallet:w,statement:S,options:E}=e;let A;if(Wa())if(typeof w=="object")A=w;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))A=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=w}const N=new URL((n=E?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in A&&A.signIn){const P=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E?.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),S?{statement:S}:null));let R;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")R=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)R=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)v=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),x=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${N.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(i=(r=E?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=E?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((s=E?.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((o=E?.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((c=E?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((u=E?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((f=(h=E?.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...E.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const P=await A.signMessage(new TextEncoder().encode(v),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=P}}try{const{data:_,error:w}=await hn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Bm(x)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Cc});if(w)throw w;if(!_||!_.session||!_.user){const S=new Em;return this._returnResult({data:{user:null,session:null},error:S})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:w})}catch(_){if(Xt(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(e){const n=await bm(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:a,error:s}=await hn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Cc});if(await Ha(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!a||!a.session||!a.user){const o=new Em;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:s})}catch(a){if(await Ha(this.storage,`${this.storageKey}-code-verifier`),Xt(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:a,nonce:s}=e,o=await hn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Cc}),{data:c,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const h=new Em;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(n){if(Xt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,a,s;try{if("email"in e){const{email:o,options:c}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Ev(this.storage,this.storageKey));const{error:f}=await hn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=c?.data)!==null&&n!==void 0?n:{},create_user:(r=c?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:o,options:c}=e,{data:u,error:h}=await hn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=c?.data)!==null&&i!==void 0?i:{},create_user:(a=c?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(s=c?.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:h})}throw new C1("You must provide either an email or phone number.")}catch(o){if(await Ha(this.storage,`${this.storageKey}-code-verifier`),Xt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var n,r;try{let i,a;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:s,error:o}=await hn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Cc});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,u=s.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(Xt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,a,s;try{let o=null,c=null;this.flowType==="pkce"&&([o,c]=await Ev(this.storage,this.storageKey));const u=await hn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:O1e});return!((a=u.data)===null||a===void 0)&&a.url&&Wa()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(await Ha(this.storage,`${this.storageKey}-code-verifier`),Xt(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new vo;const{error:i}=await hn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Xt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:a}=e,{error:s}=await hn(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in e){const{phone:r,type:i,options:a}=e,{data:s,error:o}=await hn(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s?.message_id},error:o})}throw new C1("You must provide either an email or phone number and a type")}catch(n){if(Xt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await bm(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<xA:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const s=await bm(this.userStorage,this.storageKey+"-user");s?.user?e.user=s.user:e.user=wA()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};e.user=I1e(e.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await hn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:wf}):await this._useSession(async n=>{var r,i,a;const{data:s,error:o}=n;if(o)throw o;return!(!((r=s.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new vo}:await hn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:wf})})}catch(n){if(Xt(n))return aX(n)&&(await this._removeSession(),await Ha(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new vo;const s=i.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await Ev(this.storage,this.storageKey));const{data:u,error:h}=await hn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:s.access_token,xform:wf});if(h)throw h;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(r){if(await Ha(this.storage,`${this.storageKey}-code-verifier`),Xt(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new vo;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:s}=_A(e.access_token);if(s.exp&&(r=s.exp,i=r<=n),i){const{data:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(Xt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:s,error:o}=n;if(o)throw o;e=(r=s.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new vo;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Xt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Wa())throw new T1("No browser detected.");if(e.error||e.error_description||e.error_code)throw new T1(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new nk("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new T1("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new nk("No code detected.");const{data:S,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:s,expires_in:o,expires_at:c,token_type:u}=e;if(!a||!o||!s||!u)throw new T1("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(o);let m=h+f;c&&(m=parseInt(c));const g=m-h;g*1e3<=$v&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const v=m-f;h-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,h):h-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,h);const{data:x,error:_}=await this._getUser(a);if(_)throw _;const w={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:f,expires_at:m,refresh_token:s,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:e.type},error:null})}catch(r){if(Xt(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await bm(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({error:a});const s=(r=i.session)===null||r===void 0?void 0:r.access_token;if(s){const{error:o}=await this.admin.signOut(s,e);if(o&&!(iX(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await Ha(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=x1e(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:s}=n;if(s)throw s;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Ev(this.storage,this.storageKey,!0));try{return await hn(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await Ha(this.storage,`${this.storageKey}-code-verifier`),Xt(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Xt(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var s,o,c,u,h;const{data:f,error:m}=a;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await hn(this.fetch,"GET",g,{headers:this.headers,jwt:(h=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return Wa()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:e.provider,url:r?.url},error:null})}catch(r){if(Xt(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:a}}=n;if(i)throw i;const{options:s,provider:o,token:c,access_token:u,nonce:h}=e,f=await hn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:o,id_token:c,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Cc}),{data:m,error:g}=f;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new Em}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:g}))}catch(i){if(await Ha(this.storage,`${this.storageKey}-code-verifier`),Xt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:a,error:s}=n;if(s)throw s;return await hn(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Xt(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await E1e(async i=>(i>0&&await S1e(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await hn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Cc})),(i,a)=>{const s=200*Math.pow(2,i);return a&&p3(a)&&Date.now()+s-r<$v})}catch(r){if(this._debug(n,"error",r),Xt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Wa()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await bm(this.storage,this.storageKey);if(i&&this.userStorage){let s=await bm(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await jv(this.userStorage,this.storageKey+"-user",s)),i.user=(e=s?.user)!==null&&e!==void 0?e:wA()}else if(i&&!i.user&&!i.user){const s=await bm(this.storage,this.storageKey+"-user");s&&s?.user?(i.user=s.user,await Ha(this.storage,this.storageKey+"-user"),await jv(this.storage,this.storageKey,i)):i.user=wA()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<xA;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${xA}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),p3(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:o}=await this._getUser(i.access_token);!o&&s?.user?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new vo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new xT;const{data:a,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!a.session)throw new vo;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={data:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(i,"error",a),Xt(a)){const s={data:null,error:a};return p3(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(c){a.push(c)}});if(await Promise.all(s),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ha(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await jv(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=d6(i);await jv(this.storage,this.storageKey,a)}else{const i=d6(n);await jv(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ha(this.storage,this.storageKey),await Ha(this.storage,this.storageKey+"-code-verifier"),await Ha(this.storage,this.storageKey+"-user"),this.userStorage&&await Ha(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Wa()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),$v);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/$v);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${$v}ms, refresh threshold is ${ek} ticks`),i<=ek&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof BI)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wa()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,s]=await Ev(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(o.toString())}if(r?.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?this._returnResult({data:null,error:a}):await hn(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Xt(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:a,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await hn(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&c.type==="totp"&&(!((i=c?.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(Xt(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Q1e(e.webauthn.credential_response):e_e(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:c}=await hn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:s,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(n){if(Xt(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=await hn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(s.error)return s;const{data:o}=s;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Z1e(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:J1e(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Xt(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=n?.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=_A(r.access_token);let s=null;a.aal&&(s=a.aal);let o=s;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(o="aal2");const u=a.amr||[];return{data:{currentLevel:s,nextLevel:o,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await hn(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new vo})})}catch(n){if(Xt(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new vo});const s=await hn(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&Wa()&&!n?.skipBrowserRedirect&&window.location.assign(s.data.redirect_url),s})}catch(r){if(Xt(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new vo});const s=await hn(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&Wa()&&!n?.skipBrowserRedirect&&window.location.assign(s.data.redirect_url),s})}catch(r){if(Xt(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await hn(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new vo})})}catch(e){if(Xt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await hn(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new vo})})}catch(n){if(Xt(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+h1e>i)return r;const{data:a,error:s}=await hn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:v}=await this.getSession();if(v||!g.session)return this._returnResult({data:null,error:v});r=g.session.access_token}const{header:i,payload:a,signature:s,raw:{header:o,payload:c}}=_A(r);n?.allowExpired||D1e(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!u){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:a,header:i,signature:s},error:null}}const h=k1e(i.alg),f=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,s,y1e(`${o}.${c}`)))throw new t2("Invalid JWT signature");return{data:{claims:a,header:i,signature:s},error:null}}catch(r){if(Xt(r))return this._returnResult({data:null,error:r});throw r}}};zI.nextInstanceID={};const c_e=FI,u_e=zI,d_e=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:c_e,AuthApiError:rX,AuthClient:u_e,AuthError:vy,AuthImplicitGrantRedirectError:T1,AuthInvalidCredentialsError:C1,AuthInvalidJwtError:t2,AuthInvalidTokenResponseError:Em,AuthPKCEGrantCodeExchangeError:nk,AuthRetryableFetchError:e2,AuthSessionMissingError:vo,AuthUnknownError:_f,AuthWeakPasswordError:rk,CustomAuthError:oh,GoTrueAdminApi:FI,GoTrueClient:zI,NavigatorLockAcquireTimeoutError:uX,SIGN_OUT_SCOPES:m3,isAuthApiError:iX,isAuthError:Xt,isAuthImplicitGrantRedirectError:sX,isAuthRetryableFetchError:p3,isAuthSessionMissingError:aX,isAuthWeakPasswordError:f1e,lockInternals:Tm,navigatorLock:dX,processLock:U1e},Symbol.toStringTag,{value:"Module"})),pX=L_(d_e);var b6;function h_e(){if(b6)return d1;b6=1,Object.defineProperty(d1,"__esModule",{value:!0}),d1.SupabaseAuthClient=void 0;const t=pX;let e=class extends t.AuthClient{constructor(r){super(r)}};return d1.SupabaseAuthClient=e,d1}var x6;function _6(){if(x6)return _C;x6=1,Object.defineProperty(_C,"__esModule",{value:!0});const t=MK,e=RK(),n=zK,r=r1e,i=a1e(),a=s1e(),s=o1e(),o=h_e();class c{constructor(h,f,m){var g,v,x;this.supabaseUrl=h,this.supabaseKey=f;const _=(0,s.validateSupabaseUrl)(h);if(!f)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",_),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",_),this.storageUrl=new URL("storage/v1",_),this.functionsUrl=new URL("functions/v1",_);const w=`sb-${_.hostname.split(".")[0]}-auth-token`,S={db:i.DEFAULT_DB_OPTIONS,realtime:i.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},i.DEFAULT_AUTH_OPTIONS),{storageKey:w}),global:i.DEFAULT_GLOBAL_OPTIONS},E=(0,s.applySettingDefaults)(m??{},S);this.storageKey=(g=E.auth.storageKey)!==null&&g!==void 0?g:"",this.headers=(v=E.global.headers)!==null&&v!==void 0?v:{},E.accessToken?(this.accessToken=E.accessToken,this.auth=new Proxy({},{get:(A,N)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(N)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((x=E.auth)!==null&&x!==void 0?x:{},this.headers,E.global.fetch),this.fetch=(0,a.fetchWithAuth)(f,this._getAccessToken.bind(this),E.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},E.realtime)),this.accessToken&&this.accessToken().then(A=>this.realtime.setAuth(A)).catch(A=>console.warn("Failed to set initial Realtime auth token:",A)),this.rest=new e.PostgrestClient(new URL("rest/v1",_).href,{headers:this.headers,schema:E.db.schema,fetch:this.fetch}),this.storage=new r.StorageClient(this.storageUrl.href,this.headers,this.fetch,m?.storage),E.accessToken||this._listenForAuthEvents()}get functions(){return new t.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(h){return this.rest.from(h)}schema(h){return this.rest.schema(h)}rpc(h,f={},m={head:!1,get:!1,count:void 0}){return this.rest.rpc(h,f,m)}channel(h,f={config:{}}){return this.realtime.channel(h,f)}getChannels(){return this.realtime.getChannels()}removeChannel(h){return this.realtime.removeChannel(h)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var h,f;if(this.accessToken)return await this.accessToken();const{data:m}=await this.auth.getSession();return(f=(h=m.session)===null||h===void 0?void 0:h.access_token)!==null&&f!==void 0?f:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:h,persistSession:f,detectSessionInUrl:m,storage:g,userStorage:v,storageKey:x,flowType:_,lock:w,debug:S,throwOnError:E},A,N){const P={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new o.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},P),A),storageKey:x,autoRefreshToken:h,persistSession:f,detectSessionInUrl:m,storage:g,userStorage:v,flowType:_,lock:w,debug:S,throwOnError:E,fetch:N,hasCustomAuthorizationHeader:Object.keys(this.headers).some(R=>R.toLowerCase()==="authorization")})}_initRealtimeClient(h){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},h),{params:Object.assign({apikey:this.supabaseKey},h?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((f,m)=>{this._handleTokenChanged(f,"CLIENT",m?.access_token)})}_handleTokenChanged(h,f,m){(h==="TOKEN_REFRESHED"||h==="SIGNED_IN")&&this.changedAccessToken!==m?(this.changedAccessToken=m,this.realtime.setAuth(m)):h==="SIGNED_OUT"&&(this.realtime.setAuth(),f=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return _C.default=c,_C}var w6;function f_e(){return w6||(w6=1,(function(t){var e=Cd&&Cd.__createBinding||(Object.create?(function(h,f,m,g){g===void 0&&(g=m);var v=Object.getOwnPropertyDescriptor(f,m);(!v||("get"in v?!f.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return f[m]}}),Object.defineProperty(h,g,v)}):(function(h,f,m,g){g===void 0&&(g=m),h[g]=f[m]})),n=Cd&&Cd.__exportStar||function(h,f){for(var m in h)m!=="default"&&!Object.prototype.hasOwnProperty.call(f,m)&&e(f,h,m)},r=Cd&&Cd.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const i=r(_6());n(pX,t);var a=RK();Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return a.PostgrestError}});var s=MK;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return s.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return s.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return s.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return s.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return s.FunctionRegion}}),n(zK,t);var o=_6();Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return r(o).default}});const c=(h,f,m)=>new i.default(h,f,m);t.createClient=c;function u(){if(typeof window<"u"||typeof process>"u")return!1;const h=process.version;if(h==null)return!1;const f=h.match(/^v(\d+)\./);return f?parseInt(f[1],10)<=18:!1}u()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Cd)),Cd}var mX=f_e();const gX=vg(mX),p_e=oQ({__proto__:null,default:gX},[mX]),{PostgrestError:XFe,FunctionsHttpError:YFe,FunctionsFetchError:ZFe,FunctionsRelayError:JFe,FunctionsError:QFe,FunctionRegion:eBe,SupabaseClient:tBe,createClient:m_e,GoTrueAdminApi:nBe,GoTrueClient:rBe,AuthAdminApi:iBe,AuthClient:aBe,navigatorLock:sBe,NavigatorLockAcquireTimeoutError:oBe,lockInternals:lBe,processLock:cBe,SIGN_OUT_SCOPES:uBe,AuthError:dBe,AuthApiError:hBe,AuthUnknownError:fBe,CustomAuthError:pBe,AuthSessionMissingError:mBe,AuthInvalidTokenResponseError:gBe,AuthInvalidCredentialsError:vBe,AuthImplicitGrantRedirectError:yBe,AuthPKCEGrantCodeExchangeError:bBe,AuthRetryableFetchError:xBe,AuthWeakPasswordError:_Be,AuthInvalidJwtError:wBe,isAuthError:SBe,isAuthApiError:EBe,isAuthSessionMissingError:CBe,isAuthImplicitGrantRedirectError:TBe,isAuthRetryableFetchError:MBe,isAuthWeakPasswordError:ABe,RealtimePresence:PBe,RealtimeChannel:NBe,RealtimeClient:DBe,REALTIME_LISTEN_TYPES:kBe,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:RBe,REALTIME_PRESENCE_LISTEN_EVENTS:IBe,REALTIME_SUBSCRIBE_STATES:$Be,REALTIME_CHANNEL_STATES:jBe}=gX||p_e,g_e="https://lilxpscwiqggxmdroshn.supabase.co",v_e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxpbHhwc2N3aXFnZ3htZHJvc2huIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU0NzI1NjYsImV4cCI6MjA3MTA0ODU2Nn0.XhCb-gSV9IM8w355prG4ebgKFHU4yasR3eXg3dr7_60",y_e="xstudio-auth-prod",zr=m_e(g_e,v_e,{auth:{persistSession:!0,storageKey:y_e}}),b_e=Object.freeze(Object.defineProperty({__proto__:null,supabase:zr},Symbol.toStringTag,{value:"Module"}));var M1=(t=>(t.NETWORK_ERROR="NETWORK_ERROR",t.VALIDATION_ERROR="VALIDATION_ERROR",t.AUTHENTICATION_ERROR="AUTHENTICATION_ERROR",t.AUTHORIZATION_ERROR="AUTHORIZATION_ERROR",t.NOT_FOUND_ERROR="NOT_FOUND_ERROR",t.RATE_LIMIT_ERROR="RATE_LIMIT_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.UNKNOWN_ERROR="UNKNOWN_ERROR",t))(M1||{});const Mv=(t,e)=>{const n=new Date().toISOString();if(t&&typeof t=="object"&&"code"in t){const i=t;return i.code==="23505"?{type:"VALIDATION_ERROR",message:"  .",code:i.code,details:i.details||i.message,operation:e,timestamp:n}:i.code==="23503"?{type:"VALIDATION_ERROR",message:"   .",code:i.code,details:i.details||i.message,operation:e,timestamp:n}:i.code==="23514"?{type:"VALIDATION_ERROR",message:"   .",code:i.code,details:i.details||i.message,operation:e,timestamp:n}:{type:"SERVER_ERROR",message:i.message||"  .",code:i.code,details:i.details,operation:e,timestamp:n}}if(t instanceof Error){const i=t.message.toLowerCase();if(i.includes("network")||i.includes("fetch"))return{type:"NETWORK_ERROR",message:"   .   .",operation:e,timestamp:n};if(i.includes("auth")||i.includes("unauthorized"))return{type:"AUTHENTICATION_ERROR",message:" .  .",operation:e,timestamp:n};if(i.includes("forbidden")||i.includes("permission"))return{type:"AUTHORIZATION_ERROR",message:"    .",operation:e,timestamp:n};if(i.includes("not found")||i.includes("404"))return{type:"NOT_FOUND_ERROR",message:"    .",operation:e,timestamp:n};if(i.includes("rate limit"))return{type:"RATE_LIMIT_ERROR",message:"  .    .",operation:e,timestamp:n};if(i.includes("500")||i.includes("server"))return{type:"SERVER_ERROR",message:"  .    .",operation:e,timestamp:n};if(i.includes("invalid")||i.includes("validation"))return{type:"VALIDATION_ERROR",message:t.message,operation:e,timestamp:n}}let r;if(t instanceof Error)r={name:t.name,message:t.message,stack:t.stack};else if(typeof t=="object"&&t!==null)try{r=JSON.parse(JSON.stringify(t))}catch{r=String(t)}else r=String(t);return{type:"UNKNOWN_ERROR",message:"    .",details:r,operation:e,timestamp:n}},Tu=t=>{console.error(`[${t.operation}] ${t.type}:`,t.message)};class x_e{cache;maxSize;ttl;constructor(e={}){this.cache=new Map,this.maxSize=e.max??100,this.ttl=e.ttl??0}get(e){const n=this.cache.get(e);if(n){if(this.ttl>0&&Date.now()-n.timestamp>this.ttl){this.cache.delete(e);return}return this.cache.delete(e),this.cache.set(e,n),n.value}}set(e,n){if(this.cache.has(e)&&this.cache.delete(e),this.cache.size>=this.maxSize){const r=this.cache.keys().next().value;r!==void 0&&this.cache.delete(r)}this.cache.set(e,{value:n,timestamp:Date.now()})}delete(e){return this.cache.delete(e)}clear(){this.cache.clear()}has(e){if(!this.cache.has(e))return!1;if(this.ttl>0){const n=this.cache.get(e);if(Date.now()-n.timestamp>this.ttl)return this.cache.delete(e),!1}return!0}get size(){return this.cache.size}keys(){return this.cache.keys()}values(){return this.cache.values()}cleanup(){if(this.ttl===0)return 0;let e=0;const n=Date.now();for(const[r,i]of this.cache.entries())n-i.timestamp>this.ttl&&(this.cache.delete(r),e++);return e}getStats(){let e=null;if(this.cache.size>0){const n=this.cache.values().next().value;n&&(e=Date.now()-n.timestamp)}return{size:this.cache.size,maxSize:this.maxSize,ttl:this.ttl,oldestItemAge:e}}}const NC=new x_e({max:100,ttl:300*1e3});class __e{pendingRequests;constructor(){this.pendingRequests=new Map}async deduplicate(e,n){if(this.pendingRequests.has(e))return this.pendingRequests.get(e);const r=n().then(i=>(this.pendingRequests.delete(e),i)).catch(i=>{throw this.pendingRequests.delete(e),console.error(` [Dedup] Request failed: ${e}`,i),i});return this.pendingRequests.set(e,r),r}cancel(e){return this.pendingRequests.has(e)?(this.pendingRequests.delete(e),console.log(` [Dedup] Request cancelled: ${e}`),!0):!1}cancelAll(){const e=this.pendingRequests.size;this.pendingRequests.clear(),console.log(` [Dedup] All requests cancelled (${e})`)}get pendingCount(){return this.pendingRequests.size}isPending(e){return this.pendingRequests.has(e)}getPendingKeys(){return Array.from(this.pendingRequests.keys())}getStats(){return{pendingCount:this.pendingCount,pendingKeys:this.getPendingKeys()}}}const S6=new __e;let w_e=class{cacheMetrics;deduplicationMetrics;batcherMetrics;queryMetrics;startTime;queryStates;constructor(){this.cacheMetrics={totalRequests:0,hits:0,misses:0,hitRate:0,avgResponseTime:0,totalResponseTime:0},this.deduplicationMetrics={totalRequests:0,deduplicated:0,executed:0,deduplicationRate:0},this.batcherMetrics={totalEvents:0,filtered:0,batched:0,batchCount:0,avgBatchSize:0,filterEfficiency:0},this.queryMetrics={activeQueries:0,loadingQueries:0,errorQueries:0,successQueries:0,avgFetchTime:0,totalFetchTime:0,totalFetches:0},this.startTime=performance.now(),this.queryStates=new Map}recordCacheHit(e,n=0){this.cacheMetrics.totalRequests++,this.cacheMetrics.hits++,this.cacheMetrics.totalResponseTime+=n,this.cacheMetrics.hitRate=this.cacheMetrics.hits/this.cacheMetrics.totalRequests*100,this.cacheMetrics.avgResponseTime=this.cacheMetrics.totalResponseTime/this.cacheMetrics.totalRequests}recordCacheMiss(e,n=0){this.cacheMetrics.totalRequests++,this.cacheMetrics.misses++,this.cacheMetrics.totalResponseTime+=n,this.cacheMetrics.hitRate=this.cacheMetrics.hits/this.cacheMetrics.totalRequests*100,this.cacheMetrics.avgResponseTime=this.cacheMetrics.totalResponseTime/this.cacheMetrics.totalRequests}recordDeduplication(e,n){this.deduplicationMetrics.totalRequests++,n?(this.deduplicationMetrics.deduplicated++,console.log(` [Monitor] Request DEDUPLICATED: ${e}`)):(this.deduplicationMetrics.executed++,console.log(` [Monitor] Request EXECUTED: ${e}`)),this.deduplicationMetrics.deduplicationRate=this.deduplicationMetrics.deduplicated/this.deduplicationMetrics.totalRequests*100}recordBatcherEvents(e,n,r){this.batcherMetrics.totalEvents+=e,this.batcherMetrics.filtered+=n,this.batcherMetrics.batched+=r,r>0&&this.batcherMetrics.batchCount++,this.batcherMetrics.batchCount>0&&(this.batcherMetrics.avgBatchSize=this.batcherMetrics.batched/this.batcherMetrics.batchCount),this.batcherMetrics.totalEvents>0&&(this.batcherMetrics.filterEfficiency=this.batcherMetrics.filtered/this.batcherMetrics.totalEvents*100),console.log(` [Monitor] Batcher: Received ${e}, Filtered ${n}, Batched ${r} (Avg: ${this.batcherMetrics.avgBatchSize.toFixed(1)})`)}recordQueryState(e,n){this.queryStates.set(e,n),this.updateQueryCounts()}recordFetchComplete(e,n,r){this.queryMetrics.totalFetches++,this.queryMetrics.totalFetchTime+=n,this.queryMetrics.avgFetchTime=this.queryMetrics.totalFetchTime/this.queryMetrics.totalFetches,r?this.recordQueryState(e,"success"):this.recordQueryState(e,"error")}updateQueryCounts(){let e=0,n=0,r=0,i=0;for(const a of this.queryStates.values())a!=="idle"&&e++,a==="loading"&&n++,a==="error"&&r++,a==="success"&&i++;this.queryMetrics.activeQueries=e,this.queryMetrics.loadingQueries=n,this.queryMetrics.errorQueries=r,this.queryMetrics.successQueries=i}getStats(){const e=performance.now()-this.startTime;return{cache:{...this.cacheMetrics},deduplication:{...this.deduplicationMetrics},batcher:{...this.batcherMetrics},query:{...this.queryMetrics},startTime:this.startTime,elapsedTime:e}}reset(){this.cacheMetrics={totalRequests:0,hits:0,misses:0,hitRate:0,avgResponseTime:0,totalResponseTime:0},this.deduplicationMetrics={totalRequests:0,deduplicated:0,executed:0,deduplicationRate:0},this.batcherMetrics={totalEvents:0,filtered:0,batched:0,batchCount:0,avgBatchSize:0,filterEfficiency:0},this.queryMetrics={activeQueries:0,loadingQueries:0,errorQueries:0,successQueries:0,avgFetchTime:0,totalFetchTime:0,totalFetches:0},this.queryStates.clear(),this.startTime=performance.now(),console.log(" [Monitor] Performance stats reset")}printStats(){const e=this.getStats();console.log(" Performance Monitor Stats:"),console.log(""),console.log(`
 Cache Metrics:`),console.log(`  Total Requests: ${e.cache.totalRequests}`),console.log(`  Hits: ${e.cache.hits}`),console.log(`  Misses: ${e.cache.misses}`),console.log(`  Hit Rate: ${e.cache.hitRate.toFixed(1)}%`),console.log(`  Avg Response Time: ${e.cache.avgResponseTime.toFixed(2)}ms`),console.log(`
 Deduplication Metrics:`),console.log(`  Total Requests: ${e.deduplication.totalRequests}`),console.log(`  Deduplicated: ${e.deduplication.deduplicated}`),console.log(`  Executed: ${e.deduplication.executed}`),console.log(`  Deduplication Rate: ${e.deduplication.deduplicationRate.toFixed(1)}%`),console.log(`
 Batcher Metrics:`),console.log(`  Total Events: ${e.batcher.totalEvents}`),console.log(`  Filtered: ${e.batcher.filtered}`),console.log(`  Batched: ${e.batcher.batched}`),console.log(`  Batch Count: ${e.batcher.batchCount}`),console.log(`  Avg Batch Size: ${e.batcher.avgBatchSize.toFixed(1)}`),console.log(`  Filter Efficiency: ${e.batcher.filterEfficiency.toFixed(1)}%`),console.log(`
 Query Metrics:`),console.log(`  Active Queries: ${e.query.activeQueries}`),console.log(`  Loading: ${e.query.loadingQueries}`),console.log(`  Success: ${e.query.successQueries}`),console.log(`  Error: ${e.query.errorQueries}`),console.log(`  Avg Fetch Time: ${e.query.avgFetchTime.toFixed(2)}ms`),console.log(`  Total Fetches: ${e.query.totalFetches}`),console.log(`
  Elapsed Time: ${e.elapsedTime.toFixed(2)}ms`),console.log(`
`)}};const Lv=new w_e;class Ky{supabase;rateLimiter=new Map;maxRequestsPerMinute=60;constructor(){this.supabase=zr}async rateLimitCheck(e){const n=Date.now(),r=`${e}-${Math.floor(n/6e4)}`,i=this.rateLimiter.get(r)||0;if(i>=this.maxRequestsPerMinute){const a={type:M1.RATE_LIMIT_ERROR,message:"Rate limit exceeded. Please try again later.",operation:e,timestamp:new Date().toISOString()};throw Tu(a),new Error(a.message)}return this.rateLimiter.set(r,i+1),!0}validateInput(e,n,r){if(!n(e)){const i={type:M1.VALIDATION_ERROR,message:"Invalid input provided",operation:r,timestamp:new Date().toISOString()};throw Tu(i),new Error(i.message)}return e}async handleApiCall(e,n){await this.rateLimitCheck(e);try{const{data:r,error:i}=await n();if(i){const a=Mv(i,e);throw Tu(a),new Error(a.message)}if(!r){const a={type:M1.NOT_FOUND_ERROR,message:`No data returned from ${e}`,operation:e,timestamp:new Date().toISOString()};throw Tu(a),new Error(a.message)}return r}catch(r){const i=Mv(r,e);throw Tu(i),r}}async handleDeleteCall(e,n){await this.rateLimitCheck(e);try{const{error:r}=await n();if(r){const i=Mv(r,e);throw Tu(i),new Error(i.message)}}catch(r){const i=Mv(r,e);throw Tu(i),r}}async handleCachedApiCall(e,n,r,i={}){const a=NC.get(e);if(a){const c=Date.now()-a.timestamp,u=i.staleTime??300*1e3;if(c<u)return Lv.recordCacheHit(e,0),console.log(` [Cache HIT] ${n} (${e})`),a.data}const s=S6.isPending(e),o=performance.now();s||await this.rateLimitCheck(n);try{const c=await S6.deduplicate(e,async()=>{const{data:h,error:f}=await r();if(f){const m=Mv(f,n);throw Tu(m),new Error(m.message)}if(!h&&!i.allowNull){const m={type:M1.NOT_FOUND_ERROR,message:`No data returned from ${n}`,operation:n,timestamp:new Date().toISOString()};throw Tu(m),new Error(m.message)}return h}),u=performance.now()-o;return s||(Lv.recordCacheMiss(e,u),Lv.recordFetchComplete(e,u,!0),NC.set(e,{data:c,timestamp:Date.now()})),Lv.recordDeduplication(e,s),c}catch(c){const u=performance.now()-o;Lv.recordFetchComplete(e,u,!1);const h=Mv(c,n);throw Tu(h),c}}invalidateCache(e){for(const n of NC.keys())String(n).startsWith(e)&&(NC.delete(n),console.log(` [Cache INVALIDATE] ${n}`))}}class vX extends Ky{async fetchElements(e){return this.validateInput(e,r=>typeof r=="string"&&r.length>0,"fetchElements"),(await this.handleApiCall("fetchElements",async()=>await this.supabase.from("elements").select("*").eq("page_id",e).order("order_num",{ascending:!0}))).map(r=>({...r,customId:r.custom_id,dataBinding:r.data_binding}))}async createElement(e){this.validateInput(e,a=>a&&typeof a=="object","createElement");const n={...e,custom_id:e.customId,data_binding:e.dataBinding};delete n.customId,delete n.dataBinding;const r=await this.handleApiCall("createElement",async()=>await this.supabase.from("elements").insert([n]).select("*").single());if(!r)throw new Error("createElement returned null");const i=r;return{...i,customId:i.custom_id,dataBinding:i.data_binding}}async createMultipleElements(e){this.validateInput(e,i=>Array.isArray(i)&&i.length>0,"createMultipleElements");const n=e.map(i=>{const a={...i,custom_id:i.customId,data_binding:i.dataBinding};return delete a.customId,delete a.dataBinding,a}),r=await this.handleApiCall("createMultipleElements",async()=>await this.supabase.from("elements").insert(n).select("*"));return Array.isArray(r)?r.map(i=>({...i,customId:i.custom_id,dataBinding:i.data_binding})):[]}async updateElement(e,n){this.validateInput(e,s=>typeof s=="string"&&s.length>0,"updateElement"),this.validateInput(n,s=>s&&typeof s=="object","updateElement");const r={...n};n.customId!==void 0&&(r.custom_id=n.customId,delete r.customId),n.dataBinding!==void 0&&(r.data_binding=n.dataBinding,delete r.dataBinding);const i=await this.handleApiCall("updateElement",async()=>await this.supabase.from("elements").update(r).eq("id",e).select("*").single());if(!i)throw new Error("updateElement returned null");const a=i;return{...a,customId:a.custom_id,dataBinding:a.data_binding}}async updateElementProps(e,n){return this.validateInput(e,r=>typeof r=="string"&&r.length>0,"updateElementProps"),this.validateInput(n,r=>r&&typeof r=="object","updateElementProps"),this.handleApiCall("updateElementProps",async()=>await this.supabase.from("elements").update({props:n}).eq("id",e).select("*").single())}async deleteElement(e){this.validateInput(e,n=>typeof n=="string"&&n.length>0,"deleteElement"),await this.handleDeleteCall("deleteElement",async()=>await this.supabase.from("elements").delete().eq("id",e))}async deleteMultipleElements(e){this.validateInput(e,n=>Array.isArray(n)&&n.length>0,"deleteMultipleElements"),await this.handleDeleteCall("deleteMultipleElements",async()=>await this.supabase.from("elements").delete().in("id",e))}getElementsByPageId=this.fetchElements}const Po=new vX;class yX extends Ky{async fetchProjects(){return this.handleCachedApiCall("projects:all","fetchProjects",async()=>await this.supabase.from("projects").select("*").order("created_at",{ascending:!1}),{staleTime:300*1e3})}async getProjectById(e){this.validateInput(e,r=>typeof r=="string"&&r.length>0,"getProjectById");const n=`project:id:${e}`;return this.handleCachedApiCall(n,"getProjectById",async()=>{const r=await this.supabase.from("projects").select("*").eq("id",e).single();return r.error?(console.warn("[ProjectsApi]    :",e),{data:null,error:null}):r},{staleTime:300*1e3})}async createProject(e){this.validateInput(e,r=>r&&typeof r.name=="string"&&r.name.trim().length>0&&typeof r.created_by=="string","createProject");const n=await this.handleApiCall("createProject",async()=>await this.supabase.from("projects").insert([e]).select("*").single());return this.invalidateCache("projects:all"),n}async updateProject(e,n){this.validateInput(e,i=>typeof i=="string"&&i.length>0,"updateProject"),this.validateInput(n,i=>i&&typeof i=="object","updateProject");const r=await this.handleApiCall("updateProject",async()=>await this.supabase.from("projects").update(n).eq("id",e).select("*").single());return this.invalidateCache("projects:all"),this.invalidateCache(`project:id:${e}`),r}async deleteProject(e){this.validateInput(e,n=>typeof n=="string"&&n.length>0,"deleteProject"),await this.handleDeleteCall("deleteProject",async()=>await this.supabase.from("projects").delete().eq("id",e)),this.invalidateCache("projects:all"),this.invalidateCache(`project:id:${e}`)}async getCurrentUser(){return this.handleCachedApiCall("user:current","getCurrentUser",async()=>{const{data:{session:n},error:r}=await this.supabase.auth.getSession();if(r)throw new Error(`Session error: ${r.message}`);if(!n?.user)throw new Error("No authenticated user found");return{data:{id:n.user.id},error:null}},{staleTime:300*1e3})}}const Od=new yX;class bX extends Ky{async getPagesByProjectId(e){this.validateInput(e,r=>typeof r=="string"&&r.length>0,"getPagesByProjectId");const n=`pages:project:${e}`;return this.handleCachedApiCall(n,"getPagesByProjectId",async()=>await this.supabase.from("pages").select("*").eq("project_id",e).order("order_num",{ascending:!0}),{staleTime:300*1e3})}async createPage(e){this.validateInput(e,r=>typeof r=="object"&&r!==null,"createPage");const n=await this.handleApiCall("createPage",async()=>await this.supabase.from("pages").insert([e]).select().single());return e.project_id&&this.invalidateCache(`pages:project:${e.project_id}`),n}async fetchPages(e){this.validateInput(e,r=>typeof r=="string"&&r.length>0,"fetchPages");const n=`pages:project:${e}`;return this.handleCachedApiCall(n,"fetchPages",async()=>await this.supabase.from("pages").select("*").eq("project_id",e).order("created_at",{ascending:!0}),{staleTime:300*1e3})}async updatePage(e,n){this.validateInput(e,i=>typeof i=="string"&&i.length>0,"updatePage"),this.validateInput(n,i=>i&&typeof i=="object","updatePage");const r=await this.handleApiCall("updatePage",async()=>await this.supabase.from("pages").update(n).eq("id",e).select("*").single());return r.project_id&&this.invalidateCache(`pages:project:${r.project_id}`),r}async deletePage(e){this.validateInput(e,r=>typeof r=="string"&&r.length>0,"deletePage");const{data:n}=await this.supabase.from("pages").select("project_id").eq("id",e).single();await this.handleDeleteCall("deletePage",async()=>await this.supabase.from("pages").delete().eq("id",e)),n?.project_id&&this.invalidateCache(`pages:project:${n.project_id}`)}}const lg=new bX,qt=t=>t[Math.floor(Math.random()*t.length)],jn=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,E6=()=>String(Math.floor(Math.random()*1e4)).padStart(4,"0"),cl=(t="")=>{const e=jn(8,16),n="abcdefghijklmnopqrstuvwxyz0123456789";let r=t;for(let i=t.length;i<e;i++)r+=n.charAt(Math.floor(Math.random()*n.length));return r},Xy=t=>{const e=new Date,n=new Date;n.setFullYear(e.getFullYear()-t);const r=jn(n.getTime(),e.getTime());return new Date(r)},ak=(t,e)=>{const n=new Date(t.getTime());return n.setDate(n.getDate()+e),n},bs=t=>t.toISOString(),xX=["","","","","","","","","","","","","","",""],S_e=[" "," "," "," "," ","DevOps ","UI/UX "," "," ","QA "," "," "," "," "," "],E_e=["","","","","","","","","","","","","","","","","","","",""],C_e=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],T_e=[" "," "," "," "," "," "," ","V6 ","V8 "," 4"],M_e=["","LG","SDI","","","LS","","Bosch","Continental","Denso"],A_e=[{name:"  ",parts:["",""," "," "," "]},{name:" ",parts:[""," "," ",""," "]},{name:" ",parts:[" ",""," "," "," "]},{name:" ",parts:["",""," "," "," "]},{name:" ",parts:[" "," "," ","",""]},{name:" ",parts:[" "," ",""," ",""]},{name:" ",parts:[" "," "," "," "," "]},{name:" ",parts:["ECU"," ","","CAN  "," "]}],C6=["","","","","","","","","",""],P_e=[" ","","","","","","",""],N_e=["","","","","","",""],T6=["","","",""],D_e=["IT ","","","","","",""],k_e=["","","","","","","","","",""],R_e=["","","",""],I_e=["private","internal","public"],$_e=["","","",""],j_e=["","","","",""],L_e=["Asia/Seoul","America/Los_Angeles","Europe/Berlin","Asia/Tokyo","Asia/Singapore"],O_e=["ko-KR","en-US","ja-JP","zh-CN","de-DE"],F_e=["","",""," "," "," "],B_e=["pending","accepted","expired","revoked"],z_e=()=>[{name:" ",description:"    .",category:"user"},{name:" ",description:" , ,   .",category:"user"},{name:" ",description:"   .",category:"project"},{name:" ",description:"     .",category:"project"},{name:"  ",description:"     .",category:"organization"},{name:"  ",description:"    .",category:"billing"},{name:"  ",description:"    .",category:"security"},{name:"  ",description:"    .",category:"security"}].map(e=>({...e,id:cl("perm_")})),U_e=t=>{const e={viewUsers:t.find(r=>r.name===" ")?.id??"",manageUsers:t.find(r=>r.name===" ")?.id??"",viewProjects:t.find(r=>r.name===" ")?.id??"",editProjects:t.find(r=>r.name===" ")?.id??"",manageOrg:t.find(r=>r.name==="  ")?.id??"",viewBilling:t.find(r=>r.name==="  ")?.id??"",manageSecurity:t.find(r=>r.name==="  ")?.id??"",manageTemplates:t.find(r=>r.name==="  ")?.id??""};return[{name:" ",description:"    .",scope:"global",permissionKeys:["viewUsers","manageUsers","viewProjects","editProjects","manageOrg","viewBilling","manageSecurity","manageTemplates"]},{name:" ",description:"   .",scope:"global",permissionKeys:["viewUsers","manageUsers","viewProjects","editProjects","manageOrg"]},{name:" ",description:"    .",scope:"global",permissionKeys:["viewUsers","viewProjects","viewBilling"]},{name:" ",description:"     .",scope:"global",permissionKeys:["viewUsers","manageSecurity","manageTemplates"]},{name:" ",description:"    .",scope:"project",permissionKeys:["viewProjects","editProjects","viewUsers"]},{name:" ",description:"    .",scope:"project",permissionKeys:["viewProjects","viewUsers"]}].map(r=>({id:cl("role_"),name:r.name,description:r.description,scope:r.scope,permissionIds:r.permissionKeys.map(i=>e[i]).filter(Boolean)}))},V_e=t=>Array.from({length:t},(e,n)=>{const r=`${qt(xX)} ${n+1}`,i=Xy(5),a=["","",""],s=`org${String(n+1).padStart(2,"0")}.${qt(["example.com","workspace.kr","teamhub.io"])}`;return{id:cl("org_"),name:r,industry:qt(D_e),domain:s,plan:qt(a),createdAt:bs(i)}}),H_e=(t,e=2,n=5)=>{const r=[];return t.forEach(i=>{const a=jn(e,n);for(let s=0;s<a;s++){const o=qt(k_e);r.push({id:cl("dept_"),organizationId:i.id,name:o,description:`${i.name} ${o} `})}}),r},G_e=(t,e,n)=>{const r=[];for(let i=0;i<n;i++){const a=qt(t),s=e.filter(h=>h.organizationId===a.id),o=qt(s),c=Xy(2),u=new Date(c.getTime());u.setMonth(u.getMonth()+jn(1,12)),r.push({id:cl("proj_"),organizationId:a.id,departmentId:o.id,name:`${a.name}  ${i+1}`,status:qt(R_e),startDate:bs(c),endDate:bs(u),budget:jn(2e4,2e5),clientName:`${qt(xX)} `,visibility:qt(I_e)})}return r},W_e=()=>{const t=qt(E_e),e=qt(C_e);return`${t}${e}`},q_e=({count:t,organizations:e,departments:n,roles:r})=>{const i=r.filter(s=>s.scope==="global"),a=[];for(let s=1;s<=t;s++){const o=qt(e),c=n.filter(g=>g.organizationId===o.id),u=c.length>0?qt(c):qt(n),h=qt(i),f=Xy(3),m=new Date(f.getTime());m.setMonth(m.getMonth()+jn(0,18)),a.push({num:s,id:cl("user_"),name:W_e(),email:`datauser${s}@example.com`,address:`   ${s}`,phone:`010-${E6()}-${E6()}`,company:o.name,role:qt(S_e),organizationId:o.id,departmentId:u.id,roleId:h.id,status:qt($_e),jobLevel:qt(j_e),timezone:qt(L_e),locale:qt(O_e),createdAt:bs(f),lastLoginAt:bs(m),projectMembershipIds:[]})}return a},K_e=({users:t,projects:e,roles:n})=>{const r=n.filter(s=>s.scope==="project"),i=[],a=new Map(t.map(s=>[s.id,s]));return e.forEach(s=>{const o=t.filter(g=>g.organizationId===s.organizationId),c=o.length>=3?o:t,u=c.length>1?Math.min(3,c.length):1,h=Math.max(u,Math.min(12,c.length)),f=jn(u,h),m=new Set;for(;m.size<f;)m.add(qt(c));m.forEach(g=>{const v=Xy(2),x=new Date(v.getTime());x.setMonth(x.getMonth()+jn(0,12));const _={id:cl("mbr_"),projectId:s.id,userId:g.id,roleId:qt(r).id,allocation:jn(20,100),billable:Math.random()>.3,joinedAt:bs(v),lastActiveAt:bs(x)};i.push(_),a.get(g.id)?.projectMembershipIds.push(_.id)})}),i},X_e=({users:t,projects:e,organizations:n},r=500)=>{const i=[];for(let a=0;a<r;a++){const s=qt(t),o=n.find(f=>f.id===s.organizationId)??qt(n),c=qt(["user","project","organization","department","permission","role"]),u=(()=>{switch(c){case"user":return qt(t).id;case"project":return qt(e).id;case"organization":return o.id;case"department":return qt(e).departmentId;case"permission":return`perm_ref_${jn(100,999)}`;case"role":return`role_ref_${jn(100,999)}`;default:return cl("entity_")}})(),h=Xy(1);i.push({id:cl("log_"),actorUserId:s.id,organizationId:o.id,entityType:c,entityId:u,action:qt(F_e),description:`${s.name} ${c}   .`,timestamp:bs(h),ipAddress:`192.168.${jn(0,255)}.${jn(0,255)}`})}return i},Y_e=({organizations:t,roles:e,users:n},r=200)=>{const i=e.filter(s=>s.scope==="global"),a=[];for(let s=0;s<r;s++){const o=qt(t),c=n.find(f=>f.organizationId===o.id)??qt(n),u=Xy(1),h=new Date(u.getTime());h.setDate(h.getDate()+jn(7,30)),a.push({id:cl("invite_"),organizationId:o.id,email:`invitee${s}@example.com`,roleId:qt(i).id,inviterUserId:c.id,status:qt(B_e),createdAt:bs(u),expiresAt:bs(h)})}return a},Z_e=(t,e)=>{const n=[];return t.forEach(r=>{const i=jn(1,3);for(let a=0;a<i;a++){const s=qt(T_e),o=new Date(r.startDate),c=ak(o,jn(1,100));let u;r.status===""?u=Math.random()>.3?"":"":r.status===""?u=qt(["","",""]):u="";const h=e.filter(m=>m.projectMembershipIds.length>0&&m.organizationId===r.organizationId),f=h.length>0?qt(h):qt(e);n.push({id:cl("eng_"),projectId:r.id,name:`${s} ${String.fromCharCode(65+a)}`,code:`ENG-${jn(1e3,9999)}-${String.fromCharCode(65+a)}`,version:`v${jn(1,3)}.${jn(0,9)}.${jn(0,9)}`,status:u,manufacturer:qt(M_e),specifications:{power:`${jn(100,500)}kW`,weight:`${jn(50,300)}kg`,dimensions:`${jn(400,800)}x${jn(300,600)}x${jn(400,700)}mm`},createdAt:bs(o),updatedAt:bs(c),createdBy:f.id})}}),n},_X=(t,e,n,r,i,a)=>{const s=[],{engineId:o,parentId:c,parentName:u,level:h,orderIndex:f,createdAt:m,availableParts:g}=t;if(e>=n||Math.random()>a){const N=g.length>0?qt(g):`${u}  ${f+1}`,P={id:cl("comp_"),engineId:o,parentId:c,name:N,code:`PRT-${jn(1e4,99999)}`,type:"part",level:h,orderIndex:f,quantity:jn(1,10),unit:qt(["EA","SET","M","KG","L"]),supplier:qt(C6),cost:jn(5e3,5e5),leadTime:jn(7,30),status:qt(T6),specifications:{material:qt(P_e),color:qt(N_e)},notes:Math.random()>.7?"  ":void 0,createdAt:bs(m),updatedAt:bs(ak(m,jn(1,60)))};return s.push(P),s}const x=c===null?u:`${u}  ${f+1}`,_={id:cl("comp_"),engineId:o,parentId:c,name:x,code:h===0?`ASM-${jn(100,999)}-${f+1}`:`SUB-${jn(100,999)}-${h}-${f+1}`,type:"assembly",level:h,orderIndex:f,quantity:c===null?1:jn(1,2),unit:"SET",supplier:qt(C6),cost:jn(1e5,5e6)*(1/(h+1)),leadTime:jn(20,90)-h*5,status:qt(T6),createdAt:bs(m),updatedAt:bs(ak(m,jn(1,60)))};s.push(_);const w=Math.max(.3,1-e*.15),S=Math.max(1,Math.floor(r*w)),E=Math.max(S,Math.floor(i*w)),A=jn(S,E);for(let N=0;N<A;N++){const P=_X({engineId:o,parentId:_.id,parentName:x,level:h+1,orderIndex:N,createdAt:m,availableParts:g},e+1,n,r,i,a*.7);s.push(...P)}return s},J_e=(t,e={})=>{const{maxDepth:n=5,minChildrenPerNode:r=2,maxChildrenPerNode:i=4,topLevelAssemblies:a=[4,7],assemblyProbability:s=.8}=e,o=[];return t.forEach(c=>{const u=new Date(c.createdAt),h=jn(a[0],a[1]),f=[],m=[...A_e];for(let g=0;g<h&&m.length>0;g++){const v=jn(0,m.length-1);f.push(m.splice(v,1)[0])}f.forEach((g,v)=>{const x=_X({engineId:c.id,parentId:null,parentName:g.name,level:0,orderIndex:v,createdAt:u,availableParts:g.parts},0,n,r,i,s);o.push(...x)})}),o},Q_e=(t,e,n)=>{const r=new Map;t.forEach(i=>{r.set(i.id,n.filter(a=>a.departmentId===i.id))}),t.forEach(i=>{const a=r.get(i.id)??[];i.managerUserId=a.length>0?qt(a).id:void 0}),e.forEach(i=>{const a=n.filter(s=>s.organizationId===i.id);i.primaryContactUserId=a.length>0?qt(a).id:void 0})},ewe=t=>{console.time(" Mock  ");const e={organizationCount:10,projectCount:60,userCount:1e4,bomMaxDepth:5,bomMinChildrenPerNode:2,bomMaxChildrenPerNode:4,bomTopLevelAssemblies:[4,7],bomAssemblyProbability:.8,...t};try{const n=z_e(),r=U_e(n),i=V_e(e.organizationCount),a=H_e(i,3,6),s=G_e(i,a,e.projectCount),o=q_e({count:e.userCount,organizations:i,departments:a,roles:r}),c=K_e({users:o,projects:s,roles:r}),u=X_e({users:o,projects:s,organizations:i}),h=Y_e({organizations:i,roles:r,users:o}),f=Z_e(s,o),m=J_e(f,{maxDepth:e.bomMaxDepth,minChildrenPerNode:e.bomMinChildrenPerNode,maxChildrenPerNode:e.bomMaxChildrenPerNode,topLevelAssemblies:e.bomTopLevelAssemblies,assemblyProbability:e.bomAssemblyProbability});return Q_e(a,i,o),{permissions:n,roles:r,organizations:i,departments:a,projects:s,users:o,projectMemberships:c,auditLogs:u,invitations:h,engines:f,components:m}}catch(n){throw console.error(" Mock   :",n),console.timeEnd(" Mock  "),n instanceof Error&&(console.error(" :",n.message),console.error(" :",n.stack)),new Error(`Mock     : ${n}`)}},Jl=ewe(),Dl=Jl.users,sk=Jl.organizations,ok=Jl.departments,a2=Jl.projects,lk=Jl.permissions,ck=Jl.roles,uk=Jl.projectMemberships,dk=Jl.auditLogs,hk=Jl.invitations,yy=Jl.engines,cg=Jl.components,twe=()=>Dl.slice(0,100).map((t,e)=>({id:e+1,name:t.name,username:t.name.replace(/\s+/g,"").toLowerCase()+(e+1),email:t.email,address:{street:t.address.split(" ")[0]+" "+(t.address.split(" ")[1]||""),suite:`Apt. ${jn(100,999)}`,city:t.address.includes("")?t.address.split(" ")[0]:"",zipcode:`${jn(1e4,99999)}`,geo:{lat:(37.5+Math.random()*.5).toFixed(4),lng:(126.9+Math.random()*.5).toFixed(4)}},phone:t.phone,website:`${t.name.toLowerCase().replace(/\s+/g,"")}.${qt(["com","net","org","io"])}`,company:{name:t.company,catchPhrase:`${qt(["","","",""])} ${qt(["","","",""])}`,bs:`${qt(["e-commerce","cloud computing","AI-driven","blockchain"])} ${qt(["solutions","platforms","services","infrastructure"])}`}})),nwe=()=>{const t=["  ","  ","  ","  ","  ","  "," ","  "];return Array.from({length:100},(e,n)=>({id:n+1,userId:n%10+1,title:`${qt(t)} - ${n+1}`,body:` ${n+1} . Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
    Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
    Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.`}))},rwe=()=>{const t=[" ",""," "," "," "];return Array.from({length:500},(e,n)=>({id:n+1,postId:n%100+1,name:`${qt(t)} -  ${n+1}`,email:`commenter${n+1}@example.com`,body:`${qt(t)}.  ${n+1} . 
    Lorem ipsum dolor sit amet, consectetur adipiscing elit.`}))},iwe=()=>{const t=[" "," "," "," "," "];return Array.from({length:100},(e,n)=>({id:n+1,userId:n%10+1,title:`${qt(t)} ${Math.floor(n/10)+1}`}))},awe=()=>{const t=["92c952","771796","d32776","f66b97","24f355","e8a838"];return Array.from({length:300},(e,n)=>({id:n+1,albumId:n%100+1,title:` ${n+1}`,url:`https://via.placeholder.com/600/${qt(t)}`,thumbnailUrl:`https://via.placeholder.com/150/${qt(t)}`}))},swe=()=>{const t=[" "," "," "," "," "," "," "];return Array.from({length:200},(e,n)=>({id:n+1,userId:n%10+1,title:`${qt(t)} - ${n+1}`,completed:Math.random()>.5}))},fk=twe(),pk=nwe(),mk=rwe(),gk=iwe(),vk=awe(),yk=swe(),bk=(t,e)=>{const n=e.filter(s=>s.engineId===t),r=new Map(n.map(s=>[s.id,{...s,children:[]}])),i=[];n.forEach(s=>{const o=r.get(s.id);if(s.parentId===null)i.push(o);else{const c=r.get(s.parentId);c&&c.children.push(o)}});const a=s=>{s.sort((o,c)=>o.orderIndex-c.orderIndex),s.forEach(o=>{o.children.length>0&&a(o.children)})};return a(i),i},xk=(t,e,n)=>e.filter(i=>i.projectId===t).map(i=>{const a=n.filter(h=>h.engineId===i.id),s=a.filter(h=>h.type==="assembly"&&h.level===0),o=a.filter(h=>h.type==="part"),c=a.reduce((h,f)=>h+f.cost*f.quantity,0),u=Math.max(...a.map(h=>h.level),0);return{engine:i,assembliesCount:s.length,totalPartsCount:o.length,totalComponentsCount:a.length,estimatedTotalCost:c,maxTreeDepth:u+1}}),owe=async(t,e)=>(console.log(" Fetching mock data from path:",t,"with params:",e),await new Promise(n=>setTimeout(n,300)),t==="/countries"||t==="/api/countries"?lwe(e):t==="/cities"||t==="/api/cities"?cwe(e):t==="/categories"||t==="/api/categories"?uwe(e):t==="/products"||t==="/api/products"?dwe(e):t==="/status"||t==="/api/status"?hwe(e):t==="/priorities"||t==="/api/priorities"?fwe(e):t==="/tags"||t==="/api/tags"?pwe(e):t==="/languages"||t==="/api/languages"?mwe(e):t==="/currencies"||t==="/api/currencies"?gwe(e):t==="/timezones"||t==="/api/timezones"?vwe(e):t==="/permissions"||t==="/api/permissions"?ywe(e):t==="/roles"||t==="/api/roles"?bwe(e):t==="/departments"||t==="/api/departments"?xwe(e):t==="/organizations"||t==="/api/organizations"?_we(e):t==="/projects"||t==="/api/projects"?wwe(e):t==="/project-memberships"||t==="/api/project-memberships"?Swe(e):t==="/audit-logs"||t==="/api/audit-logs"?Ewe(e):t==="/invitations"||t==="/api/invitations"?Cwe(e):t==="/engines"||t==="/api/engines"?Twe(e):t==="/components"||t==="/api/components"?Mwe(e):t==="/component-tree"||t==="/api/component-tree"?Awe(e):t==="/engine-summary"||t==="/api/engine-summary"?Pwe(e):Nwe(t,e)),lwe=t=>{const e=[{id:"kr",name:"",code:"KR",continent:""},{id:"us",name:"",code:"US",continent:""},{id:"jp",name:"",code:"JP",continent:""},{id:"cn",name:"",code:"CN",continent:""},{id:"uk",name:"",code:"GB",continent:""},{id:"fr",name:"",code:"FR",continent:""},{id:"de",name:"",code:"DE",continent:""},{id:"ca",name:"",code:"CA",continent:""},{id:"au",name:"",code:"AU",continent:""},{id:"sg",name:"",code:"SG",continent:""}];return console.log(` /countries : ${e.length}  `),Kr(e,t)},cwe=t=>{const e=[{id:"seoul",name:"",country:"",population:9720846},{id:"busan",name:"",country:"",population:3413841},{id:"tokyo",name:"",country:"",population:1396e4},{id:"newyork",name:"",country:"",population:8336817},{id:"london",name:"",country:"",population:8982e3},{id:"paris",name:"",country:"",population:2165423},{id:"beijing",name:"",country:"",population:2154e4},{id:"shanghai",name:"",country:"",population:2428e4},{id:"singapore",name:"",country:"",population:5685807},{id:"sydney",name:"",country:"",population:5312163}];return console.log(` /cities : ${e.length}  `),Kr(e,t)},uwe=t=>{const e=[{id:"electronics",name:"",icon:"",description:",  "},{id:"fashion",name:"",icon:"",description:", "},{id:"food",name:"",icon:"",description:", "},{id:"books",name:"",icon:"",description:", "},{id:"sports",name:"",icon:"",description:""},{id:"beauty",name:"",icon:"",description:", "},{id:"home",name:"/",icon:"",description:", "},{id:"toy",name:"",icon:"",description:", "}];return console.log(` /categories : ${e.length}  `),Kr(e,t)},dwe=t=>{const e=[{id:"p1",name:'MacBook Pro 16"',price:329e4,category:"",stock:15},{id:"p2",name:"iPhone 15 Pro",price:155e4,category:"",stock:42},{id:"p3",name:"AirPods Pro",price:329e3,category:"",stock:78},{id:"p4",name:"Nike Air Max",price:159e3,category:"",stock:24},{id:"p5",name:"Adidas Ultraboost",price:189e3,category:"",stock:31},{id:"p6",name:"Sony WH-1000XM5",price:449e3,category:"",stock:19},{id:"p7",name:"iPad Air",price:929e3,category:"",stock:28},{id:"p8",name:"Samsung Galaxy S24",price:119e4,category:"",stock:35}];return console.log(` /products : ${e.length}  `),Kr(e,t)},hwe=t=>{const e=[{id:"todo",name:" ",label:" ",color:"#9CA3AF"},{id:"in-progress",name:" ",label:" ",color:"#3B82F6"},{id:"review",name:"",label:"",color:"#F59E0B"},{id:"done",name:"",label:"",color:"#10B981"},{id:"blocked",name:"",label:"",color:"#EF4444"}];return console.log(` /status : ${e.length}  `),Kr(e,t)},fwe=t=>{const e=[{id:"low",name:"",label:"",icon:"",level:1},{id:"medium",name:"",label:"",icon:"",level:2},{id:"high",name:"",label:"",icon:"",level:3},{id:"urgent",name:"",label:"",icon:"",level:4}];return console.log(` /priorities : ${e.length}  `),Kr(e,t)},pwe=t=>{const e=[{id:"frontend",name:"",label:"",color:"#3B82F6"},{id:"backend",name:"",label:"",color:"#10B981"},{id:"design",name:"",label:"",color:"#F59E0B"},{id:"documentation",name:"",label:"",color:"#8B5CF6"},{id:"bug",name:"",label:"",color:"#EF4444"},{id:"feature",name:"",label:"",color:"#06B6D4"},{id:"enhancement",name:"",label:"",color:"#84CC16"},{id:"testing",name:"",label:"",color:"#EC4899"}];return console.log(` /tags : ${e.length}  `),Kr(e,t)},mwe=t=>{const e=[{id:"ko",name:"",label:"",nativeName:"",code:"ko-KR"},{id:"en",name:"",label:"",nativeName:"English",code:"en-US"},{id:"ja",name:"",label:"",nativeName:"",code:"ja-JP"},{id:"zh",name:"",label:"",nativeName:"",code:"zh-CN"},{id:"es",name:"",label:"",nativeName:"Espaol",code:"es-ES"},{id:"fr",name:"",label:"",nativeName:"Franais",code:"fr-FR"},{id:"de",name:"",label:"",nativeName:"Deutsch",code:"de-DE"},{id:"ru",name:"",label:"",nativeName:"",code:"ru-RU"}];return console.log(` /languages : ${e.length}  `),Kr(e,t)},gwe=t=>{const e=[{id:"krw",name:" ",label:" ()",code:"KRW",symbol:""},{id:"usd",name:" ",label:" ($)",code:"USD",symbol:"$"},{id:"jpy",name:" ",label:" ()",code:"JPY",symbol:""},{id:"eur",name:"",label:" ()",code:"EUR",symbol:""},{id:"gbp",name:" ",label:" ()",code:"GBP",symbol:""},{id:"cny",name:" ",label:" ()",code:"CNY",symbol:""},{id:"aud",name:" ",label:"  (A$)",code:"AUD",symbol:"A$"},{id:"cad",name:" ",label:"  (C$)",code:"CAD",symbol:"C$"}];return console.log(` /currencies : ${e.length}  `),Kr(e,t)},vwe=t=>{const e=[{id:"asia-seoul",name:"",label:" (UTC+9)",timezone:"Asia/Seoul",offset:"+09:00"},{id:"asia-tokyo",name:"",label:" (UTC+9)",timezone:"Asia/Tokyo",offset:"+09:00"},{id:"america-newyork",name:"",label:" (UTC-5)",timezone:"America/New_York",offset:"-05:00"},{id:"america-losangeles",name:"",label:" (UTC-8)",timezone:"America/Los_Angeles",offset:"-08:00"},{id:"europe-london",name:"",label:" (UTC+0)",timezone:"Europe/London",offset:"+00:00"},{id:"europe-paris",name:"",label:" (UTC+1)",timezone:"Europe/Paris",offset:"+01:00"},{id:"australia-sydney",name:"",label:" (UTC+10)",timezone:"Australia/Sydney",offset:"+10:00"},{id:"asia-dubai",name:"",label:" (UTC+4)",timezone:"Asia/Dubai",offset:"+04:00"}];return console.log(` /timezones : ${e.length}  `),Kr(e,t)},ywe=t=>(console.log(` /permissions : ${lk.length} `),Kr(lk,t)),bwe=t=>(console.log(` /roles : ${ck.length} `),Kr(ck,t)),xwe=t=>(console.log(` /departments : ${ok.length} `),Kr(ok,t)),_we=t=>(console.log(` /organizations : ${sk.length} `),Kr(sk,t)),wwe=t=>(console.log(` /projects : ${a2.length} `),Kr(a2,t)),Swe=t=>(console.log(` /project-memberships : ${uk.length} `),Kr(uk,t)),Ewe=t=>(console.log(` /audit-logs : ${dk.length} `),Kr(dk,t)),Cwe=t=>(console.log(` /invitations : ${hk.length} `),Kr(hk,t)),Twe=t=>(console.log(` /engines : ${yy.length} `),Kr(yy,t)),Mwe=t=>(console.log(` /components : ${cg.length} `),Kr(cg,t)),Awe=t=>{const e=t?.engineId;if(e){const r=bk(e,cg);return console.log(` /component-tree : Engine ${e}   `),r}const n=yy[0];if(n){const r=bk(n.id,cg);return console.log(` /component-tree :  Engine ${n.id}   `),r}return[]},Pwe=t=>{const e=t?.projectId;if(e){const r=xk(e,yy,cg);return console.log(` /engine-summary : Project ${e}   `),r}const n=a2[0];if(n){const r=xk(n.id,yy,cg);return console.log(` /engine-summary :  Project ${n.id}   `),r}return[]},Nwe=(t,e)=>{let n=Dl;if(t==="/users"||t==="/api/users")return console.log(` /users : JSONPlaceholder   ${fk.length} `),Kr(fk,e);if(t==="/cms-users"||t==="/api/cms-users")n=Dl.filter(r=>r.role.includes("")||r.role.includes("")||r.role.includes("")),console.log(` /cms-users : CMS   ${n.length} `);else if(t==="/admins"||t==="/api/admins"||t==="/api/users/admins")n=Dl.filter(r=>r.role.includes("")||r.role.includes("")||r.role.includes("")),console.log(` /admins :   ${n.length} `);else if(t==="/companies"||t==="/api/companies")n=[...new Set(Dl.map(i=>i.company))].map((i,a)=>({id:a+1,name:i,company:i,employeeCount:Dl.filter(s=>s.company===i).length})),console.log(` /companies :   ${n.length} `);else if(t==="/company-employees"||t==="/api/company-employees"){const r=["","",""];n=Dl.filter(i=>r.includes(i.company)),console.log(` /company-employees :    ${n.length} `)}else if(t==="/developers"||t==="/api/developers"||t==="/api/users/developers")n=Dl.filter(r=>r.role.includes("")),console.log(` /developers :   ${n.length} `);else if(t==="/managers"||t==="/api/managers"||t==="/api/users/managers")n=Dl.filter(r=>r.role.includes("")),console.log(` /managers :   ${n.length} `);else if(t==="/products"||t==="/api/products")n=Dl.filter(r=>r.role.includes("")||r.role.includes("")||r.role.includes("")),console.log(` /products :    ${n.length} `);else{if(t==="/posts"||t==="/api/posts")return console.log(` /posts :   ${pk.length} `),Kr(pk,e);if(t==="/comments"||t==="/api/comments")return console.log(` /comments :   ${mk.length} `),Kr(mk,e);if(t==="/albums"||t==="/api/albums")return console.log(` /albums :   ${gk.length} `),Kr(gk,e);if(t==="/photos"||t==="/api/photos")return console.log(` /photos :   ${vk.length} `),Kr(vk,e);if(t==="/todos"||t==="/api/todos")return console.log(` /todos :   ${yk.length} `),Kr(yk,e);console.log(`       :   ${n.length} `)}if(e&&typeof e.search=="string"){const r=e.search.toLowerCase();n=Dl.filter(i=>i.name.toLowerCase().includes(r)||i.email.toLowerCase().includes(r)||i.company.toLowerCase().includes(r)||i.role.toLowerCase().includes(r))}return Kr(n,e)},Kr=(t,e)=>{if(e&&e.getAll===!0)return console.log(` Returning all data: ${t.length} items`),t;if(e&&typeof e.page=="number"&&typeof e.limit=="number"){const n=e.page,r=e.limit,i=(n-1)*r,a=i+r,s=t.length,o=Math.min(a,s)-i;console.log(` Pagination: page ${n}, limit ${r}, startIndex ${i}, endIndex ${a}`),console.log(` Total data: ${s}, returning: ${o} items`);const c=t.slice(i,a);return Object.assign(c,{__meta:{totalItems:s,currentPage:n,itemsPerPage:r,hasNextPage:a<s,startIndex:i,endIndex:a}}),c}return console.log(` Returning all data (default): ${t.length} items`),t},A1={MOCK_DATA:owe},wX=Object.freeze(Object.defineProperty({__proto__:null,BaseApiService:Ky,ElementsApiService:vX,PagesApiService:bX,ProjectsApiService:yX,apiConfig:A1,buildComponentTree:bk,cmsMockData:Jl,elementsApi:Po,getProjectEnginesSummary:xk,largeMockData:Dl,mockAlbums:gk,mockAuditLogs:dk,mockComments:mk,mockComponents:cg,mockDepartments:ok,mockEngines:yy,mockInvitations:hk,mockJsonPlaceholderUsers:fk,mockOrganizations:sk,mockPermissions:lk,mockPhotos:vk,mockPosts:pk,mockProjectMemberships:uk,mockProjects:a2,mockRoles:ck,mockTodos:yk,pagesApi:lg,projectsApi:Od},Symbol.toStringTag,{value:"Module"}));class ri{static generateId(){return crypto.randomUUID()}static async delay(e=0){return new Promise(n=>setTimeout(n,e))}static findBodyElement(e,n){return e.find(i=>i.page_id===n&&i.tag==="body")?.id||null}static findLayoutBodyElement(e,n){return e.find(i=>i.layout_id===n&&i.tag==="body")?.id||null}static findBodyByContext(e,n,r){return r?this.findLayoutBodyElement(e,r):n?this.findBodyElement(e,n):null}static migrateOrphanElementsToBody(e,n){const r=e.find(o=>o.page_id===n&&o.tag==="body");if(!r)return console.warn(` Body    : pageId=${n}`),{elements:e,updatedElements:[]};const i=e.filter(o=>o.page_id===n&&o.parent_id===null&&o.tag!=="body");if(i.length===0)return{elements:e,updatedElements:[]};console.log(` ${i.length}   body :`,{pageId:n,bodyId:r.id,orphanIds:i.map(o=>o.id)});const a=i.map(o=>({...o,parent_id:r.id}));return{elements:e.map(o=>a.find(u=>u.id===o.id)||o),updatedElements:a}}static getDescendants(e,n){const r=e.filter(a=>a.parent_id===n),i=[...r];return r.forEach(a=>{i.push(...this.getDescendants(e,a.id))}),i}static isAncestor(e,n,r){let i=e.find(a=>a.id===r);for(;i;){if(i.parent_id===n)return!0;i=e.find(a=>a.id===i.parent_id)}return!1}static getElementPath(e,n){const r=[];let i=e.find(a=>a.id===n);for(;i;)r.unshift(i),i=e.find(a=>a.id===i.parent_id);return r}}const Dwe=Object.freeze(Object.defineProperty({__proto__:null,ElementUtils:ri},Symbol.toStringTag,{value:"Module"})),kwe=fn({base:"react-aria-TextField",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});function _k({label:t,description:e,errorMessage:n,placeholder:r="Enter text...",type:i="text",value:a,onChange:s,isRequired:o,isDisabled:c,isReadOnly:u,variant:h="primary",size:f="md",isLoading:m,...g}){return m?l.jsx(Hl,{componentVariant:"input",size:f,className:g.className,"aria-label":"Loading text field..."}):l.jsxs(xn,{...g,className:ah(g.className,(v,x)=>kwe({...x,variant:h,size:f,className:v})),value:a,onChange:s,isRequired:o,isDisabled:c,isReadOnly:u,children:[t&&l.jsx(kt,{children:t}),l.jsx(Pn,{type:i,placeholder:r}),e&&l.jsx(v_,{slot:"description",children:e}),l.jsx(X3,{children:n})]})}fn({base:"react-aria-NumberField",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fn({base:"react-aria-Radio",variants:{isFocusVisible:{true:"focus-visible",false:""}}});fn({base:"react-aria-RadioGroup",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"default",size:"md"}});const Rwe=fn({base:"react-aria-Select",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});function s2({label:t,description:e,errorMessage:n,children:r,items:i,placeholder:a,dataBinding:s,columnMapping:o,variant:c="primary",size:u="md",selectionMode:h="single",multipleDisplayMode:f="count",renderMultipleValue:m,isLoading:g,...v}){const{data:x,loading:_,error:w}=RI({dataBinding:s,componentName:"Select",fallbackData:[{id:1,name:"Option 1",value:"option-1"},{id:2,name:"Option 2",value:"option-2"}]});if(g)return l.jsx(Hl,{componentVariant:"input",size:u,className:v.className,"aria-label":"Loading select..."});const S=t&&String(t).trim(),E=S?void 0:v["aria-label"]||a||"Select an option",A=s&&"source"in s&&"name"in s&&!("type"in s),N=!A&&s&&"type"in s&&s.type==="collection"||A,P=ve.useMemo(()=>{if(!N||_||w)return i;if(o&&x.length>0)return x.map((k,L)=>({id:String(k.id||L),...k}));if(x.length>0){const k=s?.config,L=k?.columnMapping?.id||k?.dataMapping?.idField||"id",$=k?.columnMapping?.label||k?.dataMapping?.labelField||"label";return x.map((B,q)=>({id:String(B[L]||B.id||q),label:String(B[$]||B.label||B.name||`Item ${q+1}`),...B}))}return i},[N,_,w,x,o,s,i]),R=ve.useCallback((k,L)=>{if(h!=="multiple"||!k||k==="all"||Array.isArray(k)&&k.length===0)return null;const $=L?Array.from(L):[],B=Array.isArray(k)?k.length:0;if(B===0)return null;switch(f){case"count":return`${B} `;case"list":{const q=$.map(U=>{const J=U;return String(J.label||J.name||J.id||"")}).filter(Boolean);return q.length>0?q.join(", "):`${B} `}case"custom":return m?m($):`${B} `;default:return`${B} `}},[h,f,m]),D=ve.useMemo(()=>N&&_?l.jsx(En,{textValue:"Loading",className:"react-aria-ListBoxItem",children:"   ..."},"loading"):N&&w?l.jsxs(En,{textValue:"Error",className:"react-aria-ListBoxItem",children:[" : ",w]},"error"):N&&o&&x.length>0?r:N&&!o&&x.length>0?(k=>{const L=k.id!==void 0&&k.id!==null?String(k.id):void 0,$=k.label!==void 0&&k.label!==null?String(k.label):void 0;return l.jsx(En,{id:L,textValue:$,className:"react-aria-ListBoxItem",children:$},L)}):r,[N,_,w,o,x,r]);return l.jsx(wi,{...v,className:ah(v.className,(k,L)=>Rwe({...L,variant:c,size:u,className:k})),"aria-label":E,placeholder:a,isDisabled:N&&(_||!!w),"data-selection-mode":h,selectionMode:h,children:k=>l.jsxs(l.Fragment,{children:[S&&l.jsx(kt,{className:"react-aria-Label",children:String(t)}),l.jsxs(Pt,{className:"react-aria-Button",children:[h==="multiple"?(()=>{const L=R(k.selectedKeys,k.selectedItems);return L?l.jsx(ai,{children:L}):l.jsx(ai,{})})():l.jsx(ai,{}),l.jsx("span",{"aria-hidden":"true",className:"select-chevron",children:l.jsx(_i,{size:16})})]}),e&&String(e).trim()&&l.jsx(v_,{slot:"description",className:"react-aria-Description",children:String(e)}),N&&_&&l.jsx(v_,{slot:"description",className:"react-aria-Description",children:"   ..."}),N&&w&&l.jsxs(X3,{className:"react-aria-FieldError",children:[" : ",w]}),n&&!w&&l.jsx(X3,{className:"react-aria-FieldError",children:typeof n=="function"?n({isInvalid:!0}):String(n)}),l.jsx(Yr,{className:"react-aria-Popover",placement:"bottom start",offset:4,children:l.jsx(Ar,{items:P,className:"react-aria-ListBox",selectionMode:h,children:D})})]})})}function km(t){return l.jsx(En,{...t,className:"react-aria-ListBoxItem"})}fn({base:"react-aria-ComboBox",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fn({base:"react-aria-Checkbox",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"},isFocusVisible:{true:"focus-visible",false:""}},defaultVariants:{variant:"default",size:"md"}});fn({base:"react-aria-CheckboxGroup",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"default",size:"md"}});function Av(t,e,n){let r=n.initialDeps??[],i,a=!0;function s(){var o,c,u;let h;n.key&&((o=n.debug)!=null&&o.call(n))&&(h=Date.now());const f=t();if(!(f.length!==r.length||f.some((v,x)=>r[x]!==v)))return i;r=f;let g;if(n.key&&((c=n.debug)!=null&&c.call(n))&&(g=Date.now()),i=e(...f),n.key&&((u=n.debug)!=null&&u.call(n))){const v=Math.round((Date.now()-h)*100)/100,x=Math.round((Date.now()-g)*100)/100,_=x/16,w=(S,E)=>{for(S=String(S);S.length<E;)S=" "+S;return S};console.info(`%c ${w(x,5)} /${w(v,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*_,120))}deg 100% 31%);`,n?.key)}return n?.onChange&&!(a&&n.skipInitialOnChange)&&n.onChange(i),a=!1,i}return s.updateDeps=o=>{r=o},s}function M6(t,e){if(t===void 0)throw new Error("Unexpected undefined");return t}const Iwe=(t,e)=>Math.abs(t-e)<1.01,$we=(t,e,n)=>{let r;return function(...i){t.clearTimeout(r),r=t.setTimeout(()=>e.apply(this,i),n)}},A6=t=>{const{offsetWidth:e,offsetHeight:n}=t;return{width:e,height:n}},jwe=t=>t,Lwe=t=>{const e=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let i=e;i<=n;i++)r.push(i);return r},Owe=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;const i=s=>{const{width:o,height:c}=s;e({width:Math.round(o),height:Math.round(c)})};if(i(A6(n)),!r.ResizeObserver)return()=>{};const a=new r.ResizeObserver(s=>{const o=()=>{const c=s[0];if(c?.borderBoxSize){const u=c.borderBoxSize[0];if(u){i({width:u.inlineSize,height:u.blockSize});return}}i(A6(n))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return a.observe(n,{box:"border-box"}),()=>{a.unobserve(n)}},P6={passive:!0},N6=typeof window>"u"?!0:"onscrollend"in window,Fwe=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;let i=0;const a=t.options.useScrollendEvent&&N6?()=>{}:$we(r,()=>{e(i,!1)},t.options.isScrollingResetDelay),s=h=>()=>{const{horizontal:f,isRtl:m}=t.options;i=f?n.scrollLeft*(m&&-1||1):n.scrollTop,a(),e(i,h)},o=s(!0),c=s(!1);c(),n.addEventListener("scroll",o,P6);const u=t.options.useScrollendEvent&&N6;return u&&n.addEventListener("scrollend",c,P6),()=>{n.removeEventListener("scroll",o),u&&n.removeEventListener("scrollend",c)}},Bwe=(t,e,n)=>{if(e?.borderBoxSize){const r=e.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return t[n.options.horizontal?"offsetWidth":"offsetHeight"]},zwe=(t,{adjustments:e=0,behavior:n},r)=>{var i,a;const s=t+e;(a=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||a.call(i,{[r.options.horizontal?"left":"top"]:s,behavior:n})};class Uwe{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(a=>{const s=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(s):s()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var a;return(a=r())==null?void 0:a.observe(i,{box:"border-box"})},unobserve:i=>{var a;return(a=r())==null?void 0:a.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:jwe,rangeExtractor:Lwe,onChange:()=>{},measureElement:Bwe,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=Av(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,a=new Map;for(let s=r-1;s>=0;s--){const o=n[s];if(i.has(o.lane))continue;const c=a.get(o.lane);if(c==null||o.end>c.end?a.set(o.lane,o):o.end<c.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((s,o)=>s.end===o.end?s.index-o.index:s.end-o.end)[0]:void 0},this.getMeasurementOptions=Av(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,r,i,a,s,o)=>(this.prevLanes!==void 0&&this.prevLanes!==o&&(this.lanesChangedFlag=!0),this.prevLanes=o,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:a,enabled:s,lanes:o}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=Av(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:a,enabled:s,lanes:o},c)=>{if(!s)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const m of this.laneAssignments.keys())m>=n&&this.laneAssignments.delete(m);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(m=>{this.itemSizeCache.set(m.key,m.size)}));const u=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const h=this.measurementsCache.slice(0,u),f=new Array(o).fill(void 0);for(let m=0;m<u;m++){const g=h[m];g&&(f[g.lane]=m)}for(let m=u;m<n;m++){const g=a(m),v=this.laneAssignments.get(m);let x,_;if(v!==void 0&&this.options.lanes>1){x=v;const A=f[x],N=A!==void 0?h[A]:void 0;_=N?N.end+this.options.gap:r+i}else{const A=this.options.lanes===1?h[m-1]:this.getFurthestMeasurement(h,m);_=A?A.end+this.options.gap:r+i,x=A?A.lane:m%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(m,x)}const w=c.get(g),S=typeof w=="number"?w:this.options.estimateSize(m),E=_+S;h[m]={index:m,start:_,size:S,end:E,key:g,lane:x},f[x]=m}return this.measurementsCache=h,h},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Av(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,a)=>this.range=n.length>0&&r>0?Vwe({measurements:n,outerSize:r,scrollOffset:i,lanes:a}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Av(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,a,s)=>a===null||s===null?[]:n({startIndex:a,endIndex:s,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),a=this.measurementsCache[i];if(!a)return;const s=a.key,o=this.elementsCache.get(s);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(s,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const a=this.itemSizeCache.get(i.key)??i.size,s=r-a;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,s,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=Av(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let a=0,s=n.length;a<s;a++){const o=n[a],c=r[o];i.push(c)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return M6(r[SX(0,r.length-1,i=>M6(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const a=this.getSize(),s=this.getScrollOffset();r==="auto"&&(r=n>=s+a?"end":"start"),r==="center"?n+=(i-a)/2:r==="end"&&(n-=a);const o=this.getTotalSize()+this.options.scrollMargin-a;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const a=this.getSize(),s=this.getScrollOffset();if(r==="auto")if(i.end>=s+a-this.options.scrollPaddingEnd)r="end";else if(i.start<=s+this.options.scrollPaddingStart)r="start";else return[s,r];const o=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let a=0;const s=10,o=u=>{if(!this.targetWindow)return;const h=this.getOffsetForIndex(n,u);if(!h){console.warn("Failed to get offset for index:",n);return}const[f,m]=h;this._scrollToOffset(f,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const g=this.getScrollOffset(),v=this.getOffsetForIndex(n,m);if(!v){console.warn("Failed to get offset for index:",n);return}Iwe(v[0],g)||c(m)})},c=u=>{this.targetWindow&&(a++,a<s?this.targetWindow.requestAnimationFrame(()=>o(u)):console.warn(`Failed to scroll to index ${n} after ${s} attempts.`))};o(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=r[r.length-1])==null?void 0:n.end)??0;else{const a=Array(this.options.lanes).fill(null);let s=r.length-1;for(;s>=0&&a.some(o=>o===null);){const o=r[s];a[o.lane]===null&&(a[o.lane]=o.end),s--}i=Math.max(...a.filter(o=>o!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(e)}}const SX=(t,e,n,r)=>{for(;t<=e;){const i=(t+e)/2|0,a=n(i);if(a<r)t=i+1;else if(a>r)e=i-1;else return i}return t>0?t-1:0};function Vwe({measurements:t,outerSize:e,scrollOffset:n,lanes:r}){const i=t.length-1,a=c=>t[c].start;if(t.length<=r)return{startIndex:0,endIndex:i};let s=SX(0,i,a,n),o=s;if(r===1)for(;o<i&&t[o].end<n+e;)o++;else if(r>1){const c=Array(r).fill(0);for(;o<i&&c.some(h=>h<n+e);){const h=t[o];c[h.lane]=h.end,o++}const u=Array(r).fill(n+e);for(;s>=0&&u.some(h=>h>=n);){const h=t[s];u[h.lane]=h.start,s--}s=Math.max(0,s-s%r),o=Math.min(i,o+(r-1-o%r))}return{startIndex:s,endIndex:o}}const D6=typeof document<"u"?T.useLayoutEffect:T.useEffect;function Hwe(t){const e=T.useReducer(()=>({}),{})[1],n={...t,onChange:(i,a)=>{var s;a?Zm.flushSync(e):e(),(s=t.onChange)==null||s.call(t,i,a)}},[r]=T.useState(()=>new Uwe(n));return r.setOptions(n),D6(()=>r._didMount(),[]),D6(()=>r._willUpdate()),r}function EX(t){return Hwe({observeElementRect:Owe,observeElementOffset:Fwe,scrollToFn:zwe,...t})}fn({base:"react-aria-ListBox",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fn({base:"react-aria-GridList",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fn({base:"react-aria-Tabs",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fn({base:"react-aria-TabList",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});T.createContext(!1);fn({base:"react-aria-Tree",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fn({base:"react-aria-Panel",variants:{variant:{default:"panel-default",tab:"panel-tab",sidebar:"panel-sidebar",card:"panel-card",modal:"panel-modal"}},defaultVariants:{variant:"default"}});fn({base:"react-aria-Calendar",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fn({base:"react-aria-DatePicker",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fn({base:"react-aria-DateRangePicker",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fn({base:"react-aria-DateField",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fn({base:"react-aria-TimeField",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fn({base:"react-aria-Switch",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"},isFocusVisible:{true:"focus-visible",false:""}},defaultVariants:{variant:"default",size:"md"}});function Gwe(){return{accessor:(t,e)=>typeof t=="function"?{...e,accessorFn:t}:{...e,accessorKey:t},display:t=>t,group:t=>t}}function Af(t,e){return typeof t=="function"?t(e):t}function ul(t,e){return n=>{e.setState(r=>({...r,[t]:Af(n,r[t])}))}}function _T(t){return t instanceof Function}function Wwe(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function qwe(t,e){const n=[],r=i=>{i.forEach(a=>{n.push(a);const s=e(a);s!=null&&s.length&&r(s)})};return r(t),n}function pn(t,e,n){let r=[],i;return a=>{let s;n.key&&n.debug&&(s=Date.now());const o=t(a);if(!(o.length!==r.length||o.some((h,f)=>r[f]!==h)))return i;r=o;let u;if(n.key&&n.debug&&(u=Date.now()),i=e(...o),n==null||n.onChange==null||n.onChange(i),n.key&&n.debug&&n!=null&&n.debug()){const h=Math.round((Date.now()-s)*100)/100,f=Math.round((Date.now()-u)*100)/100,m=f/16,g=(v,x)=>{for(v=String(v);v.length<x;)v=" "+v;return v};console.info(`%c ${g(f,5)} /${g(h,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*m,120))}deg 100% 31%);`,n?.key)}return i}}function mn(t,e,n,r){return{debug:()=>{var i;return(i=t?.debugAll)!=null?i:t[e]},key:!1,onChange:r}}function Kwe(t,e,n,r){const i=()=>{var s;return(s=a.getValue())!=null?s:t.options.renderFallbackValue},a={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(r),renderValue:i,getContext:pn(()=>[t,n,e,a],(s,o,c,u)=>({table:s,column:o,row:c,cell:u,getValue:u.getValue,renderValue:u.renderValue}),mn(t.options,"debugCells"))};return t._features.forEach(s=>{s.createCell==null||s.createCell(a,n,e,t)},{}),a}function Xwe(t,e,n,r){var i,a;const o={...t._getDefaultColumnDef(),...e},c=o.accessorKey;let u=(i=(a=o.id)!=null?a:c?typeof String.prototype.replaceAll=="function"?c.replaceAll(".","_"):c.replace(/\./g,"_"):void 0)!=null?i:typeof o.header=="string"?o.header:void 0,h;if(o.accessorFn?h=o.accessorFn:c&&(c.includes(".")?h=m=>{let g=m;for(const x of c.split(".")){var v;g=(v=g)==null?void 0:v[x]}return g}:h=m=>m[o.accessorKey]),!u)throw new Error;let f={id:`${String(u)}`,accessorFn:h,parent:r,depth:n,columnDef:o,columns:[],getFlatColumns:pn(()=>[!0],()=>{var m;return[f,...(m=f.columns)==null?void 0:m.flatMap(g=>g.getFlatColumns())]},mn(t.options,"debugColumns")),getLeafColumns:pn(()=>[t._getOrderColumnsFn()],m=>{var g;if((g=f.columns)!=null&&g.length){let v=f.columns.flatMap(x=>x.getLeafColumns());return m(v)}return[f]},mn(t.options,"debugColumns"))};for(const m of t._features)m.createColumn==null||m.createColumn(f,t);return f}const ms="debugHeaders";function k6(t,e,n){var r;let a={id:(r=n.id)!=null?r:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const s=[],o=c=>{c.subHeaders&&c.subHeaders.length&&c.subHeaders.map(o),s.push(c)};return o(a),s},getContext:()=>({table:t,header:a,column:e})};return t._features.forEach(s=>{s.createHeader==null||s.createHeader(a,t)}),a}const Ywe={createTable:t=>{t.getHeaderGroups=pn(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,i)=>{var a,s;const o=(a=r?.map(f=>n.find(m=>m.id===f)).filter(Boolean))!=null?a:[],c=(s=i?.map(f=>n.find(m=>m.id===f)).filter(Boolean))!=null?s:[],u=n.filter(f=>!(r!=null&&r.includes(f.id))&&!(i!=null&&i.includes(f.id)));return DC(e,[...o,...u,...c],t)},mn(t.options,ms)),t.getCenterHeaderGroups=pn(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,i)=>(n=n.filter(a=>!(r!=null&&r.includes(a.id))&&!(i!=null&&i.includes(a.id))),DC(e,n,t,"center")),mn(t.options,ms)),t.getLeftHeaderGroups=pn(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,r)=>{var i;const a=(i=r?.map(s=>n.find(o=>o.id===s)).filter(Boolean))!=null?i:[];return DC(e,a,t,"left")},mn(t.options,ms)),t.getRightHeaderGroups=pn(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,r)=>{var i;const a=(i=r?.map(s=>n.find(o=>o.id===s)).filter(Boolean))!=null?i:[];return DC(e,a,t,"right")},mn(t.options,ms)),t.getFooterGroups=pn(()=>[t.getHeaderGroups()],e=>[...e].reverse(),mn(t.options,ms)),t.getLeftFooterGroups=pn(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),mn(t.options,ms)),t.getCenterFooterGroups=pn(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),mn(t.options,ms)),t.getRightFooterGroups=pn(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),mn(t.options,ms)),t.getFlatHeaders=pn(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),mn(t.options,ms)),t.getLeftFlatHeaders=pn(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),mn(t.options,ms)),t.getCenterFlatHeaders=pn(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),mn(t.options,ms)),t.getRightFlatHeaders=pn(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),mn(t.options,ms)),t.getCenterLeafHeaders=pn(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),mn(t.options,ms)),t.getLeftLeafHeaders=pn(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),mn(t.options,ms)),t.getRightLeafHeaders=pn(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),mn(t.options,ms)),t.getLeafHeaders=pn(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,r)=>{var i,a,s,o,c,u;return[...(i=(a=e[0])==null?void 0:a.headers)!=null?i:[],...(s=(o=n[0])==null?void 0:o.headers)!=null?s:[],...(c=(u=r[0])==null?void 0:u.headers)!=null?c:[]].map(h=>h.getLeafHeaders()).flat()},mn(t.options,ms))}};function DC(t,e,n,r){var i,a;let s=0;const o=function(m,g){g===void 0&&(g=1),s=Math.max(s,g),m.filter(v=>v.getIsVisible()).forEach(v=>{var x;(x=v.columns)!=null&&x.length&&o(v.columns,g+1)},0)};o(t);let c=[];const u=(m,g)=>{const v={depth:g,id:[r,`${g}`].filter(Boolean).join("_"),headers:[]},x=[];m.forEach(_=>{const w=[...x].reverse()[0],S=_.column.depth===v.depth;let E,A=!1;if(S&&_.column.parent?E=_.column.parent:(E=_.column,A=!0),w&&w?.column===E)w.subHeaders.push(_);else{const N=k6(n,E,{id:[r,g,E.id,_?.id].filter(Boolean).join("_"),isPlaceholder:A,placeholderId:A?`${x.filter(P=>P.column===E).length}`:void 0,depth:g,index:x.length});N.subHeaders.push(_),x.push(N)}v.headers.push(_),_.headerGroup=v}),c.push(v),g>0&&u(x,g-1)},h=e.map((m,g)=>k6(n,m,{depth:s,index:g}));u(h,s-1),c.reverse();const f=m=>m.filter(v=>v.column.getIsVisible()).map(v=>{let x=0,_=0,w=[0];v.subHeaders&&v.subHeaders.length?(w=[],f(v.subHeaders).forEach(E=>{let{colSpan:A,rowSpan:N}=E;x+=A,w.push(N)})):x=1;const S=Math.min(...w);return _=_+S,v.colSpan=x,v.rowSpan=_,{colSpan:x,rowSpan:_}});return f((i=(a=c[0])==null?void 0:a.headers)!=null?i:[]),c}const Zwe=(t,e,n,r,i,a,s)=>{let o={id:e,index:r,original:n,depth:i,parentId:s,_valuesCache:{},_uniqueValuesCache:{},getValue:c=>{if(o._valuesCache.hasOwnProperty(c))return o._valuesCache[c];const u=t.getColumn(c);if(u!=null&&u.accessorFn)return o._valuesCache[c]=u.accessorFn(o.original,r),o._valuesCache[c]},getUniqueValues:c=>{if(o._uniqueValuesCache.hasOwnProperty(c))return o._uniqueValuesCache[c];const u=t.getColumn(c);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(o._uniqueValuesCache[c]=u.columnDef.getUniqueValues(o.original,r),o._uniqueValuesCache[c]):(o._uniqueValuesCache[c]=[o.getValue(c)],o._uniqueValuesCache[c])},renderValue:c=>{var u;return(u=o.getValue(c))!=null?u:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>qwe(o.subRows,c=>c.subRows),getParentRow:()=>o.parentId?t.getRow(o.parentId,!0):void 0,getParentRows:()=>{let c=[],u=o;for(;;){const h=u.getParentRow();if(!h)break;c.push(h),u=h}return c.reverse()},getAllCells:pn(()=>[t.getAllLeafColumns()],c=>c.map(u=>Kwe(t,o,u,u.id)),mn(t.options,"debugRows")),_getAllCellsByColumnId:pn(()=>[o.getAllCells()],c=>c.reduce((u,h)=>(u[h.column.id]=h,u),{}),mn(t.options,"debugRows"))};for(let c=0;c<t._features.length;c++){const u=t._features[c];u==null||u.createRow==null||u.createRow(o,t)}return o},Jwe={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},CX=(t,e,n)=>{var r,i;const a=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((i=t.getValue(e))==null||(i=i.toString())==null||(i=i.toLowerCase())==null)&&i.includes(a))};CX.autoRemove=t=>Fc(t);const TX=(t,e,n)=>{var r;return!!(!((r=t.getValue(e))==null||(r=r.toString())==null)&&r.includes(n))};TX.autoRemove=t=>Fc(t);const MX=(t,e,n)=>{var r;return((r=t.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===n?.toLowerCase()};MX.autoRemove=t=>Fc(t);const AX=(t,e,n)=>{var r;return(r=t.getValue(e))==null?void 0:r.includes(n)};AX.autoRemove=t=>Fc(t);const PX=(t,e,n)=>!n.some(r=>{var i;return!((i=t.getValue(e))!=null&&i.includes(r))});PX.autoRemove=t=>Fc(t)||!(t!=null&&t.length);const NX=(t,e,n)=>n.some(r=>{var i;return(i=t.getValue(e))==null?void 0:i.includes(r)});NX.autoRemove=t=>Fc(t)||!(t!=null&&t.length);const DX=(t,e,n)=>t.getValue(e)===n;DX.autoRemove=t=>Fc(t);const kX=(t,e,n)=>t.getValue(e)==n;kX.autoRemove=t=>Fc(t);const UI=(t,e,n)=>{let[r,i]=n;const a=t.getValue(e);return a>=r&&a<=i};UI.resolveFilterValue=t=>{let[e,n]=t,r=typeof e!="number"?parseFloat(e):e,i=typeof n!="number"?parseFloat(n):n,a=e===null||Number.isNaN(r)?-1/0:r,s=n===null||Number.isNaN(i)?1/0:i;if(a>s){const o=a;a=s,s=o}return[a,s]};UI.autoRemove=t=>Fc(t)||Fc(t[0])&&Fc(t[1]);const kd={includesString:CX,includesStringSensitive:TX,equalsString:MX,arrIncludes:AX,arrIncludesAll:PX,arrIncludesSome:NX,equals:DX,weakEquals:kX,inNumberRange:UI};function Fc(t){return t==null||t===""}const Qwe={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:ul("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n?.getValue(t.id);return typeof r=="string"?kd.includesString:typeof r=="number"?kd.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?kd.equals:Array.isArray(r)?kd.arrIncludes:kd.weakEquals},t.getFilterFn=()=>{var n,r;return _T(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(r=e.options.filterFns)==null?void 0:r[t.columnDef.filterFn])!=null?n:kd[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,r,i;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(r=>r.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,r;return(n=(r=e.getState().columnFilters)==null?void 0:r.findIndex(i=>i.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(r=>{const i=t.getFilterFn(),a=r?.find(h=>h.id===t.id),s=Af(n,a?a.value:void 0);if(R6(i,s,t)){var o;return(o=r?.filter(h=>h.id!==t.id))!=null?o:[]}const c={id:t.id,value:s};if(a){var u;return(u=r?.map(h=>h.id===t.id?c:h))!=null?u:[]}return r!=null&&r.length?[...r,c]:[c]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),r=i=>{var a;return(a=Af(e,i))==null?void 0:a.filter(s=>{const o=n.find(c=>c.id===s.id);if(o){const c=o.getFilterFn();if(R6(c,s.value,o))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(r)},t.resetColumnFilters=e=>{var n,r;t.setColumnFilters(e?[]:(n=(r=t.initialState)==null?void 0:r.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function R6(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const eSe=(t,e,n)=>n.reduce((r,i)=>{const a=i.getValue(t);return r+(typeof a=="number"?a:0)},0),tSe=(t,e,n)=>{let r;return n.forEach(i=>{const a=i.getValue(t);a!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}),r},nSe=(t,e,n)=>{let r;return n.forEach(i=>{const a=i.getValue(t);a!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}),r},rSe=(t,e,n)=>{let r,i;return n.forEach(a=>{const s=a.getValue(t);s!=null&&(r===void 0?s>=s&&(r=i=s):(r>s&&(r=s),i<s&&(i=s)))}),[r,i]},iSe=(t,e)=>{let n=0,r=0;if(e.forEach(i=>{let a=i.getValue(t);a!=null&&(a=+a)>=a&&(++n,r+=a)}),n)return r/n},aSe=(t,e)=>{if(!e.length)return;const n=e.map(a=>a.getValue(t));if(!Wwe(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),i=n.sort((a,s)=>a-s);return n.length%2!==0?i[r]:(i[r-1]+i[r])/2},sSe=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),oSe=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,lSe=(t,e)=>e.length,SA={sum:eSe,min:tSe,max:nSe,extent:rSe,mean:iSe,median:aSe,unique:sSe,uniqueCount:oSe,count:lSe},cSe={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:ul("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(r=>r!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,r;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n?.getValue(t.id);if(typeof r=="number")return SA.sum;if(Object.prototype.toString.call(r)==="[object Date]")return SA.extent},t.getAggregationFn=()=>{var n,r;if(!t)throw new Error;return _T(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(r=e.options.aggregationFns)==null?void 0:r[t.columnDef.aggregationFn])!=null?n:SA[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,r;t.setGrouping(e?[]:(n=(r=t.initialState)==null?void 0:r.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const r=e.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(t._groupingValuesCache[n]=r.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,r)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var i;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((i=n.subRows)!=null&&i.length)}}};function uSe(t,e,n){if(!(e!=null&&e.length)||!n)return t;const r=t.filter(a=>!e.includes(a.id));return n==="remove"?r:[...e.map(a=>t.find(s=>s.id===a)).filter(Boolean),...r]}const dSe={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:ul("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=pn(n=>[B1(e,n)],n=>n.findIndex(r=>r.id===t.id),mn(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var r;return((r=B1(e,n)[0])==null?void 0:r.id)===t.id},t.getIsLastColumn=n=>{var r;const i=B1(e,n);return((r=i[i.length-1])==null?void 0:r.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=pn(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,r)=>i=>{let a=[];if(!(e!=null&&e.length))a=i;else{const s=[...e],o=[...i];for(;o.length&&s.length;){const c=s.shift(),u=o.findIndex(h=>h.id===c);u>-1&&a.push(o.splice(u,1)[0])}a=[...a,...o]}return uSe(a,n,r)},mn(t.options,"debugTable"))}},EA=()=>({left:[],right:[]}),hSe={getInitialState:t=>({columnPinning:EA(),...t}),getDefaultOptions:t=>({onColumnPinningChange:ul("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const r=t.getLeafColumns().map(i=>i.id).filter(Boolean);e.setColumnPinning(i=>{var a,s;if(n==="right"){var o,c;return{left:((o=i?.left)!=null?o:[]).filter(f=>!(r!=null&&r.includes(f))),right:[...((c=i?.right)!=null?c:[]).filter(f=>!(r!=null&&r.includes(f))),...r]}}if(n==="left"){var u,h;return{left:[...((u=i?.left)!=null?u:[]).filter(f=>!(r!=null&&r.includes(f))),...r],right:((h=i?.right)!=null?h:[]).filter(f=>!(r!=null&&r.includes(f)))}}return{left:((a=i?.left)!=null?a:[]).filter(f=>!(r!=null&&r.includes(f))),right:((s=i?.right)!=null?s:[]).filter(f=>!(r!=null&&r.includes(f)))}})},t.getCanPin=()=>t.getLeafColumns().some(r=>{var i,a,s;return((i=r.columnDef.enablePinning)!=null?i:!0)&&((a=(s=e.options.enableColumnPinning)!=null?s:e.options.enablePinning)!=null?a:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(o=>o.id),{left:r,right:i}=e.getState().columnPinning,a=n.some(o=>r?.includes(o)),s=n.some(o=>i?.includes(o));return a?"left":s?"right":!1},t.getPinnedIndex=()=>{var n,r;const i=t.getIsPinned();return i?(n=(r=e.getState().columnPinning)==null||(r=r[i])==null?void 0:r.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=pn(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,r,i)=>{const a=[...r??[],...i??[]];return n.filter(s=>!a.includes(s.column.id))},mn(e.options,"debugRows")),t.getLeftVisibleCells=pn(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,r)=>(r??[]).map(a=>n.find(s=>s.column.id===a)).filter(Boolean).map(a=>({...a,position:"left"})),mn(e.options,"debugRows")),t.getRightVisibleCells=pn(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,r)=>(r??[]).map(a=>n.find(s=>s.column.id===a)).filter(Boolean).map(a=>({...a,position:"right"})),mn(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,r;return t.setColumnPinning(e?EA():(n=(r=t.initialState)==null?void 0:r.columnPinning)!=null?n:EA())},t.getIsSomeColumnsPinned=e=>{var n;const r=t.getState().columnPinning;if(!e){var i,a;return!!((i=r.left)!=null&&i.length||(a=r.right)!=null&&a.length)}return!!((n=r[e])!=null&&n.length)},t.getLeftLeafColumns=pn(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(r=>e.find(i=>i.id===r)).filter(Boolean),mn(t.options,"debugColumns")),t.getRightLeafColumns=pn(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(r=>e.find(i=>i.id===r)).filter(Boolean),mn(t.options,"debugColumns")),t.getCenterLeafColumns=pn(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r)=>{const i=[...n??[],...r??[]];return e.filter(a=>!i.includes(a.id))},mn(t.options,"debugColumns"))}};function fSe(t){return t||(typeof document<"u"?document:null)}const kC={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},CA=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),pSe={getDefaultColumnDef:()=>kC,getInitialState:t=>({columnSizing:{},columnSizingInfo:CA(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:ul("columnSizing",t),onColumnSizingInfoChange:ul("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,r,i;const a=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:kC.minSize,(r=a??t.columnDef.size)!=null?r:kC.size),(i=t.columnDef.maxSize)!=null?i:kC.maxSize)},t.getStart=pn(n=>[n,B1(e,n),e.getState().columnSizing],(n,r)=>r.slice(0,t.getIndex(n)).reduce((i,a)=>i+a.getSize(),0),mn(e.options,"debugColumns")),t.getAfter=pn(n=>[n,B1(e,n),e.getState().columnSizing],(n,r)=>r.slice(t.getIndex(n)+1).reduce((i,a)=>i+a.getSize(),0),mn(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:r,...i}=n;return i})},t.getCanResize=()=>{var n,r;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const r=i=>{if(i.subHeaders.length)i.subHeaders.forEach(r);else{var a;n+=(a=i.column.getSize())!=null?a:0}};return r(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const r=e.getColumn(t.column.id),i=r?.getCanResize();return a=>{if(!r||!i||(a.persist==null||a.persist(),TA(a)&&a.touches&&a.touches.length>1))return;const s=t.getSize(),o=t?t.getLeafHeaders().map(w=>[w.column.id,w.column.getSize()]):[[r.id,r.getSize()]],c=TA(a)?Math.round(a.touches[0].clientX):a.clientX,u={},h=(w,S)=>{typeof S=="number"&&(e.setColumnSizingInfo(E=>{var A,N;const P=e.options.columnResizeDirection==="rtl"?-1:1,R=(S-((A=E?.startOffset)!=null?A:0))*P,D=Math.max(R/((N=E?.startSize)!=null?N:0),-.999999);return E.columnSizingStart.forEach(k=>{let[L,$]=k;u[L]=Math.round(Math.max($+$*D,0)*100)/100}),{...E,deltaOffset:R,deltaPercentage:D}}),(e.options.columnResizeMode==="onChange"||w==="end")&&e.setColumnSizing(E=>({...E,...u})))},f=w=>h("move",w),m=w=>{h("end",w),e.setColumnSizingInfo(S=>({...S,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g=fSe(n),v={moveHandler:w=>f(w.clientX),upHandler:w=>{g?.removeEventListener("mousemove",v.moveHandler),g?.removeEventListener("mouseup",v.upHandler),m(w.clientX)}},x={moveHandler:w=>(w.cancelable&&(w.preventDefault(),w.stopPropagation()),f(w.touches[0].clientX),!1),upHandler:w=>{var S;g?.removeEventListener("touchmove",x.moveHandler),g?.removeEventListener("touchend",x.upHandler),w.cancelable&&(w.preventDefault(),w.stopPropagation()),m((S=w.touches[0])==null?void 0:S.clientX)}},_=mSe()?{passive:!1}:!1;TA(a)?(g?.addEventListener("touchmove",x.moveHandler,_),g?.addEventListener("touchend",x.upHandler,_)):(g?.addEventListener("mousemove",v.moveHandler,_),g?.addEventListener("mouseup",v.upHandler,_)),e.setColumnSizingInfo(w=>({...w,startOffset:c,startSize:s,deltaOffset:0,deltaPercentage:0,columnSizingStart:o,isResizingColumn:r.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?CA():(n=t.initialState.columnSizingInfo)!=null?n:CA())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0}}};let RC=null;function mSe(){if(typeof RC=="boolean")return RC;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return RC=t,RC}function TA(t){return t.type==="touchstart"}const gSe={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:ul("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(r=>({...r,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,r;const i=t.columns;return(n=i.length?i.some(a=>a.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[t.id])!=null?n:!0},t.getCanHide=()=>{var n,r;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((r=e.options.enableHiding)!=null?r:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=pn(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),mn(e.options,"debugRows")),t.getVisibleCells=pn(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,r,i)=>[...n,...r,...i],mn(e.options,"debugRows"))},createTable:t=>{const e=(n,r)=>pn(()=>[r(),r().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(a=>a.getIsVisible==null?void 0:a.getIsVisible()),mn(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var r;t.setColumnVisibility(n?{}:(r=t.initialState.columnVisibility)!=null?r:{})},t.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((i,a)=>({...i,[a.id]:n||!(a.getCanHide!=null&&a.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;t.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function B1(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const vSe={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},ySe={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:ul("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const r=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,r,i,a;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&((a=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?a:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>kd.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:r}=t.options;return _T(r)?r:r==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[r])!=null?e:kd[r]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},bSe={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:ul("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var r,i;if(!e){t._queue(()=>{e=!0});return}if((r=(i=t.options.autoResetAll)!=null?i:t.options.autoResetExpanded)!=null?r:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=r=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(r),t.toggleAllRowsExpanded=r=>{r??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=r=>{var i,a;t.setExpanded(r?{}:(i=(a=t.initialState)==null?void 0:a.expanded)!=null?i:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const r=t.getState().expanded;return r===!0||Object.values(r).some(Boolean)},t.getIsAllRowsExpanded=()=>{const r=t.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||t.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},t.getExpandedDepth=()=>{let r=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(a=>{const s=a.split(".");r=Math.max(r,s.length)}),r},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(r=>{var i;const a=r===!0?!0:!!(r!=null&&r[t.id]);let s={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(o=>{s[o]=!0}):s=r,n=(i=n)!=null?i:!a,!a&&n)return{...s,[t.id]:!0};if(a&&!n){const{[t.id]:o,...c}=s;return c}return r})},t.getIsExpanded=()=>{var n;const r=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:r===!0||r?.[t.id])},t.getCanExpand=()=>{var n,r,i;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((r=e.options.enableExpanding)!=null?r:!0)&&!!((i=t.subRows)!=null&&i.length)},t.getIsAllParentsExpanded=()=>{let n=!0,r=t;for(;n&&r.parentId;)r=e.getRow(r.parentId,!0),n=r.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},wk=0,Sk=10,MA=()=>({pageIndex:wk,pageSize:Sk}),xSe={getInitialState:t=>({...t,pagination:{...MA(),...t?.pagination}}),getDefaultOptions:t=>({onPaginationChange:ul("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var r,i;if(!e){t._queue(()=>{e=!0});return}if((r=(i=t.options.autoResetAll)!=null?i:t.options.autoResetPageIndex)!=null?r:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=r=>{const i=a=>Af(r,a);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(i)},t.resetPagination=r=>{var i;t.setPagination(r?MA():(i=t.initialState.pagination)!=null?i:MA())},t.setPageIndex=r=>{t.setPagination(i=>{let a=Af(r,i.pageIndex);const s=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return a=Math.max(0,Math.min(a,s)),{...i,pageIndex:a}})},t.resetPageIndex=r=>{var i,a;t.setPageIndex(r?wk:(i=(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageIndex)!=null?i:wk)},t.resetPageSize=r=>{var i,a;t.setPageSize(r?Sk:(i=(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageSize)!=null?i:Sk)},t.setPageSize=r=>{t.setPagination(i=>{const a=Math.max(1,Af(r,i.pageSize)),s=i.pageSize*i.pageIndex,o=Math.floor(s/a);return{...i,pageIndex:o,pageSize:a}})},t.setPageCount=r=>t.setPagination(i=>{var a;let s=Af(r,(a=t.options.pageCount)!=null?a:-1);return typeof s=="number"&&(s=Math.max(-1,s)),{...i,pageCount:s}}),t.getPageOptions=pn(()=>[t.getPageCount()],r=>{let i=[];return r&&r>0&&(i=[...new Array(r)].fill(null).map((a,s)=>s)),i},mn(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:r}=t.getState().pagination,i=t.getPageCount();return i===-1?!0:i===0?!1:r<i-1},t.previousPage=()=>t.setPageIndex(r=>r-1),t.nextPage=()=>t.setPageIndex(r=>r+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var r;return(r=t.options.pageCount)!=null?r:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var r;return(r=t.options.rowCount)!=null?r:t.getPrePaginationRowModel().rows.length}}},AA=()=>({top:[],bottom:[]}),_Se={getInitialState:t=>({rowPinning:AA(),...t}),getDefaultOptions:t=>({onRowPinningChange:ul("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,r,i)=>{const a=r?t.getLeafRows().map(c=>{let{id:u}=c;return u}):[],s=i?t.getParentRows().map(c=>{let{id:u}=c;return u}):[],o=new Set([...s,t.id,...a]);e.setRowPinning(c=>{var u,h;if(n==="bottom"){var f,m;return{top:((f=c?.top)!=null?f:[]).filter(x=>!(o!=null&&o.has(x))),bottom:[...((m=c?.bottom)!=null?m:[]).filter(x=>!(o!=null&&o.has(x))),...Array.from(o)]}}if(n==="top"){var g,v;return{top:[...((g=c?.top)!=null?g:[]).filter(x=>!(o!=null&&o.has(x))),...Array.from(o)],bottom:((v=c?.bottom)!=null?v:[]).filter(x=>!(o!=null&&o.has(x)))}}return{top:((u=c?.top)!=null?u:[]).filter(x=>!(o!=null&&o.has(x))),bottom:((h=c?.bottom)!=null?h:[]).filter(x=>!(o!=null&&o.has(x)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:i}=e.options;return typeof r=="function"?r(t):(n=r??i)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:r,bottom:i}=e.getState().rowPinning,a=n.some(o=>r?.includes(o)),s=n.some(o=>i?.includes(o));return a?"top":s?"bottom":!1},t.getPinnedIndex=()=>{var n,r;const i=t.getIsPinned();if(!i)return-1;const a=(n=i==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(s=>{let{id:o}=s;return o});return(r=a?.indexOf(t.id))!=null?r:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,r;return t.setRowPinning(e?AA():(n=(r=t.initialState)==null?void 0:r.rowPinning)!=null?n:AA())},t.getIsSomeRowsPinned=e=>{var n;const r=t.getState().rowPinning;if(!e){var i,a;return!!((i=r.top)!=null&&i.length||(a=r.bottom)!=null&&a.length)}return!!((n=r[e])!=null&&n.length)},t._getPinnedRows=(e,n,r)=>{var i;return((i=t.options.keepPinnedRows)==null||i?(n??[]).map(s=>{const o=t.getRow(s,!0);return o.getIsAllParentsExpanded()?o:null}):(n??[]).map(s=>e.find(o=>o.id===s))).filter(Boolean).map(s=>({...s,position:r}))},t.getTopRows=pn(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),mn(t.options,"debugRows")),t.getBottomRows=pn(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),mn(t.options,"debugRows")),t.getCenterRows=pn(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,r)=>{const i=new Set([...n??[],...r??[]]);return e.filter(a=>!i.has(a.id))},mn(t.options,"debugRows"))}},wSe={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:ul("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const r={...n},i=t.getPreGroupedRowModel().flatRows;return e?i.forEach(a=>{a.getCanSelect()&&(r[a.id]=!0)}):i.forEach(a=>{delete r[a.id]}),r})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const r=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),i={...n};return t.getRowModel().rows.forEach(a=>{Ek(i,a.id,r,!0,t)}),i}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=pn(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?PA(t,n):{rows:[],flatRows:[],rowsById:{}},mn(t.options,"debugTable")),t.getFilteredSelectedRowModel=pn(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?PA(t,n):{rows:[],flatRows:[],rowsById:{}},mn(t.options,"debugTable")),t.getGroupedSelectedRowModel=pn(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?PA(t,n):{rows:[],flatRows:[],rowsById:{}},mn(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let r=!!(e.length&&Object.keys(n).length);return r&&e.some(i=>i.getCanSelect()&&!n[i.id])&&(r=!1),r},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:n}=t.getState();let r=!!e.length;return r&&e.some(i=>!n[i.id])&&(r=!1),r},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,r)=>{const i=t.getIsSelected();e.setRowSelection(a=>{var s;if(n=typeof n<"u"?n:!i,t.getCanSelect()&&i===n)return a;const o={...a};return Ek(o,t.id,n,(s=r?.selectChildren)!=null?s:!0,e),o})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return VI(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return Ck(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return Ck(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return r=>{var i;n&&t.toggleSelected((i=r.target)==null?void 0:i.checked)}}}},Ek=(t,e,n,r,i)=>{var a;const s=i.getRow(e,!0);n?(s.getCanMultiSelect()||Object.keys(t).forEach(o=>delete t[o]),s.getCanSelect()&&(t[e]=!0)):delete t[e],r&&(a=s.subRows)!=null&&a.length&&s.getCanSelectSubRows()&&s.subRows.forEach(o=>Ek(t,o.id,n,r,i))};function PA(t,e){const n=t.getState().rowSelection,r=[],i={},a=function(s,o){return s.map(c=>{var u;const h=VI(c,n);if(h&&(r.push(c),i[c.id]=c),(u=c.subRows)!=null&&u.length&&(c={...c,subRows:a(c.subRows)}),h)return c}).filter(Boolean)};return{rows:a(e.rows),flatRows:r,rowsById:i}}function VI(t,e){var n;return(n=e[t.id])!=null?n:!1}function Ck(t,e,n){var r;if(!((r=t.subRows)!=null&&r.length))return!1;let i=!0,a=!1;return t.subRows.forEach(s=>{if(!(a&&!i)&&(s.getCanSelect()&&(VI(s,e)?a=!0:i=!1),s.subRows&&s.subRows.length)){const o=Ck(s,e);o==="all"?a=!0:(o==="some"&&(a=!0),i=!1)}}),i?"all":a?"some":!1}const Tk=/([0-9]+)/gm,SSe=(t,e,n)=>RX(Gf(t.getValue(n)).toLowerCase(),Gf(e.getValue(n)).toLowerCase()),ESe=(t,e,n)=>RX(Gf(t.getValue(n)),Gf(e.getValue(n))),CSe=(t,e,n)=>HI(Gf(t.getValue(n)).toLowerCase(),Gf(e.getValue(n)).toLowerCase()),TSe=(t,e,n)=>HI(Gf(t.getValue(n)),Gf(e.getValue(n))),MSe=(t,e,n)=>{const r=t.getValue(n),i=e.getValue(n);return r>i?1:r<i?-1:0},ASe=(t,e,n)=>HI(t.getValue(n),e.getValue(n));function HI(t,e){return t===e?0:t>e?1:-1}function Gf(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function RX(t,e){const n=t.split(Tk).filter(Boolean),r=e.split(Tk).filter(Boolean);for(;n.length&&r.length;){const i=n.shift(),a=r.shift(),s=parseInt(i,10),o=parseInt(a,10),c=[s,o].sort();if(isNaN(c[0])){if(i>a)return 1;if(a>i)return-1;continue}if(isNaN(c[1]))return isNaN(s)?-1:1;if(s>o)return 1;if(o>s)return-1}return n.length-r.length}const h1={alphanumeric:SSe,alphanumericCaseSensitive:ESe,text:CSe,textCaseSensitive:TSe,datetime:MSe,basic:ASe},PSe={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:ul("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const i of n){const a=i?.getValue(t.id);if(Object.prototype.toString.call(a)==="[object Date]")return h1.datetime;if(typeof a=="string"&&(r=!0,a.split(Tk).length>1))return h1.alphanumeric}return r?h1.text:h1.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof n?.getValue(t.id)=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,r;if(!t)throw new Error;return _T(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(r=e.options.sortingFns)==null?void 0:r[t.columnDef.sortingFn])!=null?n:h1[t.columnDef.sortingFn]},t.toggleSorting=(n,r)=>{const i=t.getNextSortingOrder(),a=typeof n<"u"&&n!==null;e.setSorting(s=>{const o=s?.find(g=>g.id===t.id),c=s?.findIndex(g=>g.id===t.id);let u=[],h,f=a?n:i==="desc";if(s!=null&&s.length&&t.getCanMultiSort()&&r?o?h="toggle":h="add":s!=null&&s.length&&c!==s.length-1?h="replace":o?h="toggle":h="replace",h==="toggle"&&(a||i||(h="remove")),h==="add"){var m;u=[...s,{id:t.id,desc:f}],u.splice(0,u.length-((m=e.options.maxMultiSortColCount)!=null?m:Number.MAX_SAFE_INTEGER))}else h==="toggle"?u=s.map(g=>g.id===t.id?{...g,desc:f}:g):h==="remove"?u=s.filter(g=>g.id!==t.id):u=[{id:t.id,desc:f}];return u})},t.getFirstSortDir=()=>{var n,r;return((n=(r=t.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var r,i;const a=t.getFirstSortDir(),s=t.getIsSorted();return s?s!==a&&((r=e.options.enableSortingRemoval)==null||r)&&(!(n&&(i=e.options.enableMultiRemove)!=null)||i)?!1:s==="desc"?"asc":"desc":a},t.getCanSort=()=>{var n,r;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,r;return(n=(r=t.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const r=(n=e.getState().sorting)==null?void 0:n.find(i=>i.id===t.id);return r?r.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,r;return(n=(r=e.getState().sorting)==null?void 0:r.findIndex(i=>i.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return r=>{n&&(r.persist==null||r.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,r;t.setSorting(e?[]:(n=(r=t.initialState)==null?void 0:r.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},NSe=[Ywe,gSe,dSe,hSe,Jwe,Qwe,vSe,ySe,PSe,cSe,bSe,xSe,_Se,wSe,pSe];function DSe(t){var e,n;const r=[...NSe,...(e=t._features)!=null?e:[]];let i={_features:r};const a=i._features.reduce((m,g)=>Object.assign(m,g.getDefaultOptions==null?void 0:g.getDefaultOptions(i)),{}),s=m=>i.options.mergeOptions?i.options.mergeOptions(a,m):{...a,...m};let c={...{},...(n=t.initialState)!=null?n:{}};i._features.forEach(m=>{var g;c=(g=m.getInitialState==null?void 0:m.getInitialState(c))!=null?g:c});const u=[];let h=!1;const f={_features:r,options:{...a,...t},initialState:c,_queue:m=>{u.push(m),h||(h=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();h=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{i.setState(i.initialState)},setOptions:m=>{const g=Af(m,i.options);i.options=s(g)},getState:()=>i.options.state,setState:m=>{i.options.onStateChange==null||i.options.onStateChange(m)},_getRowId:(m,g,v)=>{var x;return(x=i.options.getRowId==null?void 0:i.options.getRowId(m,g,v))!=null?x:`${v?[v.id,g].join("."):g}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(m,g)=>{let v=(g?i.getPrePaginationRowModel():i.getRowModel()).rowsById[m];if(!v&&(v=i.getCoreRowModel().rowsById[m],!v))throw new Error;return v},_getDefaultColumnDef:pn(()=>[i.options.defaultColumn],m=>{var g;return m=(g=m)!=null?g:{},{header:v=>{const x=v.header.column.columnDef;return x.accessorKey?x.accessorKey:x.accessorFn?x.id:null},cell:v=>{var x,_;return(x=(_=v.renderValue())==null||_.toString==null?void 0:_.toString())!=null?x:null},...i._features.reduce((v,x)=>Object.assign(v,x.getDefaultColumnDef==null?void 0:x.getDefaultColumnDef()),{}),...m}},mn(t,"debugColumns")),_getColumnDefs:()=>i.options.columns,getAllColumns:pn(()=>[i._getColumnDefs()],m=>{const g=function(v,x,_){return _===void 0&&(_=0),v.map(w=>{const S=Xwe(i,w,_,x),E=w;return S.columns=E.columns?g(E.columns,S,_+1):[],S})};return g(m)},mn(t,"debugColumns")),getAllFlatColumns:pn(()=>[i.getAllColumns()],m=>m.flatMap(g=>g.getFlatColumns()),mn(t,"debugColumns")),_getAllFlatColumnsById:pn(()=>[i.getAllFlatColumns()],m=>m.reduce((g,v)=>(g[v.id]=v,g),{}),mn(t,"debugColumns")),getAllLeafColumns:pn(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(m,g)=>{let v=m.flatMap(x=>x.getLeafColumns());return g(v)},mn(t,"debugColumns")),getColumn:m=>i._getAllFlatColumnsById()[m]};Object.assign(i,f);for(let m=0;m<i._features.length;m++){const g=i._features[m];g==null||g.createTable==null||g.createTable(i)}return i}function kSe(){return t=>pn(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(i,a,s){a===void 0&&(a=0);const o=[];for(let u=0;u<i.length;u++){const h=Zwe(t,t._getRowId(i[u],u,s),i[u],u,a,void 0,s?.id);if(n.flatRows.push(h),n.rowsById[h.id]=h,o.push(h),t.options.getSubRows){var c;h.originalSubRows=t.options.getSubRows(i[u],u),(c=h.originalSubRows)!=null&&c.length&&(h.subRows=r(h.originalSubRows,a+1,h))}}return o};return n.rows=r(e),n},mn(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function RSe(){return t=>pn(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const r=t.getState().sorting,i=[],a=r.filter(c=>{var u;return(u=t.getColumn(c.id))==null?void 0:u.getCanSort()}),s={};a.forEach(c=>{const u=t.getColumn(c.id);u&&(s[c.id]={sortUndefined:u.columnDef.sortUndefined,invertSorting:u.columnDef.invertSorting,sortingFn:u.getSortingFn()})});const o=c=>{const u=c.map(h=>({...h}));return u.sort((h,f)=>{for(let g=0;g<a.length;g+=1){var m;const v=a[g],x=s[v.id],_=x.sortUndefined,w=(m=v?.desc)!=null?m:!1;let S=0;if(_){const E=h.getValue(v.id),A=f.getValue(v.id),N=E===void 0,P=A===void 0;if(N||P){if(_==="first")return N?-1:1;if(_==="last")return N?1:-1;S=N&&P?0:N?_:-_}}if(S===0&&(S=x.sortingFn(h,f,v.id)),S!==0)return w&&(S*=-1),x.invertSorting&&(S*=-1),S}return h.index-f.index}),u.forEach(h=>{var f;i.push(h),(f=h.subRows)!=null&&f.length&&(h.subRows=o(h.subRows))}),u};return{rows:o(n.rows),flatRows:i,rowsById:n.rowsById}},mn(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}function NA(t,e){return t?ISe(t)?T.createElement(t,e):t:null}function ISe(t){return $Se(t)||typeof t=="function"||jSe(t)}function $Se(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function jSe(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function LSe(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=T.useState(()=>({current:DSe(e)})),[r,i]=T.useState(()=>n.current.initialState);return n.current.setOptions(a=>({...a,...t,state:{...r,...t.state},onStateChange:s=>{i(s),t.onStateChange==null||t.onStateChange(s)}})),n.current}const I6=fn({base:"react-aria-Table",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});ve.memo(function(e){const{className:n,tableHeaderElementId:r,variant:i="primary",size:a="md",dataBinding:s,data:o,apiUrlKey:c,customApiUrl:u,endpointPath:h,enableAsyncLoading:f=!1,dataMapping:m,apiParams:g,columns:v,columnGroups:x=[],paginationMode:_="pagination",itemsPerPage:w=500,height:S=400,heightMode:E="fixed",heightUnit:A="px",viewportHeight:N=50,rowHeight:P=38,overscan:R=10,sortColumn:D,sortDirection:k="ascending",enableResize:L=!0,onColumnsDetected:$,onItemsPerPageChange:B,isLoading:q,skeletonRowCount:U=5}=e,{data:J}=RI({dataBinding:s,componentName:"Table",fallbackData:[]});if(q){const We=v.length>0?v:[{key:"col1",label:"Column 1"},{key:"col2",label:"Column 2"},{key:"col3",label:"Column 3"}];return l.jsx("div",{className:I6({variant:i,size:a,className:n}),role:"grid","aria-busy":"true","aria-label":"Loading table...",children:l.jsx("div",{className:"react-aria-TableVirtualizer",style:{height:S,overflow:"hidden"},children:l.jsxs("table",{style:{display:"grid",width:"100%"},children:[l.jsx("thead",{className:"react-aria-TableHeader",style:{display:"grid"},children:l.jsx("tr",{className:"react-aria-Row",style:{display:"flex",width:"100%"},children:We.map((ft,yt)=>l.jsx("th",{className:"react-aria-Column",style:{flex:1,padding:"8px 12px"},children:l.jsx(Hl,{variant:"text",width:"60%",height:16})},yt))})}),l.jsx("tbody",{className:"react-aria-TableBody",style:{display:"grid"},children:Array.from({length:U}).map((ft,yt)=>l.jsx("tr",{className:"react-aria-Row",style:{display:"flex",width:"100%"},children:We.map((gt,ln)=>l.jsx("td",{className:"react-aria-Cell",style:{flex:1,padding:"8px 12px"},children:l.jsx(Hl,{componentVariant:"table-cell",size:a,index:yt})},ln))},yt))})]})})})}const O=s&&"source"in s&&"name"in s&&!("type"in s),z=!O&&s&&"type"in s&&s.type==="collection"||O,V=ve.useMemo(()=>z&&J.length>0?(console.log(" Table: DataBinding  ",J.length,"items"),J):o,[z,J,o]),H=_||"pagination",ee=V&&Array.isArray(V)&&V.length>0,Y=f===!0&&!ee&&!!c&&!!h&&(h?.trim().length??0)>0;ve.useEffect(()=>{console.log(" Table isAsync :",{enableAsyncLoading:f,staticData:o&&`Array(${o.length})`,hasValidStaticData:ee,apiUrlKey:c,endpointPath:h,isAsync:Y})},[f,o,ee,c,h,Y]);const Z=H==="pagination",K=ve.useCallback((We,ft)=>{if(!ft){const yt=Array.isArray(We)?We:[];return{items:yt,total:yt.length}}try{const yt=We;let gt;if(ft.resultPath){const Mt=yt[ft.resultPath];Array.isArray(Mt)?gt=Mt:gt=Array.isArray(We)?We:[]}else gt=Array.isArray(We)?We:[];const ln=gt.map((Mt,$t)=>{const Fn=Mt;return{...Fn,id:ft.idKey?Fn[ft.idKey]:Fn.id||$t}}),vn=ft.totalKey&&yt[ft.totalKey]||gt.length;return{items:ln,total:vn}}catch(yt){console.error(" Data mapping error:",yt);const gt=Array.isArray(We)?We:[];return{items:gt,total:gt.length}}},[]),X=ve.useMemo(()=>{switch(E){case"auto":return"auto";case"fixed":return`${S}${A}`;case"viewport":return`${N}vh`;case"full":return"100vh";default:return`${S}px`}},[E,S,A,N]),ne=ve.useMemo(()=>!D||D===""?[]:[{id:String(D),desc:k==="descending"}],[D,k]),[G,te]=ve.useState(ne),[ae,pe]=ve.useState([]),ye=ve.useCallback(We=>{if(!We||We.length===0)return[];const ft=We[0];return Object.keys(ft).map(gt=>({key:gt,label:gt.charAt(0).toUpperCase()+gt.slice(1).replace(/_/g," "),allowsSorting:!0,enableResizing:!0,width:150,align:"left",elementId:ri.generateId()}))},[]);ve.useEffect(()=>{if(!Y&&v.length===0&&V&&V.length>0&&ae.length===0){const We=ye(V);pe(We),console.log(" Static    :",We),$&&$(We)}},[V,v.length,Y,ye,$,ae.length]);const me=ve.useMemo(()=>{const We=v.length>0?v:ae;if(We.length===0)return[];const ft=Gwe();if(x.length===0)return We.map($t=>ft.accessor(String($t.key),{id:String($t.key),header:()=>l.jsx("span",{style:{fontWeight:"500",fontSize:"13px",color:"#374151"},children:$t.label}),size:$t.width??150,minSize:$t.minWidth,maxSize:$t.maxWidth,enableSorting:$t.allowsSorting??!0,enableResizing:$t.enableResizing??!0,cell:Fn=>{const Rn=Fn.getValue();return Rn&&typeof Rn=="object"&&!ve.isValidElement(Rn)?JSON.stringify(Rn):Rn}}));const yt=[];let gt=0;const ln=[...x].sort((Mt,$t)=>Mt.order_num!==void 0&&$t.order_num!==void 0?Mt.order_num-$t.order_num:Mt.span-$t.span),vn=[...We].sort((Mt,$t)=>Mt.order_num!==void 0&&$t.order_num!==void 0?Mt.order_num-$t.order_num:0);for(const Mt of ln){const $t=vn.slice(gt,gt+Mt.span);if($t.length>0){const Fn=$t.map(Ur=>ft.accessor(String(Ur.key),{id:String(Ur.key),header:()=>l.jsx("span",{style:{},children:Ur.label}),size:Ur.width??150,minSize:Ur.minWidth,maxSize:Ur.maxWidth,enableSorting:Ur.allowsSorting??!0,enableResizing:Ur.enableResizing??!0,cell:Oa=>{const ir=Oa.getValue();return ir&&typeof ir=="object"&&!ve.isValidElement(ir)?JSON.stringify(ir):ir}})),Rn=ft.group({id:`group-${Mt.id}`,header:()=>l.jsx("span",{style:{color:Mt.variant==="primary"?"#ffffff":"#374151",backgroundColor:Mt.variant==="primary"?"#3b82f6":Mt.variant==="secondary"?"#6b7280":"#f8fafc",textAlign:Mt.align||"center"},children:Mt.label}),columns:Fn,meta:{isGroupHeader:!0,align:Mt.align||"center",variant:Mt.variant||"default",sticky:Mt.sticky||!1,elementId:Mt.id}});yt.push(Rn)}gt+=Mt.span}if(gt<vn.length){const Mt=vn.slice(gt);for(const $t of Mt)yt.push(ft.accessor(String($t.key),{id:String($t.key),header:()=>l.jsx("span",{style:{fontWeight:"500",fontSize:"13px",color:"#374151"},children:$t.label}),size:$t.width??150,minSize:$t.minWidth,maxSize:$t.maxWidth,enableSorting:$t.allowsSorting??!0,enableResizing:$t.enableResizing??!0,cell:Fn=>{const Rn=Fn.getValue();return Rn&&typeof Rn=="object"&&!ve.isValidElement(Rn)?JSON.stringify(Rn):Rn}}))}return yt},[v,x,ae]),fe=ve.useMemo(()=>v.length>0?v:ae,[v,ae]),[ge,be]=ve.useState(0),[oe,Le]=ve.useState(null),[Ve,Ze]=ve.useState([]),[xe,ht]=ve.useState(w),[Fe,et]=ve.useState([]),[de,re]=ve.useState(void 0),[Ce,ke]=ve.useState(!0),[De,je]=ve.useState(!1),[mt,rt]=ve.useState(0),bt=ve.useMemo(()=>{if(Y||!V)return V||[];if(H!=="pagination")return V;const We=mt*xe,ft=We+xe;return V.slice(We,ft)},[Y,V,H,mt,xe]),dt=ve.useMemo(()=>Y||!V?0:Math.ceil(V.length/xe),[Y,V,xe]);ve.useEffect(()=>{ht(w)},[w]),ve.useEffect(()=>{if(Y&&v.length===0&&Ve&&Ve.length>0&&ae.length===0){const We=ye(Ve);pe(We),console.log(" API    :",We),$&&$(We)}},[Ve,v.length,Y,ye,$,ae.length]);const Je=ve.useRef(!1),ot=ve.useCallback(async(We,ft)=>{if(!Y||!c||!h)return console.log(" fetchPage :",{isAsync:Y,apiUrlKey:c,endpointPath:h}),{items:[],total:0};if(console.log(" fetchPage :",{apiUrlKey:c,endpointPath:h,nextIndex:We,pageSize:ft,availableKeys:Object.keys(A1)}),Je.current)return console.log(" Fetch already in progress, skipping..."),{items:[],total:0};const yt=c==="CUSTOM",gt=yt?null:A1[c];if(!yt&&!gt)return console.error(" API    :",{apiUrlKey:c,availableKeys:Object.keys(A1)}),{items:[],total:0};if(yt&&!u)return console.error(" Custom URL  "),{items:[],total:0};Je.current=!0,je(!0);try{const ln=G[0]?{sortBy:G[0].id,desc:G[0].desc}:void 0,vn=ft??xe,Mt={...g||{},...ln,page:We+1,limit:vn};console.log(" API  :",Mt,"nextIndex:",We);let $t;if(yt&&u){const ir=`${u}${h}`,Pr=new URLSearchParams(Object.entries(Mt).reduce((ws,[qc,Wu])=>(ws[qc]=String(Wu),ws),{})).toString(),Vr=Pr?`${ir}?${Pr}`:ir;console.log(" Custom API :",Vr);const Bi=await fetch(Vr);if(!Bi.ok)throw new Error(`HTTP ${Bi.status}: ${Bi.statusText}`);$t=await Bi.json()}else if(gt)$t=await gt(h,Mt);else throw new Error("API   ");console.log(" API :",{responseType:Array.isArray($t)?"Array":typeof $t,responseLength:Array.isArray($t)?$t.length:"N/A",dataMapping:m});const{items:Fn,total:Rn}=K($t,m);if(console.log(" processApiResponse :",{itemsLength:Fn.length,total:Rn,firstItem:Fn[0]}),v.length===0&&Fn.length>0){const ir=ye(Fn);pe(ir),console.log("   :",ir),$&&$(ir)}else console.log("    :",{columnsLength:v.length,itemsLength:Fn.length});const Ur=$t.__meta;let Oa=Rn;return Ur&&typeof Ur.totalItems=="number"&&(Oa=Ur.totalItems,console.log(" API   (Pagination):",{totalItems:Ur.totalItems,currentPage:Ur.currentPage,itemsPerPage:Ur.itemsPerPage})),{items:Fn,total:Oa}}finally{je(!1),Je.current=!1}},[Y,c,u,h,xe,G,K,m,g,v.length,ye,pe,$]),It=ve.useCallback(async We=>{if(!Y||!c||!h)return{items:[],nextCursor:void 0};if(Je.current)return console.log(" Fetch already in progress, skipping..."),{items:[],nextCursor:void 0};const ft=c==="CUSTOM",yt=ft?null:A1[c];Je.current=!0,je(!0);try{const gt=We?parseInt(We,10):1,ln=G[0]?{sortBy:G[0].id,desc:G[0].desc}:void 0,vn={page:gt,limit:xe,...ln};let Mt;if(ft&&u){const Rn=`${u}${h}`,Ur=new URLSearchParams(Object.entries(vn).reduce((Pr,[Vr,Bi])=>(Pr[Vr]=String(Bi),Pr),{})).toString(),Oa=Ur?`${Rn}?${Ur}`:Rn;console.log(" Custom API  (fetchMore):",Oa);const ir=await fetch(Oa);if(!ir.ok)throw new Error(`HTTP ${ir.status}: ${ir.statusText}`);Mt=await ir.json()}else if(yt)Mt=await yt(h,vn);else throw new Error("API   ");console.log(" API  (fetchMore):",{responseType:Array.isArray(Mt)?"Array":typeof Mt,responseLength:Array.isArray(Mt)?Mt.length:"N/A",dataMapping:m});const{items:$t}=K(Mt,m);if(console.log(" processApiResponse  (fetchMore):",{itemsLength:$t.length,firstItem:$t[0]}),v.length===0&&$t.length>0){const Rn=ye($t);pe(Rn),console.log("    (fetchMore):",Rn),$&&$(Rn)}else console.log("     (fetchMore):",{columnsLength:v.length,itemsLength:$t.length});if(!$t||$t.length===0)return{items:[],nextCursor:void 0};const Fn=$t.length===xe?String(gt+1):void 0;return{items:$t,nextCursor:Fn}}finally{je(!1),Je.current=!1}},[Y,c,u,h,xe,G,K,m,v.length,ye,pe,$]),Ct=ve.useRef(null),St=ve.useRef(!1),Bt=ve.useRef(H),we=ve.useRef({apiUrlKey:c,customApiUrl:u,endpointPath:h,isAsync:Y}),xt=ve.useRef(V);ve.useEffect(()=>{xt.current!==V&&(xt.current=V,pe([]),console.log(" Static    -    "))},[V]),ve.useEffect(()=>{const We=Bt.current!==H,ft=we.current.apiUrlKey!==c||we.current.customApiUrl!==u||we.current.endpointPath!==h||we.current.isAsync!==Y;if((We||ft)&&(St.current=!1,Bt.current=H,we.current={apiUrlKey:c,customApiUrl:u,endpointPath:h,isAsync:Y},Ze([]),et([]),be(0),Le(null),re(void 0),ke(!0),pe([]),console.log("     -    ")),!Y){console.log(" isAsync=false, API  ");return}if(!c||!h||h.trim().length===0){console.log(" API  , API  :",{apiUrlKey:c,endpointPath:h});return}if(St.current){console.log(" Initial load already in progress, skipping duplicate effect");return}St.current=!0,H==="pagination"?(async()=>{const{items:yt,total:gt}=await ot(0);Ze(yt),be(0),Le(Math.max(1,Math.ceil((gt||0)/xe))),St.current=!1})():(async()=>{et([]),re(void 0),ke(!0);const{items:yt,nextCursor:gt}=await It("1");et(yt),re(gt),ke(!!gt),Ct.current&&gt&&setTimeout(()=>{if(!Ct.current)return;const ln=Ct.current;ln.scrollHeight<=ln.clientHeight+10&&(console.log(" Loading more to fill viewport: page 2"),It(gt).then(vn=>{et(Mt=>[...Mt,...vn.items]),re(vn.nextCursor),ke(!!vn.nextCursor)}))},100),St.current=!1})()},[Y,H,xe,c,u,h,f]);const _t=ve.useMemo(()=>{if(V){if(G.length===0)return V;const We=G[0],ft=We?.id;return[...V].sort((gt,ln)=>{const vn=gt[ft],Mt=ln[ft];return vn==null&&Mt==null?0:vn==null?-1:Mt==null?1:vn<Mt?We.desc?1:-1:vn>Mt?We.desc?-1:1:0})}return!Y&&H==="pagination"?bt:H==="pagination"?Ve:Fe},[V,G,H,Ve,Fe,Y,bt]),vt=LSe({data:_t,columns:me,state:{sorting:G},onSortingChange:te,getCoreRowModel:kSe(),getSortedRowModel:RSe(),enableColumnResizing:L,columnResizeMode:"onChange",debugTable:!1,manualSorting:!1}),it=vt.getRowModel().rows,Qe=EX({count:it.length,estimateSize:()=>P,getScrollElement:()=>Ct.current,measureElement:typeof window<"u"&&navigator.userAgent.indexOf("Firefox")===-1?We=>We?.getBoundingClientRect().height:void 0,overscan:Math.max(R,5)}),At=ve.useCallback(We=>{if(!Y||H!=="infinite"||!We||!Ce||De)return;const{scrollHeight:ft,scrollTop:yt,clientHeight:gt}=We;ft-yt-gt<500&&(console.log(" Scroll triggered load"),(async()=>{const ln=de??"1",{items:vn,nextCursor:Mt}=await It(ln);et($t=>[...$t,...vn]),re(Mt),ke(!!Mt)})())},[Y,H,Ce,de,De,It]);return l.jsxs(l.Fragment,{children:[l.jsx("div",{"data-element-id":e["data-element-id"],className:I6({variant:i,size:a,className:n}),role:"grid","aria-rowcount":it.length,"aria-colcount":vt.getAllLeafColumns().length,children:l.jsx("div",{ref:Ct,className:"react-aria-TableVirtualizer",onScroll:We=>At(We.currentTarget),style:{height:X,overflow:"auto",position:"relative"},children:l.jsxs("table",{style:{display:"grid"},children:[l.jsx("thead",{className:"react-aria-TableHeader react-aria-Resizable",role:"rowgroup","data-element-id":r,style:{display:"grid",position:"sticky",top:0,zIndex:1},children:vt.getHeaderGroups().map(We=>{const ft=We.headers.filter(gt=>gt.column.columnDef.meta?.isGroupHeader===!0),yt=We.headers.filter(gt=>gt.column.columnDef.meta?.isGroupHeader!==!0);return l.jsxs(ve.Fragment,{children:[ft.length>0&&l.jsx("tr",{className:"react-aria-Row column-group-row",role:"row",style:{display:"flex",width:"100%"},children:ft.map((gt,ln)=>{const vn=gt.column.columnDef.meta,Mt=vn?.align||"center",$t=vn?.variant||"default",Fn=vn?.elementId;return l.jsx("th",{className:"react-aria-Column column-group-header",role:"columnheader","data-element-id":Fn,"aria-colindex":ln+1,colSpan:gt.colSpan,style:{justifyContent:Mt==="center"?"center":Mt==="right"?"flex-end":"flex-start",textAlign:Mt,width:gt.getSize(),minWidth:gt.getSize(),backgroundColor:$t==="primary"?"#3b82f6":$t==="secondary"?"#6b7280":"#f8fafc",color:$t!=="default"?"#ffffff":"#374151"},children:NA(gt.column.columnDef.header,gt.getContext())},gt.id)})}),yt.length>0&&l.jsx("tr",{className:"react-aria-Row individual-column-row",role:"row",style:{display:"flex",width:"100%"},children:yt.map((gt,ln)=>{const vn=fe.find(Rn=>String(Rn.key)===gt.column.id),Mt=vn?.align??"left",$t=gt.column.getIsSorted(),Fn=vn?.elementId;return l.jsxs("th",{className:"react-aria-Column individual-column",role:"columnheader","data-element-id":Fn,"aria-colindex":ln+1,"aria-sort":$t==="asc"?"ascending":$t==="desc"?"descending":"none",colSpan:gt.colSpan,style:{justifyContent:Mt==="center"?"center":Mt==="right"?"flex-end":"flex-start",textAlign:Mt,width:gt.getSize(),minWidth:gt.getSize()},children:[l.jsxs("div",{className:`flex items-center gap-2 ${gt.column.getCanSort()?"cursor-pointer select-none hover:text-blue-600":""}`,onClick:gt.column.getToggleSortingHandler(),onKeyDown:Rn=>{(Rn.key==="Enter"||Rn.key===" ")&&(Rn.preventDefault(),gt.column.toggleSorting())},tabIndex:0,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"inherit",gap:"8px"},children:[l.jsx("span",{style:{fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit"},children:NA(gt.column.columnDef.header,gt.getContext())}),gt.column.getIsSorted()==="asc"?l.jsx(e_,{size:16,style:{color:"#3b82f6"}}):gt.column.getIsSorted()==="desc"?l.jsx(_i,{size:16,style:{color:"#3b82f6"}}):null]}),L&&gt.column.getCanResize()&&l.jsx("div",{role:"separator","aria-orientation":"vertical","aria-label":"Resize column",onMouseDown:gt.getResizeHandler(),onTouchStart:gt.getResizeHandler(),className:"react-aria-ColumnResizer"})]},gt.id)})})]},We.id)})}),l.jsx("tbody",{className:"react-aria-TableBody",role:"rowgroup",style:{display:"grid",height:`${Qe.getTotalSize()}px`,position:"relative"},children:Qe.getVirtualItems().map(We=>{const ft=it[We.index];return ft?l.jsx("tr",{className:"react-aria-Row",role:"row","aria-rowindex":We.index+1,ref:yt=>Qe.measureElement?.(yt),style:{display:"flex",position:"absolute",transform:`translateY(${We.start}px)`,width:"100%"},tabIndex:0,children:ft.getVisibleCells().map((yt,gt)=>{const ln=fe.find(vn=>String(vn.key)===yt.column.id)?.align??"left";return l.jsx("td",{className:"react-aria-Cell",role:"gridcell","aria-colindex":gt+1,style:{textAlign:ln,width:yt.column.getSize()},children:NA(yt.column.columnDef.cell,yt.getContext())},yt.id)})},ft.id):null})})]})})}),Z&&(Y&&oe!==null||V&&V.length>0)&&l.jsx("div",{className:"react-aria-Pagination",children:Y&&oe!==null?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"react-aria-PageInfo",children:[ge*xe+1," to"," ",Math.min((ge+1)*xe,Ve.length+ge*xe)," ","of ",oe*xe," entries"]}),l.jsxs("div",{className:"react-aria-PageNavigation",children:[l.jsx(Ut,{onClick:async()=>{const{items:We,total:ft}=await ot(0,xe);Ze(We),be(0),Le(Math.max(1,Math.ceil((ft||0)/xe)))},isDisabled:ge===0||De,className:"react-aria-PageButton","aria-label":"First page",size:"sm",children:l.jsx(d5,{size:16})}),l.jsx(Ut,{onClick:async()=>{const We=Math.max(0,ge-1),{items:ft}=await ot(We,xe);Ze(ft),be(We)},isDisabled:ge===0||De,className:"react-aria-PageButton","aria-label":"Previous page",size:"sm",children:l.jsx(Q1,{size:16})}),l.jsx("div",{className:"react-aria-PageNumbers",children:(()=>{const We=oe,ft=ge+1,yt=5;let gt=Math.max(1,ft-Math.floor(yt/2));const ln=Math.min(We,gt+yt-1);ln-gt<yt-1&&(gt=Math.max(1,ln-yt+1));const vn=[];for(let Mt=gt;Mt<=ln;Mt++)vn.push(l.jsx(Ut,{onClick:async()=>{const $t=Mt-1,{items:Fn}=await ot($t,xe);Ze(Fn),be($t)},isDisabled:De,className:`react-aria-PageButton ${Mt===ft?"active":""}`,size:"sm",children:Mt},Mt));return vn})()}),l.jsx(Ut,{onClick:async()=>{const We=Math.min((oe??1)-1,ge+1),{items:ft}=await ot(We,xe);Ze(ft),be(We)},isDisabled:oe===0||ge>=oe-1||De,className:"react-aria-PageButton","aria-label":"Next page",size:"sm",children:l.jsx(Ia,{size:16})}),l.jsx(Ut,{onClick:async()=>{const We=(oe??1)-1,{items:ft}=await ot(We,xe);Ze(ft),be(We)},isDisabled:oe===0||ge>=oe-1||De,className:"react-aria-PageButton","aria-label":"Last page",size:"sm",children:l.jsx(a4,{size:16})})]}),l.jsxs("div",{className:"react-aria-GoToPage",children:[l.jsx("label",{htmlFor:"go-to-page-input",className:"react-aria-GoToPageLabel",children:"Go to:"}),l.jsx("input",{id:"go-to-page-input",type:"number",min:"1",max:oe,value:ge+1,onChange:We=>{const ft=Math.max(1,Math.min(oe,Number(We.target.value)));be(ft-1)},onKeyDown:async We=>{if(We.key==="Enter"){const ft=Math.max(1,Math.min(oe,Number(We.currentTarget.value))),{items:yt}=await ot(ft-1,xe);Ze(yt),be(ft-1)}},disabled:De,className:"react-aria-GoToPageInput"}),l.jsx(Ut,{onClick:async()=>{const We=Math.max(1,Math.min(oe,ge+1)),{items:ft}=await ot(We-1,xe);Ze(ft),be(We-1)},isDisabled:De,className:"react-aria-GoToPageButton",size:"sm",children:l.jsx(a4,{size:16})})]}),l.jsx("div",{className:"react-aria-PageSizeSelector",children:l.jsx(s2,{id:"page-size-select",selectedKey:xe.toString(),onSelectionChange:async We=>{const ft=Number(We);ht(ft);const{items:yt,total:gt}=await ot(0,ft);Ze(yt),be(0),Le(Math.max(1,Math.ceil((gt||0)/ft))),B&&B(ft)},isDisabled:De,className:"react-aria-PageSizeSelect",items:[{value:5,label:"5"},{value:10,label:"10"},{value:20,label:"20"},{value:50,label:"50"},{value:100,label:"100"}],children:We=>l.jsx(km,{id:We.value.toString(),children:We.label},We.value)})}),De&&l.jsx("span",{className:"react-aria-LoadingText",children:"Loading"})]}):V?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"react-aria-PageInfo",children:[mt*xe+1," to"," ",Math.min((mt+1)*xe,V.length)," ","of ",V.length," entries"]}),l.jsxs("div",{className:"react-aria-PageNavigation",children:[l.jsx(Ut,{onClick:()=>rt(0),isDisabled:mt===0,className:"react-aria-PageButton","aria-label":"First page",size:"sm",children:l.jsx(d5,{size:16})}),l.jsx(Ut,{onClick:()=>rt(Math.max(0,mt-1)),isDisabled:mt===0,className:"react-aria-PageButton","aria-label":"Previous page",size:"sm",children:l.jsx(Q1,{size:16})}),l.jsx("div",{className:"react-aria-PageNumbers",children:(()=>{const We=dt,ft=mt+1,yt=5;let gt=Math.max(1,ft-Math.floor(yt/2));const ln=Math.min(We,gt+yt-1);ln-gt<yt-1&&(gt=Math.max(1,ln-yt+1));const vn=[];for(let Mt=gt;Mt<=ln;Mt++)vn.push(l.jsx(Ut,{onClick:()=>rt(Mt-1),className:`react-aria-PageButton ${Mt===ft?"active":""}`,size:"sm",children:Mt},Mt));return vn})()}),l.jsx(Ut,{onClick:()=>rt(Math.min(dt-1,mt+1)),isDisabled:mt>=dt-1,className:"react-aria-PageButton","aria-label":"Next page",size:"sm",children:l.jsx(Ia,{size:16})}),l.jsx(Ut,{onClick:()=>rt(dt-1),isDisabled:mt>=dt-1,className:"react-aria-PageButton","aria-label":"Last page",size:"sm",children:l.jsx(a4,{size:16})})]}),l.jsxs("div",{className:"react-aria-GoToPage",children:[l.jsx("label",{htmlFor:"go-to-page-input",className:"react-aria-GoToPageLabel",children:"Go to:"}),l.jsx("input",{id:"go-to-page-input",type:"number",min:"1",max:dt,value:mt+1,onChange:We=>{const ft=Math.max(1,Math.min(dt,Number(We.target.value)));rt(ft-1)},className:"react-aria-GoToPageInput"})]}),l.jsx("div",{className:"react-aria-PageSizeSelector",children:l.jsx(s2,{id:"page-size-select",selectedKey:xe.toString(),onSelectionChange:We=>{const ft=Number(We);ht(ft),rt(0),B&&B(ft)},className:"react-aria-PageSizeSelect",items:[{value:5,label:"5"},{value:10,label:"10"},{value:20,label:"20"},{value:50,label:"50"},{value:100,label:"100"}],children:We=>l.jsx(km,{id:We.value.toString(),children:We.label},We.value)})})]}):null})]})});fn({base:"react-aria-Card",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface",elevated:"elevated",outlined:"outlined",gallery:"gallery",quiet:"quiet"},size:{sm:"sm",md:"md",lg:"lg"},orientation:{horizontal:"horizontal",vertical:"vertical"},isQuiet:{true:"quiet"},isDisabled:{true:"disabled"},isSelectable:{true:"selectable"},isSelected:{true:"selected"},isFocused:{true:"focused"}},defaultVariants:{variant:"default",size:"md",orientation:"vertical"}});fn({base:"react-aria-Menu",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fn({base:"react-aria-Tooltip",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fn({base:"react-aria-ProgressBar",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"default",size:"md"}});fn({base:"react-aria-Meter",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"default",size:"md"}});fn({base:"react-aria-Separator",variants:{variant:{default:"",dashed:"dashed",dotted:"dotted"},size:{sm:"sm",md:"md",lg:"lg"},orientation:{horizontal:"horizontal",vertical:"vertical"}},defaultVariants:{variant:"default",size:"md",orientation:"horizontal"}});fn({base:"react-aria-Breadcrumbs",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fn({base:"react-aria-Link",variants:{variant:{primary:"primary",secondary:"secondary"},size:{sm:"sm",md:"md",lg:"lg"},isFocusVisible:{true:"focus-visible",false:""},isExternal:{true:"external",false:""}},defaultVariants:{variant:"primary",size:"md"}});fn({base:"react-aria-Dialog",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fn({base:"react-aria-Modal",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});const OSe=fn({base:"react-aria-Popover",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});function __({children:t,variant:e="primary",size:n="md",showArrow:r=!0,containFocus:i=!1,autoFocus:a=!0,restoreFocus:s=!0,...o}){const c=ah(o.className,(u,h)=>OSe({...h,variant:e,size:n,className:u}));return l.jsxs(Yr,{...o,className:c,children:[r&&l.jsx(mve,{children:l.jsx("svg",{width:12,height:12,viewBox:"0 0 12 12",children:l.jsx("path",{d:"M0 0 L6 6 L12 0"})})}),l.jsx(Yq,{children:l.jsx(sI,{contain:i,autoFocus:a,restoreFocus:s,children:t})})]})}const IX=[{type:"Button",label:"Button",category:"Actions",icon:"",inspector:{hasCustomEditor:!0,editorName:"ButtonEditor",dataBindingType:null,supportedEvents:["onPress","onClick","onMouseEnter","onMouseLeave","onFocus","onBlur","onKeyDown","onKeyUp"]}},{type:"ToggleButton",label:"Toggle Button",category:"Actions",icon:"",inspector:{hasCustomEditor:!0,editorName:"ToggleButtonEditor",dataBindingType:null,supportedEvents:["onChange","onPress","onClick","onMouseEnter","onMouseLeave","onFocus","onBlur","onKeyDown","onKeyUp"]}},{type:"ToggleButtonGroup",label:"Toggle Button Group",category:"Actions",icon:"",inspector:{hasCustomEditor:!0,editorName:"ToggleButtonGroupEditor",dataBindingType:"collection",supportedEvents:["onChange","onFocus","onBlur"]}},{type:"Menu",label:"Menu",category:"Actions",icon:"",inspector:{hasCustomEditor:!0,editorName:"MenuEditor",dataBindingType:"collection",supportedEvents:["onAction","onSelectionChange","onOpenChange","onFocus","onBlur"]}},{type:"Toolbar",label:"Toolbar",category:"Actions",icon:"",inspector:{hasCustomEditor:!0,editorName:"ToolbarEditor",dataBindingType:null,supportedEvents:["onFocus","onBlur"]}},{type:"Link",label:"Link",category:"Actions",icon:"",inspector:{hasCustomEditor:!0,editorName:"LinkEditor",dataBindingType:null,supportedEvents:["onPress","onClick","onMouseEnter","onMouseLeave","onFocus","onBlur","onKeyDown","onKeyUp"]}},{type:"TextField",label:"Text Field",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"TextFieldEditor",dataBindingType:"value",supportedEvents:["onChange","onFocus","onBlur","onKeyDown","onKeyUp"]}},{type:"NumberField",label:"Number Field",category:"Inputs",icon:"#",inspector:{hasCustomEditor:!0,editorName:"NumberFieldEditor",dataBindingType:"value",supportedEvents:["onChange","onFocus","onBlur","onKeyDown","onKeyUp"]}},{type:"SearchField",label:"Search Field",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"SearchFieldEditor",dataBindingType:"value",supportedEvents:["onChange","onSubmit","onFocus","onBlur","onKeyDown","onKeyUp"]}},{type:"Checkbox",label:"Checkbox",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"CheckboxEditor",dataBindingType:"value",supportedEvents:["onChange","onFocus","onBlur","onKeyDown","onKeyUp","onMouseEnter","onMouseLeave"]}},{type:"CheckboxGroup",label:"Checkbox Group",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"CheckboxGroupEditor",dataBindingType:"collection",supportedEvents:["onChange","onFocus","onBlur"]}},{type:"Radio",label:"Radio",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"RadioEditor",dataBindingType:"value",supportedEvents:["onFocus","onBlur","onKeyDown","onKeyUp","onMouseEnter","onMouseLeave"]}},{type:"RadioGroup",label:"Radio Group",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"RadioGroupEditor",dataBindingType:"collection",supportedEvents:["onChange","onFocus","onBlur"]}},{type:"Select",label:"Select",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"SelectEditor",dataBindingType:"collection",supportedEvents:["onSelectionChange","onOpenChange","onFocus","onBlur","onKeyDown","onKeyUp"]}},{type:"ComboBox",label:"Combo Box",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"ComboBoxEditor",dataBindingType:"collection",supportedEvents:["onSelectionChange","onOpenChange","onFocus","onBlur","onKeyDown","onKeyUp"]}},{type:"Switch",label:"Switch",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"SwitchEditor",dataBindingType:"value",supportedEvents:["onChange","onFocus","onBlur","onKeyDown","onKeyUp","onMouseEnter","onMouseLeave"]}},{type:"Slider",label:"Slider",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"SliderEditor",dataBindingType:"value",supportedEvents:["onChange","onFocus","onBlur","onKeyDown","onKeyUp","onMouseEnter","onMouseLeave"]}},{type:"TailSwatch",label:"Color Picker",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"TailSwatchEditor",dataBindingType:"value",supportedEvents:["onChange","onFocus","onBlur"]}},{type:"Table",label:"Table",category:"Data Display",icon:"",inspector:{hasCustomEditor:!0,editorName:"TableEditor",dataBindingType:"collection",supportedEvents:["onSelectionChange","onAction","onFocus","onBlur"]}},{type:"ListBox",label:"List Box",category:"Data Display",icon:"",inspector:{hasCustomEditor:!0,editorName:"ListBoxEditor",dataBindingType:"collection",supportedEvents:["onSelectionChange","onAction","onFocus","onBlur"]}},{type:"GridList",label:"Grid List",category:"Data Display",icon:"",inspector:{hasCustomEditor:!0,editorName:"GridListEditor",dataBindingType:"collection",supportedEvents:["onSelectionChange","onAction","onFocus","onBlur"]}},{type:"Tree",label:"Tree",category:"Data Display",icon:"",inspector:{hasCustomEditor:!0,editorName:"TreeEditor",dataBindingType:"collection",supportedEvents:["onSelectionChange","onFocus","onBlur"]}},{type:"TagGroup",label:"Tag Group",category:"Data Display",icon:"",inspector:{hasCustomEditor:!0,editorName:"TagGroupEditor",dataBindingType:"collection",supportedEvents:["onSelectionChange","onFocus","onBlur"]}},{type:"Tooltip",label:"Tooltip",category:"Feedback",icon:"",inspector:{hasCustomEditor:!0,editorName:"TooltipEditor",dataBindingType:null,supportedEvents:["onOpenChange","onMouseEnter","onMouseLeave"]}},{type:"ProgressBar",label:"Progress Bar",category:"Feedback",icon:"",inspector:{hasCustomEditor:!0,editorName:"ProgressBarEditor",dataBindingType:"value",supportedEvents:[]}},{type:"Meter",label:"Meter",category:"Feedback",icon:"",inspector:{hasCustomEditor:!0,editorName:"MeterEditor",dataBindingType:"value",supportedEvents:[]}},{type:"Badge",label:"Badge",category:"Feedback",icon:"",inspector:{hasCustomEditor:!0,editorName:"BadgeEditor",dataBindingType:null,supportedEvents:[]}},{type:"Panel",label:"Panel",category:"Layout",icon:"",inspector:{hasCustomEditor:!0,editorName:"PanelEditor",dataBindingType:null,supportedEvents:["onClick","onMouseEnter","onMouseLeave","onFocus","onBlur"]}},{type:"Card",label:"Card",category:"Layout",icon:"",inspector:{hasCustomEditor:!0,editorName:"CardEditor",dataBindingType:null,supportedEvents:["onClick","onMouseEnter","onMouseLeave","onFocus","onBlur"]}},{type:"Tabs",label:"Tabs",category:"Layout",icon:"",inspector:{hasCustomEditor:!0,editorName:"TabsEditor",dataBindingType:null,supportedEvents:["onSelectionChange","onFocus","onBlur"]}},{type:"Breadcrumbs",label:"Breadcrumbs",category:"Layout",icon:"",inspector:{hasCustomEditor:!0,editorName:"BreadcrumbsEditor",dataBindingType:null,supportedEvents:["onAction","onFocus","onBlur"]}},{type:"Separator",label:"Separator",category:"Layout",icon:"",inspector:{hasCustomEditor:!0,editorName:"SeparatorEditor",dataBindingType:null,supportedEvents:[]}},{type:"Group",label:"Group",category:"Layout",icon:"",inspector:{hasCustomEditor:!0,editorName:"GroupEditor",dataBindingType:null,supportedEvents:["onFocus","onBlur"]}},{type:"body",label:"Body",category:"Layout",icon:"",inspector:{hasCustomEditor:!0,editorName:void 0,dataBindingType:null,supportedEvents:[]}},{type:"Slot",label:"Slot",category:"Layout",icon:"",inspector:{hasCustomEditor:!0,editorName:"SlotEditor",dataBindingType:null,supportedEvents:[]}},{type:"Dialog",label:"Dialog",category:"Overlays",icon:"",inspector:{hasCustomEditor:!0,editorName:"DialogEditor",dataBindingType:null,supportedEvents:["onOpenChange","onFocus","onBlur"]}},{type:"Modal",label:"Modal",category:"Overlays",icon:"",inspector:{hasCustomEditor:!0,editorName:"ModalEditor",dataBindingType:null,supportedEvents:["onOpenChange"]}},{type:"Popover",label:"Popover",category:"Overlays",icon:"",inspector:{hasCustomEditor:!0,editorName:"PopoverEditor",dataBindingType:null,supportedEvents:["onOpenChange"]}},{type:"Calendar",label:"Calendar",category:"Date & Time",icon:"",inspector:{hasCustomEditor:!0,editorName:"CalendarEditor",dataBindingType:"value",supportedEvents:["onChange","onFocus","onBlur"]}},{type:"DatePicker",label:"Date Picker",category:"Date & Time",icon:"",inspector:{hasCustomEditor:!0,editorName:"DatePickerEditor",dataBindingType:"value",supportedEvents:["onChange","onOpenChange","onFocus","onBlur"]}},{type:"DateRangePicker",label:"Date Range Picker",category:"Date & Time",icon:"",inspector:{hasCustomEditor:!0,editorName:"DateRangePickerEditor",dataBindingType:"value",supportedEvents:["onChange","onOpenChange","onFocus","onBlur"]}},{type:"TimeField",label:"Time Field",category:"Date & Time",icon:"",inspector:{hasCustomEditor:!0,editorName:"TimeFieldEditor",dataBindingType:"value",supportedEvents:["onChange","onFocus","onBlur"]}},{type:"MenuItem",label:"Menu Item",category:"Items",icon:"",inspector:{hasCustomEditor:!0,editorName:"MenuItemEditor",dataBindingType:null,supportedEvents:["onAction","onMouseEnter","onMouseLeave"]}},{type:"SelectItem",label:"Select Item",category:"Items",icon:"",inspector:{hasCustomEditor:!0,editorName:"SelectItemEditor",dataBindingType:null,supportedEvents:["onMouseEnter","onMouseLeave"]}},{type:"ComboBoxItem",label:"ComboBox Item",category:"Items",icon:"",inspector:{hasCustomEditor:!0,editorName:"ComboBoxItemEditor",dataBindingType:null,supportedEvents:["onMouseEnter","onMouseLeave"]}},{type:"ListBoxItem",label:"ListBox Item",category:"Items",icon:"",inspector:{hasCustomEditor:!0,editorName:"ListBoxItemEditor",dataBindingType:null,supportedEvents:["onAction","onMouseEnter","onMouseLeave"]}},{type:"GridListItem",label:"GridList Item",category:"Items",icon:"",inspector:{hasCustomEditor:!0,editorName:"GridListItemEditor",dataBindingType:null,supportedEvents:["onAction","onMouseEnter","onMouseLeave"]}},{type:"TreeItem",label:"Tree Item",category:"Items",icon:"",inspector:{hasCustomEditor:!0,editorName:"TreeItemEditor",dataBindingType:null,supportedEvents:["onAction","onMouseEnter","onMouseLeave"]}},{type:"Tag",label:"Tag",category:"Items",icon:"",inspector:{hasCustomEditor:!0,editorName:"TagEditor",dataBindingType:null,supportedEvents:["onMouseEnter","onMouseLeave"]}},{type:"Tab",label:"Tab",category:"Items",icon:"",inspector:{hasCustomEditor:!0,editorName:"TabEditor",dataBindingType:null,supportedEvents:["onMouseEnter","onMouseLeave"]}},{type:"Breadcrumb",label:"Breadcrumb",category:"Items",icon:"",inspector:{hasCustomEditor:!0,editorName:"BreadcrumbEditor",dataBindingType:null,supportedEvents:["onClick","onMouseEnter","onMouseLeave"]}},{type:"TableHeader",label:"Table Header",category:"Table Parts",icon:"",inspector:{hasCustomEditor:!0,editorName:"TableHeaderEditor",dataBindingType:null,supportedEvents:[]}},{type:"TableBody",label:"Table Body",category:"Table Parts",icon:"",inspector:{hasCustomEditor:!0,editorName:"TableBodyEditor",dataBindingType:null,supportedEvents:[]}},{type:"Column",label:"Column",category:"Table Parts",icon:"",inspector:{hasCustomEditor:!0,editorName:"ColumnEditor",dataBindingType:null,supportedEvents:[]}},{type:"ColumnGroup",label:"Column Group",category:"Table Parts",icon:"",inspector:{hasCustomEditor:!0,editorName:"ColumnGroupEditor",dataBindingType:null,supportedEvents:[]}},{type:"Row",label:"Row",category:"Table Parts",icon:"",inspector:{hasCustomEditor:!0,editorName:"RowEditor",dataBindingType:null,supportedEvents:["onAction","onMouseEnter","onMouseLeave"]}},{type:"Cell",label:"Cell",category:"Table Parts",icon:"",inspector:{hasCustomEditor:!0,editorName:"CellEditor",dataBindingType:null,supportedEvents:[]}},{type:"Field",label:"Field",category:"Data Display",icon:"",inspector:{hasCustomEditor:!0,editorName:"FieldEditor",dataBindingType:null,supportedEvents:[]}},{type:"DataTable",label:"DataTable",category:"Data",icon:"",inspector:{hasCustomEditor:!0,editorName:"DataTableEditor",dataBindingType:"collection",supportedEvents:["onLoad","onError","onRefresh"]}}];function FSe(t){return IX.find(e=>e.type===t)}function BSe(t,e={}){const{enabled:n=!0,initialData:r=[],retryCount:i=0,retryDelay:a=1e3}=e,s=iq({initialSelectedKeys:[],async load({signal:o}){if(!n)return{items:r};let c=null,u=0;for(;u<=i;)try{const h=await t({signal:o}),f=Array.isArray(h)?h:[h];return console.log(" useAsyncQuery   :",f.length,"items"),{items:f}}catch(h){if(c=h,c.name==="AbortError")return console.log(" useAsyncQuery  "),{items:r};u++,u<=i&&(console.warn(` useAsyncQuery   (${u}/${i+1}), ${a}ms  ...`),await new Promise(f=>setTimeout(f,a)))}throw console.error(` useAsyncQuery   (${u} ):`,c),c},getKey:o=>String(o.id||Math.random())});return{data:s.items,isLoading:s.isLoading,error:s.error||null,reload:s.reload}}function Fl(t,e={}){const{onSuccess:n,onError:r,onSettled:i}=e,[a,s]=T.useState(null),[o,c]=T.useState(!1),[u,h]=T.useState(null),f=T.useCallback(async g=>{c(!0),h(null);try{const v=await t(g);return s(v),console.log(" useAsyncMutation "),n&&await n(v,g),i&&await i(v,null,g),v}catch(v){const x=v;throw h(x),console.error(" useAsyncMutation :",x),r&&await r(x,g),i&&await i(void 0,x,g),x}finally{c(!1)}},[t,n,r,i]),m=T.useCallback(()=>{s(null),h(null),c(!1)},[]);return{data:a,isLoading:o,isSuccess:a!==null&&u===null,isError:u!==null,error:u,execute:f,reset:m}}function zSe(t,e){const n=new Map;console.log("[ProjectMerger]  :",{localCount:t.length,cloudCount:e.length});for(const i of t){const a={id:i.id,name:i.name,storage:{local:!0,cloud:!1},sync:{status:"local-only",localUpdatedAt:new Date(i.updated_at)},createdAt:new Date(i.created_at),lastModified:new Date(i.updated_at),localProject:i};n.set(i.id,a)}for(const i of e){const a=n.get(i.id);if(a){a.storage.cloud=!0,a.sync.cloudUpdatedAt=new Date(i.updated_at),a.cloudProject=i;const s=a.sync.localUpdatedAt.getTime(),o=a.sync.cloudUpdatedAt.getTime();Math.abs(s-o)<1e3?a.sync.status="synced":s>o?(a.sync.status="conflict",console.log("[ProjectMerger]   ( ):",{projectId:i.id,localTime:a.sync.localUpdatedAt,cloudTime:a.sync.cloudUpdatedAt})):(a.sync.status="conflict",console.log("[ProjectMerger]   ( ):",{projectId:i.id,localTime:a.sync.localUpdatedAt,cloudTime:a.sync.cloudUpdatedAt})),a.lastModified=new Date(Math.max(s,o))}else{const s={id:i.id,name:i.name,storage:{local:!1,cloud:!0},sync:{status:"cloud-only",cloudUpdatedAt:new Date(i.updated_at)},createdAt:new Date(i.created_at),lastModified:new Date(i.updated_at),cloudProject:i};n.set(i.id,s)}}const r=Array.from(n.values());return console.log("[ProjectMerger]  :",{totalCount:r.length,localOnly:r.filter(i=>i.sync.status==="local-only").length,cloudOnly:r.filter(i=>i.sync.status==="cloud-only").length,synced:r.filter(i=>i.sync.status==="synced").length,conflict:r.filter(i=>i.sync.status==="conflict").length}),r.sort((i,a)=>a.lastModified.getTime()-i.lastModified.getTime())}function USe(t){const{local:e,cloud:n}=t.storage;return e&&n?t.sync.status==="conflict"?{icon:"",label:"Needs Sync",className:"badge-conflict"}:{icon:"",label:"Synced",className:"badge-synced"}:e&&!n?{icon:"",label:"Local Only",className:"badge-local"}:!e&&n?{icon:"",label:"Cloud Only",className:"badge-cloud"}:{icon:"",label:"Unknown",className:"badge-unknown"}}function VSe(t){const{local:e,cloud:n}=t.storage;return{canSync:e&&(!n||t.sync.status==="conflict"),canDownload:n&&!e,canOpen:e||n,canExport:e}}function $6(t){const n=Date.now()-t.getTime(),r=Math.floor(n/1e3),i=Math.floor(r/60),a=Math.floor(i/60),s=Math.floor(a/24),o=Math.floor(s/30),c=Math.floor(s/365);return r<60?" ":i<60?`${i} `:a<24?`${a} `:s<30?`${s} `:o<12?`${o} `:`${c} `}async function HSe(t){console.log("[ProjectSync]  :",t);try{const e=await Yt(),n=await e.projects.getById(t);if(!n)throw new Error(`   : ${t}`);console.log("[ProjectSync]   :",n.name);try{await Od.updateProject(n.id,{name:n.name,updated_at:new Date().toISOString()}),console.log("[ProjectSync]    ")}catch{console.log("[ProjectSync]   ,  "),await Od.createProject({id:n.id,name:n.name,created_by:n.created_by||""})}const r=await e.pages.getByProject(t);console.log("[ProjectSync]  :",r.length);for(const i of r){const a={id:i.id,project_id:i.project_id,title:i.title,slug:i.slug,parent_id:i.parent_id,order_num:i.order_num,created_at:i.created_at,updated_at:new Date().toISOString()};try{await lg.updatePage(i.id,a)}catch{await lg.createPage(a)}const s=await e.elements.getByPage(i.id);if(console.log(`[ProjectSync]  "${i.title}" :`,s.length),s.length>0){const o=await Po.getElementsByPageId(i.id);o.length>0&&await Po.deleteMultipleElements(o.map(c=>c.id)),await Po.createMultipleElements(s.map(c=>({...c,updated_at:new Date().toISOString()})))}}await e.projects.update(t,{updated_at:new Date().toISOString()}),console.log(" [ProjectSync]  :",t)}catch(e){throw console.error(" [ProjectSync]  :",e),e}}async function GSe(t){console.log("[ProjectSync]  :",t);try{const e=await Yt(),n=await Od.getProjectById(t);if(!n)throw new Error(`   : ${t}`);console.log("[ProjectSync]   :",n.name),await e.projects.insert(n),console.log("[ProjectSync]    ");const r=await lg.getPagesByProjectId(t);console.log("[ProjectSync]  :",r.length);for(const i of r){const a={id:i.id,project_id:i.project_id,title:i.title,slug:i.slug,order_num:i.order_num,created_at:i.created_at,updated_at:i.updated_at};await e.pages.insert(a);const s=await Po.getElementsByPageId(i.id);console.log(`[ProjectSync]  "${i.title}" :`,s.length),s.length>0&&await e.elements.insertMany(s)}console.log(" [ProjectSync]  :",t)}catch(e){throw console.error(" [ProjectSync]  :",e),e}}const WSe="xstudio-history",qSe=1,Na="history-entries",fo="page-meta",KSe=90;class XSe{db=null;dbPromise=null;async init(){if(!this.db){if(this.dbPromise){await this.dbPromise;return}this.dbPromise=this.openDatabase(),this.db=await this.dbPromise,this.cleanupOldEntries().catch(console.error)}}openDatabase(){return new Promise((e,n)=>{const r=indexedDB.open(WSe,qSe);r.onerror=()=>{console.error(" [HistoryIDB] Failed to open database:",r.error),n(r.error)},r.onsuccess=()=>{console.log(" [HistoryIDB] Database opened successfully"),e(r.result)},r.onupgradeneeded=i=>{const a=i.target.result;if(!a.objectStoreNames.contains(Na)){const s=a.createObjectStore(Na,{keyPath:"id"});s.createIndex("pageId","pageId",{unique:!1}),s.createIndex("createdAt","createdAt",{unique:!1}),s.createIndex("pageId_createdAt",["pageId","createdAt"],{unique:!1})}a.objectStoreNames.contains(fo)||a.createObjectStore(fo,{keyPath:"pageId"}),console.log(" [HistoryIDB] Database schema created/upgraded")}})}async getDB(){return this.db||await this.init(),this.db}async saveEntry(e,n){try{const r=await this.getDB();return new Promise((i,a)=>{const o=r.transaction([Na],"readwrite").objectStore(Na),c={id:n.id,pageId:e,entry:n,createdAt:n.timestamp},u=o.put(c);u.onsuccess=()=>i(),u.onerror=()=>{console.error(" [HistoryIDB] Failed to save entry:",u.error),a(u.error)}})}catch(r){console.error(" [HistoryIDB] saveEntry error:",r)}}async saveEntries(e,n){if(n.length!==0)try{const r=await this.getDB();return new Promise((i,a)=>{const o=r.transaction([Na],"readwrite").objectStore(Na);let c=0,u=!1;for(const h of n){const f={id:h.id,pageId:e,entry:h,createdAt:h.timestamp},m=o.put(f);m.onsuccess=()=>{c++,c===n.length&&!u&&i()},m.onerror=()=>{u||(u=!0,console.error(" [HistoryIDB] Failed to save entries:",m.error),a(m.error))}}})}catch(r){console.error(" [HistoryIDB] saveEntries error:",r)}}async getEntriesByPage(e){try{const n=await this.getDB();return new Promise((r,i)=>{const c=n.transaction([Na],"readonly").objectStore(Na).index("pageId").getAll(e);c.onsuccess=()=>{const u=c.result;u.sort((f,m)=>f.createdAt-m.createdAt);const h=u.map(f=>f.entry);console.log(` [HistoryIDB] Loaded ${h.length} entries for page ${e}`),r(h)},c.onerror=()=>{console.error(" [HistoryIDB] Failed to get entries:",c.error),i(c.error)}})}catch(n){return console.error(" [HistoryIDB] getEntriesByPage error:",n),[]}}async deleteEntry(e){try{const n=await this.getDB();return new Promise((r,i)=>{const o=n.transaction([Na],"readwrite").objectStore(Na).delete(e);o.onsuccess=()=>r(),o.onerror=()=>{console.error(" [HistoryIDB] Failed to delete entry:",o.error),i(o.error)}})}catch(n){console.error(" [HistoryIDB] deleteEntry error:",n)}}async clearPageHistory(e){try{const n=await this.getDB();return new Promise((r,i)=>{const a=n.transaction([Na,fo],"readwrite"),s=a.objectStore(Na),o=a.objectStore(fo),u=s.index("pageId").openCursor(e);u.onsuccess=h=>{const f=h.target.result;f&&(f.delete(),f.continue())},o.delete(e),a.oncomplete=()=>{console.log(` [HistoryIDB] Cleared history for page ${e}`),r()},a.onerror=()=>{console.error(" [HistoryIDB] Failed to clear page history:",a.error),i(a.error)}})}catch(n){console.error(" [HistoryIDB] clearPageHistory error:",n)}}async savePageMeta(e,n,r){try{const i=await this.getDB();return new Promise((a,s)=>{const c=i.transaction([fo],"readwrite").objectStore(fo),u={pageId:e,currentIndex:n,totalEntries:r,lastUpdated:Date.now()},h=c.put(u);h.onsuccess=()=>a(),h.onerror=()=>{console.error(" [HistoryIDB] Failed to save meta:",h.error),s(h.error)}})}catch(i){console.error(" [HistoryIDB] savePageMeta error:",i)}}async getPageMeta(e){try{const n=await this.getDB();return new Promise((r,i)=>{const o=n.transaction([fo],"readonly").objectStore(fo).get(e);o.onsuccess=()=>{r(o.result||null)},o.onerror=()=>{console.error(" [HistoryIDB] Failed to get meta:",o.error),i(o.error)}})}catch(n){return console.error(" [HistoryIDB] getPageMeta error:",n),null}}async getAllPageIds(){try{const e=await this.getDB();return new Promise((n,r)=>{const s=e.transaction([fo],"readonly").objectStore(fo).getAllKeys();s.onsuccess=()=>{n(s.result)},s.onerror=()=>{console.error(" [HistoryIDB] Failed to get page IDs:",s.error),r(s.error)}})}catch(e){return console.error(" [HistoryIDB] getAllPageIds error:",e),[]}}async cleanupOldEntries(){try{const e=await this.getDB(),n=Date.now()-KSe*24*60*60*1e3;let r=0;return new Promise((i,a)=>{const s=e.transaction([Na],"readwrite"),c=s.objectStore(Na).index("createdAt"),u=IDBKeyRange.upperBound(n),h=c.openCursor(u);h.onsuccess=f=>{const m=f.target.result;m&&(m.delete(),r++,m.continue())},s.oncomplete=()=>{r>0&&console.log(` [HistoryIDB] Cleaned up ${r} old entries`),i(r)},s.onerror=()=>{console.error(" [HistoryIDB] Cleanup failed:",s.error),a(s.error)}})}catch(e){return console.error(" [HistoryIDB] cleanupOldEntries error:",e),0}}async clearAll(){try{const e=await this.getDB();return new Promise((n,r)=>{const i=e.transaction([Na,fo],"readwrite");i.objectStore(Na).clear(),i.objectStore(fo).clear(),i.oncomplete=()=>{console.log(" [HistoryIDB] All history cleared"),n()},i.onerror=()=>{console.error(" [HistoryIDB] Failed to clear all:",i.error),r(i.error)}})}catch(e){console.error(" [HistoryIDB] clearAll error:",e)}}async getStats(){try{const e=await this.getDB();return new Promise((n,r)=>{const i=e.transaction([Na,fo],"readonly");let a=0,s=0;const o=i.objectStore(Na).count(),c=i.objectStore(fo).count();o.onsuccess=()=>{a=o.result},c.onsuccess=()=>{s=c.result},i.oncomplete=()=>{const u=a*500;n({totalEntries:a,totalPages:s,estimatedSize:u})},i.onerror=()=>{r(i.error)}})}catch(e){return console.error(" [HistoryIDB] getStats error:",e),{totalEntries:0,totalPages:0,estimatedSize:0}}}close(){this.db&&(this.db.close(),this.db=null,this.dbPromise=null,console.log(" [HistoryIDB] Database connection closed"))}}const $X=new XSe,j6={syncMode:"manual",projectCreation:"local",autoSyncInterval:5,autoDownloadOnOpen:!1},jX=Ks()(K2(t=>({...j6,setSyncMode:e=>t({syncMode:e}),setProjectCreation:e=>t({projectCreation:e}),setAutoSyncInterval:e=>t({autoSyncInterval:e}),setAutoDownloadOnOpen:e=>t({autoDownloadOnOpen:e}),resetSettings:()=>t(j6)}),{name:"xstudio-settings",version:1}));function YSe({isOpen:t,onClose:e}){const{projectCreation:n,syncMode:r,setProjectCreation:i,setSyncMode:a,resetSettings:s}=jX();return t?l.jsx("div",{className:"settings-overlay",onClick:e,children:l.jsxs("div",{className:"settings-panel",onClick:o=>o.stopPropagation(),children:[l.jsxs("div",{className:"settings-header",children:[l.jsxs("div",{className:"settings-title",children:[l.jsx(Kl,{size:20}),l.jsx("h2",{children:"Settings"})]}),l.jsx(Ut,{variant:"ghost",size:"sm",onPress:e,"aria-label":"Close settings",children:l.jsx(ol,{size:20})})]}),l.jsxs("div",{className:"settings-content",children:[l.jsxs("div",{className:"setting-item",children:[l.jsxs("label",{htmlFor:"project-creation",children:[l.jsx("strong",{children:"  "}),l.jsx("p",{className:"setting-description",children:"    ."})]}),l.jsxs(s2,{id:"project-creation",selectedKey:n,onSelectionChange:o=>i(o),children:[l.jsx(km,{id:"local",textValue:"Local Only",children:l.jsxs("div",{className:"select-option",children:[l.jsx("strong",{children:" Local Only"}),l.jsx("p",{children:"(IndexedDB)  ()"})]})}),l.jsx(km,{id:"cloud",textValue:"Cloud Only",children:l.jsxs("div",{className:"select-option",children:[l.jsx("strong",{children:" Cloud Only"}),l.jsx("p",{children:"(Supabase) "})]})}),l.jsx(km,{id:"both",textValue:"Local + Cloud",children:l.jsxs("div",{className:"select-option",children:[l.jsx("strong",{children:" Local + Cloud"}),l.jsx("p",{children:"   ()"})]})})]})]}),l.jsxs("div",{className:"setting-item",children:[l.jsxs("label",{htmlFor:"sync-mode",children:[l.jsx("strong",{children:" "}),l.jsx("p",{className:"setting-description",children:"    ."})]}),l.jsxs(s2,{id:"sync-mode",selectedKey:r,onSelectionChange:o=>a(o),children:[l.jsx(km,{id:"manual",textValue:"Manual Sync",children:l.jsxs("div",{className:"select-option",children:[l.jsx("strong",{children:" Manual Sync"}),l.jsx("p",{children:"Sync     ()"})]})}),l.jsx(km,{id:"auto",textValue:"Auto Sync",children:l.jsxs("div",{className:"select-option",children:[l.jsx("strong",{children:" Auto Sync"}),l.jsx("p",{children:"   ()"})]})})]})]}),l.jsxs("div",{className:"settings-info",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"  :"})," Local Only + Manual Sync"]}),l.jsx("p",{children:"  ,   Sync   ."})]})]}),l.jsxs("div",{className:"settings-footer",children:[l.jsx(Ut,{variant:"ghost",size:"sm",onPress:s,children:"Reset to Defaults"}),l.jsx(Ut,{variant:"primary",size:"sm",onPress:e,children:"Done"})]})]})}):null}function ZSe(){const t=B_(),[e,n]=T.useState(""),[r,i]=T.useState("all"),[a,s]=T.useState([]),[o,c]=T.useState(!1),u=jX(N=>N.projectCreation),h=BSe(async()=>await Od.fetchProjects());T.useEffect(()=>{const N=async()=>{try{const D=(await(await Yt()).projects.getAll()).map($=>({id:$.id,name:$.name,created_by:$.created_by||"",created_at:$.created_at||new Date().toISOString(),updated_at:$.updated_at||new Date().toISOString()}));console.log("[Dashboard]   :",D.length);const k=h.data||[];console.log("[Dashboard]  :",k.length);const L=zSe(D,k);s(L),console.log("[Dashboard]  :",L.length)}catch(P){console.error("[Dashboard]   :",P)}};h.isLoading||N()},[h.data,h.isLoading]);const f=Fl(async({name:N})=>{const P=await Yt(),R=await Od.getCurrentUser();let D;u==="local"?(D={id:ri.generateId(),name:N.trim(),created_by:R.id,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},await P.projects.insert(D),console.log("[Dashboard]   :",D.id)):u==="cloud"?(D=await Od.createProject({name:N.trim(),created_by:R.id}),console.log("[Dashboard]   :",D.id)):(D=await Od.createProject({name:N.trim(),created_by:R.id}),await P.projects.insert(D),console.log("[Dashboard] +  :",D.id));const k=ri.generateId(),L={id:k,project_id:D.id,title:"Home",slug:"/",parent_id:null,order_num:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},$={id:ri.generateId(),tag:"body",props:{},parent_id:null,page_id:k,order_num:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return u==="local"?(await P.pages.insert(L),await P.elements.insert($)):u==="cloud"?(await lg.createPage({id:k,project_id:D.id,title:"Home",slug:"/",order_num:0}),await Po.createElement($)):(await P.pages.insert(L),await P.elements.insert($),await lg.createPage({id:k,project_id:D.id,title:"Home",slug:"/",order_num:0}),await Po.createElement($)),D},{onSuccess:N=>{h.reload(),n(""),t(`/builder/${N.id}`)}}),m=Fl(async N=>{let P;if(r==="local"?(P="local",console.log("[Dashboard]   :",N)):r==="cloud"?(P="cloud",console.log("[Dashboard]   :",N)):(P="both",console.log("[Dashboard]  +   :",N)),P==="local"||P==="both"){const R=await Yt(),D=await R.pages.getByProject(N);console.log("[Dashboard]  :",D.length);for(const O of D){const z=await R.elements.getByPage(O.id);console.log("[Dashboard] ",O.title," :",z.length);for(const V of z)await R.elements.delete(V.id);await R.history.clear(O.id),await $X.clearPageHistory(O.id)}for(const O of D)await R.pages.delete(O.id);console.log("[Dashboard]     ");const k=await R.designTokens.getByProject(N);console.log("[Dashboard]   :",k.length);for(const O of k)await R.designTokens.delete(O.id);const L=await R.themes.getByProject(N);console.log("[Dashboard]   :",L.length);for(const O of L)await R.themes.delete(O.id);const $=await R.layouts.getByProject(N);console.log("[Dashboard]  :",$.length);for(const O of $){const z=await R.elements.getByLayout(O.id);console.log("[Dashboard] ",O.name," :",z.length);for(const V of z)await R.elements.delete(V.id);await R.layouts.delete(O.id)}const B=await R.data_tables.getByProject(N);for(const O of B)await R.data_tables.delete(O.id);console.log(`[Dashboard] DataTables ${B.length}  `);const q=await R.api_endpoints.getByProject(N);for(const O of q)await R.api_endpoints.delete(O.id);console.log(`[Dashboard] API Endpoints ${q.length}  `);const U=await R.variables.getByProject(N);for(const O of U)await R.variables.delete(O.id);console.log(`[Dashboard] Variables ${U.length}  `);const J=await R.transformers.getByProject(N);for(const O of J)await R.transformers.delete(O.id);console.log(`[Dashboard] Transformers ${J.length}  `),await R.projects.delete(N),console.log(" [Dashboard]    ")}if(P==="cloud"||P==="both")try{await Od.deleteProject(N),console.log(" [Dashboard]    ")}catch(R){console.warn("[Dashboard] Supabase   (    ):",R)}console.log(` [Dashboard]    (${P}):`,N)},{onSuccess:()=>{h.reload()}}),g=Fl(async N=>{await HSe(N),console.log("[Dashboard]   :",N)},{onSuccess:()=>{h.reload()}}),v=Fl(async N=>{await GSe(N),console.log("[Dashboard]   :",N)},{onSuccess:()=>{h.reload()}}),x=async N=>{if(N.preventDefault(),!e.trim()){alert("  .");return}try{await f.execute({name:e})}catch(P){console.error("  :",P)}},_=async N=>{if(confirm("   ?"))try{await m.execute(N)}catch(P){console.error("  :",P)}},w=a.filter(N=>r==="local"?N.storage.local:r==="cloud"?N.storage.cloud:!0),S=h.isLoading||f.isLoading||m.isLoading||g.isLoading||v.isLoading,E=h.error||f.error||m.error||g.error||v.error;if(h.isLoading&&a.length===0)return l.jsx("div",{className:"dashboard",children:l.jsx("div",{className:"loading",children:"  ..."})});const A={all:a.length,local:a.filter(N=>N.storage.local).length,cloud:a.filter(N=>N.storage.cloud).length};return l.jsxs("div",{className:"dashboard",children:[l.jsxs("header",{className:"header",children:[l.jsx("h1",{children:"XStudio Dashboard"}),l.jsxs("div",{className:"filter",children:[l.jsxs(Ut,{variant:r==="all"?"primary":"default",size:"sm",onPress:()=>i("all"),children:["All (",A.all,")"]}),l.jsxs(Ut,{variant:r==="local"?"primary":"default",size:"sm",onPress:()=>i("local"),children:[l.jsx(Mre,{size:14})," Local (",A.local,")"]}),l.jsxs(Ut,{variant:r==="cloud"?"primary":"default",size:"sm",onPress:()=>i("cloud"),children:[l.jsx(VB,{size:14})," Cloud (",A.cloud,")"]}),l.jsx(Ut,{variant:"ghost",size:"sm",onPress:()=>c(!0),"aria-label":"Open settings",children:l.jsx(Kl,{size:16})})]})]}),E&&l.jsx("div",{className:"error-message",children:E.message}),l.jsxs("main",{className:"main",children:[l.jsxs("form",{onSubmit:x,className:"add-project-form",children:[l.jsx(_k,{type:"text",value:e,onChange:N=>n(N),placeholder:"New Project",isDisabled:S}),l.jsx(Ut,{type:"submit",size:"sm",className:"add-project-button",isDisabled:S||!e.trim(),children:f.isLoading?"Creating...":l.jsx(No,{size:16})})]}),l.jsx("div",{className:"projects-grid",children:w.map(N=>{const P=USe(N),R=VSe(N);return l.jsxs("div",{className:"project-card",children:[l.jsx("div",{className:"icon",children:l.jsx(cae,{size:16,color:"var(--color-primary-600)"})}),l.jsxs("div",{className:"content",children:[l.jsx("h3",{className:"title",children:N.name}),l.jsx("div",{className:"badges",children:l.jsxs("span",{className:`badge ${P.className}`,children:[P.icon," ",P.label]})}),l.jsx("p",{className:"description",children:$6(N.lastModified)}),N.sync.lastSyncAt&&l.jsxs("p",{className:"sync-info",children:["Last sync: ",$6(N.sync.lastSyncAt)]})]}),l.jsxs("div",{className:"project-actions",children:[R.canOpen&&l.jsx(Ut,{onPress:()=>t(`/builder/${N.id}`),isDisabled:S,children:l.jsx(QB,{size:16}),variant:"primary",size:"sm"}),R.canSync&&l.jsx(Ut,{onPress:async()=>{try{await g.execute(N.id),alert("  !   .")}catch(D){console.error("[Dashboard] Sync :",D),alert("  : "+D.message)}},isDisabled:S,children:g.isLoading?l.jsx(Hne,{size:16}):l.jsx(UB,{size:16})}),R.canDownload&&l.jsxs(Ut,{onPress:async()=>{try{await v.execute(N.id),alert("  !   .")}catch(D){console.error("[Dashboard] Download :",D),alert("  : "+D.message)}},isDisabled:S,variant:"secondary",size:"sm",children:[l.jsx($2,{size:14})," ",v.isLoading?"Downloading...":"Download"]}),l.jsx(Ut,{onPress:()=>t(`/theme/${N.id}`),isDisabled:S,children:l.jsx(r_,{size:16}),variant:"default",size:"sm"}),l.jsx(Ut,{onPress:()=>_(N.id),isDisabled:S,children:l.jsx(Qo,{size:16}),variant:"default",size:"sm"})]})]},N.id)})}),w.length===0&&!S&&l.jsxs("div",{className:"empty-state",children:[l.jsx("p",{children:" ."}),l.jsx("p",{children:"   !"})]})]}),l.jsx("footer",{className:"footer",children:l.jsx("p",{children:"XStudio - Local-first Web Builder"})}),l.jsx(YSe,{isOpen:o,onClose:()=>c(!1)})]})}var LX=Symbol.for("immer-nothing"),L6=Symbol.for("immer-draftable"),qs=Symbol.for("immer-state");function Dc(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var nl=Object,by=nl.getPrototypeOf,o2="constructor",wT="prototype",Mk="configurable",l2="enumerable",g3="writable",w_="value",Wf=t=>!!t&&!!t[qs];function Qd(t){return t?OX(t)||ST(t)||!!t[L6]||!!t[o2]?.[L6]||ET(t)||CT(t):!1}var JSe=nl[wT][o2].toString(),O6=new WeakMap;function OX(t){if(!t||!GI(t))return!1;const e=by(t);if(e===null||e===nl[wT])return!0;const n=nl.hasOwnProperty.call(e,o2)&&e[o2];if(n===Object)return!0;if(!Ov(n))return!1;let r=O6.get(n);return r===void 0&&(r=Function.toString.call(n),O6.set(n,r)),r===JSe}function lw(t,e,n=!0){cw(t)===0?(n?Reflect.ownKeys(t):nl.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function cw(t){const e=t[qs];return e?e.type_:ST(t)?1:ET(t)?2:CT(t)?3:0}var F6=(t,e,n=cw(t))=>n===2?t.has(e):nl[wT].hasOwnProperty.call(t,e),Ak=(t,e,n=cw(t))=>n===2?t.get(e):t[e],c2=(t,e,n,r=cw(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function QSe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var ST=Array.isArray,ET=t=>t instanceof Map,CT=t=>t instanceof Set,GI=t=>typeof t=="object",Ov=t=>typeof t=="function",DA=t=>typeof t=="boolean",Id=t=>t.copy_||t.base_,WI=t=>t.modified_?t.copy_:t.base_;function Pk(t,e){if(ET(t))return new Map(t);if(CT(t))return new Set(t);if(ST(t))return Array[wT].slice.call(t);const n=OX(t);if(e===!0||e==="class_only"&&!n){const r=nl.getOwnPropertyDescriptors(t);delete r[qs];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o[g3]===!1&&(o[g3]=!0,o[Mk]=!0),(o.get||o.set)&&(r[s]={[Mk]:!0,[g3]:!0,[l2]:o[l2],[w_]:t[s]})}return nl.create(by(t),r)}else{const r=by(t);if(r!==null&&n)return{...t};const i=nl.create(r);return nl.assign(i,t)}}function qI(t,e=!1){return TT(t)||Wf(t)||!Qd(t)||(cw(t)>1&&nl.defineProperties(t,{set:IC,add:IC,clear:IC,delete:IC}),nl.freeze(t),e&&lw(t,(n,r)=>{qI(r,!0)},!1)),t}function eEe(){Dc(2)}var IC={[w_]:eEe};function TT(t){return t===null||!GI(t)?!0:nl.isFrozen(t)}var u2="MapSet",Nk="Patches",FX={};function xy(t){const e=FX[t];return e||Dc(0,t),e}var tEe=t=>!!FX[t],S_,BX=()=>S_,nEe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:tEe(u2)?xy(u2):void 0});function B6(t,e){e&&(t.patchPlugin_=xy(Nk),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Dk(t){kk(t),t.drafts_.forEach(rEe),t.drafts_=null}function kk(t){t===S_&&(S_=t.parent_)}var z6=t=>S_=nEe(S_,t);function rEe(t){const e=t[qs];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function U6(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[qs].modified_&&(Dk(e),Dc(4)),Qd(t)&&(t=V6(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[qs].base_,t,e)}else t=V6(e,n);return iEe(e,t,!0),Dk(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==LX?t:void 0}function V6(t,e){if(TT(e))return e;const n=e[qs];if(!n)return KI(e,t.handledSet_,t);if(!MT(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);VX(n,t)}return n.copy_}function iEe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&qI(e,n)}function zX(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var MT=(t,e)=>t.scope_===e,aEe=[];function UX(t,e,n,r){const i=Id(t),a=t.type_;if(r!==void 0&&Ak(i,r,a)===e){c2(i,r,n,a);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;lw(i,(c,u)=>{if(Wf(u)){const h=o.get(u)||[];h.push(c),o.set(u,h)}})}const s=t.draftLocations_.get(e)??aEe;for(const o of s)c2(i,o,n,a)}function sEe(t,e,n){t.callbacks_.push(function(i){const a=e;if(!a||!MT(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const s=WI(a);UX(t,a.draft_??a,s,n),VX(a,i)})}function VX(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}zX(t)}}function oEe(t,e,n){const{scope_:r}=t;if(Wf(n)){const i=n[qs];MT(i,r)&&i.callbacks_.push(function(){v3(t);const s=WI(i);UX(t,n,s,e)})}else Qd(n)&&t.callbacks_.push(function(){const a=Id(t);Ak(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&KI(Ak(t.copy_,e,t.type_),r.handledSet_,r)})}function KI(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Wf(t)||e.has(t)||!Qd(t)||TT(t)||(e.add(t),lw(t,(r,i)=>{if(Wf(i)){const a=i[qs];if(MT(a,n)){const s=WI(a);c2(t,r,s,t.type_),zX(a)}}else Qd(i)&&KI(i,e,n)})),t}function lEe(t,e){const n=ST(t),r={type_:n?1:0,scope_:e?e.scope_:BX(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=XI;n&&(i=[r],a=E_);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,[o,r]}var XI={get(t,e){if(e===qs)return t;const n=Id(t);if(!F6(n,e,t.type_))return cEe(t,n,e);const r=n[e];if(t.finalized_||!Qd(r))return r;if(r===kA(t.base_,e)){v3(t);const i=t.type_===1?+e:e,a=Ik(t.scope_,r,t,i);return t.copy_[i]=a}return r},has(t,e){return e in Id(t)},ownKeys(t){return Reflect.ownKeys(Id(t))},set(t,e,n){const r=HX(Id(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=kA(Id(t),e),a=i?.[qs];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(QSe(n,i)&&(n!==void 0||F6(t.base_,e,t.type_)))return!0;v3(t),Rk(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),oEe(t,e,n)),!0},deleteProperty(t,e){return v3(t),kA(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),Rk(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Id(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[g3]:!0,[Mk]:t.type_!==1||e!=="length",[l2]:r[l2],[w_]:n[e]}},defineProperty(){Dc(11)},getPrototypeOf(t){return by(t.base_)},setPrototypeOf(){Dc(12)}},E_={};lw(XI,(t,e)=>{E_[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}});E_.deleteProperty=function(t,e){return E_.set.call(this,t,e,void 0)};E_.set=function(t,e,n){return XI.set.call(this,t[0],e,n,t[0])};function kA(t,e){const n=t[qs];return(n?Id(n):t)[e]}function cEe(t,e,n){const r=HX(e,n);return r?w_ in r?r[w_]:r.get?.call(t.draft_):void 0}function HX(t,e){if(!(e in t))return;let n=by(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=by(n)}}function Rk(t){t.modified_||(t.modified_=!0,t.parent_&&Rk(t.parent_))}function v3(t){t.copy_||(t.assigned_=new Map,t.copy_=Pk(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var uEe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,n,r)=>{if(Ov(e)&&!Ov(n)){const a=n;n=e;const s=this;return function(c=a,...u){return s.produce(c,h=>n.call(this,h,...u))}}Ov(n)||Dc(6),r!==void 0&&!Ov(r)&&Dc(7);let i;if(Qd(e)){const a=z6(this),s=Ik(a,e,void 0);let o=!0;try{i=n(s),o=!1}finally{o?Dk(a):kk(a)}return B6(a,r),U6(i,a)}else if(!e||!GI(e)){if(i=n(e),i===void 0&&(i=e),i===LX&&(i=void 0),this.autoFreeze_&&qI(i,!0),r){const a=[],s=[];xy(Nk).generateReplacementPatches_(e,i,{patches_:a,inversePatches_:s}),r(a,s)}return i}else Dc(1,e)},this.produceWithPatches=(e,n)=>{if(Ov(e))return(s,...o)=>this.produceWithPatches(s,c=>e(c,...o));let r,i;return[this.produce(e,n,(s,o)=>{r=s,i=o}),r,i]},DA(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),DA(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),DA(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Qd(t)||Dc(8),Wf(t)&&(t=dEe(t));const e=z6(this),n=Ik(e,t,void 0);return n[qs].isManual_=!0,kk(e),n}finishDraft(t,e){const n=t&&t[qs];(!n||!n.isManual_)&&Dc(9);const{scope_:r}=n;return B6(r,e),U6(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=xy(Nk).applyPatches_;return Wf(t)?r(t,e):this.produce(t,i=>r(i,e))}};function Ik(t,e,n,r){const[i,a]=ET(e)?xy(u2).proxyMap_(e,n):CT(e)?xy(u2).proxySet_(e,n):lEe(e,n);return(n?.scope_??BX()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?sEe(n,a,r):a.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:u}=c;a.modified_&&u&&u.generatePatches_(a,[],c)}),i}function dEe(t){return Wf(t)||Dc(10,t),GX(t)}function GX(t){if(!Qd(t)||TT(t))return t;const e=t[qs];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Pk(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=Pk(t,!0);return lw(n,(i,a)=>{c2(n,i,GX(a))},r),e&&(e.finalized_=!1),n}var hEe=new uEe,Br=hEe.produce;const fEe=t=>({multiSelectMode:!1,selectedElementIds:[],selectionBounds:null,setMultiSelectMode:e=>t(Br(n=>{n.multiSelectMode=e,e||(n.selectedElementIds=n.selectedElementIds.slice(0,1))})),addToSelection:e=>t(Br(n=>{n.multiSelectMode?n.selectedElementIds.includes(e)||n.selectedElementIds.push(e):n.selectedElementIds=[e]})),removeFromSelection:e=>t(Br(n=>{n.selectedElementIds=n.selectedElementIds.filter(r=>r!==e)})),clearSelection:()=>t(Br(e=>{e.selectedElementIds=[],e.selectionBounds=null})),setSelectionBounds:e=>t(Br(n=>{n.selectionBounds=e})),selectAll:e=>t(Br(n=>{n.selectedElementIds=e.map(r=>r.id)})),selectByParent:(e,n)=>t(Br(r=>{const i=n.filter(a=>a.parent_id===e);r.selectedElementIds=i.map(a=>a.id)}))});class pEe{commands=new Map;elementCache=new Map;maxCommands=100;maxCacheSize=500;compressionEnabled=!0;constructor(e){this.maxCommands=e?.maxCommands??100,this.maxCacheSize=e?.maxCacheSize??500,this.compressionEnabled=e?.compressionEnabled??!0}addCommand(e){const n=this.generateCommandId(),r=Date.now(),i={...e,id:n,timestamp:r},a=this.getCommandByElementId(e.elementId);return a&&this.canMergeCommands(a,i)?this.mergeCommands(a.id,i):this.commands.set(n,i),this.manageCache(),n}getCommand(e){return this.commands.get(e)}getCommandByElementId(e){for(const n of this.commands.values())if(n.elementId===e)return n}getAllCommands(){return Array.from(this.commands.values()).sort((e,n)=>n.timestamp-e.timestamp)}removeCommand(e){return this.commands.delete(e)}cacheElement(e){this.elementCache.size>=this.maxCacheSize&&this.cleanOldCache();const n={id:e.id,tag:e.tag,props:this.compressionEnabled?this.compressProps(e.props):JSON.stringify(e.props),parent_id:e.parent_id||null,page_id:e.page_id||"",order_num:e.order_num||0};this.elementCache.set(e.id,n)}restoreElement(e){const n=this.elementCache.get(e);if(n)return{id:n.id,tag:n.tag,props:this.compressionEnabled?this.decompressProps(n.props):JSON.parse(n.props),parent_id:n.parent_id,page_id:n.page_id,order_num:n.order_num}}getMemoryStats(){const e=this.commands.size,n=this.elementCache.size;let r=0;for(const a of this.commands.values())try{r+=JSON.stringify(a).length*2}catch{r+=1e3}for(const a of this.elementCache.values())try{r+=JSON.stringify(a).length*2}catch{r+=500}const i=this.compressionEnabled?.3:1;return{commandCount:e,cacheSize:n,estimatedMemoryUsage:r,compressionRatio:i}}cleanOldCache(){const n=Array.from(this.elementCache.entries()).slice(0,Math.floor(this.maxCacheSize*.2));for(const[r]of n)this.elementCache.delete(r)}canMergeCommands(e,n){return e.elementId===n.elementId&&e.type==="update"&&n.type==="update"}mergeCommands(e,n){const r=this.commands.get(e);r&&r.type==="update"&&n.type==="update"&&(r.changes.updated={prevProps:r.changes.updated?.prevProps||{},newProps:n.changes.updated?.newProps||{}},r.timestamp=n.timestamp)}manageCache(){if(this.commands.size>this.maxCommands){const n=Array.from(this.commands.entries()).sort(([,r],[,i])=>r.timestamp-i.timestamp).slice(0,this.commands.size-this.maxCommands);for(const[r]of n)this.commands.delete(r)}}compressProps(e){try{const n=JSON.stringify(e);return btoa(n)}catch{return JSON.stringify(e)}}decompressProps(e){try{const n=atob(e);return JSON.parse(n)}catch{return JSON.parse(e)}}generateCommandId(){return`cmd_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}clear(){this.commands.clear(),this.elementCache.clear()}getCommandsByPage(e){return Array.from(this.commands.values()).filter(n=>n.metadata.pageId===e).sort((n,r)=>r.timestamp-n.timestamp)}optimizeMemory(){const e=Date.now()-864e5;for(const[n,r]of this.commands.entries())r.timestamp<e&&this.commands.delete(n);this.cleanOldCache()}}const mEe=new pEe({maxCommands:100,maxCacheSize:500,compressionEnabled:!0});function gEe(){return{changed:new Map,added:new Map,removed:new Map}}function d2(t,e){if(t===e)return!0;if(t===null||e===null)return t===e;if(typeof t!=typeof e)return!1;if(typeof t=="object"){const n=t,r=e,i=Object.keys(n),a=Object.keys(r);if(i.length!==a.length)return!1;for(const s of i)if(!d2(n[s],r[s]))return!1;return!0}return!1}function vEe(t,e){const n=gEe(),r=t,i=e;for(const a of Object.keys(r)){const s=r[a],o=i[a];a in i?d2(s,o)||n.changed.set(a,{prev:s,next:o}):n.removed.set(a,s)}for(const a of Object.keys(i))a in r||n.added.set(a,i[a]);return n}function H6(t,e){const n={elementId:t.id},r=vEe(t.props,e.props);(r.changed.size>0||r.added.size>0||r.removed.size>0)&&(n.props=r),t.parent_id!==e.parent_id&&(n.parentId={prev:t.parent_id||null,next:e.parent_id||null}),t.order_num!==e.order_num&&(n.orderNum={prev:t.order_num??0,next:e.order_num??0});const i={};return t.customId!==e.customId&&(i.customId={prev:t.customId,next:e.customId}),d2(t.events,e.events)||(i.events={prev:t.events,next:e.events}),d2(t.dataBinding,e.dataBinding)||(i.dataBinding={prev:t.dataBinding,next:e.dataBinding}),Object.keys(i).length>0&&(n.metadata=i),n}function G6(t){return!(t.props&&(t.props.changed.size>0||t.props.added.size>0||t.props.removed.size>0))&&!t.parentId&&!t.orderNum&&!t.metadata}function W6(t){const e={elementId:t.elementId};return t.props&&(e.props={changed:Array.from(t.props.changed.entries()),added:Array.from(t.props.added.entries()),removed:Array.from(t.props.removed.entries())}),t.parentId&&(e.parentId=t.parentId),t.orderNum&&(e.orderNum=t.orderNum),t.metadata&&(e.metadata=t.metadata),e}function q6(t){let e=0;if(e+=t.elementId.length*2,t.props){for(const[n,{prev:r,next:i}]of t.props.changed)e+=n.length*2,e+=$C(r),e+=$C(i);for(const[n,r]of t.props.added)e+=n.length*2,e+=$C(r);for(const[n,r]of t.props.removed)e+=n.length*2,e+=$C(r)}return t.parentId&&(e+=100),t.orderNum&&(e+=50),t.metadata&&(e+=500),e}function $C(t){if(t==null)return 8;if(typeof t=="string")return t.length*2;if(typeof t=="number")return 8;if(typeof t=="boolean")return 4;if(typeof t=="object")try{return JSON.stringify(t).length*2}catch{return 1e3}return 100}class yEe{pageHistories=new Map;currentPageId=null;defaultMaxSize=50;commandDataStore=mEe;indexedDB=$X;isInitialized=!1;initPromise=null;constructor(){this.initPromise=this.initialize()}async initialize(){try{await this.indexedDB.init(),this.isInitialized=!0,console.log(" [History] IndexedDB initialized")}catch(e){console.error(" [History] IndexedDB initialization failed:",e),this.isInitialized=!0}}async ensureInitialized(){this.initPromise&&await this.initPromise}setCurrentPage(e){this.currentPageId=e,this.pageHistories.has(e)||(this.pageHistories.set(e,{entries:[],currentIndex:-1,maxSize:this.defaultMaxSize}),this.restoreFromIndexedDB(e).catch(console.error))}async restoreFromIndexedDB(e){try{await this.ensureInitialized();const n=await this.indexedDB.getPageMeta(e);if(!n||n.totalEntries===0)return!1;const r=await this.indexedDB.getEntriesByPage(e);if(r.length===0)return!1;const i=this.pageHistories.get(e);if(i&&i.entries.length===0){const a=r.slice(-this.defaultMaxSize);return i.entries=a,i.currentIndex=Math.min(n.currentIndex,a.length-1),console.log(` [History] Restored ${a.length} entries for page ${e}`),!0}return!1}catch(n){return console.error(" [History] Failed to restore from IndexedDB:",n),!1}}addEntry(e){if(!this.currentPageId)return;const n=this.pageHistories.get(this.currentPageId);if(!n)return;const r=["batch","group","ungroup"].includes(e.type)?"update":e.type,i=this.commandDataStore.addCommand({type:r,elementId:e.elementId,changes:this.convertToCommandChanges(e),metadata:{pageId:this.currentPageId,sessionId:this.getSessionId()}});e.data.element&&this.commandDataStore.cacheElement(e.data.element),e.data.prevElement&&this.commandDataStore.cacheElement(e.data.prevElement);const a={...e,id:i,timestamp:Date.now()};if(n.entries=n.entries.slice(0,n.currentIndex+1),n.entries.push(a),n.currentIndex=n.entries.length-1,n.entries.length>n.maxSize){const s=n.entries.shift();s&&this.commandDataStore.removeCommand(s.id),n.currentIndex--}this.saveToIndexedDB(this.currentPageId,a,n.currentIndex)}saveToIndexedDB(e,n,r){(async()=>{try{await this.ensureInitialized(),await this.indexedDB.saveEntry(e,n);const i=this.pageHistories.get(e);i&&await this.indexedDB.savePageMeta(e,r,i.entries.length)}catch(i){console.error(" [History] Failed to save to IndexedDB:",i)}})()}addDiffEntry(e,n,r,i){if(!this.currentPageId)return;const a=this.pageHistories.get(this.currentPageId);if(!a)return;const s=H6(n,r);if(e==="update"&&G6(s)){console.log("  ,  ");return}const o=W6(s),c=q6(s),h={id:this.commandDataStore.addCommand({type:e,elementId:n.id,changes:{updated:{prevProps:n.props,newProps:r.props}},metadata:{pageId:this.currentPageId,sessionId:this.getSessionId()}}),type:e,elementId:n.id,data:{diff:o,...e==="add"&&{element:r,childElements:i},...e==="remove"&&{element:n,childElements:i}},timestamp:Date.now(),estimatedSize:c};if(a.entries=a.entries.slice(0,a.currentIndex+1),a.entries.push(h),a.currentIndex=a.entries.length-1,a.entries.length>a.maxSize){const f=a.entries.shift();f&&this.commandDataStore.removeCommand(f.id),a.currentIndex--}this.saveToIndexedDB(this.currentPageId,h,a.currentIndex),console.log(` Diff   : ${e} (${c} bytes)`)}addBatchDiffEntry(e,n){if(!this.currentPageId||e.length!==n.length)return;const r=this.pageHistories.get(this.currentPageId);if(!r)return;const i=[];let a=0;for(let c=0;c<e.length;c++){const u=H6(e[c],n[c]);G6(u)||(i.push(W6(u)),a+=q6(u))}if(i.length===0){console.log(" Batch  ,  ");return}const o={id:this.commandDataStore.addCommand({type:"update",elementId:"batch_diff",changes:{},metadata:{pageId:this.currentPageId,sessionId:this.getSessionId()}}),type:"batch",elementId:"batch_diff",elementIds:e.map(c=>c.id),data:{diffs:i},timestamp:Date.now(),estimatedSize:a};if(r.entries=r.entries.slice(0,r.currentIndex+1),r.entries.push(o),r.currentIndex=r.entries.length-1,r.entries.length>r.maxSize){const c=r.entries.shift();c&&this.commandDataStore.removeCommand(c.id),r.currentIndex--}this.saveToIndexedDB(this.currentPageId,o,r.currentIndex),console.log(` Batch Diff  : ${i.length}  (${a} bytes)`)}undo(){if(!this.currentPageId)return null;const e=this.pageHistories.get(this.currentPageId);if(!e||e.currentIndex<0)return null;const n=e.entries[e.currentIndex];return e.currentIndex--,this.updateIndexedDBMeta(this.currentPageId,e),n}redo(){if(!this.currentPageId)return null;const e=this.pageHistories.get(this.currentPageId);if(!e||e.currentIndex>=e.entries.length-1)return null;e.currentIndex++;const n=e.entries[e.currentIndex];return this.updateIndexedDBMeta(this.currentPageId,e),n}updateIndexedDBMeta(e,n){(async()=>{try{await this.ensureInitialized(),await this.indexedDB.savePageMeta(e,n.currentIndex,n.entries.length)}catch(r){console.error(" [History] Failed to update IndexedDB meta:",r)}})()}canUndo(){if(!this.currentPageId)return!1;const e=this.pageHistories.get(this.currentPageId);return e?e.currentIndex>=0:!1}canRedo(){if(!this.currentPageId)return!1;const e=this.pageHistories.get(this.currentPageId);return e?e.currentIndex<e.entries.length-1:!1}getCurrentPageHistory(){if(!this.currentPageId)return{canUndo:!1,canRedo:!1,totalEntries:0,currentIndex:-1};const e=this.pageHistories.get(this.currentPageId);return e?{canUndo:this.canUndo(),canRedo:this.canRedo(),totalEntries:e.entries.length,currentIndex:e.currentIndex}:{canUndo:!1,canRedo:!1,totalEntries:0,currentIndex:-1}}clearPageHistory(e){this.pageHistories.delete(e),(async()=>{try{await this.ensureInitialized(),await this.indexedDB.clearPageHistory(e)}catch(n){console.error(" [History] Failed to clear IndexedDB page history:",n)}})(),this.currentPageId===e&&this.setCurrentPage(e)}clearAllHistory(){this.pageHistories.clear(),this.commandDataStore.clear(),(async()=>{try{await this.ensureInitialized(),await this.indexedDB.clearAll()}catch(e){console.error(" [History] Failed to clear all IndexedDB history:",e)}})()}convertToCommandChanges(e){switch(e.type){case"add":return{added:e.data.element};case"remove":return{removed:e.data.element};case"update":return{updated:{prevProps:e.data.prevProps||{},newProps:e.data.props||{}}};case"move":return{moved:{prevParentId:e.data.prevParentId||null,newParentId:e.data.parentId||null,prevOrderNum:e.data.prevOrderNum||0,newOrderNum:e.data.orderNum||0}};case"batch":return{batch:{updates:(e.data.batchUpdates||[]).map(n=>({elementId:n.elementId,prevProps:n.prevProps,newProps:n.newProps}))}};case"group":return{group:{groupId:e.data.groupData?.groupId||"",childIds:e.data.groupData?.childIds||[],elements:e.data.elements||[]}};case"ungroup":return{ungroup:{groupId:e.data.groupData?.groupId||"",childIds:e.data.groupData?.childIds||[],prevElements:e.data.prevElements||[]}};default:return{}}}getSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getMemoryStats(){const e=this.pageHistories.size,n=Array.from(this.pageHistories.values()).flatMap(c=>c.entries),r=n.length;let i=0,a=0,s=0;for(const c of n)c.data.diff||c.data.diffs?(i++,s+=c.estimatedSize||0):a++;const o=i>0?Math.round(s/i):0;return{pageCount:e,totalEntries:r,commandStoreStats:this.commandDataStore.getMemoryStats(),diffStats:{diffBasedEntries:i,snapshotBasedEntries:a,totalDiffSize:s,avgDiffSize:o}}}async getIndexedDBStats(){try{return await this.ensureInitialized(),await this.indexedDB.getStats()}catch(e){return console.error(" [History] Failed to get IndexedDB stats:",e),{totalEntries:0,totalPages:0,estimatedSize:0}}}optimizeMemory(){this.commandDataStore.optimizeMemory();const e=Date.now()-10080*60*1e3;for(const[n,r]of this.pageHistories.entries())!r.entries.some(a=>a.timestamp>e)&&r.entries.length===0&&this.pageHistories.delete(n);(async()=>{try{await this.ensureInitialized(),await this.indexedDB.cleanupOldEntries()}catch(n){console.error(" [History] Failed to cleanup IndexedDB:",n)}})()}}const Ni=new yEe;function qa(t,e){const n=t[e];return typeof n=="string"?n:typeof n=="number"||n!=null&&typeof n=="object"&&"toString"in n?String(n):""}function jC(t){return qa(t,"children")||qa(t,"title")||qa(t,"label")}const _y=async(t,e,n)=>{const r=t.filter(a=>a.page_id===e).reduce((a,s)=>{const o=s.parent_id||"root";return a[o]||(a[o]=[]),a[o].push(s),a},{}),i=[];if(Object.entries(r).forEach(([a,s])=>{let o;const c=t.find(E=>E.id===(a==="root"?null:a)),u=c?.tag,h=u==="Tabs",f=u==="ListBox",m=u==="GridList",g=u==="Menu",v=u==="ComboBox",x=u==="Select",_=u==="Tree",w=u==="ToggleButtonGroup",S=u==="TableHeader";if((h||f||m||g||v||x||_||w||S)&&console.log("    :",{parentKey:a,parentElement:c?{id:c.id,tag:c.tag}:null,parentTag:u,childrenCount:s.length,childTags:s.map(E=>E.tag)}),h){const E=s.filter(P=>P.tag==="Tab").sort((P,R)=>{const D=(P.order_num||0)-(R.order_num||0);if(D===0){const k=qa(P.props,"title"),L=qa(R.props,"title");return k.localeCompare(L)}return D}),A=s.filter(P=>P.tag==="Panel").sort((P,R)=>{const D=(P.order_num||0)-(R.order_num||0);if(D===0){const k=qa(P.props,"title"),L=qa(R.props,"title");return k.localeCompare(L)}return D});o=[];const N=new Set;E.forEach(P=>{o.push(P);const R=qa(P.props,"tabId");if(R){const D=A.find(k=>qa(k.props,"tabId")===R&&!N.has(k.id));D&&(o.push(D),N.add(D.id))}}),A.forEach(P=>{N.has(P.id)||o.push(P)}),console.log(` Tabs   : ${E.length} Tab, ${A.length} Panel`),console.log(" Tab  :"),E.forEach((P,R)=>{const D=qa(P.props,"title"),k=qa(P.props,"tabId");console.log(`  ${R+1}. ${D} (order: ${P.order_num}, tabId: ${k.slice(0,8)}...)`)}),console.log("   :"),o.forEach((P,R)=>{const D=qa(P.props,"title");console.log(`  ${R+1}. ${P.tag}: ${D} (new order: ${R+1})`)})}else S?(console.log(` ${u}  ColumnGroup : ${s.length} `),o=s.sort((E,A)=>{const N=(E.order_num||0)-(A.order_num||0);if(N===0){const P=qa(E.props,"label"),R=qa(A.props,"label"),D=P.localeCompare(R);return D===0?E.id.localeCompare(A.id):D}return N}),console.log(` ${u}  ColumnGroup :`),o.forEach((E,A)=>{const N=qa(E.props,"label")||"Untitled",P=qa(E.props,"span")||"1";console.log(`  ${A+1}. ColumnGroup: ${N} (span: ${P}, order: ${E.order_num}  ${A+1})`)})):f||m||g||v||x||_||w?(console.log(` ${u}   : ${s.length} `),o=s.sort((E,A)=>{const N=(E.order_num||0)-(A.order_num||0);if(N===0){const P=jC(E.props),R=jC(A.props),D=P.localeCompare(R);return D===0?E.id.localeCompare(A.id):D}return N}),console.log(` ${u}  :`),o.forEach((E,A)=>{const N=jC(E.props)||"Untitled";console.log(`  ${A+1}. ${E.tag}: ${N} (order: ${E.order_num}  ${A+1})`)})):o=s.sort((E,A)=>{const N=(E.order_num||0)-(A.order_num||0);return N===0?E.id.localeCompare(A.id):N});o.forEach((E,A)=>{const N=A;E.order_num!==N&&(i.push({id:E.id,order_num:N}),n(E.id,N))})}),i.length>0)try{const a=i.map(c=>zr.from("elements").update({order_num:c.order_num}).eq("id",c.id)),o=(await Promise.all(a)).filter(c=>c.error);if(o.length>0)console.error("order_num  :",o.map(c=>c.error));else{console.log(` order_num  : ${i.length} `);const c=t.filter(u=>u.page_id===e&&(u.tag==="Tab"||u.tag==="Panel"||u.tag==="ListBoxItem"||u.tag==="GridListItem"||u.tag==="MenuItem"||u.tag==="ComboBoxItem"||u.tag==="SelectItem"||u.tag==="TreeItem"||u.tag==="ToggleButton"));c.length>0&&(console.log("     :"),c.sort((u,h)=>(u.order_num||0)-(h.order_num||0)).forEach(u=>{const h=jC(u.props)||"Untitled",f=u.tag==="Tab"||u.tag==="Panel"?`, tabId: ${qa(u.props,"tabId")}`:"";console.log(`  ${u.tag}: ${h} (order: ${u.order_num}${f})`)}))}}catch(a){console.error("order_num   :",a)}},xs=(t,e)=>{for(const n of t)if(n.id===e)return n;return null},ug=(t,e)=>t.get(e)||null,Ic=(t,e)=>({...t.props,...e,tag:t.tag}),qd=t=>{try{return typeof structuredClone<"u"?{id:t.id,custom_id:t.customId,tag:t.tag,props:structuredClone(t.props||{}),parent_id:t.parent_id,page_id:t.page_id,layout_id:t.layout_id,order_num:t.order_num,data_binding:t.dataBinding}:{id:t.id,custom_id:t.customId,tag:t.tag,props:JSON.parse(JSON.stringify(t.props||{})),parent_id:t.parent_id,page_id:t.page_id,layout_id:t.layout_id,order_num:t.order_num,data_binding:t.dataBinding}}catch(e){return console.error("Element sanitization error:",e),{id:t.id||"",custom_id:t.customId,tag:t.tag||"",props:{},parent_id:t.parent_id,page_id:t.page_id||"",layout_id:t.layout_id||null,order_num:t.order_num||0,data_binding:t.dataBinding}}},bEe=(t,e)=>async()=>{try{console.log(" Undo  ");const n=e(),{currentPageId:r}=n;if(console.log(" currentPageId:",r),!r){console.log(" currentPageId , return");return}t({historyOperationInProgress:!0}),console.log(" Undo ");const i=Ni.undo();if(!i){console.log(" Undo :   "),t({historyOperationInProgress:!1});return}console.log(" Undo  :",{type:i.type,elementId:i.elementId,hasData:!!i.data,dataKeys:i.data?Object.keys(i.data):[]});let a=[];const s=[];let o=null,c=null;try{switch(i.type){case"add":{a=[i.elementId],i.data.childElements&&i.data.childElements.length>0&&a.push(...i.data.childElements.map(f=>f.id));break}case"update":{if(console.log(" Update   :",{hasPrevProps:!!i.data.prevProps,hasPrevElement:!!i.data.prevElement,prevProps:i.data.prevProps,prevElement:i.data.prevElement}),i.data.prevProps)try{o=JSON.parse(JSON.stringify(i.data.prevProps)),console.log(" prevProps  :",o)}catch(f){console.warn(" prevProps proxy ,  :",f),o=i.data.prevProps}if(i.data.prevElement)try{c=JSON.parse(JSON.stringify(i.data.prevElement)),console.log(" prevElement  :",c)}catch(f){console.warn(" prevElement proxy ,  :",f),c=i.data.prevElement}break}case"remove":{if(i.data.element)try{s.push(JSON.parse(JSON.stringify(i.data.element)))}catch(f){console.warn(" element proxy ,  :",f),s.push(i.data.element)}if(i.data.childElements&&i.data.childElements.length>0)try{s.push(...i.data.childElements.map(f=>JSON.parse(JSON.stringify(f)))),console.log(` Undo:   ${i.data.childElements.length} `,{parent:i.data.element?.tag,children:i.data.childElements.map(f=>({id:f.id,tag:f.tag}))})}catch(f){console.warn(" childElements proxy ,  :",f),s.push(...i.data.childElements),console.log(` Undo:   ${i.data.childElements.length}  ()`,{parent:i.data.element?.tag,children:i.data.childElements.map(m=>({id:m.id,tag:m.tag}))})}break}case"batch":{console.log(" Undo: Batch update  ");break}case"group":{console.log(" Undo: Group   "),a=[i.elementId];break}case"ungroup":{if(console.log(" Undo: Ungroup  "),i.data.element)try{s.push(JSON.parse(JSON.stringify(i.data.element)))}catch(f){console.warn(" element proxy ,  :",f),s.push(i.data.element)}break}}console.log("    , try  ")}catch(f){console.error("     :",f),console.error("  :",{message:f instanceof Error?f.message:String(f),stack:f instanceof Error?f.stack:void 0,entryType:i.type,elementId:i.elementId}),t({historyOperationInProgress:!1});return}if(console.log(" produce   , entry.type:",i.type),t(Br(f=>{switch(console.log(" Undo Produce  , entry.type:",i.type),i.type){case"add":{f.elements=f.elements.filter(m=>!a.includes(m.id)),a.includes(f.selectedElementId||"")&&(f.selectedElementId=null,f.selectedElementProps={});break}case"update":{console.log(" Update  :",{elementId:i.elementId,hasPrevProps:!!o,hasPrevElement:!!c});const m=xs(f.elements,i.elementId);m&&o?(console.log(" Undo: Props ",{elementId:i.elementId,elementTag:m.tag,currentProps:{...m.props},restoringTo:o}),m.props=o,f.selectedElementId===i.elementId&&(console.log(" Undo:   props "),f.selectedElementProps=Ic(m,o))):m&&c?(console.log(" Undo:   ",{elementId:i.elementId,prevElement:c}),Object.assign(m,c)):console.warn(" Undo :       ",{elementId:i.elementId,elementFound:!!m,prevPropsFound:!!o,prevElementFound:!!c});break}case"remove":{console.log(" Undo:   :",{restoringCount:s.length}),s.forEach((m,g)=>{console.log(`   ${g+1}:`,{id:m.id,tag:m.tag,tabId:m.props.tabId,title:m.props.title,order_num:m.order_num})}),f.elements.push(...s);break}case"batch":{i.data.batchUpdates&&(console.log(" Undo: Batch update  :",{updateCount:i.data.batchUpdates.length}),i.data.batchUpdates.forEach(m=>{const g=xs(f.elements,m.elementId);g&&(console.log("   props:",{elementId:m.elementId,tag:g.tag}),g.props=m.prevProps,f.selectedElementId===m.elementId&&(f.selectedElementProps=Ic(g,m.prevProps)))}));break}case"group":{console.log(" Undo: Group   "),f.elements=f.elements.filter(m=>!a.includes(m.id)),i.data.elements&&i.data.elements.forEach(m=>{const g=xs(f.elements,m.id);g&&(console.log("    parent :",{childId:g.id,newParentId:m.parent_id}),g.parent_id=m.parent_id,g.order_num=m.order_num)}),a.includes(f.selectedElementId||"")&&(f.selectedElementId=null,f.selectedElementProps={});break}case"ungroup":{console.log(" Undo: Ungroup  "),f.elements.push(...s),console.log("   :",{groupId:s[0]?.id,tag:s[0]?.tag}),i.data.elements&&i.data.elements.forEach(m=>{const g=xs(f.elements,m.id);g&&(console.log("     :",{childId:g.id,groupId:i.elementId}),g.parent_id=i.elementId,g.order_num=m.order_num)});break}}})),typeof window<"u"&&window.parent)try{const f=e().elements;window.parent.postMessage({type:"ELEMENTS_UPDATED",payload:{elements:f.map(qd)}},"*")}catch(f){console.warn("postMessage  :",f)}try{switch(i.type){case"add":{const f=[i.elementId];i.data.childElements&&i.data.childElements.length>0&&f.push(...i.data.childElements.map(m=>m.id)),await zr.from("elements").delete().in("id",f),console.log(` Undo:     ( 1 +  ${i.data.childElements?.length||0})`);break}case"update":{if(i.elementId==="bulk_update"){console.log(" bulk_update  ID   ");break}i.data.prevElement&&(await zr.from("elements").update({props:i.data.prevProps||i.data.prevElement.props,parent_id:i.data.prevElement.parent_id,order_num:i.data.prevElement.order_num}).eq("id",i.elementId),console.log(" Undo:    "));break}case"remove":{if(i.data.element){const f=[i.data.element];i.data.childElements&&i.data.childElements.length>0&&f.push(...i.data.childElements),await zr.from("elements").insert(f.map(m=>qd(m))),console.log(` Undo:     ( 1 +  ${i.data.childElements?.length||0})`)}break}case"batch":{if(i.data.batchUpdates){console.log(` Undo: Batch update DB   (${i.data.batchUpdates.length})`);for(const f of i.data.batchUpdates)await zr.from("elements").update({props:f.prevProps}).eq("id",f.elementId);console.log(` Undo: Batch update DB   (${i.data.batchUpdates.length})`)}break}case"group":{if(console.log(" Undo: Group   DB "),await zr.from("elements").delete().eq("id",i.elementId),i.data.elements){for(const f of i.data.elements)await zr.from("elements").update({parent_id:f.parent_id,order_num:f.order_num}).eq("id",f.id);console.log(` Undo: Group   DB   ( ${i.data.elements.length})`)}break}case"ungroup":{if(console.log(" Undo: Ungroup  DB "),i.data.element&&await zr.from("elements").insert(qd(i.data.element)),i.data.elements){for(const f of i.data.elements)await zr.from("elements").update({parent_id:i.elementId,order_num:f.order_num}).eq("id",f.id);console.log(` Undo: Ungroup  DB   ( ${i.data.elements.length})`)}break}}}catch(f){console.warn("    ( ):",f)}console.log(" Undo ");const{elements:u,updateElementOrder:h}=e();r&&setTimeout(()=>{_y(u,r,h),console.log(" Undo  order_num  ")},100)}catch(n){console.error("Undo  :",n)}finally{t({historyOperationInProgress:!1})}},xEe=(t,e)=>async()=>{try{const n=e();if(!n.currentPageId)return;t({historyOperationInProgress:!0}),console.log(" Redo ");const r=Ni.redo();if(!r){console.log(" Redo :   "),t({historyOperationInProgress:!1});return}const i=[];let a=[],s=null;try{switch(r.type){case"add":{r.data.element&&i.push(JSON.parse(JSON.stringify(r.data.element))),r.data.childElements&&r.data.childElements.length>0&&(i.push(...r.data.childElements.map(h=>JSON.parse(JSON.stringify(h)))),console.log(` Redo:   ${r.data.childElements.length} `,{parent:r.data.element?.tag,children:r.data.childElements.map(h=>({id:h.id,tag:h.tag}))}));break}case"update":{r.data.props&&(s=JSON.parse(JSON.stringify(r.data.props)));break}case"remove":{a=[r.elementId],r.data.childElements&&r.data.childElements.length>0&&a.push(...r.data.childElements.map(h=>h.id));break}case"batch":{console.log(" Redo: Batch update  ");break}case"group":{console.log(" Redo: Group   "),r.data.element&&i.push(JSON.parse(JSON.stringify(r.data.element)));break}case"ungroup":{console.log(" Redo: Ungroup  "),a=[r.elementId];break}}}catch(h){console.warn("     :",h),t({historyOperationInProgress:!1});return}if(t(Br(h=>{switch(r.type){case"add":{h.elements.push(...i);break}case"update":{const f=xs(h.elements,r.elementId);f&&s&&(f.props={...f.props,...s});break}case"remove":{h.elements=h.elements.filter(f=>!a.includes(f.id)),a.includes(h.selectedElementId||"")&&(h.selectedElementId=null,h.selectedElementProps={});break}case"batch":{r.data.batchUpdates&&(console.log(" Redo: Batch update  :",{updateCount:r.data.batchUpdates.length}),r.data.batchUpdates.forEach(f=>{const m=xs(h.elements,f.elementId);m&&(console.log("   props:",{elementId:f.elementId,tag:m.tag}),m.props={...m.props,...f.newProps},h.selectedElementId===f.elementId&&(h.selectedElementProps=Ic(m,{...m.props,...f.newProps})))}));break}case"group":{console.log(" Redo: Group  "),h.elements.push(...i),console.log("   :",{groupId:i[0]?.id,tag:i[0]?.tag}),r.data.elements&&r.data.elements.forEach(f=>{const m=xs(h.elements,f.id);m&&(console.log("     :",{childId:m.id,groupId:r.elementId}),m.parent_id=r.elementId,m.order_num=f.order_num)});break}case"ungroup":{console.log(" Redo: Ungroup  "),h.elements=h.elements.filter(f=>!a.includes(f.id)),r.data.elements&&r.data.elements.forEach(f=>{const m=xs(h.elements,f.id);m&&(console.log("    parent :",{childId:m.id,newParentId:f.parent_id}),m.parent_id=f.parent_id,m.order_num=f.order_num)}),a.includes(h.selectedElementId||"")&&(h.selectedElementId=null,h.selectedElementProps={});break}}})),typeof window<"u"&&window.parent)try{const h=e().elements;window.parent.postMessage({type:"ELEMENTS_UPDATED",payload:{elements:h.map(qd)}},"*")}catch(h){console.warn("postMessage  :",h)}try{switch(r.type){case"add":{if(r.data.element){const h=[r.data.element];r.data.childElements&&r.data.childElements.length>0&&h.push(...r.data.childElements),await zr.from("elements").insert(h.map(f=>qd(f))),console.log(` Redo:     ( 1 +  ${r.data.childElements?.length||0})`)}break}case"update":{if(r.elementId==="bulk_update"){console.log(" bulk_update  ID   ");break}if(r.data.props){const h=ug(e().elementsMap,r.elementId);h&&(await zr.from("elements").update({props:{...h.props,...r.data.props}}).eq("id",r.elementId),console.log(" Redo:    "))}break}case"remove":{const h=[r.elementId];r.data.childElements&&r.data.childElements.length>0&&h.push(...r.data.childElements.map(f=>f.id)),await zr.from("elements").delete().in("id",h),console.log(` Redo:     ( 1 +  ${r.data.childElements?.length||0})`);break}case"batch":{if(r.data.batchUpdates){console.log(` Redo: Batch update DB   (${r.data.batchUpdates.length})`);for(const h of r.data.batchUpdates){const f=ug(e().elementsMap,h.elementId);f&&await zr.from("elements").update({props:{...f.props,...h.newProps}}).eq("id",h.elementId)}console.log(` Redo: Batch update DB   (${r.data.batchUpdates.length})`)}break}case"group":{if(console.log(" Redo: Group  DB "),r.data.element&&await zr.from("elements").insert(qd(r.data.element)),r.data.elements){for(const h of r.data.elements)await zr.from("elements").update({parent_id:r.elementId,order_num:h.order_num}).eq("id",h.id);console.log(` Redo: Group  DB   ( ${r.data.elements.length})`)}break}case"ungroup":{if(console.log(" Redo: Ungroup DB "),await zr.from("elements").delete().eq("id",r.elementId),r.data.elements){for(const h of r.data.elements)await zr.from("elements").update({parent_id:h.parent_id,order_num:h.order_num}).eq("id",h.id);console.log(` Redo: Ungroup DB   ( ${r.data.elements.length})`)}break}}}catch(h){console.warn("    ( ):",h)}console.log(" Redo ");const{elements:o,updateElementOrder:c}=e(),u=n.currentPageId;u&&setTimeout(()=>{_y(o,u,c),console.log(" Redo  order_num  ")},100)}catch(n){console.error("Redo  :",n)}finally{t({historyOperationInProgress:!1})}},_Ee=(t,e)=>async n=>{console.log(" removeElement :",{elementId:n});const r=e(),i=ug(r.elementsMap,n);if(!i){console.log(" removeElement:    ",{elementId:n});return}console.log("  :",{id:i.id,tag:i.tag,props:i.props});const a=f=>{const m=r.elements.filter(v=>v.parent_id===f),g=[...m];return m.forEach(v=>{g.push(...a(v.id))}),g};let s=a(n);if(i.tag==="Column"){const f=r.elements.find(m=>{const g=r.elements.find(v=>v.id===i.parent_id);return g&&m.id===g.parent_id&&m.tag==="Table"});if(f){const m=r.elements.find(g=>g.parent_id===f.id&&g.tag==="TableBody");if(m){const v=r.elements.filter(x=>x.parent_id===m.id&&x.tag==="Row").flatMap(x=>r.elements.filter(_=>_.parent_id===x.id&&_.tag==="Cell"&&_.order_num===i.order_num));s=[...s,...v],console.log(` Column    Cell : ${v.length}`,{columnOrder:i.order_num,cellIds:v.map(x=>x.id)})}}}if(i.tag==="Cell"){const f=r.elements.find(m=>m.id===i.parent_id);if(f&&f.tag==="Row"){const m=r.elements.find(g=>g.id===f.parent_id);if(m&&m.tag==="TableBody"){const g=r.elements.find(v=>v.id===m.parent_id&&v.tag==="Table");if(g){const v=r.elements.find(x=>x.parent_id===g.id&&x.tag==="TableHeader");if(v){const x=r.elements.find(_=>_.parent_id===v.id&&_.tag==="Column"&&_.order_num===i.order_num);if(x){const w=r.elements.filter(S=>S.parent_id===m.id&&S.tag==="Row").flatMap(S=>r.elements.filter(E=>E.parent_id===S.id&&E.tag==="Cell"&&E.order_num===i.order_num&&E.id!==i.id));s=[...s,x,...w],console.log(` Cell    Column   Cell : Column 1, Cell ${w.length}`,{cellOrder:i.order_num,columnId:x.id,otherCellIds:w.map(S=>S.id)})}}}}}}if(i.tag==="Tab"||i.tag==="Panel"){const f=i.props.tabId;if(console.log(` ${i.tag}   - tabId:`,f,"element.props:",i.props),f){const m=r.elements.find(g=>g.id===i.parent_id);if(console.log("  :",m?.tag,m?.id),m&&m.tag==="Tabs"){const g=r.elements.filter(x=>x.parent_id===m.id);console.log("  :",g.map(x=>({id:x.id,tag:x.tag,tabId:x.props.tabId})));const v=r.elements.find(x=>x.parent_id===m.id&&x.tag!==i.tag&&x.props.tabId===f);if(console.log("    :",v?{id:v.id,tag:v.tag,tabId:v.props.tabId}:"null"),v)s=[...s,v],console.log(` ${i.tag}    ${v.tag} :`,{tabId:f,deletedElementId:i.id,relatedElementId:v.id});else{console.log(" tabId      . order_num  fallback ");const x=r.elements.find(_=>_.parent_id===m.id&&_.tag!==i.tag&&Math.abs((_.order_num||0)-(i.order_num||0))===1);x&&(s=[...s,x],console.log(` ${i.tag}    ${x.tag}  (order_num ):`,{deletedElementOrder:i.order_num,relatedElementOrder:x.order_num,deletedElementId:i.id,relatedElementId:x.id}))}}}else{console.log(` ${i.tag} tabId . order_num     `);const m=r.elements.find(g=>g.id===i.parent_id);if(m&&m.tag==="Tabs"){const g=r.elements.find(v=>v.parent_id===m.id&&v.tag!==i.tag&&Math.abs((v.order_num||0)-(i.order_num||0))===1);g&&(s=[...s,g],console.log(` ${i.tag}    ${g.tag}  (order_num , tabId ):`,{deletedElementOrder:i.order_num,relatedElementOrder:g.order_num,deletedElementId:i.id,relatedElementId:g.id}))}}}const c=[i,...s].filter((f,m,g)=>g.findIndex(v=>v.id===f.id)===m),u=c.map(f=>f.id);console.log(`  : ${n}   ${c.length-1}`,{parent:i.tag,relatedElements:c.slice(1).map(f=>({id:f.id,tag:f.tag}))});try{await(await Yt()).elements.deleteMany(u),console.log(" [IndexedDB]   :",u)}catch(f){console.error(" [IndexedDB]    :",f)}t(Br(f=>{f.currentPageId&&Ni.addEntry({type:"remove",elementId:n,data:{element:{...i},childElements:c.slice(1).map(v=>({...v}))}});const m=f.elements.length;console.log("    :",m),console.log("   ID:",u),u.forEach(v=>{const x=f.elements.find(_=>_.id===v);x&&(x.tag==="Tab"||x.tag==="Panel")&&console.log(`  ${x.tag}:`,{id:x.id,tag:x.tag,tabId:x.props.tabId,title:x.props.title,order_num:x.order_num})}),f.elements=f.elements.filter(v=>!u.includes(v.id));const g=f.elements.length;console.log("    :",g,"( :",m-g,")"),u.includes(f.selectedElementId||"")&&(f.selectedElementId=null,f.selectedElementProps={}),typeof window<"u"&&window.parent&&window.parent.postMessage({type:"ELEMENT_REMOVED",payload:{elementId:u}},"*")})),e()._rebuildIndexes();const h=e().currentPageId;h&&(i.tag==="Tab"||i.tag==="Panel"||i.tag==="ListBoxItem"||i.tag==="GridListItem"||i.tag==="MenuItem"||i.tag==="ComboBoxItem"||i.tag==="SelectItem"||i.tag==="TreeItem"||i.tag==="ToggleButton"?console.log(` ${i.tag}  - Undo   `):setTimeout(()=>{const{elements:m,updateElementOrder:g}=e();_y(m,h,g)},100))},wEe=(t,e)=>async n=>{t(Br(i=>{(i.currentPageId||n.layout_id)&&Ni.addEntry({type:"add",elementId:n.id,data:{element:{...n}}}),i.elements=[...i.elements,n]})),e()._rebuildIndexes();try{const i=await Yt(),a=qd(n);console.log(` [IndexedDB]  : ${n.tag} layout_id=${n.layout_id} page_id=${n.page_id}`),console.log(` [IndexedDB] sanitized: layout_id=${a.layout_id} page_id=${a.page_id}`),await i.elements.insert(a),console.log(" [IndexedDB]   :",n.id)}catch(i){console.warn(" [IndexedDB]    ( ):",i)}const r=e().currentPageId;r&&n.page_id===r?setTimeout(()=>{const{elements:i,updateElementOrder:a}=e();_y(i,r,a)},100):n.layout_id&&setTimeout(()=>{const{elements:i,updateElementOrder:a}=e();i.filter(o=>o.layout_id===n.layout_id).length>0&&_y(i,n.layout_id,a)},100)},SEe=(t,e)=>async(n,r)=>{const i=[n,...r];t(Br(a=>{(a.currentPageId||n.layout_id)&&Ni.addEntry({type:"add",elementId:n.id,data:{element:{...n},childElements:r.map(s=>({...s}))}}),a.elements=[...a.elements,...i]})),e()._rebuildIndexes();try{await(await Yt()).elements.insertMany(i.map(s=>qd(s))),console.log(` [IndexedDB]    : ${n.tag} +  ${r.length}`)}catch(a){console.warn(" [IndexedDB]    ( ):",a)}},EEe=(t,e)=>async(n,r)=>{const i=e();if(ug(i.elementsMap,n)){t(Br(s=>{const o=xs(s.elements,n);if(o){if(s.currentPageId){const c=JSON.parse(JSON.stringify(o.props)),u=JSON.parse(JSON.stringify(r)),h=JSON.parse(JSON.stringify(o));Ni.addEntry({type:"update",elementId:n,data:{props:u,prevProps:c,prevElement:h}})}o.props={...o.props,...r},s.selectedElementId===n&&(s.selectedElementProps=Ic(o,r))}})),e()._rebuildIndexes();try{await(await Yt()).elements.update(n,{props:r})}catch(s){console.warn(" [IndexedDB]     ( ):",s)}}},CEe=(t,e)=>async(n,r)=>{const i=e();if(ug(i.elementsMap,n)){t(Br(s=>{const o=xs(s.elements,n);if(o){if(s.currentPageId&&r.props){const c=JSON.parse(JSON.stringify(o.props)),u=JSON.parse(JSON.stringify(r.props)),h=JSON.parse(JSON.stringify(o));Ni.addEntry({type:"update",elementId:n,data:{props:u,prevProps:c,prevElement:h}})}Object.assign(o,r),s.selectedElementId===n&&r.props&&(s.selectedElementProps=Ic(o,r.props))}})),e()._rebuildIndexes();try{await(await Yt()).elements.update(n,r)}catch(s){console.warn(" [IndexedDB]     ( ):",s)}}},TEe=(t,e)=>async n=>{if(n.length===0)return;const r=e(),i=n.filter(o=>ug(r.elementsMap,o.elementId)!==void 0);if(i.length===0)return;const a=[];t(Br(o=>{for(const{elementId:c,props:u}of i){const h=xs(o.elements,c);h&&(a.push({elementId:c,prevProps:JSON.parse(JSON.stringify(h.props)),prevElement:JSON.parse(JSON.stringify(h))}),h.props={...h.props,...u},o.selectedElementId===c&&(o.selectedElementProps=Ic(h,u)))}})),e().currentPageId&&a.length>0&&Ni.addEntry({type:"batch",elementId:a[0].elementId,data:{batchUpdates:i.map((o,c)=>({elementId:o.elementId,props:JSON.parse(JSON.stringify(o.props)),prevProps:a[c]?.prevProps,prevElement:a[c]?.prevElement}))}}),e()._rebuildIndexes();try{const o=await Yt();await Promise.all(i.map(({elementId:c,props:u})=>o.elements.update(c,{props:u})))}catch(o){console.warn(" [IndexedDB]     ( ):",o)}},MEe=(t,e)=>async n=>{if(n.length===0)return;const r=e(),i=n.filter(o=>ug(r.elementsMap,o.elementId)!==void 0);if(i.length===0)return;const a=[];t(Br(o=>{for(const{elementId:c,updates:u}of i){const h=xs(o.elements,c);h&&(u.props&&a.push({elementId:c,prevProps:JSON.parse(JSON.stringify(h.props)),prevElement:JSON.parse(JSON.stringify(h))}),Object.assign(h,u),o.selectedElementId===c&&u.props&&(o.selectedElementProps=Ic(h,u.props)))}})),e().currentPageId&&a.length>0&&Ni.addEntry({type:"batch",elementId:a[0].elementId,data:{batchUpdates:a.map((o,c)=>({elementId:o.elementId,props:i[c]?.updates.props?JSON.parse(JSON.stringify(i[c].updates.props)):void 0,prevProps:o.prevProps,prevElement:o.prevElement}))}}),e()._rebuildIndexes();try{const o=await Yt();await Promise.all(i.map(({elementId:c,updates:u})=>o.elements.update(c,u)))}catch(o){console.warn(" [IndexedDB]     ( ):",o)}};function WX(){return{elementsByPage:new Map,rootsByPage:new Map}}function AEe(t,e){const n=WX();for(const r of t)PEe(n,r,e);return n}function PEe(t,e,n){const{page_id:r,id:i,parent_id:a}=e;if(t.elementsByPage.has(r)||t.elementsByPage.set(r,new Set),t.elementsByPage.get(r).add(i),!a||NEe(a,n)){t.rootsByPage.has(r)||t.rootsByPage.set(r,[]);const o=t.rootsByPage.get(r);o.includes(i)||o.push(i)}}function qX(t,e,n){const r=t.elementsByPage.get(e);if(!r||r.size===0)return[];const i=[];for(const a of r){const s=n.get(a);s&&i.push(s)}return i.sort((a,s)=>(a.order_num??0)-(s.order_num??0)),i}function NEe(t,e){return e.get(t)?.tag==="Body"}const KX=(t,e)=>{const n=bEe(t,e),r=xEe(t,e),i=_Ee(t,e),a=wEe(t,e),s=SEe(t,e),o=EEe(t,e),c=CEe(t,e),u=TEe(t,e),h=MEe(t,e),f=()=>{const{elements:g}=e(),v=new Map,x=new Map;g.forEach(w=>{v.set(w.id,w);const S=w.parent_id||"root";x.has(S)||x.set(S,[]),x.get(S).push(w)});const _=AEe(g,v);t({elementsMap:v,childrenMap:x,pageIndex:_})},m=g=>{const{pageIndex:v,elementsMap:x}=e();return qX(v,g,x)};return{elements:[],elementsMap:new Map,childrenMap:new Map,pageIndex:WX(),selectedElementId:null,selectedElementProps:{},selectedTab:null,pages:[],currentPageId:null,historyOperationInProgress:!1,selectedElementIds:[],multiSelectMode:!1,_rebuildIndexes:f,getPageElements:m,setElements:g=>{t(Br(v=>{v.elements=g})),e()._rebuildIndexes()},loadPageElements:(g,v)=>{const{elements:x,updatedElements:_}=ri.migrateOrphanElementsToBody(g,v);t(Br(w=>{w.elements=x,w.currentPageId=v,Ni.setCurrentPage(v)})),e()._rebuildIndexes(),_.length>0&&Promise.all(_.map(w=>Po.updateElement(w.id,w))).then(()=>{console.log(` ${_.length} orphan  DB  `)}).catch(w=>{console.warn(" Orphan  DB  :",w)}),setTimeout(()=>{const{updateElementOrder:w}=e();_y(x,v,w)},50)},addElement:a,updateElementProps:o,updateElement:c,setSelectedElement:(g,v,x,_)=>t(Br(w=>{if(w.selectedElementId=g,g&&v)w.selectedElementProps={...v,...x?{style:x}:{},..._?{computedStyle:_}:{}};else if(g){const S=xs(w.elements,g);S&&(w.selectedElementProps={...Ic(S),...x?{style:x}:{},..._?{computedStyle:_}:{}})}else w.selectedElementProps={};g?(w.selectedElementIds=[g],w.multiSelectMode=!1):(w.selectedElementIds=[],w.multiSelectMode=!1)})),selectTabElement:(g,v,x)=>t(Br(_=>{_.selectedElementId=g,_.selectedElementProps=v,_.selectedTab={parentId:g,tabIndex:x}})),setPages:g=>t(Br(v=>{v.pages=g})),setCurrentPageId:g=>t(Br(v=>{v.currentPageId=g,Ni.setCurrentPage(g)})),undo:n,redo:r,removeElement:i,removeTabPair:g=>t(Br(v=>{v.elements=v.elements.filter(x=>x.parent_id!==g&&x.id!==g),v.selectedElementId===g&&(v.selectedElementId=null,v.selectedElementProps={})})),addComplexElement:s,updateElementOrder:(g,v)=>t(Br(x=>{const _=x.elements.find(w=>w.id===g);_&&(_.order_num=v)})),toggleElementInSelection:g=>t(Br(v=>{if(v.selectedElementIds.includes(g))if(v.selectedElementIds=v.selectedElementIds.filter(_=>_!==g),v.selectedElementIds.length===0)v.multiSelectMode=!1,v.selectedElementId=null,v.selectedElementProps={};else{v.selectedElementId=v.selectedElementIds[0];const _=xs(v.elements,v.selectedElementIds[0]);_&&(v.selectedElementProps=Ic(_))}else if(v.selectedElementIds.push(g),v.multiSelectMode=!0,v.selectedElementIds.length===1){v.selectedElementId=g;const _=xs(v.elements,g);_&&(v.selectedElementProps=Ic(_))}})),setSelectedElements:g=>t(Br(v=>{if(v.selectedElementIds=g,v.multiSelectMode=g.length>1,g.length>0){v.selectedElementId=g[0];const x=xs(v.elements,g[0]);x&&(v.selectedElementProps=Ic(x))}else v.selectedElementId=null,v.selectedElementProps={}})),batchUpdateElementProps:u,batchUpdateElements:h}},h2=Ks(KX),DEe=(t,e)=>({isRealtimeMode:!0,pendingChanges:new Map,setRealtimeMode:n=>{t({isRealtimeMode:n})},addPendingChange:(n,r)=>{const i=e().pendingChanges,a=new Map(i),s=a.get(n)||{};a.set(n,{...s,...r}),t({pendingChanges:a})},clearPendingChanges:()=>{t({pendingChanges:new Map})},getPendingChanges:()=>e().pendingChanges}),kEe=(t,e)=>({viewMode:"canvas",showOverlay:!0,showGrid:!1,snapToGrid:!1,gridSize:8,showElementBorders:!1,showElementLabels:!1,overlayOpacity:100,themeMode:"auto",uiScale:100,historyInfo:{canUndo:!1,canRedo:!1,totalEntries:0,currentIndex:-1},setShowOverlay:n=>{t({showOverlay:n})},setShowGrid:n=>{t({showGrid:n})},setSnapToGrid:n=>{t({snapToGrid:n})},setGridSize:n=>{t({gridSize:n})},setShowElementBorders:n=>{t({showElementBorders:n})},setShowElementLabels:n=>{t({showElementLabels:n})},setOverlayOpacity:n=>{t({overlayOpacity:n})},setThemeMode:n=>{t({themeMode:n})},setUiScale:n=>{t({uiScale:n})},setHistoryInfo:n=>{t({historyInfo:n})},setViewMode:n=>{t({viewMode:n})},toggleViewMode:()=>{const n=e().viewMode;t({viewMode:n==="canvas"?"workflow":"canvas"})}}),kl={leftPanels:["nodes","components","datatable","datatableEditor","theme","ai","settings"],rightPanels:["properties","styles","events"],activeLeftPanels:["nodes"],activeRightPanels:["properties"],showLeft:!0,showRight:!0,bottomPanels:["monitor"],activeBottomPanels:[],showBottom:!1,bottomHeight:200},XX="xstudio-panel-layout";function K6(){try{const t=localStorage.getItem(XX);if(t){const e=JSON.parse(t),n={...e};"activeLeftPanel"in e&&!Array.isArray(e.activeLeftPanels)&&(n.activeLeftPanels=e.activeLeftPanel?[e.activeLeftPanel]:[],delete n.activeLeftPanel),"activeRightPanel"in e&&!Array.isArray(e.activeRightPanels)&&(n.activeRightPanels=e.activeRightPanel?[e.activeRightPanel]:[],delete n.activeRightPanel);const r={...kl,...n};if(Array.isArray(r.activeLeftPanels)||(r.activeLeftPanels=kl.activeLeftPanels),Array.isArray(r.activeRightPanels)||(r.activeRightPanels=kl.activeRightPanels),Array.isArray(r.bottomPanels)||(r.bottomPanels=kl.bottomPanels),Array.isArray(r.activeBottomPanels)||(r.activeBottomPanels=kl.activeBottomPanels),typeof r.showBottom!="boolean"&&(r.showBottom=kl.showBottom),typeof r.bottomHeight!="number"&&(r.bottomHeight=kl.bottomHeight),Array.isArray(r.leftPanels)&&!r.leftPanels.includes("datatableEditor")){const i=r.leftPanels.indexOf("datatable");i>=0?r.leftPanels.splice(i+1,0,"datatableEditor"):r.leftPanels.push("datatableEditor")}return Array.isArray(r.rightPanels)&&(r.rightPanels=r.rightPanels.filter(i=>i!=="data")),Array.isArray(r.activeRightPanels)&&(r.activeRightPanels=r.activeRightPanels.filter(i=>i!=="data")),Array.isArray(r.leftPanels)&&(r.leftPanels=r.leftPanels.filter(i=>i!=="data")),Array.isArray(r.activeLeftPanels)&&(r.activeLeftPanels=r.activeLeftPanels.filter(i=>i!=="data")),Array.isArray(r.bottomPanels)&&(r.bottomPanels=r.bottomPanels.filter(i=>i!=="data")),Array.isArray(r.activeBottomPanels)&&(r.activeBottomPanels=r.activeBottomPanels.filter(i=>i!=="data")),(r.activeLeftPanels.length>2||r.activeRightPanels.length>2)&&(console.warn("[PanelLayout]     .  ."),r.activeLeftPanels=kl.activeLeftPanels,r.activeRightPanels=kl.activeRightPanels,y3(r)),r}}catch(t){console.error("[PanelLayout] Failed to load from localStorage:",t)}return null}function y3(t){try{localStorage.setItem(XX,JSON.stringify(t))}catch(e){console.error("[PanelLayout] Failed to save to localStorage:",e)}}const REe=(t,e)=>({panelLayout:K6()||kl,setPanelLayout:n=>{t({panelLayout:n}),y3(n)},resetPanelLayout:()=>{t({panelLayout:kl}),y3(kl)},savePanelLayoutToStorage:()=>{const{panelLayout:n}=e();y3(n)},loadPanelLayoutFromStorage:()=>{const n=K6();n&&t({panelLayout:n})}});class IEe{maxPages;accessOrder=[];_hits=0;_misses=0;_evictions=0;constructor(e=5){this.maxPages=Math.max(1,e)}access(e){const n=this.accessOrder.indexOf(e);if(n!==-1?(this._hits++,this.accessOrder.splice(n,1)):this._misses++,this.accessOrder.unshift(e),this.accessOrder.length>this.maxPages){const i=this.accessOrder.pop()??null;return i&&this._evictions++,i}return null}has(e){return this.accessOrder.includes(e)}remove(e){const n=this.accessOrder.indexOf(e);return n!==-1?(this.accessOrder.splice(n,1),!0):!1}clear(){this.accessOrder=[],this._hits=0,this._misses=0,this._evictions=0}getPageIds(){return[...this.accessOrder]}get size(){return this.accessOrder.length}get capacity(){return this.maxPages}setMaxPages(e){this.maxPages=Math.max(1,e);const n=[];for(;this.accessOrder.length>this.maxPages;){const r=this.accessOrder.pop();r&&(n.push(r),this._evictions++)}return n}getStats(){const e=this._hits+this._misses;return{size:this.size,maxPages:this.maxPages,hits:this._hits,misses:this._misses,evictions:this._evictions,hitRate:e>0?this._hits/e*100:0}}getMostRecent(){return this.accessOrder[0]??null}getLeastRecent(){return this.accessOrder[this.accessOrder.length-1]??null}touch(e){const n=this.accessOrder.indexOf(e);return n===-1?!1:(this.accessOrder.splice(n,1),this.accessOrder.unshift(e),!0)}dump(){console.log(" [LRU] Cache state:"),console.log(`  Size: ${this.size}/${this.maxPages}`),console.log(`  Order: [${this.accessOrder.join("  ")}]`),console.log("  Stats:",this.getStats())}}const $d=new IEe(5);function $Ee(t,e){const n=async g=>{try{const x=await(await Yt()).elements.where("page_id").equals(g).sortBy("order_num");return x&&x.length>0?x:null}catch(v){return console.warn("[Loader] IndexedDB load failed:",v),null}},r=async g=>{try{const{data:v,error:x}=await zr.from("elements").select("*").eq("page_id",g).order("order_num");if(x)throw x;return v??[]}catch(v){return console.error("[Loader] Supabase load failed:",v),[]}},i=async g=>{try{await(await Yt()).elements.bulkPut(g)}catch(v){console.warn("[Loader] IndexedDB cache failed:",v)}},a=async g=>{const v=e();if(!v.lazyLoadingEnabled){const x=[];return v.elementsMap.forEach(_=>{_.page_id===g&&x.push(_)}),x}if(v.loadedPages.has(g)){$d.access(g);const x=[];return v.elementsMap.forEach(_=>{_.page_id===g&&x.push(_)}),x}if(v.loadingPages.has(g))return new Promise(x=>{const _=setInterval(()=>{if(e().loadedPages.has(g)){clearInterval(_);const w=[];e().elementsMap.forEach(S=>{S.page_id===g&&w.push(S)}),x(w)}},50);setTimeout(()=>{clearInterval(_),x([])},1e4)});t(x=>({loadingPages:new Set([...x.loadingPages,g])}));try{let x=await n(g);(!x||x.length===0)&&(x=await r(g),x.length>0&&i(x)),x.length>0&&(t(w=>{const S=new Map(w.elementsMap),E=[...w.elements];return x.forEach(A=>{S.has(A.id)||(S.set(A.id,A),E.push(A))}),{elements:E,elementsMap:S}}),e()._rebuildIndexes());const _=$d.access(g);return _&&_!==e().currentPageId&&e().unloadPage(_),t(w=>({loadedPages:new Set([...w.loadedPages,g]),loadingPages:new Set([...w.loadingPages].filter(S=>S!==g))})),x}catch(x){return console.error("[Loader] Failed to load page:",x),t(_=>({loadingPages:new Set([..._.loadingPages].filter(w=>w!==g))})),[]}},s=g=>{const v=e();if(g===v.currentPageId){console.warn(`[Loader] Cannot unload current page: ${g}`);return}v.loadedPages.has(g)&&(t(x=>{const _=new Map(x.elementsMap),w=[];return _.forEach((E,A)=>{E.page_id===g&&w.push(A)}),w.forEach(E=>_.delete(E)),{elements:x.elements.filter(E=>E.page_id!==g),elementsMap:_,loadedPages:new Set([...x.loadedPages].filter(E=>E!==g))}}),$d.remove(g),e()._rebuildIndexes())};return{loadedPages:new Set,loadingPages:new Set,lazyLoadingEnabled:!0,lazyLoadPageElements:a,unloadPage:s,isPageLoaded:g=>e().loadedPages.has(g),isPageLoading:g=>e().loadingPages.has(g),setLazyLoadingEnabled:g=>{t({lazyLoadingEnabled:g})},getLRUStats:()=>$d.getStats(),clearAllPages:()=>{const g=e(),v=g.currentPageId;g.loadedPages.forEach(x=>{x!==v&&s(x)}),$d.clear(),v&&$d.access(v)},preloadPage:g=>{const v=e();v.loadedPages.has(g)||v.loadingPages.has(g)||("requestIdleCallback"in window?window.requestIdleCallback(()=>{a(g)}):setTimeout(()=>{a(g)},100))}}}const jEe=(t,e)=>async n=>{t({isLoading:!0,error:null});try{const a=(await(await Yt()).layouts.getByProject(n)||[]).sort((f,m)=>{const g=(f.order_num||0)-(m.order_num||0);return g!==0?g:f.name.localeCompare(m.name)}),{currentLayoutId:s}=e(),o=s&&a.some(f=>f.id===s),c=a.length>0&&!o,u=a.find(f=>f.order_num===0)||a[0],h=c?u?.id:o?s:null;t({layouts:a,isLoading:!1,currentLayoutId:h})}catch(r){console.error(" Layout   :",r),t({error:r,isLoading:!1})}},LEe=(t,e)=>async n=>{t({isLoading:!0,error:null});try{const r=await Yt(),i={id:crypto.randomUUID(),name:n.name,project_id:n.project_id,description:n.description,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await r.layouts.insert(i);const a={id:crypto.randomUUID(),tag:"body",props:{},parent_id:null,page_id:null,layout_id:i.id,order_num:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await r.elements.insert(a);const{elements:s,setElements:o}=h2.getState();o([...s,a],{skipHistory:!0});const{layouts:c}=e();return t({layouts:[...c,i],isLoading:!1}),i}catch(r){throw console.error(" Layout  :",r),t({error:r,isLoading:!1}),r}},OEe=(t,e)=>async(n,r)=>{t({isLoading:!0,error:null});try{await(await Yt()).layouts.update(n,r);const{layouts:a}=e();t({layouts:a.map(s=>s.id===n?{...s,...r,updated_at:new Date().toISOString()}:s),isLoading:!1})}catch(i){throw console.error(" Layout  :",i),t({error:i,isLoading:!1}),i}},FEe=(t,e)=>async n=>{t({isLoading:!0,error:null});try{const r=await Yt(),a=(await r.pages.getAll()).filter(h=>h.layout_id===n);if(a.length>0){await Promise.all(a.map(g=>r.pages.update(g.id,{layout_id:null})));const{pages:h,setPages:f}=h2.getState(),m=h.map(g=>a.some(v=>v.id===g.id)?{...g,layout_id:null}:g);f(m)}const o=(await r.elements.getAll()).filter(h=>h.layout_id===n);if(o.length>0){await Promise.all(o.map(g=>r.elements.delete(g.id)));const{elements:h,setElements:f}=h2.getState(),m=h.filter(g=>g.layout_id!==n);f(m,{skipHistory:!0})}await r.layouts.delete(n);const{layouts:c,currentLayoutId:u}=e();t({layouts:c.filter(h=>h.id!==n),currentLayoutId:u===n?null:u,isLoading:!1})}catch(r){throw console.error(" Layout  :",r),t({error:r,isLoading:!1}),r}},BEe=(t,e)=>async n=>{t({isLoading:!0,error:null});try{const r=await Yt(),{layouts:i}=e(),a=i.find(u=>u.id===n);if(!a)throw new Error(`Layout not found: ${n}`);const s={id:crypto.randomUUID(),name:`${a.name} (Copy)`,project_id:a.project_id,description:a.description,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await r.layouts.insert(s);const c=(await r.elements.getAll()).filter(u=>u.layout_id===n);if(c&&c.length>0){const u=new Map;c.forEach(f=>{u.set(f.id,crypto.randomUUID())});const h=c.map(f=>({...f,id:u.get(f.id),layout_id:s.id,parent_id:f.parent_id&&u.get(f.parent_id)||null,page_id:null}));await r.elements.insertMany(h)}return t({layouts:[...e().layouts,s],isLoading:!1}),s}catch(r){throw console.error(" Layout  :",r),t({error:r,isLoading:!1}),r}},zEe=t=>e=>{t({currentLayoutId:e})},UEe=t=>e=>{const{layouts:n}=t();return n.find(r=>r.id===e)},VEe=(t,e)=>n=>e().filter(a=>a.layout_id===n&&a.tag==="Slot").map(a=>{const s=a.props.name;return{name:s||`slot_${a.id.slice(0,8)}`,displayName:s||"unnamed",required:a.props.required||!1,description:a.props.description,elementId:a.id}}),HEe=()=>async t=>{try{const i=(await(await Yt()).pages.getAll()).filter(a=>a.layout_id===t).map(a=>a.id);return{canDelete:i.length===0,usedByPages:i}}catch(e){return console.error(" Layout    :",e),{canDelete:!1,usedByPages:[]}}},GEe=(t,e)=>{const n=jEe(t,e),r=LEe(t,e),i=OEe(t,e),a=FEe(t,e),s=BEe(t,e),o=zEe(t),c=UEe(e),u=f=>VEe(e,()=>h2.getState().elements)(f),h=HEe();return{layouts:[],currentLayoutId:null,isLoading:!1,error:null,fetchLayouts:n,createLayout:r,updateLayout:i,deleteLayout:a,duplicateLayout:s,setCurrentLayout:o,getLayoutById:c,getLayoutSlots:u,validateLayoutDelete:h}},Ra=Ks()(K2(GEe,{name:"xstudio-layouts",partialize:t=>({currentLayoutId:t.currentLayoutId})}));let $e;const WEe=typeof window<"u"&&window.__XSTUDIO_STORE__;WEe?$e=window.__XSTUDIO_STORE__:($e=Ks((...t)=>({...KX(...t),...fEe(...t),...DEe(...t),...kEe(...t),...REe(...t),...$Ee(...t)})),typeof window<"u"&&(window.__XSTUDIO_STORE__=$e,window.__XSTUDIO_STORE_ID__=Math.random().toString(36).substring(7)));const $k=()=>typeof window<"u"&&window!==window.top&&window.parent&&window.parent.__XSTUDIO_STORE__?window.parent.__XSTUDIO_STORE__.getState():typeof window<"u"&&window.__XSTUDIO_STORE__?window.__XSTUDIO_STORE__.getState():$e.getState();$e.subscribe;const qEe=[],KEe=()=>{const t=$e(r=>r.currentPageId),e=$e(r=>r.pageIndex),n=$e(r=>r.elementsMap);return T.useMemo(()=>t?qX(e,t,n):qEe,[e,n,t])};class XEe{panels=new Map;initialized=!1;register(e){this.panels.has(e.id)&&console.warn(`[PanelRegistry] Panel "${e.id}" is already registered. Overwriting.`),this.panels.set(e.id,e)}registerMany(e){e.forEach(n=>this.register(n))}unregister(e){this.panels.delete(e)}getPanel(e){return this.panels.get(e)}getAllPanels(){return Array.from(this.panels.values())}getPanelsByCategory(e){return this.getAllPanels().filter(n=>n.category===e)}getPanelsByDefaultPosition(e){return this.getAllPanels().filter(n=>n.defaultPosition===e)}filterPanels(e){let n=this.getAllPanels();if(e.category&&(n=n.filter(r=>r.category===e.category)),e.search){const r=e.search.toLowerCase();n=n.filter(i=>i.name.toLowerCase().includes(r)||i.nameEn?.toLowerCase().includes(r)||i.description?.toLowerCase().includes(r))}return n}hasPanel(e){return this.panels.has(e)}get count(){return this.panels.size}get isInitialized(){return this.initialized}markInitialized(){this.initialized=!0}clear(){this.panels.clear(),this.initialized=!1}debug(){console.group("[PanelRegistry] Debug Info"),console.log("Total panels:",this.count),console.log("Initialized:",this.initialized),console.log("Panels by category:"),["navigation","editor","tool","system"].forEach(n=>{const r=this.getPanelsByCategory(n);console.log(`  ${n}:`,r.map(i=>i.id).join(", "))}),console.log("Panels by default position:"),console.log("  left:",this.getPanelsByDefaultPosition("left").map(n=>n.id).join(", ")),console.log("  right:",this.getPanelsByDefaultPosition("right").map(n=>n.id).join(", ")),console.groupEnd()}}const C_=new XEe;function RA(t){return t.trim()?/^[a-z0-9\-/]+$/i.test(t)?/\/\/+/.test(t)?{valid:!1,error:"Slug cannot contain consecutive slashes"}:t.endsWith("/")&&t!=="/"?{valid:!1,error:"Slug cannot end with a slash"}:{valid:!0}:{valid:!1,error:"Slug can only contain letters, numbers, hyphens, and slashes"}:{valid:!1,error:"Slug cannot be empty"}}function YEe(t){return t.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}function ZEe(t){return t.startsWith("/")}function OBe(t){return ZEe(t)?t:`/${t}`}function JEe({page:t,layout:e,allPages:n}){if(t.slug.startsWith("/"))return t.slug;if(e?.slug)return IA(`${e.slug}/${t.slug}`);if(t.parent_id&&n){const r=YX(t.parent_id,n);return IA(`${r}/${t.slug}`)}return IA(`/${t.slug}`)}function YX(t,e){const n=e.find(r=>r.id===t);return n?n.slug.startsWith("/")?n.slug:n.parent_id?`${YX(n.parent_id,e)}/${n.slug}`:`/${n.slug}`:""}function IA(t){return t.replace(/\/+/g,"/")}function FBe(t,e,n){if(!e)return!1;let r=e;const i=new Set;for(;r;){if(r===t||i.has(r))return!0;i.add(r),r=n.find(s=>s.id===r)?.parent_id||null}return!1}function BBe(t,e){let n=0,r=t;for(;r;){const i=e.find(a=>a.id===r);if(!i?.parent_id)break;n++,r=i.parent_id}return n}function QEe({onSubmit:t,existingPagesCount:e}){const[n,r]=T.useState(!1),[i,a]=T.useState(""),[s,o]=T.useState(""),[c,u]=T.useState(null),[h,f]=T.useState(null),[m,g]=T.useState(null),[v,x]=T.useState(!1),_=$e($=>$.pages),w=Ra($=>$.layouts),S=`Page ${e+1}`,E=`/page-${e+1}`;T.useEffect(()=>{n&&(a(S),o(E),u(null),f(null),g(null),x(!1))},[n,S,E]);const A=T.useCallback($=>{a($);const B=`/${YEe($)}`;o(B);const q=RA(B);g(q.valid?null:q.error||null)},[]),N=T.useCallback($=>{o($);const B=RA($);g(B.valid?null:B.error||null)},[]),P=T.useCallback($=>{f($||null)},[]),R=T.useMemo(()=>{const $=c?w.find(q=>q.id===c):null;return JEe({page:{slug:s,parent_id:h},layout:$?{id:$.id,name:$.name,project_id:$.project_id,slug:$.slug||void 0}:null,allPages:_.map(q=>({id:q.id,title:q.name,slug:q.slug||"",project_id:q.project_id||"",parent_id:q.parent_id,layout_id:q.layout_id,order_num:q.order_num}))})},[i,s,c,h,w,_]),D=T.useCallback(async()=>{const $=RA(s);if(!$.valid){g($.error||"Invalid slug");return}if(i.trim()){x(!0);try{await t({title:i.trim(),slug:s,layoutId:c,parentId:h}),r(!1)}catch(B){console.error("Failed to create page:",B)}finally{x(!1)}}},[i,s,c,h,t]),k=T.useMemo(()=>_.map($=>({value:$.id,label:$.name})),[_]),L=T.useMemo(()=>w.map($=>({value:$.id,label:$.slug?`${$.name} (${$.slug})`:$.name})),[w]);return l.jsxs(my,{isOpen:n,onOpenChange:r,children:[l.jsx(Pt,{className:"iconButton","aria-label":"Add Page",children:l.jsx(oy,{color:se.color,strokeWidth:se.stroke,size:se.size})}),l.jsx(Cve,{className:"add-page-modal",children:l.jsxs(Yq,{className:"add-page-dialog",children:[l.jsxs(Sve,{slot:"title",className:"add-page-title",children:[l.jsx(oy,{size:20}),"Add New Page"]}),l.jsxs("div",{className:"add-page-form",children:[l.jsxs(xn,{className:"add-page-field",children:[l.jsx(kt,{children:"Title"}),l.jsx(Pn,{value:i,onChange:$=>A($.target.value),placeholder:S})]}),l.jsxs(xn,{className:"add-page-field",isInvalid:!!m,children:[l.jsxs(kt,{children:[l.jsx(H_,{size:14}),"URL Slug"]}),l.jsx(Pn,{value:s,onChange:$=>N($.target.value),placeholder:E}),m&&l.jsxs("div",{className:"add-page-error",children:[l.jsx(bR,{size:12}),l.jsx("span",{children:m})]}),l.jsx("div",{className:"add-page-hint",children:"Auto-generated from title. Edit if needed."})]}),l.jsxs("div",{className:"add-page-field",children:[l.jsxs(kt,{children:[l.jsx(G_,{size:14}),"Layout (Optional)"]}),l.jsxs("select",{value:c||"",onChange:$=>u($.target.value||null),className:"add-page-select",children:[l.jsx("option",{value:"",children:"None"}),L.map($=>l.jsx("option",{value:$.value,children:$.label},$.value))]})]}),l.jsxs("div",{className:"add-page-field",children:[l.jsxs(kt,{children:[l.jsx(dre,{size:14}),"Parent Page (Optional)"]}),l.jsxs("select",{value:h||"",onChange:$=>P($.target.value),className:"add-page-select",children:[l.jsx("option",{value:"",children:"None (Root Level)"}),k.map($=>l.jsx("option",{value:$.value,children:$.label},$.value))]})]}),l.jsxs("div",{className:"add-page-preview",children:[l.jsx("span",{className:"add-page-preview-label",children:"Preview URL:"}),l.jsx("code",{className:"add-page-preview-url",children:R})]})]}),l.jsxs("div",{className:"add-page-actions",children:[l.jsx(Pt,{className:"add-page-cancel",onPress:()=>r(!1),children:"Cancel"}),l.jsx(Pt,{className:"add-page-submit",onPress:D,isDisabled:v||!i.trim()||!!m,children:v?"Creating...":"Create Page"})]})]})})]})}function eCe({pages:t,pageList:e,handleAddPage:n,addPageWithParams:r,projectId:i,renderTree:a,fetchElements:s}){const o=$e(h=>h.setPages),c=async h=>{if(!r||!i){n();return}const f={projectId:i,title:h.title,slug:h.slug,layoutId:h.layoutId,parentId:h.parentId},m=await r(f);if(!m.success)throw m.error||new Error("Failed to create page")},u=async h=>{try{const g=await Yt(),x=(await g.elements.getByPage(h.id)).map(_=>_.id);console.log(` Page "${h.title}"  : ${x.length}  `),x.length>0&&(await g.elements.deleteMany(x),console.log(` [IndexedDB] ${x.length}   `)),await g.pages.delete(h.id),console.log(` [IndexedDB] Page "${h.title}"  `),await lg.deletePage(h.id),console.log(` [Supabase] Page "${h.title}"  `)}catch(g){console.error("  :",g);return}e.remove(h.id);const f=t.filter(g=>g.id!==h.id),m=f.map(g=>({id:g.id,name:g.title,slug:g.slug,parent_id:g.parent_id,order_num:g.order_num}));if(o(m),console.log("   :",h.title),f.length>0){const v=f.find(x=>x.order_num===0)||f[0];await s(v.id)}};return l.jsxs("div",{className:"sidebar_pages",children:[l.jsxs("div",{className:"panel-header",children:[l.jsx("h3",{className:"panel-title",children:"Pages"}),l.jsx("div",{className:"header-actions",children:l.jsx(QEe,{onSubmit:c,existingPagesCount:t.length})})]}),l.jsx("div",{className:"elements",children:t.length===0?l.jsx("p",{className:"no_element",children:"No pages available"}):a(t,h=>h.title,h=>s(h.id),u)})]})}class Ki{static iframe=null;static getIframe(){return this.iframe&&!this.iframe.contentWindow&&(this.iframe=null),this.iframe||(this.iframe=document.getElementById("previewFrame")),this.iframe}static clearIframeCache(){this.iframe=null}static sendToIframe(e,n){const r=this.getIframe();r?.contentWindow&&r.contentWindow.postMessage({type:e,payload:n},window.location.origin)}static sendToWindow(e,n){window.postMessage({type:e,payload:n},window.location.origin)}static clearOverlay(){this.sendToWindow("CLEAR_OVERLAY",{})}static handleMessage(e,n){try{const{type:r,payload:i}=e.data;switch(r){case"ELEMENT_SELECTED":i?.elementId&&n.setSelectedElement(i.elementId,i.props);break;case"ELEMENT_ADDED":i?.element&&n.addElement(i.element);break;case"ELEMENT_UPDATED":i?.elementId&&i?.props&&n.updateElementProps(i.elementId,i.props);break;case"ELEMENT_REMOVED":i?.elementId&&n.removeElement(i.elementId);break;case"ELEMENTS_LOADED":i?.elements&&n.setElements(i.elements);break;case"ERROR":i?.message&&n.setError(i.message);break;case"LOADING":typeof i?.loading=="boolean"&&n.setIsLoading(i.loading);break;default:break}}catch(r){console.error("Message handling error:",r)}}}function ZX(t,e=null){if(e===null){const r=new Map,i=new Map;t.forEach(s=>{if(s.deleted===!0)return;i.set(s.id,s);const o=s.parent_id||"root";r.has(o)||r.set(o,[]),r.get(o).push(s)});const a=s=>{let o=r.get(s)||[];if(s!=="root"){const c=i.get(s);c&&c.tag==="Tabs"?o=tCe(o):c&&c.tag==="Table"?o=[...o].sort((u,h)=>(u.order_num||0)-(h.order_num||0)):o=[...o].sort((u,h)=>(u.order_num||0)-(h.order_num||0))}else o=[...o].sort((c,u)=>(c.order_num||0)-(u.order_num||0));return o.map(c=>({id:c.id,tag:c.tag,parent_id:c.parent_id,order_num:c.order_num,props:c.props,deleted:c.deleted,dataBinding:c.dataBinding,children:a(c.id)}))};return a("root")}return console.warn("buildTreeFromElements:    (parentId )"),[]}function tCe(t){const e=t.filter(a=>a.tag==="Tab").sort((a,s)=>(a.order_num||0)-(s.order_num||0)),n=t.filter(a=>a.tag==="Panel").sort((a,s)=>(a.order_num||0)-(s.order_num||0)),r=[],i=new Set;return e.forEach(a=>{r.push(a);const o=a.props?.tabId;if(o){const c=n.find(u=>u.props?.tabId===o);c&&!i.has(c.id)&&(r.push(c),i.add(c.id))}else{console.warn(" Tab tabId , order_num  fallback :",a.id);const c=n.find(u=>!i.has(u.id)&&Math.abs((u.order_num||0)-(a.order_num||0))<=1);c&&(r.push(c),i.add(c.id))}}),n.forEach(a=>{i.has(a.id)||(console.warn("   Panel:",a.id),r.push(a))}),r}const Xe={color:"#171717",stroke:1,size:16},nCe=(t,e)=>t.some(n=>n.parent_id===e),Hr=t=>typeof t=="object"&&t!==null&&"tag"in t&&typeof t.tag=="string",po=t=>{if(typeof t!="object"||t===null||!("props"in t))return!1;const e=t.props;return typeof e=="object"&&e!==null},gs=t=>Array.isArray(t)?t:[];function JX(t,e,n=0){const r=[];for(const i of t){const a=i.children&&i.children.length>0,s=e.has(i.id),o=i.tag==="ToggleButtonGroup"&&i.props?.children&&Array.isArray(i.props.children)&&i.props.children.length>0,c=i.tag==="CheckboxGroup"&&i.props?.children&&Array.isArray(i.props.children)&&i.props.children.length>0,u=i.tag==="RadioGroup"&&i.props?.children&&Array.isArray(i.props.children)&&i.props.children.length>0,h=i.tag==="ListBox"&&i.props?.children&&Array.isArray(i.props.children)&&i.props.children.length>0,f=i.tag==="GridList"&&i.props?.children&&Array.isArray(i.props.children)&&i.props.children.length>0,m=i.tag==="Select"&&i.props?.children&&Array.isArray(i.props.children)&&i.props.children.length>0,g=i.tag==="ComboBox"&&i.props?.children&&Array.isArray(i.props.children)&&i.props.children.length>0,v=i.tag==="Tree"&&i.props?.children&&Array.isArray(i.props.children)&&i.props.children.length>0,x=a||o||c||u||h||f||m||g||v;if(r.push({item:i,depth:n,hasChildren:x,isExpanded:s}),s){if(a&&i.children){const _=JX(i.children,e,n+1);r.push(..._)}if(o&&(i.props?.children).forEach((w,S)=>{r.push({item:i,depth:n+1,hasChildren:!1,isExpanded:!1,virtualChildType:"toggle",virtualChildIndex:S,virtualChildData:w})}),c&&(i.props?.children).forEach((w,S)=>{r.push({item:i,depth:n+1,hasChildren:!1,isExpanded:!1,virtualChildType:"checkbox",virtualChildIndex:S,virtualChildData:w})}),u&&(i.props?.children).forEach((w,S)=>{r.push({item:i,depth:n+1,hasChildren:!1,isExpanded:!1,virtualChildType:"radio",virtualChildIndex:S,virtualChildData:w})}),h||f||m||g){const _=i.props?.children,w=h?"listbox":f?"gridlist":m?"select":"combobox";_.forEach((S,E)=>{r.push({item:i,depth:n+1,hasChildren:!1,isExpanded:!1,virtualChildType:w,virtualChildIndex:E,virtualChildData:S})})}v&&(i.props?.children).forEach((w,S)=>{r.push({item:i,depth:n+1,hasChildren:w.children&&w.children.length>0,isExpanded:!1,virtualChildType:"tree",virtualChildIndex:S,virtualChildData:w})})}}return r}const X6=ve.memo(function({flatItem:e,selectedElementId:n,selectedTab:r,onItemClick:i,onItemDelete:a,onToggleExpand:s,onSelectTabElement:o}){const{item:c,depth:u,hasChildren:h,isExpanded:f,virtualChildType:m,virtualChildIndex:g,virtualChildData:v}=e;if(m&&g!==void 0){const A=r?.parentId===c.id&&r?.tabIndex===g,N=D=>{D.stopPropagation(),o?.(c.id,c.props,g)};let P="",R=l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}});switch(m){case"toggle":P=v.title||`Button ${g+1}`;break;case"checkbox":P=v.label||`Checkbox ${g+1}`;break;case"radio":P=v.label||`Radio ${g+1}`;break;case"listbox":case"gridlist":P=v.label||`Item ${g+1}`;break;case"select":case"combobox":P=v.label||`Option ${g+1}`;break;case"tree":{const D=v;P=D.title,R=D.children&&D.children.length>0?l.jsx(N3,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size}):l.jsx(Fv,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size});break}}return l.jsx("div",{"data-depth":u,"data-has-children":!1,onClick:N,className:"element",children:l.jsxs("div",{className:`elementItem ${A?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:u>0?`${u*8}px`:"0px"}}),l.jsx("div",{className:"elementItemIcon",children:R}),l.jsx("div",{className:"elementItemLabel",children:P}),l.jsx("div",{className:"elementItemActions"})]})})}const x={id:c.id,tag:c.tag,parent_id:c.parent_id||null,order_num:c.order_num,props:c.props,deleted:c.deleted,dataBinding:c.dataBinding,page_id:"",created_at:"",updated_at:""},_=A=>{A.stopPropagation(),i(x)},w=A=>{A.stopPropagation(),h&&s(c.id)},S=async A=>{A.stopPropagation(),await a(x)};let E=c.tag;return c.tag==="Tab"&&c.props?E=`Tab: ${c.props.title||"Untitled"}`:c.tag==="Panel"&&c.props?E=`Panel: ${c.props.title||"Untitled"}`:c.tag==="TableHeader"?E="thead":c.tag==="TableBody"?E="tbody":c.tag==="Column"&&c.props?E=`th: ${c.props.children||"Column"}`:c.tag==="Row"?E="tr":c.tag==="Cell"&&c.props&&(E=`td: ${c.props.children||"Cell"}`),l.jsx("div",{"data-depth":u,"data-has-children":h,onClick:_,className:"element",children:l.jsxs("div",{className:`elementItem ${n===c.id?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:u>0?`${u*8}px`:"0px"}}),l.jsx("div",{className:"elementItemIcon",onClick:w,children:h?l.jsx(Ia,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{transform:f?"rotate(90deg)":"rotate(0deg)"}}):l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:E}),l.jsxs("div",{className:"elementItemActions",children:[l.jsx("button",{className:"iconButton","aria-label":"Settings",children:l.jsx(Iu,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size})}),c.tag!=="body"&&l.jsx("button",{className:"iconButton","aria-label":`Delete ${c.tag}`,onClick:S,children:l.jsx(Qo,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size})})]})]})})}),rCe=ve.memo(function({tree:e,expandedKeys:n,selectedElementId:r,selectedTab:i,onItemClick:a,onItemDelete:s,onToggleExpand:o,onSelectTabElement:c,containerHeight:u=400}){const h=T.useRef(null),f=T.useMemo(()=>JX(e,n),[e,n]),m=EX({count:f.length,getScrollElement:()=>h.current,estimateSize:()=>28,overscan:5}),g=m.getVirtualItems();return f.length<50?l.jsx(l.Fragment,{children:f.map(v=>l.jsx(X6,{flatItem:v,selectedElementId:r,selectedTab:i,onItemClick:a,onItemDelete:s,onToggleExpand:o,onSelectTabElement:c},v.virtualChildType?`${v.item.id}-${v.virtualChildType}-${v.virtualChildIndex}`:v.item.id))}):l.jsx("div",{ref:h,className:"virtualized-tree-container",style:{height:u,overflow:"auto"},children:l.jsx("div",{style:{height:`${m.getTotalSize()}px`,width:"100%",position:"relative"},children:g.map(v=>{const x=f[v.index];return l.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${v.size}px`,transform:`translateY(${v.start}px)`},children:l.jsx(X6,{flatItem:x,selectedElementId:r,selectedTab:i,onItemClick:a,onItemDelete:s,onToggleExpand:o,onSelectTabElement:c})},v.key)})})})}),iCe=50;function aCe({elements:t,selectedElementId:e,setSelectedElement:n,renderElementTree:r,sendElementSelectedMessage:i,collapseAllTreeItems:a,expandedKeys:s,onToggleExpand:o,selectedTab:c,onSelectTabElement:u,forceVirtualization:h=!1}){const{removeElement:f}=$e(),m=ve.useMemo(()=>ZX(t),[t]),g=h||t.length>=iCe,v=s&&o,x=T.useCallback(w=>{n(w.id,w.props),requestAnimationFrame(()=>i(w.id,w.props))},[n,i]),_=T.useCallback(async w=>{await f(w.id),w.id===e&&(n(null),Ki.clearOverlay())},[f,e,n]);return l.jsxs("div",{className:"sidebar_elements",children:[l.jsxs("div",{className:"panel-header",children:[l.jsx("h3",{className:"panel-title",children:"Layers"}),l.jsx("div",{className:"header-actions",children:l.jsx("button",{className:"iconButton","aria-label":"collapseAll",onClick:()=>{a&&a()},children:l.jsx(HB,{color:"#666",strokeWidth:1.5,size:16})})})]}),l.jsx("div",{className:"elements",children:t.length===0?l.jsx("p",{className:"no_element",children:"No element available"}):g&&v?l.jsx(rCe,{tree:m,expandedKeys:s,selectedElementId:e,selectedTab:c,onItemClick:x,onItemDelete:_,onToggleExpand:o,onSelectTabElement:u,elements:t,containerHeight:400}):r(m,x,_)})]})}function sCe({activeTab:t,onTabChange:e}){const n=[{id:"pages",label:"Page",icon:l.jsx(SR,{color:se.color,strokeWidth:se.stroke,size:se.size})},{id:"layouts",label:"Layout",icon:l.jsx(G_,{color:se.color,strokeWidth:se.stroke,size:se.size})}];return l.jsx("div",{className:"nodes-panel-tabs",role:"tablist","aria-label":"Nodes Panel Tabs",children:n.map(r=>l.jsxs("button",{role:"tab","aria-selected":t===r.id,"aria-controls":`tabpanel-${r.id}`,className:`nodes-panel-tab ${t===r.id?"active":""}`,onClick:()=>e(r.id),children:[r.icon,l.jsx("span",{className:"nodes-panel-tab-label",children:r.label})]},r.id))})}function oCe({pages:t,pageList:e,handleAddPage:n,addPageWithParams:r,projectId:i,renderTree:a,renderElementTree:s,fetchElements:o,elements:c,selectedElementId:u,setSelectedElement:h,sendElementSelectedMessage:f,requestAutoSelectAfterUpdate:m,collapseAllTreeItems:g,expandedKeys:v,onToggleExpand:x,selectedTab:_,onSelectTabElement:w}){const S=$e(A=>A.currentPageId),E=T.useRef(null);return T.useEffect(()=>{if(S!==E.current&&S&&(E.current=S,c.length>0)){const N=c.find(P=>P.order_num===0)||c.find(P=>P.tag==="body");N&&(h(N.id,N.props),m(N.id))}},[S,c,h,m]),l.jsxs("div",{className:"pages-tab",role:"tabpanel",id:"tabpanel-pages","aria-label":"Pages",children:[l.jsx(eCe,{pages:t,pageList:e,handleAddPage:n,addPageWithParams:r,projectId:i,renderTree:a,fetchElements:o}),l.jsx(aCe,{elements:c,selectedElementId:u,setSelectedElement:h,renderElementTree:s,sendElementSelectedMessage:f,collapseAllTreeItems:g,expandedKeys:v,onToggleExpand:x,selectedTab:_,onSelectTabElement:w})]})}function QX(t={}){const{initialExpandedKeys:e,selectedElementId:n,elements:r=[]}=t,i=$e(m=>m.elementsMap),[a,s]=T.useState(e||new Set),o=T.useCallback(m=>{s(g=>{const v=new Set(g);return v.has(m)?v.delete(m):v.add(m),v})},[]),c=T.useCallback(m=>{s(g=>{if(g.has(m))return g;const v=new Set(g);return v.add(m),v})},[]),u=T.useCallback(m=>{s(g=>{if(!g.has(m))return g;const v=new Set(g);return v.delete(m),v})},[]),h=T.useCallback(()=>{s(new Set)},[]),f=T.useCallback(m=>{const g=new Set;let v=i.get(m);for(;v?.parent_id;)g.add(v.parent_id),v=i.get(v.parent_id);g.size>0&&s(x=>{const _=new Set(x);return g.forEach(w=>_.add(w)),_})},[i]);return T.useEffect(()=>{if(!n||r.length===0)return;const m=new Set;let g=i.get(n);for(;g?.parent_id;)m.add(g.parent_id),g=i.get(g.parent_id);m.size>0&&s(v=>{const x=new Set(v);let _=!1;return m.forEach(w=>{x.has(w)||(x.add(w),_=!0)}),_?x:v})},[n,r.length,i]),{expandedKeys:a,toggleKey:o,expandKey:c,collapseKey:u,collapseAll:h,expandParents:f}}function lCe({selectedElementId:t,setSelectedElement:e,sendElementSelectedMessage:n,requestAutoSelectAfterUpdate:r,projectId:i}){const{projectId:a}=yg(),s=i||a,o=Ra(O=>O.layouts),c=Ra(O=>O.currentLayoutId),u=Ra(O=>O.setCurrentLayout),h=Ra(O=>O.createLayout),f=Ra(O=>O.deleteLayout),m=Ra(O=>O.fetchLayouts),g=T.useMemo(()=>{const O=o.find(z=>z.id===c)||null;return console.log(` [currentLayout] : currentLayoutId=${c?.slice(0,8)}, found=${O?.name}`),O},[o,c]),v=Eo(O=>O.setCurrentLayoutId),x=$e(O=>O.elements),_=$e(O=>O.removeElement),w=$e(O=>O.setElements);T.useEffect(()=>{console.log(" [LayoutsTab] projectId:",s),s?(console.log(" [LayoutsTab] fetchLayouts :",s),m(s)):console.warn(" [LayoutsTab] projectId !")},[s,m]);const S=ve.useRef(new Set);T.useEffect(()=>{if(!c){console.log(" [LayoutsTab] currentLayoutId  -   ");return}if(S.current.has(c)){console.log(` [LayoutsTab] Layout ${c.slice(0,8)}   - `);return}(async()=>{try{console.log(` [LayoutsTab] Layout ${c}   ... (fallback)`);const V=await(await Yt()).elements.getByLayout(c);console.log(` [LayoutsTab] IndexedDB ${V.length}  `);const H=$e.getState().elements,ee=$e.getState().setElements,Z=[...H.filter(K=>K.layout_id!==c),...V];ee(Z,{skipHistory:!0}),S.current.add(c),console.log(` [LayoutsTab] Layout ${c}  ${V.length}   (: ${Z.length})`)}catch(z){console.error("[LayoutsTab] Layout   :",z)}})()},[c]);const E=T.useMemo(()=>{if(console.log(` [layoutElements] : currentLayout=${g?.id?.slice(0,8)}, allElements=${x.length}`),!g)return[];const O=x.filter(z=>z.layout_id===g.id);return console.log(` [layoutElements]  : ${O.length} (${O.map(z=>z.tag).join(", ")})`),O},[x,g]),A=T.useMemo(()=>(console.log(` [layoutElementTree]  : ${E.length} `),ZX(E)),[E]),{expandedKeys:N,toggleKey:P,collapseAll:R,expandKey:D}=QX({selectedElementId:t,elements:E}),k=ve.useRef(null),L=ve.useRef(!1);T.useEffect(()=>{if(g?.id!==k.current&&g?.id&&(R(),console.log(` [LayoutsTab] Layout : ${k.current?.slice(0,8)}  ${g.id.slice(0,8)}`),k.current=g.id,L.current=!1),g&&E.length>0&&!L.current){const z=E.find(V=>V.order_num===0)||E.find(V=>V.tag==="body");z&&(console.log(` [LayoutsTab] body   + : ${z.id.slice(0,8)}`),D(z.id),e(z.id,z.props),r(z.id),L.current=!0)}},[g?.id,E,D,R,e,r]);const $=T.useCallback((O,z,V,H=0)=>{const ee=(Y,Z)=>Y.length===0?null:l.jsx(l.Fragment,{children:Y.map(K=>{const X=K.children&&K.children.length>0,ne=N.has(K.id),G={id:K.id,tag:K.tag,parent_id:K.parent_id||null,order_num:K.order_num,props:K.props,deleted:K.deleted,layout_id:g?.id||null,page_id:null,created_at:"",updated_at:""};return l.jsxs("div",{"data-depth":Z,"data-has-children":X,onClick:te=>{te.stopPropagation(),z(G)},className:"element",children:[l.jsxs("div",{className:`elementItem ${t===K.id?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:Z>0?`${Z*8}px`:"0px"}}),l.jsx("div",{className:"elementItemIcon",onClick:te=>{te.stopPropagation(),X&&P(K.id)},children:X?l.jsx(Ia,{color:se.color,strokeWidth:se.stroke,size:se.size,style:{transform:ne?"rotate(90deg)":"rotate(0deg)"}}):l.jsx(Mr,{color:se.color,strokeWidth:se.stroke,size:se.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:K.tag==="Slot"&&K.props?`Slot: ${K.props.name||"unnamed"}`:K.tag}),l.jsxs("div",{className:"elementItemActions",children:[l.jsx("button",{className:"iconButton","aria-label":"Settings",children:l.jsx(Iu,{color:se.color,strokeWidth:se.stroke,size:se.size})}),K.tag!=="body"&&l.jsx("button",{className:"iconButton","aria-label":`Delete ${K.tag}`,onClick:async te=>{te.stopPropagation(),await V(G)},children:l.jsx(Qo,{color:se.color,strokeWidth:se.stroke,size:se.size})})]})]}),ne&&X&&K.children&&ee(K.children,Z+1)]},K.id)})});return ee(O,H)},[N,P,t,g?.id]),B=T.useCallback(async O=>{console.log(` [LayoutsTab] Layout : ${O.name} (${O.id})`),console.log(` [LayoutsTab]  currentLayoutId: ${c}`);try{const V=await(await Yt()).elements.getByLayout(O.id);console.log(` [LayoutsTab] Layout ${O.id.slice(0,8)}  ${V.length}  `);const Y=[...$e.getState().elements.filter(Z=>Z.layout_id!==O.id),...V];w(Y,{skipHistory:!0}),S.current.add(O.id),u(O.id),v(O.id),console.log(" [LayoutsTab] Layout  ")}catch(z){console.error("Layout  :",z),u(O.id),v(O.id)}},[u,v,c,w]),q=T.useCallback(async O=>{try{await f(O.id);const z=o.filter(V=>V.id!==O.id);z.length>0?B(z[0]):(u(null),v(null))}catch(z){console.error("Layout  :",z)}},[f,o,B,u,v]),U=T.useCallback(async()=>{if(!s){console.error(" ID ");return}try{const O=await h({name:`Layout ${o.length+1}`,description:"",project_id:s});O&&B(O)}catch(O){console.error("Layout  :",O)}},[s,h,o.length,B]),J=T.useCallback(async O=>{await _(O.id),O.id===t&&(e(null),Ki.clearOverlay())},[_,t,e]);return l.jsxs("div",{className:"layouts-tab",role:"tabpanel",id:"tabpanel-layouts","aria-label":"Layouts",children:[l.jsxs("div",{className:"sidebar_layouts",children:[l.jsxs("div",{className:"panel-header",children:[l.jsx("h3",{className:"panel-title",children:"Layouts"}),l.jsx("div",{className:"header-actions",children:l.jsx("button",{className:"iconButton","aria-label":"Add Layout",onClick:U,children:l.jsx(oy,{color:se.color,strokeWidth:se.stroke,size:se.size})})})]}),l.jsx("div",{className:"elements",children:o.length===0?l.jsx("p",{className:"no_element",children:"No layouts available"}):o.map(O=>l.jsx("div",{className:"element",onClick:()=>B(O),children:l.jsxs("div",{className:`elementItem ${g?.id===O.id?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:"0px"}}),l.jsx("div",{className:"elementItemIcon",children:l.jsx(Mr,{color:se.color,strokeWidth:se.stroke,size:se.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:O.name}),l.jsx("div",{className:"elementItemActions",children:l.jsx("button",{className:"iconButton","aria-label":`Delete ${O.name}`,onClick:z=>{z.stopPropagation(),q(O)},children:l.jsx(Qo,{color:se.color,strokeWidth:se.stroke,size:se.size})})})]})},O.id))})]}),l.jsxs("div",{className:"sidebar_elements",children:[l.jsxs("div",{className:"panel-header",children:[l.jsx("h3",{className:"panel-title",children:"Layers"}),l.jsx("div",{className:"header-actions",children:l.jsx("button",{className:"iconButton","aria-label":"Collapse All",onClick:()=>R(),children:l.jsx(HB,{color:se.color,strokeWidth:se.stroke,size:se.size})})})]}),l.jsx("div",{className:"elements",children:g?E.length===0?l.jsx("p",{className:"no_element",children:"No elements in this layout"}):$(A,O=>{e(O.id,O.props),requestAnimationFrame(()=>n(O.id,O.props))},J):l.jsx("p",{className:"no_element",children:"Select a layout to view elements"})})]})]})}function cCe({pages:t,pageList:e,handleAddPage:n,addPageWithParams:r,renderTree:i,renderElementTree:a,fetchElements:s,elements:o,selectedElementId:c,setSelectedElement:u,sendElementSelectedMessage:h,requestAutoSelectAfterUpdate:f,collapseAllTreeItems:m,projectId:g,expandedKeys:v,onToggleExpand:x,selectedTab:_,onSelectTabElement:w}){const S=Eo(k=>k.mode),E=Eo(k=>k.setMode),A=Eo(k=>k.setCurrentPageId),N=Eo(k=>k.setCurrentLayoutId),P=S==="layout"?"layouts":"pages",R=T.useCallback(k=>{k==="pages"?(E("page"),N(null)):(E("layout"),A(null))},[E,A,N]),D=T.useMemo(()=>P==="pages"?l.jsx(oCe,{pages:t,pageList:e,handleAddPage:n,addPageWithParams:r,projectId:g,renderTree:i,renderElementTree:a,fetchElements:s,elements:o,selectedElementId:c,setSelectedElement:u,sendElementSelectedMessage:h,requestAutoSelectAfterUpdate:f,collapseAllTreeItems:m,expandedKeys:v,onToggleExpand:x,selectedTab:_,onSelectTabElement:w}):l.jsx(lCe,{selectedElementId:c,setSelectedElement:u,sendElementSelectedMessage:h,requestAutoSelectAfterUpdate:f,projectId:g}),[P,t,e,n,r,g,i,a,s,o,c,u,h,f,m,v,x,_,w]);return l.jsxs("div",{className:"nodes-panel",children:[l.jsx(sCe,{activeTab:P,onTabChange:R}),l.jsx("div",{className:"nodes-panel-content",children:D})]})}const Ga=[];for(let t=0;t<256;++t)Ga.push((t+256).toString(16).slice(1));function uCe(t,e=0){return(Ga[t[e+0]]+Ga[t[e+1]]+Ga[t[e+2]]+Ga[t[e+3]]+"-"+Ga[t[e+4]]+Ga[t[e+5]]+"-"+Ga[t[e+6]]+Ga[t[e+7]]+"-"+Ga[t[e+8]]+Ga[t[e+9]]+"-"+Ga[t[e+10]]+Ga[t[e+11]]+Ga[t[e+12]]+Ga[t[e+13]]+Ga[t[e+14]]+Ga[t[e+15]]).toLowerCase()}let $A;const dCe=new Uint8Array(16);function hCe(){if(!$A){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");$A=crypto.getRandomValues.bind(crypto)}return $A(dCe)}const fCe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Y6={randomUUID:fCe};function pCe(t,e,n){t=t||{};const r=t.random??t.rng?.()??hCe();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,uCe(r)}function mCe(t,e,n){return Y6.randomUUID&&!t?Y6.randomUUID():pCe(t)}class f2{batchDelay;onBatch;filter;deduplication;eventBuffer=[];timerId=null;startTime;stats={totalReceived:0,totalFiltered:0,totalBatched:0,batchCount:0};lastReportedStats={totalReceived:0,totalFiltered:0,totalBatched:0};constructor(e){this.batchDelay=e.batchDelay??100,this.onBatch=e.onBatch,this.filter=e.filter,this.deduplication=e.deduplication??!0,this.startTime=performance.now()}addEvent(e){this.stats.totalReceived++;const n={eventType:e.eventType||"*",table:e.table||"unknown",new:e.new,old:e.old,id:this.extractId(e),timestamp:performance.now(),raw:e};if(this.filter&&!this.filter(n)){this.stats.totalFiltered++,console.log(" [RealtimeBatcher] Event filtered:",n.table,n.id);return}if(this.deduplication&&this.isDuplicate(n)){this.stats.totalFiltered++,console.log(" [RealtimeBatcher] Duplicate event ignored:",n.table,n.id);return}this.eventBuffer.push(n),console.log(" [RealtimeBatcher] Event buffered:",n.table,n.id,`(${this.eventBuffer.length} in buffer)`),this.startTimer()}startTimer(){this.timerId===null&&(this.timerId=globalThis.setTimeout(()=>{this.flush()},this.batchDelay))}flush(){if(this.eventBuffer.length===0){this.timerId=null;return}const e=[...this.eventBuffer];this.eventBuffer=[],this.timerId=null,this.stats.totalBatched+=e.length,this.stats.batchCount++;const n=performance.now()-this.startTime;console.log(` [RealtimeBatcher] Flushing ${e.length} events (batch #${this.stats.batchCount}, elapsed: ${n.toFixed(2)}ms)`);const r=this.stats.totalReceived-this.lastReportedStats.totalReceived,i=this.stats.totalFiltered-this.lastReportedStats.totalFiltered,a=this.stats.totalBatched-this.lastReportedStats.totalBatched;Lv.recordBatcherEvents(r,i,a),this.lastReportedStats.totalReceived=this.stats.totalReceived,this.lastReportedStats.totalFiltered=this.stats.totalFiltered,this.lastReportedStats.totalBatched=this.stats.totalBatched,this.onBatch(e)}extractId(e){const n=e.new,r=e.old;return n?.id||r?.id}isDuplicate(e){return e.id?this.eventBuffer.some(n=>n.table===e.table&&n.id===e.id&&n.eventType===e.eventType):!1}forceFlush(){this.timerId!==null&&(globalThis.clearTimeout(this.timerId),this.timerId=null),this.flush()}getStats(){const e=performance.now()-this.startTime;return{...this.stats,averageBatchSize:this.stats.batchCount>0?this.stats.totalBatched/this.stats.batchCount:0,bufferSize:this.eventBuffer.length,elapsedTime:e}}resetStats(){this.stats={totalReceived:0,totalFiltered:0,totalBatched:0,batchCount:0},this.startTime=performance.now()}destroy(){this.timerId!==null&&(globalThis.clearTimeout(this.timerId),this.timerId=null),this.eventBuffer=[]}}const jl={tableFilter(t){return e=>t.includes(e.table)},eventTypeFilter(t){return e=>t.includes(e.eventType)},hasIdFilter(){return t=>t.id!==void 0},combineFilters(...t){return e=>t.every(n=>n(e))}};class vs extends Ky{static async getThemesByProject(e){try{return await(await Yt()).themes.getByProject(e)}catch(n){return console.error("[ThemeService] getThemesByProject failed:",n),[]}}static async getThemeById(e){try{return await(await Yt()).themes.getById(e)}catch(n){return console.error("[ThemeService] getThemeById failed:",n),null}}static async getActiveTheme(e){try{return await(await Yt()).themes.getActiveTheme(e)}catch(n){return console.error("[ThemeService] getActiveTheme failed:",n),null}}static async createTheme(e){const n=await Yt();let r=await n.projects.getById(e.project_id);if(!r){console.warn("[ThemeService] Project not found, creating temp project:",e.project_id);const a={id:e.project_id,name:"Temp Project",domain:"localhost",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};r=await n.projects.insert(a),console.log(" [IndexedDB] Temp project created:",r)}const i={id:ri.generateId(),project_id:e.project_id,name:e.name,parent_theme_id:e.parent_theme_id||null,status:e.status||"draft",version:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return await n.themes.insert(i),console.log(" [IndexedDB] Theme created:",i),i}static async updateTheme(e,n){try{const i=await(await Yt()).themes.update(e,n);return console.log("[ThemeService] Theme updated:",i),i}catch(r){throw console.error("[ThemeService] updateTheme failed:",r),r}}static async deleteTheme(e){try{const n=await Yt(),r=await this.getThemeById(e);if(!r)throw new Error("   ");if((await this.getThemesByProject(r.project_id)).length===1)throw new Error("    ");await n.themes.delete(e),console.log("[ThemeService] Theme deleted:",e)}catch(n){throw console.error("[ThemeService] deleteTheme failed:",n),n}}static async duplicateTheme(e,n,r=!1){const i=new vs,a=await this.getThemeById(e);if(!a)throw new Error("    ");const{data:s,error:o}=await i.supabase.rpc("duplicate_theme",{p_source_theme_id:e,p_new_name:n,p_inherit:r});if(o)throw console.error("[ThemeService] duplicateTheme failed:",o),new Error(`  : ${o.message}`);return i.invalidateCache(`themes:project:${a.project_id}`),console.log("[ThemeService] Theme duplicated:",s),s}static async activateTheme(e){try{const n=await Yt(),r=await this.getThemeById(e);if(!r)throw new Error("   ");const a=(await n.themes.getByProject(r.project_id)).filter(s=>s.status==="active");for(const s of a)await n.themes.update(s.id,{status:"draft"});await this.updateTheme(e,{status:"active"}),console.log("[ThemeService] Theme activated:",e)}catch(n){throw console.error("[ThemeService] activateTheme failed:",n),n}}static async createSnapshot(e){const n=new vs,r=await this.getThemeById(e);if(!r)throw new Error("   ");const{data:i,error:a}=await n.supabase.rpc("increment_design_theme_version",{p_theme_id:e});if(a)throw console.error("[ThemeService] createSnapshot failed:",a),new Error(`   : ${a.message}`);return n.invalidateCache(`theme:id:${e}`),n.invalidateCache(`themes:project:${r.project_id}`),console.log("[ThemeService] Snapshot created, new version:",i),i}static async getThemeHierarchy(e){const n=await this.getThemesByProject(e),r=new Map;for(const i of n){const a=i.parent_theme_id||"root";r.has(a)||r.set(a,[]),r.get(a).push(i)}return r}static subscribeToTheme(e,n){const r=new vs,i=new f2({batchDelay:100,onBatch:s=>{const o=s[s.length-1];n(o.raw),console.log(` [ThemeService] Batched ${s.length} theme events  processed 1`)},filter:jl.combineFilters(jl.tableFilter(["design_themes"]),jl.hasIdFilter()),deduplication:!0}),a=r.supabase.channel(`theme:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"design_themes",filter:`id=eq.${e}`},s=>{i.addEvent(s)}).subscribe();return()=>{i.destroy(),r.supabase.removeChannel(a)}}static subscribeToProjectThemes(e,n){const r=new vs,i=new f2({batchDelay:100,onBatch:s=>{s.forEach(o=>{n(o.raw)}),console.log(` [ThemeService] Batched ${s.length} project theme events`)},filter:jl.combineFilters(jl.tableFilter(["design_themes"]),jl.hasIdFilter()),deduplication:!0}),a=r.supabase.channel(`themes:project:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"design_themes",filter:`project_id=eq.${e}`},s=>{i.addEvent(s)}).subscribe();return()=>{i.destroy(),r.supabase.removeChannel(a)}}}class Ir extends Ky{static async getResolvedTokens(e){try{const{getDB:n}=await Lt(async()=>{const{getDB:s}=await Promise.resolve().then(()=>VD);return{getDB:s}},void 0),a=(await(await n()).designTokens.getByTheme(e)).map(s=>({...s,resolved_value:s.value,source_theme_id:e,is_inherited:!1}));return console.log("[TokenService] getResolvedTokens:",a.length,"tokens"),a}catch(n){return console.error("[TokenService] getResolvedTokens failed:",n),[]}}static async searchTokens(e,n,r=!0){const i=new Ir,a=`tokens:search:${e}:${n}:${r}`;return i.handleCachedApiCall(a,"searchTokens",async()=>{const{data:s,error:o}=await i.supabase.rpc("search_tokens",{p_theme_id:e,p_query:n,p_include_inherited:r});if(o)throw new Error(`  : ${o.message}`);return{data:s||[],error:null}},{staleTime:300*1e3})}static async getTokenById(e){const n=new Ir,r=`token:id:${e}`;try{return await n.handleCachedApiCall(r,"getTokenById",async()=>await n.supabase.from("design_tokens").select("*").eq("id",e).single(),{staleTime:300*1e3})}catch(i){return console.error("[TokenService] getTokenById failed:",i),null}}static async createToken(e){const n=new Ir,r=await n.handleApiCall("createToken",async()=>await n.supabase.from("design_tokens").insert({project_id:e.project_id,theme_id:e.theme_id,name:e.name,type:e.type,value:e.value,scope:e.scope,alias_of:e.alias_of||null,css_variable:e.css_variable}).select().single());return n.invalidateCache(`tokens:resolved:${e.theme_id}`),n.invalidateCache(`tokens:search:${e.theme_id}`),n.invalidateCache(`tokens:${e.scope}:${e.theme_id}`),n.invalidateCache(`tokens:type:${e.theme_id}:${e.type}`),console.log("[TokenService] Token created:",r),r}static async updateToken(e,n){const r=new Ir,i=await r.handleApiCall("updateToken",async()=>await r.supabase.from("design_tokens").update({...n,updated_at:new Date().toISOString()}).eq("id",e).select().single());return r.invalidateCache(`token:id:${e}`),r.invalidateCache(`tokens:resolved:${i.theme_id}`),r.invalidateCache(`tokens:search:${i.theme_id}`),r.invalidateCache(`tokens:${i.scope}:${i.theme_id}`),r.invalidateCache(`tokens:type:${i.theme_id}:${i.type}`),console.log("[TokenService] Token updated:",i),i}static async deleteToken(e){const n=new Ir,r=await this.getTokenById(e);if(!r)throw new Error("   ");await n.handleDeleteCall("deleteToken",async()=>await n.supabase.from("design_tokens").delete().eq("id",e)),n.invalidateCache(`token:id:${e}`),n.invalidateCache(`tokens:resolved:${r.theme_id}`),n.invalidateCache(`tokens:search:${r.theme_id}`),n.invalidateCache(`tokens:${r.scope}:${r.theme_id}`),n.invalidateCache(`tokens:type:${r.theme_id}:${r.type}`),console.log("[TokenService] Token deleted:",e)}static async bulkUpsertTokens(e){const{getDB:n}=await Lt(async()=>{const{getDB:s}=await Promise.resolve().then(()=>VD);return{getDB:s}},void 0),{ElementUtils:r}=await Lt(async()=>{const{ElementUtils:s}=await Promise.resolve().then(()=>Dwe);return{ElementUtils:s}},void 0),i=await n();let a=0;for(const s of e){const o=s.id||r.generateId(),c={id:o,project_id:s.project_id,theme_id:s.theme_id,name:s.name,type:s.type,value:s.value,scope:s.scope||"semantic",created_at:s.created_at||new Date().toISOString(),updated_at:new Date().toISOString()};await i.designTokens.getById(o)?await i.designTokens.update(o,c):await i.designTokens.insert(c),a++}return console.log(` [IndexedDB] Bulk upsert completed: ${a} tokens`),a}static async getRawTokens(e){const n=new Ir,r=`tokens:raw:${e}`;return n.handleCachedApiCall(r,"getRawTokens",async()=>await n.supabase.from("design_tokens").select("*").eq("theme_id",e).eq("scope","raw").order("name",{ascending:!0}),{staleTime:300*1e3})}static async getSemanticTokens(e){const n=new Ir,r=`tokens:semantic:${e}`;return n.handleCachedApiCall(r,"getSemanticTokens",async()=>await n.supabase.from("design_tokens").select("*").eq("theme_id",e).eq("scope","semantic").order("name",{ascending:!0}),{staleTime:300*1e3})}static async getTokensByType(e,n){const r=new Ir,i=`tokens:type:${e}:${n}`;return r.handleCachedApiCall(i,"getTokensByType",async()=>await r.supabase.from("design_tokens").select("*").eq("theme_id",e).eq("type",n).order("name",{ascending:!0}),{staleTime:300*1e3})}static async resolveAlias(e,n=new Set){if(n.has(e))return console.error("[TokenService] Circular alias detected:",e),null;n.add(e);const r=await this.getTokenById(e);return r?r.alias_of?this.resolveAlias(r.alias_of,n):r:null}static generateCSSVariable(e){return`--${e.replace(/\./g,"-")}`}static async isTokenNameUnique(e,n,r){let a=new Ir().supabase.from("design_tokens").select("id").eq("theme_id",e).eq("name",n);r&&(a=a.neq("id",r));const{data:s,error:o}=await a;return o?(console.error("[TokenService] isTokenNameUnique failed:",o),!1):s.length===0}static subscribeToTokenChanges(e,n){const r=new Ir,i=new f2({batchDelay:100,onBatch:s=>{const o=s[s.length-1];n(o.raw),console.log(` [TokenService] Batched ${s.length} token events  processed 1`)},filter:jl.combineFilters(jl.tableFilter(["design_tokens"]),jl.hasIdFilter()),deduplication:!0}),a=r.supabase.channel(`tokens:theme:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"design_tokens",filter:`theme_id=eq.${e}`},s=>{i.addEvent(s)}).subscribe();return()=>{i.destroy(),r.supabase.removeChannel(a)}}static subscribeToProjectTokens(e,n){const r=new Ir,i=new f2({batchDelay:100,onBatch:s=>{s.forEach(o=>{n(o.raw)}),console.log(` [TokenService] Batched ${s.length} project token events`)},filter:jl.combineFilters(jl.tableFilter(["design_tokens"]),jl.hasIdFilter()),deduplication:!0}),a=r.supabase.channel(`tokens:project:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"design_tokens",filter:`project_id=eq.${e}`},s=>{i.addEvent(s)}).subscribe();return()=>{i.destroy(),r.supabase.removeChannel(a)}}static async getTokenStats(e){const n=await this.getResolvedTokens(e),r={total:n.length,raw:n.filter(i=>i.scope==="raw").length,semantic:n.filter(i=>i.scope==="semantic").length,byType:{},inherited:n.filter(i=>i.is_inherited).length};for(const i of n)r.byType[i.type]=(r.byType[i.type]||0)+1;return r}static async exportTokensW3C(e){const n=await this.getResolvedTokens(e),r={};for(const i of n){const a=i.name.split(".");let s=r;for(let c=0;c<a.length-1;c++)s[a[c]]||(s[a[c]]={}),s=s[a[c]];const o=a[a.length-1];s[o]={$type:i.type,$value:i.value},i.alias_of&&(s[o].$description=`Alias of ${i.alias_of}`)}return r}static async importTokensW3C(e,n,r){const i=[],a=(s,o=[])=>{for(const[c,u]of Object.entries(s))if(u&&typeof u=="object")if("$type"in u&&"$value"in u){const h=u;i.push({project_id:e,theme_id:n,name:[...o,c].join("."),type:h.$type,value:h.$value,scope:"raw",css_variable:this.generateCSSVariable([...o,c].join("."))})}else a(u,[...o,c])};return a(r),this.bulkUpsertTokens(i)}}function eY(t){const{h:e,s:n,l:r,a:i}=t,a=e/360,s=n/100,o=r/100;let c,u,h;if(s===0)c=u=h=o;else{const f=(v,x,_)=>(_<0&&(_+=1),_>1&&(_-=1),_<.16666666666666666?v+(x-v)*6*_:_<.5?x:_<.6666666666666666?v+(x-v)*(.6666666666666666-_)*6:v),m=o<.5?o*(1+s):o+s-o*s,g=2*o-m;c=f(g,m,a+1/3),u=f(g,m,a),h=f(g,m,a-1/3)}return{r:Math.round(c*255),g:Math.round(u*255),b:Math.round(h*255),a:i}}function jk(t){const{r:e,g:n,b:r,a:i}=t,a=e/255,s=n/255,o=r/255,c=Math.max(a,s,o),u=Math.min(a,s,o);let h=0,f=0;const m=(c+u)/2;if(c!==u){const g=c-u;switch(f=m>.5?g/(2-c-u):g/(c+u),c){case a:h=((s-o)/g+(s<o?6:0))/6;break;case s:h=((o-a)/g+2)/6;break;case o:h=((a-s)/g+4)/6;break}}return{h:Math.round(h*360),s:Math.round(f*100),l:Math.round(m*100),a:i}}function gCe(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),a:1}:null}function vCe(t){const e=n=>{const r=Math.round(n).toString(16);return r.length===1?"0"+r:r};return`#${e(t.r)}${e(t.g)}${e(t.b)}`}function yCe(t){const e=eY(t);return vCe(e)}function b3(t){const e=gCe(t);return e?jk(e):null}function x3(t){return`hsla(${t.h}, ${t.s}%, ${t.l}%, ${t.a})`}function jA(t){return`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`}function bCe(t){const e=100-t.l,n=Math.max(0,t.s-15);return{h:t.h,s:n,l:e,a:t.a}}function ut(t,e,n){function r(o,c){if(o._zod||Object.defineProperty(o,"_zod",{value:{def:c,constr:s,traits:new Set},enumerable:!1}),o._zod.traits.has(t))return;o._zod.traits.add(t),e(o,c);const u=s.prototype,h=Object.keys(u);for(let f=0;f<h.length;f++){const m=h[f];m in o||(o[m]=u[m].bind(o))}}const i=n?.Parent??Object;class a extends i{}Object.defineProperty(a,"name",{value:t});function s(o){var c;const u=n?.Parent?new a:this;r(u,o),(c=u._zod).deferred??(c.deferred=[]);for(const h of u._zod.deferred)h();return u}return Object.defineProperty(s,"init",{value:r}),Object.defineProperty(s,Symbol.hasInstance,{value:o=>n?.Parent&&o instanceof n.Parent?!0:o?._zod?.traits?.has(t)}),Object.defineProperty(s,"name",{value:t}),s}class ny extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class tY extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const nY={};function dg(t){return nY}function xCe(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,i])=>e.indexOf(+r)===-1).map(([r,i])=>i)}function Lk(t,e){return typeof e=="bigint"?e.toString():e}function YI(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function ZI(t){return t==null}function JI(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function _Ce(t,e){const n=(t.toString().split(".")[1]||"").length,r=e.toString();let i=(r.split(".")[1]||"").length;if(i===0&&/\d?e-\d?/.test(r)){const c=r.match(/\d?e-(\d?)/);c?.[1]&&(i=Number.parseInt(c[1]))}const a=n>i?n:i,s=Number.parseInt(t.toFixed(a).replace(".","")),o=Number.parseInt(e.toFixed(a).replace(".",""));return s%o/10**a}const Z6=Symbol("evaluating");function ii(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==Z6)return r===void 0&&(r=Z6,r=n()),r},set(i){Object.defineProperty(t,e,{value:i})},configurable:!0})}function Pg(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Ng(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function J6(t){return JSON.stringify(t)}function wCe(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const rY="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function p2(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const SCe=YI(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function T_(t){if(p2(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(p2(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function iY(t){return T_(t)?{...t}:Array.isArray(t)?[...t]:t}const ECe=new Set(["string","number","symbol"]);function AT(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Jf(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(r._zod.parent=t),r}function an(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function CCe(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const TCe={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function MCe(t,e){const n=t._zod.def,r=Ng(t._zod.def,{get shape(){const i={};for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&(i[a]=n.shape[a])}return Pg(this,"shape",i),i},checks:[]});return Jf(t,r)}function ACe(t,e){const n=t._zod.def,r=Ng(t._zod.def,{get shape(){const i={...t._zod.def.shape};for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&delete i[a]}return Pg(this,"shape",i),i},checks:[]});return Jf(t,r)}function PCe(t,e){if(!T_(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const i=Ng(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return Pg(this,"shape",a),a},checks:[]});return Jf(t,i)}function NCe(t,e){if(!T_(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...t._zod.def,get shape(){const r={...t._zod.def.shape,...e};return Pg(this,"shape",r),r},checks:t._zod.def.checks};return Jf(t,n)}function DCe(t,e){const n=Ng(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return Pg(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return Jf(t,n)}function kCe(t,e,n){const r=Ng(e._zod.def,{get shape(){const i=e._zod.def.shape,a={...i};if(n)for(const s in n){if(!(s in i))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(a[s]=t?new t({type:"optional",innerType:i[s]}):i[s])}else for(const s in i)a[s]=t?new t({type:"optional",innerType:i[s]}):i[s];return Pg(this,"shape",a),a},checks:[]});return Jf(e,r)}function RCe(t,e,n){const r=Ng(e._zod.def,{get shape(){const i=e._zod.def.shape,a={...i};if(n)for(const s in n){if(!(s in a))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(a[s]=new t({type:"nonoptional",innerType:i[s]}))}else for(const s in i)a[s]=new t({type:"nonoptional",innerType:i[s]});return Pg(this,"shape",a),a},checks:[]});return Jf(e,r)}function Vv(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function aY(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function LC(t){return typeof t=="string"?t:t?.message}function hg(t,e,n){const r={...t,path:t.path??[]};if(!t.message){const i=LC(t.inst?._zod.def?.error?.(t))??LC(e?.error?.(t))??LC(n.customError?.(t))??LC(n.localeError?.(t))??"Invalid input";r.message=i}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function QI(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function M_(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const sY=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Lk,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},oY=ut("$ZodError",sY),lY=ut("$ZodError",sY,{Parent:Error});function ICe(t,e=n=>n.message){const n={},r=[];for(const i of t.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}function $Ce(t,e=n=>n.message){const n={_errors:[]},r=i=>{for(const a of i.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(s=>r({issues:s}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let s=n,o=0;for(;o<a.path.length;){const c=a.path[o];o===a.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(e(a))):s[c]=s[c]||{_errors:[]},s=s[c],o++}}};return r(t),n}const e$=t=>(e,n,r,i)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},s=e._zod.run({value:n,issues:[]},a);if(s instanceof Promise)throw new ny;if(s.issues.length){const o=new(i?.Err??t)(s.issues.map(c=>hg(c,a,dg())));throw rY(o,i?.callee),o}return s.value},t$=t=>async(e,n,r,i)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let s=e._zod.run({value:n,issues:[]},a);if(s instanceof Promise&&(s=await s),s.issues.length){const o=new(i?.Err??t)(s.issues.map(c=>hg(c,a,dg())));throw rY(o,i?.callee),o}return s.value},PT=t=>(e,n,r)=>{const i=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},i);if(a instanceof Promise)throw new ny;return a.issues.length?{success:!1,error:new(t??oY)(a.issues.map(s=>hg(s,i,dg())))}:{success:!0,data:a.value}},jCe=PT(lY),NT=t=>async(e,n,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},i);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(s=>hg(s,i,dg())))}:{success:!0,data:a.value}},LCe=NT(lY),OCe=t=>(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return e$(t)(e,n,i)},FCe=t=>(e,n,r)=>e$(t)(e,n,r),BCe=t=>async(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return t$(t)(e,n,i)},zCe=t=>async(e,n,r)=>t$(t)(e,n,r),UCe=t=>(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return PT(t)(e,n,i)},VCe=t=>(e,n,r)=>PT(t)(e,n,r),HCe=t=>async(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return NT(t)(e,n,i)},GCe=t=>async(e,n,r)=>NT(t)(e,n,r),WCe=/^[cC][^\s-]{8,}$/,qCe=/^[0-9a-z]+$/,KCe=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,XCe=/^[0-9a-vA-V]{20}$/,YCe=/^[A-Za-z0-9]{27}$/,ZCe=/^[a-zA-Z0-9_-]{21}$/,JCe=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,QCe=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Q6=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,e3e=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,t3e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function n3e(){return new RegExp(t3e,"u")}const r3e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,i3e=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,a3e=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,s3e=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,o3e=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,cY=/^[A-Za-z0-9_-]*$/,l3e=/^\+(?:[0-9]){6,14}[0-9]$/,uY="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",c3e=new RegExp(`^${uY}$`);function dY(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function u3e(t){return new RegExp(`^${dY(t)}$`)}function d3e(t){const e=dY({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${uY}T(?:${r})$`)}const h3e=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},f3e=/^-?\d+$/,p3e=/^-?\d+(?:\.\d+)?/,m3e=/^(?:true|false)$/i,g3e=/^[^A-Z]*$/,v3e=/^[^a-z]*$/,ko=ut("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),hY={number:"number",bigint:"bigint",object:"date"},fY=ut("$ZodCheckLessThan",(t,e)=>{ko.init(t,e);const n=hY[typeof e.value];t._zod.onattach.push(r=>{const i=r._zod.bag,a=(e.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<a&&(e.inclusive?i.maximum=e.value:i.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),pY=ut("$ZodCheckGreaterThan",(t,e)=>{ko.init(t,e);const n=hY[typeof e.value];t._zod.onattach.push(r=>{const i=r._zod.bag,a=(e.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>a&&(e.inclusive?i.minimum=e.value:i.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),y3e=ut("$ZodCheckMultipleOf",(t,e)=>{ko.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):_Ce(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),b3e=ut("$ZodCheckNumberFormat",(t,e)=>{ko.init(t,e),e.format=e.format||"float64";const n=e.format?.includes("int"),r=n?"int":"number",[i,a]=TCe[e.format];t._zod.onattach.push(s=>{const o=s._zod.bag;o.format=e.format,o.minimum=i,o.maximum=a,n&&(o.pattern=f3e)}),t._zod.check=s=>{const o=s.value;if(n){if(!Number.isInteger(o)){s.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:o,inst:t});return}if(!Number.isSafeInteger(o)){o>0?s.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):s.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}o<i&&s.issues.push({origin:"number",input:o,code:"too_small",minimum:i,inclusive:!0,inst:t,continue:!e.abort}),o>a&&s.issues.push({origin:"number",input:o,code:"too_big",maximum:a,inst:t})}}),x3e=ut("$ZodCheckMaxLength",(t,e)=>{var n;ko.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!ZI(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<i&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const i=r.value;if(i.length<=e.maximum)return;const s=QI(i);r.issues.push({origin:s,code:"too_big",maximum:e.maximum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),_3e=ut("$ZodCheckMinLength",(t,e)=>{var n;ko.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!ZI(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>i&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const i=r.value;if(i.length>=e.minimum)return;const s=QI(i);r.issues.push({origin:s,code:"too_small",minimum:e.minimum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),w3e=ut("$ZodCheckLengthEquals",(t,e)=>{var n;ko.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!ZI(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag;i.minimum=e.length,i.maximum=e.length,i.length=e.length}),t._zod.check=r=>{const i=r.value,a=i.length;if(a===e.length)return;const s=QI(i),o=a>e.length;r.issues.push({origin:s,...o?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),DT=ut("$ZodCheckStringFormat",(t,e)=>{var n,r;ko.init(t,e),t._zod.onattach.push(i=>{const a=i._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=i=>{e.pattern.lastIndex=0,!e.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:e.format,input:i.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),S3e=ut("$ZodCheckRegex",(t,e)=>{DT.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),E3e=ut("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=g3e),DT.init(t,e)}),C3e=ut("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=v3e),DT.init(t,e)}),T3e=ut("$ZodCheckIncludes",(t,e)=>{ko.init(t,e);const n=AT(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(i=>{const a=i._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=i=>{i.value.includes(e.includes,e.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:i.value,inst:t,continue:!e.abort})}}),M3e=ut("$ZodCheckStartsWith",(t,e)=>{ko.init(t,e);const n=new RegExp(`^${AT(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),A3e=ut("$ZodCheckEndsWith",(t,e)=>{ko.init(t,e);const n=new RegExp(`.*${AT(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),P3e=ut("$ZodCheckOverwrite",(t,e)=>{ko.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class N3e{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(s=>s),i=Math.min(...r.map(s=>s.length-s.trimStart().length)),a=r.map(s=>s.slice(i)).map(s=>" ".repeat(this.indent*2)+s);for(const s of a)this.content.push(s)}compile(){const e=Function,n=this?.args,i=[...(this?.content??[""]).map(a=>`  ${a}`)];return new e(...n,i.join(`
`))}}const D3e={major:4,minor:1,patch:13},ea=ut("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=D3e;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const i of r)for(const a of i._zod.onattach)a(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const i=(s,o,c)=>{let u=Vv(s),h;for(const f of o){if(f._zod.def.when){if(!f._zod.def.when(s))continue}else if(u)continue;const m=s.issues.length,g=f._zod.check(s);if(g instanceof Promise&&c?.async===!1)throw new ny;if(h||g instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await g,s.issues.length!==m&&(u||(u=Vv(s,m)))});else{if(s.issues.length===m)continue;u||(u=Vv(s,m))}}return h?h.then(()=>s):s},a=(s,o,c)=>{if(Vv(s))return s.aborted=!0,s;const u=i(o,r,c);if(u instanceof Promise){if(c.async===!1)throw new ny;return u.then(h=>t._zod.parse(h,c))}return t._zod.parse(u,c)};t._zod.run=(s,o)=>{if(o.skipChecks)return t._zod.parse(s,o);if(o.direction==="backward"){const u=t._zod.parse({value:s.value,issues:[]},{...o,skipChecks:!0});return u instanceof Promise?u.then(h=>a(h,s,o)):a(u,s,o)}const c=t._zod.parse(s,o);if(c instanceof Promise){if(o.async===!1)throw new ny;return c.then(u=>i(u,r,o))}return i(c,r,o)}}t["~standard"]={validate:i=>{try{const a=jCe(t,i);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return LCe(t,i).then(s=>s.success?{value:s.data}:{issues:s.error?.issues})}},vendor:"zod",version:1}}),n$=ut("$ZodString",(t,e)=>{ea.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??h3e(t._zod.bag),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),Ei=ut("$ZodStringFormat",(t,e)=>{DT.init(t,e),n$.init(t,e)}),k3e=ut("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=QCe),Ei.init(t,e)}),R3e=ut("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Q6(r))}else e.pattern??(e.pattern=Q6());Ei.init(t,e)}),I3e=ut("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=e3e),Ei.init(t,e)}),$3e=ut("$ZodURL",(t,e)=>{Ei.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),i=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(i.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=i.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),j3e=ut("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=n3e()),Ei.init(t,e)}),L3e=ut("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=ZCe),Ei.init(t,e)}),O3e=ut("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=WCe),Ei.init(t,e)}),F3e=ut("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=qCe),Ei.init(t,e)}),B3e=ut("$ZodULID",(t,e)=>{e.pattern??(e.pattern=KCe),Ei.init(t,e)}),z3e=ut("$ZodXID",(t,e)=>{e.pattern??(e.pattern=XCe),Ei.init(t,e)}),U3e=ut("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=YCe),Ei.init(t,e)}),V3e=ut("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=d3e(e)),Ei.init(t,e)}),H3e=ut("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=c3e),Ei.init(t,e)}),G3e=ut("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=u3e(e)),Ei.init(t,e)}),W3e=ut("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=JCe),Ei.init(t,e)}),q3e=ut("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=r3e),Ei.init(t,e),t._zod.bag.format="ipv4"}),K3e=ut("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=i3e),Ei.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),X3e=ut("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=a3e),Ei.init(t,e)}),Y3e=ut("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=s3e),Ei.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[i,a]=r;if(!a)throw new Error;const s=Number(a);if(`${s}`!==a)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${i}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function mY(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const Z3e=ut("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=o3e),Ei.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{mY(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function J3e(t){if(!cY.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return mY(n)}const Q3e=ut("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=cY),Ei.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{J3e(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),e2e=ut("$ZodE164",(t,e)=>{e.pattern??(e.pattern=l3e),Ei.init(t,e)});function t2e(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const i=JSON.parse(atob(r));return!("typ"in i&&i?.typ!=="JWT"||!i.alg||e&&(!("alg"in i)||i.alg!==e))}catch{return!1}}const n2e=ut("$ZodJWT",(t,e)=>{Ei.init(t,e),t._zod.check=n=>{t2e(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),gY=ut("$ZodNumber",(t,e)=>{ea.init(t,e),t._zod.pattern=t._zod.bag.pattern??p3e,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const i=n.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return n;const a=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:i,inst:t,...a?{received:a}:{}}),n}}),r2e=ut("$ZodNumberFormat",(t,e)=>{b3e.init(t,e),gY.init(t,e)}),i2e=ut("$ZodBoolean",(t,e)=>{ea.init(t,e),t._zod.pattern=m3e,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=!!n.value}catch{}const i=n.value;return typeof i=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:t}),n}}),a2e=ut("$ZodUnknown",(t,e)=>{ea.init(t,e),t._zod.parse=n=>n}),s2e=ut("$ZodNever",(t,e)=>{ea.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function eO(t,e,n){t.issues.length&&e.issues.push(...aY(n,t.issues)),e.value[n]=t.value}const o2e=ut("$ZodArray",(t,e)=>{ea.init(t,e),t._zod.parse=(n,r)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:t}),n;n.value=Array(i.length);const a=[];for(let s=0;s<i.length;s++){const o=i[s],c=e.element._zod.run({value:o,issues:[]},r);c instanceof Promise?a.push(c.then(u=>eO(u,n,s))):eO(c,n,s)}return a.length?Promise.all(a).then(()=>n):n}});function m2(t,e,n,r){t.issues.length&&e.issues.push(...aY(n,t.issues)),t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function vY(t){const e=Object.keys(t.shape);for(const r of e)if(!t.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=CCe(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function yY(t,e,n,r,i,a){const s=[],o=i.keySet,c=i.catchall._zod,u=c.def.type;for(const h in e){if(o.has(h))continue;if(u==="never"){s.push(h);continue}const f=c.run({value:e[h],issues:[]},r);f instanceof Promise?t.push(f.then(m=>m2(m,n,h,e))):m2(f,n,h,e)}return s.length&&n.issues.push({code:"unrecognized_keys",keys:s,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const l2e=ut("$ZodObject",(t,e)=>{if(ea.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const o=e.shape;Object.defineProperty(e,"shape",{get:()=>{const c={...o};return Object.defineProperty(e,"shape",{value:c}),c}})}const r=YI(()=>vY(e));ii(t._zod,"propValues",()=>{const o=e.shape,c={};for(const u in o){const h=o[u]._zod;if(h.values){c[u]??(c[u]=new Set);for(const f of h.values)c[u].add(f)}}return c});const i=p2,a=e.catchall;let s;t._zod.parse=(o,c)=>{s??(s=r.value);const u=o.value;if(!i(u))return o.issues.push({expected:"object",code:"invalid_type",input:u,inst:t}),o;o.value={};const h=[],f=s.shape;for(const m of s.keys){const v=f[m]._zod.run({value:u[m],issues:[]},c);v instanceof Promise?h.push(v.then(x=>m2(x,o,m,u))):m2(v,o,m,u)}return a?yY(h,u,o,c,r.value,t):h.length?Promise.all(h).then(()=>o):o}}),c2e=ut("$ZodObjectJIT",(t,e)=>{l2e.init(t,e);const n=t._zod.parse,r=YI(()=>vY(e)),i=m=>{const g=new N3e(["shape","payload","ctx"]),v=r.value,x=E=>{const A=J6(E);return`shape[${A}]._zod.run({ value: input[${A}], issues: [] }, ctx)`};g.write("const input = payload.value;");const _=Object.create(null);let w=0;for(const E of v.keys)_[E]=`key_${w++}`;g.write("const newResult = {};");for(const E of v.keys){const A=_[E],N=J6(E);g.write(`const ${A} = ${x(E)};`),g.write(`
        if (${A}.issues.length) {
          payload.issues = payload.issues.concat(${A}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${N}, ...iss.path] : [${N}]
          })));
        }
        
        
        if (${A}.value === undefined) {
          if (${N} in input) {
            newResult[${N}] = undefined;
          }
        } else {
          newResult[${N}] = ${A}.value;
        }
        
      `)}g.write("payload.value = newResult;"),g.write("return payload;");const S=g.compile();return(E,A)=>S(m,E,A)};let a;const s=p2,o=!nY.jitless,u=o&&SCe.value,h=e.catchall;let f;t._zod.parse=(m,g)=>{f??(f=r.value);const v=m.value;return s(v)?o&&u&&g?.async===!1&&g.jitless!==!0?(a||(a=i(e.shape)),m=a(m,g),h?yY([],v,m,g,f,t):m):n(m,g):(m.issues.push({expected:"object",code:"invalid_type",input:v,inst:t}),m)}});function tO(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const i=t.filter(a=>!Vv(a));return i.length===1?(e.value=i[0].value,i[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(s=>hg(s,r,dg())))}),e)}const u2e=ut("$ZodUnion",(t,e)=>{ea.init(t,e),ii(t._zod,"optin",()=>e.options.some(i=>i._zod.optin==="optional")?"optional":void 0),ii(t._zod,"optout",()=>e.options.some(i=>i._zod.optout==="optional")?"optional":void 0),ii(t._zod,"values",()=>{if(e.options.every(i=>i._zod.values))return new Set(e.options.flatMap(i=>Array.from(i._zod.values)))}),ii(t._zod,"pattern",()=>{if(e.options.every(i=>i._zod.pattern)){const i=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${i.map(a=>JI(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(i,a)=>{if(n)return r(i,a);let s=!1;const o=[];for(const c of e.options){const u=c._zod.run({value:i.value,issues:[]},a);if(u instanceof Promise)o.push(u),s=!0;else{if(u.issues.length===0)return u;o.push(u)}}return s?Promise.all(o).then(c=>tO(c,i,t,a)):tO(o,i,t,a)}}),d2e=ut("$ZodIntersection",(t,e)=>{ea.init(t,e),t._zod.parse=(n,r)=>{const i=n.value,a=e.left._zod.run({value:i,issues:[]},r),s=e.right._zod.run({value:i,issues:[]},r);return a instanceof Promise||s instanceof Promise?Promise.all([a,s]).then(([c,u])=>nO(n,c,u)):nO(n,a,s)}});function Ok(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(T_(t)&&T_(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),i={...t,...e};for(const a of r){const s=Ok(t[a],e[a]);if(!s.valid)return{valid:!1,mergeErrorPath:[a,...s.mergeErrorPath]};i[a]=s.data}return{valid:!0,data:i}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const i=t[r],a=e[r],s=Ok(i,a);if(!s.valid)return{valid:!1,mergeErrorPath:[r,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function nO(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),Vv(t))return t;const r=Ok(e.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const h2e=ut("$ZodEnum",(t,e)=>{ea.init(t,e);const n=xCe(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(i=>ECe.has(typeof i)).map(i=>typeof i=="string"?AT(i):i.toString()).join("|")})$`),t._zod.parse=(i,a)=>{const s=i.value;return r.has(s)||i.issues.push({code:"invalid_value",values:n,input:s,inst:t}),i}}),f2e=ut("$ZodTransform",(t,e)=>{ea.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new tY(t.constructor.name);const i=e.transform(n.value,n);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(s=>(n.value=s,n));if(i instanceof Promise)throw new ny;return n.value=i,n}});function rO(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const p2e=ut("$ZodOptional",(t,e)=>{ea.init(t,e),t._zod.optin="optional",t._zod.optout="optional",ii(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),ii(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${JI(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(a=>rO(a,n.value)):rO(i,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),m2e=ut("$ZodNullable",(t,e)=>{ea.init(t,e),ii(t._zod,"optin",()=>e.innerType._zod.optin),ii(t._zod,"optout",()=>e.innerType._zod.optout),ii(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${JI(n.source)}|null)$`):void 0}),ii(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),g2e=ut("$ZodDefault",(t,e)=>{ea.init(t,e),t._zod.optin="optional",ii(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(a=>iO(a,e)):iO(i,e)}});function iO(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const v2e=ut("$ZodPrefault",(t,e)=>{ea.init(t,e),t._zod.optin="optional",ii(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),y2e=ut("$ZodNonOptional",(t,e)=>{ea.init(t,e),ii(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(a=>aO(a,t)):aO(i,t)}});function aO(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const b2e=ut("$ZodCatch",(t,e)=>{ea.init(t,e),ii(t._zod,"optin",()=>e.innerType._zod.optin),ii(t._zod,"optout",()=>e.innerType._zod.optout),ii(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(s=>hg(s,r,dg()))},input:n.value}),n.issues=[]),n)):(n.value=i.value,i.issues.length&&(n.value=e.catchValue({...n,error:{issues:i.issues.map(a=>hg(a,r,dg()))},input:n.value}),n.issues=[]),n)}}),x2e=ut("$ZodPipe",(t,e)=>{ea.init(t,e),ii(t._zod,"values",()=>e.in._zod.values),ii(t._zod,"optin",()=>e.in._zod.optin),ii(t._zod,"optout",()=>e.out._zod.optout),ii(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(s=>OC(s,e.in,r)):OC(a,e.in,r)}const i=e.in._zod.run(n,r);return i instanceof Promise?i.then(a=>OC(a,e.out,r)):OC(i,e.out,r)}});function OC(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const _2e=ut("$ZodReadonly",(t,e)=>{ea.init(t,e),ii(t._zod,"propValues",()=>e.innerType._zod.propValues),ii(t._zod,"values",()=>e.innerType._zod.values),ii(t._zod,"optin",()=>e.innerType?._zod?.optin),ii(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(sO):sO(i)}});function sO(t){return t.value=Object.freeze(t.value),t}const w2e=ut("$ZodCustom",(t,e)=>{ko.init(t,e),ea.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,i=e.fn(r);if(i instanceof Promise)return i.then(a=>oO(a,n,r,t));oO(i,n,r,t)}});function oO(t,e,n,r){if(!t){const i={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(i.params=r._zod.def.params),e.issues.push(M_(i))}}var lO;class S2e{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const i={...r,...this._map.get(e)};return Object.keys(i).length?i:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function E2e(){return new S2e}(lO=globalThis).__zod_globalRegistry??(lO.__zod_globalRegistry=E2e());const FC=globalThis.__zod_globalRegistry;function C2e(t,e){return new t({type:"string",...an(e)})}function T2e(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...an(e)})}function cO(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...an(e)})}function M2e(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...an(e)})}function A2e(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...an(e)})}function P2e(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...an(e)})}function N2e(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...an(e)})}function D2e(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...an(e)})}function k2e(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...an(e)})}function R2e(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...an(e)})}function I2e(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...an(e)})}function $2e(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...an(e)})}function j2e(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...an(e)})}function L2e(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...an(e)})}function O2e(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...an(e)})}function F2e(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...an(e)})}function B2e(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...an(e)})}function z2e(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...an(e)})}function U2e(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...an(e)})}function V2e(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...an(e)})}function H2e(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...an(e)})}function G2e(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...an(e)})}function W2e(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...an(e)})}function q2e(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...an(e)})}function K2e(t,e){return new t({type:"string",format:"date",check:"string_format",...an(e)})}function X2e(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...an(e)})}function Y2e(t,e){return new t({type:"string",format:"duration",check:"string_format",...an(e)})}function Z2e(t,e){return new t({type:"number",checks:[],...an(e)})}function J2e(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...an(e)})}function Q2e(t,e){return new t({type:"boolean",...an(e)})}function eTe(t){return new t({type:"unknown"})}function tTe(t,e){return new t({type:"never",...an(e)})}function uO(t,e){return new fY({check:"less_than",...an(e),value:t,inclusive:!1})}function LA(t,e){return new fY({check:"less_than",...an(e),value:t,inclusive:!0})}function dO(t,e){return new pY({check:"greater_than",...an(e),value:t,inclusive:!1})}function OA(t,e){return new pY({check:"greater_than",...an(e),value:t,inclusive:!0})}function hO(t,e){return new y3e({check:"multiple_of",...an(e),value:t})}function bY(t,e){return new x3e({check:"max_length",...an(e),maximum:t})}function g2(t,e){return new _3e({check:"min_length",...an(e),minimum:t})}function xY(t,e){return new w3e({check:"length_equals",...an(e),length:t})}function nTe(t,e){return new S3e({check:"string_format",format:"regex",...an(e),pattern:t})}function rTe(t){return new E3e({check:"string_format",format:"lowercase",...an(t)})}function iTe(t){return new C3e({check:"string_format",format:"uppercase",...an(t)})}function aTe(t,e){return new T3e({check:"string_format",format:"includes",...an(e),includes:t})}function sTe(t,e){return new M3e({check:"string_format",format:"starts_with",...an(e),prefix:t})}function oTe(t,e){return new A3e({check:"string_format",format:"ends_with",...an(e),suffix:t})}function Yy(t){return new P3e({check:"overwrite",tx:t})}function lTe(t){return Yy(e=>e.normalize(t))}function cTe(){return Yy(t=>t.trim())}function uTe(){return Yy(t=>t.toLowerCase())}function dTe(){return Yy(t=>t.toUpperCase())}function hTe(){return Yy(t=>wCe(t))}function fTe(t,e,n){return new t({type:"array",element:e,...an(n)})}function pTe(t,e,n){return new t({type:"custom",check:"custom",fn:e,...an(n)})}function mTe(t){const e=gTe(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(M_(r,n.value,e._zod.def));else{const i=r;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),i.continue??(i.continue=!e._zod.def.abort),n.issues.push(M_(i))}},t(n.value,n)));return e}function gTe(t,e){const n=new ko({check:"custom",...an(e)});return n._zod.check=t,n}const vTe=ut("ZodISODateTime",(t,e)=>{V3e.init(t,e),Di.init(t,e)});function yTe(t){return q2e(vTe,t)}const bTe=ut("ZodISODate",(t,e)=>{H3e.init(t,e),Di.init(t,e)});function xTe(t){return K2e(bTe,t)}const _Te=ut("ZodISOTime",(t,e)=>{G3e.init(t,e),Di.init(t,e)});function wTe(t){return X2e(_Te,t)}const STe=ut("ZodISODuration",(t,e)=>{W3e.init(t,e),Di.init(t,e)});function ETe(t){return Y2e(STe,t)}const CTe=(t,e)=>{oY.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>$Ce(t,n)},flatten:{value:n=>ICe(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,Lk,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,Lk,2)}},isEmpty:{get(){return t.issues.length===0}}})},Ql=ut("ZodError",CTe,{Parent:Error}),TTe=e$(Ql),MTe=t$(Ql),ATe=PT(Ql),PTe=NT(Ql),NTe=OCe(Ql),DTe=FCe(Ql),kTe=BCe(Ql),RTe=zCe(Ql),ITe=UCe(Ql),$Te=VCe(Ql),jTe=HCe(Ql),LTe=GCe(Ql),ua=ut("ZodType",(t,e)=>(ea.init(t,e),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(Ng(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),t.clone=(n,r)=>Jf(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>TTe(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>ATe(t,n,r),t.parseAsync=async(n,r)=>MTe(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>PTe(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>NTe(t,n,r),t.decode=(n,r)=>DTe(t,n,r),t.encodeAsync=async(n,r)=>kTe(t,n,r),t.decodeAsync=async(n,r)=>RTe(t,n,r),t.safeEncode=(n,r)=>ITe(t,n,r),t.safeDecode=(n,r)=>$Te(t,n,r),t.safeEncodeAsync=async(n,r)=>jTe(t,n,r),t.safeDecodeAsync=async(n,r)=>LTe(t,n,r),t.refine=(n,r)=>t.check(AMe(n,r)),t.superRefine=n=>t.check(PMe(n)),t.overwrite=n=>t.check(Yy(n)),t.optional=()=>gO(t),t.nullable=()=>vO(t),t.nullish=()=>gO(vO(t)),t.nonoptional=n=>_Me(t,n),t.array=()=>cMe(t),t.or=n=>SY([t,n]),t.and=n=>fMe(t,n),t.transform=n=>yO(t,mMe(n)),t.default=n=>yMe(t,n),t.prefault=n=>xMe(t,n),t.catch=n=>SMe(t,n),t.pipe=n=>yO(t,n),t.readonly=()=>TMe(t),t.describe=n=>{const r=t.clone();return FC.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){return FC.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return FC.get(t);const r=t.clone();return FC.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),_Y=ut("_ZodString",(t,e)=>{n$.init(t,e),ua.init(t,e);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(nTe(...r)),t.includes=(...r)=>t.check(aTe(...r)),t.startsWith=(...r)=>t.check(sTe(...r)),t.endsWith=(...r)=>t.check(oTe(...r)),t.min=(...r)=>t.check(g2(...r)),t.max=(...r)=>t.check(bY(...r)),t.length=(...r)=>t.check(xY(...r)),t.nonempty=(...r)=>t.check(g2(1,...r)),t.lowercase=r=>t.check(rTe(r)),t.uppercase=r=>t.check(iTe(r)),t.trim=()=>t.check(cTe()),t.normalize=(...r)=>t.check(lTe(...r)),t.toLowerCase=()=>t.check(uTe()),t.toUpperCase=()=>t.check(dTe()),t.slugify=()=>t.check(hTe())}),OTe=ut("ZodString",(t,e)=>{n$.init(t,e),_Y.init(t,e),t.email=n=>t.check(T2e(FTe,n)),t.url=n=>t.check(D2e(BTe,n)),t.jwt=n=>t.check(W2e(tMe,n)),t.emoji=n=>t.check(k2e(zTe,n)),t.guid=n=>t.check(cO(fO,n)),t.uuid=n=>t.check(M2e(BC,n)),t.uuidv4=n=>t.check(A2e(BC,n)),t.uuidv6=n=>t.check(P2e(BC,n)),t.uuidv7=n=>t.check(N2e(BC,n)),t.nanoid=n=>t.check(R2e(UTe,n)),t.guid=n=>t.check(cO(fO,n)),t.cuid=n=>t.check(I2e(VTe,n)),t.cuid2=n=>t.check($2e(HTe,n)),t.ulid=n=>t.check(j2e(GTe,n)),t.base64=n=>t.check(V2e(JTe,n)),t.base64url=n=>t.check(H2e(QTe,n)),t.xid=n=>t.check(L2e(WTe,n)),t.ksuid=n=>t.check(O2e(qTe,n)),t.ipv4=n=>t.check(F2e(KTe,n)),t.ipv6=n=>t.check(B2e(XTe,n)),t.cidrv4=n=>t.check(z2e(YTe,n)),t.cidrv6=n=>t.check(U2e(ZTe,n)),t.e164=n=>t.check(G2e(eMe,n)),t.datetime=n=>t.check(yTe(n)),t.date=n=>t.check(xTe(n)),t.time=n=>t.check(wTe(n)),t.duration=n=>t.check(ETe(n))});function Wm(t){return C2e(OTe,t)}const Di=ut("ZodStringFormat",(t,e)=>{Ei.init(t,e),_Y.init(t,e)}),FTe=ut("ZodEmail",(t,e)=>{I3e.init(t,e),Di.init(t,e)}),fO=ut("ZodGUID",(t,e)=>{k3e.init(t,e),Di.init(t,e)}),BC=ut("ZodUUID",(t,e)=>{R3e.init(t,e),Di.init(t,e)}),BTe=ut("ZodURL",(t,e)=>{$3e.init(t,e),Di.init(t,e)}),zTe=ut("ZodEmoji",(t,e)=>{j3e.init(t,e),Di.init(t,e)}),UTe=ut("ZodNanoID",(t,e)=>{L3e.init(t,e),Di.init(t,e)}),VTe=ut("ZodCUID",(t,e)=>{O3e.init(t,e),Di.init(t,e)}),HTe=ut("ZodCUID2",(t,e)=>{F3e.init(t,e),Di.init(t,e)}),GTe=ut("ZodULID",(t,e)=>{B3e.init(t,e),Di.init(t,e)}),WTe=ut("ZodXID",(t,e)=>{z3e.init(t,e),Di.init(t,e)}),qTe=ut("ZodKSUID",(t,e)=>{U3e.init(t,e),Di.init(t,e)}),KTe=ut("ZodIPv4",(t,e)=>{q3e.init(t,e),Di.init(t,e)}),XTe=ut("ZodIPv6",(t,e)=>{K3e.init(t,e),Di.init(t,e)}),YTe=ut("ZodCIDRv4",(t,e)=>{X3e.init(t,e),Di.init(t,e)}),ZTe=ut("ZodCIDRv6",(t,e)=>{Y3e.init(t,e),Di.init(t,e)}),JTe=ut("ZodBase64",(t,e)=>{Z3e.init(t,e),Di.init(t,e)}),QTe=ut("ZodBase64URL",(t,e)=>{Q3e.init(t,e),Di.init(t,e)}),eMe=ut("ZodE164",(t,e)=>{e2e.init(t,e),Di.init(t,e)}),tMe=ut("ZodJWT",(t,e)=>{n2e.init(t,e),Di.init(t,e)}),wY=ut("ZodNumber",(t,e)=>{gY.init(t,e),ua.init(t,e),t.gt=(r,i)=>t.check(dO(r,i)),t.gte=(r,i)=>t.check(OA(r,i)),t.min=(r,i)=>t.check(OA(r,i)),t.lt=(r,i)=>t.check(uO(r,i)),t.lte=(r,i)=>t.check(LA(r,i)),t.max=(r,i)=>t.check(LA(r,i)),t.int=r=>t.check(pO(r)),t.safe=r=>t.check(pO(r)),t.positive=r=>t.check(dO(0,r)),t.nonnegative=r=>t.check(OA(0,r)),t.negative=r=>t.check(uO(0,r)),t.nonpositive=r=>t.check(LA(0,r)),t.multipleOf=(r,i)=>t.check(hO(r,i)),t.step=(r,i)=>t.check(hO(r,i)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function Au(t){return Z2e(wY,t)}const nMe=ut("ZodNumberFormat",(t,e)=>{r2e.init(t,e),wY.init(t,e)});function pO(t){return J2e(nMe,t)}const rMe=ut("ZodBoolean",(t,e)=>{i2e.init(t,e),ua.init(t,e)});function iMe(t){return Q2e(rMe,t)}const aMe=ut("ZodUnknown",(t,e)=>{a2e.init(t,e),ua.init(t,e)});function mO(){return eTe(aMe)}const sMe=ut("ZodNever",(t,e)=>{s2e.init(t,e),ua.init(t,e)});function oMe(t){return tTe(sMe,t)}const lMe=ut("ZodArray",(t,e)=>{o2e.init(t,e),ua.init(t,e),t.element=e.element,t.min=(n,r)=>t.check(g2(n,r)),t.nonempty=n=>t.check(g2(1,n)),t.max=(n,r)=>t.check(bY(n,r)),t.length=(n,r)=>t.check(xY(n,r)),t.unwrap=()=>t.element});function cMe(t,e){return fTe(lMe,t,e)}const uMe=ut("ZodObject",(t,e)=>{c2e.init(t,e),ua.init(t,e),ii(t,"shape",()=>e.shape),t.keyof=()=>EY(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:mO()}),t.loose=()=>t.clone({...t._zod.def,catchall:mO()}),t.strict=()=>t.clone({...t._zod.def,catchall:oMe()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>PCe(t,n),t.safeExtend=n=>NCe(t,n),t.merge=n=>DCe(t,n),t.pick=n=>MCe(t,n),t.omit=n=>ACe(t,n),t.partial=(...n)=>kCe(CY,t,n[0]),t.required=(...n)=>RCe(TY,t,n[0])});function v2(t,e){const n={type:"object",shape:t??{},...an(e)};return new uMe(n)}const dMe=ut("ZodUnion",(t,e)=>{u2e.init(t,e),ua.init(t,e),t.options=e.options});function SY(t,e){return new dMe({type:"union",options:t,...an(e)})}const hMe=ut("ZodIntersection",(t,e)=>{d2e.init(t,e),ua.init(t,e)});function fMe(t,e){return new hMe({type:"intersection",left:t,right:e})}const Fk=ut("ZodEnum",(t,e)=>{h2e.init(t,e),ua.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,i)=>{const a={};for(const s of r)if(n.has(s))a[s]=e.entries[s];else throw new Error(`Key ${s} not found in enum`);return new Fk({...e,checks:[],...an(i),entries:a})},t.exclude=(r,i)=>{const a={...e.entries};for(const s of r)if(n.has(s))delete a[s];else throw new Error(`Key ${s} not found in enum`);return new Fk({...e,checks:[],...an(i),entries:a})}});function EY(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new Fk({type:"enum",entries:n,...an(e)})}const pMe=ut("ZodTransform",(t,e)=>{f2e.init(t,e),ua.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new tY(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(M_(a,n.value,e));else{const s=a;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=t),n.issues.push(M_(s))}};const i=e.transform(n.value,n);return i instanceof Promise?i.then(a=>(n.value=a,n)):(n.value=i,n)}});function mMe(t){return new pMe({type:"transform",transform:t})}const CY=ut("ZodOptional",(t,e)=>{p2e.init(t,e),ua.init(t,e),t.unwrap=()=>t._zod.def.innerType});function gO(t){return new CY({type:"optional",innerType:t})}const gMe=ut("ZodNullable",(t,e)=>{m2e.init(t,e),ua.init(t,e),t.unwrap=()=>t._zod.def.innerType});function vO(t){return new gMe({type:"nullable",innerType:t})}const vMe=ut("ZodDefault",(t,e)=>{g2e.init(t,e),ua.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function yMe(t,e){return new vMe({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():iY(e)}})}const bMe=ut("ZodPrefault",(t,e)=>{v2e.init(t,e),ua.init(t,e),t.unwrap=()=>t._zod.def.innerType});function xMe(t,e){return new bMe({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():iY(e)}})}const TY=ut("ZodNonOptional",(t,e)=>{y2e.init(t,e),ua.init(t,e),t.unwrap=()=>t._zod.def.innerType});function _Me(t,e){return new TY({type:"nonoptional",innerType:t,...an(e)})}const wMe=ut("ZodCatch",(t,e)=>{b2e.init(t,e),ua.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function SMe(t,e){return new wMe({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const EMe=ut("ZodPipe",(t,e)=>{x2e.init(t,e),ua.init(t,e),t.in=e.in,t.out=e.out});function yO(t,e){return new EMe({type:"pipe",in:t,out:e})}const CMe=ut("ZodReadonly",(t,e)=>{_2e.init(t,e),ua.init(t,e),t.unwrap=()=>t._zod.def.innerType});function TMe(t){return new CMe({type:"readonly",innerType:t})}const MMe=ut("ZodCustom",(t,e)=>{w2e.init(t,e),ua.init(t,e)});function AMe(t,e={}){return pTe(MMe,t,e)}function PMe(t){return mTe(t)}SY([v2({h:Au().min(0).max(360),s:Au().min(0).max(100),l:Au().min(0).max(100),a:Au().min(0).max(1)}),v2({r:Au().min(0).max(255),g:Au().min(0).max(255),b:Au().min(0).max(255),a:Au().min(0).max(1)}),Wm().regex(/^#[0-9A-Fa-f]{6}$/)]);v2({fontFamily:Wm(),fontSize:Wm(),fontWeight:Au().min(100).max(900),lineHeight:Au().positive(),letterSpacing:Wm().optional()});v2({category:Wm().optional(),group:Wm().optional(),scope:EY(["raw","semantic"]).optional(),search:Wm().optional(),showInherited:iMe().optional()});function jd(t){return t!=null&&typeof t=="object"&&"h"in t&&"s"in t&&"l"in t}function FA(t){return t!=null&&typeof t=="object"&&"r"in t&&"g"in t&&"b"in t}function NMe(t){return t!=null&&typeof t=="object"&&"fontFamily"in t&&"fontSize"in t}function MY(t){return t!=null&&typeof t=="object"&&"offsetX"in t&&"offsetY"in t&&"blur"in t}function DMe(t){return t!=null&&typeof t=="object"&&"width"in t&&"style"in t&&"color"in t}function kMe(t){const e=t.css_variable||`--${t.name.replace(/\./g,"-")}`,n={};switch(t.type){case"color":{jd(t.value)?n[e]=x3(t.value):FA(t.value)?n[e]=jA(t.value):typeof t.value=="string"?n[e]=t.value:n[e]=JSON.stringify(t.value);break}case"typography":{if(NMe(t.value)){const r=t.value;n[`${e}-font-family`]=r.fontFamily,n[`${e}-font-size`]=r.fontSize,n[`${e}-font-weight`]=String(r.fontWeight),n[`${e}-line-height`]=String(r.lineHeight),r.letterSpacing&&(n[`${e}-letter-spacing`]=r.letterSpacing)}else n[e]=String(t.value);break}case"shadow":{if(MY(t.value)){const r=t.value,i=r.offsetX,a=r.offsetY,s=r.blur,o=r.spread;let c="rgba(0,0,0,0.1)";jd(r.color)?c=x3(r.color):FA(r.color)?c=jA(r.color):typeof r.color=="string"&&(c=r.color),n[e]=`${i} ${a} ${s} ${o} ${c}`}else n[e]=String(t.value);break}case"border":{if(DMe(t.value)){const r=t.value,i=r.width,a=r.style;let s="#e5e7eb";jd(r.color)?s=x3(r.color):FA(r.color)?s=jA(r.color):typeof r.color=="string"&&(s=r.color),n[e]=`${i} ${a} ${s}`}else n[e]=String(t.value);break}case"spacing":case"radius":case"motion":default:{typeof t.value=="string"?n[e]=t.value:typeof t.value=="number"?n[e]=`${t.value}px`:typeof t.value=="object"&&t.value!==null?n[e]=JSON.stringify(t.value):n[e]=String(t.value);break}}return n}function AY(t){const e={};return t.forEach(n=>{const r=kMe(n);Object.assign(e,r)}),e}function RMe(t){const e=Object.entries(t);return e.length===0?":root {}":`:root {
${e.map(([r,i])=>`  ${r}: ${i};`).join(`
`)}
}`}let BA=null,zA=null,UA=0,xm=null,_m=null;const qr=Ks()(cfe((t,e)=>({themes:[],activeTheme:null,activeThemeId:null,projectId:null,tokens:[],_tokensVersion:0,loading:!1,error:null,dirty:!1,get rawTokens(){const n=e()._tokensVersion;return(UA!==n||!BA)&&(BA=e().tokens.filter(r=>r.scope==="raw"),UA=n),BA},get semanticTokens(){const n=e()._tokensVersion;return(UA!==n||!zA)&&(zA=e().tokens.filter(r=>r.scope==="semantic")),zA},setProjectId:n=>{t({projectId:n})},loadThemes:async n=>{t({loading:!0,error:null});try{const r=await vs.getThemesByProject(n);t({themes:r,loading:!1,projectId:n})}catch(r){const i=r instanceof Error?r.message:"  ";t({error:i,loading:!1}),console.error("[UnifiedThemeStore] loadThemes failed:",r)}},loadActiveTheme:async n=>{t({loading:!0,error:null});try{const r=await vs.getActiveTheme(n);if(!r){t({loading:!1});return}t({activeTheme:r,activeThemeId:r.id,projectId:n,loading:!1}),await e().loadTokens(r.id),e().injectThemeCSS()}catch(r){const i=r instanceof Error?r.message:"   ";t({error:i,loading:!1}),console.error("[UnifiedThemeStore] loadActiveTheme failed:",r)}},setActiveTheme:async n=>{t({loading:!0,error:null});try{const r=e().themes.find(i=>i.id===n);if(!r)throw new Error("Theme not found");t({activeTheme:r,activeThemeId:n}),await e().loadTokens(n),e().injectThemeCSS(),t({loading:!1})}catch(r){const i=r instanceof Error?r.message:"  ";t({error:i,loading:!1}),console.error("[UnifiedThemeStore] setActiveTheme failed:",r)}},createTheme:async(n,r,i="draft",a)=>{const s=a||e().projectId;if(!s)return console.error("[UnifiedThemeStore] createTheme: projectId is null"),null;try{const o=await vs.createTheme({project_id:s,name:n,parent_theme_id:r,status:i});return e()._addTheme(o),o}catch(o){const c=o instanceof Error?o.message:"  ";return t({error:c}),console.error("[UnifiedThemeStore] createTheme failed:",o),null}},updateTheme:async(n,r)=>{try{const i=await vs.updateTheme(n,r);return e()._updateTheme(i),i}catch(i){const a=i instanceof Error?i.message:"  ";return t({error:a}),console.error("[UnifiedThemeStore] updateTheme failed:",i),null}},deleteTheme:async n=>{try{return await vs.deleteTheme(n),e()._removeTheme(n),!0}catch(r){const i=r instanceof Error?r.message:"  ";return t({error:i}),console.error("[UnifiedThemeStore] deleteTheme failed:",r),!1}},duplicateTheme:async(n,r,i=!1,a)=>{try{const s=await vs.duplicateTheme(n,r,i),o=a||e().projectId;return o&&await e().loadThemes(o),s}catch(s){const o=s instanceof Error?s.message:"  ";return t({error:o}),console.error("[UnifiedThemeStore] duplicateTheme failed:",s),null}},activateTheme:async n=>{try{return await vs.activateTheme(n),!0}catch(r){const i=r instanceof Error?r.message:"  ";return t({error:i}),console.error("[UnifiedThemeStore] activateTheme failed:",r),!1}},snapshotVersion:async()=>{const{activeTheme:n}=e();if(n)try{const r=await vs.createSnapshot(n.id);t(Br(i=>{i.activeTheme&&(i.activeTheme={...i.activeTheme,version:r,updated_at:new Date().toISOString()})}))}catch(r){const i=r instanceof Error?r.message:"   ";t({error:i}),console.error("[UnifiedThemeStore] snapshotVersion failed:",r)}},loadTokens:async n=>{t({loading:!0,error:null});try{const r=await Ir.getResolvedTokens(n);t(i=>({tokens:r,_tokensVersion:i._tokensVersion+1,loading:!1}))}catch(r){const i=r instanceof Error?r.message:"  ";t({error:i,loading:!1}),console.error("[UnifiedThemeStore] loadTokens failed:",r)}},createToken:async n=>{t({loading:!0,error:null});try{const r=await Ir.createToken(n);return t(i=>({tokens:[...i.tokens,r],_tokensVersion:i._tokensVersion+1,dirty:!1,loading:!1})),e().injectThemeCSS(),r}catch(r){const i=r instanceof Error?r.message:"  ";throw t({error:i,loading:!1}),console.error("[UnifiedThemeStore] createToken failed:",r),r}},updateToken:async(n,r)=>{t({loading:!0,error:null});try{await Ir.updateToken(n,r),t(i=>({tokens:i.tokens.map(a=>a.id===n?{...a,...r}:a),_tokensVersion:i._tokensVersion+1,loading:!1})),e().injectThemeCSS()}catch(i){const a=i instanceof Error?i.message:"  ";t({error:a,loading:!1}),console.error("[UnifiedThemeStore] updateToken failed:",i)}},updateTokenValue:(n,r,i)=>{t(Br(a=>{const s=a.tokens.find(o=>o.name===n&&o.scope===r);s&&(s.value=i,s.updated_at=new Date().toISOString(),a.dirty=!0,a._tokensVersion+=1)})),e().injectThemeCSS()},addToken:n=>{t(Br(r=>{const i={id:mCe(),project_id:r.activeTheme?.project_id||r.projectId||"",theme_id:r.activeTheme?.id||"",name:n.name,type:n.type,value:n.value,scope:n.scope,alias_of:n.alias_of,css_variable:n.css_variable,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};r.tokens.push(i),r.dirty=!0,r._tokensVersion+=1})),e().injectThemeCSS()},deleteToken:async n=>{t({loading:!0,error:null});try{await Ir.deleteToken(n),t(r=>({tokens:r.tokens.filter(i=>i.id!==n),_tokensVersion:r._tokensVersion+1,loading:!1})),e().injectThemeCSS()}catch(r){const i=r instanceof Error?r.message:"  ";t({error:i,loading:!1}),console.error("[UnifiedThemeStore] deleteToken failed:",r)}},bulkUpsertTokens:async n=>{t({loading:!0,error:null});try{await Ir.bulkUpsertTokens(n);const{activeThemeId:r}=e();r&&await e().loadTokens(r),e().injectThemeCSS(),t({loading:!1,dirty:!1})}catch(r){const i=r instanceof Error?r.message:"   ";t({error:i,loading:!1}),console.error("[UnifiedThemeStore] bulkUpsertTokens failed:",r)}},saveAllTokens:async()=>{const{tokens:n,dirty:r,activeTheme:i}=e();if(!(!i||!r))try{await Ir.bulkUpsertTokens(n),t({dirty:!1})}catch(a){const s=a instanceof Error?a.message:" ";t({error:s}),console.error("[UnifiedThemeStore] saveAllTokens failed:",a)}},injectThemeCSS:()=>{const{tokens:n}=e();if(n.length!==0)try{const r=AY(n),i=RMe(r),a="xstudio-theme-vars";let s=document.getElementById(a);s||(s=document.createElement("style"),s.id=a,document.head.appendChild(s)),s.textContent=i,console.log("[UnifiedThemeStore] CSS injected:",Object.keys(r).length,"variables")}catch(r){console.error("[UnifiedThemeStore] injectThemeCSS failed:",r)}},subscribeToThemes:()=>{const{projectId:n}=e();return n?(xm&&xm(),xm=vs.subscribeToProjectThemes(n,r=>{if(console.log("[UnifiedThemeStore] Theme realtime update:",r),r.eventType==="INSERT"){e()._addTheme(r.new);const i=r.new;i.status==="active"&&e()._setActiveTheme(i)}else if(r.eventType==="UPDATE"){e()._updateTheme(r.new);const i=r.new,{activeTheme:a}=e();a&&i.id===a.id&&e()._setActiveTheme(i),i.status==="active"&&a?.id!==i.id&&(e()._setActiveTheme(i),e().loadTokens(i.id)),a&&i.id===a.id&&i.status!=="active"&&e()._setActiveTheme(null)}else if(r.eventType==="DELETE"){const i=r.old;e()._removeTheme(i.id);const{activeTheme:a}=e();a&&i.id===a.id&&e()._setActiveTheme(null)}}),console.log("[UnifiedThemeStore] Subscribed to themes for project:",n),xm):(console.error("[UnifiedThemeStore] subscribeToThemes: projectId is null"),null)},subscribeToTokens:()=>{const{activeThemeId:n}=e();return n?(_m&&_m(),_m=Ir.subscribeToTokenChanges(n,async r=>{console.log("[UnifiedThemeStore] Token realtime update:",r);try{await e().loadTokens(n),e().injectThemeCSS()}catch(i){console.error("[UnifiedThemeStore] Failed to reload tokens:",i)}}),console.log("[UnifiedThemeStore] Subscribed to tokens for theme:",n),_m):(console.error("[UnifiedThemeStore] subscribeToTokens: activeThemeId is null"),null)},_addTheme:n=>{t(r=>({themes:[...r.themes,n]}))},_updateTheme:n=>{t(r=>({themes:r.themes.map(i=>i.id===n.id?n:i)}))},_removeTheme:n=>{t(r=>({themes:r.themes.filter(i=>i.id!==n)}))},_setActiveTheme:n=>{t({activeTheme:n,activeThemeId:n?.id||null})},clearError:()=>t({error:null}),cleanup:()=>{xm&&(xm(),xm=null,console.log("[UnifiedThemeStore] Unsubscribed from themes")),_m&&(_m(),_m=null,console.log("[UnifiedThemeStore] Unsubscribed from tokens"))},reset:()=>{e().cleanup(),t({themes:[],activeTheme:null,activeThemeId:null,projectId:null,tokens:[],_tokensVersion:0,loading:!1,error:null,dirty:!1})}}),{name:"UnifiedThemeStore"}));function uw({legend:t,icon:e,children:n,className:r=""}){return l.jsxs("fieldset",{className:`properties-aria ${r}`,children:[t&&l.jsx("legend",{className:"fieldset-legend",children:t}),l.jsxs("div",{className:"react-aria-control react-aria-Group",children:[e&&l.jsx("label",{className:"control-label",children:l.jsx(e,{color:se.color,size:se.size,strokeWidth:se.stroke})}),n]})]})}const PY=Ks()(K2((t,e)=>({collapsedSections:new Set,focusMode:!1,activeFocusSection:null,toggleSection:n=>t(r=>{if(r.focusMode)return{activeFocusSection:n};{const i=new Set(r.collapsedSections);return i.has(n)?i.delete(n):i.add(n),{collapsedSections:i}}}),isCollapsed:n=>{const r=e();return r.focusMode?r.activeFocusSection!==n:r.collapsedSections.has(n)},expandAll:()=>t({collapsedSections:new Set}),collapseAll:()=>t({collapsedSections:new Set(["transform","layout","appearance","typography"])}),toggleFocusMode:()=>t(n=>{const r=!n.focusMode;return{focusMode:r,activeFocusSection:r?"transform":null}}),setFocusSection:n=>t(r=>r.focusMode?{activeFocusSection:n}:r)}),{name:"styles-panel-collapse",partialize:t=>({collapsedSections:Array.from(t.collapsedSections),focusMode:t.focusMode,activeFocusSection:t.activeFocusSection}),merge:(t,e)=>{const n=t;return{...e,collapsedSections:new Set(n?.collapsedSections||[]),focusMode:n?.focusMode||!1,activeFocusSection:n?.activeFocusSection||null}}})),$a=T.memo(function({title:e,children:n,id:r,defaultExpanded:i=!0,onReset:a}){const{isCollapsed:s,toggleSection:o}=PY(),[c,u]=ve.useState(i),h=r!==void 0,f=h?!s(r):c,m=()=>{h&&r?o(r):u(!c)};return l.jsxs("div",{className:"section","data-section-id":r,children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"section-title",children:e}),l.jsxs("div",{className:"section-actions",children:[a&&l.jsx("button",{className:"iconButton",type:"button",onClick:a,"aria-label":"Reset section styles",title:"Reset section styles",children:l.jsx(TR,{color:se.color,strokeWidth:se.stroke,size:se.size})}),l.jsx("button",{className:"iconButton",type:"button",onClick:m,"aria-label":f?"Collapse section":"Expand section",children:l.jsx(e_,{color:se.color,strokeWidth:se.stroke,size:se.size,style:{transform:f?"rotate(0deg)":"rotate(180deg)",transition:"transform 0.2s ease"}})})]})]}),f&&l.jsx("div",{className:"section-content",children:n})]})},(t,e)=>t.title===e.title&&t.id===e.id&&t.defaultExpanded===e.defaultExpanded&&t.children===e.children),Xi=T.memo(function({label:e,value:n,onChange:r,type:i="text",icon:a,placeholder:s,className:o,multiline:c,min:u,max:h,disabled:f}){const[m,g]=T.useState(String(n||"")),v=T.useRef(!1);T.useEffect(()=>{g(String(n||"")),v.current=!1},[n]);const x=E=>{E.target.select(),v.current=!1},_=E=>{g(E)},w=()=>{if(v.current){v.current=!1;return}m!==String(n||"")&&r(m)},S=E=>{E.key==="Enter"&&!c&&(E.preventDefault(),m!==String(n||"")&&(r(m),v.current=!0),E.target.blur())};return l.jsx(uw,{legend:e,icon:a,className:o,children:c?l.jsx("textarea",{className:"react-aria-TextArea resize-y",value:m,onChange:E=>_(E.target.value),onFocus:x,onBlur:w,onKeyDown:S,placeholder:s,rows:4,disabled:f}):l.jsx("input",{className:"react-aria-Input",type:i,value:m,onChange:E=>_(E.target.value),onFocus:x,onBlur:w,onKeyDown:S,placeholder:s,min:u,max:h,disabled:f})})},(t,e)=>t.label===e.label&&t.value===e.value&&t.type===e.type&&t.placeholder===e.placeholder&&t.className===e.className&&t.multiline===e.multiline&&t.min===e.min&&t.max===e.max&&t.disabled===e.disabled&&t.icon===e.icon),ja=T.memo(function({label:e,value:n,onChange:r,options:i,icon:a,className:s}){const o=c=>{const u=c;r(u==="reset"?"":u)};return l.jsxs("fieldset",{className:`properties-aria ${s||""}`,children:[l.jsx("legend",{className:"fieldset-legend",children:e}),l.jsx("div",{className:"react-aria-control react-aria-Group",children:l.jsxs(wi,{className:"react-aria-Select",selectedKey:n,onSelectionChange:o,"aria-label":e,children:[l.jsxs(Pt,{className:"react-aria-Button",children:[a&&l.jsx("label",{className:"control-label",children:l.jsx(a,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(ai,{}),l.jsx("span",{"aria-hidden":"true",className:"select-chevron",children:l.jsx(_i,{size:16})})]}),l.jsx(Yr,{className:"react-aria-Popover",children:l.jsx(Ar,{className:"react-aria-ListBox",children:i.map(c=>l.jsx(En,{id:c.value,className:"react-aria-ListBoxItem",children:c.label},c.value))})})]})})]})}),Jo=T.memo(function({label:e,isSelected:n,onChange:r,icon:i,className:a}){return l.jsx(uw,{legend:e,icon:i,className:a,children:l.jsxs(mT,{className:"react-aria-Switch",isSelected:n,onChange:s=>r(s),children:[l.jsx("div",{className:"indicator"}),e]})})},(t,e)=>t.label===e.label&&t.isSelected===e.isSelected&&t.icon===e.icon&&t.className===e.className);function IMe({label:t,value:e,onChange:n,min:r=0,max:i=100,step:a=1,icon:s,className:o}){const c=u=>{const h=Array.isArray(u)?u[0]:u;n(h)};return l.jsxs("fieldset",{className:`properties-aria ${o||""}`,children:[l.jsx("legend",{className:"fieldset-legend",children:t}),l.jsxs("div",{className:"react-aria-control react-aria-Group",children:[s&&l.jsx("label",{className:"control-label",children:l.jsx(s,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(dve,{className:"react-aria-Slider",value:e,onChange:c,minValue:r,maxValue:i,step:a,"aria-label":t,children:l.jsxs("div",{className:"slider-container",children:[l.jsx(SI,{className:"slider-track",children:l.jsx(fve,{className:"slider-thumb"})}),l.jsxs(hve,{className:"slider-output",children:[e,"%"]})]})})]})]})}const $Me=["px","%","rem","em","vh","vw","reset"],_3=["reset","auto","inherit","initial","unset","normal"];function VA(t){const e=t.trim();if(_3.includes(e))return{numericValue:null,unit:e};const r=e.split(/\s+/)[0].match(/^(-?\d+\.?\d*)([a-z%]+)?$/i);if(r){const i=parseFloat(r[1]),a=r[2]||"";return{numericValue:i,unit:a}}return{numericValue:0,unit:"px"}}const rl=T.memo(function({label:e,value:n,onChange:r,icon:i,className:a,units:s=$Me,allowKeywords:o=!0,min:c=0,max:u=9999}){const[h,f]=T.useState(null),[m,g]=T.useState("px"),[v,x]=T.useState(!1),[_,w]=T.useState(""),S=T.useRef(!1),E=T.useRef(n);T.useEffect(()=>{const L=VA(n);f(L.numericValue),g(L.unit),x(L.numericValue===null),w(L.numericValue!==null?String(L.numericValue):L.unit),S.current=!1,E.current=n},[n]);const A=L=>{w(L)},N=T.useRef(null),P=L=>{if(S.current){S.current=!1;return}const $=L.relatedTarget;if($&&N.current?.contains($))return;const B=_.trim();if(o&&_3.includes(B.toLowerCase())){const z=B.toLowerCase(),V=z==="reset"?"":z;V!==n&&V!==E.current&&(E.current=V,r(V));return}const q=parseFloat(B);if(isNaN(q)){w(h!==null?String(h):"");return}if(q<c||q>u){w(h!==null?String(h):"");return}const U=VA(n),J=U.numericValue!==q||U.unit!==m,O=`${q}${m}`;J&&O!==E.current&&(E.current=O,r(O))},R=L=>{if(_3.includes(L)){const q=L==="reset"?"":L;q!==n&&q!==E.current&&(E.current=q,r(q));return}const $=parseFloat(_);let B;!isNaN($)&&$!==0?B=`${$}${L}`:h!==null&&h!==0?B=`${h}${L}`:B=`${["%","vh","vw"].includes(L)?100:0}${L}`,B!==n&&B!==E.current&&(E.current=B,r(B))},D=L=>{L.target.select(),S.current=!1},k=L=>{if(L.key==="Enter"){L.preventDefault();const q=_.trim();let U=!1;if(o&&_3.includes(q.toLowerCase())){const J=q.toLowerCase(),O=J==="reset"?"":J;O!==n&&(r(O),U=!0)}else{const J=parseFloat(q);if(!isNaN(J)&&J>=c&&J<=u){const O=VA(n);if(O.numericValue!==J||O.unit!==m){const V=`${J}${m}`;r(V),U=!0}}}U&&(S.current=!0),L.target.blur();return}if(v)return;const $=L.shiftKey?10:1;let B=h||0;L.key==="ArrowUp"?(L.preventDefault(),B=Math.min(B+$,u),r(`${B}${m}`)):L.key==="ArrowDown"&&(L.preventDefault(),B=Math.max(B-$,c),r(`${B}${m}`))};return l.jsxs("fieldset",{className:`properties-aria property-unit-input ${a||""}`,children:[e&&l.jsx("legend",{className:"fieldset-legend",children:e}),l.jsxs("div",{className:"react-aria-control react-aria-Group",children:[i&&l.jsx("label",{className:"control-label",children:l.jsx(i,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsxs(Zq,{className:"react-aria-ComboBox react-aria-UnitComboBox",inputValue:m===""?"":m,onSelectionChange:L=>{L!==null&&R(L===""?"":L)},selectedKey:m===""?"":m,"aria-label":"Unit",children:[l.jsxs("div",{className:"combobox-container",ref:N,children:[l.jsx(Pn,{className:"react-aria-Input",type:"text",value:_,onChange:L=>A(L.target.value),onFocus:D,onBlur:P,onKeyDown:k,"aria-label":e||"Value",placeholder:"reset"}),l.jsx(Pt,{className:"react-aria-Button",children:l.jsx(_i,{size:16})})]}),l.jsx(Yr,{className:"react-aria-Popover",children:l.jsx(Ar,{className:"react-aria-ListBox",children:s.map(L=>l.jsx(En,{id:L===""?"":L,className:"react-aria-ListBoxItem",children:L===""?"":L},L===""?"":L))})})]})]})]})},(t,e)=>t.label===e.label&&t.value===e.value&&t.className===e.className&&t.icon===e.icon&&t.min===e.min&&t.max===e.max&&t.allowKeywords===e.allowKeywords&&JSON.stringify(t.units)===JSON.stringify(e.units));function NY(t){return l.jsx(G0e,{...t,className:"react-aria-ColorSwatch"})}function jMe(t){return l.jsx(aq,{...t,className:"react-aria-ColorArea",children:l.jsx(uT,{className:"react-aria-ColorThumb"})})}function LMe(t){return l.jsx(qq,{...t,className:"react-aria-ColorSlider",children:l.jsx(SI,{className:"react-aria-SliderTrack",children:l.jsx(uT,{className:"react-aria-ColorThumb"})})})}function OMe({initialValue:t,onChange:e,label:n}){const[r,i]=ve.useState(t),[a,s]=ve.useState(t),o=T.useRef(t),c=T.useCallback(g=>{if(!g)return;const v=g.toString("hex");i(v),s(v)},[]),u=T.useCallback(g=>{const v=g.toString("hex");v!==o.current&&(o.current=v,e(v))},[e]),h=T.useCallback(g=>{s(g.target.value)},[]),f=T.useCallback(()=>{a!==o.current&&(o.current=a,i(a),e(a))},[a,e]),m=T.useCallback(g=>{g.key==="Enter"&&(g.preventDefault(),a!==o.current&&(o.current=a,i(a),e(a)),g.target.blur())},[a,e]);return l.jsx(cve,{value:r,onChange:c,children:l.jsxs(my,{children:[l.jsx(Pt,{className:"react-aria-Group color-swatch-button",children:l.jsx(NY,{})}),l.jsx(__,{placement:"bottom start",className:"color-picker-popover",children:l.jsxs("div",{className:"color-picker-content",children:[l.jsx(jMe,{colorSpace:"hsb",xChannel:"saturation",yChannel:"brightness",onChangeEnd:u}),l.jsx(LMe,{colorSpace:"hsb",channel:"hue",onChangeEnd:u}),l.jsx(U0e,{className:"react-aria-ColorField","aria-label":n||"Color",children:l.jsx(Pn,{className:"react-aria-Input",value:a,onChange:h,onBlur:f,onKeyDown:m})})]})})]})})}function y2({label:t,value:e,onChange:n,className:r}){return l.jsxs("fieldset",{className:`properties-aria property-color-input ${r||""}`,children:[t&&l.jsx("legend",{className:"fieldset-legend",children:t}),l.jsx(OMe,{initialValue:e,onChange:n,label:t},e)]})}function FMe({children:t,...e}){return l.jsx(ave,{...e,children:t})}function BMe(t){return l.jsx(sve,{...t,children:l.jsx(NY,{})})}fn({base:"outline outline-sky-600 dark:outline-sky-500 forced-colors:outline-[Highlight] outline-offset-2",variants:{isFocusVisible:{false:"outline-0",true:"outline-2"}}});function DY(t,e){return ah(t,n=>bK(e,n))}const zMe=["red","orange","amber","yellow","lime","green","emerald","teal","cyan","sky","blue","indigo","violet","purple","fuchsia","pink","rose","slate","stone"],UMe={red:"#ef4444",orange:"#f97316",amber:"#f59e0b",yellow:"#eab308",lime:"#84cc16",green:"#22c55e",emerald:"#10b981",teal:"#14b8a6",cyan:"#06b6d4",sky:"#0ea5e9",blue:"#3b82f6",indigo:"#6366f1",violet:"#8b5cf6",purple:"#a855f7",fuchsia:"#d946ef",pink:"#ec4899",rose:"#f43f5e",slate:"#64748b",stone:"#78716c"};function VMe(t){return UMe[t]}const kY=zMe.map(t=>({name:t,value:VMe(t)})),HMe=`linear-gradient(to right, ${kY.map(t=>t.value).join(", ")})`,RY="absolute box-border h-5 w-5 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-white bg-white/0 shadow-[0_0_0_1px_rgba(0,0,0,0.45),inset_0_0_0_1px_rgba(0,0,0,0.45)] data-[focus-visible=true]:h-6 data-[focus-visible=true]:w-6 group-data-[orientation=horizontal]:top-1/2 group-data-[orientation=vertical]:left-1/2";function GMe({className:t,...e}){return l.jsx(aq,{...e,className:DY(t,"relative aspect-square w-full min-w-[12rem] max-w-[18rem] rounded-xl border border-slate-200 bg-transparent shadow-sm data-[disabled=true]:opacity-40"),children:l.jsx(uT,{className:RY})})}function WMe({className:t,...e}){return l.jsx(qq,{...e,className:DY(t,"group grid gap-2 text-sm data-[orientation=vertical]:grid-rows-[auto_1fr]"),children:l.jsx(SI,{className:"relative flex h-4 w-full items-center overflow-hidden rounded-full border border-slate-200 bg-slate-200/60 group-data-[orientation=vertical]:h-full group-data-[orientation=vertical]:w-4",style:{backgroundImage:HMe},children:l.jsx(uT,{className:RY})})})}function qMe(t){return`${t.charAt(0).toUpperCase()}${t.slice(1)} 500`}function zBe({areaProps:t,sliderProps:e,swatchPickerProps:n,swatches:r=kY,className:i}){return l.jsxs("div",{className:`flex flex-col gap-4 ${i??""}`,children:[l.jsx(GMe,{colorSpace:"hsb",xChannel:"saturation",yChannel:"brightness",...t}),l.jsx(WMe,{colorSpace:"hsb",channel:"hue",...e}),l.jsx(FMe,{...n,children:n?.children??r.map(a=>l.jsx(BMe,{color:a.value,"aria-label":qMe(a.name)},a.name))})]})}const ur=Ks((t,e)=>({selectedElement:null,isSyncingToBuilder:!1,syncVersion:0,setSelectedElement:n=>t({selectedElement:n}),setSyncingToBuilder:n=>t({isSyncingToBuilder:n}),incrementSyncVersion:()=>{const n=e().syncVersion+1;return t({syncVersion:n,isSyncingToBuilder:!0}),n},confirmSync:n=>{const r=e().syncVersion;n===r&&t({isSyncingToBuilder:!1})},updateCustomId:n=>{const r=e().incrementSyncVersion();console.log(" updateCustomId  (v"+r+"):",{elementId:e().selectedElement?.id,customId:n}),t(i=>i.selectedElement?{selectedElement:{...i.selectedElement,customId:n}}:i)},updateProperty:(n,r)=>t(i=>i.selectedElement?{selectedElement:{...i.selectedElement,properties:{...i.selectedElement.properties,[n]:r}}}:i),updateProperties:n=>{const r=e().incrementSyncVersion();console.log(" updateProperties  (v"+r+")"),t(i=>i.selectedElement?{selectedElement:{...i.selectedElement,properties:{...i.selectedElement.properties,...n}}}:i)},updateSemanticClasses:n=>t(r=>r.selectedElement?{selectedElement:{...r.selectedElement,semanticClasses:n}}:r),addSemanticClass:n=>t(r=>{if(!r.selectedElement)return r;const i=r.selectedElement.semanticClasses||[];return i.includes(n)?r:{selectedElement:{...r.selectedElement,semanticClasses:[...i,n]}}}),removeSemanticClass:n=>t(r=>{if(!r.selectedElement)return r;const i=r.selectedElement.semanticClasses||[];return{selectedElement:{...r.selectedElement,semanticClasses:i.filter(a=>a!==n)}}}),updateCSSVariables:n=>t(r=>r.selectedElement?{selectedElement:{...r.selectedElement,cssVariables:n}}:r),updateCSSVariable:(n,r)=>t(i=>i.selectedElement?{selectedElement:{...i.selectedElement,cssVariables:{...i.selectedElement.cssVariables||{},[n]:r}}}:i),updateInlineStyle:(n,r)=>{const i=e().incrementSyncVersion();console.log(" updateInlineStyle  (v"+i+"):",{property:n,value:r}),t(a=>{if(!a.selectedElement)return a;const s={...a.selectedElement.style||{}};return r===""||r===null||r===void 0?delete s[n]:s[n]=r,{selectedElement:{...a.selectedElement,style:s}}})},updateInlineStyles:n=>{const r=e().incrementSyncVersion();console.log(" updateInlineStyles  (v"+r+"):",n),t(i=>{if(!i.selectedElement)return i;const a={...i.selectedElement.style||{}};return Object.entries(n).forEach(([s,o])=>{o===""||o===null||o===void 0?delete a[s]:a[s]=o}),{selectedElement:{...i.selectedElement,style:a}}})},updateDataBinding:n=>{const r=e().incrementSyncVersion();console.log(" updateDataBinding  (v"+r+"):",{elementId:e().selectedElement?.id,elementType:e().selectedElement?.type,newBinding:n}),t(i=>i.selectedElement?{selectedElement:{...i.selectedElement,dataBinding:n}}:i)},updateEvents:n=>{const r=e().incrementSyncVersion();console.log(" updateEvents  (v"+r+"):",{elementId:e().selectedElement?.id,eventCount:n.length}),t(i=>i.selectedElement?{selectedElement:{...i.selectedElement,events:n}}:i)},addEvent:n=>{const r=e().incrementSyncVersion();console.log(" addEvent  (v"+r+"):",{elementId:e().selectedElement?.id,eventId:n.id,eventType:n.event}),t(i=>{if(!i.selectedElement)return i;const a=i.selectedElement.events||[];return{selectedElement:{...i.selectedElement,events:[...a,n]}}})},updateEvent:(n,r)=>{const i=e().incrementSyncVersion();console.log(" updateEvent  (v"+i+"):",{elementId:e().selectedElement?.id,eventId:n,eventType:r.event,actionCount:r.actions.length}),t(a=>{if(!a.selectedElement)return a;const s=a.selectedElement.events||[];return{selectedElement:{...a.selectedElement,events:s.map(o=>o.id===n?r:o)}}})},removeEvent:n=>{const r=e().incrementSyncVersion();console.log(" removeEvent  (v"+r+"):",{elementId:e().selectedElement?.id,eventId:n}),t(i=>{if(!i.selectedElement)return i;const a=i.selectedElement.events||[];return{selectedElement:{...i.selectedElement,events:a.filter(s=>s.id!==n)}}})},updateSelectedElementComputedStyle:n=>{t(r=>r.selectedElement?{selectedElement:{...r.selectedElement,computedStyle:n}}:r)}}));function KMe(t){return!t||t.trim()===""?!1:/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(t)}function XMe(t,e,n){return!t||t.trim()===""?!0:!n.some(r=>r.customId===t&&r.id!==e)}function bO(t,e,n){return!t||t.trim()===""?{isValid:!0}:KMe(t)?XMe(t,e,n)?{isValid:!0}:{isValid:!1,error:`ID "${t}" is already in use. Please choose a unique ID.`}:{isValid:!1,error:"Invalid ID format. Must start with a letter and contain only letters, numbers, hyphens, and underscores."}}const UBe=T.memo(function({label:e="ID",value:n,elementId:r,placeholder:i="button_1",className:a}){const[s,o]=T.useState(n||""),[c,u]=T.useState(void 0),h=ur(x=>x.updateCustomId);T.useEffect(()=>{o(n||""),u(void 0)},[n]);const f=x=>{x.target.select()},m=x=>{o(x),u(void 0)},g=()=>{const x=$e.getState().elementsMap,_=Array.from(x.values()),w=bO(s,r,_);if(!w.isValid){u(w.error),o(n||"");return}s!==(n||"")&&(h(s),u(void 0))},v=x=>{if(x.key==="Enter"){x.preventDefault();const _=$e.getState().elementsMap,w=bO(s,r,Array.from(_.values()));if(!w.isValid){u(w.error),o(n||"");return}s!==(n||"")&&(h(s),u(void 0)),x.target.blur()}else x.key==="Escape"&&(x.preventDefault(),o(n||""),u(void 0),x.target.blur())};return l.jsxs(l.Fragment,{children:[l.jsx(uw,{legend:e,icon:ER,className:a,children:l.jsx("input",{className:"react-aria-Input",type:"text",value:s,onChange:x=>m(x.target.value),onFocus:f,onBlur:g,onKeyDown:v,placeholder:i,"aria-invalid":c?"true":"false","aria-describedby":c?"customid-error":void 0})}),c&&l.jsx("div",{id:"customid-error",className:"react-aria-FieldError",role:"alert",children:c})]})});function dw({title:t,icon:e,actions:n,collapsible:r=!1,isCollapsed:i=!1,onToggle:a,className:s=""}){return l.jsxs("div",{className:`section-header ${r?"collapsible":""} ${i?"collapsed":""} ${s}`.trim(),onClick:r&&a?a:void 0,style:{cursor:r?"pointer":"default"},children:[l.jsxs("div",{className:"section-title",children:[r&&l.jsx("span",{className:"collapse-icon",style:{marginRight:"8px"},children:i?"":""}),e&&l.jsx("span",{className:"section-icon",children:e}),t]}),n&&l.jsx("div",{className:"header-actions",children:n})]})}function ya({icon:t,message:e,description:n,className:r=""}){return l.jsx("div",{className:`inspector empty ${r}`.trim(),children:l.jsxs("div",{className:"empty-state",children:[t&&l.jsx("div",{className:"empty-icon",children:t}),l.jsx("p",{className:"empty-message",children:e}),n&&l.jsx("p",{className:"empty-description",children:n})]})})}function IY({icon:t,message:e=" ...",description:n,size:r="md",className:i=""}){return l.jsx("div",{className:`inspector loading ${i}`.trim(),children:l.jsxs("div",{className:"loading-state",children:[t||l.jsx("div",{className:`spinner spinner-${r}`,"aria-label":"Loading",children:l.jsx("svg",{className:"spinner-svg",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("circle",{className:"spinner-circle",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"4"})})}),l.jsx("p",{className:"loading-message",children:e}),n&&l.jsx("p",{className:"loading-description",children:n})]})})}function YMe({count:t,primaryElementType:e,onCopyAll:n,onPasteAll:r,onDeleteAll:i,onClearSelection:a,onGroupSelection:s,onAlign:o,onDistribute:c,className:u=""}){return l.jsxs("div",{className:`multi-select-status ${u}`.trim(),children:[l.jsxs("div",{className:"status-header",children:[l.jsxs("div",{className:"status-count",children:[l.jsx("span",{className:"count-number",children:t}),l.jsx("span",{className:"count-label",children:"  "})]}),e&&l.jsxs("div",{className:"primary-element-badge",children:[l.jsx("span",{className:"badge-label",children:"Primary:"}),l.jsx("span",{className:"badge-type",children:e})]})]}),l.jsxs("div",{className:"status-actions",children:[l.jsxs("div",{className:"action-group",children:[l.jsx("span",{className:"group-label",children:""}),l.jsxs(Ut,{variant:"ghost",size:"sm",onPress:n,"aria-label":"Copy all selected elements (Cmd+Shift+C)",isDisabled:t===0,children:[l.jsx(_R,{color:se.color,size:se.size,strokeWidth:se.stroke}),l.jsx("span",{children:" "}),l.jsx("span",{className:"shortcut-hint",children:"C"})]}),l.jsxs(Ut,{variant:"ghost",size:"sm",onPress:r,"aria-label":"Paste copied elements (Cmd+Shift+V)",children:[l.jsx(xR,{color:se.color,size:se.size,strokeWidth:se.stroke}),l.jsx("span",{children:""}),l.jsx("span",{className:"shortcut-hint",children:"V"})]})]}),l.jsxs("div",{className:"action-group",children:[l.jsx("span",{className:"group-label",children:""}),l.jsxs(Ut,{variant:"ghost",size:"sm",onPress:s,"aria-label":"Group selected elements (Cmd+G)",isDisabled:t<2,children:[l.jsx(ly,{color:se.color,size:se.size,strokeWidth:se.stroke}),l.jsx("span",{children:""}),l.jsx("span",{className:"shortcut-hint",children:"G"})]})]}),o&&l.jsxs("div",{className:"action-group",children:[l.jsx("span",{className:"group-label",children:""}),l.jsxs("div",{className:"button-row",children:[l.jsx(Ut,{variant:"ghost",size:"sm",onPress:()=>o("left"),"aria-label":"Align left (Cmd+Shift+L)",isDisabled:t<2,children:l.jsx(AR,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(Ut,{variant:"ghost",size:"sm",onPress:()=>o("center"),"aria-label":"Align horizontal center (Cmd+Shift+H)",isDisabled:t<2,children:l.jsx(n9,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(Ut,{variant:"ghost",size:"sm",onPress:()=>o("right"),"aria-label":"Align right (Cmd+Shift+R)",isDisabled:t<2,children:l.jsx(r9,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(Ut,{variant:"ghost",size:"sm",onPress:()=>o("top"),"aria-label":"Align top (Cmd+Shift+T)",isDisabled:t<2,children:l.jsx($B,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(Ut,{variant:"ghost",size:"sm",onPress:()=>o("middle"),"aria-label":"Align vertical middle (Cmd+Shift+M)",isDisabled:t<2,children:l.jsx(RB,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(Ut,{variant:"ghost",size:"sm",onPress:()=>o("bottom"),"aria-label":"Align bottom (Cmd+Shift+B)",isDisabled:t<2,children:l.jsx(IB,{color:se.color,size:se.size,strokeWidth:se.stroke})})]})]}),c&&l.jsxs("div",{className:"action-group",children:[l.jsx("span",{className:"group-label",children:""}),l.jsxs("div",{className:"button-row",children:[l.jsx(Ut,{variant:"ghost",size:"sm",onPress:()=>c("horizontal"),"aria-label":"Distribute horizontally (Cmd+Shift+D)",isDisabled:t<3,children:l.jsx(jte,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(Ut,{variant:"ghost",size:"sm",onPress:()=>c("vertical"),"aria-label":"Distribute vertically (Cmd+Alt+Shift+V)",isDisabled:t<3,children:l.jsx(Fte,{color:se.color,size:se.size,strokeWidth:se.stroke})})]})]}),l.jsxs("div",{className:"action-group",children:[l.jsx("span",{className:"group-label",children:""}),l.jsxs(Ut,{variant:"ghost",size:"sm",onPress:i,"aria-label":"Delete all selected elements (Delete)",isDisabled:t===0,children:[l.jsx(Ws,{color:se.color,size:se.size,strokeWidth:se.stroke}),l.jsx("span",{children:" "}),l.jsx("span",{className:"shortcut-hint",children:""})]}),l.jsxs(Ut,{variant:"ghost",size:"sm",onPress:a,"aria-label":"Clear selection (Esc)",isDisabled:t===0,children:[l.jsx(ol,{color:se.color,size:se.size,strokeWidth:se.stroke}),l.jsx("span",{children:" "}),l.jsx("span",{className:"shortcut-hint",children:"Esc"})]})]})]}),l.jsxs("div",{className:"status-info",children:[l.jsx("p",{className:"info-text",children:"  .     Inspector ."}),l.jsx("p",{className:"info-hint",children:"        ."})]})]})}function ZMe(t){if(t.length===0)return{commonProps:[],elementCount:0,elementTypes:[]};const e=Array.from(new Set(t.map(o=>o.tag))),r=t[0].props||{};return{commonProps:Object.keys(r).filter(o=>t.every(c=>o in(c.props||{}))).map(o=>{const c=t.map(f=>(f.props||{})[o]),u=c[0];if(c.every(f=>JSON.stringify(f)===JSON.stringify(u)))return{key:o,value:u,isMixed:!1};{const f=Array.from(new Set(c.map(m=>JSON.stringify(m)))).map(m=>JSON.parse(m));return{key:o,value:u,isMixed:!0,uniqueValues:f}}}),elementCount:t.length,elementTypes:e}}function JMe(t,e){if(e==="all")return t;const s={layout:["display","flexDirection","justifyContent","alignItems","gap","width","height","padding","margin"],style:["backgroundColor","color","border","borderRadius","boxShadow","opacity"],content:["children","label","placeholder","value","defaultValue"]}[e];return t.filter(o=>s.includes(o.key))}function QMe(t){return!["id","customId","key","data-element-id"].includes(t)}function e4e(t){return["color","backgroundColor","borderColor","fill","stroke"].some(s=>t.toLowerCase().includes(s.toLowerCase()))?"color":["width","height","padding","margin","gap","top","left","right","bottom","borderRadius","borderWidth"].some(s=>t.toLowerCase().includes(s.toLowerCase()))?"dimension":["disabled","isDisabled","readonly","isReadonly","required","isRequired","selected","isSelected","checked","isChecked","open","isOpen"].includes(t)?"boolean":["variant","size","display","flexDirection","justifyContent","alignItems","textAlign","fontWeight","position"].includes(t)?"select":["opacity","zIndex","order","tabIndex","step"].includes(t)?"number":"string"}function t4e({selectedElements:t,onBatchUpdate:e,className:n=""}){const[r,i]=T.useState("all"),[a,s]=T.useState({}),[o,c]=T.useState(!1),u=T.useMemo(()=>ZMe(t),[t]),h=T.useMemo(()=>{const E=JMe(u.commonProps,r);return o?E.filter(A=>A.isMixed):E},[u.commonProps,r,o]),f=T.useMemo(()=>h.filter(E=>QMe(E.key)),[h]),m=T.useMemo(()=>u.commonProps.filter(E=>E.isMixed).length,[u.commonProps]),g=T.useCallback((E,A)=>{s(N=>({...N,[E]:A}))},[]),v=T.useCallback(()=>{Object.keys(a).length>0&&(e(a),s({}))},[a,e]),x=T.useCallback(()=>{s({})},[]),_=T.useCallback((E,A)=>E in a?a[E]:A,[a]),w=E=>{const{key:A,value:N,isMixed:P}=E,R=_(A,N),D=A in a,k=e4e(A),L=l.jsxs("span",{className:"batch-property-label",children:[A,P&&l.jsx("span",{className:"mixed-badge",children:"Mixed"}),D&&l.jsx("span",{className:"pending-badge",children:"Pending"})]});return k==="boolean"||typeof N=="boolean"?l.jsx(Jo,{label:L,isSelected:R,onChange:$=>g(A,$)},A):k==="number"||typeof N=="number"?l.jsx(Xi,{label:L,value:P&&!D?"":String(R),onChange:$=>{if($==="")return;const B=Number($);isNaN(B)||g(A,B)},placeholder:P&&!D?`Mixed (${E.uniqueValues?.length} values)`:void 0},A):k==="color"?l.jsx(Xi,{label:L,value:P&&!D?"":String(R),onChange:$=>g(A,$),placeholder:P&&!D?"Mixed colors":void 0,type:"color"},A):k==="select"?l.jsx(ja,{label:L,value:String(R),onChange:$=>g(A,$),options:[{value:String(R),label:String(R)}]},A):l.jsx(Xi,{label:L,value:P&&!D?"":String(R),onChange:$=>g(A,$),placeholder:P&&!D?`Mixed (${E.uniqueValues?.length} values)`:void 0},A)};if(u.elementCount===0)return null;const S=Object.keys(a).length>0;return l.jsxs("div",{className:`batch-property-editor ${n}`.trim(),children:[l.jsxs("div",{className:"batch-header",children:[l.jsxs("div",{className:"batch-info",children:[l.jsxs("p",{className:"batch-count",children:[u.elementCount,"   "]}),l.jsxs("p",{className:"batch-types",children:[": ",u.elementTypes.join(", ")]}),m>0&&l.jsxs("p",{className:"batch-mixed",children:[l.jsx("span",{className:"mixed-indicator",children:""}),m,"     "]})]}),l.jsxs("div",{className:"batch-controls",children:[l.jsx(ja,{label:"",value:r,onChange:E=>i(E),options:[{value:"all",label:""},{value:"layout",label:""},{value:"style",label:""},{value:"content",label:""}]}),m>0&&l.jsx(Jo,{label:"Mixed ",isSelected:o,onChange:c})]})]}),l.jsx(uw,{legend:" ",children:f.length===0?l.jsx("p",{className:"batch-empty",children:o?"Mixed    .":"    ."}):f.map(E=>w(E))}),S&&l.jsxs("div",{className:"batch-actions",children:[l.jsxs(Ut,{variant:"ghost",size:"sm",onPress:v,"aria-label":"Apply all pending changes",children:[l.jsx(FB,{color:se.color,size:se.size,strokeWidth:se.stroke}),l.jsxs("span",{children:["  (",Object.keys(a).length,")"]})]}),l.jsxs(Ut,{variant:"ghost",size:"sm",onPress:x,"aria-label":"Reset all pending changes",children:[l.jsx(Jm,{color:se.color,size:se.size,strokeWidth:se.stroke}),l.jsx("span",{children:""})]})]}),l.jsxs("div",{className:"batch-footer",children:[l.jsx("p",{className:"batch-hint",children:'  " "   .'}),S&&l.jsxs("p",{className:"batch-warning",children:[" ",Object.keys(a).length,"   ."]})]})]})}function n4e({allElements:t,onFilteredElements:e,className:n=""}){const[r,i]=T.useState("all"),[a,s]=T.useState(""),[o,c]=T.useState(""),[u,h]=T.useState(""),[f,m]=T.useState(!1),g=T.useMemo(()=>{const _=new Set;return t.forEach(w=>{_.add(w.tag)}),Array.from(_).sort()},[t]),v=()=>{let _=[];switch(r){case"all":_=t;break;case"type":case"tag":a&&(_=t.filter(S=>S.tag===a));break;case"property":o&&(_=t.filter(S=>{const E=S.props||{};return o in E?u?String(E[o]||"").toLowerCase().includes(u.toLowerCase()):o in E:!1}));break}const w=_.map(S=>S.id);e(w),console.log(` [Filter] Applied ${r} filter, found ${w.length} elements`)},x=()=>{i("all"),setSelectedType(""),s(""),c(""),h(""),e(t.map(_=>_.id)),console.log(" [Filter] Cleared filter")};return f?l.jsxs("div",{className:`selection-filter ${n}`.trim(),children:[l.jsxs("div",{className:"filter-header",children:[l.jsxs("div",{className:"filter-title",children:[l.jsx(f5,{size:16}),l.jsx("span",{children:" "})]}),l.jsx(Ut,{variant:"ghost",size:"sm",onPress:()=>m(!1),"aria-label":"Hide filter options",children:l.jsx(ol,{size:16})})]}),l.jsxs("div",{className:"filter-content",children:[l.jsx(ja,{label:" ",value:r,onChange:_=>i(_),options:[{value:"all",label:""},{value:"type",label:""},{value:"tag",label:""},{value:"property",label:""}]}),(r==="type"||r==="tag")&&l.jsx(ja,{label:"",value:a,onChange:s,options:[{value:"",label:""},...g.map(_=>({value:_,label:_}))]}),r==="property"&&l.jsxs(l.Fragment,{children:[l.jsx(Xi,{label:" ",value:o,onChange:c,placeholder:": className, id, style"}),l.jsx(Xi,{label:"  ()",value:u,onChange:h,placeholder:"  (   )"})]}),l.jsxs("div",{className:"filter-actions",children:[l.jsx(Ut,{variant:"primary",size:"sm",onPress:v,isDisabled:(r==="type"||r==="tag")&&!a||r==="property"&&!o,children:" "}),l.jsx(Ut,{variant:"ghost",size:"sm",onPress:x,children:""})]})]})]}):l.jsx("div",{className:`selection-filter collapsed ${n}`.trim(),children:l.jsxs(Ut,{variant:"ghost",size:"sm",onPress:()=>m(!0),"aria-label":"Show filter options",children:[l.jsx(f5,{color:se.color,size:se.size,strokeWidth:se.stroke}),l.jsx("span",{children:""})]})})}const r4e=[{key:"C",modifier:"cmdShift",description:"Copy Properties",category:"Properties"},{key:"V",modifier:"cmdShift",description:"Paste Properties",category:"Properties"},{key:"C",modifier:"cmd",description:"Copy All Elements",category:"Editing"},{key:"V",modifier:"cmd",description:"Paste Elements",category:"Editing"},{key:"D",modifier:"cmd",description:"Duplicate Selection",category:"Editing"},{key:"Backspace",modifier:"none",description:"Delete Selected",category:"Editing"},{key:"A",modifier:"cmd",description:"Select All",category:"Selection"},{key:"Esc",modifier:"none",description:"Clear Selection",category:"Selection"},{key:"Tab",modifier:"none",description:"Next Element",category:"Selection"},{key:"Tab",modifier:"shift",description:"Previous Element",category:"Selection"},{key:"G",modifier:"cmd",description:"Group Selection",category:"Grouping"},{key:"G",modifier:"cmdShift",description:"Ungroup Selection",category:"Grouping"},{key:"L",modifier:"cmdShift",description:"Align Left",category:"Alignment"},{key:"H",modifier:"cmdShift",description:"Align Horizontal Center",category:"Alignment"},{key:"R",modifier:"cmdShift",description:"Align Right",category:"Alignment"},{key:"T",modifier:"cmdShift",description:"Align Top",category:"Alignment"},{key:"M",modifier:"cmdShift",description:"Align Vertical Middle",category:"Alignment"},{key:"B",modifier:"cmdShift",description:"Align Bottom",category:"Alignment"},{key:"D",modifier:"cmdShift",description:"Distribute Horizontally",category:"Distribution"},{key:"V",modifier:"cmdAltShift",description:"Distribute Vertically",category:"Distribution"},{key:"Z",modifier:"cmd",description:"Undo",category:"General"},{key:"Z",modifier:"cmdShift",description:"Redo",category:"General"},{key:"S",modifier:"cmd",description:"Save",category:"General"},{key:"?",modifier:"cmd",description:"Show This Help",category:"General"}];function xO(t){if(!t||t==="none")return"";const e=navigator.platform.toLowerCase().includes("mac"),n=e?"":"Ctrl",r=e?"":"Alt",i="";switch(t){case"cmd":return n;case"cmdShift":return`${n}${i}`;case"cmdAlt":return`${n}${r}`;case"cmdAltShift":return`${n}${r}${i}`;case"shift":return i;default:return""}}function i4e({isOpen:t,onClose:e,className:n=""}){const[r,i]=T.useState(new Set);if(!t)return null;const a=r4e.reduce((c,u)=>(c[u.category]||(c[u.category]=[]),c[u.category].push(u),c),{}),s=["General","Selection","Editing","Properties","Grouping","Alignment","Distribution"],o=c=>{i(u=>{const h=new Set(u);return h.has(c)?h.delete(c):h.add(c),h})};return l.jsxs("div",{className:`keyboard-shortcuts-help ${n}`.trim(),children:[l.jsx("div",{className:"shortcuts-overlay",onClick:e}),l.jsxs("div",{className:"shortcuts-panel",children:[l.jsxs("div",{className:"shortcuts-header",children:[l.jsxs("div",{className:"shortcuts-title",children:[l.jsx(Ore,{color:se.color,size:se.size,strokeWidth:se.stroke}),l.jsx("h2",{children:"Keyboard Shortcuts"})]}),l.jsx(Ut,{variant:"ghost",size:"sm",onPress:e,"aria-label":"Close keyboard shortcuts help",children:l.jsx(ol,{color:se.color,size:se.size,strokeWidth:se.stroke})})]}),l.jsx("div",{className:"shortcuts-content",children:s.map(c=>{const u=a[c];if(!u)return null;const h=r.has(c);return l.jsxs("div",{className:"shortcuts-category",children:[l.jsxs("button",{className:"category-header",onClick:()=>o(c),"aria-expanded":!h,children:[h?l.jsx(Ia,{size:16,strokeWidth:2}):l.jsx(_i,{size:16,strokeWidth:2}),l.jsx("h3",{children:c}),l.jsxs("span",{className:"category-count",children:["(",u.length,")"]})]}),!h&&l.jsx("div",{className:"shortcuts-list",children:u.map((f,m)=>l.jsxs("div",{className:"shortcut-item",children:[l.jsx("span",{className:"shortcut-description",children:f.description}),l.jsxs("kbd",{className:"shortcut-keys",children:[xO(f.modifier),xO(f.modifier)&&l.jsx("span",{className:"key-separator",children:"+"}),f.key]})]},`${c}-${m}`))})]},c)})}),l.jsx("div",{className:"shortcuts-footer",children:l.jsxs("p",{className:"shortcuts-hint",children:[" Press ",l.jsx("kbd",{children:"?"})," anytime to toggle this help panel"]})})]})]})}function a4e(t,e){const n=e.find(i=>i.id===t);if(!n)return[];const r=n.props.className||"";return e.filter(i=>i.id!==t&&i.tag===n.tag&&(i.props.className||"")===r).map(i=>i.id)}function s4e(t,e){const n=e.find(r=>r.id===t);return n?e.filter(r=>r.id!==t&&r.parent_id===n.parent_id).map(r=>r.id):[]}function o4e(t,e){const n=[],r=[t],i=new Set([t]);for(;r.length>0;){const a=r.shift();e.filter(o=>o.parent_id===a&&!i.has(o.id)).forEach(o=>{n.push(o.id),i.add(o.id),r.push(o.id)})}return n}function l4e(t,e){const n=e.find(r=>r.id===t);return!n||!n.parent_id?null:n.parent_id}function c4e(t,e){const n=e.find(r=>r.id===t);return n?e.filter(r=>r.id!==t&&r.tag===n.tag).map(r=>r.id):[]}function u4e(t,e){const n=e.find(i=>i.id===t);if(!n)return[];const r=n.props.className||"";return r?e.filter(i=>i.id!==t&&(i.props.className||"")===r).map(i=>i.id):[]}function d4e(t,e,n=.7){const r=e.find(s=>s.id===t);if(!r)return[];const i=r.props.style||{},a=Object.keys(i);return a.length===0?[]:e.filter(s=>{if(s.id===t)return!1;const o=s.props.style||{},c=Object.keys(o);return c.length===0?!1:a.filter(f=>i[f]===o[f]).length/Math.max(a.length,c.length)>=n}).map(s=>s.id)}function h4e(t,e){const n=e.find(f=>f.id===t);if(!n)return[];const r=[],i=a4e(t,e);i.length>0&&r.push({type:"similar",elementIds:i,count:i.length,description:"Similar elements (same tag and className)"});const a=s4e(t,e);a.length>0&&r.push({type:"siblings",elementIds:a,count:a.length,description:"Siblings (same parent)"});const s=o4e(t,e);s.length>0&&r.push({type:"children",elementIds:s,count:s.length,description:"All children (descendants)"});const o=l4e(t,e);o&&r.push({type:"parent",elementIds:[o],count:1,description:"Parent element"});const c=c4e(t,e);c.length>0&&r.push({type:"sameType",elementIds:c,count:c.length,description:`Same type (${n.tag})`});const u=u4e(t,e);if(u.length>0){const f=n.props.className||"";r.push({type:"sameClass",elementIds:u,count:u.length,description:`Same className (${f})`})}const h=d4e(t,e,.7);return h.length>0&&r.push({type:"sameStyle",elementIds:h,count:h.length,description:"Similar styles (70%+ match)"}),r}const f4e={similar:vN,siblings:PR,children:qB,parent:Mr,sameType:L2,sameClass:Bv,sameStyle:Pu};function p4e({referenceElement:t,allElements:e,onSelect:n,className:r=""}){const i=T.useMemo(()=>h4e(t.id,e),[t.id,e]),a=s=>{console.log(`[SmartSelection] Applying suggestion: ${s.type}, count: ${s.count}`),n(s.elementIds)};return i.length===0?l.jsx("div",{className:`smart-selection empty ${r}`.trim(),children:l.jsxs("div",{className:"empty-state",children:[l.jsx(vN,{size:24,color:"var(--color-text-tertiary)"}),l.jsx("p",{className:"empty-text",children:"No smart selection suggestions available"}),l.jsx("p",{className:"empty-hint",children:"Select an element with siblings, children, or similar elements to see suggestions"})]})}):l.jsxs("div",{className:`smart-selection ${r}`.trim(),children:[l.jsxs("div",{className:"smart-selection-header",children:[l.jsx(vN,{color:se.color,size:se.size,strokeWidth:se.stroke}),l.jsx("h3",{children:"Smart Select"}),l.jsxs("span",{className:"suggestion-count",children:[i.length," suggestions"]})]}),l.jsx("div",{className:"suggestions-list",children:i.map(s=>{const o=f4e[s.type];return l.jsxs(Ut,{variant:"ghost",size:"sm",onPress:()=>a(s),className:"suggestion-item",children:[l.jsx(o,{color:se.color,size:se.size,strokeWidth:se.stroke}),l.jsxs("div",{className:"suggestion-info",children:[l.jsx("span",{className:"suggestion-description",children:s.description}),l.jsxs("span",{className:"suggestion-count-badge",children:[s.count," found"]})]})]},s.type)})}),l.jsx("div",{className:"smart-selection-footer",children:l.jsx("p",{className:"footer-hint",children:" Click a suggestion to select matching elements"})})]})}const _O=5;class m4e{history=[];listeners=new Set;addSelection(e,n,r){if(e.length===0)return null;const i=this.createLabel(e,n),a={id:`selection-${Date.now()}`,elementIds:[...e],timestamp:Date.now(),label:i,pageId:r};return this.history.unshift(a),this.history.length>_O&&(this.history=this.history.slice(0,_O)),this.notifyListeners(),console.log(`[SelectionMemory] Added to history: ${i} (${e.length} elements)`),a}getHistory(){return[...this.history]}getEntry(e){return this.history.find(n=>n.id===e)||null}clearHistory(){this.history=[],this.notifyListeners(),console.log("[SelectionMemory] History cleared")}removeEntry(e){this.history=this.history.filter(n=>n.id!==e),this.notifyListeners(),console.log(`[SelectionMemory] Removed entry: ${e}`)}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>e())}createLabel(e,n){if(e.length===1){const a=n.find(s=>s.id===e[0]);return a?a.tag:"1 element"}const r=new Map;e.forEach(a=>{const s=n.find(o=>o.id===a);if(s){const o=r.get(s.tag)||0;r.set(s.tag,o+1)}});const i=Array.from(r.entries()).sort((a,s)=>s[1]-a[1]).slice(0,2);if(i.length===1){const[a,s]=i[0];return`${s} ${a}${s>1?"s":""}`}else if(i.length===2){const[a,s]=i[0],[o,c]=i[1];return`${s} ${a}${s>1?"s":""}, ${c} ${o}${c>1?"s":""}`}return`${e.length} elements`}}const P1=new m4e;function g4e(t){const n=Date.now()-t,r=Math.floor(n/1e3),i=Math.floor(r/60),a=Math.floor(i/60),s=Math.floor(a/24);return r<60?"just now":i<60?`${i} min${i>1?"s":""} ago`:a<24?`${a} hour${a>1?"s":""} ago`:s<7?`${s} day${s>1?"s":""} ago`:new Date(t).toLocaleDateString()}function v4e({currentPageId:t,onRestore:e,className:n=""}){const[r,i]=T.useState([]);T.useEffect(()=>{const u=()=>{i(P1.getHistory())};return u(),P1.subscribe(u)},[]);const a=r.filter(u=>!t||u.pageId===t),s=u=>{console.log(`[SelectionMemory] Restoring selection: ${u.label}`),e(u.elementIds)},o=(u,h)=>{h.stopPropagation(),P1.removeEntry(u)},c=()=>{confirm("Clear all selection history?")&&P1.clearHistory()};return a.length===0?l.jsx("div",{className:`selection-memory empty ${n}`.trim(),children:l.jsxs("div",{className:"empty-state",children:[l.jsx(p5,{size:24,color:"var(--color-text-tertiary)"}),l.jsx("p",{className:"empty-text",children:"No selection history"}),l.jsx("p",{className:"empty-hint",children:"Previous selections will appear here for quick access"})]})}):l.jsxs("div",{className:`selection-memory ${n}`.trim(),children:[l.jsxs("div",{className:"memory-header",children:[l.jsx(p5,{color:se.color,size:se.size,strokeWidth:se.stroke}),l.jsx("h3",{children:"Selection History"}),l.jsx("span",{className:"history-count",children:a.length}),a.length>0&&l.jsx(Ut,{variant:"ghost",size:"sm",onPress:c,"aria-label":"Clear all history",className:"clear-all-btn",children:l.jsx(Ws,{size:14})})]}),l.jsx("div",{className:"history-list",children:a.map(u=>l.jsxs("div",{className:"history-item",children:[l.jsxs(Ut,{variant:"ghost",size:"sm",onPress:()=>s(u),className:"history-item-btn",children:[l.jsx(TR,{color:se.color,size:se.size,strokeWidth:se.stroke}),l.jsxs("div",{className:"history-info",children:[l.jsx("span",{className:"history-label",children:u.label}),l.jsxs("span",{className:"history-time",children:[l.jsx(zB,{size:12}),g4e(u.timestamp)]})]})]}),l.jsx(Ut,{variant:"ghost",size:"sm",onPress:h=>o(u.id,h),"aria-label":"Delete history entry",className:"delete-btn",children:l.jsx(Ws,{size:14})})]},u.id))}),l.jsx("div",{className:"memory-footer",children:l.jsxs("p",{className:"footer-hint",children:[" Last ",Math.min(a.length,5)," selections saved"]})})]})}const y4e=[{value:"manual",label:" ",description:"    "},{value:"onMount",label:" ",description:"   1 "},{value:"interval",label:"",description:"   "}],b4e=[{value:"dataTable",label:"DataTable",icon:ba},{value:"api",label:"API",icon:t_},{value:"variable",label:"Variable",icon:D3},{value:"route",label:"Route Param",icon:ZB}],VBe=T.memo(function({label:e=" ",value:n,onChange:r,className:i,disabled:a}){const s=DI(),o=vT(),c=kI(),u=n?.source||"",h=n?.name||"",f=n?.path||"",m=n?.refreshMode||"manual",g=n?.refreshInterval||5e3,v=T.useCallback(()=>{switch(u){case"dataTable":return s.map(R=>({value:R.name,label:R.name,description:R.description}));case"api":return o.map(R=>({value:R.name,label:R.name,description:R.description}));case"variable":return c.map(R=>({value:R.name,label:R.name,description:`${R.scope} - ${R.type}`}));case"route":return[];default:return[]}},[u,s,o,c]),x=T.useCallback(R=>{const D=R;r(D?{source:D,name:"",path:""}:null)},[r]),_=T.useCallback(R=>{const D=R;u&&(console.log(` PropertyDataBinding: ${u}  "${D}" `),r({source:u,name:D,path:f,refreshMode:n?.refreshMode,refreshInterval:n?.refreshInterval}))},[u,f,n?.refreshMode,n?.refreshInterval,r]),w=T.useCallback(R=>{const D=R.target.value;u&&h&&r({source:u,name:h,path:D||void 0,refreshMode:n?.refreshMode,refreshInterval:n?.refreshInterval})},[u,h,n?.refreshMode,n?.refreshInterval,r]),S=T.useCallback(R=>{const D=R;u&&h&&r({source:u,name:h,path:n?.path,refreshMode:D,refreshInterval:D==="interval"?n?.refreshInterval||5e3:void 0})},[u,h,n?.path,n?.refreshInterval,r]),E=T.useCallback(R=>{const D=parseInt(R.target.value,10);u&&h&&!isNaN(D)&&D>0&&r({source:u,name:h,path:n?.path,refreshMode:"interval",refreshInterval:D})},[u,h,n?.path,r]),A=T.useCallback(()=>{r(null)},[r]),N=n?`{{${n.source}.${n.name}${n.path?"."+n.path:""}}}`:"",P=v();return l.jsx(uw,{legend:e,icon:ZB,className:i,children:l.jsxs("div",{className:"property-data-binding",children:[N&&l.jsxs("div",{className:"binding-preview",children:[l.jsx("code",{className:"binding-expression",children:N}),l.jsx("button",{className:"binding-clear",onClick:A,type:"button","aria-label":" ",children:l.jsx(ol,{size:14})})]}),l.jsx("div",{className:"binding-row",children:l.jsxs(wi,{className:"react-aria-Select binding-source-select",selectedKey:u||null,onSelectionChange:x,"aria-label":" ",isDisabled:a,children:[l.jsxs(Pt,{className:"react-aria-Button",children:[l.jsx(ai,{placeholder:" ..."}),l.jsx("span",{"aria-hidden":"true",className:"select-chevron",children:l.jsx(_i,{size:16})})]}),l.jsx(Yr,{className:"react-aria-Popover",children:l.jsx(Ar,{className:"react-aria-ListBox",children:b4e.map(R=>l.jsxs(En,{id:R.value,className:"react-aria-ListBoxItem",children:[l.jsx(R.icon,{size:14}),l.jsx("span",{children:R.label})]},R.value))})})]})}),u&&u!=="route"&&l.jsx("div",{className:"binding-row",children:P.length>0?l.jsxs(wi,{className:"react-aria-Select binding-name-select",selectedKey:h||null,onSelectionChange:_,"aria-label":" ",isDisabled:a,children:[l.jsxs(Pt,{className:"react-aria-Button",children:[l.jsx(ai,{placeholder:" ..."}),l.jsx("span",{"aria-hidden":"true",className:"select-chevron",children:l.jsx(_i,{size:16})})]}),l.jsx(Yr,{className:"react-aria-Popover",children:l.jsx(Ar,{className:"react-aria-ListBox",children:P.map(R=>l.jsx(En,{id:R.value,className:"react-aria-ListBoxItem",textValue:R.label,children:l.jsxs("div",{className:"binding-option",children:[l.jsx("span",{className:"binding-option-label",children:R.label}),R.description&&l.jsx("span",{className:"binding-option-desc",children:R.description})]})},R.value))})})]}):l.jsxs("div",{className:"binding-empty",children:[" ",u==="dataTable"?"DataTable":u==="api"?"API":"Variable"," ."]})}),u==="route"&&l.jsx("div",{className:"binding-row",children:l.jsx("input",{className:"react-aria-Input",type:"text",defaultValue:h,onBlur:R=>{const D=R.target.value;D&&r({source:"route",name:D,path:f})},placeholder:"  (: productId)",disabled:a},`route-${n?.name||""}`)}),u&&h&&l.jsx("div",{className:"binding-row",children:l.jsx("input",{className:"react-aria-Input binding-path-input",type:"text",defaultValue:f,onBlur:w,placeholder:"  (: items[0].name)",disabled:a},`path-${n?.source||""}-${n?.name||""}`)}),u&&h&&(u==="api"||u==="dataTable")&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"binding-row binding-refresh-row",children:[l.jsxs("label",{className:"binding-row-label",children:[l.jsx(Jm,{size:14}),l.jsx("span",{children:" "})]}),l.jsxs(wi,{className:"react-aria-Select binding-refresh-select",selectedKey:m,onSelectionChange:S,"aria-label":" ",isDisabled:a,children:[l.jsxs(Pt,{className:"react-aria-Button",children:[l.jsx(ai,{}),l.jsx("span",{"aria-hidden":"true",className:"select-chevron",children:l.jsx(_i,{size:16})})]}),l.jsx(Yr,{className:"react-aria-Popover",children:l.jsx(Ar,{className:"react-aria-ListBox",children:y4e.map(R=>l.jsx(En,{id:R.value,className:"react-aria-ListBoxItem",textValue:R.label,children:l.jsxs("div",{className:"binding-option",children:[l.jsx("span",{className:"binding-option-label",children:R.label}),l.jsx("span",{className:"binding-option-desc",children:R.description})]})},R.value))})})]})]}),m==="interval"&&l.jsxs("div",{className:"binding-row binding-interval-row",children:[l.jsx("label",{className:"binding-row-label",children:l.jsx("span",{children:" "})}),l.jsxs("div",{className:"binding-interval-input",children:[l.jsx("input",{className:"react-aria-Input",type:"number",min:"1000",step:"1000",defaultValue:g,onBlur:E,placeholder:"5000",disabled:a},`interval-${n?.source||""}-${n?.name||""}`),l.jsx("span",{className:"binding-interval-unit",children:"ms"})]})]})]})]})})});function x4e(){const{projectId:t}=yg(),e=qr(o=>o.activeTheme),n=qr(o=>o.tokens),r=o=>o==null?"":typeof o=="object"?JSON.stringify(o,null,2):String(o),i=T.useMemo(()=>{const o={};return n.forEach(c=>{const u=c.type||"other";o[u]||(o[u]=[]),o[u].push({name:c.name,value:r(c.value)})}),o},[n]),a=o=>({color:"Colors",spacing:"Spacing",borderRadius:"Border Radius",fontSize:"Font Size",fontWeight:"Font Weight",lineHeight:"Line Height",shadow:"Shadows",other:"Other"})[o]||o.charAt(0).toUpperCase()+o.slice(1),s=()=>{t&&window.open(`/theme/${t}`,"_blank")};return t?e?l.jsxs("div",{className:"themes-panel",children:[l.jsx(Ul,{icon:l.jsx(r_,{size:16}),title:"Themes",actions:l.jsx(Pt,{onPress:s,className:"iconButton",children:l.jsx(Bv,{size:16})})}),l.jsxs($a,{title:"Active Theme",children:[l.jsx(Xi,{label:"Theme Name",value:e.name||"",onChange:()=>{},disabled:!0,placeholder:"Theme name"}),l.jsx(Xi,{label:"Version",value:e.version||"1.0",onChange:()=>{},disabled:!0,placeholder:"Version"}),l.jsx(Xi,{label:"Status",value:e.status||"active",onChange:()=>{},disabled:!0,placeholder:"Status"})]}),Object.keys(i).length===0?l.jsxs($a,{title:"Theme Tokens",children:[l.jsx(ya,{message:"No custom tokens defined",description:"Create tokens in Theme Studio to customize your theme"}),l.jsx(Pt,{onPress:s,children:l.jsx(Bv,{size:16})})]}):l.jsxs(l.Fragment,{children:[Object.entries(i).map(([o,c])=>l.jsx($a,{title:a(o),children:c.map(u=>l.jsx(Xi,{label:u.name,value:u.value,onChange:()=>{},disabled:!0,placeholder:"Not set"},u.name))},o)),l.jsx($a,{title:"Advanced Editing",children:l.jsxs(Pt,{onPress:s,className:"iconButton",children:[l.jsx(Bv,{size:16}),"Manage All Tokens in Theme Studio"]})})]})]}):l.jsxs("div",{className:"themes-panel",children:[l.jsx(Ul,{icon:l.jsx(r_,{size:16}),title:"Themes",actions:l.jsx(Pt,{onPress:s,className:"iconButton",children:l.jsx(Bv,{size:16})})}),l.jsx(ya,{message:"No active theme",description:"Select a theme in Settings or create one in Theme Studio"})]}):l.jsx(ya,{message:"Project ID is required"})}function $Y({isActive:t}){return t?l.jsx(x4e,{}):null}const wO=Ks(t=>({messages:[],isStreaming:!1,currentContext:null,addUserMessage:e=>{const n={id:crypto.randomUUID(),role:"user",content:e,status:"complete",timestamp:Date.now()};t(r=>({messages:[...r.messages,n]}))},addAssistantMessage:(e,n)=>{const r={id:crypto.randomUUID(),role:"assistant",content:e,status:"complete",timestamp:Date.now(),metadata:n?{componentIntent:n}:void 0};t(i=>({messages:[...i.messages,r],isStreaming:!1}))},updateLastMessage:e=>{t(n=>{const r=[...n.messages],i=r[r.length-1];return i&&i.role==="assistant"&&(i.content=e,i.status="streaming"),{messages:r}})},setStreamingStatus:e=>{t({isStreaming:e}),e||t(n=>{const r=[...n.messages],i=r[r.length-1];return i&&i.role==="assistant"&&(i.status="complete"),{messages:r}})},updateContext:e=>{t({currentContext:e})},clearConversation:()=>{t({messages:[],isStreaming:!1})}}));function _4e(){throw new Error("Groq API   . .env  VITE_GROQ_API_KEY .")}class w4e{parse(e,n){const r=e.toLowerCase(),i=[this.parseButtonCreation,this.parseTableCreation,this.parseFormCreation,this.parseSelectCreation,this.parseStyleChange,this.parseLayoutChange,this.parseColorChange,this.parseDeleteAction];for(const a of i){const s=a.call(this,r,e,n);if(s)return s}return null}parseButtonCreation(e,n){const r=["","button",""," "],i=["","","","create","add"],a=r.some(o=>e.includes(o)),s=i.some(o=>e.includes(o));return a&&s?{action:"create",componentType:"Button",props:{children:this.extractText(n,["","button"])||""},styles:this.extractStyles(e),description:"  ."}:null}parseTableCreation(e){if(["","table","",""].some(i=>e.includes(i))){const i=this.guessDataEndpoint(e);return{action:"create",componentType:"Table",dataBinding:i?{baseUrl:"MOCK_DATA",endpoint:i}:void 0,description:"  ."}}return null}parseFormCreation(e){return["","form","",""].some(i=>e.includes(i))?{action:"create",componentType:"Form",description:"  ."}:null}parseSelectCreation(e){if(["","select","","dropdown"].some(i=>e.includes(i))){const i=this.guessDataEndpoint(e);return{action:"create",componentType:"Select",dataBinding:i?{baseUrl:"MOCK_DATA",endpoint:i}:void 0,description:"Select  ."}}return null}parseStyleChange(e,n,r){const i=["","color","","size",""],a=["","","","change"],s=i.some(c=>e.includes(c)),o=a.some(c=>e.includes(c));return s&&o&&r?.selectedElementId?{action:"style",targetElementId:r.selectedElementId,styles:this.extractStyles(e),description:"   ."}:null}parseLayoutChange(e,n,r){if(["","align","layout",""].some(s=>e.includes(s))&&r?.selectedElementId){const s={};if(e.includes("")||e.includes("left")?(s.justifyContent="flex-start",s.textAlign="left"):e.includes("")||e.includes("right")?(s.justifyContent="flex-end",s.textAlign="right"):(e.includes("")||e.includes("")||e.includes("center"))&&(s.justifyContent="center",s.textAlign="center"),Object.keys(s).length>0)return{action:"style",targetElementId:r.selectedElementId,styles:s,description:"   ."}}return null}parseColorChange(e,n,r){const i=this.extractColor(e);return i&&r?.selectedElementId?{action:"style",targetElementId:r.selectedElementId,styles:{backgroundColor:i},description:` ${i} .`}:null}parseDeleteAction(e,n,r){return["","","","delete","remove"].some(s=>e.includes(s))&&r?.selectedElementId?{action:"delete",targetElementId:r.selectedElementId,description:"  ."}:null}extractText(e,n){for(const r of n){const i=e.toLowerCase().indexOf(r);if(i!==-1){const a=e.slice(i+r.length).trim(),s=a.match(/["'](.+?)["']/);if(s)return s[1];const o=a.split(/\s+/).slice(0,3).join(" ");if(o)return o}}return null}extractColor(e){const n={:"red",:"red",:"blue",:"blue",:"green",:"green",:"yellow",:"yellow",:"black",:"black",:"white",:"white",:"gray",red:"red",blue:"blue",green:"green",yellow:"yellow",black:"black",white:"white",gray:"gray"};for(const[r,i]of Object.entries(n))if(e.includes(r))return i;return null}extractStyles(e){const n={},r=this.extractColor(e);return r&&(n.backgroundColor=r),n}guessDataEndpoint(e){const n={:"/countries",:"/countries",country:"/countries",countries:"/countries",:"/cities",city:"/cities",cities:"/cities",:"/products",product:"/products",products:"/products",:"/status",status:"/status",:"/users",:"/users",user:"/users",users:"/users",:"/departments",department:"/departments",departments:"/departments",:"/languages",language:"/languages",languages:"/languages",:"/currencies",currency:"/currencies",currencies:"/currencies"};for(const[r,i]of Object.entries(n))if(e.includes(r))return i;return null}}const S4e=new w4e;function E4e({message:t}){const{role:e,content:n,status:r,timestamp:i}=t,a=o=>new Date(o).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),s=()=>e==="user"?"U":e==="assistant"?"AI":"?";return l.jsxs("div",{className:"chat-message","data-role":e,"data-status":r,children:[l.jsx("div",{className:"avatar",children:s()}),l.jsxs("div",{className:"content",children:[l.jsx("div",{className:"bubble",children:n}),l.jsx("div",{className:"timestamp",children:a(i)})]})]})}function C4e({onSend:t,disabled:e=!1,placeholder:n=" ... (Shift+Enter )"}){const[r,i]=T.useState(""),a=T.useRef(null),s=()=>{const u=r.trim();u&&!e&&(t(u),i(""),a.current&&(a.current.style.height="auto"))},o=u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),s())},c=u=>{i(u.target.value);const h=u.target;h.style.height="auto",h.style.height=`${Math.min(h.scrollHeight,120)}px`};return l.jsxs("div",{className:"chat-input",children:[l.jsx("textarea",{ref:a,className:"textarea",value:r,onChange:c,onKeyDown:o,placeholder:n,disabled:e,rows:1}),l.jsx(Ut,{onPress:s,isDisabled:e||!r.trim(),type:"button",variant:"primary",size:"sm",children:""})]})}function T4e({messages:t,onSendMessage:e,isStreaming:n=!1,suggestions:r=["  ","   Select ","    ","    "]}){const i=T.useRef(null);T.useEffect(()=>{i.current?.scrollIntoView({behavior:"smooth"})},[t]);const a=s=>{e(s)};return l.jsxs("div",{className:"chatPanel",children:[l.jsx("div",{className:"chat-content messages",children:t.length===0?l.jsxs("div",{className:"chat-content-empty",children:[l.jsx(nie,{className:"chat-content-empty-icon"}),l.jsx("div",{className:"chat-content-empty-title",children:" "}),l.jsx("div",{className:"chat-content-empty-description",children:"     "}),l.jsx("div",{className:"chat-content-suggestions",children:r.map((s,o)=>l.jsx("button",{className:"chat-content-suggestion",onClick:()=>a(s),type:"button",children:s},o))})]}):l.jsxs(l.Fragment,{children:[t.map(s=>l.jsx(E4e,{message:s},s.id)),l.jsx("div",{ref:i})]})}),l.jsx(C4e,{onSend:e,disabled:n})]})}function M4e(){const{messages:t,isStreaming:e,currentContext:n,addUserMessage:r,addAssistantMessage:i,updateLastMessage:a,setStreamingStatus:s,updateContext:o,clearConversation:c}=wO(),u=$e(S=>S.elements),h=$e(S=>S.selectedElementId),f=$e(S=>S.currentPageId),m=$e(S=>S.addElement),g=$e(S=>S.updateElementProps),v=$e(S=>S.removeElement),x=T.useMemo(()=>{try{return _4e()}catch{return null}},[]);T.useEffect(()=>{const S={currentPageId:f||"default",selectedElementId:h||void 0,elements:u.map(E=>({id:E.id,tag:E.tag,props:E.props,parent_id:E.parent_id??null})),recentChanges:[]};o(S)},[u,h,f,o]);const _=T.useCallback(async S=>{try{switch(S.action){case"create":{if(!S.componentType)return;let E=null;if(h)E=h;else{const N=u.find(P=>P.tag==="body");N&&(E=N.id)}const A={id:crypto.randomUUID(),tag:S.componentType,props:S.props||{},parent_id:E,page_id:f||"default",order_num:u.length,dataBinding:void 0};S.styles&&Object.keys(S.styles).length>0&&(A.props={...A.props,style:S.styles}),S.dataBinding&&(A.dataBinding={type:"collection",source:"api",config:{baseUrl:S.dataBinding.baseUrl,endpoint:S.dataBinding.endpoint,params:S.dataBinding.params||{},dataMapping:{idField:"id",labelField:"name"}}}),await m(A);break}case"modify":case"style":{if(!S.targetElementId)return;const E=S.targetElementId==="current"?h:S.targetElementId;if(!E)return;const A={};S.props&&Object.assign(A,S.props),S.styles&&(A.style={...u.find(N=>N.id===E)?.props.style||{},...S.styles}),await g(E,A);break}case"delete":{if(!S.targetElementId)return;const E=S.targetElementId==="current"?h:S.targetElementId;if(!E)return;await v(E);break}case"query":break;default:}}catch(E){throw E}},[f,u,h,m,g,v]),w=T.useCallback(async S=>{if(n){r(S);try{if(x){s(!0),i("");let E="";try{for await(const N of x.chatStream(S,n))E+=N,a(E);s(!1);const A=x.parseIntent(E);if(A){await _(A);const N=wO.getState().messages,P=N[N.length-1];P&&(P.metadata={componentIntent:A})}}catch(A){throw s(!1),A}}else throw new Error("Groq service not available")}catch{const A=S4e.parse(S,n);if(A){const N=A.description||" .";i(N,A),await _(A)}else i(".   .  .")}}},[n,r,i,a,s,_,x]);return l.jsxs("div",{className:"ai-panel",children:[l.jsx(Ul,{icon:l.jsx(jB,{size:16}),title:"AI Assistant",actions:t.length>0&&l.jsx("button",{className:"iconButton",onClick:c,type:"button","aria-label":"Clear conversation",title:" ",children:l.jsx(Ws,{color:se.color,strokeWidth:se.stroke,size:se.size})})}),l.jsx(T4e,{messages:t,onSendMessage:w,isStreaming:e})]})}function jY({isActive:t}){return t?l.jsx(M4e,{}):null}class Hv{static instance;validationErrors=[];statusMessage="";metrics={saveOperations:0,averageSaveTime:0,skipCounts:{preview:0,validation:0}};constructor(){}static getInstance(){return Hv.instance||(Hv.instance=new Hv),Hv.instance}getValidationErrors(){return this.validationErrors}clearValidationErrors(){this.validationErrors=[]}getStatusMessage(){return this.statusMessage}getPerformanceMetrics(){return this.metrics}validateSerializable(e){const n={};for(const[r,i]of Object.entries(e))try{JSON.stringify(i),n[r]=i}catch{this.validationErrors.push({elementId:"unknown",field:r,message:"  .",timestamp:new Date}),this.metrics.skipCounts.validation++,this.statusMessage=`     - : ${r}`}return n}async saveToIndexedDB(e){const{table:n,id:r,data:i}=e;try{await(await Yt())[n].update(r,i),this.statusMessage=` [IndexedDB] ${n}  : ${r}`}catch(a){throw this.statusMessage=` [IndexedDB]  : ${a instanceof Error?a.message:"   "}`,console.warn(` [IndexedDB] ${n}   :`,a),a}}async savePropertyChange(e,n={}){const r=performance.now();if(n.source==="preview"&&!n.allowPreviewSaves){this.metrics.skipCounts.preview++;return}if(n.validateSerialization)try{this.validateSerializable(e.data)}catch(o){this.validationErrors.push({elementId:e.id,field:Object.keys(e.data)[0]||"unknown",message:o instanceof Error?o.message:"    ",timestamp:new Date});return}const{isRealtimeMode:i,addPendingChange:a}=$k();if(i)await this.saveToIndexedDB(e);else{const o=`${e.table}:${e.id}`;a(o,e.data)}const s=performance.now();this.metrics.saveOperations++,this.metrics.averageSaveTime=(this.metrics.averageSaveTime*(this.metrics.saveOperations-1)+(s-r))/this.metrics.saveOperations}async saveAllPendingChanges(){const{getPendingChanges:e,clearPendingChanges:n}=$k(),r=e();if(r.size===0){this.statusMessage="   .";return}this.statusMessage=` ${r.size}    ...`;const i=[];r.forEach((a,s)=>{const[o,c]=s.split(":");if(!o||!c){this.statusMessage=`   : ${s}`;return}i.push(this.syncToCloud({table:o,id:c,data:a}))});try{await Promise.all(i),n(),this.statusMessage=` ${r.size}    `}catch(a){throw this.statusMessage=`   : ${a instanceof Error?a.message:"   "}`,a}}async syncToCloud(e){const{table:n,id:r,data:i}=e,{error:a}=await zr.from(n).update(i).eq("id",r);if(a)throw this.statusMessage=`   : ${a.message}`,a}resetMetrics(){this.metrics={saveOperations:0,averageSaveTime:0,skipCounts:{preview:0,validation:0}},this.statusMessage=" SaveService   ."}getDetailedReport(){const e=this.metrics.skipCounts.preview+this.metrics.skipCounts.validation,n=this.metrics.saveOperations>0?((this.metrics.saveOperations-this.validationErrors.length)/this.metrics.saveOperations*100).toFixed(2):"100.00";return{metrics:this.metrics,validationErrors:this.validationErrors,summary:` : ${this.metrics.saveOperations},  : ${this.metrics.averageSaveTime.toFixed(2)}ms, : ${e}, : ${n}%`}}}const Rm=Hv.getInstance();typeof window<"u"&&(window.saveServiceUtils={getReport:()=>Rm.getDetailedReport(),getMetrics:()=>Rm.getPerformanceMetrics(),getValidationErrors:()=>Rm.getValidationErrors(),resetMetrics:()=>Rm.resetMetrics(),clearValidationErrors:()=>Rm.clearValidationErrors()});function r$(t){const{projectId:e,enableRealtime:n=!0}=t,r=qr(v=>v.themes),i=qr(v=>v.loading),a=qr(v=>v.error),s=qr(v=>v.setProjectId),o=qr(v=>v.loadThemes),c=qr(v=>v.createTheme),u=qr(v=>v.updateTheme),h=qr(v=>v.deleteTheme),f=qr(v=>v.duplicateTheme),m=qr(v=>v.activateTheme),g=qr(v=>v.subscribeToThemes);return T.useEffect(()=>{s(e),o(e)},[e]),T.useEffect(()=>{if(!n)return;const v=g();return()=>{v&&v()}},[n]),{themes:r,loading:i,error:a,refetch:async()=>{await o(e)},createTheme:(v,x,_)=>c(v,x,_,e),updateTheme:u,deleteTheme:v=>h(v,e),duplicateTheme:(v,x,_)=>f(v,x,_,e),activateTheme:v=>m(v,e)}}function A4e(){throw new Error("Groq API   . .env  VITE_GROQ_API_KEY .")}const SO="https://api.figma.com/v1";class P4e{accessToken;constructor(e){this.accessToken=e}async getFile(e){const n=await fetch(`${SO}/files/${e}`,{headers:{"X-Figma-Token":this.accessToken}});if(!n.ok)throw new Error(`Figma API : ${n.status} ${n.statusText}`);return n.json()}async getStyles(e){const n=await this.getFile(e),r=[],i=[],a=[];return n.styles&&Object.values(n.styles).forEach(s=>{s.styleType==="FILL"?r.push(s):s.styleType==="TEXT"?i.push(s):s.styleType==="EFFECT"&&a.push(s)}),{colors:r,textStyles:i,effects:a}}async getVariables(e){const n=await fetch(`${SO}/files/${e}/variables/local`,{headers:{"X-Figma-Token":this.accessToken}});if(!n.ok)throw new Error(`Figma Variables API : ${n.status} ${n.statusText}`);return(await n.json()).meta?.variables||[]}async importStyles(e){const n={success:!0,imported:{colors:0,textStyles:0,effects:0,variables:0,total:0},skipped:0,errors:[],tokens:[]};try{const r=await Ir.getResolvedTokens(e.themeId);if(e.importColors!==!1){const{colors:i}=await this.getStyles(e.fileKey),a=await this.importColorStyles(i,e,r,n.errors);n.tokens.push(...a),n.imported.colors=a.length}if(e.importTextStyles!==!1){const{textStyles:i}=await this.getStyles(e.fileKey),a=await this.importTextStyles(i,e,r,n.errors);n.tokens.push(...a),n.imported.textStyles=a.length}if(e.importEffects!==!1){const{effects:i}=await this.getStyles(e.fileKey),a=await this.importEffectStyles(i,e,r,n.errors);n.tokens.push(...a),n.imported.effects=a.length}if(e.importVariables!==!1){const i=await this.getVariables(e.fileKey),a=await this.importVariables(i,e,r,n.errors);n.tokens.push(...a),n.imported.variables=a.length}n.imported.total=n.tokens.length,n.tokens.length>0&&await Ir.bulkUpsertTokens(n.tokens),n.success=n.errors.length===0}catch(r){n.success=!1,n.errors.push({styleName:"ALL",styleType:"color",reason:" Import ",details:r instanceof Error?r.message:"   "})}return n}async importColorStyles(e,n,r,i){const a=[];for(const s of e)try{const o=this.convertFigmaNameToTokenName(s.name);if(r.find(u=>u.name===o)){if(n.conflictResolution==="skip")continue;if(n.conflictResolution==="rename"){const u=`${o}.figma`;a.push(this.createColorToken(n,s,u));continue}}a.push(this.createColorToken(n,s,o))}catch(o){i.push({styleName:s.name,styleType:"color",reason:"  ",details:o instanceof Error?o.message:"   "})}return a}createColorToken(e,n,r){let i;if(n.color){const a={r:Math.round(n.color.r*255),g:Math.round(n.color.g*255),b:Math.round(n.color.b*255),a:n.color.a};i=jk(a)}else i={h:0,s:0,l:50,a:1};return{project_id:e.projectId,theme_id:e.themeId,name:r,type:"color",value:i,scope:"raw",css_variable:`--${r.replace(/\./g,"-")}`}}async importTextStyles(e,n,r,i){const a=[];for(const s of e)try{const o=this.convertFigmaNameToTokenName(s.name);if(r.find(u=>u.name===o)&&n.conflictResolution==="skip")continue;a.push({project_id:n.projectId,theme_id:n.themeId,name:`${o}.fontFamily`,type:"typography",value:s.fontFamily,scope:"raw",css_variable:`--${o.replace(/\./g,"-")}-font`},{project_id:n.projectId,theme_id:n.themeId,name:`${o}.fontSize`,type:"typography",value:`${s.fontSize}px`,scope:"raw",css_variable:`--${o.replace(/\./g,"-")}-size`},{project_id:n.projectId,theme_id:n.themeId,name:`${o}.fontWeight`,type:"typography",value:s.fontWeight,scope:"raw",css_variable:`--${o.replace(/\./g,"-")}-weight`})}catch(o){i.push({styleName:s.name,styleType:"text",reason:"   ",details:o instanceof Error?o.message:"   "})}return a}async importEffectStyles(e,n,r,i){const a=[];for(const s of e)try{const o=this.convertFigmaNameToTokenName(s.name),c=s.effects.find(u=>u.type==="DROP_SHADOW");if(!c)continue;a.push({project_id:n.projectId,theme_id:n.themeId,name:o,type:"shadow",value:{offsetX:`${c.offset?.x||0}px`,offsetY:`${c.offset?.y||0}px`,blur:`${c.radius}px`,spread:`${c.spread||0}px`,color:c.color?`rgba(${Math.round(c.color.r*255)}, ${Math.round(c.color.g*255)}, ${Math.round(c.color.b*255)}, ${c.color.a})`:"rgba(0, 0, 0, 0.1)"},scope:"raw",css_variable:`--${o.replace(/\./g,"-")}`})}catch(o){i.push({styleName:s.name,styleType:"effect",reason:"  ",details:o instanceof Error?o.message:"   "})}return a}async importVariables(e,n,r,i){const a=[];for(const s of e)try{const o=this.convertFigmaNameToTokenName(s.name),c=Object.keys(s.valuesByMode)[0],u=s.valuesByMode[c];if(u.type==="COLOR"&&u.color){const h={r:Math.round(u.color.r*255),g:Math.round(u.color.g*255),b:Math.round(u.color.b*255),a:u.color.a},f=jk(h);a.push({project_id:n.projectId,theme_id:n.themeId,name:o,type:"color",value:f,scope:"raw",css_variable:`--${o.replace(/\./g,"-")}`})}else u.type==="FLOAT"&&a.push({project_id:n.projectId,theme_id:n.themeId,name:o,type:"spacing",value:`${u.value}px`,scope:"raw",css_variable:`--${o.replace(/\./g,"-")}`})}catch(o){i.push({styleName:s.name,styleType:"variable",reason:"Variable  ",details:o instanceof Error?o.message:"   "})}return a}convertFigmaNameToTokenName(e){return e.toLowerCase().replace(/\//g,".").replace(/\s+/g,"-").replace(/[^a-z0-9.-]/g,"").replace(/^\.+|\.+$/g,"")}async exportStyles(e){return{success:!1,exported:{colors:0,textStyles:0,effects:0,variables:0,total:0},errors:[{tokenName:"ALL",tokenType:"all",reason:"Export Figma Plugin   ",details:"Figma REST API    . Figma Plugin   ."}],figmaFileUrl:`https://www.figma.com/file/${e.fileKey}`}}}function N4e(t){const e=t||void 0;if(!e)throw new Error("Figma Access Token  . .env  VITE_FIGMA_ACCESS_TOKEN .");return new P4e(e)}class EO{static async exportTokens(e,n){switch(n.format){case"css":return this.exportToCSS(e,n);case"tailwind":return this.exportToTailwind(e,n);case"scss":return this.exportToSCSS(e,n);case"json":return this.exportToJSON(e,n);default:throw new Error(`Unsupported export format: ${n.format}`)}}static exportToCSS(e,n){const r=[];if(n.includeComments!==!1&&(r.push("/**"),r.push(" * Design Tokens - CSS Variables"),r.push(` * Generated: ${new Date().toISOString()}`),r.push(` * Total tokens: ${e.length}`),r.push(" */"),r.push("")),r.push(":root {"),n.groupByCategory){const a=this.groupTokensByCategory(e);Object.entries(a).forEach(([s,o])=>{n.includeComments!==!1&&r.push(`  /* ${s} */`),o.forEach(c=>{const u=this.tokenValueToCSS(c);r.push(`  ${c.css_variable||`--${c.name.replace(/\./g,"-")}`}: ${u};`)}),r.push("")})}else e.forEach(a=>{const s=this.tokenValueToCSS(a);r.push(`  ${a.css_variable||`--${a.name.replace(/\./g,"-")}`}: ${s};`)});return r.push("}"),{format:"css",content:n.minify?r.join("").replace(/\s+/g," "):r.join(`
`),filename:"tokens.css",mimeType:"text/css"}}static exportToTailwind(e,n){const r={theme:{extend:{}}},i=this.groupTokensByCategory(e);Object.entries(i).forEach(([o,c])=>{const u=this.getTailwindSection(o);u&&(r.theme.extend[u]={},c.forEach(h=>{const f=this.extractTailwindKey(h.name),m=this.tokenValueToTailwind(h);f&&m&&(r.theme.extend[u][f]=m)}))});const a=n.minify?JSON.stringify(r):JSON.stringify(r,null,2),s=[];return n.includeComments!==!1&&(s.push("/**"),s.push(" * Design Tokens - Tailwind Config"),s.push(` * Generated: ${new Date().toISOString()}`),s.push(" */"),s.push("")),s.push("module.exports = "+a),{format:"tailwind",content:s.join(`
`),filename:"tailwind.config.js",mimeType:"application/javascript"}}static exportToSCSS(e,n){const r=[];if(n.includeComments!==!1&&(r.push("//"),r.push("// Design Tokens - SCSS Variables"),r.push(`// Generated: ${new Date().toISOString()}`),r.push(`// Total tokens: ${e.length}`),r.push("//"),r.push("")),n.groupByCategory){const a=this.groupTokensByCategory(e);Object.entries(a).forEach(([s,o])=>{n.includeComments!==!1&&r.push(`// ${s}`),o.forEach(c=>{const u=this.tokenValueToSCSS(c);r.push(`$${c.name.replace(/\./g,"-")}: ${u};`)}),r.push("")})}else e.forEach(a=>{const s=this.tokenValueToSCSS(a);r.push(`$${a.name.replace(/\./g,"-")}: ${s};`)});return{format:"scss",content:n.minify?r.join("").replace(/\s+/g," "):r.join(`
`),filename:"tokens.scss",mimeType:"text/x-scss"}}static exportToJSON(e,n){const r=e.map(a=>({name:a.name,type:a.type,value:a.value,scope:a.scope,css_variable:a.css_variable}));return{format:"json",content:n.minify?JSON.stringify(r):JSON.stringify(r,null,2),filename:"tokens.json",mimeType:"application/json"}}static tokenValueToCSS(e){switch(e.type){case"color":return e.value&&typeof e.value=="object"?x3(e.value):String(e.value);case"spacing":case"typography":return String(e.value);case"shadow":if(MY(e.value)){const n=e.value;return`${n.offsetX} ${n.offsetY} ${n.blur} ${n.spread} ${n.color}`}return String(e.value);default:return JSON.stringify(e.value)}}static tokenValueToTailwind(e){switch(e.type){case"color":return e.value&&typeof e.value=="object"?yCe(e.value):String(e.value);default:return String(e.value)}}static tokenValueToSCSS(e){return this.tokenValueToCSS(e)}static groupTokensByCategory(e){return e.reduce((n,r)=>{const i=r.name.split(".")[0]||"other";return n[i]||(n[i]=[]),n[i].push(r),n},{})}static getTailwindSection(e){return{color:"colors",spacing:"spacing",typography:"fontSize",shadow:"boxShadow",radius:"borderRadius"}[e]||null}static extractTailwindKey(e){return e.split(".").slice(1).join("-")}static downloadFile(e){const n=new Blob([e.content],{type:e.mimeType}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=e.filename,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}}class zC{static DEFAULT_OPTIONS={inversionStrength:1,saturationAdjustment:-10,lightnessOffset:0,adjustTextColors:!0,ensureContrast:!0};static async convertToDarkMode(e,n={}){const r={...this.DEFAULT_OPTIONS,...n};return e.map(i=>{if(i.type==="color"&&i.value&&typeof i.value=="object"){const a=i.value,s=this.convertColorToDark(a,i,r);return{...i,value:s}}return i})}static convertColorToDark(e,n,r){const{h:i,s:a,l:s,a:o=1}=e,c=n.name.toLowerCase(),u=c.includes("background")||c.includes("bg"),h=c.includes("text")||c.includes("foreground"),f=c.includes("border"),m=c.includes("primary");let g=s,v=a;return u?(g=this.invertLightness(s,r.inversionStrength||1),v=Math.max(0,a+(r.saturationAdjustment||-10)-5)):h&&r.adjustTextColors?(g=this.invertLightness(s,r.inversionStrength||1),v=Math.max(0,a+(r.saturationAdjustment||-10)*.5)):f?(g=Math.max(20,Math.min(80,100-s)),v=Math.max(0,a+(r.saturationAdjustment||-10))):m?(g=this.adjustPrimaryLightness(s),v=a):(g=this.invertLightness(s,r.inversionStrength||1),v=Math.max(0,a+(r.saturationAdjustment||-10))),g=Math.max(0,Math.min(100,g+(r.lightnessOffset||0))),r.ensureContrast&&(g=this.ensureContrast(g,u,h)),{h:i,s:Math.round(v),l:Math.round(g),a:o}}static invertLightness(e,n){const r=100-e;return e+(r-e)*n}static adjustPrimaryLightness(e){return e<50?e+20:e>70?e-10:e}static ensureContrast(e,n,r){return n&&e>30?Math.min(30,e):r&&e<70?Math.max(70,e):e}static async generateDarkTheme(e,n,r,i={}){const s=(await this.convertToDarkMode(n,i)).map(o=>({...o,name:o.name.includes("-dark")?o.name:`${o.name}-dark`,css_variable:o.css_variable?o.css_variable.replace("--","--dark-"):void 0}));return{darkTokens:s,metadata:{sourceThemeId:e,darkThemeId:`${e}-dark`,generatedAt:new Date().toISOString(),tokenCount:s.length,options:i}}}static PRESETS={default:{inversionStrength:1,saturationAdjustment:-10,lightnessOffset:0,adjustTextColors:!0,ensureContrast:!0},oled:{inversionStrength:1,saturationAdjustment:-15,lightnessOffset:-10,adjustTextColors:!0,ensureContrast:!0},soft:{inversionStrength:.8,saturationAdjustment:-5,lightnessOffset:5,adjustTextColors:!0,ensureContrast:!0},highContrast:{inversionStrength:1,saturationAdjustment:-20,lightnessOffset:0,adjustTextColors:!0,ensureContrast:!0}}}class CO{static async exportToFigmaPlugin(e,n){const r={};return n.includeFiles.manifest!==!1&&(r["manifest.json"]=this.generateManifest(n)),n.includeFiles.code!==!1&&(r["code.ts"]=this.generateCode(e,n)),n.includeFiles.ui!==!1&&(r["ui.html"]=this.generateUI(e,n)),{files:r,metadata:{pluginName:n.pluginName,tokenCount:e.length,generatedAt:new Date().toISOString()}}}static generateManifest(e){const n={name:e.pluginName,id:this.generatePluginId(e.pluginName),api:"1.0.0",main:"code.js",ui:"ui.html",editorType:["figma"],capabilities:["write"],description:e.description||"Import design tokens from XStudio"};return JSON.stringify(n,null,2)}static generateCode(e,n){const r=e.filter(o=>o.type==="color"),i=e.filter(o=>o.type==="typography"),a=e.filter(o=>o.type==="shadow"),s=[];return s.push("/**"),s.push(` * ${n.pluginName}`),s.push(` * Generated by XStudio - ${new Date().toISOString()}`),s.push(" */"),s.push(""),s.push("figma.showUI(__html__, { width: 400, height: 600 });"),s.push(""),s.push("figma.ui.onmessage = async (msg) => {"),s.push('  if (msg.type === "import-tokens") {'),s.push("    try {"),s.push("      let imported = 0;"),s.push(""),n.exportTargets.colors&&r.length>0&&(s.push("      // Import Color Styles"),s.push('      const colorTokens = msg.tokens.filter((t: { type: string }) => t.type === "color");'),s.push("      for (const token of colorTokens) {"),s.push("        const style = figma.createPaintStyle();"),s.push("        style.name = token.name;"),s.push("        style.paints = [{"),s.push('          type: "SOLID",'),s.push("          color: {"),s.push("            r: token.value.r / 255,"),s.push("            g: token.value.g / 255,"),s.push("            b: token.value.b / 255,"),s.push("          },"),s.push("          opacity: token.value.a || 1,"),s.push("        }];"),s.push("        imported++;"),s.push("      }"),s.push("")),n.exportTargets.textStyles&&i.length>0&&(s.push("      // Import Text Styles"),s.push('      const textTokens = msg.tokens.filter((t: { type: string }) => t.type === "typography");'),s.push("      for (const token of textTokens) {"),s.push("        const style = figma.createTextStyle();"),s.push("        style.name = token.name;"),s.push("        if (token.value.fontSize) {"),s.push("          style.fontSize = parseFloat(token.value.fontSize);"),s.push("        }"),s.push("        if (token.value.fontWeight) {"),s.push("          style.fontName = {"),s.push('            family: token.value.fontFamily || "Inter",'),s.push("            style: token.value.fontWeight,"),s.push("          };"),s.push("        }"),s.push("        if (token.value.lineHeight) {"),s.push('          style.lineHeight = { value: parseFloat(token.value.lineHeight), unit: "PIXELS" };'),s.push("        }"),s.push("        imported++;"),s.push("      }"),s.push("")),n.exportTargets.effects&&a.length>0&&(s.push("      // Import Effect Styles (Shadows)"),s.push('      const shadowTokens = msg.tokens.filter((t: { type: string }) => t.type === "shadow");'),s.push("      for (const token of shadowTokens) {"),s.push("        const style = figma.createEffectStyle();"),s.push("        style.name = token.name;"),s.push("        style.effects = [{"),s.push('          type: "DROP_SHADOW",'),s.push("          color: token.value.color,"),s.push("          offset: { x: token.value.offsetX || 0, y: token.value.offsetY || 0 },"),s.push("          radius: token.value.blur || 0,"),s.push("          spread: token.value.spread || 0,"),s.push("          visible: true,"),s.push('          blendMode: "NORMAL",'),s.push("        }];"),s.push("        imported++;"),s.push("      }"),s.push("")),s.push("      figma.ui.postMessage({"),s.push('        type: "import-complete",'),s.push("        imported,"),s.push("      });"),s.push("    } catch (error) {"),s.push("      figma.ui.postMessage({"),s.push('        type: "import-error",'),s.push("        message: error.message,"),s.push("      });"),s.push("    }"),s.push("  }"),s.push(""),s.push('  if (msg.type === "close-plugin") {'),s.push("    figma.closePlugin();"),s.push("  }"),s.push("};"),s.join(`
`)}static generateUI(e,n){return`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>${n.pluginName}</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Inter, sans-serif;
      font-size: 14px;
      padding: 16px;
      background: #ffffff;
    }

    h1 {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 12px;
    }

    p {
      color: #666;
      margin-bottom: 20px;
      line-height: 1.5;
    }

    .token-list {
      max-height: 400px;
      overflow-y: auto;
      margin-bottom: 20px;
      padding: 12px;
      background: #f5f5f5;
      border-radius: 8px;
    }

    .token-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px;
      background: white;
      border-radius: 4px;
      margin-bottom: 4px;
    }

    .token-color {
      width: 24px;
      height: 24px;
      border-radius: 4px;
      border: 1px solid #ddd;
    }

    .token-name {
      font-family: monospace;
      font-size: 12px;
    }

    .button-group {
      display: flex;
      gap: 8px;
    }

    button {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 200ms;
    }

    .primary-btn {
      background: #0d99ff;
      color: white;
    }

    .primary-btn:hover {
      background: #0b7fdd;
    }

    .secondary-btn {
      background: #f0f0f0;
      color: #333;
    }

    .secondary-btn:hover {
      background: #e0e0e0;
    }

    .status {
      margin-top: 12px;
      padding: 12px;
      border-radius: 6px;
      font-size: 13px;
    }

    .success {
      background: #e7f7ed;
      color: #0f7b3f;
    }

    .error {
      background: #ffe7e7;
      color: #c92a2a;
    }
  </style>
</head>
<body>
  <h1>${n.pluginName}</h1>
  <p>${n.description||"Import design tokens from XStudio to Figma"}</p>

  <div id="token-list" class="token-list">
    <p>Loading tokens...</p>
  </div>

  <div class="button-group">
    <button class="primary-btn" onclick="importTokens()">Import to Figma</button>
    <button class="secondary-btn" onclick="closePlugin()">Cancel</button>
  </div>

  <div id="status"></div>

  <script>
    // Token data (will be replaced by actual tokens)
    const TOKENS = ${JSON.stringify(e.map(i=>{if(i.type==="color"&&typeof i.value=="object"){const a=eY(i.value);return{...i,value:a}}return i}),null,2)};

    // Render token list
    function renderTokens() {
      const list = document.getElementById('token-list');
      list.innerHTML = TOKENS.map(token => {
        if (token.type === 'color') {
          return \`
            <div class="token-item">
              <div class="token-color" style="background: rgb(\${token.value.r}, \${token.value.g}, \${token.value.b})"></div>
              <span class="token-name">\${token.name}</span>
            </div>
          \`;
        }
        return \`
          <div class="token-item">
            <span class="token-name">\${token.name}</span>
          </div>
        \`;
      }).join('');
    }

    // Import tokens
    function importTokens() {
      parent.postMessage({
        pluginMessage: {
          type: 'import-tokens',
          tokens: TOKENS,
        }
      }, '*');
    }

    // Close plugin
    function closePlugin() {
      parent.postMessage({
        pluginMessage: { type: 'close-plugin' }
      }, '*');
    }

    // Listen for messages from plugin
    window.onmessage = (event) => {
      const msg = event.data.pluginMessage;
      const status = document.getElementById('status');

      if (msg.type === 'import-complete') {
        status.className = 'status success';
        status.textContent = \` Successfully imported \${msg.imported} styles!\`;
        setTimeout(() => {
          closePlugin();
        }, 2000);
      }

      if (msg.type === 'import-error') {
        status.className = 'status error';
        status.textContent = \` Error: \${msg.message}\`;
      }
    };

    // Initialize
    renderTokens();
  <\/script>
</body>
</html>`}static generatePluginId(e){let n=0;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return Math.abs(n).toString()}static async downloadPluginFiles(e){for(const[n,r]of Object.entries(e.files)){if(!r)continue;const i=new Blob([r],{type:n.endsWith(".html")?"text/html":"text/plain"}),a=URL.createObjectURL(i),s=document.createElement("a");s.href=a,s.download=n,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a),await new Promise(o=>setTimeout(o,100))}}}function yo(t){return t<0?-1:t===0?0:1}function z1(t,e,n){return(1-n)*t+n*e}function D4e(t,e,n){return n<t?t:n>e?e:n}function b2(t,e,n){return n<t?t:n>e?e:n}function TO(t){return t=t%360,t<0&&(t=t+360),t}function Lf(t){return t=t%360,t<0&&(t=t+360),t}function Bk(t,e){const n=t[0]*e[0][0]+t[1]*e[0][1]+t[2]*e[0][2],r=t[0]*e[1][0]+t[1]*e[1][1]+t[2]*e[1][2],i=t[0]*e[2][0]+t[1]*e[2][1]+t[2]*e[2][2];return[n,r,i]}const LY=[[.41233895,.35762064,.18051042],[.2126,.7152,.0722],[.01932141,.11916382,.95034478]],k4e=[[3.2413774792388685,-1.5376652402851851,-.49885366846268053],[-.9691452513005321,1.8758853451067872,.04156585616912061],[.05562093689691305,-.20395524564742123,1.0571799111220335]],OY=[95.047,100,108.883];function i$(t,e,n){return(255<<24|(t&255)<<16|(e&255)<<8|n&255)>>>0}function MO(t){const e=qm(t[0]),n=qm(t[1]),r=qm(t[2]);return i$(e,n,r)}function a$(t){return t>>16&255}function s$(t){return t>>8&255}function o$(t){return t&255}function R4e(t,e,n){const r=k4e,i=r[0][0]*t+r[0][1]*e+r[0][2]*n,a=r[1][0]*t+r[1][1]*e+r[1][2]*n,s=r[2][0]*t+r[2][1]*e+r[2][2]*n,o=qm(i),c=qm(a),u=qm(s);return i$(o,c,u)}function I4e(t){const e=Kd(a$(t)),n=Kd(s$(t)),r=Kd(o$(t));return Bk([e,n,r],LY)}function $4e(t){const e=Kd(a$(t)),n=Kd(s$(t)),r=Kd(o$(t)),i=LY,a=i[0][0]*e+i[0][1]*n+i[0][2]*r,s=i[1][0]*e+i[1][1]*n+i[1][2]*r,o=i[2][0]*e+i[2][1]*n+i[2][2]*r,c=OY,u=a/c[0],h=s/c[1],f=o/c[2],m=U1(u),g=U1(h),v=U1(f),x=116*g-16,_=500*(m-g),w=200*(g-v);return[x,_,w]}function j4e(t){const e=Pf(t),n=qm(e);return i$(n,n,n)}function AO(t){const e=I4e(t)[1];return 116*U1(e/100)-16}function Pf(t){return 100*O4e((t+16)/116)}function zk(t){return U1(t/100)*116-16}function Kd(t){const e=t/255;return e<=.040449936?e/12.92*100:Math.pow((e+.055)/1.055,2.4)*100}function qm(t){const e=t/100;let n=0;return e<=.0031308?n=e*12.92:n=1.055*Math.pow(e,1/2.4)-.055,D4e(0,255,Math.round(n*255))}function L4e(){return OY}function U1(t){const e=.008856451679035631,n=24389/27;return t>e?Math.pow(t,1/3):(n*t+16)/116}function O4e(t){const e=.008856451679035631,n=24389/27,r=t*t*t;return r>e?r:(116*t-16)/n}class Fu{static make(e=L4e(),n=200/Math.PI*Pf(50)/100,r=50,i=2,a=!1){const s=e,o=s[0]*.401288+s[1]*.650173+s[2]*-.051461,c=s[0]*-.250268+s[1]*1.204414+s[2]*.045854,u=s[0]*-.002079+s[1]*.048952+s[2]*.953127,h=.8+i/10,f=h>=.9?z1(.59,.69,(h-.9)*10):z1(.525,.59,(h-.8)*10);let m=a?1:h*(1-1/3.6*Math.exp((-n-42)/92));m=m>1?1:m<0?0:m;const g=h,v=[m*(100/o)+1-m,m*(100/c)+1-m,m*(100/u)+1-m],x=1/(5*n+1),_=x*x*x*x,w=1-_,S=_*n+.1*w*w*Math.cbrt(5*n),E=Pf(r)/e[1],A=1.48+Math.sqrt(E),N=.725/Math.pow(E,.2),P=N,R=[Math.pow(S*v[0]*o/100,.42),Math.pow(S*v[1]*c/100,.42),Math.pow(S*v[2]*u/100,.42)],D=[400*R[0]/(R[0]+27.13),400*R[1]/(R[1]+27.13),400*R[2]/(R[2]+27.13)],k=(2*D[0]+D[1]+.05*D[2])*N;return new Fu(E,k,N,P,f,g,v,S,Math.pow(S,.25),A)}constructor(e,n,r,i,a,s,o,c,u,h){this.n=e,this.aw=n,this.nbb=r,this.ncb=i,this.c=a,this.nc=s,this.rgbD=o,this.fl=c,this.fLRoot=u,this.z=h}}Fu.DEFAULT=Fu.make();class Zo{constructor(e,n,r,i,a,s,o,c,u){this.hue=e,this.chroma=n,this.j=r,this.q=i,this.m=a,this.s=s,this.jstar=o,this.astar=c,this.bstar=u}distance(e){const n=this.jstar-e.jstar,r=this.astar-e.astar,i=this.bstar-e.bstar,a=Math.sqrt(n*n+r*r+i*i);return 1.41*Math.pow(a,.63)}static fromInt(e){return Zo.fromIntInViewingConditions(e,Fu.DEFAULT)}static fromIntInViewingConditions(e,n){const r=(e&16711680)>>16,i=(e&65280)>>8,a=e&255,s=Kd(r),o=Kd(i),c=Kd(a),u=.41233895*s+.35762064*o+.18051042*c,h=.2126*s+.7152*o+.0722*c,f=.01932141*s+.11916382*o+.95034478*c,m=.401288*u+.650173*h-.051461*f,g=-.250268*u+1.204414*h+.045854*f,v=-.002079*u+.048952*h+.953127*f,x=n.rgbD[0]*m,_=n.rgbD[1]*g,w=n.rgbD[2]*v,S=Math.pow(n.fl*Math.abs(x)/100,.42),E=Math.pow(n.fl*Math.abs(_)/100,.42),A=Math.pow(n.fl*Math.abs(w)/100,.42),N=yo(x)*400*S/(S+27.13),P=yo(_)*400*E/(E+27.13),R=yo(w)*400*A/(A+27.13),D=(11*N+-12*P+R)/11,k=(N+P-2*R)/9,L=(20*N+20*P+21*R)/20,$=(40*N+20*P+R)/20,q=Math.atan2(k,D)*180/Math.PI,U=q<0?q+360:q>=360?q-360:q,J=U*Math.PI/180,O=$*n.nbb,z=100*Math.pow(O/n.aw,n.c*n.z),V=4/n.c*Math.sqrt(z/100)*(n.aw+4)*n.fLRoot,H=U<20.14?U+360:U,ee=.25*(Math.cos(H*Math.PI/180+2)+3.8),Z=5e4/13*ee*n.nc*n.ncb*Math.sqrt(D*D+k*k)/(L+.305),K=Math.pow(Z,.9)*Math.pow(1.64-Math.pow(.29,n.n),.73),X=K*Math.sqrt(z/100),ne=X*n.fLRoot,G=50*Math.sqrt(K*n.c/(n.aw+4)),te=(1+100*.007)*z/(1+.007*z),ae=1/.0228*Math.log(1+.0228*ne),pe=ae*Math.cos(J),ye=ae*Math.sin(J);return new Zo(U,X,z,V,ne,G,te,pe,ye)}static fromJch(e,n,r){return Zo.fromJchInViewingConditions(e,n,r,Fu.DEFAULT)}static fromJchInViewingConditions(e,n,r,i){const a=4/i.c*Math.sqrt(e/100)*(i.aw+4)*i.fLRoot,s=n*i.fLRoot,o=n/Math.sqrt(e/100),c=50*Math.sqrt(o*i.c/(i.aw+4)),u=r*Math.PI/180,h=(1+100*.007)*e/(1+.007*e),f=1/.0228*Math.log(1+.0228*s),m=f*Math.cos(u),g=f*Math.sin(u);return new Zo(r,n,e,a,s,c,h,m,g)}static fromUcs(e,n,r){return Zo.fromUcsInViewingConditions(e,n,r,Fu.DEFAULT)}static fromUcsInViewingConditions(e,n,r,i){const a=n,s=r,o=Math.sqrt(a*a+s*s),u=(Math.exp(o*.0228)-1)/.0228/i.fLRoot;let h=Math.atan2(s,a)*(180/Math.PI);h<0&&(h+=360);const f=e/(1-(e-100)*.007);return Zo.fromJchInViewingConditions(f,u,h,i)}toInt(){return this.viewed(Fu.DEFAULT)}viewed(e){const n=this.chroma===0||this.j===0?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(n/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),i=this.hue*Math.PI/180,a=.25*(Math.cos(i+2)+3.8),s=e.aw*Math.pow(this.j/100,1/e.c/e.z),o=a*(5e4/13)*e.nc*e.ncb,c=s/e.nbb,u=Math.sin(i),h=Math.cos(i),f=23*(c+.305)*r/(23*o+11*r*h+108*r*u),m=f*h,g=f*u,v=(460*c+451*m+288*g)/1403,x=(460*c-891*m-261*g)/1403,_=(460*c-220*m-6300*g)/1403,w=Math.max(0,27.13*Math.abs(v)/(400-Math.abs(v))),S=yo(v)*(100/e.fl)*Math.pow(w,1/.42),E=Math.max(0,27.13*Math.abs(x)/(400-Math.abs(x))),A=yo(x)*(100/e.fl)*Math.pow(E,1/.42),N=Math.max(0,27.13*Math.abs(_)/(400-Math.abs(_))),P=yo(_)*(100/e.fl)*Math.pow(N,1/.42),R=S/e.rgbD[0],D=A/e.rgbD[1],k=P/e.rgbD[2],L=1.86206786*R-1.01125463*D+.14918677*k,$=.38752654*R+.62144744*D-.00897398*k,B=-.0158415*R-.03412294*D+1.04996444*k;return R4e(L,$,B)}static fromXyzInViewingConditions(e,n,r,i){const a=.401288*e+.650173*n-.051461*r,s=-.250268*e+1.204414*n+.045854*r,o=-.002079*e+.048952*n+.953127*r,c=i.rgbD[0]*a,u=i.rgbD[1]*s,h=i.rgbD[2]*o,f=Math.pow(i.fl*Math.abs(c)/100,.42),m=Math.pow(i.fl*Math.abs(u)/100,.42),g=Math.pow(i.fl*Math.abs(h)/100,.42),v=yo(c)*400*f/(f+27.13),x=yo(u)*400*m/(m+27.13),_=yo(h)*400*g/(g+27.13),w=(11*v+-12*x+_)/11,S=(v+x-2*_)/9,E=(20*v+20*x+21*_)/20,A=(40*v+20*x+_)/20,P=Math.atan2(S,w)*180/Math.PI,R=P<0?P+360:P>=360?P-360:P,D=R*Math.PI/180,k=A*i.nbb,L=100*Math.pow(k/i.aw,i.c*i.z),$=4/i.c*Math.sqrt(L/100)*(i.aw+4)*i.fLRoot,B=R<20.14?R+360:R,q=1/4*(Math.cos(B*Math.PI/180+2)+3.8),J=5e4/13*q*i.nc*i.ncb*Math.sqrt(w*w+S*S)/(E+.305),O=Math.pow(J,.9)*Math.pow(1.64-Math.pow(.29,i.n),.73),z=O*Math.sqrt(L/100),V=z*i.fLRoot,H=50*Math.sqrt(O*i.c/(i.aw+4)),ee=(1+100*.007)*L/(1+.007*L),Y=Math.log(1+.0228*V)/.0228,Z=Y*Math.cos(D),K=Y*Math.sin(D);return new Zo(R,z,L,$,V,H,ee,Z,K)}xyzInViewingConditions(e){const n=this.chroma===0||this.j===0?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(n/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),i=this.hue*Math.PI/180,a=.25*(Math.cos(i+2)+3.8),s=e.aw*Math.pow(this.j/100,1/e.c/e.z),o=a*(5e4/13)*e.nc*e.ncb,c=s/e.nbb,u=Math.sin(i),h=Math.cos(i),f=23*(c+.305)*r/(23*o+11*r*h+108*r*u),m=f*h,g=f*u,v=(460*c+451*m+288*g)/1403,x=(460*c-891*m-261*g)/1403,_=(460*c-220*m-6300*g)/1403,w=Math.max(0,27.13*Math.abs(v)/(400-Math.abs(v))),S=yo(v)*(100/e.fl)*Math.pow(w,1/.42),E=Math.max(0,27.13*Math.abs(x)/(400-Math.abs(x))),A=yo(x)*(100/e.fl)*Math.pow(E,1/.42),N=Math.max(0,27.13*Math.abs(_)/(400-Math.abs(_))),P=yo(_)*(100/e.fl)*Math.pow(N,1/.42),R=S/e.rgbD[0],D=A/e.rgbD[1],k=P/e.rgbD[2],L=1.86206786*R-1.01125463*D+.14918677*k,$=.38752654*R+.62144744*D-.00897398*k,B=-.0158415*R-.03412294*D+1.04996444*k;return[L,$,B]}}class on{static sanitizeRadians(e){return(e+Math.PI*8)%(Math.PI*2)}static trueDelinearized(e){const n=e/100;let r=0;return n<=.0031308?r=n*12.92:r=1.055*Math.pow(n,1/2.4)-.055,r*255}static chromaticAdaptation(e){const n=Math.pow(Math.abs(e),.42);return yo(e)*400*n/(n+27.13)}static hueOf(e){const n=Bk(e,on.SCALED_DISCOUNT_FROM_LINRGB),r=on.chromaticAdaptation(n[0]),i=on.chromaticAdaptation(n[1]),a=on.chromaticAdaptation(n[2]),s=(11*r+-12*i+a)/11,o=(r+i-2*a)/9;return Math.atan2(o,s)}static areInCyclicOrder(e,n,r){const i=on.sanitizeRadians(n-e),a=on.sanitizeRadians(r-e);return i<a}static intercept(e,n,r){return(n-e)/(r-e)}static lerpPoint(e,n,r){return[e[0]+(r[0]-e[0])*n,e[1]+(r[1]-e[1])*n,e[2]+(r[2]-e[2])*n]}static setCoordinate(e,n,r,i){const a=on.intercept(e[i],n,r[i]);return on.lerpPoint(e,a,r)}static isBounded(e){return 0<=e&&e<=100}static nthVertex(e,n){const r=on.Y_FROM_LINRGB[0],i=on.Y_FROM_LINRGB[1],a=on.Y_FROM_LINRGB[2],s=n%4<=1?0:100,o=n%2===0?0:100;if(n<4){const c=s,u=o,h=(e-c*i-u*a)/r;return on.isBounded(h)?[h,c,u]:[-1,-1,-1]}else if(n<8){const c=s,u=o,h=(e-u*r-c*a)/i;return on.isBounded(h)?[u,h,c]:[-1,-1,-1]}else{const c=s,u=o,h=(e-c*r-u*i)/a;return on.isBounded(h)?[c,u,h]:[-1,-1,-1]}}static bisectToSegment(e,n){let r=[-1,-1,-1],i=r,a=0,s=0,o=!1,c=!0;for(let u=0;u<12;u++){const h=on.nthVertex(e,u);if(h[0]<0)continue;const f=on.hueOf(h);if(!o){r=h,i=h,a=f,s=f,o=!0;continue}(c||on.areInCyclicOrder(a,f,s))&&(c=!1,on.areInCyclicOrder(a,n,f)?(i=h,s=f):(r=h,a=f))}return[r,i]}static midpoint(e,n){return[(e[0]+n[0])/2,(e[1]+n[1])/2,(e[2]+n[2])/2]}static criticalPlaneBelow(e){return Math.floor(e-.5)}static criticalPlaneAbove(e){return Math.ceil(e-.5)}static bisectToLimit(e,n){const r=on.bisectToSegment(e,n);let i=r[0],a=on.hueOf(i),s=r[1];for(let o=0;o<3;o++)if(i[o]!==s[o]){let c=-1,u=255;i[o]<s[o]?(c=on.criticalPlaneBelow(on.trueDelinearized(i[o])),u=on.criticalPlaneAbove(on.trueDelinearized(s[o]))):(c=on.criticalPlaneAbove(on.trueDelinearized(i[o])),u=on.criticalPlaneBelow(on.trueDelinearized(s[o])));for(let h=0;h<8&&!(Math.abs(u-c)<=1);h++){const f=Math.floor((c+u)/2),m=on.CRITICAL_PLANES[f],g=on.setCoordinate(i,m,s,o),v=on.hueOf(g);on.areInCyclicOrder(a,n,v)?(s=g,u=f):(i=g,a=v,c=f)}}return on.midpoint(i,s)}static inverseChromaticAdaptation(e){const n=Math.abs(e),r=Math.max(0,27.13*n/(400-n));return yo(e)*Math.pow(r,1/.42)}static findResultByJ(e,n,r){let i=Math.sqrt(r)*11;const a=Fu.DEFAULT,s=1/Math.pow(1.64-Math.pow(.29,a.n),.73),c=.25*(Math.cos(e+2)+3.8)*(5e4/13)*a.nc*a.ncb,u=Math.sin(e),h=Math.cos(e);for(let f=0;f<5;f++){const m=i/100,g=n===0||i===0?0:n/Math.sqrt(m),v=Math.pow(g*s,1/.9),_=a.aw*Math.pow(m,1/a.c/a.z)/a.nbb,w=23*(_+.305)*v/(23*c+11*v*h+108*v*u),S=w*h,E=w*u,A=(460*_+451*S+288*E)/1403,N=(460*_-891*S-261*E)/1403,P=(460*_-220*S-6300*E)/1403,R=on.inverseChromaticAdaptation(A),D=on.inverseChromaticAdaptation(N),k=on.inverseChromaticAdaptation(P),L=Bk([R,D,k],on.LINRGB_FROM_SCALED_DISCOUNT);if(L[0]<0||L[1]<0||L[2]<0)return 0;const $=on.Y_FROM_LINRGB[0],B=on.Y_FROM_LINRGB[1],q=on.Y_FROM_LINRGB[2],U=$*L[0]+B*L[1]+q*L[2];if(U<=0)return 0;if(f===4||Math.abs(U-r)<.002)return L[0]>100.01||L[1]>100.01||L[2]>100.01?0:MO(L);i=i-(U-r)*i/(2*U)}return 0}static solveToInt(e,n,r){if(n<1e-4||r<1e-4||r>99.9999)return j4e(r);e=Lf(e);const i=e/180*Math.PI,a=Pf(r),s=on.findResultByJ(i,n,a);if(s!==0)return s;const o=on.bisectToLimit(a,i);return MO(o)}static solveToCam(e,n,r){return Zo.fromInt(on.solveToInt(e,n,r))}}on.SCALED_DISCOUNT_FROM_LINRGB=[[.001200833568784504,.002389694492170889,.0002795742885861124],[.0005891086651375999,.0029785502573438758,.0003270666104008398],[.00010146692491640572,.0005364214359186694,.0032979401770712076]];on.LINRGB_FROM_SCALED_DISCOUNT=[[1373.2198709594231,-1100.4251190754821,-7.278681089101213],[-271.815969077903,559.6580465940733,-32.46047482791194],[1.9622899599665666,-57.173814538844006,308.7233197812385]];on.Y_FROM_LINRGB=[.2126,.7152,.0722];on.CRITICAL_PLANES=[.015176349177441876,.045529047532325624,.07588174588720938,.10623444424209313,.13658714259697685,.16693984095186062,.19729253930674434,.2276452376616281,.2579979360165119,.28835063437139563,.3188300904430532,.350925934958123,.3848314933096426,.42057480301049466,.458183274052838,.4976837250274023,.5391024159806381,.5824650784040898,.6277969426914107,.6751227633498623,.7244668422128921,.775853049866786,.829304845476233,.8848452951698498,.942497089126609,1.0022825574869039,1.0642236851973577,1.1283421258858297,1.1946592148522128,1.2631959812511864,1.3339731595349034,1.407011200216447,1.4823302800086415,1.5599503113873272,1.6398909516233677,1.7221716113234105,1.8068114625156377,1.8938294463134073,1.9832442801866852,2.075074464868551,2.1693382909216234,2.2660538449872063,2.36523901573795,2.4669114995532007,2.5710888059345764,2.6777882626779785,2.7870270208169257,2.898822059350997,3.0131901897720907,3.1301480604002863,3.2497121605402226,3.3718988244681087,3.4967242352587946,3.624204428461639,3.754355295633311,3.887192587735158,4.022731918402185,4.160988767090289,4.301978482107941,4.445716283538092,4.592217266055746,4.741496401646282,4.893568542229298,5.048448422192488,5.20615066083972,5.3666897647573375,5.5300801301023865,5.696336044816294,5.865471690767354,6.037501145825082,6.212438385869475,6.390297286737924,6.571091626112461,6.7548350853498045,6.941541251256611,7.131223617812143,7.323895587840543,7.5195704746346665,7.7182615035334345,7.919981813454504,8.124744458384042,8.332562408825165,8.543448553206703,8.757415699253682,8.974476575321063,9.194643831691977,9.417930041841839,9.644347703669503,9.873909240696694,10.106627003236781,10.342513269534024,10.58158024687427,10.8238400726681,11.069304815507364,11.317986476196008,11.569896988756009,11.825048221409341,12.083451977536606,12.345119996613247,12.610063955123938,12.878295467455942,13.149826086772048,13.42466730586372,13.702830557985108,13.984327217668513,14.269168601521828,14.55736596900856,14.848930523210871,15.143873411576273,15.44220572664832,15.743938506781891,16.04908273684337,16.35764934889634,16.66964922287304,16.985093187232053,17.30399201960269,17.62635644741625,17.95219714852476,18.281524751807332,18.614349837764564,18.95068293910138,19.290534541298456,19.633915083172692,19.98083495742689,20.331304511189067,20.685334046541502,21.042933821039977,21.404114048223256,21.76888489811322,22.137256497705877,22.50923893145328,22.884842241736916,23.264076429332462,23.6469514538663,24.033477234264016,24.42366364919083,24.817520537484558,25.21505769858089,25.61628489293138,26.021211842414342,26.429848230738664,26.842203703840827,27.258287870275353,27.678110301598522,28.10168053274597,28.529008062403893,28.96010235337422,29.39497283293396,29.83362889318845,30.276079891419332,30.722335150426627,31.172403958865512,31.62629557157785,32.08401920991837,32.54558406207592,33.010999283389665,33.4802739966603,33.953417292456834,34.430438229418264,34.911345834551085,35.39614910352207,35.88485700094671,36.37747846067349,36.87402238606382,37.37449765026789,37.87891309649659,38.38727753828926,38.89959975977785,39.41588851594697,39.93615253289054,40.460400508064545,40.98864111053629,41.520882981230194,42.05713473317016,42.597404951718396,43.141702194811224,43.6900349931913,44.24241185063697,44.798841244188324,45.35933162437017,45.92389141541209,46.49252901546552,47.065252796817916,47.64207110610409,48.22299226451468,48.808024568002054,49.3971762874833,49.9904556690408,50.587870934119984,51.189430279724725,51.79514187861014,52.40501387947288,53.0190544071392,53.637271562750364,54.259673423945976,54.88626804504493,55.517063457223934,56.15206766869424,56.79128866487574,57.43473440856916,58.08241284012621,58.734331877617365,59.39049941699807,60.05092333227251,60.715611475655585,61.38457167773311,62.057811747619894,62.7353394731159,63.417162620860914,64.10328893648692,64.79372614476921,65.48848194977529,66.18756403501224,66.89098006357258,67.59873767827808,68.31084450182222,69.02730813691093,69.74813616640164,70.47333615344107,71.20291564160104,71.93688215501312,72.67524319850172,73.41800625771542,74.16517879925733,74.9167682708136,75.67278210128072,76.43322770089146,77.1981124613393,77.96744375590167,78.74122893956174,79.51947534912904,80.30219030335869,81.08938110306934,81.88105503125999,82.67721935322541,83.4778813166706,84.28304815182372,85.09272707154808,85.90692527145302,86.72564993000343,87.54890820862819,88.3767072518277,89.2090541872801,90.04595612594655,90.88742016217518,91.73345337380438,92.58406282226491,93.43925555268066,94.29903859396902,95.16341895893969,96.03240364439274,96.9059996312159,97.78421388448044,98.6670533535366,99.55452497210776];class ui{static from(e,n,r){return new ui(on.solveToInt(e,n,r))}static fromInt(e){return new ui(e)}toInt(){return this.argb}get hue(){return this.internalHue}set hue(e){this.setInternalState(on.solveToInt(e,this.internalChroma,this.internalTone))}get chroma(){return this.internalChroma}set chroma(e){this.setInternalState(on.solveToInt(this.internalHue,e,this.internalTone))}get tone(){return this.internalTone}set tone(e){this.setInternalState(on.solveToInt(this.internalHue,this.internalChroma,e))}constructor(e){this.argb=e;const n=Zo.fromInt(e);this.internalHue=n.hue,this.internalChroma=n.chroma,this.internalTone=AO(e),this.argb=e}setInternalState(e){const n=Zo.fromInt(e);this.internalHue=n.hue,this.internalChroma=n.chroma,this.internalTone=AO(e),this.argb=e}inViewingConditions(e){const r=Zo.fromInt(this.toInt()).xyzInViewingConditions(e),i=Zo.fromXyzInViewingConditions(r[0],r[1],r[2],Fu.make());return ui.from(i.hue,i.chroma,zk(r[1]))}}class ka{static ratioOfTones(e,n){return e=b2(0,100,e),n=b2(0,100,n),ka.ratioOfYs(Pf(e),Pf(n))}static ratioOfYs(e,n){const r=e>n?e:n,i=r===n?e:n;return(r+5)/(i+5)}static lighter(e,n){if(e<0||e>100)return-1;const r=Pf(e),i=n*(r+5)-5,a=ka.ratioOfYs(i,r),s=Math.abs(a-n);if(a<n&&s>.04)return-1;const o=zk(i)+.4;return o<0||o>100?-1:o}static darker(e,n){if(e<0||e>100)return-1;const r=Pf(e),i=(r+5)/n-5,a=ka.ratioOfYs(r,i),s=Math.abs(a-n);if(a<n&&s>.04)return-1;const o=zk(i)-.4;return o<0||o>100?-1:o}static lighterUnsafe(e,n){const r=ka.lighter(e,n);return r<0?100:r}static darkerUnsafe(e,n){const r=ka.darker(e,n);return r<0?0:r}}class hw{static isDisliked(e){const n=Math.round(e.hue)>=90&&Math.round(e.hue)<=111,r=Math.round(e.chroma)>16,i=Math.round(e.tone)<65;return n&&r&&i}static fixIfDisliked(e){return hw.isDisliked(e)?ui.from(e.hue,e.chroma,70):e}}class Ft{static fromPalette(e){return new Ft(e.name??"",e.palette,e.tone,e.isBackground??!1,e.background,e.secondBackground,e.contrastCurve,e.toneDeltaPair)}constructor(e,n,r,i,a,s,o,c){if(this.name=e,this.palette=n,this.tone=r,this.isBackground=i,this.background=a,this.secondBackground=s,this.contrastCurve=o,this.toneDeltaPair=c,this.hctCache=new Map,!a&&s)throw new Error(`Color ${e} has secondBackgrounddefined, but background is not defined.`);if(!a&&o)throw new Error(`Color ${e} has contrastCurvedefined, but background is not defined.`);if(a&&!o)throw new Error(`Color ${e} has backgrounddefined, but contrastCurve is not defined.`)}getArgb(e){return this.getHct(e).toInt()}getHct(e){const n=this.hctCache.get(e);if(n!=null)return n;const r=this.getTone(e),i=this.palette(e).getHct(r);return this.hctCache.size>4&&this.hctCache.clear(),this.hctCache.set(e,i),i}getTone(e){const n=e.contrastLevel<0;if(this.toneDeltaPair){const r=this.toneDeltaPair(e),i=r.roleA,a=r.roleB,s=r.delta,o=r.polarity,c=r.stayTogether,h=this.background(e).getTone(e),f=o==="nearer"||o==="lighter"&&!e.isDark||o==="darker"&&e.isDark,m=f?i:a,g=f?a:i,v=this.name===m.name,x=e.isDark?1:-1,_=m.contrastCurve.get(e.contrastLevel),w=g.contrastCurve.get(e.contrastLevel),S=m.tone(e);let E=ka.ratioOfTones(h,S)>=_?S:Ft.foregroundTone(h,_);const A=g.tone(e);let N=ka.ratioOfTones(h,A)>=w?A:Ft.foregroundTone(h,w);return n&&(E=Ft.foregroundTone(h,_),N=Ft.foregroundTone(h,w)),(N-E)*x>=s||(N=b2(0,100,E+s*x),(N-E)*x>=s||(E=b2(0,100,N-s*x))),50<=E&&E<60?x>0?(E=60,N=Math.max(N,E+s*x)):(E=49,N=Math.min(N,E+s*x)):50<=N&&N<60&&(c?x>0?(E=60,N=Math.max(N,E+s*x)):(E=49,N=Math.min(N,E+s*x)):x>0?N=60:N=49),v?E:N}else{let r=this.tone(e);if(this.background==null)return r;const i=this.background(e).getTone(e),a=this.contrastCurve.get(e.contrastLevel);if(ka.ratioOfTones(i,r)>=a||(r=Ft.foregroundTone(i,a)),n&&(r=Ft.foregroundTone(i,a)),this.isBackground&&50<=r&&r<60&&(ka.ratioOfTones(49,i)>=a?r=49:r=60),this.secondBackground){const[s,o]=[this.background,this.secondBackground],[c,u]=[s(e).getTone(e),o(e).getTone(e)],[h,f]=[Math.max(c,u),Math.min(c,u)];if(ka.ratioOfTones(h,r)>=a&&ka.ratioOfTones(f,r)>=a)return r;const m=ka.lighter(h,a),g=ka.darker(f,a),v=[];return m!==-1&&v.push(m),g!==-1&&v.push(g),Ft.tonePrefersLightForeground(c)||Ft.tonePrefersLightForeground(u)?m<0?100:m:v.length===1?v[0]:g<0?0:g}return r}}static foregroundTone(e,n){const r=ka.lighterUnsafe(e,n),i=ka.darkerUnsafe(e,n),a=ka.ratioOfTones(r,e),s=ka.ratioOfTones(i,e);if(Ft.tonePrefersLightForeground(e)){const c=Math.abs(a-s)<.1&&a<n&&s<n;return a>=n||a>=s||c?r:i}else return s>=n||s>=a?i:r}static tonePrefersLightForeground(e){return Math.round(e)<60}static toneAllowsLightForeground(e){return Math.round(e)<=49}static enableLightForeground(e){return Ft.tonePrefersLightForeground(e)&&!Ft.toneAllowsLightForeground(e)?49:e}}class Ln{static fromInt(e){const n=ui.fromInt(e);return Ln.fromHct(n)}static fromHct(e){return new Ln(e.hue,e.chroma,e)}static fromHueAndChroma(e,n){const r=new F4e(e,n).create();return new Ln(e,n,r)}constructor(e,n,r){this.hue=e,this.chroma=n,this.keyColor=r,this.cache=new Map}tone(e){let n=this.cache.get(e);return n===void 0&&(n=ui.from(this.hue,this.chroma,e).toInt(),this.cache.set(e,n)),n}getHct(e){return ui.fromInt(this.tone(e))}}class F4e{constructor(e,n){this.hue=e,this.requestedChroma=n,this.chromaCache=new Map,this.maxChromaValue=200}create(){let i=0,a=100;for(;i<a;){const s=Math.floor((i+a)/2),o=this.maxChroma(s)<this.maxChroma(s+1);if(this.maxChroma(s)>=this.requestedChroma-.01)if(Math.abs(i-50)<Math.abs(a-50))a=s;else{if(i===s)return ui.from(this.hue,this.requestedChroma,i);i=s}else o?i=s+1:a=s}return ui.from(this.hue,this.requestedChroma,i)}maxChroma(e){if(this.chromaCache.has(e))return this.chromaCache.get(e);const n=ui.from(this.hue,this.maxChromaValue,e).chroma;return this.chromaCache.set(e,n),n}}class _n{constructor(e,n,r,i){this.low=e,this.normal=n,this.medium=r,this.high=i}get(e){return e<=-1?this.low:e<0?z1(this.low,this.normal,(e- -1)/1):e<.5?z1(this.normal,this.medium,(e-0)/.5):e<1?z1(this.medium,this.high,(e-.5)/.5):this.high}}class Ro{constructor(e,n,r,i,a){this.roleA=e,this.roleB=n,this.delta=r,this.polarity=i,this.stayTogether=a}}var Gl;(function(t){t[t.MONOCHROME=0]="MONOCHROME",t[t.NEUTRAL=1]="NEUTRAL",t[t.TONAL_SPOT=2]="TONAL_SPOT",t[t.VIBRANT=3]="VIBRANT",t[t.EXPRESSIVE=4]="EXPRESSIVE",t[t.FIDELITY=5]="FIDELITY",t[t.CONTENT=6]="CONTENT",t[t.RAINBOW=7]="RAINBOW",t[t.FRUIT_SALAD=8]="FRUIT_SALAD"})(Gl||(Gl={}));function Zy(t){return t.variant===Gl.FIDELITY||t.variant===Gl.CONTENT}function ki(t){return t.variant===Gl.MONOCHROME}function B4e(t,e,n,r){let i=n,a=ui.from(t,e,n);if(a.chroma<e){let s=a.chroma;for(;a.chroma<e;){i+=r?-1:1;const o=ui.from(t,e,i);if(s>o.chroma||Math.abs(o.chroma-e)<.4)break;const c=Math.abs(o.chroma-e),u=Math.abs(a.chroma-e);c<u&&(a=o),s=Math.max(s,o.chroma)}}return i}class Pe{static highestSurface(e){return e.isDark?Pe.surfaceBright:Pe.surfaceDim}}Pe.contentAccentToneDelta=15;Pe.primaryPaletteKeyColor=Ft.fromPalette({name:"primary_palette_key_color",palette:t=>t.primaryPalette,tone:t=>t.primaryPalette.keyColor.tone});Pe.secondaryPaletteKeyColor=Ft.fromPalette({name:"secondary_palette_key_color",palette:t=>t.secondaryPalette,tone:t=>t.secondaryPalette.keyColor.tone});Pe.tertiaryPaletteKeyColor=Ft.fromPalette({name:"tertiary_palette_key_color",palette:t=>t.tertiaryPalette,tone:t=>t.tertiaryPalette.keyColor.tone});Pe.neutralPaletteKeyColor=Ft.fromPalette({name:"neutral_palette_key_color",palette:t=>t.neutralPalette,tone:t=>t.neutralPalette.keyColor.tone});Pe.neutralVariantPaletteKeyColor=Ft.fromPalette({name:"neutral_variant_palette_key_color",palette:t=>t.neutralVariantPalette,tone:t=>t.neutralVariantPalette.keyColor.tone});Pe.background=Ft.fromPalette({name:"background",palette:t=>t.neutralPalette,tone:t=>t.isDark?6:98,isBackground:!0});Pe.onBackground=Ft.fromPalette({name:"on_background",palette:t=>t.neutralPalette,tone:t=>t.isDark?90:10,background:t=>Pe.background,contrastCurve:new _n(3,3,4.5,7)});Pe.surface=Ft.fromPalette({name:"surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?6:98,isBackground:!0});Pe.surfaceDim=Ft.fromPalette({name:"surface_dim",palette:t=>t.neutralPalette,tone:t=>t.isDark?6:new _n(87,87,80,75).get(t.contrastLevel),isBackground:!0});Pe.surfaceBright=Ft.fromPalette({name:"surface_bright",palette:t=>t.neutralPalette,tone:t=>t.isDark?new _n(24,24,29,34).get(t.contrastLevel):98,isBackground:!0});Pe.surfaceContainerLowest=Ft.fromPalette({name:"surface_container_lowest",palette:t=>t.neutralPalette,tone:t=>t.isDark?new _n(4,4,2,0).get(t.contrastLevel):100,isBackground:!0});Pe.surfaceContainerLow=Ft.fromPalette({name:"surface_container_low",palette:t=>t.neutralPalette,tone:t=>t.isDark?new _n(10,10,11,12).get(t.contrastLevel):new _n(96,96,96,95).get(t.contrastLevel),isBackground:!0});Pe.surfaceContainer=Ft.fromPalette({name:"surface_container",palette:t=>t.neutralPalette,tone:t=>t.isDark?new _n(12,12,16,20).get(t.contrastLevel):new _n(94,94,92,90).get(t.contrastLevel),isBackground:!0});Pe.surfaceContainerHigh=Ft.fromPalette({name:"surface_container_high",palette:t=>t.neutralPalette,tone:t=>t.isDark?new _n(17,17,21,25).get(t.contrastLevel):new _n(92,92,88,85).get(t.contrastLevel),isBackground:!0});Pe.surfaceContainerHighest=Ft.fromPalette({name:"surface_container_highest",palette:t=>t.neutralPalette,tone:t=>t.isDark?new _n(22,22,26,30).get(t.contrastLevel):new _n(90,90,84,80).get(t.contrastLevel),isBackground:!0});Pe.onSurface=Ft.fromPalette({name:"on_surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?90:10,background:t=>Pe.highestSurface(t),contrastCurve:new _n(4.5,7,11,21)});Pe.surfaceVariant=Ft.fromPalette({name:"surface_variant",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?30:90,isBackground:!0});Pe.onSurfaceVariant=Ft.fromPalette({name:"on_surface_variant",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?80:30,background:t=>Pe.highestSurface(t),contrastCurve:new _n(3,4.5,7,11)});Pe.inverseSurface=Ft.fromPalette({name:"inverse_surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?90:20});Pe.inverseOnSurface=Ft.fromPalette({name:"inverse_on_surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?20:95,background:t=>Pe.inverseSurface,contrastCurve:new _n(4.5,7,11,21)});Pe.outline=Ft.fromPalette({name:"outline",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?60:50,background:t=>Pe.highestSurface(t),contrastCurve:new _n(1.5,3,4.5,7)});Pe.outlineVariant=Ft.fromPalette({name:"outline_variant",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?30:80,background:t=>Pe.highestSurface(t),contrastCurve:new _n(1,1,3,4.5)});Pe.shadow=Ft.fromPalette({name:"shadow",palette:t=>t.neutralPalette,tone:t=>0});Pe.scrim=Ft.fromPalette({name:"scrim",palette:t=>t.neutralPalette,tone:t=>0});Pe.surfaceTint=Ft.fromPalette({name:"surface_tint",palette:t=>t.primaryPalette,tone:t=>t.isDark?80:40,isBackground:!0});Pe.primary=Ft.fromPalette({name:"primary",palette:t=>t.primaryPalette,tone:t=>ki(t)?t.isDark?100:0:t.isDark?80:40,isBackground:!0,background:t=>Pe.highestSurface(t),contrastCurve:new _n(3,4.5,7,7),toneDeltaPair:t=>new Ro(Pe.primaryContainer,Pe.primary,10,"nearer",!1)});Pe.onPrimary=Ft.fromPalette({name:"on_primary",palette:t=>t.primaryPalette,tone:t=>ki(t)?t.isDark?10:90:t.isDark?20:100,background:t=>Pe.primary,contrastCurve:new _n(4.5,7,11,21)});Pe.primaryContainer=Ft.fromPalette({name:"primary_container",palette:t=>t.primaryPalette,tone:t=>Zy(t)?t.sourceColorHct.tone:ki(t)?t.isDark?85:25:t.isDark?30:90,isBackground:!0,background:t=>Pe.highestSurface(t),contrastCurve:new _n(1,1,3,4.5),toneDeltaPair:t=>new Ro(Pe.primaryContainer,Pe.primary,10,"nearer",!1)});Pe.onPrimaryContainer=Ft.fromPalette({name:"on_primary_container",palette:t=>t.primaryPalette,tone:t=>Zy(t)?Ft.foregroundTone(Pe.primaryContainer.tone(t),4.5):ki(t)?t.isDark?0:100:t.isDark?90:30,background:t=>Pe.primaryContainer,contrastCurve:new _n(3,4.5,7,11)});Pe.inversePrimary=Ft.fromPalette({name:"inverse_primary",palette:t=>t.primaryPalette,tone:t=>t.isDark?40:80,background:t=>Pe.inverseSurface,contrastCurve:new _n(3,4.5,7,7)});Pe.secondary=Ft.fromPalette({name:"secondary",palette:t=>t.secondaryPalette,tone:t=>t.isDark?80:40,isBackground:!0,background:t=>Pe.highestSurface(t),contrastCurve:new _n(3,4.5,7,7),toneDeltaPair:t=>new Ro(Pe.secondaryContainer,Pe.secondary,10,"nearer",!1)});Pe.onSecondary=Ft.fromPalette({name:"on_secondary",palette:t=>t.secondaryPalette,tone:t=>ki(t)?t.isDark?10:100:t.isDark?20:100,background:t=>Pe.secondary,contrastCurve:new _n(4.5,7,11,21)});Pe.secondaryContainer=Ft.fromPalette({name:"secondary_container",palette:t=>t.secondaryPalette,tone:t=>{const e=t.isDark?30:90;return ki(t)?t.isDark?30:85:Zy(t)?B4e(t.secondaryPalette.hue,t.secondaryPalette.chroma,e,!t.isDark):e},isBackground:!0,background:t=>Pe.highestSurface(t),contrastCurve:new _n(1,1,3,4.5),toneDeltaPair:t=>new Ro(Pe.secondaryContainer,Pe.secondary,10,"nearer",!1)});Pe.onSecondaryContainer=Ft.fromPalette({name:"on_secondary_container",palette:t=>t.secondaryPalette,tone:t=>ki(t)?t.isDark?90:10:Zy(t)?Ft.foregroundTone(Pe.secondaryContainer.tone(t),4.5):t.isDark?90:30,background:t=>Pe.secondaryContainer,contrastCurve:new _n(3,4.5,7,11)});Pe.tertiary=Ft.fromPalette({name:"tertiary",palette:t=>t.tertiaryPalette,tone:t=>ki(t)?t.isDark?90:25:t.isDark?80:40,isBackground:!0,background:t=>Pe.highestSurface(t),contrastCurve:new _n(3,4.5,7,7),toneDeltaPair:t=>new Ro(Pe.tertiaryContainer,Pe.tertiary,10,"nearer",!1)});Pe.onTertiary=Ft.fromPalette({name:"on_tertiary",palette:t=>t.tertiaryPalette,tone:t=>ki(t)?t.isDark?10:90:t.isDark?20:100,background:t=>Pe.tertiary,contrastCurve:new _n(4.5,7,11,21)});Pe.tertiaryContainer=Ft.fromPalette({name:"tertiary_container",palette:t=>t.tertiaryPalette,tone:t=>{if(ki(t))return t.isDark?60:49;if(!Zy(t))return t.isDark?30:90;const e=t.tertiaryPalette.getHct(t.sourceColorHct.tone);return hw.fixIfDisliked(e).tone},isBackground:!0,background:t=>Pe.highestSurface(t),contrastCurve:new _n(1,1,3,4.5),toneDeltaPair:t=>new Ro(Pe.tertiaryContainer,Pe.tertiary,10,"nearer",!1)});Pe.onTertiaryContainer=Ft.fromPalette({name:"on_tertiary_container",palette:t=>t.tertiaryPalette,tone:t=>ki(t)?t.isDark?0:100:Zy(t)?Ft.foregroundTone(Pe.tertiaryContainer.tone(t),4.5):t.isDark?90:30,background:t=>Pe.tertiaryContainer,contrastCurve:new _n(3,4.5,7,11)});Pe.error=Ft.fromPalette({name:"error",palette:t=>t.errorPalette,tone:t=>t.isDark?80:40,isBackground:!0,background:t=>Pe.highestSurface(t),contrastCurve:new _n(3,4.5,7,7),toneDeltaPair:t=>new Ro(Pe.errorContainer,Pe.error,10,"nearer",!1)});Pe.onError=Ft.fromPalette({name:"on_error",palette:t=>t.errorPalette,tone:t=>t.isDark?20:100,background:t=>Pe.error,contrastCurve:new _n(4.5,7,11,21)});Pe.errorContainer=Ft.fromPalette({name:"error_container",palette:t=>t.errorPalette,tone:t=>t.isDark?30:90,isBackground:!0,background:t=>Pe.highestSurface(t),contrastCurve:new _n(1,1,3,4.5),toneDeltaPair:t=>new Ro(Pe.errorContainer,Pe.error,10,"nearer",!1)});Pe.onErrorContainer=Ft.fromPalette({name:"on_error_container",palette:t=>t.errorPalette,tone:t=>ki(t)?t.isDark?90:10:t.isDark?90:30,background:t=>Pe.errorContainer,contrastCurve:new _n(3,4.5,7,11)});Pe.primaryFixed=Ft.fromPalette({name:"primary_fixed",palette:t=>t.primaryPalette,tone:t=>ki(t)?40:90,isBackground:!0,background:t=>Pe.highestSurface(t),contrastCurve:new _n(1,1,3,4.5),toneDeltaPair:t=>new Ro(Pe.primaryFixed,Pe.primaryFixedDim,10,"lighter",!0)});Pe.primaryFixedDim=Ft.fromPalette({name:"primary_fixed_dim",palette:t=>t.primaryPalette,tone:t=>ki(t)?30:80,isBackground:!0,background:t=>Pe.highestSurface(t),contrastCurve:new _n(1,1,3,4.5),toneDeltaPair:t=>new Ro(Pe.primaryFixed,Pe.primaryFixedDim,10,"lighter",!0)});Pe.onPrimaryFixed=Ft.fromPalette({name:"on_primary_fixed",palette:t=>t.primaryPalette,tone:t=>ki(t)?100:10,background:t=>Pe.primaryFixedDim,secondBackground:t=>Pe.primaryFixed,contrastCurve:new _n(4.5,7,11,21)});Pe.onPrimaryFixedVariant=Ft.fromPalette({name:"on_primary_fixed_variant",palette:t=>t.primaryPalette,tone:t=>ki(t)?90:30,background:t=>Pe.primaryFixedDim,secondBackground:t=>Pe.primaryFixed,contrastCurve:new _n(3,4.5,7,11)});Pe.secondaryFixed=Ft.fromPalette({name:"secondary_fixed",palette:t=>t.secondaryPalette,tone:t=>ki(t)?80:90,isBackground:!0,background:t=>Pe.highestSurface(t),contrastCurve:new _n(1,1,3,4.5),toneDeltaPair:t=>new Ro(Pe.secondaryFixed,Pe.secondaryFixedDim,10,"lighter",!0)});Pe.secondaryFixedDim=Ft.fromPalette({name:"secondary_fixed_dim",palette:t=>t.secondaryPalette,tone:t=>ki(t)?70:80,isBackground:!0,background:t=>Pe.highestSurface(t),contrastCurve:new _n(1,1,3,4.5),toneDeltaPair:t=>new Ro(Pe.secondaryFixed,Pe.secondaryFixedDim,10,"lighter",!0)});Pe.onSecondaryFixed=Ft.fromPalette({name:"on_secondary_fixed",palette:t=>t.secondaryPalette,tone:t=>10,background:t=>Pe.secondaryFixedDim,secondBackground:t=>Pe.secondaryFixed,contrastCurve:new _n(4.5,7,11,21)});Pe.onSecondaryFixedVariant=Ft.fromPalette({name:"on_secondary_fixed_variant",palette:t=>t.secondaryPalette,tone:t=>ki(t)?25:30,background:t=>Pe.secondaryFixedDim,secondBackground:t=>Pe.secondaryFixed,contrastCurve:new _n(3,4.5,7,11)});Pe.tertiaryFixed=Ft.fromPalette({name:"tertiary_fixed",palette:t=>t.tertiaryPalette,tone:t=>ki(t)?40:90,isBackground:!0,background:t=>Pe.highestSurface(t),contrastCurve:new _n(1,1,3,4.5),toneDeltaPair:t=>new Ro(Pe.tertiaryFixed,Pe.tertiaryFixedDim,10,"lighter",!0)});Pe.tertiaryFixedDim=Ft.fromPalette({name:"tertiary_fixed_dim",palette:t=>t.tertiaryPalette,tone:t=>ki(t)?30:80,isBackground:!0,background:t=>Pe.highestSurface(t),contrastCurve:new _n(1,1,3,4.5),toneDeltaPair:t=>new Ro(Pe.tertiaryFixed,Pe.tertiaryFixedDim,10,"lighter",!0)});Pe.onTertiaryFixed=Ft.fromPalette({name:"on_tertiary_fixed",palette:t=>t.tertiaryPalette,tone:t=>ki(t)?100:10,background:t=>Pe.tertiaryFixedDim,secondBackground:t=>Pe.tertiaryFixed,contrastCurve:new _n(4.5,7,11,21)});Pe.onTertiaryFixedVariant=Ft.fromPalette({name:"on_tertiary_fixed_variant",palette:t=>t.tertiaryPalette,tone:t=>ki(t)?90:30,background:t=>Pe.tertiaryFixedDim,secondBackground:t=>Pe.tertiaryFixed,contrastCurve:new _n(3,4.5,7,11)});class Bc{constructor(e){this.sourceColorArgb=e.sourceColorArgb,this.variant=e.variant,this.contrastLevel=e.contrastLevel,this.isDark=e.isDark,this.sourceColorHct=ui.fromInt(e.sourceColorArgb),this.primaryPalette=e.primaryPalette,this.secondaryPalette=e.secondaryPalette,this.tertiaryPalette=e.tertiaryPalette,this.neutralPalette=e.neutralPalette,this.neutralVariantPalette=e.neutralVariantPalette,this.errorPalette=Ln.fromHueAndChroma(25,84)}static getRotatedHue(e,n,r){const i=e.hue;if(n.length!==r.length)throw new Error(`mismatch between hue length ${n.length} & rotations ${r.length}`);if(r.length===1)return Lf(e.hue+r[0]);const a=n.length;for(let s=0;s<=a-2;s++){const o=n[s],c=n[s+1];if(o<i&&i<c)return Lf(i+r[s])}return i}getArgb(e){return e.getArgb(this)}getHct(e){return e.getHct(this)}get primaryPaletteKeyColor(){return this.getArgb(Pe.primaryPaletteKeyColor)}get secondaryPaletteKeyColor(){return this.getArgb(Pe.secondaryPaletteKeyColor)}get tertiaryPaletteKeyColor(){return this.getArgb(Pe.tertiaryPaletteKeyColor)}get neutralPaletteKeyColor(){return this.getArgb(Pe.neutralPaletteKeyColor)}get neutralVariantPaletteKeyColor(){return this.getArgb(Pe.neutralVariantPaletteKeyColor)}get background(){return this.getArgb(Pe.background)}get onBackground(){return this.getArgb(Pe.onBackground)}get surface(){return this.getArgb(Pe.surface)}get surfaceDim(){return this.getArgb(Pe.surfaceDim)}get surfaceBright(){return this.getArgb(Pe.surfaceBright)}get surfaceContainerLowest(){return this.getArgb(Pe.surfaceContainerLowest)}get surfaceContainerLow(){return this.getArgb(Pe.surfaceContainerLow)}get surfaceContainer(){return this.getArgb(Pe.surfaceContainer)}get surfaceContainerHigh(){return this.getArgb(Pe.surfaceContainerHigh)}get surfaceContainerHighest(){return this.getArgb(Pe.surfaceContainerHighest)}get onSurface(){return this.getArgb(Pe.onSurface)}get surfaceVariant(){return this.getArgb(Pe.surfaceVariant)}get onSurfaceVariant(){return this.getArgb(Pe.onSurfaceVariant)}get inverseSurface(){return this.getArgb(Pe.inverseSurface)}get inverseOnSurface(){return this.getArgb(Pe.inverseOnSurface)}get outline(){return this.getArgb(Pe.outline)}get outlineVariant(){return this.getArgb(Pe.outlineVariant)}get shadow(){return this.getArgb(Pe.shadow)}get scrim(){return this.getArgb(Pe.scrim)}get surfaceTint(){return this.getArgb(Pe.surfaceTint)}get primary(){return this.getArgb(Pe.primary)}get onPrimary(){return this.getArgb(Pe.onPrimary)}get primaryContainer(){return this.getArgb(Pe.primaryContainer)}get onPrimaryContainer(){return this.getArgb(Pe.onPrimaryContainer)}get inversePrimary(){return this.getArgb(Pe.inversePrimary)}get secondary(){return this.getArgb(Pe.secondary)}get onSecondary(){return this.getArgb(Pe.onSecondary)}get secondaryContainer(){return this.getArgb(Pe.secondaryContainer)}get onSecondaryContainer(){return this.getArgb(Pe.onSecondaryContainer)}get tertiary(){return this.getArgb(Pe.tertiary)}get onTertiary(){return this.getArgb(Pe.onTertiary)}get tertiaryContainer(){return this.getArgb(Pe.tertiaryContainer)}get onTertiaryContainer(){return this.getArgb(Pe.onTertiaryContainer)}get error(){return this.getArgb(Pe.error)}get onError(){return this.getArgb(Pe.onError)}get errorContainer(){return this.getArgb(Pe.errorContainer)}get onErrorContainer(){return this.getArgb(Pe.onErrorContainer)}get primaryFixed(){return this.getArgb(Pe.primaryFixed)}get primaryFixedDim(){return this.getArgb(Pe.primaryFixedDim)}get onPrimaryFixed(){return this.getArgb(Pe.onPrimaryFixed)}get onPrimaryFixedVariant(){return this.getArgb(Pe.onPrimaryFixedVariant)}get secondaryFixed(){return this.getArgb(Pe.secondaryFixed)}get secondaryFixedDim(){return this.getArgb(Pe.secondaryFixedDim)}get onSecondaryFixed(){return this.getArgb(Pe.onSecondaryFixed)}get onSecondaryFixedVariant(){return this.getArgb(Pe.onSecondaryFixedVariant)}get tertiaryFixed(){return this.getArgb(Pe.tertiaryFixed)}get tertiaryFixedDim(){return this.getArgb(Pe.tertiaryFixedDim)}get onTertiaryFixed(){return this.getArgb(Pe.onTertiaryFixed)}get onTertiaryFixedVariant(){return this.getArgb(Pe.onTertiaryFixedVariant)}}class ry{constructor(e){this.input=e,this.hctsByTempCache=[],this.hctsByHueCache=[],this.tempsByHctCache=new Map,this.inputRelativeTemperatureCache=-1,this.complementCache=null}get hctsByTemp(){if(this.hctsByTempCache.length>0)return this.hctsByTempCache;const e=this.hctsByHue.concat([this.input]),n=this.tempsByHct;return e.sort((r,i)=>n.get(r)-n.get(i)),this.hctsByTempCache=e,e}get warmest(){return this.hctsByTemp[this.hctsByTemp.length-1]}get coldest(){return this.hctsByTemp[0]}analogous(e=5,n=12){const r=Math.round(this.input.hue),i=this.hctsByHue[r];let a=this.relativeTemperature(i);const s=[i];let o=0;for(let v=0;v<360;v++){const x=TO(r+v),_=this.hctsByHue[x],w=this.relativeTemperature(_),S=Math.abs(w-a);a=w,o+=S}let c=1;const u=o/n;let h=0;for(a=this.relativeTemperature(i);s.length<n;){const v=TO(r+c),x=this.hctsByHue[v],_=this.relativeTemperature(x),w=Math.abs(_-a);h+=w;const S=s.length*u;let E=h>=S,A=1;for(;E&&s.length<n;){s.push(x);const N=(s.length+A)*u;E=h>=N,A++}if(a=_,c++,c>360){for(;s.length<n;)s.push(x);break}}const f=[this.input],m=Math.floor((e-1)/2);for(let v=1;v<m+1;v++){let x=0-v;for(;x<0;)x=s.length+x;x>=s.length&&(x=x%s.length),f.splice(0,0,s[x])}const g=e-m-1;for(let v=1;v<g+1;v++){let x=v;for(;x<0;)x=s.length+x;x>=s.length&&(x=x%s.length),f.push(s[x])}return f}get complement(){if(this.complementCache!=null)return this.complementCache;const e=this.coldest.hue,n=this.tempsByHct.get(this.coldest),r=this.warmest.hue,a=this.tempsByHct.get(this.warmest)-n,s=ry.isBetween(this.input.hue,e,r),o=s?r:e,c=s?e:r,u=1;let h=1e3,f=this.hctsByHue[Math.round(this.input.hue)];const m=1-this.inputRelativeTemperature;for(let g=0;g<=360;g+=1){const v=Lf(o+u*g);if(!ry.isBetween(v,o,c))continue;const x=this.hctsByHue[Math.round(v)],_=(this.tempsByHct.get(x)-n)/a,w=Math.abs(m-_);w<h&&(h=w,f=x)}return this.complementCache=f,this.complementCache}relativeTemperature(e){const n=this.tempsByHct.get(this.warmest)-this.tempsByHct.get(this.coldest),r=this.tempsByHct.get(e)-this.tempsByHct.get(this.coldest);return n===0?.5:r/n}get inputRelativeTemperature(){return this.inputRelativeTemperatureCache>=0?this.inputRelativeTemperatureCache:(this.inputRelativeTemperatureCache=this.relativeTemperature(this.input),this.inputRelativeTemperatureCache)}get tempsByHct(){if(this.tempsByHctCache.size>0)return this.tempsByHctCache;const e=this.hctsByHue.concat([this.input]),n=new Map;for(const r of e)n.set(r,ry.rawTemperature(r));return this.tempsByHctCache=n,n}get hctsByHue(){if(this.hctsByHueCache.length>0)return this.hctsByHueCache;const e=[];for(let n=0;n<=360;n+=1){const r=ui.from(n,this.input.chroma,this.input.tone);e.push(r)}return this.hctsByHueCache=e,this.hctsByHueCache}static isBetween(e,n,r){return n<r?n<=e&&e<=r:n<=e||e<=r}static rawTemperature(e){const n=$4e(e.toInt()),r=Lf(Math.atan2(n[2],n[1])*180/Math.PI),i=Math.sqrt(n[1]*n[1]+n[2]*n[2]);return-.5+.02*Math.pow(i,1.07)*Math.cos(Lf(r-50)*Math.PI/180)}}class z4e extends Bc{constructor(e,n,r){super({sourceColorArgb:e.toInt(),variant:Gl.CONTENT,contrastLevel:r,isDark:n,primaryPalette:Ln.fromHueAndChroma(e.hue,e.chroma),secondaryPalette:Ln.fromHueAndChroma(e.hue,Math.max(e.chroma-32,e.chroma*.5)),tertiaryPalette:Ln.fromInt(hw.fixIfDisliked(new ry(e).analogous(3,6)[2]).toInt()),neutralPalette:Ln.fromHueAndChroma(e.hue,e.chroma/8),neutralVariantPalette:Ln.fromHueAndChroma(e.hue,e.chroma/8+4)})}}class Bd extends Bc{constructor(e,n,r){super({sourceColorArgb:e.toInt(),variant:Gl.EXPRESSIVE,contrastLevel:r,isDark:n,primaryPalette:Ln.fromHueAndChroma(Lf(e.hue+240),40),secondaryPalette:Ln.fromHueAndChroma(Bc.getRotatedHue(e,Bd.hues,Bd.secondaryRotations),24),tertiaryPalette:Ln.fromHueAndChroma(Bc.getRotatedHue(e,Bd.hues,Bd.tertiaryRotations),32),neutralPalette:Ln.fromHueAndChroma(e.hue+15,8),neutralVariantPalette:Ln.fromHueAndChroma(e.hue+15,12)})}}Bd.hues=[0,21,51,121,151,191,271,321,360];Bd.secondaryRotations=[45,95,45,20,45,90,45,45,45];Bd.tertiaryRotations=[120,120,20,45,20,15,20,120,120];class U4e extends Bc{constructor(e,n,r){super({sourceColorArgb:e.toInt(),variant:Gl.FIDELITY,contrastLevel:r,isDark:n,primaryPalette:Ln.fromHueAndChroma(e.hue,e.chroma),secondaryPalette:Ln.fromHueAndChroma(e.hue,Math.max(e.chroma-32,e.chroma*.5)),tertiaryPalette:Ln.fromInt(hw.fixIfDisliked(new ry(e).complement).toInt()),neutralPalette:Ln.fromHueAndChroma(e.hue,e.chroma/8),neutralVariantPalette:Ln.fromHueAndChroma(e.hue,e.chroma/8+4)})}}class V4e extends Bc{constructor(e,n,r){super({sourceColorArgb:e.toInt(),variant:Gl.MONOCHROME,contrastLevel:r,isDark:n,primaryPalette:Ln.fromHueAndChroma(e.hue,0),secondaryPalette:Ln.fromHueAndChroma(e.hue,0),tertiaryPalette:Ln.fromHueAndChroma(e.hue,0),neutralPalette:Ln.fromHueAndChroma(e.hue,0),neutralVariantPalette:Ln.fromHueAndChroma(e.hue,0)})}}class H4e extends Bc{constructor(e,n,r){super({sourceColorArgb:e.toInt(),variant:Gl.NEUTRAL,contrastLevel:r,isDark:n,primaryPalette:Ln.fromHueAndChroma(e.hue,12),secondaryPalette:Ln.fromHueAndChroma(e.hue,8),tertiaryPalette:Ln.fromHueAndChroma(e.hue,16),neutralPalette:Ln.fromHueAndChroma(e.hue,2),neutralVariantPalette:Ln.fromHueAndChroma(e.hue,2)})}}class PO extends Bc{constructor(e,n,r){super({sourceColorArgb:e.toInt(),variant:Gl.TONAL_SPOT,contrastLevel:r,isDark:n,primaryPalette:Ln.fromHueAndChroma(e.hue,36),secondaryPalette:Ln.fromHueAndChroma(e.hue,16),tertiaryPalette:Ln.fromHueAndChroma(Lf(e.hue+60),24),neutralPalette:Ln.fromHueAndChroma(e.hue,6),neutralVariantPalette:Ln.fromHueAndChroma(e.hue,8)})}}class zd extends Bc{constructor(e,n,r){super({sourceColorArgb:e.toInt(),variant:Gl.VIBRANT,contrastLevel:r,isDark:n,primaryPalette:Ln.fromHueAndChroma(e.hue,200),secondaryPalette:Ln.fromHueAndChroma(Bc.getRotatedHue(e,zd.hues,zd.secondaryRotations),24),tertiaryPalette:Ln.fromHueAndChroma(Bc.getRotatedHue(e,zd.hues,zd.tertiaryRotations),32),neutralPalette:Ln.fromHueAndChroma(e.hue,10),neutralVariantPalette:Ln.fromHueAndChroma(e.hue,12)})}}zd.hues=[0,41,61,101,131,181,251,301,360];zd.secondaryRotations=[18,15,10,12,15,18,15,12,12];zd.tertiaryRotations=[35,30,20,25,30,35,30,25,25];function nr(t){const e=a$(t),n=s$(t),r=o$(t),i=[e.toString(16),n.toString(16),r.toString(16)];for(const[a,s]of i.entries())s.length===1&&(i[a]="0"+s);return"#"+i.join("")}function l$(t){t=t.replace("#","");const e=t.length===3,n=t.length===6,r=t.length===8;if(!e&&!n&&!r)throw new Error("unexpected hex "+t);let i=0,a=0,s=0;return e?(i=Md(t.slice(0,1).repeat(2)),a=Md(t.slice(1,2).repeat(2)),s=Md(t.slice(2,3).repeat(2))):n?(i=Md(t.slice(0,2)),a=Md(t.slice(2,4)),s=Md(t.slice(4,6))):r&&(i=Md(t.slice(2,4)),a=Md(t.slice(4,6)),s=Md(t.slice(6,8))),(255<<24|(i&255)<<16|(a&255)<<8|s&255)>>>0}function Md(t){return parseInt(t,16)}function FY(t){const e=l$(t),n=ui.fromInt(e);return{hue:n.hue,chroma:n.chroma,tone:n.tone}}const G4e=[0,4,6,10,12,17,20,22,24,30,40,50,60,70,80,87,90,92,94,95,96,98,99,100],W4e=[50,100,200,300,400,500,600,700,800,900,950],q4e={50:98,100:94,200:87,300:80,400:70,500:60,600:50,700:40,800:30,900:20,950:10};function K4e(t){const e=FY(t),n=Ln.fromHueAndChroma(e.hue,e.chroma),r={};for(const i of W4e){const a=q4e[i],s=nr(n.tone(a)),o=b3(s);o&&(r[i]=o)}return r}function BY(t,e,n,r=0){switch(e){case"tonalSpot":return new PO(ui.fromInt(t),n,r);case"vibrant":return new zd(ui.fromInt(t),n,r);case"expressive":return new Bd(ui.fromInt(t),n,r);case"neutral":return new H4e(ui.fromInt(t),n,r);case"monochrome":return new V4e(ui.fromInt(t),n,r);case"fidelity":return new U4e(ui.fromInt(t),n,r);case"content":return new z4e(ui.fromInt(t),n,r);default:return new PO(ui.fromInt(t),n,r)}}function Uk(t,e="tonalSpot",n=!1,r=0){const i=l$(t),a=BY(i,e,n,r);return{primary:nr(a.primary),onPrimary:nr(a.onPrimary),primaryContainer:nr(a.primaryContainer),onPrimaryContainer:nr(a.onPrimaryContainer),secondary:nr(a.secondary),onSecondary:nr(a.onSecondary),secondaryContainer:nr(a.secondaryContainer),onSecondaryContainer:nr(a.onSecondaryContainer),tertiary:nr(a.tertiary),onTertiary:nr(a.onTertiary),tertiaryContainer:nr(a.tertiaryContainer),onTertiaryContainer:nr(a.onTertiaryContainer),error:nr(a.error),onError:nr(a.onError),errorContainer:nr(a.errorContainer),onErrorContainer:nr(a.onErrorContainer),surface:nr(a.surface),onSurface:nr(a.onSurface),surfaceVariant:nr(a.surfaceVariant),onSurfaceVariant:nr(a.onSurfaceVariant),surfaceContainerLowest:nr(a.surfaceContainerLowest),surfaceContainerLow:nr(a.surfaceContainerLow),surfaceContainer:nr(a.surfaceContainer),surfaceContainerHigh:nr(a.surfaceContainerHigh),surfaceContainerHighest:nr(a.surfaceContainerHighest),outline:nr(a.outline),outlineVariant:nr(a.outlineVariant),inverseSurface:nr(a.inverseSurface),inverseOnSurface:nr(a.inverseOnSurface),inversePrimary:nr(a.inversePrimary),scrim:nr(a.scrim),shadow:nr(a.shadow),background:nr(a.background),onBackground:nr(a.onBackground)}}function zY(t,e="tonalSpot"){const n=l$(t),r=BY(n,e,!1,0),i=a=>{const s={};for(const c of G4e)s[c]=nr(a.tone(c));const o=ui.fromInt(a.tone(50));return{hue:o.hue,chroma:o.chroma,tones:s}};return{primary:i(r.primaryPalette),secondary:i(r.secondaryPalette),tertiary:i(r.tertiaryPalette),neutral:i(r.neutralPalette),neutralVariant:i(r.neutralVariantPalette),error:i(r.errorPalette)}}class X4e{async*generateTheme(e){const n=e.variant||"tonalSpot",r=e.contrastLevel||0,i=e.includeDarkMode??!0;try{yield{stage:"analyzing",progress:10,message:"Analyzing source color..."};const a=FY(e.sourceColor);console.log("[HctThemeService] Source HCT:",a),yield{stage:"palettes",progress:25,message:"Generating tonal palettes..."};const s=zY(e.sourceColor,n);yield{stage:"palettes",progress:40,message:"Tonal palettes generated",data:{tonalPalettes:s}},yield{stage:"schemes",progress:50,message:"Generating color schemes..."};const o=Uk(e.sourceColor,n,!1,r);let c;i&&(c=Uk(e.sourceColor,n,!0,r)),yield{stage:"schemes",progress:65,message:"Color schemes generated",data:{lightScheme:o,darkScheme:c}},yield{stage:"tokens",progress:75,message:"Converting to design tokens..."};const u=await vs.createTheme({project_id:e.projectId,name:e.themeName,status:"draft",supports_dark_mode:i}),h=this.convertToDesignTokens(e.projectId,u.id,e.sourceColor,s,o,c);yield{stage:"tokens",progress:85,message:`Generated ${h.length} design tokens`},yield{stage:"saving",progress:90,message:"Saving theme to database..."},await Ir.bulkUpsertTokens(h),yield{stage:"complete",progress:100,message:"Theme generation complete!",data:{themeId:u.id,themeName:e.themeName,sourceColor:e.sourceColor,variant:n,lightScheme:o,darkScheme:c,tonalPalettes:s,tokens:h,metadata:{generatedAt:new Date().toISOString(),algorithm:"hct",tokenCount:h.length,variant:n,contrastLevel:r}}}}catch(a){throw console.error("[HctThemeService] Generation failed:",a),a}}convertToDesignTokens(e,n,r,i,a,s){const o=[],c=["primary","secondary","tertiary","neutral","neutralVariant","error"];for(const f of c){const m=i[f],g=K4e(`#${m.tones[50].slice(1)}`),v=f==="neutralVariant"?"surface":f;for(const[x,_]of Object.entries(g))o.push({project_id:e,theme_id:n,name:`color.${v}.${x}`,type:"color",value:_,scope:"raw",css_variable:`--color-${v}-${x}`})}const u=Object.entries(a);for(const[f,m]of u){const g=b3(m);if(g){const v=f.replace(/([A-Z])/g,"-$1").toLowerCase();o.push({project_id:e,theme_id:n,name:`color.m3.${f}`,type:"color",value:g,scope:"semantic",css_variable:`--color-m3${v}`})}}if(s){const f=Object.entries(s);for(const[m,g]of f){const v=b3(g);if(v){const x=m.replace(/([A-Z])/g,"-$1").toLowerCase();o.push({project_id:e,theme_id:n,name:`color.m3.dark.${m}`,type:"color",value:v,scope:"semantic",css_variable:`--color-m3-dark${x}`})}}}const h=b3(r);return h&&o.push({project_id:e,theme_id:n,name:"color.source",type:"color",value:h,scope:"raw",css_variable:"--color-source"}),o}}function Y4e(t,e="tonalSpot",n=!1,r=0){return Uk(t,e,n,r)}function Z4e(t,e="tonalSpot"){return zY(t,e)}const UY=()=>{const t=T.useRef(""),e=T.useRef(null),n=T.useCallback(i=>{const a=JSON.stringify(i.map(o=>({name:o.name,value:o.value,scope:o.scope})));if(t.current===a)return;const s=Ki.getIframe();if(!s?.contentWindow){console.warn(" [ThemeMessenger] iframe not ready, cannot send theme tokens");return}try{const o=AY(i);s.contentWindow.postMessage({type:"UPDATE_THEME_TOKENS",styles:o},window.location.origin),t.current=a}catch(o){console.error(" [ThemeMessenger] Failed to send theme tokens:",o)}},[]),r=T.useCallback(i=>{if(e.current===i){console.log(" [ThemeMessenger] Duplicate dark mode, skipping send");return}const a=Ki.getIframe();if(!a?.contentWindow){console.warn(" [ThemeMessenger] iframe not ready, cannot send dark mode");return}try{a.contentWindow.postMessage({type:"SET_DARK_MODE",isDark:i},window.location.origin),e.current=i,console.log(" [ThemeMessenger] Sent dark mode to Preview:",i)}catch(s){console.error(" [ThemeMessenger] Failed to send dark mode:",s)}},[]);return{sendThemeTokens:n,sendDarkMode:r}};function J4e(){const{projectId:t}=yg(),{sendThemeTokens:e,sendDarkMode:n}=UY(),r=$e(X=>X.showOverlay),i=$e(X=>X.setShowOverlay),a=$e(X=>X.showGrid),s=$e(X=>X.setShowGrid),o=$e(X=>X.snapToGrid),c=$e(X=>X.setSnapToGrid),u=$e(X=>X.gridSize),h=$e(X=>X.setGridSize),f=$e(X=>X.showElementBorders),m=$e(X=>X.setShowElementBorders),g=$e(X=>X.showElementLabels),v=$e(X=>X.setShowElementLabels),x=$e(X=>X.overlayOpacity),_=$e(X=>X.setOverlayOpacity),w=$e(X=>X.themeMode),S=$e(X=>X.setThemeMode),E=$e(X=>X.uiScale),A=$e(X=>X.setUiScale),N=$e(X=>X.isRealtimeMode),P=$e(X=>X.pendingChanges),R=$e(X=>X.setRealtimeMode),D=P.size,k=qr(X=>X.activeTheme),L=qr(X=>X.loadActiveTheme),{themes:$}=r$({projectId:t||"",enableRealtime:!1}),[B,q]=ve.useState(!1),U=async X=>{if(t)try{await vs.activateTheme(X),await L(t);const{tokens:ne}=qr.getState();ne.length>0&&e(ne)}catch{}},J=()=>w==="dark"?$1:w==="light"?yN:window.matchMedia("(prefers-color-scheme: dark)").matches?$1:yN,O=[{value:"light",label:"Light"},{value:"dark",label:"Dark"},{value:"auto",label:"Auto (System)"}],z=[{value:"80",label:"80%"},{value:"100",label:"100%"},{value:"120",label:"120%"}],V=[{value:"8",label:"8px"},{value:"16",label:"16px"},{value:"24",label:"24px"}],H=X=>{const ne=parseInt(X);h(ne)},ee=X=>{const ne=X;S(ne);const G=ne==="dark"||ne==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches;n(G)},Y=X=>{const ne=parseInt(X);A(ne)},Z=()=>{q(!0),Rm.saveAllPendingChanges().then(()=>{}).catch(X=>{}).finally(()=>{q(!1)})},K=X=>{R(X),X&&P.size>0&&Z()};return l.jsxs("div",{className:"settings-panel",children:[l.jsx(Ul,{icon:l.jsx(Kl,{size:16}),title:"Settings"}),l.jsxs("div",{className:"panel-settings",children:[l.jsxs($a,{title:"Save Mode",children:[l.jsx(Jo,{label:"Auto Save",isSelected:N,onChange:K,icon:jie}),!N&&l.jsx(Pt,{onPress:Z,isDisabled:D===0||B,className:"react-aria-Button primary",children:B?"Saving...":`Save${D>0?` (${D})`:""}`})]}),l.jsx($a,{title:"Preview & Overlay",children:l.jsx(Jo,{label:"Show Selection Overlay",isSelected:r,onChange:i,icon:I1})}),l.jsxs($a,{title:"Grid & Guides",children:[l.jsx(Jo,{label:"Show Grid",isSelected:a,onChange:s,icon:KB}),l.jsx(Jo,{label:"Snap to Grid",isSelected:o,onChange:c,icon:Yre}),l.jsx(ja,{label:"Grid Size",value:String(u),onChange:H,options:V,icon:Iie})]}),l.jsxs($a,{title:"Element Visualization",children:[l.jsx(Jo,{label:"Show Element Borders",isSelected:f,onChange:m,icon:Of}),l.jsx(Jo,{label:"Show Element Labels",isSelected:g,onChange:v,icon:L2}),l.jsx(IMe,{label:"Overlay Opacity",value:x,onChange:_,min:0,max:100,step:5,icon:_ie})]}),l.jsxs($a,{title:"Theme & Appearance",children:[t&&$.length>0&&l.jsx(ja,{label:"Theme Select",value:k?.id||"",onChange:U,options:$.map(X=>({value:X.id,label:X.name})),icon:Bv}),l.jsx(ja,{label:"Theme Mode",value:w,onChange:ee,options:O,icon:J()}),l.jsx(ja,{label:"UI Scale",value:String(E),onChange:Y,options:z,icon:lse})]})]})]})}function VY({isActive:t}){return t?l.jsx(J4e,{}):null}var N1={exports:{}};var Q4e=N1.exports,NO;function eAe(){return NO||(NO=1,(function(t,e){(function(){var n,r="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",o="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",u=500,h="__lodash_placeholder__",f=1,m=2,g=4,v=1,x=2,_=1,w=2,S=4,E=8,A=16,N=32,P=64,R=128,D=256,k=512,L=30,$="...",B=800,q=16,U=1,J=2,O=3,z=1/0,V=9007199254740991,H=17976931348623157e292,ee=NaN,Y=4294967295,Z=Y-1,K=Y>>>1,X=[["ary",R],["bind",_],["bindKey",w],["curry",E],["curryRight",A],["flip",k],["partial",N],["partialRight",P],["rearg",D]],ne="[object Arguments]",G="[object Array]",te="[object AsyncFunction]",ae="[object Boolean]",pe="[object Date]",ye="[object DOMException]",me="[object Error]",fe="[object Function]",ge="[object GeneratorFunction]",be="[object Map]",oe="[object Number]",Le="[object Null]",Ve="[object Object]",Ze="[object Promise]",xe="[object Proxy]",ht="[object RegExp]",Fe="[object Set]",et="[object String]",de="[object Symbol]",re="[object Undefined]",Ce="[object WeakMap]",ke="[object WeakSet]",De="[object ArrayBuffer]",je="[object DataView]",mt="[object Float32Array]",rt="[object Float64Array]",bt="[object Int8Array]",dt="[object Int16Array]",Je="[object Int32Array]",ot="[object Uint8Array]",It="[object Uint8ClampedArray]",Ct="[object Uint16Array]",St="[object Uint32Array]",Bt=/\b__p \+= '';/g,we=/\b(__p \+=) '' \+/g,xt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_t=/&(?:amp|lt|gt|quot|#39);/g,vt=/[&<>"']/g,it=RegExp(_t.source),Qe=RegExp(vt.source),At=/<%-([\s\S]+?)%>/g,We=/<%([\s\S]+?)%>/g,ft=/<%=([\s\S]+?)%>/g,yt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gt=/^\w*$/,ln=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vn=/[\\^$.*+?()[\]{}|]/g,Mt=RegExp(vn.source),$t=/^\s+/,Fn=/\s/,Rn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ur=/\{\n\/\* \[wrapped with (.+)\] \*/,Oa=/,? & /,ir=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pr=/[()=,{}\[\]\/\s]/,Vr=/\\(\\)?/g,Bi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ws=/\w*$/,qc=/^[-+]0x[0-9a-f]+$/i,Wu=/^0b[01]+$/i,uh=/^\[object .+?Constructor\]$/,ec=/^0o[0-7]+$/i,qu=/^(?:0|[1-9]\d*)$/,gl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ue=/($^)/,Ae=/['\n\r\u2028\u2029\\]/g,Ge="\\ud800-\\udfff",Be="\\u0300-\\u036f",Re="\\ufe20-\\ufe2f",wt="\\u20d0-\\u20ff",Tt=Be+Re+wt,Rt="\\u2700-\\u27bf",jt="a-z\\xdf-\\xf6\\xf8-\\xff",Qt="\\xac\\xb1\\xd7\\xf7",nn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Zt="\\u2000-\\u206f",wn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Kn="A-Z\\xc0-\\xd6\\xd8-\\xde",Zn="\\ufe0e\\ufe0f",Bn=Qt+nn+Zt+wn,tr="[']",en="["+Ge+"]",hr="["+Bn+"]",Dn="["+Tt+"]",hi="\\d+",vl="["+Rt+"]",Sr="["+jt+"]",Ya="[^"+Ge+Bn+hi+Rt+jt+Kn+"]",br="\\ud83c[\\udffb-\\udfff]",Ri="(?:"+Dn+"|"+br+")",si="[^"+Ge+"]",Ii="(?:\\ud83c[\\udde6-\\uddff]){2}",zi="[\\ud800-\\udbff][\\udc00-\\udfff]",Fa="["+Kn+"]",yl="\\u200d",Qy="(?:"+Sr+"|"+Ya+")",xw="(?:"+Fa+"|"+Ya+")",Dg="(?:"+tr+"(?:d|ll|m|re|s|t|ve))?",_w="(?:"+tr+"(?:D|LL|M|RE|S|T|VE))?",ww=Ri+"?",Qf="["+Zn+"]?",tc="(?:"+yl+"(?:"+[si,Ii,zi].join("|")+")"+Qf+ww+")*",eb="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tb="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ku=Qf+ww+tc,dh="(?:"+[vl,Ii,zi].join("|")+")"+Ku,Sw="(?:"+[si+Dn+"?",Dn,Ii,zi,en].join("|")+")",nb=RegExp(tr,"g"),Ew=RegExp(Dn,"g"),Xu=RegExp(br+"(?="+br+")|"+Sw+Ku,"g"),nc=RegExp([Fa+"?"+Sr+"+"+Dg+"(?="+[hr,Fa,"$"].join("|")+")",xw+"+"+_w+"(?="+[hr,Fa+Qy,"$"].join("|")+")",Fa+"?"+Qy+"+"+Dg,Fa+"+"+_w,tb,eb,hi,dh].join("|"),"g"),rb=RegExp("["+yl+Ge+Tt+Zn+"]"),ep=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Kc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ib=-1,Nr={};Nr[mt]=Nr[rt]=Nr[bt]=Nr[dt]=Nr[Je]=Nr[ot]=Nr[It]=Nr[Ct]=Nr[St]=!0,Nr[ne]=Nr[G]=Nr[De]=Nr[ae]=Nr[je]=Nr[pe]=Nr[me]=Nr[fe]=Nr[be]=Nr[oe]=Nr[Ve]=Nr[ht]=Nr[Fe]=Nr[et]=Nr[Ce]=!1;var jr={};jr[ne]=jr[G]=jr[De]=jr[je]=jr[ae]=jr[pe]=jr[mt]=jr[rt]=jr[bt]=jr[dt]=jr[Je]=jr[be]=jr[oe]=jr[Ve]=jr[ht]=jr[Fe]=jr[et]=jr[de]=jr[ot]=jr[It]=jr[Ct]=jr[St]=!0,jr[me]=jr[fe]=jr[Ce]=!1;var kg={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Rg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Cw={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Za={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Yu=parseFloat,Ig=parseInt,hh=typeof AE=="object"&&AE&&AE.Object===Object&&AE,ZT=typeof self=="object"&&self&&self.Object===Object&&self,Ui=hh||ZT||Function("return this")(),tp=e&&!e.nodeType&&e,Io=tp&&!0&&t&&!t.nodeType&&t,np=Io&&Io.exports===tp,$g=np&&hh.process,Ys=(function(){try{var Me=Io&&Io.require&&Io.require("util").types;return Me||$g&&$g.binding&&$g.binding("util")}catch{}})(),Tw=Ys&&Ys.isArrayBuffer,Mw=Ys&&Ys.isDate,jg=Ys&&Ys.isMap,Aw=Ys&&Ys.isRegExp,Pw=Ys&&Ys.isSet,Nw=Ys&&Ys.isTypedArray;function Ss(Me,tt,Ke){switch(Ke.length){case 0:return Me.call(tt);case 1:return Me.call(tt,Ke[0]);case 2:return Me.call(tt,Ke[0],Ke[1]);case 3:return Me.call(tt,Ke[0],Ke[1],Ke[2])}return Me.apply(tt,Ke)}function JT(Me,tt,Ke,Ot){for(var yn=-1,Hn=Me==null?0:Me.length;++yn<Hn;){var Jr=Me[yn];tt(Ot,Jr,Ke(Jr),Me)}return Ot}function Es(Me,tt){for(var Ke=-1,Ot=Me==null?0:Me.length;++Ke<Ot&&tt(Me[Ke],Ke,Me)!==!1;);return Me}function QT(Me,tt){for(var Ke=Me==null?0:Me.length;Ke--&&tt(Me[Ke],Ke,Me)!==!1;);return Me}function Dw(Me,tt){for(var Ke=-1,Ot=Me==null?0:Me.length;++Ke<Ot;)if(!tt(Me[Ke],Ke,Me))return!1;return!0}function Xc(Me,tt){for(var Ke=-1,Ot=Me==null?0:Me.length,yn=0,Hn=[];++Ke<Ot;){var Jr=Me[Ke];tt(Jr,Ke,Me)&&(Hn[yn++]=Jr)}return Hn}function Lg(Me,tt){var Ke=Me==null?0:Me.length;return!!Ke&&fh(Me,tt,0)>-1}function rp(Me,tt,Ke){for(var Ot=-1,yn=Me==null?0:Me.length;++Ot<yn;)if(Ke(tt,Me[Ot]))return!0;return!1}function Zr(Me,tt){for(var Ke=-1,Ot=Me==null?0:Me.length,yn=Array(Ot);++Ke<Ot;)yn[Ke]=tt(Me[Ke],Ke,Me);return yn}function Yc(Me,tt){for(var Ke=-1,Ot=tt.length,yn=Me.length;++Ke<Ot;)Me[yn+Ke]=tt[Ke];return Me}function ab(Me,tt,Ke,Ot){var yn=-1,Hn=Me==null?0:Me.length;for(Ot&&Hn&&(Ke=Me[++yn]);++yn<Hn;)Ke=tt(Ke,Me[yn],yn,Me);return Ke}function kw(Me,tt,Ke,Ot){var yn=Me==null?0:Me.length;for(Ot&&yn&&(Ke=Me[--yn]);yn--;)Ke=tt(Ke,Me[yn],yn,Me);return Ke}function sb(Me,tt){for(var Ke=-1,Ot=Me==null?0:Me.length;++Ke<Ot;)if(tt(Me[Ke],Ke,Me))return!0;return!1}var eM=Zu("length");function tM(Me){return Me.split("")}function nM(Me){return Me.match(ir)||[]}function Rw(Me,tt,Ke){var Ot;return Ke(Me,function(yn,Hn,Jr){if(tt(yn,Hn,Jr))return Ot=Hn,!1}),Ot}function Og(Me,tt,Ke,Ot){for(var yn=Me.length,Hn=Ke+(Ot?1:-1);Ot?Hn--:++Hn<yn;)if(tt(Me[Hn],Hn,Me))return Hn;return-1}function fh(Me,tt,Ke){return tt===tt?sM(Me,tt,Ke):Og(Me,Iw,Ke)}function rM(Me,tt,Ke,Ot){for(var yn=Ke-1,Hn=Me.length;++yn<Hn;)if(Ot(Me[yn],tt))return yn;return-1}function Iw(Me){return Me!==Me}function Fg(Me,tt){var Ke=Me==null?0:Me.length;return Ke?Bg(Me,tt)/Ke:ee}function Zu(Me){return function(tt){return tt==null?n:tt[Me]}}function ob(Me){return function(tt){return Me==null?n:Me[tt]}}function lb(Me,tt,Ke,Ot,yn){return yn(Me,function(Hn,Jr,Er){Ke=Ot?(Ot=!1,Hn):tt(Ke,Hn,Jr,Er)}),Ke}function $w(Me,tt){var Ke=Me.length;for(Me.sort(tt);Ke--;)Me[Ke]=Me[Ke].value;return Me}function Bg(Me,tt){for(var Ke,Ot=-1,yn=Me.length;++Ot<yn;){var Hn=tt(Me[Ot]);Hn!==n&&(Ke=Ke===n?Hn:Ke+Hn)}return Ke}function zg(Me,tt){for(var Ke=-1,Ot=Array(Me);++Ke<Me;)Ot[Ke]=tt(Ke);return Ot}function jw(Me,tt){return Zr(tt,function(Ke){return[Ke,Me[Ke]]})}function Ju(Me){return Me&&Me.slice(0,mh(Me)+1).replace($t,"")}function Cs(Me){return function(tt){return Me(tt)}}function cb(Me,tt){return Zr(tt,function(Ke){return Me[Ke]})}function ip(Me,tt){return Me.has(tt)}function ub(Me,tt){for(var Ke=-1,Ot=Me.length;++Ke<Ot&&fh(tt,Me[Ke],0)>-1;);return Ke}function db(Me,tt){for(var Ke=Me.length;Ke--&&fh(tt,Me[Ke],0)>-1;);return Ke}function ap(Me,tt){for(var Ke=Me.length,Ot=0;Ke--;)Me[Ke]===tt&&++Ot;return Ot}var sp=ob(kg),iM=ob(Rg);function Ug(Me){return"\\"+Za[Me]}function Lw(Me,tt){return Me==null?n:Me[tt]}function Qu(Me){return rb.test(Me)}function hb(Me){return ep.test(Me)}function fb(Me){for(var tt,Ke=[];!(tt=Me.next()).done;)Ke.push(tt.value);return Ke}function Vg(Me){var tt=-1,Ke=Array(Me.size);return Me.forEach(function(Ot,yn){Ke[++tt]=[yn,Ot]}),Ke}function pb(Me,tt){return function(Ke){return Me(tt(Ke))}}function rc(Me,tt){for(var Ke=-1,Ot=Me.length,yn=0,Hn=[];++Ke<Ot;){var Jr=Me[Ke];(Jr===tt||Jr===h)&&(Me[Ke]=h,Hn[yn++]=Ke)}return Hn}function Hg(Me){var tt=-1,Ke=Array(Me.size);return Me.forEach(function(Ot){Ke[++tt]=Ot}),Ke}function aM(Me){var tt=-1,Ke=Array(Me.size);return Me.forEach(function(Ot){Ke[++tt]=[Ot,Ot]}),Ke}function sM(Me,tt,Ke){for(var Ot=Ke-1,yn=Me.length;++Ot<yn;)if(Me[Ot]===tt)return Ot;return-1}function oM(Me,tt,Ke){for(var Ot=Ke+1;Ot--;)if(Me[Ot]===tt)return Ot;return Ot}function ph(Me){return Qu(Me)?Fw(Me):eM(Me)}function oi(Me){return Qu(Me)?Bw(Me):tM(Me)}function mh(Me){for(var tt=Me.length;tt--&&Fn.test(Me.charAt(tt)););return tt}var Ow=ob(Cw);function Fw(Me){for(var tt=Xu.lastIndex=0;Xu.test(Me);)++tt;return tt}function Bw(Me){return Me.match(Xu)||[]}function zw(Me){return Me.match(nc)||[]}var mb=(function Me(tt){tt=tt==null?Ui:gh.defaults(Ui.Object(),tt,gh.pick(Ui,Kc));var Ke=tt.Array,Ot=tt.Date,yn=tt.Error,Hn=tt.Function,Jr=tt.Math,Er=tt.Object,Gg=tt.RegExp,ed=tt.String,Ts=tt.TypeError,op=Ke.prototype,Uw=Hn.prototype,vh=Er.prototype,Wg=tt["__core-js_shared__"],qg=Uw.toString,xr=vh.hasOwnProperty,Vw=0,Kg=(function(){var b=/[^.]+$/.exec(Wg&&Wg.keys&&Wg.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""})(),Ja=vh.toString,Xg=qg.call(Er),Zs=Ui._,yh=Gg("^"+qg.call(xr).replace(vn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bh=np?tt.Buffer:n,$o=tt.Symbol,td=tt.Uint8Array,Yg=bh?bh.allocUnsafe:n,bl=pb(Er.getPrototypeOf,Er),gb=Er.create,lp=vh.propertyIsEnumerable,ic=op.splice,Hw=$o?$o.isConcatSpreadable:n,ha=$o?$o.iterator:n,ac=$o?$o.toStringTag:n,Js=(function(){try{var b=cu(Er,"defineProperty");return b({},"",{}),b}catch{}})(),Gw=tt.clearTimeout!==Ui.clearTimeout&&tt.clearTimeout,Zg=Ot&&Ot.now!==Ui.Date.now&&Ot.now,nd=tt.setTimeout!==Ui.setTimeout&&tt.setTimeout,xh=Jr.ceil,cp=Jr.floor,up=Er.getOwnPropertySymbols,Ww=bh?bh.isBuffer:n,Ms=tt.isFinite,_h=op.join,wh=pb(Er.keys,Er),fi=Jr.max,$i=Jr.min,Qs=Ot.now,eo=tt.parseInt,sc=Jr.random,xl=op.reverse,to=cu(tt,"DataView"),As=cu(tt,"Map"),Jg=cu(tt,"Promise"),Zc=cu(tt,"Set"),rd=cu(tt,"WeakMap"),Sh=cu(Er,"create"),ji=rd&&new rd,_r={},Jn=Ta(to),Jc=Ta(As),no=Ta(Jg),vb=Ta(Zc),Qc=Ta(rd),dp=$o?$o.prototype:n,Eh=dp?dp.valueOf:n,id=dp?dp.toString:n;function ce(b){if(gi(b)&&!bn(b)&&!(b instanceof Cn)){if(b instanceof Qa)return b;if(xr.call(b,"__wrapped__"))return P0(b)}return new Qa(b)}var eu=(function(){function b(){}return function(M){if(!ei(M))return{};if(gb)return gb(M);b.prototype=M;var j=new b;return b.prototype=n,j}})();function tu(){}function Qa(b,M){this.__wrapped__=b,this.__actions__=[],this.__chain__=!!M,this.__index__=0,this.__values__=n}ce.templateSettings={escape:At,evaluate:We,interpolate:ft,variable:"",imports:{_:ce}},ce.prototype=tu.prototype,ce.prototype.constructor=ce,Qa.prototype=eu(tu.prototype),Qa.prototype.constructor=Qa;function Cn(b){this.__wrapped__=b,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Y,this.__views__=[]}function oc(){var b=new Cn(this.__wrapped__);return b.__actions__=za(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=za(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=za(this.__views__),b}function nu(){if(this.__filtered__){var b=new Cn(this);b.__dir__=-1,b.__filtered__=!0}else b=this.clone(),b.__dir__*=-1;return b}function lc(){var b=this.__wrapped__.value(),M=this.__dir__,j=bn(b),W=M<0,ie=j?b.length:0,he=gM(0,ie,this.__views__),_e=he.start,Ee=he.end,Ie=Ee-_e,lt=W?Ee:_e-1,ct=this.__iteratees__,pt=ct.length,Nt=0,Kt=$i(Ie,this.__takeCount__);if(!j||!W&&ie==Ie&&Kt==Ie)return kb(b,this.__actions__);var un=[];e:for(;Ie--&&Nt<Kt;){lt+=M;for(var zn=-1,dn=b[lt];++zn<pt;){var Qn=ct[zn],ar=Qn.iteratee,qo=Qn.type,Bs=ar(dn);if(qo==J)dn=Bs;else if(!Bs){if(qo==U)continue e;break e}}un[Nt++]=dn}return un}Cn.prototype=eu(tu.prototype),Cn.prototype.constructor=Cn;function cc(b){var M=-1,j=b==null?0:b.length;for(this.clear();++M<j;){var W=b[M];this.set(W[0],W[1])}}function yb(){this.__data__=Sh?Sh(null):{},this.size=0}function Ch(b){var M=this.has(b)&&delete this.__data__[b];return this.size-=M?1:0,M}function Qg(b){var M=this.__data__;if(Sh){var j=M[b];return j===c?n:j}return xr.call(M,b)?M[b]:n}function ad(b){var M=this.__data__;return Sh?M[b]!==n:xr.call(M,b)}function fa(b,M){var j=this.__data__;return this.size+=this.has(b)?0:1,j[b]=Sh&&M===n?c:M,this}cc.prototype.clear=yb,cc.prototype.delete=Ch,cc.prototype.get=Qg,cc.prototype.has=ad,cc.prototype.set=fa;function ro(b){var M=-1,j=b==null?0:b.length;for(this.clear();++M<j;){var W=b[M];this.set(W[0],W[1])}}function qw(){this.__data__=[],this.size=0}function lM(b){var M=this.__data__,j=_l(M,b);if(j<0)return!1;var W=M.length-1;return j==W?M.pop():ic.call(M,j,1),--this.size,!0}function cM(b){var M=this.__data__,j=_l(M,b);return j<0?n:M[j][1]}function uM(b){return _l(this.__data__,b)>-1}function Li(b,M){var j=this.__data__,W=_l(j,b);return W<0?(++this.size,j.push([b,M])):j[W][1]=M,this}ro.prototype.clear=qw,ro.prototype.delete=lM,ro.prototype.get=cM,ro.prototype.has=uM,ro.prototype.set=Li;function jo(b){var M=-1,j=b==null?0:b.length;for(this.clear();++M<j;){var W=b[M];this.set(W[0],W[1])}}function hp(){this.size=0,this.__data__={hash:new cc,map:new(As||ro),string:new cc}}function fp(b){var M=Dp(this,b).delete(b);return this.size-=M?1:0,M}function bb(b){return Dp(this,b).get(b)}function Th(b){return Dp(this,b).has(b)}function Mh(b,M){var j=Dp(this,b),W=j.size;return j.set(b,M),this.size+=j.size==W?0:1,this}jo.prototype.clear=hp,jo.prototype.delete=fp,jo.prototype.get=bb,jo.prototype.has=Th,jo.prototype.set=Mh;function sd(b){var M=-1,j=b==null?0:b.length;for(this.__data__=new jo;++M<j;)this.add(b[M])}function Kw(b){return this.__data__.set(b,c),this}function dM(b){return this.__data__.has(b)}sd.prototype.add=sd.prototype.push=Kw,sd.prototype.has=dM;function io(b){var M=this.__data__=new ro(b);this.size=M.size}function od(){this.__data__=new ro,this.size=0}function xb(b){var M=this.__data__,j=M.delete(b);return this.size=M.size,j}function e0(b){return this.__data__.get(b)}function Xw(b){return this.__data__.has(b)}function Ah(b,M){var j=this.__data__;if(j instanceof ro){var W=j.__data__;if(!As||W.length<i-1)return W.push([b,M]),this.size=++j.size,this;j=this.__data__=new jo(W)}return j.set(b,M),this.size=j.size,this}io.prototype.clear=od,io.prototype.delete=xb,io.prototype.get=e0,io.prototype.has=Xw,io.prototype.set=Ah;function t0(b,M){var j=bn(b),W=!j&&md(b),ie=!j&&!W&&gu(b),he=!j&&!W&&!ie&&vu(b),_e=j||W||ie||he,Ee=_e?zg(b.length,ed):[],Ie=Ee.length;for(var lt in b)(M||xr.call(b,lt))&&!(_e&&(lt=="length"||ie&&(lt=="offset"||lt=="parent")||he&&(lt=="buffer"||lt=="byteLength"||lt=="byteOffset")||Vo(lt,Ie)))&&Ee.push(lt);return Ee}function pp(b){var M=b.length;return M?b[jh(0,M-1)]:n}function n0(b,M){return Fp(za(b),Oo(M,0,b.length))}function Yw(b){return Fp(za(b))}function r0(b,M,j){(j!==n&&!Ls(b[M],j)||j===n&&!(M in b))&&Ps(b,M,j)}function Lo(b,M,j){var W=b[M];(!(xr.call(b,M)&&Ls(W,j))||j===n&&!(M in b))&&Ps(b,M,j)}function _l(b,M){for(var j=b.length;j--;)if(Ls(b[j][0],M))return j;return-1}function Zw(b,M,j,W){return wl(b,function(ie,he,_e){M(W,ie,j(ie),_e)}),W}function _b(b,M){return b&&lo(M,na(M),b)}function Ph(b,M){return b&&lo(M,cs(M),b)}function Ps(b,M,j){M=="__proto__"&&Js?Js(b,M,{configurable:!0,enumerable:!0,value:j,writable:!0}):b[M]=j}function Nh(b,M){for(var j=-1,W=M.length,ie=Ke(W),he=b==null;++j<W;)ie[j]=he?n:yu(b,M[j]);return ie}function Oo(b,M,j){return b===b&&(j!==n&&(b=b<=j?b:j),M!==n&&(b=b>=M?b:M)),b}function Ba(b,M,j,W,ie,he){var _e,Ee=M&f,Ie=M&m,lt=M&g;if(j&&(_e=ie?j(b,W,ie,he):j(b)),_e!==n)return _e;if(!ei(b))return b;var ct=bn(b);if(ct){if(_e=pS(b),!Ee)return za(b,_e)}else{var pt=ma(b),Nt=pt==fe||pt==ge;if(gu(b))return $b(b,Ee);if(pt==Ve||pt==ne||Nt&&!ie){if(_e=Ie||Nt?{}:Xb(b),!Ee)return Ie?cS(b,Ph(_e,b)):lS(b,_b(_e,b))}else{if(!jr[pt])return ie?b:{};_e=mS(b,pt,Ee)}}he||(he=new io);var Kt=he.get(b);if(Kt)return Kt;he.set(b,_e),tm(b)?b.forEach(function(dn){_e.add(Ba(dn,M,j,dn,b,he))}):ZS(b)&&b.forEach(function(dn,Qn){_e.set(Qn,Ba(dn,M,j,Qn,b,he))});var un=lt?Ie?Kb:_0:Ie?cs:na,zn=ct?n:un(b);return Es(zn||b,function(dn,Qn){zn&&(Qn=dn,dn=b[Qn]),Lo(_e,Qn,Ba(dn,M,j,Qn,b,he))}),_e}function Jw(b){var M=na(b);return function(j){return ru(j,b,M)}}function ru(b,M,j){var W=j.length;if(b==null)return!W;for(b=Er(b);W--;){var ie=j[W],he=M[ie],_e=b[ie];if(_e===n&&!(ie in b)||!he(_e))return!1}return!0}function wb(b,M,j){if(typeof b!="function")throw new Ts(s);return Op(function(){b.apply(n,j)},M)}function ao(b,M,j,W){var ie=-1,he=Lg,_e=!0,Ee=b.length,Ie=[],lt=M.length;if(!Ee)return Ie;j&&(M=Zr(M,Cs(j))),W?(he=rp,_e=!1):M.length>=i&&(he=ip,_e=!1,M=new sd(M));e:for(;++ie<Ee;){var ct=b[ie],pt=j==null?ct:j(ct);if(ct=W||ct!==0?ct:0,_e&&pt===pt){for(var Nt=lt;Nt--;)if(M[Nt]===pt)continue e;Ie.push(ct)}else he(M,pt,W)||Ie.push(ct)}return Ie}var wl=Fb(Bo),i0=Fb(s0,!0);function iu(b,M){var j=!0;return wl(b,function(W,ie,he){return j=!!M(W,ie,he),j}),j}function Fo(b,M,j){for(var W=-1,ie=b.length;++W<ie;){var he=b[W],_e=M(he);if(_e!=null&&(Ee===n?_e===_e&&!ls(_e):j(_e,Ee)))var Ee=_e,Ie=he}return Ie}function mp(b,M,j,W){var ie=b.length;for(j=cn(j),j<0&&(j=-j>ie?0:ie+j),W=W===n||W>ie?ie:cn(W),W<0&&(W+=ie),W=j>W?0:Ix(W);j<W;)b[j++]=M;return b}function a0(b,M){var j=[];return wl(b,function(W,ie,he){M(W,ie,he)&&j.push(W)}),j}function Vi(b,M,j,W,ie){var he=-1,_e=b.length;for(j||(j=Zb),ie||(ie=[]);++he<_e;){var Ee=b[he];M>0&&j(Ee)?M>1?Vi(Ee,M-1,j,W,ie):Yc(ie,Ee):W||(ie[ie.length]=Ee)}return ie}var ld=Bb(),Dh=Bb(!0);function Bo(b,M){return b&&ld(b,M,na)}function s0(b,M){return b&&Dh(b,M,na)}function uc(b,M){return Xc(M,function(j){return Os(b[j])})}function Sl(b,M){M=Rs(M,b);for(var j=0,W=M.length;b!=null&&j<W;)b=b[ns(M[j++])];return j&&j==W?b:n}function Sb(b,M,j){var W=M(b);return bn(b)?W:Yc(W,j(b))}function pa(b){return b==null?b===n?re:Le:ac&&ac in Er(b)?kp(b):Qb(b)}function gp(b,M){return b>M}function Ns(b,M){return b!=null&&xr.call(b,M)}function so(b,M){return b!=null&&M in Er(b)}function au(b,M,j){return b>=$i(M,j)&&b<fi(M,j)}function vp(b,M,j){for(var W=j?rp:Lg,ie=b[0].length,he=b.length,_e=he,Ee=Ke(he),Ie=1/0,lt=[];_e--;){var ct=b[_e];_e&&M&&(ct=Zr(ct,Cs(M))),Ie=$i(ct.length,Ie),Ee[_e]=!j&&(M||ie>=120&&ct.length>=120)?new sd(_e&&ct):n}ct=b[0];var pt=-1,Nt=Ee[0];e:for(;++pt<ie&&lt.length<Ie;){var Kt=ct[pt],un=M?M(Kt):Kt;if(Kt=j||Kt!==0?Kt:0,!(Nt?ip(Nt,un):W(lt,un,j))){for(_e=he;--_e;){var zn=Ee[_e];if(!(zn?ip(zn,un):W(b[_e],un,j)))continue e}Nt&&Nt.push(un),lt.push(Kt)}}return lt}function Qw(b,M,j,W){return Bo(b,function(ie,he,_e){M(W,j(ie),he,_e)}),W}function oo(b,M,j){M=Rs(M,b),b=jp(b,M);var W=b==null?b:b[ns(Wr(M))];return W==null?n:Ss(W,b,j)}function es(b){return gi(b)&&pa(b)==ne}function Ti(b){return gi(b)&&pa(b)==De}function o0(b){return gi(b)&&pa(b)==pe}function Ds(b,M,j,W,ie){return b===M?!0:b==null||M==null||!gi(b)&&!gi(M)?b!==b&&M!==M:Tn(b,M,j,W,Ds,ie)}function Tn(b,M,j,W,ie,he){var _e=bn(b),Ee=bn(M),Ie=_e?G:ma(b),lt=Ee?G:ma(M);Ie=Ie==ne?Ve:Ie,lt=lt==ne?Ve:lt;var ct=Ie==Ve,pt=lt==Ve,Nt=Ie==lt;if(Nt&&gu(b)){if(!gu(M))return!1;_e=!0,ct=!1}if(Nt&&!ct)return he||(he=new io),_e||vu(b)?Pp(b,M,j,W,ie,he):fS(b,M,Ie,j,W,ie,he);if(!(j&v)){var Kt=ct&&xr.call(b,"__wrapped__"),un=pt&&xr.call(M,"__wrapped__");if(Kt||un){var zn=Kt?b.value():b,dn=un?M.value():M;return he||(he=new io),ie(zn,dn,j,W,he)}}return Nt?(he||(he=new io),qb(b,M,j,W,ie,he)):!1}function Dr(b){return gi(b)&&ma(b)==be}function pi(b,M,j,W){var ie=j.length,he=ie,_e=!W;if(b==null)return!he;for(b=Er(b);ie--;){var Ee=j[ie];if(_e&&Ee[2]?Ee[1]!==b[Ee[0]]:!(Ee[0]in b))return!1}for(;++ie<he;){Ee=j[ie];var Ie=Ee[0],lt=b[Ie],ct=Ee[1];if(_e&&Ee[2]){if(lt===n&&!(Ie in b))return!1}else{var pt=new io;if(W)var Nt=W(lt,ct,Ie,b,M,pt);if(!(Nt===n?Ds(ct,lt,v|x,W,pt):Nt))return!1}}return!0}function yp(b){if(!ei(b)||gS(b))return!1;var M=Os(b)?yh:uh;return M.test(Ta(b))}function kh(b){return gi(b)&&pa(b)==ht}function cd(b){return gi(b)&&ma(b)==Fe}function l0(b){return gi(b)&&U0(b.length)&&!!Nr[pa(b)]}function Rh(b){return typeof b=="function"?b:b==null?Va:typeof b=="object"?bn(b)?Eb(b[0],b[1]):u0(b):le(b)}function su(b){if(!zh(b))return wh(b);var M=[];for(var j in Er(b))xr.call(b,j)&&j!="constructor"&&M.push(j);return M}function hM(b){if(!ei(b))return hc(b);var M=zh(b),j=[];for(var W in b)W=="constructor"&&(M||!xr.call(b,W))||j.push(W);return j}function Qr(b,M){return b<M}function c0(b,M){var j=-1,W=os(b)?Ke(b.length):[];return wl(b,function(ie,he,_e){W[++j]=M(ie,he,_e)}),W}function u0(b){var M=w0(b);return M.length==1&&M[0][2]?M0(M[0][0],M[0][1]):function(j){return j===b||pi(j,b,M)}}function Eb(b,M){return Ip(b)&&Cl(M)?M0(ns(b),M):function(j){var W=yu(j,b);return W===n&&W===M?jx(j,b):Ds(M,W,v|x)}}function bp(b,M,j,W,ie){b!==M&&ld(M,function(he,_e){if(ie||(ie=new io),ei(he))fM(b,M,_e,j,bp,W,ie);else{var Ee=W?W(Lr(b,_e),he,_e+"",b,M,ie):n;Ee===n&&(Ee=he),r0(b,_e,Ee)}},cs)}function fM(b,M,j,W,ie,he,_e){var Ee=Lr(b,j),Ie=Lr(M,j),lt=_e.get(Ie);if(lt){r0(b,j,lt);return}var ct=he?he(Ee,Ie,j+"",b,M,_e):n,pt=ct===n;if(pt){var Nt=bn(Ie),Kt=!Nt&&gu(Ie),un=!Nt&&!Kt&&vu(Ie);ct=Ie,Nt||Kt||un?bn(Ee)?ct=Ee:Ai(Ee)?ct=za(Ee):Kt?(pt=!1,ct=$b(Ie,!0)):un?(pt=!1,ct=jb(Ie,!0)):ct=[]:Qp(Ie)||md(Ie)?(ct=Ee,md(Ee)?ct=V0(Ee):(!ei(Ee)||Os(Ee))&&(ct=Xb(Ie))):pt=!1}pt&&(_e.set(Ie,ct),ie(ct,Ie,W,he,_e),_e.delete(Ie)),r0(b,j,ct)}function d0(b,M){var j=b.length;if(j)return M+=M<0?j:0,Vo(M,j)?b[M]:n}function h0(b,M,j){M.length?M=Zr(M,function(he){return bn(he)?function(_e){return Sl(_e,he.length===1?he[0]:he)}:he}):M=[Va];var W=-1;M=Zr(M,Cs(rn()));var ie=c0(b,function(he,_e,Ee){var Ie=Zr(M,function(lt){return lt(he)});return{criteria:Ie,index:++W,value:he}});return $w(ie,function(he,_e){return oS(he,_e,j)})}function Cb(b,M){return Ea(b,M,function(j,W){return jx(b,W)})}function Ea(b,M,j){for(var W=-1,ie=M.length,he={};++W<ie;){var _e=M[W],Ee=Sl(b,_e);j(Ee,_e)&&Lh(he,Rs(_e,b),Ee)}return he}function Mi(b){return function(M){return Sl(M,b)}}function Ih(b,M,j,W){var ie=W?rM:fh,he=-1,_e=M.length,Ee=b;for(b===M&&(M=za(M)),j&&(Ee=Zr(b,Cs(j)));++he<_e;)for(var Ie=0,lt=M[he],ct=j?j(lt):lt;(Ie=ie(Ee,ct,Ie,W))>-1;)Ee!==b&&ic.call(Ee,Ie,1),ic.call(b,Ie,1);return b}function $h(b,M){for(var j=b?M.length:0,W=j-1;j--;){var ie=M[j];if(j==W||ie!==he){var he=ie;Vo(ie)?ic.call(b,ie,1):xp(b,ie)}}return b}function jh(b,M){return b+cp(sc()*(M-b+1))}function Tb(b,M,j,W){for(var ie=-1,he=fi(xh((M-b)/(j||1)),0),_e=Ke(he);he--;)_e[W?he:++ie]=b,b+=j;return _e}function zo(b,M){var j="";if(!b||M<1||M>V)return j;do M%2&&(j+=b),M=cp(M/2),M&&(b+=b);while(M);return j}function Mn(b,M){return A0(ex(b,M,Va),b+"")}function Mb(b){return pp(tf(b))}function Ab(b,M){var j=tf(b);return Fp(j,Oo(M,0,j.length))}function Lh(b,M,j,W){if(!ei(b))return b;M=Rs(M,b);for(var ie=-1,he=M.length,_e=he-1,Ee=b;Ee!=null&&++ie<he;){var Ie=ns(M[ie]),lt=j;if(Ie==="__proto__"||Ie==="constructor"||Ie==="prototype")return b;if(ie!=_e){var ct=Ee[Ie];lt=W?W(ct,Ie,Ee):n,lt===n&&(lt=ei(ct)?ct:Vo(M[ie+1])?[]:{})}Lo(Ee,Ie,lt),Ee=Ee[Ie]}return b}var Pb=ji?function(b,M){return ji.set(b,M),b}:Va,eS=Js?function(b,M){return Js(b,"toString",{configurable:!0,enumerable:!1,value:rf(M),writable:!0})}:Va;function tS(b){return Fp(tf(b))}function ks(b,M,j){var W=-1,ie=b.length;M<0&&(M=-M>ie?0:ie+M),j=j>ie?ie:j,j<0&&(j+=ie),ie=M>j?0:j-M>>>0,M>>>=0;for(var he=Ke(ie);++W<ie;)he[W]=b[W+M];return he}function nS(b,M){var j;return wl(b,function(W,ie,he){return j=M(W,ie,he),!j}),!!j}function Oh(b,M,j){var W=0,ie=b==null?W:b.length;if(typeof M=="number"&&M===M&&ie<=K){for(;W<ie;){var he=W+ie>>>1,_e=b[he];_e!==null&&!ls(_e)&&(j?_e<=M:_e<M)?W=he+1:ie=he}return ie}return f0(b,M,Va,j)}function f0(b,M,j,W){var ie=0,he=b==null?0:b.length;if(he===0)return 0;M=j(M);for(var _e=M!==M,Ee=M===null,Ie=ls(M),lt=M===n;ie<he;){var ct=cp((ie+he)/2),pt=j(b[ct]),Nt=pt!==n,Kt=pt===null,un=pt===pt,zn=ls(pt);if(_e)var dn=W||un;else lt?dn=un&&(W||Nt):Ee?dn=un&&Nt&&(W||!Kt):Ie?dn=un&&Nt&&!Kt&&(W||!zn):Kt||zn?dn=!1:dn=W?pt<=M:pt<M;dn?ie=ct+1:he=ct}return $i(he,Z)}function rS(b,M){for(var j=-1,W=b.length,ie=0,he=[];++j<W;){var _e=b[j],Ee=M?M(_e):_e;if(!j||!Ls(Ee,Ie)){var Ie=Ee;he[ie++]=_e===0?0:_e}}return he}function Nb(b){return typeof b=="number"?b:ls(b)?ee:+b}function ts(b){if(typeof b=="string")return b;if(bn(b))return Zr(b,ts)+"";if(ls(b))return id?id.call(b):"";var M=b+"";return M=="0"&&1/b==-z?"-0":M}function dc(b,M,j){var W=-1,ie=Lg,he=b.length,_e=!0,Ee=[],Ie=Ee;if(j)_e=!1,ie=rp;else if(he>=i){var lt=M?null:dS(b);if(lt)return Hg(lt);_e=!1,ie=ip,Ie=new sd}else Ie=M?[]:Ee;e:for(;++W<he;){var ct=b[W],pt=M?M(ct):ct;if(ct=j||ct!==0?ct:0,_e&&pt===pt){for(var Nt=Ie.length;Nt--;)if(Ie[Nt]===pt)continue e;M&&Ie.push(pt),Ee.push(ct)}else ie(Ie,pt,j)||(Ie!==Ee&&Ie.push(pt),Ee.push(ct))}return Ee}function xp(b,M){return M=Rs(M,b),b=jp(b,M),b==null||delete b[ns(Wr(M))]}function Db(b,M,j,W){return Lh(b,M,j(Sl(b,M)),W)}function _p(b,M,j,W){for(var ie=b.length,he=W?ie:-1;(W?he--:++he<ie)&&M(b[he],he,b););return j?ks(b,W?0:he,W?he+1:ie):ks(b,W?he+1:0,W?ie:he)}function kb(b,M){var j=b;return j instanceof Cn&&(j=j.value()),ab(M,function(W,ie){return ie.func.apply(ie.thisArg,Yc([W],ie.args))},j)}function p0(b,M,j){var W=b.length;if(W<2)return W?dc(b[0]):[];for(var ie=-1,he=Ke(W);++ie<W;)for(var _e=b[ie],Ee=-1;++Ee<W;)Ee!=ie&&(he[ie]=ao(he[ie]||_e,b[Ee],M,j));return dc(Vi(he,1),M,j)}function Rb(b,M,j){for(var W=-1,ie=b.length,he=M.length,_e={};++W<ie;){var Ee=W<he?M[W]:n;j(_e,b[W],Ee)}return _e}function Ib(b){return Ai(b)?b:[]}function m0(b){return typeof b=="function"?b:Va}function Rs(b,M){return bn(b)?b:Ip(b,M)?[b]:tx(wr(b))}var iS=Mn;function Uo(b,M,j){var W=b.length;return j=j===n?W:j,!M&&j>=W?b:ks(b,M,j)}var wp=Gw||function(b){return Ui.clearTimeout(b)};function $b(b,M){if(M)return b.slice();var j=b.length,W=Yg?Yg(j):new b.constructor(j);return b.copy(W),W}function Sp(b){var M=new b.constructor(b.byteLength);return new td(M).set(new td(b)),M}function pM(b,M){var j=M?Sp(b.buffer):b.buffer;return new b.constructor(j,b.byteOffset,b.byteLength)}function aS(b){var M=new b.constructor(b.source,ws.exec(b));return M.lastIndex=b.lastIndex,M}function sS(b){return Eh?Er(Eh.call(b)):{}}function jb(b,M){var j=M?Sp(b.buffer):b.buffer;return new b.constructor(j,b.byteOffset,b.length)}function Lb(b,M){if(b!==M){var j=b!==n,W=b===null,ie=b===b,he=ls(b),_e=M!==n,Ee=M===null,Ie=M===M,lt=ls(M);if(!Ee&&!lt&&!he&&b>M||he&&_e&&Ie&&!Ee&&!lt||W&&_e&&Ie||!j&&Ie||!ie)return 1;if(!W&&!he&&!lt&&b<M||lt&&j&&ie&&!W&&!he||Ee&&j&&ie||!_e&&ie||!Ie)return-1}return 0}function oS(b,M,j){for(var W=-1,ie=b.criteria,he=M.criteria,_e=ie.length,Ee=j.length;++W<_e;){var Ie=Lb(ie[W],he[W]);if(Ie){if(W>=Ee)return Ie;var lt=j[W];return Ie*(lt=="desc"?-1:1)}}return b.index-M.index}function g0(b,M,j,W){for(var ie=-1,he=b.length,_e=j.length,Ee=-1,Ie=M.length,lt=fi(he-_e,0),ct=Ke(Ie+lt),pt=!W;++Ee<Ie;)ct[Ee]=M[Ee];for(;++ie<_e;)(pt||ie<he)&&(ct[j[ie]]=b[ie]);for(;lt--;)ct[Ee++]=b[ie++];return ct}function Ob(b,M,j,W){for(var ie=-1,he=b.length,_e=-1,Ee=j.length,Ie=-1,lt=M.length,ct=fi(he-Ee,0),pt=Ke(ct+lt),Nt=!W;++ie<ct;)pt[ie]=b[ie];for(var Kt=ie;++Ie<lt;)pt[Kt+Ie]=M[Ie];for(;++_e<Ee;)(Nt||ie<he)&&(pt[Kt+j[_e]]=b[ie++]);return pt}function za(b,M){var j=-1,W=b.length;for(M||(M=Ke(W));++j<W;)M[j]=b[j];return M}function lo(b,M,j,W){var ie=!j;j||(j={});for(var he=-1,_e=M.length;++he<_e;){var Ee=M[he],Ie=W?W(j[Ee],b[Ee],Ee,j,b):n;Ie===n&&(Ie=b[Ee]),ie?Ps(j,Ee,Ie):Lo(j,Ee,Ie)}return j}function lS(b,M){return lo(b,S0(b),M)}function cS(b,M){return lo(b,Rp(b),M)}function v0(b,M){return function(j,W){var ie=bn(j)?JT:Zw,he=M?M():{};return ie(j,b,rn(W,2),he)}}function ou(b){return Mn(function(M,j){var W=-1,ie=j.length,he=ie>1?j[ie-1]:n,_e=ie>2?j[2]:n;for(he=b.length>3&&typeof he=="function"?(ie--,he):n,_e&&Ca(j[0],j[1],_e)&&(he=ie<3?n:he,ie=1),M=Er(M);++W<ie;){var Ee=j[W];Ee&&b(M,Ee,W,he)}return M})}function Fb(b,M){return function(j,W){if(j==null)return j;if(!os(j))return b(j,W);for(var ie=j.length,he=M?ie:-1,_e=Er(j);(M?he--:++he<ie)&&W(_e[he],he,_e)!==!1;);return j}}function Bb(b){return function(M,j,W){for(var ie=-1,he=Er(M),_e=W(M),Ee=_e.length;Ee--;){var Ie=_e[b?Ee:++ie];if(j(he[Ie],Ie,he)===!1)break}return M}}function zb(b,M,j){var W=M&_,ie=Ep(b);function he(){var _e=this&&this!==Ui&&this instanceof he?ie:b;return _e.apply(W?j:this,arguments)}return he}function Ub(b){return function(M){M=wr(M);var j=Qu(M)?oi(M):n,W=j?j[0]:M.charAt(0),ie=j?Uo(j,1).join(""):M.slice(1);return W[b]()+ie}}function ud(b){return function(M){return ab(EE(nf(M).replace(nb,"")),b,"")}}function Ep(b){return function(){var M=arguments;switch(M.length){case 0:return new b;case 1:return new b(M[0]);case 2:return new b(M[0],M[1]);case 3:return new b(M[0],M[1],M[2]);case 4:return new b(M[0],M[1],M[2],M[3]);case 5:return new b(M[0],M[1],M[2],M[3],M[4]);case 6:return new b(M[0],M[1],M[2],M[3],M[4],M[5]);case 7:return new b(M[0],M[1],M[2],M[3],M[4],M[5],M[6])}var j=eu(b.prototype),W=b.apply(j,M);return ei(W)?W:j}}function mM(b,M,j){var W=Ep(b);function ie(){for(var he=arguments.length,_e=Ke(he),Ee=he,Ie=mi(ie);Ee--;)_e[Ee]=arguments[Ee];var lt=he<3&&_e[0]!==Ie&&_e[he-1]!==Ie?[]:rc(_e,Ie);if(he-=lt.length,he<j)return x0(b,M,Bh,ie.placeholder,n,_e,lt,n,n,j-he);var ct=this&&this!==Ui&&this instanceof ie?W:b;return Ss(ct,this,_e)}return ie}function Vb(b){return function(M,j,W){var ie=Er(M);if(!os(M)){var he=rn(j,3);M=na(M),j=function(Ee){return he(ie[Ee],Ee,ie)}}var _e=b(M,j,W);return _e>-1?ie[he?M[_e]:_e]:n}}function Fh(b){return El(function(M){var j=M.length,W=j,ie=Qa.prototype.thru;for(b&&M.reverse();W--;){var he=M[W];if(typeof he!="function")throw new Ts(s);if(ie&&!_e&&li(he)=="wrapper")var _e=new Qa([],!0)}for(W=_e?W:j;++W<j;){he=M[W];var Ee=li(he),Ie=Ee=="wrapper"?Np(he):n;Ie&&$p(Ie[0])&&Ie[1]==(R|E|N|D)&&!Ie[4].length&&Ie[9]==1?_e=_e[li(Ie[0])].apply(_e,Ie[3]):_e=he.length==1&&$p(he)?_e[Ee]():_e.thru(he)}return function(){var lt=arguments,ct=lt[0];if(_e&&lt.length==1&&bn(ct))return _e.plant(ct).value();for(var pt=0,Nt=j?M[pt].apply(this,lt):ct;++pt<j;)Nt=M[pt].call(this,Nt);return Nt}})}function Bh(b,M,j,W,ie,he,_e,Ee,Ie,lt){var ct=M&R,pt=M&_,Nt=M&w,Kt=M&(E|A),un=M&k,zn=Nt?n:Ep(b);function dn(){for(var Qn=arguments.length,ar=Ke(Qn),qo=Qn;qo--;)ar[qo]=arguments[qo];if(Kt)var Bs=mi(dn),Ko=ap(ar,Bs);if(W&&(ar=g0(ar,W,ie,Kt)),he&&(ar=Ob(ar,he,_e,Kt)),Qn-=Ko,Kt&&Qn<lt){var Gi=rc(ar,Bs);return x0(b,M,Bh,dn.placeholder,j,ar,Gi,Ee,Ie,lt-Qn)}var _c=pt?j:this,vd=Nt?_c[b]:b;return Qn=ar.length,Ee?ar=Lp(ar,Ee):un&&Qn>1&&ar.reverse(),ct&&Ie<Qn&&(ar.length=Ie),this&&this!==Ui&&this instanceof dn&&(vd=zn||Ep(vd)),vd.apply(_c,ar)}return dn}function Cp(b,M){return function(j,W){return Qw(j,b,M(W),{})}}function Tp(b,M){return function(j,W){var ie;if(j===n&&W===n)return M;if(j!==n&&(ie=j),W!==n){if(ie===n)return W;typeof j=="string"||typeof W=="string"?(j=ts(j),W=ts(W)):(j=Nb(j),W=Nb(W)),ie=b(j,W)}return ie}}function y0(b){return El(function(M){return M=Zr(M,Cs(rn())),Mn(function(j){var W=this;return b(M,function(ie){return Ss(ie,W,j)})})})}function lu(b,M){M=M===n?" ":ts(M);var j=M.length;if(j<2)return j?zo(M,b):M;var W=zo(M,xh(b/ph(M)));return Qu(M)?Uo(oi(W),0,b).join(""):W.slice(0,b)}function uS(b,M,j,W){var ie=M&_,he=Ep(b);function _e(){for(var Ee=-1,Ie=arguments.length,lt=-1,ct=W.length,pt=Ke(ct+Ie),Nt=this&&this!==Ui&&this instanceof _e?he:b;++lt<ct;)pt[lt]=W[lt];for(;Ie--;)pt[lt++]=arguments[++Ee];return Ss(Nt,ie?j:this,pt)}return _e}function b0(b){return function(M,j,W){return W&&typeof W!="number"&&Ca(M,j,W)&&(j=W=n),M=bc(M),j===n?(j=M,M=0):j=bc(j),W=W===n?M<j?1:-1:bc(W),Tb(M,j,W,b)}}function Mp(b){return function(M,j){return typeof M=="string"&&typeof j=="string"||(M=Fs(M),j=Fs(j)),b(M,j)}}function x0(b,M,j,W,ie,he,_e,Ee,Ie,lt){var ct=M&E,pt=ct?_e:n,Nt=ct?n:_e,Kt=ct?he:n,un=ct?n:he;M|=ct?N:P,M&=~(ct?P:N),M&S||(M&=-4);var zn=[b,M,ie,Kt,pt,un,Nt,Ee,Ie,lt],dn=j.apply(n,zn);return $p(b)&&yS(dn,zn),dn.placeholder=W,Uh(dn,b,M)}function Ap(b){var M=Jr[b];return function(j,W){if(j=Fs(j),W=W==null?0:$i(cn(W),292),W&&Ms(j)){var ie=(wr(j)+"e").split("e"),he=M(ie[0]+"e"+(+ie[1]+W));return ie=(wr(he)+"e").split("e"),+(ie[0]+"e"+(+ie[1]-W))}return M(j)}}var dS=Zc&&1/Hg(new Zc([,-0]))[1]==z?function(b){return new Zc(b)}:y;function Hb(b){return function(M){var j=ma(M);return j==be?Vg(M):j==Fe?aM(M):jw(M,b(M))}}function Ua(b,M,j,W,ie,he,_e,Ee){var Ie=M&w;if(!Ie&&typeof b!="function")throw new Ts(s);var lt=W?W.length:0;if(lt||(M&=-97,W=ie=n),_e=_e===n?_e:fi(cn(_e),0),Ee=Ee===n?Ee:cn(Ee),lt-=ie?ie.length:0,M&P){var ct=W,pt=ie;W=ie=n}var Nt=Ie?n:Np(b),Kt=[b,M,j,W,ie,ct,pt,he,_e,Ee];if(Nt&&vS(Kt,Nt),b=Kt[0],M=Kt[1],j=Kt[2],W=Kt[3],ie=Kt[4],Ee=Kt[9]=Kt[9]===n?Ie?0:b.length:fi(Kt[9]-lt,0),!Ee&&M&(E|A)&&(M&=-25),!M||M==_)var un=zb(b,M,j);else M==E||M==A?un=mM(b,M,Ee):(M==N||M==(_|N))&&!ie.length?un=uS(b,M,j,W):un=Bh.apply(n,Kt);var zn=Nt?Pb:yS;return Uh(zn(un,Kt),b,M)}function Gb(b,M,j,W){return b===n||Ls(b,vh[j])&&!xr.call(W,j)?M:b}function Wb(b,M,j,W,ie,he){return ei(b)&&ei(M)&&(he.set(M,b),bp(b,M,n,Wb,he),he.delete(M)),b}function hS(b){return Qp(b)?n:b}function Pp(b,M,j,W,ie,he){var _e=j&v,Ee=b.length,Ie=M.length;if(Ee!=Ie&&!(_e&&Ie>Ee))return!1;var lt=he.get(b),ct=he.get(M);if(lt&&ct)return lt==M&&ct==b;var pt=-1,Nt=!0,Kt=j&x?new sd:n;for(he.set(b,M),he.set(M,b);++pt<Ee;){var un=b[pt],zn=M[pt];if(W)var dn=_e?W(zn,un,pt,M,b,he):W(un,zn,pt,b,M,he);if(dn!==n){if(dn)continue;Nt=!1;break}if(Kt){if(!sb(M,function(Qn,ar){if(!ip(Kt,ar)&&(un===Qn||ie(un,Qn,j,W,he)))return Kt.push(ar)})){Nt=!1;break}}else if(!(un===zn||ie(un,zn,j,W,he))){Nt=!1;break}}return he.delete(b),he.delete(M),Nt}function fS(b,M,j,W,ie,he,_e){switch(j){case je:if(b.byteLength!=M.byteLength||b.byteOffset!=M.byteOffset)return!1;b=b.buffer,M=M.buffer;case De:return!(b.byteLength!=M.byteLength||!he(new td(b),new td(M)));case ae:case pe:case oe:return Ls(+b,+M);case me:return b.name==M.name&&b.message==M.message;case ht:case et:return b==M+"";case be:var Ee=Vg;case Fe:var Ie=W&v;if(Ee||(Ee=Hg),b.size!=M.size&&!Ie)return!1;var lt=_e.get(b);if(lt)return lt==M;W|=x,_e.set(b,M);var ct=Pp(Ee(b),Ee(M),W,ie,he,_e);return _e.delete(b),ct;case de:if(Eh)return Eh.call(b)==Eh.call(M)}return!1}function qb(b,M,j,W,ie,he){var _e=j&v,Ee=_0(b),Ie=Ee.length,lt=_0(M),ct=lt.length;if(Ie!=ct&&!_e)return!1;for(var pt=Ie;pt--;){var Nt=Ee[pt];if(!(_e?Nt in M:xr.call(M,Nt)))return!1}var Kt=he.get(b),un=he.get(M);if(Kt&&un)return Kt==M&&un==b;var zn=!0;he.set(b,M),he.set(M,b);for(var dn=_e;++pt<Ie;){Nt=Ee[pt];var Qn=b[Nt],ar=M[Nt];if(W)var qo=_e?W(ar,Qn,Nt,M,b,he):W(Qn,ar,Nt,b,M,he);if(!(qo===n?Qn===ar||ie(Qn,ar,j,W,he):qo)){zn=!1;break}dn||(dn=Nt=="constructor")}if(zn&&!dn){var Bs=b.constructor,Ko=M.constructor;Bs!=Ko&&"constructor"in b&&"constructor"in M&&!(typeof Bs=="function"&&Bs instanceof Bs&&typeof Ko=="function"&&Ko instanceof Ko)&&(zn=!1)}return he.delete(b),he.delete(M),zn}function El(b){return A0(ex(b,n,Gr),b+"")}function _0(b){return Sb(b,na,S0)}function Kb(b){return Sb(b,cs,Rp)}var Np=ji?function(b){return ji.get(b)}:y;function li(b){for(var M=b.name+"",j=_r[M],W=xr.call(_r,M)?j.length:0;W--;){var ie=j[W],he=ie.func;if(he==null||he==b)return ie.name}return M}function mi(b){var M=xr.call(ce,"placeholder")?ce:b;return M.placeholder}function rn(){var b=ce.iteratee||om;return b=b===om?Rh:b,arguments.length?b(arguments[0],arguments[1]):b}function Dp(b,M){var j=b.__data__;return T0(M)?j[typeof M=="string"?"string":"hash"]:j.map}function w0(b){for(var M=na(b),j=M.length;j--;){var W=M[j],ie=b[W];M[j]=[W,ie,Cl(ie)]}return M}function cu(b,M){var j=Lw(b,M);return yp(j)?j:n}function kp(b){var M=xr.call(b,ac),j=b[ac];try{b[ac]=n;var W=!0}catch{}var ie=Ja.call(b);return W&&(M?b[ac]=j:delete b[ac]),ie}var S0=up?function(b){return b==null?[]:(b=Er(b),Xc(up(b),function(M){return lp.call(b,M)}))}:st,Rp=up?function(b){for(var M=[];b;)Yc(M,S0(b)),b=bl(b);return M}:st,ma=pa;(to&&ma(new to(new ArrayBuffer(1)))!=je||As&&ma(new As)!=be||Jg&&ma(Jg.resolve())!=Ze||Zc&&ma(new Zc)!=Fe||rd&&ma(new rd)!=Ce)&&(ma=function(b){var M=pa(b),j=M==Ve?b.constructor:n,W=j?Ta(j):"";if(W)switch(W){case Jn:return je;case Jc:return be;case no:return Ze;case vb:return Fe;case Qc:return Ce}return M});function gM(b,M,j){for(var W=-1,ie=j.length;++W<ie;){var he=j[W],_e=he.size;switch(he.type){case"drop":b+=_e;break;case"dropRight":M-=_e;break;case"take":M=$i(M,b+_e);break;case"takeRight":b=fi(b,M-_e);break}}return{start:b,end:M}}function E0(b){var M=b.match(Ur);return M?M[1].split(Oa):[]}function C0(b,M,j){M=Rs(M,b);for(var W=-1,ie=M.length,he=!1;++W<ie;){var _e=ns(M[W]);if(!(he=b!=null&&j(b,_e)))break;b=b[_e]}return he||++W!=ie?he:(ie=b==null?0:b.length,!!ie&&U0(ie)&&Vo(_e,ie)&&(bn(b)||md(b)))}function pS(b){var M=b.length,j=new b.constructor(M);return M&&typeof b[0]=="string"&&xr.call(b,"index")&&(j.index=b.index,j.input=b.input),j}function Xb(b){return typeof b.constructor=="function"&&!zh(b)?eu(bl(b)):{}}function mS(b,M,j){var W=b.constructor;switch(M){case De:return Sp(b);case ae:case pe:return new W(+b);case je:return pM(b,j);case mt:case rt:case bt:case dt:case Je:case ot:case It:case Ct:case St:return jb(b,j);case be:return new W;case oe:case et:return new W(b);case ht:return aS(b);case Fe:return new W;case de:return sS(b)}}function Yb(b,M){var j=M.length;if(!j)return b;var W=j-1;return M[W]=(j>1?"& ":"")+M[W],M=M.join(j>2?", ":" "),b.replace(Rn,`{
/* [wrapped with `+M+`] */
`)}function Zb(b){return bn(b)||md(b)||!!(Hw&&b&&b[Hw])}function Vo(b,M){var j=typeof b;return M=M??V,!!M&&(j=="number"||j!="symbol"&&qu.test(b))&&b>-1&&b%1==0&&b<M}function Ca(b,M,j){if(!ei(j))return!1;var W=typeof M;return(W=="number"?os(j)&&Vo(M,j.length):W=="string"&&M in j)?Ls(j[M],b):!1}function Ip(b,M){if(bn(b))return!1;var j=typeof b;return j=="number"||j=="symbol"||j=="boolean"||b==null||ls(b)?!0:gt.test(b)||!yt.test(b)||M!=null&&b in Er(M)}function T0(b){var M=typeof b;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?b!=="__proto__":b===null}function $p(b){var M=li(b),j=ce[M];if(typeof j!="function"||!(M in Cn.prototype))return!1;if(b===j)return!0;var W=Np(j);return!!W&&b===W[0]}function gS(b){return!!Kg&&Kg in b}var Jb=Wg?Os:He;function zh(b){var M=b&&b.constructor,j=typeof M=="function"&&M.prototype||vh;return b===j}function Cl(b){return b===b&&!ei(b)}function M0(b,M){return function(j){return j==null?!1:j[b]===M&&(M!==n||b in Er(j))}}function vM(b){var M=Xp(b,function(W){return j.size===u&&j.clear(),W}),j=M.cache;return M}function vS(b,M){var j=b[1],W=M[1],ie=j|W,he=ie<(_|w|R),_e=W==R&&j==E||W==R&&j==D&&b[7].length<=M[8]||W==(R|D)&&M[7].length<=M[8]&&j==E;if(!(he||_e))return b;W&_&&(b[2]=M[2],ie|=j&_?0:S);var Ee=M[3];if(Ee){var Ie=b[3];b[3]=Ie?g0(Ie,Ee,M[4]):Ee,b[4]=Ie?rc(b[3],h):M[4]}return Ee=M[5],Ee&&(Ie=b[5],b[5]=Ie?Ob(Ie,Ee,M[6]):Ee,b[6]=Ie?rc(b[5],h):M[6]),Ee=M[7],Ee&&(b[7]=Ee),W&R&&(b[8]=b[8]==null?M[8]:$i(b[8],M[8])),b[9]==null&&(b[9]=M[9]),b[0]=M[0],b[1]=ie,b}function hc(b){var M=[];if(b!=null)for(var j in Er(b))M.push(j);return M}function Qb(b){return Ja.call(b)}function ex(b,M,j){return M=fi(M===n?b.length-1:M,0),function(){for(var W=arguments,ie=-1,he=fi(W.length-M,0),_e=Ke(he);++ie<he;)_e[ie]=W[M+ie];ie=-1;for(var Ee=Ke(M+1);++ie<M;)Ee[ie]=W[ie];return Ee[M]=j(_e),Ss(b,this,Ee)}}function jp(b,M){return M.length<2?b:Sl(b,ks(M,0,-1))}function Lp(b,M){for(var j=b.length,W=$i(M.length,j),ie=za(b);W--;){var he=M[W];b[W]=Vo(he,j)?ie[he]:n}return b}function Lr(b,M){if(!(M==="constructor"&&typeof b[M]=="function")&&M!="__proto__")return b[M]}var yS=fc(Pb),Op=nd||function(b,M){return Ui.setTimeout(b,M)},A0=fc(eS);function Uh(b,M,j){var W=M+"";return A0(b,Yb(W,bS(E0(W),j)))}function fc(b){var M=0,j=0;return function(){var W=Qs(),ie=q-(W-j);if(j=W,ie>0){if(++M>=B)return arguments[0]}else M=0;return b.apply(n,arguments)}}function Fp(b,M){var j=-1,W=b.length,ie=W-1;for(M=M===n?W:M;++j<M;){var he=jh(j,ie),_e=b[he];b[he]=b[j],b[j]=_e}return b.length=M,b}var tx=vM(function(b){var M=[];return b.charCodeAt(0)===46&&M.push(""),b.replace(ln,function(j,W,ie,he){M.push(ie?he.replace(Vr,"$1"):W||j)}),M});function ns(b){if(typeof b=="string"||ls(b))return b;var M=b+"";return M=="0"&&1/b==-z?"-0":M}function Ta(b){if(b!=null){try{return qg.call(b)}catch{}try{return b+""}catch{}}return""}function bS(b,M){return Es(X,function(j){var W="_."+j[0];M&j[1]&&!Lg(b,W)&&b.push(W)}),b.sort()}function P0(b){if(b instanceof Cn)return b.clone();var M=new Qa(b.__wrapped__,b.__chain__);return M.__actions__=za(b.__actions__),M.__index__=b.__index__,M.__values__=b.__values__,M}function xS(b,M,j){(j?Ca(b,M,j):M===n)?M=1:M=fi(cn(M),0);var W=b==null?0:b.length;if(!W||M<1)return[];for(var ie=0,he=0,_e=Ke(xh(W/M));ie<W;)_e[he++]=ks(b,ie,ie+=M);return _e}function nx(b){for(var M=-1,j=b==null?0:b.length,W=0,ie=[];++M<j;){var he=b[M];he&&(ie[W++]=he)}return ie}function rx(){var b=arguments.length;if(!b)return[];for(var M=Ke(b-1),j=arguments[0],W=b;W--;)M[W-1]=arguments[W];return Yc(bn(j)?za(j):[j],Vi(M,1))}var N0=Mn(function(b,M){return Ai(b)?ao(b,Vi(M,1,Ai,!0)):[]}),_S=Mn(function(b,M){var j=Wr(M);return Ai(j)&&(j=n),Ai(b)?ao(b,Vi(M,1,Ai,!0),rn(j,2)):[]}),pc=Mn(function(b,M){var j=Wr(M);return Ai(j)&&(j=n),Ai(b)?ao(b,Vi(M,1,Ai,!0),n,j):[]});function Oi(b,M,j){var W=b==null?0:b.length;return W?(M=j||M===n?1:cn(M),ks(b,M<0?0:M,W)):[]}function ix(b,M,j){var W=b==null?0:b.length;return W?(M=j||M===n?1:cn(M),M=W-M,ks(b,0,M<0?0:M)):[]}function wS(b,M){return b&&b.length?_p(b,rn(M,3),!0,!0):[]}function ta(b,M){return b&&b.length?_p(b,rn(M,3),!0):[]}function yM(b,M,j,W){var ie=b==null?0:b.length;return ie?(j&&typeof j!="number"&&Ca(b,M,j)&&(j=0,W=ie),mp(b,M,j,W)):[]}function ax(b,M,j){var W=b==null?0:b.length;if(!W)return-1;var ie=j==null?0:cn(j);return ie<0&&(ie=fi(W+ie,0)),Og(b,rn(M,3),ie)}function sx(b,M,j){var W=b==null?0:b.length;if(!W)return-1;var ie=W-1;return j!==n&&(ie=cn(j),ie=j<0?fi(W+ie,0):$i(ie,W-1)),Og(b,rn(M,3),ie,!0)}function Gr(b){var M=b==null?0:b.length;return M?Vi(b,1):[]}function rs(b){var M=b==null?0:b.length;return M?Vi(b,z):[]}function mc(b,M){var j=b==null?0:b.length;return j?(M=M===n?1:cn(M),Vi(b,M)):[]}function SS(b){for(var M=-1,j=b==null?0:b.length,W={};++M<j;){var ie=b[M];W[ie[0]]=ie[1]}return W}function ox(b){return b&&b.length?b[0]:n}function ES(b,M,j){var W=b==null?0:b.length;if(!W)return-1;var ie=j==null?0:cn(j);return ie<0&&(ie=fi(W+ie,0)),fh(b,M,ie)}function bM(b){var M=b==null?0:b.length;return M?ks(b,0,-1):[]}var D0=Mn(function(b){var M=Zr(b,Ib);return M.length&&M[0]===b[0]?vp(M):[]}),is=Mn(function(b){var M=Wr(b),j=Zr(b,Ib);return M===Wr(j)?M=n:j.pop(),j.length&&j[0]===b[0]?vp(j,rn(M,2)):[]}),Ho=Mn(function(b){var M=Wr(b),j=Zr(b,Ib);return M=typeof M=="function"?M:n,M&&j.pop(),j.length&&j[0]===b[0]?vp(j,n,M):[]});function CS(b,M){return b==null?"":_h.call(b,M)}function Wr(b){var M=b==null?0:b.length;return M?b[M-1]:n}function TS(b,M,j){var W=b==null?0:b.length;if(!W)return-1;var ie=W;return j!==n&&(ie=cn(j),ie=ie<0?fi(W+ie,0):$i(ie,W-1)),M===M?oM(b,M,ie):Og(b,Iw,ie,!0)}function gc(b,M){return b&&b.length?d0(b,cn(M)):n}var dd=Mn(Tl);function Tl(b,M){return b&&b.length&&M&&M.length?Ih(b,M):b}function lx(b,M,j){return b&&b.length&&M&&M.length?Ih(b,M,rn(j,2)):b}function cx(b,M,j){return b&&b.length&&M&&M.length?Ih(b,M,n,j):b}var Go=El(function(b,M){var j=b==null?0:b.length,W=Nh(b,M);return $h(b,Zr(M,function(ie){return Vo(ie,j)?+ie:ie}).sort(Lb)),W});function MS(b,M){var j=[];if(!(b&&b.length))return j;var W=-1,ie=[],he=b.length;for(M=rn(M,3);++W<he;){var _e=b[W];M(_e,W,b)&&(j.push(_e),ie.push(W))}return $h(b,ie),j}function uu(b){return b==null?b:xl.call(b)}function Bp(b,M,j){var W=b==null?0:b.length;return W?(j&&typeof j!="number"&&Ca(b,M,j)?(M=0,j=W):(M=M==null?0:cn(M),j=j===n?W:cn(j)),ks(b,M,j)):[]}function zp(b,M){return Oh(b,M)}function Vh(b,M,j){return f0(b,M,rn(j,2))}function AS(b,M){var j=b==null?0:b.length;if(j){var W=Oh(b,M);if(W<j&&Ls(b[W],M))return W}return-1}function PS(b,M){return Oh(b,M,!0)}function Up(b,M,j){return f0(b,M,rn(j,2),!0)}function NS(b,M){var j=b==null?0:b.length;if(j){var W=Oh(b,M,!0)-1;if(Ls(b[W],M))return W}return-1}function k0(b){return b&&b.length?rS(b):[]}function DS(b,M){return b&&b.length?rS(b,rn(M,2)):[]}function xM(b){var M=b==null?0:b.length;return M?ks(b,1,M):[]}function _M(b,M,j){return b&&b.length?(M=j||M===n?1:cn(M),ks(b,0,M<0?0:M)):[]}function fr(b,M,j){var W=b==null?0:b.length;return W?(M=j||M===n?1:cn(M),M=W-M,ks(b,M<0?0:M,W)):[]}function Or(b,M){return b&&b.length?_p(b,rn(M,3),!1,!0):[]}function Gn(b,M){return b&&b.length?_p(b,rn(M,3)):[]}var Xn=Mn(function(b){return dc(Vi(b,1,Ai,!0))}),Cr=Mn(function(b){var M=Wr(b);return Ai(M)&&(M=n),dc(Vi(b,1,Ai,!0),rn(M,2))}),Is=Mn(function(b){var M=Wr(b);return M=typeof M=="function"?M:n,dc(Vi(b,1,Ai,!0),n,M)});function du(b){return b&&b.length?dc(b):[]}function Hh(b,M){return b&&b.length?dc(b,rn(M,2)):[]}function ux(b,M){return M=typeof M=="function"?M:n,b&&b.length?dc(b,n,M):[]}function Wo(b){if(!(b&&b.length))return[];var M=0;return b=Xc(b,function(j){if(Ai(j))return M=fi(j.length,M),!0}),zg(M,function(j){return Zr(b,Zu(j))})}function ci(b,M){if(!(b&&b.length))return[];var j=Wo(b);return M==null?j:Zr(j,function(W){return Ss(M,n,W)})}var hu=Mn(function(b,M){return Ai(b)?ao(b,M):[]}),hd=Mn(function(b){return p0(Xc(b,Ai))}),dx=Mn(function(b){var M=Wr(b);return Ai(M)&&(M=n),p0(Xc(b,Ai),rn(M,2))}),$s=Mn(function(b){var M=Wr(b);return M=typeof M=="function"?M:n,p0(Xc(b,Ai),n,M)}),Gh=Mn(Wo);function Vp(b,M){return Rb(b||[],M||[],Lo)}function as(b,M){return Rb(b||[],M||[],Lh)}var hx=Mn(function(b){var M=b.length,j=M>1?b[M-1]:n;return j=typeof j=="function"?(b.pop(),j):n,ci(b,j)});function Hp(b){var M=ce(b);return M.__chain__=!0,M}function kS(b,M){return M(b),b}function fd(b,M){return M(b)}var R0=El(function(b){var M=b.length,j=M?b[0]:0,W=this.__wrapped__,ie=function(he){return Nh(he,b)};return M>1||this.__actions__.length||!(W instanceof Cn)||!Vo(j)?this.thru(ie):(W=W.slice(j,+j+(M?1:0)),W.__actions__.push({func:fd,args:[ie],thisArg:n}),new Qa(W,this.__chain__).thru(function(he){return M&&!he.length&&he.push(n),he}))});function fu(){return Hp(this)}function Hi(){return new Qa(this.value(),this.__chain__)}function pu(){this.__values__===n&&(this.__values__=nE(this.value()));var b=this.__index__>=this.__values__.length,M=b?n:this.__values__[this.__index__++];return{done:b,value:M}}function Wh(){return this}function vc(b){for(var M,j=this;j instanceof tu;){var W=P0(j);W.__index__=0,W.__values__=n,M?ie.__wrapped__=W:M=W;var ie=W;j=j.__wrapped__}return ie.__wrapped__=b,M}function fx(){var b=this.__wrapped__;if(b instanceof Cn){var M=b;return this.__actions__.length&&(M=new Cn(this)),M=M.reverse(),M.__actions__.push({func:fd,args:[uu],thisArg:n}),new Qa(M,this.__chain__)}return this.thru(uu)}function px(){return kb(this.__wrapped__,this.__actions__)}var RS=v0(function(b,M,j){xr.call(b,j)?++b[j]:Ps(b,j,1)});function Gp(b,M,j){var W=bn(b)?Dw:iu;return j&&Ca(b,M,j)&&(M=n),W(b,rn(M,3))}function mx(b,M){var j=bn(b)?Xc:a0;return j(b,rn(M,3))}var js=Vb(ax),IS=Vb(sx);function ss(b,M){return Vi(Wp(b,M),1)}function $S(b,M){return Vi(Wp(b,M),z)}function jS(b,M,j){return j=j===n?1:cn(j),Vi(Wp(b,M),j)}function LS(b,M){var j=bn(b)?Es:wl;return j(b,rn(M,3))}function yc(b,M){var j=bn(b)?QT:i0;return j(b,rn(M,3))}var I0=v0(function(b,M,j){xr.call(b,j)?b[j].push(M):Ps(b,j,[M])});function gx(b,M,j,W){b=os(b)?b:tf(b),j=j&&!W?cn(j):0;var ie=b.length;return j<0&&(j=fi(ie+j,0)),nm(b)?j<=ie&&b.indexOf(M,j)>-1:!!ie&&fh(b,M,j)>-1}var qh=Mn(function(b,M,j){var W=-1,ie=typeof M=="function",he=os(b)?Ke(b.length):[];return wl(b,function(_e){he[++W]=ie?Ss(M,_e,j):oo(_e,M,j)}),he}),OS=v0(function(b,M,j){Ps(b,j,M)});function Wp(b,M){var j=bn(b)?Zr:c0;return j(b,rn(M,3))}function FS(b,M,j,W){return b==null?[]:(bn(M)||(M=M==null?[]:[M]),j=W?n:j,bn(j)||(j=j==null?[]:[j]),h0(b,M,j))}var BS=v0(function(b,M,j){b[j?0:1].push(M)},function(){return[[],[]]});function $0(b,M,j){var W=bn(b)?ab:lb,ie=arguments.length<3;return W(b,rn(M,4),j,ie,wl)}function vx(b,M,j){var W=bn(b)?kw:lb,ie=arguments.length<3;return W(b,rn(M,4),j,ie,i0)}function wM(b,M){var j=bn(b)?Xc:a0;return j(b,O0(rn(M,3)))}function SM(b){var M=bn(b)?pp:Mb;return M(b)}function EM(b,M,j){(j?Ca(b,M,j):M===n)?M=1:M=cn(M);var W=bn(b)?n0:Ab;return W(b,M)}function zS(b){var M=bn(b)?Yw:tS;return M(b)}function US(b){if(b==null)return 0;if(os(b))return nm(b)?ph(b):b.length;var M=ma(b);return M==be||M==Fe?b.size:su(b).length}function Kh(b,M,j){var W=bn(b)?sb:nS;return j&&Ca(b,M,j)&&(M=n),W(b,rn(M,3))}var j0=Mn(function(b,M){if(b==null)return[];var j=M.length;return j>1&&Ca(b,M[0],M[1])?M=[]:j>2&&Ca(M[0],M[1],M[2])&&(M=[M[0]]),h0(b,Vi(M,1),[])}),qp=Zg||function(){return Ui.Date.now()};function VS(b,M){if(typeof M!="function")throw new Ts(s);return b=cn(b),function(){if(--b<1)return M.apply(this,arguments)}}function yx(b,M,j){return M=j?n:M,M=b&&M==null?b.length:M,Ua(b,R,n,n,n,n,M)}function bx(b,M){var j;if(typeof M!="function")throw new Ts(s);return b=cn(b),function(){return--b>0&&(j=M.apply(this,arguments)),b<=1&&(M=n),j}}var L0=Mn(function(b,M,j){var W=_;if(j.length){var ie=rc(j,mi(L0));W|=N}return Ua(b,W,M,j,ie)}),xx=Mn(function(b,M,j){var W=_|w;if(j.length){var ie=rc(j,mi(xx));W|=N}return Ua(M,W,b,j,ie)});function Kp(b,M,j){M=j?n:M;var W=Ua(b,E,n,n,n,n,n,M);return W.placeholder=Kp.placeholder,W}function _x(b,M,j){M=j?n:M;var W=Ua(b,A,n,n,n,n,n,M);return W.placeholder=_x.placeholder,W}function wx(b,M,j){var W,ie,he,_e,Ee,Ie,lt=0,ct=!1,pt=!1,Nt=!0;if(typeof b!="function")throw new Ts(s);M=Fs(M)||0,ei(j)&&(ct=!!j.leading,pt="maxWait"in j,he=pt?fi(Fs(j.maxWait)||0,M):he,Nt="trailing"in j?!!j.trailing:Nt);function Kt(Gi){var _c=W,vd=ie;return W=ie=n,lt=Gi,_e=b.apply(vd,_c),_e}function un(Gi){return lt=Gi,Ee=Op(Qn,M),ct?Kt(Gi):_e}function zn(Gi){var _c=Gi-Ie,vd=Gi-lt,R$=M-_c;return pt?$i(R$,he-vd):R$}function dn(Gi){var _c=Gi-Ie,vd=Gi-lt;return Ie===n||_c>=M||_c<0||pt&&vd>=he}function Qn(){var Gi=qp();if(dn(Gi))return ar(Gi);Ee=Op(Qn,zn(Gi))}function ar(Gi){return Ee=n,Nt&&W?Kt(Gi):(W=ie=n,_e)}function qo(){Ee!==n&&wp(Ee),lt=0,W=Ie=ie=Ee=n}function Bs(){return Ee===n?_e:ar(qp())}function Ko(){var Gi=qp(),_c=dn(Gi);if(W=arguments,ie=this,Ie=Gi,_c){if(Ee===n)return un(Ie);if(pt)return wp(Ee),Ee=Op(Qn,M),Kt(Ie)}return Ee===n&&(Ee=Op(Qn,M)),_e}return Ko.cancel=qo,Ko.flush=Bs,Ko}var Tr=Mn(function(b,M){return wb(b,1,M)}),Sx=Mn(function(b,M,j){return wb(b,Fs(M)||0,j)});function CM(b){return Ua(b,k)}function Xp(b,M){if(typeof b!="function"||M!=null&&typeof M!="function")throw new Ts(s);var j=function(){var W=arguments,ie=M?M.apply(this,W):W[0],he=j.cache;if(he.has(ie))return he.get(ie);var _e=b.apply(this,W);return j.cache=he.set(ie,_e)||he,_e};return j.cache=new(Xp.Cache||jo),j}Xp.Cache=jo;function O0(b){if(typeof b!="function")throw new Ts(s);return function(){var M=arguments;switch(M.length){case 0:return!b.call(this);case 1:return!b.call(this,M[0]);case 2:return!b.call(this,M[0],M[1]);case 3:return!b.call(this,M[0],M[1],M[2])}return!b.apply(this,M)}}function TM(b){return bx(2,b)}var MM=iS(function(b,M){M=M.length==1&&bn(M[0])?Zr(M[0],Cs(rn())):Zr(Vi(M,1),Cs(rn()));var j=M.length;return Mn(function(W){for(var ie=-1,he=$i(W.length,j);++ie<he;)W[ie]=M[ie].call(this,W[ie]);return Ss(b,this,W)})}),Xh=Mn(function(b,M){var j=rc(M,mi(Xh));return Ua(b,N,n,M,j)}),pd=Mn(function(b,M){var j=rc(M,mi(pd));return Ua(b,P,n,M,j)}),Ex=El(function(b,M){return Ua(b,D,n,n,n,M)});function F0(b,M){if(typeof b!="function")throw new Ts(s);return M=M===n?M:cn(M),Mn(b,M)}function Cx(b,M){if(typeof b!="function")throw new Ts(s);return M=M==null?0:fi(cn(M),0),Mn(function(j){var W=j[M],ie=Uo(j,0,M);return W&&Yc(ie,W),Ss(b,this,ie)})}function mu(b,M,j){var W=!0,ie=!0;if(typeof b!="function")throw new Ts(s);return ei(j)&&(W="leading"in j?!!j.leading:W,ie="trailing"in j?!!j.trailing:ie),wx(b,M,{leading:W,maxWait:M,trailing:ie})}function Ml(b){return yx(b,1)}function Yp(b,M){return Xh(m0(M),b)}function AM(){if(!arguments.length)return[];var b=arguments[0];return bn(b)?b:[b]}function HS(b){return Ba(b,g)}function GS(b,M){return M=typeof M=="function"?M:n,Ba(b,g,M)}function WS(b){return Ba(b,f|g)}function qS(b,M){return M=typeof M=="function"?M:n,Ba(b,f|g,M)}function PM(b,M){return M==null||ru(b,M,na(M))}function Ls(b,M){return b===M||b!==b&&M!==M}var KS=Mp(gp),XS=Mp(function(b,M){return b>=M}),md=es((function(){return arguments})())?es:function(b){return gi(b)&&xr.call(b,"callee")&&!lp.call(b,"callee")},bn=Ke.isArray,Tx=Tw?Cs(Tw):Ti;function os(b){return b!=null&&U0(b.length)&&!Os(b)}function Ai(b){return gi(b)&&os(b)}function Zp(b){return b===!0||b===!1||gi(b)&&pa(b)==ae}var gu=Ww||He,YS=Mw?Cs(Mw):o0;function Wn(b){return gi(b)&&b.nodeType===1&&!Qp(b)}function Mx(b){if(b==null)return!0;if(os(b)&&(bn(b)||typeof b=="string"||typeof b.splice=="function"||gu(b)||vu(b)||md(b)))return!b.length;var M=ma(b);if(M==be||M==Fe)return!b.size;if(zh(b))return!su(b).length;for(var j in b)if(xr.call(b,j))return!1;return!0}function B0(b,M){return Ds(b,M)}function Ax(b,M,j){j=typeof j=="function"?j:n;var W=j?j(b,M):n;return W===n?Ds(b,M,n,j):!!W}function z0(b){if(!gi(b))return!1;var M=pa(b);return M==me||M==ye||typeof b.message=="string"&&typeof b.name=="string"&&!Qp(b)}function Px(b){return typeof b=="number"&&Ms(b)}function Os(b){if(!ei(b))return!1;var M=pa(b);return M==fe||M==ge||M==te||M==xe}function Jp(b){return typeof b=="number"&&b==cn(b)}function U0(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=V}function ei(b){var M=typeof b;return b!=null&&(M=="object"||M=="function")}function gi(b){return b!=null&&typeof b=="object"}var ZS=jg?Cs(jg):Dr;function JS(b,M){return b===M||pi(b,M,w0(M))}function QS(b,M,j){return j=typeof j=="function"?j:n,pi(b,M,w0(M),j)}function kr(b){return Dx(b)&&b!=+b}function Nx(b){if(Jb(b))throw new yn(a);return yp(b)}function ga(b){return b===null}function NM(b){return b==null}function Dx(b){return typeof b=="number"||gi(b)&&pa(b)==oe}function Qp(b){if(!gi(b)||pa(b)!=Ve)return!1;var M=bl(b);if(M===null)return!0;var j=xr.call(M,"constructor")&&M.constructor;return typeof j=="function"&&j instanceof j&&qg.call(j)==Xg}var em=Aw?Cs(Aw):kh;function kx(b){return Jp(b)&&b>=-V&&b<=V}var tm=Pw?Cs(Pw):cd;function nm(b){return typeof b=="string"||!bn(b)&&gi(b)&&pa(b)==et}function ls(b){return typeof b=="symbol"||gi(b)&&pa(b)==de}var vu=Nw?Cs(Nw):l0;function Rx(b){return b===n}function DM(b){return gi(b)&&ma(b)==Ce}function eE(b){return gi(b)&&pa(b)==ke}var kM=Mp(Qr),tE=Mp(function(b,M){return b<=M});function nE(b){if(!b)return[];if(os(b))return nm(b)?oi(b):za(b);if(ha&&b[ha])return fb(b[ha]());var M=ma(b),j=M==be?Vg:M==Fe?Hg:tf;return j(b)}function bc(b){if(!b)return b===0?b:0;if(b=Fs(b),b===z||b===-z){var M=b<0?-1:1;return M*H}return b===b?b:0}function cn(b){var M=bc(b),j=M%1;return M===M?j?M-j:M:0}function Ix(b){return b?Oo(cn(b),0,Y):0}function Fs(b){if(typeof b=="number")return b;if(ls(b))return ee;if(ei(b)){var M=typeof b.valueOf=="function"?b.valueOf():b;b=ei(M)?M+"":M}if(typeof b!="string")return b===0?b:+b;b=Ju(b);var j=Wu.test(b);return j||ec.test(b)?Ig(b.slice(2),j?2:8):qc.test(b)?ee:+b}function V0(b){return lo(b,cs(b))}function RM(b){return b?Oo(cn(b),-V,V):b===0?b:0}function wr(b){return b==null?"":ts(b)}var rE=ou(function(b,M){if(zh(M)||os(M)){lo(M,na(M),b);return}for(var j in M)xr.call(M,j)&&Lo(b,j,M[j])}),H0=ou(function(b,M){lo(M,cs(M),b)}),Yh=ou(function(b,M,j,W){lo(M,cs(M),b,W)}),IM=ou(function(b,M,j,W){lo(M,na(M),b,W)}),co=El(Nh);function $x(b,M){var j=eu(b);return M==null?j:_b(j,M)}var iE=Mn(function(b,M){b=Er(b);var j=-1,W=M.length,ie=W>2?M[2]:n;for(ie&&Ca(M[0],M[1],ie)&&(W=1);++j<W;)for(var he=M[j],_e=cs(he),Ee=-1,Ie=_e.length;++Ee<Ie;){var lt=_e[Ee],ct=b[lt];(ct===n||Ls(ct,vh[lt])&&!xr.call(b,lt))&&(b[lt]=he[lt])}return b}),aE=Mn(function(b){return b.push(n,Wb),Ss(Jh,n,b)});function sE(b,M){return Rw(b,rn(M,3),Bo)}function rm(b,M){return Rw(b,rn(M,3),s0)}function uo(b,M){return b==null?b:ld(b,rn(M,3),cs)}function oE(b,M){return b==null?b:Dh(b,rn(M,3),cs)}function G0(b,M){return b&&Bo(b,rn(M,3))}function xc(b,M){return b&&s0(b,rn(M,3))}function $M(b){return b==null?[]:uc(b,na(b))}function jM(b){return b==null?[]:uc(b,cs(b))}function yu(b,M,j){var W=b==null?n:Sl(b,M);return W===n?j:W}function lE(b,M){return b!=null&&C0(b,M,Ns)}function jx(b,M){return b!=null&&C0(b,M,so)}var LM=Cp(function(b,M,j){M!=null&&typeof M.toString!="function"&&(M=Ja.call(M)),b[M]=j},rf(Va)),OM=Cp(function(b,M,j){M!=null&&typeof M.toString!="function"&&(M=Ja.call(M)),xr.call(b,M)?b[M].push(j):b[M]=[j]},rn),FM=Mn(oo);function na(b){return os(b)?t0(b):su(b)}function cs(b){return os(b)?t0(b,!0):hM(b)}function BM(b,M){var j={};return M=rn(M,3),Bo(b,function(W,ie,he){Ps(j,M(W,ie,he),W)}),j}function cE(b,M){var j={};return M=rn(M,3),Bo(b,function(W,ie,he){Ps(j,ie,M(W,ie,he))}),j}var Zh=ou(function(b,M,j){bp(b,M,j)}),Jh=ou(function(b,M,j,W){bp(b,M,j,W)}),uE=El(function(b,M){var j={};if(b==null)return j;var W=!1;M=Zr(M,function(he){return he=Rs(he,b),W||(W=he.length>1),he}),lo(b,Kb(b),j),W&&(j=Ba(j,f|m|g,hS));for(var ie=M.length;ie--;)xp(j,M[ie]);return j});function zM(b,M){return ef(b,O0(rn(M)))}var Qh=El(function(b,M){return b==null?{}:Cb(b,M)});function ef(b,M){if(b==null)return{};var j=Zr(Kb(b),function(W){return[W]});return M=rn(M),Ea(b,j,function(W,ie){return M(W,ie[0])})}function dE(b,M,j){M=Rs(M,b);var W=-1,ie=M.length;for(ie||(ie=1,b=n);++W<ie;){var he=b==null?n:b[ns(M[W])];he===n&&(W=ie,he=j),b=Os(he)?he.call(b):he}return b}function W0(b,M,j){return b==null?b:Lh(b,M,j)}function Lx(b,M,j,W){return W=typeof W=="function"?W:n,b==null?b:Lh(b,M,j,W)}var q0=Hb(na),im=Hb(cs);function hE(b,M,j){var W=bn(b),ie=W||gu(b)||vu(b);if(M=rn(M,4),j==null){var he=b&&b.constructor;ie?j=W?new he:[]:ei(b)?j=Os(he)?eu(bl(b)):{}:j={}}return(ie?Es:Bo)(b,function(_e,Ee,Ie){return M(j,_e,Ee,Ie)}),j}function fE(b,M){return b==null?!0:xp(b,M)}function UM(b,M,j){return b==null?b:Db(b,M,m0(j))}function pE(b,M,j,W){return W=typeof W=="function"?W:n,b==null?b:Db(b,M,m0(j),W)}function tf(b){return b==null?[]:cb(b,na(b))}function Ox(b){return b==null?[]:cb(b,cs(b))}function VM(b,M,j){return j===n&&(j=M,M=n),j!==n&&(j=Fs(j),j=j===j?j:0),M!==n&&(M=Fs(M),M=M===M?M:0),Oo(Fs(b),M,j)}function K0(b,M,j){return M=bc(M),j===n?(j=M,M=0):j=bc(j),b=Fs(b),au(b,M,j)}function X0(b,M,j){if(j&&typeof j!="boolean"&&Ca(b,M,j)&&(M=j=n),j===n&&(typeof M=="boolean"?(j=M,M=n):typeof b=="boolean"&&(j=b,b=n)),b===n&&M===n?(b=0,M=1):(b=bc(b),M===n?(M=b,b=0):M=bc(M)),b>M){var W=b;b=M,M=W}if(j||b%1||M%1){var ie=sc();return $i(b+ie*(M-b+Yu("1e-"+((ie+"").length-1))),M)}return jh(b,M)}var Y0=ud(function(b,M,j){return M=M.toLowerCase(),b+(j?mE(M):M)});function mE(b){return gd(wr(b).toLowerCase())}function nf(b){return b=wr(b),b&&b.replace(gl,sp).replace(Ew,"")}function HM(b,M,j){b=wr(b),M=ts(M);var W=b.length;j=j===n?W:Oo(cn(j),0,W);var ie=j;return j-=M.length,j>=0&&b.slice(j,ie)==M}function gE(b){return b=wr(b),b&&Qe.test(b)?b.replace(vt,iM):b}function vE(b){return b=wr(b),b&&Mt.test(b)?b.replace(vn,"\\$&"):b}var yE=ud(function(b,M,j){return b+(j?"-":"")+M.toLowerCase()}),bE=ud(function(b,M,j){return b+(j?" ":"")+M.toLowerCase()}),Fx=Ub("toLowerCase");function xE(b,M,j){b=wr(b),M=cn(M);var W=M?ph(b):0;if(!M||W>=M)return b;var ie=(M-W)/2;return lu(cp(ie),j)+b+lu(xh(ie),j)}function _E(b,M,j){b=wr(b),M=cn(M);var W=M?ph(b):0;return M&&W<M?b+lu(M-W,j):b}function Z0(b,M,j){b=wr(b),M=cn(M);var W=M?ph(b):0;return M&&W<M?lu(M-W,j)+b:b}function GM(b,M,j){return j||M==null?M=0:M&&(M=+M),eo(wr(b).replace($t,""),M||0)}function WM(b,M,j){return(j?Ca(b,M,j):M===n)?M=1:M=cn(M),zo(wr(b),M)}function Bx(){var b=arguments,M=wr(b[0]);return b.length<3?M:M.replace(b[1],b[2])}var zx=ud(function(b,M,j){return b+(j?"_":"")+M.toLowerCase()});function J0(b,M,j){return j&&typeof j!="number"&&Ca(b,M,j)&&(M=j=n),j=j===n?Y:j>>>0,j?(b=wr(b),b&&(typeof M=="string"||M!=null&&!em(M))&&(M=ts(M),!M&&Qu(b))?Uo(oi(b),0,j):b.split(M,j)):[]}var Ux=ud(function(b,M,j){return b+(j?" ":"")+gd(M)});function wE(b,M,j){return b=wr(b),j=j==null?0:Oo(cn(j),0,b.length),M=ts(M),b.slice(j,j+M.length)==M}function Vx(b,M,j){var W=ce.templateSettings;j&&Ca(b,M,j)&&(M=n),b=wr(b),M=Yh({},M,W,Gb);var ie=Yh({},M.imports,W.imports,Gb),he=na(ie),_e=cb(ie,he),Ee,Ie,lt=0,ct=M.interpolate||ue,pt="__p += '",Nt=Gg((M.escape||ue).source+"|"+ct.source+"|"+(ct===ft?Bi:ue).source+"|"+(M.evaluate||ue).source+"|$","g"),Kt="//# sourceURL="+(xr.call(M,"sourceURL")?(M.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ib+"]")+`
`;b.replace(Nt,function(dn,Qn,ar,qo,Bs,Ko){return ar||(ar=qo),pt+=b.slice(lt,Ko).replace(Ae,Ug),Qn&&(Ee=!0,pt+=`' +
__e(`+Qn+`) +
'`),Bs&&(Ie=!0,pt+=`';
`+Bs+`;
__p += '`),ar&&(pt+=`' +
((__t = (`+ar+`)) == null ? '' : __t) +
'`),lt=Ko+dn.length,dn}),pt+=`';
`;var un=xr.call(M,"variable")&&M.variable;if(!un)pt=`with (obj) {
`+pt+`
}
`;else if(Pr.test(un))throw new yn(o);pt=(Ie?pt.replace(Bt,""):pt).replace(we,"$1").replace(xt,"$1;"),pt="function("+(un||"obj")+`) {
`+(un?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ee?", __e = _.escape":"")+(Ie?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+pt+`return __p
}`;var zn=Hx(function(){return Hn(he,Kt+"return "+pt).apply(n,_e)});if(zn.source=pt,z0(zn))throw zn;return zn}function bu(b){return wr(b).toLowerCase()}function xu(b){return wr(b).toUpperCase()}function _u(b,M,j){if(b=wr(b),b&&(j||M===n))return Ju(b);if(!b||!(M=ts(M)))return b;var W=oi(b),ie=oi(M),he=ub(W,ie),_e=db(W,ie)+1;return Uo(W,he,_e).join("")}function am(b,M,j){if(b=wr(b),b&&(j||M===n))return b.slice(0,mh(b)+1);if(!b||!(M=ts(M)))return b;var W=oi(b),ie=db(W,oi(M))+1;return Uo(W,0,ie).join("")}function sm(b,M,j){if(b=wr(b),b&&(j||M===n))return b.replace($t,"");if(!b||!(M=ts(M)))return b;var W=oi(b),ie=ub(W,oi(M));return Uo(W,ie).join("")}function wu(b,M){var j=L,W=$;if(ei(M)){var ie="separator"in M?M.separator:ie;j="length"in M?cn(M.length):j,W="omission"in M?ts(M.omission):W}b=wr(b);var he=b.length;if(Qu(b)){var _e=oi(b);he=_e.length}if(j>=he)return b;var Ee=j-ph(W);if(Ee<1)return W;var Ie=_e?Uo(_e,0,Ee).join(""):b.slice(0,Ee);if(ie===n)return Ie+W;if(_e&&(Ee+=Ie.length-Ee),em(ie)){if(b.slice(Ee).search(ie)){var lt,ct=Ie;for(ie.global||(ie=Gg(ie.source,wr(ws.exec(ie))+"g")),ie.lastIndex=0;lt=ie.exec(ct);)var pt=lt.index;Ie=Ie.slice(0,pt===n?Ee:pt)}}else if(b.indexOf(ts(ie),Ee)!=Ee){var Nt=Ie.lastIndexOf(ie);Nt>-1&&(Ie=Ie.slice(0,Nt))}return Ie+W}function qM(b){return b=wr(b),b&&it.test(b)?b.replace(_t,Ow):b}var SE=ud(function(b,M,j){return b+(j?" ":"")+M.toUpperCase()}),gd=Ub("toUpperCase");function EE(b,M,j){return b=wr(b),M=j?n:M,M===n?hb(b)?zw(b):nM(b):b.match(M)||[]}var Hx=Mn(function(b,M){try{return Ss(b,n,M)}catch(j){return z0(j)?j:new yn(j)}}),Q0=El(function(b,M){return Es(M,function(j){j=ns(j),Ps(b,j,L0(b[j],b))}),b});function CE(b){var M=b==null?0:b.length,j=rn();return b=M?Zr(b,function(W){if(typeof W[1]!="function")throw new Ts(s);return[j(W[0]),W[1]]}):[],Mn(function(W){for(var ie=-1;++ie<M;){var he=b[ie];if(Ss(he[0],this,W))return Ss(he[1],this,W)}})}function KM(b){return Jw(Ba(b,f))}function rf(b){return function(){return b}}function ev(b,M){return b==null||b!==b?M:b}var TE=Fh(),af=Fh(!0);function Va(b){return b}function om(b){return Rh(typeof b=="function"?b:Ba(b,f))}function tv(b){return u0(Ba(b,f))}function ME(b,M){return Eb(b,Ba(M,f))}var XM=Mn(function(b,M){return function(j){return oo(j,b,M)}}),nv=Mn(function(b,M){return function(j){return oo(b,j,M)}});function d(b,M,j){var W=na(M),ie=uc(M,W);j==null&&!(ei(M)&&(ie.length||!W.length))&&(j=M,M=b,b=this,ie=uc(M,na(M)));var he=!(ei(j)&&"chain"in j)||!!j.chain,_e=Os(b);return Es(ie,function(Ee){var Ie=M[Ee];b[Ee]=Ie,_e&&(b.prototype[Ee]=function(){var lt=this.__chain__;if(he||lt){var ct=b(this.__wrapped__),pt=ct.__actions__=za(this.__actions__);return pt.push({func:Ie,args:arguments,thisArg:b}),ct.__chain__=lt,ct}return Ie.apply(b,Yc([this.value()],arguments))})}),b}function p(){return Ui._===this&&(Ui._=Zs),this}function y(){}function C(b){return b=cn(b),Mn(function(M){return d0(M,b)})}var I=y0(Zr),F=y0(Dw),Q=y0(sb);function le(b){return Ip(b)?Zu(ns(b)):Mi(b)}function Se(b){return function(M){return b==null?n:Sl(b,M)}}var Ue=b0(),nt=b0(!0);function st(){return[]}function He(){return!1}function Ye(){return{}}function zt(){return""}function sn(){return!0}function Rr(b,M){if(b=cn(b),b<1||b>V)return[];var j=Y,W=$i(b,Y);M=rn(M),b-=Y;for(var ie=zg(W,M);++j<b;)M(j);return ie}function Ne(b){return bn(b)?Zr(b,ns):ls(b)?[b]:za(tx(wr(b)))}function Te(b){var M=++Vw;return wr(b)+M}var ze=Tp(function(b,M){return b+M},0),at=Ap("ceil"),tn=Tp(function(b,M){return b/M},1),lr=Ap("floor");function Wt(b){return b&&b.length?Fo(b,Va,gp):n}function Nn(b,M){return b&&b.length?Fo(b,rn(M,2),gp):n}function Yn(b){return Fg(b,Va)}function cr(b,M){return Fg(b,rn(M,2))}function Su(b){return b&&b.length?Fo(b,Va,Qr):n}function YM(b,M){return b&&b.length?Fo(b,rn(M,2),Qr):n}var nQ=Tp(function(b,M){return b*M},1),rQ=Ap("round"),iQ=Tp(function(b,M){return b-M},0);function aQ(b){return b&&b.length?Bg(b,Va):0}function sQ(b,M){return b&&b.length?Bg(b,rn(M,2)):0}return ce.after=VS,ce.ary=yx,ce.assign=rE,ce.assignIn=H0,ce.assignInWith=Yh,ce.assignWith=IM,ce.at=co,ce.before=bx,ce.bind=L0,ce.bindAll=Q0,ce.bindKey=xx,ce.castArray=AM,ce.chain=Hp,ce.chunk=xS,ce.compact=nx,ce.concat=rx,ce.cond=CE,ce.conforms=KM,ce.constant=rf,ce.countBy=RS,ce.create=$x,ce.curry=Kp,ce.curryRight=_x,ce.debounce=wx,ce.defaults=iE,ce.defaultsDeep=aE,ce.defer=Tr,ce.delay=Sx,ce.difference=N0,ce.differenceBy=_S,ce.differenceWith=pc,ce.drop=Oi,ce.dropRight=ix,ce.dropRightWhile=wS,ce.dropWhile=ta,ce.fill=yM,ce.filter=mx,ce.flatMap=ss,ce.flatMapDeep=$S,ce.flatMapDepth=jS,ce.flatten=Gr,ce.flattenDeep=rs,ce.flattenDepth=mc,ce.flip=CM,ce.flow=TE,ce.flowRight=af,ce.fromPairs=SS,ce.functions=$M,ce.functionsIn=jM,ce.groupBy=I0,ce.initial=bM,ce.intersection=D0,ce.intersectionBy=is,ce.intersectionWith=Ho,ce.invert=LM,ce.invertBy=OM,ce.invokeMap=qh,ce.iteratee=om,ce.keyBy=OS,ce.keys=na,ce.keysIn=cs,ce.map=Wp,ce.mapKeys=BM,ce.mapValues=cE,ce.matches=tv,ce.matchesProperty=ME,ce.memoize=Xp,ce.merge=Zh,ce.mergeWith=Jh,ce.method=XM,ce.methodOf=nv,ce.mixin=d,ce.negate=O0,ce.nthArg=C,ce.omit=uE,ce.omitBy=zM,ce.once=TM,ce.orderBy=FS,ce.over=I,ce.overArgs=MM,ce.overEvery=F,ce.overSome=Q,ce.partial=Xh,ce.partialRight=pd,ce.partition=BS,ce.pick=Qh,ce.pickBy=ef,ce.property=le,ce.propertyOf=Se,ce.pull=dd,ce.pullAll=Tl,ce.pullAllBy=lx,ce.pullAllWith=cx,ce.pullAt=Go,ce.range=Ue,ce.rangeRight=nt,ce.rearg=Ex,ce.reject=wM,ce.remove=MS,ce.rest=F0,ce.reverse=uu,ce.sampleSize=EM,ce.set=W0,ce.setWith=Lx,ce.shuffle=zS,ce.slice=Bp,ce.sortBy=j0,ce.sortedUniq=k0,ce.sortedUniqBy=DS,ce.split=J0,ce.spread=Cx,ce.tail=xM,ce.take=_M,ce.takeRight=fr,ce.takeRightWhile=Or,ce.takeWhile=Gn,ce.tap=kS,ce.throttle=mu,ce.thru=fd,ce.toArray=nE,ce.toPairs=q0,ce.toPairsIn=im,ce.toPath=Ne,ce.toPlainObject=V0,ce.transform=hE,ce.unary=Ml,ce.union=Xn,ce.unionBy=Cr,ce.unionWith=Is,ce.uniq=du,ce.uniqBy=Hh,ce.uniqWith=ux,ce.unset=fE,ce.unzip=Wo,ce.unzipWith=ci,ce.update=UM,ce.updateWith=pE,ce.values=tf,ce.valuesIn=Ox,ce.without=hu,ce.words=EE,ce.wrap=Yp,ce.xor=hd,ce.xorBy=dx,ce.xorWith=$s,ce.zip=Gh,ce.zipObject=Vp,ce.zipObjectDeep=as,ce.zipWith=hx,ce.entries=q0,ce.entriesIn=im,ce.extend=H0,ce.extendWith=Yh,d(ce,ce),ce.add=ze,ce.attempt=Hx,ce.camelCase=Y0,ce.capitalize=mE,ce.ceil=at,ce.clamp=VM,ce.clone=HS,ce.cloneDeep=WS,ce.cloneDeepWith=qS,ce.cloneWith=GS,ce.conformsTo=PM,ce.deburr=nf,ce.defaultTo=ev,ce.divide=tn,ce.endsWith=HM,ce.eq=Ls,ce.escape=gE,ce.escapeRegExp=vE,ce.every=Gp,ce.find=js,ce.findIndex=ax,ce.findKey=sE,ce.findLast=IS,ce.findLastIndex=sx,ce.findLastKey=rm,ce.floor=lr,ce.forEach=LS,ce.forEachRight=yc,ce.forIn=uo,ce.forInRight=oE,ce.forOwn=G0,ce.forOwnRight=xc,ce.get=yu,ce.gt=KS,ce.gte=XS,ce.has=lE,ce.hasIn=jx,ce.head=ox,ce.identity=Va,ce.includes=gx,ce.indexOf=ES,ce.inRange=K0,ce.invoke=FM,ce.isArguments=md,ce.isArray=bn,ce.isArrayBuffer=Tx,ce.isArrayLike=os,ce.isArrayLikeObject=Ai,ce.isBoolean=Zp,ce.isBuffer=gu,ce.isDate=YS,ce.isElement=Wn,ce.isEmpty=Mx,ce.isEqual=B0,ce.isEqualWith=Ax,ce.isError=z0,ce.isFinite=Px,ce.isFunction=Os,ce.isInteger=Jp,ce.isLength=U0,ce.isMap=ZS,ce.isMatch=JS,ce.isMatchWith=QS,ce.isNaN=kr,ce.isNative=Nx,ce.isNil=NM,ce.isNull=ga,ce.isNumber=Dx,ce.isObject=ei,ce.isObjectLike=gi,ce.isPlainObject=Qp,ce.isRegExp=em,ce.isSafeInteger=kx,ce.isSet=tm,ce.isString=nm,ce.isSymbol=ls,ce.isTypedArray=vu,ce.isUndefined=Rx,ce.isWeakMap=DM,ce.isWeakSet=eE,ce.join=CS,ce.kebabCase=yE,ce.last=Wr,ce.lastIndexOf=TS,ce.lowerCase=bE,ce.lowerFirst=Fx,ce.lt=kM,ce.lte=tE,ce.max=Wt,ce.maxBy=Nn,ce.mean=Yn,ce.meanBy=cr,ce.min=Su,ce.minBy=YM,ce.stubArray=st,ce.stubFalse=He,ce.stubObject=Ye,ce.stubString=zt,ce.stubTrue=sn,ce.multiply=nQ,ce.nth=gc,ce.noConflict=p,ce.noop=y,ce.now=qp,ce.pad=xE,ce.padEnd=_E,ce.padStart=Z0,ce.parseInt=GM,ce.random=X0,ce.reduce=$0,ce.reduceRight=vx,ce.repeat=WM,ce.replace=Bx,ce.result=dE,ce.round=rQ,ce.runInContext=Me,ce.sample=SM,ce.size=US,ce.snakeCase=zx,ce.some=Kh,ce.sortedIndex=zp,ce.sortedIndexBy=Vh,ce.sortedIndexOf=AS,ce.sortedLastIndex=PS,ce.sortedLastIndexBy=Up,ce.sortedLastIndexOf=NS,ce.startCase=Ux,ce.startsWith=wE,ce.subtract=iQ,ce.sum=aQ,ce.sumBy=sQ,ce.template=Vx,ce.times=Rr,ce.toFinite=bc,ce.toInteger=cn,ce.toLength=Ix,ce.toLower=bu,ce.toNumber=Fs,ce.toSafeInteger=RM,ce.toString=wr,ce.toUpper=xu,ce.trim=_u,ce.trimEnd=am,ce.trimStart=sm,ce.truncate=wu,ce.unescape=qM,ce.uniqueId=Te,ce.upperCase=SE,ce.upperFirst=gd,ce.each=LS,ce.eachRight=yc,ce.first=ox,d(ce,(function(){var b={};return Bo(ce,function(M,j){xr.call(ce.prototype,j)||(b[j]=M)}),b})(),{chain:!1}),ce.VERSION=r,Es(["bind","bindKey","curry","curryRight","partial","partialRight"],function(b){ce[b].placeholder=ce}),Es(["drop","take"],function(b,M){Cn.prototype[b]=function(j){j=j===n?1:fi(cn(j),0);var W=this.__filtered__&&!M?new Cn(this):this.clone();return W.__filtered__?W.__takeCount__=$i(j,W.__takeCount__):W.__views__.push({size:$i(j,Y),type:b+(W.__dir__<0?"Right":"")}),W},Cn.prototype[b+"Right"]=function(j){return this.reverse()[b](j).reverse()}}),Es(["filter","map","takeWhile"],function(b,M){var j=M+1,W=j==U||j==O;Cn.prototype[b]=function(ie){var he=this.clone();return he.__iteratees__.push({iteratee:rn(ie,3),type:j}),he.__filtered__=he.__filtered__||W,he}}),Es(["head","last"],function(b,M){var j="take"+(M?"Right":"");Cn.prototype[b]=function(){return this[j](1).value()[0]}}),Es(["initial","tail"],function(b,M){var j="drop"+(M?"":"Right");Cn.prototype[b]=function(){return this.__filtered__?new Cn(this):this[j](1)}}),Cn.prototype.compact=function(){return this.filter(Va)},Cn.prototype.find=function(b){return this.filter(b).head()},Cn.prototype.findLast=function(b){return this.reverse().find(b)},Cn.prototype.invokeMap=Mn(function(b,M){return typeof b=="function"?new Cn(this):this.map(function(j){return oo(j,b,M)})}),Cn.prototype.reject=function(b){return this.filter(O0(rn(b)))},Cn.prototype.slice=function(b,M){b=cn(b);var j=this;return j.__filtered__&&(b>0||M<0)?new Cn(j):(b<0?j=j.takeRight(-b):b&&(j=j.drop(b)),M!==n&&(M=cn(M),j=M<0?j.dropRight(-M):j.take(M-b)),j)},Cn.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},Cn.prototype.toArray=function(){return this.take(Y)},Bo(Cn.prototype,function(b,M){var j=/^(?:filter|find|map|reject)|While$/.test(M),W=/^(?:head|last)$/.test(M),ie=ce[W?"take"+(M=="last"?"Right":""):M],he=W||/^find/.test(M);ie&&(ce.prototype[M]=function(){var _e=this.__wrapped__,Ee=W?[1]:arguments,Ie=_e instanceof Cn,lt=Ee[0],ct=Ie||bn(_e),pt=function(Qn){var ar=ie.apply(ce,Yc([Qn],Ee));return W&&Nt?ar[0]:ar};ct&&j&&typeof lt=="function"&&lt.length!=1&&(Ie=ct=!1);var Nt=this.__chain__,Kt=!!this.__actions__.length,un=he&&!Nt,zn=Ie&&!Kt;if(!he&&ct){_e=zn?_e:new Cn(this);var dn=b.apply(_e,Ee);return dn.__actions__.push({func:fd,args:[pt],thisArg:n}),new Qa(dn,Nt)}return un&&zn?b.apply(this,Ee):(dn=this.thru(pt),un?W?dn.value()[0]:dn.value():dn)})}),Es(["pop","push","shift","sort","splice","unshift"],function(b){var M=op[b],j=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",W=/^(?:pop|shift)$/.test(b);ce.prototype[b]=function(){var ie=arguments;if(W&&!this.__chain__){var he=this.value();return M.apply(bn(he)?he:[],ie)}return this[j](function(_e){return M.apply(bn(_e)?_e:[],ie)})}}),Bo(Cn.prototype,function(b,M){var j=ce[M];if(j){var W=j.name+"";xr.call(_r,W)||(_r[W]=[]),_r[W].push({name:M,func:j})}}),_r[Bh(n,w).name]=[{name:"wrapper",func:n}],Cn.prototype.clone=oc,Cn.prototype.reverse=nu,Cn.prototype.value=lc,ce.prototype.at=R0,ce.prototype.chain=fu,ce.prototype.commit=Hi,ce.prototype.next=pu,ce.prototype.plant=vc,ce.prototype.reverse=fx,ce.prototype.toJSON=ce.prototype.valueOf=ce.prototype.value=px,ce.prototype.first=ce.prototype.head,ha&&(ce.prototype[ha]=Wh),ce}),gh=mb();Io?((Io.exports=gh)._=gh,tp._=gh):Ui._=gh}).call(Q4e)})(N1,N1.exports)),N1.exports}var DO=eAe();let UC=null;const kT=()=>{const[t,e]=T.useState("not_initialized"),n=T.useRef("not_initialized"),r=T.useRef(!1),i=T.useRef([]),a=T.useRef(0),s=$e(G=>G.elements),o=$e(G=>G.elementsMap),c=$e(G=>G.setSelectedElement),u=ur(G=>G.isSyncingToBuilder),h=$e(G=>G.currentPageId),f=$e(G=>G.pages),m=Eo(G=>G.mode),g=Ra(G=>G.currentLayoutId),v=Ra(G=>G.layouts),x=DI(),_=vT(),w=kI(),S=T.useMemo(()=>m==="layout"&&g?s.filter(te=>te.layout_id===g):s,[s,m,g]),E=t==="ready",A=T.useCallback(G=>{const te=Ki.getIframe(),ae=n.current,pe=Eo.getState().mode,ye=Ra.getState().currentLayoutId,{currentPageId:me,pages:fe}=$e.getState(),ge=fe.find(Le=>Le.id===me),be=pe==="layout"?{pageId:null,layoutId:ye}:{pageId:me,layoutId:ge?.layout_id||null};if(ae!=="ready"||!te?.contentWindow){i.current.push({type:"UPDATE_ELEMENTS",payload:{elements:G,pageInfo:be}});return}const oe={type:"UPDATE_ELEMENTS",elements:G,pageInfo:be};te.contentWindow.postMessage(oe,window.location.origin)},[]),N=T.useCallback((G,te)=>{const ae=Ki.getIframe(),pe=n.current,ye={type:"UPDATE_PAGE_INFO",pageId:G,layoutId:te};if(pe!=="ready"||!ae?.contentWindow){i.current.push({type:"UPDATE_PAGE_INFO",payload:ye});return}ae.contentWindow.postMessage(ye,window.location.origin)},[]),P=T.useCallback(()=>{const G=Ki.getIframe(),te=n.current,ye={type:"UPDATE_LAYOUTS",layouts:Ra.getState().layouts.map(me=>({id:me.id,name:me.name,slug:me.slug||null}))};if(te!=="ready"||!G?.contentWindow){i.current.push({type:"UPDATE_LAYOUTS",payload:ye});return}G.contentWindow.postMessage(ye,window.location.origin)},[]),R=T.useCallback(()=>{const G=Ki.getIframe(),te=n.current,ye={type:"UPDATE_DATA_TABLES",dataTables:x.map(me=>({id:me.id,name:me.name,schema:me.schema,mockData:me.mockData||[],runtimeData:me.runtimeData||[],useMockData:me.useMockData}))};if(te!=="ready"||!G?.contentWindow){i.current.push({type:"UPDATE_DATA_TABLES",payload:ye});return}G.contentWindow.postMessage(ye,window.location.origin)},[x]),D=T.useCallback(()=>{const G=Ki.getIframe(),te=n.current,ye={type:"UPDATE_API_ENDPOINTS",apiEndpoints:_.map(me=>({id:me.id,name:me.name,method:me.method,baseUrl:me.baseUrl,path:me.path,headers:me.headers,params:me.params,body:me.body}))};if(te!=="ready"||!G?.contentWindow){i.current.push({type:"UPDATE_API_ENDPOINTS",payload:ye});return}G.contentWindow.postMessage(ye,window.location.origin)},[_]),k=T.useCallback(()=>{const G=Ki.getIframe(),te=n.current,pe={type:"UPDATE_VARIABLES",variables:Qbe()};if(te!=="ready"||!G?.contentWindow){i.current.push({type:"UPDATE_VARIABLES",payload:pe});return}G.contentWindow.postMessage(pe,window.location.origin)},[w]),L=T.useCallback((G,te)=>{const ae=Ki.getIframe(),pe=o.get(G);if(!pe)return;const ye={type:"ELEMENT_SELECTED",elementId:G,payload:{tag:pe.tag,props:te||pe.props,source:"builder"},source:"builder"};if(n.current!=="ready"||!ae?.contentWindow){i.current.push({type:"ELEMENT_SELECTED",payload:ye});return}ae.contentWindow.postMessage(ye,window.location.origin)},[o]),$=T.useCallback(()=>{if(n.current!=="ready")return;const G=Ki.getIframe();if(!G?.contentWindow)return;const te=[...i.current];i.current=[],te.forEach(ae=>{if(ae.type==="UPDATE_ELEMENTS"){const pe=ae.payload;G.contentWindow.postMessage({type:"UPDATE_ELEMENTS",elements:pe.elements,pageInfo:pe.pageInfo},window.location.origin)}else(ae.type==="ELEMENT_SELECTED"||ae.type==="REQUEST_ELEMENT_SELECTION"||ae.type==="UPDATE_PAGE_INFO"||ae.type==="UPDATE_LAYOUTS"||ae.type==="UPDATE_DATA_TABLES"||ae.type==="UPDATE_API_ENDPOINTS"||ae.type==="UPDATE_VARIABLES")&&G.contentWindow.postMessage(ae.payload,window.location.origin)})},[]),B=T.useCallback(()=>{n.current="loading",e("loading")},[]),q=T.useCallback(G=>{if(G.origin!==window.location.origin){console.warn("Received message from untrusted origin:",G.origin);return}if(G.data.type==="PREVIEW_READY"){n.current="ready",e("ready"),$();const te=()=>{P(),R(),D(),k();const ye=$e.getState().elements;ye.length>0&&(O.current=ye,A(ye))},ae=Eo.persist?.hasHydrated?.()??!0,pe=Ra.persist?.hasHydrated?.()??!0;if(ae&&pe)te();else{const ye=()=>{const me=Eo.persist?.hasHydrated?.()??!0,fe=Ra.persist?.hasHydrated?.()??!0;me&&fe?te():requestAnimationFrame(ye)};requestAnimationFrame(ye)}return}if(G.data.type==="ELEMENTS_UPDATED_ACK"){if(a.current=G.data.timestamp||Date.now(),V.current=!1,UC){const te=UC;UC=null;const ae=Ki.getIframe();ae?.contentWindow&&ae.contentWindow.postMessage({type:"REQUEST_ELEMENT_SELECTION",elementId:te},"*")}return}if(G.data.type==="ADD_COLUMN_ELEMENTS"&&G.data.payload?.columns){const{elements:te}=$e.getState(),pe=G.data.payload.columns.filter(ye=>!te.some(me=>me.id===ye.id));if(pe.length===0)return;$e.setState(ye=>({elements:[...ye.elements,...pe]})),(async()=>{try{await Po.createMultipleElements(pe)}catch(ye){console.error(" Column Elements DB  :",ye)}})();return}if(G.data.type==="ADD_FIELD_ELEMENTS"&&G.data.payload?.fields){const{elements:te}=$e.getState(),pe=G.data.payload.fields.filter(ye=>!te.some(me=>me.id===ye.id));if(pe.length===0)return;$e.setState(ye=>({elements:[...ye.elements,...pe]})),(async()=>{try{await Po.createMultipleElements(pe)}catch(ye){console.error(" Field Elements DB  :",ye)}})();return}if(G.data.type==="UPDATE_ELEMENTS"&&G.data.elements){const{setElements:te}=$e.getState();te(G.data.elements)}if(G.data.type==="UPDATE_THEME_TOKENS"){const te=Ki.getIframe();if(!te?.contentDocument)return;let ae=document.getElementById("theme-tokens");ae||(ae=document.createElement("style"),ae.id="theme-tokens",document.head.appendChild(ae));const pe=`:root {
${Object.entries(G.data.styles).map(([me,fe])=>`  ${me}: ${fe};`).join(`
`)}
}`;ae.textContent=pe;let ye=te.contentDocument.getElementById("theme-tokens");ye||(ye=te.contentDocument.createElement("style"),ye.id="theme-tokens",te.contentDocument.head.appendChild(ye)),ye.textContent=pe}if(G.data.type==="ELEMENT_SELECTED"&&G.data.source!=="builder"){const te=$e.getState().selectedElementId,ae=G.data.elementId;if(u&&ae===te)return;const{isMultiSelect:pe}=G.data;pe?$e.getState().toggleElementInSelection(ae):c(ae,G.data.payload?.props,G.data.payload?.style,void 0)}if(G.data.type==="ELEMENT_COMPUTED_STYLE"&&G.data.elementId){const{updateSelectedElementComputedStyle:te}=ur.getState();$e.getState().selectedElementId===G.data.elementId&&G.data.payload?.computedStyle&&te(G.data.payload.computedStyle)}if(G.data.type==="ELEMENTS_DRAG_SELECTED"&&$e.getState().setSelectedElements(G.data.elementIds),G.data.type==="UPDATE_ELEMENT_PROPS"&&G.data.elementId){const{updateElementProps:te}=$e.getState();te(G.data.elementId,G.data.props||G.data.payload?.props)}if(G.data.type==="element-props-update"&&G.data.elementId){const{updateElementProps:te}=$e.getState();te(G.data.elementId,G.data.props);const ae=Ki.getIframe();if(ae?.contentWindow){const pe=$e.getState().elements;ae.contentWindow.postMessage({type:"UPDATE_ELEMENTS",elements:pe},window.location.origin)}}if(G.data.type==="element-click"&&G.data.elementId){c(G.data.elementId,G.data.payload?.props);const te=o.get(G.data.elementId);if(te){const ae=Ki.getIframe();if(ae?.contentWindow){const pe={type:"ELEMENT_SELECTED",elementId:G.data.elementId,payload:{tag:te.tag,props:te.props,source:"builder"},source:"builder"};ae.contentWindow.postMessage(pe,window.location.origin)}}}G.data.type==="element-hover"&&G.data.elementId},[c,o,u,$,A,P,R,D,k]),U=DO.debounce(async()=>{if(!r.current){r.current=!0;try{const{undo:G}=$e.getState();G()}catch(G){console.error("  Undo error:",G)}finally{r.current=!1}}},300),J=DO.debounce(async()=>{if(!r.current){r.current=!0;try{const{redo:G}=$e.getState();G()}catch(G){console.error("  Redo error:",G)}finally{r.current=!1}}},300),O=T.useRef([]),z=T.useRef("page"),V=T.useRef(!1);T.useEffect(()=>{if(n.current!=="ready")return;const G=O.current,ae=z.current!==m,pe=G.length!==S.length;let ye=!1;if(!pe&&S.length>0){for(let me=0;me<S.length;me++)if(G[me]!==S[me]||G[me].id!==S[me].id||G[me].tag!==S[me].tag){ye=!0;break}}!ae&&!pe&&!ye||!ae&&!pe&&(V.current||Date.now()-a.current<100)||(V.current=!0,O.current=S,z.current=m,A(S),setTimeout(()=>{V.current&&(V.current=!1)},1e3))},[S,A,m]);const H=T.useRef({pageId:null,layoutId:null});T.useEffect(()=>{if(n.current!=="ready")return;const te=f.find(ae=>ae.id===h)?.layout_id||null;H.current.pageId===h&&H.current.layoutId===te||(H.current={pageId:h,layoutId:te},N(h,te))},[h,f,N]);const ee=T.useRef("");T.useEffect(()=>{if(n.current!=="ready")return;const G=JSON.stringify(v.map(te=>({id:te.id,name:te.name,slug:te.slug})));ee.current!==G&&(ee.current=G,P())},[v,P]);const Y=T.useRef("");T.useEffect(()=>{const G=JSON.stringify(x.map(te=>({id:te.id,name:te.name,mockData:te.mockData,useMockData:te.useMockData})));Y.current!==G&&(Y.current=G,R(),console.log(" [Builder] DataTables changed, sending to iframe:",x.length,"tables"))},[x,R]);const Z=T.useRef("");T.useEffect(()=>{const G=JSON.stringify(_.map(te=>({id:te.id,name:te.name,method:te.method,baseUrl:te.baseUrl,path:te.path})));Z.current!==G&&(Z.current=G,D(),console.log(" [Builder] ApiEndpoints changed, sending to iframe:",_.length,"endpoints"))},[_,D]);const K=T.useRef("");T.useEffect(()=>{const G=JSON.stringify(w.map(te=>({id:te.id,name:te.name,type:te.type,defaultValue:te.defaultValue,persist:te.persist,scope:te.scope})));K.current!==G&&(K.current=G,k(),console.log(" [Builder] Variables changed, sending to iframe:",w.length,"variables"))},[w,k]);const X=T.useCallback(G=>{const te=Ki.getIframe(),ae={type:"REQUEST_ELEMENT_SELECTION",elementId:G};if(n.current!=="ready"||!te?.contentWindow){console.log(" [Builder] Queue REQUEST_ELEMENT_SELECTION, iframe not ready"),i.current.push({type:"REQUEST_ELEMENT_SELECTION",payload:ae});return}te.contentWindow.postMessage(ae,window.location.origin),console.log(" [Builder] Sent REQUEST_ELEMENT_SELECTION:",G)},[]),ne=T.useCallback(G=>{UC=G},[]);return{iframeReadyState:t,handleIframeLoad:B,handleMessage:q,handleUndo:U,handleRedo:J,sendElementsToIframe:A,sendElementSelectedMessage:L,requestElementSelection:X,requestAutoSelectAfterUpdate:ne,sendLayoutsToIframe:P,sendDataTablesToIframe:R,sendApiEndpointsToIframe:D,sendVariablesToIframe:k,isIframeReady:E}},c$="xstudio_sidebar_tabs";function kO(){try{const t=localStorage.getItem(c$);if(t){const e=JSON.parse(t);if(Array.isArray(e))return new Set(e)}}catch(t){console.error("Failed to load sidebar tabs:",t)}return new Set}function tAe(t){try{const e=Array.from(t);localStorage.setItem(c$,JSON.stringify(e))}catch(e){console.error("Failed to save sidebar tabs:",e)}}function nAe(){const[t,e]=T.useState(()=>kO());return T.useEffect(()=>{tAe(t)},[t]),T.useEffect(()=>{const i=a=>{if("key"in a&&a.key!==c$)return;const s=kO();e(s)};return window.addEventListener("storage",i),()=>window.removeEventListener("storage",i)},[]),{activeTabs:t,toggleTab:i=>{e(a=>{const s=new Set(a);return s.has(i)?s.delete(i):s.add(i),s})},closeAll:()=>{e(new Set)}}}function rAe({pages:t,pageList:e,handleAddPage:n,addPageWithParams:r,handleAddElement:i,fetchElements:a,selectedPageId:s,children:o,forcedActiveTabs:c,projectId:u}){const h=KEe(),f=$e(T.useCallback(B=>B.selectedElementId,[])),m=$e(B=>B.selectedTab),g=$e(B=>B.setSelectedElement),v=$e(B=>B.selectTabElement),{activeTabs:x}=nAe(),_=c||x,{expandedKeys:w,toggleKey:S,collapseAll:E}=QX({selectedElementId:f,elements:h}),A=S,N=(B,q,U,J,O,z,V,H,ee)=>{const Y=B.reduce((ne,G)=>(G.parent_id===O&&G.tag==="TableHeader"?ne.tableHeader=G:ne.tableHeader&&G.parent_id===ne.tableHeader.id&&(G.tag==="ColumnGroup"?ne.columnGroups.push(G):G.tag==="Column"&&ne.columns.push(G)),ne),{tableHeader:null,columnGroups:[],columns:[]}),Z=Y.tableHeader;if(!Z)return null;const K=Y.columnGroups.sort((ne,G)=>(ne.order_num||0)-(G.order_num||0)),X=Y.columns.sort((ne,G)=>(ne.order_num||0)-(G.order_num||0));return l.jsxs(l.Fragment,{children:[l.jsx("div",{"data-depth":z+1,"data-has-children":K.length>0||X.length>0,className:"element",onClick:ne=>{ne.stopPropagation(),U(Z)},children:l.jsxs("div",{className:`elementItem ${f===Z.id?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(z+1)*8}px`}}),l.jsx("div",{className:"elementItemIcon",onClick:ne=>{ne.stopPropagation(),(K.length>0||X.length>0)&&H(Z.id)},children:K.length>0||X.length>0?l.jsx(Ia,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{transform:ee.has(Z.id)?"rotate(90deg)":"rotate(0deg)"}}):l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:"thead"}),l.jsxs("div",{className:"elementItemActions",children:[l.jsx("button",{className:"iconButton","aria-label":"Settings",children:l.jsx(Iu,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size})}),l.jsx("button",{className:"iconButton","aria-label":"Delete thead",onClick:async ne=>{ne.stopPropagation(),await J(Z)},children:l.jsx(Qo,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size})})]})]})},Z.id),K.length>0&&ee.has(Z.id)&&l.jsx("div",{"data-depth":z+2,"data-has-children":!0,className:"element",children:l.jsxs("div",{className:"elementItem",children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(z+2)*8}px`}}),l.jsx("div",{className:"elementItemIcon",onClick:ne=>{if(ne.stopPropagation(),K.length>0){const G=`column-groups-${Z.id}`;H(G)}},children:K.length>0?l.jsx(Ia,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{transform:ee.has(`column-groups-${Z.id}`)?"rotate(90deg)":"rotate(0deg)"}}):l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:"tr (Column Groups)"})]})}),ee.has(`column-groups-${Z.id}`)&&K.map(ne=>l.jsx("div",{"data-depth":z+3,"data-has-children":!1,className:"element",onClick:G=>{G.stopPropagation(),U(ne)},children:l.jsxs("div",{className:`elementItem ${f===ne.id?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(z+3)*8}px`}}),l.jsx("div",{className:"elementItemIcon",children:l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsxs("div",{className:"elementItemLabel",children:["ColumnGroup:"," ",ne.props?.label||"Untitled"]}),l.jsxs("div",{className:"elementItemActions",children:[l.jsx("button",{className:"iconButton","aria-label":"Settings",children:l.jsx(Iu,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size})}),l.jsx("button",{className:"iconButton","aria-label":"Delete ColumnGroup",onClick:async G=>{G.stopPropagation(),await J(ne)},children:l.jsx(Qo,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size})})]})]})},ne.id)),X.length>0&&ee.has(Z.id)&&l.jsx("div",{"data-depth":z+2,"data-has-children":!0,className:"element",children:l.jsxs("div",{className:"elementItem",children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(z+2)*8}px`}}),l.jsx("div",{className:"elementItemIcon",onClick:ne=>{if(ne.stopPropagation(),X.length>0){const G=`individual-columns-${Z.id}`;H(G)}},children:X.length>0?l.jsx(Ia,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{transform:ee.has(`individual-columns-${Z.id}`)?"rotate(90deg)":"rotate(0deg)"}}):l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:"tr (Individual Columns)"})]})}),ee.has(`individual-columns-${Z.id}`)&&X.map(ne=>l.jsx("div",{"data-depth":z+3,"data-has-children":!1,className:"element",onClick:G=>{G.stopPropagation(),U(ne)},children:l.jsxs("div",{className:`elementItem ${f===ne.id?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(z+3)*8}px`}}),l.jsx("div",{className:"elementItemIcon",children:l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsxs("div",{className:"elementItemLabel",children:["th:"," ",ne.props?.children||"Column"]}),l.jsxs("div",{className:"elementItemActions",children:[l.jsx("button",{className:"iconButton","aria-label":"Settings",children:l.jsx(Iu,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size})}),l.jsx("button",{className:"iconButton","aria-label":"Delete Column",onClick:async G=>{G.stopPropagation(),await J(ne)},children:l.jsx(Qo,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size})})]})]})},ne.id))]})},P=(B,q,U,J,O=null,z=0)=>{let V=B.filter(H=>!(H.deleted===!0||!(H.parent_id===O||O===null&&H.parent_id===void 0)));if(O){const H=B.find(ee=>ee.id===O);if(H&&Hr(H)&&H.tag==="Tabs"){const ee=V.filter(X=>Hr(X)&&X.tag==="Tab").sort((X,ne)=>(X.order_num||0)-(ne.order_num||0)),Y=V.filter(X=>Hr(X)&&X.tag==="Panel").sort((X,ne)=>(X.order_num||0)-(ne.order_num||0)),Z=[],K=new Set;ee.forEach(X=>{Z.push(X);const G=(po(X)?X.props:{})?.tabId;if(G){const te=Y.find(ae=>(po(ae)?ae.props:{})?.tabId===G);te&&!K.has(te.id)&&(Z.push(te),K.add(te.id))}else{console.warn(" Tab tabId , order_num  fallback :",X.id);const te=Y.find(ae=>!K.has(ae.id)&&Math.abs((ae.order_num||0)-(X.order_num||0))<=1);te&&(Z.push(te),K.add(te.id))}}),Y.forEach(X=>{K.has(X.id)||(console.warn("   Panel:",X.id),Z.push(X))}),V=Z}else if(H&&Hr(H)&&H.tag==="Table"){const ee=V.filter(te=>Hr(te)&&te.tag==="TableHeader"),Y=V.filter(te=>Hr(te)&&te.tag==="TableBody"),Z=V.filter(te=>Hr(te)&&te.tag==="Column"),K=V.filter(te=>Hr(te)&&te.tag==="ColumnGroup"),X=V.filter(te=>Hr(te)&&te.tag==="Row"),ne=V.filter(te=>Hr(te)&&te.tag==="Cell");V=[...ee.sort((te,ae)=>(te.order_num||0)-(ae.order_num||0)),...Y.sort((te,ae)=>(te.order_num||0)-(ae.order_num||0)),...K.sort((te,ae)=>(te.order_num||0)-(ae.order_num||0)),...Z.sort((te,ae)=>(te.order_num||0)-(ae.order_num||0)),...X.sort((te,ae)=>(te.order_num||0)-(ae.order_num||0)),...ne.sort((te,ae)=>(te.order_num||0)-(ae.order_num||0))]}else V=V.sort((ee,Y)=>(ee.order_num||0)-(Y.order_num||0))}else V=V.sort((H,ee)=>(H.order_num||0)-(ee.order_num||0));return V.length===0?null:l.jsx(l.Fragment,{children:V.map(H=>{const ee=nCe(B,H.id),Y=w.has(H.id),Z=Hr(H)&&H.tag==="Tabs"&&ee,K=Hr(H)&&H.tag==="ToggleButtonGroup"&&po(H)&&Array.isArray(H.props.children)&&H.props.children.length>0,X=Hr(H)&&H.tag==="CheckboxGroup"&&po(H)&&Array.isArray(H.props.children)&&H.props.children.length>0,ne=Hr(H)&&H.tag==="RadioGroup"&&po(H)&&Array.isArray(H.props.children)&&H.props.children.length>0,G=Hr(H)&&H.tag==="ListBox"&&po(H)&&Array.isArray(H.props.children)&&H.props.children.length>0,te=Hr(H)&&H.tag==="GridList"&&po(H)&&Array.isArray(H.props.children)&&H.props.children.length>0,ae=Hr(H)&&H.tag==="Select"&&po(H)&&Array.isArray(H.props.children)&&H.props.children.length>0,pe=Hr(H)&&H.tag==="ComboBox"&&po(H)&&Array.isArray(H.props.children)&&H.props.children.length>0,ye=Hr(H)&&H.tag==="Tree"&&po(H)&&Array.isArray(H.props.children)&&H.props.children.length>0,me=Hr(H)&&H.tag==="Table"&&ee,fe=ee||Z||K||X||ne||G||te||ae||pe||ye||me;return l.jsxs("div",{"data-depth":z,"data-has-children":fe,onClick:ge=>{ge.stopPropagation(),U(H)},className:"element",children:[l.jsxs("div",{className:`elementItem ${"title"in H&&s===H.id||"tag"in H&&f===H.id?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:z>0?`${z*8+0}px`:"0px"}}),l.jsx("div",{className:"elementItemIcon",onClick:ge=>{ge.stopPropagation(),fe&&A(H.id)},children:fe?l.jsx(Ia,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{transform:Y?"rotate(90deg)":"rotate(0deg)"}}):l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:Hr(H)&&H.tag==="Tab"&&po(H)?`Tab: ${H.props.title||"Untitled"}`:Hr(H)&&H.tag==="Panel"&&po(H)?`Panel: ${H.props.title||"Untitled"}`:Hr(H)&&H.tag==="TableHeader"?"thead":Hr(H)&&H.tag==="TableBody"?"tbody":Hr(H)&&H.tag==="Column"&&po(H)?`th: ${H.props.children||"Column"}`:Hr(H)&&H.tag==="Row"?"tr":Hr(H)&&H.tag==="Cell"&&po(H)?`td: ${H.props.children||"Cell"}`:q(H)}),l.jsxs("div",{className:"elementItemActions",children:[l.jsx("button",{className:"iconButton","aria-label":"Settings",children:l.jsx(Iu,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size})}),!(Hr(H)&&H.tag==="body"||H.order_num===0&&H.parent_id===null)&&l.jsx("button",{className:"iconButton","aria-label":`Delete ${q(H)}`,onClick:async ge=>{ge.stopPropagation(),await J(H)},children:l.jsx(Qo,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size})})]})]}),Y&&l.jsxs(l.Fragment,{children:[me?N(B,q,U,J,H.id,z,Y,A,w):ee&&P(B,q,U,J,H.id,z+1),K&&l.jsx(l.Fragment,{children:gs(H.props?.children).map((ge,be)=>l.jsx("div",{"data-depth":z+1,"data-has-children":!1,onClick:oe=>{oe.stopPropagation(),v(H.id,H.props,be)},className:"element",children:l.jsxs("div",{className:`elementItem ${m?.parentId===H.id&&m?.tabIndex===be?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(z+1)*8+0}px`}}),l.jsx("div",{className:"elementItemIcon",children:l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:ge.title||`Button ${be+1}`}),l.jsx("div",{className:"elementItemActions"})]})},`${H.id}-toggle-${be}`))}),X&&l.jsx(l.Fragment,{children:gs(H.props?.children).map((ge,be)=>l.jsx("div",{"data-depth":z+1,"data-has-children":!1,onClick:oe=>{oe.stopPropagation(),v(H.id,H.props,be)},className:"element",children:l.jsxs("div",{className:`elementItem ${m?.parentId===H.id&&m?.tabIndex===be?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(z+1)*8+0}px`}}),l.jsx("div",{className:"elementItemIcon",children:l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:ge.label||`Checkbox ${be+1}`}),l.jsx("div",{className:"elementItemActions"})]})},`${H.id}-checkbox-${be}`))}),ne&&l.jsx(l.Fragment,{children:gs(H.props?.children).map((ge,be)=>l.jsx("div",{"data-depth":z+1,"data-has-children":!1,onClick:oe=>{oe.stopPropagation(),v(H.id,H.props,be)},className:"element",children:l.jsxs("div",{className:`elementItem ${m?.parentId===H.id&&m?.tabIndex===be?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(z+1)*8+0}px`}}),l.jsx("div",{className:"elementItemIcon",children:l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:ge.label||`Radio ${be+1}`}),l.jsx("div",{className:"elementItemActions"})]})},`${H.id}-radio-${be}`))}),G&&l.jsx(l.Fragment,{children:gs(H.props?.children).map((ge,be)=>l.jsx("div",{"data-depth":z+1,"data-has-children":!1,onClick:oe=>{oe.stopPropagation(),v(H.id,H.props,be)},className:"element",children:l.jsxs("div",{className:`elementItem ${m?.parentId===H.id&&m?.tabIndex===be?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(z+1)*8+0}px`}}),l.jsx("div",{className:"elementItemIcon",children:l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:ge.label||`Item ${be+1}`}),l.jsx("div",{className:"elementItemActions"})]})},`${H.id}-listitem-${be}`))}),te&&l.jsx(l.Fragment,{children:gs(H.props?.children).map((ge,be)=>l.jsx("div",{"data-depth":z+1,"data-has-children":!1,onClick:oe=>{oe.stopPropagation(),v(H.id,H.props,be)},className:"element",children:l.jsxs("div",{className:`elementItem ${m?.parentId===H.id&&m?.tabIndex===be?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(z+1)*8+0}px`}}),l.jsx("div",{className:"elementItemIcon",children:l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:ge.label||`Item ${be+1}`}),l.jsx("div",{className:"elementItemActions"})]})},`${H.id}-griditem-${be}`))}),ae&&l.jsx(l.Fragment,{children:gs(H.props?.children).map((ge,be)=>l.jsx("div",{"data-depth":z+1,"data-has-children":!1,onClick:oe=>{oe.stopPropagation(),v(H.id,H.props,be)},className:"element",children:l.jsxs("div",{className:`elementItem ${m?.parentId===H.id&&m?.tabIndex===be?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(z+1)*8+0}px`}}),l.jsx("div",{className:"elementItemIcon",children:l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:ge.label||`Option ${be+1}`}),l.jsx("div",{className:"elementItemActions"})]})},`${H.id}-selectitem-${be}`))}),pe&&l.jsx(l.Fragment,{children:gs(H.props?.children).map((ge,be)=>l.jsx("div",{"data-depth":z+1,"data-has-children":!1,onClick:oe=>{oe.stopPropagation(),v(H.id,H.props,be)},className:"element",children:l.jsxs("div",{className:`elementItem ${m?.parentId===H.id&&m?.tabIndex===be?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(z+1)*8+0}px`}}),l.jsx("div",{className:"elementItemIcon",children:l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:ge.label||`Option ${be+1}`}),l.jsx("div",{className:"elementItemActions"})]})},`${H.id}-comboitem-${be}`))}),ye&&l.jsx(l.Fragment,{children:gs(H.props?.children).map((ge,be)=>l.jsxs("div",{"data-depth":z+1,"data-has-children":ge.children&&ge.children.length>0,onClick:oe=>{oe.stopPropagation(),v(H.id,H.props,be)},className:"element",children:[l.jsxs("div",{className:`elementItem ${m?.parentId===H.id&&m?.tabIndex===be?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(z+1)*8+0}px`}}),l.jsx("div",{className:"elementItemIcon",children:ge.children&&ge.children.length>0?l.jsx(N3,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size}):l.jsx(Fv,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size})}),l.jsx("div",{className:"elementItemLabel",children:ge.title}),l.jsx("div",{className:"elementItemActions"})]}),ge.children&&ge.children.length>0&&l.jsx(l.Fragment,{children:ge.children.map((oe,Le)=>l.jsx("div",{"data-depth":z+2,"data-has-children":!1,onClick:Ve=>{Ve.stopPropagation(),v(H.id,H.props,be)},className:"element",children:l.jsxs("div",{className:"elementItem",children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(z+2)*8+0}px`}}),l.jsx("div",{className:"elementItemIcon",children:l.jsx(Fv,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size})}),l.jsx("div",{className:"elementItemLabel",children:oe.title}),l.jsx("div",{className:"elementItemActions"})]})},`${H.id}-treeitem-${be}-child-${Le}`))})]},`${H.id}-treeitem-${be}`))})]})]},H.id)})})},R=(B,q,U,J=0)=>B.length===0?null:l.jsx(l.Fragment,{children:B.map(O=>{const z=O.children&&O.children.length>0,V=w.has(O.id),H=O.tag==="ToggleButtonGroup"&&O.props?.children&&Array.isArray(O.props.children)&&O.props.children.length>0,ee=O.tag==="CheckboxGroup"&&O.props?.children&&Array.isArray(O.props.children)&&O.props.children.length>0,Y=O.tag==="RadioGroup"&&O.props?.children&&Array.isArray(O.props.children)&&O.props.children.length>0,Z=O.tag==="ListBox"&&O.props?.children&&Array.isArray(O.props.children)&&O.props.children.length>0,K=O.tag==="GridList"&&O.props?.children&&Array.isArray(O.props.children)&&O.props.children.length>0,X=O.tag==="Select"&&O.props?.children&&Array.isArray(O.props.children)&&O.props.children.length>0,ne=O.tag==="ComboBox"&&O.props?.children&&Array.isArray(O.props.children)&&O.props.children.length>0,G=O.tag==="Tree"&&O.props?.children&&Array.isArray(O.props.children)&&O.props.children.length>0,te=O.tag==="Table"&&z,ae=z||H||ee||Y||Z||K||X||ne||G||te,pe={id:O.id,tag:O.tag,parent_id:O.parent_id||null,order_num:O.order_num,props:O.props,deleted:O.deleted,dataBinding:O.dataBinding,page_id:"",created_at:"",updated_at:""};return l.jsxs("div",{"data-depth":J,"data-has-children":ae,onClick:ye=>{ye.stopPropagation(),q(pe)},className:"element",children:[l.jsxs("div",{className:`elementItem ${f===O.id?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:J>0?`${J*8+0}px`:"0px"}}),l.jsx("div",{className:"elementItemIcon",onClick:ye=>{ye.stopPropagation(),ae&&A(O.id)},children:ae?l.jsx(Ia,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{transform:V?"rotate(90deg)":"rotate(0deg)"}}):l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:O.tag==="Tab"&&O.props?`Tab: ${O.props.title||"Untitled"}`:O.tag==="Panel"&&O.props?`Panel: ${O.props.title||"Untitled"}`:O.tag==="TableHeader"?"thead":O.tag==="TableBody"?"tbody":O.tag==="Column"&&O.props?`th: ${O.props.children||"Column"}`:O.tag==="Row"?"tr":O.tag==="Cell"&&O.props?`td: ${O.props.children||"Cell"}`:O.tag}),l.jsxs("div",{className:"elementItemActions",children:[l.jsx("button",{className:"iconButton","aria-label":"Settings",children:l.jsx(Iu,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size})}),O.tag!=="body"&&l.jsx("button",{className:"iconButton","aria-label":`Delete ${O.tag}`,onClick:async ye=>{ye.stopPropagation(),await U(pe)},children:l.jsx(Qo,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size})})]})]}),V&&l.jsxs(l.Fragment,{children:[te?N(h,ye=>ye.tag||"",(ye=>{const me=h.find(fe=>fe.id===ye.id);me&&q(me)}),(ye=>{const me=h.find(fe=>fe.id===ye.id);return me?U(me):Promise.resolve()}),O.id,J,V,A,w):z&&O.children&&R(O.children,q,U,J+1),H&&l.jsx(l.Fragment,{children:gs(O.props?.children).map((ye,me)=>l.jsx("div",{"data-depth":J+1,"data-has-children":!1,onClick:fe=>{fe.stopPropagation(),v(O.id,O.props,me)},className:"element",children:l.jsxs("div",{className:`elementItem ${m?.parentId===O.id&&m?.tabIndex===me?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(J+1)*8+0}px`}}),l.jsx("div",{className:"elementItemIcon",children:l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:ye.title||`Button ${me+1}`}),l.jsx("div",{className:"elementItemActions"})]})},`${O.id}-toggle-${me}`))}),ee&&l.jsx(l.Fragment,{children:gs(O.props?.children).map((ye,me)=>l.jsx("div",{"data-depth":J+1,"data-has-children":!1,onClick:fe=>{fe.stopPropagation(),v(O.id,O.props,me)},className:"element",children:l.jsxs("div",{className:`elementItem ${m?.parentId===O.id&&m?.tabIndex===me?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(J+1)*8+0}px`}}),l.jsx("div",{className:"elementItemIcon",children:l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:ye.label||`Checkbox ${me+1}`}),l.jsx("div",{className:"elementItemActions"})]})},`${O.id}-checkbox-${me}`))}),Y&&l.jsx(l.Fragment,{children:gs(O.props?.children).map((ye,me)=>l.jsx("div",{"data-depth":J+1,"data-has-children":!1,onClick:fe=>{fe.stopPropagation(),v(O.id,O.props,me)},className:"element",children:l.jsxs("div",{className:`elementItem ${m?.parentId===O.id&&m?.tabIndex===me?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(J+1)*8+0}px`}}),l.jsx("div",{className:"elementItemIcon",children:l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:ye.label||`Radio ${me+1}`}),l.jsx("div",{className:"elementItemActions"})]})},`${O.id}-radio-${me}`))}),Z&&l.jsx(l.Fragment,{children:gs(O.props?.children).map((ye,me)=>l.jsx("div",{"data-depth":J+1,"data-has-children":!1,onClick:fe=>{fe.stopPropagation(),v(O.id,O.props,me)},className:"element",children:l.jsxs("div",{className:`elementItem ${m?.parentId===O.id&&m?.tabIndex===me?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(J+1)*8+0}px`}}),l.jsx("div",{className:"elementItemIcon",children:l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:ye.label||`Item ${me+1}`}),l.jsx("div",{className:"elementItemActions"})]})},`${O.id}-listitem-${me}`))}),K&&l.jsx(l.Fragment,{children:gs(O.props?.children).map((ye,me)=>l.jsx("div",{"data-depth":J+1,"data-has-children":!1,onClick:fe=>{fe.stopPropagation(),v(O.id,O.props,me)},className:"element",children:l.jsxs("div",{className:`elementItem ${m?.parentId===O.id&&m?.tabIndex===me?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(J+1)*8+0}px`}}),l.jsx("div",{className:"elementItemIcon",children:l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:ye.label||`Item ${me+1}`}),l.jsx("div",{className:"elementItemActions"})]})},`${O.id}-griditem-${me}`))}),X&&l.jsx(l.Fragment,{children:gs(O.props?.children).map((ye,me)=>l.jsx("div",{"data-depth":J+1,"data-has-children":!1,onClick:fe=>{fe.stopPropagation(),v(O.id,O.props,me)},className:"element",children:l.jsxs("div",{className:`elementItem ${m?.parentId===O.id&&m?.tabIndex===me?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(J+1)*8+0}px`}}),l.jsx("div",{className:"elementItemIcon",children:l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:ye.label||`Option ${me+1}`}),l.jsx("div",{className:"elementItemActions"})]})},`${O.id}-selectitem-${me}`))}),ne&&l.jsx(l.Fragment,{children:gs(O.props?.children).map((ye,me)=>l.jsx("div",{"data-depth":J+1,"data-has-children":!1,onClick:fe=>{fe.stopPropagation(),v(O.id,O.props,me)},className:"element",children:l.jsxs("div",{className:`elementItem ${m?.parentId===O.id&&m?.tabIndex===me?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(J+1)*8+0}px`}}),l.jsx("div",{className:"elementItemIcon",children:l.jsx(Mr,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size,style:{padding:"2px"}})}),l.jsx("div",{className:"elementItemLabel",children:ye.label||`Option ${me+1}`}),l.jsx("div",{className:"elementItemActions"})]})},`${O.id}-comboitem-${me}`))}),G&&l.jsx(l.Fragment,{children:gs(O.props?.children).map((ye,me)=>l.jsxs("div",{"data-depth":J+1,"data-has-children":ye.children&&ye.children.length>0,onClick:fe=>{fe.stopPropagation(),v(O.id,O.props,me)},className:"element",children:[l.jsxs("div",{className:`elementItem ${m?.parentId===O.id&&m?.tabIndex===me?"active":""}`,children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(J+1)*8+0}px`}}),l.jsx("div",{className:"elementItemIcon",children:ye.children&&ye.children.length>0?l.jsx(N3,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size}):l.jsx(Fv,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size})}),l.jsx("div",{className:"elementItemLabel",children:ye.title}),l.jsx("div",{className:"elementItemActions"})]}),ye.children&&ye.children.length>0&&l.jsx(l.Fragment,{children:ye.children.map((fe,ge)=>l.jsx("div",{"data-depth":J+2,"data-has-children":!1,onClick:be=>{be.stopPropagation(),v(O.id,O.props,me)},className:"element",children:l.jsxs("div",{className:"elementItem",children:[l.jsx("div",{className:"elementItemIndent",style:{width:`${(J+2)*8+0}px`}}),l.jsx("div",{className:"elementItemIcon",children:l.jsx(Fv,{color:Xe.color,strokeWidth:Xe.stroke,size:Xe.size})}),l.jsx("div",{className:"elementItemLabel",children:fe.title}),l.jsx("div",{className:"elementItemActions"})]})},`${O.id}-treeitem-${me}-child-${ge}`))})]},`${O.id}-treeitem-${me}`))})]})]},O.id)})}),{sendElementSelectedMessage:D,requestAutoSelectAfterUpdate:k}=kT(),L=E,$=()=>{const B=[];return _.has("nodes")&&B.push(l.jsx("div",{className:"panel-section nodes",children:l.jsx(cCe,{pages:t,pageList:e,handleAddPage:n,addPageWithParams:r,renderTree:P,renderElementTree:R,fetchElements:a,elements:h,selectedElementId:f,setSelectedElement:g,sendElementSelectedMessage:D,requestAutoSelectAfterUpdate:k,collapseAllTreeItems:L,projectId:u,expandedKeys:w,onToggleExpand:A,selectedTab:m,onSelectTabElement:v})},"nodes")),_.has("components")&&B.push(l.jsx("div",{className:"panel-section components",children:l.jsx(CK,{handleAddElement:i,selectedElementId:f})},"components")),_.has("theme")&&B.push(l.jsx("div",{className:"panel-section theme",children:l.jsx($Y,{isActive:!0})},"theme")),_.has("ai")&&B.push(l.jsx("div",{className:"panel-section ai",children:l.jsx(jY,{isActive:!0})},"ai")),_.has("settings")&&B.push(l.jsx("div",{className:"panel-section settings",children:l.jsx(VY,{isActive:!0})},"settings")),B.length>0?B:l.jsx("div",{className:"panel-empty-state"})};return l.jsxs("aside",{className:"sidebar",children:[l.jsx("div",{className:"panel-content",children:$()}),o]})}const HY=({requestAutoSelectAfterUpdate:t}={})=>{const e=Uy({initialItems:[],getKey:v=>v.id}),[n,r]=T.useState(null),i=T.useRef(null),a=$e(v=>v.setCurrentPageId),s=$e(v=>v.setPages),o=$e(v=>v.lazyLoadPageElements),c=$e(v=>v.isPageLoaded),u=T.useCallback(async v=>{if(!v)return{success:!1,error:new Error("pageId is required")};try{const x=await Yt(),_=await x.elements.getByPage(v),{pages:w}=$e.getState(),S=w.find(R=>R.id===v),E=[..._];if(S?.layout_id){const R=await x.elements.getByLayout(S.layout_id);console.log(` [fetchElements] Layout ${S.layout_id.slice(0,8)}  ${R.length}  `);const D=new Set(E.map(k=>k.id));R.forEach(k=>{D.has(k.id)||E.push(k)})}const{setElements:A,setSelectedElement:N}=$e.getState(),P=_.find(R=>R.order_num===0);return P&&t&&t(P.id),A(E,{skipHistory:!0}),a(v),r(v),P&&N(P.id),{success:!0,data:E}}catch(x){return console.error("  :",x),{success:!1,error:x}}},[t]),h=async v=>{try{const x=$e.getState().pages,w=x.reduce((R,D)=>Math.max(R,D.order_num||0),-1)+1,S=await Yt(),E={id:ri.generateId(),project_id:v,name:`Page ${w+1}`,slug:`/page-${w+1}`,parent_id:null,order_num:w,layout_id:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},A=await S.pages.insert(E),N={id:A.id,project_id:A.project_id,title:A.name,slug:A.slug,parent_id:A.parent_id,order_num:A.order_num,created_at:A.created_at,updated_at:A.updated_at};e.append(N),r(A.id),a(A.id),s([...x,A]);const P={id:ri.generateId(),tag:"body",props:{},parent_id:null,page_id:A.id,order_num:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return await S.elements.insert(P),console.log(" [IndexedDB] body  :",P.id),await u(A.id),console.log("   :",A.title),{success:!0,data:A}}catch(x){return console.error("  :",x),{success:!1,error:x}}},f=async v=>{const{projectId:x,title:_,slug:w,layoutId:S=null,parentId:E=null}=v;try{const A=$e.getState().pages,P=A.reduce((B,q)=>Math.max(B,q.order_num||0),-1)+1,R=await Yt(),D={id:ri.generateId(),project_id:x,name:_,slug:w,parent_id:E,order_num:P,layout_id:S,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},k=await R.pages.insert(D),L={id:k.id,project_id:k.project_id,title:k.name,slug:k.slug,parent_id:k.parent_id,order_num:k.order_num,created_at:k.created_at,updated_at:k.updated_at};e.append(L),r(k.id),a(k.id),s([...A,k]);const $={id:ri.generateId(),tag:"body",props:{},parent_id:null,page_id:k.id,order_num:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return await R.elements.insert($),console.log(" [IndexedDB] body  :",$.id),await u(k.id),console.log("    (with params):",k.name,"slug:",k.slug),{success:!0,data:L}}catch(A){return console.error("   (with params):",A),{success:!1,error:A}}},m=T.useCallback(async v=>{if(i.current===v)return{success:!1,error:new Error("   ")};try{i.current=v;const w=(await(await Yt()).pages.getAll()).filter(N=>N.project_id===v),S=e.items.map(N=>N.id);S.length>0&&e.remove(...S);const E=w.map(N=>({id:N.id,project_id:N.project_id,title:N.title||N.name||"Untitled",slug:N.slug,parent_id:N.parent_id,order_num:N.order_num,created_at:N.created_at||new Date().toISOString(),updated_at:N.updated_at||new Date().toISOString()}));E.forEach(N=>e.append(N));const A=E.map(N=>{const P=w.find(R=>R.id===N.id);return{id:N.id,name:N.title,slug:N.slug,parent_id:N.parent_id,order_num:N.order_num,layout_id:P?.layout_id||null}});if(s(A),E.length>0){const P=E.find(D=>D.order_num===0)||E[0];a(P.id);const R=await u(P.id);if(!R.success)return i.current=null,{success:!1,error:R.error}}return i.current=null,{success:!0,data:E}}catch(x){return console.error("  :",x),i.current=null,{success:!1,error:x}}},[u]),g=T.useCallback(async v=>{if(v){if(c(v)){console.log(` [loadPageIfNeeded] Page already loaded: ${v.slice(0,8)}`);return}console.log(` [loadPageIfNeeded] Loading page: ${v.slice(0,8)}`),await o(v)}},[c,o]);return{pages:e.items,selectedPageId:n,setSelectedPageId:r,fetchElements:u,addPage:h,addPageWithParams:f,initializeProject:m,loadPageIfNeeded:g,pageList:e}};class bi{static elementMap=new Map;static treeCache=new Map;static childrenCache=new Map;static config={maxCacheSize:1e3,enableIncrementalUpdate:!0,enableBatchProcessing:!0,batchSize:100};static updateConfig(e){this.config={...this.config,...e}}static buildElementTree(e){const n=this.generateCacheKey(e);if(this.treeCache.has(n))return this.treeCache.get(n);this.treeCache.size>=this.config.maxCacheSize&&this.clearOldestCache();const r=new Map,i=[];this.config.enableBatchProcessing?this.createNodesInBatches(e,r):this.createNodesSequentially(e,r),this.buildHierarchy(e,r,i),this.sortNodesByOrder(i);const a={roots:i,elementMap:r,flatList:e};return this.treeCache.set(n,a),a}static createNodesInBatches(e,n){const r=this.config.batchSize;for(let i=0;i<e.length;i+=r)e.slice(i,i+r).forEach(s=>{n.set(s.id,{element:s,children:[],depth:0})})}static createNodesSequentially(e,n){e.forEach(r=>{n.set(r.id,{element:r,children:[],depth:0})})}static buildHierarchy(e,n,r){const i=new Map;e.forEach(s=>{const o=s.parent_id??"root";i.has(o)||i.set(o,[]),i.get(o).push(s)}),(i.get("root")||[]).forEach(s=>{const o=n.get(s.id);r.push(o)}),i.forEach((s,o)=>{if(o==="root")return;const c=n.get(o);c&&s.forEach(u=>{const h=n.get(u.id);c.children.push(h),h.depth=c.depth+1})})}static getOrderedChildren(e,n){const r=`children:${e||"null"}:${this.generateCacheKey(n)}`;if(this.childrenCache.has(r))return this.childrenCache.get(r);const i=n.filter(a=>a.parent_id===e).sort((a,s)=>(a.order_num||0)-(s.order_num||0));return this.childrenCache.set(r,i),i}static calculateNextOrderNum(e,n){const r=n.filter(a=>a.parent_id===e);return r.length>0?Math.max(...r.map(a=>a.order_num||0))+1:1}static incrementalUpdate(e,n){if(!this.config.enableIncrementalUpdate){this.clearCache();return}const r=new Set;if(n){const i=e.find(a=>a.id===n);i&&r.add(i.parent_id??null)}this.clearRelatedCache(r)}static clearRelatedCache(e){const n=[];this.childrenCache.forEach((r,i)=>{const a=i.split(":")[1];e.has(a==="null"?null:a)&&n.push(i)}),n.forEach(r=>{this.childrenCache.delete(r)})}static clearOldestCache(){Array.from(this.treeCache.entries()).slice(0,Math.floor(this.config.maxCacheSize*.2)).forEach(([r])=>{this.treeCache.delete(r)})}static processLargeElementSet(e,n){const r=this.config.batchSize;for(let i=0;i<e.length;i+=r){const a=e.slice(i,i+r);n(a)}}static getPerformanceStats(){return{cacheSize:this.treeCache.size,childrenCacheSize:this.childrenCache.size,hitRate:0}}static calculateOrderNumsForInsertion(e,n,r){const i=this.getOrderedChildren(e,r),a={};return i.forEach((s,o)=>{o>=n&&(a[s.id]=(s.order_num||0)+1)}),a}static calculateMoveOrderNums(e,n,r,i){const a=i.find(h=>h.id===e);if(!a)return{};const s={},o=this.getOrderedChildren(a.parent_id??null,i),c=o.findIndex(h=>h.id===e);return c!==-1&&o.slice(c+1).forEach(h=>{s[h.id]=(h.order_num||0)-1}),this.getOrderedChildren(n??null,i).slice(r).forEach(h=>{s[h.id]=(h.order_num||0)+1}),s}static getSpecialComponentChildren(e,n){const r=n.find(a=>a.id===e);if(!r)return[];const i=this.getOrderedChildren(e,n);switch(r.tag){case"Tabs":{const a=n.filter(c=>c.parent_id===e&&c.tag==="Tab").sort((c,u)=>(c.order_num||0)-(u.order_num||0)),s=n.filter(c=>c.parent_id===e&&c.tag==="Panel").sort((c,u)=>(c.order_num||0)-(u.order_num||0)),o=[];for(let c=0;c<Math.max(a.length,s.length);c++)a[c]&&o.push(a[c]),s[c]&&o.push(s[c]);return o}case"Tree":return i.filter(a=>a.tag==="TreeItem");case"ToggleButtonGroup":return i.filter(a=>a.tag==="ToggleButton");case"CheckboxGroup":return i.filter(a=>a.tag==="Checkbox");case"RadioGroup":return i.filter(a=>a.tag==="Radio");case"Select":return i.filter(a=>a.tag==="SelectItem");case"ComboBox":return i.filter(a=>a.tag==="ComboBoxItem");case"ListBox":return i.filter(a=>a.tag==="ListBoxItem");case"GridList":return i.filter(a=>a.tag==="GridListItem");case"TagGroup":return i.filter(a=>a.tag==="Tag");default:return i}}static getHierarchyStats(e){const n=this.buildElementTree(e),r=[];let i=0;const a=[],s=(c,u)=>{c.depth=u,r.push(u),i=Math.max(i,u),c.children.forEach(h=>{s(h,u+1)})};n.roots.forEach(c=>{s(c,0)}),e.forEach(c=>{c.parent_id&&!n.elementMap.has(c.parent_id)&&a.push(c)});const o=r.length>0?r.reduce((c,u)=>c+u,0)/r.length:0;return{totalElements:e.length,maxDepth:i,averageDepth:Math.round(o*100)/100,orphanedElements:a}}static validateHierarchy(e){const n=[],r=[],i=new Set(e.map(h=>h.id)),a=new Map;e.forEach(h=>{h.parent_id&&(a.has(h.parent_id)||a.set(h.parent_id,[]),a.get(h.parent_id).push(h.id))});const s=new Set,o=new Set,c=h=>{if(o.has(h))return!0;if(s.has(h))return!1;s.add(h),o.add(h);const f=a.get(h)||[];for(const m of f)if(c(m))return!0;return o.delete(h),!1};e.forEach(h=>{c(h.id)&&n.push(`Circular reference detected involving element: ${h.id}`)}),e.forEach(h=>{h.parent_id&&!i.has(h.parent_id)&&n.push(`Orphaned element found: ${h.id} (parent: ${h.parent_id} not found)`)});const u=new Map;return e.forEach(h=>{const f=h.parent_id||"root";u.has(f)||u.set(f,new Set);const m=h.order_num||0;u.get(f).has(m)&&r.push(`Duplicate order_num found: ${m} for parent ${f}`),u.get(f).add(m)}),{isValid:n.length===0,errors:n,warnings:r}}static generateCacheKey(e){return e.length>100?`hash:${e.map(r=>`${r.id}:${r.parent_id}:${r.order_num}`).join("|").split("").reduce((r,i)=>(r=(r<<5)-r+i.charCodeAt(0),r&r),0)}:${e.length}`:e.map(n=>`${n.id}:${n.parent_id}:${n.order_num}`).sort().join("|")}static sortNodesByOrder(e){e.sort((n,r)=>(n.element.order_num||0)-(r.element.order_num||0)),e.forEach(n=>this.sortNodesByOrder(n.children))}static clearCache(){this.treeCache.clear(),this.elementMap.clear(),this.childrenCache.clear()}static clearSpecificCache(e){switch(e){case"tree":this.treeCache.clear(),this.elementMap.clear();break;case"children":this.childrenCache.clear();break;case"all":this.clearCache();break}}}function wy(t,e){const n=t.toLowerCase(),r=e.filter(o=>o.tag===t),i=[],a=new RegExp(`^${n}_(\\d+)$`);r.forEach(o=>{if(o.customId){const c=o.customId.match(a);c&&i.push(Number.parseInt(c[1],10))}});let s=1;if(i.length>0){i.sort((o,c)=>o-c);for(let o=0;o<i.length;o++)if(i[o]!==o+1){s=o+1;break}s===1&&i.length>0&&(s=Math.max(...i)+1)}return`${n}_${s}`}function iAe(t){const n=$e.getState().elements,r={...t.parent,id:ri.generateId(),customId:wy(t.parent.tag,n),created_at:new Date().toISOString(),updated_at:new Date().toISOString()},i=[...n,r],a=t.children.map((s,o)=>{const c={...s,id:ri.generateId(),customId:wy(s.tag,i),parent_id:r.id,order_num:o+1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return i.push(c),c});return{parent:r,children:a}}function GY(t,e){const n=$e.getState(),i=[...n.elements,t,...e];n.setElements(i);const{saveSnapshot:a}=n;a&&a(i,"  ");const s=[t,...e];return setTimeout(async()=>{try{await(await Yt()).elements.insertMany(s.map(c=>qd(c))),console.log(` [IndexedDB]    : ${t.tag} +  ${e.length}`)}catch(o){console.warn(" [IndexedDB]    ( ):",o)}},0),i}function RO(t,e){const n=$e.getState(),r=n.elements.map(i=>i.id===t?{...i,id:e}:i);n.setElements(r)}async function aAe(t,e,n){try{if(n){const{data:r,error:i}=await zr.from("layouts").select("id").eq("id",n).maybeSingle();if(i)return console.warn(`[dbPersistence] Error checking layout ${n}:`,i),!1;if(!r)return console.log(`[dbPersistence]  Layout ${n} not in Supabase - skipping cloud save (local-only mode)`),!1}else if(t){const{data:r,error:i}=await zr.from("pages").select("id").eq("id",t).maybeSingle();if(i)return console.warn(`[dbPersistence] Error checking page ${t}:`,i),!1;if(!r)return console.log(`[dbPersistence]  Page ${t} not in Supabase - skipping cloud save (local-only mode)`),!1}else return console.warn("[dbPersistence] Neither pageId nor layoutId provided - skipping save"),!1;if(e){const{data:r,error:i}=await zr.from("elements").select("id").eq("id",e).maybeSingle();if(i&&console.warn(`[dbPersistence] Error checking parent element ${e}:`,i),!r)try{if(await(await Yt()).elements.getById(e))console.log(`[dbPersistence] Parent element ${e} found in IndexedDB (not in Supabase yet) - allowing save`);else return console.warn(`[dbPersistence] Parent element ${e} not found in DB or IndexedDB - skipping save`),!1}catch(a){return console.warn(`[dbPersistence] Error checking IndexedDB for parent element ${e}:`,a),!1}}return!0}catch(r){return console.error("[dbPersistence] Reference validation failed:",r),!1}}async function WY(t,e,n,r,i){try{if(!await aAe(r,n,i)){console.log("[dbPersistence]  Skipping Supabase save (local-only mode) - element saved in IndexedDB only");return}const s=i?[]:await Po.getElementsByPageId(r),o={...t,parent_id:n,order_num:bi.calculateNextOrderNum(n,s)},c=await Po.createElement(o);RO(t.id,c.id);for(let u=0;u<e.length;u++){const h={...e[u],parent_id:c.id},f=await Po.createElement(h);RO(e[u].id,f.id)}console.log(`[dbPersistence] Successfully saved parent ${c.id} and ${e.length} children${i?` (Layout: ${i})`:""}`)}catch(a){console.error("Background save failed:",a)}}function sAe(t,e,n,r,i){setTimeout(async()=>{await WY(t,e,n,r,i)},0)}function oAe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,a=e?.id||null,s=bi.calculateNextOrderNum(a,r);return{tag:"TextField",parent:{tag:"TextField",props:{label:"Text Field",description:"",errorMessage:"",placeholder:"Enter text...",value:"",type:"text",isRequired:!1,isDisabled:!1,isReadOnly:!1},...i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null},parent_id:a,order_num:s},children:[]}}function lAe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,a=e?.id||null,s=bi.calculateNextOrderNum(a,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"Select",parent:{tag:"Select",props:{label:"Select",placeholder:"Choose an option...",selectedKey:void 0},...o,parent_id:a,order_num:s},children:[{tag:"SelectItem",props:{label:"Option 1",value:"option1",isDisabled:!1},...o,order_num:1}]}}function cAe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,a=e?.id||null,s=bi.calculateNextOrderNum(a,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"ComboBox",parent:{tag:"ComboBox",props:{label:"Combo Box",placeholder:"Type or select...",inputValue:"",allowsCustomValue:!0,selectedKey:void 0},...o,parent_id:a,order_num:s},children:[{tag:"ComboBoxItem",props:{label:"Option 1",value:"option1",isDisabled:!1},...o,order_num:1}]}}function uAe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,a=e?.id||null,s=bi.calculateNextOrderNum(a,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"ListBox",parent:{tag:"ListBox",props:{orientation:"vertical",selectionMode:"single"},...o,parent_id:a,order_num:s},children:[{tag:"ListBoxItem",props:{label:"Item 1",value:"item1",isDisabled:!1},...o,order_num:1}]}}function dAe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,a=e?.id||null,s=bi.calculateNextOrderNum(a,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"GridList",parent:{tag:"GridList",props:{selectionMode:"none"},...o,parent_id:a,order_num:s},children:[{tag:"GridListItem",props:{label:"Item 1",value:"item1",isDisabled:!1},...o,order_num:1}]}}function hAe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,a=e?.id||null,s=bi.calculateNextOrderNum(a,r);return{tag:"Group",parent:{tag:"Group",props:{label:"Element Group",style:{display:"block",position:"relative"}},...i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null},parent_id:a,order_num:s},children:[]}}function fAe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,a=e?.id||null,s=bi.calculateNextOrderNum(a,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"ToggleButtonGroup",parent:{tag:"ToggleButtonGroup",props:{tag:"ToggleButtonGroup",variant:"default",size:"sm",orientation:"horizontal",selectionMode:"single",value:[]},...o,parent_id:a,order_num:s},children:[{tag:"ToggleButton",props:{children:"Toggle 1",variant:"default",size:"sm",isSelected:!1,isDisabled:!1},...o,order_num:1},{tag:"ToggleButton",props:{children:"Toggle 2",variant:"default",size:"sm",isSelected:!1,isDisabled:!1},...o,order_num:2}]}}function pAe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,a=e?.id||null,s=bi.calculateNextOrderNum(a,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"CheckboxGroup",parent:{tag:"CheckboxGroup",props:{tag:"CheckboxGroup",label:"Checkbox Group",orientation:"vertical",value:[]},...o,parent_id:a,order_num:s},children:[{tag:"Checkbox",props:{children:"Option 1",isSelected:!1,isDisabled:!1},...o,order_num:1},{tag:"Checkbox",props:{children:"Option 2",isSelected:!1,isDisabled:!1},...o,order_num:2}]}}function mAe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,a=e?.id||null,s=bi.calculateNextOrderNum(a,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"RadioGroup",parent:{tag:"RadioGroup",props:{label:"Radio Group",orientation:"vertical",value:""},...o,parent_id:a,order_num:s},children:[{tag:"Radio",props:{children:"Option 1",value:"option1",isDisabled:!1},...o,order_num:1},{tag:"Radio",props:{children:"Option 2",value:"option2",isDisabled:!1},...o,order_num:2}]}}function gAe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,a=e?.id||null,s=bi.calculateNextOrderNum(a,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"TagGroup",parent:{tag:"TagGroup",props:{label:"Tag Group",allowsRemoving:!1,selectionMode:"multiple"},...o,parent_id:a,order_num:s},children:[{tag:"Tag",props:{children:"Tag 1",isDisabled:!1},...o,order_num:1},{tag:"Tag",props:{children:"Tag 2",isDisabled:!1},...o,order_num:2}]}}function vAe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,a=e?.id||null,s=bi.calculateNextOrderNum(a,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"Breadcrumbs",parent:{tag:"Breadcrumbs",props:{"aria-label":"Breadcrumbs",isDisabled:!1},...o,parent_id:a,order_num:s},children:[{tag:"Breadcrumb",props:{children:"Home",href:"/"},...o,order_num:1},{tag:"Breadcrumb",props:{children:"Category",href:"/category"},...o,order_num:2},{tag:"Breadcrumb",props:{children:"Page",href:"/category/page"},...o,order_num:3}]}}function yAe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,a=e?.id||null,s=bi.calculateNextOrderNum(a,r),o=ri.generateId(),c=ri.generateId(),u=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"Tabs",parent:{tag:"Tabs",props:{defaultSelectedKey:o,orientation:"horizontal"},...u,parent_id:a,order_num:s},children:[{tag:"Tab",props:{title:"Tab 1",tabId:o},...u,order_num:1},{tag:"Panel",props:{title:"Panel 1",variant:"tab",tabId:o},...u,order_num:2},{tag:"Tab",props:{title:"Tab 2",tabId:c},...u,order_num:3},{tag:"Panel",props:{title:"Panel 2",variant:"tab",tabId:c},...u,order_num:4}]}}function bAe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,a=e?.id||null,s=bi.calculateNextOrderNum(a,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"Tree",parent:{tag:"Tree",props:{"aria-label":"Tree",selectionMode:"single",selectionBehavior:"replace"},...o,parent_id:a,order_num:s},children:[{tag:"TreeItem",props:{title:"Node 1",hasChildren:!0},...o,order_num:1},{tag:"TreeItem",props:{title:"Node 2",hasChildren:!1},...o,order_num:2}]}}function xAe(){return{children:"Button",variant:"default",size:"sm",isDisabled:!1}}function _Ae(){return{children:"Link",href:"#",variant:"default",size:"md",isDisabled:!1,isExternal:!1,showExternalIcon:!0}}function wAe(){return{type:"text",isRequired:!1,isDisabled:!1,isReadOnly:!1}}function SAe(){return{children:"Checkbox",isSelected:!1,isDisabled:!1}}function EAe(){return{isSelected:!1,isDisabled:!1}}function CAe(){return{children:"Toggle Button",variant:"default",size:"sm",isSelected:!1,isDisabled:!1}}function TAe(){return{variant:"default",size:"sm",value:[],isDisabled:!1,selectionMode:"single",orientation:"horizontal"}}function MAe(){return{value:[],isDisabled:!1,orientation:"horizontal"}}function AAe(){return{value:"",isDisabled:!1,orientation:"horizontal"}}function PAe(){return{isDisabled:!1}}function NAe(){return{isDisabled:!1,allowsCustomValue:!1}}function DAe(){return{label:"Slider",value:0,minValue:0,maxValue:100,step:1,isDisabled:!1,orientation:"horizontal"}}function kAe(){return{orientation:"horizontal"}}function RAe(){return{isDisabled:!1}}function IAe(){return{variant:"default"}}function $Ae(){return{items:[],selectedKeys:[],isDisabled:!1}}function jAe(){return{isDisabled:!1}}function LAe(){return{isDisabled:!1,isReadOnly:!1}}function OAe(){return{isDisabled:!1,isReadOnly:!1}}function FAe(){return{isDisabled:!1,isReadOnly:!1}}function BAe(){return{children:"Switch",isSelected:!1,isDisabled:!1}}function qY(){return{items:[],selectionMode:"none",selectedKeys:[],variant:"default",size:"sm",headerVariant:"default",cellVariant:"default",paginationMode:"infinite",itemsPerPage:10,height:400,itemHeight:38,overscan:10,stickyHeader:!1,stickyHeaderOffset:0,sortColumn:void 0,sortDirection:"ascending"}}function zAe(){return{variant:"default",sticky:!1}}function UAe(){return{children:"Column Group",label:"Group",span:2,align:"center",variant:"default",sticky:!1}}function VAe(){return{variant:"default",size:"md",orientation:"vertical",title:"Title",description:"Description"}}function HAe(){return{children:"Badge",variant:"default",size:"sm",isDot:!1,isPulsing:!1}}function GAe(){return{items:[],selectedKeys:[],isDisabled:!1,allowsRemoving:!1}}function WAe(){return{isDisabled:!1}}function qAe(){return{items:[],selectedKeys:[],isDisabled:!1,selectionMode:"single"}}function KAe(){return{isDisabled:!1}}function XAe(){return{items:[],selectedKeys:[],isDisabled:!1,selectionMode:"single"}}function YAe(){return{isDisabled:!1}}function ZAe(){return{children:"Text"}}function JAe(){return{}}function QAe(){return{}}function ePe(){return{}}async function tPe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t;let a=e?.id||null;a||(a=ri.findBodyElement(r,n));const s=bi.calculateNextOrderNum(a,r),o=qY(),c=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null},u={id:ri.generateId(),customId:wy("Table",r),tag:"Table",props:o,...c,parent_id:a,order_num:s,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},f=[{id:ri.generateId(),customId:wy("TableHeader",[...r,u]),tag:"TableHeader",props:zAe(),parent_id:u.id,...c,order_num:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];return GY(u,f),await WY(u,f,a,n),{parent:u,children:f,allElements:[u,...f]}}async function nPe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,a=r.filter(h=>h.parent_id===e?.id&&h.tag==="ColumnGroup"),s=a.length>0?Math.max(...a.map(h=>h.order_num||0)):-1,o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null},c={id:ri.generateId(),customId:wy("ColumnGroup",r),tag:"ColumnGroup",props:UAe(),parent_id:e?.id||null,...o,order_num:s+1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},u=[];return{parent:c,children:u,allElements:[c,...u]}}function rPe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,a=e?.id||null,s=bi.calculateNextOrderNum(a,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"DataTable",parent:{tag:"DataTable",props:{id:`datatable-${Date.now()}`,name:"New DataTable",autoLoad:!0,dataBinding:{type:"collection",source:"api",config:{baseUrl:"MOCK_DATA",endpoint:"/users",dataMapping:{resultPath:"data",idField:"id",labelField:"name"}}}},...o,parent_id:a,order_num:s},children:[]}}function iPe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,a=e?.id||null,s=bi.calculateNextOrderNum(a,r);return i||console.warn(" Slot can only be created in Layout mode"),{tag:"Slot",parent:{tag:"Slot",props:{name:"content",required:!1,description:"Main content area"},...i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null},parent_id:a,order_num:s},children:[]}}class Da{static creators={TextField:Da.createTextField,Group:Da.createGroup,ToggleButtonGroup:Da.createToggleButtonGroup,CheckboxGroup:Da.createCheckboxGroup,RadioGroup:Da.createRadioGroup,Select:Da.createSelect,ComboBox:Da.createComboBox,Tabs:Da.createTabs,Tree:Da.createTree,TagGroup:Da.createTagGroup,Breadcrumbs:Da.createBreadcrumbs,ListBox:Da.createListBox,GridList:Da.createGridList,Table:Da.createTable,DataTable:Da.createDataTable,Slot:Da.createSlot};static async createComplexComponent(e,n,r,i,a){const s=this.creators[e];if(!s)throw new Error(`No creator found for component type: ${e}`);const o={parentElement:n,pageId:r,elements:i,layoutId:a};return await s.call(this,o)}static async createComponent(e,n){const{parentElement:r,pageId:i,elements:a,layoutId:s}=n;let o=r?.id||null;if(!o){o=ri.findBodyByContext(a,i||null,s||null);const f=a.find(m=>m.id===o);f&&(n={...n,parentElement:f})}const c=e(n),{parent:u,children:h}=iAe(c);return GY(u,h),sAe(u,h,o,i,s),{parent:u,children:h,allElements:[u,...h]}}static async createTextField(e){return this.createComponent(oAe,e)}static async createGroup(e){return this.createComponent(hAe,e)}static async createToggleButtonGroup(e){return this.createComponent(fAe,e)}static async createCheckboxGroup(e){return this.createComponent(pAe,e)}static async createRadioGroup(e){return this.createComponent(mAe,e)}static async createSelect(e){return this.createComponent(lAe,e)}static async createComboBox(e){return this.createComponent(cAe,e)}static async createTabs(e){return this.createComponent(yAe,e)}static async createTree(e){return this.createComponent(bAe,e)}static async createTagGroup(e){return this.createComponent(gAe,e)}static async createBreadcrumbs(e){return this.createComponent(vAe,e)}static async createListBox(e){return this.createComponent(uAe,e)}static async createGridList(e){return this.createComponent(dAe,e)}static async createDataTable(e){return this.createComponent(rPe,e)}static async createSlot(e){return this.createComponent(iPe,e)}static async createTable(e){return await tPe(e)}static async createColumnGroup(e,n,r=[]){return await nPe({parentElement:e,pageId:n,elements:r})}}const KY=()=>{const[t,e]=T.useState(null),[n,r]=T.useState(!1),[i,a]=T.useState([]),[s,o]=T.useState([]),c=T.useRef(new Map),u=T.useCallback((w,S,E)=>{const A=ri.generateId(),N=new Date;let P="   ",R;w instanceof Error?(P=w.message,R=w.stack):typeof w=="string"?P=w:w&&typeof w=="object"&&"message"in w&&(P=String(w.message));const D=S?`${S}   : ${P}`:P,k={id:A,timestamp:N,type:E?.type||"validation",severity:E?.severity||"medium",message:P,context:S,elementId:E?.elementId,operation:E?.operation,stack:R,recoverable:E?.recoverable??!0};a(L=>[...L,k].slice(-100)),console.error(`[${k.severity.toUpperCase()}] ${D}`,{errorInfo:k,error:w}),e(D),E?.severity==="critical"&&console.error("Critical error detected:",k)},[]),h=T.useCallback(()=>{e(null)},[]),f=T.useCallback(()=>{a([]),c.current.clear()},[]),m=T.useCallback(w=>{o(S=>[...S,w].slice(-50))},[]),g=T.useCallback(async(w=1)=>{try{const S=s;if(S.length===0)return u("  .","Rollback",{type:"validation",severity:"low"}),!1;const E=S.slice(-w);for(const A of E.reverse())try{switch(A.operation){case"create":A.elementId&&console.log(`Rolling back element creation: ${A.elementId}`);break;case"update":A.previousState&&console.log(`Rolling back element update: ${A.elementId}`,A.previousState);break;case"delete":A.previousState&&console.log(`Rolling back element deletion: ${A.elementId}`,A.previousState);break;case"move":A.previousState&&console.log(`Rolling back element move: ${A.elementId}`,A.previousState);break}}catch(N){u(N,` : ${A.operation}`,{type:"validation",severity:"high",elementId:A.elementId,operation:A.operation})}return o(A=>A.slice(0,-w)),!0}catch(S){return u(S,"   ",{type:"validation",severity:"high"}),!1}},[s,u]),v=T.useCallback(async(w,S=3)=>{const E=ri.generateId();let A=c.current.get(E)||0;for(;A<S;)try{await w(),c.current.delete(E);return}catch(N){if(A++,c.current.set(E,A),A>=S)throw u(N,`   (${S} )`,{type:"network",severity:"high",recoverable:!1}),N;{const P=Math.pow(2,A)*1e3;await ri.delay(P),u(N,`   (${A}/${S})`,{type:"network",severity:"low",recoverable:!0})}}},[u]),x=T.useCallback(w=>{const S=[];if(!Array.isArray(w))return S.push("   ."),{isValid:!1,errors:S};const E=new Set;w.forEach((R,D)=>{R.id?E.has(R.id)?S.push(` ${D}:  ID (${R.id})`):E.add(R.id):S.push(` ${D}: ID .`),R.tag||S.push(` ${R.id}:  .`),!R.page_id&&!R.layout_id&&S.push(` ${R.id}:  ID   ID .`)});const A=new Set,N=new Set,P=R=>{if(N.has(R))return!0;if(A.has(R))return!1;A.add(R),N.add(R);const D=w.find(k=>k.id===R);return D?.parent_id&&P(D.parent_id)?!0:(N.delete(R),!1)};return w.forEach(R=>{P(R.id)&&S.push(` ${R.id}:   .`)}),{isValid:S.length===0,errors:S}},[]),_=T.useCallback(()=>{const w={},S={};i.forEach(A=>{w[A.type]=(w[A.type]||0)+1,S[A.severity]=(S[A.severity]||0)+1});const E=i.slice(-10);return{totalErrors:i.length,errorsByType:w,errorsBySeverity:S,recentErrors:E}},[i]);return{error:t,isLoading:n,errorHistory:i,rollbackStack:s,setError:e,setIsLoading:r,handleError:u,clearError:h,clearErrorHistory:f,addRollbackPoint:m,rollback:g,retryOperation:v,validateElements:x,getErrorStats:_}},XY=()=>{const t=T.useRef(!1),e=T.useRef([]),n=T.useRef(null),r=T.useRef(!1),{handleError:i,addRollbackPoint:a,rollback:s,retryOperation:o,validateElements:c,getErrorStats:u}=KY();T.useEffect(()=>{r.current||(bi.updateConfig({maxCacheSize:500,enableIncrementalUpdate:!0,enableBatchProcessing:!0,batchSize:50}),r.current=!0)},[]);const h=T.useCallback(_=>{switch(console.log(" getDefaultProps called for tag:",_),_){case"Button":{const w=xAe();return console.log(" Button props created:",w),w}case"Link":return _Ae();case"TextField":return wAe();case"Checkbox":return SAe();case"Radio":return EAe();case"ToggleButton":return CAe();case"ToggleButtonGroup":return TAe();case"CheckboxGroup":return MAe();case"RadioGroup":return AAe();case"Select":return PAe();case"ComboBox":return NAe();case"Slider":return DAe();case"Switch":return BAe();case"Tabs":return kAe();case"Tab":return RAe();case"Panel":return IAe();case"Tree":return $Ae();case"TreeItem":return jAe();case"Calendar":return LAe();case"DatePicker":return OAe();case"DateRangePicker":return FAe();case"Table":return qY();case"Card":return VAe();case"Badge":return HAe();case"TagGroup":return GAe();case"Tag":return WAe();case"ListBox":return qAe();case"ListBoxItem":return KAe();case"GridList":return XAe();case"GridListItem":return YAe();case"Text":return ZAe();case"Div":return JAe();case"Section":return QAe();case"Nav":return ePe();default:return{children:_==="Text"?"Text":""}}},[]),f=T.useCallback(async(_,w,S,E,A,N,P)=>{if(t.current)return;t.current=!0;const R=c(E);if(!R.isValid){i(R.errors.join(", "),"   ",{type:"validation",severity:"high"}),t.current=!1;return}try{if(w||P){e.current=E;const D=S?E.find($=>$.id===S):null;a({operation:"create",elementId:"pending",previousElements:[...E],timestamp:new Date});const k=["TextField","ToggleButtonGroup","CheckboxGroup","RadioGroup","Select","ComboBox","Tabs","Tree","TagGroup","ListBox","GridList","Table"],L=async()=>{if(k.includes(_)){console.log(`    : ${_}`,P?`(Layout: ${P})`:"");const $=await Da.createComplexComponent(_,D??null,w,E,P);console.log(`    : ${_},  ${$.allElements.length}  `);const B=[...E,...$.allElements];bi.incrementalUpdate(B,$.parent.id),N(B)}else{console.log(`   : ${_}`,P?`(Layout: ${P})`:"");let $=S||null;$||($=ri.findBodyByContext(E,w||null,P||null));const B=bi.calculateNextOrderNum($,E),q={id:crypto.randomUUID(),tag:_,customId:wy(_,E),props:h(_),page_id:P?null:w,layout_id:P||null,parent_id:$,order_num:B,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};A(q);const U=[...E,q];bi.incrementalUpdate(U,q.id),N(U)}};n.current=L,await o(L,3)}}catch(D){i(D,`  : ${_}`,{type:"creation",severity:"high",elementId:S||void 0,operation:"create",recoverable:!0})}finally{t.current=!1}},[h,i,a,o,c]),m=T.useCallback(()=>bi.getPerformanceStats(),[]),g=T.useCallback(()=>{bi.clearCache()},[]),v=T.useCallback(_=>{bi.updateConfig(_)},[]),x=T.useCallback(async()=>{n.current&&await o(n.current,3)},[o]);return{getDefaultProps:h,handleAddElement:f,getPerformanceStats:m,clearCache:g,updateCacheConfig:v,getErrorStats:u,rollback:s,retryLastOperation:x}},{addElement:IO}=$e.getState();function aPe({isActive:t}){const{projectId:e}=yg(),n=$e(S=>S.currentPageId),r=$e(S=>S.pages),i=Eo(S=>S.mode),a=Ra(S=>S.currentLayoutId),{requestAutoSelectAfterUpdate:s}=kT(),{pageList:o,addPage:c,addPageWithParams:u,fetchElements:h,initializeProject:f}=HY({requestAutoSelectAfterUpdate:s}),{handleAddElement:m}=XY();T.useEffect(()=>{e&&r.length===0&&t&&f(e)},[e,r.length,t,f]);const g=T.useMemo(()=>r.map(S=>({id:S.id,title:S.name||"Untitled",project_id:"",slug:S.slug||"",parent_id:S.parent_id,order_num:S.order_num||0})),[r]),v=T.useCallback(async()=>{if(!e){console.error(" ID ");return}await c(e)},[e,c]),x=T.useCallback(async S=>{await h(S)},[h]),_=T.useCallback(async S=>{const E=$e.getState().elements,A=$e.getState().getPageElements;if(i==="layout"&&a){console.log(` Layout : ${S} Layout ${a} `),await m(S,"",null,E.filter(P=>P.layout_id===a),IO,()=>{},a);return}if(!n)return;const N=A(n);await m(S,n,null,N,IO,()=>{})},[n,a,i,m]),w=T.useMemo(()=>new Set(["nodes"]),[]);return t?i==="page"&&!n?l.jsx("div",{className:"panel-empty-state",children:l.jsx("p",{className:"empty-message",children:" "})}):l.jsx("div",{className:"nodes-panel",children:l.jsx(rAe,{pages:g,pageList:o,handleAddPage:v,addPageWithParams:u,handleAddElement:_,fetchElements:x,selectedPageId:n,forcedActiveTabs:w,projectId:e})}):null}function sPe({isActive:t}){return t?l.jsx(oPe,{}):null}function oPe(){const t=$e(c=>c.selectedElementId),e=$e(c=>c.currentPageId),n=$e(c=>c.addElement),r=Eo(c=>c.mode),i=Ra(c=>c.currentLayoutId),{handleAddElement:a}=XY(),{sendElementsToIframe:s}=kT(),o=T.useCallback(async(c,u)=>{const h=$e.getState().elements,f=$e.getState().getPageElements;if(r==="layout"&&i){const g=h.filter(x=>x.layout_id===i);let v=null;t&&(g.some(_=>_.id===t)?v=t:console.log(` [ComponentsPanel] selectedElementId(${t?.slice(0,8)})  Layout   - `)),console.log(` [ComponentsPanel] Layout : ${c} Layout ${i?.slice(0,8)}  (parent: ${(u||v)?.slice(0,8)||"auto"})`),await a(c,"",u||v,g,n,s,i);return}if(!e){console.error("  ");return}const m=f(e);await a(c,e,u||t,m,n,s)},[e,i,r,t,n,a,s]);return l.jsx(CK,{handleAddElement:o,selectedElementId:t})}function pf(){const{panelLayout:t,setPanelLayout:e}=$e.getState();t.activeLeftPanels.includes("datatableEditor")||e({...t,activeLeftPanels:[...t.activeLeftPanels,"datatableEditor"]})}function lPe(){const{panelLayout:t,setPanelLayout:e}=$e.getState();t.activeLeftPanels.includes("datatableEditor")&&e({...t,activeLeftPanels:t.activeLeftPanels.filter(n=>n!=="datatableEditor")})}const Bu=Ks(t=>({mode:null,openTableCreator:e=>{t({mode:{type:"table-create",projectId:e}}),pf()},openTableEditor:e=>{t({mode:{type:"table-edit",tableId:e}}),pf()},openApiCreator:e=>{t({mode:{type:"api-create",projectId:e}}),pf()},openApiEditor:(e,n)=>{t({mode:{type:"api-edit",endpointId:e,initialTab:n}}),pf()},openVariableCreator:e=>{t({mode:{type:"variable-create",projectId:e}}),pf()},openVariableEditor:e=>{t({mode:{type:"variable-edit",variableId:e}}),pf()},openTransformerCreator:e=>{t({mode:{type:"transformer-create",projectId:e}}),pf()},openTransformerEditor:e=>{t({mode:{type:"transformer-edit",transformerId:e}}),pf()},close:()=>{t({mode:null}),lPe()}})),Rl={all:["data"],dataTables:t=>[...Rl.all,"dataTables",t],dataTable:(t,e)=>[...Rl.dataTables(t),e],apiEndpoints:t=>[...Rl.all,"apiEndpoints",t],apiEndpoint:(t,e)=>[...Rl.apiEndpoints(t),e],variables:t=>[...Rl.all,"variables",t],variable:(t,e)=>[...Rl.variables(t),e],transformers:t=>[...Rl.all,"transformers",t],transformer:(t,e)=>[...Rl.transformers(t),e]};async function cPe(t){return await(await Yt()).data_tables?.getByProject(t)||[]}async function uPe(t){return await(await Yt()).api_endpoints?.getByProject(t)||[]}async function dPe(t){return await(await Yt()).variables?.getByProject(t)||[]}async function hPe(t){return await(await Yt()).transformers?.getByProject(t)||[]}function fPe(t,e){return I2({queryKey:Rl.dataTables(t||""),queryFn:()=>cPe(t),enabled:!!t&&e?.enabled!==!1,staleTime:300*1e3})}function pPe(t,e){return I2({queryKey:Rl.apiEndpoints(t||""),queryFn:()=>uPe(t),enabled:!!t&&e?.enabled!==!1,staleTime:300*1e3})}function mPe(t,e){return I2({queryKey:Rl.variables(t||""),queryFn:()=>dPe(t),enabled:!!t&&e?.enabled!==!1,staleTime:300*1e3})}function gPe(t,e){return I2({queryKey:Rl.transformers(t||""),queryFn:()=>hPe(t),enabled:!!t&&e?.enabled!==!1,staleTime:300*1e3})}function vPe(t,e){const n=!!t&&e?.enabled!==!1,r=fPe(t,{enabled:n}),i=pPe(t,{enabled:n}),a=mPe(t,{enabled:n}),s=gPe(t,{enabled:n}),o=r.isLoading||i.isLoading||a.isLoading||s.isLoading,c=r.isError||i.isError||a.isError||s.isError,u=r.error||i.error||a.error||s.error;return{data:r.data&&i.data&&a.data&&s.data?{dataTables:r.data,apiEndpoints:i.data,variables:a.data,transformers:s.data}:void 0,isLoading:o,isError:c,error:u,refetch:()=>{r.refetch(),i.refetch(),a.refetch(),s.refetch()}}}function yPe({projectId:t,editingId:e,onEditingChange:n,onCreateClick:r}){const i=vr(m=>m.dataTables),a=vr(m=>m.apiEndpoints),s=vr(m=>m.deleteDataTable),o=T.useMemo(()=>Array.from(i.values()),[i]),c=T.useMemo(()=>Array.from(a.values()),[a]),u=T.useMemo(()=>m=>c.find(g=>g.targetDataTable===m),[c]),h=async(m,g)=>{if(g.stopPropagation(),!!confirm(" ?"))try{await s(m),e===m&&n(null)}catch(v){console.error("DataTable  :",v)}},f=(m,g)=>{g.stopPropagation(),n(m)};return l.jsxs("div",{className:"section",children:[l.jsx(dw,{title:"Table List",actions:l.jsxs("span",{className:"datatable-list-count",children:[o.length,""]})}),l.jsxs("div",{className:"section-content",children:[o.length===0?l.jsxs("div",{className:"datatable-empty",children:[l.jsx(i_,{size:32,className:"datatable-empty-icon"}),l.jsxs("p",{className:"datatable-empty-text",children:["  .",l.jsx("br",{}),"  ."]})]}):l.jsx("div",{className:"list-group",role:"list",children:o.map(m=>{const g=u(m.name);return l.jsxs("div",{role:"listitem",className:`list-item ${e===m.id?"selected":""}`,onClick:()=>n(m.id),children:[l.jsx("div",{className:"list-item-icon",children:l.jsx(i_,{size:16})}),l.jsxs("div",{className:"list-item-content",children:[l.jsx("div",{className:"list-item-name",children:m.name}),l.jsxs("div",{className:"list-item-meta",children:[m.schema.length,"  "," ",m.mockData?.length||0," ",g&&l.jsxs(l.Fragment,{children:[" "," ",l.jsx(H_,{size:10,className:"linked-api-icon"})," ",g.name]})]})]}),l.jsx("span",{className:`list-item-badge ${g?"api":"local"}`,children:g?"API":"Local"}),l.jsxs("div",{className:"list-item-actions",children:[l.jsx("button",{type:"button",className:"iconButton",onClick:v=>f(m.id,v),title:"",children:l.jsx(j2,{size:14})}),l.jsx("button",{type:"button",className:"iconButton",onClick:v=>h(m.id,v),title:"",children:l.jsx(Ws,{size:14})})]})]},m.id)})}),l.jsxs(Pt,{className:"datatable-add-btn",onPress:r,children:[l.jsx(No,{size:16}),l.jsx("span",{children:"Table "})]})]})]})}function bPe({projectId:t}){const e=vT(),n=vr(g=>g.createApiEndpoint),r=vr(g=>g.deleteApiEndpoint),[i,a]=T.useState(null),s=Bu(g=>g.mode),o=Bu(g=>g.openApiEditor),c=s?.type==="api-edit"?s.endpointId:null,u=async()=>{const g=prompt("API URL  (: https://pokeapi.co/api/v2/pokemon):");if(!g)return;let v="",x="";try{const _=new URL(g);v=`${_.protocol}//${_.host}`,x=_.pathname||"/"}catch{v="https://api.example.com",x=g.startsWith("/")?g:`/${g}`}try{await n({name:g,project_id:t,method:"GET",baseUrl:v,path:x})}catch(_){console.error("API Endpoint  :",_)}},h=async(g,v)=>{if(v.stopPropagation(),!!confirm(" ?"))try{await r(g),i===g&&a(null)}catch(x){console.error("API Endpoint  :",x)}},f=(g,v)=>{v.stopPropagation(),o(g,"run")},m=(g,v)=>{v.stopPropagation(),o(g)};return l.jsxs("div",{className:"section",children:[l.jsx(dw,{title:"API List",actions:l.jsxs("span",{className:"datatable-list-count",children:[e.length,""]})}),l.jsxs("div",{className:"section-content",children:[e.length===0?l.jsxs("div",{className:"datatable-empty",children:[l.jsx(t_,{size:32,className:"datatable-empty-icon"}),l.jsxs("p",{className:"datatable-empty-text",children:["API Endpoint .",l.jsx("br",{})," API ."]})]}):l.jsx("div",{className:"list-group",role:"list",children:e.map(g=>l.jsxs("div",{role:"listitem",className:`list-item ${i===g.id?"selected":""} ${c===g.id?"editing":""}`,onClick:()=>a(g.id),children:[l.jsx("div",{className:"list-item-icon",children:l.jsx(t_,{size:16})}),l.jsxs("div",{className:"list-item-content",children:[l.jsx("div",{className:"list-item-name",children:g.name}),l.jsxs("div",{className:"list-item-meta",children:[g.baseUrl,g.path]})]}),l.jsx("span",{className:`list-item-badge method ${g.method}`,children:g.method}),l.jsxs("div",{className:"list-item-actions",children:[l.jsx("button",{type:"button",className:"iconButton",onClick:v=>f(g.id,v),title:"",children:l.jsx($y,{size:14})}),l.jsx("button",{type:"button",className:"iconButton",onClick:v=>m(g.id,v),title:"",children:l.jsx(j2,{size:14})}),l.jsx("button",{type:"button",className:"iconButton",onClick:v=>h(g.id,v),title:"",children:l.jsx(Ws,{size:14})})]})]},g.id))}),l.jsxs("button",{type:"button",className:"datatable-add-btn",onClick:u,children:[l.jsx(No,{size:16}),l.jsx("span",{children:"API "})]})]})]})}function xPe({projectId:t}){const e=kI(),n=vr(g=>g.createVariable),r=vr(g=>g.deleteVariable),i=Bu(g=>g.mode),a=Bu(g=>g.openVariableEditor),s=i?.type==="variable-edit"?i.variableId:null,o=e.filter(g=>g.scope==="global"),c=e.filter(g=>g.scope==="page"),u=async()=>{const g=prompt("Variable  :");if(g)try{await n({name:g,project_id:t,type:"string",defaultValue:"",persist:!1,scope:"global"})}catch(v){console.error("Variable  :",v)}},h=async(g,v)=>{if(v.stopPropagation(),!!confirm(" ?"))try{await r(g)}catch(x){console.error("Variable  :",x)}},f=(g,v)=>{v.stopPropagation(),a(g)},m=g=>l.jsxs("div",{role:"listitem",className:`list-item ${s===g.id?"editing":""}`,onClick:()=>a(g.id),children:[l.jsx("div",{className:"list-item-icon",children:l.jsx(D3,{size:16})}),l.jsxs("div",{className:"list-item-content",children:[l.jsx("div",{className:"list-item-name",children:g.name}),l.jsxs("div",{className:"list-item-meta",children:[g.type,g.persist&&"  localStorage"]})]}),l.jsx("span",{className:`list-item-badge ${g.scope}`,children:g.scope}),l.jsxs("div",{className:"list-item-actions",children:[l.jsx("button",{type:"button",className:"iconButton",onClick:v=>f(g.id,v),title:"",children:l.jsx(j2,{size:14})}),l.jsx("button",{type:"button",className:"iconButton",onClick:v=>h(g.id,v),title:"",children:l.jsx(Ws,{size:14})})]})]},g.id);return l.jsxs("div",{className:"section",children:[l.jsx(dw,{title:"Variable List",actions:l.jsxs("span",{className:"datatable-list-count",children:[e.length,""]})}),l.jsxs("div",{className:"section-content",children:[e.length===0?l.jsxs("div",{className:"datatable-empty",children:[l.jsx(D3,{size:32,className:"datatable-empty-icon"}),l.jsxs("p",{className:"datatable-empty-text",children:[" .",l.jsx("br",{}),"  ."]})]}):l.jsxs(l.Fragment,{children:[o.length>0&&l.jsxs("div",{className:"list-subgroup",children:[l.jsxs("div",{className:"list-subgroup-header",children:[l.jsx("span",{className:"list-subgroup-title",children:"Global"}),l.jsxs("span",{className:"list-subgroup-count",children:[o.length,""]})]}),l.jsx("div",{className:"list-group",role:"list",children:o.map(m)})]}),c.length>0&&l.jsxs("div",{className:"list-subgroup",children:[l.jsxs("div",{className:"list-subgroup-header",children:[l.jsx("span",{className:"list-subgroup-title",children:"Page"}),l.jsxs("span",{className:"list-subgroup-count",children:[c.length,""]})]}),l.jsx("div",{className:"list-group",role:"list",children:c.map(m)})]})]}),l.jsxs("button",{type:"button",className:"datatable-add-btn",onClick:u,children:[l.jsx(No,{size:16}),l.jsx("span",{children:"Variable "})]})]})]})}const _Pe={level1_mapping:"Mapping",level2_transformer:"JS",level3_custom:"Custom"},wPe={level1_mapping:"level1",level2_transformer:"level2",level3_custom:"level3"};function SPe({projectId:t}){const e=Jbe(),n=vr(h=>h.createTransformer),r=vr(h=>h.deleteTransformer),i=vr(h=>h.executeTransformer),[a,s]=T.useState(null),o=async()=>{const h=prompt("Transformer  :");if(h)try{await n({name:h,project_id:t,level:"level1_mapping",enabled:!0})}catch(f){console.error("Transformer  :",f)}},c=async(h,f)=>{if(f.stopPropagation(),!!confirm(" ?"))try{await r(h),a===h&&s(null)}catch(m){console.error("Transformer  :",m)}},u=async(h,f)=>{f.stopPropagation();try{const m=await i(h,[{test:"data"}]);console.log("Transformer  :",m),alert("Transformer  !  .")}catch(m){console.error("Transformer  :",m),alert(`Transformer  : ${m.message}`)}};return l.jsxs("div",{className:"section",children:[l.jsx(dw,{title:"Transformer List",actions:l.jsxs("span",{className:"datatable-list-count",children:[e.length,""]})}),l.jsxs("div",{className:"section-content",children:[e.length===0?l.jsxs("div",{className:"datatable-empty",children:[l.jsx(bN,{size:32,className:"datatable-empty-icon"}),l.jsxs("p",{className:"datatable-empty-text",children:["Transformer .",l.jsx("br",{})," Transformer ."]})]}):l.jsx("div",{className:"datatable-list",children:e.map(h=>l.jsxs("div",{className:`datatable-item ${a===h.id?"selected":""}`,onClick:()=>s(h.id),children:[l.jsx("div",{className:"datatable-item-icon",children:l.jsx(bN,{size:16})}),l.jsxs("div",{className:"datatable-item-info",children:[l.jsx("div",{className:"datatable-item-name",children:h.name}),l.jsxs("div",{className:"datatable-item-meta",children:[h.inputDataTable&&`${h.inputDataTable}  `,h.outputDataTable||"output",!h.enabled&&"  "]})]}),l.jsx("span",{className:`level-badge ${wPe[h.level]}`,children:_Pe[h.level]}),l.jsxs("div",{className:"datatable-item-actions",children:[l.jsx("button",{type:"button",className:"iconButton",onClick:f=>u(h.id,f),disabled:!h.enabled,title:"",children:l.jsx($y,{size:14})}),l.jsx("button",{type:"button",className:"iconButton",onClick:f=>{f.stopPropagation()},title:"",children:l.jsx(j2,{size:14})}),l.jsx("button",{type:"button",className:"iconButton",onClick:f=>c(h.id,f),title:"",children:l.jsx(Ws,{size:14})})]})]},h.id))}),l.jsxs("button",{type:"button",className:"datatable-add-btn",onClick:o,children:[l.jsx(No,{size:16}),l.jsx("span",{children:"Transformer "})]})]})]})}const EPe=[{id:"tables",label:"Tables",icon:i_},{id:"endpoints",label:"APIs",icon:t_},{id:"variables",label:"Variables",icon:D3},{id:"transformers",label:"Transformers",icon:bN}];function CPe({isActive:t}){const[e,n]=T.useState("tables"),{projectId:r}=yg(),i=T.useRef(null),{isLoading:a,refetch:s}=vPe(r,{enabled:t}),o=vr(E=>E.fetchDataTables),c=vr(E=>E.fetchApiEndpoints),u=vr(E=>E.fetchVariables),h=vr(E=>E.fetchTransformers);T.useEffect(()=>{t&&r&&i.current!==r&&(console.log(` [DataTablePanel]  : projectId=${r}`),i.current=r,Promise.all([o(r),c(r),u(r),h(r)]).then(()=>{console.log(" [DataTablePanel] Zustand Store  ")}).catch(E=>{console.error(" [DataTablePanel]  :",E)}))},[t,r,o,c,u,h]);const f=Bu(E=>E.mode),m=Bu(E=>E.openTableCreator),g=Bu(E=>E.openTableEditor),v=Bu(E=>E.close),x=f?.type==="table-edit"?f.tableId:null;if(!t)return null;if(!r)return l.jsxs("div",{className:"datatable-panel",children:[l.jsx(Ul,{icon:l.jsx(ba,{size:16}),title:"DataTable"}),l.jsx(ya,{message:" "})]});const _=()=>{r&&(s(),o(r),c(r),u(r),h(r))},w=()=>{m(r)},S=E=>{E&&g(E)};return l.jsxs("div",{className:"datatable-panel",children:[l.jsx(Ul,{icon:l.jsx(ba,{size:16}),title:"DataTable",actions:l.jsx("button",{className:"iconButton",type:"button",onClick:_,title:"",children:l.jsx(Jm,{size:16})})}),l.jsx("div",{className:"panel-tabs",children:EPe.map(E=>l.jsxs("button",{className:`panel-tab ${e===E.id?"active":""}`,onClick:()=>{e!==E.id&&(f&&v(),n(E.id))},type:"button",children:[l.jsx(E.icon,{size:14}),l.jsx("span",{children:E.label})]},E.id))}),l.jsxs("div",{className:"panel-contents",children:[a&&l.jsx("div",{className:"datatable-loading-overlay",children:l.jsx(IY,{})}),e==="tables"&&l.jsx(yPe,{projectId:r,editingId:x,onEditingChange:S,onCreateClick:w}),e==="endpoints"&&l.jsx(bPe,{projectId:r}),e==="variables"&&l.jsx(xPe,{projectId:r}),e==="transformers"&&l.jsx(SPe,{projectId:r})]})]})}var w3={exports:{}};var TPe=w3.exports,$O;function MPe(){return $O||($O=1,(function(t,e){((n,r)=>{t.exports=r()})(TPe,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,a=!r.document&&!!r.postMessage,s=r.IS_PAPA_WORKER||!1,o={},c=0,u={};function h(D){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(k){var L=N(k);L.chunkSize=parseInt(L.chunkSize),k.step||k.chunk||(L.chunkSize=null),this._handle=new x(L),(this._handle.streamer=this)._config=L}).call(this,D),this.parseChunk=function(k,L){var $=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<$){let q=this._config.newline;q||(B=this._config.quoteChar||'"',q=this._handle.guessLineEndings(k,B)),k=[...k.split(q).slice($)].join(q)}this.isFirstChunk&&R(this._config.beforeFirstChunk)&&(B=this._config.beforeFirstChunk(k))!==void 0&&(k=B),this.isFirstChunk=!1,this._halted=!1;var $=this._partialLine+k,B=(this._partialLine="",this._handle.parse($,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(k=B.meta.cursor,$=(this._finished||(this._partialLine=$.substring(k-this._baseIndex),this._baseIndex=k),B&&B.data&&(this._rowCount+=B.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),s)r.postMessage({results:B,workerId:u.WORKER_ID,finished:$});else if(R(this._config.chunk)&&!L){if(this._config.chunk(B,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=B=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(B.data),this._completeResults.errors=this._completeResults.errors.concat(B.errors),this._completeResults.meta=B.meta),this._completed||!$||!R(this._config.complete)||B&&B.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),$||B&&B.meta.paused||this._nextChunk(),B}this._halted=!0},this._sendError=function(k){R(this._config.error)?this._config.error(k):s&&this._config.error&&r.postMessage({workerId:u.WORKER_ID,error:k,finished:!1})}}function f(D){var k;(D=D||{}).chunkSize||(D.chunkSize=u.RemoteChunkSize),h.call(this,D),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(L){this._input=L,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(k=new XMLHttpRequest,this._config.withCredentials&&(k.withCredentials=this._config.withCredentials),a||(k.onload=P(this._chunkLoaded,this),k.onerror=P(this._chunkError,this)),k.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var L,$=this._config.downloadRequestHeaders;for(L in $)k.setRequestHeader(L,$[L])}var B;this._config.chunkSize&&(B=this._start+this._config.chunkSize-1,k.setRequestHeader("Range","bytes="+this._start+"-"+B));try{k.send(this._config.downloadRequestBody)}catch(q){this._chunkError(q.message)}a&&k.status===0&&this._chunkError()}},this._chunkLoaded=function(){k.readyState===4&&(k.status<200||400<=k.status?this._chunkError():(this._start+=this._config.chunkSize||k.responseText.length,this._finished=!this._config.chunkSize||this._start>=(L=>(L=L.getResponseHeader("Content-Range"))!==null?parseInt(L.substring(L.lastIndexOf("/")+1)):-1)(k),this.parseChunk(k.responseText)))},this._chunkError=function(L){L=k.statusText||L,this._sendError(new Error(L))}}function m(D){(D=D||{}).chunkSize||(D.chunkSize=u.LocalChunkSize),h.call(this,D);var k,L,$=typeof FileReader<"u";this.stream=function(B){this._input=B,L=B.slice||B.webkitSlice||B.mozSlice,$?((k=new FileReader).onload=P(this._chunkLoaded,this),k.onerror=P(this._chunkError,this)):k=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var B=this._input,q=(this._config.chunkSize&&(q=Math.min(this._start+this._config.chunkSize,this._input.size),B=L.call(B,this._start,q)),k.readAsText(B,this._config.encoding));$||this._chunkLoaded({target:{result:q}})},this._chunkLoaded=function(B){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(B.target.result)},this._chunkError=function(){this._sendError(k.error)}}function g(D){var k;h.call(this,D=D||{}),this.stream=function(L){return k=L,this._nextChunk()},this._nextChunk=function(){var L,$;if(!this._finished)return L=this._config.chunkSize,k=L?($=k.substring(0,L),k.substring(L)):($=k,""),this._finished=!k,this.parseChunk($)}}function v(D){h.call(this,D=D||{});var k=[],L=!0,$=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(B){this._input=B,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){$&&k.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),k.length?this.parseChunk(k.shift()):L=!0},this._streamData=P(function(B){try{k.push(typeof B=="string"?B:B.toString(this._config.encoding)),L&&(L=!1,this._checkIsFinished(),this.parseChunk(k.shift()))}catch(q){this._streamError(q)}},this),this._streamError=P(function(B){this._streamCleanUp(),this._sendError(B)},this),this._streamEnd=P(function(){this._streamCleanUp(),$=!0,this._streamData("")},this),this._streamCleanUp=P(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function x(D){var k,L,$,B,q=Math.pow(2,53),U=-q,J=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,O=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,z=this,V=0,H=0,ee=!1,Y=!1,Z=[],K={data:[],errors:[],meta:{}};function X(ae){return D.skipEmptyLines==="greedy"?ae.join("").trim()==="":ae.length===1&&ae[0].length===0}function ne(){if(K&&$&&(te("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),$=!1),D.skipEmptyLines&&(K.data=K.data.filter(function(me){return!X(me)})),G()){let me=function(fe,ge){R(D.transformHeader)&&(fe=D.transformHeader(fe,ge)),Z.push(fe)};if(K)if(Array.isArray(K.data[0])){for(var ae=0;G()&&ae<K.data.length;ae++)K.data[ae].forEach(me);K.data.splice(0,1)}else K.data.forEach(me)}function pe(me,fe){for(var ge=D.header?{}:[],be=0;be<me.length;be++){var oe=be,Le=me[be],Le=((Ve,Ze)=>(xe=>(D.dynamicTypingFunction&&D.dynamicTyping[xe]===void 0&&(D.dynamicTyping[xe]=D.dynamicTypingFunction(xe)),(D.dynamicTyping[xe]||D.dynamicTyping)===!0))(Ve)?Ze==="true"||Ze==="TRUE"||Ze!=="false"&&Ze!=="FALSE"&&((xe=>{if(J.test(xe)&&(xe=parseFloat(xe),U<xe&&xe<q))return 1})(Ze)?parseFloat(Ze):O.test(Ze)?new Date(Ze):Ze===""?null:Ze):Ze)(oe=D.header?be>=Z.length?"__parsed_extra":Z[be]:oe,Le=D.transform?D.transform(Le,oe):Le);oe==="__parsed_extra"?(ge[oe]=ge[oe]||[],ge[oe].push(Le)):ge[oe]=Le}return D.header&&(be>Z.length?te("FieldMismatch","TooManyFields","Too many fields: expected "+Z.length+" fields but parsed "+be,H+fe):be<Z.length&&te("FieldMismatch","TooFewFields","Too few fields: expected "+Z.length+" fields but parsed "+be,H+fe)),ge}var ye;K&&(D.header||D.dynamicTyping||D.transform)&&(ye=1,!K.data.length||Array.isArray(K.data[0])?(K.data=K.data.map(pe),ye=K.data.length):K.data=pe(K.data,0),D.header&&K.meta&&(K.meta.fields=Z),H+=ye)}function G(){return D.header&&Z.length===0}function te(ae,pe,ye,me){ae={type:ae,code:pe,message:ye},me!==void 0&&(ae.row=me),K.errors.push(ae)}R(D.step)&&(B=D.step,D.step=function(ae){K=ae,G()?ne():(ne(),K.data.length!==0&&(V+=ae.data.length,D.preview&&V>D.preview?L.abort():(K.data=K.data[0],B(K,z))))}),this.parse=function(ae,pe,ye){var me=D.quoteChar||'"',me=(D.newline||(D.newline=this.guessLineEndings(ae,me)),$=!1,D.delimiter?R(D.delimiter)&&(D.delimiter=D.delimiter(ae),K.meta.delimiter=D.delimiter):((me=((fe,ge,be,oe,Le)=>{var Ve,Ze,xe,ht;Le=Le||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var Fe=0;Fe<Le.length;Fe++){for(var et,de=Le[Fe],re=0,Ce=0,ke=0,De=(xe=void 0,new w({comments:oe,delimiter:de,newline:ge,preview:10}).parse(fe)),je=0;je<De.data.length;je++)be&&X(De.data[je])?ke++:(et=De.data[je].length,Ce+=et,xe===void 0?xe=et:0<et&&(re+=Math.abs(et-xe),xe=et));0<De.data.length&&(Ce/=De.data.length-ke),(Ze===void 0||re<=Ze)&&(ht===void 0||ht<Ce)&&1.99<Ce&&(Ze=re,Ve=de,ht=Ce)}return{successful:!!(D.delimiter=Ve),bestDelimiter:Ve}})(ae,D.newline,D.skipEmptyLines,D.comments,D.delimitersToGuess)).successful?D.delimiter=me.bestDelimiter:($=!0,D.delimiter=u.DefaultDelimiter),K.meta.delimiter=D.delimiter),N(D));return D.preview&&D.header&&me.preview++,k=ae,L=new w(me),K=L.parse(k,pe,ye),ne(),ee?{meta:{paused:!0}}:K||{meta:{paused:!1}}},this.paused=function(){return ee},this.pause=function(){ee=!0,L.abort(),k=R(D.chunk)?"":k.substring(L.getCharIndex())},this.resume=function(){z.streamer._halted?(ee=!1,z.streamer.parseChunk(k,!0)):setTimeout(z.resume,3)},this.aborted=function(){return Y},this.abort=function(){Y=!0,L.abort(),K.meta.aborted=!0,R(D.complete)&&D.complete(K),k=""},this.guessLineEndings=function(fe,me){fe=fe.substring(0,1048576);var me=new RegExp(_(me)+"([^]*?)"+_(me),"gm"),ye=(fe=fe.replace(me,"")).split("\r"),me=fe.split(`
`),fe=1<me.length&&me[0].length<ye[0].length;if(ye.length===1||fe)return`
`;for(var ge=0,be=0;be<ye.length;be++)ye[be][0]===`
`&&ge++;return ge>=ye.length/2?`\r
`:"\r"}}function _(D){return D.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function w(D){var k=(D=D||{}).delimiter,L=D.newline,$=D.comments,B=D.step,q=D.preview,U=D.fastMode,J=null,O=!1,z=D.quoteChar==null?'"':D.quoteChar,V=z;if(D.escapeChar!==void 0&&(V=D.escapeChar),(typeof k!="string"||-1<u.BAD_DELIMITERS.indexOf(k))&&(k=","),$===k)throw new Error("Comment character same as delimiter");$===!0?$="#":(typeof $!="string"||-1<u.BAD_DELIMITERS.indexOf($))&&($=!1),L!==`
`&&L!=="\r"&&L!==`\r
`&&(L=`
`);var H=0,ee=!1;this.parse=function(Y,Z,K){if(typeof Y!="string")throw new Error("Input must be a string");var X=Y.length,ne=k.length,G=L.length,te=$.length,ae=R(B),pe=[],ye=[],me=[],fe=H=0;if(!Y)return re();if(U||U!==!1&&Y.indexOf(z)===-1){for(var ge=Y.split(L),be=0;be<ge.length;be++){if(me=ge[be],H+=me.length,be!==ge.length-1)H+=L.length;else if(K)return re();if(!$||me.substring(0,te)!==$){if(ae){if(pe=[],ht(me.split(k)),Ce(),ee)return re()}else ht(me.split(k));if(q&&q<=be)return pe=pe.slice(0,q),re(!0)}}return re()}for(var oe=Y.indexOf(k,H),Le=Y.indexOf(L,H),Ve=new RegExp(_(V)+_(z),"g"),Ze=Y.indexOf(z,H);;)if(Y[H]===z)for(Ze=H,H++;;){if((Ze=Y.indexOf(z,Ze+1))===-1)return K||ye.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:pe.length,index:H}),et();if(Ze===X-1)return et(Y.substring(H,Ze).replace(Ve,z));if(z===V&&Y[Ze+1]===V)Ze++;else if(z===V||Ze===0||Y[Ze-1]!==V){oe!==-1&&oe<Ze+1&&(oe=Y.indexOf(k,Ze+1));var xe=Fe((Le=Le!==-1&&Le<Ze+1?Y.indexOf(L,Ze+1):Le)===-1?oe:Math.min(oe,Le));if(Y.substr(Ze+1+xe,ne)===k){me.push(Y.substring(H,Ze).replace(Ve,z)),Y[H=Ze+1+xe+ne]!==z&&(Ze=Y.indexOf(z,H)),oe=Y.indexOf(k,H),Le=Y.indexOf(L,H);break}if(xe=Fe(Le),Y.substring(Ze+1+xe,Ze+1+xe+G)===L){if(me.push(Y.substring(H,Ze).replace(Ve,z)),de(Ze+1+xe+G),oe=Y.indexOf(k,H),Ze=Y.indexOf(z,H),ae&&(Ce(),ee))return re();if(q&&pe.length>=q)return re(!0);break}ye.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:pe.length,index:H}),Ze++}}else if($&&me.length===0&&Y.substring(H,H+te)===$){if(Le===-1)return re();H=Le+G,Le=Y.indexOf(L,H),oe=Y.indexOf(k,H)}else if(oe!==-1&&(oe<Le||Le===-1))me.push(Y.substring(H,oe)),H=oe+ne,oe=Y.indexOf(k,H);else{if(Le===-1)break;if(me.push(Y.substring(H,Le)),de(Le+G),ae&&(Ce(),ee))return re();if(q&&pe.length>=q)return re(!0)}return et();function ht(ke){pe.push(ke),fe=H}function Fe(ke){var De=0;return De=ke!==-1&&(ke=Y.substring(Ze+1,ke))&&ke.trim()===""?ke.length:De}function et(ke){return K||(ke===void 0&&(ke=Y.substring(H)),me.push(ke),H=X,ht(me),ae&&Ce()),re()}function de(ke){H=ke,ht(me),me=[],Le=Y.indexOf(L,H)}function re(ke){if(D.header&&!Z&&pe.length&&!O){var De=pe[0],je=Object.create(null),mt=new Set(De);let rt=!1;for(let bt=0;bt<De.length;bt++){let dt=De[bt];if(je[dt=R(D.transformHeader)?D.transformHeader(dt,bt):dt]){let Je,ot=je[dt];for(;Je=dt+"_"+ot,ot++,mt.has(Je););mt.add(Je),De[bt]=Je,je[dt]++,rt=!0,(J=J===null?{}:J)[Je]=dt}else je[dt]=1,De[bt]=dt;mt.add(dt)}rt&&console.warn("Duplicate headers found and renamed."),O=!0}return{data:pe,errors:ye,meta:{delimiter:k,linebreak:L,aborted:ee,truncated:!!ke,cursor:fe+(Z||0),renamedHeaders:J}}}function Ce(){B(re()),pe=[],ye=[]}},this.abort=function(){ee=!0},this.getCharIndex=function(){return H}}function S(D){var k=D.data,L=o[k.workerId],$=!1;if(k.error)L.userError(k.error,k.file);else if(k.results&&k.results.data){var B={abort:function(){$=!0,E(k.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:A,resume:A};if(R(L.userStep)){for(var q=0;q<k.results.data.length&&(L.userStep({data:k.results.data[q],errors:k.results.errors,meta:k.results.meta},B),!$);q++);delete k.results}else R(L.userChunk)&&(L.userChunk(k.results,B,k.file),delete k.results)}k.finished&&!$&&E(k.workerId,k.results)}function E(D,k){var L=o[D];R(L.userComplete)&&L.userComplete(k),L.terminate(),delete o[D]}function A(){throw new Error("Not implemented.")}function N(D){if(typeof D!="object"||D===null)return D;var k,L=Array.isArray(D)?[]:{};for(k in D)L[k]=N(D[k]);return L}function P(D,k){return function(){D.apply(k,arguments)}}function R(D){return typeof D=="function"}return u.parse=function(D,k){var L=(k=k||{}).dynamicTyping||!1;if(R(L)&&(k.dynamicTypingFunction=L,L={}),k.dynamicTyping=L,k.transform=!!R(k.transform)&&k.transform,!k.worker||!u.WORKERS_SUPPORTED)return L=null,u.NODE_STREAM_INPUT,typeof D=="string"?(D=($=>$.charCodeAt(0)!==65279?$:$.slice(1))(D),L=new(k.download?f:g)(k)):D.readable===!0&&R(D.read)&&R(D.on)?L=new v(k):(r.File&&D instanceof File||D instanceof Object)&&(L=new m(k)),L.stream(D);(L=(()=>{var $;return!!u.WORKERS_SUPPORTED&&($=(()=>{var B=r.URL||r.webkitURL||null,q=n.toString();return u.BLOB_URL||(u.BLOB_URL=B.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",q,")();"],{type:"text/javascript"})))})(),($=new r.Worker($)).onmessage=S,$.id=c++,o[$.id]=$)})()).userStep=k.step,L.userChunk=k.chunk,L.userComplete=k.complete,L.userError=k.error,k.step=R(k.step),k.chunk=R(k.chunk),k.complete=R(k.complete),k.error=R(k.error),delete k.worker,L.postMessage({input:D,config:k,workerId:L.id})},u.unparse=function(D,k){var L=!1,$=!0,B=",",q=`\r
`,U='"',J=U+U,O=!1,z=null,V=!1,H=((()=>{if(typeof k=="object"){if(typeof k.delimiter!="string"||u.BAD_DELIMITERS.filter(function(Z){return k.delimiter.indexOf(Z)!==-1}).length||(B=k.delimiter),typeof k.quotes!="boolean"&&typeof k.quotes!="function"&&!Array.isArray(k.quotes)||(L=k.quotes),typeof k.skipEmptyLines!="boolean"&&typeof k.skipEmptyLines!="string"||(O=k.skipEmptyLines),typeof k.newline=="string"&&(q=k.newline),typeof k.quoteChar=="string"&&(U=k.quoteChar),typeof k.header=="boolean"&&($=k.header),Array.isArray(k.columns)){if(k.columns.length===0)throw new Error("Option columns is empty");z=k.columns}k.escapeChar!==void 0&&(J=k.escapeChar+U),k.escapeFormulae instanceof RegExp?V=k.escapeFormulae:typeof k.escapeFormulae=="boolean"&&k.escapeFormulae&&(V=/^[=+\-@\t\r].*$/)}})(),new RegExp(_(U),"g"));if(typeof D=="string"&&(D=JSON.parse(D)),Array.isArray(D)){if(!D.length||Array.isArray(D[0]))return ee(null,D,O);if(typeof D[0]=="object")return ee(z||Object.keys(D[0]),D,O)}else if(typeof D=="object")return typeof D.data=="string"&&(D.data=JSON.parse(D.data)),Array.isArray(D.data)&&(D.fields||(D.fields=D.meta&&D.meta.fields||z),D.fields||(D.fields=Array.isArray(D.data[0])?D.fields:typeof D.data[0]=="object"?Object.keys(D.data[0]):[]),Array.isArray(D.data[0])||typeof D.data[0]=="object"||(D.data=[D.data])),ee(D.fields||[],D.data||[],O);throw new Error("Unable to serialize unrecognized input");function ee(Z,K,X){var ne="",G=(typeof Z=="string"&&(Z=JSON.parse(Z)),typeof K=="string"&&(K=JSON.parse(K)),Array.isArray(Z)&&0<Z.length),te=!Array.isArray(K[0]);if(G&&$){for(var ae=0;ae<Z.length;ae++)0<ae&&(ne+=B),ne+=Y(Z[ae],ae);0<K.length&&(ne+=q)}for(var pe=0;pe<K.length;pe++){var ye=(G?Z:K[pe]).length,me=!1,fe=G?Object.keys(K[pe]).length===0:K[pe].length===0;if(X&&!G&&(me=X==="greedy"?K[pe].join("").trim()==="":K[pe].length===1&&K[pe][0].length===0),X==="greedy"&&G){for(var ge=[],be=0;be<ye;be++){var oe=te?Z[be]:be;ge.push(K[pe][oe])}me=ge.join("").trim()===""}if(!me){for(var Le=0;Le<ye;Le++){0<Le&&!fe&&(ne+=B);var Ve=G&&te?Z[Le]:Le;ne+=Y(K[pe][Ve],Le)}pe<K.length-1&&(!X||0<ye&&!fe)&&(ne+=q)}}return ne}function Y(Z,K){var X,ne;return Z==null?"":Z.constructor===Date?JSON.stringify(Z).slice(1,25):(ne=!1,V&&typeof Z=="string"&&V.test(Z)&&(Z="'"+Z,ne=!0),X=Z.toString().replace(H,J),(ne=ne||L===!0||typeof L=="function"&&L(Z,K)||Array.isArray(L)&&L[K]||((G,te)=>{for(var ae=0;ae<te.length;ae++)if(-1<G.indexOf(te[ae]))return!0;return!1})(X,u.BAD_DELIMITERS)||-1<X.indexOf(B)||X.charAt(0)===" "||X.charAt(X.length-1)===" ")?U+X+U:X)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!a&&!!r.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=w,u.ParserHandle=x,u.NetworkStreamer=f,u.FileStreamer=m,u.StringStreamer=g,u.ReadableStreamStreamer=v,r.jQuery&&((i=r.jQuery).fn.parse=function(D){var k=D.config||{},L=[];return this.each(function(q){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var U=0;U<this.files.length;U++)L.push({file:this.files[U],inputElem:this,instanceConfig:i.extend({},k)})}),$(),this;function $(){if(L.length===0)R(D.complete)&&D.complete();else{var q,U,J,O,z=L[0];if(R(D.before)){var V=D.before(z.file,z.inputElem);if(typeof V=="object"){if(V.action==="abort")return q="AbortError",U=z.file,J=z.inputElem,O=V.reason,void(R(D.error)&&D.error({name:q},U,J,O));if(V.action==="skip")return void B();typeof V.config=="object"&&(z.instanceConfig=i.extend(z.instanceConfig,V.config))}else if(V==="skip")return void B()}var H=z.instanceConfig.complete;z.instanceConfig.complete=function(ee){R(H)&&H(ee,z.file,z.inputElem),B()},u.parse(z.file,z.instanceConfig)}}function B(){L.splice(0,1),$()}}),s&&(r.onmessage=function(D){D=D.data,u.WORKER_ID===void 0&&D&&(u.WORKER_ID=D.workerId),typeof D.input=="string"?r.postMessage({workerId:u.WORKER_ID,results:u.parse(D.input,D.config),finished:!0}):(r.File&&D.input instanceof File||D.input instanceof Object)&&(D=u.parse(D.input,D.config))&&r.postMessage({workerId:u.WORKER_ID,results:D,finished:!0})}),(f.prototype=Object.create(h.prototype)).constructor=f,(m.prototype=Object.create(h.prototype)).constructor=m,(g.prototype=Object.create(g.prototype)).constructor=g,(v.prototype=Object.create(h.prototype)).constructor=v,u})})(w3)),w3.exports}var APe=MPe();const jO=vg(APe),PPe=[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"boolean",label:"Boolean"},{value:"date",label:"Date"},{value:"datetime",label:"DateTime"},{value:"email",label:"Email"},{value:"url",label:"URL"},{value:"image",label:"Image"},{value:"array",label:"Array"},{value:"object",label:"Object"}];function NPe({dataTable:t,onClose:e,activeTab:n}){const r=vr(w=>w.updateDataTable),[i,a]=T.useState(new Set),s=T.useCallback(async w=>{try{await r(t.id,{schema:w})}catch(S){console.error("  :",S)}},[t.id,r]),o=T.useCallback(()=>{const w={key:`field_${Date.now()}`,type:"string",label:"New Field",required:!1};s([...t.schema,w])},[t.schema,s]),c=T.useCallback(w=>{const S=t.schema.filter(E=>E.key!==w);s(S)},[t.schema,s]),u=T.useCallback((w,S)=>{const E=t.schema.map(A=>A.key===w?{...A,...S}:A);s(E)},[t.schema,s]),h=T.useCallback(async w=>{try{await r(t.id,{mockData:w})}catch(S){console.error("Mock   :",S)}},[t.id,r]),f=T.useCallback(()=>{const w={},S=t.mockData.length+1;t.schema.forEach(E=>{E.key==="id"?E.type==="number"?w[E.key]=S:w[E.key]=`row_${S}`:w[E.key]=E.defaultValue??YY(E.type)}),h([...t.mockData,w])},[t.schema,t.mockData,h]),m=T.useCallback(w=>{const S=t.mockData.filter((E,A)=>A!==w);h(S)},[t.mockData,h]),g=T.useCallback((w,S,E)=>{const A=t.mockData.map((N,P)=>P===w?{...N,[S]:E}:N);h(A)},[t.mockData,h]),v=T.useCallback(w=>{h(w)},[h]),x=T.useCallback(async w=>{try{await r(t.id,{useMockData:w})}catch(S){console.error("useMockData  :",S)}},[t.id,r]),_=T.useCallback(async w=>{try{await r(t.id,{name:w})}catch(S){console.error("  :",S)}},[t.id,r]);return l.jsxs(l.Fragment,{children:[n==="schema"&&l.jsx(kPe,{schema:t.schema,expandedFields:i,setExpandedFields:a,onAddField:o,onDeleteField:c,onUpdateField:u}),n==="data"&&l.jsx(RPe,{schema:t.schema,mockData:t.mockData,onAddRow:f,onDeleteRow:m,onUpdateCell:g,onImportCSV:v}),n==="settings"&&l.jsx(jPe,{name:t.name,useMockData:t.useMockData,onNameChange:_,onUseMockDataChange:x})]})}function DPe({field:t,onUpdateField:e,onDeleteField:n}){const[r,i]=T.useState(t.key),[a,s]=T.useState(t.label||"");return l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("input",{type:"text",className:"cell-input",value:r,onChange:o=>i(o.target.value),onBlur:()=>{r!==t.key&&e(t.key,{key:r})}})}),l.jsx("td",{children:l.jsx("select",{className:"cell-select",value:t.type,onChange:o=>e(t.key,{type:o.target.value}),children:PPe.map(o=>l.jsx("option",{value:o.value,children:o.label},o.value))})}),l.jsx("td",{children:l.jsx("input",{type:"text",className:"cell-input",value:a,onChange:o=>s(o.target.value),onBlur:()=>e(t.key,{label:a}),placeholder:"Label"})}),l.jsx("td",{className:"cell-center",children:l.jsx("input",{type:"checkbox",checked:t.required||!1,onChange:o=>e(t.key,{required:o.target.checked})})}),l.jsx("td",{children:l.jsx("button",{type:"button",className:"delete-row-btn",onClick:()=>n(t.key),children:l.jsx(Ws,{size:12})})})]})}function kPe({schema:t,onAddField:e,onDeleteField:n,onUpdateField:r}){return l.jsxs("div",{className:"section",children:[l.jsx("div",{className:"section-content",children:l.jsx("div",{className:"data-table-wrapper",children:l.jsxs("table",{className:"data-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Key"}),l.jsx("th",{children:"Type"}),l.jsx("th",{children:"Label"}),l.jsx("th",{children:"Req"}),l.jsx("th",{})]})}),l.jsx("tbody",{children:t.map(i=>l.jsx(DPe,{field:i,onUpdateField:r,onDeleteField:n},i.key))})]})})}),l.jsxs("button",{type:"button",className:"add-field-btn",onClick:e,children:[l.jsx(No,{size:14}),"Add Column"]})]})}function RPe({schema:t,mockData:e,onAddRow:n,onDeleteRow:r,onUpdateCell:i,onImportCSV:a}){const[s,o]=T.useState(""),c=T.useRef(null),u=T.useMemo(()=>{if(!s.trim())return e.map((g,v)=>({row:g,originalIndex:v}));const m=s.toLowerCase();return e.map((g,v)=>({row:g,originalIndex:v})).filter(({row:g})=>t.some(v=>{const x=g[v.key];return x==null?!1:String(x).toLowerCase().includes(m)}))},[e,t,s]),h=T.useCallback(m=>{const g=m.target.files?.[0];g&&jO.parse(g,{header:!0,skipEmptyLines:!0,complete:v=>{const _=v.data.map((w,S)=>{const E={};return t.forEach(A=>{const N=w[A.key];E[A.key]=IPe(N,A.type,S+1)}),E});a(_),c.current&&(c.current.value="")},error:v=>{console.error("CSV  :",v)}})},[t,a]),f=T.useCallback(()=>{if(e.length===0)return;const m=jO.unparse(e,{columns:t.map(_=>_.key)}),g=new Blob([m],{type:"text/csv;charset=utf-8;"}),v=URL.createObjectURL(g),x=document.createElement("a");x.href=v,x.download="data.csv",x.click(),URL.revokeObjectURL(v)},[e,t]);return t.length===0?l.jsx("div",{className:"data-empty",children:"  ."}):l.jsxs("div",{className:"section",children:[l.jsxs("div",{className:"section-content",children:[l.jsxs("div",{className:"data-toolbar",children:[l.jsxs("div",{className:"filter-input-wrapper",children:[l.jsx(al,{size:14,className:"filter-icon"}),l.jsx("input",{type:"text",className:"filter-input",placeholder:"Filter rows...",value:s,onChange:m=>o(m.target.value)}),s&&l.jsx("button",{type:"button",className:"filter-clear-btn",onClick:()=>o(""),children:l.jsx(ol,{size:12})})]}),l.jsxs("div",{className:"toolbar-actions",children:[l.jsx("input",{ref:c,type:"file",accept:".csv",onChange:h,style:{display:"none"}}),l.jsxs("button",{type:"button",className:"toolbar-btn",onClick:()=>c.current?.click(),title:"Import CSV",children:[l.jsx(Yae,{size:14}),"Import"]}),l.jsxs("button",{type:"button",className:"toolbar-btn",onClick:f,disabled:e.length===0,title:"Export CSV",children:[l.jsx($2,{size:14}),"Export"]})]})]}),s&&l.jsxs("div",{className:"filter-result-info",children:[u.length," / ",e.length," rows"]}),l.jsx("div",{className:"data-table-wrapper",children:l.jsxs("table",{className:"data-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"row-index",children:"#"}),t.map(m=>l.jsx("th",{children:m.key},m.key)),l.jsx("th",{})]})}),l.jsx("tbody",{children:u.map(({row:m,originalIndex:g})=>l.jsxs("tr",{children:[l.jsx("td",{className:"row-index",children:g+1}),t.map(v=>l.jsx("td",{children:l.jsx($Pe,{fieldType:v.type,value:m[v.key],onChange:x=>i(g,v.key,x)},`${g}-${v.key}-${JSON.stringify(m[v.key])}`)},v.key)),l.jsx("td",{children:l.jsx("button",{type:"button",className:"delete-row-btn",onClick:()=>r(g),children:l.jsx(Ws,{size:12})})})]},g))})]})})]}),l.jsxs("button",{type:"button",className:"add-row-btn",onClick:n,children:[l.jsx(No,{size:14}),"Add Row"]})]})}function IPe(t,e,n){if(t==null||t==="")return YY(e);const r=String(t);switch(e){case"number":{const i=Number(r);return isNaN(i)?0:i}case"boolean":return r.toLowerCase()==="true"||r==="1";case"date":try{const i=new Date(r);return isNaN(i.getTime())?new Date().toISOString().split("T")[0]:i.toISOString().split("T")[0]}catch{return new Date().toISOString().split("T")[0]}case"datetime":try{const i=new Date(r);return isNaN(i.getTime())?new Date().toISOString():i.toISOString()}catch{return new Date().toISOString()}case"array":try{const i=JSON.parse(r);return Array.isArray(i)?i:[r]}catch{return r.split(",").map(i=>i.trim())}case"object":try{return JSON.parse(r)}catch{return{}}default:return r===""||r==="undefined"?`row_${n}`:r}}function $Pe({fieldType:t,value:e,onChange:n}){const[r,i]=T.useState(String(e||"")),a=()=>{n(t==="number"?r===""?0:Number(r):r)};switch(t){case"boolean":return l.jsx("input",{type:"checkbox",checked:!!e,onChange:s=>n(s.target.checked)});case"number":return l.jsx("input",{type:"number",className:"cell-input",value:r,onChange:s=>i(s.target.value),onBlur:a});case"date":return l.jsx("input",{type:"date",className:"cell-input",value:r,onChange:s=>i(s.target.value),onBlur:a});case"datetime":return l.jsx("input",{type:"datetime-local",className:"cell-input",value:r,onChange:s=>i(s.target.value),onBlur:a});default:return l.jsx("input",{type:"text",className:"cell-input",value:r,onChange:s=>i(s.target.value),onBlur:a})}}function jPe({name:t,useMockData:e,onNameChange:n,onUseMockDataChange:r}){const[i,a]=T.useState(t);return l.jsxs("div",{className:"settings-editor",children:[l.jsxs("div",{className:"settings-field",children:[l.jsx("label",{className:"settings-label",children:" "}),l.jsx("input",{type:"text",className:"settings-input",value:i,onChange:s=>a(s.target.value),onBlur:()=>{i!==t&&n(i)}})]}),l.jsx(Jo,{label:"Use Table Data",isSelected:e,onChange:r}),l.jsx("p",{className:"settings-description",children:e?"Table  . API    Table  .":" API   ."})]})}function YY(t){switch(t){case"string":case"email":case"url":case"image":return"";case"number":return 0;case"boolean":return!1;case"date":case"datetime":return new Date().toISOString().split("T")[0];case"array":return[];case"object":return{};default:return""}}const LPe=[{id:"users-auth",name:"Users & Auth",icon:"Users",description:", ,  "},{id:"organization",name:"Organization",icon:"Building2",description:", ,  "},{id:"ecommerce",name:"E-commerce",icon:"ShoppingCart",description:", ,  "},{id:"manufacturing",name:"Manufacturing",icon:"Factory",description:", , BOM "},{id:"system",name:"System",icon:"Settings",description:" ,  "}],Xr=t=>t[Math.floor(Math.random()*t.length)],$r=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,yr=(t="")=>{const e=$r(8,16),n="abcdefghijklmnopqrstuvwxyz0123456789";let r=t;for(let i=t.length;i<e;i++)r+=n.charAt(Math.floor(Math.random()*n.length));return r},Uu=t=>{const e=new Date,n=new Date;n.setFullYear(e.getFullYear()-t);const r=$r(n.getTime(),e.getTime());return new Date(r)},Wl=t=>t.toISOString(),u$=["","","","","","","","","",""],OPe=[" "," "," "," ","DevOps ","UI/UX "," "," ","QA "," "],FPe=["","","","","","","","","",""],BPe=["","","","","","","","","",""],zPe=["IT ","","","","","",""],VC=["","","","","","","",""],UPe=["","","",""],VPe=["","","","",""],HPe=["","","",""],D1=["","","","","","",""],GPe=["","","","",""],WPe=t=>Array.from({length:t},(e,n)=>({id:yr("usr_"),num:n+1,name:`${Xr(FPe)}${Xr(BPe)}`,email:`user${n+1}@${Xr(["company.com","example.org","mail.co.kr"])}`,phone:`010-${$r(1e3,9999)}-${$r(1e3,9999)}`,company:Xr(u$),role:Xr(OPe),status:Xr(UPe),jobLevel:Xr(VPe),createdAt:Wl(Uu(2))})),qPe=t=>Array.from({length:t},(e,n)=>({id:yr("role_"),name:["","","","",""][n%5],description:["  ","  "," "," "," "][n%5],scope:Xr(["global","project"]),permissionIds:Array.from({length:$r(2,5)},()=>yr("perm_"))})),KPe=t=>Array.from({length:t},(e,n)=>({id:yr("perm_"),name:[" "," "," "," "," "][n%5],description:["  "," //"," "," ","  "][n%5],category:Xr(["user","project","organization","security","billing"])})),XPe=t=>Array.from({length:t},(e,n)=>({id:yr("inv_"),email:`invited${n+1}@example.com`,roleId:yr("role_"),inviterUserId:yr("usr_"),status:Xr(["pending","accepted","expired","revoked"]),expiresAt:Wl(new Date(Date.now()+$r(1,30)*24*60*60*1e3)),createdAt:Wl(Uu(1))})),YPe=t=>Array.from({length:t},(e,n)=>({id:yr("org_"),name:Xr(u$),industry:Xr(zPe),domain:`company${n+1}.com`,plan:Xr(["","",""]),createdAt:Wl(Uu(3))})),ZPe=t=>Array.from({length:t},(e,n)=>({id:yr("dept_"),organizationId:yr("org_"),name:VC[n%VC.length],description:`${VC[n%VC.length]} .`,managerUserId:yr("usr_")})),JPe=t=>Array.from({length:t},(e,n)=>({id:yr("proj_"),organizationId:yr("org_"),departmentId:yr("dept_"),name:` ${n+1}`,status:Xr(HPe),startDate:Wl(Uu(1)),endDate:Wl(new Date(Date.now()+$r(30,365)*24*60*60*1e3)),budget:$r(1e3,5e4)*1e4,clientName:Xr(u$),visibility:Xr(["private","internal","public"])})),QPe=t=>Array.from({length:t},(e,n)=>({id:yr("prod_"),name:` ${n+1}`,price:$r(1e3,1e5),stock:$r(0,500),category:Xr(D1),description:` ${n+1}  .`,imageUrl:`https://picsum.photos/200/200?random=${n}`,isActive:Math.random()>.2,createdAt:Wl(Uu(2))})),eNe=t=>Array.from({length:t},(e,n)=>({id:yr("cat_"),name:D1[n%D1.length],parentId:n>3?yr("cat_"):null,description:`${D1[n%D1.length]} `,order:n+1,isActive:!0})),tNe=t=>Array.from({length:t},()=>({id:yr("ord_"),userId:yr("usr_"),items:Array.from({length:$r(1,5)},()=>({productId:yr("prod_"),quantity:$r(1,10),price:$r(1e3,5e4)})),total:$r(1e4,5e5),status:Xr(GPe),shippingAddress:` ${Xr(["","","",""])}`,createdAt:Wl(Uu(1))})),nNe=t=>Array.from({length:t},(e,n)=>({id:yr("eng_"),projectId:yr("proj_"),name:` ${n+1}`,code:`ENG-${String(n+1).padStart(4,"0")}`,version:`v${$r(1,5)}.${$r(0,9)}`,status:Xr(["","","","",""]),manufacturer:Xr(["","LG","SDI","",""]),specifications:{power:`${$r(50,500)}kW`,weight:`${$r(100,1e3)}kg`,dimensions:`${$r(50,200)}x${$r(50,200)}x${$r(50,200)}cm`},createdAt:Wl(Uu(2))})),rNe=t=>Array.from({length:t},(e,n)=>({id:yr("comp_"),engineId:yr("eng_"),parentId:n>5?yr("comp_"):null,name:` ${n+1}`,code:`COMP-${String(n+1).padStart(4,"0")}`,type:Xr(["assembly","part"]),level:$r(0,5),orderIndex:n+1,quantity:$r(1,100),unit:Xr(["EA","SET","M","KG","L"]),supplier:Xr(["","","","",""]),cost:$r(100,1e4),leadTime:$r(1,30),status:Xr(["","","",""])})),iNe=t=>Array.from({length:t},(e,n)=>({id:yr("log_"),actorUserId:yr("usr_"),organizationId:yr("org_"),entityType:Xr(["user","project","organization","department"]),entityId:yr(),action:Xr(["","",""," ",""]),description:` ${n+1}  `,timestamp:Wl(Uu(1)),ipAddress:`${$r(1,255)}.${$r(1,255)}.${$r(1,255)}.${$r(1,255)}`})),aNe=t=>Array.from({length:t},()=>({id:yr("mem_"),projectId:yr("proj_"),userId:yr("usr_"),roleId:yr("role_"),allocation:$r(10,100),billable:Math.random()>.3,joinedAt:Wl(Uu(2)),lastActiveAt:Wl(Uu(.5))})),sNe={users:{id:"users",name:"Users",description:"  ",category:"users-auth",icon:"User",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"num",type:"number",label:""},{key:"name",type:"string",label:"",required:!0},{key:"email",type:"email",label:"",required:!0},{key:"phone",type:"string",label:""},{key:"company",type:"string",label:""},{key:"role",type:"string",label:""},{key:"status",type:"string",label:""},{key:"jobLevel",type:"string",label:""},{key:"createdAt",type:"datetime",label:""}],generateSampleData:WPe,defaultSampleCount:10},roles:{id:"roles",name:"Roles",description:"    ",category:"users-auth",icon:"Key",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"name",type:"string",label:"",required:!0},{key:"description",type:"string",label:""},{key:"scope",type:"string",label:""},{key:"permissionIds",type:"array",label:" "}],generateSampleData:qPe,defaultSampleCount:5},permissions:{id:"permissions",name:"Permissions",description:"  ",category:"users-auth",icon:"Lock",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"name",type:"string",label:"",required:!0},{key:"description",type:"string",label:""},{key:"category",type:"string",label:""}],generateSampleData:KPe,defaultSampleCount:10},invitations:{id:"invitations",name:"Invitations",description:"  ",category:"users-auth",icon:"Mail",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"email",type:"email",label:"",required:!0},{key:"roleId",type:"string",label:" ID"},{key:"inviterUserId",type:"string",label:" ID"},{key:"status",type:"string",label:""},{key:"expiresAt",type:"datetime",label:""},{key:"createdAt",type:"datetime",label:""}],generateSampleData:XPe,defaultSampleCount:5},organizations:{id:"organizations",name:"Organizations",description:"/ ",category:"organization",icon:"Building2",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"name",type:"string",label:"",required:!0},{key:"industry",type:"string",label:""},{key:"domain",type:"string",label:""},{key:"plan",type:"string",label:""},{key:"createdAt",type:"datetime",label:""}],generateSampleData:YPe,defaultSampleCount:5},departments:{id:"departments",name:"Departments",description:" ",category:"organization",icon:"Layers",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"organizationId",type:"string",label:" ID"},{key:"name",type:"string",label:"",required:!0},{key:"description",type:"string",label:""},{key:"managerUserId",type:"string",label:" ID"}],generateSampleData:ZPe,defaultSampleCount:8},projects:{id:"projects",name:"Projects",description:" ",category:"organization",icon:"Folder",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"organizationId",type:"string",label:" ID"},{key:"departmentId",type:"string",label:" ID"},{key:"name",type:"string",label:"",required:!0},{key:"status",type:"string",label:""},{key:"startDate",type:"date",label:""},{key:"endDate",type:"date",label:""},{key:"budget",type:"number",label:""},{key:"clientName",type:"string",label:""},{key:"visibility",type:"string",label:""}],generateSampleData:JPe,defaultSampleCount:10},products:{id:"products",name:"Products",description:" ",category:"ecommerce",icon:"Package",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"name",type:"string",label:"",required:!0},{key:"price",type:"number",label:""},{key:"stock",type:"number",label:""},{key:"category",type:"string",label:""},{key:"description",type:"string",label:""},{key:"imageUrl",type:"url",label:""},{key:"isActive",type:"boolean",label:""},{key:"createdAt",type:"datetime",label:""}],generateSampleData:QPe,defaultSampleCount:20},categories:{id:"categories",name:"Categories",description:" ",category:"ecommerce",icon:"Tag",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"name",type:"string",label:"",required:!0},{key:"parentId",type:"string",label:"  ID"},{key:"description",type:"string",label:""},{key:"order",type:"number",label:""},{key:"isActive",type:"boolean",label:""}],generateSampleData:eNe,defaultSampleCount:10},orders:{id:"orders",name:"Orders",description:" ",category:"ecommerce",icon:"ShoppingCart",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"userId",type:"string",label:" ID"},{key:"items",type:"array",label:" "},{key:"total",type:"number",label:""},{key:"status",type:"string",label:""},{key:"shippingAddress",type:"string",label:""},{key:"createdAt",type:"datetime",label:""}],generateSampleData:tNe,defaultSampleCount:15},engines:{id:"engines",name:"Engines",description:"/ ",category:"manufacturing",icon:"Cpu",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"projectId",type:"string",label:" ID"},{key:"name",type:"string",label:"",required:!0},{key:"code",type:"string",label:""},{key:"version",type:"string",label:""},{key:"status",type:"string",label:""},{key:"manufacturer",type:"string",label:""},{key:"specifications",type:"object",label:""},{key:"createdAt",type:"datetime",label:""}],generateSampleData:nNe,defaultSampleCount:5},components:{id:"components",name:"Components",description:" (BOM) ",category:"manufacturing",icon:"Wrench",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"engineId",type:"string",label:" ID"},{key:"parentId",type:"string",label:"  ID"},{key:"name",type:"string",label:"",required:!0},{key:"code",type:"string",label:" "},{key:"type",type:"string",label:""},{key:"level",type:"number",label:""},{key:"quantity",type:"number",label:""},{key:"unit",type:"string",label:""},{key:"supplier",type:"string",label:""},{key:"cost",type:"number",label:""},{key:"leadTime",type:"number",label:" ()"},{key:"status",type:"string",label:""}],generateSampleData:rNe,defaultSampleCount:20},auditLogs:{id:"auditLogs",name:"Audit Logs",description:"  ",category:"system",icon:"FileText",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"actorUserId",type:"string",label:" ID"},{key:"organizationId",type:"string",label:" ID"},{key:"entityType",type:"string",label:" "},{key:"entityId",type:"string",label:" ID"},{key:"action",type:"string",label:""},{key:"description",type:"string",label:""},{key:"timestamp",type:"datetime",label:""},{key:"ipAddress",type:"string",label:"IP "}],generateSampleData:iNe,defaultSampleCount:20},projectMemberships:{id:"projectMemberships",name:"Project Memberships",description:"  ",category:"system",icon:"Users",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"projectId",type:"string",label:" ID"},{key:"userId",type:"string",label:" ID"},{key:"roleId",type:"string",label:" ID"},{key:"allocation",type:"number",label:" (%)"},{key:"billable",type:"boolean",label:" "},{key:"joinedAt",type:"datetime",label:""},{key:"lastActiveAt",type:"datetime",label:" "}],generateSampleData:aNe,defaultSampleCount:15}};function oNe(t){return Object.values(sNe).filter(e=>e.category===t)}const lNe={User:Jae,Key:jre,Lock:Kre,Mail:Jre,Building2:LB,Layers:n_,Folder:N3,Package:QB,Tag:L2,ShoppingCart:e9,Cpu:wm,Wrench:ase,FileText:SR,Users:PR,Database:ba,Settings:Kl,Factory:GB},cNe={"users-auth":PR,organization:LB,ecommerce:e9,manufacturing:GB,system:Kl};function uNe({projectId:t,onClose:e,mode:n}){const r=vr(S=>S.createDataTable),[i,a]=T.useState("users-auth"),[s,o]=T.useState(null),[c,u]=T.useState(10),[h,f]=T.useState(""),m=T.useMemo(()=>oNe(i),[i]),g=T.useCallback(S=>{a(S),o(null)},[]),v=T.useCallback(S=>{o(S),u(S.defaultSampleCount)},[]),x=T.useCallback(async()=>{try{if(n==="empty"){const S=h.trim()||"New Table";await r({name:S,project_id:t,schema:[],mockData:[],useMockData:!0})}else if(s){const S=s.generateSampleData(c);await r({name:s.name,project_id:t,schema:s.schema,mockData:S,useMockData:!0})}e()}catch(S){console.error("DataTable  :",S)}},[n,h,s,c,t,r,e]),_=(S,E=20)=>{const A=lNe[S];return A?l.jsx(A,{size:E}):l.jsx(ba,{size:E})},w=(S,E=16)=>{const A=cNe[S];return A?l.jsx(A,{size:E}):l.jsx(ba,{size:E})};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"section","data-section-id":"table-creator",children:n==="empty"?l.jsxs("div",{className:"creator-empty-form",children:[l.jsxs("label",{className:"creator-form-label",children:[" ",l.jsx("input",{type:"text",className:"creator-form-input",value:h,onChange:S=>f(S.target.value),placeholder:"New Table"})]}),l.jsx("p",{className:"creator-form-hint",children:"    Schema     ."})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"section-tabs",children:LPe.map(S=>l.jsxs("button",{type:"button",className:`section-tab ${i===S.id?"active":""}`,onClick:()=>g(S.id),title:S.description,children:[w(S.id),l.jsx("span",{children:S.name})]},S.id))}),l.jsx("div",{className:"section-content",children:l.jsx("div",{className:"list-group",role:"list",children:m.map(S=>l.jsxs("button",{type:"button",role:"listitem",className:`list-item preset-card ${s?.id===S.id?"selected":""}`,onClick:()=>v(S),children:[l.jsx("div",{className:"list-item-icon",children:_(S.icon,16)}),l.jsx("div",{className:"list-item-name",children:S.name}),l.jsx("div",{className:"list-item-desc",children:S.description}),l.jsxs("div",{className:"list-item-meta",children:[S.schema.length," fields"]})]},S.id))})})]})}),n==="preset"&&s&&l.jsxs("div",{className:"section","data-section-id":"schema-preview",children:[l.jsx(dw,{icon:_(s.icon,16),title:`${s.name} Schema`,actions:l.jsxs("div",{className:"creator-sample-count",children:[l.jsx("label",{htmlFor:"sample-count",children:"row count"}),l.jsx("input",{id:"sample-count","aria-label":"row count","aria-required":"true","aria-invalid":"false",type:"number",min:"0",max:"100",value:c,onChange:S=>u(Math.max(0,Math.min(100,parseInt(S.target.value)||0)))})]})}),l.jsx("div",{className:"section-content",children:s.schema.map(S=>l.jsxs("div",{className:"creator-schema-field",children:[l.jsxs("span",{className:"schema-field-name",children:[S.key,S.required&&l.jsx("span",{className:"schema-field-required",children:"*"})]}),l.jsx("span",{className:"schema-field-type",children:S.type}),l.jsx("span",{className:"schema-field-label",children:S.label})]},S.key))})]}),l.jsxs("div",{className:"creator-footer",children:[l.jsx(Pt,{className:"react-aria-Button secondary",onPress:e,children:""}),l.jsx(Pt,{className:"react-aria-Button primary",onPress:x,isDisabled:n==="preset"&&!s,children:n==="empty"?"  ":""})]})]})}function dNe({columns:t,onColumnsChange:e,onImport:n,isImporting:r=!1,defaultTableName:i=""}){const[a,s]=T.useState(i),o=t.filter(x=>x.selected).length,c=o===t.length,u=o===0,h=T.useCallback(x=>{const _=t.map(w=>w.key===x?{...w,selected:!w.selected}:w);e(_)},[t,e]),f=T.useCallback(()=>{const x=!c,_=t.map(w=>({...w,selected:x}));e(_)},[t,c,e]),m=T.useCallback(()=>{u||!a.trim()||n(t,a.trim())},[t,a,u,n]),g=x=>x==null?"null":typeof x=="string"?x.length>30?`"${x.slice(0,30)}..."`:`"${x}"`:typeof x=="object"?JSON.stringify(x).slice(0,30)+"...":String(x),v=x=>{switch(x){case"string":return"type-string";case"number":return"type-number";case"boolean":return"type-boolean";case"date":case"datetime":return"type-date";case"email":return"type-email";case"url":case"image":return"type-url";case"array":case"object":return"type-complex";default:return""}};return l.jsxs("div",{className:"column-selector",children:[l.jsxs("div",{className:"column-selector-header",children:[l.jsxs("h4",{className:"column-selector-title",children:[l.jsx(i_,{size:16}),"Detected Columns"]}),l.jsxs("span",{className:"column-selector-count",children:[o," / ",t.length," selected"]})]}),l.jsx("div",{className:"column-selector-actions",children:l.jsxs(Pt,{className:"toggle-all-btn",onPress:f,children:[c?l.jsx(eae,{size:16}):l.jsx(Of,{size:16}),c?"Deselect All":"Select All"]})}),l.jsx("div",{className:"column-list",children:t.map(x=>l.jsxs("div",{className:`column-item ${x.selected?"selected":""}`,onClick:()=>h(x.key),children:[l.jsx("div",{className:"column-checkbox",children:x.selected?l.jsx(FB,{size:14,className:"check-icon"}):l.jsx("div",{className:"empty-checkbox"})}),l.jsxs("div",{className:"column-info",children:[l.jsx("div",{className:"column-key",children:x.key}),l.jsxs("div",{className:"column-meta",children:[l.jsx("span",{className:`type-badge ${v(x.type)}`,children:x.type}),l.jsx("span",{className:"sample-value",children:g(x.sampleValue)})]})]})]},x.key))}),l.jsxs("div",{className:"import-section",children:[l.jsxs("div",{className:"import-input-row",children:[l.jsx("label",{className:"import-label",children:"DataTable Name"}),l.jsx("input",{type:"text",className:"import-input",value:a,onChange:x=>s(x.target.value),placeholder:"e.g., users_api"})]}),l.jsxs(Pt,{className:"import-btn",onPress:m,isDisabled:u||!a.trim()||r,children:[l.jsx($2,{size:14}),r?"Importing...":`Import ${o} Columns`]})]})]})}function hNe(t){return t==null?"string":typeof t=="boolean"?"boolean":typeof t=="number"?"number":Array.isArray(t)?"array":typeof t=="object"?"object":typeof t=="string"?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?"email":/^https?:\/\/.+/.test(t)?"url":/\.(jpg|jpeg|png|gif|webp|svg|bmp)(\?.*)?$/i.test(t)?"image":/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}/.test(t)?"datetime":/^\d{4}-\d{2}-\d{2}$/.test(t)?"date":"string":"string"}function fNe(t){return t.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b\w/g,e=>e.toUpperCase())}function pNe(t){if(!Array.isArray(t)||t.length===0)return[];const e=t[0];if(typeof e!="object"||e===null)return[];const n=[],r=Object.keys(e);for(const i of r){let a="string",s=null;for(let o=0;o<Math.min(t.length,5);o++){const u=t[o][i];if(u!=null&&(s=u,a=hNe(u),a!=="string"))break}n.push({key:i,label:fNe(i),type:a,sampleValue:s,selected:!0})}return n}function mNe(t){return t.filter(e=>e.selected).map(e=>({key:e.key,type:e.type,label:e.label,required:!1}))}function gNe(t,e){return Array.isArray(t)?t.map(n=>{const r={},i=n;for(const a of e)a in i&&(r[a]=i[a]);return r}):[]}const vNe=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"PATCH",label:"PATCH"},{value:"DELETE",label:"DELETE"}];function yNe({endpoint:t,onClose:e,activeTab:n}){const r=vr(D=>D.updateApiEndpoint),i=vr(D=>D.executeApiEndpoint),a=vr(D=>D.createDataTable),[s,o]=T.useState(new Set(["headers","queryParams"])),[c,u]=T.useState(null),[h,f]=T.useState(!1),[m,g]=T.useState([]),[v,x]=T.useState(!1),_=T.useRef(!1),w=T.useCallback(async D=>{try{await r(t.id,D)}catch(k){console.error("API Endpoint  :",k)}},[t.id,r]),S=T.useCallback(()=>{const D={...t.headers,"":""};w({headers:D})},[t.headers,w]),E=T.useCallback((D,k,L)=>{const $={...t.headers};D!==k&&delete $[D],$[k]=L,w({headers:$})},[t.headers,w]),A=T.useCallback(D=>{const k={...t.headers};delete k[D],w({headers:k})},[t.headers,w]);T.useCallback(()=>{const D={...t.queryParams,"":""};w({queryParams:D})},[t.queryParams,w]),T.useCallback((D,k,L)=>{const $={...t.queryParams};D!==k&&delete $[D],$[k]=L,w({queryParams:$})},[t.queryParams,w]),T.useCallback(D=>{const k={...t.queryParams};delete k[D],w({queryParams:k})},[t.queryParams,w]);const N=T.useCallback(async()=>{f(!0),u(null),g([]);try{const D=await i(t.id);console.log(" API result:",{result:D,resultType:typeof D,dataPath:t.responseMapping?.dataPath}),u({success:!0,data:D});let k=D;if(!Array.isArray(k)&&typeof k=="object"&&k!==null){const $=["results","data","items","records","list","rows","entries"];for(const B of $){const q=k[B];if(Array.isArray(q)&&q.length>0){console.log(` Auto-detected array field: "${B}" with ${q.length} items`),k=q,t.responseMapping?.dataPath||(console.log(` Auto-setting dataPath to "${B}"`),onUpdate({responseMapping:{...t.responseMapping,dataPath:B}}));break}}}console.log(" Column detection - dataToAnalyze:",{isArray:Array.isArray(k),type:typeof k,length:Array.isArray(k)?k.length:"N/A"});const L=pNe(k);console.log(" Detected columns:",L),g(L)}catch(D){u({success:!1,data:D.message})}finally{f(!1)}},[t.id,t.responseMapping?.dataPath,i]);T.useEffect(()=>{n==="run"&&!_.current&&!h&&(_.current=!0,N())},[n,N,h]);const P=T.useCallback(async(D,k)=>{x(!0);try{const L=mNe(D),$=D.filter(U=>U.selected).map(U=>U.key);let B=c?.data;if(!Array.isArray(B)&&typeof B=="object"&&B!==null){const U=["results","data","items","records","list","rows","entries"];for(const J of U){const O=B[J];if(Array.isArray(O)&&O.length>0){console.log(` handleImport: Auto-detected array field "${J}"`),B=O;break}}}console.log(" handleImport: dataToImport",{isArray:Array.isArray(B),length:Array.isArray(B)?B.length:0,selectedKeys:$});const q=gNe(B,$);console.log(" handleImport: mockData extracted",{mockDataLength:q.length,firstItem:q[0]}),await a({name:k,project_id:t.project_id,schema:L,mockData:q,useMockData:!1}),console.log(` DataTable "${k}"   (${L.length} , ${q.length} )`),alert(`DataTable "${k}"() .
${L.length} , ${q.length} `),g([])}catch(L){console.error(" DataTable Import :",L),alert(`Import : ${L.message}`)}finally{x(!1)}},[c?.data,t.project_id,a]),R=D=>{o(k=>{const L=new Set(k);return L.has(D)?L.delete(D):L.add(D),L})};return l.jsxs(l.Fragment,{children:[n==="basic"&&l.jsx(bNe,{endpoint:t,onUpdate:w}),n==="headers"&&l.jsx(_Ne,{title:"Headers",description:"HTTP  . {{}}     .",items:t.headers||{},expandedSections:s,onToggleSection:R,onAdd:S,onUpdate:E,onDelete:A,sectionKey:"headers"}),n==="body"&&l.jsx(wNe,{endpoint:t,onUpdate:w}),n==="response"&&l.jsx(SNe,{endpoint:t,onUpdate:w}),n==="run"&&l.jsx(CNe,{endpoint:t,testResult:c,isExecuting:h,onTest:N,detectedColumns:m,onColumnsChange:g,onImport:P,isImporting:v})]})}function bNe({endpoint:t,onUpdate:e}){return l.jsxs("div",{className:"basic-editor",children:[l.jsx(ja,{label:"Method",value:t.method,onChange:n=>e({method:n}),options:vNe}),l.jsx(Xi,{label:"Base URL",value:t.baseUrl||"",onChange:n=>e({baseUrl:n}),placeholder:"https://api.example.com"}),l.jsx(Xi,{label:"Endpoint",value:t.endpoint,onChange:n=>e({endpoint:n}),placeholder:"/users/{{userId}}"}),l.jsx(Jo,{label:"Authentication Required",isSelected:t.authRequired||!1,onChange:n=>e({authRequired:n})}),t.authRequired&&l.jsx(Xi,{label:"Auth Header",value:t.authHeader||"",onChange:n=>e({authHeader:n}),placeholder:"Bearer {{accessToken}}"}),l.jsx("div",{className:"section-divider"}),l.jsx("h4",{className:"section-title",children:"Query Parameters"}),l.jsx(xNe,{endpoint:t,onUpdate:e})]})}function xNe({endpoint:t,onUpdate:e}){const n=t.queryParams||{},r=Object.entries(n),i=()=>{const c={...n,"":""};e({queryParams:c})},a=(c,u)=>{const h={...n},f=h[c];delete h[c],h[u]=f,e({queryParams:h})},s=(c,u)=>{const h={...n,[c]:u};e({queryParams:h})},o=c=>{const u={...n};delete u[c],e({queryParams:u})};return l.jsxs("div",{className:"query-params-editor",children:[r.map(([c,u],h)=>l.jsxs("div",{className:"kv-row",children:[l.jsx("input",{type:"text",className:"kv-input key",value:c,onChange:f=>a(c,f.target.value),placeholder:"key"}),l.jsx("input",{type:"text",className:"kv-input value",value:u,onChange:f=>s(c,f.target.value),placeholder:"value or {{variable}}"}),l.jsx("button",{type:"button",className:"kv-delete",onClick:()=>o(c),children:l.jsx(Ws,{size:12})})]},h)),l.jsxs("button",{type:"button",className:"add-kv-btn",onClick:i,children:[l.jsx(No,{size:14}),"Add Parameter"]})]})}function _Ne({title:t,description:e,items:n,expandedSections:r,onToggleSection:i,onAdd:a,onUpdate:s,onDelete:o,sectionKey:c}){const u=Object.entries(n),h=r.has(c);return l.jsxs("div",{className:"kv-editor",children:[l.jsxs("div",{className:"kv-section-header",onClick:()=>i(c),children:[h?l.jsx(_i,{size:14}):l.jsx(Ia,{size:14}),l.jsx("span",{className:"kv-section-title",children:t}),l.jsx("span",{className:"kv-section-count",children:u.length})]}),h&&l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"kv-description",children:e}),l.jsx("div",{className:"kv-list",children:u.map(([f,m],g)=>l.jsxs("div",{className:"kv-row",children:[l.jsx("input",{type:"text",className:"kv-input key",value:f,onChange:v=>s(f,v.target.value,m),placeholder:"Header Name"}),l.jsx("input",{type:"text",className:"kv-input value",value:m,onChange:v=>s(f,f,v.target.value),placeholder:"Value or {{variable}}"}),l.jsx("button",{type:"button",className:"kv-delete",onClick:()=>o(f),children:l.jsx(Ws,{size:12})})]},g))}),l.jsxs("button",{type:"button",className:"add-kv-btn",onClick:a,children:[l.jsx(No,{size:14}),"Add ",t.slice(0,-1)]})]})]})}function wNe({endpoint:t,onUpdate:e}){const n=t.body?JSON.stringify(t.body,null,2):"",r=i=>{try{const a=i?JSON.parse(i):void 0;e({body:a})}catch{}};return l.jsxs("div",{className:"body-editor",children:[l.jsxs("p",{className:"editor-description",children:["POST/PUT/PATCH   JSON  .",l.jsx("br",{}),"{{}}     ."]}),l.jsx("textarea",{className:"body-textarea",value:n,onChange:i=>r(i.target.value),placeholder:'{"key": "value", "userId": "{{userId}}"}',rows:10})]})}function SNe({endpoint:t,onUpdate:e}){const n=vr(c=>c.executeApiEndpoint),[r,i]=T.useState(!1),[a,s]=T.useState(null),o=async()=>{i(!0),s(null);try{const c=await n(t.id);if(c&&typeof c=="object"&&!Array.isArray(c)){const u=["results","data","items","records","list","rows","entries","content","hits"];for(const h of u){const f=c[h];if(Array.isArray(f)&&f.length>0){e({responseMapping:{...t.responseMapping,dataPath:h}}),s(` "${h}"  (${f.length} )`);return}}s("     ")}else Array.isArray(c)?s("    (dataPath )"):s("     ")}catch(c){s(` API  : ${c.message}`)}finally{i(!1)}};return l.jsxs("div",{className:"response-editor",children:[l.jsxs("div",{className:"field-with-action",children:[l.jsx(Xi,{label:"Data Path",value:t.responseMapping?.dataPath||"",onChange:c=>e({responseMapping:{...t.responseMapping,dataPath:c}}),placeholder:"results, data.items"}),l.jsxs("button",{type:"button",className:"auto-detect-btn",onClick:o,disabled:r,title:"API     ",children:[l.jsx(nse,{size:14}),r?" ...":" "]})]}),a&&l.jsx("p",{className:`detect-result ${a.startsWith("")?"success":a.startsWith("")?"warning":"error"}`,children:a}),l.jsx("p",{className:"field-description",children:" JSON    . (: results, data.items)"}),l.jsx(Xi,{label:"Target DataTable",value:t.targetDataTable||"",onChange:c=>e({targetDataTable:c}),placeholder:"pokemon_list"}),l.jsx("p",{className:"field-description",children:"API    DataTable . Test  Import   ."}),l.jsx("div",{className:"section-divider"}),l.jsx("h4",{className:"section-title",children:"Field Mapping"}),l.jsx("p",{className:"field-description",children:"API   DataTable  ."}),l.jsx(ENe,{endpoint:t,onUpdate:e})]})}function ENe({endpoint:t,onUpdate:e}){const n=t.responseMapping?.fieldMapping||{},r=Object.entries(n),i=()=>{const o={...n,"":""};e({responseMapping:{...t.responseMapping,fieldMapping:o}})},a=(o,c,u)=>{const h={...n};o!==c&&delete h[o],h[c]=u,e({responseMapping:{...t.responseMapping,fieldMapping:h}})},s=o=>{const c={...n};delete c[o],e({responseMapping:{...t.responseMapping,fieldMapping:c}})};return l.jsxs("div",{className:"field-mapping-editor",children:[l.jsx("div",{className:"kv-list",children:r.map(([o,c],u)=>l.jsxs("div",{className:"kv-row",children:[l.jsx("input",{type:"text",className:"kv-input key",value:o,onChange:h=>a(o,h.target.value,c),placeholder:"API Field"}),l.jsx("span",{className:"kv-arrow",children:""}),l.jsx("input",{type:"text",className:"kv-input value",value:c,onChange:h=>a(o,o,h.target.value),placeholder:"DataTable Field"}),l.jsx("button",{type:"button",className:"kv-delete",onClick:()=>s(o),children:l.jsx(Ws,{size:12})})]},u))}),l.jsxs("button",{type:"button",className:"add-kv-btn",onClick:i,children:[l.jsx(No,{size:14}),"Add Mapping"]})]})}function CNe({endpoint:t,testResult:e,isExecuting:n,onTest:r,detectedColumns:i,onColumnsChange:a,onImport:s,isImporting:o}){return l.jsxs("div",{className:"test-editor",children:[l.jsxs("div",{className:"test-info",children:[l.jsx("span",{className:`method-badge ${t.method.toLowerCase()}`,children:t.method}),l.jsxs("span",{className:"test-url",children:[t.baseUrl,t.endpoint]})]}),l.jsxs("button",{type:"button",className:"test-btn",onClick:r,disabled:n,children:[l.jsx($y,{size:14}),n?"Executing...":"Execute Request"]}),e&&l.jsxs("div",{className:`test-result ${e.success?"success":"error"}`,children:[l.jsx("div",{className:"result-header",children:e.success?" Success":" Error"}),l.jsx("pre",{className:"result-data",children:typeof e.data=="string"?e.data:JSON.stringify(e.data,null,2)})]}),e?.success&&i.length>0&&l.jsx(dNe,{columns:i,onColumnsChange:a,onImport:s,isImporting:o,defaultTableName:t.targetDataTable||""})]})}const TNe=[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"boolean",label:"Boolean"},{value:"object",label:"Object"},{value:"array",label:"Array"}],MNe=[{value:"global",label:"Global"},{value:"page",label:"Page"},{value:"component",label:"Component"}];function ANe({variable:t,onClose:e,activeTab:n}){const r=vr(c=>c.updateVariable),[i,a]=T.useState(new Set(["validation"])),s=T.useCallback(async c=>{try{await r(t.id,c)}catch(u){console.error("Variable  :",u)}},[t.id,r]),o=c=>{a(u=>{const h=new Set(u);return h.has(c)?h.delete(c):h.add(c),h})};return l.jsxs(l.Fragment,{children:[n==="basic"&&l.jsx(PNe,{variable:t,onUpdate:s}),n==="validation"&&l.jsx(NNe,{variable:t,onUpdate:s,expandedSections:i,onToggleSection:o}),n==="transform"&&l.jsx(DNe,{variable:t,onUpdate:s})]})}function PNe({variable:t,onUpdate:e}){const n=kNe(t.defaultValue,t.type),r=i=>{const a=RNe(i,t.type);e({defaultValue:a})};return l.jsxs("div",{className:"basic-editor",children:[l.jsx(ja,{label:"Type",value:t.type,onChange:i=>e({type:i}),options:TNe}),l.jsx(ja,{label:"Scope",value:t.scope,onChange:i=>e({scope:i}),options:MNe}),l.jsxs("p",{className:"field-description",children:[t.scope==="global"&&"   .",t.scope==="page"&&"   .",t.scope==="component"&&"    ."]}),l.jsx("div",{className:"section-divider"}),l.jsx("h4",{className:"section-title",children:"Default Value"}),t.type==="boolean"?l.jsx(Jo,{label:"Default Value",isSelected:!!t.defaultValue,onChange:i=>e({defaultValue:i})}):t.type==="object"||t.type==="array"?l.jsx("div",{className:"json-editor-wrapper",children:l.jsx("textarea",{className:"json-textarea",value:n,onChange:i=>r(i.target.value),placeholder:t.type==="array"?"[]":"{}",rows:6})}):l.jsx(Xi,{label:"Default Value",value:n,onChange:r,placeholder:t.type==="number"?"0":""}),l.jsx("div",{className:"section-divider"}),l.jsx(Jo,{label:"Persist to localStorage",isSelected:t.persist||!1,onChange:i=>e({persist:i})}),l.jsx("p",{className:"field-description",children:"    ."})]})}function NNe({variable:t,onUpdate:e,expandedSections:n,onToggleSection:r}){const i=t.validation||{},a=n.has("validation"),s=o=>{e({validation:{...i,...o}})};return l.jsxs("div",{className:"validation-editor",children:[l.jsxs("div",{className:"section-header",onClick:()=>r("validation"),children:[a?l.jsx(_i,{size:14}):l.jsx(Ia,{size:14}),l.jsx("span",{className:"section-header-title",children:"Validation Rules"})]}),a&&l.jsxs("div",{className:"validation-content",children:[l.jsx(Jo,{label:"Required",isSelected:i.required||!1,onChange:o=>s({required:o})}),t.type==="string"&&l.jsxs(l.Fragment,{children:[l.jsx(Xi,{label:"Min Length",value:String(i.minLength??""),onChange:o=>s({minLength:o?Number(o):void 0}),placeholder:"0"}),l.jsx(Xi,{label:"Max Length",value:String(i.maxLength??""),onChange:o=>s({maxLength:o?Number(o):void 0}),placeholder:"255"}),l.jsx(Xi,{label:"Pattern (Regex)",value:i.pattern||"",onChange:o=>s({pattern:o||void 0}),placeholder:"^[a-zA-Z]+$"})]}),t.type==="number"&&l.jsxs(l.Fragment,{children:[l.jsx(Xi,{label:"Min Value",value:String(i.min??""),onChange:o=>s({min:o?Number(o):void 0}),placeholder:"0"}),l.jsx(Xi,{label:"Max Value",value:String(i.max??""),onChange:o=>s({max:o?Number(o):void 0}),placeholder:"100"})]}),(t.type==="array"||t.type==="object")&&l.jsx(Xi,{label:"JSON Schema",value:i.schema||"",onChange:o=>s({schema:o||void 0}),placeholder:"JSON Schema URL or inline schema"})]})]})}function DNe({variable:t,onUpdate:e}){return l.jsxs("div",{className:"transform-editor",children:[l.jsxs("p",{className:"editor-description",children:["     .",l.jsx("br",{})," (value, context) => transformedValue ."]}),l.jsxs("div",{className:"transform-input-wrapper",children:[l.jsx("span",{className:"transform-prefix",children:"(value, context) => {"}),l.jsx("textarea",{className:"transform-textarea",value:t.transform||"",onChange:n=>e({transform:n.target.value||void 0}),placeholder:"return value.trim().toUpperCase();",rows:8}),l.jsx("span",{className:"transform-suffix",children:"}"})]}),l.jsxs("div",{className:"transform-examples",children:[l.jsx("h5",{className:"examples-title",children:"Examples"}),l.jsxs("div",{className:"example-list",children:[l.jsxs("div",{className:"example-item",children:[l.jsx("code",{className:"example-code",children:"return value.trim();"}),l.jsx("span",{className:"example-desc",children:"   "})]}),l.jsxs("div",{className:"example-item",children:[l.jsx("code",{className:"example-code",children:"return Math.max(0, Math.min(100, value));"}),l.jsx("span",{className:"example-desc",children:"0-100  "})]}),l.jsxs("div",{className:"example-item",children:[l.jsxs("code",{className:"example-code",children:["return value.filter(x =",">"," x !== null);"]}),l.jsx("span",{className:"example-desc",children:" null "})]})]})]})]})}function kNe(t,e){if(t==null)return"";switch(e){case"object":case"array":return JSON.stringify(t,null,2);default:return String(t)}}function RNe(t,e){if(t)switch(e){case"number":return Number(t)||0;case"boolean":return t==="true";case"object":case"array":try{return JSON.parse(t)}catch{return e==="array"?[]:{}}default:return t}}const INe=[{id:"schema",label:"Schema",icon:ba},{id:"data",label:"Table",icon:i_},{id:"settings",label:"Settings",icon:Kl}],$Ne=[{id:"basic",label:"Basic",icon:Kl},{id:"headers",label:"Headers",icon:V_},{id:"body",label:"Body",icon:h5},{id:"response",label:"Response",icon:h5},{id:"run",label:"Run",icon:$y}],jNe=[{id:"basic",label:"Basic",icon:Kl},{id:"validation",label:"Validation",icon:Hie},{id:"transform",label:"Transform",icon:V_}];function LNe({mode:t,close:e}){const[n,r]=T.useState("schema"),[i,a]=T.useState(t.type==="api-edit"&&t.initialTab?t.initialTab:"basic"),[s,o]=T.useState("basic"),[c,u]=T.useState("preset"),h=vr(N=>N.dataTables),f=vr(N=>N.apiEndpoints),m=vr(N=>N.variables),g=vr(N=>N.transformers),v=T.useMemo(()=>Array.from(h.values()),[h]),x=T.useMemo(()=>Array.from(f.values()),[f]),_=T.useMemo(()=>Array.from(m.values()),[m]),w=T.useMemo(()=>Array.from(g.values()),[g]),S=()=>{switch(t.type){case"table-create":return"Data Table Creator";case"table-edit":return v.find(P=>P.id===t.tableId)?.name||"Table Editor";case"api-create":return"New API";case"api-edit":return x.find(P=>P.id===t.endpointId)?.name||"API Editor";case"variable-create":return"New Variable";case"variable-edit":return _.find(P=>P.id===t.variableId)?.name||"Variable Editor";case"transformer-create":return"New Transformer";case"transformer-edit":return w.find(P=>P.id===t.transformerId)?.name||"Transformer Editor";default:return"Editor"}},E=()=>{switch(t.type){case"table-edit":return l.jsx("div",{className:"panel-tabs",children:INe.map(N=>l.jsxs("button",{type:"button",className:`panel-tab ${n===N.id?"active":""}`,onClick:()=>r(N.id),children:[l.jsx(N.icon,{size:14}),l.jsx("span",{children:N.label})]},N.id))});case"api-edit":return l.jsx("div",{className:"panel-tabs",children:$Ne.map(N=>l.jsxs("button",{type:"button",className:`panel-tab ${i===N.id?"active":""}`,onClick:()=>a(N.id),children:[l.jsx(N.icon,{size:14}),l.jsx("span",{children:N.label})]},N.id))});case"variable-edit":return l.jsx("div",{className:"panel-tabs",children:jNe.map(N=>l.jsxs("button",{type:"button",className:`panel-tab ${s===N.id?"active":""}`,onClick:()=>o(N.id),children:[l.jsx(N.icon,{size:14}),l.jsx("span",{children:N.label})]},N.id))});case"table-create":return l.jsxs("div",{className:"panel-selection",children:[l.jsxs("label",{className:"panel-option",children:[l.jsx("input",{type:"radio",name:"creatorMode",checked:c==="empty",onChange:()=>u("empty")}),"  "]}),l.jsxs("label",{className:"panel-option",children:[l.jsx("input",{type:"radio",name:"creatorMode",checked:c==="preset",onChange:()=>u("preset")}),"Preset "]})]});case"api-create":case"variable-create":case"transformer-create":case"transformer-edit":default:return null}},A=()=>{switch(t.type){case"table-create":return l.jsx(uNe,{projectId:t.projectId,onClose:e,mode:c});case"table-edit":{const N=v.find(P=>P.id===t.tableId);return N?l.jsx(NPe,{dataTable:N,onClose:e,activeTab:n}):l.jsx(ya,{message:"   "})}case"api-create":return l.jsx(ya,{message:"API    "});case"api-edit":{const N=x.find(P=>P.id===t.endpointId);return N?l.jsx(yNe,{endpoint:N,onClose:e,activeTab:i}):l.jsx(ya,{message:"API   "})}case"variable-create":return l.jsx(ya,{message:"    "});case"variable-edit":{const N=_.find(P=>P.id===t.variableId);return N?l.jsx(ANe,{variable:N,onClose:e,activeTab:s}):l.jsx(ya,{message:"   "})}case"transformer-create":return l.jsx(ya,{message:"Transformer    "});case"transformer-edit":return w.find(P=>P.id===t.transformerId)?l.jsx(ya,{message:"Transformer    "}):l.jsx(ya,{message:"Transformer   "});default:return l.jsx(ya,{message:"  "})}};return l.jsxs("div",{className:"datatable-editor-panel",children:[l.jsx(Ul,{icon:l.jsx(wR,{size:16}),title:S(),actions:l.jsx("button",{type:"button",className:"iconButton",onClick:e,title:"",children:l.jsx(ol,{size:16})})}),E(),l.jsx("div",{className:"panel-contents",children:A()})]})}function ONe(t){switch(t.type){case"table-create":return`table-create-${t.projectId}`;case"table-edit":return`table-edit-${t.tableId}`;case"api-create":return`api-create-${t.projectId}`;case"api-edit":return`api-edit-${t.endpointId}`;case"variable-create":return`variable-create-${t.projectId}`;case"variable-edit":return`variable-edit-${t.variableId}`;case"transformer-create":return`transformer-create-${t.projectId}`;case"transformer-edit":return`transformer-edit-${t.transformerId}`;default:return`unknown-${Date.now()}`}}function FNe({isActive:t}){const e=Bu(r=>r.mode),n=Bu(r=>r.close);return t?e?l.jsx(LNe,{mode:e,close:n},ONe(e)):l.jsxs("div",{className:"datatable-editor-panel",children:[l.jsx(Ul,{icon:l.jsx(wR,{size:16}),title:"Editor"}),l.jsx("div",{className:"panel-contents",children:l.jsx(ya,{message:"  "})})]}):null}const Pv=new Map,HA=Object.assign({"../../panels/properties/editors/BadgeEditor.tsx":()=>Lt(()=>import("./BadgeEditor-xifTIN6j.js"),__vite__mapDeps([0,1,2])),"../../panels/properties/editors/BreadcrumbEditor.tsx":()=>Lt(()=>import("./BreadcrumbEditor-BDuJN68L.js"),__vite__mapDeps([3,1,4])),"../../panels/properties/editors/BreadcrumbsEditor.tsx":()=>Lt(()=>import("./BreadcrumbsEditor-DFtfimAo.js"),__vite__mapDeps([5,1,4])),"../../panels/properties/editors/ButtonEditor.tsx":()=>Lt(()=>import("./ButtonEditor-DdstdRj8.js"),__vite__mapDeps([6,1,2,7,4])),"../../panels/properties/editors/CalendarEditor.tsx":()=>Lt(()=>import("./CalendarEditor-GiXObt2h.js"),__vite__mapDeps([8,1,4,9,7])),"../../panels/properties/editors/CardEditor.tsx":()=>Lt(()=>import("./CardEditor-DLyKAGC0.js"),__vite__mapDeps([10,1,11,12,13,4])),"../../panels/properties/editors/CellEditor.tsx":()=>Lt(()=>import("./CellEditor-a9jOBhFa.js"),__vite__mapDeps([14,1])),"../../panels/properties/editors/CheckboxEditor.tsx":()=>Lt(()=>import("./CheckboxEditor-v0RawnxS.js"),__vite__mapDeps([15,1,11,16,7,4,9])),"../../panels/properties/editors/CheckboxGroupEditor.tsx":()=>Lt(()=>import("./CheckboxGroupEditor-BqQrNVI9.js"),__vite__mapDeps([17,1,4,18,9])),"../../panels/properties/editors/ColumnEditor.tsx":()=>Lt(()=>import("./ColumnEditor-Vmiuw1--.js"),__vite__mapDeps([19,1,12,20])),"../../panels/properties/editors/ColumnGroupEditor.tsx":()=>Lt(()=>import("./ColumnGroupEditor-B9V8jp4I.js"),__vite__mapDeps([21,1])),"../../panels/properties/editors/ComboBoxEditor.tsx":()=>Lt(()=>import("./ComboBoxEditor-NQrhNOHo.js"),__vite__mapDeps([22,1,23,24,4,9,7])),"../../panels/properties/editors/ComboBoxItemEditor.tsx":()=>Lt(()=>import("./ComboBoxItemEditor-BKCeoMKc.js"),__vite__mapDeps([25,1,24,4])),"../../panels/properties/editors/DataTableEditor.tsx":()=>Lt(()=>import("./DataTableEditor-BnFGORZd.js"),[]),"../../panels/properties/editors/DatePickerEditor.tsx":()=>Lt(()=>import("./DatePickerEditor-CNTfU-o6.js"),__vite__mapDeps([26,1,4,9,7])),"../../panels/properties/editors/DateRangePickerEditor.tsx":()=>Lt(()=>import("./DateRangePickerEditor-BdLimzPg.js"),__vite__mapDeps([27,1,4,9,7])),"../../panels/properties/editors/DialogEditor.tsx":()=>Lt(()=>import("./DialogEditor-BflwkcfG.js"),__vite__mapDeps([28,1])),"../../panels/properties/editors/ElementSlotSelector.tsx":()=>Lt(()=>Promise.resolve().then(()=>zNe),void 0),"../../panels/properties/editors/FieldEditor.tsx":()=>Lt(()=>import("./FieldEditor-hYBgRedX.js"),__vite__mapDeps([29,1,13])),"../../panels/properties/editors/GridListEditor.tsx":()=>Lt(()=>import("./GridListEditor-DVaYFY8L.js"),__vite__mapDeps([30,1,23,24,4,31,7])),"../../panels/properties/editors/GridListItemEditor.tsx":()=>Lt(()=>import("./GridListItemEditor-Ca8nZEpI.js"),__vite__mapDeps([32,1,24,4])),"../../panels/properties/editors/GroupEditor.tsx":()=>Lt(()=>import("./GroupEditor-DzAuO0j5.js"),__vite__mapDeps([33,1])),"../../panels/properties/editors/LayoutBodyEditor.tsx":()=>Lt(()=>import("./LayoutBodyEditor-CE1afRRo.js"),__vite__mapDeps([34,1,35,36])),"../../panels/properties/editors/LayoutSlugEditor.tsx":()=>Lt(()=>import("./LayoutSlugEditor-BxHk1Vqj.js"),[]),"../../panels/properties/editors/LinkEditor.tsx":()=>Lt(()=>import("./LinkEditor-PQARmCgp.js"),__vite__mapDeps([37,1,2,4])),"../../panels/properties/editors/ListBoxEditor.tsx":()=>Lt(()=>import("./ListBoxEditor-B-wxa0X_.js"),__vite__mapDeps([38,1,23,31,4,7,24])),"../../panels/properties/editors/ListBoxItemEditor.tsx":()=>Lt(()=>import("./ListBoxItemEditor-CgiOlPNY.js"),__vite__mapDeps([39,1,24,4])),"../../panels/properties/editors/MenuEditor.tsx":()=>Lt(()=>import("./MenuEditor-Cu6ZQNj6.js"),__vite__mapDeps([40,1,31,4,7])),"../../panels/properties/editors/MenuItemEditor.tsx":()=>Lt(()=>import("./MenuItemEditor-DrzKw5Za.js"),__vite__mapDeps([41,1,24,4])),"../../panels/properties/editors/MeterEditor.tsx":()=>Lt(()=>import("./MeterEditor-BP393aUY.js"),__vite__mapDeps([42,1,43,11])),"../../panels/properties/editors/ModalEditor.tsx":()=>Lt(()=>import("./ModalEditor-DFBnloX-.js"),__vite__mapDeps([44,1])),"../../panels/properties/editors/NumberFieldEditor.tsx":()=>Lt(()=>import("./NumberFieldEditor-BlRtYjGk.js"),__vite__mapDeps([45,1,46,43,20,7,4,9])),"../../panels/properties/editors/PageBodyEditor.tsx":()=>Lt(()=>import("./PageBodyEditor-fzVtRg98.js"),__vite__mapDeps([47,1,48,49])),"../../panels/properties/editors/PageLayoutSelector.tsx":()=>Lt(()=>import("./PageLayoutSelector-Cvfbe800.js"),[]),"../../panels/properties/editors/PageParentSelector.tsx":()=>Lt(()=>import("./PageParentSelector-D0KIrB9d.js"),[]),"../../panels/properties/editors/PanelEditor.tsx":()=>Lt(()=>import("./PanelEditor-BHac5po_.js"),__vite__mapDeps([50,1])),"../../panels/properties/editors/PopoverEditor.tsx":()=>Lt(()=>import("./PopoverEditor-B2Y_bY9_.js"),__vite__mapDeps([51,1,52])),"../../panels/properties/editors/ProgressBarEditor.tsx":()=>Lt(()=>import("./ProgressBarEditor-DK9XZs_0.js"),__vite__mapDeps([53,1,43,11])),"../../panels/properties/editors/RadioEditor.tsx":()=>Lt(()=>import("./RadioEditor-CwlO5txx.js"),__vite__mapDeps([54,1,24,55,7,4,9])),"../../panels/properties/editors/RadioGroupEditor.tsx":()=>Lt(()=>import("./RadioGroupEditor-BS_tHlbZ.js"),__vite__mapDeps([56,1,18,24,55,4,9])),"../../panels/properties/editors/ResponsiveVisibilityEditor.tsx":()=>Lt(()=>import("./ResponsiveVisibilityEditor-CtCe4It5.js"),__vite__mapDeps([57,13])),"../../panels/properties/editors/RowEditor.tsx":()=>Lt(()=>import("./RowEditor-Bd81J3p1.js"),__vite__mapDeps([58,1])),"../../panels/properties/editors/SearchFieldEditor.tsx":()=>Lt(()=>import("./SearchFieldEditor-DE9TkONV.js"),__vite__mapDeps([59,1,46,7,4,9])),"../../panels/properties/editors/SelectEditor.tsx":()=>Lt(()=>import("./SelectEditor-DF32MA5H.js"),__vite__mapDeps([60,1,23,46,31,4,9,7,24])),"../../panels/properties/editors/SelectItemEditor.tsx":()=>Lt(()=>import("./SelectItemEditor-CJdRozvf.js"),__vite__mapDeps([61,1,24,4])),"../../panels/properties/editors/SeparatorEditor.tsx":()=>Lt(()=>import("./SeparatorEditor-DFEfLZx6.js"),__vite__mapDeps([62,1,11,16])),"../../panels/properties/editors/SliderEditor.tsx":()=>Lt(()=>import("./SliderEditor-BSWp0Vw-.js"),__vite__mapDeps([63,1,43,18,20,4])),"../../panels/properties/editors/SlotEditor.tsx":()=>Lt(()=>import("./SlotEditor-DqK2ky7v.js"),[]),"../../panels/properties/editors/SwitchEditor.tsx":()=>Lt(()=>import("./SwitchEditor-DrZr--n7.js"),__vite__mapDeps([64,1,11,7,4,9])),"../../panels/properties/editors/TabEditor.tsx":()=>Lt(()=>import("./TabEditor-Ct-v_buu.js"),__vite__mapDeps([65,1,4])),"../../panels/properties/editors/TableBodyEditor.tsx":()=>Lt(()=>import("./TableBodyEditor-CqBkiMsr.js"),__vite__mapDeps([66,1,67])),"../../panels/properties/editors/TableEditor.tsx":()=>Lt(()=>import("./TableEditor-ZsFkmJod.js"),__vite__mapDeps([68,1,67,69])),"../../panels/properties/editors/TableHeaderEditor.tsx":()=>Lt(()=>import("./TableHeaderEditor-lmnPakbl.js"),__vite__mapDeps([70,1,67])),"../../panels/properties/editors/TabsEditor.tsx":()=>Lt(()=>import("./TabsEditor-BSDBXaS1.js"),__vite__mapDeps([71,1,4,18])),"../../panels/properties/editors/TagEditor.tsx":()=>Lt(()=>import("./TagEditor-Dqc2NEvZ.js"),__vite__mapDeps([72,1,4])),"../../panels/properties/editors/TagGroupEditor.tsx":()=>Lt(()=>import("./TagGroupEditor-BPNXzfzb.js"),__vite__mapDeps([73,1,4,11,9])),"../../panels/properties/editors/TailSwatchEditor.tsx":()=>Lt(()=>import("./TailSwatchEditor-D_vQ1nQc.js"),__vite__mapDeps([74,1,4])),"../../panels/properties/editors/TextFieldEditor.tsx":()=>Lt(()=>import("./TextFieldEditor-BMcz5pUq.js"),__vite__mapDeps([75,1,24,46,7,4,9])),"../../panels/properties/editors/TimeFieldEditor.tsx":()=>Lt(()=>import("./TimeFieldEditor-BP9rDf5X.js"),__vite__mapDeps([76,1,4,9,7])),"../../panels/properties/editors/ToggleButtonEditor.tsx":()=>Lt(()=>import("./ToggleButtonEditor-BZYx9v9J.js"),__vite__mapDeps([77,1,7,4,9])),"../../panels/properties/editors/ToggleButtonGroupEditor.tsx":()=>Lt(()=>import("./ToggleButtonGroupEditor-B36XEiFl.js"),__vite__mapDeps([78,1,4,24,7])),"../../panels/properties/editors/ToolbarEditor.tsx":()=>Lt(()=>import("./ToolbarEditor-BxdLPmt3.js"),__vite__mapDeps([79,1,16])),"../../panels/properties/editors/TooltipEditor.tsx":()=>Lt(()=>import("./TooltipEditor-8XCrsH81.js"),__vite__mapDeps([80,1,52,20])),"../../panels/properties/editors/TreeEditor.tsx":()=>Lt(()=>import("./TreeEditor-eApIBWps.js"),__vite__mapDeps([81,1,31,4,7])),"../../panels/properties/editors/TreeItemEditor.tsx":()=>Lt(()=>import("./TreeItemEditor-COL8iu5s.js"),__vite__mapDeps([82,1,24,4]))});async function LO(t){try{const e=`../../panels/properties/editors/${t}.tsx`,n=HA[e];if(!n)return console.warn(`[importEditor] Editor not found in glob: ${t}`,{requestedPath:e,availablePaths:Object.keys(HA).slice(0,5),totalCount:Object.keys(HA).length}),null;const r=await n();return r.default||r[t]||null}catch(e){return console.warn(`[importEditor] Failed to load editor: ${t}`,e),null}}async function BNe(t,e){if(t==="body"){const i=e?.editMode==="layout",a=i?"LayoutBodyEditor":"PageBodyEditor",s=`body:${i?"layout":"page"}`;if(Pv.has(s))return Pv.get(s);const o=await LO(a);return o?Pv.set(s,o):console.warn("[getEditor] Failed to import body editor:",a),o}if(Pv.has(t))return Pv.get(t);const n=IX.find(i=>i.type===t);if(!n?.inspector.hasCustomEditor||!n.inspector.editorName)return null;const r=await LO(n.inspector.editorName);return r?Pv.set(t,r):console.warn("[getEditor] Failed to import editor:",n.inspector.editorName),r}const Vk=T.memo(function({elementId:e,currentSlotName:n,onSlotChange:r}){const i=$e(f=>f.elements.find(m=>m.id===e)),a=$e(f=>f.elements),s=$e(f=>f.pages),o=T.useMemo(()=>{if(!i?.page_id)return[];const f=s.find(g=>g.id===i.page_id);return f?.layout_id?a.filter(g=>g.layout_id===f.layout_id&&g.tag==="Slot").map(g=>{const v=g.props?.name;return{name:v||`slot_${g.id.slice(0,8)}`,displayName:v||"unnamed",required:g.props?.required||!1,description:g.props?.description,elementId:g.id}}):[]},[i,a,s]),c=T.useMemo(()=>i?.parent_id?!a.some(m=>m.id===i.parent_id&&m.page_id===i.page_id):!0,[i,a]);if(o.length===0||!c)return null;const u=o.find(f=>f.required)||o[0],h=o.map(f=>({value:f.name,label:`${f.displayName}${f.required?" *":""}`}));return l.jsxs($a,{title:"Slot Assignment",icon:n_,children:[l.jsx(ja,{label:"Target Slot",value:n||u?.name||"content",onChange:r,options:h,icon:n_,description:"Choose which slot this element fills in the layout"}),n&&l.jsx("div",{className:"slot-selector-info",children:o.find(f=>f.name===n)?.description&&l.jsx("p",{className:"slot-selector-description",children:o.find(f=>f.name===n)?.description})})]})}),zNe=Object.freeze(Object.defineProperty({__proto__:null,ElementSlotSelector:Vk,default:Vk},Symbol.toStringTag,{value:"Module"}));function UNe(t,e){if(e.disabled||t.key.toLowerCase()!==e.key.toLowerCase())return!1;switch(e.modifier){case"cmd":return(t.metaKey||t.ctrlKey)&&!t.shiftKey&&!t.altKey;case"cmdShift":return(t.metaKey||t.ctrlKey)&&t.shiftKey&&!t.altKey;case"alt":return(t.altKey||t.metaKey)&&!t.shiftKey&&!t.ctrlKey;case"altShift":return(t.altKey||t.metaKey)&&t.shiftKey;case"none":return!t.metaKey&&!t.ctrlKey&&!t.altKey&&!t.shiftKey;default:return!1}}function ZY(t,e=[]){T.useEffect(()=>{const n=r=>{const i=r.target;if(!(i.tagName==="INPUT"||i.tagName==="TEXTAREA"||i.isContentEditable)){for(const a of t)if(UNe(r,a)){r.preventDefault(),a.handler();break}}};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[...e])}function JY({onPaste:t,validate:e,name:n="data",transform:r}){const i=T.useCallback(async s=>{try{const o=JSON.stringify(s,null,2);return await navigator.clipboard.writeText(o),!0}catch{return!1}},[n]),a=T.useCallback(async()=>{try{const s=await navigator.clipboard.readText(),o=JSON.parse(s);if(typeof o!="object"||o===null)throw new Error(`Invalid ${n} format: expected object, got ${typeof o}`);if(e&&!e(o))throw new Error(`Invalid ${n} format: failed validation`);const c=r?r(o):o;return t(c),!0}catch{return!1}},[n,t,e,r]);return{copy:i,paste:a}}function OO(t,e){const n=t.map(c=>e.get(c)).filter(c=>c!==void 0);if(n.length===0)return{elements:[],rootIds:[],externalParents:new Map,timestamp:Date.now()};const r=new Set(t),i=[],a=new Map;n.forEach(c=>{c.parent_id?r.has(c.parent_id)||(a.set(c.id,c.parent_id),i.push(c.id)):i.push(c.id)});const s=new Set(n),o=[...n];for(;o.length>0;){const c=o.shift();for(const u of e.values())u.parent_id===c.id&&!s.has(u)&&(s.add(u),o.push(u))}return{elements:Array.from(s),rootIds:i,externalParents:a,timestamp:Date.now()}}function FO(t,e,n={x:10,y:10}){if(t.elements.length===0)return[];const r=new Map;return t.elements.forEach(a=>{r.set(a.id,ri.generateId())}),t.elements.map(a=>{const s=r.get(a.id);let o=null;a.parent_id&&(r.has(a.parent_id)?o=r.get(a.parent_id):o=a.parent_id);let c={...a.props};if(t.rootIds.includes(a.id)){const u=a.props.style||{},h=g=>{if(typeof g=="string"){const v=g.match(/^(-?\d+(?:\.\d+)?)px$/);if(v)return parseFloat(v[1])}return typeof g=="number"?g:0},f=h(u.left),m=h(u.top);c={...c,style:{...u,left:`${f+n.x}px`,top:`${m+n.y}px`}}}return{...a,id:s,parent_id:o,page_id:e,props:c,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}})}function VNe(t){const e={__xstudio_elements__:!0,version:1,elements:t.elements,rootIds:t.rootIds,externalParents:Array.from(t.externalParents.entries()),timestamp:t.timestamp};return JSON.stringify(e)}function HNe(t){if(!t||typeof t!="string"||!t.trim().startsWith("{"))return null;try{const e=JSON.parse(t);return e.__xstudio_elements__?!e.elements||!Array.isArray(e.elements)?(console.warn("[Paste] Invalid clipboard data structure - missing elements array"),null):e.elements.length===0?(console.warn("[Paste] Clipboard data contains no elements"),null):{elements:e.elements,rootIds:e.rootIds||[],externalParents:new Map(e.externalParents||[]),timestamp:e.timestamp||Date.now()}:null}catch{return null}}function GNe(t,e,n){if(t.length===0)throw new Error("[Group] No elements selected to group");const r=t.map(S=>e.get(S)).filter(S=>S!==void 0);if(r.length===0)throw new Error("[Group] Selected elements not found");const i=r[0].parent_id,s=r.every(S=>S.parent_id===i)?i:null,o=Array.from(e.values()).filter(S=>S.parent_id===s&&S.page_id===n),u=(o.length>0?Math.max(...o.map(S=>S.order_num||0)):-1)+1,h=r.map(S=>{const E=S.props.style||{},A=BO(E.left),N=BO(E.top);return{left:A,top:N}}).filter(S=>S.left!==null&&S.top!==null),f=h.length>0?h.reduce((S,E)=>S+(E.left||0),0)/h.length:0,m=h.length>0?h.reduce((S,E)=>S+(E.top||0),0)/h.length:0,g=Array.from(e.values()).filter(S=>S.tag==="Group"&&S.customId?.startsWith("group_")),x=`group_${(g.length>0?Math.max(...g.map(S=>{const E=S.customId?.match(/^group_(\d+)$/);return E?parseInt(E[1],10):0})):0)+1}`,_={id:ri.generateId(),customId:x,tag:"Group",props:{label:`Group (${r.length} elements)`,style:{display:"block",position:"relative",left:`${f}px`,top:`${m}px`}},parent_id:s,page_id:n,order_num:u,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},w=r.map((S,E)=>({...S,parent_id:_.id,order_num:E,updated_at:new Date().toISOString()}));return console.log(` [Group] Created group with ${w.length} elements`),{groupElement:_,updatedChildren:w}}function BO(t){if(typeof t=="string"){const e=t.match(/^(-?\d+(?:\.\d+)?)px$/);if(e)return parseFloat(e[1])}return typeof t=="number"?t:null}function WNe(t,e){const n=e.get(t);if(!n)throw new Error(`[Ungroup] Group element not found: ${t}`);if(n.tag!=="Group")throw new Error(`[Ungroup] Element is not a Group: ${t} (tag: ${n.tag})`);const r=Array.from(e.values()).filter(c=>c.parent_id===t);if(r.length===0)return console.warn("[Ungroup] Group has no children, will just delete group"),{updatedChildren:[],groupIdToDelete:t};const i=n.parent_id,a=Array.from(e.values()).filter(c=>c.parent_id===i&&c.page_id===n.page_id&&c.id!==t);let s=a.length>0?Math.max(...a.map(c=>c.order_num||0))+1:0;const o=r.map(c=>({...c,parent_id:i,order_num:s++,updated_at:new Date().toISOString()}));return console.log(` [Ungroup] Ungrouped ${r.length} elements from group ${t}`),{updatedChildren:o,groupIdToDelete:t}}function HC(t){if(typeof t=="string"){const e=t.match(/^(-?\d+(?:\.\d+)?)px$/);if(e)return parseFloat(e[1])}return typeof t=="number"?t:null}function qNe(t,e){switch(e){case"left":return Math.min(...t.map(n=>n.left));case"right":return Math.max(...t.map(n=>n.left+n.width));case"center":{const n=t.map(r=>r.left+r.width/2);return n.reduce((r,i)=>r+i,0)/n.length}case"top":return Math.min(...t.map(n=>n.top));case"bottom":return Math.max(...t.map(n=>n.top+n.height));case"middle":{const n=t.map(r=>r.top+r.height/2);return n.reduce((r,i)=>r+i,0)/n.length}}}function KNe(t){return t.map(e=>{const n=e.props.style||{},r=HC(n.left),i=HC(n.top),a=HC(n.width),s=HC(n.height);return r===null||i===null||a===null||s===null?null:{id:e.id,left:r,top:i,width:a,height:s}}).filter(e=>e!==null)}function XNe(t,e,n){if(t.length<2)return console.warn("[Alignment] Need at least 2 elements to align"),[];const r=t.map(o=>e.get(o)).filter(o=>o!==void 0);if(r.length<2)return console.warn("[Alignment] Not enough valid elements to align"),[];const i=KNe(r);if(i.length<2)return console.warn("[Alignment] Elements missing position/size properties, cannot align"),[];const a=qNe(i,n),s=i.map(o=>{let c=o.left,u=o.top;switch(n){case"left":c=a;break;case"right":c=a-o.width;break;case"center":c=a-o.width/2;break;case"top":u=a;break;case"bottom":u=a-o.height;break;case"middle":u=a-o.height/2;break}return{id:o.id,style:{...n==="left"||n==="center"||n==="right"?{left:`${c}px`}:{},...n==="top"||n==="middle"||n==="bottom"?{top:`${u}px`}:{}}}});return console.log(` [Alignment] Aligned ${s.length} elements to ${n}`),s}function GC(t){if(typeof t=="string"){const e=t.match(/^(-?\d+(?:\.\d+)?)px$/);if(e)return parseFloat(e[1])}return typeof t=="number"?t:null}function YNe(t){return t.map(e=>{const n=e.props.style||{},r=GC(n.left),i=GC(n.top),a=GC(n.width),s=GC(n.height);return r===null||i===null||a===null||s===null?null:{id:e.id,left:r,top:i,width:a,height:s}}).filter(e=>e!==null)}function ZNe(t){if(t.length<3)return console.warn("[Distribution] Need at least 3 elements to distribute"),[];const e=[...t].sort((f,m)=>f.left-m.left),n=e[0],r=e[e.length-1],i=e.reduce((f,m)=>f+m.width,0),a=n.left,c=(r.left+r.width-a-i)/(e.length-1),u=[];let h=a;return e.forEach((f,m)=>{if(m===0){h+=f.width;return}m!==e.length-1&&(h+=c,u.push({id:f.id,style:{left:`${h}px`}}),h+=f.width)}),u}function JNe(t){if(t.length<3)return console.warn("[Distribution] Need at least 3 elements to distribute"),[];const e=[...t].sort((f,m)=>f.top-m.top),n=e[0],r=e[e.length-1],i=e.reduce((f,m)=>f+m.height,0),a=n.top,c=(r.top+r.height-a-i)/(e.length-1),u=[];let h=a;return e.forEach((f,m)=>{if(m===0){h+=f.height;return}m!==e.length-1&&(h+=c,u.push({id:f.id,style:{top:`${h}px`}}),h+=f.height)}),u}function QNe(t,e,n){if(t.length<3)return console.warn("[Distribution] Need at least 3 elements to distribute"),[];const r=t.map(s=>e.get(s)).filter(s=>s!==void 0);if(r.length<3)return console.warn("[Distribution] Not enough valid elements to distribute"),[];const i=YNe(r);if(i.length<3)return console.warn("[Distribution] Elements missing position/size properties, cannot distribute"),[];const a=n==="horizontal"?ZNe(i):JNe(i);return console.log(` [Distribution] Distributed ${a.length} elements ${n}ly`),a}function GA(t,e,n){if(t.length===0)return;const r=t.map(i=>{const a=n.get(i);return a?{elementId:i,prevProps:a.props,newProps:{...a.props,...e}}:null}).filter(i=>i!==null);r.length!==0&&(Ni.addEntry({type:"batch",elementId:t[0],elementIds:t,data:{batchUpdates:r}}),console.log(` [History] Tracked batch update for ${r.length} elements`))}function eDe(t,e){e.length!==0&&(Ni.addEntry({type:"group",elementId:t.id,elementIds:e.map(n=>n.id),data:{element:t,elements:e,groupData:{groupId:t.id,childIds:e.map(n=>n.id)}}}),console.log(` [History] Tracked group creation: ${t.id} with ${e.length} children`))}function tDe(t,e,n){e.length!==0&&(Ni.addEntry({type:"ungroup",elementId:t,elementIds:e.map(r=>r.id),data:{element:n,prevElements:e,groupData:{groupId:t,childIds:e.map(r=>r.id)}}}),console.log(` [History] Tracked ungroup: ${t} with ${e.length} children`))}function nDe(t){t.length!==0&&(t.forEach(e=>{Ni.addEntry({type:"remove",elementId:e.id,data:{element:e,childElements:e.children}})}),console.log(` [History] Tracked multi-delete for ${t.length} elements`))}function zO(t){if(t.length===0)return;const[e,...n]=t;Ni.addEntry({type:"add",elementId:e.id,elementIds:t.map(r=>r.id),data:{element:e,childElements:n,elements:t}}),console.log(` [History] Tracked multi-paste: single batch entry for ${t.length} elements`)}const rDe=T.memo(function({selectedElement:e}){const[n,r]=T.useState(null),[i,a]=T.useState(!0),s=Eo(u=>u.mode),o=T.useMemo(()=>{const u=$e.getState().elementsMap.get(e.id);return{layoutId:u?.layout_id||null,pageId:u?.page_id||null,editMode:s}},[e.id,s]);T.useEffect(()=>{let u=!0;if(!e){Promise.resolve().then(()=>{u&&(r(null),a(!1))});return}return Promise.resolve().then(()=>{u&&(a(!0),BNe(e.type,o).then(h=>{u&&(r(()=>h),a(!1))}).catch(h=>{u&&(r(null),a(!1))}))}),()=>{u=!1}},[e.type,o.editMode]);const c=T.useCallback(u=>{ur.getState().updateProperties(u)},[]);return i?l.jsx(IY,{message:"  ...",description:`${e.type}   `}):n?l.jsx(n,{elementId:e.id,currentProps:e.properties,onUpdate:c}):l.jsx(ya,{message:"    ",description:`'${e.type}'     .`})},(t,e)=>{const n=t.selectedElement,r=e.selectedElement;return!(n.id!==r.id||n.type!==r.type||n.customId!==r.customId||JSON.stringify(n.properties)!==JSON.stringify(r.properties)||JSON.stringify(n.style)!==JSON.stringify(r.style)||JSON.stringify(n.dataBinding)!==JSON.stringify(r.dataBinding)||JSON.stringify(n.events)!==JSON.stringify(r.events))});function iDe({isActive:t}){return t?l.jsx(aDe,{}):null}function aDe(){const t=ur(Z=>Z.selectedElement),e=$e.getState().removeElement,n=$e.getState().setSelectedElement,r=$e.getState().updateElementProps,i=$e.getState().addElement,a=$e.getState().updateElement,s=$e.getState().setSelectedElements,o=T.useCallback(()=>$e.getState().elementsMap,[]),c=T.useCallback(()=>$e.getState().currentPageId,[]),u=T.useCallback(()=>$e.getState().selectedElementIds||[],[]),h=T.useCallback(()=>$e.getState().multiSelectMode||!1,[]),f=T.useMemo(()=>{if(!t)return[];const Z=$e.getState().currentPageId;if(!Z)return[];const K=$e.getState().getPageElements;return K(Z)},[t]),m=T.useMemo(()=>{if(!t)return[];const Z=$e.getState().selectedElementIds||[];return f.filter(K=>Z.includes(K.id))},[t,f]),g=$e(Z=>Z.multiSelectMode)||!1,v=$e(Z=>Z.selectedElementIds),x=T.useMemo(()=>v||[],[v]),_=$e(Z=>Z.currentPageId),[w,S]=T.useState(!1),{copy:E,paste:A}=JY({onPaste:Z=>{ur.getState().updateProperties(Z)},name:"properties"}),N=T.useCallback(async()=>{t?.properties&&await E(t.properties)},[t,E]),P=T.useCallback(async()=>{await A()},[A]),R=T.useCallback(async()=>{const Z=u();if(console.log("[Copy] Starting copy operation...",{selectedElementIds:Z}),Z.length===0){console.warn("[Copy] No elements selected");return}try{console.log("[Copy] Calling copyMultipleElements...");const K=o(),X=OO(Z,K);console.log("[Copy] Copied data:",{elementCount:X.elements.length,rootIds:X.rootIds,externalParents:X.externalParents.size}),console.log("[Copy] Serializing to JSON...");const ne=VNe(X);console.log("[Copy] JSON length:",ne.length,"bytes"),console.log("[Copy] Writing to clipboard..."),await navigator.clipboard.writeText(ne),console.log(` [Copy] Successfully copied ${Z.length} elements to clipboard`)}catch(K){console.error(" [Copy] Failed to copy elements:",K)}},[u,o]),D=T.useCallback(async()=>{const Z=c();if(console.log("[Paste] Starting paste operation...",{currentPageId:Z}),!Z){console.warn("[Paste] No current page selected");return}try{console.log("[Paste] Reading from clipboard...");const K=await navigator.clipboard.readText();console.log("[Paste] Clipboard text length:",K.length,"bytes"),console.log("[Paste] First 100 chars:",K.substring(0,100)),console.log("[Paste] Deserializing clipboard data...");const X=HNe(K);if(!X){console.warn("[Paste] Clipboard does not contain valid XStudio element data");return}console.log("[Paste] Deserialized data:",{elementCount:X.elements.length,rootIds:X.rootIds,externalParents:X.externalParents.size}),console.log("[Paste] Creating new elements with offset...");const ne=FO(X,Z,{x:10,y:10});if(console.log("[Paste] New elements created:",ne.length),ne.length===0){console.warn("[Paste] No elements to paste");return}console.log("[Paste] Adding elements to store..."),await Promise.all(ne.map(G=>(console.log("[Paste] Adding element:",G.id,G.tag),i(G)))),zO(ne),console.log(` [Paste] Successfully pasted ${ne.length} elements`)}catch(K){console.error(" [Paste] Failed to paste elements:",K)}},[c,i]),k=T.useCallback(async()=>{const Z=u();if(confirm(`${Z.length}   ?`))try{console.log(`[DeleteAll] Deleting ${Z.length} elements`);const K=o(),X=Z.map(ne=>K.get(ne)).filter(ne=>ne!==void 0);if(X.length===0){console.warn("[DeleteAll] No elements to delete");return}nDe(X),await Promise.all(Z.map(ne=>e(ne))),console.log(` [DeleteAll] Deleted ${X.length} elements`)}catch(K){console.error(" [DeleteAll] Failed to delete elements:",K)}},[u,o,e]),L=T.useCallback(()=>{n(null),console.log("Selection cleared")},[n]),$=T.useCallback(async Z=>{try{const K=u(),X=o();GA(K,Z,X),await Promise.all(K.map(ne=>r(ne,Z))),console.log("Batch update applied to",K.length,"elements")}catch(K){console.error("Failed to batch update properties:",K)}},[u,o,r]),B=T.useCallback(Z=>{Z.length>0?(s(Z),console.log(` [Filter] Applied filter, selected ${Z.length} elements`)):Z.length===0&&(n(null),console.log(" [Filter] No elements match filter, cleared selection"))},[n,s]),q=T.useCallback(async()=>{const Z=h(),K=u(),X=c();if(!Z||K.length===0||!X){console.warn("[Duplicate] No elements selected or no page active");return}try{console.log(`[Duplicate] Duplicating ${K.length} elements`);const ne=o(),G=OO(K,ne),te=FO(G,X,{x:10,y:10});if(te.length===0){console.warn("[Duplicate] No elements to duplicate");return}await Promise.all(te.map(pe=>i(pe))),zO(te);const ae=te.map(pe=>pe.id);s(ae),console.log(` [Duplicate] Duplicated and selected ${te.length} elements`)}catch(ne){console.error(" [Duplicate] Failed to duplicate elements:",ne)}},[h,u,c,o,i,s]),U=T.useCallback(()=>{const Z=c();if(!Z){console.warn("[SelectAll] No page selected");return}const K=$e.getState().getPageElements,X=K(Z);if(X.length===0){console.warn("[SelectAll] No elements on current page");return}const ne=X.map(G=>G.id);s(ne),console.log(` [SelectAll] Selected ${ne.length} elements`)},[c,s]),J=T.useCallback(()=>{n(null),console.log(" [Esc] Selection cleared")},[n]),O=T.useCallback(Z=>{const K=h(),X=u();if(!K||X.length===0)return;Z.preventDefault();const ne=X.indexOf(t?.id||"");let G;Z.shiftKey?G=ne<=0?X.length-1:ne-1:G=ne>=X.length-1?0:ne+1;const te=X[G],pe=o().get(te);pe&&(n(te,pe.props),console.log(` [Tab] Navigated to element ${G+1}/${X.length}:`,pe.tag))},[h,u,t,o,n]),z=T.useCallback(async()=>{if(!g||x.length<2||!_){console.warn("[Group] Need at least 2 elements selected");return}try{console.log("[Group] Grouping",x.length,"elements");const Z=o(),{groupElement:K,updatedChildren:X}=GNe(x,Z,_);await i(K),await Promise.all(X.map(async ne=>{await a(ne.id,{parent_id:ne.parent_id,order_num:ne.order_num});const{error:G}=await zr.from("elements").update({parent_id:ne.parent_id,order_num:ne.order_num,updated_at:new Date().toISOString()}).eq("id",ne.id);G?console.error(` [Group] Failed to save child ${ne.id} to DB:`,G):console.log(` [Group] Saved child ${ne.id} to DB: parent_id=${ne.parent_id}`)})),eDe(K,X),n(K.id,K.props),console.log(` [Group] Created group ${K.id} with ${X.length} children`)}catch(Z){console.error(" [Group] Failed to create group:",Z)}},[g,x,_,o,i,a,n]),V=T.useCallback(async()=>{if(!t||t.type!=="Group"){console.warn("[Ungroup] Selected element is not a Group");return}try{console.log("[Ungroup] Ungrouping element",t.id);const Z=o(),K=Z.get(t.id),{updatedChildren:X,groupIdToDelete:ne}=WNe(t.id,Z);K&&tDe(ne,X,K),await Promise.all(X.map(async G=>{await a(G.id,{parent_id:G.parent_id,order_num:G.order_num});const{error:te}=await zr.from("elements").update({parent_id:G.parent_id,order_num:G.order_num,updated_at:new Date().toISOString()}).eq("id",G.id);te?console.error(` [Ungroup] Failed to save child ${G.id} to DB:`,te):console.log(` [Ungroup] Saved child ${G.id} to DB: parent_id=${G.parent_id}`)})),await e(ne),X.length>0?n(X[0].id,X[0].props):n(null),console.log(` [Ungroup] Ungrouped ${X.length} elements`)}catch(Z){console.error(" [Ungroup] Failed to ungroup:",Z)}},[t,o,a,e,n]),H=T.useCallback(async Z=>{if(!g||x.length<2){console.warn("[Alignment] Need at least 2 elements selected");return}try{console.log(`[Alignment] Aligning ${x.length} elements to ${Z}`);const K=o(),X=XNe(x,K,Z);if(X.length===0){console.warn("[Alignment] No updates generated");return}const ne={};X.forEach(G=>{ne[G.id]=G.style}),GA(x,ne,K),await Promise.all(X.map(G=>{const te=K.get(G.id);if(te){const ae={...te.props.style||{},...G.style};return r(G.id,{style:ae})}return Promise.resolve()})),console.log(` [Alignment] Aligned ${X.length} elements to ${Z}`)}catch(K){console.error(" [Alignment] Failed to align:",K)}},[g,x,o,r]),ee=T.useCallback(async Z=>{if(!g||x.length<3){console.warn("[Distribution] Need at least 3 elements selected");return}try{console.log(`[Distribution] Distributing ${x.length} elements ${Z}ly`);const K=o(),X=QNe(x,K,Z);if(X.length===0){console.warn("[Distribution] No updates generated");return}const ne={};X.forEach(G=>{ne[G.id]=G.style}),GA(x,ne,K),await Promise.all(X.map(G=>{const te=K.get(G.id);if(te){const ae={...te.props.style||{},...G.style};return r(G.id,{style:ae})}return Promise.resolve()})),console.log(` [Distribution] Distributed ${X.length} elements ${Z}ly`)}catch(K){console.error(" [Distribution] Failed to distribute:",K)}},[g,x,o,r]),Y=T.useMemo(()=>[{key:"c",modifier:"cmdShift",handler:N,description:"Copy Properties"},{key:"v",modifier:"cmdShift",handler:P,description:"Paste Properties"},{key:"c",modifier:"cmd",handler:R,description:"Copy All Elements"},{key:"v",modifier:"cmd",handler:D,description:"Paste Elements"},{key:"d",modifier:"cmd",handler:q,description:"Duplicate Selection"},{key:"a",modifier:"cmd",handler:U,description:"Select All"},{key:"Escape",modifier:"none",handler:J,description:"Clear Selection"},{key:"g",modifier:"cmd",handler:z,description:"Group Selection"},{key:"g",modifier:"cmdShift",handler:V,description:"Ungroup Selection"},{key:"l",modifier:"cmdShift",handler:()=>H("left"),description:"Align Left"},{key:"h",modifier:"cmdShift",handler:()=>H("center"),description:"Align Horizontal Center"},{key:"r",modifier:"cmdShift",handler:()=>H("right"),description:"Align Right"},{key:"t",modifier:"cmdShift",handler:()=>H("top"),description:"Align Top"},{key:"m",modifier:"cmdShift",handler:()=>H("middle"),description:"Align Vertical Middle"},{key:"b",modifier:"cmdShift",handler:()=>H("bottom"),description:"Align Bottom"},{key:"d",modifier:"cmdShift",handler:()=>ee("horizontal"),description:"Distribute Horizontally"},{key:"v",modifier:"altShift",handler:()=>ee("vertical"),description:"Distribute Vertically"},{key:"?",modifier:"cmd",handler:()=>S(Z=>!Z),description:"Toggle Keyboard Shortcuts Help"}],[N,P,R,D,q,U,J,z,V,H,ee]);return ZY(Y,[N,P,R,D,q,U,J,z,V,H,ee]),T.useEffect(()=>{const Z=K=>{const X=$e.getState().multiSelectMode||!1,ne=$e.getState().selectedElementIds||[];K.key==="Tab"&&X&&ne.length>0&&O(K)};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[O]),t?l.jsxs("div",{className:"panel",children:[l.jsx(Ul,{icon:l.jsx(Iu,{size:16}),title:g?`${x.length}  `:t.type,actions:l.jsxs(l.Fragment,{children:[l.jsx(Ut,{variant:"ghost",className:"iconButton",onPress:N,"aria-label":"Copy properties",isDisabled:!t?.properties||Object.keys(t.properties).length===0,children:l.jsx(_R,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(Ut,{variant:"ghost",className:"iconButton",onPress:P,"aria-label":"Paste properties",children:l.jsx(xR,{color:se.color,size:se.size,strokeWidth:se.stroke})})]})}),l.jsxs("div",{className:"panel-contents",children:[g&&x.length>1&&l.jsxs(l.Fragment,{children:[l.jsx(YMe,{count:x.length,primaryElementId:x[0],primaryElementType:t?.type,onCopyAll:R,onPasteAll:D,onDeleteAll:k,onClearSelection:L,onGroupSelection:z,onAlign:H,onDistribute:ee}),l.jsx(t4e,{selectedElements:m,onBatchUpdate:$}),l.jsx(n4e,{allElements:f,onFilteredElements:B}),t&&(()=>{const Z=f.find(K=>K.id===t.id);return Z?l.jsx(p4e,{referenceElement:Z,allElements:f,onSelect:K=>{s(K),_&&P1.addSelection(K,f,_)}}):null})(),l.jsx(v4e,{currentPageId:_,onRestore:Z=>{s(Z)}})]}),l.jsx(rDe,{selectedElement:t}),t&&!g&&l.jsx(Vk,{elementId:t.id,currentSlotName:t.properties?.slot_name,onSlotChange:Z=>{ur.getState().updateProperties({slot_name:Z})}}),l.jsx(i4e,{isOpen:w,onClose:()=>S(!1)})]})]}):l.jsx(ya,{message:" "})}function Jy(){const{copy:t,paste:e}=JY({onPaste:g=>{const v={};Object.entries(g).forEach(([x,_])=>{_!=null&&(v[x]=String(_))}),ur.getState().updateInlineStyles(v)},name:"styles"}),n=T.useCallback((g,v)=>{ur.getState().updateInlineStyle(g,v)},[]),r=T.useCallback(g=>{ur.getState().updateInlineStyles(g)},[]),i=T.useCallback(g=>{const v={"align-vertical-start":"flex-start","align-vertical-center":"center","align-vertical-end":"flex-end"};ur.getState().updateInlineStyles({display:"flex",alignItems:v[g]||"flex-start"})},[]),a=T.useCallback(g=>{const v={"align-horizontal-start":"flex-start","align-horizontal-center":"center","align-horizontal-end":"flex-end"};ur.getState().updateInlineStyles({display:"flex",justifyContent:v[g]||"flex-start"})},[]),s=T.useCallback(g=>{g==="block"?ur.getState().updateInlineStyles({display:"block",flexDirection:"",justifyContent:"",alignItems:"",flexWrap:"",gap:""}):g==="row"?ur.getState().updateInlineStyles({display:"flex",flexDirection:"row"}):g==="column"&&ur.getState().updateInlineStyles({display:"flex",flexDirection:"column"})},[]),o=T.useCallback((g,v)=>{const _={leftTop:{horizontal:"flex-start",vertical:"flex-start"},centerTop:{horizontal:"center",vertical:"flex-start"},rightTop:{horizontal:"flex-end",vertical:"flex-start"},leftCenter:{horizontal:"flex-start",vertical:"center"},centerCenter:{horizontal:"center",vertical:"center"},rightCenter:{horizontal:"flex-end",vertical:"center"},leftBottom:{horizontal:"flex-start",vertical:"flex-end"},centerBottom:{horizontal:"center",vertical:"flex-end"},rightBottom:{horizontal:"flex-end",vertical:"flex-end"}}[g];_&&(v==="column"?ur.getState().updateInlineStyles({display:"flex",justifyContent:_.vertical,alignItems:_.horizontal}):ur.getState().updateInlineStyles({display:"flex",justifyContent:_.horizontal,alignItems:_.vertical}))},[]),c=T.useCallback(g=>{ur.getState().updateInlineStyles({display:"flex",justifyContent:g})},[]),u=T.useCallback(g=>{ur.getState().updateInlineStyles({display:"flex",flexWrap:g})},[]),h=T.useCallback(g=>{const v={};g.forEach(x=>v[x]=""),ur.getState().updateInlineStyles(v)},[]),f=T.useCallback(async g=>t(g),[t]),m=T.useCallback(async()=>e(),[e]);return{updateStyle:n,updateStyles:r,resetStyles:h,copyStyles:f,pasteStyles:m,handleVerticalAlignment:i,handleHorizontalAlignment:a,handleFlexDirection:s,handleFlexAlignment:o,handleJustifyContentSpacing:c,handleFlexWrap:u}}const sDe=["width","height","top","left","right","bottom"];function Vn(t,e,n){return t?t.style&&t.style[e]!==void 0?String(t.style[e]):!sDe.includes(e)&&t.computedStyle&&t.computedStyle[e]!==void 0?String(t.computedStyle[e]):n:n}function oDe(t){if(!t)return[];const e=Vn(t,"display",""),n=Vn(t,"justifyContent",""),r=Vn(t,"alignItems",""),i=Vn(t,"flexDirection","row");if(e!=="flex")return[];if(["space-around","space-between","space-evenly"].includes(n))return[];let s,o;i==="column"?(s=r,o=n):(s=n,o=r);const c=["flex-start","center","flex-end"];if(!c.includes(s)||!c.includes(o))return[];const u={"flex-start:flex-start":"leftTop","center:flex-start":"centerTop","flex-end:flex-start":"rightTop","flex-start:center":"leftCenter","center:center":"centerCenter","flex-end:center":"rightCenter","flex-start:flex-end":"leftBottom","center:flex-end":"centerBottom","flex-end:flex-end":"rightBottom"},h=`${s}:${o}`;return u[h]?[u[h]]:[]}function lDe(t){if(!t)return["block"];const e=Vn(t,"display",""),n=Vn(t,"flexDirection","");return e!=="flex"?["block"]:n==="column"?["column"]:["row"]}function cDe(t){if(!t)return[];const e=Vn(t,"display",""),n=Vn(t,"justifyContent","");return e!=="flex"?[]:n==="space-around"?["space-around"]:n==="space-between"?["space-between"]:n==="space-evenly"?["space-evenly"]:[]}function uDe(t){if(!t)return[];const e=Vn(t,"display",""),n=Vn(t,"flexWrap","");return e!=="flex"?[]:n==="wrap"?["wrap"]:n==="wrap-reverse"?["wrap-reverse"]:["nowrap"]}function dDe({selectedElement:t}){const{updateStyle:e,resetStyles:n}=Jy(),r=()=>{n(["width","height","top","left"])};return l.jsxs($a,{id:"transform",title:"Transform",onReset:r,children:[l.jsx(rl,{icon:gN,label:"Width",className:"width",value:Vn(t,"width","auto"),units:["reset","px","%","rem","em","vh","vw"],onChange:i=>e("width",i),min:0,max:9999}),l.jsx(rl,{icon:gN,label:"Height",className:"height",value:Vn(t,"height","auto"),units:["reset","px","%","rem","em","vh","vw"],onChange:i=>e("height",i),min:0,max:9999}),l.jsx("div",{className:"fieldset-actions actions-size",children:l.jsx(Ut,{children:l.jsx(Ef,{color:se.color,size:se.size,strokeWidth:se.stroke})})}),l.jsx(rl,{icon:Qte,label:"Left",className:"left",value:Vn(t,"left","auto"),units:["reset","px","%","rem","em","vh","vw"],onChange:i=>e("left",i),min:-9999,max:9999}),l.jsx(rl,{icon:Xte,label:"Top",className:"top",value:Vn(t,"top","auto"),units:["reset","px","%","rem","em","vh","vw"],onChange:i=>e("top",i),min:-9999,max:9999}),l.jsx("div",{className:"fieldset-actions actions-position",children:l.jsx(Ut,{children:l.jsx(Ef,{color:se.color,size:se.size,strokeWidth:se.stroke})})})]})}function UO(t,e){return{top:Vn(t,`${e}Top`,""),right:Vn(t,`${e}Right`,""),bottom:Vn(t,`${e}Bottom`,""),left:Vn(t,`${e}Left`,"")}}function VO({values:t,onChange:e}){const n=(i,a)=>{const s=a.replace(/[^0-9.-]/g,"");s===""||s==="-"?e(i,""):e(i,`${s}px`)},r=i=>i.replace("px","");return l.jsxs("div",{className:"four-way-grid",children:[l.jsx(Pn,{className:"react-aria-Input four-way-top",value:r(t.top),onChange:i=>n("Top",i.target.value),placeholder:"T","aria-label":"Top"}),l.jsx(Pn,{className:"react-aria-Input four-way-left",value:r(t.left),onChange:i=>n("Left",i.target.value),placeholder:"L","aria-label":"Left"}),l.jsx(Pn,{className:"react-aria-Input four-way-right",value:r(t.right),onChange:i=>n("Right",i.target.value),placeholder:"R","aria-label":"Right"}),l.jsx(Pn,{className:"react-aria-Input four-way-bottom",value:r(t.bottom),onChange:i=>n("Bottom",i.target.value),placeholder:"B","aria-label":"Bottom"})]})}function hDe({selectedElement:t}){const[e,n]=T.useState(!1),{updateStyle:r,resetStyles:i,handleFlexDirection:a,handleFlexAlignment:s,handleJustifyContentSpacing:o,handleFlexWrap:c}=Jy(),u=T.useMemo(()=>UO(t,"padding"),[t]),h=T.useMemo(()=>UO(t,"margin"),[t]),f=()=>{i(["display","flexDirection","flexWrap","alignItems","justifyContent","gap","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft"])},m=(v,x)=>{r(`padding${v}`,x)},g=(v,x)=>{r(`margin${v}`,x)};return l.jsxs($a,{id:"layout",title:"Layout",onReset:f,children:[l.jsxs("div",{className:"layout-direction",children:[l.jsxs("div",{className:"direction-controls flex-direction",children:[l.jsx("legend",{className:"fieldset-legend",children:"Direction"}),l.jsxs(Ll,{"aria-label":"Flex direction",indicator:!0,selectedKeys:lDe(t),onSelectionChange:v=>{const x=Array.from(v)[0];a(x)},children:[l.jsx(In,{id:"block",children:l.jsx(Of,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(In,{id:"row",children:l.jsx(bae,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(In,{id:"column",children:l.jsx(vae,{color:se.color,size:se.size,strokeWidth:se.stroke})})]})]}),l.jsxs("div",{className:"direction-alignment-grid flex-alignment",children:[l.jsx("legend",{className:"fieldset-legend",children:"Alignment"}),l.jsxs(Ll,{"aria-label":"Flex alignment",indicator:!0,selectionMode:"single",selectedKeys:oDe(t),onSelectionChange:v=>{const x=Array.from(v)[0];if(x){const _=Vn(t,"flexDirection","row");s(x,_)}},children:[l.jsx(In,{id:"leftTop",children:l.jsx("span",{className:"alignment-dot"})}),l.jsx(In,{id:"centerTop",children:l.jsx("span",{className:"alignment-dot"})}),l.jsx(In,{id:"rightTop",children:l.jsx("span",{className:"alignment-dot"})}),l.jsx(In,{id:"leftCenter",children:l.jsx("span",{className:"alignment-dot"})}),l.jsx(In,{id:"centerCenter",children:l.jsx("span",{className:"alignment-dot"})}),l.jsx(In,{id:"rightCenter",children:l.jsx("span",{className:"alignment-dot"})}),l.jsx(In,{id:"leftBottom",children:l.jsx("span",{className:"alignment-dot"})}),l.jsx(In,{id:"centerBottom",children:l.jsx("span",{className:"alignment-dot"})}),l.jsx(In,{id:"rightBottom",children:l.jsx("span",{className:"alignment-dot"})})]})]}),l.jsx("div",{className:"fieldset-actions",children:l.jsx(Ut,{children:l.jsx(pN,{color:se.color,size:se.size,strokeWidth:se.stroke})})}),l.jsxs("div",{className:"justify-control justify-content",children:[l.jsx("legend",{className:"fieldset-legend",children:"Justify"}),l.jsxs(Ll,{"aria-label":"Justify content alignment",indicator:!0,selectionMode:"single",selectedKeys:cDe(t),onSelectionChange:v=>{const x=Array.from(v)[0];x&&o(x)},children:[l.jsx(In,{id:"space-around",children:l.jsx(c5,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(In,{id:"space-between",children:l.jsx(vre,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(In,{id:"space-evenly",children:l.jsx(c5,{color:se.color,size:se.size,strokeWidth:se.stroke})})]})]}),l.jsxs("div",{className:"justify-control flex-wrap",children:[l.jsx("legend",{className:"fieldset-legend",children:"Wrap"}),l.jsxs(Ll,{"aria-label":"Flex wrap",indicator:!0,selectionMode:"single",selectedKeys:uDe(t),onSelectionChange:v=>{const x=Array.from(v)[0];x&&c(x)},children:[l.jsx(In,{id:"wrap",children:l.jsx(jae,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(In,{id:"wrap-reverse",children:l.jsx(Zne,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(In,{id:"nowrap",children:l.jsx(rne,{color:se.color,size:se.size,strokeWidth:se.stroke})})]})]}),l.jsx(rl,{icon:pN,label:"Gap",className:"displayGap",value:Vn(t,"gap","0px"),units:["reset","px","rem","em"],onChange:v=>r("gap",v),min:0,max:500})]}),e?l.jsxs("div",{className:"layout-container layout-container-expanded",children:[l.jsxs("fieldset",{className:"properties-aria property-unit-input layout-padding",children:[l.jsx("legend",{className:"fieldset-legend",children:"Padding"}),l.jsx("div",{className:"react-aria-Group layout-spacing",children:l.jsx(VO,{values:u,onChange:m})})]}),l.jsxs("fieldset",{className:"properties-aria property-unit-input layout-margin",children:[l.jsx("legend",{className:"fieldset-legend",children:"Margin"}),l.jsx("div",{className:"react-aria-Group layout-spacing",children:l.jsx(VO,{values:h,onChange:g,allowNegative:!0})})]}),l.jsx("div",{className:"fieldset-actions actions-spacing",children:l.jsx(Ut,{onPress:()=>n(!1),"aria-label":"Collapse spacing to single input",children:l.jsx(aie,{color:se.color,size:se.size,strokeWidth:se.stroke})})})]}):l.jsxs("div",{className:"layout-container",children:[l.jsx(rl,{icon:fae,label:"Padding",className:"padding",value:Vn(t,"padding","0px"),units:["reset","px","rem","em"],onChange:v=>r("padding",v),min:0,max:500}),l.jsx(rl,{icon:pre,label:"Margin",className:"margin",value:Vn(t,"margin","0px"),units:["reset","px","rem","em"],onChange:v=>r("margin",v),min:0,max:500}),l.jsx("div",{className:"fieldset-actions actions-spacing",children:l.jsx(Ut,{onPress:()=>n(!0),"aria-label":"Expand spacing to 4-way input",children:l.jsx(mN,{color:se.color,size:se.size,strokeWidth:se.stroke})})})]})]})}function fDe({selectedElement:t}){const{updateStyle:e,resetStyles:n}=Jy(),r=()=>{n(["backgroundColor","borderColor","borderWidth","borderRadius","borderStyle"])};return l.jsxs($a,{id:"appearance",title:"Appearance",onReset:r,children:[l.jsxs("div",{className:"style-background",children:[l.jsx(y2,{icon:Of,label:"Background Color",className:"background-color",value:Vn(t,"backgroundColor","#FFFFFF"),onChange:i=>e("backgroundColor",i),placeholder:"#FFFFFF"}),l.jsx("div",{className:"fieldset-actions actions-icon",children:l.jsx(Ut,{children:l.jsx(Ef,{color:se.color,size:se.size,strokeWidth:se.stroke})})})]}),l.jsxs("div",{className:"style-border",children:[l.jsx(y2,{icon:Of,label:"Color",className:"border-color",value:Vn(t,"borderColor","#000000"),onChange:i=>e("borderColor",i),placeholder:"#000000"}),l.jsx(rl,{icon:iae,label:"Border Width",className:"border-width",value:Vn(t,"borderWidth","0px"),units:["reset","px"],onChange:i=>e("borderWidth",i),min:0,max:100}),l.jsx(rl,{icon:dae,label:"Border Radius",className:"border-radius",value:Vn(t,"borderRadius","0px"),units:["reset","px","%","rem","em"],onChange:i=>e("borderRadius",i),min:0,max:500}),l.jsx(ja,{icon:nae,label:"Border Style",className:"border-style",value:Vn(t,"borderStyle","solid"),options:[{value:"reset",label:"Reset"},{value:"none",label:"none"},{value:"solid",label:"solid"},{value:"dashed",label:"dashed"},{value:"dotted",label:"dotted"},{value:"double",label:"double"},{value:"groove",label:"groove"},{value:"ridge",label:"ridge"},{value:"inset",label:"inset"},{value:"outset",label:"outset"}],onChange:i=>e("borderStyle",i)}),l.jsx("div",{className:"fieldset-actions actions-icon",children:l.jsx(Ut,{children:l.jsx(Ef,{color:se.color,size:se.size,strokeWidth:se.stroke})})})]})]})}function pDe({selectedElement:t}){const{updateStyle:e,resetStyles:n}=Jy(),r=()=>{n(["fontFamily","fontSize","fontWeight","fontStyle","lineHeight","letterSpacing","color","textAlign","textDecoration","textTransform","verticalAlign"])};return l.jsxs($a,{id:"typography",title:"Typography",onReset:r,children:[l.jsx(ja,{icon:Pu,label:"Font Family",className:"font-family",value:Vn(t,"fontFamily","Arial"),options:[{value:"reset",label:"Reset"},{value:"Arial",label:"Arial"},{value:"Helvetica",label:"Helvetica"},{value:"Times New Roman",label:"Times New Roman"},{value:"Georgia",label:"Georgia"},{value:"Courier New",label:"Courier New"},{value:"Verdana",label:"Verdana"}],onChange:i=>e("fontFamily",i)}),l.jsx(y2,{icon:Pu,label:"Color",className:"color",value:Vn(t,"color","#000000"),onChange:i=>e("color",i),placeholder:"#000000"}),l.jsx("div",{className:"fieldset-actions actions-font",children:l.jsx(Ut,{children:l.jsx(Ef,{color:se.color,size:se.size,strokeWidth:se.stroke})})}),l.jsx(rl,{icon:Pu,label:"Font Size",className:"font-size",value:Vn(t,"fontSize","16px"),units:["reset","px","rem","em","pt"],onChange:i=>e("fontSize",i),min:8,max:200}),l.jsx(rl,{icon:Pu,label:"Line Height",className:"line-height",value:Vn(t,"lineHeight","normal"),units:["reset","px","rem","em",""],onChange:i=>e("lineHeight",i),min:0,max:10,allowKeywords:!0}),l.jsx(ja,{icon:Pu,label:"Font Weight",className:"font-weight",value:Vn(t,"fontWeight","normal"),options:[{value:"reset",label:"Reset"},{value:"100",label:"100 - Thin"},{value:"200",label:"200 - Extra Light"},{value:"300",label:"300 - Light"},{value:"400",label:"400 - Normal"},{value:"500",label:"500 - Medium"},{value:"600",label:"600 - Semi Bold"},{value:"700",label:"700 - Bold"},{value:"800",label:"800 - Extra Bold"},{value:"900",label:"900 - Black"},{value:"normal",label:"Normal"},{value:"bold",label:"Bold"}],onChange:i=>e("fontWeight",i)}),l.jsx(rl,{icon:Pu,label:"Letter Spacing",className:"letter-spacing",value:Vn(t,"letterSpacing","normal"),units:["reset","px","rem","em"],onChange:i=>e("letterSpacing",i),min:-10,max:10,allowKeywords:!0}),l.jsx("div",{className:"fieldset-actions",children:l.jsx(Ut,{children:l.jsx(Ef,{color:se.color,size:se.size,strokeWidth:se.stroke})})}),l.jsxs("fieldset",{className:"properties-aria text-align",children:[l.jsx("legend",{className:"fieldset-legend",children:"Text Align"}),l.jsxs(Ll,{"aria-label":"Text alignment",indicator:!0,selectedKeys:[Vn(t,"textAlign","left")],onSelectionChange:i=>{const a=Array.from(i)[0];a&&e("textAlign",a)},children:[l.jsx(In,{id:"left",children:l.jsx(AR,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(In,{id:"center",children:l.jsx(n9,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(In,{id:"right",children:l.jsx(r9,{color:se.color,size:se.size,strokeWidth:se.stroke})})]})]}),l.jsxs("fieldset",{className:"properties-aria vertical-align",children:[l.jsx("legend",{className:"fieldset-legend",children:"Vertical Align"}),l.jsxs(Ll,{"aria-label":"Vertical alignment",indicator:!0,selectedKeys:[Vn(t,"verticalAlign","baseline")],onSelectionChange:i=>{const a=Array.from(i)[0];a&&e("verticalAlign",a)},children:[l.jsx(In,{id:"top",children:l.jsx($B,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(In,{id:"middle",children:l.jsx(RB,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(In,{id:"bottom",children:l.jsx(IB,{color:se.color,size:se.size,strokeWidth:se.stroke})})]})]}),l.jsx("div",{className:"fieldset-actions",children:l.jsx(Ut,{children:l.jsx(Ef,{color:se.color,size:se.size,strokeWidth:se.stroke})})}),l.jsxs("fieldset",{className:"properties-aria text-decoration",children:[l.jsx("legend",{className:"fieldset-legend",children:"Text Decoration"}),l.jsxs(Ll,{"aria-label":"Text decoration",indicator:!0,selectedKeys:Vn(t,"textDecoration","none")==="none"?[]:[Vn(t,"textDecoration","none")],onSelectionChange:i=>{const a=Array.from(i)[0];e("textDecoration",a||"none")},children:[l.jsx(In,{id:"overline",children:l.jsx(one,{color:se.color,size:se.size,strokeWidth:se.stroke,style:{transform:"rotate(180deg)"}})}),l.jsx(In,{id:"underline",children:l.jsx(Wae,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(In,{id:"line-through",children:l.jsx(_ae,{color:se.color,size:se.size,strokeWidth:se.stroke})})]})]}),l.jsxs("fieldset",{className:"properties-aria font-style",children:[l.jsx("legend",{className:"fieldset-legend",children:"Font Style"}),l.jsxs(Ll,{"aria-label":"Font style",indicator:!0,selectedKeys:[Vn(t,"fontStyle","normal")],onSelectionChange:i=>{const a=Array.from(i)[0];a&&e("fontStyle",a)},children:[l.jsx(In,{id:"normal",children:l.jsx(Nie,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(In,{id:"italic",children:l.jsx(Ire,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(In,{id:"oblique",children:l.jsx(Pu,{color:se.color,size:se.size,strokeWidth:se.stroke,style:{fontStyle:"oblique",transform:"skewX(-10deg)"}})})]})]}),l.jsx("div",{className:"fieldset-actions",children:l.jsx(Ut,{children:l.jsx(Ef,{color:se.color,size:se.size,strokeWidth:se.stroke})})}),l.jsxs("fieldset",{className:"properties-aria text-transform",children:[l.jsx("legend",{className:"fieldset-legend",children:"Text Transform"}),l.jsxs(Ll,{"aria-label":"Text transform",indicator:!0,selectedKeys:Vn(t,"textTransform","none")==="none"?[]:[Vn(t,"textTransform","none")],onSelectionChange:i=>{const a=Array.from(i)[0];e("textTransform",a||"none")},children:[l.jsx(In,{id:"uppercase",children:l.jsx(Cne,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(In,{id:"lowercase",children:l.jsx(_ne,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(In,{id:"capitalize",children:l.jsx(Sne,{color:se.color,size:se.size,strokeWidth:se.stroke})})]})]})]})}function QY(t){return!t||!t.style?[]:Object.keys(t.style).filter(e=>t.style[e]!==void 0)}const mDe=[{value:"auto",label:"auto"},{value:"Arial",label:"Arial"},{value:"Helvetica",label:"Helvetica"},{value:"Times New Roman",label:"Times New Roman"},{value:"Georgia",label:"Georgia"},{value:"Courier New",label:"Courier New"},{value:"Verdana",label:"Verdana"}],gDe=[{value:"auto",label:"auto"},{value:"100",label:"100 - Thin"},{value:"200",label:"200 - Extra Light"},{value:"300",label:"300 - Light"},{value:"400",label:"400 - Normal"},{value:"500",label:"500 - Medium"},{value:"600",label:"600 - Semi Bold"},{value:"700",label:"700 - Bold"},{value:"800",label:"800 - Extra Bold"},{value:"900",label:"900 - Black"},{value:"normal",label:"Normal"},{value:"bold",label:"Bold"}],vDe=[{value:"auto",label:"auto"},{value:"none",label:"none"},{value:"solid",label:"solid"},{value:"dashed",label:"dashed"},{value:"dotted",label:"dotted"},{value:"double",label:"double"},{value:"groove",label:"groove"},{value:"ridge",label:"ridge"},{value:"inset",label:"inset"},{value:"outset",label:"outset"}];function yDe({selectedElement:t}){const e=QY(t),{updateStyle:n}=Jy();if(e.length===0)return l.jsx($a,{title:"Modified Styles",children:l.jsxs("div",{className:"empty-state",children:[l.jsx("p",{className:"empty-message",children:"No modified styles"}),l.jsx("p",{className:"empty-hint",children:"Edit any style property to see it here"})]})});const r={layout:e.filter(a=>["display","flexDirection","alignItems","justifyContent","gap"].includes(a)),spacing:e.filter(a=>["padding","margin","width","height","top","left","right","bottom"].includes(a)),appearance:e.filter(a=>["backgroundColor","borderColor","borderWidth","borderRadius","borderStyle"].includes(a)),typography:e.filter(a=>["fontFamily","fontSize","fontWeight","fontStyle","lineHeight","letterSpacing","color","textAlign","textDecoration","textTransform","verticalAlign"].includes(a))},i=a=>{const s=t.style?.[a];return s?["backgroundColor","borderColor","color"].includes(a)?l.jsx(y2,{icon:Of,label:f1(a),value:String(s),onChange:o=>n(a,o)},a):a==="fontFamily"?l.jsx(ja,{icon:Pu,label:f1(a),value:String(s),options:mDe,onChange:o=>n(a,o)},a):a==="fontWeight"?l.jsx(ja,{icon:Pu,label:f1(a),value:String(s),options:gDe,onChange:o=>n(a,o)},a):a==="borderStyle"?l.jsx(ja,{icon:Of,label:f1(a),value:String(s),options:vDe,onChange:o=>n(a,o)},a):l.jsx(rl,{icon:gN,label:f1(a),value:String(s),units:bDe(a),onChange:o=>n(a,o),min:xDe(a),max:_De(a)},a):null};return l.jsxs($a,{title:`Modified Styles (${e.length})`,children:[r.layout.length>0&&l.jsxs("div",{className:"modified-category",children:[l.jsx("h4",{className:"category-title",children:"Layout"}),r.layout.map(i)]}),r.spacing.length>0&&l.jsxs("div",{className:"modified-category",children:[l.jsx("h4",{className:"category-title",children:"Spacing"}),r.spacing.map(i)]}),r.appearance.length>0&&l.jsxs("div",{className:"modified-category",children:[l.jsx("h4",{className:"category-title",children:"Appearance"}),r.appearance.map(i)]}),r.typography.length>0&&l.jsxs("div",{className:"modified-category",children:[l.jsx("h4",{className:"category-title",children:"Typography"}),r.typography.map(i)]})]})}function f1(t){return t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim()}function bDe(t){return["width","height","top","left","right","bottom"].includes(t)?["reset","px","%","rem","em","vh","vw"]:["padding","margin","gap"].includes(t)?["reset","px","rem","em"]:["fontSize","lineHeight","letterSpacing"].includes(t)?["reset","px","rem","em","pt"]:["borderWidth"].includes(t)?["reset","px"]:["borderRadius"].includes(t)?["reset","px","%","rem","em"]:["px"]}function xDe(t){return["top","left","right","bottom","letterSpacing"].includes(t)?-9999:0}function _De(t){return["width","height","top","left","right","bottom"].includes(t)?9999:["padding","margin","gap","borderRadius"].includes(t)?500:["fontSize"].includes(t)?200:["borderWidth"].includes(t)?100:["lineHeight","letterSpacing"].includes(t)?10:9999}function wDe({isActive:t}){return t?l.jsx(SDe,{}):null}function SDe(){const t=ur(v=>v.selectedElement),[e,n]=T.useState("all"),{expandAll:r,collapseAll:i,collapsedSections:a,focusMode:s,toggleFocusMode:o}=PY(),{copyStyles:c,pasteStyles:u}=Jy(),h=T.useMemo(()=>t?QY(t).length:0,[t]),f=T.useCallback(async()=>{t?.style&&await c(t.style)},[t,c]),m=T.useCallback(async()=>{await u()},[u]),g=T.useMemo(()=>[{key:"c",modifier:"cmdShift",handler:f,description:"Copy Styles"},{key:"v",modifier:"cmdShift",handler:m,description:"Paste Styles"},{key:"s",modifier:"altShift",handler:o,description:"Toggle Focus Mode"},{key:"s",modifier:"alt",handler:()=>{a.size===4?r():i()},description:"Expand/Collapse All Sections"}],[f,m,o,a,r,i]);return ZY(g,[f,m,o,a,r,i]),t?l.jsxs("div",{className:"panel",children:[l.jsxs("div",{className:"panel-header",children:[l.jsxs(Ll,{indicator:!0,"aria-label":"Style filter",selectionMode:"single",selectedKeys:[e],onSelectionChange:v=>{const x=Array.from(v)[0];n(x)},children:[l.jsx(In,{id:"all",children:"Style"}),l.jsxs(In,{id:"modified",children:["modify ",h>0&&`(${h})`]})]}),l.jsxs("div",{className:"panel-actions",children:[l.jsx(Ut,{variant:"ghost",className:"iconButton",onPress:f,"aria-label":"Copy styles",isDisabled:!t?.style||Object.keys(t.style).length===0,children:l.jsx(_R,{color:se.color,size:se.size,strokeWidth:se.stroke})}),l.jsx(Ut,{variant:"ghost",className:"iconButton",onPress:m,"aria-label":"Paste styles",children:l.jsx(xR,{color:se.color,size:se.size,strokeWidth:se.stroke})})]}),s&&l.jsx("div",{className:"focus-mode-indicator",children:"Focus Mode"})]}),l.jsx("div",{className:"panel-contents",children:e==="all"?l.jsxs(l.Fragment,{children:[l.jsx(dDe,{selectedElement:t}),l.jsx(hDe,{selectedElement:t}),l.jsx(fDe,{selectedElement:t}),l.jsx(pDe,{selectedElement:t})]}):l.jsx(yDe,{selectedElement:t})},t.id)]}):l.jsx(ya,{message:" "})}const EDe=["onClick","onMouseEnter","onMouseLeave","onChange","onSubmit","onFocus","onBlur","onKeyDown","onKeyUp"];function HO(t){return EDe.includes(t)}const WA={mouse:{label:"Mouse Events",events:["onClick","onMouseEnter","onMouseLeave"]},form:{label:"Form Events",events:["onChange","onSubmit","onFocus","onBlur"]},keyboard:{label:"Keyboard Events",events:["onKeyDown","onKeyUp"]}},Hk={navigation:{label:"Navigation",actions:["navigate","scrollTo"]},ui:{label:"UI Control",actions:["toggleVisibility","showModal","hideModal","showToast"]},data:{label:"Data Management",actions:["setState","updateState","copyToClipboard"]},form:{label:"Form Operations",actions:["validateForm","resetForm","submitForm","updateFormField"]},component:{label:"Component Interaction",actions:["setComponentState","triggerComponentAction"]},collection:{label:"Collection Operations",actions:["filterCollection","selectItem","clearSelection"]},dataPanel:{label:"Data Panel",actions:["fetchDataTable","refreshDataTable","executeApi","setVariable","getVariable","loadDataTable","syncComponent","saveToDataTable"]},custom:{label:"Custom",actions:["customFunction","apiCall"]}},mf={onClick:"",onMouseEnter:" ",onMouseLeave:" ",onFocus:"",onBlur:" ",onChange:" ",onSubmit:"",onKeyDown:" ",onKeyUp:" "},Du={navigate:" ",toggle_visibility:"/ ",toggleVisibility:"/ ",update_state:" ",updateState:" ",setState:" ",show_modal:" ",showModal:" ",hide_modal:" ",hideModal:" ",showToast:" ",custom_function:" ",customFunction:" ",scroll_to:" ",scrollTo:" ",copy_to_clipboard:" ",copyToClipboard:" ",validate_form:" ",validateForm:" ",reset_form:" ",resetForm:" ",submitForm:" ",updateFormField:"  ",apiCall:"API ",setComponentState:"  ",triggerComponentAction:"  ",filterCollection:" ",selectItem:" ",clearSelection:" ",fetchDataTable:"DataTable ",refreshDataTable:"DataTable ",executeApi:"API ",setVariable:" ",getVariable:" ",loadDataTable:"DataTable ",syncComponent:" ",saveToDataTable:"DataTable "},CDe={scroll_to:"scrollTo",toggle_visibility:"toggleVisibility",update_state:"updateState",show_modal:"showModal",hide_modal:"hideModal",copy_to_clipboard:"copyToClipboard",validate_form:"validateForm",reset_form:"resetForm",submit_form:"submitForm",update_form_field:"updateFormField",set_state:"setState",set_component_state:"setComponentState",trigger_component_action:"triggerComponentAction",filter_collection:"filterCollection",select_item:"selectItem",clear_selection:"clearSelection",custom_function:"customFunction",api_call:"apiCall",show_toast:"showToast"};function TDe(t){return CDe[t]??t}const MDe=["onClick","onChange","onSubmit","onKeyDown","onKeyUp","onMouseEnter","onMouseLeave","onFocus","onBlur"];function eZ({onSelect:t,registeredTypes:e=[],selectedType:n,allowedTypes:r,isDisabled:i=!1,inline:a=!1}){const[s,o]=T.useState(""),[c,u]=T.useState(!1),h=T.useMemo(()=>{const S=r&&r.length>0?r:Object.keys(mf);return n&&!S.includes(n)?Array.from(new Set([...S,n])):S},[r,n]),f=T.useMemo(()=>h.filter(S=>!e.includes(S)||S===n),[h,e,n]),m=T.useMemo(()=>{const S=[];for(const E of MDe)if(f.includes(E)&&E!==n&&(S.push(E),S.length>=3))break;return S},[f,n]),g=T.useMemo(()=>{if(!s)return f;const S=s.toLowerCase();return f.filter(E=>{const A=mf[E]?.toLowerCase()||"";return E.toLowerCase().includes(S)||A.includes(S)})},[f,s]),v=T.useMemo(()=>{const S=[],E=new Set;typeof WA<"u"?Object.entries(WA).forEach(([,N])=>{const P=N,R=P.events.filter(D=>g.includes(D));R.length>0&&(S.push({category:P.label,events:R}),R.forEach(D=>E.add(D)))}):S.push({category:"Events",events:g});const A=g.filter(N=>!E.has(N));return A.length>0&&typeof WA<"u"&&S.push({category:"Events",events:A}),S},[g]),x=S=>{t(S),o(""),u(!1)},_=T.useRef(null),w=S=>{u(S),S?setTimeout(()=>{_.current?.focus()},50):o("")};return a?l.jsxs(my,{isOpen:c,onOpenChange:w,children:[l.jsxs(Pt,{className:"event-picker-inline-trigger",isDisabled:i,"aria-label":"  ",children:[l.jsx("span",{className:"event-picker-value",children:n?mf[n]||n:"Select event..."}),l.jsx(_i,{size:14})]}),l.jsxs(__,{placement:"bottom start",offset:4,className:"event-picker-popover",showArrow:!1,children:[l.jsxs("div",{className:"event-picker-search",children:[l.jsx(al,{size:14,color:se.color}),l.jsx("input",{ref:_,className:"event-picker-search-input",placeholder:"Search events...",value:s,onChange:S=>o(S.target.value)})]}),l.jsx(Ar,{className:"event-picker-list","aria-label":"  ",selectionMode:"single",onSelectionChange:S=>{const E=Array.from(S)[0];E&&x(E)},children:g.length===0?l.jsx(En,{id:"empty",textValue:"No events found",children:l.jsxs("div",{className:"event-picker-empty",children:[l.jsx(al,{size:16,color:se.color}),l.jsx("span",{children:"No events found"})]})}):v.flatMap(S=>[l.jsx(En,{id:`label-${S.category}`,textValue:S.category,className:"event-group-label-item",children:l.jsx("div",{className:"event-group-label",children:S.category})},`label-${S.category}`),...S.events.map(E=>l.jsxs(En,{id:E,className:"event-item",textValue:mf[E]||E,children:[l.jsx("span",{className:"event-name",children:mf[E]||E}),l.jsx("span",{className:"event-type-code",children:E})]},E))])})]})]}):l.jsxs(my,{isOpen:c,onOpenChange:w,children:[l.jsx(Pt,{className:"iconButton",isDisabled:i||f.length===0,"aria-label":" ",children:l.jsx(oy,{color:se.color,strokeWidth:se.stroke,size:se.size})}),l.jsxs(__,{placement:"bottom end",offset:4,className:"event-picker-popover",showArrow:!1,children:[!s&&m.length>0&&l.jsxs("div",{className:"event-picker-recommended",children:[l.jsxs("div",{className:"event-picker-recommended-header",children:[l.jsx(Vm,{size:12,color:se.color}),l.jsx("span",{children:"Recommended"})]}),l.jsx("div",{className:"event-picker-recommended-list",children:m.map(S=>l.jsx("button",{type:"button",className:"event-picker-recommended-item",onClick:()=>x(S),children:l.jsx("span",{className:"event-name",children:mf[S]||S})},S))})]}),l.jsxs("div",{className:"event-picker-search",children:[l.jsx(al,{size:14,color:se.color}),l.jsx("input",{ref:_,className:"event-picker-search-input",placeholder:"Search events...",value:s,onChange:S=>o(S.target.value)})]}),l.jsx(Ar,{className:"event-picker-list","aria-label":"  ",selectionMode:"single",onSelectionChange:S=>{const E=Array.from(S)[0];E&&x(E)},children:g.length===0?l.jsx(En,{id:"empty",textValue:"No events found",children:l.jsx("div",{className:"event-picker-empty",children:l.jsx("span",{children:"No events found"})})}):v.flatMap(S=>[l.jsx(En,{id:`label-${S.category}`,textValue:S.category,className:"event-group-label-item",children:l.jsx("div",{className:"event-group-label",children:S.category})},`label-${S.category}`),...S.events.map(E=>l.jsxs(En,{id:E,className:"event-item",textValue:mf[E]||E,children:[l.jsx("span",{className:"event-name",children:mf[E]||E}),l.jsx("span",{className:"event-type-code",children:E})]},E))])})]})]})}function ADe(t,e){if(t.length!==e.length)return!1;const n=new Set(t.map(i=>i.id)),r=new Set(e.map(i=>i.id));if(n.size!==r.size)return!1;for(const i of n)if(!r.has(i))return!1;return!0}function PDe(t){const e=t.map(h=>({...h,actions:h.actions||[]})),n=T.useRef(e),r=Uy({initialItems:e,getKey:h=>h.id});T.useEffect(()=>{ADe(n.current,e)||(r.items.forEach(h=>{r.remove(h.id)}),e.forEach(h=>{r.append(h)}),n.current=e)},[e,r]);const i=h=>{const f={id:`event-${h}-${Date.now()}`,event:h,actions:[],enabled:!0};return r.append(f),f},a=(h,f)=>{if("id"in f&&"event"in f)r.update(h,f);else{const m=r.getItem(h);m&&r.update(h,{...m,...f})}},s=h=>{const f=r.getItem(h);if(!f)return;const m={...f,id:`${h}-copy-${Date.now()}`,actions:(f.actions||[]).map(g=>({...g,id:`${g.id}-copy-${Date.now()}`}))};return r.append(m),m},o=h=>{const f=r.getItem(h);f&&r.update(h,{...f,enabled:!f.enabled})},c=()=>{r.items.forEach(h=>{r.update(h.id,{...h,enabled:!0})})},u=()=>{r.items.forEach(h=>{r.update(h.id,{...h,enabled:!1})})};return{handlers:r.items,addHandler:i,updateHandler:a,removeHandler:r.remove,duplicateHandler:s,getHandler:r.getItem,toggleHandler:o,enableAll:c,disableAll:u,selectedKeys:r.selectedKeys,setSelectedKeys:r.setSelectedKeys}}function NDe(t,e){if(t.length!==e.length)return!1;const n=new Set(t.map(i=>i.id)),r=new Set(e.map(i=>i.id));if(n.size!==r.size)return!1;for(const i of n)if(!r.has(i))return!1;return!0}function GO(t){const e=T.useRef(t),n=Uy({initialItems:t,getKey:g=>g.id||""});T.useEffect(()=>{NDe(e.current,t)||(n.items.forEach(g=>{g.id&&n.remove(g.id)}),t.forEach(g=>{n.append(g)}),e.current=t)},[t,n]);const r=(g,v={})=>{const x={id:`action-${g}-${Date.now()}`,type:g,config:v,enabled:!0};return n.append(x),x},i=(g,v)=>{const x=n.getItem(g);x&&n.update(g,{...x,...v})},a=(g,v)=>{n.move(g,v)},s=(g,v)=>{[...g].reverse().forEach((_,w)=>{n.move(_,v+w)})},o=g=>{const v=n.getItem(g);if(!v)return;const x=n.items.findIndex(w=>w.id===g),_={...v,id:`${g}-copy-${Date.now()}`};return n.insert(x+1,_),_},c=g=>{const v=n.getItem(g);v&&n.update(g,{...v,enabled:!v.enabled})},u=()=>{n.items.forEach(g=>{g.id&&n.update(g.id,{...g,enabled:!0})})},h=()=>{n.items.forEach(g=>{g.id&&n.update(g.id,{...g,enabled:!1})})},f=()=>{Array.from(n.selectedKeys).forEach(v=>n.remove(v))},m=()=>{n.items.forEach(g=>{g.id&&n.remove(g.id)})};return{actions:n.items,addAction:r,updateAction:i,removeAction:n.remove,moveAction:a,moveActions:s,duplicateAction:o,getAction:n.getItem,toggleAction:c,enableAll:u,disableAll:h,removeSelectedActions:f,removeAll:m,selectedKeys:n.selectedKeys,setSelectedKeys:n.setSelectedKeys}}function DDe(t){const[e,n]=T.useState(null),r=T.useMemo(()=>e&&t.find(m=>m.id===e)||null,[e,t]),i=m=>{n(m)},a=m=>e===m,s=()=>{n(null)};return{selectedHandlerId:e,selectedHandler:r,selectHandler:i,isSelected:a,clearSelection:s,selectNext:()=>{if(t.length===0)return;if(!e){n(t[0].id);return}const m=t.findIndex(g=>g.id===e);m===-1||m===t.length-1||n(t[m+1].id)},selectPrevious:()=>{if(t.length===0)return;if(!e){n(t[t.length-1].id);return}const m=t.findIndex(g=>g.id===e);m===-1||m===0||n(t[m-1].id)},selectFirst:()=>{t.length>0&&n(t[0].id)},selectLast:()=>{t.length>0&&n(t[t.length-1].id)},selectAfterDelete:m=>{if(e!==m)return;const g=t.findIndex(v=>v.id===m);if(g===-1){s();return}g<t.length-1?n(t[g+1].id):g>0?n(t[g-1].id):s()}}}function kDe({debounce:t,throttle:e,onChange:n}){const r=t?"debounce":e?"throttle":"none",i=t||e||300,a=c=>{c==="none"?n({debounce:void 0,throttle:void 0}):c==="debounce"?n({debounce:i,throttle:void 0}):c==="throttle"&&n({debounce:void 0,throttle:i})},s=c=>{r==="debounce"?n({debounce:c,throttle:void 0}):r==="throttle"&&n({debounce:void 0,throttle:c})},o=[{label:"Fast",value:100},{label:"Normal",value:300},{label:"Slow",value:1e3}];return l.jsxs("div",{className:"debounce-throttle-editor",children:[l.jsxs(Ive,{value:r,onChange:c=>a(c),className:"timing-mode-group",children:[l.jsx(kt,{className:"field-label",children:"Event Timing"}),l.jsxs("div",{className:"radio-options",children:[l.jsx(oA,{value:"none",className:"react-aria-Radio",children:"None (immediate)"}),l.jsx(oA,{value:"debounce",className:"react-aria-Radio",children:"Debounce (wait for pause)"}),l.jsx(oA,{value:"throttle",className:"react-aria-Radio",children:"Throttle (limit frequency)"})]})]}),r!=="none"&&l.jsxs(l.Fragment,{children:[l.jsxs(xn,{className:"field",children:[l.jsxs(kt,{className:"field-label",children:[r==="debounce"?"Debounce":"Throttle"," Time (ms)"]}),l.jsx(Pn,{className:"field-input",type:"number",value:String(i),onChange:c=>s(Number(c.target.value)||300),min:0,step:50})]}),l.jsxs("div",{className:"presets-group",children:[l.jsx(kt,{className:"field-label",children:"Presets:"}),l.jsx("div",{className:"preset-buttons",children:o.map(c=>l.jsxs(Pt,{className:"react-aria-Button sm",onPress:()=>s(c.value),children:[c.label," (",c.value,"ms)"]},c.label))})]}),l.jsx("div",{className:"field-hint",children:r==="debounce"?l.jsxs("p",{children:[l.jsx("strong",{children:"Debounce:"})," Waits for user to stop typing/clicking before executing. Good for search inputs."]}):l.jsxs("p",{children:[l.jsx("strong",{children:"Throttle:"})," Limits execution frequency. Good for scroll/resize events."]})})]})]})}function d$({direction:t,className:e=""}){return l.jsx("div",{className:`block-connector ${t} ${e}`.trim(),role:"presentation","aria-hidden":"true"})}function RDe({trigger:t,onChange:e,registeredEventTypes:n=[],allowedEventTypes:r=[],onOptionsClick:i,showConnector:a=!0}){const s=o=>{e({...t,event:o})};return l.jsxs("div",{className:"event-block when-block",role:"group","aria-label":"When trigger",children:[l.jsxs("div",{className:"block-header",children:[l.jsx(Vm,{className:"block-icon",size:se.size,strokeWidth:se.stroke}),l.jsx("span",{className:"block-label",children:"WHEN"})]}),l.jsx("div",{className:"block-content",children:l.jsxs("div",{className:"trigger-row",children:[l.jsx(eZ,{onSelect:s,registeredTypes:n,selectedType:t.event,allowedTypes:r}),l.jsx("span",{className:"trigger-target",children:t.target==="self"?"on this element":`on ${t.target}`}),i&&l.jsx(Pt,{className:"iconButton",onPress:i,"aria-label":"Trigger options",children:l.jsx(Kl,{size:14,color:se.color,strokeWidth:se.stroke})})]})}),a&&l.jsx(d$,{direction:"down"})]})}const Gk={equals:{label:"=",unary:!1,description:""},not_equals:{label:"!=",unary:!1,description:" "},contains:{label:"contains",unary:!1,description:""},not_contains:{label:"not contains",unary:!1,description:" "},starts_with:{label:"starts with",unary:!1,description:"~ "},ends_with:{label:"ends with",unary:!1,description:"~ "},matches_regex:{label:"matches",unary:!1,description:" "},greater_than:{label:">",unary:!1,description:" "},less_than:{label:"<",unary:!1,description:" "},greater_or_equal:{label:">=",unary:!1,description:""},less_or_equal:{label:"<=",unary:!1,description:""},is_empty:{label:"is empty",unary:!0,description:" "},is_not_empty:{label:"is not empty",unary:!0,description:"  "},is_true:{label:"is true",unary:!0,description:""},is_false:{label:"is false",unary:!0,description:""},is_null:{label:"is null",unary:!0,description:"null"},is_not_null:{label:"is not null",unary:!0,description:"null "}};function WO(t){return Gk[t].unary}function qO(){return{id:`cond-${Date.now()}`,left:{type:"element",value:""},operator:"is_not_empty"}}const IDe=[{label:"Comparison",operators:["equals","not_equals","greater_than","less_than","greater_or_equal","less_or_equal"]},{label:"String",operators:["contains","not_contains","starts_with","ends_with","matches_regex"]},{label:"Check",operators:["is_empty","is_not_empty","is_true","is_false","is_null","is_not_null"]}];function $De({value:t,onChange:e}){const n=Gk[t];return l.jsxs(wi,{className:"operator-picker",selectedKey:t,onSelectionChange:r=>e(r),"aria-label":"Condition operator",children:[l.jsxs(Pt,{className:"operator-picker-button",children:[l.jsx(ai,{children:n.label}),l.jsx(_i,{size:12})]}),l.jsx(Yr,{className:"operator-picker-popover",children:l.jsx(Ar,{className:"operator-picker-list",children:IDe.map(r=>l.jsxs("div",{className:"operator-group",children:[l.jsx("div",{className:"operator-group-label",children:r.label}),r.operators.map(i=>{const a=Gk[i];return l.jsxs(En,{id:i,className:"operator-item",textValue:a.label,children:[l.jsx("span",{className:"operator-symbol",children:a.label}),l.jsx("span",{className:"operator-description",children:a.description})]},i)})]},r.label))})})]})}function jDe({condition:t,onChange:e,onRemove:n,dragHandleProps:r={}}){const i=WO(t.operator),a=u=>u.startsWith("#")||u.startsWith(".")?"element":u.startsWith("state.")?"state":u.startsWith("event.")?"event":"literal",s=u=>{const h=a(u);e({...t,left:{type:h,value:u}})},o=u=>{const h={...t,operator:u};WO(u)?delete h.right:h.right||(h.right={type:"literal",value:""}),e(h)},c=u=>{if(!t.right)return;const h={...t.right,value:u};e({...t,right:h})};return l.jsxs("div",{className:"condition-row",role:"group","aria-label":"Condition",children:[l.jsx("div",{className:"condition-drag-handle",...r,children:l.jsx(XB,{size:14,color:se.color,strokeWidth:se.stroke})}),l.jsx(xn,{className:"condition-operand condition-left","aria-label":"Left operand",children:l.jsx(Pn,{value:String(t.left.value),onChange:u=>s(u.target.value),placeholder:"#element.value"})}),l.jsx($De,{value:t.operator,onChange:o}),!i&&l.jsx(xn,{className:"condition-operand condition-right","aria-label":"Right operand",children:l.jsx(Pn,{value:String(t.right?.value??""),onChange:u=>c(u.target.value),placeholder:"value"})}),l.jsx(Pt,{className:"iconButton condition-remove",onPress:n,"aria-label":"Remove condition",children:l.jsx(Qo,{size:14,color:se.color,strokeWidth:se.stroke})})]})}function LDe({value:t,onChange:e}){const n=()=>{e(t==="AND"?"OR":"AND")};return l.jsx("div",{className:"operator-toggle",children:l.jsx(Pt,{className:"toggle-button",onPress:n,"aria-label":`Change to ${t==="AND"?"OR":"AND"}`,children:t})})}function ODe({conditions:t,onChange:e,onRemove:n,showSplitConnector:r=!1}){const[i,a]=T.useState(!0);if(!t)return l.jsxs(Pt,{className:"add-condition-button",onPress:()=>e({operator:"AND",conditions:[qO()]}),children:[l.jsx(No,{size:14}),"Add Condition (optional)"]});const s=()=>{e({...t,conditions:[...t.conditions,qO()]})},o=(h,f)=>{const m=[...t.conditions];m[h]=f,e({...t,conditions:m})},c=h=>{const f=t.conditions.filter((m,g)=>g!==h);f.length===0?n():e({...t,conditions:f})},u=h=>{e({...t,operator:h})};return l.jsxs("div",{className:"event-block if-block",role:"group","aria-label":"Condition block",children:[l.jsxs("div",{className:"block-header",children:[l.jsx(al,{className:"block-icon",size:se.size,strokeWidth:se.stroke}),l.jsx("span",{className:"block-label",children:"IF"}),l.jsx("span",{className:"block-sublabel",children:"(optional)"}),l.jsxs("div",{className:"block-actions",children:[l.jsx(Pt,{className:"iconButton",onPress:()=>a(!i),"aria-label":i?"Collapse conditions":"Expand conditions","aria-expanded":i,children:i?l.jsx(_i,{size:14,color:se.color,strokeWidth:se.stroke}):l.jsx(Ia,{size:14,color:se.color,strokeWidth:se.stroke})}),l.jsx(Pt,{className:"iconButton",onPress:n,"aria-label":"Remove condition block",children:l.jsx(Qo,{size:14,color:se.color,strokeWidth:se.stroke})})]})]}),i&&l.jsxs("div",{className:"block-content",children:[t.conditions.map((h,f)=>l.jsxs(T.Fragment,{children:[f>0&&l.jsx(LDe,{value:t.operator,onChange:u}),l.jsx(jDe,{condition:h,onChange:m=>o(f,m),onRemove:()=>c(f)})]},h.id)),l.jsxs(Pt,{className:"add-row-button",onPress:s,children:[l.jsx(No,{size:14}),"Add Condition"]})]}),l.jsx(d$,{direction:r?"split":"down"})]})}const FDe={navigate:" ",scrollTo:" ",setState:" ",updateState:" ",apiCall:"API ",showModal:" ",hideModal:" ",showToast:" ",toggleVisibility:"/ ",validateForm:" ",resetForm:" ",submitForm:" ",setComponentState:"  ",triggerComponentAction:"  ",updateFormField:"  ",filterCollection:" ",selectItem:" ",clearSelection:" ",loadDataTable:"DataTable ",syncComponent:" ",saveToDataTable:"DataTable ",copyToClipboard:" ",customFunction:" "},BDe={navigate:die,scrollTo:Zte,setState:ba,updateState:Jm,apiCall:s4,showModal:I1,hideModal:I1,showToast:cne,toggleVisibility:I1,validateForm:s4,resetForm:Jm,submitForm:s4,setComponentState:ba,triggerComponentAction:j1,updateFormField:ba,filterCollection:ba,selectItem:j1,clearSelection:j1,copyToClipboard:Bne,customFunction:V_};function zDe(t){const e=t.config;switch(t.type){case"navigate":return e.path||"";case"apiCall":return`${e.method||"GET"} ${e.endpoint||""}`;case"showToast":return e.message||"";case"setState":case"updateState":return e.storePath||"";case"showModal":case"hideModal":return e.modalId||"";case"toggleVisibility":return e.elementId||"";case"customFunction":return e.code?"(custom code)":"";default:return""}}function UDe({action:t,index:e,onClick:n,onRemove:r,isExpanded:i=!1,onToggleExpand:a,dragHandleProps:s={}}){const o=BDe[t.type]||V_,c=FDe[t.type]||t.type,u=zDe(t);return l.jsxs("div",{className:`action-item ${t.enabled===!1?"disabled":""}`,role:"listitem","aria-label":`Action ${e}: ${c}`,"data-action-id":t.id,children:[l.jsx("div",{className:"action-drag-handle",...s,children:l.jsx(XB,{size:14,color:se.color,strokeWidth:se.stroke})}),l.jsxs("div",{className:"list-item-icon",children:[l.jsx(o,{size:16}),l.jsx("span",{className:"list-item-index",children:e})]}),l.jsxs("button",{type:"button",className:"action-info-button",onClick:n,"aria-label":`Edit ${c}`,children:[l.jsx("span",{className:"action-type",children:c}),u&&l.jsx("span",{className:"action-summary",children:u})]}),l.jsxs("div",{className:"action-controls",children:[a&&l.jsx(Pt,{className:"iconButton",onPress:a,"aria-label":i?"Collapse":"Expand","aria-expanded":i,children:i?l.jsx(_i,{size:14,color:se.color,strokeWidth:se.stroke}):l.jsx(Ia,{size:14,color:se.color,strokeWidth:se.stroke})}),r&&l.jsx(Pt,{className:"iconButton",onPress:r,"aria-label":"Delete action",children:l.jsx(Qo,{size:14,color:se.color,strokeWidth:se.stroke})})]})]})}function KO({type:t,actions:e,onAddAction:n,onActionClick:r,onRemoveAction:i,showConnector:a=!0,isDisabled:s=!1,defaultCollapsed:o=!1}){const[c,u]=T.useState(o),[h,f]=T.useState(null),m=t==="then",g=m?"then-block":"else-block",v=m?"THEN":"ELSE",x=m?"Actions when condition is true":"Actions when condition is false",_=w=>{f(S=>S===w?null:w)};return l.jsxs("div",{className:`branch-block ${g}`,children:[a&&l.jsx(d$,{direction:"down",className:m?"success":"fallback"}),l.jsxs("div",{className:"block-container",role:"region","aria-label":x,"data-block-type":t,children:[l.jsxs("div",{className:"block-header",children:[l.jsx(Pt,{className:"iconButton block-collapse-btn",onPress:()=>u(!c),"aria-expanded":!c,"aria-label":c?`Expand ${v} block`:`Collapse ${v} block`,children:c?l.jsx(Ia,{size:16,color:se.color,strokeWidth:se.stroke}):l.jsx(_i,{size:16,color:se.color,strokeWidth:se.stroke})}),l.jsx("span",{className:"block-label",children:v}),l.jsxs("span",{className:"block-count",children:[e.length," action",e.length!==1?"s":""]}),l.jsx("div",{className:"block-header-spacer"}),l.jsx(Pt,{className:"iconButton block-collapse-btn",onPress:n,isDisabled:s,"aria-label":`Add action to ${v}`,children:l.jsx(No,{size:16,color:se.color,strokeWidth:se.stroke})})]}),!c&&l.jsx("div",{className:"block-content",role:"list","aria-label":`${v} actions`,children:e.length===0?l.jsxs("div",{className:"block-empty",children:[l.jsx("span",{children:"No actions"}),l.jsxs(Pt,{className:"add-action-btn",onPress:n,isDisabled:s,children:[l.jsx(No,{size:12}),l.jsx("span",{children:"Add action"})]})]}):e.map((w,S)=>l.jsx(UDe,{action:w,index:S+1,onClick:()=>r?.(w),onRemove:()=>i?.(w.id),isExpanded:h===w.id,onToggleExpand:()=>_(w.id)},w.id))})]})]})}function VDe(t){if(!t)return"/";const e=t.trim();return e.startsWith("/")?e:`/${e}`}function HDe({config:t,onChange:e}){const n=(r,i)=>{e(r==="path"&&typeof i=="string"?{...t,[r]:VDe(i)}:{...t,[r]:i})};return l.jsxs("div",{className:"navigate-action-editor",children:[l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Path"}),l.jsx(Pn,{className:"field-input",value:t.path,onChange:r=>n("path",r.target.value),placeholder:"/page-name"})]}),l.jsx(y_,{className:"checkbox-field",isSelected:t.openInNewTab||!1,onChange:r=>n("openInNewTab",r),children:"Open in new tab"}),l.jsx(y_,{className:"checkbox-field",isSelected:t.replace||!1,onChange:r=>n("replace",r),children:"Replace history"})]})}function GDe({config:t,onChange:e}){const[n,r]=T.useState(()=>JSON.stringify(t.value,null,2)),[i,a]=T.useState(""),s=c=>{e({...t,storePath:c})},o=c=>{r(c);try{const u=JSON.parse(c);e({...t,value:u}),a("")}catch{a(" JSON ")}};return l.jsxs("div",{className:"setstate-action-editor",children:[l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Store Path"}),l.jsx(Pn,{className:"field-input",value:t.storePath,onChange:c=>s(c.target.value),placeholder:"app.user.name"})]}),l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Value (JSON)"}),l.jsx(Do,{className:"field-textarea",value:n,onChange:c=>o(c.target.value),rows:4}),i&&l.jsxs("div",{className:"error-message",children:[" ",i]})]})]})}function WDe({config:t,onChange:e}){const[n,r]=T.useState(()=>JSON.stringify(t.headers||{},null,2)),[i,a]=T.useState(()=>JSON.stringify(t.body||{},null,2)),s=f=>{e({...t,endpoint:f})},o=f=>{e({...t,method:f})},c=f=>{r(f);try{const m=JSON.parse(f);e({...t,headers:m})}catch{}},u=f=>{a(f);try{const m=JSON.parse(f);e({...t,body:m})}catch{}},h=["GET","POST","PUT","DELETE","PATCH"];return l.jsxs("div",{className:"apicall-action-editor",children:[l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Endpoint"}),l.jsx(Pn,{className:"field-input",value:t.endpoint,onChange:f=>s(f.target.value),placeholder:"/api/users"})]}),l.jsxs("div",{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Method"}),l.jsxs(wi,{selectedKey:t.method,onSelectionChange:f=>o(f),children:[l.jsx(Pt,{className:"select-trigger",children:l.jsx(ai,{})}),l.jsx(Yr,{className:"select-popover",children:l.jsx(Ar,{className:"select-listbox",children:h.map(f=>l.jsx(En,{id:f,children:f},f))})})]})]}),l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Headers (JSON)"}),l.jsx(Do,{className:"field-textarea",value:n,onChange:f=>c(f.target.value),rows:3})]}),l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Body (JSON)"}),l.jsx(Do,{className:"field-textarea",value:i,onChange:f=>u(f.target.value),rows:4})]})]})}function lh({value:t,onChange:e,label:n,placeholder:r="#element or ID",filter:i}){const[a,s]=T.useState(t),o=$e(g=>g.currentPageId),c=$e(g=>g.getPageElements),u=T.useMemo(()=>{if(!o)return[];const g=c(o);let v=g;return i&&(v=g.filter(x=>i({id:x.id,tag:x.tag,customId:x.customId}))),v.map(x=>({id:x.id,tag:x.tag,customId:x.customId,displayName:x.customId?`#${x.customId}`:`${x.tag} (${x.id.slice(0,8)})`}))},[o,c,i]),h=T.useMemo(()=>{if(!a)return u;const g=a.toLowerCase();return u.filter(v=>v.displayName.toLowerCase().includes(g)||v.tag.toLowerCase().includes(g)||v.id.toLowerCase().includes(g))},[u,a]),f=g=>{if(!g)return;const v=u.find(x=>x.id===g);if(v){const x=v.customId?`#${v.customId}`:v.id;s(x),e(x)}},m=g=>{s(g),e(g)};return l.jsxs(Zq,{className:"element-picker",inputValue:a,onInputChange:m,onSelectionChange:f,allowsCustomValue:!0,"aria-label":n||"Element selector",children:[n&&l.jsx(kt,{className:"element-picker-label",children:n}),l.jsxs("div",{className:"element-picker-input-wrapper",children:[l.jsx(ER,{size:14,className:"element-picker-icon"}),l.jsx(Pn,{className:"element-picker-input",placeholder:r}),l.jsx(Pt,{className:"element-picker-button",children:l.jsx(_i,{size:14})})]}),l.jsx(Yr,{className:"element-picker-popover",children:l.jsx(Ar,{className:"element-picker-list",children:h.length===0?l.jsxs("div",{className:"element-picker-empty",children:[l.jsx(al,{size:16,color:se.color}),l.jsx("span",{children:"No elements found"})]}):h.map(g=>l.jsxs(En,{id:g.id,className:"element-picker-item",textValue:g.displayName,children:[l.jsx("span",{className:"element-tag",children:g.tag}),l.jsx("span",{className:"element-name",children:g.displayName})]},g.id))})})]})}function qDe({config:t,onChange:e}){const[n,r]=T.useState(()=>JSON.stringify(t.props||{},null,2)),i=s=>{e({...t,modalId:s})},a=s=>{r(s);try{const o=JSON.parse(s);e({...t,props:o})}catch{}};return l.jsxs("div",{className:"showmodal-action-editor",children:[l.jsx(lh,{label:"Modal ID",value:t.modalId||"",onChange:i,placeholder:"Select modal...",filter:s=>s.tag==="Modal"}),l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Props (JSON)"}),l.jsx(Do,{className:"field-textarea",value:n,onChange:s=>a(s.target.value),rows:4})]})]})}function KDe({config:t,onChange:e}){const n=["info","success","warning","error"],r=s=>{e({...t,message:s})},i=s=>{e({...t,type:s})},a=s=>{e({...t,duration:s})};return l.jsxs("div",{className:"showtoast-action-editor",children:[l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Message"}),l.jsx(Pn,{className:"field-input",value:t.message,onChange:s=>r(s.target.value),placeholder:"Operation successful!"})]}),l.jsxs("div",{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Type"}),l.jsxs(wi,{selectedKey:t.type||"info",onSelectionChange:s=>i(s),children:[l.jsx(Pt,{className:"select-trigger",children:l.jsx(ai,{})}),l.jsx(Yr,{className:"select-popover",children:l.jsx(Ar,{className:"select-listbox",children:n.map(s=>l.jsx(En,{id:s,children:s},s))})})]})]}),l.jsxs(Dve,{className:"field",value:t.duration||3e3,onChange:s=>a(s),children:[l.jsx(kt,{className:"field-label",children:"Duration (ms)"}),l.jsx(Pn,{className:"field-input"})]})]})}function XDe({config:t,onChange:e}){const n=r=>{e({...t,formId:r})};return l.jsxs("div",{className:"validateform-action-editor",children:[l.jsx(lh,{label:"Form ID",value:t.formId||"",onChange:n,placeholder:"Select form...",filter:r=>r.tag==="Form"}),l.jsx("div",{className:"helper-text",children:l.jsx("p",{children:"onValid  onInvalid      ."})})]})}function YDe({config:t,onChange:e}){const n=(i,a)=>{e({...t,[i]:a})},r=[{value:"top",label:"Top"},{value:"center",label:"Center"},{value:"bottom",label:"Bottom"}];return l.jsxs("div",{className:"scrollto-action-editor",children:[l.jsx(lh,{label:"Element ID",value:t.elementId||"",onChange:i=>n("elementId",i||void 0),placeholder:"Select element..."}),l.jsxs("div",{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Position"}),l.jsxs(wi,{selectedKey:t.position||"top",onSelectionChange:i=>n("position",i),children:[l.jsx(Pt,{className:"select-trigger",children:l.jsx(ai,{})}),l.jsx(Yr,{className:"select-popover",children:l.jsx(Ar,{className:"select-listbox",children:r.map(i=>l.jsx(En,{id:i.value,children:i.label},i.value))})})]})]}),l.jsx(y_,{className:"checkbox-field",isSelected:t.smooth!==!1,onChange:i=>n("smooth",i),children:"Smooth scroll"}),l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Offset (px)"}),l.jsx(Pn,{className:"field-input",type:"number",value:String(t.offset||0),onChange:i=>n("offset",Number(i.target.value)||void 0),placeholder:"0"})]})]})}function ZDe({config:t,onChange:e}){const[n,r]=T.useState(()=>JSON.stringify(t.value,null,2)),[i,a]=T.useState(""),s=u=>{e({...t,storePath:u})},o=u=>{r(u);try{const h=JSON.parse(u);e({...t,value:h}),a("")}catch{a(" JSON ")}},c=u=>{e({...t,merge:u})};return l.jsxs("div",{className:"updatestate-action-editor",children:[l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Store Path"}),l.jsx(Pn,{className:"field-input",value:t.storePath,onChange:u=>s(u.target.value),placeholder:"cart.items"})]}),l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Value (JSON or Template)"}),l.jsx(Do,{className:"field-textarea",value:n,onChange:u=>o(u.target.value),rows:4,placeholder:'{"id": 123} or {{response.data}}'}),i&&l.jsxs("div",{className:"error-message",children:[" ",i]})]}),l.jsx(y_,{className:"checkbox-field",isSelected:t.merge||!1,onChange:u=>c(u),children:"Merge with existing state"})]})}function JDe({config:t,onChange:e}){const n=r=>{e({...t,modalId:r||void 0})};return l.jsxs("div",{className:"hidemodal-action-editor",children:[l.jsx(lh,{label:"Modal ID (empty = close all)",value:t.modalId||"",onChange:n,placeholder:"Select modal...",filter:r=>r.tag==="Modal"}),l.jsx("p",{className:"field-hint",children:"Leave empty to close all open modals"})]})}function QDe({config:t,onChange:e}){const n=(a,s)=>{e({...t,[a]:s})},r=[{value:"",label:"Toggle"},{value:"true",label:"Show"},{value:"false",label:"Hide"}],i=[{value:"ease",label:"Ease"},{value:"ease-in",label:"Ease In"},{value:"ease-out",label:"Ease Out"},{value:"ease-in-out",label:"Ease In Out"},{value:"linear",label:"Linear"}];return l.jsxs("div",{className:"togglevisibility-action-editor",children:[l.jsx(lh,{label:"Element ID",value:t.elementId||"",onChange:a=>n("elementId",a),placeholder:"Select element..."}),l.jsxs("div",{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Action"}),l.jsxs(wi,{selectedKey:t.show===void 0?"":t.show===!0?"true":"false",onSelectionChange:a=>{n("show",a===""?void 0:a==="true")},children:[l.jsx(Pt,{className:"select-trigger",children:l.jsx(ai,{})}),l.jsx(Yr,{className:"select-popover",children:l.jsx(Ar,{className:"select-listbox",children:r.map(a=>l.jsx(En,{id:a.value,children:a.label},a.value))})})]})]}),l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Duration (ms)"}),l.jsx(Pn,{className:"field-input",type:"number",value:String(t.duration||300),onChange:a=>n("duration",Number(a.target.value)||void 0),placeholder:"300"})]}),l.jsxs("div",{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Easing"}),l.jsxs(wi,{selectedKey:t.easing||"ease",onSelectionChange:a=>n("easing",a),children:[l.jsx(Pt,{className:"select-trigger",children:l.jsx(ai,{})}),l.jsx(Yr,{className:"select-popover",children:l.jsx(Ar,{className:"select-listbox",children:i.map(a=>l.jsx(En,{id:a.value,children:a.label},a.value))})})]})]})]})}function eke({config:t,onChange:e}){const n=r=>{e({...t,formId:r})};return l.jsxs("div",{className:"resetform-action-editor",children:[l.jsx(lh,{label:"Form ID",value:t.formId||"",onChange:n,placeholder:"Select form...",filter:r=>r.tag==="Form"}),l.jsx("p",{className:"field-hint",children:"Resets all form fields to their initial values"})]})}function tke({config:t,onChange:e}){const n=r=>{e({...t,formId:r})};return l.jsxs("div",{className:"submitform-action-editor",children:[l.jsx(lh,{label:"Form ID",value:t.formId||"",onChange:n,placeholder:"Select form...",filter:r=>r.tag==="Form"}),l.jsx("p",{className:"field-hint",children:"Triggers form submission (typically used with API call actions)"})]})}function nke({config:t,onChange:e}){const n=(a,s)=>{e({...t,[a]:s})},r=[{value:"static",label:"Static text"},{value:"element",label:"Element content"},{value:"state",label:"From state"}],i=t.source||"static";return l.jsxs("div",{className:"copytoclipboard-action-editor",children:[l.jsxs("div",{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Source"}),l.jsxs(wi,{selectedKey:i,onSelectionChange:a=>n("source",a),children:[l.jsx(Pt,{className:"select-trigger",children:l.jsx(ai,{})}),l.jsx(Yr,{className:"select-popover",children:l.jsx(Ar,{className:"select-listbox",children:r.map(a=>l.jsx(En,{id:a.value,children:a.label},a.value))})})]})]}),i==="static"&&l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Text"}),l.jsx(Pn,{className:"field-input",value:t.text,onChange:a=>n("text",a.target.value),placeholder:"Text to copy"})]}),i==="element"&&l.jsx(lh,{label:"Element ID",value:t.elementId||"",onChange:a=>n("elementId",a),placeholder:"Select element..."}),i==="state"&&l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"State Key"}),l.jsx(Pn,{className:"field-input",value:t.stateKey||"",onChange:a=>n("stateKey",a.target.value),placeholder:"user.email"})]})]})}function rke({config:t,onChange:e}){const[n,r]=T.useState(()=>JSON.stringify(t.params||{},null,2)),[i,a]=T.useState(""),s=c=>{e({...t,code:c})},o=c=>{r(c);try{const u=JSON.parse(c);e({...t,params:u}),a("")}catch{a(" JSON ")}};return l.jsxs("div",{className:"customfunction-action-editor",children:[l.jsxs("div",{className:"field",children:[l.jsx(kt,{className:"field-label",children:"JavaScript Code"}),l.jsx(Do,{className:"field-textarea code-editor",value:t.code,onChange:c=>s(c.target.value),rows:10,placeholder:`// Available context:
// - event: Event object
// - element: DOM element
// - state: App state
// - console: Console methods

console.log('Hello from custom function!');
return { success: true };`})]}),l.jsxs("div",{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Parameters (JSON)"}),l.jsx(Do,{className:"field-textarea",value:n,onChange:c=>o(c.target.value),rows:4,placeholder:'{"key": "value"}'}),i&&l.jsxs("div",{className:"error-message",children:[" ",i]})]}),l.jsxs("div",{className:"field-hint",children:[l.jsx("p",{children:l.jsx("strong",{children:" Security Note:"})}),l.jsxs("ul",{children:[l.jsx("li",{children:"Dangerous operations (eval, fetch, DOM manipulation) are restricted"}),l.jsx("li",{children:"Only safe console methods and limited DOM access allowed"}),l.jsx("li",{children:"Code execution is sandboxed for security"})]})]})]})}const ike={ListBox:["select","clear","selectAll","focus"],GridList:["select","clear","selectAll","focus"],Select:["select","clear","open","close","focus"],ComboBox:["select","clear","open","close","focus","filter"],RadioGroup:["select","clear","focus"],CheckboxGroup:["select","clear","selectAll","focus"],TagGroup:["add","remove","clear","focus"],TextField:["setValue","clear","focus","blur"],SearchField:["setValue","clear","focus","blur"],NumberField:["setValue","increment","decrement","focus","blur"],TextArea:["setValue","clear","focus","blur"],Slider:["setValue","focus"],DatePicker:["setValue","clear","open","close","focus"],TimeField:["setValue","clear","focus"],Modal:["open","close"],Dialog:["open","close"],Popover:["open","close"],Tooltip:["show","hide"],Tabs:["selectTab","focus"],Menu:["open","close","focus"],ProgressBar:["setValue"],Meter:["setValue"],Panel:["show","hide","toggle"],Card:["show","hide","toggle"]},Wk=Ks((t,e)=>({components:[],registerComponent:n=>{t(r=>r.components.some(a=>a.id===n.id)?{components:r.components.map(a=>a.id===n.id?n:a)}:{components:[...r.components,n]})},unregisterComponent:n=>{t(r=>({components:r.components.filter(i=>i.id!==n)}))},updateComponentState:(n,r)=>{t(i=>({components:i.components.map(a=>a.id===n?{...a,state:{...a.state,...r}}:a)}))},getComponent:n=>e().components.find(r=>r.id===n),getComponentByCustomId:n=>e().components.find(r=>r.customId===n),getComponentsByType:n=>e().components.filter(r=>r.tag===n),clearRegistry:()=>{t({components:[]})}}));function ake(t){return ike[t]||[]}function fw({value:t,onChange:e,filterByType:n,label:r="Target Component",placeholder:i="Select a component"}){const a=Wk(c=>c.components),s=n?a.filter(c=>n.includes(c.tag)):a,o=s.reduce((c,u)=>(c[u.tag]||(c[u.tag]=[]),c[u.tag].push(u),c),{});return l.jsxs("div",{className:"component-selector",children:[l.jsxs("div",{className:"field",children:[l.jsx(kt,{className:"field-label",children:r}),l.jsxs(wi,{selectedKey:t||"",onSelectionChange:c=>e(c),children:[l.jsx(Pt,{className:"select-trigger",children:l.jsx(ai,{})}),l.jsx(Yr,{className:"select-popover",children:l.jsxs(Ar,{className:"select-listbox",children:[l.jsx(En,{id:"",children:i},""),Object.entries(o).map(([c,u])=>l.jsxs("div",{className:"component-group",children:[l.jsx("div",{className:"group-header",children:c}),u.map(h=>l.jsx(En,{id:h.customId||h.id,children:h.customId||`${h.tag} (${h.id.slice(0,8)})`},h.customId||h.id))]},c)),s.length===0&&l.jsxs(En,{id:"empty",isDisabled:!0,children:["No components available",n&&` (filtered by: ${n.join(", ")})`]},"empty")]})})]})]}),t&&l.jsxs("p",{className:"field-hint",children:["Selected:"," ",s.find(c=>c.customId===t||c.id===t)?.customId||t]})]})}function ske({config:t,onChange:e}){const[n,r]=T.useState(()=>JSON.stringify(t.value,null,2)),[i,a]=T.useState(""),s=(h,f)=>{e({...t,[h]:f})},o=h=>{r(h);try{const f=JSON.parse(h);e({...t,value:f}),a("")}catch{a(" JSON ")}},c=[{value:"static",label:"Static value"},{value:"state",label:"From app state"},{value:"event",label:"From event data"}],u=t.source||"static";return l.jsxs("div",{className:"setcomponentstate-action-editor",children:[l.jsx(fw,{value:t.targetId,onChange:h=>s("targetId",h),label:"Target Component",placeholder:"Select component to control"}),l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"State Path"}),l.jsx(Pn,{className:"field-input",value:t.statePath,onChange:h=>s("statePath",h.target.value),placeholder:"selectedKeys, isOpen, value"})]}),l.jsxs("div",{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Value Source"}),l.jsxs(wi,{selectedKey:u,onSelectionChange:h=>s("source",h),children:[l.jsx(Pt,{className:"select-trigger",children:l.jsx(ai,{})}),l.jsx(Yr,{className:"select-popover",children:l.jsx(Ar,{className:"select-listbox",children:c.map(h=>l.jsx(En,{id:h.value,children:h.label},h.value))})})]})]}),l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Value (JSON)"}),l.jsx(Do,{className:"field-textarea",value:n,onChange:h=>o(h.target.value),rows:4,placeholder:u==="static"?'["item-1", "item-2"] or true':u==="state"?"{{state.selectedItems}}":"{{event.target.value}}"}),i&&l.jsxs("div",{className:"error-message",children:[" ",i]})]}),l.jsxs("div",{className:"field-hint",children:[l.jsx("p",{children:l.jsx("strong",{children:"Common state paths:"})}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("code",{children:"selectedKeys"})," - Selection state (ListBox, GridList, Select)"]}),l.jsxs("li",{children:[l.jsx("code",{children:"isOpen"})," - Open/close state (Modal, Popover, Select)"]}),l.jsxs("li",{children:[l.jsx("code",{children:"value"})," - Input value (TextField, NumberField, Slider)"]}),l.jsxs("li",{children:[l.jsx("code",{children:"isDisabled"})," - Disabled state (any component)"]})]})]})]})}function oke({config:t,onChange:e}){const[n,r]=T.useState(()=>JSON.stringify(t.params||{},null,2)),[i,a]=T.useState(""),s=(m,g)=>{e({...t,[m]:g})},o=m=>{r(m);try{const g=JSON.parse(m);e({...t,params:g}),a("")}catch{a(" JSON ")}},c=Wk(m=>m.getComponent),u=Wk(m=>m.getComponentByCustomId),h=c(t.targetId)||u(t.targetId),f=h?ake(h.tag):[];return l.jsxs("div",{className:"triggercomponentaction-action-editor",children:[l.jsx(fw,{value:t.targetId,onChange:m=>s("targetId",m),label:"Target Component",placeholder:"Select component to trigger"}),f.length>0?l.jsxs("div",{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Action"}),l.jsxs(wi,{selectedKey:t.action||"",onSelectionChange:m=>s("action",m),children:[l.jsx(Pt,{className:"select-trigger",children:l.jsx(ai,{})}),l.jsx(Yr,{className:"select-popover",children:l.jsxs(Ar,{className:"select-listbox",children:[l.jsx(En,{id:"",children:"Select an action"},""),f.map(m=>l.jsx(En,{id:m,children:m},m))]})})]})]}):l.jsx("p",{className:"field-hint warning",children:" Select a target component first to see available actions"}),t.action&&l.jsxs(l.Fragment,{children:[l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Parameters (JSON)"}),l.jsx(Do,{className:"field-textarea",value:n,onChange:m=>o(m.target.value),rows:4,placeholder:'{"itemId": "item-1", "behavior": "replace"}'}),i&&l.jsxs("div",{className:"error-message",children:[" ",i]})]}),l.jsxs("div",{className:"field-hint",children:[l.jsx("p",{children:l.jsxs("strong",{children:["Action: ",t.action]})}),l.jsx("p",{children:"Common parameters vary by action type:"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("code",{children:"select"})," - itemId, behavior (replace/add/toggle)"]}),l.jsxs("li",{children:[l.jsx("code",{children:"filter"})," - query, mode (include/exclude)"]}),l.jsxs("li",{children:[l.jsx("code",{children:"setValue"})," - value"]}),l.jsxs("li",{children:[l.jsx("code",{children:"focus/blur"})," - no params needed"]})]})]})]}),h&&l.jsxs("div",{className:"field-hint",children:[l.jsxs("p",{children:["Target: ",l.jsx("strong",{children:h.customId||h.id})," (",h.tag,")"]}),l.jsxs("p",{children:["Available actions: ",f.join(", ")||"None"]})]})]})}function lke({config:t,onChange:e}){const[n,r]=T.useState(()=>JSON.stringify(t.value,null,2)),[i,a]=T.useState(""),s=(h,f)=>{e({...t,[h]:f})},o=h=>{r(h);try{const f=JSON.parse(h);e({...t,value:f}),a("")}catch{a(" JSON ")}},c=[{value:"static",label:"Static value"},{value:"state",label:"From app state"},{value:"event",label:"From event data"}],u=t.source||"static";return l.jsxs("div",{className:"updateformfield-action-editor",children:[l.jsx(lh,{label:"Form ID (optional)",value:t.formId||"",onChange:h=>s("formId",h||void 0),placeholder:"Select form...",filter:h=>h.tag==="Form"}),l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Field Name"}),l.jsx(Pn,{className:"field-input",value:t.fieldName,onChange:h=>s("fieldName",h.target.value),placeholder:"email, password, username"})]}),l.jsxs("div",{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Value Source"}),l.jsxs(wi,{selectedKey:u,onSelectionChange:h=>s("source",h),children:[l.jsx(Pt,{className:"select-trigger",children:l.jsx(ai,{})}),l.jsx(Yr,{className:"select-popover",children:l.jsx(Ar,{className:"select-listbox",children:c.map(h=>l.jsx(En,{id:h.value,children:h.label},h.value))})})]})]}),l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Value (JSON)"}),l.jsx(Do,{className:"field-textarea",value:n,onChange:h=>o(h.target.value),rows:4,placeholder:u==="static"?'"user@example.com" or 123':u==="state"?"{{state.user.email}}":"{{event.target.value}}"}),i&&l.jsxs("div",{className:"error-message",children:[" ",i]})]}),l.jsxs("div",{className:"field-hint",children:[l.jsx("p",{children:l.jsx("strong",{children:"Usage:"})}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Field Name:"})," Must match the ",l.jsx("code",{children:"name"})," attribute of the form field"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Form ID:"})," Optional. If provided, will only update fields within that form"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Value Source:"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("code",{children:"static"})," - Hardcoded value"]}),l.jsxs("li",{children:[l.jsx("code",{children:"state"})," - From app state (e.g., ",l.jsx("code",{children:"state.user.email"}),")"]}),l.jsxs("li",{children:[l.jsx("code",{children:"event"})," - From event data (e.g., ",l.jsx("code",{children:"event.target.value"}),")"]})]})]})]})]})]})}function cke({config:t,onChange:e}){const[n,r]=T.useState(()=>JSON.stringify(t.fieldValue,null,2)),[i,a]=T.useState(""),s=(h,f)=>{e({...t,[h]:f})},o=h=>{r(h);try{const f=JSON.parse(h);e({...t,fieldValue:f}),a("")}catch{a(" JSON ")}},c=[{value:"text",label:"Text Search"},{value:"function",label:"Custom Function"},{value:"field",label:"Field Match"}],u=["ListBox","GridList","Select","ComboBox","TagGroup"];return l.jsxs("div",{className:"filtercollection-action-editor",children:[l.jsx(fw,{value:t.targetId,onChange:h=>s("targetId",h),filterByType:u,label:"Target Collection",placeholder:"Select ListBox, GridList, or other collection"}),l.jsxs("div",{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Filter Mode"}),l.jsxs(wi,{selectedKey:t.filterMode,onSelectionChange:h=>s("filterMode",h),children:[l.jsx(Pt,{className:"select-trigger",children:l.jsx(ai,{})}),l.jsx(Yr,{className:"select-popover",children:l.jsx(Ar,{className:"select-listbox",children:c.map(h=>l.jsx(En,{id:h.value,children:h.label},h.value))})})]})]}),t.filterMode==="text"&&l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Search Query"}),l.jsx(Pn,{className:"field-input",value:t.query||"",onChange:h=>s("query",h.target.value),placeholder:"Enter search text"})]}),t.filterMode==="function"&&l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Filter Function"}),l.jsx(Do,{className:"field-textarea code-editor",value:t.filterFn||"",onChange:h=>s("filterFn",h.target.value),rows:4,placeholder:"item => item.category === 'premium' && item.price > 100"}),l.jsx("p",{className:"field-hint",children:"Write a JavaScript arrow function that returns true for items to keep."})]}),t.filterMode==="field"&&l.jsxs(l.Fragment,{children:[l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Field Name"}),l.jsx(Pn,{className:"field-input",value:t.fieldName||"",onChange:h=>s("fieldName",h.target.value),placeholder:"category, status, type"})]}),l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Field Value (JSON)"}),l.jsx(Do,{className:"field-textarea",value:n,onChange:h=>o(h.target.value),rows:2,placeholder:'"premium" or ["active", "pending"]'}),i&&l.jsxs("div",{className:"error-message",children:[" ",i]})]})]}),l.jsxs("div",{className:"field-hint",children:[l.jsx("p",{children:l.jsx("strong",{children:"Filter Modes:"})}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Text Search:"})," Simple text matching across all fields"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Custom Function:"})," Advanced filtering with JavaScript"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Field Match:"})," Filter by specific field value"]})]}),l.jsxs("p",{children:["Examples:",l.jsx("br",{}),' Text: "premium user" searches all text fields',l.jsx("br",{})," Function: item => item.price > 100",l.jsx("br",{}),' Field: category = "electronics"']})]})]})}function uke({config:t,onChange:e}){const n=(o,c)=>{e({...t,[o]:c})},r=[{value:"replace",label:"Replace (clear others)"},{value:"add",label:"Add (keep existing)"},{value:"toggle",label:"Toggle (flip state)"}],i=[{value:"static",label:"Static ID"},{value:"state",label:"From app state"},{value:"event",label:"From event data"}],a=["ListBox","GridList","Select","ComboBox","RadioGroup","CheckboxGroup"],s=t.source||"static";return l.jsxs("div",{className:"selectitem-action-editor",children:[l.jsx(fw,{value:t.targetId,onChange:o=>n("targetId",o),filterByType:a,label:"Target Collection",placeholder:"Select collection component"}),l.jsxs("div",{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Selection Behavior"}),l.jsxs(wi,{selectedKey:t.behavior,onSelectionChange:o=>n("behavior",o),children:[l.jsx(Pt,{className:"select-trigger",children:l.jsx(ai,{})}),l.jsx(Yr,{className:"select-popover",children:l.jsx(Ar,{className:"select-listbox",children:r.map(o=>l.jsx(En,{id:o.value,children:o.label},o.value))})})]})]}),l.jsxs("div",{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Item ID Source"}),l.jsxs(wi,{selectedKey:s,onSelectionChange:o=>n("source",o),children:[l.jsx(Pt,{className:"select-trigger",children:l.jsx(ai,{})}),l.jsx(Yr,{className:"select-popover",children:l.jsx(Ar,{className:"select-listbox",children:i.map(o=>l.jsx(En,{id:o.value,children:o.label},o.value))})})]})]}),s==="static"&&l.jsxs(l.Fragment,{children:[l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Item ID"}),l.jsx(Pn,{className:"field-input",value:t.itemId||"",onChange:o=>n("itemId",o.target.value),placeholder:"user-123, product-456"})]}),l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Or Item Index (optional)"}),l.jsx(Pn,{className:"field-input",type:"number",value:String(t.itemIndex??""),onChange:o=>n("itemIndex",o.target.value?Number(o.target.value):void 0),placeholder:"0, 1, 2, ..."})]})]}),s==="state"&&l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"State Path"}),l.jsx(Pn,{className:"field-input",value:t.itemId||"",onChange:o=>n("itemId",o.target.value),placeholder:"state.selectedUserId or {{state.cart.selectedProduct}}"})]}),s==="event"&&l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Event Path"}),l.jsx(Pn,{className:"field-input",value:t.itemId||"",onChange:o=>n("itemId",o.target.value),placeholder:"event.target.value or {{event.detail.itemId}}"})]}),l.jsxs("div",{className:"field-hint",children:[l.jsx("p",{children:l.jsx("strong",{children:"Selection Behaviors:"})}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Replace:"})," Clear all existing selections and select this item only"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Add:"})," Add this item to existing selections (multi-select)"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Toggle:"})," If selected, deselect it; if not, select it"]})]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Priority:"})," If both itemId and itemIndex are provided, itemId takes precedence."]})]})]})}function dke({config:t,onChange:e}){const n=i=>{e({...t,targetId:i})},r=["ListBox","GridList","Select","ComboBox","RadioGroup","CheckboxGroup","TagGroup"];return l.jsxs("div",{className:"clearselection-action-editor",children:[l.jsx(fw,{value:t.targetId,onChange:n,filterByType:r,label:"Target Collection",placeholder:"Select collection to clear"}),l.jsxs("div",{className:"field-hint",children:[l.jsx("p",{children:"This action will clear all selected items in the target collection component."}),l.jsxs("p",{children:[l.jsx("strong",{children:"Compatible with:"})," ListBox, GridList, Select, ComboBox, RadioGroup, CheckboxGroup, TagGroup"]})]})]})}function hke({config:t,onChange:e}){return l.jsxs("div",{className:"action-editor-fields",children:[l.jsxs(xn,{value:t.dataTableName,onChange:n=>e({...t,dataTableName:n}),children:[l.jsx(kt,{className:"field-label",children:"DataTable Name"}),l.jsx(Pn,{className:"field-input",placeholder:"e.g., users, products"})]}),l.jsxs("div",{className:"field-row",children:[l.jsx(mT,{isSelected:t.forceRefresh??!1,onChange:n=>e({...t,forceRefresh:n}),children:l.jsx("span",{className:"switch-label",children:"Force Refresh"})}),l.jsx("span",{className:"field-hint",children:"Bypass cache and fetch fresh data"})]}),l.jsxs(xn,{value:String(t.cacheTTL??""),onChange:n=>e({...t,cacheTTL:n?parseInt(n,10):void 0}),children:[l.jsx(kt,{className:"field-label",children:"Cache TTL (seconds)"}),l.jsx(Pn,{className:"field-input",type:"number",min:0,placeholder:"e.g., 300 (5 minutes)"})]}),l.jsxs(xn,{value:t.targetVariable??"",onChange:n=>e({...t,targetVariable:n||void 0}),children:[l.jsx(kt,{className:"field-label",children:"Store Result In (optional)"}),l.jsx(Pn,{className:"field-input",placeholder:"e.g., loadedUsers"})]})]})}function fke({config:t,onChange:e}){const n=[{value:"replace",label:"Replace ()"},{value:"merge",label:"Merge ()"},{value:"append",label:"Append ()"}];return l.jsxs("div",{className:"action-editor-fields",children:[l.jsxs(xn,{value:t.sourceId,onChange:r=>e({...t,sourceId:r}),children:[l.jsx(kt,{className:"field-label",children:"Source Component ID"}),l.jsx(Pn,{className:"field-input",placeholder:"e.g., #userList, component_123"})]}),l.jsxs(xn,{value:t.targetId,onChange:r=>e({...t,targetId:r}),children:[l.jsx(kt,{className:"field-label",children:"Target Component ID"}),l.jsx(Pn,{className:"field-input",placeholder:"e.g., #userDetails, component_456"})]}),l.jsxs("div",{className:"field-group",children:[l.jsx(kt,{className:"field-label",children:"Sync Mode"}),l.jsxs(wi,{selectedKey:t.syncMode,onSelectionChange:r=>e({...t,syncMode:r}),children:[l.jsx(Pt,{className:"select-trigger",children:l.jsx(ai,{})}),l.jsx(Yr,{className:"select-popover",children:l.jsx(Ar,{className:"select-listbox",children:n.map(r=>l.jsx(En,{id:r.value,children:r.label},r.value))})})]})]}),l.jsxs(xn,{value:t.dataPath??"",onChange:r=>e({...t,dataPath:r||void 0}),children:[l.jsx(kt,{className:"field-label",children:"Data Path (optional)"}),l.jsx(Pn,{className:"field-input",placeholder:"e.g., selectedItem, data.items[0]"})]})]})}function pke({config:t,onChange:e}){const n=[{value:"response",label:"API Response"},{value:"variable",label:"Variable"},{value:"static",label:"Static Value"}],r=[{value:"replace",label:"Replace ( )"},{value:"merge",label:"Merge ()"},{value:"append",label:"Append ()"},{value:"upsert",label:"Upsert ( ,  )"}];return l.jsxs("div",{className:"action-editor-fields",children:[l.jsxs(xn,{value:t.dataTableName,onChange:i=>e({...t,dataTableName:i}),children:[l.jsx(kt,{className:"field-label",children:"DataTable Name"}),l.jsx(Pn,{className:"field-input",placeholder:"e.g., users, orders"})]}),l.jsxs("div",{className:"field-group",children:[l.jsx(kt,{className:"field-label",children:"Data Source"}),l.jsxs(wi,{selectedKey:t.source,onSelectionChange:i=>e({...t,source:i}),children:[l.jsx(Pt,{className:"select-trigger",children:l.jsx(ai,{})}),l.jsx(Yr,{className:"select-popover",children:l.jsx(Ar,{className:"select-listbox",children:n.map(i=>l.jsx(En,{id:i.value,children:i.label},i.value))})})]})]}),l.jsxs(xn,{value:t.sourcePath??"",onChange:i=>e({...t,sourcePath:i||void 0}),children:[l.jsx(kt,{className:"field-label",children:t.source==="response"?"Response Path":t.source==="variable"?"Variable Name":"Static Value"}),l.jsx(Pn,{className:"field-input",placeholder:t.source==="response"?"e.g., data.items, result":t.source==="variable"?"e.g., apiResult, formData":'e.g., { "status": "active" }'})]}),l.jsxs("div",{className:"field-group",children:[l.jsx(kt,{className:"field-label",children:"Save Mode"}),l.jsxs(wi,{selectedKey:t.saveMode,onSelectionChange:i=>e({...t,saveMode:i}),children:[l.jsx(Pt,{className:"select-trigger",children:l.jsx(ai,{})}),l.jsx(Yr,{className:"select-popover",children:l.jsx(Ar,{className:"select-listbox",children:r.map(i=>l.jsx(En,{id:i.value,children:i.label},i.value))})})]})]}),t.saveMode==="upsert"&&l.jsxs(xn,{value:t.keyField??"",onChange:i=>e({...t,keyField:i||void 0}),children:[l.jsx(kt,{className:"field-label",children:"Key Field (for Upsert)"}),l.jsx(Pn,{className:"field-input",placeholder:"e.g., id, email"})]}),l.jsxs(xn,{value:t.transform??"",onChange:i=>e({...t,transform:i||void 0}),children:[l.jsx(kt,{className:"field-label",children:"Transform Expression (optional)"}),l.jsx(Pn,{className:"field-input",placeholder:"e.g., items.map(i => ({ ...i, status: 'saved' }))"})]})]})}function mke({config:t,onChange:e}){const[n,r]=T.useState(()=>JSON.stringify(t.value??"",null,2)),[i,a]=T.useState(""),s=vr(m=>m.variables),o=T.useMemo(()=>Array.from(s.values()),[s]),c=T.useMemo(()=>o.find(m=>m.name===t.variableName),[o,t.variableName]),u=m=>{const v=o.find(x=>x.name===m)?.defaultValue??"";r(JSON.stringify(v,null,2)),e({...t,variableName:m,value:v})},h=m=>{r(m);try{const g=JSON.parse(m);e({...t,value:g}),a("")}catch{e({...t,value:m}),a("")}},f=c?.type==="boolean";return l.jsxs("div",{className:"setvariable-action-editor",children:[l.jsxs("div",{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Variable"}),o.length>0?l.jsxs(wi,{selectedKey:t.variableName||"",onSelectionChange:m=>u(m),children:[l.jsx(Pt,{className:"select-trigger",children:l.jsx(ai,{placeholder:"Select variable..."})}),l.jsx(Yr,{className:"select-popover",children:l.jsx(Ar,{className:"select-listbox",children:o.map(m=>l.jsxs(En,{id:m.name,children:[l.jsx("span",{children:m.name}),l.jsxs("span",{className:"variable-type-badge",children:[m.type,"  ",m.scope]})]},m.name))})})]}):l.jsx(xn,{className:"field",children:l.jsx(Pn,{className:"field-input",value:t.variableName||"",onChange:m=>e({...t,variableName:m.target.value}),placeholder:"variableName"})})]}),f?l.jsxs("div",{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Value"}),l.jsx("div",{className:"boolean-toggle",children:l.jsx(mT,{isSelected:t.value===!0,onChange:m=>e({...t,value:m}),children:l.jsx("span",{className:"switch-label",children:t.value===!0?"true":"false"})})})]}):l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Value (JSON)"}),l.jsx(Do,{className:"field-textarea",value:n,onChange:m=>h(m.target.value),rows:3,placeholder:c?.type==="string"?'"your text here"':c?.type==="number"?"0":c?.type==="array"?"[]":c?.type==="object"?"{}":"value"}),i&&l.jsx("div",{className:"error-message",children:i})]}),c&&l.jsxs("div",{className:"variable-info",children:[l.jsx("span",{className:"info-label",children:"Type:"}),l.jsx("span",{className:"info-value",children:c.type}),l.jsx("span",{className:"info-label",children:"Scope:"}),l.jsx("span",{className:"info-value",children:c.scope})]})]})}function gke({condition:t,onChange:e,label:n="Condition (optional)",placeholder:r="event.value > 10 && state.isLoggedIn === true"}){const[i,a]=T.useState(!1),s=u=>{e(u.trim()===""?void 0:u)},o=[{name:"event",description:"Event object (e.g., event.target.value)"},{name:"state",description:"Application state (e.g., state.user.name)"},{name:"element",description:"Target DOM element (e.g., element.id)"}],c=["state.isLoggedIn === true","event.value > 100","state.cart.items.length > 0","element.dataset.type === 'premium'"];return l.jsxs("div",{className:"condition-editor",children:[l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:n}),l.jsx(Do,{className:"field-textarea code-editor",value:t||"",onChange:u=>s(u.target.value),onFocus:()=>a(!0),onBlur:()=>a(!1),rows:3,placeholder:r})]}),i&&l.jsxs("div",{className:"condition-hints",children:[l.jsxs("div",{className:"hints-section",children:[l.jsx("strong",{children:"Available context:"}),l.jsx("ul",{children:o.map(u=>l.jsxs("li",{children:[l.jsx("code",{children:u.name})," - ",u.description]},u.name))})]}),l.jsxs("div",{className:"hints-section",children:[l.jsx("strong",{children:"Examples:"}),l.jsx("ul",{children:c.map((u,h)=>l.jsx("li",{children:l.jsx("code",{children:u})},h))})]})]}),t&&l.jsx("p",{className:"field-hint",children:" Action will only execute if this condition is true"})]})}function vke({delay:t,onChange:e}){const n=t!==void 0&&t>0,r=t||1e3,i=o=>{e(o?r:void 0)},a=o=>{e(o>0?o:void 0)},s=[{label:"0.5s",value:500},{label:"1s",value:1e3},{label:"2s",value:2e3},{label:"5s",value:5e3}];return l.jsxs("div",{className:"action-delay-editor",children:[l.jsx(y_,{className:"checkbox-field",isSelected:n,onChange:i,children:"Add delay before executing"}),n&&l.jsxs(l.Fragment,{children:[l.jsxs(xn,{className:"field",children:[l.jsx(kt,{className:"field-label",children:"Delay (ms)"}),l.jsx(Pn,{className:"field-input",type:"number",value:String(r),onChange:o=>a(Number(o.target.value)||0),min:0,step:100})]}),l.jsxs("div",{className:"presets-group",children:[l.jsx(kt,{className:"field-label",children:"Presets:"}),l.jsx("div",{className:"preset-buttons",children:s.map(o=>l.jsx(Pt,{className:"react-aria-Button sm",onPress:()=>a(o.value),children:o.label},o.label))})]}),l.jsxs("p",{className:"field-hint",children:[" This action will wait ",l.jsxs("strong",{children:[r,"ms"]})," before executing. Useful for creating sequences or animations."]})]})]})}function yke({action:t,onChange:e}){const n=[{value:"navigate",label:"Navigate"},{value:"scrollTo",label:"Scroll To"},{value:"setState",label:"Set State"},{value:"updateState",label:"Update State"},{value:"apiCall",label:"API Call"},{value:"showModal",label:"Show Modal"},{value:"hideModal",label:"Hide Modal"},{value:"showToast",label:"Show Toast"},{value:"toggleVisibility",label:"Toggle Visibility"},{value:"validateForm",label:"Validate Form"},{value:"resetForm",label:"Reset Form"},{value:"submitForm",label:"Submit Form"},{value:"setComponentState",label:"Set Component State"},{value:"triggerComponentAction",label:"Trigger Component Action"},{value:"updateFormField",label:"Update Form Field"},{value:"filterCollection",label:"Filter Collection"},{value:"selectItem",label:"Select Item"},{value:"clearSelection",label:"Clear Selection"},{value:"copyToClipboard",label:"Copy to Clipboard"},{value:"customFunction",label:"Custom Function"},{value:"loadDataTable",label:"Load DataTable"},{value:"syncComponent",label:"Sync Component"},{value:"saveToDataTable",label:"Save to DataTable"},{value:"setVariable",label:"Set Variable"}],r=i=>{e({type:i,config:{navigate:{path:"/"},scrollTo:{elementId:"",position:"top",smooth:!0},setState:{storePath:"",value:""},updateState:{storePath:"",value:"",merge:!1},apiCall:{endpoint:"",method:"GET"},showModal:{modalId:""},hideModal:{modalId:""},showToast:{message:"",variant:"info",duration:3e3},toggleVisibility:{elementId:"",show:void 0},validateForm:{formId:""},resetForm:{formId:""},submitForm:{formId:""},setComponentState:{targetId:"",statePath:"",value:"",source:"static"},triggerComponentAction:{targetId:"",action:""},updateFormField:{fieldName:"",value:"",source:"static"},filterCollection:{targetId:"",filterMode:"text",query:""},selectItem:{targetId:"",itemId:"",behavior:"replace",source:"static"},clearSelection:{targetId:""},copyToClipboard:{text:"",source:"static"},customFunction:{code:"",params:{}},loadDataTable:{dataTableName:"",forceRefresh:!1},syncComponent:{sourceId:"",targetId:"",syncMode:"replace"},saveToDataTable:{dataTableName:"",source:"response",saveMode:"replace"},setVariable:{variableName:"",value:"",persist:!1}}[i]})};return l.jsxs("div",{className:"action-editor",children:[l.jsxs("div",{className:"action-type-selector",children:[l.jsx(kt,{className:"field-label",children:"Action Type"}),l.jsxs(wi,{selectedKey:t.type,onSelectionChange:i=>r(i),children:[l.jsx(Pt,{className:"select-trigger",children:l.jsx(ai,{})}),l.jsx(Yr,{className:"select-popover",children:l.jsx(Ar,{className:"select-listbox",children:n.map(i=>l.jsx(En,{id:i.value,children:i.label},i.value))})})]})]}),l.jsxs("div",{className:"action-config",children:[t.type==="navigate"&&l.jsx(HDe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="scrollTo"&&l.jsx(YDe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="setState"&&l.jsx(GDe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="updateState"&&l.jsx(ZDe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="apiCall"&&l.jsx(WDe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="showModal"&&l.jsx(qDe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="hideModal"&&l.jsx(JDe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="showToast"&&l.jsx(KDe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="toggleVisibility"&&l.jsx(QDe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="validateForm"&&l.jsx(XDe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="resetForm"&&l.jsx(eke,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="submitForm"&&l.jsx(tke,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="copyToClipboard"&&l.jsx(nke,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="customFunction"&&l.jsx(rke,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="setComponentState"&&l.jsx(ske,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="triggerComponentAction"&&l.jsx(oke,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="updateFormField"&&l.jsx(lke,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="filterCollection"&&l.jsx(cke,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="selectItem"&&l.jsx(uke,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="clearSelection"&&l.jsx(dke,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="loadDataTable"&&l.jsx(hke,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="syncComponent"&&l.jsx(fke,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="saveToDataTable"&&l.jsx(pke,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="setVariable"&&l.jsx(mke,{config:t.config,onChange:i=>e({...t,config:i})})]}),l.jsxs("div",{className:"action-advanced-settings",children:[l.jsx("div",{className:"section-divider",children:"Advanced Settings"}),l.jsx(vke,{delay:t.delay,onChange:i=>e({...t,delay:i})}),l.jsx(gke,{condition:t.condition,onChange:i=>e({...t,condition:i}),label:"Execute only when (condition)",placeholder:"state.isEnabled === true && event.value > 0"})]})]})}function bke({onSelect:t,selectedType:e,isDisabled:n=!1,inline:r=!1,placeholder:i="Search actions...",showCategories:a=!0}){const[s,o]=T.useState(""),[c,u]=T.useState(!1),h=T.useMemo(()=>Object.keys(Du),[]),f=T.useMemo(()=>{if(!s)return h;const _=s.toLowerCase();return h.filter(w=>{const S=Du[w]?.toLowerCase()||"";return w.toLowerCase().includes(_)||S.includes(_)})},[h,s]),m=T.useMemo(()=>{if(!a)return[{category:"Actions",actions:f}];const _=[];return typeof Hk<"u"?Object.entries(Hk).forEach(([,w])=>{const S=w,E=S.actions.filter(A=>f.includes(A));E.length>0&&_.push({category:S.label,actions:E})}):_.push({category:"Actions",actions:f}),_},[f,a]),g=_=>{t(_),o(""),u(!1)},v=T.useRef(null),x=_=>{u(_),_?setTimeout(()=>{v.current?.focus()},50):o("")};return r?l.jsxs(my,{isOpen:c,onOpenChange:x,children:[l.jsxs(Pt,{className:"action-picker-inline-trigger",isDisabled:n,"aria-label":"  ",children:[l.jsx("span",{className:"action-picker-value",children:e?Du[e]||e:i}),l.jsx(_i,{size:14})]}),l.jsxs(__,{placement:"bottom start",offset:4,className:"action-picker-popover",showArrow:!1,children:[l.jsxs("div",{className:"action-picker-search",children:[l.jsx(al,{size:14,color:se.color}),l.jsx("input",{ref:v,className:"action-picker-search-input",placeholder:i,value:s,onChange:_=>o(_.target.value)})]}),l.jsx(Ar,{className:"action-picker-list","aria-label":"  ",selectionMode:"single",onSelectionChange:_=>{const w=Array.from(_)[0];w&&g(w)},children:f.length===0?l.jsx(En,{id:"empty",textValue:"No actions found",children:l.jsxs("div",{className:"action-picker-empty",children:[l.jsx(al,{size:16,color:se.color}),l.jsx("span",{children:"No actions found"})]})}):m.flatMap(_=>[l.jsx(En,{id:`label-${_.category}`,textValue:_.category,className:"action-group-label-item",children:l.jsx("div",{className:"action-group-label",children:_.category})},`label-${_.category}`),..._.actions.map(w=>l.jsxs(En,{id:w,className:"action-item",textValue:Du[w]||w,children:[l.jsx("span",{className:"action-name",children:Du[w]||w}),l.jsx("span",{className:"action-type-code",children:w})]},w))])})]})]}):l.jsxs(my,{isOpen:c,onOpenChange:x,children:[l.jsx(Pt,{className:"iconButton",isDisabled:n||h.length===0,"aria-label":" ",children:l.jsx(oy,{color:se.color,strokeWidth:se.stroke,size:se.size})}),l.jsxs(__,{placement:"bottom end",offset:4,className:"action-picker-popover",showArrow:!1,children:[l.jsxs("div",{className:"action-picker-search",children:[l.jsx(al,{size:14,color:se.color}),l.jsx("input",{ref:v,className:"action-picker-search-input",placeholder:i,value:s,onChange:_=>o(_.target.value)})]}),l.jsx(Ar,{className:"action-picker-list","aria-label":"  ",selectionMode:"single",onSelectionChange:_=>{const w=Array.from(_)[0];w&&g(w)},children:f.length===0?l.jsx(En,{id:"empty",textValue:"No actions found",children:l.jsx("div",{className:"action-picker-empty",children:l.jsx("span",{children:"No actions found"})})}):m.flatMap(_=>[l.jsx(En,{id:`label-${_.category}`,textValue:_.category,className:"action-group-label-item",children:l.jsx("div",{className:"action-group-label",children:_.category})},`label-${_.category}`),..._.actions.map(w=>l.jsxs(En,{id:w,className:"action-item",textValue:Du[w]||w,children:[l.jsx("span",{className:"action-name",children:Du[w]||w}),l.jsx("span",{className:"action-type-code",children:w})]},w))])})]})]})}function xke(t){return{type:t.type,config:t.config,delay:t.delay,condition:t.condition}}function _ke(t,e){return{...e,type:t.type,config:t.config,delay:t.delay,condition:t.condition}}function wke({action:t,onChange:e,onClose:n,onRemove:r,showTitle:i=!0}){const[a,s]=T.useState(!1),o=xke(t),c=h=>{e(_ke(h,t))},u=h=>{e({...t,enabled:h})};return l.jsxs("div",{className:"block-action-editor","data-action-id":t.id,children:[i&&l.jsxs("div",{className:"block-action-editor-header",children:[l.jsx("span",{className:"block-action-editor-title",children:"Edit Action"}),l.jsx("div",{className:"block-action-enabled-toggle",children:l.jsx(mT,{isSelected:t.enabled!==!1,onChange:u,"aria-label":"Enable action",children:l.jsx("span",{className:"switch-label",children:"Enabled"})})}),l.jsx("div",{className:"block-action-editor-spacer"}),r&&l.jsx(Pt,{className:"iconButton",onPress:r,"aria-label":"Remove action",children:l.jsx(ol,{size:16,color:se.color,strokeWidth:se.stroke})}),n&&l.jsx(Pt,{className:"iconButton",onPress:n,"aria-label":"Close editor",children:l.jsx(ol,{size:16,color:se.color,strokeWidth:se.stroke})})]}),l.jsxs("div",{className:"block-action-type-row",children:[l.jsx("span",{className:"block-action-type-label",children:"Type"}),l.jsx(bke,{selectedType:t.type,onSelect:h=>{const f=Ske(h);e({...t,type:h,config:f})},inline:!0,placeholder:"Select action type..."})]}),l.jsx("div",{className:"block-action-config",children:l.jsx(yke,{action:o,onChange:c})}),l.jsxs(Pt,{className:"block-action-advanced-toggle",onPress:()=>s(!a),"aria-expanded":a,children:[a?l.jsx(_i,{size:14,color:se.color}):l.jsx(Ia,{size:14,color:se.color}),l.jsx("span",{children:"Advanced Settings"})]}),a&&l.jsx("div",{className:"block-action-advanced"})]})}function Ske(t){return{navigate:{path:"/"},scrollTo:{elementId:"",position:"top",smooth:!0},setState:{storePath:"",value:""},updateState:{storePath:"",value:"",merge:!1},apiCall:{endpoint:"",method:"GET"},showModal:{modalId:""},hideModal:{modalId:""},showToast:{message:"",variant:"info",duration:3e3},toggleVisibility:{elementId:"",show:void 0},validateForm:{formId:""},resetForm:{formId:""},submitForm:{formId:""},setComponentState:{targetId:"",statePath:"",value:"",source:"static"},triggerComponentAction:{targetId:"",action:""},updateFormField:{fieldName:"",value:"",source:"static"},filterCollection:{targetId:"",filterMode:"text",query:""},selectItem:{targetId:"",itemId:"",behavior:"replace",source:"static"},clearSelection:{targetId:""},copyToClipboard:{text:"",source:"static"},customFunction:{code:"",params:{}},loadDataTable:{dataTableName:"",forceRefresh:!1},syncComponent:{sourceId:"",targetId:"",syncMode:"replace"},saveToDataTable:{dataTableName:"",source:"response",saveMode:"replace"}}[t]||{}}function qA({data:t,onUpdate:e,dependencies:n=[],resetKey:r}){const i=T.useRef(""),a=T.useRef(!0),s=T.useRef(r??null);T.useEffect(()=>{const o=r??null;o!==s.current&&(s.current=o,a.current=!0,i.current=JSON.stringify(t))},[r,t]),T.useEffect(()=>{const o=JSON.stringify(t);if(a.current){a.current=!1,i.current=o;return}o!==i.current&&(i.current=o,e(t))},[t,e,...n])}function Eke(t){return T.useMemo(()=>t?FSe(t):null,[t])}function Cke(t){return{event:t.event,target:"self"}}function XO(t){return t?t.map((e,n)=>({id:e.id||`action-${n}-${Date.now()}`,type:e.type,config:e.config||{},delay:e.delay,condition:e.condition,enabled:e.enabled!==!1})):[]}function Tke(t){if(!t||t.trim()==="")return;const e=t.includes(" || "),n=t.includes(" && "),r=e&&!n?"OR":"AND",i=r==="OR"?" || ":" && ",s=t.split(i).map((o,c)=>{const u=o.trim(),h=u.split(/\s+/);return{id:`cond-parsed-${c}-${Date.now()}`,left:{type:"literal",value:h[0]||u},operator:h[1]||"is_not_empty",right:h[2]?{type:"literal",value:h[2]}:void 0}});return{operator:r,conditions:s}}function Mke({branch:t,onSelect:e,onClose:n}){const[r,i]=T.useState(""),a=T.useMemo(()=>Object.keys(Du),[]),s=T.useMemo(()=>{if(!r)return a;const c=r.toLowerCase();return a.filter(u=>{const h=Du[u]?.toLowerCase()||"";return u.toLowerCase().includes(c)||h.includes(c)})},[a,r]),o=T.useMemo(()=>{const c=[];return Object.entries(Hk).forEach(([,u])=>{const h=u,f=h.actions.filter(m=>s.includes(m));f.length>0&&c.push({category:h.label,actions:f})}),c},[s]);return l.jsxs("div",{className:"action-picker-overlay",children:[l.jsxs("div",{className:"action-picker-header",children:[l.jsxs("span",{children:["Add Action to ",t.toUpperCase()]}),l.jsx(Pt,{className:"iconButton",onPress:n,"aria-label":"Close",children:l.jsx(ol,{color:se.color,strokeWidth:se.stroke,size:se.size})})]}),l.jsxs("div",{className:"action-picker-search",children:[l.jsx(al,{size:14,color:se.color}),l.jsx("input",{className:"action-picker-search-input",placeholder:"Search actions...",value:r,onChange:c=>i(c.target.value),autoFocus:!0})]}),l.jsx("div",{className:"action-picker-list",role:"listbox","aria-label":"  ",children:s.length===0?l.jsxs("div",{className:"action-picker-empty",children:[l.jsx(al,{size:16,color:se.color}),l.jsx("span",{children:"No actions found"})]}):o.map(c=>l.jsxs("div",{className:"action-group",children:[l.jsx("div",{className:"action-group-label",children:c.category}),c.actions.map(u=>l.jsxs("button",{type:"button",className:"action-item",onClick:()=>e(u),children:[l.jsx("span",{className:"action-name",children:Du[u]||u}),l.jsx("span",{className:"action-type-code",children:u})]},u))]},c.category))})]})}function Ake({isActive:t}){const e=ur(r=>r.selectedElement),n=ur(r=>r.updateEvents);return t?e?l.jsx(Pke,{selectedElement:e,updateEvents:n},e.id):l.jsxs("div",{className:"events-panel",children:[l.jsx(Ul,{icon:l.jsx(MR,{size:16}),title:"Events"}),l.jsx("div",{className:"panel-contents",children:l.jsx(ya,{message:" "})})]}):null}function Pke({selectedElement:t,updateEvents:e}){const i=(Eke(t?.type)?.inspector.supportedEvents||[]).filter(X=>HO(X)),[a,s]=T.useState(!1),[o,c]=T.useState(null),[u,h]=T.useState("then"),f=t?.events||[],{handlers:m,addHandler:g,updateHandler:v,removeHandler:x}=PDe(f),{selectedHandler:_,selectHandler:w,selectAfterDelete:S}=DDe(m),{actions:E,addAction:A}=GO(_?.actions||[]),{actions:N,addAction:P}=GO(_?.elseActions||[]),R=m.map(X=>X.event).filter(X=>HO(X)),D=i.filter(X=>!R.includes(X));qA({data:E,onUpdate:X=>{if(_){const ne={..._,actions:X};v(_.id,ne)}},resetKey:_?.id}),qA({data:N,onUpdate:X=>{if(_){const ne={..._,elseActions:X};v(_.id,ne)}},resetKey:_?.id});const k=T.useCallback(X=>{e(X)},[e]);qA({data:m,onUpdate:k,resetKey:t?.id});const L=X=>{if(R.includes(X))return;const ne=g(X);w(ne.id)},$=X=>{x(X),S(X)},B=(X,ne="then")=>{const G=TDe(X);ne==="else"?P(G,{}):A(G,{}),s(!1)},q=T.useCallback(X=>{const ne=E.filter(te=>te.id!==X),G={..._,actions:ne};v(_.id,G)},[E,_,v]),U=T.useCallback(X=>{const ne=N.filter(te=>te.id!==X),G={..._,elseActions:ne};v(_.id,G)},[N,_,v]),J=T.useCallback((X,ne)=>{const G=E.find(te=>te.id===X);if(G){const te={...G,...ne,enabled:ne.enabled!==void 0?ne.enabled:G.enabled??!0},ae=E.map(ye=>ye.id===X?te:ye),pe={..._,actions:ae};v(_.id,pe)}},[E,_,v]),O=T.useCallback((X,ne)=>{const G=N.find(te=>te.id===X);if(G){const te={...G,...ne,enabled:ne.enabled!==void 0?ne.enabled:G.enabled??!0},ae=N.map(ye=>ye.id===X?te:ye),pe={..._,elseActions:ae};v(_.id,pe)}},[N,_,v]),z=T.useCallback(X=>{if(!_)return;const ne={..._,event:X.event};v(_.id,ne)},[_,v]),V=T.useCallback(X=>{if(!_)return;const ne=X?X.conditions.map(te=>`${te.left.value} ${te.operator} ${te.right?.value||""}`).join(X.operator==="AND"?" && ":" || "):void 0,G={..._,condition:ne};v(_.id,G)},[_,v]),H=T.useCallback(()=>{if(!_)return;const X={..._,condition:void 0};v(_.id,X)},[_,v]),ee=XO(_?.actions||[]),Y=XO(_?.elseActions||[]),Z=Tke(_?.condition),K=!!_?.condition;return l.jsxs("div",{className:"events-panel",children:[l.jsx(Ul,{icon:l.jsx(MR,{size:16}),title:"Events",actions:D.length===1?l.jsx(Pt,{className:"iconButton",onPress:()=>L(D[0]),"aria-label":`Add ${D[0]}`,title:`Add ${D[0]}`,children:l.jsx(Vm,{size:se.size,color:se.color,strokeWidth:se.stroke})}):l.jsx(eZ,{onSelect:L,registeredTypes:R,allowedTypes:i,isDisabled:D.length===0&&i.length===0})}),l.jsx("div",{className:"panel-contents",children:m.length===0?l.jsx(ya,{icon:l.jsx(Vm,{size:32,color:se.color,strokeWidth:se.stroke}),message:"  ",description:" +    "}):_?l.jsxs("div",{className:"section block-view","data-section-id":"handler-detail",children:[l.jsxs("div",{className:"section-header",children:[l.jsx(Pt,{className:"iconButton",onPress:()=>w(null),"aria-label":"Back to list",children:l.jsx(Q1,{color:se.color,strokeWidth:se.stroke,size:se.size})}),l.jsx("span",{className:"section-title",children:_.event}),l.jsx("div",{className:"section-actions",children:l.jsx(Pt,{className:"iconButton",onPress:()=>$(_.id),"aria-label":"Delete handler",children:l.jsx(Qo,{color:se.color,strokeWidth:se.stroke,size:se.size})})})]}),l.jsxs("div",{className:"block-editor",children:[l.jsx(RDe,{trigger:Cke(_),onChange:z,registeredEventTypes:R.filter(X=>X!==_.event),allowedEventTypes:i,showConnector:!0}),l.jsx(ODe,{conditions:Z,onChange:V,onRemove:H,showSplitConnector:K}),l.jsx(KO,{type:"then",actions:ee,onAddAction:()=>s("then"),onActionClick:X=>{c(X),h("then")},onRemoveAction:q,onUpdateAction:J,showConnector:!0}),K&&l.jsx(KO,{type:"else",actions:Y,onAddAction:()=>s("else"),onActionClick:X=>{c(X),h("else")},onRemoveAction:U,onUpdateAction:O,showConnector:!0}),a&&l.jsx(Mke,{branch:a,onSelect:X=>B(X,a),onClose:()=>s(!1)}),o&&l.jsxs("div",{className:"action-editor-overlay",children:[l.jsxs("div",{className:"action-editor-header",children:[l.jsx(Pt,{className:"iconButton",onPress:()=>c(null),"aria-label":"Close editor",children:l.jsx(Q1,{color:se.color,strokeWidth:se.stroke,size:se.size})}),l.jsxs("span",{className:"action-editor-title",children:[o.type," (",u.toUpperCase(),")"]})]}),l.jsx(wke,{action:o,onChange:X=>{u==="else"?O(o.id,X):J(o.id,X),c({...o,...X})}})]})]}),l.jsx($a,{id:"handler-settings",title:"Settings",children:l.jsx(kDe,{debounce:_.debounce,throttle:_.throttle,onChange:({debounce:X,throttle:ne})=>{const G={..._,debounce:X,throttle:ne};v(_.id,G)}})})]}):l.jsx($a,{id:"handlers-list",title:"Event Handlers",children:l.jsx("div",{className:"handlers-list",children:m.map(X=>l.jsxs("button",{type:"button",className:"handler-item",onClick:()=>w(X.id),children:[l.jsxs("div",{className:"handler-info",children:[l.jsx(Vm,{size:14,color:se.color,strokeWidth:se.stroke}),l.jsx("span",{className:"handler-type",children:X.event})]}),l.jsxs("span",{className:"handler-action-count",children:[X.actions?.length||0," action",(X.actions?.length||0)!==1?"s":""]})]},X.id))})})})]})}function Nke(t={}){const{enabled:e=!0,interval:n=1e4}=t,[r,i]=T.useState(null),[a,s]=T.useState(""),[o,c]=T.useState(!1),u=T.useRef(null),h=T.useCallback(()=>{try{const m=Ni.getMemoryStats(),g=performance,v=g.memory?{usedJSHeapSize:g.memory.usedJSHeapSize,totalJSHeapSize:g.memory.totalJSHeapSize,jsHeapSizeLimit:g.memory.jsHeapSizeLimit,usagePercent:g.memory.usedJSHeapSize/g.memory.jsHeapSizeLimit*100}:null,x=Dke(m.totalEntries,m.commandStoreStats.estimatedMemoryUsage,v?.usagePercent);i({pageCount:m.pageCount,totalEntries:m.totalEntries,commandStoreStats:m.commandStoreStats,browserMemory:v,recommendation:x,isBrowserMemorySupported:!!g.memory})}catch{}},[]);T.useEffect(()=>{if(!e){u.current&&(clearInterval(u.current),u.current=null);return}return"requestIdleCallback"in window?window.requestIdleCallback(()=>{h()}):setTimeout(h,0),u.current=window.setInterval(()=>{"requestIdleCallback"in window?window.requestIdleCallback(()=>{h()}):h()},n),()=>{u.current&&(clearInterval(u.current),u.current=null)}},[e,n,h]);const f=T.useCallback(async()=>{c(!0),s("  ...");try{Ni.optimizeMemory(),"gc"in window&&window.gc?.(),await new Promise(m=>setTimeout(m,100)),h(),s("  ")}catch{s("   ")}finally{c(!1),setTimeout(()=>s(""),3e3)}},[h]);return{stats:r,statusMessage:a,optimize:f,isOptimizing:o}}function Dke(t,e,n){const r=e/1048576;return n&&n>75?"   .     .":r>50?"  50MB .  .":t>200?"  .   .":r>20?"   .":"  ."}function Nf(t){if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(2))+" "+n[r]}function kke(t,e={}){const{maxPoints:n=60,intervalMs:r=1e3,enabled:i=!0}=e,[a,s]=T.useState([]),o=T.useRef(null),c=T.useCallback(()=>{const h=t();if(!h)return;const f={timestamp:Date.now(),memoryUsage:h.memoryUsage,memoryPercent:h.memoryPercent,historyEntries:h.historyEntries,cacheSize:h.cacheSize};s(m=>[...m,f].slice(-n))},[t,n]);T.useEffect(()=>{if(!i){o.current&&(clearInterval(o.current),o.current=null);return}const h=setTimeout(c,0);return o.current=window.setInterval(c,r),()=>{clearTimeout(h),o.current&&clearInterval(o.current)}},[i,r,c]);const u=T.useCallback(()=>{s([])},[]);return{data:a,clearData:u}}function Rke(t={}){const{enabled:e=!0,historySize:n=60}=t,[r,i]=T.useState({current:0,average:0,min:60,max:0,history:[]}),a=T.useRef(0),s=T.useRef(0),o=T.useRef(null),c=T.useRef([]),u=T.useRef(e),h=T.useRef(n);T.useEffect(()=>{u.current=e,h.current=n},[e,n]),T.useEffect(()=>{if(!e){o.current&&(cancelAnimationFrame(o.current),o.current=null);return}s.current=performance.now();function m(){const g=performance.now();a.current++;const v=g-s.current;if(v>=1e3){const x=Math.round(a.current*1e3/v);c.current=[...c.current.slice(-(h.current-1)),x];const _=c.current,w=Math.round(_.reduce((A,N)=>A+N,0)/_.length),S=Math.min(..._),E=Math.max(..._);i({current:x,average:w,min:S,max:E,history:[..._]}),a.current=0,s.current=g}u.current&&(o.current=requestAnimationFrame(m))}return o.current=requestAnimationFrame(m),()=>{o.current&&(cancelAnimationFrame(o.current),o.current=null)}},[e]);const f=T.useCallback(()=>{c.current=[],i({current:0,average:0,min:60,max:0,history:[]})},[]);return{fps:r,reset:f}}function Ike(t={}){const{enabled:e=!0}=t,[n,r]=T.useState({lcp:null,fid:null,cls:null,ttfb:null});T.useEffect(()=>{if(!e)return;const s=o=>{o.data.type==="WEB_VITALS_UPDATE"&&r(o.data.vitals)};return window.addEventListener("message",s),()=>window.removeEventListener("message",s)},[e]);const i=T.useCallback(()=>{const s=document.querySelector(".canvas-iframe");s?.contentWindow&&s.contentWindow.postMessage({type:"REQUEST_WEB_VITALS"},"*")},[]),a=T.useCallback(()=>{const s={lcp:null,fid:null,cls:null,ttfb:null};if("PerformanceObserver"in window){const o=performance.getEntriesByType("largest-contentful-paint");o.length>0&&(s.lcp=Math.round(o[o.length-1].startTime));const c=performance.getEntriesByType("navigation");if(c.length>0){const h=c[0];s.ttfb=Math.round(h.responseStart-h.requestStart)}const u=performance.getEntriesByType("layout-shift");s.cls=u.reduce((h,f)=>h+(f.value||0),0)}return r(s),s},[]);return{vitals:n,requestVitals:i,collectLocalVitals:a}}function $ke({data:t,width:e=400,height:n=120,threshold:r}){const i={top:10,right:10,bottom:20,left:50},a=e-i.left-i.right,s=n-i.top-i.bottom,{minValue:o,maxValue:c,yScale:u,xScale:h,pathD:f}=T.useMemo(()=>{if(t.length===0)return{minValue:0,maxValue:1,yScale:()=>0,xScale:()=>0,pathD:""};const x=Math.min(...t),_=Math.max(...t),w=_-x||_*.1||1,S=Math.max(0,x-w*.1),E=_+w*.1,A=D=>s-(D-S)/(E-S)*s,N=D=>D/(t.length-1||1)*a,R=t.map((D,k)=>({x:N(k),y:A(D)})).map((D,k)=>`${k===0?"M":"L"} ${D.x} ${D.y}`).join(" ");return{minValue:S,maxValue:E,yScale:A,xScale:N,pathD:R}},[t,a,s]),m=t[t.length-1]||0,g=r&&m>r,v=T.useMemo(()=>{const w=(c-o)/2;return Array.from({length:3},(S,E)=>o+w*E)},[o,c]);return l.jsxs("div",{className:"memory-chart",children:[l.jsx("svg",{width:e,height:n,"aria-label":"Memory usage chart",children:l.jsxs("g",{transform:`translate(${i.left}, ${i.top})`,children:[v.map((x,_)=>l.jsxs("g",{children:[l.jsx("line",{x1:0,y1:u(x),x2:a,y2:u(x),className:"chart-grid-line"}),l.jsx("text",{x:-8,y:u(x),className:"chart-axis-label",textAnchor:"end",dominantBaseline:"middle",children:Nf(x)})]},_)),r&&l.jsx("line",{x1:0,y1:u(r),x2:a,y2:u(r),className:"chart-threshold-line"}),t.length>1&&l.jsx("path",{d:f,className:`chart-line ${g?"chart-line-danger":""}`,fill:"none"}),t.length>0&&l.jsx("circle",{cx:h(t.length-1),cy:u(m),r:4,className:`chart-dot ${g?"chart-dot-danger":""}`}),l.jsxs("text",{x:a/2,y:s+15,className:"chart-axis-label",textAnchor:"middle",children:["Last ",Math.min(t.length,60)*10,"s"]})]})}),l.jsxs("div",{className:`chart-current-value ${g?"danger":""}`,children:[l.jsx("span",{className:"label",children:"Current:"}),l.jsx("span",{className:"value",children:Nf(m)})]})]})}function jke({onOptimize:t,recommendation:e,isOptimizing:n=!1}){return l.jsxs("div",{className:"memory-actions",children:[l.jsx("div",{className:"recommendation",children:l.jsx("span",{className:"recommendation-text",children:e})}),l.jsx(Pt,{className:"optimize-button",onPress:t,isDisabled:n,"aria-label":"Optimize memory",children:n?l.jsxs(l.Fragment,{children:[l.jsx(Jm,{size:14,className:"spinning"}),l.jsx("span",{children:"Optimizing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(Ws,{size:14}),l.jsx("span",{children:"Optimize"})]})})]})}function Lke({value:t,warningThreshold:e=60,dangerThreshold:n=75,label:r="Memory Usage"}){const i=t>=n?"danger":t>=e?"warning":"safe",a=i==="danger"?bR:i==="warning"?i9:BB,s=i==="danger"?"":i==="warning"?"":"";return l.jsxs("div",{className:"threshold-indicator","data-threshold":i,children:[l.jsx(a,{size:16,"aria-hidden":"true"}),l.jsxs("span",{className:"sr-only",children:[s,": "]}),l.jsxs("span",{children:[r,": ",t.toFixed(1),"%"]})]})}function YO({stats:t,format:e="json"}){const n=()=>{if(!t)return;const r=new Date().toISOString().replace(/[:.]/g,"-");let i,a,s;if(e==="csv"){const f=["Metric","Value","Timestamp"],m=[["Page Count",t.pageCount,r],["Total Entries",t.totalEntries,r],["Command Count",t.commandStoreStats.commandCount,r],["Cache Size",t.commandStoreStats.cacheSize,r],["Memory Usage (bytes)",t.commandStoreStats.estimatedMemoryUsage,r],["Compression Ratio",t.commandStoreStats.compressionRatio.toFixed(4),r]];i="\uFEFF"+[f,...m].map(g=>g.join(",")).join(`
`),a="text/csv;charset=utf-8",s="csv"}else i=JSON.stringify({...t,exportedAt:r},null,2),a="application/json",s="json";const o=new Blob([i],{type:a}),c=URL.createObjectURL(o),u=document.createElement("a");u.href=c,u.download=`monitor-stats-${r}.${s}`,u.click(),URL.revokeObjectURL(c)};return l.jsxs(Pt,{className:"export-button",onPress:n,isDisabled:!t,"aria-label":`Export stats as ${e.toUpperCase()}`,children:[l.jsx($2,{size:14,"aria-hidden":"true"}),l.jsxs("span",{children:["Export ",e.toUpperCase()]})]})}function Oke({data:t,width:e=400,height:n=120,metric:r="memoryPercent",showThresholds:i=!0}){const a={top:10,right:10,bottom:20,left:40},s=e-a.left-a.right,o=n-a.top-a.bottom,{minValue:c,maxValue:u,pathD:h,points:f}=T.useMemo(()=>{if(t.length===0)return{minValue:0,maxValue:100,pathD:"",points:[]};const v=t.map(A=>A[r]),x=r==="memoryPercent"?0:Math.min(...v),_=r==="memoryPercent"?100:Math.max(...v)*1.1,w=_-x||1,S=t.map((A,N)=>({x:a.left+N/(t.length-1||1)*s,y:a.top+o-(A[r]-x)/w*o,value:A[r],time:A.timestamp})),E=S.map((A,N)=>`${N===0?"M":"L"} ${A.x} ${A.y}`).join(" ");return{minValue:x,maxValue:_,pathD:E,points:S}},[t,r,s,o,a.left,a.top]),m=T.useMemo(()=>{if(t.length<2)return[];const v=[],x=t[t.length-1].timestamp;for(let _=0;_<t.length;_+=10){const w=t[_],S=a.left+_/(t.length-1||1)*s,E=Math.round((x-w.timestamp)/1e3);v.push({x:S,label:`-${E}s`})}return v},[t,s,a.left]),g=T.useMemo(()=>{const v=[];for(let _=0;_<=4;_++){const w=c+(u-c)*_/4,S=a.top+o-_/4*o;v.push({y:S,label:r==="memoryPercent"?`${Math.round(w)}%`:Math.round(w).toString()})}return v},[c,u,o,a.top,r]);return l.jsxs("svg",{width:e,height:n,className:"realtime-chart","aria-label":`Real-time ${r} chart showing last ${t.length} seconds`,role:"img",children:[l.jsx("g",{className:"chart-grid","aria-hidden":"true",children:g.map((v,x)=>l.jsx("line",{x1:a.left,y1:v.y,x2:e-a.right,y2:v.y,className:"chart-grid-line"},x))}),i&&r==="memoryPercent"&&l.jsxs("g",{className:"threshold-lines","aria-hidden":"true",children:[l.jsx("line",{x1:a.left,y1:a.top+o*.4,x2:e-a.right,y2:a.top+o*.4,className:"chart-threshold-warning"}),l.jsx("line",{x1:a.left,y1:a.top+o*.25,x2:e-a.right,y2:a.top+o*.25,className:"chart-threshold-danger"})]}),h&&f.length>0&&l.jsxs("g",{className:"chart-area",children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"realtimeAreaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"var(--primary)",stopOpacity:"0.3"}),l.jsx("stop",{offset:"100%",stopColor:"var(--primary)",stopOpacity:"0.05"})]})}),l.jsx("path",{d:`${h} L ${f[f.length-1]?.x??0} ${a.top+o} L ${a.left} ${a.top+o} Z`,fill:"url(#realtimeAreaGradient)"}),l.jsx("path",{d:h,fill:"none",className:"chart-line"})]}),f.length>0&&l.jsx("circle",{cx:f[f.length-1].x,cy:f[f.length-1].y,r:"4",className:"chart-dot"}),l.jsx("g",{className:"y-axis","aria-hidden":"true",children:g.map((v,x)=>l.jsx("text",{x:a.left-5,y:v.y+4,textAnchor:"end",className:"chart-axis-label",children:v.label},x))}),l.jsx("g",{className:"x-axis","aria-hidden":"true",children:m.map((v,x)=>l.jsx("text",{x:v.x,y:n-5,textAnchor:"middle",className:"chart-axis-label",children:v.label},x))}),l.jsxs("text",{className:"sr-only",children:["Current ",r,": ",f[f.length-1]?.value.toFixed(1)??"N/A"]})]})}function ZO(t){return t>=55?"good":t>=30?"warning":"poor"}function Fke({fps:t}){const e=ZO(t.current);return l.jsxs("div",{className:"fps-meter","data-status":e,children:[l.jsxs("div",{className:"fps-meter-header",children:[l.jsx(yf,{size:14,"aria-hidden":"true"}),l.jsx("span",{className:"fps-meter-title",children:"FPS"})]}),l.jsxs("div",{className:"fps-meter-value",children:[l.jsx("span",{className:"fps-current",children:t.current}),l.jsx("span",{className:"fps-unit",children:"fps"})]}),l.jsxs("div",{className:"fps-meter-stats",children:[l.jsxs("div",{className:"fps-stat",children:[l.jsx("span",{className:"fps-stat-label",children:"Avg"}),l.jsx("span",{className:"fps-stat-value",children:t.average})]}),l.jsxs("div",{className:"fps-stat",children:[l.jsx("span",{className:"fps-stat-label",children:"Min"}),l.jsx("span",{className:"fps-stat-value",children:t.min})]}),l.jsxs("div",{className:"fps-stat",children:[l.jsx("span",{className:"fps-stat-label",children:"Max"}),l.jsx("span",{className:"fps-stat-value",children:t.max})]})]}),l.jsx("div",{className:"fps-mini-chart","aria-hidden":"true",children:t.history.slice(-30).map((n,r)=>l.jsx("div",{className:"fps-bar",style:{height:`${Math.min(100,n/60*100)}%`},"data-status":ZO(n)},r))}),l.jsxs("span",{className:"sr-only",children:["Current FPS: ",t.current,", Average: ",t.average,", Status: ",e]})]})}const Bke={lcp:{good:2500,poor:4e3},fid:{good:100,poor:300},cls:{good:.1,poor:.25},ttfb:{good:800,poor:1800}};function zke(t,e){if(e===null)return"unknown";const{good:n,poor:r}=Bke[t];return e<=n?"good":e<=r?"needs-improvement":"poor"}function Uke(t,e){return e===null?"":t==="cls"?e.toFixed(3):Math.round(e).toString()}function Vke({vitals:t,onRefresh:e}){const n=[{key:"lcp",label:"LCP",description:"Largest Contentful Paint",value:t.lcp,unit:"ms",icon:WB},{key:"fid",label:"FID",description:"First Input Delay",value:t.fid,unit:"ms",icon:j1},{key:"cls",label:"CLS",description:"Cumulative Layout Shift",value:t.cls,unit:"",icon:G_},{key:"ttfb",label:"TTFB",description:"Time to First Byte",value:t.ttfb,unit:"ms",icon:zB}];return l.jsxs("div",{className:"web-vitals-card",children:[l.jsxs("div",{className:"web-vitals-header",children:[l.jsx("h4",{className:"web-vitals-title",children:"Core Web Vitals"}),e&&l.jsx("button",{type:"button",className:"web-vitals-refresh",onClick:e,"aria-label":"Refresh Web Vitals",children:""})]}),l.jsx("div",{className:"web-vitals-grid",children:n.map(({key:r,label:i,description:a,value:s,unit:o,icon:c})=>l.jsxs("div",{className:"web-vital-item","data-status":zke(r,s),title:a,children:[l.jsx(c,{size:14,"aria-hidden":"true"}),l.jsx("span",{className:"web-vital-label",children:i}),l.jsxs("span",{className:"web-vital-value",children:[Uke(r,s),s!==null&&o&&l.jsx("span",{className:"web-vital-unit",children:o})]})]},r))})]})}function qk(t){return t==null?0:typeof t=="boolean"?4:typeof t=="number"?8:typeof t=="string"?t.length*2:Array.isArray(t)?t.reduce((e,n)=>e+qk(n),0):typeof t=="object"?Object.entries(t).reduce((e,[n,r])=>e+n.length*2+qk(r),0):0}function Hke(t,e){let n=0,r=e.find(i=>i.id===t);for(;r?.parent_id&&(n++,r=e.find(i=>i.id===r.parent_id),!(n>100)););return n}function tZ(t,e){return e.filter(r=>r.parent_id===t).reduce((r,i)=>r+1+tZ(i.id,e),0)}function Gke(t={}){const{enabled:e=!0,sortBy:n="memory",limit:r=20}=t,i=$e(h=>h.elements),[a,s]=T.useState([]),[o,c]=T.useState(0),u=T.useCallback(()=>{if(!e||i.length===0){s([]),c(0);return}const h=i.map(m=>{const g=qk(m.props),v=100,x=(m.id?.length??0)*2,_=(m.customId?.length??0)*2,w=(m.tag?.length??0)*2,S=v+x+_+w+g,E=tZ(m.id,i),A=Hke(m.id,i);return{elementId:m.id,customId:m.customId,tag:m.tag,depth:A,memoryBytes:S,childCount:E,propsSize:g,percentage:0}}),f=h.reduce((m,g)=>m+g.memoryBytes,0);c(f),h.forEach(m=>{m.percentage=f>0?m.memoryBytes/f*100:0}),h.sort((m,g)=>{switch(n){case"memory":return g.memoryBytes-m.memoryBytes;case"children":return g.childCount-m.childCount;case"depth":return m.depth-g.depth;default:return 0}}),s(h.slice(0,r))},[e,i,n,r]);return T.useEffect(()=>{const h=setTimeout(u,0);return()=>clearTimeout(h)},[u]),{componentMemory:a,totalMemory:o,refresh:u}}function Wke(t){return t>=15?"high":t>=5?"medium":"low"}function qke({enabled:t=!0}){const[e,n]=T.useState("memory"),[r,i]=T.useState(!0),{componentMemory:a,totalMemory:s,refresh:o}=Gke({enabled:t,sortBy:e,limit:15});return l.jsxs("div",{className:"component-memory-list",children:[l.jsxs("div",{className:"component-memory-header",children:[l.jsxs("button",{type:"button",className:"component-memory-toggle",onClick:()=>i(!r),"aria-expanded":r,children:[r?l.jsx(e_,{size:14}):l.jsx(_i,{size:14}),l.jsx("span",{children:"Component Memory"})]}),l.jsxs("div",{className:"component-memory-controls",children:[l.jsxs("select",{className:"component-memory-sort",value:e,onChange:c=>n(c.target.value),"aria-label":"Sort by",children:[l.jsx("option",{value:"memory",children:"Memory"}),l.jsx("option",{value:"children",children:"Children"}),l.jsx("option",{value:"depth",children:"Depth"})]}),l.jsx(Pt,{className:"component-memory-refresh",onPress:o,"aria-label":"Refresh",children:l.jsx(Jm,{size:12})})]})]}),l.jsxs("div",{className:"component-memory-total",children:[l.jsx("span",{className:"total-label",children:"Total Elements Memory:"}),l.jsx("span",{className:"total-value",children:Nf(s)})]}),r&&l.jsxs("div",{className:"component-memory-items",role:"list",children:[a.map(c=>l.jsx(Kke,{info:c},c.elementId)),a.length===0&&l.jsxs("div",{className:"component-memory-empty",children:[l.jsx(Mr,{size:24}),l.jsx("p",{children:"No components to analyze"})]})]})]})}function Kke({info:t}){const e=Wke(t.percentage);return l.jsxs("div",{className:"component-memory-item","data-level":e,role:"listitem",children:[l.jsxs("div",{className:"component-memory-item-header",children:[l.jsx("span",{className:"component-tag",children:t.tag}),t.customId&&l.jsxs("span",{className:"component-customid",children:["#",t.customId]})]}),l.jsxs("div",{className:"component-memory-item-stats",children:[l.jsxs("div",{className:"component-stat",children:[l.jsx("span",{className:"stat-value",children:Nf(t.memoryBytes)}),l.jsx("span",{className:"stat-label",children:"Memory"})]}),l.jsxs("div",{className:"component-stat",children:[l.jsx("span",{className:"stat-value",children:t.childCount}),l.jsx("span",{className:"stat-label",children:"Children"})]}),l.jsxs("div",{className:"component-stat",children:[l.jsx("span",{className:"stat-value",children:t.depth}),l.jsx("span",{className:"stat-label",children:"Depth"})]}),l.jsxs("div",{className:"component-stat",children:[l.jsxs("span",{className:"stat-value",children:[t.percentage.toFixed(1),"%"]}),l.jsx("span",{className:"stat-label",children:"Share"})]})]}),l.jsx("div",{className:"component-memory-bar",children:l.jsx("div",{className:"component-memory-bar-fill",style:{width:`${Math.min(100,t.percentage)}%`}})})]})}const nZ="xstudio-monitor-thresholds";function Xke(){try{const t=localStorage.getItem(nZ);if(t)return JSON.parse(t)}catch{}return{warning:60,danger:75}}function Yke(t){try{localStorage.setItem(nZ,JSON.stringify(t))}catch{}}function Zke({config:t,onChange:e}){const[n,r]=T.useState(!1),[i,a]=T.useState(t);T.useEffect(()=>{a(t)},[t]);const s=()=>{const c={warning:Math.min(i.warning,i.danger-5),danger:i.danger};Yke(c),e(c),r(!1)},o=()=>{a({warning:60,danger:75})};return l.jsxs("div",{className:"threshold-settings",children:[l.jsx(Pt,{className:"threshold-settings-btn","aria-label":"Threshold settings",onPress:()=>r(!n),children:l.jsx(Kl,{size:14})}),n&&l.jsxs("div",{className:"threshold-settings-popup",children:[l.jsxs("div",{className:"popup-header",children:[l.jsx("h4",{children:"Threshold Settings"}),l.jsx(Pt,{className:"popup-close",onPress:()=>r(!1),children:l.jsx(ol,{size:14})})]}),l.jsxs("div",{className:"popup-content",children:[l.jsxs("div",{className:"threshold-slider-group",children:[l.jsxs("label",{className:"threshold-label",children:["Warning Threshold: ",i.warning,"%"]}),l.jsx("input",{type:"range",min:30,max:90,step:5,value:i.warning,onChange:c=>a(u=>({...u,warning:Number(c.target.value)})),className:"threshold-range warning","aria-label":"Warning threshold"}),l.jsx("p",{className:"threshold-hint",children:"    "})]}),l.jsxs("div",{className:"threshold-slider-group",children:[l.jsxs("label",{className:"threshold-label",children:["Danger Threshold: ",i.danger,"%"]}),l.jsx("input",{type:"range",min:40,max:95,step:5,value:i.danger,onChange:c=>a(u=>({...u,danger:Number(c.target.value)})),className:"threshold-range danger","aria-label":"Danger threshold"}),l.jsx("p",{className:"threshold-hint",children:"     "})]}),l.jsx("div",{className:"threshold-preview",children:l.jsxs("div",{className:"threshold-preview-bar",children:[l.jsx("div",{className:"threshold-zone safe",style:{width:`${i.warning}%`},children:"Safe"}),l.jsx("div",{className:"threshold-zone warning",style:{width:`${i.danger-i.warning}%`},children:"Warn"}),l.jsx("div",{className:"threshold-zone danger",style:{width:`${100-i.danger}%`},children:"Danger"})]})})]}),l.jsxs("div",{className:"popup-footer",children:[l.jsxs(Pt,{className:"btn-secondary",onPress:o,children:[l.jsx(TR,{size:12}),"Reset"]}),l.jsx(Pt,{className:"btn-primary",onPress:s,children:"Save"})]})]})]})}const Jke=300*1e3;function rZ(){const[t,e]=T.useState([]),n=T.useRef(new Map),r=T.useCallback((s,o,c=5e3)=>{const u=`${s}:${o}`,h=n.current.get(u),f=Date.now();if(h&&f-h<Jke)return null;n.current.set(u,f);const m=`toast-${f}-${Math.random().toString(36).slice(2,9)}`,g={id:m,type:s,message:o,duration:c};return e(v=>[...v,g]),c>0&&setTimeout(()=>{e(v=>v.filter(x=>x.id!==m))},c),m},[]),i=T.useCallback(s=>{e(o=>o.filter(c=>c.id!==s))},[]),a=T.useCallback(()=>{e([])},[]);return{toasts:t,showToast:r,dismissToast:i,dismissAll:a}}const Qke={success:BB,warning:i9,error:bR,info:Dre};function eRe({id:t,type:e,message:n,onDismiss:r}){const i=Qke[e];return l.jsxs("div",{className:"toast","data-type":e,role:"alert","aria-live":"polite",children:[l.jsx(i,{size:16,className:"toast-icon","aria-hidden":"true"}),l.jsx("span",{className:"toast-message",children:n}),l.jsx(Pt,{className:"toast-dismiss",onPress:()=>r(t),"aria-label":"Dismiss notification",children:l.jsx(ol,{size:14,"aria-hidden":"true"})})]})}function iZ({toasts:t,onDismiss:e}){return t.length===0?null:l.jsx("div",{className:"toast-container",role:"region","aria-label":"Notifications",children:t.map(n=>l.jsx(eRe,{id:n.id,type:n.type,message:n.message,onDismiss:e},n.id))})}const JO=60;function tRe({isActive:t}){return t?l.jsx(nRe,{}):null}function nRe(){const[t,e]=T.useState("memory"),[n,r]=T.useState([]),[i,a]=T.useState(Xke),s=T.useRef(null),{toasts:o,showToast:c,dismissToast:u}=rZ(),{stats:h,statusMessage:f,optimize:m,isOptimizing:g}=Nke({enabled:!0}),{fps:v}=Rke({enabled:t==="realtime"}),{vitals:x,collectLocalVitals:_}=Ike({enabled:t==="realtime"}),w=T.useCallback(()=>h?{memoryUsage:h.commandStoreStats.estimatedMemoryUsage,memoryPercent:h.browserMemory?.usagePercent??0,historyEntries:h.totalEntries,cacheSize:h.commandStoreStats.cacheSize}:null,[h]),{data:S}=kke(w,{enabled:t==="realtime",maxPoints:60,intervalMs:1e3}),E=h?.browserMemory?.usagePercent??0;T.useEffect(()=>{if(!h?.browserMemory||t!=="memory")return;const N=h.browserMemory.usagePercent;N>=75?c("error",`    (${N.toFixed(1)}%)`):N>=60&&c("warning",`   (${N.toFixed(1)}%)`)},[h?.browserMemory?.usagePercent,t,c]),T.useEffect(()=>{if(!h||t!=="memory")return;const N=s.current?.commandStoreStats?.estimatedMemoryUsage,P=h.commandStoreStats.estimatedMemoryUsage;N!==P&&(s.current=h,requestAnimationFrame(()=>{r(R=>{const D=[...R,P];return D.length>JO?D.slice(-JO):D})}))},[h,t]);const A=T.useCallback(()=>{m(),r([])},[m]);return l.jsxs("div",{className:"monitor-panel",children:[l.jsx(iZ,{toasts:o,onDismiss:u}),f&&l.jsx("div",{className:"monitor-status-message",children:f}),l.jsxs(zve,{className:"monitor-tabs",selectedKey:t,onSelectionChange:N=>e(N),children:[l.jsxs(Vve,{className:"monitor-tab-list","aria-label":"Monitor tabs",children:[l.jsxs(a1,{id:"memory",className:"monitor-tab",children:[l.jsx(yf,{size:14}),l.jsx("span",{children:"Memory"})]}),l.jsxs(a1,{id:"realtime",className:"monitor-tab",children:[l.jsx(Vm,{size:14}),l.jsx("span",{children:"Realtime"})]}),l.jsxs(a1,{id:"stats",className:"monitor-tab",children:[l.jsx(ba,{size:14}),l.jsx("span",{children:"Stats"})]}),l.jsxs(a1,{id:"browser",className:"monitor-tab",children:[l.jsx(wm,{size:14}),l.jsx("span",{children:"Browser"})]}),l.jsxs(a1,{id:"analysis",className:"monitor-tab",children:[l.jsx(OB,{size:14}),l.jsx("span",{children:"Analysis"})]})]}),l.jsx(s1,{id:"memory",className:"monitor-tab-panel",children:l.jsxs("div",{className:"memory-tab-content",children:[h?.browserMemory&&l.jsx(Lke,{value:E,label:"Browser Memory"}),l.jsx("div",{className:"memory-chart-section",children:l.jsx($ke,{data:n,width:380,height:100,threshold:50*1024*1024})}),l.jsxs("div",{className:"memory-actions-row",children:[h&&l.jsx(jke,{onOptimize:A,recommendation:h.recommendation,isOptimizing:g}),l.jsx(YO,{stats:h,format:"json"})]})]})}),l.jsx(s1,{id:"realtime",className:"monitor-tab-panel",children:l.jsxs("div",{className:"realtime-tab-content",children:[l.jsxs("div",{className:"realtime-metrics-row",children:[l.jsx(Fke,{fps:v}),l.jsx(Vke,{vitals:x,onRefresh:_})]}),l.jsxs("div",{className:"realtime-chart-section",children:[l.jsx("div",{className:"realtime-chart-header",children:l.jsx("span",{className:"realtime-chart-title",children:"Memory Usage (Real-time)"})}),l.jsx(Oke,{data:S,width:380,height:100,metric:"memoryPercent",showThresholds:!0})]})]})}),l.jsx(s1,{id:"stats",className:"monitor-tab-panel",children:l.jsx("div",{className:"stats-grid",children:h&&l.jsxs(l.Fragment,{children:[l.jsx(Mu,{label:"Pages",value:h.pageCount.toString(),icon:l.jsx(ba,{size:16})}),l.jsx(Mu,{label:"History Entries",value:h.totalEntries.toString(),icon:l.jsx(yf,{size:16})}),l.jsx(Mu,{label:"Commands",value:h.commandStoreStats.commandCount.toString(),icon:l.jsx(yf,{size:16})}),l.jsx(Mu,{label:"Cache Size",value:h.commandStoreStats.cacheSize.toString(),icon:l.jsx(ba,{size:16})}),l.jsx(Mu,{label:"Memory Usage",value:Nf(h.commandStoreStats.estimatedMemoryUsage),icon:l.jsx(wm,{size:16}),highlight:h.commandStoreStats.estimatedMemoryUsage>50*1024*1024}),l.jsx(Mu,{label:"Compression",value:`${(h.commandStoreStats.compressionRatio*100).toFixed(1)}%`,icon:l.jsx(yf,{size:16})})]})})}),l.jsx(s1,{id:"browser",className:"monitor-tab-panel",children:h?.browserMemory?l.jsxs("div",{className:"stats-grid",children:[l.jsx(Mu,{label:"Used Heap",value:Nf(h.browserMemory.usedJSHeapSize),icon:l.jsx(wm,{size:16})}),l.jsx(Mu,{label:"Total Heap",value:Nf(h.browserMemory.totalJSHeapSize),icon:l.jsx(wm,{size:16})}),l.jsx(Mu,{label:"Heap Limit",value:Nf(h.browserMemory.jsHeapSizeLimit),icon:l.jsx(wm,{size:16})}),l.jsx(Mu,{label:"Usage",value:`${h.browserMemory.usagePercent.toFixed(1)}%`,icon:l.jsx(yf,{size:16}),highlight:h.browserMemory.usagePercent>75})]}):l.jsxs("div",{className:"browser-memory-fallback",children:[l.jsx(wm,{size:24}),l.jsx("p",{children:"Browser memory information is only available in Chrome/Edge."})]})}),l.jsx(s1,{id:"analysis",className:"monitor-tab-panel",children:l.jsxs("div",{className:"analysis-tab-content",children:[l.jsxs("div",{className:"analysis-actions-row",children:[l.jsx(YO,{stats:h,format:"csv"}),l.jsx(Zke,{config:i,onChange:a})]}),l.jsx(qke,{enabled:t==="analysis"})]})})]})]})}function Mu({label:t,value:e,icon:n,highlight:r}){return l.jsxs("div",{className:`stat-card ${r?"highlight":""}`,children:[l.jsx("div",{className:"stat-icon",children:n}),l.jsxs("div",{className:"stat-content",children:[l.jsx("div",{className:"stat-value",children:e}),l.jsx("div",{className:"stat-label",children:t})]})]})}const rRe=[{id:"nodes",name:"",nameEn:"Nodes",icon:Fv,component:aPe,category:"navigation",defaultPosition:"left",minWidth:233,maxWidth:400,description:"   ",shortcut:"Ctrl+Shift+N"},{id:"components",name:"",nameEn:"Components",icon:Mr,component:sPe,category:"navigation",defaultPosition:"left",minWidth:249,maxWidth:249,description:" ",shortcut:"Ctrl+Shift+C"},{id:"datatable",name:"",nameEn:"DataTable",icon:ba,component:CPe,category:"navigation",defaultPosition:"left",minWidth:337,maxWidth:337,description:"DataTables, APIs, Variables, Transformers ",shortcut:"Ctrl+Shift+T"},{id:"datatableEditor",name:" ",nameEn:"DataTable Editor",icon:wR,component:FNe,category:"editor",defaultPosition:"left",minWidth:490,maxWidth:490,description:"DataTable, API, Variable, Transformer "},{id:"theme",name:"",nameEn:"Theme",icon:r_,component:$Y,category:"tool",defaultPosition:"left",minWidth:490,maxWidth:490,description:"   "},{id:"ai",name:"AI",nameEn:"AI",icon:jB,component:jY,category:"tool",defaultPosition:"left",minWidth:490,maxWidth:490,description:"AI   "},{id:"settings",name:"",nameEn:"Settings",icon:Kl,component:VY,category:"system",defaultPosition:"left",minWidth:233,maxWidth:400,description:"   ",shortcut:"Ctrl+,"},{id:"properties",name:"",nameEn:"Properties",icon:Iu,component:iDe,category:"editor",defaultPosition:"right",minWidth:233,maxWidth:240,description:"  ",shortcut:"Ctrl+Shift+P"},{id:"styles",name:"",nameEn:"Styles",icon:pie,component:wDe,category:"editor",defaultPosition:"right",minWidth:233,maxWidth:233,description:"CSS  ",shortcut:"Ctrl+Shift+S"},{id:"events",name:"",nameEn:"Events",icon:MR,component:Ake,category:"editor",defaultPosition:"right",minWidth:233,maxWidth:500,description:"  ",shortcut:"Ctrl+Shift+E"},{id:"monitor",name:"",nameEn:"Monitor",icon:yf,component:tRe,category:"system",defaultPosition:"bottom",minWidth:600,description:"    "}];function iRe(){rRe.forEach(t=>{C_.register(t)})}iRe();function h$(){const t=$e(h=>h.panelLayout),e=$e(h=>h.setPanelLayout),n=T.useCallback((h,f,m)=>{if(f===m)return;const g=f==="left"?"leftPanels":"rightPanels",v=m==="left"?"leftPanels":"rightPanels",x=f==="left"?"activeLeftPanels":"activeRightPanels",_=t[g],w=t[v];if(!_.includes(h)){console.warn(`[usePanelLayout] Panel "${h}" not found in ${f} side`);return}const S={...t,[g]:_.filter(E=>E!==h),[v]:[...w,h],[x]:t[x].filter(E=>E!==h)};e(S)},[t,e]),r=T.useCallback((h,f)=>{const m=h==="left"?"leftPanels":"rightPanels",g=h==="left"?"activeLeftPanels":"activeRightPanels",v=h==="left"?"showLeft":"showRight";if(!t[m].includes(f)){console.warn(`[usePanelLayout] Panel "${f}" not available on ${h} side`);return}const x=t[g],_=x.includes(f),w=_?x.filter(E=>E!==f):[...x,f],S=_?t[v]:!0;e({...t,[g]:w,[v]:S})},[t,e]),i=T.useCallback(h=>{const f=h==="left"?"showLeft":"showRight";e({...t,[f]:!t[f]})},[t,e]),a=T.useCallback(()=>{const h=$e.getState().resetPanelLayout;h&&h()},[]),s=T.useCallback(h=>{e(h)},[e]),o=T.useCallback(h=>{if(!t.bottomPanels.includes(h)){console.warn(`[usePanelLayout] Panel "${h}" not available on bottom`);return}const f=t.activeBottomPanels.includes(h);e({...t,activeBottomPanels:f?[]:[h],showBottom:!f})},[t,e]),c=T.useCallback(h=>{const f=Math.max(150,Math.min(600,h));e({...t,bottomHeight:f})},[t,e]),u=T.useCallback(()=>{e({...t,activeBottomPanels:[],showBottom:!1})},[t,e]);return{layout:t,isLoading:!1,isLoaded:!0,movePanel:n,togglePanel:r,toggleSide:i,resetLayout:a,setLayout:s,toggleBottomPanel:o,setBottomHeight:c,closeBottomPanel:u}}function QO({side:t,panelIds:e,activePanels:n,onPanelClick:r,onClose:i}){return l.jsxs("nav",{className:"panel-nav",children:[l.jsx("ul",{className:"nav-list",children:e.map(a=>{const s=C_.getPanel(a);if(!s)return null;const o=s.icon,c=n.includes(a);return l.jsx("li",{children:l.jsx("button",{className:`nav-button ${c?"active":""}`,onClick:()=>r(a),"aria-pressed":c,"aria-label":s.name,title:s.name,children:l.jsx(o,{color:se.color,strokeWidth:se.stroke,size:se.size})})},a)})}),i&&e.length>0&&l.jsx("button",{className:"nav-button close-all-button active",onClick:i,"aria-label":`Close ${t} panels`,title:t==="left"?" ":" ",children:t==="left"?l.jsx(Q1,{color:se.color,strokeWidth:se.stroke,size:se.size}):l.jsx(Ia,{color:se.color,strokeWidth:se.stroke,size:se.size})})]})}function e8({side:t,panelIds:e,activePanels:n,show:r}){return n.length===0&&!r?l.jsx("div",{className:"panel-container","data-show":!1,"data-side":t,"aria-hidden":!0,children:l.jsx("div",{className:"panel-empty-state",children:l.jsx("p",{className:"empty-message",children:" "})})}):l.jsx("div",{className:"panel-container","data-show":r,"data-side":t,"aria-hidden":!r,children:l.jsx("div",{className:"panel-content",children:e.map(i=>{const a=C_.getPanel(i);if(!a)return console.warn(`[PanelContainer] Panel "${i}" not found in registry`),null;const s=a.component,o=n.includes(i),c=a.minWidth||233;return l.jsx("div",{className:"panel-wrapper","data-panel":i,"data-active":o,style:{"--panel-width":`${c}px`,width:`${c}px`,minWidth:`${c}px`},children:l.jsx(s,{isActive:!0,side:t,onClose:void 0})},i)})})})}const t8=T.memo(function({side:e}){const{layout:n,togglePanel:r,toggleSide:i}=h$(),a=T.useMemo(()=>({panelIds:e==="left"?n.leftPanels:n.rightPanels,activePanels:e==="left"?n.activeLeftPanels:n.activeRightPanels,show:e==="left"?n.showLeft:n.showRight}),[e,n.leftPanels,n.rightPanels,n.activeLeftPanels,n.activeRightPanels,n.showLeft,n.showRight]),s=T.useCallback(c=>{r(e,c)},[e,r]),o=T.useCallback(()=>{i(e)},[e,i]);return l.jsx("div",{className:`panel-slot panel-slot-${e}`,children:e==="left"?l.jsxs(l.Fragment,{children:[l.jsx(QO,{side:e,panelIds:a.panelIds,activePanels:a.activePanels,onPanelClick:s,onClose:o}),l.jsx(e8,{side:e,panelIds:a.panelIds,activePanels:a.activePanels,show:a.show})]}):l.jsxs(l.Fragment,{children:[l.jsx(e8,{side:e,panelIds:a.panelIds,activePanels:a.activePanels,show:a.show}),l.jsx(QO,{side:e,panelIds:a.panelIds,activePanels:a.activePanels,onPanelClick:s,onClose:o})]})})}),KA=150,XA=600,aRe=T.memo(function(){const{layout:e,closeBottomPanel:n,setBottomHeight:r}=h$(),{showBottom:i,bottomHeight:a,activeBottomPanels:s,bottomPanels:o}=e,[c,u]=T.useState(!1),h=T.useRef(0),f=T.useRef(a);T.useEffect(()=>{if(!i)return;const g=v=>{v.key==="Escape"&&n()};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[i,n]);const m=T.useCallback(g=>{g.preventDefault(),u(!0),h.current=g.clientY,f.current=a},[a]);return T.useEffect(()=>{if(!c)return;const g=x=>{const _=h.current-x.clientY,w=Math.max(KA,Math.min(XA,f.current+_));r(w)},v=()=>{u(!1)};return document.addEventListener("mousemove",g),document.addEventListener("mouseup",v),()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",v)}},[c,r]),!i||s.length===0?null:l.jsxs("div",{className:"bottom-panel-slot",style:{height:a},"data-dragging":c,role:"region","aria-label":"Bottom panel",children:[l.jsx("div",{className:"bottom-panel-resize-handle",onMouseDown:m,role:"separator","aria-orientation":"horizontal","aria-valuenow":a,"aria-valuemin":KA,"aria-valuemax":XA,tabIndex:0,onKeyDown:g=>{g.key==="ArrowUp"?(g.preventDefault(),r(Math.min(XA,a+20))):g.key==="ArrowDown"&&(g.preventDefault(),r(Math.max(KA,a-20)))},children:l.jsx(Sre,{size:16})}),l.jsxs("div",{className:"bottom-panel-header",children:[l.jsx("div",{className:"bottom-panel-tabs",children:s.map(g=>{const v=C_.getPanel(g);if(!v)return null;const x=v.icon;return l.jsxs("span",{className:"bottom-panel-tab active",children:[l.jsx(x,{size:14}),v.name]},g)})}),l.jsx("button",{className:"bottom-panel-close",onClick:n,"aria-label":"Close panel",type:"button",children:l.jsx(ol,{size:16})})]}),l.jsx("div",{className:"bottom-panel-content",children:o.map(g=>{const v=C_.getPanel(g);if(!v)return null;const x=v.component,_=s.includes(g);return l.jsx("div",{className:"bottom-panel-wrapper","data-panel":g,"data-active":_,children:l.jsx(x,{isActive:_,side:"bottom",onClose:n})},g)})})]})}),sRe=({projectId:t,projectName:e,breakpoint:n,breakpoints:r,onBreakpointChange:i,historyInfo:a,canUndo:s,canRedo:o,onUndo:c,onRedo:u,onPreview:h,onPlay:f,onPublish:m,viewMode:g,onViewModeToggle:v})=>{const{layout:x,toggleBottomPanel:_}=h$(),w=x.showBottom&&x.activeBottomPanels.includes("monitor");return l.jsxs("nav",{className:"header",children:[l.jsxs("div",{className:"header_contents header_left",children:[l.jsx("button",{"aria-label":"Menu",children:l.jsx(CR,{strokeWidth:se.stroke,size:se.size})}),l.jsxs("div",{className:"project-info",children:[e&&l.jsx("span",{className:"project-name",children:e}),!t&&!e&&"No project loaded"]})]}),l.jsxs("div",{className:"header_contents screen",children:[l.jsxs("code",{className:"code sizeInfo",children:[r.find(S=>S.id===Array.from(n)[0])?.max_width,"x",r.find(S=>S.id===Array.from(n)[0])?.max_height]}),l.jsx(Ll,{selectionMode:"single",selectedKeys:n,onSelectionChange:S=>{const E=Array.from(S)[0];E&&i(E)},indicator:!0,children:r.map(S=>l.jsxs(In,{id:S.id,"aria-label":S.label,children:[S.id==="screen"&&l.jsx(ane,{color:se.color,strokeWidth:se.stroke,size:se.size}),S.id==="desktop"&&l.jsx(oie,{color:se.color,strokeWidth:se.stroke,size:se.size}),S.id==="tablet"&&l.jsx(Aae,{color:se.color,strokeWidth:se.stroke,size:se.size}),S.id==="mobile"&&l.jsx(Xie,{color:se.color,strokeWidth:se.stroke,size:se.size})]},S.id))})]}),l.jsxs("div",{className:"header_contents header_right",children:[l.jsx("span",{className:"history-info",children:a?`${a.current}/${a.total}`:"0/0"}),l.jsx("button",{"aria-label":"Undo",onClick:c,disabled:!s,className:s?"":"disabled",children:l.jsx(Kae,{color:s?se.color:"#999",strokeWidth:se.stroke,size:se.size})}),l.jsx("button",{"aria-label":"Redo",onClick:u,disabled:!o,className:o?"":"disabled",children:l.jsx(Mie,{color:o?se.color:"#999",strokeWidth:se.stroke,size:se.size})}),l.jsxs(Ll,{selectionMode:"multiple",selectedKeys:new Set([...w?["monitor"]:[],...g==="workflow"?["workflow"]:[]]),indicator:!0,onSelectionChange:S=>{const E=new Set(S),A=w,N=E.has("monitor"),P=g==="workflow",R=E.has("workflow");A!==N&&_("monitor"),P!==R&&v()},"aria-label":"View options",children:[l.jsx(In,{id:"monitor","aria-label":"Toggle Monitor Panel",children:l.jsx(yf,{color:w?"var(--color-white)":se.color,strokeWidth:se.stroke,size:se.size})}),l.jsx(In,{id:"workflow","aria-label":g==="canvas"?"Switch to Workflow":"Switch to Canvas",children:g==="canvas"?l.jsx(qB,{color:se.color,strokeWidth:se.stroke,size:se.size}):l.jsx(pN,{color:"var(--color-white)",strokeWidth:se.stroke,size:se.size})}),l.jsx(In,{id:"preview","aria-label":"Preview",onPress:h,children:l.jsx(I1,{color:se.color,strokeWidth:se.stroke,size:se.size})})]}),l.jsx("button",{"aria-label":"Play",onClick:f,children:l.jsx($y,{color:se.color,strokeWidth:se.stroke,size:se.size})}),l.jsx("button",{"aria-label":"Publish",className:"publish",onClick:m,children:"Publish"})]})]})},oRe=`
  * { box-sizing: border-box; }
  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
  }
  /*  body React  body element  (DOM/  ) */
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    line-height: 1.5;
  }
  .preview-empty, .preview-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: #666;
    font-size: 14px;
  }
`;function lRe(t){return`
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>XStudio Preview</title>
  <style>${oRe}</style>
</head>
<body data-preview="true" data-project-id="${t}">
  <div class="preview-loading">Loading Preview Runtime...</div>
  <script>
    // React Refresh preamble    (   )
    // @vitejs/plugin-react-swc   
    window.$RefreshReg$ = () => {};
    window.$RefreshSig$ = () => (type) => type;
    window.__vite_plugin_react_preamble_installed__ = true;
  <\/script>
  <script type="module">
    //  : Vite client preview 
    async function loadPreviewRuntime() {
      try {
        // 1. Vite client  (HMR )
        await import('/@vite/client');

        // 2. React Refresh   ( HMR )
        try {
          await import('/@react-refresh');
        } catch (e) {
          console.warn('[Preview] React Refresh not available:', e.message);
        }

        // 3. canvas runtime  (React body  )
        await import('/src/canvas/index.tsx');

        console.log('[Preview] Runtime loaded successfully');
      } catch (err) {
        console.error('[Preview] Failed to load preview:', err);
        document.body.innerHTML =
          '<div class="preview-loading">Failed to load Preview Runtime: ' + err.message + '</div>';
      }
    }

    loadPreviewRuntime();
  <\/script>
</body>
</html>
`}function cRe(t){return console.warn("[Preview] Production bundle not available, falling back to dev mode"),lRe(t)}function uRe(t){return cRe(t)}function dRe(){if(typeof window>"u")return!1;if(new URLSearchParams(window.location.search).get("srcdoc")==="true")return!0;try{if(localStorage.getItem("USE_SRCDOC")==="true")return!0}catch{}return window.__USE_SRCDOC__,!0}const hRe=({projectId:t,breakpoint:e,breakpoints:n,onIframeLoad:r,onMessage:i,children:a})=>{const s=n.find(m=>m.id===Array.from(e)[0]),o=$e(m=>m.showElementBorders),c=$e(m=>m.showElementLabels),u=dRe(),h=T.useMemo(()=>!u||!t?null:uRe(t),[u,t]),f=ve.useRef(i);return ve.useEffect(()=>{f.current=i},[i]),ve.useEffect(()=>{const m=g=>{f.current(g)};return window.addEventListener("message",m),()=>{window.removeEventListener("message",m)}},[]),T.useEffect(()=>{const m=document.getElementById("previewFrame");if(!m||!m.contentDocument)return;const g=m.contentDocument;let v=g.getElementById("element-visualization-styles");v||(v=g.createElement("style"),v.id="element-visualization-styles",g.head.appendChild(v));let x="";o&&(x+=`
                [data-element-id] {
                    outline: 1px dashed rgba(59, 130, 246, 0.5) !important;
                    outline-offset: -1px !important;
                }
            `),c&&(x+=`
                [data-element-id]::before {
                    content: attr(data-element-id);
                    position: absolute;
                    top: 0;
                    left: 0;
                    background: rgba(59, 130, 246, 0.9);
                    color: white;
                    font-size: 10px;
                    padding: 2px 4px;
                    border-radius: 2px;
                    z-index: 10000;
                    pointer-events: none;
                    font-family: monospace;
                }
            `),v.textContent=x},[o,c]),l.jsx("main",{className:"workSpace",children:l.jsxs("div",{className:"canvas","data-max-width":s?.max_width?.toString()||"100%","data-max-height":s?.max_height?.toString()||"100%",style:{width:s?.max_width||"100%",height:s?.max_height||"100%",borderWidth:s?.id==="screen"?"0px":"1px"},children:[u&&h?l.jsx("iframe",{id:"previewFrame",srcDoc:h,style:{width:"100%",height:"100%",border:"none"},sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",title:"XStudio Preview",onLoad:r}):l.jsx("iframe",{id:"previewFrame",src:t?`/preview/${t}?isIframe=true`:"/preview?isIframe=true",style:{width:"100%",height:"100%",border:"none"},sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",title:"XStudio Preview",onLoad:r}),a]})})};function da(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=da(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var fRe={value:()=>{}};function RT(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new S3(n)}function S3(t){this._=t}function pRe(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}S3.prototype=RT.prototype={constructor:S3,on:function(t,e){var n=this._,r=pRe(t+"",n),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(t=r[a]).type)&&(i=mRe(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(i=(t=r[a]).type)n[i]=n8(n[i],t.name,e);else if(e==null)for(i in n)n[i]=n8(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new S3(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function mRe(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function n8(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=fRe,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Kk="http://www.w3.org/1999/xhtml";const r8={svg:"http://www.w3.org/2000/svg",xhtml:Kk,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function IT(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),r8.hasOwnProperty(e)?{space:r8[e],local:t}:t}function gRe(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Kk&&e.documentElement.namespaceURI===Kk?e.createElement(t):e.createElementNS(n,t)}}function vRe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function aZ(t){var e=IT(t);return(e.local?vRe:gRe)(e)}function yRe(){}function f$(t){return t==null?yRe:function(){return this.querySelector(t)}}function bRe(t){typeof t!="function"&&(t=f$(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=new Array(s),c,u,h=0;h<s;++h)(c=a[h])&&(u=t.call(c,c.__data__,h,a))&&("__data__"in c&&(u.__data__=c.__data__),o[h]=u);return new dl(r,this._parents)}function xRe(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function _Re(){return[]}function sZ(t){return t==null?_Re:function(){return this.querySelectorAll(t)}}function wRe(t){return function(){return xRe(t.apply(this,arguments))}}function SRe(t){typeof t=="function"?t=wRe(t):t=sZ(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var s=e[a],o=s.length,c,u=0;u<o;++u)(c=s[u])&&(r.push(t.call(c,c.__data__,u,s)),i.push(c));return new dl(r,i)}function oZ(t){return function(){return this.matches(t)}}function lZ(t){return function(e){return e.matches(t)}}var ERe=Array.prototype.find;function CRe(t){return function(){return ERe.call(this.children,t)}}function TRe(){return this.firstElementChild}function MRe(t){return this.select(t==null?TRe:CRe(typeof t=="function"?t:lZ(t)))}var ARe=Array.prototype.filter;function PRe(){return Array.from(this.children)}function NRe(t){return function(){return ARe.call(this.children,t)}}function DRe(t){return this.selectAll(t==null?PRe:NRe(typeof t=="function"?t:lZ(t)))}function kRe(t){typeof t!="function"&&(t=oZ(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],c,u=0;u<s;++u)(c=a[u])&&t.call(c,c.__data__,u,a)&&o.push(c);return new dl(r,this._parents)}function cZ(t){return new Array(t.length)}function RRe(){return new dl(this._enter||this._groups.map(cZ),this._parents)}function x2(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}x2.prototype={constructor:x2,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function IRe(t){return function(){return t}}function $Re(t,e,n,r,i,a){for(var s=0,o,c=e.length,u=a.length;s<u;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new x2(t,a[s]);for(;s<c;++s)(o=e[s])&&(i[s]=o)}function jRe(t,e,n,r,i,a,s){var o,c,u=new Map,h=e.length,f=a.length,m=new Array(h),g;for(o=0;o<h;++o)(c=e[o])&&(m[o]=g=s.call(c,c.__data__,o,e)+"",u.has(g)?i[o]=c:u.set(g,c));for(o=0;o<f;++o)g=s.call(t,a[o],o,a)+"",(c=u.get(g))?(r[o]=c,c.__data__=a[o],u.delete(g)):n[o]=new x2(t,a[o]);for(o=0;o<h;++o)(c=e[o])&&u.get(m[o])===c&&(i[o]=c)}function LRe(t){return t.__data__}function ORe(t,e){if(!arguments.length)return Array.from(this,LRe);var n=e?jRe:$Re,r=this._parents,i=this._groups;typeof t!="function"&&(t=IRe(t));for(var a=i.length,s=new Array(a),o=new Array(a),c=new Array(a),u=0;u<a;++u){var h=r[u],f=i[u],m=f.length,g=FRe(t.call(h,h&&h.__data__,u,r)),v=g.length,x=o[u]=new Array(v),_=s[u]=new Array(v),w=c[u]=new Array(m);n(h,f,x,_,w,g,e);for(var S=0,E=0,A,N;S<v;++S)if(A=x[S]){for(S>=E&&(E=S+1);!(N=_[E])&&++E<v;);A._next=N||null}}return s=new dl(s,r),s._enter=o,s._exit=c,s}function FRe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function BRe(){return new dl(this._exit||this._groups.map(cZ),this._parents)}function zRe(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function URe(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,s=Math.min(i,a),o=new Array(i),c=0;c<s;++c)for(var u=n[c],h=r[c],f=u.length,m=o[c]=new Array(f),g,v=0;v<f;++v)(g=u[v]||h[v])&&(m[v]=g);for(;c<i;++c)o[c]=n[c];return new dl(o,this._parents)}function VRe(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],s;--i>=0;)(s=r[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function HRe(t){t||(t=GRe);function e(f,m){return f&&m?t(f.__data__,m.__data__):!f-!m}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var s=n[a],o=s.length,c=i[a]=new Array(o),u,h=0;h<o;++h)(u=s[h])&&(c[h]=u);c.sort(e)}return new dl(i,this._parents).order()}function GRe(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function WRe(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function qRe(){return Array.from(this)}function KRe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function XRe(){let t=0;for(const e of this)++t;return t}function YRe(){return!this.node()}function ZRe(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,s=i.length,o;a<s;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this}function JRe(t){return function(){this.removeAttribute(t)}}function QRe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function eIe(t,e){return function(){this.setAttribute(t,e)}}function tIe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function nIe(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function rIe(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function iIe(t,e){var n=IT(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?QRe:JRe:typeof e=="function"?n.local?rIe:nIe:n.local?tIe:eIe)(n,e))}function uZ(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function aIe(t){return function(){this.style.removeProperty(t)}}function sIe(t,e,n){return function(){this.style.setProperty(t,e,n)}}function oIe(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function lIe(t,e,n){return arguments.length>1?this.each((e==null?aIe:typeof e=="function"?oIe:sIe)(t,e,n??"")):Sy(this.node(),t)}function Sy(t,e){return t.style.getPropertyValue(e)||uZ(t).getComputedStyle(t,null).getPropertyValue(e)}function cIe(t){return function(){delete this[t]}}function uIe(t,e){return function(){this[t]=e}}function dIe(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function hIe(t,e){return arguments.length>1?this.each((e==null?cIe:typeof e=="function"?dIe:uIe)(t,e)):this.node()[t]}function dZ(t){return t.trim().split(/^|\s+/)}function p$(t){return t.classList||new hZ(t)}function hZ(t){this._node=t,this._names=dZ(t.getAttribute("class")||"")}hZ.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function fZ(t,e){for(var n=p$(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function pZ(t,e){for(var n=p$(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function fIe(t){return function(){fZ(this,t)}}function pIe(t){return function(){pZ(this,t)}}function mIe(t,e){return function(){(e.apply(this,arguments)?fZ:pZ)(this,t)}}function gIe(t,e){var n=dZ(t+"");if(arguments.length<2){for(var r=p$(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?mIe:e?fIe:pIe)(n,e))}function vIe(){this.textContent=""}function yIe(t){return function(){this.textContent=t}}function bIe(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function xIe(t){return arguments.length?this.each(t==null?vIe:(typeof t=="function"?bIe:yIe)(t)):this.node().textContent}function _Ie(){this.innerHTML=""}function wIe(t){return function(){this.innerHTML=t}}function SIe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function EIe(t){return arguments.length?this.each(t==null?_Ie:(typeof t=="function"?SIe:wIe)(t)):this.node().innerHTML}function CIe(){this.nextSibling&&this.parentNode.appendChild(this)}function TIe(){return this.each(CIe)}function MIe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function AIe(){return this.each(MIe)}function PIe(t){var e=typeof t=="function"?t:aZ(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function NIe(){return null}function DIe(t,e){var n=typeof t=="function"?t:aZ(t),r=e==null?NIe:typeof e=="function"?e:f$(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function kIe(){var t=this.parentNode;t&&t.removeChild(this)}function RIe(){return this.each(kIe)}function IIe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $Ie(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function jIe(t){return this.select(t?$Ie:IIe)}function LIe(t){return arguments.length?this.property("__data__",t):this.node().__data__}function OIe(t){return function(e){t.call(this,e,this.__data__)}}function FIe(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function BIe(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function zIe(t,e,n){return function(){var r=this.__on,i,a=OIe(e);if(r){for(var s=0,o=r.length;s<o;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function UIe(t,e,n){var r=FIe(t+""),i,a=r.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,u=o.length,h;c<u;++c)for(i=0,h=o[c];i<a;++i)if((s=r[i]).type===h.type&&s.name===h.name)return h.value}return}for(o=e?zIe:BIe,i=0;i<a;++i)this.each(o(r[i],e,n));return this}function mZ(t,e,n){var r=uZ(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function VIe(t,e){return function(){return mZ(this,t,e)}}function HIe(t,e){return function(){return mZ(this,t,e.apply(this,arguments))}}function GIe(t,e){return this.each((typeof e=="function"?HIe:VIe)(t,e))}function*WIe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,s;i<a;++i)(s=r[i])&&(yield s)}var gZ=[null];function dl(t,e){this._groups=t,this._parents=e}function pw(){return new dl([[document.documentElement]],gZ)}function qIe(){return this}dl.prototype=pw.prototype={constructor:dl,select:bRe,selectAll:SRe,selectChild:MRe,selectChildren:DRe,filter:kRe,data:ORe,enter:RRe,exit:BRe,join:zRe,merge:URe,selection:qIe,order:VRe,sort:HRe,call:WRe,nodes:qRe,node:KRe,size:XRe,empty:YRe,each:ZRe,attr:iIe,style:lIe,property:hIe,classed:gIe,text:xIe,html:EIe,raise:TIe,lower:AIe,append:PIe,insert:DIe,remove:RIe,clone:jIe,datum:LIe,on:UIe,dispatch:GIe,[Symbol.iterator]:WIe};function tl(t){return typeof t=="string"?new dl([[document.querySelector(t)]],[document.documentElement]):new dl([[t]],gZ)}function KIe(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Pc(t,e){if(t=KIe(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const XIe={passive:!1},A_={capture:!0,passive:!1};function YA(t){t.stopImmediatePropagation()}function iy(t){t.preventDefault(),t.stopImmediatePropagation()}function vZ(t){var e=t.document.documentElement,n=tl(t).on("dragstart.drag",iy,A_);"onselectstart"in e?n.on("selectstart.drag",iy,A_):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function yZ(t,e){var n=t.document.documentElement,r=tl(t).on("dragstart.drag",null);e&&(r.on("click.drag",iy,A_),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const WC=t=>()=>t;function Xk(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:a,x:s,y:o,dx:c,dy:u,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}Xk.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function YIe(t){return!t.ctrlKey&&!t.button}function ZIe(){return this.parentNode}function JIe(t,e){return e??{x:t.x,y:t.y}}function QIe(){return navigator.maxTouchPoints||"ontouchstart"in this}function bZ(){var t=YIe,e=ZIe,n=JIe,r=QIe,i={},a=RT("start","drag","end"),s=0,o,c,u,h,f=0;function m(A){A.on("mousedown.drag",g).filter(r).on("touchstart.drag",_).on("touchmove.drag",w,XIe).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(A,N){if(!(h||!t.call(this,A,N))){var P=E(this,e.call(this,A,N),A,N,"mouse");P&&(tl(A.view).on("mousemove.drag",v,A_).on("mouseup.drag",x,A_),vZ(A.view),YA(A),u=!1,o=A.clientX,c=A.clientY,P("start",A))}}function v(A){if(iy(A),!u){var N=A.clientX-o,P=A.clientY-c;u=N*N+P*P>f}i.mouse("drag",A)}function x(A){tl(A.view).on("mousemove.drag mouseup.drag",null),yZ(A.view,u),iy(A),i.mouse("end",A)}function _(A,N){if(t.call(this,A,N)){var P=A.changedTouches,R=e.call(this,A,N),D=P.length,k,L;for(k=0;k<D;++k)(L=E(this,R,A,N,P[k].identifier,P[k]))&&(YA(A),L("start",A,P[k]))}}function w(A){var N=A.changedTouches,P=N.length,R,D;for(R=0;R<P;++R)(D=i[N[R].identifier])&&(iy(A),D("drag",A,N[R]))}function S(A){var N=A.changedTouches,P=N.length,R,D;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),R=0;R<P;++R)(D=i[N[R].identifier])&&(YA(A),D("end",A,N[R]))}function E(A,N,P,R,D,k){var L=a.copy(),$=Pc(k||P,N),B,q,U;if((U=n.call(A,new Xk("beforestart",{sourceEvent:P,target:m,identifier:D,active:s,x:$[0],y:$[1],dx:0,dy:0,dispatch:L}),R))!=null)return B=U.x-$[0]||0,q=U.y-$[1]||0,function J(O,z,V){var H=$,ee;switch(O){case"start":i[D]=J,ee=s++;break;case"end":delete i[D],--s;case"drag":$=Pc(V||z,N),ee=s;break}L.call(O,A,new Xk(O,{sourceEvent:z,subject:U,target:m,identifier:D,active:ee,x:$[0]+B,y:$[1]+q,dx:$[0]-H[0],dy:$[1]-H[1],dispatch:L}),R)}}return m.filter=function(A){return arguments.length?(t=typeof A=="function"?A:WC(!!A),m):t},m.container=function(A){return arguments.length?(e=typeof A=="function"?A:WC(A),m):e},m.subject=function(A){return arguments.length?(n=typeof A=="function"?A:WC(A),m):n},m.touchable=function(A){return arguments.length?(r=typeof A=="function"?A:WC(!!A),m):r},m.on=function(){var A=a.on.apply(a,arguments);return A===a?m:A},m.clickDistance=function(A){return arguments.length?(f=(A=+A)*A,m):Math.sqrt(f)},m}function m$(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function xZ(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function mw(){}var P_=.7,_2=1/P_,ay="\\s*([+-]?\\d+)\\s*",N_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",e$e=/^#([0-9a-f]{3,8})$/,t$e=new RegExp(`^rgb\\(${ay},${ay},${ay}\\)$`),n$e=new RegExp(`^rgb\\(${zu},${zu},${zu}\\)$`),r$e=new RegExp(`^rgba\\(${ay},${ay},${ay},${N_}\\)$`),i$e=new RegExp(`^rgba\\(${zu},${zu},${zu},${N_}\\)$`),a$e=new RegExp(`^hsl\\(${N_},${zu},${zu}\\)$`),s$e=new RegExp(`^hsla\\(${N_},${zu},${zu},${N_}\\)$`),i8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};m$(mw,fg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:a8,formatHex:a8,formatHex8:o$e,formatHsl:l$e,formatRgb:s8,toString:s8});function a8(){return this.rgb().formatHex()}function o$e(){return this.rgb().formatHex8()}function l$e(){return _Z(this).formatHsl()}function s8(){return this.rgb().formatRgb()}function fg(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=e$e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?o8(e):n===3?new To(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?qC(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?qC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=t$e.exec(t))?new To(e[1],e[2],e[3],1):(e=n$e.exec(t))?new To(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=r$e.exec(t))?qC(e[1],e[2],e[3],e[4]):(e=i$e.exec(t))?qC(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=a$e.exec(t))?u8(e[1],e[2]/100,e[3]/100,1):(e=s$e.exec(t))?u8(e[1],e[2]/100,e[3]/100,e[4]):i8.hasOwnProperty(t)?o8(i8[t]):t==="transparent"?new To(NaN,NaN,NaN,0):null}function o8(t){return new To(t>>16&255,t>>8&255,t&255,1)}function qC(t,e,n,r){return r<=0&&(t=e=n=NaN),new To(t,e,n,r)}function c$e(t){return t instanceof mw||(t=fg(t)),t?(t=t.rgb(),new To(t.r,t.g,t.b,t.opacity)):new To}function Yk(t,e,n,r){return arguments.length===1?c$e(t):new To(t,e,n,r??1)}function To(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}m$(To,Yk,xZ(mw,{brighter(t){return t=t==null?_2:Math.pow(_2,t),new To(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?P_:Math.pow(P_,t),new To(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new To(Km(this.r),Km(this.g),Km(this.b),w2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:l8,formatHex:l8,formatHex8:u$e,formatRgb:c8,toString:c8}));function l8(){return`#${zm(this.r)}${zm(this.g)}${zm(this.b)}`}function u$e(){return`#${zm(this.r)}${zm(this.g)}${zm(this.b)}${zm((isNaN(this.opacity)?1:this.opacity)*255)}`}function c8(){const t=w2(this.opacity);return`${t===1?"rgb(":"rgba("}${Km(this.r)}, ${Km(this.g)}, ${Km(this.b)}${t===1?")":`, ${t})`}`}function w2(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Km(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function zm(t){return t=Km(t),(t<16?"0":"")+t.toString(16)}function u8(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new kc(t,e,n,r)}function _Z(t){if(t instanceof kc)return new kc(t.h,t.s,t.l,t.opacity);if(t instanceof mw||(t=fg(t)),!t)return new kc;if(t instanceof kc)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new kc(s,o,c,t.opacity)}function d$e(t,e,n,r){return arguments.length===1?_Z(t):new kc(t,e,n,r??1)}function kc(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}m$(kc,d$e,xZ(mw,{brighter(t){return t=t==null?_2:Math.pow(_2,t),new kc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?P_:Math.pow(P_,t),new kc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new To(ZA(t>=240?t-240:t+120,i,r),ZA(t,i,r),ZA(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new kc(d8(this.h),KC(this.s),KC(this.l),w2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=w2(this.opacity);return`${t===1?"hsl(":"hsla("}${d8(this.h)}, ${KC(this.s)*100}%, ${KC(this.l)*100}%${t===1?")":`, ${t})`}`}}));function d8(t){return t=(t||0)%360,t<0?t+360:t}function KC(t){return Math.max(0,Math.min(1,t||0))}function ZA(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const g$=t=>()=>t;function h$e(t,e){return function(n){return t+n*e}}function f$e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function p$e(t){return(t=+t)==1?wZ:function(e,n){return n-e?f$e(e,n,t):g$(isNaN(e)?n:e)}}function wZ(t,e){var n=e-t;return n?h$e(t,n):g$(isNaN(t)?e:t)}const S2=(function t(e){var n=p$e(e);function r(i,a){var s=n((i=Yk(i)).r,(a=Yk(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),u=wZ(i.opacity,a.opacity);return function(h){return i.r=s(h),i.g=o(h),i.b=c(h),i.opacity=u(h),i+""}}return r.gamma=t,r})(1);function m$e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function g$e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function v$e(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=V1(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function y$e(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ru(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function b$e(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=V1(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Zk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,JA=new RegExp(Zk.source,"g");function x$e(t){return function(){return t}}function _$e(t){return function(e){return t(e)+""}}function SZ(t,e){var n=Zk.lastIndex=JA.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=Zk.exec(t))&&(i=JA.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Ru(r,i)})),n=JA.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?_$e(c[0].x):x$e(e):(e=c.length,function(u){for(var h=0,f;h<e;++h)o[(f=c[h]).i]=f.x(u);return o.join("")})}function V1(t,e){var n=typeof e,r;return e==null||n==="boolean"?g$(e):(n==="number"?Ru:n==="string"?(r=fg(e))?(e=r,S2):SZ:e instanceof fg?S2:e instanceof Date?y$e:g$e(e)?m$e:Array.isArray(e)?v$e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?b$e:Ru)(t,e)}var h8=180/Math.PI,Jk={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function EZ(t,e,n,r,i,a){var s,o,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,c/=o),t*r<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*h8,skewX:Math.atan(c)*h8,scaleX:s,scaleY:o}}var XC;function w$e(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Jk:EZ(e.a,e.b,e.c,e.d,e.e,e.f)}function S$e(t){return t==null||(XC||(XC=document.createElementNS("http://www.w3.org/2000/svg","g")),XC.setAttribute("transform",t),!(t=XC.transform.baseVal.consolidate()))?Jk:(t=t.matrix,EZ(t.a,t.b,t.c,t.d,t.e,t.f))}function CZ(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,h,f,m,g,v){if(u!==f||h!==m){var x=g.push("translate(",null,e,null,n);v.push({i:x-4,x:Ru(u,f)},{i:x-2,x:Ru(h,m)})}else(f||m)&&g.push("translate("+f+e+m+n)}function s(u,h,f,m){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),m.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Ru(u,h)})):h&&f.push(i(f)+"rotate("+h+r)}function o(u,h,f,m){u!==h?m.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Ru(u,h)}):h&&f.push(i(f)+"skewX("+h+r)}function c(u,h,f,m,g,v){if(u!==f||h!==m){var x=g.push(i(g)+"scale(",null,",",null,")");v.push({i:x-4,x:Ru(u,f)},{i:x-2,x:Ru(h,m)})}else(f!==1||m!==1)&&g.push(i(g)+"scale("+f+","+m+")")}return function(u,h){var f=[],m=[];return u=t(u),h=t(h),a(u.translateX,u.translateY,h.translateX,h.translateY,f,m),s(u.rotate,h.rotate,f,m),o(u.skewX,h.skewX,f,m),c(u.scaleX,u.scaleY,h.scaleX,h.scaleY,f,m),u=h=null,function(g){for(var v=-1,x=m.length,_;++v<x;)f[(_=m[v]).i]=_.x(g);return f.join("")}}}var E$e=CZ(w$e,"px, ","px)","deg)"),C$e=CZ(S$e,", ",")",")"),T$e=1e-12;function f8(t){return((t=Math.exp(t))+1/t)/2}function M$e(t){return((t=Math.exp(t))-1/t)/2}function A$e(t){return((t=Math.exp(2*t))-1)/(t+1)}const E3=(function t(e,n,r){function i(a,s){var o=a[0],c=a[1],u=a[2],h=s[0],f=s[1],m=s[2],g=h-o,v=f-c,x=g*g+v*v,_,w;if(x<T$e)w=Math.log(m/u)/e,_=function(R){return[o+R*g,c+R*v,u*Math.exp(e*R*w)]};else{var S=Math.sqrt(x),E=(m*m-u*u+r*x)/(2*u*n*S),A=(m*m-u*u-r*x)/(2*m*n*S),N=Math.log(Math.sqrt(E*E+1)-E),P=Math.log(Math.sqrt(A*A+1)-A);w=(P-N)/e,_=function(R){var D=R*w,k=f8(N),L=u/(n*S)*(k*A$e(e*D+N)-M$e(N));return[o+L*g,c+L*v,u*k/f8(e*D+N)]}}return _.duration=w*1e3*e/Math.SQRT2,_}return i.rho=function(a){var s=Math.max(.001,+a),o=s*s,c=o*o;return t(s,o,c)},i})(Math.SQRT2,2,4);var Ey=0,k1=0,p1=0,TZ=1e3,E2,R1,C2=0,pg=0,$T=0,D_=typeof performance=="object"&&performance.now?performance:Date,MZ=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function v$(){return pg||(MZ(P$e),pg=D_.now()+$T)}function P$e(){pg=0}function T2(){this._call=this._time=this._next=null}T2.prototype=AZ.prototype={constructor:T2,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?v$():+n)+(e==null?0:+e),!this._next&&R1!==this&&(R1?R1._next=this:E2=this,R1=this),this._call=t,this._time=n,Qk()},stop:function(){this._call&&(this._call=null,this._time=1/0,Qk())}};function AZ(t,e,n){var r=new T2;return r.restart(t,e,n),r}function N$e(){v$(),++Ey;for(var t=E2,e;t;)(e=pg-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ey}function p8(){pg=(C2=D_.now())+$T,Ey=k1=0;try{N$e()}finally{Ey=0,k$e(),pg=0}}function D$e(){var t=D_.now(),e=t-C2;e>TZ&&($T-=e,C2=t)}function k$e(){for(var t,e=E2,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:E2=n);R1=t,Qk(r)}function Qk(t){if(!Ey){k1&&(k1=clearTimeout(k1));var e=t-pg;e>24?(t<1/0&&(k1=setTimeout(p8,t-D_.now()-$T)),p1&&(p1=clearInterval(p1))):(p1||(C2=D_.now(),p1=setInterval(D$e,TZ)),Ey=1,MZ(p8))}}function m8(t,e,n){var r=new T2;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var R$e=RT("start","end","cancel","interrupt"),I$e=[],PZ=0,g8=1,eR=2,C3=3,v8=4,tR=5,T3=6;function jT(t,e,n,r,i,a){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;$$e(t,n,{name:e,index:r,group:i,on:R$e,tween:I$e,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:PZ})}function y$(t,e){var n=Wc(t,e);if(n.state>PZ)throw new Error("too late; already scheduled");return n}function Gu(t,e){var n=Wc(t,e);if(n.state>C3)throw new Error("too late; already running");return n}function Wc(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function $$e(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=AZ(a,0,n.time);function a(u){n.state=g8,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var h,f,m,g;if(n.state!==g8)return c();for(h in r)if(g=r[h],g.name===n.name){if(g.state===C3)return m8(s);g.state===v8?(g.state=T3,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[h]):+h<e&&(g.state=T3,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[h])}if(m8(function(){n.state===C3&&(n.state=v8,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=eR,n.on.call("start",t,t.__data__,n.index,n.group),n.state===eR){for(n.state=C3,i=new Array(m=n.tween.length),h=0,f=-1;h<m;++h)(g=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=g);i.length=f+1}}function o(u){for(var h=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=tR,1),f=-1,m=i.length;++f<m;)i[f].call(t,h);n.state===tR&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=T3,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function M3(t,e){var n=t.__transition,r,i,a=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){a=!1;continue}i=r.state>eR&&r.state<tR,r.state=T3,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}a&&delete t.__transition}}function j$e(t){return this.each(function(){M3(this,t)})}function L$e(t,e){var n,r;return function(){var i=Gu(this,t),a=i.tween;if(a!==n){r=n=a;for(var s=0,o=r.length;s<o;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function O$e(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Gu(this,t),s=a.tween;if(s!==r){i=(r=s).slice();for(var o={name:e,value:n},c=0,u=i.length;c<u;++c)if(i[c].name===e){i[c]=o;break}c===u&&i.push(o)}a.tween=i}}function F$e(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Wc(this.node(),n).tween,i=0,a=r.length,s;i<a;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?L$e:O$e)(n,t,e))}function b$(t,e,n){var r=t._id;return t.each(function(){var i=Gu(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Wc(i,r).value[e]}}function NZ(t,e){var n;return(typeof e=="number"?Ru:e instanceof fg?S2:(n=fg(e))?(e=n,S2):SZ)(t,e)}function B$e(t){return function(){this.removeAttribute(t)}}function z$e(t){return function(){this.removeAttributeNS(t.space,t.local)}}function U$e(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttribute(t);return s===i?null:s===r?a:a=e(r=s,n)}}function V$e(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?a:a=e(r=s,n)}}function H$e(t,e,n){var r,i,a;return function(){var s,o=n(this),c;return o==null?void this.removeAttribute(t):(s=this.getAttribute(t),c=o+"",s===c?null:s===r&&c===i?a:(i=c,a=e(r=s,o)))}}function G$e(t,e,n){var r,i,a;return function(){var s,o=n(this),c;return o==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),c=o+"",s===c?null:s===r&&c===i?a:(i=c,a=e(r=s,o)))}}function W$e(t,e){var n=IT(t),r=n==="transform"?C$e:NZ;return this.attrTween(t,typeof e=="function"?(n.local?G$e:H$e)(n,r,b$(this,"attr."+t,e)):e==null?(n.local?z$e:B$e)(n):(n.local?V$e:U$e)(n,r,e))}function q$e(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function K$e(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function X$e(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&K$e(t,a)),n}return i._value=e,i}function Y$e(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&q$e(t,a)),n}return i._value=e,i}function Z$e(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=IT(t);return this.tween(n,(r.local?X$e:Y$e)(r,e))}function J$e(t,e){return function(){y$(this,t).delay=+e.apply(this,arguments)}}function Q$e(t,e){return e=+e,function(){y$(this,t).delay=e}}function e5e(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?J$e:Q$e)(e,t)):Wc(this.node(),e).delay}function t5e(t,e){return function(){Gu(this,t).duration=+e.apply(this,arguments)}}function n5e(t,e){return e=+e,function(){Gu(this,t).duration=e}}function r5e(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?t5e:n5e)(e,t)):Wc(this.node(),e).duration}function i5e(t,e){if(typeof e!="function")throw new Error;return function(){Gu(this,t).ease=e}}function a5e(t){var e=this._id;return arguments.length?this.each(i5e(e,t)):Wc(this.node(),e).ease}function s5e(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Gu(this,t).ease=n}}function o5e(t){if(typeof t!="function")throw new Error;return this.each(s5e(this._id,t))}function l5e(t){typeof t!="function"&&(t=oZ(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],c,u=0;u<s;++u)(c=a[u])&&t.call(c,c.__data__,u,a)&&o.push(c);return new eh(r,this._parents,this._name,this._id)}function c5e(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),s=new Array(r),o=0;o<a;++o)for(var c=e[o],u=n[o],h=c.length,f=s[o]=new Array(h),m,g=0;g<h;++g)(m=c[g]||u[g])&&(f[g]=m);for(;o<r;++o)s[o]=e[o];return new eh(s,this._parents,this._name,this._id)}function u5e(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function d5e(t,e,n){var r,i,a=u5e(e)?y$:Gu;return function(){var s=a(this,t),o=s.on;o!==r&&(i=(r=o).copy()).on(e,n),s.on=i}}function h5e(t,e){var n=this._id;return arguments.length<2?Wc(this.node(),n).on.on(t):this.each(d5e(n,t,e))}function f5e(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function p5e(){return this.on("end.remove",f5e(this._id))}function m5e(t){var e=this._name,n=this._id;typeof t!="function"&&(t=f$(t));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var o=r[s],c=o.length,u=a[s]=new Array(c),h,f,m=0;m<c;++m)(h=o[m])&&(f=t.call(h,h.__data__,m,o))&&("__data__"in h&&(f.__data__=h.__data__),u[m]=f,jT(u[m],e,n,m,u,Wc(h,n)));return new eh(a,this._parents,e,n)}function g5e(t){var e=this._name,n=this._id;typeof t!="function"&&(t=sZ(t));for(var r=this._groups,i=r.length,a=[],s=[],o=0;o<i;++o)for(var c=r[o],u=c.length,h,f=0;f<u;++f)if(h=c[f]){for(var m=t.call(h,h.__data__,f,c),g,v=Wc(h,n),x=0,_=m.length;x<_;++x)(g=m[x])&&jT(g,e,n,x,m,v);a.push(m),s.push(h)}return new eh(a,s,e,n)}var v5e=pw.prototype.constructor;function y5e(){return new v5e(this._groups,this._parents)}function b5e(t,e){var n,r,i;return function(){var a=Sy(this,t),s=(this.style.removeProperty(t),Sy(this,t));return a===s?null:a===n&&s===r?i:i=e(n=a,r=s)}}function DZ(t){return function(){this.style.removeProperty(t)}}function x5e(t,e,n){var r,i=n+"",a;return function(){var s=Sy(this,t);return s===i?null:s===r?a:a=e(r=s,n)}}function _5e(t,e,n){var r,i,a;return function(){var s=Sy(this,t),o=n(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(t),Sy(this,t))),s===c?null:s===r&&c===i?a:(i=c,a=e(r=s,o))}}function w5e(t,e){var n,r,i,a="style."+e,s="end."+a,o;return function(){var c=Gu(this,t),u=c.on,h=c.value[a]==null?o||(o=DZ(e)):void 0;(u!==n||i!==h)&&(r=(n=u).copy()).on(s,i=h),c.on=r}}function S5e(t,e,n){var r=(t+="")=="transform"?E$e:NZ;return e==null?this.styleTween(t,b5e(t,r)).on("end.style."+t,DZ(t)):typeof e=="function"?this.styleTween(t,_5e(t,r,b$(this,"style."+t,e))).each(w5e(this._id,t)):this.styleTween(t,x5e(t,r,e),n).on("end.style."+t,null)}function E5e(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function C5e(t,e,n){var r,i;function a(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&E5e(t,s,n)),r}return a._value=e,a}function T5e(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,C5e(t,e,n??""))}function M5e(t){return function(){this.textContent=t}}function A5e(t){return function(){var e=t(this);this.textContent=e??""}}function P5e(t){return this.tween("text",typeof t=="function"?A5e(b$(this,"text",t)):M5e(t==null?"":t+""))}function N5e(t){return function(e){this.textContent=t.call(this,e)}}function D5e(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&N5e(i)),e}return r._value=t,r}function k5e(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,D5e(t))}function R5e(){for(var t=this._name,e=this._id,n=kZ(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,c,u=0;u<o;++u)if(c=s[u]){var h=Wc(c,e);jT(c,t,n,u,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new eh(r,this._parents,t,n)}function I5e(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,s){var o={value:s},c={value:function(){--i===0&&a()}};n.each(function(){var u=Gu(this,r),h=u.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(c)),u.on=e}),i===0&&a()})}var $5e=0;function eh(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function kZ(){return++$5e}var Ad=pw.prototype;eh.prototype={constructor:eh,select:m5e,selectAll:g5e,selectChild:Ad.selectChild,selectChildren:Ad.selectChildren,filter:l5e,merge:c5e,selection:y5e,transition:R5e,call:Ad.call,nodes:Ad.nodes,node:Ad.node,size:Ad.size,empty:Ad.empty,each:Ad.each,on:h5e,attr:W$e,attrTween:Z$e,style:S5e,styleTween:T5e,text:P5e,textTween:k5e,remove:p5e,tween:F$e,delay:e5e,duration:r5e,ease:a5e,easeVarying:o5e,end:I5e,[Symbol.iterator]:Ad[Symbol.iterator]};function j5e(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var L5e={time:null,delay:0,duration:250,ease:j5e};function O5e(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function F5e(t){var e,n;t instanceof eh?(e=t._id,t=t._name):(e=kZ(),(n=L5e).time=v$(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,c,u=0;u<o;++u)(c=s[u])&&jT(c,t,e,u,s,n||O5e(c,e));return new eh(r,this._parents,t,e)}pw.prototype.interrupt=j$e;pw.prototype.transition=F5e;const YC=t=>()=>t;function B5e(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ud(t,e,n){this.k=t,this.x=e,this.y=n}Ud.prototype={constructor:Ud,scale:function(t){return t===1?this:new Ud(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ud(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var LT=new Ud(1,0,0);RZ.prototype=Ud.prototype;function RZ(t){for(;!t.__zoom;)if(!(t=t.parentNode))return LT;return t.__zoom}function QA(t){t.stopImmediatePropagation()}function m1(t){t.preventDefault(),t.stopImmediatePropagation()}function z5e(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function U5e(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function y8(){return this.__zoom||LT}function V5e(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function H5e(){return navigator.maxTouchPoints||"ontouchstart"in this}function G5e(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function IZ(){var t=z5e,e=U5e,n=G5e,r=V5e,i=H5e,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],o=250,c=E3,u=RT("start","zoom","end"),h,f,m,g=500,v=150,x=0,_=10;function w(U){U.property("__zoom",y8).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",L).filter(i).on("touchstart.zoom",$).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(U,J,O,z){var V=U.selection?U.selection():U;V.property("__zoom",y8),U!==V?N(U,J,O,z):V.interrupt().each(function(){P(this,arguments).event(z).start().zoom(null,typeof J=="function"?J.apply(this,arguments):J).end()})},w.scaleBy=function(U,J,O,z){w.scaleTo(U,function(){var V=this.__zoom.k,H=typeof J=="function"?J.apply(this,arguments):J;return V*H},O,z)},w.scaleTo=function(U,J,O,z){w.transform(U,function(){var V=e.apply(this,arguments),H=this.__zoom,ee=O==null?A(V):typeof O=="function"?O.apply(this,arguments):O,Y=H.invert(ee),Z=typeof J=="function"?J.apply(this,arguments):J;return n(E(S(H,Z),ee,Y),V,s)},O,z)},w.translateBy=function(U,J,O,z){w.transform(U,function(){return n(this.__zoom.translate(typeof J=="function"?J.apply(this,arguments):J,typeof O=="function"?O.apply(this,arguments):O),e.apply(this,arguments),s)},null,z)},w.translateTo=function(U,J,O,z,V){w.transform(U,function(){var H=e.apply(this,arguments),ee=this.__zoom,Y=z==null?A(H):typeof z=="function"?z.apply(this,arguments):z;return n(LT.translate(Y[0],Y[1]).scale(ee.k).translate(typeof J=="function"?-J.apply(this,arguments):-J,typeof O=="function"?-O.apply(this,arguments):-O),H,s)},z,V)};function S(U,J){return J=Math.max(a[0],Math.min(a[1],J)),J===U.k?U:new Ud(J,U.x,U.y)}function E(U,J,O){var z=J[0]-O[0]*U.k,V=J[1]-O[1]*U.k;return z===U.x&&V===U.y?U:new Ud(U.k,z,V)}function A(U){return[(+U[0][0]+ +U[1][0])/2,(+U[0][1]+ +U[1][1])/2]}function N(U,J,O,z){U.on("start.zoom",function(){P(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(z).end()}).tween("zoom",function(){var V=this,H=arguments,ee=P(V,H).event(z),Y=e.apply(V,H),Z=O==null?A(Y):typeof O=="function"?O.apply(V,H):O,K=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),X=V.__zoom,ne=typeof J=="function"?J.apply(V,H):J,G=c(X.invert(Z).concat(K/X.k),ne.invert(Z).concat(K/ne.k));return function(te){if(te===1)te=ne;else{var ae=G(te),pe=K/ae[2];te=new Ud(pe,Z[0]-ae[0]*pe,Z[1]-ae[1]*pe)}ee.zoom(null,te)}})}function P(U,J,O){return!O&&U.__zooming||new R(U,J)}function R(U,J){this.that=U,this.args=J,this.active=0,this.sourceEvent=null,this.extent=e.apply(U,J),this.taps=0}R.prototype={event:function(U){return U&&(this.sourceEvent=U),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(U,J){return this.mouse&&U!=="mouse"&&(this.mouse[1]=J.invert(this.mouse[0])),this.touch0&&U!=="touch"&&(this.touch0[1]=J.invert(this.touch0[0])),this.touch1&&U!=="touch"&&(this.touch1[1]=J.invert(this.touch1[0])),this.that.__zoom=J,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(U){var J=tl(this.that).datum();u.call(U,this.that,new B5e(U,{sourceEvent:this.sourceEvent,target:w,transform:this.that.__zoom,dispatch:u}),J)}};function D(U,...J){if(!t.apply(this,arguments))return;var O=P(this,J).event(U),z=this.__zoom,V=Math.max(a[0],Math.min(a[1],z.k*Math.pow(2,r.apply(this,arguments)))),H=Pc(U);if(O.wheel)(O.mouse[0][0]!==H[0]||O.mouse[0][1]!==H[1])&&(O.mouse[1]=z.invert(O.mouse[0]=H)),clearTimeout(O.wheel);else{if(z.k===V)return;O.mouse=[H,z.invert(H)],M3(this),O.start()}m1(U),O.wheel=setTimeout(ee,v),O.zoom("mouse",n(E(S(z,V),O.mouse[0],O.mouse[1]),O.extent,s));function ee(){O.wheel=null,O.end()}}function k(U,...J){if(m||!t.apply(this,arguments))return;var O=U.currentTarget,z=P(this,J,!0).event(U),V=tl(U.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",K,!0),H=Pc(U,O),ee=U.clientX,Y=U.clientY;vZ(U.view),QA(U),z.mouse=[H,this.__zoom.invert(H)],M3(this),z.start();function Z(X){if(m1(X),!z.moved){var ne=X.clientX-ee,G=X.clientY-Y;z.moved=ne*ne+G*G>x}z.event(X).zoom("mouse",n(E(z.that.__zoom,z.mouse[0]=Pc(X,O),z.mouse[1]),z.extent,s))}function K(X){V.on("mousemove.zoom mouseup.zoom",null),yZ(X.view,z.moved),m1(X),z.event(X).end()}}function L(U,...J){if(t.apply(this,arguments)){var O=this.__zoom,z=Pc(U.changedTouches?U.changedTouches[0]:U,this),V=O.invert(z),H=O.k*(U.shiftKey?.5:2),ee=n(E(S(O,H),z,V),e.apply(this,J),s);m1(U),o>0?tl(this).transition().duration(o).call(N,ee,z,U):tl(this).call(w.transform,ee,z,U)}}function $(U,...J){if(t.apply(this,arguments)){var O=U.touches,z=O.length,V=P(this,J,U.changedTouches.length===z).event(U),H,ee,Y,Z;for(QA(U),ee=0;ee<z;++ee)Y=O[ee],Z=Pc(Y,this),Z=[Z,this.__zoom.invert(Z),Y.identifier],V.touch0?!V.touch1&&V.touch0[2]!==Z[2]&&(V.touch1=Z,V.taps=0):(V.touch0=Z,H=!0,V.taps=1+!!h);h&&(h=clearTimeout(h)),H&&(V.taps<2&&(f=Z[0],h=setTimeout(function(){h=null},g)),M3(this),V.start())}}function B(U,...J){if(this.__zooming){var O=P(this,J).event(U),z=U.changedTouches,V=z.length,H,ee,Y,Z;for(m1(U),H=0;H<V;++H)ee=z[H],Y=Pc(ee,this),O.touch0&&O.touch0[2]===ee.identifier?O.touch0[0]=Y:O.touch1&&O.touch1[2]===ee.identifier&&(O.touch1[0]=Y);if(ee=O.that.__zoom,O.touch1){var K=O.touch0[0],X=O.touch0[1],ne=O.touch1[0],G=O.touch1[1],te=(te=ne[0]-K[0])*te+(te=ne[1]-K[1])*te,ae=(ae=G[0]-X[0])*ae+(ae=G[1]-X[1])*ae;ee=S(ee,Math.sqrt(te/ae)),Y=[(K[0]+ne[0])/2,(K[1]+ne[1])/2],Z=[(X[0]+G[0])/2,(X[1]+G[1])/2]}else if(O.touch0)Y=O.touch0[0],Z=O.touch0[1];else return;O.zoom("touch",n(E(ee,Y,Z),O.extent,s))}}function q(U,...J){if(this.__zooming){var O=P(this,J).event(U),z=U.changedTouches,V=z.length,H,ee;for(QA(U),m&&clearTimeout(m),m=setTimeout(function(){m=null},g),H=0;H<V;++H)ee=z[H],O.touch0&&O.touch0[2]===ee.identifier?delete O.touch0:O.touch1&&O.touch1[2]===ee.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(ee=Pc(ee,this),Math.hypot(f[0]-ee[0],f[1]-ee[1])<_)){var Y=tl(this).on("dblclick.zoom");Y&&Y.apply(this,arguments)}}}return w.wheelDelta=function(U){return arguments.length?(r=typeof U=="function"?U:YC(+U),w):r},w.filter=function(U){return arguments.length?(t=typeof U=="function"?U:YC(!!U),w):t},w.touchable=function(U){return arguments.length?(i=typeof U=="function"?U:YC(!!U),w):i},w.extent=function(U){return arguments.length?(e=typeof U=="function"?U:YC([[+U[0][0],+U[0][1]],[+U[1][0],+U[1][1]]]),w):e},w.scaleExtent=function(U){return arguments.length?(a[0]=+U[0],a[1]=+U[1],w):[a[0],a[1]]},w.translateExtent=function(U){return arguments.length?(s[0][0]=+U[0][0],s[1][0]=+U[1][0],s[0][1]=+U[0][1],s[1][1]=+U[1][1],w):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},w.constrain=function(U){return arguments.length?(n=U,w):n},w.duration=function(U){return arguments.length?(o=+U,w):o},w.interpolate=function(U){return arguments.length?(c=U,w):c},w.on=function(){var U=u.on.apply(u,arguments);return U===u?w:U},w.clickDistance=function(U){return arguments.length?(x=(U=+U)*U,w):Math.sqrt(x)},w.tapDistance=function(U){return arguments.length?(_=+U,w):_},w}const Vu={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:r}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},k_=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],$Z=["Enter"," ","Escape"],jZ={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:e,y:n})=>`Moved selected node ${t}. New position, x: ${e}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Cy;(function(t){t.Strict="strict",t.Loose="loose"})(Cy||(Cy={}));var Xm;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Xm||(Xm={}));var R_;(function(t){t.Partial="partial",t.Full="full"})(R_||(R_={}));const LZ={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Sf;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Sf||(Sf={}));var Ty;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Ty||(Ty={}));var Jt;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Jt||(Jt={}));const b8={[Jt.Left]:Jt.Right,[Jt.Right]:Jt.Left,[Jt.Top]:Jt.Bottom,[Jt.Bottom]:Jt.Top};function OZ(t){return t===null?null:t?"valid":"invalid"}const FZ=t=>"id"in t&&"source"in t&&"target"in t,W5e=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),x$=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),gw=(t,e=[0,0])=>{const{width:n,height:r}=ch(t),i=t.origin??e,a=n*i[0],s=r*i[1];return{x:t.position.x-a,y:t.position.y-s}},q5e=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const a=typeof i=="string";let s=!e.nodeLookup&&!a?i:void 0;e.nodeLookup&&(s=a?e.nodeLookup.get(i):x$(i)?i:e.nodeLookup.get(i.id));const o=s?M2(s,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return OT(r,o)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return FT(n)},vw=(t,e={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return t.forEach(i=>{(e.filter===void 0||e.filter(i))&&(n=OT(n,M2(i)),r=!0)}),r?FT(n):{x:0,y:0,width:0,height:0}},_$=(t,e,[n,r,i]=[0,0,1],a=!1,s=!1)=>{const o={...bw(e,[n,r,i]),width:e.width/i,height:e.height/i},c=[];for(const u of t.values()){const{measured:h,selectable:f=!0,hidden:m=!1}=u;if(s&&!f||m)continue;const g=h.width??u.width??u.initialWidth??null,v=h.height??u.height??u.initialHeight??null,x=I_(o,Ay(u)),_=(g??0)*(v??0),w=a&&x>0;(!u.internals.handleBounds||w||x>=_||u.dragging)&&c.push(u)}return c},K5e=(t,e)=>{const n=new Set;return t.forEach(r=>{n.add(r.id)}),e.filter(r=>n.has(r.source)||n.has(r.target))};function X5e(t,e){const n=new Map,r=e?.nodes?new Set(e.nodes.map(i=>i.id)):null;return t.forEach(i=>{i.measured.width&&i.measured.height&&(e?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function Y5e({nodes:t,width:e,height:n,panZoom:r,minZoom:i,maxZoom:a},s){if(t.size===0)return Promise.resolve(!0);const o=X5e(t,s),c=vw(o),u=w$(c,e,n,s?.minZoom??i,s?.maxZoom??a,s?.padding??.1);return await r.setViewport(u,{duration:s?.duration,ease:s?.ease,interpolate:s?.interpolate}),Promise.resolve(!0)}function BZ({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:a}){const s=n.get(t),o=s.parentId?n.get(s.parentId):void 0,{x:c,y:u}=o?o.internals.positionAbsolute:{x:0,y:0},h=s.origin??r;let f=s.extent||i;if(s.extent==="parent"&&!s.expandParent)if(!o)a?.("005",Vu.error005());else{const g=o.measured.width,v=o.measured.height;g&&v&&(f=[[c,u],[c+g,u+v]])}else o&&Py(s.extent)&&(f=[[s.extent[0][0]+c,s.extent[0][1]+u],[s.extent[1][0]+c,s.extent[1][1]+u]]);const m=Py(f)?mg(e,f,s.measured):e;return(s.measured.width===void 0||s.measured.height===void 0)&&a?.("015",Vu.error015()),{position:{x:m.x-c+(s.measured.width??0)*h[0],y:m.y-u+(s.measured.height??0)*h[1]},positionAbsolute:m}}async function Z5e({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:r,onBeforeDelete:i}){const a=new Set(t.map(m=>m.id)),s=[];for(const m of n){if(m.deletable===!1)continue;const g=a.has(m.id),v=!g&&m.parentId&&s.find(x=>x.id===m.parentId);(g||v)&&s.push(m)}const o=new Set(e.map(m=>m.id)),c=r.filter(m=>m.deletable!==!1),h=K5e(s,c);for(const m of c)o.has(m.id)&&!h.find(v=>v.id===m.id)&&h.push(m);if(!i)return{edges:h,nodes:s};const f=await i({nodes:s,edges:h});return typeof f=="boolean"?f?{edges:h,nodes:s}:{edges:[],nodes:[]}:f}const My=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),mg=(t={x:0,y:0},e,n)=>({x:My(t.x,e[0][0],e[1][0]-(n?.width??0)),y:My(t.y,e[0][1],e[1][1]-(n?.height??0))});function zZ(t,e,n){const{width:r,height:i}=ch(n),{x:a,y:s}=n.internals.positionAbsolute;return mg(t,[[a,s],[a+r,s+i]],e)}const x8=(t,e,n)=>t<e?My(Math.abs(t-e),1,e)/e:t>n?-My(Math.abs(t-n),1,e)/e:0,UZ=(t,e,n=15,r=40)=>{const i=x8(t.x,r,e.width-r)*n,a=x8(t.y,r,e.height-r)*n;return[i,a]},OT=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),nR=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),FT=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),Ay=(t,e=[0,0])=>{const{x:n,y:r}=x$(t)?t.internals.positionAbsolute:gw(t,e);return{x:n,y:r,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},M2=(t,e=[0,0])=>{const{x:n,y:r}=x$(t)?t.internals.positionAbsolute:gw(t,e);return{x:n,y:r,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:r+(t.measured?.height??t.height??t.initialHeight??0)}},VZ=(t,e)=>FT(OT(nR(t),nR(e))),I_=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},_8=t=>$c(t.width)&&$c(t.height)&&$c(t.x)&&$c(t.y),$c=t=>!isNaN(t)&&isFinite(t),J5e=(t,e)=>{},yw=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),bw=({x:t,y:e},[n,r,i],a=!1,s=[1,1])=>{const o={x:(t-n)/i,y:(e-r)/i};return a?yw(o,s):o},A2=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r});function Nv(t,e){if(typeof t=="number")return Math.floor((e-e/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(e*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Q5e(t,e,n){if(typeof t=="string"||typeof t=="number"){const r=Nv(t,n),i=Nv(t,e);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof t=="object"){const r=Nv(t.top??t.y??0,n),i=Nv(t.bottom??t.y??0,n),a=Nv(t.left??t.x??0,e),s=Nv(t.right??t.x??0,e);return{top:r,right:s,bottom:i,left:a,x:a+s,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function eje(t,e,n,r,i,a){const{x:s,y:o}=A2(t,[e,n,r]),{x:c,y:u}=A2({x:t.x+t.width,y:t.y+t.height},[e,n,r]),h=i-c,f=a-u;return{left:Math.floor(s),top:Math.floor(o),right:Math.floor(h),bottom:Math.floor(f)}}const w$=(t,e,n,r,i,a)=>{const s=Q5e(a,e,n),o=(e-s.x)/t.width,c=(n-s.y)/t.height,u=Math.min(o,c),h=My(u,r,i),f=t.x+t.width/2,m=t.y+t.height/2,g=e/2-f*h,v=n/2-m*h,x=eje(t,g,v,h,e,n),_={left:Math.min(x.left-s.left,0),top:Math.min(x.top-s.top,0),right:Math.min(x.right-s.right,0),bottom:Math.min(x.bottom-s.bottom,0)};return{x:g-_.left+_.right,y:v-_.top+_.bottom,zoom:h}},$_=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Py(t){return t!=null&&t!=="parent"}function ch(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function HZ(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function GZ(t,e={width:0,height:0},n,r,i){const a={...t},s=r.get(n);if(s){const o=s.origin||i;a.x+=s.internals.positionAbsolute.x-(e.width??0)*o[0],a.y+=s.internals.positionAbsolute.y-(e.height??0)*o[1]}return a}function w8(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function tje(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}function nje(t){return{...jZ,...t||{}}}function H1(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:a,y:s}=jc(t),o=bw({x:a-(i?.left??0),y:s-(i?.top??0)},r),{x:c,y:u}=n?yw(o,e):o;return{xSnapped:c,ySnapped:u,...o}}const S$=t=>({width:t.offsetWidth,height:t.offsetHeight}),WZ=t=>t?.getRootNode?.()||window?.document,rje=["INPUT","SELECT","TEXTAREA"];function qZ(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:rje.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const KZ=t=>"clientX"in t,jc=(t,e)=>{const n=KZ(t),r=n?t.clientX:t.touches?.[0].clientX,i=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:i-(e?.top??0)}},S8=(t,e,n,r,i)=>{const a=e.querySelectorAll(`.${t}`);return!a||!a.length?null:Array.from(a).map(s=>{const o=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:t,nodeId:i,position:s.getAttribute("data-handlepos"),x:(o.left-n.left)/r,y:(o.top-n.top)/r,...S$(s)}})};function XZ({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:a,targetControlX:s,targetControlY:o}){const c=t*.125+i*.375+s*.375+n*.125,u=e*.125+a*.375+o*.375+r*.125,h=Math.abs(c-t),f=Math.abs(u-e);return[c,u,h,f]}function ZC(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function E8({pos:t,x1:e,y1:n,x2:r,y2:i,c:a}){switch(t){case Jt.Left:return[e-ZC(e-r,a),n];case Jt.Right:return[e+ZC(r-e,a),n];case Jt.Top:return[e,n-ZC(n-i,a)];case Jt.Bottom:return[e,n+ZC(i-n,a)]}}function YZ({sourceX:t,sourceY:e,sourcePosition:n=Jt.Bottom,targetX:r,targetY:i,targetPosition:a=Jt.Top,curvature:s=.25}){const[o,c]=E8({pos:n,x1:t,y1:e,x2:r,y2:i,c:s}),[u,h]=E8({pos:a,x1:r,y1:i,x2:t,y2:e,c:s}),[f,m,g,v]=XZ({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:c,targetControlX:u,targetControlY:h});return[`M${t},${e} C${o},${c} ${u},${h} ${r},${i}`,f,m,g,v]}function ZZ({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,a=n<t?n+i:n-i,s=Math.abs(r-e)/2,o=r<e?r+s:r-s;return[a,o,i,s]}function ije({sourceNode:t,targetNode:e,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1,zIndexMode:a="basic"}){if(a==="manual")return r;const s=i&&n?r+1e3:r,o=Math.max(t.parentId||i&&t.selected?t.internals.z:0,e.parentId||i&&e.selected?e.internals.z:0);return s+o}function aje({sourceNode:t,targetNode:e,width:n,height:r,transform:i}){const a=OT(M2(t),M2(e));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return I_(s,FT(a))>0}const sje=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`xy-edge__${t}${e||""}-${n}${r||""}`,oje=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),lje=(t,e,n={})=>{if(!t.source||!t.target)return e;const r=n.getEdgeId||sje;let i;return FZ(t)?i={...t}:i={...t,id:r(t)},oje(i,e)?e:(i.sourceHandle===null&&delete i.sourceHandle,i.targetHandle===null&&delete i.targetHandle,e.concat(i))};function JZ({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,a,s,o]=ZZ({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,a,s,o]}const C8={[Jt.Left]:{x:-1,y:0},[Jt.Right]:{x:1,y:0},[Jt.Top]:{x:0,y:-1},[Jt.Bottom]:{x:0,y:1}},cje=({source:t,sourcePosition:e=Jt.Bottom,target:n})=>e===Jt.Left||e===Jt.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},T8=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function uje({source:t,sourcePosition:e=Jt.Bottom,target:n,targetPosition:r=Jt.Top,center:i,offset:a,stepPosition:s}){const o=C8[e],c=C8[r],u={x:t.x+o.x*a,y:t.y+o.y*a},h={x:n.x+c.x*a,y:n.y+c.y*a},f=cje({source:u,sourcePosition:e,target:h}),m=f.x!==0?"x":"y",g=f[m];let v=[],x,_;const w={x:0,y:0},S={x:0,y:0},[,,E,A]=ZZ({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(o[m]*c[m]===-1){m==="x"?(x=i.x??u.x+(h.x-u.x)*s,_=i.y??(u.y+h.y)/2):(x=i.x??(u.x+h.x)/2,_=i.y??u.y+(h.y-u.y)*s);const P=[{x,y:u.y},{x,y:h.y}],R=[{x:u.x,y:_},{x:h.x,y:_}];o[m]===g?v=m==="x"?P:R:v=m==="x"?R:P}else{const P=[{x:u.x,y:h.y}],R=[{x:h.x,y:u.y}];if(m==="x"?v=o.x===g?R:P:v=o.y===g?P:R,e===r){const B=Math.abs(t[m]-n[m]);if(B<=a){const q=Math.min(a-1,a-B);o[m]===g?w[m]=(u[m]>t[m]?-1:1)*q:S[m]=(h[m]>n[m]?-1:1)*q}}if(e!==r){const B=m==="x"?"y":"x",q=o[m]===c[B],U=u[B]>h[B],J=u[B]<h[B];(o[m]===1&&(!q&&U||q&&J)||o[m]!==1&&(!q&&J||q&&U))&&(v=m==="x"?P:R)}const D={x:u.x+w.x,y:u.y+w.y},k={x:h.x+S.x,y:h.y+S.y},L=Math.max(Math.abs(D.x-v[0].x),Math.abs(k.x-v[0].x)),$=Math.max(Math.abs(D.y-v[0].y),Math.abs(k.y-v[0].y));L>=$?(x=(D.x+k.x)/2,_=v[0].y):(x=v[0].x,_=(D.y+k.y)/2)}return[[t,{x:u.x+w.x,y:u.y+w.y},...v,{x:h.x+S.x,y:h.y+S.y},n],x,_,E,A]}function dje(t,e,n,r){const i=Math.min(T8(t,e)/2,T8(e,n)/2,r),{x:a,y:s}=e;if(t.x===a&&a===n.x||t.y===s&&s===n.y)return`L${a} ${s}`;if(t.y===s){const u=t.x<n.x?-1:1,h=t.y<n.y?1:-1;return`L ${a+i*u},${s}Q ${a},${s} ${a},${s+i*h}`}const o=t.x<n.x?1:-1,c=t.y<n.y?-1:1;return`L ${a},${s+i*c}Q ${a},${s} ${a+i*o},${s}`}function rR({sourceX:t,sourceY:e,sourcePosition:n=Jt.Bottom,targetX:r,targetY:i,targetPosition:a=Jt.Top,borderRadius:s=5,centerX:o,centerY:c,offset:u=20,stepPosition:h=.5}){const[f,m,g,v,x]=uje({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:a,center:{x:o,y:c},offset:u,stepPosition:h});return[f.reduce((w,S,E)=>{let A="";return E>0&&E<f.length-1?A=dje(f[E-1],S,f[E+1],s):A=`${E===0?"M":"L"}${S.x} ${S.y}`,w+=A,w},""),m,g,v,x]}function M8(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function hje(t){const{sourceNode:e,targetNode:n}=t;if(!M8(e)||!M8(n))return null;const r=e.internals.handleBounds||A8(e.handles),i=n.internals.handleBounds||A8(n.handles),a=P8(r?.source??[],t.sourceHandle),s=P8(t.connectionMode===Cy.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),t.targetHandle);if(!a||!s)return t.onError?.("008",Vu.error008(a?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const o=a?.position||Jt.Bottom,c=s?.position||Jt.Top,u=gg(e,a,o),h=gg(n,s,c);return{sourceX:u.x,sourceY:u.y,targetX:h.x,targetY:h.y,sourcePosition:o,targetPosition:c}}function A8(t){if(!t)return null;const e=[],n=[];for(const r of t)r.width=r.width??1,r.height=r.height??1,r.type==="source"?e.push(r):r.type==="target"&&n.push(r);return{source:e,target:n}}function gg(t,e,n=Jt.Left,r=!1){const i=(e?.x??0)+t.internals.positionAbsolute.x,a=(e?.y??0)+t.internals.positionAbsolute.y,{width:s,height:o}=e??ch(t);if(r)return{x:i+s/2,y:a+o/2};switch(e?.position??n){case Jt.Top:return{x:i+s/2,y:a};case Jt.Right:return{x:i+s,y:a+o/2};case Jt.Bottom:return{x:i+s/2,y:a+o};case Jt.Left:return{x:i,y:a+o/2}}}function P8(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function iR(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`:""}function fje(t,{id:e,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const a=new Set;return t.reduce((s,o)=>([o.markerStart||r,o.markerEnd||i].forEach(c=>{if(c&&typeof c=="object"){const u=iR(c,e);a.has(u)||(s.push({id:u,color:c.color||n,...c}),a.add(u))}}),s),[]).sort((s,o)=>s.id.localeCompare(o.id))}const QZ=1e3,pje=10,E$={nodeOrigin:[0,0],nodeExtent:k_,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},mje={...E$,checkEquality:!0};function C$(t,e){const n={...t};for(const r in e)e[r]!==void 0&&(n[r]=e[r]);return n}function gje(t,e,n){const r=C$(E$,n);for(const i of t.values())if(i.parentId)M$(i,t,e,r);else{const a=gw(i,r.nodeOrigin),s=Py(i.extent)?i.extent:r.nodeExtent,o=mg(a,s,ch(i));i.internals.positionAbsolute=o}}function vje(t,e){if(!t.handles)return t.measured?e?.internals.handleBounds:void 0;const n=[],r=[];for(const i of t.handles){const a={id:i.id,width:i.width??1,height:i.height??1,nodeId:t.id,x:i.x,y:i.y,position:i.position,type:i.type};i.type==="source"?n.push(a):i.type==="target"&&r.push(a)}return{source:n,target:r}}function T$(t){return t==="manual"}function aR(t,e,n,r={}){const i=C$(mje,r),a={i:0},s=new Map(e),o=i?.elevateNodesOnSelect&&!T$(i.zIndexMode)?QZ:0;let c=t.length>0;e.clear(),n.clear();for(const u of t){let h=s.get(u.id);if(i.checkEquality&&u===h?.internals.userNode)e.set(u.id,h);else{const f=gw(u,i.nodeOrigin),m=Py(u.extent)?u.extent:i.nodeExtent,g=mg(f,m,ch(u));h={...i.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:g,handleBounds:vje(u,h),z:eJ(u,o,i.zIndexMode),userNode:u}},e.set(u.id,h)}(h.measured===void 0||h.measured.width===void 0||h.measured.height===void 0)&&!h.hidden&&(c=!1),u.parentId&&M$(h,e,n,r,a)}return c}function yje(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function M$(t,e,n,r,i){const{elevateNodesOnSelect:a,nodeOrigin:s,nodeExtent:o,zIndexMode:c}=C$(E$,r),u=t.parentId,h=e.get(u);if(!h){console.warn(`Parent node ${u} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}yje(t,n),i&&!h.parentId&&h.internals.rootParentIndex===void 0&&c==="auto"&&(h.internals.rootParentIndex=++i.i,h.internals.z=h.internals.z+i.i*pje),i&&h.internals.rootParentIndex!==void 0&&(i.i=h.internals.rootParentIndex);const f=a&&!T$(c)?QZ:0,{x:m,y:g,z:v}=bje(t,h,s,o,f,c),{positionAbsolute:x}=t.internals,_=m!==x.x||g!==x.y;(_||v!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:_?{x:m,y:g}:x,z:v}})}function eJ(t,e,n){const r=$c(t.zIndex)?t.zIndex:0;return T$(n)?r:r+(t.selected?e:0)}function bje(t,e,n,r,i,a){const{x:s,y:o}=e.internals.positionAbsolute,c=ch(t),u=gw(t,n),h=Py(t.extent)?mg(u,t.extent,c):u;let f=mg({x:s+h.x,y:o+h.y},r,c);t.extent==="parent"&&(f=zZ(f,c,e));const m=eJ(t,i,a),g=e.internals.z??0;return{x:f.x,y:f.y,z:g>=m?g+1:m}}function A$(t,e,n,r=[0,0]){const i=[],a=new Map;for(const s of t){const o=e.get(s.parentId);if(!o)continue;const c=a.get(s.parentId)?.expandedRect??Ay(o),u=VZ(c,s.rect);a.set(s.parentId,{expandedRect:u,parent:o})}return a.size>0&&a.forEach(({expandedRect:s,parent:o},c)=>{const u=o.internals.positionAbsolute,h=ch(o),f=o.origin??r,m=s.x<u.x?Math.round(Math.abs(u.x-s.x)):0,g=s.y<u.y?Math.round(Math.abs(u.y-s.y)):0,v=Math.max(h.width,Math.round(s.width)),x=Math.max(h.height,Math.round(s.height)),_=(v-h.width)*f[0],w=(x-h.height)*f[1];(m>0||g>0||_||w)&&(i.push({id:c,type:"position",position:{x:o.position.x-m+_,y:o.position.y-g+w}}),n.get(c)?.forEach(S=>{t.some(E=>E.id===S.id)||i.push({id:S.id,type:"position",position:{x:S.position.x+m,y:S.position.y+g}})})),(h.width<s.width||h.height<s.height||m||g)&&i.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:v+(m?f[0]*m-_:0),height:x+(g?f[1]*g-w:0)}})}),i}function xje(t,e,n,r,i,a,s){const o=r?.querySelector(".xyflow__viewport");let c=!1;if(!o)return{changes:[],updatedInternals:c};const u=[],h=window.getComputedStyle(o),{m22:f}=new window.DOMMatrixReadOnly(h.transform),m=[];for(const g of t.values()){const v=e.get(g.id);if(!v)continue;if(v.hidden){e.set(v.id,{...v,internals:{...v.internals,handleBounds:void 0}}),c=!0;continue}const x=S$(g.nodeElement),_=v.measured.width!==x.width||v.measured.height!==x.height;if(!!(x.width&&x.height&&(_||!v.internals.handleBounds||g.force))){const S=g.nodeElement.getBoundingClientRect(),E=Py(v.extent)?v.extent:a;let{positionAbsolute:A}=v.internals;v.parentId&&v.extent==="parent"?A=zZ(A,x,e.get(v.parentId)):E&&(A=mg(A,E,x));const N={...v,measured:x,internals:{...v.internals,positionAbsolute:A,handleBounds:{source:S8("source",g.nodeElement,S,f,v.id),target:S8("target",g.nodeElement,S,f,v.id)}}};e.set(v.id,N),v.parentId&&M$(N,e,n,{nodeOrigin:i,zIndexMode:s}),c=!0,_&&(u.push({id:v.id,type:"dimensions",dimensions:x}),v.expandParent&&v.parentId&&m.push({id:v.id,parentId:v.parentId,rect:Ay(N,i)}))}}if(m.length>0){const g=A$(m,e,n,i);u.push(...g)}return{changes:u,updatedInternals:c}}async function _je({delta:t,panZoom:e,transform:n,translateExtent:r,width:i,height:a}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const s=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[i,a]],r),o=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(o)}function N8(t,e,n,r,i,a){let s=i;const o=r.get(s)||new Map;r.set(s,o.set(n,e)),s=`${i}-${t}`;const c=r.get(s)||new Map;if(r.set(s,c.set(n,e)),a){s=`${i}-${t}-${a}`;const u=r.get(s)||new Map;r.set(s,u.set(n,e))}}function tJ(t,e,n){t.clear(),e.clear();for(const r of n){const{source:i,target:a,sourceHandle:s=null,targetHandle:o=null}=r,c={edgeId:r.id,source:i,target:a,sourceHandle:s,targetHandle:o},u=`${i}-${s}--${a}-${o}`,h=`${a}-${o}--${i}-${s}`;N8("source",c,h,t,i,s),N8("target",c,u,t,a,o),e.set(r.id,r)}}function nJ(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:nJ(n,e):!1}function D8(t,e,n){let r=t;do{if(r?.matches?.(e))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function wje(t,e,n,r){const i=new Map;for(const[a,s]of t)if((s.selected||s.id===r)&&(!s.parentId||!nJ(s,t))&&(s.draggable||e&&typeof s.draggable>"u")){const o=t.get(a);o&&i.set(a,{id:a,position:o.position||{x:0,y:0},distance:{x:n.x-o.internals.positionAbsolute.x,y:n.y-o.internals.positionAbsolute.y},extent:o.extent,parentId:o.parentId,origin:o.origin,expandParent:o.expandParent,internals:{positionAbsolute:o.internals.positionAbsolute||{x:0,y:0}},measured:{width:o.measured.width??0,height:o.measured.height??0}})}return i}function eP({nodeId:t,dragItems:e,nodeLookup:n,dragging:r=!0}){const i=[];for(const[s,o]of e){const c=n.get(s)?.internals.userNode;c&&i.push({...c,position:o.position,dragging:r})}if(!t)return[i[0],i];const a=n.get(t)?.internals.userNode;return[a?{...a,position:e.get(t)?.position||a.position,dragging:r}:i[0],i]}function Sje({dragItems:t,snapGrid:e,x:n,y:r}){const i=t.values().next().value;if(!i)return null;const a={x:n-i.distance.x,y:r-i.distance.y},s=yw(a,e);return{x:s.x-a.x,y:s.y-a.y}}function Eje({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:r,onDragStop:i}){let a={x:null,y:null},s=0,o=new Map,c=!1,u={x:0,y:0},h=null,f=!1,m=null,g=!1,v=!1,x=null;function _({noDragClassName:S,handleSelector:E,domNode:A,isSelectable:N,nodeId:P,nodeClickDistance:R=0}){m=tl(A);function D({x:B,y:q}){const{nodeLookup:U,nodeExtent:J,snapGrid:O,snapToGrid:z,nodeOrigin:V,onNodeDrag:H,onSelectionDrag:ee,onError:Y,updateNodePositions:Z}=e();a={x:B,y:q};let K=!1;const X=o.size>1,ne=X&&J?nR(vw(o)):null,G=X&&z?Sje({dragItems:o,snapGrid:O,x:B,y:q}):null;for(const[te,ae]of o){if(!U.has(te))continue;let pe={x:B-ae.distance.x,y:q-ae.distance.y};z&&(pe=G?{x:Math.round(pe.x+G.x),y:Math.round(pe.y+G.y)}:yw(pe,O));let ye=null;if(X&&J&&!ae.extent&&ne){const{positionAbsolute:ge}=ae.internals,be=ge.x-ne.x+J[0][0],oe=ge.x+ae.measured.width-ne.x2+J[1][0],Le=ge.y-ne.y+J[0][1],Ve=ge.y+ae.measured.height-ne.y2+J[1][1];ye=[[be,Le],[oe,Ve]]}const{position:me,positionAbsolute:fe}=BZ({nodeId:te,nextPosition:pe,nodeLookup:U,nodeExtent:ye||J,nodeOrigin:V,onError:Y});K=K||ae.position.x!==me.x||ae.position.y!==me.y,ae.position=me,ae.internals.positionAbsolute=fe}if(v=v||K,!!K&&(Z(o,!0),x&&(r||H||!P&&ee))){const[te,ae]=eP({nodeId:P,dragItems:o,nodeLookup:U});r?.(x,o,te,ae),H?.(x,te,ae),P||ee?.(x,ae)}}async function k(){if(!h)return;const{transform:B,panBy:q,autoPanSpeed:U,autoPanOnNodeDrag:J}=e();if(!J){c=!1,cancelAnimationFrame(s);return}const[O,z]=UZ(u,h,U);(O!==0||z!==0)&&(a.x=(a.x??0)-O/B[2],a.y=(a.y??0)-z/B[2],await q({x:O,y:z})&&D(a)),s=requestAnimationFrame(k)}function L(B){const{nodeLookup:q,multiSelectionActive:U,nodesDraggable:J,transform:O,snapGrid:z,snapToGrid:V,selectNodesOnDrag:H,onNodeDragStart:ee,onSelectionDragStart:Y,unselectNodesAndEdges:Z}=e();f=!0,(!H||!N)&&!U&&P&&(q.get(P)?.selected||Z()),N&&H&&P&&t?.(P);const K=H1(B.sourceEvent,{transform:O,snapGrid:z,snapToGrid:V,containerBounds:h});if(a=K,o=wje(q,J,K,P),o.size>0&&(n||ee||!P&&Y)){const[X,ne]=eP({nodeId:P,dragItems:o,nodeLookup:q});n?.(B.sourceEvent,o,X,ne),ee?.(B.sourceEvent,X,ne),P||Y?.(B.sourceEvent,ne)}}const $=bZ().clickDistance(R).on("start",B=>{const{domNode:q,nodeDragThreshold:U,transform:J,snapGrid:O,snapToGrid:z}=e();h=q?.getBoundingClientRect()||null,g=!1,v=!1,x=B.sourceEvent,U===0&&L(B),a=H1(B.sourceEvent,{transform:J,snapGrid:O,snapToGrid:z,containerBounds:h}),u=jc(B.sourceEvent,h)}).on("drag",B=>{const{autoPanOnNodeDrag:q,transform:U,snapGrid:J,snapToGrid:O,nodeDragThreshold:z,nodeLookup:V}=e(),H=H1(B.sourceEvent,{transform:U,snapGrid:J,snapToGrid:O,containerBounds:h});if(x=B.sourceEvent,(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1||P&&!V.has(P))&&(g=!0),!g){if(!c&&q&&f&&(c=!0,k()),!f){const ee=jc(B.sourceEvent,h),Y=ee.x-u.x,Z=ee.y-u.y;Math.sqrt(Y*Y+Z*Z)>z&&L(B)}(a.x!==H.xSnapped||a.y!==H.ySnapped)&&o&&f&&(u=jc(B.sourceEvent,h),D(H))}}).on("end",B=>{if(!(!f||g)&&(c=!1,f=!1,cancelAnimationFrame(s),o.size>0)){const{nodeLookup:q,updateNodePositions:U,onNodeDragStop:J,onSelectionDragStop:O}=e();if(v&&(U(o,!1),v=!1),i||J||!P&&O){const[z,V]=eP({nodeId:P,dragItems:o,nodeLookup:q,dragging:!1});i?.(B.sourceEvent,o,z,V),J?.(B.sourceEvent,z,V),P||O?.(B.sourceEvent,V)}}}).filter(B=>{const q=B.target;return!B.button&&(!S||!D8(q,`.${S}`,A))&&(!E||D8(q,E,A))});m.call($)}function w(){m?.on(".drag",null)}return{update:_,destroy:w}}function Cje(t,e,n){const r=[],i={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const a of e.values())I_(i,Ay(a))>0&&r.push(a);return r}const Tje=250;function Mje(t,e,n,r){let i=[],a=1/0;const s=Cje(t,n,e+Tje);for(const o of s){const c=[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]];for(const u of c){if(r.nodeId===u.nodeId&&r.type===u.type&&r.id===u.id)continue;const{x:h,y:f}=gg(o,u,u.position,!0),m=Math.sqrt(Math.pow(h-t.x,2)+Math.pow(f-t.y,2));m>e||(m<a?(i=[{...u,x:h,y:f}],a=m):m===a&&i.push({...u,x:h,y:f}))}}if(!i.length)return null;if(i.length>1){const o=r.type==="source"?"target":"source";return i.find(c=>c.type===o)??i[0]}return i[0]}function rJ(t,e,n,r,i,a=!1){const s=r.get(t);if(!s)return null;const o=i==="strict"?s.internals.handleBounds?.[e]:[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]],c=(n?o?.find(u=>u.id===n):o?.[0])??null;return c&&a?{...c,...gg(s,c,c.position,!0)}:c}function iJ(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function Aje(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const aJ=()=>!0;function Pje(t,{connectionMode:e,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:a,isTarget:s,domNode:o,nodeLookup:c,lib:u,autoPanOnConnect:h,flowId:f,panBy:m,cancelConnection:g,onConnectStart:v,onConnect:x,onConnectEnd:_,isValidConnection:w=aJ,onReconnectEnd:S,updateConnection:E,getTransform:A,getFromHandle:N,autoPanSpeed:P,dragThreshold:R=1,handleDomNode:D}){const k=WZ(t.target);let L=0,$;const{x:B,y:q}=jc(t),U=iJ(a,D),J=o?.getBoundingClientRect();let O=!1;if(!J||!U)return;const z=rJ(i,U,r,c,e);if(!z)return;let V=jc(t,J),H=!1,ee=null,Y=!1,Z=null;function K(){if(!h||!J)return;const[me,fe]=UZ(V,J,P);m({x:me,y:fe}),L=requestAnimationFrame(K)}const X={...z,nodeId:i,type:U,position:z.position},ne=c.get(i);let te={inProgress:!0,isValid:null,from:gg(ne,X,Jt.Left,!0),fromHandle:X,fromPosition:X.position,fromNode:ne,to:V,toHandle:null,toPosition:b8[X.position],toNode:null,pointer:V};function ae(){O=!0,E(te),v?.(t,{nodeId:i,handleId:r,handleType:U})}R===0&&ae();function pe(me){if(!O){const{x:Ve,y:Ze}=jc(me),xe=Ve-B,ht=Ze-q;if(!(xe*xe+ht*ht>R*R))return;ae()}if(!N()||!X){ye(me);return}const fe=A();V=jc(me,J),$=Mje(bw(V,fe,!1,[1,1]),n,c,X),H||(K(),H=!0);const ge=sJ(me,{handle:$,connectionMode:e,fromNodeId:i,fromHandleId:r,fromType:s?"target":"source",isValidConnection:w,doc:k,lib:u,flowId:f,nodeLookup:c});Z=ge.handleDomNode,ee=ge.connection,Y=Aje(!!$,ge.isValid);const be=c.get(i),oe=be?gg(be,X,Jt.Left,!0):te.from,Le={...te,from:oe,isValid:Y,to:ge.toHandle&&Y?A2({x:ge.toHandle.x,y:ge.toHandle.y},fe):V,toHandle:ge.toHandle,toPosition:Y&&ge.toHandle?ge.toHandle.position:b8[X.position],toNode:ge.toHandle?c.get(ge.toHandle.nodeId):null,pointer:V};E(Le),te=Le}function ye(me){if(!("touches"in me&&me.touches.length>0)){if(O){($||Z)&&ee&&Y&&x?.(ee);const{inProgress:fe,...ge}=te,be={...ge,toPosition:te.toHandle?te.toPosition:null};_?.(me,be),a&&S?.(me,be)}g(),cancelAnimationFrame(L),H=!1,Y=!1,ee=null,Z=null,k.removeEventListener("mousemove",pe),k.removeEventListener("mouseup",ye),k.removeEventListener("touchmove",pe),k.removeEventListener("touchend",ye)}}k.addEventListener("mousemove",pe),k.addEventListener("mouseup",ye),k.addEventListener("touchmove",pe),k.addEventListener("touchend",ye)}function sJ(t,{handle:e,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:a,doc:s,lib:o,flowId:c,isValidConnection:u=aJ,nodeLookup:h}){const f=a==="target",m=e?s.querySelector(`.${o}-flow__handle[data-id="${c}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x:g,y:v}=jc(t),x=s.elementFromPoint(g,v),_=x?.classList.contains(`${o}-flow__handle`)?x:m,w={handleDomNode:_,isValid:!1,connection:null,toHandle:null};if(_){const S=iJ(void 0,_),E=_.getAttribute("data-nodeid"),A=_.getAttribute("data-handleid"),N=_.classList.contains("connectable"),P=_.classList.contains("connectableend");if(!E||!S)return w;const R={source:f?E:r,sourceHandle:f?A:i,target:f?r:E,targetHandle:f?i:A};w.connection=R;const k=N&&P&&(n===Cy.Strict?f&&S==="source"||!f&&S==="target":E!==r||A!==i);w.isValid=k&&u(R),w.toHandle=rJ(E,S,A,h,n,!0)}return w}const sR={onPointerDown:Pje,isValid:sJ};function Nje({domNode:t,panZoom:e,getTransform:n,getViewScale:r}){const i=tl(t);function a({translateExtent:o,width:c,height:u,zoomStep:h=1,pannable:f=!0,zoomable:m=!0,inversePan:g=!1}){const v=E=>{if(E.sourceEvent.type!=="wheel"||!e)return;const A=n(),N=E.sourceEvent.ctrlKey&&$_()?10:1,P=-E.sourceEvent.deltaY*(E.sourceEvent.deltaMode===1?.05:E.sourceEvent.deltaMode?1:.002)*h,R=A[2]*Math.pow(2,P*N);e.scaleTo(R)};let x=[0,0];const _=E=>{(E.sourceEvent.type==="mousedown"||E.sourceEvent.type==="touchstart")&&(x=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY])},w=E=>{const A=n();if(E.sourceEvent.type!=="mousemove"&&E.sourceEvent.type!=="touchmove"||!e)return;const N=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY],P=[N[0]-x[0],N[1]-x[1]];x=N;const R=r()*Math.max(A[2],Math.log(A[2]))*(g?-1:1),D={x:A[0]-P[0]*R,y:A[1]-P[1]*R},k=[[0,0],[c,u]];e.setViewportConstrained({x:D.x,y:D.y,zoom:A[2]},k,o)},S=IZ().on("start",_).on("zoom",f?w:null).on("zoom.wheel",m?v:null);i.call(S,{})}function s(){i.on("zoom",null)}return{update:a,destroy:s,pointer:Pc}}const BT=t=>({x:t.x,y:t.y,zoom:t.k}),tP=({x:t,y:e,zoom:n})=>LT.translate(t,e).scale(n),Gv=(t,e)=>t.target.closest(`.${e}`),oJ=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),Dje=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,nP=(t,e=0,n=Dje,r=()=>{})=>{const i=typeof e=="number"&&e>0;return i||r(),i?t.transition().duration(e).ease(n).on("end",r):t},lJ=t=>{const e=t.ctrlKey&&$_()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function kje({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:a,zoomOnPinch:s,onPanZoomStart:o,onPanZoom:c,onPanZoomEnd:u}){return h=>{if(Gv(h,e))return h.ctrlKey&&h.preventDefault(),!1;h.preventDefault(),h.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(h.ctrlKey&&s){const _=Pc(h),w=lJ(h),S=f*Math.pow(2,w);r.scaleTo(n,S,_,h);return}const m=h.deltaMode===1?20:1;let g=i===Xm.Vertical?0:h.deltaX*m,v=i===Xm.Horizontal?0:h.deltaY*m;!$_()&&h.shiftKey&&i!==Xm.Vertical&&(g=h.deltaY*m,v=0),r.translateBy(n,-(g/f)*a,-(v/f)*a,{internal:!0});const x=BT(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(c?.(h,x),t.panScrollTimeout=setTimeout(()=>{u?.(h,x),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,o?.(h,x))}}function Rje({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(r,i){const a=r.type==="wheel",s=!e&&a&&!r.ctrlKey,o=Gv(r,t);if(r.ctrlKey&&a&&o&&r.preventDefault(),s||o)return null;r.preventDefault(),n.call(this,r,i)}}function Ije({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=BT(r.transform);t.mouseButton=r.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=i,r.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(r.sourceEvent,i)}}function $je({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return a=>{t.usedRightMouseButton=!!(n&&oJ(e,t.mouseButton??0)),a.sourceEvent?.sync||r([a.transform.x,a.transform.y,a.transform.k]),i&&!a.sourceEvent?.internal&&i?.(a.sourceEvent,BT(a.transform))}}function jje({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:a}){return s=>{if(!s.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,a&&oJ(e,t.mouseButton??0)&&!t.usedRightMouseButton&&s.sourceEvent&&a(s.sourceEvent),t.usedRightMouseButton=!1,r(!1),i)){const o=BT(s.transform);t.prevViewport=o,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{i?.(s.sourceEvent,o)},n?150:0)}}}function Lje({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:a,userSelectionActive:s,noWheelClassName:o,noPanClassName:c,lib:u,connectionInProgress:h}){return f=>{const m=t||e,g=n&&f.ctrlKey,v=f.type==="wheel";if(f.button===1&&f.type==="mousedown"&&(Gv(f,`${u}-flow__node`)||Gv(f,`${u}-flow__edge`)))return!0;if(!r&&!m&&!i&&!a&&!n||s||h&&!v||Gv(f,o)&&v||Gv(f,c)&&(!v||i&&v&&!t)||!n&&f.ctrlKey&&v)return!1;if(!n&&f.type==="touchstart"&&f.touches?.length>1)return f.preventDefault(),!1;if(!m&&!i&&!g&&v||!r&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(r)&&!r.includes(f.button)&&f.type==="mousedown")return!1;const x=Array.isArray(r)&&r.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||v)&&x}}function Oje({domNode:t,minZoom:e,maxZoom:n,translateExtent:r,viewport:i,onPanZoom:a,onPanZoomStart:s,onPanZoomEnd:o,onDraggingChange:c}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=t.getBoundingClientRect(),f=IZ().scaleExtent([e,n]).translateExtent(r),m=tl(t).call(f);S({x:i.x,y:i.y,zoom:My(i.zoom,e,n)},[[0,0],[h.width,h.height]],r);const g=m.on("wheel.zoom"),v=m.on("dblclick.zoom");f.wheelDelta(lJ);function x($,B){return m?new Promise(q=>{f?.interpolate(B?.interpolate==="linear"?V1:E3).transform(nP(m,B?.duration,B?.ease,()=>q(!0)),$)}):Promise.resolve(!1)}function _({noWheelClassName:$,noPanClassName:B,onPaneContextMenu:q,userSelectionActive:U,panOnScroll:J,panOnDrag:O,panOnScrollMode:z,panOnScrollSpeed:V,preventScrolling:H,zoomOnPinch:ee,zoomOnScroll:Y,zoomOnDoubleClick:Z,zoomActivationKeyPressed:K,lib:X,onTransformChange:ne,connectionInProgress:G,paneClickDistance:te,selectionOnDrag:ae}){U&&!u.isZoomingOrPanning&&w();const pe=J&&!K&&!U;f.clickDistance(ae?1/0:!$c(te)||te<0?0:te);const ye=pe?kje({zoomPanValues:u,noWheelClassName:$,d3Selection:m,d3Zoom:f,panOnScrollMode:z,panOnScrollSpeed:V,zoomOnPinch:ee,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:o}):Rje({noWheelClassName:$,preventScrolling:H,d3ZoomHandler:g});if(m.on("wheel.zoom",ye,{passive:!1}),!U){const fe=Ije({zoomPanValues:u,onDraggingChange:c,onPanZoomStart:s});f.on("start",fe);const ge=$je({zoomPanValues:u,panOnDrag:O,onPaneContextMenu:!!q,onPanZoom:a,onTransformChange:ne});f.on("zoom",ge);const be=jje({zoomPanValues:u,panOnDrag:O,panOnScroll:J,onPaneContextMenu:q,onPanZoomEnd:o,onDraggingChange:c});f.on("end",be)}const me=Lje({zoomActivationKeyPressed:K,panOnDrag:O,zoomOnScroll:Y,panOnScroll:J,zoomOnDoubleClick:Z,zoomOnPinch:ee,userSelectionActive:U,noPanClassName:B,noWheelClassName:$,lib:X,connectionInProgress:G});f.filter(me),Z?m.on("dblclick.zoom",v):m.on("dblclick.zoom",null)}function w(){f.on("zoom",null)}async function S($,B,q){const U=tP($),J=f?.constrain()(U,B,q);return J&&await x(J),new Promise(O=>O(J))}async function E($,B){const q=tP($);return await x(q,B),new Promise(U=>U(q))}function A($){if(m){const B=tP($),q=m.property("__zoom");(q.k!==$.zoom||q.x!==$.x||q.y!==$.y)&&f?.transform(m,B,null,{sync:!0})}}function N(){const $=m?RZ(m.node()):{x:0,y:0,k:1};return{x:$.x,y:$.y,zoom:$.k}}function P($,B){return m?new Promise(q=>{f?.interpolate(B?.interpolate==="linear"?V1:E3).scaleTo(nP(m,B?.duration,B?.ease,()=>q(!0)),$)}):Promise.resolve(!1)}function R($,B){return m?new Promise(q=>{f?.interpolate(B?.interpolate==="linear"?V1:E3).scaleBy(nP(m,B?.duration,B?.ease,()=>q(!0)),$)}):Promise.resolve(!1)}function D($){f?.scaleExtent($)}function k($){f?.translateExtent($)}function L($){const B=!$c($)||$<0?0:$;f?.clickDistance(B)}return{update:_,destroy:w,setViewport:E,setViewportConstrained:S,getViewport:N,scaleTo:P,scaleBy:R,setScaleExtent:D,setTranslateExtent:k,syncViewport:A,setClickDistance:L}}var Ny;(function(t){t.Line="line",t.Handle="handle"})(Ny||(Ny={}));function Fje({width:t,prevWidth:e,height:n,prevHeight:r,affectsX:i,affectsY:a}){const s=t-e,o=n-r,c=[s>0?1:s<0?-1:0,o>0?1:o<0?-1:0];return s&&i&&(c[0]=c[0]*-1),o&&a&&(c[1]=c[1]*-1),c}function k8(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),r=t.includes("left"),i=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:r,affectsY:i}}function gf(t,e){return Math.max(0,e-t)}function vf(t,e){return Math.max(0,t-e)}function JC(t,e,n){return Math.max(0,e-t,t-n)}function R8(t,e){return t?!e:e}function Bje(t,e,n,r,i,a,s,o){let{affectsX:c,affectsY:u}=e;const{isHorizontal:h,isVertical:f}=e,m=h&&f,{xSnapped:g,ySnapped:v}=n,{minWidth:x,maxWidth:_,minHeight:w,maxHeight:S}=r,{x:E,y:A,width:N,height:P,aspectRatio:R}=t;let D=Math.floor(h?g-t.pointerX:0),k=Math.floor(f?v-t.pointerY:0);const L=N+(c?-D:D),$=P+(u?-k:k),B=-a[0]*N,q=-a[1]*P;let U=JC(L,x,_),J=JC($,w,S);if(s){let V=0,H=0;c&&D<0?V=gf(E+D+B,s[0][0]):!c&&D>0&&(V=vf(E+L+B,s[1][0])),u&&k<0?H=gf(A+k+q,s[0][1]):!u&&k>0&&(H=vf(A+$+q,s[1][1])),U=Math.max(U,V),J=Math.max(J,H)}if(o){let V=0,H=0;c&&D>0?V=vf(E+D,o[0][0]):!c&&D<0&&(V=gf(E+L,o[1][0])),u&&k>0?H=vf(A+k,o[0][1]):!u&&k<0&&(H=gf(A+$,o[1][1])),U=Math.max(U,V),J=Math.max(J,H)}if(i){if(h){const V=JC(L/R,w,S)*R;if(U=Math.max(U,V),s){let H=0;!c&&!u||c&&!u&&m?H=vf(A+q+L/R,s[1][1])*R:H=gf(A+q+(c?D:-D)/R,s[0][1])*R,U=Math.max(U,H)}if(o){let H=0;!c&&!u||c&&!u&&m?H=gf(A+L/R,o[1][1])*R:H=vf(A+(c?D:-D)/R,o[0][1])*R,U=Math.max(U,H)}}if(f){const V=JC($*R,x,_)/R;if(J=Math.max(J,V),s){let H=0;!c&&!u||u&&!c&&m?H=vf(E+$*R+B,s[1][0])/R:H=gf(E+(u?k:-k)*R+B,s[0][0])/R,J=Math.max(J,H)}if(o){let H=0;!c&&!u||u&&!c&&m?H=gf(E+$*R,o[1][0])/R:H=vf(E+(u?k:-k)*R,o[0][0])/R,J=Math.max(J,H)}}}k=k+(k<0?J:-J),D=D+(D<0?U:-U),i&&(m?L>$*R?k=(R8(c,u)?-D:D)/R:D=(R8(c,u)?-k:k)*R:h?(k=D/R,u=c):(D=k*R,c=u));const O=c?E+D:E,z=u?A+k:A;return{width:N+(c?-D:D),height:P+(u?-k:k),x:a[0]*D*(c?-1:1)+O,y:a[1]*k*(u?-1:1)+z}}const cJ={width:0,height:0,x:0,y:0},zje={...cJ,pointerX:0,pointerY:0,aspectRatio:1};function Uje(t){return[[0,0],[t.measured.width,t.measured.height]]}function Vje(t,e,n){const r=e.position.x+t.position.x,i=e.position.y+t.position.y,a=t.measured.width??0,s=t.measured.height??0,o=n[0]*a,c=n[1]*s;return[[r-o,i-c],[r+a-o,i+s-c]]}function Hje({domNode:t,nodeId:e,getStoreItems:n,onChange:r,onEnd:i}){const a=tl(t);let s={controlDirection:k8("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function o({controlPosition:u,boundaries:h,keepAspectRatio:f,resizeDirection:m,onResizeStart:g,onResize:v,onResizeEnd:x,shouldResize:_}){let w={...cJ},S={...zje};s={boundaries:h,resizeDirection:m,keepAspectRatio:f,controlDirection:k8(u)};let E,A=null,N=[],P,R,D,k=!1;const L=bZ().on("start",$=>{const{nodeLookup:B,transform:q,snapGrid:U,snapToGrid:J,nodeOrigin:O,paneDomNode:z}=n();if(E=B.get(e),!E)return;A=z?.getBoundingClientRect()??null;const{xSnapped:V,ySnapped:H}=H1($.sourceEvent,{transform:q,snapGrid:U,snapToGrid:J,containerBounds:A});w={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},S={...w,pointerX:V,pointerY:H,aspectRatio:w.width/w.height},P=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(P=B.get(E.parentId),R=P&&E.extent==="parent"?Uje(P):void 0),N=[],D=void 0;for(const[ee,Y]of B)if(Y.parentId===e&&(N.push({id:ee,position:{...Y.position},extent:Y.extent}),Y.extent==="parent"||Y.expandParent)){const Z=Vje(Y,E,Y.origin??O);D?D=[[Math.min(Z[0][0],D[0][0]),Math.min(Z[0][1],D[0][1])],[Math.max(Z[1][0],D[1][0]),Math.max(Z[1][1],D[1][1])]]:D=Z}g?.($,{...w})}).on("drag",$=>{const{transform:B,snapGrid:q,snapToGrid:U,nodeOrigin:J}=n(),O=H1($.sourceEvent,{transform:B,snapGrid:q,snapToGrid:U,containerBounds:A}),z=[];if(!E)return;const{x:V,y:H,width:ee,height:Y}=w,Z={},K=E.origin??J,{width:X,height:ne,x:G,y:te}=Bje(S,s.controlDirection,O,s.boundaries,s.keepAspectRatio,K,R,D),ae=X!==ee,pe=ne!==Y,ye=G!==V&&ae,me=te!==H&&pe;if(!ye&&!me&&!ae&&!pe)return;if((ye||me||K[0]===1||K[1]===1)&&(Z.x=ye?G:w.x,Z.y=me?te:w.y,w.x=Z.x,w.y=Z.y,N.length>0)){const oe=G-V,Le=te-H;for(const Ve of N)Ve.position={x:Ve.position.x-oe+K[0]*(X-ee),y:Ve.position.y-Le+K[1]*(ne-Y)},z.push(Ve)}if((ae||pe)&&(Z.width=ae&&(!s.resizeDirection||s.resizeDirection==="horizontal")?X:w.width,Z.height=pe&&(!s.resizeDirection||s.resizeDirection==="vertical")?ne:w.height,w.width=Z.width,w.height=Z.height),P&&E.expandParent){const oe=K[0]*(Z.width??0);Z.x&&Z.x<oe&&(w.x=oe,S.x=S.x-(Z.x-oe));const Le=K[1]*(Z.height??0);Z.y&&Z.y<Le&&(w.y=Le,S.y=S.y-(Z.y-Le))}const fe=Fje({width:w.width,prevWidth:ee,height:w.height,prevHeight:Y,affectsX:s.controlDirection.affectsX,affectsY:s.controlDirection.affectsY}),ge={...w,direction:fe};_?.($,ge)!==!1&&(k=!0,v?.($,ge),r(Z,z))}).on("end",$=>{k&&(x?.($,{...w}),i?.({...w}),k=!1)});a.call(L)}function c(){a.on(".drag",null)}return{update:o,destroy:c}}var rP={exports:{}},iP={};var I8;function Gje(){if(I8)return iP;I8=1;var t=O_(),e=nH();function n(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,c=t.useDebugValue;return iP.useSyncExternalStoreWithSelector=function(u,h,f,m,g){var v=a(null);if(v.current===null){var x={hasValue:!1,value:null};v.current=x}else x=v.current;v=o(function(){function w(P){if(!S){if(S=!0,E=P,P=m(P),g!==void 0&&x.hasValue){var R=x.value;if(g(R,P))return A=R}return A=P}if(R=A,r(E,P))return R;var D=m(P);return g!==void 0&&g(R,D)?(E=P,R):(E=P,A=D)}var S=!1,E,A,N=f===void 0?null:f;return[function(){return w(h())},N===null?void 0:function(){return w(N())}]},[h,f,m,g]);var _=i(u,v[0],v[1]);return s(function(){x.hasValue=!0,x.value=_},[_]),c(_),_},iP}var $8;function Wje(){return $8||($8=1,rP.exports=Gje()),rP.exports}var qje=Wje();const Kje=vg(qje),Xje={},j8=t=>{let e;const n=new Set,r=(h,f)=>{const m=typeof h=="function"?h(e):h;if(!Object.is(m,e)){const g=e;e=f??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(v=>v(e,g))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>u,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(Xje?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,i,c);return c},Yje=t=>t?j8(t):j8,{useDebugValue:Zje}=ve,{useSyncExternalStoreWithSelector:Jje}=Kje,Qje=t=>t;function uJ(t,e=Qje,n){const r=Jje(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Zje(r),r}const L8=(t,e)=>{const n=Yje(t),r=(i,a=e)=>uJ(n,i,a);return Object.assign(r,n),r},eLe=(t,e)=>t?L8(t,e):L8;function Si(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}const zT=T.createContext(null),tLe=zT.Provider,dJ=Vu.error001();function dr(t,e){const n=T.useContext(zT);if(n===null)throw new Error(dJ);return uJ(n,t,e)}function Ci(){const t=T.useContext(zT);if(t===null)throw new Error(dJ);return T.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const O8={display:"none"},nLe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},hJ="react-flow__node-desc",fJ="react-flow__edge-desc",rLe="react-flow__aria-live",iLe=t=>t.ariaLiveMessage,aLe=t=>t.ariaLabelConfig;function sLe({rfId:t}){const e=dr(iLe);return l.jsx("div",{id:`${rLe}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:nLe,children:e})}function oLe({rfId:t,disableKeyboardA11y:e}){const n=dr(aLe);return l.jsxs(l.Fragment,{children:[l.jsx("div",{id:`${hJ}-${t}`,style:O8,children:e?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),l.jsx("div",{id:`${fJ}-${t}`,style:O8,children:n["edge.a11yDescription.default"]}),!e&&l.jsx(sLe,{rfId:t})]})}const UT=T.forwardRef(({position:t="top-left",children:e,className:n,style:r,...i},a)=>{const s=`${t}`.split("-");return l.jsx("div",{className:da(["react-flow__panel",n,...s]),style:r,ref:a,...i,children:e})});UT.displayName="Panel";function lLe({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:l.jsx(UT,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:l.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const cLe=t=>{const e=[],n=[];for(const[,r]of t.nodeLookup)r.selected&&e.push(r.internals.userNode);for(const[,r]of t.edgeLookup)r.selected&&n.push(r);return{selectedNodes:e,selectedEdges:n}},QC=t=>t.id;function uLe(t,e){return Si(t.selectedNodes.map(QC),e.selectedNodes.map(QC))&&Si(t.selectedEdges.map(QC),e.selectedEdges.map(QC))}function dLe({onSelectionChange:t}){const e=Ci(),{selectedNodes:n,selectedEdges:r}=dr(cLe,uLe);return T.useEffect(()=>{const i={nodes:n,edges:r};t?.(i),e.getState().onSelectionChangeHandlers.forEach(a=>a(i))},[n,r,t]),null}const hLe=t=>!!t.onSelectionChangeHandlers;function fLe({onSelectionChange:t}){const e=dr(hLe);return t||e?l.jsx(dLe,{onSelectionChange:t}):null}const pJ=[0,0],pLe={x:0,y:0,zoom:1},mLe=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],F8=[...mLe,"rfId"],gLe=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),B8={translateExtent:k_,nodeOrigin:pJ,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function vLe(t){const{setNodes:e,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:a,setNodeExtent:s,reset:o,setDefaultNodesAndEdges:c}=dr(gLe,Si),u=Ci();T.useEffect(()=>(c(t.defaultNodes,t.defaultEdges),()=>{h.current=B8,o()}),[]);const h=T.useRef(B8);return T.useEffect(()=>{for(const f of F8){const m=t[f],g=h.current[f];m!==g&&(typeof t[f]>"u"||(f==="nodes"?e(m):f==="edges"?n(m):f==="minZoom"?r(m):f==="maxZoom"?i(m):f==="translateExtent"?a(m):f==="nodeExtent"?s(m):f==="ariaLabelConfig"?u.setState({ariaLabelConfig:nje(m)}):f==="fitView"?u.setState({fitViewQueued:m}):f==="fitViewOptions"?u.setState({fitViewOptions:m}):u.setState({[f]:m})))}h.current=t},F8.map(f=>t[f])),null}function z8(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function yLe(t){const[e,n]=T.useState(t==="system"?null:t);return T.useEffect(()=>{if(t!=="system"){n(t);return}const r=z8(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[t]),e!==null?e:z8()?.matches?"dark":"light"}const U8=typeof document<"u"?document:null;function j_(t=null,e={target:U8,actInsideInputWithModifier:!0}){const[n,r]=T.useState(!1),i=T.useRef(!1),a=T.useRef(new Set([])),[s,o]=T.useMemo(()=>{if(t!==null){const u=(Array.isArray(t)?t:[t]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),h=u.reduce((f,m)=>f.concat(...m),[]);return[u,h]}return[[],[]]},[t]);return T.useEffect(()=>{const c=e?.target??U8,u=e?.actInsideInputWithModifier??!0;if(t!==null){const h=g=>{if(i.current=g.ctrlKey||g.metaKey||g.shiftKey||g.altKey,(!i.current||i.current&&!u)&&qZ(g))return!1;const x=H8(g.code,o);if(a.current.add(g[x]),V8(s,a.current,!1)){const _=g.composedPath?.()?.[0]||g.target,w=_?.nodeName==="BUTTON"||_?.nodeName==="A";e.preventDefault!==!1&&(i.current||!w)&&g.preventDefault(),r(!0)}},f=g=>{const v=H8(g.code,o);V8(s,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(g[v]),g.key==="Meta"&&a.current.clear(),i.current=!1},m=()=>{a.current.clear(),r(!1)};return c?.addEventListener("keydown",h),c?.addEventListener("keyup",f),window.addEventListener("blur",m),window.addEventListener("contextmenu",m),()=>{c?.removeEventListener("keydown",h),c?.removeEventListener("keyup",f),window.removeEventListener("blur",m),window.removeEventListener("contextmenu",m)}}},[t,r]),n}function V8(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function H8(t,e){return e.includes(t)?"code":"key"}const bLe=()=>{const t=Ci();return T.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:r}=t.getState();return r?r.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[r,i,a],panZoom:s}=t.getState();return s?(await s.setViewport({x:e.x??r,y:e.y??i,zoom:e.zoom??a},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,r]=t.getState().transform;return{x:e,y:n,zoom:r}},setCenter:async(e,n,r)=>t.getState().setCenter(e,n,r),fitBounds:async(e,n)=>{const{width:r,height:i,minZoom:a,maxZoom:s,panZoom:o}=t.getState(),c=w$(e,r,i,a,s,n?.padding??.1);return o?(await o.setViewport(c,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={})=>{const{transform:r,snapGrid:i,snapToGrid:a,domNode:s}=t.getState();if(!s)return e;const{x:o,y:c}=s.getBoundingClientRect(),u={x:e.x-o,y:e.y-c},h=n.snapGrid??i,f=n.snapToGrid??a;return bw(u,r,f,h)},flowToScreenPosition:e=>{const{transform:n,domNode:r}=t.getState();if(!r)return e;const{x:i,y:a}=r.getBoundingClientRect(),s=A2(e,n);return{x:s.x+i,y:s.y+a}}}),[])};function mJ(t,e){const n=[],r=new Map,i=[];for(const a of t)if(a.type==="add"){i.push(a);continue}else if(a.type==="remove"||a.type==="replace")r.set(a.id,[a]);else{const s=r.get(a.id);s?s.push(a):r.set(a.id,[a])}for(const a of e){const s=r.get(a.id);if(!s){n.push(a);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const o={...a};for(const c of s)xLe(c,o);n.push(o)}return i.length&&i.forEach(a=>{a.index!==void 0?n.splice(a.index,0,{...a.item}):n.push({...a.item})}),n}function xLe(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(e.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(e.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function gJ(t,e){return mJ(t,e)}function vJ(t,e){return mJ(t,e)}function Mm(t,e){return{id:t,type:"select",selected:e}}function Wv(t,e=new Set,n=!1){const r=[];for(const[i,a]of t){const s=e.has(i);!(a.selected===void 0&&!s)&&a.selected!==s&&(n&&(a.selected=s),r.push(Mm(a.id,s)))}return r}function G8({items:t=[],lookup:e}){const n=[],r=new Map(t.map(i=>[i.id,i]));for(const[i,a]of t.entries()){const s=e.get(a.id),o=s?.internals?.userNode??s;o!==void 0&&o!==a&&n.push({id:a.id,item:a,type:"replace"}),o===void 0&&n.push({item:a,type:"add",index:i})}for(const[i]of e)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function W8(t){return{id:t.id,type:"remove"}}const q8=t=>W5e(t),_Le=t=>FZ(t);function yJ(t){return T.forwardRef(t)}const wLe=typeof window<"u"?T.useLayoutEffect:T.useEffect;function K8(t){const[e,n]=T.useState(BigInt(0)),[r]=T.useState(()=>SLe(()=>n(i=>i+BigInt(1))));return wLe(()=>{const i=r.get();i.length&&(t(i),r.reset())},[e]),r}function SLe(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const bJ=T.createContext(null);function ELe({children:t}){const e=Ci(),n=T.useCallback(o=>{const{nodes:c=[],setNodes:u,hasDefaultNodes:h,onNodesChange:f,nodeLookup:m,fitViewQueued:g,onNodesChangeMiddlewareMap:v}=e.getState();let x=c;for(const w of o)x=typeof w=="function"?w(x):w;let _=G8({items:x,lookup:m});for(const w of v.values())_=w(_);h&&u(x),_.length>0?f?.(_):g&&window.requestAnimationFrame(()=>{const{fitViewQueued:w,nodes:S,setNodes:E}=e.getState();w&&E(S)})},[]),r=K8(n),i=T.useCallback(o=>{const{edges:c=[],setEdges:u,hasDefaultEdges:h,onEdgesChange:f,edgeLookup:m}=e.getState();let g=c;for(const v of o)g=typeof v=="function"?v(g):v;h?u(g):f&&f(G8({items:g,lookup:m}))},[]),a=K8(i),s=T.useMemo(()=>({nodeQueue:r,edgeQueue:a}),[]);return l.jsx(bJ.Provider,{value:s,children:t})}function CLe(){const t=T.useContext(bJ);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const TLe=t=>!!t.panZoom;function VT(){const t=bLe(),e=Ci(),n=CLe(),r=dr(TLe),i=T.useMemo(()=>{const a=f=>e.getState().nodeLookup.get(f),s=f=>{n.nodeQueue.push(f)},o=f=>{n.edgeQueue.push(f)},c=f=>{const{nodeLookup:m,nodeOrigin:g}=e.getState(),v=q8(f)?f:m.get(f.id),x=v.parentId?GZ(v.position,v.measured,v.parentId,m,g):v.position,_={...v,position:x,width:v.measured?.width??v.width,height:v.measured?.height??v.height};return Ay(_)},u=(f,m,g={replace:!1})=>{s(v=>v.map(x=>{if(x.id===f){const _=typeof m=="function"?m(x):m;return g.replace&&q8(_)?_:{...x,..._}}return x}))},h=(f,m,g={replace:!1})=>{o(v=>v.map(x=>{if(x.id===f){const _=typeof m=="function"?m(x):m;return g.replace&&_Le(_)?_:{...x,..._}}return x}))};return{getNodes:()=>e.getState().nodes.map(f=>({...f})),getNode:f=>a(f)?.internals.userNode,getInternalNode:a,getEdges:()=>{const{edges:f=[]}=e.getState();return f.map(m=>({...m}))},getEdge:f=>e.getState().edgeLookup.get(f),setNodes:s,setEdges:o,addNodes:f=>{const m=Array.isArray(f)?f:[f];n.nodeQueue.push(g=>[...g,...m])},addEdges:f=>{const m=Array.isArray(f)?f:[f];n.edgeQueue.push(g=>[...g,...m])},toObject:()=>{const{nodes:f=[],edges:m=[],transform:g}=e.getState(),[v,x,_]=g;return{nodes:f.map(w=>({...w})),edges:m.map(w=>({...w})),viewport:{x:v,y:x,zoom:_}}},deleteElements:async({nodes:f=[],edges:m=[]})=>{const{nodes:g,edges:v,onNodesDelete:x,onEdgesDelete:_,triggerNodeChanges:w,triggerEdgeChanges:S,onDelete:E,onBeforeDelete:A}=e.getState(),{nodes:N,edges:P}=await Z5e({nodesToRemove:f,edgesToRemove:m,nodes:g,edges:v,onBeforeDelete:A}),R=P.length>0,D=N.length>0;if(R){const k=P.map(W8);_?.(P),S(k)}if(D){const k=N.map(W8);x?.(N),w(k)}return(D||R)&&E?.({nodes:N,edges:P}),{deletedNodes:N,deletedEdges:P}},getIntersectingNodes:(f,m=!0,g)=>{const v=_8(f),x=v?f:c(f),_=g!==void 0;return x?(g||e.getState().nodes).filter(w=>{const S=e.getState().nodeLookup.get(w.id);if(S&&!v&&(w.id===f.id||!S.internals.positionAbsolute))return!1;const E=Ay(_?w:S),A=I_(E,x);return m&&A>0||A>=E.width*E.height||A>=x.width*x.height}):[]},isNodeIntersecting:(f,m,g=!0)=>{const x=_8(f)?f:c(f);if(!x)return!1;const _=I_(x,m);return g&&_>0||_>=m.width*m.height||_>=x.width*x.height},updateNode:u,updateNodeData:(f,m,g={replace:!1})=>{u(f,v=>{const x=typeof m=="function"?m(v):m;return g.replace?{...v,data:x}:{...v,data:{...v.data,...x}}},g)},updateEdge:h,updateEdgeData:(f,m,g={replace:!1})=>{h(f,v=>{const x=typeof m=="function"?m(v):m;return g.replace?{...v,data:x}:{...v,data:{...v.data,...x}}},g)},getNodesBounds:f=>{const{nodeLookup:m,nodeOrigin:g}=e.getState();return q5e(f,{nodeLookup:m,nodeOrigin:g})},getHandleConnections:({type:f,id:m,nodeId:g})=>Array.from(e.getState().connectionLookup.get(`${g}-${f}${m?`-${m}`:""}`)?.values()??[]),getNodeConnections:({type:f,handleId:m,nodeId:g})=>Array.from(e.getState().connectionLookup.get(`${g}${f?m?`-${f}-${m}`:`-${f}`:""}`)?.values()??[]),fitView:async f=>{const m=e.getState().fitViewResolver??tje();return e.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:m}),n.nodeQueue.push(g=>[...g]),m.promise}}},[]);return T.useMemo(()=>({...i,...t,viewportInitialized:r}),[r])}const X8=t=>t.selected,MLe=typeof window<"u"?window:void 0;function ALe({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=Ci(),{deleteElements:r}=VT(),i=j_(t,{actInsideInputWithModifier:!1}),a=j_(e,{target:MLe});T.useEffect(()=>{if(i){const{edges:s,nodes:o}=n.getState();r({nodes:o.filter(X8),edges:s.filter(X8)}),n.setState({nodesSelectionActive:!1})}},[i]),T.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])}function PLe(t){const e=Ci();T.useEffect(()=>{const n=()=>{if(!t.current||!(t.current.checkVisibility?.()??!0))return!1;const r=S$(t.current);(r.height===0||r.width===0)&&e.getState().onError?.("004",Vu.error004()),e.setState({width:r.width||500,height:r.height||500})};if(t.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(t.current),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}}},[])}const HT={position:"absolute",width:"100%",height:"100%",top:0,left:0},NLe=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function DLe({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:a=Xm.Free,zoomOnDoubleClick:s=!0,panOnDrag:o=!0,defaultViewport:c,translateExtent:u,minZoom:h,maxZoom:f,zoomActivationKeyCode:m,preventScrolling:g=!0,children:v,noWheelClassName:x,noPanClassName:_,onViewportChange:w,isControlledViewport:S,paneClickDistance:E,selectionOnDrag:A}){const N=Ci(),P=T.useRef(null),{userSelectionActive:R,lib:D,connectionInProgress:k}=dr(NLe,Si),L=j_(m),$=T.useRef();PLe(P);const B=T.useCallback(q=>{w?.({x:q[0],y:q[1],zoom:q[2]}),S||N.setState({transform:q})},[w,S]);return T.useEffect(()=>{if(P.current){$.current=Oje({domNode:P.current,minZoom:h,maxZoom:f,translateExtent:u,viewport:c,onDraggingChange:O=>N.setState({paneDragging:O}),onPanZoomStart:(O,z)=>{const{onViewportChangeStart:V,onMoveStart:H}=N.getState();H?.(O,z),V?.(z)},onPanZoom:(O,z)=>{const{onViewportChange:V,onMove:H}=N.getState();H?.(O,z),V?.(z)},onPanZoomEnd:(O,z)=>{const{onViewportChangeEnd:V,onMoveEnd:H}=N.getState();H?.(O,z),V?.(z)}});const{x:q,y:U,zoom:J}=$.current.getViewport();return N.setState({panZoom:$.current,transform:[q,U,J],domNode:P.current.closest(".react-flow")}),()=>{$.current?.destroy()}}},[]),T.useEffect(()=>{$.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:a,zoomOnDoubleClick:s,panOnDrag:o,zoomActivationKeyPressed:L,preventScrolling:g,noPanClassName:_,userSelectionActive:R,noWheelClassName:x,lib:D,onTransformChange:B,connectionInProgress:k,selectionOnDrag:A,paneClickDistance:E})},[t,e,n,r,i,a,s,o,L,g,_,R,x,D,B,k,A,E]),l.jsx("div",{className:"react-flow__renderer",ref:P,style:HT,children:v})}const kLe=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function RLe(){const{userSelectionActive:t,userSelectionRect:e}=dr(kLe,Si);return t&&e?l.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const aP=(t,e)=>n=>{n.target===e.current&&t?.(n)},ILe=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function $Le({isSelecting:t,selectionKeyPressed:e,selectionMode:n=R_.Full,panOnDrag:r,paneClickDistance:i,selectionOnDrag:a,onSelectionStart:s,onSelectionEnd:o,onPaneClick:c,onPaneContextMenu:u,onPaneScroll:h,onPaneMouseEnter:f,onPaneMouseMove:m,onPaneMouseLeave:g,children:v}){const x=Ci(),{userSelectionActive:_,elementsSelectable:w,dragging:S,connectionInProgress:E}=dr(ILe,Si),A=w&&(t||_),N=T.useRef(null),P=T.useRef(),R=T.useRef(new Set),D=T.useRef(new Set),k=T.useRef(!1),L=V=>{if(k.current||E){k.current=!1;return}c?.(V),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},$=V=>{if(Array.isArray(r)&&r?.includes(2)){V.preventDefault();return}u?.(V)},B=h?V=>h(V):void 0,q=V=>{k.current&&(V.stopPropagation(),k.current=!1)},U=V=>{const{domNode:H}=x.getState();if(P.current=H?.getBoundingClientRect(),!P.current)return;const ee=V.target===N.current;if(!ee&&!!V.target.closest(".nokey")||!t||!(a&&ee||e)||V.button!==0||!V.isPrimary)return;V.target?.setPointerCapture?.(V.pointerId),k.current=!1;const{x:K,y:X}=jc(V.nativeEvent,P.current);x.setState({userSelectionRect:{width:0,height:0,startX:K,startY:X,x:K,y:X}}),ee||(V.stopPropagation(),V.preventDefault())},J=V=>{const{userSelectionRect:H,transform:ee,nodeLookup:Y,edgeLookup:Z,connectionLookup:K,triggerNodeChanges:X,triggerEdgeChanges:ne,defaultEdgeOptions:G,resetSelectedElements:te}=x.getState();if(!P.current||!H)return;const{x:ae,y:pe}=jc(V.nativeEvent,P.current),{startX:ye,startY:me}=H;if(!k.current){const Le=e?0:i;if(Math.hypot(ae-ye,pe-me)<=Le)return;te(),s?.(V)}k.current=!0;const fe={startX:ye,startY:me,x:ae<ye?ae:ye,y:pe<me?pe:me,width:Math.abs(ae-ye),height:Math.abs(pe-me)},ge=R.current,be=D.current;R.current=new Set(_$(Y,fe,ee,n===R_.Partial,!0).map(Le=>Le.id)),D.current=new Set;const oe=G?.selectable??!0;for(const Le of R.current){const Ve=K.get(Le);if(Ve)for(const{edgeId:Ze}of Ve.values()){const xe=Z.get(Ze);xe&&(xe.selectable??oe)&&D.current.add(Ze)}}if(!w8(ge,R.current)){const Le=Wv(Y,R.current,!0);X(Le)}if(!w8(be,D.current)){const Le=Wv(Z,D.current);ne(Le)}x.setState({userSelectionRect:fe,userSelectionActive:!0,nodesSelectionActive:!1})},O=V=>{V.button===0&&(V.target?.releasePointerCapture?.(V.pointerId),!_&&V.target===N.current&&x.getState().userSelectionRect&&L?.(V),x.setState({userSelectionActive:!1,userSelectionRect:null}),k.current&&(o?.(V),x.setState({nodesSelectionActive:R.current.size>0})))},z=r===!0||Array.isArray(r)&&r.includes(0);return l.jsxs("div",{className:da(["react-flow__pane",{draggable:z,dragging:S,selection:t}]),onClick:A?void 0:aP(L,N),onContextMenu:aP($,N),onWheel:aP(B,N),onPointerEnter:A?void 0:f,onPointerMove:A?J:m,onPointerUp:A?O:void 0,onPointerDownCapture:A?U:void 0,onClickCapture:A?q:void 0,onPointerLeave:g,ref:N,style:HT,children:[v,l.jsx(RLe,{})]})}function oR({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:s,nodeLookup:o,onError:c}=e.getState(),u=o.get(t);if(!u){c?.("012",Vu.error012(t));return}e.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(a({nodes:[u],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([t])}function xJ({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:a,nodeClickDistance:s}){const o=Ci(),[c,u]=T.useState(!1),h=T.useRef();return T.useEffect(()=>{h.current=Eje({getStoreItems:()=>o.getState(),onNodeMouseDown:f=>{oR({id:f,store:o,nodeRef:t})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),T.useEffect(()=>{if(e)h.current?.destroy();else if(t.current)return h.current?.update({noDragClassName:n,handleSelector:r,domNode:t.current,isSelectable:a,nodeId:i,nodeClickDistance:s}),()=>{h.current?.destroy()}},[n,r,e,a,t,i]),c}const jLe=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function _J(){const t=Ci();return T.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:a,nodesDraggable:s,onError:o,updateNodePositions:c,nodeLookup:u,nodeOrigin:h}=t.getState(),f=new Map,m=jLe(s),g=i?a[0]:5,v=i?a[1]:5,x=n.direction.x*g*n.factor,_=n.direction.y*v*n.factor;for(const[,w]of u){if(!m(w))continue;let S={x:w.internals.positionAbsolute.x+x,y:w.internals.positionAbsolute.y+_};i&&(S=yw(S,a));const{position:E,positionAbsolute:A}=BZ({nodeId:w.id,nextPosition:S,nodeLookup:u,nodeExtent:r,nodeOrigin:h,onError:o});w.position=E,w.internals.positionAbsolute=A,f.set(w.id,w)}c(f)},[])}const P$=T.createContext(null),LLe=P$.Provider;P$.Consumer;const wJ=()=>T.useContext(P$),OLe=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),FLe=(t,e,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:a,connection:s}=r,{fromHandle:o,toHandle:c,isValid:u}=s,h=c?.nodeId===t&&c?.id===e&&c?.type===n;return{connectingFrom:o?.nodeId===t&&o?.id===e&&o?.type===n,connectingTo:h,clickConnecting:i?.nodeId===t&&i?.id===e&&i?.type===n,isPossibleEndHandle:a===Cy.Strict?o?.type!==n:t!==o?.nodeId||e!==o?.id,connectionInProcess:!!o,clickConnectionInProcess:!!i,valid:h&&u}};function BLe({type:t="source",position:e=Jt.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:a=!0,id:s,onConnect:o,children:c,className:u,onMouseDown:h,onTouchStart:f,...m},g){const v=s||null,x=t==="target",_=Ci(),w=wJ(),{connectOnClick:S,noPanClassName:E,rfId:A}=dr(OLe,Si),{connectingFrom:N,connectingTo:P,clickConnecting:R,isPossibleEndHandle:D,connectionInProcess:k,clickConnectionInProcess:L,valid:$}=dr(FLe(w,v,t),Si);w||_.getState().onError?.("010",Vu.error010());const B=J=>{const{defaultEdgeOptions:O,onConnect:z,hasDefaultEdges:V}=_.getState(),H={...O,...J};if(V){const{edges:ee,setEdges:Y}=_.getState();Y(lje(H,ee))}z?.(H),o?.(H)},q=J=>{if(!w)return;const O=KZ(J.nativeEvent);if(i&&(O&&J.button===0||!O)){const z=_.getState();sR.onPointerDown(J.nativeEvent,{handleDomNode:J.currentTarget,autoPanOnConnect:z.autoPanOnConnect,connectionMode:z.connectionMode,connectionRadius:z.connectionRadius,domNode:z.domNode,nodeLookup:z.nodeLookup,lib:z.lib,isTarget:x,handleId:v,nodeId:w,flowId:z.rfId,panBy:z.panBy,cancelConnection:z.cancelConnection,onConnectStart:z.onConnectStart,onConnectEnd:z.onConnectEnd,updateConnection:z.updateConnection,onConnect:B,isValidConnection:n||z.isValidConnection,getTransform:()=>_.getState().transform,getFromHandle:()=>_.getState().connection.fromHandle,autoPanSpeed:z.autoPanSpeed,dragThreshold:z.connectionDragThreshold})}O?h?.(J):f?.(J)},U=J=>{const{onClickConnectStart:O,onClickConnectEnd:z,connectionClickStartHandle:V,connectionMode:H,isValidConnection:ee,lib:Y,rfId:Z,nodeLookup:K,connection:X}=_.getState();if(!w||!V&&!i)return;if(!V){O?.(J.nativeEvent,{nodeId:w,handleId:v,handleType:t}),_.setState({connectionClickStartHandle:{nodeId:w,type:t,id:v}});return}const ne=WZ(J.target),G=n||ee,{connection:te,isValid:ae}=sR.isValid(J.nativeEvent,{handle:{nodeId:w,id:v,type:t},connectionMode:H,fromNodeId:V.nodeId,fromHandleId:V.id||null,fromType:V.type,isValidConnection:G,flowId:Z,doc:ne,lib:Y,nodeLookup:K});ae&&te&&B(te);const pe=structuredClone(X);delete pe.inProgress,pe.toPosition=pe.toHandle?pe.toHandle.position:null,z?.(J,pe),_.setState({connectionClickStartHandle:null})};return l.jsx("div",{"data-handleid":v,"data-nodeid":w,"data-handlepos":e,"data-id":`${A}-${w}-${v}-${t}`,className:da(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",E,u,{source:!x,target:x,connectable:r,connectablestart:i,connectableend:a,clickconnecting:R,connectingfrom:N,connectingto:P,valid:$,connectionindicator:r&&(!k||D)&&(k||L?a:i)}]),onMouseDown:q,onTouchStart:q,onClick:S?U:void 0,ref:g,...m,children:c})}const th=T.memo(yJ(BLe));function zLe({data:t,isConnectable:e,sourcePosition:n=Jt.Bottom}){return l.jsxs(l.Fragment,{children:[t?.label,l.jsx(th,{type:"source",position:n,isConnectable:e})]})}function ULe({data:t,isConnectable:e,targetPosition:n=Jt.Top,sourcePosition:r=Jt.Bottom}){return l.jsxs(l.Fragment,{children:[l.jsx(th,{type:"target",position:n,isConnectable:e}),t?.label,l.jsx(th,{type:"source",position:r,isConnectable:e})]})}function VLe(){return null}function HLe({data:t,isConnectable:e,targetPosition:n=Jt.Top}){return l.jsxs(l.Fragment,{children:[l.jsx(th,{type:"target",position:n,isConnectable:e}),t?.label]})}const P2={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Y8={input:zLe,default:ULe,output:HLe,group:VLe};function GLe(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const WLe=t=>{const{width:e,height:n,x:r,y:i}=vw(t.nodeLookup,{filter:a=>!!a.selected});return{width:$c(e)?e:null,height:$c(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${r}px,${i}px)`}};function qLe({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=Ci(),{width:i,height:a,transformString:s,userSelectionActive:o}=dr(WLe,Si),c=_J(),u=T.useRef(null);if(T.useEffect(()=>{n||u.current?.focus({preventScroll:!0})},[n]),xJ({nodeRef:u}),o||!i||!a)return null;const h=t?m=>{const g=r.getState().nodes.filter(v=>v.selected);t(m,g)}:void 0,f=m=>{Object.prototype.hasOwnProperty.call(P2,m.key)&&(m.preventDefault(),c({direction:P2[m.key],factor:m.shiftKey?4:1}))};return l.jsx("div",{className:da(["react-flow__nodesselection","react-flow__container",e]),style:{transform:s},children:l.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:i,height:a}})})}const Z8=typeof window<"u"?window:void 0,KLe=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function SJ({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:s,paneClickDistance:o,deleteKeyCode:c,selectionKeyCode:u,selectionOnDrag:h,selectionMode:f,onSelectionStart:m,onSelectionEnd:g,multiSelectionKeyCode:v,panActivationKeyCode:x,zoomActivationKeyCode:_,elementsSelectable:w,zoomOnScroll:S,zoomOnPinch:E,panOnScroll:A,panOnScrollSpeed:N,panOnScrollMode:P,zoomOnDoubleClick:R,panOnDrag:D,defaultViewport:k,translateExtent:L,minZoom:$,maxZoom:B,preventScrolling:q,onSelectionContextMenu:U,noWheelClassName:J,noPanClassName:O,disableKeyboardA11y:z,onViewportChange:V,isControlledViewport:H}){const{nodesSelectionActive:ee,userSelectionActive:Y}=dr(KLe,Si),Z=j_(u,{target:Z8}),K=j_(x,{target:Z8}),X=K||D,ne=K||A,G=h&&X!==!0,te=Z||Y||G;return ALe({deleteKeyCode:c,multiSelectionKeyCode:v}),l.jsx(DLe,{onPaneContextMenu:a,elementsSelectable:w,zoomOnScroll:S,zoomOnPinch:E,panOnScroll:ne,panOnScrollSpeed:N,panOnScrollMode:P,zoomOnDoubleClick:R,panOnDrag:!Z&&X,defaultViewport:k,translateExtent:L,minZoom:$,maxZoom:B,zoomActivationKeyCode:_,preventScrolling:q,noWheelClassName:J,noPanClassName:O,onViewportChange:V,isControlledViewport:H,paneClickDistance:o,selectionOnDrag:G,children:l.jsxs($Le,{onSelectionStart:m,onSelectionEnd:g,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:s,panOnDrag:X,isSelecting:!!te,selectionMode:f,selectionKeyPressed:Z,paneClickDistance:o,selectionOnDrag:G,children:[t,ee&&l.jsx(qLe,{onSelectionContextMenu:U,noPanClassName:O,disableKeyboardA11y:z})]})})}SJ.displayName="FlowRenderer";const XLe=T.memo(SJ),YLe=t=>e=>t?_$(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function ZLe(t){return dr(T.useCallback(YLe(t),[t]),Si)}const JLe=t=>t.updateNodeInternals;function QLe(){const t=dr(JLe),[e]=T.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const a=i.target.getAttribute("data-id");r.set(a,{id:a,nodeElement:i.target,force:!0})}),t(r)}));return T.useEffect(()=>()=>{e?.disconnect()},[e]),e}function e6e({node:t,nodeType:e,hasDimensions:n,resizeObserver:r}){const i=Ci(),a=T.useRef(null),s=T.useRef(null),o=T.useRef(t.sourcePosition),c=T.useRef(t.targetPosition),u=T.useRef(e),h=n&&!!t.internals.handleBounds;return T.useEffect(()=>{a.current&&!t.hidden&&(!h||s.current!==a.current)&&(s.current&&r?.unobserve(s.current),r?.observe(a.current),s.current=a.current)},[h,t.hidden]),T.useEffect(()=>()=>{s.current&&(r?.unobserve(s.current),s.current=null)},[]),T.useEffect(()=>{if(a.current){const f=u.current!==e,m=o.current!==t.sourcePosition,g=c.current!==t.targetPosition;(f||m||g)&&(u.current=e,o.current=t.sourcePosition,c.current=t.targetPosition,i.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:a.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),a}function t6e({id:t,onClick:e,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:a,onDoubleClick:s,nodesDraggable:o,elementsSelectable:c,nodesConnectable:u,nodesFocusable:h,resizeObserver:f,noDragClassName:m,noPanClassName:g,disableKeyboardA11y:v,rfId:x,nodeTypes:_,nodeClickDistance:w,onError:S}){const{node:E,internals:A,isParent:N}=dr(ae=>{const pe=ae.nodeLookup.get(t),ye=ae.parentLookup.has(t);return{node:pe,internals:pe.internals,isParent:ye}},Si);let P=E.type||"default",R=_?.[P]||Y8[P];R===void 0&&(S?.("003",Vu.error003(P)),P="default",R=_?.default||Y8.default);const D=!!(E.draggable||o&&typeof E.draggable>"u"),k=!!(E.selectable||c&&typeof E.selectable>"u"),L=!!(E.connectable||u&&typeof E.connectable>"u"),$=!!(E.focusable||h&&typeof E.focusable>"u"),B=Ci(),q=HZ(E),U=e6e({node:E,nodeType:P,hasDimensions:q,resizeObserver:f}),J=xJ({nodeRef:U,disabled:E.hidden||!D,noDragClassName:m,handleSelector:E.dragHandle,nodeId:t,isSelectable:k,nodeClickDistance:w}),O=_J();if(E.hidden)return null;const z=ch(E),V=GLe(E),H=k||D||e||n||r||i,ee=n?ae=>n(ae,{...A.userNode}):void 0,Y=r?ae=>r(ae,{...A.userNode}):void 0,Z=i?ae=>i(ae,{...A.userNode}):void 0,K=a?ae=>a(ae,{...A.userNode}):void 0,X=s?ae=>s(ae,{...A.userNode}):void 0,ne=ae=>{const{selectNodesOnDrag:pe,nodeDragThreshold:ye}=B.getState();k&&(!pe||!D||ye>0)&&oR({id:t,store:B,nodeRef:U}),e&&e(ae,{...A.userNode})},G=ae=>{if(!(qZ(ae.nativeEvent)||v)){if($Z.includes(ae.key)&&k){const pe=ae.key==="Escape";oR({id:t,store:B,unselect:pe,nodeRef:U})}else if(D&&E.selected&&Object.prototype.hasOwnProperty.call(P2,ae.key)){ae.preventDefault();const{ariaLabelConfig:pe}=B.getState();B.setState({ariaLiveMessage:pe["node.a11yDescription.ariaLiveMessage"]({direction:ae.key.replace("Arrow","").toLowerCase(),x:~~A.positionAbsolute.x,y:~~A.positionAbsolute.y})}),O({direction:P2[ae.key],factor:ae.shiftKey?4:1})}}},te=()=>{if(v||!U.current?.matches(":focus-visible"))return;const{transform:ae,width:pe,height:ye,autoPanOnNodeFocus:me,setCenter:fe}=B.getState();if(!me)return;_$(new Map([[t,E]]),{x:0,y:0,width:pe,height:ye},ae,!0).length>0||fe(E.position.x+z.width/2,E.position.y+z.height/2,{zoom:ae[2]})};return l.jsx("div",{className:da(["react-flow__node",`react-flow__node-${P}`,{[g]:D},E.className,{selected:E.selected,selectable:k,parent:N,draggable:D,dragging:J}]),ref:U,style:{zIndex:A.z,transform:`translate(${A.positionAbsolute.x}px,${A.positionAbsolute.y}px)`,pointerEvents:H?"all":"none",visibility:q?"visible":"hidden",...E.style,...V},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:ee,onMouseMove:Y,onMouseLeave:Z,onContextMenu:K,onClick:ne,onDoubleClick:X,onKeyDown:$?G:void 0,tabIndex:$?0:void 0,onFocus:$?te:void 0,role:E.ariaRole??($?"group":void 0),"aria-roledescription":"node","aria-describedby":v?void 0:`${hJ}-${x}`,"aria-label":E.ariaLabel,...E.domAttributes,children:l.jsx(LLe,{value:t,children:l.jsx(R,{id:t,data:E.data,type:P,positionAbsoluteX:A.positionAbsolute.x,positionAbsoluteY:A.positionAbsolute.y,selected:E.selected??!1,selectable:k,draggable:D,deletable:E.deletable??!0,isConnectable:L,sourcePosition:E.sourcePosition,targetPosition:E.targetPosition,dragging:J,dragHandle:E.dragHandle,zIndex:A.z,parentId:E.parentId,...z})})})}var n6e=T.memo(t6e);const r6e=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function EJ(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:a}=dr(r6e,Si),s=ZLe(t.onlyRenderVisibleElements),o=QLe();return l.jsx("div",{className:"react-flow__nodes",style:HT,children:s.map(c=>l.jsx(n6e,{id:c,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:o,nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:t.nodeClickDistance,onError:a},c))})}EJ.displayName="NodeRenderer";const i6e=T.memo(EJ);function a6e(t){return dr(T.useCallback(n=>{if(!t)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const a=n.nodeLookup.get(i.source),s=n.nodeLookup.get(i.target);a&&s&&aje({sourceNode:a,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[t]),Si)}const s6e=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t}};return l.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},o6e=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t,fill:t}};return l.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},J8={[Ty.Arrow]:s6e,[Ty.ArrowClosed]:o6e};function l6e(t){const e=Ci();return T.useMemo(()=>Object.prototype.hasOwnProperty.call(J8,t)?J8[t]:(e.getState().onError?.("009",Vu.error009(t)),null),[t])}const c6e=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:a="strokeWidth",strokeWidth:s,orient:o="auto-start-reverse"})=>{const c=l6e(e);return c?l.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:o,refX:"0",refY:"0",children:l.jsx(c,{color:n,strokeWidth:s})}):null},CJ=({defaultColor:t,rfId:e})=>{const n=dr(a=>a.edges),r=dr(a=>a.defaultEdgeOptions),i=T.useMemo(()=>fje(n,{id:e,defaultColor:t,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,e,t]);return i.length?l.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:l.jsx("defs",{children:i.map(a=>l.jsx(c6e,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};CJ.displayName="MarkerDefinitions";var u6e=T.memo(CJ);function TJ({x:t,y:e,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:a,labelBgPadding:s=[2,4],labelBgBorderRadius:o=2,children:c,className:u,...h}){const[f,m]=T.useState({x:1,y:0,width:0,height:0}),g=da(["react-flow__edge-textwrapper",u]),v=T.useRef(null);return T.useEffect(()=>{if(v.current){const x=v.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),n?l.jsxs("g",{transform:`translate(${t-f.width/2} ${e-f.height/2})`,className:g,visibility:f.width?"visible":"hidden",...h,children:[i&&l.jsx("rect",{width:f.width+2*s[0],x:-s[0],y:-s[1],height:f.height+2*s[1],className:"react-flow__edge-textbg",style:a,rx:o,ry:o}),l.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:v,style:r,children:n}),c]}):null}TJ.displayName="EdgeText";const d6e=T.memo(TJ);function GT({path:t,labelX:e,labelY:n,label:r,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:o,labelBgBorderRadius:c,interactionWidth:u=20,...h}){return l.jsxs(l.Fragment,{children:[l.jsx("path",{...h,d:t,fill:"none",className:da(["react-flow__edge-path",h.className])}),u?l.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}):null,r&&$c(e)&&$c(n)?l.jsx(d6e,{x:e,y:n,label:r,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:o,labelBgBorderRadius:c}):null]})}function Q8({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===Jt.Left||t===Jt.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function MJ({sourceX:t,sourceY:e,sourcePosition:n=Jt.Bottom,targetX:r,targetY:i,targetPosition:a=Jt.Top}){const[s,o]=Q8({pos:n,x1:t,y1:e,x2:r,y2:i}),[c,u]=Q8({pos:a,x1:r,y1:i,x2:t,y2:e}),[h,f,m,g]=XZ({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:s,sourceControlY:o,targetControlX:c,targetControlY:u});return[`M${t},${e} C${s},${o} ${c},${u} ${r},${i}`,h,f,m,g]}function AJ(t){return T.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:a,sourcePosition:s,targetPosition:o,label:c,labelStyle:u,labelShowBg:h,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:x,markerStart:_,interactionWidth:w})=>{const[S,E,A]=MJ({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:o}),N=t.isInternal?void 0:e;return l.jsx(GT,{id:N,path:S,labelX:E,labelY:A,label:c,labelStyle:u,labelShowBg:h,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:x,markerStart:_,interactionWidth:w})})}const h6e=AJ({isInternal:!1}),PJ=AJ({isInternal:!0});h6e.displayName="SimpleBezierEdge";PJ.displayName="SimpleBezierEdgeInternal";function NJ(t){return T.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:a,label:s,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:f,style:m,sourcePosition:g=Jt.Bottom,targetPosition:v=Jt.Top,markerEnd:x,markerStart:_,pathOptions:w,interactionWidth:S})=>{const[E,A,N]=rR({sourceX:n,sourceY:r,sourcePosition:g,targetX:i,targetY:a,targetPosition:v,borderRadius:w?.borderRadius,offset:w?.offset,stepPosition:w?.stepPosition}),P=t.isInternal?void 0:e;return l.jsx(GT,{id:P,path:E,labelX:A,labelY:N,label:s,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:f,style:m,markerEnd:x,markerStart:_,interactionWidth:S})})}const DJ=NJ({isInternal:!1}),kJ=NJ({isInternal:!0});DJ.displayName="SmoothStepEdge";kJ.displayName="SmoothStepEdgeInternal";function RJ(t){return T.memo(({id:e,...n})=>{const r=t.isInternal?void 0:e;return l.jsx(DJ,{...n,id:r,pathOptions:T.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const f6e=RJ({isInternal:!1}),IJ=RJ({isInternal:!0});f6e.displayName="StepEdge";IJ.displayName="StepEdgeInternal";function $J(t){return T.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:a,label:s,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:f,style:m,markerEnd:g,markerStart:v,interactionWidth:x})=>{const[_,w,S]=JZ({sourceX:n,sourceY:r,targetX:i,targetY:a}),E=t.isInternal?void 0:e;return l.jsx(GT,{id:E,path:_,labelX:w,labelY:S,label:s,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:f,style:m,markerEnd:g,markerStart:v,interactionWidth:x})})}const p6e=$J({isInternal:!1}),jJ=$J({isInternal:!0});p6e.displayName="StraightEdge";jJ.displayName="StraightEdgeInternal";function LJ(t){return T.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:a,sourcePosition:s=Jt.Bottom,targetPosition:o=Jt.Top,label:c,labelStyle:u,labelShowBg:h,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:x,markerStart:_,pathOptions:w,interactionWidth:S})=>{const[E,A,N]=YZ({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:o,curvature:w?.curvature}),P=t.isInternal?void 0:e;return l.jsx(GT,{id:P,path:E,labelX:A,labelY:N,label:c,labelStyle:u,labelShowBg:h,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:x,markerStart:_,interactionWidth:S})})}const m6e=LJ({isInternal:!1}),OJ=LJ({isInternal:!0});m6e.displayName="BezierEdge";OJ.displayName="BezierEdgeInternal";const eF={default:OJ,straight:jJ,step:IJ,smoothstep:kJ,simplebezier:PJ},tF={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},g6e=(t,e,n)=>n===Jt.Left?t-e:n===Jt.Right?t+e:t,v6e=(t,e,n)=>n===Jt.Top?t-e:n===Jt.Bottom?t+e:t,nF="react-flow__edgeupdater";function rF({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:a,onMouseOut:s,type:o}){return l.jsx("circle",{onMouseDown:i,onMouseEnter:a,onMouseOut:s,className:da([nF,`${nF}-${o}`]),cx:g6e(e,r,t),cy:v6e(n,r,t),r,stroke:"transparent",fill:"transparent"})}function y6e({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:r,sourceY:i,targetX:a,targetY:s,sourcePosition:o,targetPosition:c,onReconnect:u,onReconnectStart:h,onReconnectEnd:f,setReconnecting:m,setUpdateHover:g}){const v=Ci(),x=(A,N)=>{if(A.button!==0)return;const{autoPanOnConnect:P,domNode:R,isValidConnection:D,connectionMode:k,connectionRadius:L,lib:$,onConnectStart:B,onConnectEnd:q,cancelConnection:U,nodeLookup:J,rfId:O,panBy:z,updateConnection:V}=v.getState(),H=N.type==="target",ee=(K,X)=>{m(!1),f?.(K,n,N.type,X)},Y=K=>u?.(n,K),Z=(K,X)=>{m(!0),h?.(A,n,N.type),B?.(K,X)};sR.onPointerDown(A.nativeEvent,{autoPanOnConnect:P,connectionMode:k,connectionRadius:L,domNode:R,handleId:N.id,nodeId:N.nodeId,nodeLookup:J,isTarget:H,edgeUpdaterType:N.type,lib:$,flowId:O,cancelConnection:U,panBy:z,isValidConnection:D,onConnect:Y,onConnectStart:Z,onConnectEnd:q,onReconnectEnd:ee,updateConnection:V,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,dragThreshold:v.getState().connectionDragThreshold,handleDomNode:A.currentTarget})},_=A=>x(A,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),w=A=>x(A,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),S=()=>g(!0),E=()=>g(!1);return l.jsxs(l.Fragment,{children:[(t===!0||t==="source")&&l.jsx(rF,{position:o,centerX:r,centerY:i,radius:e,onMouseDown:_,onMouseEnter:S,onMouseOut:E,type:"source"}),(t===!0||t==="target")&&l.jsx(rF,{position:c,centerX:a,centerY:s,radius:e,onMouseDown:w,onMouseEnter:S,onMouseOut:E,type:"target"})]})}function b6e({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:a,onContextMenu:s,onMouseEnter:o,onMouseMove:c,onMouseLeave:u,reconnectRadius:h,onReconnect:f,onReconnectStart:m,onReconnectEnd:g,rfId:v,edgeTypes:x,noPanClassName:_,onError:w,disableKeyboardA11y:S}){let E=dr(fe=>fe.edgeLookup.get(t));const A=dr(fe=>fe.defaultEdgeOptions);E=A?{...A,...E}:E;let N=E.type||"default",P=x?.[N]||eF[N];P===void 0&&(w?.("011",Vu.error011(N)),N="default",P=x?.default||eF.default);const R=!!(E.focusable||e&&typeof E.focusable>"u"),D=typeof f<"u"&&(E.reconnectable||n&&typeof E.reconnectable>"u"),k=!!(E.selectable||r&&typeof E.selectable>"u"),L=T.useRef(null),[$,B]=T.useState(!1),[q,U]=T.useState(!1),J=Ci(),{zIndex:O,sourceX:z,sourceY:V,targetX:H,targetY:ee,sourcePosition:Y,targetPosition:Z}=dr(T.useCallback(fe=>{const ge=fe.nodeLookup.get(E.source),be=fe.nodeLookup.get(E.target);if(!ge||!be)return{zIndex:E.zIndex,...tF};const oe=hje({id:t,sourceNode:ge,targetNode:be,sourceHandle:E.sourceHandle||null,targetHandle:E.targetHandle||null,connectionMode:fe.connectionMode,onError:w});return{zIndex:ije({selected:E.selected,zIndex:E.zIndex,sourceNode:ge,targetNode:be,elevateOnSelect:fe.elevateEdgesOnSelect,zIndexMode:fe.zIndexMode}),...oe||tF}},[E.source,E.target,E.sourceHandle,E.targetHandle,E.selected,E.zIndex]),Si),K=T.useMemo(()=>E.markerStart?`url('#${iR(E.markerStart,v)}')`:void 0,[E.markerStart,v]),X=T.useMemo(()=>E.markerEnd?`url('#${iR(E.markerEnd,v)}')`:void 0,[E.markerEnd,v]);if(E.hidden||z===null||V===null||H===null||ee===null)return null;const ne=fe=>{const{addSelectedEdges:ge,unselectNodesAndEdges:be,multiSelectionActive:oe}=J.getState();k&&(J.setState({nodesSelectionActive:!1}),E.selected&&oe?(be({nodes:[],edges:[E]}),L.current?.blur()):ge([t])),i&&i(fe,E)},G=a?fe=>{a(fe,{...E})}:void 0,te=s?fe=>{s(fe,{...E})}:void 0,ae=o?fe=>{o(fe,{...E})}:void 0,pe=c?fe=>{c(fe,{...E})}:void 0,ye=u?fe=>{u(fe,{...E})}:void 0,me=fe=>{if(!S&&$Z.includes(fe.key)&&k){const{unselectNodesAndEdges:ge,addSelectedEdges:be}=J.getState();fe.key==="Escape"?(L.current?.blur(),ge({edges:[E]})):be([t])}};return l.jsx("svg",{style:{zIndex:O},children:l.jsxs("g",{className:da(["react-flow__edge",`react-flow__edge-${N}`,E.className,_,{selected:E.selected,animated:E.animated,inactive:!k&&!i,updating:$,selectable:k}]),onClick:ne,onDoubleClick:G,onContextMenu:te,onMouseEnter:ae,onMouseMove:pe,onMouseLeave:ye,onKeyDown:R?me:void 0,tabIndex:R?0:void 0,role:E.ariaRole??(R?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":E.ariaLabel===null?void 0:E.ariaLabel||`Edge from ${E.source} to ${E.target}`,"aria-describedby":R?`${fJ}-${v}`:void 0,ref:L,...E.domAttributes,children:[!q&&l.jsx(P,{id:t,source:E.source,target:E.target,type:E.type,selected:E.selected,animated:E.animated,selectable:k,deletable:E.deletable??!0,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,sourceX:z,sourceY:V,targetX:H,targetY:ee,sourcePosition:Y,targetPosition:Z,data:E.data,style:E.style,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerStart:K,markerEnd:X,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth}),D&&l.jsx(y6e,{edge:E,isReconnectable:D,reconnectRadius:h,onReconnect:f,onReconnectStart:m,onReconnectEnd:g,sourceX:z,sourceY:V,targetX:H,targetY:ee,sourcePosition:Y,targetPosition:Z,setUpdateHover:B,setReconnecting:U})]})})}var x6e=T.memo(b6e);const _6e=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function FJ({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:a,onEdgeContextMenu:s,onEdgeMouseEnter:o,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:h,reconnectRadius:f,onEdgeDoubleClick:m,onReconnectStart:g,onReconnectEnd:v,disableKeyboardA11y:x}){const{edgesFocusable:_,edgesReconnectable:w,elementsSelectable:S,onError:E}=dr(_6e,Si),A=a6e(e);return l.jsxs("div",{className:"react-flow__edges",children:[l.jsx(u6e,{defaultColor:t,rfId:n}),A.map(N=>l.jsx(x6e,{id:N,edgesFocusable:_,edgesReconnectable:w,elementsSelectable:S,noPanClassName:i,onReconnect:a,onContextMenu:s,onMouseEnter:o,onMouseMove:c,onMouseLeave:u,onClick:h,reconnectRadius:f,onDoubleClick:m,onReconnectStart:g,onReconnectEnd:v,rfId:n,onError:E,edgeTypes:r,disableKeyboardA11y:x},N))]})}FJ.displayName="EdgeRenderer";const w6e=T.memo(FJ),S6e=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function E6e({children:t}){const e=dr(S6e);return l.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function C6e(t){const e=VT(),n=T.useRef(!1);T.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const T6e=t=>t.panZoom?.syncViewport;function M6e(t){const e=dr(T6e),n=Ci();return T.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function A6e(t){return t.connection.inProgress?{...t.connection,to:bw(t.connection.to,t.transform)}:{...t.connection}}function P6e(t){return A6e}function N6e(t){const e=P6e();return dr(e,Si)}const D6e=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function k6e({containerStyle:t,style:e,type:n,component:r}){const{nodesConnectable:i,width:a,height:s,isValid:o,inProgress:c}=dr(D6e,Si);return!(a&&i&&c)?null:l.jsx("svg",{style:t,width:a,height:s,className:"react-flow__connectionline react-flow__container",children:l.jsx("g",{className:da(["react-flow__connection",OZ(o)]),children:l.jsx(BJ,{style:e,type:n,CustomComponent:r,isValid:o})})})}const BJ=({style:t,type:e=Sf.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:a,fromNode:s,fromHandle:o,fromPosition:c,to:u,toNode:h,toHandle:f,toPosition:m,pointer:g}=N6e();if(!i)return;if(n)return l.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:s,fromHandle:o,fromX:a.x,fromY:a.y,toX:u.x,toY:u.y,fromPosition:c,toPosition:m,connectionStatus:OZ(r),toNode:h,toHandle:f,pointer:g});let v="";const x={sourceX:a.x,sourceY:a.y,sourcePosition:c,targetX:u.x,targetY:u.y,targetPosition:m};switch(e){case Sf.Bezier:[v]=YZ(x);break;case Sf.SimpleBezier:[v]=MJ(x);break;case Sf.Step:[v]=rR({...x,borderRadius:0});break;case Sf.SmoothStep:[v]=rR(x);break;default:[v]=JZ(x)}return l.jsx("path",{d:v,fill:"none",className:"react-flow__connection-path",style:t})};BJ.displayName="ConnectionLine";const R6e={};function iF(t=R6e){T.useRef(t),Ci(),T.useEffect(()=>{},[t])}function I6e(){Ci(),T.useRef(!1),T.useEffect(()=>{},[])}function zJ({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:a,onEdgeDoubleClick:s,onNodeMouseEnter:o,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:h,onSelectionContextMenu:f,onSelectionStart:m,onSelectionEnd:g,connectionLineType:v,connectionLineStyle:x,connectionLineComponent:_,connectionLineContainerStyle:w,selectionKeyCode:S,selectionOnDrag:E,selectionMode:A,multiSelectionKeyCode:N,panActivationKeyCode:P,zoomActivationKeyCode:R,deleteKeyCode:D,onlyRenderVisibleElements:k,elementsSelectable:L,defaultViewport:$,translateExtent:B,minZoom:q,maxZoom:U,preventScrolling:J,defaultMarkerColor:O,zoomOnScroll:z,zoomOnPinch:V,panOnScroll:H,panOnScrollSpeed:ee,panOnScrollMode:Y,zoomOnDoubleClick:Z,panOnDrag:K,onPaneClick:X,onPaneMouseEnter:ne,onPaneMouseMove:G,onPaneMouseLeave:te,onPaneScroll:ae,onPaneContextMenu:pe,paneClickDistance:ye,nodeClickDistance:me,onEdgeContextMenu:fe,onEdgeMouseEnter:ge,onEdgeMouseMove:be,onEdgeMouseLeave:oe,reconnectRadius:Le,onReconnect:Ve,onReconnectStart:Ze,onReconnectEnd:xe,noDragClassName:ht,noWheelClassName:Fe,noPanClassName:et,disableKeyboardA11y:de,nodeExtent:re,rfId:Ce,viewport:ke,onViewportChange:De}){return iF(t),iF(e),I6e(),C6e(n),M6e(ke),l.jsx(XLe,{onPaneClick:X,onPaneMouseEnter:ne,onPaneMouseMove:G,onPaneMouseLeave:te,onPaneContextMenu:pe,onPaneScroll:ae,paneClickDistance:ye,deleteKeyCode:D,selectionKeyCode:S,selectionOnDrag:E,selectionMode:A,onSelectionStart:m,onSelectionEnd:g,multiSelectionKeyCode:N,panActivationKeyCode:P,zoomActivationKeyCode:R,elementsSelectable:L,zoomOnScroll:z,zoomOnPinch:V,zoomOnDoubleClick:Z,panOnScroll:H,panOnScrollSpeed:ee,panOnScrollMode:Y,panOnDrag:K,defaultViewport:$,translateExtent:B,minZoom:q,maxZoom:U,onSelectionContextMenu:f,preventScrolling:J,noDragClassName:ht,noWheelClassName:Fe,noPanClassName:et,disableKeyboardA11y:de,onViewportChange:De,isControlledViewport:!!ke,children:l.jsxs(E6e,{children:[l.jsx(w6e,{edgeTypes:e,onEdgeClick:i,onEdgeDoubleClick:s,onReconnect:Ve,onReconnectStart:Ze,onReconnectEnd:xe,onlyRenderVisibleElements:k,onEdgeContextMenu:fe,onEdgeMouseEnter:ge,onEdgeMouseMove:be,onEdgeMouseLeave:oe,reconnectRadius:Le,defaultMarkerColor:O,noPanClassName:et,disableKeyboardA11y:de,rfId:Ce}),l.jsx(k6e,{style:x,type:v,component:_,containerStyle:w}),l.jsx("div",{className:"react-flow__edgelabel-renderer"}),l.jsx(i6e,{nodeTypes:t,onNodeClick:r,onNodeDoubleClick:a,onNodeMouseEnter:o,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:h,nodeClickDistance:me,onlyRenderVisibleElements:k,noPanClassName:et,noDragClassName:ht,disableKeyboardA11y:de,nodeExtent:re,rfId:Ce}),l.jsx("div",{className:"react-flow__viewport-portal"})]})})}zJ.displayName="GraphView";const $6e=T.memo(zJ),aF=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:a,fitView:s,fitViewOptions:o,minZoom:c=.5,maxZoom:u=2,nodeOrigin:h,nodeExtent:f,zIndexMode:m="basic"}={})=>{const g=new Map,v=new Map,x=new Map,_=new Map,w=r??e??[],S=n??t??[],E=h??[0,0],A=f??k_;tJ(x,_,w);const N=aR(S,g,v,{nodeOrigin:E,nodeExtent:A,zIndexMode:m});let P=[0,0,1];if(s&&i&&a){const R=vw(g,{filter:$=>!!(($.width||$.initialWidth)&&($.height||$.initialHeight))}),{x:D,y:k,zoom:L}=w$(R,i,a,c,u,o?.padding??.1);P=[D,k,L]}return{rfId:"1",width:i??0,height:a??0,transform:P,nodes:S,nodesInitialized:N,nodeLookup:g,parentLookup:v,edges:w,edgeLookup:_,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:c,maxZoom:u,translateExtent:k_,nodeExtent:A,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Cy.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:E,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:s??!1,fitViewOptions:o,fitViewResolver:null,connection:{...LZ},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:J5e,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:jZ,zIndexMode:m,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},j6e=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:a,fitView:s,fitViewOptions:o,minZoom:c,maxZoom:u,nodeOrigin:h,nodeExtent:f,zIndexMode:m})=>eLe((g,v)=>{async function x(){const{nodeLookup:_,panZoom:w,fitViewOptions:S,fitViewResolver:E,width:A,height:N,minZoom:P,maxZoom:R}=v();w&&(await Y5e({nodes:_,width:A,height:N,panZoom:w,minZoom:P,maxZoom:R},S),E?.resolve(!0),g({fitViewResolver:null}))}return{...aF({nodes:t,edges:e,width:i,height:a,fitView:s,fitViewOptions:o,minZoom:c,maxZoom:u,nodeOrigin:h,nodeExtent:f,defaultNodes:n,defaultEdges:r,zIndexMode:m}),setNodes:_=>{const{nodeLookup:w,parentLookup:S,nodeOrigin:E,elevateNodesOnSelect:A,fitViewQueued:N,zIndexMode:P}=v(),R=aR(_,w,S,{nodeOrigin:E,nodeExtent:f,elevateNodesOnSelect:A,checkEquality:!0,zIndexMode:P});N&&R?(x(),g({nodes:_,nodesInitialized:R,fitViewQueued:!1,fitViewOptions:void 0})):g({nodes:_,nodesInitialized:R})},setEdges:_=>{const{connectionLookup:w,edgeLookup:S}=v();tJ(w,S,_),g({edges:_})},setDefaultNodesAndEdges:(_,w)=>{if(_){const{setNodes:S}=v();S(_),g({hasDefaultNodes:!0})}if(w){const{setEdges:S}=v();S(w),g({hasDefaultEdges:!0})}},updateNodeInternals:_=>{const{triggerNodeChanges:w,nodeLookup:S,parentLookup:E,domNode:A,nodeOrigin:N,nodeExtent:P,debug:R,fitViewQueued:D,zIndexMode:k}=v(),{changes:L,updatedInternals:$}=xje(_,S,E,A,N,P,k);$&&(gje(S,E,{nodeOrigin:N,nodeExtent:P,zIndexMode:k}),D?(x(),g({fitViewQueued:!1,fitViewOptions:void 0})):g({}),L?.length>0&&(R&&console.log("React Flow: trigger node changes",L),w?.(L)))},updateNodePositions:(_,w=!1)=>{const S=[];let E=[];const{nodeLookup:A,triggerNodeChanges:N,connection:P,updateConnection:R,onNodesChangeMiddlewareMap:D}=v();for(const[k,L]of _){const $=A.get(k),B=!!($?.expandParent&&$?.parentId&&L?.position),q={id:k,type:"position",position:B?{x:Math.max(0,L.position.x),y:Math.max(0,L.position.y)}:L.position,dragging:w};if($&&P.inProgress&&P.fromNode.id===$.id){const U=gg($,P.fromHandle,Jt.Left,!0);R({...P,from:U})}B&&$.parentId&&S.push({id:k,parentId:$.parentId,rect:{...L.internals.positionAbsolute,width:L.measured.width??0,height:L.measured.height??0}}),E.push(q)}if(S.length>0){const{parentLookup:k,nodeOrigin:L}=v(),$=A$(S,A,k,L);E.push(...$)}for(const k of D.values())E=k(E);N(E)},triggerNodeChanges:_=>{const{onNodesChange:w,setNodes:S,nodes:E,hasDefaultNodes:A,debug:N}=v();if(_?.length){if(A){const P=gJ(_,E);S(P)}N&&console.log("React Flow: trigger node changes",_),w?.(_)}},triggerEdgeChanges:_=>{const{onEdgesChange:w,setEdges:S,edges:E,hasDefaultEdges:A,debug:N}=v();if(_?.length){if(A){const P=vJ(_,E);S(P)}N&&console.log("React Flow: trigger edge changes",_),w?.(_)}},addSelectedNodes:_=>{const{multiSelectionActive:w,edgeLookup:S,nodeLookup:E,triggerNodeChanges:A,triggerEdgeChanges:N}=v();if(w){const P=_.map(R=>Mm(R,!0));A(P);return}A(Wv(E,new Set([..._]),!0)),N(Wv(S))},addSelectedEdges:_=>{const{multiSelectionActive:w,edgeLookup:S,nodeLookup:E,triggerNodeChanges:A,triggerEdgeChanges:N}=v();if(w){const P=_.map(R=>Mm(R,!0));N(P);return}N(Wv(S,new Set([..._]))),A(Wv(E,new Set,!0))},unselectNodesAndEdges:({nodes:_,edges:w}={})=>{const{edges:S,nodes:E,nodeLookup:A,triggerNodeChanges:N,triggerEdgeChanges:P}=v(),R=_||E,D=w||S,k=R.map($=>{const B=A.get($.id);return B&&(B.selected=!1),Mm($.id,!1)}),L=D.map($=>Mm($.id,!1));N(k),P(L)},setMinZoom:_=>{const{panZoom:w,maxZoom:S}=v();w?.setScaleExtent([_,S]),g({minZoom:_})},setMaxZoom:_=>{const{panZoom:w,minZoom:S}=v();w?.setScaleExtent([S,_]),g({maxZoom:_})},setTranslateExtent:_=>{v().panZoom?.setTranslateExtent(_),g({translateExtent:_})},resetSelectedElements:()=>{const{edges:_,nodes:w,triggerNodeChanges:S,triggerEdgeChanges:E,elementsSelectable:A}=v();if(!A)return;const N=w.reduce((R,D)=>D.selected?[...R,Mm(D.id,!1)]:R,[]),P=_.reduce((R,D)=>D.selected?[...R,Mm(D.id,!1)]:R,[]);S(N),E(P)},setNodeExtent:_=>{const{nodes:w,nodeLookup:S,parentLookup:E,nodeOrigin:A,elevateNodesOnSelect:N,nodeExtent:P,zIndexMode:R}=v();_[0][0]===P[0][0]&&_[0][1]===P[0][1]&&_[1][0]===P[1][0]&&_[1][1]===P[1][1]||(aR(w,S,E,{nodeOrigin:A,nodeExtent:_,elevateNodesOnSelect:N,checkEquality:!1,zIndexMode:R}),g({nodeExtent:_}))},panBy:_=>{const{transform:w,width:S,height:E,panZoom:A,translateExtent:N}=v();return _je({delta:_,panZoom:A,transform:w,translateExtent:N,width:S,height:E})},setCenter:async(_,w,S)=>{const{width:E,height:A,maxZoom:N,panZoom:P}=v();if(!P)return Promise.resolve(!1);const R=typeof S?.zoom<"u"?S.zoom:N;return await P.setViewport({x:E/2-_*R,y:A/2-w*R,zoom:R},{duration:S?.duration,ease:S?.ease,interpolate:S?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{g({connection:{...LZ}})},updateConnection:_=>{g({connection:_})},reset:()=>g({...aF()})}},Object.is);function UJ({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:a,initialMinZoom:s,initialMaxZoom:o,initialFitViewOptions:c,fitView:u,nodeOrigin:h,nodeExtent:f,zIndexMode:m,children:g}){const[v]=T.useState(()=>j6e({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:a,fitView:u,minZoom:s,maxZoom:o,fitViewOptions:c,nodeOrigin:h,nodeExtent:f,zIndexMode:m}));return l.jsx(tLe,{value:v,children:l.jsx(ELe,{children:g})})}function L6e({children:t,nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:a,height:s,fitView:o,fitViewOptions:c,minZoom:u,maxZoom:h,nodeOrigin:f,nodeExtent:m,zIndexMode:g}){return T.useContext(zT)?l.jsx(l.Fragment,{children:t}):l.jsx(UJ,{initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:a,initialHeight:s,fitView:o,initialFitViewOptions:c,initialMinZoom:u,initialMaxZoom:h,nodeOrigin:f,nodeExtent:m,zIndexMode:g,children:t})}const O6e={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function F6e({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:a,edgeTypes:s,onNodeClick:o,onEdgeClick:c,onInit:u,onMove:h,onMoveStart:f,onMoveEnd:m,onConnect:g,onConnectStart:v,onConnectEnd:x,onClickConnectStart:_,onClickConnectEnd:w,onNodeMouseEnter:S,onNodeMouseMove:E,onNodeMouseLeave:A,onNodeContextMenu:N,onNodeDoubleClick:P,onNodeDragStart:R,onNodeDrag:D,onNodeDragStop:k,onNodesDelete:L,onEdgesDelete:$,onDelete:B,onSelectionChange:q,onSelectionDragStart:U,onSelectionDrag:J,onSelectionDragStop:O,onSelectionContextMenu:z,onSelectionStart:V,onSelectionEnd:H,onBeforeDelete:ee,connectionMode:Y,connectionLineType:Z=Sf.Bezier,connectionLineStyle:K,connectionLineComponent:X,connectionLineContainerStyle:ne,deleteKeyCode:G="Backspace",selectionKeyCode:te="Shift",selectionOnDrag:ae=!1,selectionMode:pe=R_.Full,panActivationKeyCode:ye="Space",multiSelectionKeyCode:me=$_()?"Meta":"Control",zoomActivationKeyCode:fe=$_()?"Meta":"Control",snapToGrid:ge,snapGrid:be,onlyRenderVisibleElements:oe=!1,selectNodesOnDrag:Le,nodesDraggable:Ve,autoPanOnNodeFocus:Ze,nodesConnectable:xe,nodesFocusable:ht,nodeOrigin:Fe=pJ,edgesFocusable:et,edgesReconnectable:de,elementsSelectable:re=!0,defaultViewport:Ce=pLe,minZoom:ke=.5,maxZoom:De=2,translateExtent:je=k_,preventScrolling:mt=!0,nodeExtent:rt,defaultMarkerColor:bt="#b1b1b7",zoomOnScroll:dt=!0,zoomOnPinch:Je=!0,panOnScroll:ot=!1,panOnScrollSpeed:It=.5,panOnScrollMode:Ct=Xm.Free,zoomOnDoubleClick:St=!0,panOnDrag:Bt=!0,onPaneClick:we,onPaneMouseEnter:xt,onPaneMouseMove:_t,onPaneMouseLeave:vt,onPaneScroll:it,onPaneContextMenu:Qe,paneClickDistance:At=1,nodeClickDistance:We=0,children:ft,onReconnect:yt,onReconnectStart:gt,onReconnectEnd:ln,onEdgeContextMenu:vn,onEdgeDoubleClick:Mt,onEdgeMouseEnter:$t,onEdgeMouseMove:Fn,onEdgeMouseLeave:Rn,reconnectRadius:Ur=10,onNodesChange:Oa,onEdgesChange:ir,noDragClassName:Pr="nodrag",noWheelClassName:Vr="nowheel",noPanClassName:Bi="nopan",fitView:ws,fitViewOptions:qc,connectOnClick:Wu,attributionPosition:uh,proOptions:ec,defaultEdgeOptions:qu,elevateNodesOnSelect:gl=!0,elevateEdgesOnSelect:ue=!1,disableKeyboardA11y:Ae=!1,autoPanOnConnect:Ge,autoPanOnNodeDrag:Be,autoPanSpeed:Re,connectionRadius:wt,isValidConnection:Tt,onError:Rt,style:jt,id:Qt,nodeDragThreshold:nn,connectionDragThreshold:Zt,viewport:wn,onViewportChange:Kn,width:Zn,height:Bn,colorMode:tr="light",debug:en,onScroll:hr,ariaLabelConfig:Dn,zIndexMode:hi="basic",...vl},Sr){const Ya=Qt||"1",br=yLe(tr),Ri=T.useCallback(si=>{si.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),hr?.(si)},[hr]);return l.jsx("div",{"data-testid":"rf__wrapper",...vl,onScroll:Ri,style:{...jt,...O6e},ref:Sr,className:da(["react-flow",i,br]),id:Qt,role:"application",children:l.jsxs(L6e,{nodes:t,edges:e,width:Zn,height:Bn,fitView:ws,fitViewOptions:qc,minZoom:ke,maxZoom:De,nodeOrigin:Fe,nodeExtent:rt,zIndexMode:hi,children:[l.jsx($6e,{onInit:u,onNodeClick:o,onEdgeClick:c,onNodeMouseEnter:S,onNodeMouseMove:E,onNodeMouseLeave:A,onNodeContextMenu:N,onNodeDoubleClick:P,nodeTypes:a,edgeTypes:s,connectionLineType:Z,connectionLineStyle:K,connectionLineComponent:X,connectionLineContainerStyle:ne,selectionKeyCode:te,selectionOnDrag:ae,selectionMode:pe,deleteKeyCode:G,multiSelectionKeyCode:me,panActivationKeyCode:ye,zoomActivationKeyCode:fe,onlyRenderVisibleElements:oe,defaultViewport:Ce,translateExtent:je,minZoom:ke,maxZoom:De,preventScrolling:mt,zoomOnScroll:dt,zoomOnPinch:Je,zoomOnDoubleClick:St,panOnScroll:ot,panOnScrollSpeed:It,panOnScrollMode:Ct,panOnDrag:Bt,onPaneClick:we,onPaneMouseEnter:xt,onPaneMouseMove:_t,onPaneMouseLeave:vt,onPaneScroll:it,onPaneContextMenu:Qe,paneClickDistance:At,nodeClickDistance:We,onSelectionContextMenu:z,onSelectionStart:V,onSelectionEnd:H,onReconnect:yt,onReconnectStart:gt,onReconnectEnd:ln,onEdgeContextMenu:vn,onEdgeDoubleClick:Mt,onEdgeMouseEnter:$t,onEdgeMouseMove:Fn,onEdgeMouseLeave:Rn,reconnectRadius:Ur,defaultMarkerColor:bt,noDragClassName:Pr,noWheelClassName:Vr,noPanClassName:Bi,rfId:Ya,disableKeyboardA11y:Ae,nodeExtent:rt,viewport:wn,onViewportChange:Kn}),l.jsx(vLe,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:g,onConnectStart:v,onConnectEnd:x,onClickConnectStart:_,onClickConnectEnd:w,nodesDraggable:Ve,autoPanOnNodeFocus:Ze,nodesConnectable:xe,nodesFocusable:ht,edgesFocusable:et,edgesReconnectable:de,elementsSelectable:re,elevateNodesOnSelect:gl,elevateEdgesOnSelect:ue,minZoom:ke,maxZoom:De,nodeExtent:rt,onNodesChange:Oa,onEdgesChange:ir,snapToGrid:ge,snapGrid:be,connectionMode:Y,translateExtent:je,connectOnClick:Wu,defaultEdgeOptions:qu,fitView:ws,fitViewOptions:qc,onNodesDelete:L,onEdgesDelete:$,onDelete:B,onNodeDragStart:R,onNodeDrag:D,onNodeDragStop:k,onSelectionDrag:J,onSelectionDragStart:U,onSelectionDragStop:O,onMove:h,onMoveStart:f,onMoveEnd:m,noPanClassName:Bi,nodeOrigin:Fe,rfId:Ya,autoPanOnConnect:Ge,autoPanOnNodeDrag:Be,autoPanSpeed:Re,onError:Rt,connectionRadius:wt,isValidConnection:Tt,selectNodesOnDrag:Le,nodeDragThreshold:nn,connectionDragThreshold:Zt,onBeforeDelete:ee,debug:en,ariaLabelConfig:Dn,zIndexMode:hi}),l.jsx(fLe,{onSelectionChange:q}),ft,l.jsx(lLe,{proOptions:ec,position:uh}),l.jsx(oLe,{rfId:Ya,disableKeyboardA11y:Ae})]})})}var B6e=yJ(F6e);function z6e({dimensions:t,lineWidth:e,variant:n,className:r}){return l.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:da(["react-flow__background-pattern",n,r])})}function U6e({radius:t,className:e}){return l.jsx("circle",{cx:t,cy:t,r:t,className:da(["react-flow__background-pattern","dots",e])})}var Xd;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Xd||(Xd={}));const V6e={[Xd.Dots]:1,[Xd.Lines]:1,[Xd.Cross]:6},H6e=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function VJ({id:t,variant:e=Xd.Dots,gap:n=20,size:r,lineWidth:i=1,offset:a=0,color:s,bgColor:o,style:c,className:u,patternClassName:h}){const f=T.useRef(null),{transform:m,patternId:g}=dr(H6e,Si),v=r||V6e[e],x=e===Xd.Dots,_=e===Xd.Cross,w=Array.isArray(n)?n:[n,n],S=[w[0]*m[2]||1,w[1]*m[2]||1],E=v*m[2],A=Array.isArray(a)?a:[a,a],N=_?[E,E]:S,P=[A[0]*m[2]||1+N[0]/2,A[1]*m[2]||1+N[1]/2],R=`${g}${t||""}`;return l.jsxs("svg",{className:da(["react-flow__background",u]),style:{...c,...HT,"--xy-background-color-props":o,"--xy-background-pattern-color-props":s},ref:f,"data-testid":"rf__background",children:[l.jsx("pattern",{id:R,x:m[0]%S[0],y:m[1]%S[1],width:S[0],height:S[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${P[0]},-${P[1]})`,children:x?l.jsx(U6e,{radius:E/2,className:h}):l.jsx(z6e,{dimensions:N,lineWidth:i,variant:e,className:h})}),l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${R})`})]})}VJ.displayName="Background";const G6e=T.memo(VJ);function W6e(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:l.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function q6e(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:l.jsx("path",{d:"M0 0h32v4.2H0z"})})}function K6e(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:l.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function X6e(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:l.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Y6e(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:l.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function e3({children:t,className:e,...n}){return l.jsx("button",{type:"button",className:da(["react-flow__controls-button",e]),...n,children:t})}const Z6e=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function HJ({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:a,onZoomOut:s,onFitView:o,onInteractiveChange:c,className:u,children:h,position:f="bottom-left",orientation:m="vertical","aria-label":g}){const v=Ci(),{isInteractive:x,minZoomReached:_,maxZoomReached:w,ariaLabelConfig:S}=dr(Z6e,Si),{zoomIn:E,zoomOut:A,fitView:N}=VT(),P=()=>{E(),a?.()},R=()=>{A(),s?.()},D=()=>{N(i),o?.()},k=()=>{v.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c?.(!x)},L=m==="horizontal"?"horizontal":"vertical";return l.jsxs(UT,{className:da(["react-flow__controls",L,u]),position:f,style:t,"data-testid":"rf__controls","aria-label":g??S["controls.ariaLabel"],children:[e&&l.jsxs(l.Fragment,{children:[l.jsx(e3,{onClick:P,className:"react-flow__controls-zoomin",title:S["controls.zoomIn.ariaLabel"],"aria-label":S["controls.zoomIn.ariaLabel"],disabled:w,children:l.jsx(W6e,{})}),l.jsx(e3,{onClick:R,className:"react-flow__controls-zoomout",title:S["controls.zoomOut.ariaLabel"],"aria-label":S["controls.zoomOut.ariaLabel"],disabled:_,children:l.jsx(q6e,{})})]}),n&&l.jsx(e3,{className:"react-flow__controls-fitview",onClick:D,title:S["controls.fitView.ariaLabel"],"aria-label":S["controls.fitView.ariaLabel"],children:l.jsx(K6e,{})}),r&&l.jsx(e3,{className:"react-flow__controls-interactive",onClick:k,title:S["controls.interactive.ariaLabel"],"aria-label":S["controls.interactive.ariaLabel"],children:x?l.jsx(Y6e,{}):l.jsx(X6e,{})}),h]})}HJ.displayName="Controls";const J6e=T.memo(HJ);function Q6e({id:t,x:e,y:n,width:r,height:i,style:a,color:s,strokeColor:o,strokeWidth:c,className:u,borderRadius:h,shapeRendering:f,selected:m,onClick:g}){const{background:v,backgroundColor:x}=a||{},_=s||v||x;return l.jsx("rect",{className:da(["react-flow__minimap-node",{selected:m},u]),x:e,y:n,rx:h,ry:h,width:r,height:i,style:{fill:_,stroke:o,strokeWidth:c},shapeRendering:f,onClick:g?w=>g(w,t):void 0})}const eOe=T.memo(Q6e),tOe=t=>t.nodes.map(e=>e.id),sP=t=>t instanceof Function?t:()=>t;function nOe({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:a=eOe,onClick:s}){const o=dr(tOe,Si),c=sP(e),u=sP(t),h=sP(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return l.jsx(l.Fragment,{children:o.map(m=>l.jsx(iOe,{id:m,nodeColorFunc:c,nodeStrokeColorFunc:u,nodeClassNameFunc:h,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:a,onClick:s,shapeRendering:f},m))})}function rOe({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:a,shapeRendering:s,NodeComponent:o,onClick:c}){const{node:u,x:h,y:f,width:m,height:g}=dr(v=>{const{internals:x}=v.nodeLookup.get(t),_=x.userNode,{x:w,y:S}=x.positionAbsolute,{width:E,height:A}=ch(_);return{node:_,x:w,y:S,width:E,height:A}},Si);return!u||u.hidden||!HZ(u)?null:l.jsx(o,{x:h,y:f,width:m,height:g,style:u.style,selected:!!u.selected,className:r(u),color:e(u),borderRadius:i,strokeColor:n(u),strokeWidth:a,shapeRendering:s,onClick:c,id:u.id})}const iOe=T.memo(rOe);var aOe=T.memo(nOe);const sOe=200,oOe=150,lOe=t=>!t.hidden,cOe=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?VZ(vw(t.nodeLookup,{filter:lOe}),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},uOe="react-flow__minimap-desc";function GJ({style:t,className:e,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:a=5,nodeStrokeWidth:s,nodeComponent:o,bgColor:c,maskColor:u,maskStrokeColor:h,maskStrokeWidth:f,position:m="bottom-right",onClick:g,onNodeClick:v,pannable:x=!1,zoomable:_=!1,ariaLabel:w,inversePan:S,zoomStep:E=1,offsetScale:A=5}){const N=Ci(),P=T.useRef(null),{boundingRect:R,viewBB:D,rfId:k,panZoom:L,translateExtent:$,flowWidth:B,flowHeight:q,ariaLabelConfig:U}=dr(cOe,Si),J=t?.width??sOe,O=t?.height??oOe,z=R.width/J,V=R.height/O,H=Math.max(z,V),ee=H*J,Y=H*O,Z=A*H,K=R.x-(ee-R.width)/2-Z,X=R.y-(Y-R.height)/2-Z,ne=ee+Z*2,G=Y+Z*2,te=`${uOe}-${k}`,ae=T.useRef(0),pe=T.useRef();ae.current=H,T.useEffect(()=>{if(P.current&&L)return pe.current=Nje({domNode:P.current,panZoom:L,getTransform:()=>N.getState().transform,getViewScale:()=>ae.current}),()=>{pe.current?.destroy()}},[L]),T.useEffect(()=>{pe.current?.update({translateExtent:$,width:B,height:q,inversePan:S,pannable:x,zoomStep:E,zoomable:_})},[x,_,S,E,$,B,q]);const ye=g?ge=>{const[be,oe]=pe.current?.pointer(ge)||[0,0];g(ge,{x:be,y:oe})}:void 0,me=v?T.useCallback((ge,be)=>{const oe=N.getState().nodeLookup.get(be).internals.userNode;v(ge,oe)},[]):void 0,fe=w??U["minimap.ariaLabel"];return l.jsx(UT,{position:m,style:{...t,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*H:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="number"?s:void 0},className:da(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:l.jsxs("svg",{width:J,height:O,viewBox:`${K} ${X} ${ne} ${G}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":te,ref:P,onClick:ye,children:[fe&&l.jsx("title",{id:te,children:fe}),l.jsx(aOe,{onClick:me,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:i,nodeStrokeWidth:s,nodeComponent:o}),l.jsx("path",{className:"react-flow__minimap-mask",d:`M${K-Z},${X-Z}h${ne+Z*2}v${G+Z*2}h${-ne-Z*2}z
        M${D.x},${D.y}h${D.width}v${D.height}h${-D.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}GJ.displayName="MiniMap";const dOe=T.memo(GJ),hOe=t=>e=>t?`${Math.max(1/e.transform[2],1)}`:void 0,fOe={[Ny.Line]:"right",[Ny.Handle]:"bottom-right"};function pOe({nodeId:t,position:e,variant:n=Ny.Handle,className:r,style:i=void 0,children:a,color:s,minWidth:o=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:m,autoScale:g=!0,shouldResize:v,onResizeStart:x,onResize:_,onResizeEnd:w}){const S=wJ(),E=typeof t=="string"?t:S,A=Ci(),N=T.useRef(null),P=n===Ny.Handle,R=dr(T.useCallback(hOe(P&&g),[P,g]),Si),D=T.useRef(null),k=e??fOe[n];T.useEffect(()=>{if(!(!N.current||!E))return D.current||(D.current=Hje({domNode:N.current,nodeId:E,getStoreItems:()=>{const{nodeLookup:$,transform:B,snapGrid:q,snapToGrid:U,nodeOrigin:J,domNode:O}=A.getState();return{nodeLookup:$,transform:B,snapGrid:q,snapToGrid:U,nodeOrigin:J,paneDomNode:O}},onChange:($,B)=>{const{triggerNodeChanges:q,nodeLookup:U,parentLookup:J,nodeOrigin:O}=A.getState(),z=[],V={x:$.x,y:$.y},H=U.get(E);if(H&&H.expandParent&&H.parentId){const ee=H.origin??O,Y=$.width??H.measured.width??0,Z=$.height??H.measured.height??0,K={id:H.id,parentId:H.parentId,rect:{width:Y,height:Z,...GZ({x:$.x??H.position.x,y:$.y??H.position.y},{width:Y,height:Z},H.parentId,U,ee)}},X=A$([K],U,J,O);z.push(...X),V.x=$.x?Math.max(ee[0]*Y,$.x):void 0,V.y=$.y?Math.max(ee[1]*Z,$.y):void 0}if(V.x!==void 0&&V.y!==void 0){const ee={id:E,type:"position",position:{...V}};z.push(ee)}if($.width!==void 0&&$.height!==void 0){const Y={id:E,type:"dimensions",resizing:!0,setAttributes:m?m==="horizontal"?"width":"height":!0,dimensions:{width:$.width,height:$.height}};z.push(Y)}for(const ee of B){const Y={...ee,type:"position"};z.push(Y)}q(z)},onEnd:({width:$,height:B})=>{const q={id:E,type:"dimensions",resizing:!1,dimensions:{width:$,height:B}};A.getState().triggerNodeChanges([q])}})),D.current.update({controlPosition:k,boundaries:{minWidth:o,minHeight:c,maxWidth:u,maxHeight:h},keepAspectRatio:f,resizeDirection:m,onResizeStart:x,onResize:_,onResizeEnd:w,shouldResize:v}),()=>{D.current?.destroy()}},[k,o,c,u,h,f,x,_,w,v]);const L=k.split("-");return l.jsx("div",{className:da(["react-flow__resize-control","nodrag",...L,n,r]),ref:N,style:{...i,scale:R,...s&&{[P?"backgroundColor":"borderColor"]:s}},children:a})}T.memo(pOe);var oP,sF;function N$(){if(sF)return oP;sF=1;var t="\0",e="\0",n="";class r{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(h){h&&(this._isDirected=Object.hasOwn(h,"directed")?h.directed:!0,this._isMultigraph=Object.hasOwn(h,"multigraph")?h.multigraph:!1,this._isCompound=Object.hasOwn(h,"compound")?h.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[e]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(h){return this._label=h,this}graph(){return this._label}setDefaultNodeLabel(h){return this._defaultNodeLabelFn=h,typeof h!="function"&&(this._defaultNodeLabelFn=()=>h),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var h=this;return this.nodes().filter(f=>Object.keys(h._in[f]).length===0)}sinks(){var h=this;return this.nodes().filter(f=>Object.keys(h._out[f]).length===0)}setNodes(h,f){var m=arguments,g=this;return h.forEach(function(v){m.length>1?g.setNode(v,f):g.setNode(v)}),this}setNode(h,f){return Object.hasOwn(this._nodes,h)?(arguments.length>1&&(this._nodes[h]=f),this):(this._nodes[h]=arguments.length>1?f:this._defaultNodeLabelFn(h),this._isCompound&&(this._parent[h]=e,this._children[h]={},this._children[e][h]=!0),this._in[h]={},this._preds[h]={},this._out[h]={},this._sucs[h]={},++this._nodeCount,this)}node(h){return this._nodes[h]}hasNode(h){return Object.hasOwn(this._nodes,h)}removeNode(h){var f=this;if(Object.hasOwn(this._nodes,h)){var m=g=>f.removeEdge(f._edgeObjs[g]);delete this._nodes[h],this._isCompound&&(this._removeFromParentsChildList(h),delete this._parent[h],this.children(h).forEach(function(g){f.setParent(g)}),delete this._children[h]),Object.keys(this._in[h]).forEach(m),delete this._in[h],delete this._preds[h],Object.keys(this._out[h]).forEach(m),delete this._out[h],delete this._sucs[h],--this._nodeCount}return this}setParent(h,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(f===void 0)f=e;else{f+="";for(var m=f;m!==void 0;m=this.parent(m))if(m===h)throw new Error("Setting "+f+" as parent of "+h+" would create a cycle");this.setNode(f)}return this.setNode(h),this._removeFromParentsChildList(h),this._parent[h]=f,this._children[f][h]=!0,this}_removeFromParentsChildList(h){delete this._children[this._parent[h]][h]}parent(h){if(this._isCompound){var f=this._parent[h];if(f!==e)return f}}children(h=e){if(this._isCompound){var f=this._children[h];if(f)return Object.keys(f)}else{if(h===e)return this.nodes();if(this.hasNode(h))return[]}}predecessors(h){var f=this._preds[h];if(f)return Object.keys(f)}successors(h){var f=this._sucs[h];if(f)return Object.keys(f)}neighbors(h){var f=this.predecessors(h);if(f){const g=new Set(f);for(var m of this.successors(h))g.add(m);return Array.from(g.values())}}isLeaf(h){var f;return this.isDirected()?f=this.successors(h):f=this.neighbors(h),f.length===0}filterNodes(h){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var m=this;Object.entries(this._nodes).forEach(function([x,_]){h(x)&&f.setNode(x,_)}),Object.values(this._edgeObjs).forEach(function(x){f.hasNode(x.v)&&f.hasNode(x.w)&&f.setEdge(x,m.edge(x))});var g={};function v(x){var _=m.parent(x);return _===void 0||f.hasNode(_)?(g[x]=_,_):_ in g?g[_]:v(_)}return this._isCompound&&f.nodes().forEach(x=>f.setParent(x,v(x))),f}setDefaultEdgeLabel(h){return this._defaultEdgeLabelFn=h,typeof h!="function"&&(this._defaultEdgeLabelFn=()=>h),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(h,f){var m=this,g=arguments;return h.reduce(function(v,x){return g.length>1?m.setEdge(v,x,f):m.setEdge(v,x),x}),this}setEdge(){var h,f,m,g,v=!1,x=arguments[0];typeof x=="object"&&x!==null&&"v"in x?(h=x.v,f=x.w,m=x.name,arguments.length===2&&(g=arguments[1],v=!0)):(h=x,f=arguments[1],m=arguments[3],arguments.length>2&&(g=arguments[2],v=!0)),h=""+h,f=""+f,m!==void 0&&(m=""+m);var _=s(this._isDirected,h,f,m);if(Object.hasOwn(this._edgeLabels,_))return v&&(this._edgeLabels[_]=g),this;if(m!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(h),this.setNode(f),this._edgeLabels[_]=v?g:this._defaultEdgeLabelFn(h,f,m);var w=o(this._isDirected,h,f,m);return h=w.v,f=w.w,Object.freeze(w),this._edgeObjs[_]=w,i(this._preds[f],h),i(this._sucs[h],f),this._in[f][_]=w,this._out[h][_]=w,this._edgeCount++,this}edge(h,f,m){var g=arguments.length===1?c(this._isDirected,arguments[0]):s(this._isDirected,h,f,m);return this._edgeLabels[g]}edgeAsObj(){const h=this.edge(...arguments);return typeof h!="object"?{label:h}:h}hasEdge(h,f,m){var g=arguments.length===1?c(this._isDirected,arguments[0]):s(this._isDirected,h,f,m);return Object.hasOwn(this._edgeLabels,g)}removeEdge(h,f,m){var g=arguments.length===1?c(this._isDirected,arguments[0]):s(this._isDirected,h,f,m),v=this._edgeObjs[g];return v&&(h=v.v,f=v.w,delete this._edgeLabels[g],delete this._edgeObjs[g],a(this._preds[f],h),a(this._sucs[h],f),delete this._in[f][g],delete this._out[h][g],this._edgeCount--),this}inEdges(h,f){var m=this._in[h];if(m){var g=Object.values(m);return f?g.filter(v=>v.v===f):g}}outEdges(h,f){var m=this._out[h];if(m){var g=Object.values(m);return f?g.filter(v=>v.w===f):g}}nodeEdges(h,f){var m=this.inEdges(h,f);if(m)return m.concat(this.outEdges(h,f))}}function i(u,h){u[h]?u[h]++:u[h]=1}function a(u,h){--u[h]||delete u[h]}function s(u,h,f,m){var g=""+h,v=""+f;if(!u&&g>v){var x=g;g=v,v=x}return g+n+v+n+(m===void 0?t:m)}function o(u,h,f,m){var g=""+h,v=""+f;if(!u&&g>v){var x=g;g=v,v=x}var _={v:g,w:v};return m&&(_.name=m),_}function c(u,h){return s(u,h.v,h.w,h.name)}return oP=r,oP}var lP,oF;function mOe(){return oF||(oF=1,lP="2.2.4"),lP}var cP,lF;function gOe(){return lF||(lF=1,cP={Graph:N$(),version:mOe()}),cP}var uP,cF;function vOe(){if(cF)return uP;cF=1;var t=N$();uP={write:e,read:i};function e(a){var s={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:n(a),edges:r(a)};return a.graph()!==void 0&&(s.value=structuredClone(a.graph())),s}function n(a){return a.nodes().map(function(s){var o=a.node(s),c=a.parent(s),u={v:s};return o!==void 0&&(u.value=o),c!==void 0&&(u.parent=c),u})}function r(a){return a.edges().map(function(s){var o=a.edge(s),c={v:s.v,w:s.w};return s.name!==void 0&&(c.name=s.name),o!==void 0&&(c.value=o),c})}function i(a){var s=new t(a.options).setGraph(a.value);return a.nodes.forEach(function(o){s.setNode(o.v,o.value),o.parent&&s.setParent(o.v,o.parent)}),a.edges.forEach(function(o){s.setEdge({v:o.v,w:o.w,name:o.name},o.value)}),s}return uP}var dP,uF;function yOe(){if(uF)return dP;uF=1,dP=t;function t(e){var n={},r=[],i;function a(s){Object.hasOwn(n,s)||(n[s]=!0,i.push(s),e.successors(s).forEach(a),e.predecessors(s).forEach(a))}return e.nodes().forEach(function(s){i=[],a(s),i.length&&r.push(i)}),r}return dP}var hP,dF;function WJ(){if(dF)return hP;dF=1;class t{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(n){return n.key})}has(n){return Object.hasOwn(this._keyIndices,n)}priority(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(n,r){var i=this._keyIndices;if(n=String(n),!Object.hasOwn(i,n)){var a=this._arr,s=a.length;return i[n]=s,a.push({key:n,priority:r}),this._decrease(s),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key}decrease(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)}_heapify(n){var r=this._arr,i=2*n,a=i+1,s=n;i<r.length&&(s=r[i].priority<r[s].priority?i:s,a<r.length&&(s=r[a].priority<r[s].priority?a:s),s!==n&&(this._swap(n,s),this._heapify(s)))}_decrease(n){for(var r=this._arr,i=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<i));)this._swap(n,a),n=a}_swap(n,r){var i=this._arr,a=this._keyIndices,s=i[n],o=i[r];i[n]=o,i[r]=s,a[o.key]=n,a[s.key]=r}}return hP=t,hP}var fP,hF;function qJ(){if(hF)return fP;hF=1;var t=WJ();fP=n;var e=()=>1;function n(i,a,s,o){return r(i,String(a),s||e,o||function(c){return i.outEdges(c)})}function r(i,a,s,o){var c={},u=new t,h,f,m=function(g){var v=g.v!==h?g.v:g.w,x=c[v],_=s(g),w=f.distance+_;if(_<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+_);w<x.distance&&(x.distance=w,x.predecessor=h,u.decrease(v,w))};for(i.nodes().forEach(function(g){var v=g===a?0:Number.POSITIVE_INFINITY;c[g]={distance:v},u.add(g,v)});u.size()>0&&(h=u.removeMin(),f=c[h],f.distance!==Number.POSITIVE_INFINITY);)o(h).forEach(m);return c}return fP}var pP,fF;function bOe(){if(fF)return pP;fF=1;var t=qJ();pP=e;function e(n,r,i){return n.nodes().reduce(function(a,s){return a[s]=t(n,s,r,i),a},{})}return pP}var mP,pF;function KJ(){if(pF)return mP;pF=1,mP=t;function t(e){var n=0,r=[],i={},a=[];function s(o){var c=i[o]={onStack:!0,lowlink:n,index:n++};if(r.push(o),e.successors(o).forEach(function(f){Object.hasOwn(i,f)?i[f].onStack&&(c.lowlink=Math.min(c.lowlink,i[f].index)):(s(f),c.lowlink=Math.min(c.lowlink,i[f].lowlink))}),c.lowlink===c.index){var u=[],h;do h=r.pop(),i[h].onStack=!1,u.push(h);while(o!==h);a.push(u)}}return e.nodes().forEach(function(o){Object.hasOwn(i,o)||s(o)}),a}return mP}var gP,mF;function xOe(){if(mF)return gP;mF=1;var t=KJ();gP=e;function e(n){return t(n).filter(function(r){return r.length>1||r.length===1&&n.hasEdge(r[0],r[0])})}return gP}var vP,gF;function _Oe(){if(gF)return vP;gF=1,vP=e;var t=()=>1;function e(r,i,a){return n(r,i||t,a||function(s){return r.outEdges(s)})}function n(r,i,a){var s={},o=r.nodes();return o.forEach(function(c){s[c]={},s[c][c]={distance:0},o.forEach(function(u){c!==u&&(s[c][u]={distance:Number.POSITIVE_INFINITY})}),a(c).forEach(function(u){var h=u.v===c?u.w:u.v,f=i(u);s[c][h]={distance:f,predecessor:c}})}),o.forEach(function(c){var u=s[c];o.forEach(function(h){var f=s[h];o.forEach(function(m){var g=f[c],v=u[m],x=f[m],_=g.distance+v.distance;_<x.distance&&(x.distance=_,x.predecessor=v.predecessor)})})}),s}return vP}var yP,vF;function XJ(){if(vF)return yP;vF=1;function t(n){var r={},i={},a=[];function s(o){if(Object.hasOwn(i,o))throw new e;Object.hasOwn(r,o)||(i[o]=!0,r[o]=!0,n.predecessors(o).forEach(s),delete i[o],a.push(o))}if(n.sinks().forEach(s),Object.keys(r).length!==n.nodeCount())throw new e;return a}class e extends Error{constructor(){super(...arguments)}}return yP=t,t.CycleException=e,yP}var bP,yF;function wOe(){if(yF)return bP;yF=1;var t=XJ();bP=e;function e(n){try{t(n)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}return bP}var xP,bF;function YJ(){if(bF)return xP;bF=1,xP=t;function t(i,a,s){Array.isArray(a)||(a=[a]);var o=i.isDirected()?f=>i.successors(f):f=>i.neighbors(f),c=s==="post"?e:n,u=[],h={};return a.forEach(f=>{if(!i.hasNode(f))throw new Error("Graph does not have node: "+f);c(f,o,h,u)}),u}function e(i,a,s,o){for(var c=[[i,!1]];c.length>0;){var u=c.pop();u[1]?o.push(u[0]):Object.hasOwn(s,u[0])||(s[u[0]]=!0,c.push([u[0],!0]),r(a(u[0]),h=>c.push([h,!1])))}}function n(i,a,s,o){for(var c=[i];c.length>0;){var u=c.pop();Object.hasOwn(s,u)||(s[u]=!0,o.push(u),r(a(u),h=>c.push(h)))}}function r(i,a){for(var s=i.length;s--;)a(i[s],s,i);return i}return xP}var _P,xF;function SOe(){if(xF)return _P;xF=1;var t=YJ();_P=e;function e(n,r){return t(n,r,"post")}return _P}var wP,_F;function EOe(){if(_F)return wP;_F=1;var t=YJ();wP=e;function e(n,r){return t(n,r,"pre")}return wP}var SP,wF;function COe(){if(wF)return SP;wF=1;var t=N$(),e=WJ();SP=n;function n(r,i){var a=new t,s={},o=new e,c;function u(f){var m=f.v===c?f.w:f.v,g=o.priority(m);if(g!==void 0){var v=i(f);v<g&&(s[m]=c,o.decrease(m,v))}}if(r.nodeCount()===0)return a;r.nodes().forEach(function(f){o.add(f,Number.POSITIVE_INFINITY),a.setNode(f)}),o.decrease(r.nodes()[0],0);for(var h=!1;o.size()>0;){if(c=o.removeMin(),Object.hasOwn(s,c))a.setEdge(c,s[c]);else{if(h)throw new Error("Input graph is not connected: "+r);h=!0}r.nodeEdges(c).forEach(u)}return a}return SP}var EP,SF;function TOe(){return SF||(SF=1,EP={components:yOe(),dijkstra:qJ(),dijkstraAll:bOe(),findCycles:xOe(),floydWarshall:_Oe(),isAcyclic:wOe(),postorder:SOe(),preorder:EOe(),prim:COe(),tarjan:KJ(),topsort:XJ()}),EP}var CP,EF;function Vc(){if(EF)return CP;EF=1;var t=gOe();return CP={Graph:t.Graph,json:vOe(),alg:TOe(),version:t.version},CP}var TP,CF;function MOe(){if(CF)return TP;CF=1;class t{constructor(){let i={};i._next=i._prev=i,this._sentinel=i}dequeue(){let i=this._sentinel,a=i._prev;if(a!==i)return e(a),a}enqueue(i){let a=this._sentinel;i._prev&&i._next&&e(i),i._next=a._next,a._next._prev=i,a._next=i,i._prev=a}toString(){let i=[],a=this._sentinel,s=a._prev;for(;s!==a;)i.push(JSON.stringify(s,n)),s=s._prev;return"["+i.join(", ")+"]"}}function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return TP=t,TP}var MP,TF;function AOe(){if(TF)return MP;TF=1;let t=Vc().Graph,e=MOe();MP=r;let n=()=>1;function r(u,h){if(u.nodeCount()<=1)return[];let f=s(u,h||n);return i(f.graph,f.buckets,f.zeroIdx).flatMap(g=>u.outEdges(g.v,g.w))}function i(u,h,f){let m=[],g=h[h.length-1],v=h[0],x;for(;u.nodeCount();){for(;x=v.dequeue();)a(u,h,f,x);for(;x=g.dequeue();)a(u,h,f,x);if(u.nodeCount()){for(let _=h.length-2;_>0;--_)if(x=h[_].dequeue(),x){m=m.concat(a(u,h,f,x,!0));break}}}return m}function a(u,h,f,m,g){let v=g?[]:void 0;return u.inEdges(m.v).forEach(x=>{let _=u.edge(x),w=u.node(x.v);g&&v.push({v:x.v,w:x.w}),w.out-=_,o(h,f,w)}),u.outEdges(m.v).forEach(x=>{let _=u.edge(x),w=x.w,S=u.node(w);S.in-=_,o(h,f,S)}),u.removeNode(m.v),v}function s(u,h){let f=new t,m=0,g=0;u.nodes().forEach(_=>{f.setNode(_,{v:_,in:0,out:0})}),u.edges().forEach(_=>{let w=f.edge(_.v,_.w)||0,S=h(_),E=w+S;f.setEdge(_.v,_.w,E),g=Math.max(g,f.node(_.v).out+=S),m=Math.max(m,f.node(_.w).in+=S)});let v=c(g+m+3).map(()=>new e),x=m+1;return f.nodes().forEach(_=>{o(v,x,f.node(_))}),{graph:f,buckets:v,zeroIdx:x}}function o(u,h,f){f.out?f.in?u[f.out-f.in+h].enqueue(f):u[u.length-1].enqueue(f):u[0].enqueue(f)}function c(u){const h=[];for(let f=0;f<u;f++)h.push(f);return h}return MP}var AP,MF;function ca(){if(MF)return AP;MF=1;let t=Vc().Graph;AP={addBorderNode:h,addDummyNode:e,applyWithChunking:g,asNonCompoundGraph:r,buildLayerMatrix:o,intersectRect:s,mapValues:P,maxRank:v,normalizeRanks:c,notime:w,partition:x,pick:N,predecessorWeights:a,range:A,removeEmptyRanks:u,simplify:n,successorWeights:i,time:_,uniqueId:E,zipObject:R};function e(D,k,L,$){for(var B=$;D.hasNode(B);)B=E($);return L.dummy=k,D.setNode(B,L),B}function n(D){let k=new t().setGraph(D.graph());return D.nodes().forEach(L=>k.setNode(L,D.node(L))),D.edges().forEach(L=>{let $=k.edge(L.v,L.w)||{weight:0,minlen:1},B=D.edge(L);k.setEdge(L.v,L.w,{weight:$.weight+B.weight,minlen:Math.max($.minlen,B.minlen)})}),k}function r(D){let k=new t({multigraph:D.isMultigraph()}).setGraph(D.graph());return D.nodes().forEach(L=>{D.children(L).length||k.setNode(L,D.node(L))}),D.edges().forEach(L=>{k.setEdge(L,D.edge(L))}),k}function i(D){let k=D.nodes().map(L=>{let $={};return D.outEdges(L).forEach(B=>{$[B.w]=($[B.w]||0)+D.edge(B).weight}),$});return R(D.nodes(),k)}function a(D){let k=D.nodes().map(L=>{let $={};return D.inEdges(L).forEach(B=>{$[B.v]=($[B.v]||0)+D.edge(B).weight}),$});return R(D.nodes(),k)}function s(D,k){let L=D.x,$=D.y,B=k.x-L,q=k.y-$,U=D.width/2,J=D.height/2;if(!B&&!q)throw new Error("Not possible to find intersection inside of the rectangle");let O,z;return Math.abs(q)*U>Math.abs(B)*J?(q<0&&(J=-J),O=J*B/q,z=J):(B<0&&(U=-U),O=U,z=U*q/B),{x:L+O,y:$+z}}function o(D){let k=A(v(D)+1).map(()=>[]);return D.nodes().forEach(L=>{let $=D.node(L),B=$.rank;B!==void 0&&(k[B][$.order]=L)}),k}function c(D){let k=D.nodes().map($=>{let B=D.node($).rank;return B===void 0?Number.MAX_VALUE:B}),L=g(Math.min,k);D.nodes().forEach($=>{let B=D.node($);Object.hasOwn(B,"rank")&&(B.rank-=L)})}function u(D){let k=D.nodes().map(U=>D.node(U).rank),L=g(Math.min,k),$=[];D.nodes().forEach(U=>{let J=D.node(U).rank-L;$[J]||($[J]=[]),$[J].push(U)});let B=0,q=D.graph().nodeRankFactor;Array.from($).forEach((U,J)=>{U===void 0&&J%q!==0?--B:U!==void 0&&B&&U.forEach(O=>D.node(O).rank+=B)})}function h(D,k,L,$){let B={width:0,height:0};return arguments.length>=4&&(B.rank=L,B.order=$),e(D,"border",B,k)}function f(D,k=m){const L=[];for(let $=0;$<D.length;$+=k){const B=D.slice($,$+k);L.push(B)}return L}const m=65535;function g(D,k){if(k.length>m){const L=f(k);return D.apply(null,L.map($=>D.apply(null,$)))}else return D.apply(null,k)}function v(D){const L=D.nodes().map($=>{let B=D.node($).rank;return B===void 0?Number.MIN_VALUE:B});return g(Math.max,L)}function x(D,k){let L={lhs:[],rhs:[]};return D.forEach($=>{k($)?L.lhs.push($):L.rhs.push($)}),L}function _(D,k){let L=Date.now();try{return k()}finally{console.log(D+" time: "+(Date.now()-L)+"ms")}}function w(D,k){return k()}let S=0;function E(D){var k=++S;return D+(""+k)}function A(D,k,L=1){k==null&&(k=D,D=0);let $=q=>q<k;L<0&&($=q=>k<q);const B=[];for(let q=D;$(q);q+=L)B.push(q);return B}function N(D,k){const L={};for(const $ of k)D[$]!==void 0&&(L[$]=D[$]);return L}function P(D,k){let L=k;return typeof k=="string"&&(L=$=>$[k]),Object.entries(D).reduce(($,[B,q])=>($[B]=L(q,B),$),{})}function R(D,k){return D.reduce((L,$,B)=>(L[$]=k[B],L),{})}return AP}var PP,AF;function POe(){if(AF)return PP;AF=1;let t=AOe(),e=ca().uniqueId;PP={run:n,undo:i};function n(a){(a.graph().acyclicer==="greedy"?t(a,o(a)):r(a)).forEach(c=>{let u=a.edge(c);a.removeEdge(c),u.forwardName=c.name,u.reversed=!0,a.setEdge(c.w,c.v,u,e("rev"))});function o(c){return u=>c.edge(u).weight}}function r(a){let s=[],o={},c={};function u(h){Object.hasOwn(c,h)||(c[h]=!0,o[h]=!0,a.outEdges(h).forEach(f=>{Object.hasOwn(o,f.w)?s.push(f):u(f.w)}),delete o[h])}return a.nodes().forEach(u),s}function i(a){a.edges().forEach(s=>{let o=a.edge(s);if(o.reversed){a.removeEdge(s);let c=o.forwardName;delete o.reversed,delete o.forwardName,a.setEdge(s.w,s.v,o,c)}})}return PP}var NP,PF;function NOe(){if(PF)return NP;PF=1;let t=ca();NP={run:e,undo:r};function e(i){i.graph().dummyChains=[],i.edges().forEach(a=>n(i,a))}function n(i,a){let s=a.v,o=i.node(s).rank,c=a.w,u=i.node(c).rank,h=a.name,f=i.edge(a),m=f.labelRank;if(u===o+1)return;i.removeEdge(a);let g,v,x;for(x=0,++o;o<u;++x,++o)f.points=[],v={width:0,height:0,edgeLabel:f,edgeObj:a,rank:o},g=t.addDummyNode(i,"edge",v,"_d"),o===m&&(v.width=f.width,v.height=f.height,v.dummy="edge-label",v.labelpos=f.labelpos),i.setEdge(s,g,{weight:f.weight},h),x===0&&i.graph().dummyChains.push(g),s=g;i.setEdge(s,c,{weight:f.weight},h)}function r(i){i.graph().dummyChains.forEach(a=>{let s=i.node(a),o=s.edgeLabel,c;for(i.setEdge(s.edgeObj,o);s.dummy;)c=i.successors(a)[0],i.removeNode(a),o.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(o.x=s.x,o.y=s.y,o.width=s.width,o.height=s.height),a=c,s=i.node(a)})}return NP}var DP,NF;function N2(){if(NF)return DP;NF=1;const{applyWithChunking:t}=ca();DP={longestPath:e,slack:n};function e(r){var i={};function a(s){var o=r.node(s);if(Object.hasOwn(i,s))return o.rank;i[s]=!0;let c=r.outEdges(s).map(h=>h==null?Number.POSITIVE_INFINITY:a(h.w)-r.edge(h).minlen);var u=t(Math.min,c);return u===Number.POSITIVE_INFINITY&&(u=0),o.rank=u}r.sources().forEach(a)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return DP}var kP,DF;function ZJ(){if(DF)return kP;DF=1;var t=Vc().Graph,e=N2().slack;kP=n;function n(s){var o=new t({directed:!1}),c=s.nodes()[0],u=s.nodeCount();o.setNode(c,{});for(var h,f;r(o,s)<u;)h=i(o,s),f=o.hasNode(h.v)?e(s,h):-e(s,h),a(o,s,f);return o}function r(s,o){function c(u){o.nodeEdges(u).forEach(h=>{var f=h.v,m=u===f?h.w:f;!s.hasNode(m)&&!e(o,h)&&(s.setNode(m,{}),s.setEdge(u,m,{}),c(m))})}return s.nodes().forEach(c),s.nodeCount()}function i(s,o){return o.edges().reduce((u,h)=>{let f=Number.POSITIVE_INFINITY;return s.hasNode(h.v)!==s.hasNode(h.w)&&(f=e(o,h)),f<u[0]?[f,h]:u},[Number.POSITIVE_INFINITY,null])[1]}function a(s,o,c){s.nodes().forEach(u=>o.node(u).rank+=c)}return kP}var RP,kF;function DOe(){if(kF)return RP;kF=1;var t=ZJ(),e=N2().slack,n=N2().longestPath,r=Vc().alg.preorder,i=Vc().alg.postorder,a=ca().simplify;RP=s,s.initLowLimValues=h,s.initCutValues=o,s.calcCutValue=u,s.leaveEdge=m,s.enterEdge=g,s.exchangeEdges=v;function s(S){S=a(S),n(S);var E=t(S);h(E),o(E,S);for(var A,N;A=m(E);)N=g(E,S,A),v(E,S,A,N)}function o(S,E){var A=i(S,S.nodes());A=A.slice(0,A.length-1),A.forEach(N=>c(S,E,N))}function c(S,E,A){var N=S.node(A),P=N.parent;S.edge(A,P).cutvalue=u(S,E,A)}function u(S,E,A){var N=S.node(A),P=N.parent,R=!0,D=E.edge(A,P),k=0;return D||(R=!1,D=E.edge(P,A)),k=D.weight,E.nodeEdges(A).forEach(L=>{var $=L.v===A,B=$?L.w:L.v;if(B!==P){var q=$===R,U=E.edge(L).weight;if(k+=q?U:-U,_(S,A,B)){var J=S.edge(A,B).cutvalue;k+=q?-J:J}}}),k}function h(S,E){arguments.length<2&&(E=S.nodes()[0]),f(S,{},1,E)}function f(S,E,A,N,P){var R=A,D=S.node(N);return E[N]=!0,S.neighbors(N).forEach(k=>{Object.hasOwn(E,k)||(A=f(S,E,A,k,N))}),D.low=R,D.lim=A++,P?D.parent=P:delete D.parent,A}function m(S){return S.edges().find(E=>S.edge(E).cutvalue<0)}function g(S,E,A){var N=A.v,P=A.w;E.hasEdge(N,P)||(N=A.w,P=A.v);var R=S.node(N),D=S.node(P),k=R,L=!1;R.lim>D.lim&&(k=D,L=!0);var $=E.edges().filter(B=>L===w(S,S.node(B.v),k)&&L!==w(S,S.node(B.w),k));return $.reduce((B,q)=>e(E,q)<e(E,B)?q:B)}function v(S,E,A,N){var P=A.v,R=A.w;S.removeEdge(P,R),S.setEdge(N.v,N.w,{}),h(S),o(S,E),x(S,E)}function x(S,E){var A=S.nodes().find(P=>!E.node(P).parent),N=r(S,A);N=N.slice(1),N.forEach(P=>{var R=S.node(P).parent,D=E.edge(P,R),k=!1;D||(D=E.edge(R,P),k=!0),E.node(P).rank=E.node(R).rank+(k?D.minlen:-D.minlen)})}function _(S,E,A){return S.hasEdge(E,A)}function w(S,E,A){return A.low<=E.lim&&E.lim<=A.lim}return RP}var IP,RF;function kOe(){if(RF)return IP;RF=1;var t=N2(),e=t.longestPath,n=ZJ(),r=DOe();IP=i;function i(c){var u=c.graph().ranker;if(u instanceof Function)return u(c);switch(c.graph().ranker){case"network-simplex":o(c);break;case"tight-tree":s(c);break;case"longest-path":a(c);break;case"none":break;default:o(c)}}var a=e;function s(c){e(c),n(c)}function o(c){r(c)}return IP}var $P,IF;function ROe(){if(IF)return $P;IF=1,$P=t;function t(r){let i=n(r);r.graph().dummyChains.forEach(a=>{let s=r.node(a),o=s.edgeObj,c=e(r,i,o.v,o.w),u=c.path,h=c.lca,f=0,m=u[f],g=!0;for(;a!==o.w;){if(s=r.node(a),g){for(;(m=u[f])!==h&&r.node(m).maxRank<s.rank;)f++;m===h&&(g=!1)}if(!g){for(;f<u.length-1&&r.node(m=u[f+1]).minRank<=s.rank;)f++;m=u[f]}r.setParent(a,m),a=r.successors(a)[0]}})}function e(r,i,a,s){let o=[],c=[],u=Math.min(i[a].low,i[s].low),h=Math.max(i[a].lim,i[s].lim),f,m;f=a;do f=r.parent(f),o.push(f);while(f&&(i[f].low>u||h>i[f].lim));for(m=f,f=s;(f=r.parent(f))!==m;)c.push(f);return{path:o.concat(c.reverse()),lca:m}}function n(r){let i={},a=0;function s(o){let c=a;r.children(o).forEach(s),i[o]={low:c,lim:a++}}return r.children().forEach(s),i}return $P}var jP,$F;function IOe(){if($F)return jP;$F=1;let t=ca();jP={run:e,cleanup:a};function e(s){let o=t.addDummyNode(s,"root",{},"_root"),c=r(s),u=Object.values(c),h=t.applyWithChunking(Math.max,u)-1,f=2*h+1;s.graph().nestingRoot=o,s.edges().forEach(g=>s.edge(g).minlen*=f);let m=i(s)+1;s.children().forEach(g=>n(s,o,f,m,h,c,g)),s.graph().nodeRankFactor=f}function n(s,o,c,u,h,f,m){let g=s.children(m);if(!g.length){m!==o&&s.setEdge(o,m,{weight:0,minlen:c});return}let v=t.addBorderNode(s,"_bt"),x=t.addBorderNode(s,"_bb"),_=s.node(m);s.setParent(v,m),_.borderTop=v,s.setParent(x,m),_.borderBottom=x,g.forEach(w=>{n(s,o,c,u,h,f,w);let S=s.node(w),E=S.borderTop?S.borderTop:w,A=S.borderBottom?S.borderBottom:w,N=S.borderTop?u:2*u,P=E!==A?1:h-f[m]+1;s.setEdge(v,E,{weight:N,minlen:P,nestingEdge:!0}),s.setEdge(A,x,{weight:N,minlen:P,nestingEdge:!0})}),s.parent(m)||s.setEdge(o,v,{weight:0,minlen:h+f[m]})}function r(s){var o={};function c(u,h){var f=s.children(u);f&&f.length&&f.forEach(m=>c(m,h+1)),o[u]=h}return s.children().forEach(u=>c(u,1)),o}function i(s){return s.edges().reduce((o,c)=>o+s.edge(c).weight,0)}function a(s){var o=s.graph();s.removeNode(o.nestingRoot),delete o.nestingRoot,s.edges().forEach(c=>{var u=s.edge(c);u.nestingEdge&&s.removeEdge(c)})}return jP}var LP,jF;function $Oe(){if(jF)return LP;jF=1;let t=ca();LP=e;function e(r){function i(a){let s=r.children(a),o=r.node(a);if(s.length&&s.forEach(i),Object.hasOwn(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(let c=o.minRank,u=o.maxRank+1;c<u;++c)n(r,"borderLeft","_bl",a,o,c),n(r,"borderRight","_br",a,o,c)}}r.children().forEach(i)}function n(r,i,a,s,o,c){let u={width:0,height:0,rank:c,borderType:i},h=o[i][c-1],f=t.addDummyNode(r,"border",u,a);o[i][c]=f,r.setParent(f,s),h&&r.setEdge(h,f,{weight:1})}return LP}var OP,LF;function jOe(){if(LF)return OP;LF=1,OP={adjust:t,undo:e};function t(c){let u=c.graph().rankdir.toLowerCase();(u==="lr"||u==="rl")&&n(c)}function e(c){let u=c.graph().rankdir.toLowerCase();(u==="bt"||u==="rl")&&i(c),(u==="lr"||u==="rl")&&(s(c),n(c))}function n(c){c.nodes().forEach(u=>r(c.node(u))),c.edges().forEach(u=>r(c.edge(u)))}function r(c){let u=c.width;c.width=c.height,c.height=u}function i(c){c.nodes().forEach(u=>a(c.node(u))),c.edges().forEach(u=>{let h=c.edge(u);h.points.forEach(a),Object.hasOwn(h,"y")&&a(h)})}function a(c){c.y=-c.y}function s(c){c.nodes().forEach(u=>o(c.node(u))),c.edges().forEach(u=>{let h=c.edge(u);h.points.forEach(o),Object.hasOwn(h,"x")&&o(h)})}function o(c){let u=c.x;c.x=c.y,c.y=u}return OP}var FP,OF;function LOe(){if(OF)return FP;OF=1;let t=ca();FP=e;function e(n){let r={},i=n.nodes().filter(h=>!n.children(h).length),a=i.map(h=>n.node(h).rank),s=t.applyWithChunking(Math.max,a),o=t.range(s+1).map(()=>[]);function c(h){if(r[h])return;r[h]=!0;let f=n.node(h);o[f.rank].push(h),n.successors(h).forEach(c)}return i.sort((h,f)=>n.node(h).rank-n.node(f).rank).forEach(c),o}return FP}var BP,FF;function OOe(){if(FF)return BP;FF=1;let t=ca().zipObject;BP=e;function e(r,i){let a=0;for(let s=1;s<i.length;++s)a+=n(r,i[s-1],i[s]);return a}function n(r,i,a){let s=t(a,a.map((m,g)=>g)),o=i.flatMap(m=>r.outEdges(m).map(g=>({pos:s[g.w],weight:r.edge(g).weight})).sort((g,v)=>g.pos-v.pos)),c=1;for(;c<a.length;)c<<=1;let u=2*c-1;c-=1;let h=new Array(u).fill(0),f=0;return o.forEach(m=>{let g=m.pos+c;h[g]+=m.weight;let v=0;for(;g>0;)g%2&&(v+=h[g+1]),g=g-1>>1,h[g]+=m.weight;f+=m.weight*v}),f}return BP}var zP,BF;function FOe(){if(BF)return zP;BF=1,zP=t;function t(e,n=[]){return n.map(r=>{let i=e.inEdges(r);if(i.length){let a=i.reduce((s,o)=>{let c=e.edge(o),u=e.node(o.v);return{sum:s.sum+c.weight*u.order,weight:s.weight+c.weight}},{sum:0,weight:0});return{v:r,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:r}})}return zP}var UP,zF;function BOe(){if(zF)return UP;zF=1;let t=ca();UP=e;function e(i,a){let s={};i.forEach((c,u)=>{let h=s[c.v]={indegree:0,in:[],out:[],vs:[c.v],i:u};c.barycenter!==void 0&&(h.barycenter=c.barycenter,h.weight=c.weight)}),a.edges().forEach(c=>{let u=s[c.v],h=s[c.w];u!==void 0&&h!==void 0&&(h.indegree++,u.out.push(s[c.w]))});let o=Object.values(s).filter(c=>!c.indegree);return n(o)}function n(i){let a=[];function s(c){return u=>{u.merged||(u.barycenter===void 0||c.barycenter===void 0||u.barycenter>=c.barycenter)&&r(c,u)}}function o(c){return u=>{u.in.push(c),--u.indegree===0&&i.push(u)}}for(;i.length;){let c=i.pop();a.push(c),c.in.reverse().forEach(s(c)),c.out.forEach(o(c))}return a.filter(c=>!c.merged).map(c=>t.pick(c,["vs","i","barycenter","weight"]))}function r(i,a){let s=0,o=0;i.weight&&(s+=i.barycenter*i.weight,o+=i.weight),a.weight&&(s+=a.barycenter*a.weight,o+=a.weight),i.vs=a.vs.concat(i.vs),i.barycenter=s/o,i.weight=o,i.i=Math.min(a.i,i.i),a.merged=!0}return UP}var VP,UF;function zOe(){if(UF)return VP;UF=1;let t=ca();VP=e;function e(i,a){let s=t.partition(i,v=>Object.hasOwn(v,"barycenter")),o=s.lhs,c=s.rhs.sort((v,x)=>x.i-v.i),u=[],h=0,f=0,m=0;o.sort(r(!!a)),m=n(u,c,m),o.forEach(v=>{m+=v.vs.length,u.push(v.vs),h+=v.barycenter*v.weight,f+=v.weight,m=n(u,c,m)});let g={vs:u.flat(!0)};return f&&(g.barycenter=h/f,g.weight=f),g}function n(i,a,s){let o;for(;a.length&&(o=a[a.length-1]).i<=s;)a.pop(),i.push(o.vs),s++;return s}function r(i){return(a,s)=>a.barycenter<s.barycenter?-1:a.barycenter>s.barycenter?1:i?s.i-a.i:a.i-s.i}return VP}var HP,VF;function UOe(){if(VF)return HP;VF=1;let t=FOe(),e=BOe(),n=zOe();HP=r;function r(s,o,c,u){let h=s.children(o),f=s.node(o),m=f?f.borderLeft:void 0,g=f?f.borderRight:void 0,v={};m&&(h=h.filter(S=>S!==m&&S!==g));let x=t(s,h);x.forEach(S=>{if(s.children(S.v).length){let E=r(s,S.v,c,u);v[S.v]=E,Object.hasOwn(E,"barycenter")&&a(S,E)}});let _=e(x,c);i(_,v);let w=n(_,u);if(m&&(w.vs=[m,w.vs,g].flat(!0),s.predecessors(m).length)){let S=s.node(s.predecessors(m)[0]),E=s.node(s.predecessors(g)[0]);Object.hasOwn(w,"barycenter")||(w.barycenter=0,w.weight=0),w.barycenter=(w.barycenter*w.weight+S.order+E.order)/(w.weight+2),w.weight+=2}return w}function i(s,o){s.forEach(c=>{c.vs=c.vs.flatMap(u=>o[u]?o[u].vs:u)})}function a(s,o){s.barycenter!==void 0?(s.barycenter=(s.barycenter*s.weight+o.barycenter*o.weight)/(s.weight+o.weight),s.weight+=o.weight):(s.barycenter=o.barycenter,s.weight=o.weight)}return HP}var GP,HF;function VOe(){if(HF)return GP;HF=1;let t=Vc().Graph,e=ca();GP=n;function n(i,a,s,o){o||(o=i.nodes());let c=r(i),u=new t({compound:!0}).setGraph({root:c}).setDefaultNodeLabel(h=>i.node(h));return o.forEach(h=>{let f=i.node(h),m=i.parent(h);(f.rank===a||f.minRank<=a&&a<=f.maxRank)&&(u.setNode(h),u.setParent(h,m||c),i[s](h).forEach(g=>{let v=g.v===h?g.w:g.v,x=u.edge(v,h),_=x!==void 0?x.weight:0;u.setEdge(v,h,{weight:i.edge(g).weight+_})}),Object.hasOwn(f,"minRank")&&u.setNode(h,{borderLeft:f.borderLeft[a],borderRight:f.borderRight[a]}))}),u}function r(i){for(var a;i.hasNode(a=e.uniqueId("_root")););return a}return GP}var WP,GF;function HOe(){if(GF)return WP;GF=1,WP=t;function t(e,n,r){let i={},a;r.forEach(s=>{let o=e.parent(s),c,u;for(;o;){if(c=e.parent(o),c?(u=i[c],i[c]=o):(u=a,a=o),u&&u!==o){n.setEdge(u,o);return}o=c}})}return WP}var qP,WF;function GOe(){if(WF)return qP;WF=1;let t=LOe(),e=OOe(),n=UOe(),r=VOe(),i=HOe(),a=Vc().Graph,s=ca();qP=o;function o(f,m){if(m&&typeof m.customOrder=="function"){m.customOrder(f,o);return}let g=s.maxRank(f),v=c(f,s.range(1,g+1),"inEdges"),x=c(f,s.range(g-1,-1,-1),"outEdges"),_=t(f);if(h(f,_),m&&m.disableOptimalOrderHeuristic)return;let w=Number.POSITIVE_INFINITY,S;for(let E=0,A=0;A<4;++E,++A){u(E%2?v:x,E%4>=2),_=s.buildLayerMatrix(f);let N=e(f,_);N<w&&(A=0,S=Object.assign({},_),w=N)}h(f,S)}function c(f,m,g){const v=new Map,x=(_,w)=>{v.has(_)||v.set(_,[]),v.get(_).push(w)};for(const _ of f.nodes()){const w=f.node(_);if(typeof w.rank=="number"&&x(w.rank,_),typeof w.minRank=="number"&&typeof w.maxRank=="number")for(let S=w.minRank;S<=w.maxRank;S++)S!==w.rank&&x(S,_)}return m.map(function(_){return r(f,_,g,v.get(_)||[])})}function u(f,m){let g=new a;f.forEach(function(v){let x=v.graph().root,_=n(v,x,g,m);_.vs.forEach((w,S)=>v.node(w).order=S),i(v,g,_.vs)})}function h(f,m){Object.values(m).forEach(g=>g.forEach((v,x)=>f.node(v).order=x))}return qP}var KP,qF;function WOe(){if(qF)return KP;qF=1;let t=Vc().Graph,e=ca();KP={positionX:g,findType1Conflicts:n,findType2Conflicts:r,addConflict:a,hasConflict:s,verticalAlignment:o,horizontalCompaction:c,alignCoordinates:f,findSmallestWidthAlignment:h,balance:m};function n(_,w){let S={};function E(A,N){let P=0,R=0,D=A.length,k=N[N.length-1];return N.forEach((L,$)=>{let B=i(_,L),q=B?_.node(B).order:D;(B||L===k)&&(N.slice(R,$+1).forEach(U=>{_.predecessors(U).forEach(J=>{let O=_.node(J),z=O.order;(z<P||q<z)&&!(O.dummy&&_.node(U).dummy)&&a(S,J,U)})}),R=$+1,P=q)}),N}return w.length&&w.reduce(E),S}function r(_,w){let S={};function E(N,P,R,D,k){let L;e.range(P,R).forEach($=>{L=N[$],_.node(L).dummy&&_.predecessors(L).forEach(B=>{let q=_.node(B);q.dummy&&(q.order<D||q.order>k)&&a(S,B,L)})})}function A(N,P){let R=-1,D,k=0;return P.forEach((L,$)=>{if(_.node(L).dummy==="border"){let B=_.predecessors(L);B.length&&(D=_.node(B[0]).order,E(P,k,$,R,D),k=$,R=D)}E(P,k,P.length,D,N.length)}),P}return w.length&&w.reduce(A),S}function i(_,w){if(_.node(w).dummy)return _.predecessors(w).find(S=>_.node(S).dummy)}function a(_,w,S){if(w>S){let A=w;w=S,S=A}let E=_[w];E||(_[w]=E={}),E[S]=!0}function s(_,w,S){if(w>S){let E=w;w=S,S=E}return!!_[w]&&Object.hasOwn(_[w],S)}function o(_,w,S,E){let A={},N={},P={};return w.forEach(R=>{R.forEach((D,k)=>{A[D]=D,N[D]=D,P[D]=k})}),w.forEach(R=>{let D=-1;R.forEach(k=>{let L=E(k);if(L.length){L=L.sort((B,q)=>P[B]-P[q]);let $=(L.length-1)/2;for(let B=Math.floor($),q=Math.ceil($);B<=q;++B){let U=L[B];N[k]===k&&D<P[U]&&!s(S,k,U)&&(N[U]=k,N[k]=A[k]=A[U],D=P[U])}}})}),{root:A,align:N}}function c(_,w,S,E,A){let N={},P=u(_,w,S,A),R=A?"borderLeft":"borderRight";function D($,B){let q=P.nodes(),U=q.pop(),J={};for(;U;)J[U]?$(U):(J[U]=!0,q.push(U),q=q.concat(B(U))),U=q.pop()}function k($){N[$]=P.inEdges($).reduce((B,q)=>Math.max(B,N[q.v]+P.edge(q)),0)}function L($){let B=P.outEdges($).reduce((U,J)=>Math.min(U,N[J.w]-P.edge(J)),Number.POSITIVE_INFINITY),q=_.node($);B!==Number.POSITIVE_INFINITY&&q.borderType!==R&&(N[$]=Math.max(N[$],B))}return D(k,P.predecessors.bind(P)),D(L,P.successors.bind(P)),Object.keys(E).forEach($=>N[$]=N[S[$]]),N}function u(_,w,S,E){let A=new t,N=_.graph(),P=v(N.nodesep,N.edgesep,E);return w.forEach(R=>{let D;R.forEach(k=>{let L=S[k];if(A.setNode(L),D){var $=S[D],B=A.edge($,L);A.setEdge($,L,Math.max(P(_,k,D),B||0))}D=k})}),A}function h(_,w){return Object.values(w).reduce((S,E)=>{let A=Number.NEGATIVE_INFINITY,N=Number.POSITIVE_INFINITY;Object.entries(E).forEach(([R,D])=>{let k=x(_,R)/2;A=Math.max(D+k,A),N=Math.min(D-k,N)});const P=A-N;return P<S[0]&&(S=[P,E]),S},[Number.POSITIVE_INFINITY,null])[1]}function f(_,w){let S=Object.values(w),E=e.applyWithChunking(Math.min,S),A=e.applyWithChunking(Math.max,S);["u","d"].forEach(N=>{["l","r"].forEach(P=>{let R=N+P,D=_[R];if(D===w)return;let k=Object.values(D),L=E-e.applyWithChunking(Math.min,k);P!=="l"&&(L=A-e.applyWithChunking(Math.max,k)),L&&(_[R]=e.mapValues(D,$=>$+L))})})}function m(_,w){return e.mapValues(_.ul,(S,E)=>{if(w)return _[w.toLowerCase()][E];{let A=Object.values(_).map(N=>N[E]).sort((N,P)=>N-P);return(A[1]+A[2])/2}})}function g(_){let w=e.buildLayerMatrix(_),S=Object.assign(n(_,w),r(_,w)),E={},A;["u","d"].forEach(P=>{A=P==="u"?w:Object.values(w).reverse(),["l","r"].forEach(R=>{R==="r"&&(A=A.map($=>Object.values($).reverse()));let D=(P==="u"?_.predecessors:_.successors).bind(_),k=o(_,A,S,D),L=c(_,A,k.root,k.align,R==="r");R==="r"&&(L=e.mapValues(L,$=>-$)),E[P+R]=L})});let N=h(_,E);return f(E,N),m(E,_.graph().align)}function v(_,w,S){return(E,A,N)=>{let P=E.node(A),R=E.node(N),D=0,k;if(D+=P.width/2,Object.hasOwn(P,"labelpos"))switch(P.labelpos.toLowerCase()){case"l":k=-P.width/2;break;case"r":k=P.width/2;break}if(k&&(D+=S?k:-k),k=0,D+=(P.dummy?w:_)/2,D+=(R.dummy?w:_)/2,D+=R.width/2,Object.hasOwn(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":k=R.width/2;break;case"r":k=-R.width/2;break}return k&&(D+=S?k:-k),k=0,D}}function x(_,w){return _.node(w).width}return KP}var XP,KF;function qOe(){if(KF)return XP;KF=1;let t=ca(),e=WOe().positionX;XP=n;function n(i){i=t.asNonCompoundGraph(i),r(i),Object.entries(e(i)).forEach(([a,s])=>i.node(a).x=s)}function r(i){let a=t.buildLayerMatrix(i),s=i.graph().ranksep,o=0;a.forEach(c=>{const u=c.reduce((h,f)=>{const m=i.node(f).height;return h>m?h:m},0);c.forEach(h=>i.node(h).y=o+u/2),o+=u+s})}return XP}var YP,XF;function KOe(){if(XF)return YP;XF=1;let t=POe(),e=NOe(),n=kOe(),r=ca().normalizeRanks,i=ROe(),a=ca().removeEmptyRanks,s=IOe(),o=$Oe(),c=jOe(),u=GOe(),h=qOe(),f=ca(),m=Vc().Graph;YP=g;function g(K,X){let ne=X&&X.debugTiming?f.time:f.notime;ne("layout",()=>{let G=ne("  buildLayoutGraph",()=>D(K));ne("  runLayout",()=>v(G,ne,X)),ne("  updateInputGraph",()=>x(K,G))})}function v(K,X,ne){X("    makeSpaceForEdgeLabels",()=>k(K)),X("    removeSelfEdges",()=>V(K)),X("    acyclic",()=>t.run(K)),X("    nestingGraph.run",()=>s.run(K)),X("    rank",()=>n(f.asNonCompoundGraph(K))),X("    injectEdgeLabelProxies",()=>L(K)),X("    removeEmptyRanks",()=>a(K)),X("    nestingGraph.cleanup",()=>s.cleanup(K)),X("    normalizeRanks",()=>r(K)),X("    assignRankMinMax",()=>$(K)),X("    removeEdgeLabelProxies",()=>B(K)),X("    normalize.run",()=>e.run(K)),X("    parentDummyChains",()=>i(K)),X("    addBorderSegments",()=>o(K)),X("    order",()=>u(K,ne)),X("    insertSelfEdges",()=>H(K)),X("    adjustCoordinateSystem",()=>c.adjust(K)),X("    position",()=>h(K)),X("    positionSelfEdges",()=>ee(K)),X("    removeBorderNodes",()=>z(K)),X("    normalize.undo",()=>e.undo(K)),X("    fixupEdgeLabelCoords",()=>J(K)),X("    undoCoordinateSystem",()=>c.undo(K)),X("    translateGraph",()=>q(K)),X("    assignNodeIntersects",()=>U(K)),X("    reversePoints",()=>O(K)),X("    acyclic.undo",()=>t.undo(K))}function x(K,X){K.nodes().forEach(ne=>{let G=K.node(ne),te=X.node(ne);G&&(G.x=te.x,G.y=te.y,G.rank=te.rank,X.children(ne).length&&(G.width=te.width,G.height=te.height))}),K.edges().forEach(ne=>{let G=K.edge(ne),te=X.edge(ne);G.points=te.points,Object.hasOwn(te,"x")&&(G.x=te.x,G.y=te.y)}),K.graph().width=X.graph().width,K.graph().height=X.graph().height}let _=["nodesep","edgesep","ranksep","marginx","marginy"],w={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},S=["acyclicer","ranker","rankdir","align"],E=["width","height","rank"],A={width:0,height:0},N=["minlen","weight","width","height","labeloffset"],P={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},R=["labelpos"];function D(K){let X=new m({multigraph:!0,compound:!0}),ne=Z(K.graph());return X.setGraph(Object.assign({},w,Y(ne,_),f.pick(ne,S))),K.nodes().forEach(G=>{let te=Z(K.node(G));const ae=Y(te,E);Object.keys(A).forEach(pe=>{ae[pe]===void 0&&(ae[pe]=A[pe])}),X.setNode(G,ae),X.setParent(G,K.parent(G))}),K.edges().forEach(G=>{let te=Z(K.edge(G));X.setEdge(G,Object.assign({},P,Y(te,N),f.pick(te,R)))}),X}function k(K){let X=K.graph();X.ranksep/=2,K.edges().forEach(ne=>{let G=K.edge(ne);G.minlen*=2,G.labelpos.toLowerCase()!=="c"&&(X.rankdir==="TB"||X.rankdir==="BT"?G.width+=G.labeloffset:G.height+=G.labeloffset)})}function L(K){K.edges().forEach(X=>{let ne=K.edge(X);if(ne.width&&ne.height){let G=K.node(X.v),ae={rank:(K.node(X.w).rank-G.rank)/2+G.rank,e:X};f.addDummyNode(K,"edge-proxy",ae,"_ep")}})}function $(K){let X=0;K.nodes().forEach(ne=>{let G=K.node(ne);G.borderTop&&(G.minRank=K.node(G.borderTop).rank,G.maxRank=K.node(G.borderBottom).rank,X=Math.max(X,G.maxRank))}),K.graph().maxRank=X}function B(K){K.nodes().forEach(X=>{let ne=K.node(X);ne.dummy==="edge-proxy"&&(K.edge(ne.e).labelRank=ne.rank,K.removeNode(X))})}function q(K){let X=Number.POSITIVE_INFINITY,ne=0,G=Number.POSITIVE_INFINITY,te=0,ae=K.graph(),pe=ae.marginx||0,ye=ae.marginy||0;function me(fe){let ge=fe.x,be=fe.y,oe=fe.width,Le=fe.height;X=Math.min(X,ge-oe/2),ne=Math.max(ne,ge+oe/2),G=Math.min(G,be-Le/2),te=Math.max(te,be+Le/2)}K.nodes().forEach(fe=>me(K.node(fe))),K.edges().forEach(fe=>{let ge=K.edge(fe);Object.hasOwn(ge,"x")&&me(ge)}),X-=pe,G-=ye,K.nodes().forEach(fe=>{let ge=K.node(fe);ge.x-=X,ge.y-=G}),K.edges().forEach(fe=>{let ge=K.edge(fe);ge.points.forEach(be=>{be.x-=X,be.y-=G}),Object.hasOwn(ge,"x")&&(ge.x-=X),Object.hasOwn(ge,"y")&&(ge.y-=G)}),ae.width=ne-X+pe,ae.height=te-G+ye}function U(K){K.edges().forEach(X=>{let ne=K.edge(X),G=K.node(X.v),te=K.node(X.w),ae,pe;ne.points?(ae=ne.points[0],pe=ne.points[ne.points.length-1]):(ne.points=[],ae=te,pe=G),ne.points.unshift(f.intersectRect(G,ae)),ne.points.push(f.intersectRect(te,pe))})}function J(K){K.edges().forEach(X=>{let ne=K.edge(X);if(Object.hasOwn(ne,"x"))switch((ne.labelpos==="l"||ne.labelpos==="r")&&(ne.width-=ne.labeloffset),ne.labelpos){case"l":ne.x-=ne.width/2+ne.labeloffset;break;case"r":ne.x+=ne.width/2+ne.labeloffset;break}})}function O(K){K.edges().forEach(X=>{let ne=K.edge(X);ne.reversed&&ne.points.reverse()})}function z(K){K.nodes().forEach(X=>{if(K.children(X).length){let ne=K.node(X),G=K.node(ne.borderTop),te=K.node(ne.borderBottom),ae=K.node(ne.borderLeft[ne.borderLeft.length-1]),pe=K.node(ne.borderRight[ne.borderRight.length-1]);ne.width=Math.abs(pe.x-ae.x),ne.height=Math.abs(te.y-G.y),ne.x=ae.x+ne.width/2,ne.y=G.y+ne.height/2}}),K.nodes().forEach(X=>{K.node(X).dummy==="border"&&K.removeNode(X)})}function V(K){K.edges().forEach(X=>{if(X.v===X.w){var ne=K.node(X.v);ne.selfEdges||(ne.selfEdges=[]),ne.selfEdges.push({e:X,label:K.edge(X)}),K.removeEdge(X)}})}function H(K){var X=f.buildLayerMatrix(K);X.forEach(ne=>{var G=0;ne.forEach((te,ae)=>{var pe=K.node(te);pe.order=ae+G,(pe.selfEdges||[]).forEach(ye=>{f.addDummyNode(K,"selfedge",{width:ye.label.width,height:ye.label.height,rank:pe.rank,order:ae+ ++G,e:ye.e,label:ye.label},"_se")}),delete pe.selfEdges})})}function ee(K){K.nodes().forEach(X=>{var ne=K.node(X);if(ne.dummy==="selfedge"){var G=K.node(ne.e.v),te=G.x+G.width/2,ae=G.y,pe=ne.x-te,ye=G.height/2;K.setEdge(ne.e,ne.label),K.removeNode(X),ne.label.points=[{x:te+2*pe/3,y:ae-ye},{x:te+5*pe/6,y:ae-ye},{x:te+pe,y:ae},{x:te+5*pe/6,y:ae+ye},{x:te+2*pe/3,y:ae+ye}],ne.label.x=ne.x,ne.label.y=ne.y}})}function Y(K,X){return f.mapValues(f.pick(K,X),Number)}function Z(K){var X={};return K&&Object.entries(K).forEach(([ne,G])=>{typeof ne=="string"&&(ne=ne.toLowerCase()),X[ne]=G}),X}return YP}var ZP,YF;function XOe(){if(YF)return ZP;YF=1;let t=ca(),e=Vc().Graph;ZP={debugOrdering:n};function n(r){let i=t.buildLayerMatrix(r),a=new e({compound:!0,multigraph:!0}).setGraph({});return r.nodes().forEach(s=>{a.setNode(s,{label:s}),a.setParent(s,"layer"+r.node(s).rank)}),r.edges().forEach(s=>a.setEdge(s.v,s.w,{},s.name)),i.forEach((s,o)=>{let c="layer"+o;a.setNode(c,{rank:"same"}),s.reduce((u,h)=>(a.setEdge(u,h,{style:"invis"}),h))}),a}return ZP}var JP,ZF;function YOe(){return ZF||(ZF=1,JP="1.1.8"),JP}var QP,JF;function ZOe(){return JF||(JF=1,QP={graphlib:Vc(),layout:KOe(),debug:XOe(),util:{time:ca().time,notime:ca().notime},version:YOe()}),QP}var JOe=ZOe();const QF=vg(JOe),QOe={direction:"TB",nodeSpacing:100,rankSpacing:150},eB={page:{width:180,height:80},layout:{width:200,height:60},dataSource:{width:160,height:50}},tB={width:180,height:80};function e8e(t,e,n={}){const r={...QOe,...n};if(t.length===0)return{nodes:t,edges:e};const i=new QF.graphlib.Graph().setDefaultEdgeLabel(()=>({}));return i.setGraph({rankdir:r.direction,nodesep:r.nodeSpacing,ranksep:r.rankSpacing,marginx:50,marginy:50}),t.forEach(s=>{const o=eB[s.type||""]||tB;i.setNode(s.id,{width:o.width,height:o.height})}),e.forEach(s=>{i.setEdge(s.source,s.target)}),QF.layout(i),{nodes:t.map(s=>{const o=i.node(s.id),c=eB[s.type||""]||tB;return{...s,position:{x:o.x-c.width/2,y:o.y-c.height/2}}}),edges:e}}const t8e={pages:[],layouts:[],elements:[],projectId:null,nodes:[],edges:[],selectedNodeId:null,isLoading:!1,error:null,showLayouts:!0,showNavigationEdges:!0,showEventLinks:!0,showLayoutEdges:!0,showDataSources:!0};function eN(t,e,n,r,i){const a=u=>u?u.split(/[?#]/)[0].replace(/^\/+/,"").replace(/\/+$/,""):"",s=e.filter(u=>u.page_id===t),o=[],c=r||new Map(n.map(u=>[(i||a)(u.slug),u.id]));return s.forEach(u=>{const h=u.props?.href||u.props?.to||u.props?.path||u.props?.url||u.props?.link?.href,f=(u.tag||"").toLowerCase();if((f==="link"||f==="a"||f==="button")&&h&&!h.startsWith("http")&&!h.startsWith("#")){const g=a(h),v=c.get(g);v&&v!==t&&o.push(v)}Array.isArray(u.events)&&u.events.forEach(g=>{if(!g||g.enabled===!1)return;(Array.isArray(g.actions)?g.actions:[]).forEach(x=>{if(!x||x.enabled===!1)return;const _=(x.type||"").toLowerCase(),w=x.config?.path||x.config?.href||x.config?.to||x.config?.url||x.value?.path||x.value?.href||x.value?.to||x.value?.url;if((_==="navigate"||_==="link"||_.includes("navigate"))&&w&&!w.startsWith("http")&&!w.startsWith("#")){const E=a(w),A=c.get(E);A&&A!==t&&o.push(A)}})})}),[...new Set(o)]}function n8e(t,e){return e.filter(n=>n.layout_id===t&&n.tag==="Slot").length}function tN(t,e,n,r,i){const a=r||(h=>h?h.split(/[?#]/)[0].replace(/^\/+/,"").replace(/\/+$/,""):""),s=e.filter(h=>h.page_id===t),o=[],c=i??new Map(n.map(h=>[a(h.slug),h.id])),u=new Map;return n.forEach(h=>{const f=a(h.slug);u.set(f,h.id),u.set(`/${f}`,h.id),(f==="home"||f==="")&&u.set("/",h.id)}),s.forEach(h=>{!h.events||!Array.isArray(h.events)||h.events.forEach(f=>{if(!f.enabled)return;const m=(f.event_type||f.event||"").toString();(Array.isArray(f.actions)?f.actions:[]).forEach(v=>{if(v.type!=="navigate"||v.enabled===!1)return;const x=v.config?.path||v.config?.href||v.config?.to||v.config?.url||v.value?.path||v.value?.href||v.value?.to||v.value?.url;if(!x||x.startsWith("http")||x.startsWith("#"))return;const _=x.startsWith("/")?x:`/${x}`,w=_==="/"?"/":a(x),S=u.get(_)||c.get(w);!S||S===t||o.push({sourceElementId:h.id,sourceElementTag:h.tag,eventType:m,targetPageId:S,condition:v.condition})})})}),o}function r8e(t){const e=new Map;return t.forEach(n=>{if(!n.dataBinding)return;const r=n.dataBinding;let i=null,a="",s="";if("source"in r&&"name"in r&&r.name&&(r.source==="dataTable"?(i="dataTable",a=r.name,s=`dataTable-${a}`):r.source==="api"&&(i="api",a=r.name,s=`api-${a}`)),"type"in r&&r.config){const o=r.config;o.baseUrl==="MOCK_DATA"?(i="mock",a=o.endpoint||"Mock Data",s=`mock-${a}`):r.source==="supabase"&&o.tableName?(i="supabase",a=o.tableName,s=`supabase-${a}`):r.source==="api"&&o.endpoint&&(i="api",a=o.endpoint,s=`api-${a}`)}!i||!a||(e.has(s)?e.get(s).boundElements.push({elementId:n.id,elementTag:n.tag,pageId:n.page_id||""}):e.set(s,{id:s,sourceType:i,name:a,boundElements:[{elementId:n.id,elementTag:n.tag,pageId:n.page_id||""}]}))}),Array.from(e.values())}function i8e(t,e,n,r,i,a,s,o){const c=S=>S?S.split(/[?#]/)[0].replace(/^\/+/,"").replace(/\/+$/,""):"",u=[],h=[],f=r8e(n),m=o&&f.length>0?150:0;o&&f.length>0&&f.forEach((S,E)=>{const A=[...new Set(S.boundElements.map(P=>P.pageId).filter(Boolean))],N={id:`datasource-${S.id}`,type:"dataSource",position:{x:100+E*200,y:0},data:{type:"dataSource",dataSource:S,pageIds:A}};u.push(N)}),r&&e.forEach((S,E)=>{const A=t.filter(P=>P.layout_id===S.id).map(P=>P.id),N={id:`layout-${S.id}`,type:"layout",position:{x:100+E*300,y:50+m},data:{type:"layout",layout:S,pageIds:A,slotCount:n8e(S.id,n)}};u.push(N)});const g=new Map(t.map(S=>[c(S.slug),S.id])),v=t.filter(S=>!S.layout_id),x=t.filter(S=>S.layout_id);v.forEach((S,E)=>{const A=eN(S.id,n,t,g,c),N=tN(S.id,n,t,c),P=n.filter(D=>D.page_id===S.id).length,R={id:`page-${S.id}`,type:"page",position:{x:100+E*250,y:(r?250:100)+m},data:{type:"page",page:S,outgoingLinks:A,outgoingEventLinks:N,layoutId:null,elementCount:P}};u.push(R)});const _=new Map;x.forEach(S=>{const E=S.layout_id;_.has(E)||_.set(E,[]),_.get(E).push(S)});let w=0;if(_.forEach((S,E)=>{S.forEach((A,N)=>{const P=eN(A.id,n,t,g,c),R=tN(A.id,n,t,c),D=n.filter(L=>L.page_id===A.id).length,k={id:`page-${A.id}`,type:"page",position:{x:100+w*300+N*50,y:(r?400+N*150:250+N*150)+m},data:{type:"page",page:A,outgoingLinks:P,outgoingEventLinks:R,layoutId:E,elementCount:D}};u.push(k),r&&s&&h.push({id:`edge-layout-${E}-page-${A.id}`,source:`layout-${E}`,target:`page-${A.id}`,type:"smoothstep",animated:!1,style:{stroke:"var(--color-secondary-400)",strokeDasharray:"5,5"},data:{type:"layout-usage",label:"uses layout"}})}),w++}),i){const S=new Map(t.map(E=>[c(E.slug),E.id]));t.forEach(E=>{eN(E.id,n,t,S,c).forEach(N=>{h.push({id:`edge-nav-${E.id}-${N}`,source:`page-${E.id}`,target:`page-${N}`,type:"smoothstep",animated:!0,style:{stroke:"var(--color-primary-500)"},markerEnd:{type:Ty.ArrowClosed},data:{type:"navigation",label:"Link"}})})})}if(a){const S=new Map(t.map(E=>[c(E.slug),E.id]));t.forEach(E=>{tN(E.id,n,t,c,S).forEach((N,P)=>{const R=h.some(D=>D.source===`page-${E.id}`&&D.target===`page-${N.targetPageId}`);h.push({id:`edge-event-${E.id}-${N.targetPageId}-${P}`,source:`page-${E.id}`,target:`page-${N.targetPageId}`,type:"smoothstep",animated:!0,style:{stroke:"var(--color-secondary-500)",strokeDasharray:"5,5"},markerEnd:{type:Ty.ArrowClosed},data:{type:"event-navigation",label:`${N.eventType}${N.condition?" ()":""}`},...R&&{labelBgPadding:[8,4],style:{strokeDasharray:"2,2"}}})})})}return o&&f.length>0&&f.forEach(S=>{[...new Set(S.boundElements.map(A=>A.pageId).filter(Boolean))].forEach(A=>{h.push({id:`edge-data-${S.id}-page-${A}`,source:`datasource-${S.id}`,target:`page-${A}`,type:"smoothstep",animated:!1,style:{stroke:"var(--color-success-500)",strokeDasharray:"3,3"},data:{type:"data-binding",label:S.name}})})}),{nodes:u,edges:h}}const yi=Ks((t,e)=>({...t8e,setProjectId:n=>t({projectId:n}),setPages:n=>{t({pages:n}),e().buildWorkflowGraph()},setLayouts:n=>{t({layouts:n}),e().buildWorkflowGraph()},setElements:n=>{t({elements:n}),e().buildWorkflowGraph()},setNodes:n=>t({nodes:n}),setEdges:n=>t({edges:n}),onNodesChange:n=>{t({nodes:gJ(n,e().nodes)})},onEdgesChange:n=>{t({edges:vJ(n,e().edges)})},setSelectedNodeId:n=>t({selectedNodeId:n}),setLoading:n=>t({isLoading:n}),setError:n=>t({error:n}),toggleShowLayouts:()=>{t({showLayouts:!e().showLayouts}),e().buildWorkflowGraph()},toggleShowNavigationEdges:()=>{t({showNavigationEdges:!e().showNavigationEdges}),e().buildWorkflowGraph()},toggleShowEventLinks:()=>{t({showEventLinks:!e().showEventLinks}),e().buildWorkflowGraph()},toggleShowLayoutEdges:()=>{t({showLayoutEdges:!e().showLayoutEdges}),e().buildWorkflowGraph()},toggleShowDataSources:()=>{t({showDataSources:!e().showDataSources}),e().buildWorkflowGraph()},autoLayout:(n="TB")=>{const{nodes:r,edges:i}=e();if(r.length===0)return;const{nodes:a}=e8e(r,i,{direction:n,nodeSpacing:80,rankSpacing:120});t({nodes:a})},buildWorkflowGraph:()=>{const{pages:n,layouts:r,elements:i,showLayouts:a,showNavigationEdges:s,showEventLinks:o,showLayoutEdges:c,showDataSources:u}=e();if(n.length===0){t({nodes:[],edges:[]});return}const{nodes:h,edges:f}=i8e(n,r,i,a,s,o,c,u);t({nodes:h,edges:f})}})),a8e=T.memo(function({data:e,selected:n}){const{page:r,outgoingLinks:i,layoutId:a,elementCount:s}=e;return l.jsxs("div",{className:`workflow-node workflow-page-node ${n?"selected":""}`,children:[l.jsx(th,{type:"target",position:Jt.Top,className:"workflow-handle workflow-handle-target"}),l.jsxs("div",{className:"workflow-node-header",children:[l.jsx(SR,{size:14,className:"workflow-node-icon"}),l.jsx("span",{className:"workflow-node-title",children:r.title})]}),l.jsxs("div",{className:"workflow-node-content",children:[l.jsxs("div",{className:"workflow-node-slug",children:["/",r.slug]}),l.jsxs("div",{className:"workflow-node-stats",children:[l.jsxs("div",{className:"workflow-stat",title:"Elements",children:[l.jsx(n_,{size:12}),l.jsx("span",{children:s})]}),i.length>0&&l.jsxs("div",{className:"workflow-stat",title:"Links to other pages",children:[l.jsx(H_,{size:12}),l.jsx("span",{children:i.length})]})]}),a&&l.jsx("div",{className:"workflow-node-badge workflow-badge-layout",children:"Layout"})]}),l.jsx(th,{type:"source",position:Jt.Bottom,className:"workflow-handle workflow-handle-source"})]})}),s8e=T.memo(function({data:e,selected:n}){const{layout:r,pageIds:i,slotCount:a}=e;return l.jsxs("div",{className:`workflow-node workflow-layout-node ${n?"selected":""}`,children:[l.jsx(th,{type:"target",position:Jt.Top,className:"workflow-handle workflow-handle-target",style:{visibility:"hidden"}}),l.jsxs("div",{className:"workflow-node-header workflow-layout-header",children:[l.jsx(G_,{size:14,className:"workflow-node-icon"}),l.jsx("span",{className:"workflow-node-title",children:r.name})]}),l.jsxs("div",{className:"workflow-node-content",children:[r.description&&l.jsx("div",{className:"workflow-node-description",children:r.description}),l.jsxs("div",{className:"workflow-node-stats",children:[l.jsxs("div",{className:"workflow-stat",title:"Pages using this layout",children:[l.jsx(ore,{size:12}),l.jsxs("span",{children:[i.length," pages"]})]}),l.jsxs("div",{className:"workflow-stat",title:"Slot count",children:[l.jsx(Mr,{size:12}),l.jsxs("span",{children:[a," slots"]})]})]})]}),l.jsx(th,{type:"source",position:Jt.Bottom,className:"workflow-handle workflow-handle-source"})]})}),o8e={dataTable:ba,api:t_,supabase:VB,mock:Dae},l8e=t=>{switch(t){case"dataTable":return"DataTable";case"api":return"API";case"supabase":return"Supabase";case"mock":return"Mock";default:return"Data"}},c8e=T.memo(function({data:e,selected:n}){const{dataSource:r,pageIds:i}=e,a=T.useMemo(()=>o8e[r.sourceType]||ba,[r.sourceType]);return l.jsxs("div",{className:`workflow-node workflow-datasource-node workflow-datasource-${r.sourceType} ${n?"selected":""}`,children:[l.jsxs("div",{className:"workflow-node-header",children:[l.jsx(a,{size:14,className:"workflow-node-icon"}),l.jsx("span",{className:"workflow-node-title",children:r.name})]}),l.jsxs("div",{className:"workflow-node-content",children:[l.jsx("div",{className:"workflow-node-type",children:l8e(r.sourceType)}),l.jsxs("div",{className:"workflow-node-stats",children:[l.jsx("div",{className:"workflow-stat",title:"Bound elements",children:l.jsxs("span",{children:[r.boundElements.length," elements"]})}),l.jsx("div",{className:"workflow-stat",title:"Pages using this data",children:l.jsxs("span",{children:[i.length," pages"]})})]})]}),l.jsx(th,{type:"source",position:Jt.Bottom,className:"workflow-handle workflow-handle-source"})]})}),u8e={page:a8e,layout:s8e,dataSource:c8e};function d8e(){const{fitView:t}=VT(),e=yi(m=>m.nodes),n=yi(m=>m.edges),r=yi(m=>m.onNodesChange),i=yi(m=>m.onEdgesChange),a=yi(m=>m.setSelectedNodeId),s=T.useRef("");T.useEffect(()=>{const m=JSON.stringify(e.map(g=>({id:g.id,x:g.position.x,y:g.position.y})));if(s.current&&s.current!==m){const g=setTimeout(()=>{t({padding:.2,duration:300})},50);return()=>clearTimeout(g)}s.current=m},[e,t]);const o=T.useCallback(m=>{r(m)},[r]),c=T.useCallback(m=>{i(m)},[i]),u=T.useCallback((m,g)=>{if(a(g.id),g.id.startsWith("page-")){const v=g.id.replace("page-","");window.parent.postMessage({type:"WORKFLOW_SELECT_PAGE",payload:{pageId:v}},"*")}},[a]),h=T.useCallback(m=>m.type==="layout"?"var(--color-secondary-500)":m.type==="dataSource"?"var(--color-success-500)":"var(--color-primary-500)",[]),f=T.useMemo(()=>({x:50,y:50,zoom:.8}),[]);return l.jsx("div",{className:"workflow-canvas",children:l.jsxs(B6e,{nodes:e,edges:n,nodeTypes:u8e,onNodesChange:o,onEdgesChange:c,onNodeClick:u,defaultViewport:f,fitView:!0,fitViewOptions:{padding:.2},minZoom:.1,maxZoom:2,children:[l.jsx(G6e,{variant:Xd.Dots,gap:20,size:1,color:"var(--color-gray-300)"}),l.jsx(J6e,{showZoom:!0,showFitView:!0,showInteractive:!1,position:"bottom-right"}),l.jsx(dOe,{nodeColor:h,nodeStrokeWidth:2,zoomable:!0,pannable:!0,position:"top-right"})]})})}function h8e(){const t=yi(f=>f.showLayouts),e=yi(f=>f.showNavigationEdges),n=yi(f=>f.showEventLinks),r=yi(f=>f.showLayoutEdges),i=yi(f=>f.showDataSources),a=yi(f=>f.toggleShowLayouts),s=yi(f=>f.toggleShowNavigationEdges),o=yi(f=>f.toggleShowEventLinks),c=yi(f=>f.toggleShowLayoutEdges),u=yi(f=>f.toggleShowDataSources),h=yi(f=>f.autoLayout);return l.jsx("div",{className:"workflow-toolbar",children:l.jsxs("div",{className:"workflow-toolbar-actions",children:[l.jsxs("button",{className:"workflow-toolbar-btn",onClick:()=>h("TB"),title:"Auto Layout (Top to Bottom)",children:[l.jsx(Hte,{size:16}),l.jsx("span",{children:"Auto Layout"})]}),l.jsx("div",{className:"workflow-toolbar-separator"}),l.jsxs("button",{className:`workflow-toolbar-btn ${t?"active":""}`,onClick:a,title:"Show Layouts",children:[l.jsx(G_,{size:16}),l.jsx("span",{children:"Layouts"})]}),l.jsxs("button",{className:`workflow-toolbar-btn ${e?"active":""}`,onClick:s,title:"Show Link Navigation",children:[l.jsx(tne,{size:16}),l.jsx("span",{children:"Links"})]}),l.jsxs("button",{className:`workflow-toolbar-btn ${n?"active":""}`,onClick:o,title:"Show Event Navigation (onClick, onSubmit, etc.)",children:[l.jsx(Vm,{size:16}),l.jsx("span",{children:"Events"})]}),l.jsxs("button",{className:`workflow-toolbar-btn ${r?"active":""}`,onClick:c,title:"Show Layout Usage",disabled:!t,children:[l.jsx(H_,{size:16}),l.jsx("span",{children:"Layout Links"})]}),l.jsxs("button",{className:`workflow-toolbar-btn ${i?"active":""}`,onClick:u,title:"Show Data Sources (DataTable, API, etc.)",children:[l.jsx(ba,{size:16}),l.jsx("span",{children:"Data"})]})]})})}function f8e(){const t=yi(h=>h.setPages),e=yi(h=>h.setLayouts),n=yi(h=>h.setElements),r=yi(h=>h.setProjectId),i=yi(h=>h.setLoading),a=$e(h=>h.pages),s=$e(h=>h.elements),o=$e(h=>h.currentPageId),c=Ra(h=>h.layouts),u=T.useRef(!1);T.useEffect(()=>{const h=a.map(f=>({id:f.id,title:f.name,slug:f.slug?.replace(/^\/+/,"")||"",project_id:f.project_id||"",parent_id:f.parent_id,order_num:f.order_num,layout_id:f.layout_id}));t(h),u.current||(u.current=!0,i(!1))},[a,t,i]),T.useEffect(()=>{const h=c.map(f=>({id:f.id,name:f.name,project_id:f.project_id||"",description:f.description}));e(h)},[c,e]),T.useEffect(()=>{const h=s.map(f=>({id:f.id,tag:f.tag,props:f.props,parent_id:f.parent_id,page_id:f.page_id,layout_id:f.layout_id,order_num:f.order_num,events:f.props.events||f.events,dataBinding:f.props.dataBinding||f.dataBinding}));n(h)},[s,n]),T.useEffect(()=>{const h=a.find(f=>f.id===o);h?.project_id&&r(h.project_id)},[o,a,r])}function p8e(){f8e();const t=yi(r=>r.isLoading),e=yi(r=>r.error),n=yi(r=>r.nodes);return t?l.jsxs("div",{className:"workflow-loading",children:[l.jsx("div",{className:"workflow-loading-spinner"}),l.jsx("span",{children:"Loading workflow..."})]}):e?l.jsx("div",{className:"workflow-error",children:l.jsxs("span",{children:["Error: ",e]})}):n.length===0?l.jsxs("div",{className:"workflow-empty",children:[l.jsx("span",{children:"No pages to display"}),l.jsx("p",{children:"Add pages to your project to see the workflow"})]}):l.jsx(d8e,{})}const m8e=()=>l.jsx(UJ,{children:l.jsxs("main",{className:"workflow-app",children:[l.jsx(h8e,{}),l.jsx(p8e,{})]})}),g8e=({children:t,className:e="app"})=>l.jsx("div",{className:e,children:t});function v8e(t,e){const[n,r]=T.useState({left:0,top:0,right:0,bottom:0}),i=T.useRef(null);return T.useEffect(()=>{const s=e.current;if(!s?.contentWindow)return;const o=()=>{i.current===null&&(i.current=requestAnimationFrame(()=>{const c=s.contentDocument;if(!c){i.current=null;return}const u=c.documentElement.scrollLeft||c.body.scrollLeft,h=c.documentElement.scrollTop||c.body.scrollTop,f=s.clientWidth,m=s.clientHeight;r({left:u,top:h,right:u+f,bottom:h+m}),i.current=null}))};return o(),s.contentWindow.addEventListener("scroll",o,{passive:!0}),s.contentWindow.addEventListener("resize",o,{passive:!0}),()=>{s.contentWindow?.removeEventListener("scroll",o),s.contentWindow?.removeEventListener("resize",o),i.current!==null&&cancelAnimationFrame(i.current)}},[e]),T.useMemo(()=>n.right===0&&n.bottom===0?t:t.filter(s=>{const{rect:o}=s;return!(o.right<n.left||o.left>n.right||o.bottom<n.top||o.top>n.bottom)}),[t,n])}function y8e(t,e){T.useRef(0),T.useRef(0),T.useEffect(()=>{},[t,e])}let Lc=!1,il=null,Dy=0,WT=0,qT=0,KT=0,G1=-1,sy=null,Um=null;function b8e(t){if(!t||t==="reset"||t==="inherit"||t==="initial")return 0;const e=t.split(/\s+/)[0],n=parseFloat(e);return isNaN(n)?0:n}const JJ={topLeft:"borderTopLeftRadius",topRight:"borderTopRightRadius",bottomLeft:"borderBottomLeftRadius",bottomRight:"borderBottomRightRadius"};function QJ(t,e,n){switch(t){case"topLeft":return(e+n)/Math.SQRT2;case"topRight":return(-e+n)/Math.SQRT2;case"bottomLeft":return(e-n)/Math.SQRT2;case"bottomRight":return(-e-n)/Math.SQRT2;default:return 0}}function D$(t,e){const n=Ki.getIframe();n?.contentWindow&&n.contentWindow.postMessage({type:"UPDATE_ELEMENT_PROPS",elementId:t,props:{style:e},merge:!0},window.location.origin)}function x8e(t){switch(t){case"topLeft":case"bottomRight":return"nwse-resize";case"topRight":case"bottomLeft":return"nesw-resize";default:return"nwse-resize"}}function _8e(){if(Um)return;const t=il?x8e(il):"nwse-resize";Um=document.createElement("div"),Um.style.cssText=`
    position: fixed;
    inset: 0;
    z-index: 99999;
    cursor: ${t};
  `,document.body.appendChild(Um)}function w8e(){Um&&(Um.remove(),Um=null)}function D2(){Lc=!1,il=null,Dy=0,WT=0,qT=0,KT=0,G1=-1,sy!==null&&(cancelAnimationFrame(sy),sy=null),w8e()}function k$(t,e,n){return n?{borderTopLeftRadius:`${t}px`,borderTopRightRadius:`${t}px`,borderBottomLeftRadius:`${t}px`,borderBottomRightRadius:`${t}px`,borderRadius:`${t}px`}:{[JJ[e]]:`${t}px`}}function eQ(){if(!Lc)return;document.removeEventListener("mousemove",K1),document.removeEventListener("mouseup",X1),document.removeEventListener("keydown",W1),window.removeEventListener("blur",q1);const t=$e.getState().selectedElementId;if(t&&il){const e=k$(Dy,il,!1);D$(t,e)}D2()}function W1(t){t.key==="Escape"&&Lc&&(t.preventDefault(),eQ())}function q1(){Lc&&eQ()}function K1(t){if(!Lc||!il)return;const e=t.clientX-WT,n=t.clientY-qT,r=QJ(il,e,n);let i=Math.round(Dy+r);if(i=Math.max(0,Math.min(KT,i)),i===G1)return;G1=i;const a=$e.getState().selectedElementId;a&&sy===null&&(sy=requestAnimationFrame(()=>{if(sy=null,!Lc||!il)return;const s=k$(G1,il,t.shiftKey);D$(a,s)}))}function X1(t){if(!Lc||!il)return;document.removeEventListener("mousemove",K1),document.removeEventListener("mouseup",X1),document.removeEventListener("keydown",W1),window.removeEventListener("blur",q1);const e=il,n=t.clientX-WT,r=t.clientY-qT,i=QJ(e,n,r);let a=Math.round(Dy+i);a=Math.max(0,Math.min(KT,a));const s=t.shiftKey;D2();const o=$e.getState().selectedElementId;if(!o)return;const c=k$(a,e,s);D$(o,c);const u=ur.getState().updateInlineStyle,h=ur.getState().updateInlineStyles;if(s)h(c);else{const f=JJ[e];u(f,`${a}px`)}}function S8e(t,e,n={}){const{onDragStart:r}=n;return T.useEffect(()=>()=>{Lc&&(document.removeEventListener("mousemove",K1),document.removeEventListener("mouseup",X1),document.removeEventListener("keydown",W1),window.removeEventListener("blur",q1),D2())},[]),{handleDragStart:T.useCallback((a,s)=>{s.preventDefault(),s.stopPropagation(),t&&(Lc&&(document.removeEventListener("mousemove",K1),document.removeEventListener("mouseup",X1),document.removeEventListener("keydown",W1),window.removeEventListener("blur",q1),D2()),Lc=!0,il=a,Dy=b8e(e),WT=s.clientX,qT=s.clientY,KT=Math.min(t.width,t.height)/2,G1=Dy,_8e(),r?.(),document.addEventListener("mousemove",K1),document.addEventListener("mouseup",X1),document.addEventListener("keydown",W1),window.addEventListener("blur",q1))},[t,e,r]),isDragging:Lc,activeCorner:il}}function g1(t){if(!t||t==="reset"||t==="inherit"||t==="initial")return 0;const e=t.split(/\s+/)[0],n=parseFloat(e);return isNaN(n)?0:n}const t3={topLeft:"nwse-resize",topRight:"nesw-resize",bottomLeft:"nesw-resize",bottomRight:"nwse-resize"};function E8e({rect:t,borderRadius:e,individualRadii:n,onDragStart:r,onDragEnd:i}){const{handleDragStart:a,activeCorner:s}=S8e({width:t.width,height:t.height},e,{onDragStart:r}),o=T.useMemo(()=>{const u=g1(e);return{topLeft:g1(n?.topLeft)||u,topRight:g1(n?.topRight)||u,bottomLeft:g1(n?.bottomLeft)||u,bottomRight:g1(n?.bottomRight)||u}},[e,n]),c=T.useMemo(()=>{const u=h=>4+h*.5;return{topLeft:{x:u(o.topLeft),y:u(o.topLeft)},topRight:{x:t.width-u(o.topRight),y:u(o.topRight)},bottomLeft:{x:u(o.bottomLeft),y:t.height-u(o.bottomLeft)},bottomRight:{x:t.width-u(o.bottomRight),y:t.height-u(o.bottomRight)}}},[t.width,t.height,o]);return l.jsxs("div",{className:"border-radius-handles",children:[l.jsx("div",{className:`border-radius-handle top-left ${s==="topLeft"?"active":""}`,style:{left:c.topLeft.x,top:c.topLeft.y,cursor:t3.topLeft},onMouseDown:u=>a("topLeft",u),title:`Border Radius: ${o.topLeft}px`,children:l.jsx("div",{className:"handle-inner"})}),l.jsx("div",{className:`border-radius-handle top-right ${s==="topRight"?"active":""}`,style:{left:c.topRight.x,top:c.topRight.y,cursor:t3.topRight},onMouseDown:u=>a("topRight",u),title:`Border Radius: ${o.topRight}px`,children:l.jsx("div",{className:"handle-inner"})}),l.jsx("div",{className:`border-radius-handle bottom-left ${s==="bottomLeft"?"active":""}`,style:{left:c.bottomLeft.x,top:c.bottomLeft.y,cursor:t3.bottomLeft},onMouseDown:u=>a("bottomLeft",u),title:`Border Radius: ${o.bottomLeft}px`,children:l.jsx("div",{className:"handle-inner"})}),l.jsx("div",{className:`border-radius-handle bottom-right ${s==="bottomRight"?"active":""}`,style:{left:c.bottomRight.x,top:c.bottomRight.y,cursor:t3.bottomRight},onMouseDown:u=>a("bottomRight",u),title:`Border Radius: ${o.bottomRight}px`,children:l.jsx("div",{className:"handle-inner"})}),s&&l.jsxs("div",{className:"border-radius-tooltip",children:[o[s],"px"]})]})}function C8e(){const t=$e(E=>E.selectedElementId),e=$e(E=>E.selectedElementIds||[]),n=$e(E=>E.multiSelectMode||!1);y8e("SelectionOverlay",t||"none");const r=$e(E=>E.elementsMap),i=$e(E=>E.overlayOpacity),[a,s]=T.useState(null),[o,c]=T.useState(""),[u,h]=T.useState(new Map),f=T.useRef(null),m=T.useRef(null),g=ur(E=>{const A=E.selectedElement?.computedStyle?.borderRadius;return E.selectedElement?.style?.borderRadius||A}),v=T.useMemo(()=>(t?r.get(t):null)?.tag||o||"",[r,t,o]),x=T.useCallback((E=!1)=>{const A=()=>{const N=f.current;if(!N?.contentDocument||!t){s(null);return}let P=N.contentDocument.querySelector(`[data-element-id="${t}"]`);if(P||r.get(t)?.tag==="body"&&N.contentDocument.body.getAttribute("data-element-id")&&(P=N.contentDocument.body,console.log(" [Overlay] body element   <body>  ")),!P){s(null),c("");return}const R=P.getBoundingClientRect(),D={top:R.top,left:R.left,width:R.width,height:R.height};s(D),c(P.tagName.toLowerCase())};E?(m.current!==null&&(cancelAnimationFrame(m.current),m.current=null),A()):(m.current!==null&&cancelAnimationFrame(m.current),m.current=requestAnimationFrame(()=>{m.current=null,A()}))},[t,r]),_=T.useCallback(()=>{const E=f.current;if(!E?.contentDocument||e.length===0){h(new Map);return}const A=new Map;e.forEach(N=>{let P=E.contentDocument.querySelector(`[data-element-id="${N}"]`);if(P||r.get(N)?.tag==="body"&&E.contentDocument.body.getAttribute("data-element-id")&&(P=E.contentDocument.body),P){const R=P.getBoundingClientRect();A.set(N,{rect:{top:R.top,left:R.left,width:R.width,height:R.height},tag:P.tagName.toLowerCase()})}}),h(A)},[e,r]),w=T.useMemo(()=>Array.from(u.entries()).map(([E,A])=>({id:E,rect:{left:A.rect.left,top:A.rect.top,right:A.rect.left+A.rect.width,bottom:A.rect.top+A.rect.height,width:A.rect.width,height:A.rect.height},isPrimary:E===t})),[u,t]),S=v8e(w,f);if(T.useEffect(()=>{n&&e.length>0&&requestAnimationFrame(()=>{_()})},[n,e,_]),T.useEffect(()=>{if(!t||!f.current?.contentDocument)return;const E=f.current.contentDocument.querySelector(`[data-element-id="${t}"]`);if(!E)return;const A=new ResizeObserver(x);return A.observe(E),()=>{A.disconnect()}},[t,x]),T.useEffect(()=>{const E=Ki.getIframe();if(f.current=E,!E?.contentDocument){requestAnimationFrame(()=>{s(null),c("")});return}const A=P=>{if(P.origin===window.location.origin)if(P.data.type==="ELEMENT_SELECTED"&&P.data.payload?.rect){const{top:R,left:D,width:k,height:L}=P.data.payload.rect;s({top:R,left:D,width:k,height:L}),c(P.data.payload.tag||""),m.current!==null&&(cancelAnimationFrame(m.current),m.current=null)}else if(P.data.type==="ELEMENTS_DRAG_SELECTED")_();else if(P.data.type==="UPDATE_ELEMENT_PROPS"){if(P.data.payload?.rect){const{top:R,left:D,width:k,height:L}=P.data.payload.rect;s({top:R,left:D,width:k,height:L})}else n?_():x();P.data.payload?.tag&&c(P.data.payload.tag)}else P.data.type==="CLEAR_OVERLAY"&&(s(null),c(""),h(new Map))},N=()=>{n?_():x()};return window.addEventListener("message",A),t&&E?.contentWindow&&(requestAnimationFrame(()=>{n?_():x()}),E.contentWindow.addEventListener("scroll",N),window.addEventListener("resize",N),window.addEventListener("scroll",N)),()=>{window.removeEventListener("message",A),E?.contentWindow&&E.contentWindow.removeEventListener("scroll",N),window.removeEventListener("resize",N),window.removeEventListener("scroll",N),m.current!==null&&(cancelAnimationFrame(m.current),m.current=null)}},[t,n,x,_]),n&&u.size>0){const E=w.length,A=S.length;return l.jsxs("div",{className:"overlay",children:[S.map(N=>{const P=N.id,R=N.isPrimary,D=r.get(P),k=u.get(P),L=D?.tag||k?.tag||"";return l.jsxs("div",{className:`overlay-element multi-select ${R?"primary":"secondary"}`,style:{top:N.rect.top,left:N.rect.left,width:N.rect.width,height:N.rect.height,opacity:i/100},children:[R&&l.jsxs("div",{className:"overlay-info",children:[l.jsx("div",{className:"overlay-tag-parent",children:l.jsx(mN,{size:16})}),l.jsx("div",{className:"overlay-tag",children:L})]}),l.jsx("div",{className:"overlay-background"}),l.jsx("div",{className:"overlay-pattern",children:l.jsx("div",{className:"overlay-pattern-inner"})})]},`overlay-${P}-${R?"primary":"secondary"}`)}),A<E&&l.jsxs("div",{className:"overlay-stats",children:[A," / ",E," visible"]})]})}return a?l.jsx("div",{className:"overlay",children:l.jsxs("div",{className:"overlay-element",style:{top:a.top,left:a.left,width:a.width,height:a.height,opacity:i/100},children:[l.jsxs("div",{className:"overlay-info",children:[l.jsx("div",{className:"overlay-tag-parent",children:l.jsx(mN,{size:16})}),l.jsx("div",{className:"overlay-tag",children:v})]}),l.jsx("div",{title:"Drag to resize",className:"resize-handle"}),l.jsx("div",{className:"overlay-background"}),l.jsx("div",{className:"overlay-pattern",children:l.jsx("div",{className:"overlay-pattern-inner"})}),l.jsx(E8e,{rect:a,borderRadius:g})]})}):null}function T8e(){const t=$e(n=>n.showGrid),e=$e(n=>n.gridSize);return t?l.jsx("div",{className:"grid-overlay",style:{backgroundSize:`${e}px ${e}px`}}):null}function nB(t){const{style:e,computedStyle:n,events:r,...i}=t.props;return{id:t.id,customId:t.customId,type:t.tag,properties:i,style:e||{},computedStyle:n,semanticClasses:[],cssVariables:{},dataBinding:t.dataBinding,events:r||[]}}function M8e(t){const e={...t.properties};return t.style!==void 0&&(e.style=t.style),t.events!==void 0&&(e.events=t.events),{id:t.id,customId:t.customId,tag:t.type,props:e,dataBinding:t.dataBinding}}function A8e(){const t=ur(s=>s.selectedElement),e=$e(s=>s.updateElement),n=$e(s=>s.setElements),r=$e(s=>s.historyOperationInProgress),i=T.useRef(null),a=T.useRef(null);T.useEffect(()=>{if(r)return;if(!t){i.current=null,a.current&&(clearTimeout(a.current),a.current=null);return}const s=$e.getState().elements,o=s.find(S=>S.id===t.id);if(!o)return;const{style:c,computedStyle:u,events:h,...f}=o.props,m={customId:t.customId,properties:t.properties,style:t.style,dataBinding:t.dataBinding,events:t.events},g={customId:o.customId,properties:f,style:c,dataBinding:o.dataBinding,events:h},v=JSON.stringify(m),x=JSON.stringify(g);if(v===x||v===i.current)return;i.current=v,a.current&&clearTimeout(a.current);const _=ur.getState().syncVersion,w=M8e(t);return a.current=setTimeout(async()=>{try{if(t.type==="Table"&&t.dataBinding?.type==="collection"&&(t.dataBinding?.source==="api"||t.dataBinding?.source==="static"||t.dataBinding?.source==="supabase")){const E=o?.dataBinding?.config,A=t.dataBinding?.config,N=E&&"endpoint"in E?E.endpoint:void 0,P=A&&"endpoint"in A?A.endpoint:void 0,R=N!==P,D=E&&"columnMapping"in E?E.columnMapping:void 0,k=A&&"columnMapping"in A?A.columnMapping:void 0,L=JSON.stringify(D)!==JSON.stringify(k),$=E&&"table"in E?E.table:void 0,B=A&&"table"in A?A.table:void 0,q=E&&"columns"in E?E.columns:void 0,U=A&&"columns"in A?A.columns:void 0,J=$!==B,O=JSON.stringify(q)!==JSON.stringify(U),z=t.dataBinding?.source==="api"&&E&&"columns"in E?E.columns:void 0,V=t.dataBinding?.source==="api"&&A&&"columns"in A?A.columns:void 0,H=t.dataBinding?.source==="api"&&JSON.stringify(z)!==JSON.stringify(V);if(R||H||t.dataBinding?.source==="static"&&L||t.dataBinding?.source==="supabase"&&(J||O||L)){const ee=s.filter(Y=>Y.tag==="Column"&&Y.parent_id&&s.some(Z=>Z.id===Y.parent_id&&Z.tag==="TableHeader"&&Z.parent_id===t.id));if(ee.length>0){const Y=ee.map(K=>K.id);try{await Po.deleteMultipleElements(Y)}catch(K){console.error(" DB Column  :",K)}const Z=s.filter(K=>!Y.includes(K.id));n(Z)}}}await e(t.id,w);const S={};w.props&&(S.props=w.props),Object.prototype.hasOwnProperty.call(w,"customId")&&(S.custom_id=w.customId),Object.prototype.hasOwnProperty.call(w,"dataBinding")&&w.dataBinding!==null&&(S.data_binding=w.dataBinding),Object.keys(S).length>0&&await Rm.savePropertyChange({table:"elements",id:t.id,data:S},{source:"inspector",allowPreviewSaves:!0,validateSerialization:!0})}catch(S){console.error(" useSyncWithBuilder -  :",S),i.current=null,ur.getState().confirmSync(_)}finally{a.current=null,ur.getState().confirmSync(_)}},100),()=>{i.current=null}},[t,e,n,r])}function P8e(){const t=ur(o=>o.setSelectedElement),e=ur(o=>o.isSyncingToBuilder),n=$e(o=>o.selectedElementId),r=T.useRef(0),i=T.useRef(null),a=$e(o=>o.selectedElementProps),s=T.useMemo(()=>{const o=$e.getState().elementsMap,c=n&&o.get(n)||null;return c&&a&&Object.keys(a).length>0?{...c,props:{...c.props,...a}}:c},[n,a]);return A8e(),T.useEffect(()=>{const o=s?.id||null;if(o!==i.current){if(i.current=o,!s){t(null);return}const P=nB(s);t(P);return}if(e)return;const u=ur.getState().syncVersion;if(u>r.current){r.current=u;return}const h=ur.getState().selectedElement;if(!s){h&&t(null);return}const f=nB(s),m=JSON.stringify(h?.properties,Object.keys(h?.properties||{}).sort()),g=JSON.stringify(f.properties,Object.keys(f.properties||{}).sort()),v=JSON.stringify(h?.dataBinding),x=JSON.stringify(f.dataBinding),_=JSON.stringify(h?.style,Object.keys(h?.style||{}).sort()),w=JSON.stringify(f.style,Object.keys(f.style||{}).sort()),S=JSON.stringify(h?.computedStyle,Object.keys(h?.computedStyle||{}).sort()),E=JSON.stringify(f.computedStyle,Object.keys(f.computedStyle||{}).sort()),A=JSON.stringify(h?.events),N=JSON.stringify(f.events);(m!==g||v!==x||_!==w||S!==E||A!==N)&&t(f)},[s,t,e]),null}function N8e(t=!0){const e=$e(v=>v.currentPageId),n=$e(v=>v.loadedPages),r=$e(v=>v.loadingPages),i=$e(v=>v.lazyLoadingEnabled),a=$e(v=>v.lazyLoadPageElements),s=$e(v=>v.preloadPage),o=$e(v=>v.getLRUStats),c=T.useRef(!1),u=e?r.has(e):!1,h=e?n.has(e):!1,f=T.useCallback(async v=>{if(!c.current){c.current=!0;try{await a(v)}finally{c.current=!1}}},[a]),m=T.useCallback(v=>{s(v)},[s]);T.useEffect(()=>{t&&e&&i&&(h||u||f(e))},[e,t,i,h,u,f]);const g={loadedPages:o().size,maxPages:o().maxPages,hitRate:o().hitRate};return{isLoading:u,isLoaded:h,loadPage:f,preloadPage:m,stats:g}}function D8e(){const t=$e(i=>i.currentPageId),e=$e(i=>i.pages),n=$e(i=>i.preloadPage),r=$e(i=>i.lazyLoadingEnabled);T.useEffect(()=>{if(!r||!t||e.length===0)return;const i=e.findIndex(s=>s.id===t);if(i===-1)return;[i-1,i+1].forEach(s=>{if(s>=0&&s<e.length){const o=e[s].id;n(o)}})},[t,e,n,r])}class k8e{metrics=null;renderTimes=[];frameTimes=[];maxSamples=60;listeners=new Set;autoCollectInterval=null;rafId=null;lastFrameTime=0;thresholds={memoryWarning:60,memoryCritical:80,renderWarning:50,renderCritical:100,fpsWarning:50,fpsCritical:30,elementCountWarning:5e3};constructor(e){e&&(this.thresholds={...this.thresholds,...e})}collect(){const e=$k(),n=performance.memory,r=n?.usedJSHeapSize??0,i=n?.jsHeapSizeLimit??1,a=r/i*100,s=this.estimateStoreMemory(e),o=this.getHistoryMemory(),c=this.estimateCacheMemory(),u=this.renderTimes[this.renderTimes.length-1]??0,h=this.calculateAverage(this.renderTimes),f=Math.max(...this.renderTimes,0),m=this.calculateFPS(),g=this.calculateHealthScore({heapUsagePercent:a,avgRenderTime:h,fps:m,elementCount:e.elementsMap?.size??0}),v=this.getStatus(g),x=this.generateWarnings({heapUsagePercent:a,avgRenderTime:h,fps:m,elementCount:e.elementsMap?.size??0});return this.metrics={elementCount:e.elementsMap?.size??0,pageCount:e.pages?.length??0,loadedPages:e.loadedPages?.size??0,storeMemory:s,historyMemory:o,cacheMemory:c,browserHeapUsed:r,browserHeapLimit:i,heapUsagePercent:a,lastRenderTime:u,avgRenderTime:h,maxRenderTime:f,fps:m,healthScore:g,status:v,warnings:x,timestamp:Date.now()},this.notifyListeners(this.metrics),this.metrics}recordRenderTime(e){this.renderTimes.push(e),this.renderTimes.length>this.maxSamples&&this.renderTimes.shift()}startAutoCollect(e=5e3){this.autoCollectInterval&&this.stopAutoCollect(),this.startFPSMeasurement(),this.autoCollectInterval=setInterval(()=>{this.collect()},e)}stopAutoCollect(){this.autoCollectInterval&&(clearInterval(this.autoCollectInterval),this.autoCollectInterval=null),this.stopFPSMeasurement()}addListener(e){return this.listeners.add(e),()=>this.listeners.delete(e)}removeListener(e){this.listeners.delete(e)}getLastMetrics(){return this.metrics}setThresholds(e){this.thresholds={...this.thresholds,...e}}getThresholds(){return{...this.thresholds}}reset(){this.renderTimes=[],this.frameTimes=[],this.metrics=null}dump(){const e=this.collect();console.log(" [Monitor] Performance Metrics:"),console.log(`  Health: ${e.healthScore}% (${e.status})`),console.log(`  Memory: ${this.formatBytes(e.browserHeapUsed)} / ${this.formatBytes(e.browserHeapLimit)} (${e.heapUsagePercent.toFixed(1)}%)`),console.log(`  Elements: ${e.elementCount}`),console.log(`  FPS: ${e.fps.toFixed(1)}`),console.log(`  Avg Render: ${e.avgRenderTime.toFixed(2)}ms`),e.warnings.length>0&&console.log(`  Warnings: ${e.warnings.join(", ")}`)}startFPSMeasurement(){const e=n=>{if(this.lastFrameTime>0){const r=n-this.lastFrameTime;this.frameTimes.push(r),this.frameTimes.length>this.maxSamples&&this.frameTimes.shift()}this.lastFrameTime=n,this.rafId=requestAnimationFrame(e)};this.rafId=requestAnimationFrame(e)}stopFPSMeasurement(){this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null),this.lastFrameTime=0}calculateFPS(){if(this.frameTimes.length===0)return 60;const e=this.calculateAverage(this.frameTimes);return e>0?Math.min(60,1e3/e):60}calculateAverage(e){return e.length===0?0:e.reduce((n,r)=>n+r,0)/e.length}estimateStoreMemory(e){try{return(e.elementsMap?.size??0)*500}catch{return 0}}getHistoryMemory(){try{return Ni.getMemoryStats().totalSize??0}catch{return 0}}estimateCacheMemory(){try{return $d.getStats().size*5e4}catch{return 0}}calculateHealthScore(e){let n=100;return e.heapUsagePercent>this.thresholds.memoryCritical?n-=40:e.heapUsagePercent>this.thresholds.memoryWarning&&(n-=20),e.avgRenderTime>this.thresholds.renderCritical?n-=30:e.avgRenderTime>this.thresholds.renderWarning&&(n-=15),e.fps<this.thresholds.fpsCritical?n-=20:e.fps<this.thresholds.fpsWarning&&(n-=10),e.elementCount>this.thresholds.elementCountWarning&&(n-=10),Math.max(0,Math.min(100,n))}getStatus(e){return e>=70?"healthy":e>=40?"warning":"critical"}generateWarnings(e){const n=[];return e.heapUsagePercent>this.thresholds.memoryCritical?n.push(` : ${e.heapUsagePercent.toFixed(1)}%`):e.heapUsagePercent>this.thresholds.memoryWarning&&n.push(` : ${e.heapUsagePercent.toFixed(1)}%`),e.avgRenderTime>this.thresholds.renderCritical?n.push(` : ${e.avgRenderTime.toFixed(0)}ms`):e.avgRenderTime>this.thresholds.renderWarning&&n.push(` : ${e.avgRenderTime.toFixed(0)}ms`),e.fps<this.thresholds.fpsCritical?n.push(`FPS : ${e.fps.toFixed(0)}`):e.fps<this.thresholds.fpsWarning&&n.push(`FPS : ${e.fps.toFixed(0)}`),e.elementCount>this.thresholds.elementCountWarning&&n.push(`  : ${e.elementCount}`),n}notifyListeners(e){this.listeners.forEach(n=>{try{n(e)}catch(r){console.error("[Monitor] Listener error:",r)}})}formatBytes(e){if(e===0)return"0 B";const n=1024,r=["B","KB","MB","GB"],i=Math.floor(Math.log(e)/Math.log(n));return`${(e/Math.pow(n,i)).toFixed(1)} ${r[i]}`}}const v1=new k8e;function R8e(t){const e={checkInterval:3e4,criticalHealthScore:30,warningHealthScore:50,recoveryCooldown:6e4,historyKeepCount:50,enabled:!0,...t?.config},n=T.useRef({totalRecoveries:0,lastRecoveryTime:null,lastRecoveryReason:null,history:[]}),r=T.useRef(!1),i=T.useRef(0),a=$e(u=>u.clearAllPages),s=$e(u=>u.currentPageId),o=T.useCallback(async u=>{if(r.current){console.warn("[AutoRecovery] Recovery already in progress");return}const h=Date.now();if(n.current.lastRecoveryTime&&h-n.current.lastRecoveryTime<e.recoveryCooldown){console.warn("[AutoRecovery] In cooldown period");return}r.current=!0;const f=v1.getLastMetrics()?.healthScore??0;console.warn(` [AutoRecovery] Starting recovery: ${u}`),console.log("  Health before:",f);try{console.log("  Step 1: Unloading inactive pages..."),a&&a(),console.log("  Step 2: Trimming history..."),Ni.trim(e.historyKeepCount),console.log("  Step 3: Clearing caches..."),$d.getPageIds().forEach(v=>{v!==s&&$d.remove(v)}),"gc"in window&&typeof window.gc=="function"&&(console.log("  Step 4: Requesting GC..."),window.gc?.()),await new Promise(v=>setTimeout(v,100));const g=v1.collect();n.current.totalRecoveries++,n.current.lastRecoveryTime=h,n.current.lastRecoveryReason=u,n.current.history.push({timestamp:h,reason:u,healthBefore:f,healthAfter:g.healthScore}),n.current.history.length>10&&n.current.history.shift(),console.log(" [AutoRecovery] Recovery complete"),console.log(`  Health after: ${g.healthScore}`),console.log(`  Improvement: +${g.healthScore-f}`),t?.onRecovery?.(u,{...n.current})}catch(m){console.error("[AutoRecovery] Recovery failed:",m)}finally{r.current=!1}},[a,s,e.historyKeepCount,e.recoveryCooldown,t]),c=T.useCallback((u="manual")=>{o(u)},[o]);return T.useEffect(()=>{if(!e.enabled)return;v1.startAutoCollect(e.checkInterval);const u=v1.addListener(h=>{const f=Date.now();f-i.current<5e3||(i.current=f,h.healthScore<e.warningHealthScore&&h.healthScore>=e.criticalHealthScore&&(console.warn(` [AutoRecovery] Warning: Health ${h.healthScore}%`),t?.onWarning?.(h)),h.healthScore<e.criticalHealthScore&&(console.error(` [AutoRecovery] Critical: Health ${h.healthScore}%`),o(`critical_health_${h.healthScore}`)))});return()=>{u(),v1.stopAutoCollect()}},[e.enabled,e.checkInterval,e.criticalHealthScore,e.warningHealthScore,o,t]),{stats:n.current,triggerRecovery:c,isRecovering:r.current}}const I8e=()=>{const t=qr(i=>i.loadActiveTheme),e=qr(i=>i.injectThemeCSS),n=T.useCallback(()=>{e()},[e]),r=T.useCallback(i=>{t(i)},[t]);return{applyThemeTokens:n,loadProjectTheme:r}},$8e=()=>({validateOrderNumbers:T.useCallback(e=>{},[])});function rB(t,e){if(!e)return t;if(!(typeof t!="object"||t===null))return e.split(".").reduce((n,r)=>{if(n&&typeof n=="object")return n[r]},t)}function j8e(t,e,n){const r=[...t],i=Array.isArray(e)?e:[e];for(const a of i){if(typeof a!="object"||a===null)continue;const s=a,o=s[n];if(o===void 0){r.push(s);continue}const c=r.findIndex(u=>u[n]===o);c>=0?r[c]={...r[c],...s}:r.push(s)}return r}function tQ(t,e){if(typeof e!="object"||e===null)return t;const n={...t},r=e;for(const i of Object.keys(r)){const a=n[i],s=r[i];typeof a=="object"&&a!==null&&typeof s=="object"&&s!==null&&!Array.isArray(a)&&!Array.isArray(s)?n[i]=tQ(a,s):n[i]=s}return n}function iB(t,e){const r=(Array.isArray(e)?e:[e]).filter(i=>typeof i=="object"&&i!==null);return[...t,...r]}function L8e(t,e){try{return JSON.parse(t)}catch{return e}}const O8e=()=>{const{projectId:t}=yg(),[e,n]=T.useState(null),r=$e(fe=>fe.elements),i=$e(fe=>fe.currentPageId),a=$e(fe=>fe.setSelectedElement),s=$e(fe=>fe.showOverlay),o=$e(fe=>fe.themeMode),c=$e(fe=>fe.uiScale),u=$e(fe=>fe.historyInfo),h=$e(fe=>fe.setHistoryInfo),f=$e(fe=>fe.viewMode),m=$e(fe=>fe.toggleViewMode);T.useEffect(()=>{if(i){const fe=Ni.getCurrentPageHistory();h(fe)}},[i,h]),T.useEffect(()=>{const fe=ge=>{document.documentElement.setAttribute("data-builder-theme",ge)};if(o==="auto"){const ge=window.matchMedia("(prefers-color-scheme: dark)"),be=oe=>{fe(oe.matches?"dark":"light")};return be(ge),ge.addEventListener("change",be),()=>{ge.removeEventListener("change",be)}}else fe(o)},[o]),T.useEffect(()=>{const fe=document.querySelector(".app .contents");fe&&(fe.style.fontSize=`${c}%`)},[c]);const g=u.canUndo,v=u.canRedo,x=T.useCallback(async()=>{const{undo:fe}=$e.getState();await fe();const ge=Ni.getCurrentPageHistory();h(ge)},[h]),_=T.useCallback(async()=>{const{redo:fe}=$e.getState();await fe();const ge=Ni.getCurrentPageHistory();h(ge)},[h]),{error:w,isLoading:S,setError:E,setIsLoading:A,handleError:N,clearError:P}=KY(),{handleIframeLoad:R,handleMessage:D,iframeReadyState:k,requestAutoSelectAfterUpdate:L}=kT(),{pages:$,fetchElements:B,initializeProject:q}=HY({requestAutoSelectAfterUpdate:L}),{applyThemeTokens:U,loadProjectTheme:J}=I8e(),{validateOrderNumbers:O}=$8e(),{sendThemeTokens:z}=UY(),{isLoading:V}=N8e();D8e();const{toasts:H,showToast:ee,dismissToast:Y}=rZ();R8e({onRecovery:T.useCallback(fe=>{ee("info",`   : ${fe}`,8e3),console.log(" [AutoRecovery] Recovery complete:",fe)},[ee]),onWarning:T.useCallback(fe=>{ee("warning",` : Health ${fe.healthScore}%`,5e3)},[ee])});const[Z,K]=T.useState(()=>{const fe=localStorage.getItem("builder-breakpoint");if(fe)try{return new Set([fe])}catch(ge){return console.warn("Failed to parse saved breakpoint:",ge),new Set(["screen"])}return new Set(["screen"])}),[X]=T.useState([{id:"screen",label:"Screen",max_width:"100%",max_height:"100%"},{id:"desktop",label:"Desktop",max_width:1280,max_height:1080},{id:"tablet",label:"Tablet",max_width:1024,max_height:800},{id:"mobile",label:"Mobile",max_width:390,max_height:844}]),ne=T.useCallback(fe=>{K(new Set([fe])),localStorage.setItem("builder-breakpoint",String(fe)),console.log("[BuilderCore] Breakpoint changed:",fe)},[]);T.useEffect(()=>{(async()=>{if(t)try{const be=await(await Yt()).projects.getById(t);be?n(be):console.warn("[BuilderCore]    :",t)}catch(ge){console.error("[BuilderCore]    :",ge)}})()},[t]);const G=T.useRef(!1),te=T.useRef(null);T.useEffect(()=>((async()=>{if(!t||G.current||te.current===t)return;G.current=!0,A(!0);const ge=await q(t);if(!ge.success){E(ge.error?.message||"  "),G.current=!1;return}const be=Eo.getState().mode,oe=Ra.getState().currentLayoutId;if(be==="layout"&&oe)try{console.log(` [BuilderCore] Layout   - Layout ${oe.slice(0,8)}  `);const Ve=await(await Yt()).elements.getByLayout(oe),{elements:Ze,setElements:xe}=$e.getState(),Fe=[...Ze.filter(de=>de.layout_id!==oe),...Ve];xe(Fe,{skipHistory:!0}),console.log(` [BuilderCore] Layout  ${Ve.length}  `);const{fetchLayouts:et}=Ra.getState();await et(t),await vr.getState().initializeForProject(t)}catch(Le){console.error("[BuilderCore] Layout   :",Le)}A(!1),J(t),te.current=t,G.current=!1})(),()=>{Ki.clearIframeCache()}),[t,q,A,E,J]),T.useEffect(()=>{U()},[U]);const ae=ve.useRef(z);ve.useEffect(()=>{ae.current=z},[z]),T.useEffect(()=>{if(k!=="ready")return;const{tokens:fe}=qr.getState();fe.length>0&&ae.current(fe);let ge=fe.length;const be=qr.subscribe(oe=>{const Le=oe.tokens.length;Le>0&&ge!==Le&&(ae.current(oe.tokens),ge=Le)});return()=>{be()}},[k]),T.useEffect(()=>{r.length>0&&O(r)},[r,O]),T.useEffect(()=>{const fe=async ge=>{if(ge.data?.type!=="NAVIGATE_TO_PAGE")return;const{path:be}=ge.data.payload,oe=be.startsWith("/")?be:`/${be}`,Le=$.find(Ve=>{const Ze=Ve.slug||"/";return(Ze.startsWith("/")?Ze:`/${Ze}`)===oe});if(Le){console.log("[BuilderCore] Navigating to:",Le.name,oe);const Ve=await B(Le.id);Ve.success||N(Ve.error||new Error("  ")," ")}else console.warn(`[BuilderCore] Page not found for path: ${be}`),N(new Error(`   : ${be}`)," ")};return window.addEventListener("message",fe),()=>{window.removeEventListener("message",fe)}},[$,B,N]),T.useEffect(()=>{const fe=async Le=>{const{type:Ve,payload:Ze}=Le.data||{};switch(Ve){case"LOAD_DATA_TABLE":await ge(Ze);break;case"SYNC_COMPONENT":await be(Ze);break;case"SAVE_TO_DATA_TABLE":await oe(Ze);break}};async function ge(Le){const{dataTableName:Ve,forceRefresh:Ze}=Le,{dataTables:xe,loadDataTable:ht,refreshDataTable:Fe}=Fm.getState();let et=null;if(xe.forEach((de,re)=>{de.name===Ve&&(et=re)}),!et){console.warn(`[BuilderCore] DataTable '${Ve}' not found`);return}Ze?await Fe(et):await ht(et),console.log(`[BuilderCore] DataTable '${Ve}' loaded successfully`)}async function be(Le){const{sourceId:Ve,targetId:Ze,syncMode:xe,dataPath:ht}=Le,{elements:Fe,updateElementProps:et}=$e.getState(),de=Fe.find(rt=>rt.customId===Ve||rt.id===Ve);if(!de){console.warn(`[BuilderCore] Source element '${Ve}' not found`);return}const re=Fe.find(rt=>rt.customId===Ze||rt.id===Ze);if(!re){console.warn(`[BuilderCore] Target element '${Ze}' not found`);return}const Ce=de.props;let ke=Ce.selectedKeys||Ce.value||Ce.items;ht&&ke&&(ke=rB(ke,ht));const De=re.props,je=De.value||De.items||[];let mt;switch(xe){case"replace":mt=ke;break;case"merge":typeof je=="object"&&!Array.isArray(je)?mt=tQ(je,ke):mt=ke;break;case"append":Array.isArray(je)?mt=iB(je,ke):mt=ke;break;default:mt=ke}await et(re.id,{value:mt}),console.log(`[BuilderCore] Synced '${Ve}'  '${Ze}' (${xe})`)}async function oe(Le){const{dataTableName:Ve,source:Ze,sourcePath:xe,saveMode:ht,keyField:Fe,transform:et}=Le,{dataTables:de,dataTableStates:re}=Fm.getState();let Ce=null,ke=null;if(de.forEach((bt,dt)=>{bt.name===Ve&&(Ce=dt,ke=bt)}),!Ce||!ke){console.warn(`[BuilderCore] DataTable '${Ve}' not found`);return}let De;switch(Ze){case"response":De=$e.getState().lastApiResponse;break;case"variable":xe&&(De=rB($e.getState(),xe));break;case"static":De=L8e(xe||"[]",[]);break}if(et)try{De=new Function("data",`return ${et}`)(De)}catch(bt){console.warn("[BuilderCore] Transform failed:",bt)}const mt=re.get(Ce)?.data||[];let rt;switch(ht){case"replace":rt=Array.isArray(De)?De:[De];break;case"merge":rt=mt.map((bt,dt)=>({...bt,...Array.isArray(De)?De[dt]:De}));break;case"append":rt=iB(mt,De);break;case"upsert":rt=j8e(mt,De,Fe||"id");break;default:rt=mt}Fm.setState(bt=>{const dt=new Map(bt.dataTableStates),Je=dt.get(Ce);return Je&&dt.set(Ce,{...Je,data:rt,lastLoadedAt:Date.now()}),{dataTableStates:dt}}),console.log(`[BuilderCore] Saved to DataTable '${Ve}' (${ht})`)}return window.addEventListener("message",fe),()=>{window.removeEventListener("message",fe)}},[]);const pe=T.useCallback(()=>{console.log("Preview clicked")},[]),ye=T.useCallback(()=>{console.log("Play clicked")},[]),me=T.useCallback(()=>{console.log("Publish clicked")},[]);return T.useEffect(()=>{const fe=ge=>{const be=ge.target;if(be.closest(".selection-overlay")||be.closest(".sidebar")||be.closest(".inspector")||be.closest(".header")||be.closest(".footer")||be.closest("#previewFrame"))return;(be.classList.contains("workspace")||be.classList.contains("bg"))&&(a(null),Ki.clearOverlay())};return document.addEventListener("mousedown",fe),()=>{document.removeEventListener("mousedown",fe)}},[a]),l.jsxs(g8e,{children:[w&&l.jsxs("div",{className:"error-banner",children:[l.jsxs("span",{children:[" ",w]}),l.jsx("button",{onClick:P,children:""})]}),(S||V)&&l.jsx("div",{className:"loading-overlay",children:l.jsx("div",{className:"loading-spinner",children:S?"Initializing...":"Loading page..."})}),l.jsx(P8e,{}),l.jsx(sRe,{projectId:t,projectName:e?.name,breakpoint:Z,breakpoints:X,onBreakpointChange:ne,historyInfo:{current:u.currentIndex+1,total:u.totalEntries},canUndo:g,canRedo:v,onUndo:x,onRedo:_,onPreview:pe,onPlay:ye,onPublish:me,viewMode:f,onViewModeToggle:m}),f==="canvas"?l.jsxs(hRe,{projectId:t,breakpoint:new Set(Array.from(Z).map(String)),breakpoints:X,onIframeLoad:R,onMessage:D,children:[l.jsx(T8e,{}),s&&l.jsx(C8e,{})]}):l.jsx(m8e,{}),l.jsx("aside",{className:"sidebar",children:l.jsx(t8,{side:"left"})}),l.jsx("aside",{className:"inspector",children:l.jsx(t8,{side:"right"})}),l.jsx(aRe,{}),l.jsx(iZ,{toasts:H,onDismiss:Y})]})};function F8e(){return l.jsx(O8e,{})}const B8e=()=>{const t=B_(),[e,n]=T.useState(!1),[r,i]=T.useState(""),[a,s]=T.useState(""),o=Fl(async({email:v,password:x})=>{const{error:_}=await zr.auth.signUp({email:v,password:x});if(_)throw _;return" .  ."},{onSuccess:()=>{i(""),s("")}}),c=Fl(async({email:v,password:x})=>{const{error:_}=await zr.auth.signInWithPassword({email:v,password:x});if(_)throw _},{onSuccess:()=>{t("/dashboard")}}),u=o.isLoading||c.isLoading,h=o.error||c.error,f=o.data,m=async v=>{v.preventDefault();const x={email:r,password:a};try{e?await o.execute(x):await c.execute(x)}catch(_){console.error("[Signin] Auth failed:",_)}},g=()=>{n(!e),o.reset(),c.reset(),i(""),s("")};return l.jsx("main",{className:"auth-container",children:l.jsxs("div",{className:"auth-card",children:[l.jsxs("div",{className:"auth-header",children:[l.jsx("h1",{className:"auth-title",children:e?"Sign Up":"Sign In"}),l.jsx("p",{className:"auth-subtitle",children:e?"Create a new account":"Log in to your account"})]}),l.jsxs("form",{onSubmit:m,className:"auth-form",children:[l.jsx(_k,{className:"auth-form-field",label:"Email Address",type:"email",value:r,onChange:i,isRequired:!0,errorMessage:h?h.message:void 0}),l.jsx(_k,{className:"auth-form-field",label:"Password",type:"password",value:a,onChange:s,isRequired:!0,description:e?"Enter a secure password with at least 8 characters.":"Enter your account password."}),f&&l.jsx("div",{className:"success-message",children:l.jsx("p",{className:"success-text",children:f})}),l.jsx(Ut,{type:"submit",variant:"primary",isDisabled:u,children:u?e?"Signing Up...":"Signing In...":e?"Sign Up":"Sign In"}),l.jsxs("div",{className:"helper-text",children:[l.jsx(Ut,{variant:"ghost",onClick:g,children:e?"Log In":"Sign Up"}),e?null:l.jsx(Ut,{variant:"ghost",onClick:()=>t("/forgot-password"),children:"Forgot Password?"})]})]})]})})};function z8e(t){const{projectId:e,enableRealtime:n=!0}=t,r=qr(f=>f.activeTheme),i=qr(f=>f.loading),a=qr(f=>f.error),s=qr(f=>f.setProjectId),o=qr(f=>f.loadActiveTheme),c=qr(f=>f.activateTheme),u=qr(f=>f.subscribeToThemes);return T.useEffect(()=>{s(e),o(e)},[e]),T.useEffect(()=>{if(!n)return;const f=u();return()=>{f&&f()}},[n]),{activeTheme:r,loading:i,error:a,refetch:async()=>{await o(e)},switchTheme:async f=>c(f)}}function XT(t){const e=t.split(".");return{category:e[0]||"other",group:e[1],tokenName:e[2]||e[e.length-1],fullName:t}}function U8e(t){return{...t,parsed:XT(t.name)}}function V8e(t){return t.map(U8e)}function H8e(t,e){return t.filter(n=>XT(n.name).category===e)}function G8e(t,e,n){return t.filter(r=>{const i=XT(r.name);return i.category===e&&i.group===n})}function YT(t){const{themeId:e,filter:n,enableRealtime:r=!0}=t,[i,a]=T.useState([]),[s,o]=T.useState(!0),[c,u]=T.useState(null),h=T.useCallback(async()=>{try{o(!0),u(null);const N=await Ir.getResolvedTokens(e);a(N)}catch(N){const P=N instanceof Error?N.message:"  ";u(P),console.error("[useTokens] fetchTokens failed:",N)}finally{o(!1)}},[e]);T.useEffect(()=>{h()},[h]),T.useEffect(()=>!r||!e?void 0:Ir.subscribeToTokenChanges(e,P=>{console.log("[useTokens] Realtime update:",P),h()}),[r,e,h]);const f=T.useMemo(()=>{let N=i;if(n?.category&&(N=H8e(N,n.category)),n?.category&&n?.group&&(N=G8e(N,n.category,n.group)),n?.scope&&(N=N.filter(P=>P.scope===n.scope)),n?.showInherited===!1&&(N=N.filter(P=>!P.is_inherited)),n?.search){const P=n.search.toLowerCase();N=N.filter(R=>R.name.toLowerCase().includes(P)||R.type.toLowerCase().includes(P)||JSON.stringify(R.value).toLowerCase().includes(P))}return N},[i,n]),m=T.useMemo(()=>V8e(f),[f]),g=T.useMemo(()=>f.filter(N=>N.scope==="raw"),[f]),v=T.useMemo(()=>f.filter(N=>N.scope==="semantic"),[f]),x=T.useMemo(()=>f.filter(N=>N.is_inherited),[f]),_=T.useMemo(()=>f.filter(N=>!N.is_inherited),[f]),w=T.useCallback(async N=>{try{return await Ir.createToken({...N,theme_id:e}),r||await h(),!0}catch(P){const R=P instanceof Error?P.message:"  ";return u(R),console.error("[useTokens] createToken failed:",P),!1}},[e,r,h]),S=T.useCallback(async(N,P)=>{try{return a(R=>R.map(D=>D.id===N?{...D,...P}:D)),await Ir.updateToken(N,P),r||await h(),!0}catch(R){const D=R instanceof Error?R.message:"  ";return u(D),console.error("[useTokens] updateToken failed:",R),await h(),!1}},[r,h]),E=T.useCallback(async N=>{try{return await Ir.deleteToken(N),r||await h(),!0}catch(P){const R=P instanceof Error?P.message:"  ";return u(R),console.error("[useTokens] deleteToken failed:",P),!1}},[r,h]),A=T.useCallback(async N=>{try{const P=N.map(D=>({...D,theme_id:e})),R=await Ir.bulkUpsertTokens(P);return r||await h(),R}catch(P){const R=P instanceof Error?P.message:"   ";return u(R),console.error("[useTokens] bulkUpsertTokens failed:",P),0}},[e,r,h]);return{tokens:f,parsedTokens:m,rawTokens:g,semanticTokens:v,inheritedTokens:x,currentThemeTokens:_,loading:s,error:c,refetch:h,createToken:w,updateToken:S,deleteToken:E,bulkUpsertTokens:A}}const W8e={total:0,raw:0,semantic:0,byType:{},inherited:0};function q8e(t){const{themeId:e,enableRealtime:n=!0}=t,[r,i]=T.useState(null),[a,s]=T.useState(!0),[o,c]=T.useState(null),u=T.useCallback(async()=>{try{s(!0),c(null);const m=await Ir.getTokenStats(e);i(m)}catch(m){const g=m instanceof Error?m.message:"  ";c(g),console.error("[useTokenStats] fetchStats failed:",m),i(W8e)}finally{s(!1)}},[e]);T.useEffect(()=>{u()},[u]),T.useEffect(()=>!n||!e?void 0:Ir.subscribeToTokenChanges(e,g=>{console.log("[useTokenStats] Realtime update:",g),u()}),[n,e,u]);const h={raw:r&&r.total>0?r.raw/r.total*100:0,semantic:r&&r.total>0?r.semantic/r.total*100:0,inherited:r&&r.total>0?r.inherited/r.total*100:0},f=r?Object.entries(r.byType).map(([m,g])=>({type:m,count:g,percentage:r.total>0?g/r.total*100:0})).sort((m,g)=>g.count-m.count):[];return{stats:r,loading:a,error:o,refetch:u,percentages:h,topTypes:f}}const K8e=fn({slots:{container:"ai-generator-container",form:"ai-generator-form",formGroup:"form-group",progressBar:"progress-bar",results:"generation-results"}}),aB={analyzing:"  ",colors:"   ",typography:"  ",spacing:"   ",radius:"Border radius  ",shadows:"Shadow  ",semantic:"Semantic   ",finalizing:"  ",complete:""};function X8e({projectId:t,onThemeGenerated:e}){const n=K8e(),[r,i]=T.useState(null),[a,s]=T.useState(""),[o,c]=T.useState("#3b82f6"),[u,h]=T.useState("modern"),[f,m]=T.useState(""),g=Fl(async _=>{const w=A4e();let S=null;for await(const E of w.generateTheme(_))i(E),E.stage==="complete"&&E.data&&(S=E.data);return S},{onSuccess:_=>{e&&_.themeId&&e(_.themeId)}}),v=async()=>{if(!a.trim()){alert("  ");return}i(null);const _={projectId:t,themeName:a,brandColor:o,style:u,description:f||void 0,includeSemanticTokens:!0};try{await g.execute(_)}catch(w){console.error("[AIThemeGenerator] Generation failed:",w)}},x=()=>{i(null),g.reset(),s(""),c("#3b82f6"),h("modern"),m("")};return l.jsxs("div",{className:n.container(),children:[l.jsx("h2",{children:"AI  "}),l.jsx("p",{className:"subtitle",children:"        "}),!g.isLoading&&!g.data&&l.jsxs("form",{className:n.form(),onSubmit:_=>{_.preventDefault(),v()},children:[l.jsxs("div",{className:n.formGroup(),children:[l.jsxs("label",{htmlFor:"theme-name",children:["  ",l.jsx("span",{className:"required",children:"*"})]}),l.jsx("input",{id:"theme-name",type:"text",value:a,onChange:_=>s(_.target.value),placeholder:": Modern SaaS Theme",required:!0})]}),l.jsxs("div",{className:n.formGroup(),children:[l.jsx("label",{htmlFor:"brand-color",children:" "}),l.jsxs("div",{className:"color-input-group",children:[l.jsx("input",{id:"brand-color",type:"color",value:o,onChange:_=>c(_.target.value)}),l.jsx("input",{type:"text",value:o,onChange:_=>c(_.target.value),placeholder:"#3b82f6"})]}),l.jsx("p",{className:"field-hint",children:"      "})]}),l.jsxs("div",{className:n.formGroup(),children:[l.jsx("label",{htmlFor:"theme-style",children:" "}),l.jsxs("select",{id:"theme-style",value:u,onChange:_=>h(_.target.value),children:[l.jsx("option",{value:"modern",children:"Modern -  "}),l.jsx("option",{value:"classic",children:"Classic -  "}),l.jsx("option",{value:"playful",children:"Playful -  "}),l.jsx("option",{value:"professional",children:"Professional -   "}),l.jsx("option",{value:"minimal",children:"Minimal -  "})]})]}),l.jsxs("div",{className:n.formGroup(),children:[l.jsx("label",{htmlFor:"description",children:" ()"}),l.jsx("textarea",{id:"description",value:f,onChange:_=>m(_.target.value),placeholder:":   SaaS  ",rows:3})]}),l.jsx("button",{type:"submit",className:"generate-btn",children:"  "})]}),g.isLoading&&r&&l.jsxs("div",{className:"progress-container",children:[l.jsxs("div",{className:"progress-header",children:[l.jsx("h3",{children:aB[r.stage]}),l.jsxs("span",{className:"progress-percentage",children:[r.progress,"%"]})]}),l.jsx("div",{className:n.progressBar(),children:l.jsx("div",{className:"progress-fill",style:{width:`${r.progress}%`}})}),l.jsx("p",{className:"progress-message",children:r.message}),l.jsx("div",{className:"stage-indicators",children:["analyzing","colors","typography","spacing","semantic","finalizing"].map(_=>l.jsxs("div",{className:`stage-indicator ${r.stage===_?"active":""} ${["analyzing","colors","typography","spacing","semantic","finalizing"].indexOf(r.stage)>["analyzing","colors","typography","spacing","semantic","finalizing"].indexOf(_)?"completed":""}`,children:[l.jsx("div",{className:"stage-icon"}),l.jsx("span",{className:"stage-label",children:aB[_]})]},_))})]}),g.data&&l.jsxs("div",{className:n.results(),children:[l.jsxs("div",{className:"result-header",children:[l.jsx("h3",{children:"   !"}),l.jsx("button",{onClick:x,className:"new-theme-btn",children:"+   "})]}),l.jsxs("div",{className:"result-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:" "}),l.jsx("span",{className:"stat-value",children:g.data.themeName})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:" "}),l.jsxs("span",{className:"stat-value",children:[g.data.metadata.tokenCount,""]})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:" "}),l.jsx("span",{className:"stat-value",children:new Date(g.data.metadata.generatedAt).toLocaleString("ko-KR")})]})]}),l.jsxs("div",{className:"palette-preview",children:[l.jsx("h4",{children:" "}),l.jsx("div",{className:"color-grid",children:Object.entries(g.data.colorPalette).map(([_,w])=>l.jsxs("div",{className:"color-palette-item",children:[l.jsx("span",{className:"palette-name",children:_}),l.jsx("div",{className:"shade-grid",children:Object.entries(w).map(([S,E])=>l.jsx("div",{className:"shade-box",style:{background:`hsl(${E.h}, ${E.s}%, ${E.l}%)`},title:`${_}.${S}`},S))})]},_))})]})]}),g.error&&l.jsxs("div",{className:"error-message",children:[l.jsx("h3",{children:"  "}),l.jsx("p",{children:g.error.message}),l.jsx("button",{onClick:x,children:" "})]})]})}const Y8e=fn({slots:{container:"hct-generator-container",form:"hct-generator-form",formGroup:"form-group",preview:"hct-preview-section",results:"generation-results"}}),sB={analyzing:"Analyzing source color",palettes:"Generating tonal palettes",schemes:"Creating color schemes",tokens:"Converting to tokens",saving:"Saving theme",complete:"Complete"},nN={tonalSpot:{name:"Tonal Spot",description:"Default Material 3 scheme. Balanced and versatile."},vibrant:{name:"Vibrant",description:"High chroma colors for bold, energetic designs."},expressive:{name:"Expressive",description:"Playful colors with shifted tertiary for creative apps."},neutral:{name:"Neutral",description:"Subtle colors. Content-focused, minimal UI."},monochrome:{name:"Monochrome",description:"Grayscale scheme. Professional and elegant."},fidelity:{name:"Fidelity",description:"Maximum chroma. True to source color."},content:{name:"Content",description:"Uses source color directly. Best for image-derived colors."}};function Z8e({projectId:t,onThemeGenerated:e}){const n=Y8e(),[r,i]=T.useState(""),[a,s]=T.useState("#6750A4"),[o,c]=T.useState("tonalSpot"),[u,h]=T.useState(0),[f,m]=T.useState(!0),[g,v]=T.useState(""),[x,_]=T.useState("light"),[w,S]=T.useState(null),E=T.useMemo(()=>Y4e(a,o,x==="dark",u),[a,o,x,u]),A=T.useMemo(()=>Z4e(a,o),[a,o]),N=Fl(async D=>{const k=new X4e;let L=null;for await(const $ of k.generateTheme(D))S($),$.stage==="complete"&&$.data&&(L=$.data);return L},{onSuccess:D=>{e&&D.themeId&&e(D.themeId)}}),P=T.useCallback(async()=>{if(!r.trim()){alert("Please enter a theme name");return}S(null);const D={projectId:t,themeName:r,sourceColor:a,variant:o,contrastLevel:u,includeDarkMode:f,description:g||void 0};try{await N.execute(D)}catch(k){console.error("[HctThemeGenerator] Generation failed:",k)}},[r,t,a,o,u,f,g,N]),R=T.useCallback(()=>{S(null),N.reset(),i(""),s("#6750A4"),c("tonalSpot"),h(0),m(!0),v("")},[N]);return l.jsxs("div",{className:n.container(),children:[l.jsxs("div",{className:"hct-header",children:[l.jsx("h2",{children:"HCT Theme Generator"}),l.jsx("p",{className:"subtitle",children:"Generate Material 3 compliant themes using Google's HCT (Hue, Chroma, Tone) algorithm"})]}),l.jsxs("div",{className:"hct-content",children:[l.jsxs("div",{className:"hct-form-section",children:[!N.isLoading&&!N.data&&l.jsxs("form",{className:n.form(),onSubmit:D=>{D.preventDefault(),P()},children:[l.jsxs("div",{className:n.formGroup(),children:[l.jsxs("label",{htmlFor:"hct-theme-name",children:["Theme Name ",l.jsx("span",{className:"required",children:"*"})]}),l.jsx("input",{id:"hct-theme-name",type:"text",value:r,onChange:D=>i(D.target.value),placeholder:"e.g., Ocean Blue Theme",required:!0})]}),l.jsxs("div",{className:n.formGroup(),children:[l.jsx("label",{htmlFor:"hct-source-color",children:"Source Color"}),l.jsxs("div",{className:"color-input-group",children:[l.jsx("input",{id:"hct-source-color",type:"color",value:a,onChange:D=>s(D.target.value)}),l.jsx("input",{type:"text",value:a,onChange:D=>s(D.target.value),placeholder:"#6750A4",pattern:"^#[0-9A-Fa-f]{6}$"})]}),l.jsx("p",{className:"field-hint",children:"All colors will be derived from this source using HCT algorithm"})]}),l.jsxs("div",{className:n.formGroup(),children:[l.jsx("label",{htmlFor:"hct-variant",children:"Scheme Variant"}),l.jsx("select",{id:"hct-variant",value:o,onChange:D=>c(D.target.value),children:Object.entries(nN).map(([D,{name:k}])=>l.jsx("option",{value:D,children:k},D))}),l.jsx("p",{className:"field-hint variant-description",children:nN[o].description})]}),l.jsxs("div",{className:n.formGroup(),children:[l.jsxs("label",{htmlFor:"hct-contrast",children:["Contrast Level: ",u.toFixed(1)]}),l.jsx("input",{id:"hct-contrast",type:"range",min:"-1",max:"1",step:"0.1",value:u,onChange:D=>h(parseFloat(D.target.value))}),l.jsxs("div",{className:"contrast-labels",children:[l.jsx("span",{children:"Low"}),l.jsx("span",{children:"Normal"}),l.jsx("span",{children:"High"})]})]}),l.jsx("div",{className:n.formGroup(),children:l.jsxs("label",{className:"checkbox-label",children:[l.jsx("input",{type:"checkbox",checked:f,onChange:D=>m(D.target.checked)}),"Include Dark Mode Tokens"]})}),l.jsxs("div",{className:n.formGroup(),children:[l.jsx("label",{htmlFor:"hct-description",children:"Description (optional)"}),l.jsx("textarea",{id:"hct-description",value:g,onChange:D=>v(D.target.value),placeholder:"Describe your theme purpose...",rows:2})]}),l.jsx("button",{type:"submit",className:"generate-btn hct-generate-btn",children:"Generate Theme"})]}),N.isLoading&&w&&l.jsxs("div",{className:"progress-container",children:[l.jsxs("div",{className:"progress-header",children:[l.jsx("h3",{children:sB[w.stage]}),l.jsxs("span",{className:"progress-percentage",children:[w.progress,"%"]})]}),l.jsx("div",{className:"progress-bar",children:l.jsx("div",{className:"progress-fill",style:{width:`${w.progress}%`}})}),l.jsx("p",{className:"progress-message",children:w.message}),l.jsx("div",{className:"stage-indicators hct-stages",children:["analyzing","palettes","schemes","tokens","saving"].map(D=>{const k=["analyzing","palettes","schemes","tokens","saving"],L=k.indexOf(w.stage),$=k.indexOf(D);return l.jsxs("div",{className:`stage-indicator ${w.stage===D?"active":""} ${L>$?"completed":""}`,children:[l.jsx("div",{className:"stage-icon"}),l.jsx("span",{className:"stage-label",children:sB[D]})]},D)})})]}),N.data&&l.jsxs("div",{className:n.results(),children:[l.jsxs("div",{className:"result-header",children:[l.jsx("h3",{children:"Theme Generated!"}),l.jsx("button",{onClick:R,className:"new-theme-btn",children:"+ New Theme"})]}),l.jsxs("div",{className:"result-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:"Theme Name"}),l.jsx("span",{className:"stat-value",children:N.data.themeName})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:"Algorithm"}),l.jsxs("span",{className:"stat-value",children:["HCT (",nN[N.data.variant].name,")"]})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:"Tokens Generated"}),l.jsx("span",{className:"stat-value",children:N.data.metadata.tokenCount})]})]})]}),N.error&&l.jsxs("div",{className:"error-message",children:[l.jsx("h3",{children:"Error"}),l.jsx("p",{children:N.error.message}),l.jsx("button",{onClick:R,children:"Try Again"})]})]}),l.jsxs("div",{className:n.preview(),children:[l.jsxs("div",{className:"preview-header",children:[l.jsx("h3",{children:"Live Preview"}),l.jsxs("div",{className:"preview-mode-toggle",children:[l.jsx("button",{className:x==="light"?"active":"",onClick:()=>_("light"),children:"Light"}),l.jsx("button",{className:x==="dark"?"active":"",onClick:()=>_("dark"),children:"Dark"})]})]}),l.jsx("div",{className:"scheme-preview","data-mode":x,children:l.jsx(J8e,{scheme:E})}),l.jsxs("div",{className:"palettes-preview",children:[l.jsx("h4",{children:"Tonal Palettes"}),l.jsx(Q8e,{palettes:A})]})]})]})]})}function J8e({scheme:t}){const e=[{label:"Primary",colors:[{name:"Primary",value:t.primary,textColor:t.onPrimary},{name:"On Primary",value:t.onPrimary},{name:"Primary Container",value:t.primaryContainer,textColor:t.onPrimaryContainer},{name:"On Primary Container",value:t.onPrimaryContainer}]},{label:"Secondary",colors:[{name:"Secondary",value:t.secondary,textColor:t.onSecondary},{name:"On Secondary",value:t.onSecondary},{name:"Secondary Container",value:t.secondaryContainer,textColor:t.onSecondaryContainer},{name:"On Secondary Container",value:t.onSecondaryContainer}]},{label:"Tertiary",colors:[{name:"Tertiary",value:t.tertiary,textColor:t.onTertiary},{name:"On Tertiary",value:t.onTertiary},{name:"Tertiary Container",value:t.tertiaryContainer,textColor:t.onTertiaryContainer},{name:"On Tertiary Container",value:t.onTertiaryContainer}]},{label:"Error",colors:[{name:"Error",value:t.error,textColor:t.onError},{name:"On Error",value:t.onError},{name:"Error Container",value:t.errorContainer,textColor:t.onErrorContainer},{name:"On Error Container",value:t.onErrorContainer}]},{label:"Surface",colors:[{name:"Surface",value:t.surface,textColor:t.onSurface},{name:"On Surface",value:t.onSurface},{name:"Surface Variant",value:t.surfaceVariant,textColor:t.onSurfaceVariant},{name:"On Surface Variant",value:t.onSurfaceVariant}]},{label:"Container",colors:[{name:"Lowest",value:t.surfaceContainerLowest},{name:"Low",value:t.surfaceContainerLow},{name:"Default",value:t.surfaceContainer},{name:"High",value:t.surfaceContainerHigh},{name:"Highest",value:t.surfaceContainerHighest}]}];return l.jsx("div",{className:"scheme-color-grid",children:e.map(n=>l.jsxs("div",{className:"color-group",children:[l.jsx("span",{className:"group-label",children:n.label}),l.jsx("div",{className:"color-row",children:n.colors.map(r=>l.jsx("div",{className:"color-swatch",style:{backgroundColor:r.value,color:r.textColor||(eFe(r.value)?"#000":"#fff")},title:`${r.name}
${r.value}`,children:l.jsx("span",{className:"swatch-name",children:r.name})},r.name))})]},n.label))})}function Q8e({palettes:t}){const e=["primary","secondary","tertiary","neutral","neutralVariant","error"],n=[0,10,20,30,40,50,60,70,80,90,95,99,100];return l.jsx("div",{className:"tonal-palette-grid",children:e.map(r=>{const i=t[r];return l.jsxs("div",{className:"palette-row",children:[l.jsx("span",{className:"palette-name",children:tFe(r)}),l.jsx("div",{className:"tone-swatches",children:n.map(a=>{const s=i.tones[a];return s?l.jsx("div",{className:"tone-swatch",style:{backgroundColor:s},title:`Tone ${a}: ${s}`,children:l.jsx("span",{className:"tone-value",children:a})},a):null})})]},r)})})}function eFe(t){const e=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),r=parseInt(t.slice(5,7),16);return(.299*e+.587*n+.114*r)/255>.5}function tFe(t){return t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim()}const nFe=fn({slots:{container:"figma-importer-container",form:"figma-import-form",results:"import-results"}});function rFe({projectId:t,themeId:e,onImportComplete:n}){const r=nFe(),[i,a]=T.useState(""),[s,o]=T.useState(""),[c,u]=T.useState(!0),[h,f]=T.useState(!0),[m,g]=T.useState(!0),[v,x]=T.useState(!0),[_,w]=T.useState("rename"),S=Fl(async N=>await N4e(N.accessToken).importStyles(N),{onSuccess:N=>{n&&n(N)}}),E=async()=>{if(!i.trim()){alert("Figma   ");return}if(!s.trim()){alert("Figma Access Token ");return}const N={projectId:t,themeId:e,fileKey:i,accessToken:s,importColors:c,importTextStyles:h,importEffects:m,importVariables:v,conflictResolution:_};try{await S.execute(N)}catch(P){console.error("[FigmaImporter] Import failed:",P)}},A=()=>{S.reset(),a(""),o("")};return l.jsxs("div",{className:r.container(),children:[l.jsx("h2",{children:"Figma Import"}),l.jsx("p",{className:"subtitle",children:"Figma  , ,   "}),!S.isLoading&&!S.data&&l.jsxs("form",{className:r.form(),onSubmit:N=>{N.preventDefault(),E()},children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{htmlFor:"file-key",children:["Figma   ",l.jsx("span",{className:"required",children:"*"})]}),l.jsx("input",{id:"file-key",type:"text",value:i,onChange:N=>a(N.target.value),placeholder:": ABC123DEF456",required:!0}),l.jsxs("p",{className:"field-hint",children:["Figma URL : figma.com/file/",l.jsx("strong",{children:"FILE_KEY"}),"/..."]})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{htmlFor:"access-token",children:["Figma Personal Access Token ",l.jsx("span",{className:"required",children:"*"})]}),l.jsx("input",{id:"access-token",type:"password",value:s,onChange:N=>o(N.target.value),placeholder:"figd_...",required:!0}),l.jsx("p",{className:"field-hint",children:"Figma Settings  Account  Personal Access Tokens "})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Import "}),l.jsxs("div",{className:"checkbox-group",children:[l.jsxs("label",{className:"checkbox-label",children:[l.jsx("input",{type:"checkbox",checked:c,onChange:N=>u(N.target.checked)})," "]}),l.jsxs("label",{className:"checkbox-label",children:[l.jsx("input",{type:"checkbox",checked:h,onChange:N=>f(N.target.checked)})," "]}),l.jsxs("label",{className:"checkbox-label",children:[l.jsx("input",{type:"checkbox",checked:m,onChange:N=>g(N.target.checked)}),"  (Shadow)"]}),l.jsxs("label",{className:"checkbox-label",children:[l.jsx("input",{type:"checkbox",checked:v,onChange:N=>x(N.target.checked)}),"Figma Variables ()"]})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"conflict-resolution",children:"  "}),l.jsxs("select",{id:"conflict-resolution",value:_,onChange:N=>w(N.target.value),children:[l.jsx("option",{value:"skip",children:"Skip -   "}),l.jsx("option",{value:"overwrite",children:"Overwrite -   "}),l.jsx("option",{value:"rename",children:"Rename -    ()"})]}),l.jsx("p",{className:"field-hint",children:"      "})]}),l.jsx("button",{type:"submit",className:"import-btn",disabled:S.isLoading,children:S.isLoading?" Import ...":" Figma "})]}),S.isLoading&&l.jsxs("div",{className:"importing-state",children:[l.jsx("div",{className:"spinner"}),l.jsx("p",{children:"Figma   ..."})]}),S.data&&l.jsxs("div",{className:r.results(),children:[l.jsxs("div",{className:"result-header",children:[l.jsx("h3",{children:S.data.success?" Import !":" Import  ( )"}),l.jsx("button",{onClick:A,className:"reset-btn",children:" Import"})]}),l.jsxs("div",{className:"import-stats",children:[l.jsxs("div",{className:"stat-card",children:[l.jsx("span",{className:"stat-number",children:S.data.imported.colors}),l.jsx("span",{className:"stat-label",children:""})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("span",{className:"stat-number",children:S.data.imported.textStyles}),l.jsx("span",{className:"stat-label",children:""})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("span",{className:"stat-number",children:S.data.imported.effects}),l.jsx("span",{className:"stat-label",children:""})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("span",{className:"stat-number",children:S.data.imported.variables}),l.jsx("span",{className:"stat-label",children:""})]}),l.jsxs("div",{className:"stat-card total",children:[l.jsx("span",{className:"stat-number",children:S.data.imported.total}),l.jsx("span",{className:"stat-label",children:" "})]})]}),S.data.skipped>0&&l.jsx("div",{className:"skipped-notice",children:l.jsxs("span",{children:[" ",S.data.skipped,"   ()"]})}),S.data.errors.length>0&&l.jsxs("div",{className:"error-list",children:[l.jsxs("h4",{children:["  (",S.data.errors.length,")"]}),l.jsxs("ul",{children:[S.data.errors.slice(0,10).map((N,P)=>l.jsxs("li",{children:[l.jsx("strong",{children:N.styleName})," (",N.styleType,"): ",N.reason]},P)),S.data.errors.length>10&&l.jsxs("li",{children:["... ",S.data.errors.length-10,""]})]})]}),S.data.tokens.length>0&&l.jsxs("div",{className:"token-list-preview",children:[l.jsx("h4",{children:"   ( 10)"}),l.jsxs("ul",{children:[S.data.tokens.slice(0,10).map((N,P)=>l.jsxs("li",{children:[l.jsx("span",{className:"token-name",children:N.name}),l.jsx("span",{className:"token-type",children:N.type})]},P)),S.data.tokens.length>10&&l.jsxs("li",{className:"more",children:["... ",S.data.tokens.length-10,""]})]})]})]}),S.error&&l.jsxs("div",{className:"error-message",children:[l.jsx("h3",{children:"  "}),l.jsx("p",{children:S.error.message}),l.jsx("button",{onClick:A,children:" "})]})]})}const iFe=fn({slots:{container:"token-editor-container",sidebar:"token-editor-sidebar",main:"token-editor-main",panel:"token-editor-panel"}});function aFe({themeId:t,projectId:e}){const n=iFe(),[r,i]=T.useState(null),[a,s]=T.useState("all"),[o,c]=T.useState("all"),[u,h]=T.useState(""),{tokens:f,loading:m,createToken:g,updateToken:v,deleteToken:x}=YT({themeId:t,filter:{category:a==="all"?void 0:a,scope:o==="all"?void 0:o,search:u||void 0},enableRealtime:!0}),{stats:_}=q8e({themeId:t}),w=T.useMemo(()=>{const D=new Set;return f.forEach(k=>{const L=XT(k.name);D.add(L.category)}),Array.from(D).sort()},[f]),S=T.useMemo(()=>f.find(D=>D.id===r)||null,[f,r]),E=async()=>{const D=prompt("  (: color.brand.primary):");if(!D)return;const L=prompt("  (color/typography/spacing/shadow):")||"color",$=prompt(" :");$&&await g({project_id:e,name:D,type:L,value:$,scope:"raw",css_variable:`--${D.replace(/\./g,"-")}`})},A=async D=>{r&&await v(r,D)},N=async()=>{r&&confirm(" ?")&&(await x(r),i(null))},P=async()=>{if(!S||S.type!=="color")return;if(!jd(S.value)){alert("HSL   .");return}if(S.name.endsWith(".dark")){alert("  .");return}const D=`${S.name}.dark`;if(f.find(B=>B.name===D)){alert("   .");return}const L=S.value,$=bCe(L);await g({project_id:e,name:D,type:"color",value:$,scope:S.scope,css_variable:S.css_variable?`${S.css_variable.replace(/-dark$/,"")}`:`--${D.replace(/\./g,"-")}`}),console.log(`[TokenEditor] Generated dark variant: ${D}`)},R=T.useMemo(()=>{if(!S||S.type!=="color"||S.name.endsWith(".dark"))return!1;const D=`${S.name}.dark`;return!f.some(k=>k.name===D)},[S,f]);return m?l.jsx("div",{className:n.container(),children:l.jsxs("div",{className:"loading-state",children:[l.jsx("div",{className:"spinner"}),l.jsx("p",{children:"  ..."})]})}):l.jsxs("div",{className:n.container(),children:[l.jsxs("aside",{className:n.sidebar(),children:[l.jsxs("div",{className:"sidebar-header",children:[l.jsx("h3",{children:" "}),l.jsx("button",{className:"create-token-btn",onClick:E,children:"+  "})]}),l.jsx("div",{className:"search-box",children:l.jsx("input",{type:"text",placeholder:" ...",value:u,onChange:D=>h(D.target.value)})}),l.jsxs("div",{className:"filters",children:[l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{children:""}),l.jsxs("select",{value:a,onChange:D=>s(D.target.value),children:[l.jsx("option",{value:"all",children:""}),w.map(D=>l.jsx("option",{value:D,children:D},D))]})]}),l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{children:"Scope"}),l.jsxs("select",{value:o,onChange:D=>c(D.target.value),children:[l.jsx("option",{value:"all",children:""}),l.jsx("option",{value:"raw",children:"Raw"}),l.jsx("option",{value:"semantic",children:"Semantic"})]})]})]}),_&&l.jsxs("div",{className:"token-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:" "}),l.jsx("span",{className:"stat-value",children:_.total})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:"Raw"}),l.jsx("span",{className:"stat-value",children:_.raw})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:"Semantic"}),l.jsx("span",{className:"stat-value",children:_.semantic})]})]}),l.jsx("div",{className:"token-list",children:f.length===0?l.jsx("div",{className:"empty-state",children:l.jsx("p",{children:" "})}):f.map(D=>l.jsxs("div",{className:`token-item ${r===D.id?"active":""}`,onClick:()=>i(D.id),children:[l.jsxs("div",{className:"token-item-header",children:[l.jsx("span",{className:"token-name",children:D.name}),l.jsx("span",{className:`token-scope ${D.scope}`,children:D.scope})]}),l.jsxs("div",{className:"token-item-body",children:[l.jsx("span",{className:"token-type",children:D.type}),l.jsx("div",{className:"token-preview",children:D.type==="color"&&jd(D.value)&&l.jsx("div",{className:"color-preview-box",style:{background:`hsl(${D.value.h||0}, ${D.value.s||0}%, ${D.value.l||50}%)`}})})]})]},D.id))})]}),l.jsx("main",{className:n.main(),children:S?l.jsxs("div",{className:"token-detail",children:[l.jsxs("div",{className:"detail-header",children:[l.jsx("h2",{children:S.name}),l.jsxs("div",{className:"detail-header-actions",children:[R&&l.jsx("button",{className:"generate-dark-btn",onClick:P,title:"   ",children:"Generate Dark Variant"}),l.jsx("button",{className:"delete-btn",onClick:N,children:""})]})]}),l.jsxs("div",{className:"detail-body",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",value:S.name,onChange:D=>A({name:D.target.value})})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsxs("select",{value:S.type,onChange:D=>A({type:D.target.value}),children:[l.jsx("option",{value:"color",children:"Color"}),l.jsx("option",{value:"typography",children:"Typography"}),l.jsx("option",{value:"spacing",children:"Spacing"}),l.jsx("option",{value:"shadow",children:"Shadow"}),l.jsx("option",{value:"border",children:"Border"}),l.jsx("option",{value:"radius",children:"Radius"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Scope"}),l.jsxs("select",{value:S.scope,onChange:D=>A({scope:D.target.value}),children:[l.jsx("option",{value:"raw",children:"Raw"}),l.jsx("option",{value:"semantic",children:"Semantic"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),S.type==="color"&&jd(S.value)&&l.jsx("div",{className:"color-editor",children:l.jsxs("div",{className:"color-inputs",children:[l.jsx("input",{type:"number",placeholder:"H (0-360)",value:S.value.h||0,onChange:D=>A({value:{...S.value,h:parseInt(D.target.value)}})}),l.jsx("input",{type:"number",placeholder:"S (0-100)",value:S.value.s||0,onChange:D=>A({value:{...S.value,s:parseInt(D.target.value)}})}),l.jsx("input",{type:"number",placeholder:"L (0-100)",value:S.value.l||50,onChange:D=>A({value:{...S.value,l:parseInt(D.target.value)}})}),l.jsx("input",{type:"number",step:"0.1",placeholder:"A (0-1)",value:S.value.a||1,onChange:D=>A({value:{...S.value,a:parseFloat(D.target.value)}})})]})}),(S.type!=="color"||!jd(S.value))&&l.jsx("textarea",{value:JSON.stringify(S.value,null,2),onChange:D=>{try{const k=JSON.parse(D.target.value);A({value:k})}catch{}},rows:5})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"CSS Variable"}),l.jsx("input",{type:"text",value:S.css_variable||"",onChange:D=>A({css_variable:D.target.value})})]})]}),l.jsxs("div",{className:"token-preview",children:[l.jsx("h3",{children:""}),S.type==="color"&&jd(S.value)&&l.jsxs("div",{className:"preview-content",children:[l.jsx("div",{className:"color-preview-large",style:{background:`hsl(${S.value.h||0}, ${S.value.s||0}%, ${S.value.l||50}%)`}}),l.jsxs("div",{className:"preview-info",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"HSL:"})," hsl(",S.value.h||0,", ",S.value.s||0,"%,"," ",S.value.l||50,"%)"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"CSS Variable:"})," ",S.css_variable||"N/A"]})]})]}),(S.type!=="color"||!jd(S.value))&&l.jsx("div",{className:"preview-content",children:l.jsx("pre",{children:JSON.stringify(S.value,null,2)})})]})]}):l.jsx("div",{className:"empty-selection",children:l.jsx("p",{children:" "})})})]})}const sFe=fn({slots:{container:"theme-exporter-container",form:"exporter-form",preview:"export-preview"}});function oFe({themeId:t}){const e=sFe(),{tokens:n,loading:r}=YT({themeId:t,enableRealtime:!1}),[i,a]=T.useState("css"),[s,o]=T.useState(!0),[c,u]=T.useState(!0),[h,f]=T.useState(!1),m=Fl(async _=>await EO.exportTokens(n,_)),g=async()=>{if(n.length===0){alert("Export  ");return}const _={format:i,includeComments:s,groupByCategory:c,minify:h};try{await m.execute(_)}catch(w){console.error("[ThemeExporter] Export failed:",w)}},v=()=>{m.data&&EO.downloadFile(m.data)},x=()=>{m.reset()};return l.jsxs("div",{className:e.container(),children:[l.jsx("h2",{children:"Export "}),l.jsx("p",{className:"subtitle",children:"  CSS, Tailwind, SCSS, JSON  "}),r&&l.jsxs("div",{className:"loading-state",children:[l.jsx("div",{className:"spinner"}),l.jsx("p",{children:"  ..."})]}),!r&&l.jsxs(l.Fragment,{children:[l.jsxs("form",{className:e.form(),onSubmit:_=>{_.preventDefault(),g()},children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{htmlFor:"export-format",children:["Export  ",l.jsx("span",{className:"required",children:"*"})]}),l.jsxs("select",{id:"export-format",value:i,onChange:_=>a(_.target.value),children:[l.jsx("option",{value:"css",children:"CSS Variables"}),l.jsx("option",{value:"tailwind",children:"Tailwind Config"}),l.jsx("option",{value:"scss",children:"SCSS Variables"}),l.jsx("option",{value:"json",children:"JSON"})]}),l.jsxs("p",{className:"field-hint",children:[i==="css"&&"CSS Custom Properties (:root)",i==="tailwind"&&"Tailwind Config (theme.extend)",i==="scss"&&"SCSS Variables ($variable)",i==="json"&&"JSON  (Design Token Format)"]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Export "}),l.jsxs("div",{className:"checkbox-group",children:[l.jsxs("label",{className:"checkbox-label",children:[l.jsx("input",{type:"checkbox",checked:s,onChange:_=>o(_.target.checked)}),"  "]}),l.jsxs("label",{className:"checkbox-label",children:[l.jsx("input",{type:"checkbox",checked:c,onChange:_=>u(_.target.checked)})," "]}),l.jsxs("label",{className:"checkbox-label",children:[l.jsx("input",{type:"checkbox",checked:h,onChange:_=>f(_.target.checked)})," (Minify)"]})]})]}),l.jsxs("div",{className:"token-count-info",children:[l.jsx("span",{className:"info-label",children:"Export  "}),l.jsxs("span",{className:"info-value",children:[n.length,""]})]}),l.jsx("button",{type:"submit",className:"export-btn",children:" Export "})]}),m.data&&l.jsxs("div",{className:e.preview(),children:[l.jsxs("div",{className:"preview-header",children:[l.jsxs("div",{className:"preview-title",children:[l.jsx("h3",{children:"Export "}),l.jsx("span",{className:"file-name",children:m.data.filename})]}),l.jsxs("div",{className:"preview-actions",children:[l.jsx("button",{onClick:v,className:"download-btn",children:" "}),l.jsx("button",{onClick:x,className:"reset-btn",children:"  Export"})]})]}),l.jsxs("div",{className:"preview-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:""}),l.jsx("span",{className:"stat-value",children:m.data.format.toUpperCase()})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:""}),l.jsx("span",{className:"stat-value",children:m.data.filename})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:""}),l.jsxs("span",{className:"stat-value",children:[(m.data.content.length/1024).toFixed(2)," KB"]})]})]}),l.jsxs("div",{className:"preview-content",children:[l.jsxs("div",{className:"code-header",children:[l.jsx("span",{className:"code-label",children:""}),l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(m.data.content),alert(" ")},className:"copy-btn",children:" "})]}),l.jsx("pre",{className:"code-block",children:l.jsx("code",{children:m.data.content})})]})]}),m.error&&l.jsxs("div",{className:"error-message",children:[l.jsx("h3",{children:"  "}),l.jsx("p",{children:m.error.message}),l.jsx("button",{onClick:x,children:" "})]})]})]})}const lFe=fn({slots:{container:"dark-mode-container",form:"dark-mode-form",preview:"dark-mode-preview"}});function cFe({themeId:t,projectId:e,onDarkThemeCreated:n}){const r=lFe(),{tokens:i,loading:a}=YT({themeId:t,enableRealtime:!1}),{createTheme:s}=r$({projectId:e,enableRealtime:!1}),[o,c]=T.useState("default"),[u,h]=T.useState(zC.PRESETS.default),[f,m]=T.useState(""),[g,v]=T.useState([]),x=Fl(async({themeName:R,options:D})=>(await zC.generateDarkTheme(t,i,R,D),{themeId:(await s(R)).id}),{onSuccess:R=>{n&&n(R.themeId)}}),_=R=>{c(R),h(zC.PRESETS[R])},w=(R,D)=>{h(k=>({...k,[R]:D}))},S=async()=>{setError(null);try{const R=await zC.convertToDarkMode(i,u);v(R)}catch(R){setError(R instanceof Error?R.message:" "),console.error("[DarkModeGenerator] Preview failed:",R)}},E=async()=>{if(!f.trim()){alert("   ");return}try{await x.execute({themeName:f,options:u})}catch(R){console.error("[DarkModeGenerator] Generation failed:",R)}},A=()=>{v([]),x.reset(),m("")},N=i.filter(R=>R.type==="color"),P=g.filter(R=>R.type==="color");return l.jsxs("div",{className:r.container(),children:[l.jsx("h2",{children:"  "}),l.jsx("p",{className:"subtitle",children:"        "}),a&&l.jsxs("div",{className:"loading-state",children:[l.jsx("div",{className:"spinner"}),l.jsx("p",{children:"  ..."})]}),!a&&!x.isSuccess&&l.jsxs(l.Fragment,{children:[l.jsxs("form",{className:r.form(),onSubmit:R=>{R.preventDefault(),E()},children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{htmlFor:"dark-theme-name",children:["   ",l.jsx("span",{className:"required",children:"*"})]}),l.jsx("input",{id:"dark-theme-name",type:"text",value:f,onChange:R=>m(R.target.value),placeholder:": Dark Theme",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"preset",children:""}),l.jsxs("select",{id:"preset",value:o,onChange:R=>_(R.target.value),children:[l.jsx("option",{value:"default",children:" ( )"}),l.jsx("option",{value:"oled",children:"  (OLED )"}),l.jsx("option",{value:"soft",children:"  (  )"}),l.jsx("option",{value:"highContrast",children:" ( )"})]}),l.jsx("p",{className:"field-hint",children:"      "})]}),l.jsxs("div",{className:"options-panel",children:[l.jsx("h3",{children:" "}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{htmlFor:"inversion-strength",children:[" : ",u.inversionStrength?.toFixed(1)]}),l.jsx("input",{id:"inversion-strength",type:"range",min:"0",max:"1",step:"0.1",value:u.inversionStrength||1,onChange:R=>w("inversionStrength",parseFloat(R.target.value))}),l.jsx("p",{className:"field-hint",children:"    (0 =  , 1 =  )"})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{htmlFor:"saturation-adjustment",children:[" : ",u.saturationAdjustment,"%"]}),l.jsx("input",{id:"saturation-adjustment",type:"range",min:"-30",max:"30",step:"5",value:u.saturationAdjustment||0,onChange:R=>w("saturationAdjustment",parseInt(R.target.value))}),l.jsx("p",{className:"field-hint",children:"    "})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{htmlFor:"lightness-offset",children:[" : ",u.lightnessOffset,"%"]}),l.jsx("input",{id:"lightness-offset",type:"range",min:"-20",max:"20",step:"5",value:u.lightnessOffset||0,onChange:R=>w("lightnessOffset",parseInt(R.target.value))}),l.jsx("p",{className:"field-hint",children:"  "})]}),l.jsxs("div",{className:"checkbox-group",children:[l.jsxs("label",{className:"checkbox-label",children:[l.jsx("input",{type:"checkbox",checked:u.adjustTextColors!==!1,onChange:R=>w("adjustTextColors",R.target.checked)}),"   "]}),l.jsxs("label",{className:"checkbox-label",children:[l.jsx("input",{type:"checkbox",checked:u.ensureContrast!==!1,onChange:R=>w("ensureContrast",R.target.checked)}),"   "]})]})]}),l.jsxs("div",{className:"token-count-info",children:[l.jsx("span",{className:"info-label",children:"   "}),l.jsxs("span",{className:"info-value",children:[N.length,""]})]}),l.jsxs("div",{className:"action-buttons",children:[l.jsx("button",{type:"button",onClick:S,className:"preview-btn",children:" "}),l.jsx("button",{type:"submit",className:"generate-btn",disabled:x.isLoading,children:x.isLoading?"  ...":"   "})]})]}),g.length>0&&l.jsxs("div",{className:r.preview(),children:[l.jsxs("div",{className:"preview-header",children:[l.jsx("h3",{children:" "}),l.jsxs("span",{className:"preview-count",children:[P.length," "]})]}),l.jsxs("div",{className:"comparison-grid",children:[l.jsxs("div",{className:"comparison-column",children:[l.jsx("h4",{children:" "}),l.jsx("div",{className:"color-list",children:N.slice(0,10).map(R=>{const D=R.value;return l.jsxs("div",{className:"color-item",children:[l.jsx("div",{className:"color-swatch",style:{background:`hsl(${D.h}, ${D.s}%, ${D.l}%)`}}),l.jsx("span",{className:"color-name",children:R.name}),l.jsxs("span",{className:"color-value",children:["HSL(",D.h,", ",D.s,"%, ",D.l,"%)"]})]},R.id)})})]}),l.jsxs("div",{className:"comparison-column dark-mode",children:[l.jsx("h4",{children:" "}),l.jsx("div",{className:"color-list",children:P.slice(0,10).map(R=>{const D=R.value;return l.jsxs("div",{className:"color-item",children:[l.jsx("div",{className:"color-swatch",style:{background:`hsl(${D.h}, ${D.s}%, ${D.l}%)`}}),l.jsx("span",{className:"color-name",children:R.name}),l.jsxs("span",{className:"color-value",children:["HSL(",D.h,", ",D.s,"%, ",D.l,"%)"]})]},R.id)})})]})]})]})]}),x.isSuccess&&l.jsxs("div",{className:"success-message",children:[l.jsx("h3",{children:"    !"}),l.jsxs("p",{children:['"',f,'"   .']}),l.jsx("button",{onClick:A,className:"reset-btn",children:"+   "})]}),x.error&&l.jsxs("div",{className:"error-message",children:[l.jsx("h3",{children:"  "}),l.jsx("p",{children:x.error.message}),l.jsx("button",{onClick:A,children:" "})]})]})}const uFe=fn({slots:{container:"figma-plugin-container",form:"figma-plugin-form",preview:"figma-plugin-preview"}});function dFe({themeId:t}){const e=uFe(),{tokens:n,loading:r}=YT({themeId:t,enableRealtime:!1}),[i,a]=T.useState("XStudio Theme Import"),[s,o]=T.useState("Import design tokens from XStudio"),[c,u]=T.useState(!0),[h,f]=T.useState(!0),[m,g]=T.useState(!0),[v,x]=T.useState(!0),[_,w]=T.useState(!0),[S,E]=T.useState(!0),[A,N]=T.useState(null),P=Fl(async $=>await CO.exportToFigmaPlugin(n,$),{onSuccess:$=>{const B=Object.keys($.files)[0];B&&N(B)}}),R=async()=>{if(!i.trim()){alert("Plugin  ");return}if(n.length===0){alert("Export  ");return}const $={pluginName:i,description:s||void 0,includeFiles:{manifest:c,code:h,ui:m},exportTargets:{colors:v,textStyles:_,effects:S}};try{await P.execute($)}catch(B){console.error("[FigmaPluginExporter] Export failed:",B)}},D=async()=>{P.data&&await CO.downloadPluginFiles(P.data)},k=($,B)=>{const q=new Blob([B],{type:$.endsWith(".html")?"text/html":"text/plain"}),U=URL.createObjectURL(q),J=document.createElement("a");J.href=U,J.download=$,document.body.appendChild(J),J.click(),document.body.removeChild(J),URL.revokeObjectURL(U)},L=()=>{P.reset(),N(null)};return l.jsxs("div",{className:e.container(),children:[l.jsx("h2",{children:"Figma Plugin Export"}),l.jsx("p",{className:"subtitle",children:" Figma Plugin   Figma  Import  "}),r&&l.jsxs("div",{className:"loading-state",children:[l.jsx("div",{className:"spinner"}),l.jsx("p",{children:"  ..."})]}),!r&&!P.data&&l.jsxs("form",{className:e.form(),onSubmit:$=>{$.preventDefault(),R()},children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{htmlFor:"plugin-name",children:["Plugin  ",l.jsx("span",{className:"required",children:"*"})]}),l.jsx("input",{id:"plugin-name",type:"text",value:i,onChange:$=>a($.target.value),placeholder:": XStudio Theme Import",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"description",children:" ()"}),l.jsx("textarea",{id:"description",value:s,onChange:$=>o($.target.value),placeholder:"Plugin ",rows:2})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsxs("div",{className:"checkbox-group",children:[l.jsxs("label",{className:"checkbox-label",children:[l.jsx("input",{type:"checkbox",checked:c,onChange:$=>u($.target.checked)}),"manifest.json (Plugin  )"]}),l.jsxs("label",{className:"checkbox-label",children:[l.jsx("input",{type:"checkbox",checked:h,onChange:$=>f($.target.checked)}),"code.ts (Plugin )"]}),l.jsxs("label",{className:"checkbox-label",children:[l.jsx("input",{type:"checkbox",checked:m,onChange:$=>g($.target.checked)}),"ui.html (Plugin UI)"]})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Export "}),l.jsxs("div",{className:"checkbox-group",children:[l.jsxs("label",{className:"checkbox-label",children:[l.jsx("input",{type:"checkbox",checked:v,onChange:$=>x($.target.checked)})," "]}),l.jsxs("label",{className:"checkbox-label",children:[l.jsx("input",{type:"checkbox",checked:_,onChange:$=>w($.target.checked)})," "]}),l.jsxs("label",{className:"checkbox-label",children:[l.jsx("input",{type:"checkbox",checked:S,onChange:$=>E($.target.checked)}),"  (Shadow)"]})]})]}),l.jsxs("div",{className:"token-count-info",children:[l.jsx("span",{className:"info-label",children:"Export  "}),l.jsxs("span",{className:"info-value",children:[n.length,""]})]}),l.jsx("button",{type:"submit",className:"export-btn",children:" Figma Plugin "})]}),P.data&&l.jsxs("div",{className:e.preview(),children:[l.jsxs("div",{className:"preview-header",children:[l.jsxs("div",{className:"preview-title",children:[l.jsx("h3",{children:"Plugin   "}),l.jsxs("span",{className:"file-count",children:[Object.keys(P.data.files).length," "]})]}),l.jsxs("div",{className:"preview-actions",children:[l.jsx("button",{onClick:D,className:"download-all-btn",children:"  "}),l.jsx("button",{onClick:L,className:"reset-btn",children:"  "})]})]}),l.jsxs("div",{className:"preview-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:"Plugin "}),l.jsx("span",{className:"stat-value",children:P.data.metadata.pluginName})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:" "}),l.jsxs("span",{className:"stat-value",children:[P.data.metadata.tokenCount,""]})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-label",children:" "}),l.jsx("span",{className:"stat-value",children:new Date(P.data.metadata.generatedAt).toLocaleString("ko-KR")})]})]}),l.jsx("div",{className:"file-tabs",children:Object.keys(P.data.files).map($=>l.jsxs("button",{className:`file-tab ${A===$?"active":""}`,onClick:()=>N($),children:[" ",$]},$))}),A&&P.data.files[A]&&l.jsxs("div",{className:"file-content",children:[l.jsxs("div",{className:"file-header",children:[l.jsx("span",{className:"file-name",children:A}),l.jsxs("div",{className:"file-actions",children:[l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(P.data.files[A]),alert(" ")},className:"copy-btn",children:" "}),l.jsx("button",{onClick:()=>k(A,P.data.files[A]),className:"download-btn",children:" "})]})]}),l.jsx("pre",{className:"code-block",children:l.jsx("code",{children:P.data.files[A]})})]}),l.jsxs("div",{className:"instructions",children:[l.jsx("h4",{children:" Figma Plugin  "}),l.jsxs("ol",{children:[l.jsx("li",{children:"Figma Desktop App "}),l.jsx("li",{children:"Menu  Plugins  Development  Import plugin from manifest..."}),l.jsx("li",{children:" manifest.json  "}),l.jsx("li",{children:"Plugin  Plugins    "})]})]})]}),P.error&&l.jsxs("div",{className:"error-message",children:[l.jsx("h3",{children:"  "}),l.jsx("p",{children:P.error.message}),l.jsx("button",{onClick:L,children:" "})]})]})}function hFe(t,e,n){n/=100;const r=e*Math.min(n,1-n)/100,i=a=>{const s=(a+t/30)%12,o=n-r*Math.max(Math.min(s-3,9-s,1),-1);return Math.round(255*o).toString(16).padStart(2,"0")};return`#${i(0)}${i(8)}${i(4)}`}const fFe=[{role:"primary",label:"Primary",lightShade:"primary-600",darkShade:"primary-400",category:"primary"},{role:"on-primary",label:"On Primary",lightShade:"white",darkShade:"primary-900",category:"primary"},{role:"primary-container",label:"Primary Container",lightShade:"primary-100",darkShade:"primary-800",category:"primary"},{role:"on-primary-container",label:"On Primary Container",lightShade:"primary-900",darkShade:"primary-100",category:"primary"},{role:"secondary",label:"Secondary",lightShade:"secondary-600",darkShade:"secondary-400",category:"secondary"},{role:"on-secondary",label:"On Secondary",lightShade:"white",darkShade:"secondary-900",category:"secondary"},{role:"secondary-container",label:"Secondary Container",lightShade:"secondary-100",darkShade:"secondary-800",category:"secondary"},{role:"on-secondary-container",label:"On Secondary Container",lightShade:"secondary-900",darkShade:"secondary-100",category:"secondary"},{role:"tertiary",label:"Tertiary",lightShade:"tertiary-600",darkShade:"tertiary-400",category:"tertiary"},{role:"on-tertiary",label:"On Tertiary",lightShade:"white",darkShade:"tertiary-900",category:"tertiary"},{role:"tertiary-container",label:"Tertiary Container",lightShade:"tertiary-100",darkShade:"tertiary-800",category:"tertiary"},{role:"on-tertiary-container",label:"On Tertiary Container",lightShade:"tertiary-900",darkShade:"tertiary-100",category:"tertiary"},{role:"error",label:"Error",lightShade:"error-600",darkShade:"error-400",category:"error"},{role:"on-error",label:"On Error",lightShade:"white",darkShade:"error-900",category:"error"},{role:"error-container",label:"Error Container",lightShade:"error-100",darkShade:"error-800",category:"error"},{role:"on-error-container",label:"On Error Container",lightShade:"error-900",darkShade:"error-100",category:"error"},{role:"surface",label:"Surface",lightShade:"surface-50",darkShade:"surface-900",category:"surface"},{role:"surface-container",label:"Surface Container",lightShade:"surface-100",darkShade:"surface-800",category:"surface"},{role:"surface-container-high",label:"Surface Container High",lightShade:"surface-200",darkShade:"surface-700",category:"surface"},{role:"surface-container-highest",label:"Surface Container Highest",lightShade:"surface-300",darkShade:"surface-600",category:"surface"}];function pFe({themeId:t,projectId:e,isDarkMode:n=!1}){const[r,i]=T.useState(new Map),[a,s]=T.useState(!0);T.useEffect(()=>{async function h(){try{const{getDB:f}=await Lt(async()=>{const{getDB:x}=await Promise.resolve().then(()=>VD);return{getDB:x}},void 0),g=await(await f()).designTokens.getByTheme(t),v=new Map;g.forEach(x=>{if(x.type!=="color")return;let _=x.name;_.startsWith("color.")&&(_=_.replace("color.","")),_=_.replace(/\./g,"-");let w;if(typeof x.value=="string")w=x.value;else if(x.value&&typeof x.value=="object"){const S=x.value;if(typeof S.hex=="string")w=S.hex;else if(typeof S.h=="number"&&typeof S.s=="number"&&typeof S.l=="number")w=hFe(S.h,S.s,S.l);else{console.warn("[M3ColorSystemGuide] Unknown value format:",_,x.value);return}}else return;v.set(_,w)}),v.has("white")||v.set("white","#FFFFFF"),v.has("black")||v.set("black","#000000"),i(v)}catch(f){console.error("[M3ColorSystemGuide] Failed to fetch tokens:",f)}finally{s(!1)}}h()},[t,e,n]);const o=h=>r.get(h)||"#CCCCCC",c=h=>{const f=h.replace("#",""),m=parseInt(f.substr(0,2),16),g=parseInt(f.substr(2,2),16),v=parseInt(f.substr(4,2),16);return(.299*m+.587*g+.114*v)/255>.5?"#000000":"#FFFFFF"};if(a)return l.jsx("div",{className:"m3-color-system-guide",children:l.jsxs("div",{className:"m3-guide-loading",children:[l.jsx("div",{className:"spinner"}),l.jsx("p",{children:"Loading M3 Color Roles..."})]})});const u=["primary","secondary","tertiary","error","surface"];return l.jsxs("div",{className:"m3-color-system-guide",children:[l.jsxs("div",{className:"m3-guide-header",children:[l.jsx("h3",{children:"Material Design 3 Color Roles"}),l.jsxs("p",{className:"m3-guide-description",children:[n?"Dark Mode":"Light Mode","  Current Theme Colors"]})]}),l.jsx("div",{className:"m3-roles-grid",children:u.map(h=>{const f=fFe.filter(m=>m.category===h);return l.jsxs("div",{className:"m3-category",children:[l.jsx("h4",{className:"m3-category-title",children:h.charAt(0).toUpperCase()+h.slice(1)}),l.jsx("div",{className:"m3-role-list",children:f.map(m=>{const g=n?m.darkShade:m.lightShade,v=o(g),x=c(v);return l.jsxs("div",{className:"m3-role-item",style:{backgroundColor:v,color:x},children:[l.jsx("div",{className:"m3-role-label",children:m.label}),l.jsxs("div",{className:"m3-role-value",children:[l.jsx("div",{className:"m3-shade-name",children:g}),l.jsx("div",{className:"m3-color-hex",children:v})]})]},m.role)})})]},h)})}),l.jsxs("div",{className:"m3-guide-footer",children:[l.jsxs("div",{className:"m3-mapping-info",children:[l.jsx("h4",{children:"M3 Mapping Rules"}),l.jsxs("ul",{className:"m3-mapping-list",children:[l.jsxs("li",{children:[l.jsx("span",{className:"mapping-label",children:"Primary/Secondary/Tertiary:"}),l.jsx("span",{className:"mapping-value",children:n?"400 shade":"600 shade"})]}),l.jsxs("li",{children:[l.jsx("span",{className:"mapping-label",children:"Containers:"}),l.jsx("span",{className:"mapping-value",children:n?"800 shade":"100 shade"})]}),l.jsxs("li",{children:[l.jsx("span",{className:"mapping-label",children:"On-Colors:"}),l.jsx("span",{className:"mapping-value",children:n?"900 or 100":"White or 900"})]})]})]}),l.jsx("div",{className:"m3-guide-link",children:l.jsx("a",{href:"https://m3.material.io/styles/color/roles",target:"_blank",rel:"noopener noreferrer",className:"m3-docs-link",children:"View M3 Color Documentation "})})]})]})}const mFe=fn({slots:{container:"themePanel",header:"theme-studio-header",sidebar:"theme-studio-sidebar",main:"theme-studio-main",panel:"theme-studio-panel"}});function gFe({projectId:t}){const e=mFe(),[n,r]=T.useState("tokens"),[i,a]=T.useState(!1),{themes:s,loading:o,createTheme:c,activateTheme:u,deleteTheme:h}=r$({projectId:t,enableRealtime:!0}),{activeTheme:f,loading:m,refetch:g}=z8e({projectId:t,enableRealtime:!0}),v=o||m;T.useEffect(()=>{const S=localStorage.getItem("themestudio-preview-dark-mode")==="dark";a(S)},[]);const x=async w=>{await u(w),await g()},_=()=>{const w=!i;a(w),localStorage.setItem("themestudio-preview-dark-mode",w?"dark":"light"),console.log("[ThemeStudio] Preview dark mode:",w?"enabled":"disabled")};return v?l.jsx("div",{className:e.container(),children:l.jsxs("div",{className:"loading-state",children:[l.jsx("div",{className:"spinner"}),l.jsx("p",{children:"  ..."})]})}):l.jsxs("div",{className:e.container(),"data-theme":i?"dark":void 0,children:[l.jsxs("div",{className:"panel-header",children:[l.jsx("h3",{className:"panel-title",children:"Theme"}),l.jsxs("div",{className:"header-actions",children:[l.jsx("select",{value:f?.id||"",onChange:w=>x(w.target.value),children:s.map(w=>l.jsx("option",{value:w.id,children:w.name},w.id))}),l.jsxs("button",{className:"iconButton preview-dark-mode-toggle",onClick:_,title:i?"Light  ":"Dark  ",children:[i?l.jsx(yN,{size:16}):l.jsx($1,{size:16}),l.jsx("span",{children:i?"Light":"Dark"})]}),l.jsx("button",{className:n==="tokens"?"active":"",onClick:()=>r("tokens"),children:" "}),l.jsx("button",{className:n==="ai-generator"?"active":"",onClick:()=>r("ai-generator"),children:"AI "}),l.jsx("button",{className:n==="hct-generator"?"active":"",onClick:()=>r("hct-generator"),children:"HCT (M3)"}),l.jsx("button",{className:n==="figma-import"?"active":"",onClick:()=>r("figma-import"),children:"Figma Import"}),l.jsx("button",{className:n==="dark-mode"?"active":"",onClick:()=>r("dark-mode"),children:" "}),l.jsx("button",{className:n==="figma-plugin"?"active":"",onClick:()=>r("figma-plugin"),children:"Figma Plugin"}),l.jsx("button",{className:n==="settings"?"active":"",onClick:()=>r("settings"),children:""})]})]}),l.jsxs("div",{className:"studio-body",children:[l.jsxs("aside",{className:e.sidebar(),children:[l.jsxs("div",{className:"sidebar-header",children:[l.jsx("h2",{children:""}),l.jsx("button",{className:"create-theme-btn",onClick:()=>{const w=prompt("  :");w&&c(w)},children:"+  "})]}),l.jsx("div",{className:"theme-list",children:s.map(w=>l.jsxs("div",{className:`theme-item ${f?.id===w.id?"active":""}`,children:[l.jsxs("div",{className:"theme-info",onClick:()=>x(w.id),children:[l.jsxs("div",{className:"theme-name-row",children:[l.jsx("span",{className:"theme-name",children:w.name}),(w.supports_dark_mode??!0)&&l.jsx($1,{size:14,className:"dark-mode-indicator"})]}),l.jsx("span",{className:"theme-status",children:w.status})]}),l.jsx("button",{className:"delete-theme-btn",onClick:S=>{S.stopPropagation(),confirm(`"${w.name}"  ?`)&&h(w.id)},title:" ",children:""})]},w.id))})]}),l.jsxs("main",{className:e.main(),children:[n==="tokens"&&f&&l.jsx(aFe,{themeId:f.id,projectId:t}),n==="ai-generator"&&l.jsx("div",{className:"ai-generator-view",children:l.jsx(X8e,{projectId:t,onThemeGenerated:w=>{x(w),r("tokens")}})}),n==="hct-generator"&&l.jsx("div",{className:"hct-generator-view",children:l.jsx(Z8e,{projectId:t,onThemeGenerated:w=>{x(w),r("tokens")}})}),n==="figma-import"&&l.jsx("div",{className:"figma-import-view",children:l.jsx(rFe,{projectId:t,themeId:f?.id||"",onImportComplete:w=>{console.log("Figma import complete:",w),r("tokens")}})}),n==="dark-mode"&&f&&l.jsx("div",{className:"dark-mode-view",children:l.jsx(cFe,{projectId:t,themeId:f.id,onDarkThemeCreated:w=>{x(w),r("tokens")}})}),n==="figma-plugin"&&f&&l.jsx("div",{className:"figma-plugin-view",children:l.jsx(dFe,{projectId:t,themeId:f.id})}),n==="settings"&&f&&l.jsxs("div",{className:"settings-view",children:[l.jsxs("div",{className:"theme-settings-section",children:[l.jsx("h3",{children:" "}),l.jsxs("div",{className:"setting-item",children:[l.jsxs("label",{htmlFor:"dark-mode-support",children:[l.jsx($1,{size:16}),l.jsx("span",{children:" "})]}),l.jsx("input",{type:"checkbox",id:"dark-mode-support",checked:f.supports_dark_mode??!0,onChange:async w=>{const S=w.target.checked;try{const{supabase:E}=await Lt(async()=>{const{supabase:A}=await Promise.resolve().then(()=>b_e);return{supabase:A}},void 0);await E.from("design_themes").update({supports_dark_mode:S}).eq("id",f.id),console.log("[ThemeStudio] Updated dark mode support:",S)}catch(E){console.error("[ThemeStudio] Failed to update dark mode support:",E)}}}),l.jsx("p",{className:"setting-description",children:"   Builder   ."})]})]}),l.jsx(oFe,{themeId:f.id,projectId:t})]})]}),l.jsx("aside",{className:e.panel(),children:f?l.jsx(pFe,{themeId:f.id,projectId:t,isDarkMode:i}):l.jsx("div",{className:"token-preview",children:l.jsx("p",{children:"  M3 Color Roles "})})})]})]})}const rN=({children:t})=>{const[e,n]=T.useState(null),[r,i]=T.useState(!0);return T.useEffect(()=>{(async()=>{const{data:{session:s}}=await zr.auth.getSession();n(s),i(!1)})()},[]),r?l.jsx("p",{children:"Loading..."}):e?t:l.jsx(lee,{to:"/signin"})};function vFe(){const{projectId:t}=yg();return t?l.jsx(gFe,{projectId:t}):l.jsx("div",{children:"Project ID required"})}function yFe(){const t=nh(),e=t.pathname==="/"||t.pathname==="/signin"||t.pathname==="/dashboard";return l.jsxs(l.Fragment,{children:[e&&l.jsx(tfe,{}),l.jsxs(uee,{children:[l.jsx(Dv,{path:"/",element:l.jsx(cxe,{})}),l.jsx(Dv,{path:"/signin",element:l.jsx(B8e,{})}),l.jsx(Dv,{path:"/dashboard",element:l.jsx(rN,{children:l.jsx(ZSe,{})})}),l.jsx(Dv,{path:"/builder/:projectId",element:l.jsx(rN,{children:l.jsx(F8e,{})})}),l.jsx(Dv,{path:"/theme/:projectId",element:l.jsx(rN,{children:l.jsx(vFe,{})})})]})]})}const bFe=new hte({defaultOptions:{queries:{staleTime:300*1e3,gcTime:1800*1e3,retry:2,refetchOnWindowFocus:!1}}}),xFe=document.getElementById("root"),_Fe="/xstudio";vQ.createRoot(xFe).render(l.jsxs(pte,{client:bFe,children:[l.jsx(Ree,{basename:_Fe,children:l.jsx(bse,{children:l.jsx(yFe,{})})}),!1]}));export{my as $,yf as A,Fm as B,BB as C,ba as D,ri as E,SR as F,t_ as G,ER as H,Jm as I,I1 as J,jre as K,H_ as L,CR as M,zB as N,JB as O,$a as P,al as Q,Iie as R,cae as S,Pu as T,Of as U,Dre as V,Kre as W,Cve as X,Yq as Y,Sve as Z,Ut as _,UBe as a,ol as a0,Ws as a1,pN as a2,Ra as a3,OBe as a4,RA as a5,YEe as a6,DI as a7,Wre as a8,Vm as a9,gie as aA,zBe as aB,bN as aC,f5 as aa,nse as ab,ZB as ac,WB as ad,Zte as ae,JEe as af,BBe as ag,FBe as ah,dre as ai,Oae as aj,OB as ak,Xie as al,Aae as am,oie as an,Ore as ao,Hie as ap,ur as aq,n_ as ar,Mr as as,qte as at,Kl as au,gN as av,No as aw,j1 as ax,Bae as ay,Ao as az,Xi as b,Oe as c,ja as d,Jo as e,L2 as f,wy as g,Yt as h,se as i,l as j,vne as k,i9 as l,bne as m,G_ as n,eae as o,AR as p,KB as q,T as r,Bv as s,bR as t,$e as u,Qo as v,zr as w,Cie as x,VBe as y,$y as z};
