import{j as a}from"./index-BvISBzjo.js";import{h as _,r as P,R as w}from"./react-vendor-B_C40l-y.js";import{C as D,u as L,T as G,a as R,L as A,I as W,l as q,F as H,R as U,e as Z,c as z,B as Y,S as J,d as Q,f as X,g as ee,h as se,i as ae,k as te,D as re,j as oe}from"./DateRangePicker-C9lTWYy6.js";import{g as ie,f as M,h as ne,i as E,j as k,k as V,l as pe,m as O,n as de,o as ce,p as le,q as ue,r as me,s as he,t as ge}from"./ui-vendor-DGkkUPmE.js";import"./supabase-B0cjvv2_.js";import"./utils-CFqvDIMX.js";function fe({label:n,description:c,errorMessage:u,children:i,...m}){return a.jsxs(ie,{...m,className:"react-aria-ComboBox",children:[a.jsx(M,{children:n}),a.jsxs("div",{className:"my-combobox-container",children:[a.jsx(ne,{}),a.jsx(E,{children:"▼"})]}),c&&a.jsx(k,{slot:"description",children:c}),a.jsx(V,{children:u}),a.jsx(pe,{children:a.jsx(O,{children:i})})]})}function ye({label:n,description:c,errorMessage:u,children:i,orientation:m="vertical",...x}){return a.jsxs(de,{...x,className:"react-aria-CheckboxGroup","data-orientation":m,children:[n&&a.jsx(M,{children:n}),i,c&&a.jsx(k,{slot:"description",children:c}),a.jsx(V,{children:u})]})}function be({children:n,...c}){return a.jsx(O,{...c,className:"react-aria-ListBox",children:n})}function B(n){return a.jsx(ce,{...n,className:"react-aria-ListBoxItem"})}function xe({children:n,...c}){return a.jsx(le,{...c,className:"react-aria-GridList",children:n})}function ve({children:n,...c}){const u=typeof n=="string"?n:void 0;return a.jsx(ue,{textValue:u,...c,className:"react-aria-GridListItem",children:({selectionMode:i,selectionBehavior:m,allowsDragging:x})=>a.jsxs(a.Fragment,{children:[x&&a.jsx(E,{slot:"drag",children:"≡"}),i==="multiple"&&m==="toggle"&&a.jsx(D,{slot:"selection"}),n]})})}function je(n){return a.jsx(me,{...n})}function Ne(n){return a.jsx(ge,{className:"react-aria-TreeItemContent",children:({hasChildItems:c,selectionBehavior:u,selectionMode:i,allowsDragging:m})=>a.jsxs(a.Fragment,{children:[m&&a.jsx(E,{slot:"drag",children:"≡"}),u==="toggle"&&i!=="none"&&a.jsx(D,{slot:"selection"}),a.jsx(E,{slot:"chevron",children:a.jsx("svg",{viewBox:"0 0 24 24",children:a.jsx("path",{d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})}),n.children]})})}function $e(n){return a.jsxs(he,{textValue:n.title,...n,className:"react-aria-TreeItem",children:[a.jsx(Ne,{children:n.title}),n.children]})}function Ce({children:n,className:c="",style:u,title:i,variant:m="default",...x}){const T=`react-aria-Panel ${{default:"panel-default",tab:"panel-tab",sidebar:"panel-sidebar",card:"panel-card",modal:"panel-modal"}[m]} ${c}`.trim();return a.jsxs("div",{...x,className:T,style:u,children:[i&&a.jsx("div",{className:"panel-title",children:i}),a.jsx("div",{className:"panel-content",children:n})]})}const S={};function Ie(){const{projectId:n}=_(),c=L(e=>e.elements),{setElements:u,updateElementProps:i}=L(),[m,x]=P.useState([]),$=P.useCallback(e=>{const d=e.data;if(!(!d||typeof d!="object"||!d.type)){if(d.type==="UPDATE_ELEMENTS"&&u(d.elements||[]),d.type==="THEME_VARS"&&Array.isArray(d.vars)){let l=document.getElementById("design-theme-vars");l||(l=document.createElement("style"),l.id="design-theme-vars",document.head.appendChild(l)),l.textContent=`:root {
`+d.vars.map(h=>`  ${h.cssVar}: ${h.value};`).join(`
`)+`
}`,console.log("[preview] applied THEME_VARS",d.vars.length)}if(d.type==="UPDATE_THEME_TOKENS"&&d.styles){let l=document.getElementById("design-theme-vars");l||(l=document.createElement("style"),l.id="design-theme-vars",document.head.appendChild(l)),l.textContent=`:root {
`+Object.entries(d.styles).map(([h,f])=>`  ${h}: ${f};`).join(`
`)+`
}`,console.log("[preview] applied UPDATE_THEME_TOKENS",Object.keys(d.styles).length)}}},[]);P.useEffect(()=>{window.addEventListener("message",$);try{window.parent.postMessage({type:"PREVIEW_READY"},"*")}catch{}return()=>window.removeEventListener("message",$)},[$]),document.documentElement.classList.add(S.root);const v=e=>{var C;const d=c.filter(o=>o.parent_id===e.id).sort((o,s)=>(o.order_num||0)-(s.order_num||0)),l=e.tag==="body"?"div":e.tag,h={...e.props,key:e.id,"data-element-id":e.id},f=(o,s)=>a.jsx(R,{id:o.id,"data-element-id":o.id,isSelected:o.props.isSelected,defaultSelected:o.props.defaultSelected,isDisabled:o.props.isDisabled,style:o.props.style,className:o.props.className,onPress:()=>{{const t={...o.props,isSelected:!o.props.isSelected};i(o.id,t)}},children:typeof o.props.children=="string"?o.props.children:""},o.id);if(e.tag==="ToggleButtonGroup"){const o=e.props.orientation,s=e.props.children||[];return a.jsx(G,{"data-element-id":e.id,style:e.props.style,className:e.props.className,orientation:o,selectionMode:e.props.selectionMode,value:e.props.value||[],onChange:async t=>{const r={...e.props,value:t};i(e.id,r)},children:s.map((t,r)=>a.jsx(R,{"data-element-id":`${e.id}-toggle-${r}`,isSelected:t.isSelected||!1,onPress:()=>{const p=[...s];e.props.selectionMode==="multiple"?p[r]={...p[r],isSelected:!p[r].isSelected}:p.forEach((g,N)=>{p[N]={...g,isSelected:N===r?!g.isSelected:!1}});const b={...e.props,children:p};i(e.id,b)},children:t.title||`Option ${r+1}`},t.id||`toggle-${r}`))},e.id)}if(e.tag==="ToggleButton")return f(e);if(e.tag==="Checkbox")return a.jsx(D,{"data-element-id":e.id,isSelected:e.props.isSelected,isIndeterminate:e.props.isIndeterminate,isDisabled:e.props.isDisabled,style:e.props.style,className:e.props.className,onChange:o=>{const s={...e.props,isSelected:o};i(e.id,s)},children:typeof e.props.children=="string"?e.props.children:"Checkbox"},e.id);if(e.tag==="Label")return a.jsx(A,{"data-element-id":e.id,style:e.props.style,className:e.props.className,children:typeof e.props.text=="string"?e.props.text:"Label"},e.id);if(e.tag==="Input")return a.jsx(W,{"data-element-id":e.id,style:e.props.style,className:e.props.className},e.id);if(e.tag==="Description")return a.jsx(q,{"data-element-id":e.id,style:e.props.style,className:e.props.className,children:typeof e.props.text=="string"?e.props.text:"Description"},e.id);if(e.tag==="FieldError")return a.jsx(H,{"data-element-id":e.id,style:e.props.style,className:e.props.className,children:typeof e.props.text=="string"?e.props.text:"FieldError"},e.id);if(e.tag==="CheckboxGroup"){const o=e.props.children||[],s=o.filter(t=>t.isSelected).map(t=>t.id);return a.jsx(ye,{"data-element-id":e.id,style:e.props.style,className:e.props.className,label:e.props.label,value:s,orientation:e.props.orientation||"vertical",onChange:async t=>{const r=o.map(b=>({...b,isSelected:t.includes(b.id)})),p={...e.props,value:t,children:r};i(e.id,p)},children:o.map((t,r)=>a.jsx(D,{"data-element-id":`${e.id}-checkbox-${r}`,value:t.id,children:t.label||`Option ${r+1}`},t.id||`checkbox-${r}`))},e.id)}if(e.tag==="RadioGroup"){const o=e.props.children||[];return a.jsx(U,{"data-element-id":e.id,style:e.props.style,className:e.props.className,label:e.props.label,value:e.props.value||"",orientation:e.props.orientation||"vertical",onChange:s=>{const t={...e.props,value:s};i(e.id,t)},children:o.map((s,t)=>a.jsx(Z,{"data-element-id":`${e.id}-radio-${t}`,value:s.value,children:s.label||`Option ${t+1}`},s.id||`radio-${t}`))},e.id)}if(e.tag==="TextField")return a.jsx(z,{"data-element-id":e.id,style:e.props.style,className:e.props.className,label:e.props.label||"",description:e.props.description||"",errorMessage:e.props.errorMessage||"",isDisabled:e.props.isDisabled||!1,isRequired:e.props.isRequired||!1,isReadOnly:e.props.isReadOnly||!1},e.id);if(e.tag==="Button")return a.jsx(Y,{"data-element-id":e.id,isDisabled:e.props.isDisabled,variant:e.props.variant,style:e.props.style,className:e.props.className,children:typeof e.props.children=="string"?e.props.children:"Button"},e.id);if(e.tag==="GridList"){const o=e.props.children||[];return a.jsx(xe,{"data-element-id":e.id,style:e.props.style,className:e.props.className,orientation:e.props.orientation||"vertical",label:e.props.label,itemLayout:e.props.itemLayout||"default",selectionMode:e.props.selectionMode||"none",selectedKeys:e.props.selectedKeys||[],onSelectionChange:s=>{const t={...e.props,selectedKeys:Array.from(s)};i(e.id,t)},children:o.map((s,t)=>a.jsx(ve,{value:s.value,isDisabled:s.isDisabled,children:s.label},s.id||`griditem-${t}`))},e.id)}if(e.tag==="ListBox"){const o=e.props.children||[];return a.jsx(be,{"data-element-id":e.id,style:e.props.style,className:e.props.className,orientation:e.props.orientation||"vertical",label:e.props.label,itemLayout:e.props.itemLayout||"default",selectionMode:e.props.selectionMode||"none",selectedKeys:e.props.selectedKeys||[],onSelectionChange:s=>{const t={...e.props,selectedKeys:Array.from(s)};i(e.id,t)},children:o.map((s,t)=>a.jsx(B,{value:s.value,isDisabled:s.isDisabled,children:s.label},s.id||`listitem-${t}`))},e.id)}if(e.tag==="Select"){const o=e.props.children||[];return a.jsx(J,{"data-element-id":e.id,style:e.props.style,className:e.props.className,label:e.props.label,selectedKey:e.props.selectedKey,onSelectionChange:s=>{const t={...e.props,selectedKey:s};i(e.id,t)},children:o.map((s,t)=>a.jsx(B,{value:s.value,isDisabled:s.isDisabled,children:s.label},s.id||`selectitem-${t}`))},e.id)}if(e.tag==="ComboBox"){const o=e.props.children||[];return a.jsx(fe,{"data-element-id":e.id,style:e.props.style,className:e.props.className,label:e.props.label,selectedKey:e.props.selectedKey,onSelectionChange:s=>{const t={...e.props,selectedKey:s};i(e.id,t)},children:o.map((s,t)=>a.jsx(B,{value:s.value,isDisabled:s.isDisabled,children:s.label},s.id||`comboitem-${t}`))},e.id)}if(e.tag==="Slider")return a.jsx(Q,{"data-element-id":e.id,style:e.props.style,className:e.props.className,label:e.props.label,value:e.props.value||[50],minValue:e.props.minValue||0,maxValue:e.props.maxValue||100,step:e.props.step||1,orientation:e.props.orientation,onChange:o=>{const s={...e.props,value:o};i(e.id,s)}},e.id);if(e.tag==="Tabs"){const o=c.filter(s=>s.parent_id===e.id&&s.tag==="Panel").sort((s,t)=>(s.props.tabIndex||0)-(t.props.tabIndex||0));return a.jsxs(X,{"data-element-id":e.id,style:e.props.style,className:e.props.className,defaultSelectedKey:e.props.defaultSelectedKey,orientation:e.props.orientation||"horizontal",isDisabled:e.props.isDisabled,onSelectionChange:s=>{const t={...e.props,selectedKey:s};i(e.id,t)},children:[a.jsx(ee,{orientation:e.props.orientation||"horizontal",children:(C=e.props.children)==null?void 0:C.map(s=>a.jsx(se,{id:s.id,children:s.title},s.id))}),o.map(s=>{var r;const t=(r=e.props.children)==null?void 0:r[s.props.tabIndex||0];return a.jsxs(ae,{id:(t==null?void 0:t.id)||`tab-${s.props.tabIndex||0}`,children:[v(s)," "]},s.id)})]},e.id)}if(e.tag==="Tree"){const o=r=>{const p=new Map,b=[];return r.forEach(g=>{p.set(g.id,{...g,children:[]})}),r.forEach(g=>{const N=p.get(g.id);if(g.parent_id===null||g.parent_id===void 0)b.push(N);else{const I=p.get(g.parent_id);I&&I.children.push(N)}}),b},s=r=>r.map(p=>a.jsx($e,{id:p.id,title:p.title,children:p.children&&p.children.length>0&&s(p.children)},p.id)),t=o(e.props.children||[]);return a.jsx(je,{"data-element-id":e.id,style:e.props.style,className:e.props.className,selectionMode:e.props.selectionMode||"single",selectionBehavior:e.props.selectionBehavior||"replace",expandedKeys:e.props.expandedKeys||[],selectedKeys:e.props.selectedKeys||[],allowsDragging:e.props.allowsDragging||!1,onSelectionChange:r=>{const p={...e.props,selectedKeys:Array.from(r)};i(e.id,p)},onExpandedChange:r=>{const p={...e.props,expandedKeys:Array.from(r)};i(e.id,p)},children:s(t)},e.id)}if(e.tag==="Text"){const o=e.props.as||"p";return a.jsx(o,{"data-element-id":e.id,style:e.props.style,className:e.props.className,children:e.props.children},e.id)}if(e.tag==="Calendar"){const o=()=>{const t=e.props.visibleDuration;if(typeof t=="object"&&t!==null&&"months"in t){const r=Number(t.months);if(r>=1&&r<=12)return{months:r}}return{months:1}},s=()=>{const t=e.props.pageBehavior;return t==="visible"||t==="single"?t:"visible"};return a.jsx(te,{"data-element-id":e.id,style:e.props.style,className:e.props.className,"aria-label":e.props["aria-label"]||"Calendar",isDisabled:!!e.props.isDisabled,visibleDuration:o(),pageBehavior:s(),value:e.props.value,onChange:t=>{const r={...e.props,value:t};i(e.id,r)},errorMessage:e.props.errorMessage},e.id)}if(e.tag==="DatePicker"){const o=()=>{if(e.props.includeTime){const r=e.props.granularity;return["hour","minute","second"].includes(r)?r:"minute"}else{const r=e.props.granularity;return["day"].includes(r)?r:"day"}},s=()=>{const r=Number(e.props.firstDayOfWeek);return r>=0&&r<=6?r:0},t=()=>{const r=e.props.calendarIconPosition;return r==="left"||r==="right"?r:"right"};return a.jsx(re,{"data-element-id":e.id,style:e.props.style,className:e.props.className,label:e.props.label||"Date Picker",description:e.props.description,errorMessage:e.props.errorMessage,placeholder:e.props.placeholder,isDisabled:!!e.props.isDisabled,isRequired:!!e.props.isRequired,isReadOnly:!!e.props.isReadOnly,isInvalid:!!e.props.isInvalid,value:e.props.value,defaultValue:e.props.defaultValue,minValue:e.props.minValue,maxValue:e.props.maxValue,placeholderValue:e.props.placeholderValue,granularity:o(),firstDayOfWeek:s(),showCalendarIcon:e.props.showCalendarIcon!==!1,calendarIconPosition:t(),showWeekNumbers:!!e.props.showWeekNumbers,highlightToday:e.props.highlightToday!==!1,allowClear:e.props.allowClear!==!1,autoFocus:!!e.props.autoFocus,shouldForceLeadingZeros:e.props.shouldForceLeadingZeros!==!1,shouldCloseOnSelect:e.props.shouldCloseOnSelect!==!1,includeTime:!!e.props.includeTime,timeFormat:e.props.timeFormat||"24h",timeLabel:e.props.timeLabel||"시간",onChange:r=>{const p={...e.props,value:r};i(e.id,p)}},e.id)}if(e.tag==="DateRangePicker"){const o=()=>{const r=e.props.granularity;return["day","hour","minute","second"].includes(r)?r:"day"},s=()=>{const r=Number(e.props.firstDayOfWeek);return r>=0&&r<=6?r:0},t=()=>{const r=e.props.calendarIconPosition;return r==="left"||r==="right"?r:"right"};return a.jsx(oe,{"data-element-id":e.id,style:e.props.style,className:e.props.className,label:e.props.label||"Date Range Picker",description:e.props.description,errorMessage:e.props.errorMessage,placeholder:e.props.placeholder,isDisabled:!!e.props.isDisabled,isRequired:!!e.props.isRequired,isReadOnly:!!e.props.isReadOnly,isInvalid:!!e.props.isInvalid,value:e.props.value,defaultValue:e.props.defaultValue,minValue:e.props.minValue,maxValue:e.props.maxValue,placeholderValue:e.props.placeholderValue,granularity:o(),firstDayOfWeek:s(),showCalendarIcon:e.props.showCalendarIcon!==!1,calendarIconPosition:t(),showWeekNumbers:!!e.props.showWeekNumbers,highlightToday:e.props.highlightToday!==!1,allowClear:e.props.allowClear!==!1,autoFocus:!!e.props.autoFocus,shouldForceLeadingZeros:e.props.shouldForceLeadingZeros!==!1,shouldCloseOnSelect:e.props.shouldCloseOnSelect!==!1,allowsNonContiguousRanges:!!e.props.allowsNonContiguousRanges,includeTime:!!e.props.includeTime,timeFormat:e.props.timeFormat||"24h",startTimeLabel:e.props.startTimeLabel||"시작 시간",endTimeLabel:e.props.endTimeLabel||"종료 시간",onChange:r=>{const p={...e.props,value:r};i(e.id,p)}},e.id)}if(e.tag==="Panel")return a.jsx(Ce,{"data-element-id":e.id,variant:e.props.variant||"default",title:e.props.title,style:e.props.style,className:e.props.className,children:d.map(o=>v(o))},e.id);if(["section","Card","Div","Nav"].includes(e.tag)){const s={section:"section",Card:"div",Div:"div",Nav:"nav"}[e.tag];return a.jsxs(s,{"data-element-id":e.id,style:e.props.style,className:`${e.props.className||""} ${e.tag==="Card"?"react-aria-Card":""}`.trim(),children:[e.props.children,d.map(t=>v(t))]},e.id)}const y=[e.props.text&&String(e.props.text),...d.map(o=>v(o))].filter(Boolean);return w.createElement(l,h,y.length>0?y:void 0)},T=()=>c.filter(d=>!d.parent_id).sort((d,l)=>(d.order_num||0)-(l.order_num||0)).map(d=>v(d)),F=e=>{const l=e.target.closest("[data-element-id]");if(!l)return;const h=l.getAttribute("data-element-id");if(!h)return;const f=c.find(C=>C.id===h);if(!f)return;const y=l.getBoundingClientRect();window.parent.postMessage({type:"ELEMENT_SELECTED",elementId:h,payload:{rect:{top:y.top,left:y.left,width:y.width,height:y.height},props:f.props,tag:f.tag}},window.location.origin)},j=c.length>0?c[0]:{tag:"div",props:{}},K=j.tag==="body"?"div":j.tag;return w.createElement(K,{className:S.main,id:n||void 0,onMouseUp:F,...j.props,...j.tag==="body"?{className:`${S.main} ${j.props.className||""}`}:{}},c.length===0?"No elements available":T())}export{Ie as default};
