# Dataset → DataTable 네이밍 변경 실행 계획서

## 배경
- 내부에서 `Dataset`이라는 용어가 실제로는 테이블 중심의 데이터 모델을 가리키고 있어 용어 혼동이 발생함.
- 신규 컴포넌트 및 문서에서 `DataTable` 명칭을 선호하고 있어 일관성 확보가 필요함.
- API/스토리지/코드 전반에 동일한 네이밍을 적용해 유지보수성을 높이고, 신규 기여자의 온보딩 비용을 낮추기 위함.

## 목표
- 코드, API, 설정, 문서에서 `Dataset` → `DataTable` 로 명칭을 통일한다.
- 기능 변화 없이 네이밍만 교체하되, 기존 외부 사용자는 브레이킹 체인지 없이 점진적으로 마이그레이션 가능하게 한다.
- 릴리스 후 회귀 테스트 및 모니터링 체계를 갖춘다.

## 범위
- **프런트엔드**: React 컴포넌트, 훅, 컨텍스트, 스토어 키, 테스트 명칭.
- **데이터 계층**: 타입 정의(TypeScript), 직렬화 포맷(JSON/LocalStorage), Supabase/DB 스키마 명칭.
- **API 계약**: REST/RPC 경로, 요청/응답 payload 필드명, 타입 가드.
- **문서/가이드**: 개발자 문서, 마이그레이션 가이드, 예제 코드.

## 비범위(Non-goals)
- 데이터 모델 구조 변경(필드 추가/삭제, 타입 변경)은 포함하지 않는다.
- 퍼포먼스 최적화나 신규 기능 추가는 포함하지 않는다.

## 작업 항목
1. **코드 구조 정리**
   - `src/**/dataset*` 파일/디렉터리 명을 `datatable` 로 변경.
   - 내보내기(export) 이름, 컴포넌트/훅/클래스 명에서 `Dataset` → `DataTable` 치환.
   - `tsconfig.paths` / import 경로 업데이트.
2. **타입/스토어 업데이트**
   - 전역 상태(atom/store) 키, context value 이름, 타입 별칭을 일괄 교체.
   - 직렬화 포맷(JSON/localStorage) 키를 새 이름으로 추가하고, 구 키는 읽기 전용으로 유지.
3. **API/계약**
   - 공개 API 경로를 `datatable`로 병행 지원: 신규 경로 추가, 구 경로(deprecated) 리다이렉션.
   - 요청/응답 필드명 변경 시, 서버에서 구 필드도 허용하는 호환 레이어 추가.
4. **데이터 마이그레이션**
   - DB/Supabase 테이블, 컬럼, 인덱스 명을 `datatable`로 리네임하거나 뷰/시노님 추가.
   - 마이그레이션 스크립트 작성: `ALTER TABLE ... RENAME TO`, `ALTER INDEX ... RENAME`, 뷰 생성 등.
   - 롤백 스크립트 포함.
5. **문서/예제 업데이트**
   - 개발자 가이드, API 문서, 코드 예제의 용어 교체.
   - 변경 지침을 `MIGRATION_GUIDE`에 요약 추가.
6. **테스트**
   - 유닛/통합 테스트의 픽스처 및 스냅샷 업데이트.
   - API 호환성 테스트: 신/구 필드 모두 허용 확인.
   - E2E: 주요 플로우(데이터 소스 생성, 조회, 바인딩) 리그레션 테스트.
7. **롤아웃 계획**
   - 단계 1: 내부 빌드에 신규 명칭 적용, 로그/모니터링으로 호환성 확인.
   - 단계 2: 베타 릴리스에서 구 API 경고 로그 노출(`Deprecation-Warning`).
   - 단계 3: 정식 릴리스에서 구 경로는 리다이렉션 유지, 추후 제거 시점 공지.

## 리스크 및 완화
- **브레이킹 체인지 위험**: 직렬화 포맷 변경 시 기존 데이터 로딩 실패 가능 → 구 키를 읽어서 신규 키로 변환하는 마이그레이션 레이어 제공.
- **API 소비자 영향**: 외부 클라이언트가 즉시 대응하지 못할 수 있음 → 최소 두 버전 동안 구 경로/필드 유지, 릴리스 노트로 사전 공지.
- **테스트 스냅샷 대량 변경**: 스냅샷 업데이트로 코드리뷰 가독성 저하 → 스냅샷 정리 및 주요 변경 요약을 PR에 포함.

## 완료 정의(Definition of Done)
- 코드/문서에서 `Dataset` 레퍼런스가 모두 `DataTable`로 교체되고, 빌드/테스트가 통과한다.
- 구 API/직렬화 키에 대한 호환 레이어가 존재하며, 경고 로그가 노출된다.
- 마이그레이션 및 롤백 스크립트가 배포 프로세스에 포함된다.
- 릴리스 노트와 개발자 가이드에 네이밍 변경 사항과 사용 지침이 반영된다.
