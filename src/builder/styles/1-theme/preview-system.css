/* Preview System Tokens - Preview iframe Components Only
 * These tokens are customizable via AI Theme System
 * Used ONLY in Preview iframe (src/builder/preview/)
 * User theme changes affect ONLY these tokens, NOT Builder UI
 */

@layer preview-system {
  :root {
    /* Semantic colors - Integrated with Design Token System
     * ThemeStudio tokens (e.g., color.background.base) will automatically
     * override these fallback values when defined. */
    --background-color: var(--color-background-base, var(--color-white));
    --focus-ring-color: var(--color-focus-ring, var(--color-primary-400));
    --text-color: var(--color-text-primary, var(--color-neutral-900));
    --text-color-base: var(--color-text-base, var(--color-neutral-900));
    --text-color-hover: var(--color-text-hover, var(--color-neutral-950));
    --text-color-disabled: var(--color-text-disabled, var(--color-neutral-500));
    --text-color-placeholder: var(
      --color-text-placeholder,
      var(--color-neutral-700)
    );
    --link-color: var(--color-link, var(--color-primary-500));
    --link-color-secondary: var(--color-link-secondary, var(--color-neutral-900));
    --link-color-pressed: var(--color-link-pressed, var(--color-primary-600));
    --border-color: var(--color-border-base, var(--color-neutral-300));
    --border-color-hover: var(--color-border-hover, var(--color-neutral-400));
    --border-color-pressed: var(--color-border-pressed, var(--color-neutral-500));
    --border-color-disabled: var(
      --color-border-disabled,
      var(--color-neutral-100)
    );
    --button-background: var(--color-button-background, var(--color-neutral-50));
    --button-background-pressed: var(
      --color-button-background-pressed,
      var(--color-neutral-100)
    );
    --field-background: var(--color-field-background, var(--color-neutral-50));
    --field-text-color: var(--color-field-text, var(--color-neutral-900));
    --overlay-background: var(
      --color-overlay-background,
      var(--color-neutral-50)
    );

    /* Highlight colors - Token integrated, based on theme primary colors */
    --highlight-background: var(
      --color-highlight-background,
      var(--color-primary-600)
    );
    --highlight-background-pressed: var(
      --color-highlight-background-pressed,
      var(--color-primary-700)
    );
    --highlight-background-invalid: var(
      --color-highlight-background-invalid,
      var(--color-error-600)
    );
    --highlight-foreground: var(--color-highlight-foreground, var(--color-white));
    --highlight-foreground-pressed: var(
      --color-highlight-foreground-pressed,
      var(--color-neutral-100)
    );
    --highlight-overlay: var(--color-highlight-overlay, rgba(14, 165, 233, 0.15));
    --invalid-color: var(--color-invalid, var(--color-error-400));
    --invalid-color-pressed: var(--color-invalid-pressed, var(--color-error-500));

    /* Action semantic colors - Used by Button, Tag, Badge, MenuItem, Table ColumnGroup
     * Token integrated with AI Theme System via --color-action-* overrides */

    /* Primary action tokens */
    --action-primary-bg: var(--color-action-primary-bg, var(--color-primary-600));
    --action-primary-bg-hover: var(
      --color-action-primary-bg-hover,
      var(--color-primary-700)
    );
    --action-primary-bg-pressed: var(
      --color-action-primary-bg-pressed,
      var(--color-primary-800)
    );
    --action-primary-text: var(--color-action-primary-text, var(--color-white));
    --action-primary-border: var(
      --color-action-primary-border,
      var(--color-primary-600)
    );
    --action-primary-border-hover: var(
      --color-action-primary-border-hover,
      var(--color-primary-700)
    );
    --action-primary-border-pressed: var(
      --color-action-primary-border-pressed,
      var(--color-primary-800)
    );

    /* Secondary action tokens */
    --action-secondary-bg: var(
      --color-action-secondary-bg,
      var(--color-secondary-600)
    );
    --action-secondary-bg-hover: var(
      --color-action-secondary-bg-hover,
      var(--color-secondary-700)
    );
    --action-secondary-bg-pressed: var(
      --color-action-secondary-bg-pressed,
      var(--color-secondary-800)
    );
    --action-secondary-text: var(
      --color-action-secondary-text,
      var(--color-white)
    );
    --action-secondary-border: var(
      --color-action-secondary-border,
      var(--color-secondary-600)
    );
    --action-secondary-border-hover: var(
      --color-action-secondary-border-hover,
      var(--color-secondary-700)
    );
    --action-secondary-border-pressed: var(
      --color-action-secondary-border-pressed,
      var(--color-secondary-800)
    );

    /* Surface action tokens */
    --action-surface-bg: var(--color-action-surface-bg, var(--color-surface-500));
    --action-surface-bg-hover: var(
      --color-action-surface-bg-hover,
      var(--color-surface-600)
    );
    --action-surface-bg-pressed: var(
      --color-action-surface-bg-pressed,
      var(--color-surface-700)
    );
    --action-surface-text: var(--color-action-surface-text, var(--color-white));
    --action-surface-border: var(
      --color-action-surface-border,
      var(--color-surface-600)
    );
    --action-surface-border-hover: var(
      --color-action-surface-border-hover,
      var(--color-surface-700)
    );
    --action-surface-border-pressed: var(
      --color-action-surface-border-pressed,
      var(--color-surface-800)
    );

    /* Outline action tokens */
    --action-outline-text: var(
      --color-action-outline-text,
      var(--color-gray-800)
    );
    --action-outline-text-hover: var(
      --color-action-outline-text-hover,
      var(--color-gray-900)
    );
    --action-outline-border: var(
      --color-action-outline-border,
      var(--color-gray-300)
    );
    --action-outline-border-hover: var(
      --color-action-outline-border-hover,
      var(--color-gray-400)
    );
    --action-outline-border-pressed: var(
      --color-action-outline-border-pressed,
      var(--color-gray-500)
    );
    --action-outline-bg-hover: var(
      --color-action-outline-bg-hover,
      var(--color-gray-50)
    );
    --action-outline-bg-pressed: var(
      --color-action-outline-bg-pressed,
      var(--color-gray-100)
    );

    /* Ghost action tokens */
    --action-ghost-text: var(--color-action-ghost-text, var(--color-gray-800));
    --action-ghost-text-hover: var(
      --color-action-ghost-text-hover,
      var(--color-gray-900)
    );
    --action-ghost-bg-hover: var(
      --color-action-ghost-bg-hover,
      var(--color-gray-50)
    );
    --action-ghost-bg-pressed: var(
      --color-action-ghost-bg-pressed,
      var(--color-gray-100)
    );

    /* Legacy button token aliases (deprecated, will be removed in v2.0) */
    --button-primary-bg: var(--action-primary-bg);
    --button-primary-text: var(--action-primary-text);
    --button-primary-border: var(--action-primary-border);
    --button-secondary-bg: var(--action-secondary-bg);
    --button-secondary-text: var(--action-secondary-text);
    --button-secondary-border: var(--action-secondary-border);
    --button-surface-bg: var(--action-surface-bg);
    --button-surface-text: var(--action-surface-text);
    --button-surface-border: var(--action-surface-border);
    --button-outline-text: var(--action-outline-text);
    --button-outline-border: var(--action-outline-border);
    --button-ghost-text: var(--action-ghost-text);

    /* Shadow System - AI Theme Integration Ready */
    --shadow-sm: var(--box-shadow-sm, 0 1px 2px 0 rgb(0 0 0 / 0.05));
    --shadow-md: var(
      --box-shadow-md,
      0 4px 6px -1px rgb(0 0 0 / 0.1),
      0 2px 4px -2px rgb(0 0 0 / 0.1)
    );
    --shadow-lg: var(
      --box-shadow-lg,
      0 10px 15px -3px rgb(0 0 0 / 0.1),
      0 4px 6px -4px rgb(0 0 0 / 0.1)
    );
    --shadow-xl: var(
      --box-shadow-xl,
      0 20px 25px -5px rgb(0 0 0 / 0.1),
      0 8px 10px -6px rgb(0 0 0 / 0.1)
    );

    /* Drop shadows (for filter property) */
    --drop-shadow-sm: var(
      --filter-drop-shadow-sm,
      drop-shadow(0 1px 1px rgb(0 0 0 / 0.05))
    );
    --drop-shadow-md: var(
      --filter-drop-shadow-md,
      drop-shadow(0 4px 3px rgb(0 0 0 / 0.07))
        drop-shadow(0 2px 2px rgb(0 0 0 / 0.06))
    );

    /* Inset shadows */
    --inset-shadow-xs: var(
      --inset-box-shadow-xs,
      inset 0 1px 1px 0 rgb(0 0 0 / 0.05)
    );
    --inset-shadow-sm: var(
      --inset-box-shadow-sm,
      inset 0 2px 4px 0 rgb(0 0 0 / 0.05)
    );

    /* Overlay backgrounds */
    --overlay-backdrop: rgba(0 0 0 / 0.5);
    --overlay-backdrop-light: rgba(255 255 255 / 0.8);
    --highlight-hover-overlay: rgba(255 255 255 / 0.1);
    --highlight-pressed-overlay: rgba(255 255 255 / 0.2);
  }

  /* Dark theme overrides - Token System Integration
   * ThemeStudio dark mode tokens (e.g., color.background.base.dark) are automatically
   * injected as overrides for the same CSS variable names via cssVars.ts.
   * These semantic variables reference the token variables with dark mode Tailwind fallbacks. */
  [data-theme="dark"] {
    --background-color: var(--color-background-base, var(--color-neutral-900));
    --focus-ring-color: var(--color-focus-ring, var(--color-primary-400));
    --text-color: var(--color-text-primary, var(--color-neutral-100));
    --text-color-base: var(--color-text-base, var(--color-neutral-100));
    --text-color-hover: var(--color-text-hover, var(--color-neutral-50));
    --text-color-disabled: var(--color-text-disabled, var(--color-neutral-500));
    --text-color-placeholder: var(
      --color-text-placeholder,
      var(--color-neutral-400)
    );
    --link-color: var(--color-link, var(--color-primary-400));
    --link-color-secondary: var(--color-link-secondary, var(--color-neutral-100));
    --link-color-pressed: var(--color-link-pressed, var(--color-primary-300));
    --border-color: var(--color-border-base, var(--color-neutral-700));
    --border-color-hover: var(--color-border-hover, var(--color-neutral-600));
    --border-color-pressed: var(--color-border-pressed, var(--color-neutral-500));
    --border-color-disabled: var(
      --color-border-disabled,
      var(--color-neutral-800)
    );
    --button-background: var(--color-button-background, var(--color-neutral-800));
    --button-background-pressed: var(
      --color-button-background-pressed,
      var(--color-neutral-700)
    );
    --field-background: var(--color-field-background, var(--color-neutral-800));
    --field-text-color: var(--color-field-text, var(--color-neutral-100));
    --overlay-background: var(
      --color-overlay-background,
      var(--color-neutral-800)
    );

    /* Highlight colors for dark mode - Based on lighter primary shades */
    --highlight-background: var(
      --color-highlight-background,
      var(--color-primary-500)
    );
    --highlight-background-pressed: var(
      --color-highlight-background-pressed,
      var(--color-primary-400)
    );
    --highlight-background-invalid: var(
      --color-highlight-background-invalid,
      var(--color-error-500)
    );
    --highlight-foreground: var(
      --color-highlight-foreground,
      var(--color-neutral-900)
    );
    --highlight-foreground-pressed: var(
      --color-highlight-foreground-pressed,
      var(--color-neutral-800)
    );
    --highlight-overlay: var(--color-highlight-overlay, rgba(56, 189, 248, 0.15));

    /* Action semantic colors - Dark mode */

    /* Primary action tokens */
    --action-primary-bg: var(--color-action-primary-bg, var(--color-primary-500));
    --action-primary-bg-hover: var(
      --color-action-primary-bg-hover,
      var(--color-primary-400)
    );
    --action-primary-bg-pressed: var(
      --color-action-primary-bg-pressed,
      var(--color-primary-300)
    );
    --action-primary-text: var(
      --color-action-primary-text,
      var(--color-neutral-900)
    );
    --action-primary-border: var(
      --color-action-primary-border,
      var(--color-primary-500)
    );
    --action-primary-border-hover: var(
      --color-action-primary-border-hover,
      var(--color-primary-400)
    );
    --action-primary-border-pressed: var(
      --color-action-primary-border-pressed,
      var(--color-primary-300)
    );

    /* Secondary action tokens */
    --action-secondary-bg: var(
      --color-action-secondary-bg,
      var(--color-secondary-500)
    );
    --action-secondary-bg-hover: var(
      --color-action-secondary-bg-hover,
      var(--color-secondary-400)
    );
    --action-secondary-bg-pressed: var(
      --color-action-secondary-bg-pressed,
      var(--color-secondary-300)
    );
    --action-secondary-text: var(
      --color-action-secondary-text,
      var(--color-neutral-900)
    );
    --action-secondary-border: var(
      --color-action-secondary-border,
      var(--color-secondary-500)
    );
    --action-secondary-border-hover: var(
      --color-action-secondary-border-hover,
      var(--color-secondary-400)
    );
    --action-secondary-border-pressed: var(
      --color-action-secondary-border-pressed,
      var(--color-secondary-300)
    );

    /* Surface action tokens */
    --action-surface-bg: var(--color-action-surface-bg, var(--color-surface-400));
    --action-surface-bg-hover: var(
      --color-action-surface-bg-hover,
      var(--color-surface-300)
    );
    --action-surface-bg-pressed: var(
      --color-action-surface-bg-pressed,
      var(--color-surface-200)
    );
    --action-surface-text: var(
      --color-action-surface-text,
      var(--color-neutral-900)
    );
    --action-surface-border: var(
      --color-action-surface-border,
      var(--color-surface-500)
    );
    --action-surface-border-hover: var(
      --color-action-surface-border-hover,
      var(--color-surface-400)
    );
    --action-surface-border-pressed: var(
      --color-action-surface-border-pressed,
      var(--color-surface-300)
    );

    /* Outline action tokens */
    --action-outline-text: var(
      --color-action-outline-text,
      var(--color-neutral-200)
    );
    --action-outline-text-hover: var(
      --color-action-outline-text-hover,
      var(--color-neutral-100)
    );
    --action-outline-border: var(
      --color-action-outline-border,
      var(--color-neutral-600)
    );
    --action-outline-border-hover: var(
      --color-action-outline-border-hover,
      var(--color-neutral-500)
    );
    --action-outline-border-pressed: var(
      --color-action-outline-border-pressed,
      var(--color-neutral-400)
    );
    --action-outline-bg-hover: var(
      --color-action-outline-bg-hover,
      var(--color-neutral-800)
    );
    --action-outline-bg-pressed: var(
      --color-action-outline-bg-pressed,
      var(--color-neutral-700)
    );

    /* Ghost action tokens */
    --action-ghost-text: var(--color-action-ghost-text, var(--color-neutral-200));
    --action-ghost-text-hover: var(
      --color-action-ghost-text-hover,
      var(--color-neutral-100)
    );
    --action-ghost-bg-hover: var(
      --color-action-ghost-bg-hover,
      var(--color-neutral-800)
    );
    --action-ghost-bg-pressed: var(
      --color-action-ghost-bg-pressed,
      var(--color-neutral-700)
    );

    /* Legacy button token aliases (deprecated) */
    --button-primary-bg: var(--action-primary-bg);
    --button-primary-text: var(--action-primary-text);
    --button-primary-border: var(--action-primary-border);
    --button-secondary-bg: var(--action-secondary-bg);
    --button-secondary-text: var(--action-secondary-text);
    --button-secondary-border: var(--action-secondary-border);
    --button-surface-bg: var(--action-surface-bg);
    --button-surface-text: var(--action-surface-text);
    --button-surface-border: var(--action-surface-border);
    --button-outline-text: var(--action-outline-text);
    --button-outline-border: var(--action-outline-border);
    --button-ghost-text: var(--action-ghost-text);

    /* Shadow System - Dark mode (increased opacity for visibility) */
    --shadow-sm: var(--box-shadow-sm, 0 1px 2px 0 rgb(0 0 0 / 0.2));
    --shadow-md: var(
      --box-shadow-md,
      0 4px 6px -1px rgb(0 0 0 / 0.3),
      0 2px 4px -2px rgb(0 0 0 / 0.2)
    );
    --shadow-lg: var(
      --box-shadow-lg,
      0 10px 15px -3px rgb(0 0 0 / 0.4),
      0 4px 6px -4px rgb(0 0 0 / 0.3)
    );
    --shadow-xl: var(
      --box-shadow-xl,
      0 20px 25px -5px rgb(0 0 0 / 0.5),
      0 8px 10px -6px rgb(0 0 0 / 0.4)
    );

    /* Overlay backgrounds - Dark mode */
    --highlight-hover-overlay: rgba(0 0 0 / 0.1);
    --highlight-pressed-overlay: rgba(0 0 0 / 0.2);
  }

  /* Windows high contrast mode overrides */
  @media (forced-colors: active) {
    :root {
      --background-color: Canvas;
      --focus-ring-color: Highlight;
      --text-color: ButtonText;
      --text-color-base: ButtonText;
      --text-color-hover: ButtonText;
      --text-color-disabled: GrayText;
      --text-color-placeholder: ButtonText;
      --link-color: LinkText;
      --link-color-secondary: LinkText;
      --link-color-pressed: LinkText;
      --border-color: ButtonBorder;
      --border-color-hover: ButtonBorder;
      --border-color-pressed: ButtonBorder;
      --border-color-disabled: GrayText;
      --field-background: Field;
      --field-text-color: FieldText;
      --overlay-background: Canvas;
      --button-background: ButtonFace;
      --button-background-pressed: ButtonFace;
      --highlight-background: Highlight;
      --highlight-background-pressed: Highlight;
      --highlight-background-invalid: LinkText;
      --highlight-foreground: HighlightText;
      --highlight-foreground-pressed: HighlightText;
      --invalid-color: LinkText;
      --invalid-color-pressed: LinkText;
    }
  }
}
