import{c as te,r as s,u as oe,w as ce,j as a,P as b,a as de,b as o,f as $,F as he,l as be,d as v,a8 as ge,H as x,e as m,o as me,M as Ce,x as Se,T as ue,D as ve,y as xe,S as je,i as C,v as ye}from"./index-CvhBI1Ng.js";import{P as n}from"./labels-C7QIhqP9.js";import{u as Ee}from"./useCollectionItemManager-BKuQ5d1n.js";import{S as Me}from"./spell-check-2-DP3WLf4F.js";import{S as ke}from"./square-x-BXKdMJlE.js";import{P as J}from"./pointer-off-D2dgyk3N.js";import{P as De}from"./pen-off-ButURYB8.js";import{F as fe}from"./focus-zrqomX56.js";import{B as Ae}from"./binary-CAiTFw2a.js";const Ie=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],Le=te("layout-list",Ie),qe=s.memo(function({elementId:d,currentProps:e,onUpdate:i}){const{children:c,selectedItemIndex:E,selectItem:M,deselectItem:y,addItem:k,deleteItem:D,updateItem:g}=Ee({elementId:d,childTag:"SelectItem",defaultItemProps:l=>({label:`Option ${l+1}`,value:`option${l+1}`})}),f=s.useMemo(()=>oe.getState().elementsMap.get(d)?.customId||"",[d]);s.useEffect(()=>{y()},[d,y]);const A=s.useCallback(l=>{i({...e,label:l||void 0})},[e,i]),I=s.useCallback(l=>{i({...e,description:l||void 0})},[e,i]),L=s.useCallback(l=>{i({...e,errorMessage:l||void 0})},[e,i]),B=s.useCallback(l=>{i({...e,placeholder:l||void 0})},[e,i]),O=s.useCallback(l=>{i({...e,selectedValue:l||void 0})},[e,i]),R=s.useCallback(l=>{i({...e,defaultSelectedKey:l||void 0})},[e,i]),N=s.useCallback(l=>{i({...e,disallowEmptySelection:l})},[e,i]),T=s.useCallback(l=>{i({...e,isRequired:l})},[e,i]),_=s.useCallback(l=>{i({...e,isDisabled:l})},[e,i]),F=s.useCallback(l=>{i({...e,isReadOnly:l})},[e,i]),V=s.useCallback(l=>{i({...e,autoFocus:l})},[e,i]),w=s.useCallback(l=>{i({...e,menuTrigger:l})},[e,i]),q=s.useCallback(l=>{i({...e,name:l||void 0})},[e,i]),K=s.useCallback(l=>{i({...e,validationBehavior:l})},[e,i]),Y=s.useCallback(l=>{i({...e,"aria-label":l||void 0})},[e,i]),H=s.useCallback(l=>{i({...e,"aria-labelledby":l||void 0})},[e,i]),z=s.useCallback(l=>{i({...e,"aria-describedby":l||void 0})},[e,i]),G=s.useCallback(l=>{i({...e,dataBinding:l||void 0})},[e,i]),r=s.useCallback(l=>{i({...e,selectionMode:l})},[e,i]),W=s.useCallback(l=>{i({...e,multipleDisplayMode:l})},[e,i]),Q=s.useCallback((l,t)=>{const h=c.find(u=>u.id===l);if(!h)return;const S={...h.props,label:t};g(l,S)},[c,g]),X=s.useCallback((l,t)=>{const h=c.find(u=>u.id===l);if(!h)return;const S={...h.props,value:t};g(l,S)},[c,g]),Z=s.useCallback((l,t)=>{const h=c.find(u=>u.id===l);if(!h)return;const S={...h.props,isDisabled:t};g(l,S)},[c,g]),p=s.useCallback(async l=>{try{const{error:t}=await ce.from("elements").delete().eq("id",l);if(t){console.error("SelectItem ì‚­ì œ ì—ëŸ¬:",t);return}D(l)}catch(t){console.error("SelectItem ì‚­ì œ ì¤‘ ì˜¤ë¥˜:",t)}},[D]),U=s.useMemo(()=>a.jsx(b,{title:"Basic",children:a.jsx(de,{label:"ID",value:f,elementId:d,placeholder:"select_1"})}),[f,d]),P=s.useMemo(()=>a.jsxs(b,{title:"Content",children:[a.jsx(o,{label:n.LABEL,value:String(e.label||""),onChange:A,icon:$}),a.jsx(o,{label:n.DESCRIPTION,value:String(e.description||""),onChange:I,icon:he}),a.jsx(o,{label:n.ERROR_MESSAGE,value:String(e.errorMessage||""),onChange:L,icon:be}),a.jsx(o,{label:n.PLACEHOLDER,value:String(e.placeholder||""),onChange:B,icon:Me})]}),[e.label,e.description,e.errorMessage,e.placeholder,A,I,L,B]),ee=s.useMemo(()=>a.jsxs(b,{title:"State",children:[a.jsx(v,{label:"Selection Mode",value:String(e.selectionMode||"single"),onChange:r,options:[{value:"single",label:"Single"},{value:"multiple",label:"Multiple"}],icon:ge}),e.selectionMode==="multiple"&&a.jsx(v,{label:"Display Mode",value:String(e.multipleDisplayMode||"count"),onChange:W,options:[{value:"count",label:'Count (e.g., "3 selected")'},{value:"list",label:'List (e.g., "A, B, C")'},{value:"custom",label:"Custom"}],icon:Le}),a.jsx(o,{label:n.VALUE,value:String(e.selectedValue||""),onChange:O,icon:x}),a.jsx(o,{label:n.DEFAULT_SELECTED_KEY,value:String(e.defaultSelectedKey||""),onChange:R,icon:x}),a.jsx(m,{label:n.DISALLOW_EMPTY_SELECTION,isSelected:!!e.disallowEmptySelection,onChange:N,icon:ke}),a.jsx(m,{label:n.REQUIRED,isSelected:!!e.isRequired,onChange:T,icon:me})]}),[e.selectionMode,e.multipleDisplayMode,e.selectedValue,e.defaultSelectedKey,e.disallowEmptySelection,e.isRequired,r,W,O,R,N,T]),le=s.useMemo(()=>a.jsxs(b,{title:"Behavior",children:[a.jsx(m,{label:n.DISABLED,isSelected:!!e.isDisabled,onChange:_,icon:J}),a.jsx(m,{label:n.READONLY,isSelected:!!e.isReadOnly,onChange:F,icon:De}),a.jsx(m,{label:n.AUTO_FOCUS,isSelected:!!e.autoFocus,onChange:V,icon:fe}),a.jsx(v,{label:n.MENU_TRIGGER,value:String(e.menuTrigger||"click"),onChange:w,options:[{value:"click",label:n.CLICK},{value:"hover",label:n.HOVER}],icon:Ce})]}),[e.isDisabled,e.isReadOnly,e.autoFocus,e.menuTrigger,_,F,V,w]),ae=s.useMemo(()=>a.jsxs(b,{title:"Form Integration",children:[a.jsx(o,{label:n.NAME,value:String(e.name||""),onChange:q,icon:Se,placeholder:"select-name"}),a.jsx(v,{label:n.VALIDATION_BEHAVIOR,value:String(e.validationBehavior||"native"),onChange:K,options:[{value:"native",label:"Native"},{value:"aria",label:"ARIA"}]})]}),[e.name,e.validationBehavior,q,K]),ie=s.useMemo(()=>a.jsxs(b,{title:"Accessibility",children:[a.jsx(o,{label:n.ARIA_LABEL,value:String(e["aria-label"]||""),onChange:Y,icon:ue,placeholder:"Select label for screen readers"}),a.jsx(o,{label:n.ARIA_LABELLEDBY,value:String(e["aria-labelledby"]||""),onChange:H,icon:x,placeholder:"label-element-id"}),a.jsx(o,{label:n.ARIA_DESCRIBEDBY,value:String(e["aria-describedby"]||""),onChange:z,icon:x,placeholder:"description-element-id"})]}),[e,Y,H,z]),se=s.useMemo(()=>a.jsx(b,{title:"Data Binding",icon:ve,children:a.jsx(xe,{label:"ë°ì´í„° ì†ŒìŠ¤",value:e.dataBinding,onChange:G})}),[e.dataBinding,G]),ne=s.useMemo(()=>a.jsxs(b,{title:n.ITEM_MANAGEMENT,children:[a.jsxs("div",{className:"tab-overview",children:[a.jsxs("p",{className:"tab-overview-text",children:["Total items: ",c.length||0]}),a.jsx("p",{className:"section-overview-help",children:"ðŸ’¡ Select individual items from list to edit properties"})]}),c.length>0&&a.jsx("div",{className:"tabs-list",children:c.map((l,t)=>a.jsxs("div",{className:"tab-list-item",children:[a.jsxs("span",{className:"tab-title",children:[String(l.props.label)||`Item ${t+1}`,e.selectedValue===l.props.value&&" âœ“"]}),a.jsx("button",{className:"tab-edit-button",onClick:()=>M(t),children:"Edit"})]},l.id))}),a.jsx("div",{className:"tab-actions",children:a.jsxs("button",{className:"control-button add",onClick:k,children:[a.jsx(je,{color:C.color,strokeWidth:C.stroke,size:C.size}),"Add Item"]})})]}),[c,e.selectedValue,M,k]);if(E!==null){const l=c[E];return l?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"properties-aria",children:[a.jsx(o,{label:n.LABEL,value:String(l.props.label||""),onChange:t=>Q(l.id,t),icon:$}),a.jsx(o,{label:n.VALUE,value:String(l.props.value||""),onChange:t=>X(l.id,t),icon:Ae}),a.jsx(m,{label:n.DISABLED,isSelected:!!l.props.isDisabled,onChange:t=>Z(l.id,t),icon:J}),a.jsx("div",{className:"tab-actions",children:a.jsxs("button",{className:"control-button delete",onClick:()=>p(l.id),children:[a.jsx(ye,{color:C.color,strokeWidth:C.stroke,size:C.size}),"Delete This Item"]})})]}),a.jsx("div",{className:"tab-actions",children:a.jsx("button",{className:"control-button secondary",onClick:y,children:n.CLOSE})})]}):null}return a.jsxs(a.Fragment,{children:[U,P,se,ee,le,ae,ie,ne]})},(j,d)=>j.elementId===d.elementId&&JSON.stringify(j.currentProps)===JSON.stringify(d.currentProps));export{qe as SelectEditor};
