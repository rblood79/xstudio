import{r as p,u as i,j as r,b as o,T as C,P as b,a as y,d as N,c as _,H as v,f as A,i as x,g as D,E as w,h as L}from"./index-BPcpiBuH.js";import{P as l}from"./labels-C7QIhqP9.js";import{P as k}from"./pointer-off-BXcWKt9f.js";const Y=p.memo(function({elementId:s,currentProps:d,onUpdate:E}){const[h,g]=p.useState(null),S=i(e=>e.addElement),m=i(e=>e.elements),f=i(e=>e.currentPageId),B=m.find(e=>e.id===s),P=B?.customId||"",u=(e,a)=>{const t={...d,[e]:a};E(t)},n=p.useMemo(()=>m.filter(e=>e.parent_id===s&&e.tag==="Breadcrumb").sort((e,a)=>(e.order_num||0)-(a.order_num||0)),[m,s]);if(h&&h.parentId===s){const e=n[h.breadcrumbIndex];if(!e)return null;const a=e.props;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"properties-aria",children:[r.jsx(o,{label:l.TEXT,value:String(a.children||""),onChange:t=>{const c=i.getState().updateElementProps;c(e.id,{...a,children:t})},icon:C}),r.jsx(o,{label:"Href",value:String(a.href||""),onChange:t=>{const c=i.getState().updateElementProps;c(e.id,{...a,href:t})},placeholder:"/"})]}),r.jsx("div",{className:"tab-actions",children:r.jsx("button",{className:"control-button secondary",onClick:()=>g(null),children:"Back to Breadcrumbs Settings"})})]})}return r.jsxs(r.Fragment,{children:[r.jsx(b,{title:"Basic",children:r.jsx(y,{label:"ID",value:P,elementId:s,placeholder:"breadcrumbs_1"})}),r.jsx(b,{title:"Behavior",children:r.jsx(N,{label:l.DISABLED,isSelected:!!d.isDisabled,onChange:e=>u("isDisabled",e),icon:k})}),r.jsxs(b,{title:"Accessibility",children:[r.jsx(o,{label:l.ARIA_LABEL,value:String(d["aria-label"]||""),onChange:e=>u("aria-label",e||void 0),icon:_,placeholder:"Breadcrumb navigation for screen readers"}),r.jsx(o,{label:l.ARIA_LABELLEDBY,value:String(d["aria-labelledby"]||""),onChange:e=>u("aria-labelledby",e||void 0),icon:v,placeholder:"label-element-id"}),r.jsx(o,{label:l.ARIA_DESCRIBEDBY,value:String(d["aria-describedby"]||""),onChange:e=>u("aria-describedby",e||void 0),icon:v,placeholder:"description-element-id"})]}),r.jsxs(b,{title:"Breadcrumb Management",children:[r.jsxs("div",{className:"tab-overview",children:[r.jsxs("p",{className:"tab-overview-text",children:["Total breadcrumbs: ",n.length||0]}),r.jsx("p",{className:"section-overview-help",children:"ğŸ’¡ Click on individual breadcrumbs to edit text and href"})]}),n.length>0&&r.jsx("div",{className:"tabs-list",children:n.map((e,a)=>{const t=e.props;return r.jsxs("div",{className:"tab-list-item",children:[r.jsx("span",{className:"tab-title",children:String(t.children)||`Breadcrumb ${a+1}`}),r.jsx("button",{className:"tab-edit-button",onClick:()=>g({parentId:s,breadcrumbIndex:a}),children:"Edit"})]},e.id)})}),r.jsx("div",{className:"tab-actions",children:r.jsxs("button",{className:"control-button add",onClick:async()=>{try{const e=f||B?.page_id;if(!e){console.error("í˜ì´ì§€ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");return}const a=n.length||0,t=n.length>0?Math.max(...n.map(I=>I.order_num||0)):0,c={id:w.generateId(),customId:D("Breadcrumb",m),page_id:e,tag:"Breadcrumb",props:{children:`Breadcrumb ${a+1}`,href:"/"},parent_id:s,order_num:t+1},j=await(await L()).elements.insert(c);S(j),console.log("âœ… [IndexedDB] ìƒˆ Breadcrumb ì¶”ê°€ë¨:",j)}catch(e){console.error("Breadcrumb ì¶”ê°€ ì¤‘ ì˜¤ë¥˜:",e)}},children:[r.jsx(A,{color:x.color,strokeWidth:x.strokeWidth,size:x.size}),"Add Breadcrumb"]})})]})]})});export{Y as BreadcrumbsEditor};
