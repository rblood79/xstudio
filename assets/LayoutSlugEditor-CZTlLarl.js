import{r as o,O as d,Q as p,U as S,f,V as h,j as e,P as j,L as m,b,s as v,W as L}from"./index-BSTGic9U.js";const k=o.memo(function({layoutId:r}){const a=d(l=>l.layouts.find(s=>s.id===r)),i=d(l=>l.updateLayout),[c,g]=o.useState(null),t=a?.slug||"",n=o.useCallback(async l=>{const s=l?p(l):"";if(s){const u=S(s);if(!u.isValid){g(u.error||"Invalid slug");return}}g(null),console.log("ðŸ“ Layout Slug changed:",{layoutId:r,oldSlug:t,newSlug:s||null});try{const u=await f();i(r,{slug:s||null}),await u.layouts.update(r,{slug:s||null}),console.log("âœ… Layout slug updated successfully")}catch(u){console.error("âŒ Failed to update layout slug:",u)}},[r,t,i]),y=o.useCallback(()=>{if(!a)return;const l=p(h(a.name));n(l)},[a,n]),x=o.useCallback(()=>{n("")},[n]);return a?e.jsx(j,{title:"URL Prefix",icon:m,children:e.jsxs("div",{className:"layout-slug-editor",children:[e.jsx(b,{label:"Slug",value:t,onChange:n,placeholder:`/${h(a.name)}`,description:"URL prefix for pages using this layout",icon:m}),c&&e.jsxs("div",{className:"page-slug-error",children:[e.jsx(v,{size:12}),e.jsx("span",{children:c})]}),e.jsxs("div",{className:"layout-slug-actions",children:[e.jsxs("button",{type:"button",className:"page-slug-generate",onClick:y,title:"Generate slug from layout name",children:[e.jsx(L,{size:12}),"Generate"]}),t&&e.jsx("button",{type:"button",className:"page-layout-clear",onClick:x,title:"Remove slug",children:"Clear"})]}),t&&e.jsxs("div",{className:"page-url-preview",children:[e.jsx("span",{className:"page-url-label",children:"Pages with this layout will have URLs like:"}),e.jsxs("code",{className:"page-url-value",children:[t,"/page-slug"]})]})]})}):null});export{k as LayoutSlugEditor,k as default};
