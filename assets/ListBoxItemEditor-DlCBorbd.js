import{r as v,u as b,j as e,D as j,S as I,i as c,g as y,E as F,f as S,P as h,a as C,b as d,T as _,F as w,d as A,e as T,H as f}from"./index-BkGgeLCq.js";import{P as l}from"./labels-C7QIhqP9.js";import{B}from"./binary-BPA-AG5T.js";import{P}from"./pointer-off-BWq5QhsC.js";const Y=v.memo(function({elementId:r,currentProps:a,onUpdate:D}){const{addElement:p,currentPageId:u,setSelectedElement:E}=b(),g=b(t=>t.elements),N=g.find(t=>t.id===r)?.customId||"",i=(t,s)=>{const m={...a,[t]:s};D(m)},n=v.useMemo(()=>g.filter(t=>t.parent_id===r&&t.tag==="Field").sort((t,s)=>(t.order_num||0)-(s.order_num||0)),[g,r]);return n.length>0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"properties-aria",children:[e.jsxs("legend",{className:"fieldset-legend",children:[e.jsx(j,{size:16})," Field Management"]}),e.jsxs("div",{className:"tab-overview",children:[e.jsxs("p",{className:"tab-overview-text",children:["Total fields: ",n.length]}),e.jsx("p",{className:"section-overview-help",children:"ğŸ’¡ This ListBoxItem uses Field elements for dynamic data rendering"})]}),n.length>0&&e.jsx("div",{className:"react-aria-ListBox",children:n.map(t=>{const s=t.props;return e.jsxs("div",{className:"react-aria-ListBoxItem",children:[e.jsxs("span",{className:"tab-title",children:[String(s.key||"Unnamed Field"),s.type?` (${s.type})`:""]}),e.jsx("button",{className:"tab-edit-button",onClick:()=>{E(t.id,s,s.style)},children:"Edit"})]},t.id)})}),e.jsx("div",{className:"tab-actions",children:e.jsxs("button",{className:"control-button add",onClick:async()=>{const t=u;if(!t){alert("í˜ì´ì§€ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.");return}const{elements:s}=b.getState(),m=Math.max(0,...n.map(o=>o.order_num||0)),x={id:F.generateId(),customId:y("Field",s),page_id:t,tag:"Field",props:{key:`field${n.length+1}`,label:`Field ${n.length+1}`,type:"string",showLabel:!0,visible:!0,style:{},className:""},parent_id:r,order_num:m+1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};try{const L=await(await S()).elements.insert(x);p(L),console.log("âœ… [IndexedDB] Field created successfully")}catch(o){console.error("âŒ [IndexedDB] Failed to create Field:",o),alert("Field ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}},children:[e.jsx(I,{color:c.color,strokeWidth:c.stroke,size:c.size}),"Add Field"]})})]})}):e.jsxs(e.Fragment,{children:[e.jsx(h,{title:"Basic",children:e.jsx(C,{label:"ID",value:N,elementId:r,placeholder:"listboxitem_1"})}),e.jsx(h,{title:"Static Item Properties",children:e.jsx("p",{className:"section-overview-help",children:"ğŸ’¡ This is a static ListBoxItem. Add Field elements to enable dynamic data rendering."})}),e.jsxs(h,{title:"Content",children:[e.jsx(d,{label:l.LABEL,value:String(a.label||""),onChange:t=>i("label",t||void 0),icon:_}),e.jsx(d,{label:l.VALUE,value:String(a.value||""),onChange:t=>i("value",t||void 0),icon:B}),e.jsx(d,{label:l.DESCRIPTION,value:String(a.description||""),onChange:t=>i("description",t||void 0),icon:w}),e.jsx(d,{label:l.TEXT_VALUE,value:String(a.textValue||""),onChange:t=>i("textValue",t||void 0),icon:B})]}),e.jsx(h,{title:"Behavior",children:e.jsx(A,{label:l.DISABLED,isSelected:!!a.isDisabled,onChange:t=>i("isDisabled",t),icon:P})}),e.jsxs(h,{title:"Accessibility",children:[e.jsx(d,{label:l.ARIA_LABEL,value:String(a["aria-label"]||""),onChange:t=>i("aria-label",t||void 0),icon:T,placeholder:"List box item label for screen readers"}),e.jsx(d,{label:l.ARIA_LABELLEDBY,value:String(a["aria-labelledby"]||""),onChange:t=>i("aria-labelledby",t||void 0),icon:f,placeholder:"label-element-id"}),e.jsx(d,{label:l.ARIA_DESCRIBEDBY,value:String(a["aria-describedby"]||""),onChange:t=>i("aria-describedby",t||void 0),icon:f,placeholder:"description-element-id"})]}),e.jsxs("div",{className:"properties-aria",children:[e.jsxs("legend",{className:"fieldset-legend",children:[e.jsx(j,{size:16})," Convert to Dynamic Item"]}),e.jsx("div",{className:"tab-overview",children:e.jsx("p",{className:"section-overview-help",children:"ğŸ’¡ Add Field elements to display dynamic data from API/Database"})}),e.jsx("div",{className:"tab-actions",children:e.jsxs("button",{className:"control-button add",onClick:async()=>{const t=u;if(!t){alert("í˜ì´ì§€ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.");return}const{elements:s}=b.getState(),m={id:F.generateId(),customId:y("Field",s),page_id:t,tag:"Field",props:{key:"field1",label:"Field 1",type:"string",showLabel:!0,visible:!0,style:{},className:""},parent_id:r,order_num:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};try{const o=await(await S()).elements.insert(m);p(o),console.log("âœ… [IndexedDB] Field created successfully")}catch(x){console.error("âŒ [IndexedDB] Failed to create Field:",x),alert("Field ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}},children:[e.jsx(I,{color:c.color,strokeWidth:c.stroke,size:c.size}),"Add First Field"]})})]})]})});export{Y as ListBoxItemEditor,Y as default};
