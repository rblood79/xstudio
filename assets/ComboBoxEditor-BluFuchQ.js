import{r as s,u as ce,x as de,j as l,P as g,a as he,b as d,T as f,F as O,l as be,d as u,t as ge,e as Y,M as Ce,y as me,c as ue,H as $,I as Se,J as xe,f as ve,i as S,w as je}from"./index-Cdmzjkk6.js";import{P as o}from"./labels-C7QIhqP9.js";import{u as fe}from"./useCollectionItemManager-DPPVfZGw.js";import{B as G}from"./binary-DpIfTGiy.js";import{P as J}from"./pointer-off-Bld37oFU.js";import{P as Oe}from"./pen-off-Cgkl5LaM.js";import{F as Be}from"./focus-CVushM7q.js";const Le=s.memo(function({elementId:h,currentProps:e,onUpdate:i}){const{children:c,selectedItemIndex:B,selectItem:E,deselectItem:j,addItem:I,deleteItem:A,updateItem:b}=fe({elementId:h,childTag:"ComboBoxItem",defaultItemProps:a=>({label:`Option ${a+1}`,value:`option${a+1}`,textValue:`Option ${a+1}`})}),D=s.useMemo(()=>ce.getState().elementsMap.get(h)?.customId||"",[h]);s.useEffect(()=>{j()},[h,j]);const k=s.useCallback(a=>{i({...e,label:a||void 0})},[e,i]),y=s.useCallback(a=>{i({...e,description:a||void 0})},[e,i]),R=s.useCallback(a=>{i({...e,errorMessage:a||void 0})},[e,i]),L=s.useCallback(a=>{i({...e,placeholder:a||void 0})},[e,i]),N=s.useCallback(a=>{i({...e,selectedValue:a||void 0})},[e,i]),M=s.useCallback(a=>{i({...e,allowsCustomValue:a})},[e,i]),T=s.useCallback(a=>{i({...e,isRequired:a})},[e,i]),V=s.useCallback(a=>{i({...e,isDisabled:a})},[e,i]),r=s.useCallback(a=>{i({...e,isReadOnly:a})},[e,i]),_=s.useCallback(a=>{i({...e,autoFocus:a})},[e,i]),F=s.useCallback(a=>{i({...e,menuTrigger:a})},[e,i]),q=s.useCallback(a=>{i({...e,name:a||void 0})},[e,i]),w=s.useCallback(a=>{i({...e,validationBehavior:a})},[e,i]),K=s.useCallback(a=>{i({...e,"aria-label":a||void 0})},[e,i]),W=s.useCallback(a=>{i({...e,"aria-labelledby":a||void 0})},[e,i]),z=s.useCallback(a=>{i({...e,"aria-describedby":a||void 0})},[e,i]),x=s.useCallback(a=>{i({...e,defaultSelectedKey:a||void 0})},[e,i]),H=s.useCallback(a=>{i({...e,dataBinding:a||void 0})},[e,i]),Q=s.useCallback((a,n)=>{const t=c.find(m=>m.id===a);if(!t)return;const C={...t.props,label:n};b(a,C),e.defaultSelectedKey===t.props.value&&x(t.props.value)},[c,e.defaultSelectedKey,b,x]),X=s.useCallback((a,n)=>{const t=c.find(te=>te.id===a);if(!t)return;const C=t.props.value,m={...t.props,value:n};b(a,m),e.defaultSelectedKey===C&&x(n)},[c,e.defaultSelectedKey,b,x]),Z=s.useCallback((a,n)=>{const t=c.find(m=>m.id===a);if(!t)return;const C={...t.props,description:n};b(a,C)},[c,b]),p=s.useCallback((a,n)=>{const t=c.find(m=>m.id===a);if(!t)return;const C={...t.props,isDisabled:n};b(a,C)},[c,b]),U=s.useCallback(async a=>{try{const{error:n}=await de.from("elements").delete().eq("id",a);if(n){console.error("ComboBoxItem 삭제 에러:",n);return}A(a)}catch(n){console.error("ComboBoxItem 삭제 중 오류:",n)}},[A]),P=s.useMemo(()=>l.jsx(g,{title:"Basic",children:l.jsx(he,{label:"ID",value:D,elementId:h,placeholder:"combobox_1"})}),[D,h]),ee=s.useMemo(()=>l.jsxs(g,{title:"Content",children:[l.jsx(d,{label:o.LABEL,value:String(e.label||""),onChange:k,icon:f}),l.jsx(d,{label:o.DESCRIPTION,value:String(e.description||""),onChange:y,icon:O}),l.jsx(d,{label:o.ERROR_MESSAGE,value:String(e.errorMessage||""),onChange:R,icon:be}),l.jsx(d,{label:o.PLACEHOLDER,value:String(e.placeholder||""),onChange:L,icon:O})]}),[e.label,e.description,e.errorMessage,e.placeholder,k,y,R,L]),ae=s.useMemo(()=>l.jsxs(g,{title:"State",children:[l.jsx(d,{label:o.VALUE,value:String(e.selectedValue||""),onChange:N,icon:f,placeholder:"선택된 값이 여기에 표시됩니다"}),l.jsx(u,{label:o.ALLOWS_CUSTOM_VALUE,isSelected:!!e.allowsCustomValue,onChange:M,icon:G}),l.jsx(u,{label:o.REQUIRED,isSelected:!!e.isRequired,onChange:T,icon:ge})]}),[e.selectedValue,e.allowsCustomValue,e.isRequired,N,M,T]),le=s.useMemo(()=>l.jsxs(g,{title:"Behavior",children:[l.jsx(u,{label:o.DISABLED,isSelected:!!e.isDisabled,onChange:V,icon:J}),l.jsx(u,{label:o.READONLY,isSelected:!!e.isReadOnly,onChange:r,icon:Oe}),l.jsx(u,{label:o.AUTO_FOCUS,isSelected:!!e.autoFocus,onChange:_,icon:Be}),l.jsx(Y,{label:o.MENU_TRIGGER,value:String(e.menuTrigger||"focus"),onChange:F,options:[{value:"focus",label:"Focus"},{value:"input",label:"Input"},{value:"manual",label:"Manual"}],icon:Ce})]}),[e.isDisabled,e.isReadOnly,e.autoFocus,e.menuTrigger,V,r,_,F]),ie=s.useMemo(()=>l.jsxs(g,{title:"Form Integration",children:[l.jsx(d,{label:o.NAME,value:String(e.name||""),onChange:q,icon:me,placeholder:"combobox-name"}),l.jsx(Y,{label:o.VALIDATION_BEHAVIOR,value:String(e.validationBehavior||"native"),onChange:w,options:[{value:"native",label:"Native"},{value:"aria",label:"ARIA"}]})]}),[e.name,e.validationBehavior,q,w]),se=s.useMemo(()=>l.jsxs(g,{title:"Accessibility",children:[l.jsx(d,{label:o.ARIA_LABEL,value:String(e["aria-label"]||""),onChange:K,icon:ue,placeholder:"ComboBox label for screen readers"}),l.jsx(d,{label:o.ARIA_LABELLEDBY,value:String(e["aria-labelledby"]||""),onChange:W,icon:$,placeholder:"label-element-id"}),l.jsx(d,{label:o.ARIA_DESCRIBEDBY,value:String(e["aria-describedby"]||""),onChange:z,icon:$,placeholder:"description-element-id"})]}),[e,K,W,z]),ne=s.useMemo(()=>l.jsx(g,{title:"Data Binding",icon:Se,children:l.jsx(xe,{label:"데이터 소스",value:e.dataBinding,onChange:H})}),[e.dataBinding,H]),oe=s.useMemo(()=>l.jsxs(g,{title:o.ADD_OPTION,children:[c.length>0?l.jsx("div",{className:"tabs-list",children:c.map((a,n)=>l.jsxs("div",{className:"tab-list-item",children:[l.jsxs("span",{className:"tab-title",children:[String(a.props.label)||`Item ${n+1}`,e.selectedValue===a.props.value&&" ✓"]}),l.jsx("button",{className:"tab-edit-button",onClick:()=>E(n),children:"Edit"})]},a.id))}):l.jsx("p",{className:"no-options",children:o.NO_OPTIONS}),l.jsx("div",{className:"tab-actions",children:l.jsxs("button",{className:"control-button add",onClick:I,children:[l.jsx(ve,{color:S.color,strokeWidth:S.strokeWidth,size:S.size}),o.ADD_OPTION]})})]}),[c,e.selectedValue,E,I]);if(B!==null){const a=c[B];return a?l.jsx(l.Fragment,{children:l.jsxs("div",{className:"properties-aria",children:[l.jsx(d,{label:o.LABEL,value:String(a.props.label||""),onChange:n=>Q(a.id,n),icon:f}),l.jsx(d,{label:o.VALUE,value:String(a.props.value||""),onChange:n=>X(a.id,n),icon:G}),l.jsx(d,{label:o.DESCRIPTION,value:String(a.props.description||""),onChange:n=>Z(a.id,n),icon:O}),l.jsx(u,{label:o.DISABLED,isSelected:!!a.props.isDisabled,onChange:n=>p(a.id,n),icon:J}),l.jsx("div",{className:"tab-actions",children:l.jsxs("button",{className:"control-button delete",onClick:()=>U(a.id),children:[l.jsx(je,{color:S.color,strokeWidth:S.strokeWidth,size:S.size}),"Delete This Item"]})}),l.jsx("div",{className:"tab-actions",children:l.jsx("button",{className:"control-button secondary",onClick:j,children:o.CLOSE})})]})}):null}return l.jsxs(l.Fragment,{children:[P,ee,ne,ae,le,ie,se,oe]})},(v,h)=>v.elementId===h.elementId&&JSON.stringify(v.currentProps)===JSON.stringify(h.currentProps));export{Le as ComboBoxEditor};
