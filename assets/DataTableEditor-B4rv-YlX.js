import{D as v,r as d,u as j,aC as b,j as a,P as c,a as z,I as u,b as h,F as g,J as L,a4 as N,d as w,_ as f,N as B,a9 as r,v as E}from"./index-D5lAmiE8.js";const A=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],R=v("circle-check",A);const _=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],M=v("loader-circle",_),q=d.memo(function({elementId:o,currentProps:l,onUpdate:m}){const D=d.useMemo(()=>j.getState().elementsMap.get(o)?.customId||"",[o]),t=String(l.id||""),s=b(e=>t?e.dataTableStates.get(t):void 0),x=b(e=>e.loadDataTable),p=b(e=>e.refreshDataTable),n=d.useCallback((e,i)=>{const k={...l,[e]:i};m(k)},[l,m]),C=d.useCallback(e=>{const i=j.getState().updateElement;i&&o&&i(o,{customId:e})},[o]),S=d.useCallback(e=>{n("dataBinding",e||void 0)},[n]),T=d.useCallback(()=>{t&&p(t)},[t,p]),I=d.useCallback(()=>{t&&x(t)},[t,x]),y=()=>{if(!s)return null;switch(s.status){case"loading":return a.jsx(M,{size:r.size,className:"spin"});case"success":return a.jsx(R,{size:r.size,className:"text-success"});case"error":return a.jsx(E,{size:r.size,className:"text-error"});default:return null}};return a.jsxs(a.Fragment,{children:[a.jsx(c,{title:"Basic",children:a.jsx(z,{label:"ID",value:D,elementId:o,onChange:C,placeholder:"datatable_1"})}),a.jsxs(c,{title:"DataTable Settings",icon:u,children:[a.jsx(h,{label:"DataTable ID",value:String(l.id||""),onChange:e=>n("id",e||""),placeholder:"users-datatable",icon:u,description:"Unique identifier for this datatable"}),a.jsx(h,{label:"Name",value:String(l.name||""),onChange:e=>n("name",e||""),placeholder:"Users Data",icon:g,description:"Display name for this datatable"}),a.jsx(h,{label:"Description",value:String(l.description||""),onChange:e=>n("description",e||void 0),placeholder:"User information from API",icon:g,description:"Optional description"})]}),a.jsx(c,{title:"Data Source",icon:u,children:a.jsx(L,{label:"Data Binding",value:l.dataBinding,onChange:S})}),a.jsxs(c,{title:"Auto Refresh",icon:N,children:[a.jsx(w,{label:"Auto Load",isSelected:l.autoLoad!==!1,onChange:e=>n("autoLoad",e),icon:f,description:"Load data automatically on mount"}),a.jsx(h,{label:"Refresh Interval (ms)",value:String(l.refreshInterval||""),onChange:e=>{const i=parseInt(e,10);n("refreshInterval",isNaN(i)?void 0:i)},placeholder:"0 (disabled)",icon:B,description:"Auto-refresh interval (0 = disabled)"})]}),a.jsxs(c,{title:"DataTable Status",icon:f,children:[a.jsxs("div",{className:"datatable-status-preview",children:[a.jsxs("div",{className:"datatable-status-row",children:[a.jsx("span",{className:"datatable-status-label",children:"Status:"}),a.jsxs("span",{className:"datatable-status-value",children:[y(),s?.status||"Not registered"]})]}),s?.data&&a.jsxs("div",{className:"datatable-status-row",children:[a.jsx("span",{className:"datatable-status-label",children:"Items:"}),a.jsx("span",{className:"datatable-status-value",children:s.data.length})]}),s?.error&&a.jsxs("div",{className:"datatable-status-row error",children:[a.jsx("span",{className:"datatable-status-label",children:"Error:"}),a.jsx("span",{className:"datatable-status-value text-error",children:s.error})]}),s?.lastLoadedAt&&a.jsxs("div",{className:"datatable-status-row",children:[a.jsx("span",{className:"datatable-status-label",children:"Last loaded:"}),a.jsx("span",{className:"datatable-status-value",children:new Date(s.lastLoadedAt).toLocaleTimeString()})]}),s?.consumers&&s.consumers.length>0&&a.jsxs("div",{className:"datatable-status-row",children:[a.jsx("span",{className:"datatable-status-label",children:"Consumers:"}),a.jsxs("span",{className:"datatable-status-value",children:[s.consumers.length," component(s)"]})]})]}),a.jsxs("div",{className:"datatable-actions",children:[a.jsxs("button",{className:"control-button secondary",onClick:I,disabled:!t||s?.status==="loading",children:[a.jsx(u,{size:r.size}),"Load Data"]}),a.jsxs("button",{className:"control-button secondary",onClick:T,disabled:!t||s?.status==="loading",children:[a.jsx(N,{size:r.size}),"Refresh"]})]})]}),a.jsx(c,{title:"Usage Info",children:a.jsxs("div",{className:"datatable-editor-info",children:[a.jsx("p",{className:"datatable-editor-info-text",children:"DataTable provides centralized data management. Other components can reference this datatable using its ID."}),a.jsxs("ul",{className:"datatable-editor-info-list",children:[a.jsx("li",{children:'Set a unique DataTable ID (e.g., "users-datatable", "products-api")'}),a.jsx("li",{children:"Configure data source using Data Binding"}),a.jsxs("li",{children:["Reference in ListBox, Select, ComboBox with"," ",a.jsx("code",{children:"dataTableId"})," prop"]}),a.jsx("li",{children:"Multiple components can share the same datatable"})]})]})})]})});export{q as DataTableEditor,q as default};
