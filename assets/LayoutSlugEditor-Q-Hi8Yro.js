import{r as n,$ as d,a0 as p,a1 as v,h as j,a2 as h,j as e,P as f,L as m,b,v as L,a3 as y,a4 as C}from"./index-2kd0jdZn.js";const w=n.memo(function({layoutId:r}){const s=d(a=>a.layouts.find(l=>l.id===r)),i=d(a=>a.updateLayout),[c,g]=n.useState(null),t=s?.slug||"",u=n.useCallback(async a=>{const l=a?p(a):"";if(l){const o=v(l);if(!o.valid){g(o.error||"Invalid slug");return}}g(null),console.log("ðŸ“ Layout Slug changed:",{layoutId:r,oldSlug:t,newSlug:l||null});try{const o=await j();i(r,{slug:l||void 0}),await o.layouts.update(r,{slug:l||void 0}),console.log("âœ… Layout slug updated successfully")}catch(o){console.error("âŒ Failed to update layout slug:",o)}},[r,t,i]),x=n.useCallback(()=>{if(!s)return;const a=p(h(s.name));u(a)},[s,u]),S=n.useCallback(()=>{u("")},[u]);return s?e.jsx(f,{title:"URL Prefix",icon:m,children:e.jsxs("div",{className:"layout-slug-editor",children:[e.jsx(b,{label:"Slug",value:t,onChange:u,placeholder:`/${h(s.name)}`,description:"URL prefix for pages using this layout",icon:m}),c&&e.jsxs("div",{className:"page-slug-error",children:[e.jsx(L,{size:y.size}),e.jsx("span",{children:c})]}),e.jsxs("div",{className:"layout-slug-actions",children:[e.jsxs("button",{type:"button",className:"page-slug-generate",onClick:x,title:"Generate slug from layout name",children:[e.jsx(C,{size:y.size}),"Generate"]}),t&&e.jsx("button",{type:"button",className:"page-layout-clear",onClick:S,title:"Remove slug",children:"Clear"})]}),t&&e.jsxs("div",{className:"page-url-preview",children:[e.jsx("span",{className:"page-url-label",children:"Pages with this layout will have URLs like:"}),e.jsxs("code",{className:"page-url-value",children:[t,"/page-slug"]})]})]})}):null});export{w as LayoutSlugEditor,w as default};
