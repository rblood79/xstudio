@layer components {
  .react-aria-ToggleButton {
    color: var(--on-surface);
    background: var(--surface-container-high);
    border: 1px solid var(--outline-variant);
    forced-color-adjust: none;
    border-radius: var(--border-radius);
    appearance: none;
    vertical-align: middle;
    font-size: var(--text-sm);
    text-align: center;
    margin: 0;
    outline: none;
    padding: var(--spacing) var(--spacing-md);

    &[data-pressed] {
      box-shadow: var(--inset-shadow-sm);
      background: color-mix(in srgb, var(--surface-container-high) 92%, black);
      border-color: var(--outline);
    }

    &[data-selected] {
      background: var(--primary);
      border-color: var(--primary);
      color: var(--on-primary);

      &[data-pressed] {
        background: var(--primary-pressed);
        border-color: var(--primary-pressed);
      }
    }

    &[data-focus-visible] {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }

    &[data-disabled] {
      background: color-mix(in srgb, var(--on-surface) 12%, transparent);
      color: color-mix(in srgb, var(--on-surface) 38%, transparent);
      border-color: transparent;
      opacity: 0.38;
    }
  }

  /* ===== M3 Primary - Controlled by ToggleButtonGroup ===== */
  .react-aria-ToggleButtonGroup[data-togglebutton-variant="primary"]
    .react-aria-ToggleButton {
    &[data-selected] {
      background: var(--primary);
      border-color: var(--primary);
      color: var(--on-primary);

      &[data-pressed] {
        background: var(--primary-pressed);
        border-color: var(--primary-pressed);
      }
    }
  }

  /* ===== M3 Secondary - Controlled by ToggleButtonGroup ===== */
  .react-aria-ToggleButtonGroup[data-togglebutton-variant="secondary"]
    .react-aria-ToggleButton {
    &[data-selected] {
      background: var(--secondary);
      border-color: var(--secondary);
      color: var(--on-secondary);

      &[data-pressed] {
        background: var(--secondary-pressed);
        border-color: var(--secondary-pressed);
      }
    }
  }

  /* ===== M3 Tertiary - Controlled by ToggleButtonGroup ===== */
  .react-aria-ToggleButtonGroup[data-togglebutton-variant="tertiary"]
    .react-aria-ToggleButton {
    &[data-selected] {
      background: var(--tertiary);
      border-color: var(--tertiary);
      color: var(--on-tertiary);

      &[data-pressed] {
        background: var(--tertiary-pressed);
        border-color: var(--tertiary-pressed);
      }
    }
  }

  /* ===== M3 Error - Controlled by ToggleButtonGroup ===== */
  .react-aria-ToggleButtonGroup[data-togglebutton-variant="error"]
    .react-aria-ToggleButton {
    &[data-selected] {
      background: var(--error);
      border-color: var(--error);
      color: var(--on-error);

      &[data-pressed] {
        background: var(--error-pressed);
        border-color: var(--error-pressed);
      }
    }
  }

  /* ===== M3 Surface - Controlled by ToggleButtonGroup ===== */
  .react-aria-ToggleButtonGroup[data-togglebutton-variant="surface"]
    .react-aria-ToggleButton {
    &[data-selected] {
      background: var(--surface-container-highest);
      border-color: var(--outline-variant);
      color: var(--on-surface);

      &[data-pressed] {
        background: color-mix(in srgb, var(--surface-container-highest) 88%, black);
        border-color: var(--outline);
      }
    }
  }

  /* Small size - controlled by ToggleButtonGroup */
  .react-aria-ToggleButtonGroup[data-togglebutton-size="sm"]
    .react-aria-ToggleButton {
    font-size: var(--text-sm);
    padding: var(--spacing) var(--spacing-md);
  }

  /* Medium size - controlled by ToggleButtonGroup (default) */
  .react-aria-ToggleButtonGroup[data-togglebutton-size="md"]
    .react-aria-ToggleButton {
    font-size: var(--text-base);
    padding: var(--spacing-sm) var(--spacing-xl);
  }

  /* Large size - controlled by ToggleButtonGroup */
  .react-aria-ToggleButtonGroup[data-togglebutton-size="lg"]
    .react-aria-ToggleButton {
    font-size: var(--text-lg);
    padding: var(--spacing-md) var(--spacing-2xl);
  }

  /* ===== Standalone ToggleButton variants (not in a group) ===== */

  /* M3 Primary Standalone */
  .react-aria-ToggleButton.primary {
    &[data-selected] {
      background: var(--primary);
      border-color: var(--primary);
      color: var(--on-primary);

      &[data-pressed] {
        background: var(--primary-pressed);
        border-color: var(--primary-pressed);
      }
    }
  }

  /* M3 Secondary Standalone */
  .react-aria-ToggleButton.secondary {
    &[data-selected] {
      background: var(--secondary);
      border-color: var(--secondary);
      color: var(--on-secondary);

      &[data-pressed] {
        background: var(--secondary-pressed);
        border-color: var(--secondary-pressed);
      }
    }
  }

  /* M3 Tertiary Standalone */
  .react-aria-ToggleButton.tertiary {
    &[data-selected] {
      background: var(--tertiary);
      border-color: var(--tertiary);
      color: var(--on-tertiary);

      &[data-pressed] {
        background: var(--tertiary-pressed);
        border-color: var(--tertiary-pressed);
      }
    }
  }

  /* M3 Error Standalone */
  .react-aria-ToggleButton.error {
    &[data-selected] {
      background: var(--error);
      border-color: var(--error);
      color: var(--on-error);

      &[data-pressed] {
        background: var(--error-pressed);
        border-color: var(--error-pressed);
      }
    }
  }

  /* M3 Surface Standalone */
  .react-aria-ToggleButton.surface {
    &[data-selected] {
      background: var(--surface-container-highest);
      border-color: var(--outline-variant);
      color: var(--on-surface);

      &[data-pressed] {
        background: color-mix(in srgb, var(--surface-container-highest) 88%, black);
        border-color: var(--outline);
      }
    }
  }

  /* Standalone ToggleButton sizes (not in a group) */
  .react-aria-ToggleButton.sm {
    font-size: var(--text-sm);
    padding: var(--spacing) var(--spacing-md);
  }

  .react-aria-ToggleButton.md {
    font-size: var(--text-base);
    padding: var(--spacing-sm) var(--spacing-xl);
  }

  .react-aria-ToggleButton.lg {
    font-size: var(--text-lg);
    padding: var(--spacing-md) var(--spacing-2xl);
  }
}
