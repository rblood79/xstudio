import{r as n,$ as d,h as v,j as e,P as f,L as p,b as j,v as b,a0 as h,a1 as L}from"./index-s7MVcqKs.js";import{t as m,v as C,g as y}from"./slugValidator-DYMUhltT.js";const E=n.memo(function({layoutId:r}){const s=d(l=>l.layouts.find(a=>a.id===r)),i=d(l=>l.updateLayout),[c,g]=n.useState(null),t=s?.slug||"",u=n.useCallback(async l=>{const a=l?m(l):"";if(a){const o=C(a);if(!o.valid){g(o.error||"Invalid slug");return}}g(null),console.log("ðŸ“ Layout Slug changed:",{layoutId:r,oldSlug:t,newSlug:a||null});try{const o=await v();i(r,{slug:a||void 0}),await o.layouts.update(r,{slug:a||void 0}),console.log("âœ… Layout slug updated successfully")}catch(o){console.error("âŒ Failed to update layout slug:",o)}},[r,t,i]),x=n.useCallback(()=>{if(!s)return;const l=m(y(s.name));u(l)},[s,u]),S=n.useCallback(()=>{u("")},[u]);return s?e.jsx(f,{title:"URL Prefix",icon:p,children:e.jsxs("div",{className:"layout-slug-editor",children:[e.jsx(j,{label:"Slug",value:t,onChange:u,placeholder:`/${y(s.name)}`,description:"URL prefix for pages using this layout",icon:p}),c&&e.jsxs("div",{className:"page-slug-error",children:[e.jsx(b,{size:h.size}),e.jsx("span",{children:c})]}),e.jsxs("div",{className:"layout-slug-actions",children:[e.jsxs("button",{type:"button",className:"page-slug-generate",onClick:x,title:"Generate slug from layout name",children:[e.jsx(L,{size:h.size}),"Generate"]}),t&&e.jsx("button",{type:"button",className:"page-layout-clear",onClick:S,title:"Remove slug",children:"Clear"})]}),t&&e.jsxs("div",{className:"page-url-preview",children:[e.jsx("span",{className:"page-url-label",children:"Pages with this layout will have URLs like:"}),e.jsxs("code",{className:"page-url-value",children:[t,"/page-slug"]})]})]})}):null});export{E as LayoutSlugEditor,E as default};
