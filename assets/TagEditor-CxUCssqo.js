import{r as y,u as g,j as e,D as v,S as f,i as d,g as S,E as F,h as I,P as m,a as w,b as h,T as b,e as B,H as D}from"./index-B9PwOwK_.js";import{P as o}from"./labels-C7QIhqP9.js";import{P as C}from"./pointer-off-C8wzDfrl.js";const R=y.memo(function({elementId:l,currentProps:s,onUpdate:T}){const{addElement:u,currentPageId:j,setSelectedElement:N}=g(),x=g(t=>t.elements),E=x.find(t=>t.id===l)?.customId||"",r=(t,a)=>{const c={...s,[t]:a};T(c)},i=y.useMemo(()=>x.filter(t=>t.parent_id===l&&t.tag==="Field").sort((t,a)=>(t.order_num||0)-(a.order_num||0)),[x,l]);return i.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"properties-aria",children:[e.jsxs("legend",{className:"fieldset-legend",children:[e.jsx(v,{size:16})," Field Management"]}),e.jsxs("div",{className:"tab-overview",children:[e.jsxs("p",{className:"tab-overview-text",children:["Total fields: ",i.length]}),e.jsx("p",{className:"section-overview-help",children:"ğŸ’¡ This Tag uses Field elements for dynamic data rendering"})]}),i.length>0&&e.jsx("div",{className:"react-aria-ListBox",children:i.map(t=>{const a=t.props;return e.jsxs("div",{className:"react-aria-ListBoxItem",children:[e.jsxs("span",{className:"tab-title",children:[String(a.fieldKey||a.key||"Unnamed Field"),a.type?` (${a.type})`:""]}),e.jsx("button",{className:"tab-edit-button",onClick:()=>{N(t.id,a,a.style)},children:"Edit"})]},t.id)})}),e.jsx("div",{className:"tab-actions",children:e.jsxs("button",{className:"control-button add",onClick:async()=>{const t=j;if(!t){alert("í˜ì´ì§€ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.");return}const{elements:a}=g.getState(),c=Math.max(0,...i.map(n=>n.order_num||0)),p={id:F.generateId(),customId:S("Field",a),page_id:t,tag:"Field",props:{fieldKey:`field${i.length+1}`,label:`Field ${i.length+1}`,type:"string",showLabel:!1,visible:!0,style:{},className:""},parent_id:l,order_num:c+1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};try{const _=await(await I()).elements.insert(p);u(_),console.log("âœ… [IndexedDB] Field created successfully")}catch(n){console.error("âŒ [IndexedDB] Failed to create Field:",n),alert("Field ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}},children:[e.jsx(f,{color:d.color,strokeWidth:d.stroke,size:d.size}),"Add Field"]})})]}),e.jsx("p",{style:{fontSize:"12px",color:"var(--text-color-secondary)",marginTop:"8px"},children:"ğŸ’¡ Variant and size are controlled by the parent TagGroup"})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{title:"Basic",children:e.jsx(w,{label:"ID",value:E,elementId:l,placeholder:"tag_1"})}),e.jsx(m,{title:"Static Item Properties",children:e.jsx("p",{className:"section-overview-help",children:"ğŸ’¡ This is a static Tag. Add Field elements to enable dynamic data rendering."})}),e.jsxs(m,{title:"Content",children:[e.jsx(h,{label:o.TEXT,value:String(s.children||""),onChange:t=>r("children",t),icon:b}),e.jsx(h,{label:o.TEXT_VALUE,value:String(s.textValue||""),onChange:t=>r("textValue",t||void 0),icon:b,placeholder:"Text for accessibility and filtering"})]}),e.jsx(m,{title:"Behavior",children:e.jsx(B,{label:o.DISABLED,isSelected:!!s.isDisabled,onChange:t=>r("isDisabled",t),icon:C})}),e.jsxs(m,{title:"Accessibility",children:[e.jsx(h,{label:o.ARIA_LABEL,value:String(s["aria-label"]||""),onChange:t=>r("aria-label",t||void 0),icon:b,placeholder:"Tag label for screen readers"}),e.jsx(h,{label:o.ARIA_LABELLEDBY,value:String(s["aria-labelledby"]||""),onChange:t=>r("aria-labelledby",t||void 0),icon:D,placeholder:"label-element-id"}),e.jsx(h,{label:o.ARIA_DESCRIBEDBY,value:String(s["aria-describedby"]||""),onChange:t=>r("aria-describedby",t||void 0),icon:D,placeholder:"description-element-id"})]}),e.jsxs("div",{className:"properties-aria",children:[e.jsxs("legend",{className:"fieldset-legend",children:[e.jsx(v,{size:16})," Convert to Dynamic Item"]}),e.jsx("div",{className:"tab-overview",children:e.jsx("p",{className:"section-overview-help",children:"ğŸ’¡ Add Field elements to display dynamic data from DataTable"})}),e.jsx("div",{className:"tab-actions",children:e.jsxs("button",{className:"control-button add",onClick:async()=>{const t=j;if(!t){alert("í˜ì´ì§€ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.");return}const{elements:a}=g.getState(),c={id:F.generateId(),customId:S("Field",a),page_id:t,tag:"Field",props:{fieldKey:"name",label:"Name",type:"string",showLabel:!1,visible:!0,style:{},className:""},parent_id:l,order_num:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};try{const n=await(await I()).elements.insert(c);u(n),console.log("âœ… [IndexedDB] Field created successfully")}catch(p){console.error("âŒ [IndexedDB] Failed to create Field:",p),alert("Field ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}},children:[e.jsx(f,{color:d.color,strokeWidth:d.stroke,size:d.size}),"Add First Field"]})})]}),e.jsx("p",{style:{fontSize:"12px",color:"var(--text-color-secondary)",marginTop:"8px"},children:"ğŸ’¡ Variant and size are controlled by the parent TagGroup"})]})});export{R as TagEditor};
