import{x as f,r as d,u as p,at as h,j as a,P as c,a as k,D as r,b as u,F as j,z as L,W as g,d as w,N,B,s as z}from"./index-CCrXmE_g.js";const E=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],A=f("circle-check",E);const R=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],_=f("loader-circle",R),U=d.memo(function({elementId:o,currentProps:l,onUpdate:b}){const v=d.useMemo(()=>p.getState().elementsMap.get(o)?.customId||"",[o]),t=String(l.id||""),s=h(e=>t?e.dataTableStates.get(t):void 0),m=h(e=>e.loadDataTable),x=h(e=>e.refreshDataTable),n=d.useCallback((e,i)=>{const y={...l,[e]:i};b(y)},[l,b]),D=d.useCallback(e=>{const i=p.getState().updateElement;i&&o&&i(o,{customId:e})},[o]),C=d.useCallback(e=>{n("dataBinding",e||void 0)},[n]),S=d.useCallback(()=>{t&&x(t)},[t,x]),T=d.useCallback(()=>{t&&m(t)},[t,m]),I=()=>{if(!s)return null;switch(s.status){case"loading":return a.jsx(_,{size:14,className:"spin"});case"success":return a.jsx(A,{size:14,className:"text-success"});case"error":return a.jsx(z,{size:14,className:"text-error"});default:return null}};return a.jsxs(a.Fragment,{children:[a.jsx(c,{title:"Basic",children:a.jsx(k,{label:"ID",value:v,elementId:o,onChange:D,placeholder:"datatable_1"})}),a.jsxs(c,{title:"DataTable Settings",icon:r,children:[a.jsx(u,{label:"DataTable ID",value:String(l.id||""),onChange:e=>n("id",e||""),placeholder:"users-datatable",icon:r,description:"Unique identifier for this datatable"}),a.jsx(u,{label:"Name",value:String(l.name||""),onChange:e=>n("name",e||""),placeholder:"Users Data",icon:j,description:"Display name for this datatable"}),a.jsx(u,{label:"Description",value:String(l.description||""),onChange:e=>n("description",e||void 0),placeholder:"User information from API",icon:j,description:"Optional description"})]}),a.jsx(c,{title:"Data Source",icon:r,children:a.jsx(L,{label:"Data Binding",value:l.dataBinding,onChange:C})}),a.jsxs(c,{title:"Auto Refresh",icon:g,children:[a.jsx(w,{label:"Auto Load",isSelected:l.autoLoad!==!1,onChange:e=>n("autoLoad",e),icon:N,description:"Load data automatically on mount"}),a.jsx(u,{label:"Refresh Interval (ms)",value:String(l.refreshInterval||""),onChange:e=>{const i=parseInt(e,10);n("refreshInterval",isNaN(i)?void 0:i)},placeholder:"0 (disabled)",icon:B,description:"Auto-refresh interval (0 = disabled)"})]}),a.jsxs(c,{title:"DataTable Status",icon:N,children:[a.jsxs("div",{className:"datatable-status-preview",children:[a.jsxs("div",{className:"datatable-status-row",children:[a.jsx("span",{className:"datatable-status-label",children:"Status:"}),a.jsxs("span",{className:"datatable-status-value",children:[I(),s?.status||"Not registered"]})]}),s?.data&&a.jsxs("div",{className:"datatable-status-row",children:[a.jsx("span",{className:"datatable-status-label",children:"Items:"}),a.jsx("span",{className:"datatable-status-value",children:s.data.length})]}),s?.error&&a.jsxs("div",{className:"datatable-status-row error",children:[a.jsx("span",{className:"datatable-status-label",children:"Error:"}),a.jsx("span",{className:"datatable-status-value text-error",children:s.error})]}),s?.lastLoadedAt&&a.jsxs("div",{className:"datatable-status-row",children:[a.jsx("span",{className:"datatable-status-label",children:"Last loaded:"}),a.jsx("span",{className:"datatable-status-value",children:new Date(s.lastLoadedAt).toLocaleTimeString()})]}),s?.consumers&&s.consumers.length>0&&a.jsxs("div",{className:"datatable-status-row",children:[a.jsx("span",{className:"datatable-status-label",children:"Consumers:"}),a.jsxs("span",{className:"datatable-status-value",children:[s.consumers.length," component(s)"]})]})]}),a.jsxs("div",{className:"datatable-actions",children:[a.jsxs("button",{className:"control-button secondary",onClick:T,disabled:!t||s?.status==="loading",children:[a.jsx(r,{size:14}),"Load Data"]}),a.jsxs("button",{className:"control-button secondary",onClick:S,disabled:!t||s?.status==="loading",children:[a.jsx(g,{size:14}),"Refresh"]})]})]}),a.jsx(c,{title:"Usage Info",children:a.jsxs("div",{className:"datatable-editor-info",children:[a.jsx("p",{className:"datatable-editor-info-text",children:"DataTable provides centralized data management. Other components can reference this datatable using its ID."}),a.jsxs("ul",{className:"datatable-editor-info-list",children:[a.jsx("li",{children:'Set a unique DataTable ID (e.g., "users-datatable", "products-api")'}),a.jsx("li",{children:"Configure data source using Data Binding"}),a.jsxs("li",{children:["Reference in ListBox, Select, ComboBox with"," ",a.jsx("code",{children:"dataTableId"})," prop"]}),a.jsx("li",{children:"Multiple components can share the same datatable"})]})]})})]})});export{U as DataTableEditor,U as default};
