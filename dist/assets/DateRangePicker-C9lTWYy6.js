import{c as L,p as m,e as O}from"./utils-CFqvDIMX.js";import{j as e}from"./index-BvISBzjo.js";import{u as J,f as h,v as U,w as V,x as K,i as l,y as Q,z as W,A as q,h as F,j,k as b,B as X,C as w,D as T,e as Y,d as Z,E as ee,F as re,l as k,m as se,o as ae,G as ne,$ as te,a as ie,b as de,c as ce,H as M,I as S,J as D,K as R,L as oe,M as G,N as $,O as g,P as z,Q as I,R as le,S as xe}from"./ui-vendor-DGkkUPmE.js";O();const _=r=>({id:r.id,tag:r.tag,props:JSON.parse(JSON.stringify(r.props)),parent_id:r.parent_id,page_id:r.page_id,order_num:r.order_num}),C=(r,i)=>({...r.props,...i,tag:r.tag}),B=(r,i)=>r.find(t=>t.id===i),je=L((r,i)=>({elements:[],selectedElementId:null,selectedElementProps:{},selectedTab:null,pages:[],history:[],historyIndex:-1,pageHistories:{},currentPageId:null,setElements:t=>r(m(n=>{const s=[...n.elements];n.elements=t,n.history=[...n.history.slice(0,n.historyIndex+1),{patches:[],inversePatches:[],snapshot:{prev:s,current:[...t]}}],n.historyIndex=n.history.length-1})),loadPageElements:(t,n)=>r(m(s=>{const a=Array.isArray(t)?[...t]:[],c=s.pageHistories[n]||{elements:a,history:[],historyIndex:-1};s.elements=a,s.selectedElementId=null,s.selectedElementProps={},s.currentPageId=n,s.history=c.history,s.historyIndex=c.historyIndex,s.pageHistories[n]=c;try{window.postMessage({type:"UPDATE_ELEMENTS",elements:a.map(_)},window.location.origin)}catch(d){console.error("Failed to send message:",d)}})),addElement:t=>r(m(n=>{const s=[...n.elements];n.elements.push(t),H(n,s,[...n.elements])})),updateElementProps:(t,n)=>r(m(s=>{const a=s.elements.find(d=>d.id===t);if(!a)return;let c=!1;if(Object.keys(n).forEach(d=>{JSON.stringify(a.props[d])!==JSON.stringify(n[d])&&(c=!0)}),c){const d=s.elements.map(f=>({...f,props:{...f.props}}));a.props={...a.props,...n},H(s,d,s.elements.map(f=>({...f,props:{...f.props}})))}else a.props={...a.props,...n};s.selectedElementId===t&&(s.selectedElementProps={...a.props})})),setSelectedElement:(t,n)=>r(s=>{if(!t)return{...s,selectedElementId:null,selectedElementProps:{},selectedTab:null};const a=B(s.elements,t);return a?{...s,selectedElementId:t,selectedElementProps:C(a,n),selectedTab:null}:(console.warn("Element not found in store:",t),s)}),selectTabElement:(t,n,s)=>r(a=>{const c=B(a.elements,t);return c?{...a,selectedElementId:t,selectedElementProps:C(c,n),selectedTab:{parentId:t,tabIndex:s}}:(console.warn("Element not found in store:",t),a)}),setPages:t=>r(m(n=>{n.pages=t})),setCurrentPageId:t=>r(()=>({currentPageId:t})),undo:()=>{i().currentPageId&&r(m(n=>{const s=n.pageHistories[n.currentPageId];if(!s||s.historyIndex<0)return;const a=s.history[s.historyIndex];if(a!=null&&a.snapshot){const c=a.snapshot.prev.map(d=>({id:d.id,tag:d.tag,props:{...d.props},parent_id:d.parent_id,page_id:d.page_id,order_num:d.order_num}));n.elements=c,s.historyIndex-=1;try{window.postMessage({type:"UPDATE_ELEMENTS",elements:c.map(_)},window.location.origin)}catch(d){console.error("Failed to send message:",d)}}}))},redo:()=>{i().currentPageId&&r(m(n=>{const s=n.pageHistories[n.currentPageId];if(!s||s.historyIndex>=s.history.length-1)return;const a=s.history[s.historyIndex+1];if(a!=null&&a.snapshot){const c=a.snapshot.current.map(d=>({id:d.id,tag:d.tag,props:{...d.props},parent_id:d.parent_id,page_id:d.page_id,order_num:d.order_num}));n.elements=c,s.historyIndex+=1;try{window.postMessage({type:"UPDATE_ELEMENTS",elements:c.map(_)},window.location.origin)}catch(d){console.error("Failed to send message:",d)}}}))}})),H=(r,i,t)=>{if(!r.currentPageId)return;const n={patches:[],inversePatches:[],snapshot:{prev:i.map(a=>({id:a.id,tag:a.tag,props:{...a.props},parent_id:a.parent_id,page_id:a.page_id,order_num:a.order_num})),current:t.map(a=>({id:a.id,tag:a.tag,props:{...a.props},parent_id:a.parent_id,page_id:a.page_id,order_num:a.order_num}))}},s=r.pageHistories[r.currentPageId]||{elements:[],history:[],historyIndex:-1};s.history=[...s.history.slice(0,s.historyIndex+1),n],s.historyIndex=s.history.length-1,s.elements=t,r.history=s.history,r.historyIndex=s.historyIndex,r.pageHistories[r.currentPageId]=s};function $e({label:r,thumbLabels:i,...t}){return e.jsxs(J,{...t,className:"react-aria-Slider",children:[r&&e.jsx(h,{children:r}),e.jsx(U,{children:({state:n})=>n.values.map((s,a)=>n.getThumbValueLabel(a)).join(" â€“ ")}),e.jsx(V,{children:({state:n})=>n.values.map((s,a)=>e.jsx(K,{index:a,"aria-label":i==null?void 0:i[a]},a))})]})}function ge(r){return e.jsx(l,{...r,className:"react-aria-Button"})}function be(r){return e.jsx(Q,{...r,className:"react-aria-ToggleButton"})}function ye(r){return e.jsx(W,{...r,className:"react-aria-ToggleButtonGroup"})}function Ne({label:r,description:i,errorMessage:t,...n}){return e.jsxs(q,{...n,className:"react-aria-TextField",children:[e.jsx(h,{children:r}),e.jsx(F,{}),i&&e.jsx(j,{slot:"description",children:i}),e.jsx(b,{children:t})]})}const he=w({base:"outline",variants:{isFocusVisible:{false:"outline-0",true:"outline-2"}}});function A(r,i){return X(r,t=>T(i,t))}function Pe(r){return e.jsx(h,{...r,className:T("react-aria-Label",r.className)})}function Ee(r){return e.jsx(j,{...r,slot:"description",className:T("aria-Text",r.className)})}function ve(r){return e.jsx(b,{...r,className:A(r.className,"aria-FieldError")})}const fe=w({variants:{isFocusWithin:{false:"border-gray-300 dark:border-zinc-500 forced-colors:border-[ButtonBorder]",true:"border-gray-600 dark:border-zinc-300 forced-colors:border-[Highlight]"},isInvalid:{true:"border-red-600 dark:border-red-600 forced-colors:border-[Mark]"},isDisabled:{true:"border-gray-200 dark:border-zinc-700 forced-colors:border-[GrayText]"}}});w({extend:he,base:"group flex items-center h-9 bg-white dark:bg-zinc-900 forced-colors:bg-[Field] border-2 rounded-lg overflow-hidden",variants:fe.variants});function _e(r){return e.jsx(F,{...r,className:A(r.className,"aria-Input")})}function Ie({children:r,...i}){return e.jsx(Y,{...i,className:"react-aria-Radio",children:r})}function we({label:r,description:i,errorMessage:t,children:n,...s}){return e.jsxs(Z,{...s,className:"react-aria-RadioGroup",children:[e.jsx(h,{children:r}),n,i&&e.jsx(j,{slot:"description",children:i}),e.jsx(b,{children:t})]})}function Te({label:r,description:i,errorMessage:t,children:n,items:s,...a}){return e.jsxs(ee,{...a,className:"react-aria-Select",children:[e.jsx(h,{children:r}),e.jsxs(l,{children:[e.jsx(re,{}),e.jsx("span",{"aria-hidden":"true",children:"â–¼"})]}),i&&e.jsx(j,{slot:"description",children:i}),e.jsx(b,{children:t}),e.jsx(k,{children:e.jsx(se,{items:s,children:n})})]})}function ke(r){return e.jsx(ae,{...r})}function Se({children:r,...i}){return e.jsx(ne,{...i,className:"react-aria-Checkbox",children:({isIndeterminate:t})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"checkbox",children:e.jsx("svg",{viewBox:"0 0 18 18","aria-hidden":"true",children:t?e.jsx("rect",{x:1,y:7.5,width:15,height:3}):e.jsx("polyline",{points:"1 9 7 14 15 4"})})}),r]})})}function De(r){return e.jsx(te,{...r,className:"react-aria-Tabs"})}function Re(r){return e.jsx(ie,{...r,className:"react-aria-TabList"})}function Ce(r){return e.jsx(de,{...r,className:"react-aria-Tab"})}function Be(r){return e.jsx(ce,{...r,className:"react-aria-TabPanel"})}function He({errorMessage:r,...i}){return e.jsxs(M,{...i,className:"react-aria-Calendar",children:[e.jsxs("header",{children:[e.jsx(l,{slot:"previous",children:"â—€"}),e.jsx(S,{}),e.jsx(l,{slot:"next",children:"â–¶"})]}),e.jsx(D,{children:t=>e.jsx(R,{date:t})}),r&&e.jsx(j,{slot:"errorMessage",children:r})]})}function Fe({label:r,description:i,errorMessage:t,firstDayOfWeek:n,showCalendarIcon:s=!0,calendarIconPosition:a="right",placeholder:c,showWeekNumbers:d=!1,highlightToday:f=!0,allowClear:E=!1,includeTime:y=!1,timeFormat:N="24h",timeLabel:v="ì‹œê°„",granularity:P,...p}){const u=y?P||"minute":P||"day";return e.jsxs(oe,{...p,className:"react-aria-DatePicker",granularity:u,children:[r&&e.jsx(h,{children:r}),e.jsxs(G,{children:[s&&a==="left"&&e.jsx(l,{slot:"prefix",children:"ðŸ“…"}),e.jsx($,{children:x=>e.jsx(g,{segment:x,"data-placeholder":x.isPlaceholder?c:void 0})}),s&&a==="right"&&e.jsx(l,{children:"â–¼"}),E&&p.value&&e.jsx(l,{onPress:()=>{var x;return(x=p.onChange)==null?void 0:x.call(p,null)},"aria-label":"Clear date",children:"âœ•"})]}),i&&e.jsx(j,{slot:"description",children:i}),e.jsx(b,{children:t}),e.jsx(k,{children:e.jsx(z,{children:e.jsxs("div",{className:"react-aria-DatePicker-popup",children:[e.jsxs(M,{firstDayOfWeek:n,"data-highlight-today":f,"data-show-week-numbers":d,children:[e.jsxs("header",{children:[e.jsx(l,{slot:"previous",children:"â—€"}),e.jsx(S,{}),e.jsx(l,{slot:"next",children:"â–¶"})]}),e.jsx(D,{children:x=>e.jsx(R,{date:x})})]}),y&&e.jsx("div",{className:"react-aria-DatePicker-time-section",children:e.jsxs("div",{className:"time-field-wrapper",children:[e.jsx(h,{className:"time-field-label",children:v}),e.jsx(I,{hourCycle:N==="12h"?12:24,className:"react-aria-DatePicker-time-field",children:e.jsx($,{children:x=>e.jsx(g,{segment:x})})})]})})]})})})]})}function Me({label:r,description:i,errorMessage:t,firstDayOfWeek:n,showCalendarIcon:s=!0,calendarIconPosition:a="right",placeholder:c,showWeekNumbers:d=!1,highlightToday:f=!0,allowClear:E=!1,includeTime:y=!1,timeFormat:N="24h",startTimeLabel:v="ì‹œìž‘ ì‹œê°„",endTimeLabel:P="ì¢…ë£Œ ì‹œê°„",granularity:p,...u}){const x=y?p||"minute":p||"day";return e.jsxs(le,{...u,className:"react-aria-DateRangePicker",granularity:x,children:[r&&e.jsx(h,{children:r}),e.jsxs(G,{children:[s&&a==="left"&&e.jsx(l,{slot:"prefix",children:"ðŸ“…"}),e.jsx($,{slot:"start",children:o=>e.jsx(g,{segment:o,"data-placeholder":o.isPlaceholder?c:void 0})}),e.jsx("span",{"aria-hidden":"true",children:"â€“"}),e.jsx($,{slot:"end",children:o=>e.jsx(g,{segment:o,"data-placeholder":o.isPlaceholder?c:void 0})}),s&&a==="right"&&e.jsx(l,{children:"â–¼"}),E&&u.value&&e.jsx(l,{onPress:()=>{var o;return(o=u.onChange)==null?void 0:o.call(u,null)},"aria-label":"Clear date range",children:"âœ•"})]}),i&&e.jsx(j,{slot:"description",children:i}),e.jsx(b,{children:t}),e.jsx(k,{children:e.jsx(z,{children:e.jsxs("div",{className:"react-aria-DateRangePicker-popup",children:[e.jsxs(xe,{firstDayOfWeek:n,"data-highlight-today":f,"data-show-week-numbers":d,children:[e.jsxs("header",{children:[e.jsx(l,{slot:"previous",children:"â—€"}),e.jsx(S,{}),e.jsx(l,{slot:"next",children:"â–¶"})]}),e.jsx(D,{children:o=>e.jsx(R,{date:o})})]}),y&&e.jsx("div",{className:"react-aria-DateRangePicker-time-section",children:e.jsxs("div",{className:"time-fields-container",children:[e.jsxs("div",{className:"time-field-wrapper",children:[e.jsx(h,{className:"time-field-label",children:v}),e.jsx(I,{hourCycle:N==="12h"?12:24,className:"react-aria-DateRangePicker-start-time",children:e.jsx($,{children:o=>e.jsx(g,{segment:o})})})]}),e.jsxs("div",{className:"time-field-wrapper",children:[e.jsx(h,{className:"time-field-label",children:P}),e.jsx(I,{hourCycle:N==="12h"?12:24,className:"react-aria-DateRangePicker-end-time",children:e.jsx($,{children:o=>e.jsx(g,{segment:o})})})]})]})})]})})})]})}export{ge as B,Se as C,Fe as D,ve as F,_e as I,Pe as L,we as R,Te as S,ye as T,be as a,ke as b,Ne as c,$e as d,Ie as e,De as f,Re as g,Ce as h,Be as i,Me as j,He as k,Ee as l,je as u};
