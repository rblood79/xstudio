import{r as u,u as S,j as a,b as d,e as j,d as c,t as T,i as h,f as A,P as r,a as M,T as G,F as C,k as I,D as k,y as F,a4 as V,c as v,p as P,ab as Y,a2 as z,ac as U,q,w as W,H as R,S as Z,g as H,E as $}from"./index-BH5HBUqa.js";import{P as l}from"./labels-C7QIhqP9.js";import{P as N}from"./pointer-off-CAyCkv-T.js";import{P as Q}from"./pencil-ruler-DJn-YF-H.js";import{P as f}from"./pen-off-z94uG9Ml.js";const te=u.memo(function({elementId:o,currentProps:s,onUpdate:p}){const[x,b]=u.useState(null),{addElement:y,currentPageId:B,updateElementProps:E,setElements:L,elements:m}=S(),D=m.find(e=>e.id===o)?.customId||"";u.useEffect(()=>{b(null)},[o]);const i=(e,t)=>{const n={...s,[e]:t};p(n)},_=e=>{const t={...s,dataBinding:e||void 0};p(t)},w=e=>{const t=S.getState().updateElement;t&&o&&t(o,{customId:e})},g=u.useMemo(()=>m.filter(e=>e.parent_id===o&&e.tag==="Tag").sort((e,t)=>(e.order_num||0)-(t.order_num||0)),[m,o]);if(x&&x.parentId===o){const e=g[x.tagIndex];return e?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"properties-aria",children:[a.jsx(d,{label:l.TEXT,value:String(e.props.children||""),onChange:t=>{const n={...e.props,children:t};E(e.id,n)},icon:j}),a.jsx(c,{label:l.DISABLED,isSelected:!!e.props.isDisabled,onChange:t=>{const n={...e.props,isDisabled:t};E(e.id,n)},icon:N}),a.jsx("div",{className:"tab-actions",children:a.jsxs("button",{className:"control-button delete",onClick:async()=>{try{await(await A()).elements.delete(e.id);const n=m.filter(O=>O.id!==e.id);L(n),b(null)}catch(t){console.error("Tag ì‚­ì œ ì¤‘ ì˜¤ë¥˜:",t)}},children:[a.jsx(T,{color:h.color,strokeWidth:h.stroke,size:h.size}),"Delete Tag"]})})]}),a.jsx("div",{className:"tab-actions",children:a.jsx("button",{className:"control-button secondary",onClick:()=>b(null),children:"Back to Tag Group Settings"})})]}):null}return a.jsxs(a.Fragment,{children:[a.jsx(r,{title:"Basic",children:a.jsx(M,{label:"ID",value:D,elementId:o,onChange:w,placeholder:"taggroup_1"})}),a.jsxs(r,{title:"Content",children:[a.jsx(d,{label:l.LABEL,value:String(s.label||""),onChange:e=>i("label",e),icon:G}),a.jsx(d,{label:l.DESCRIPTION,value:String(s.description||""),onChange:e=>i("description",e),icon:C}),a.jsx(d,{label:l.ERROR_MESSAGE,value:String(s.errorMessage||""),onChange:e=>i("errorMessage",e),icon:I})]}),a.jsx(r,{title:"Data Binding",icon:k,children:a.jsx(F,{label:"ë°ì´í„° ì†ŒìŠ¤",value:s.dataBinding,onChange:_})}),a.jsxs(r,{title:"Filtering",children:[a.jsx(d,{label:"Filter Text",value:String(s.filterText||""),onChange:e=>i("filterText",e||void 0),placeholder:"Search...",icon:V}),a.jsx(d,{label:"Filter Fields",value:String((s.filterFields||[]).join(", ")),onChange:e=>{const t=e.split(",").map(n=>n.trim()).filter(Boolean);i("filterFields",t.length>0?t:void 0)},placeholder:"label, name, title",icon:C}),a.jsx("p",{className:"property-help",children:"ğŸ’¡ ì‰¼í‘œë¡œ êµ¬ë¶„í•˜ì—¬ ê²€ìƒ‰í•  í•„ë“œ ì§€ì • (ê¸°ë³¸: label, name, title)"})]}),a.jsxs(r,{title:"Design",children:[a.jsx(v,{label:l.VARIANT,value:String(s.variant||"default"),onChange:e=>i("variant",e),options:[{value:"default",label:l.TAG_VARIANT_DEFAULT},{value:"primary",label:l.TAG_VARIANT_PRIMARY},{value:"secondary",label:l.TAG_VARIANT_SECONDARY},{value:"surface",label:l.TAG_VARIANT_SURFACE}],icon:P}),a.jsx(v,{label:l.SIZE,value:String(s.size||"md"),onChange:e=>i("size",e),options:[{value:"sm",label:l.SIZE_SM},{value:"md",label:l.SIZE_MD},{value:"lg",label:l.SIZE_LG}],icon:Q})]}),a.jsxs(r,{title:"State",children:[a.jsx(v,{label:l.SELECTION_MODE,value:String(s.selectionMode||"none"),onChange:e=>i("selectionMode",e),options:[{value:"none",label:l.NONE},{value:"single",label:l.SINGLE},{value:"multiple",label:l.MULTIPLE}],icon:Y}),a.jsx(v,{label:l.SELECTION_BEHAVIOR,value:String(s.selectionBehavior||"toggle"),onChange:e=>i("selectionBehavior",e),options:[{value:"toggle",label:l.TOGGLE},{value:"replace",label:l.REPLACE}],icon:z}),a.jsx(c,{label:l.DISALLOW_EMPTY_SELECTION,isSelected:!!s.disallowEmptySelection,onChange:e=>i("disallowEmptySelection",e),icon:U}),a.jsx(c,{label:l.REQUIRED,isSelected:!!s.isRequired,onChange:e=>i("isRequired",e),icon:q}),a.jsx(c,{label:l.INVALID,isSelected:!!s.isInvalid,onChange:e=>i("isInvalid",e),icon:I})]}),a.jsxs(r,{title:"Behavior",children:[a.jsx(c,{label:l.DISABLED,isSelected:!!s.isDisabled,onChange:e=>i("isDisabled",e),icon:N}),a.jsx(c,{label:l.READONLY,isSelected:!!s.isReadOnly,onChange:e=>i("isReadOnly",e),icon:f}),a.jsx(c,{label:l.ALLOWS_REMOVING,isSelected:!!s.allowsRemoving,onChange:e=>i("allowsRemoving",e),icon:T}),a.jsx(c,{label:l.ALLOWS_CUSTOM_VALUE,isSelected:!!s.allowsCustomValue,onChange:e=>i("allowsCustomValue",e),icon:f})]}),a.jsx(r,{title:"Form Integration",children:a.jsx(d,{label:l.NAME,value:String(s.name||""),onChange:e=>i("name",e||void 0),icon:W,placeholder:"tag-group-name"})}),a.jsxs(r,{title:"Accessibility",children:[a.jsx(d,{label:l.ARIA_LABEL,value:String(s["aria-label"]||""),onChange:e=>i("aria-label",e||void 0),icon:j,placeholder:"Tag group label for screen readers"}),a.jsx(d,{label:l.ARIA_LABELLEDBY,value:String(s["aria-labelledby"]||""),onChange:e=>i("aria-labelledby",e||void 0),icon:R,placeholder:"label-element-id"}),a.jsx(d,{label:l.ARIA_DESCRIBEDBY,value:String(s["aria-describedby"]||""),onChange:e=>i("aria-describedby",e||void 0),icon:R,placeholder:"description-element-id"})]}),a.jsxs(r,{title:l.TAG_MANAGEMENT,children:[a.jsxs("div",{className:"tab-overview",children:[a.jsxs("p",{className:"tab-overview-text",children:["Total tags: ",g.length||0]}),a.jsx("p",{className:"section-overview-help",children:"ğŸ’¡ Select individual tags from list to edit text and state"})]}),Array.isArray(s.removedItemIds)&&s.removedItemIds.length>0&&a.jsxs("div",{className:"tab-overview",style:{marginTop:"12px",padding:"12px",backgroundColor:"var(--color-warning-bg, #fff3cd)",borderRadius:"var(--radius-md)"},children:[a.jsxs("p",{className:"tab-overview-text",style:{color:"var(--color-warning-text, #856404)"},children:["ğŸ—‘ï¸ Removed items: ",s.removedItemIds.length]}),a.jsx("button",{className:"control-button secondary",style:{marginTop:"8px",width:"100%"},onClick:()=>{i("removedItemIds",[]),console.log("âœ… All removed items restored")},children:"â™»ï¸ Restore All Removed Items"})]}),g.length>0&&a.jsx("div",{className:"tabs-list",children:g.map((e,t)=>a.jsxs("div",{className:"tab-list-item",children:[a.jsx("span",{className:"tab-title",children:String(e.props.children)||`Tag ${t+1}`}),a.jsx("button",{className:"tab-edit-button",onClick:()=>b({parentId:o,tagIndex:t}),children:"Edit"})]},e.id))}),a.jsx("div",{className:"tab-actions",children:a.jsxs("button",{className:"control-button add",onClick:async()=>{try{const e={id:$.generateId(),customId:H("Tag",m),page_id:B||"1",tag:"Tag",props:{children:`Tag ${(g.length||0)+1}`,isDisabled:!1,style:{},className:""},parent_id:o,order_num:(g.length||0)+1},n=await(await A()).elements.insert(e);y(n),console.log("âœ… [IndexedDB] ìƒˆ Tag ì¶”ê°€ë¨:",n)}catch(e){console.error("Tag ì¶”ê°€ ì¤‘ ì˜¤ë¥˜:",e)}},children:[a.jsx(Z,{color:h.color,strokeWidth:h.stroke,size:h.size}),"Add Tag"]})})]})]})});export{te as TagGroupEditor};
