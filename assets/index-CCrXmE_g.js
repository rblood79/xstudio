const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BadgeEditor-CvcgDbic.js","assets/labels-C7QIhqP9.js","assets/parentheses-BFIho-5b.js","assets/BreadcrumbEditor-lEA0o56l.js","assets/pointer-off-D-Svgwh_.js","assets/BreadcrumbsEditor-BBLWY4Ws.js","assets/ButtonEditor-BN3QK1px.js","assets/focus-DqqqWCWd.js","assets/CalendarEditor-jemlkso8.js","assets/pen-off-5zLc4G_8.js","assets/CardEditor-C0RLU3wJ.js","assets/pencil-ruler-DlFDGCC7.js","assets/arrow-up-down-D_3Caqer.js","assets/eye-off-BrkRPlXQ.js","assets/CellEditor-kTRoLcTi.js","assets/CheckboxEditor-CZRpKdma.js","assets/CheckboxGroupEditor-CHaJA4S2.js","assets/ratio-JGuUlgsy.js","assets/ColumnEditor-Du_Gtwgn.js","assets/move-DoKiVGCK.js","assets/ColumnGroupEditor-4e90txdY.js","assets/ComboBoxEditor-Cph-h5Cd.js","assets/useCollectionItemManager-0uQSmMZd.js","assets/binary-CNiCtTJz.js","assets/ComboBoxItemEditor-VbTQOTTW.js","assets/DatePickerEditor-tHbg55YQ.js","assets/DateRangePickerEditor-C6lLsEQ4.js","assets/DialogEditor-C6kSfk4W.js","assets/FieldEditor-CsYuentL.js","assets/GridListEditor-C61BB0KV.js","assets/square-x-B0ZeDKnK.js","assets/GridListItemEditor-BoJWSY69.js","assets/GroupEditor-DnJqi71H.js","assets/LayoutBodyEditor-BI2k9_Yc.js","assets/LayoutSlugEditor-B9ObXAH0.js","assets/LayoutBodyEditor-BpWL5bwL.css","assets/LinkEditor-BlIBbc3k.js","assets/ListBoxEditor-Dzy2I0fH.js","assets/ListBoxItemEditor-CBTRst2C.js","assets/MenuEditor-CCxyDXrU.js","assets/MenuItemEditor-CSBqZ3bW.js","assets/MeterEditor-CKBxzrWM.js","assets/dollar-sign-DYE0kYRz.js","assets/ModalEditor-D0P0Qn_H.js","assets/NumberFieldEditor-BOfsvaQM.js","assets/spell-check-2-BFHE4fbm.js","assets/PageBodyEditor-zfsHnKJs.js","assets/PageLayoutSelector-pF1SasE1.js","assets/PageParentSelector-DnFPjxyq.js","assets/PanelEditor-CSgCXgEq.js","assets/PopoverEditor-g-ZsQyTr.js","assets/map-pin-uWakH37S.js","assets/ProgressBarEditor-B855WRRR.js","assets/RadioEditor-pLclYvy_.js","assets/check-check-C49Tm6LD.js","assets/RadioGroupEditor-BmMsJ-ps.js","assets/ResponsiveVisibilityEditor-BSzC4SRO.js","assets/RowEditor-CiYF5S82.js","assets/SearchFieldEditor-CotP3xng.js","assets/SelectEditor-DzyHsluL.js","assets/SelectItemEditor-CBnfWDvK.js","assets/SeparatorEditor-YLDOZONY.js","assets/SliderEditor-CGFcJb3S.js","assets/SwitchEditor-CqzzCysM.js","assets/TabEditor-Df8EyBO5.js","assets/TableBodyEditor-BxpRP8c2.js","assets/table-CHVj2Aa_.js","assets/TableEditor-CgiqTGBu.js","assets/TableEditor-CPvubtIO.css","assets/TableHeaderEditor-BShJvPvM.js","assets/TabsEditor-DE3k1zwJ.js","assets/TagEditor-C_5UXfyk.js","assets/TagGroupEditor-BQ3CeaJf.js","assets/TailSwatchEditor-v7hi4C8Y.js","assets/TextFieldEditor-DVgU3nyq.js","assets/TimeFieldEditor-CQCK2q2a.js","assets/ToggleButtonEditor-DWFKqOYs.js","assets/ToggleButtonGroupEditor-YPe5JlsO.js","assets/ToolbarEditor-DR6UKuSV.js","assets/TooltipEditor-v0Qzgl1v.js","assets/TreeEditor-UOz1qGcf.js","assets/TreeItemEditor-jQZr_W3D.js","assets/browserAll-SnQZ860Z.js","assets/webworkerAll-BjL32ljG.js","assets/colorToUniform-BXaCBwVl.js","assets/WebGPURenderer-Cems1nwP.js","assets/SharedSystems-Dun-diqb.js","assets/WebGLRenderer-DwbTyxZC.js"])))=>i.map(i=>d[i]);
function afe(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var N2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function aI(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var BD={exports:{}},DS={};var gO;function ofe(){if(gO)return DS;gO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var o in i)o!=="key"&&(s[o]=i[o])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:a,ref:i!==void 0?i:null,props:s}}return DS.Fragment=e,DS.jsx=n,DS.jsxs=n,DS}var mO;function lfe(){return mO||(mO=1,BD.exports=ofe()),BD.exports}var d=lfe(),TD={exports:{}},Dr={};var AO;function cfe(){if(AO)return Dr;AO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),f=Symbol.iterator;function p(J){return J===null||typeof J!="object"?null:(J=f&&J[f]||J["@@iterator"],typeof J=="function"?J:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,A={};function x(J,Z,ee){this.props=J,this.context=Z,this.refs=A,this.updater=ee||m}x.prototype.isReactComponent={},x.prototype.setState=function(J,Z){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,Z,"setState")},x.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function E(){}E.prototype=x.prototype;function w(J,Z,ee){this.props=J,this.context=Z,this.refs=A,this.updater=ee||m}var B=w.prototype=new E;B.constructor=w,v(B,x.prototype),B.isPureReactComponent=!0;var D=Array.isArray;function T(){}var M={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function k(J,Z,ee){var te=ee.ref;return{$$typeof:t,type:J,key:Z,ref:te!==void 0?te:null,props:ee}}function L(J,Z){return k(J.type,Z,J.props)}function F(J){return typeof J=="object"&&J!==null&&J.$$typeof===t}function z(J){var Z={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(ee){return Z[ee]})}var G=/\/+/g;function V(J,Z){return typeof J=="object"&&J!==null&&J.key!=null?z(""+J.key):Z.toString(36)}function q(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(T,T):(J.status="pending",J.then(function(Z){J.status==="pending"&&(J.status="fulfilled",J.value=Z)},function(Z){J.status==="pending"&&(J.status="rejected",J.reason=Z)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function O(J,Z,ee,te,oe){var ae=typeof J;(ae==="undefined"||ae==="boolean")&&(J=null);var se=!1;if(J===null)se=!0;else switch(ae){case"bigint":case"string":case"number":se=!0;break;case"object":switch(J.$$typeof){case t:case e:se=!0;break;case u:return se=J._init,O(se(J._payload),Z,ee,te,oe)}}if(se)return oe=oe(J),se=te===""?"."+V(J,0):te,D(oe)?(ee="",se!=null&&(ee=se.replace(G,"$&/")+"/"),O(oe,Z,ee,"",function(Be){return Be})):oe!=null&&(F(oe)&&(oe=L(oe,ee+(oe.key==null||J&&J.key===oe.key?"":(""+oe.key).replace(G,"$&/")+"/")+se)),Z.push(oe)),1;se=0;var fe=te===""?".":te+":";if(D(J))for(var Ee=0;Ee<J.length;Ee++)te=J[Ee],ae=fe+V(te,Ee),se+=O(te,Z,ee,ae,oe);else if(Ee=p(J),typeof Ee=="function")for(J=Ee.call(J),Ee=0;!(te=J.next()).done;)te=te.value,ae=fe+V(te,Ee++),se+=O(te,Z,ee,ae,oe);else if(ae==="object"){if(typeof J.then=="function")return O(q(J),Z,ee,te,oe);throw Z=String(J),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return se}function H(J,Z,ee){if(J==null)return J;var te=[],oe=0;return O(J,te,"","",function(ae){return Z.call(ee,ae,oe++)}),te}function K(J){if(J._status===-1){var Z=J._result;Z=Z(),Z.then(function(ee){(J._status===0||J._status===-1)&&(J._status=1,J._result=ee)},function(ee){(J._status===0||J._status===-1)&&(J._status=2,J._result=ee)}),J._status===-1&&(J._status=0,J._result=Z)}if(J._status===1)return J._result.default;throw J._result}var X=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)},re={map:H,forEach:function(J,Z,ee){H(J,function(){Z.apply(this,arguments)},ee)},count:function(J){var Z=0;return H(J,function(){Z++}),Z},toArray:function(J){return H(J,function(Z){return Z})||[]},only:function(J){if(!F(J))throw Error("React.Children.only expected to receive a single React element child.");return J}};return Dr.Activity=h,Dr.Children=re,Dr.Component=x,Dr.Fragment=n,Dr.Profiler=i,Dr.PureComponent=w,Dr.StrictMode=r,Dr.Suspense=l,Dr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Dr.__COMPILER_RUNTIME={__proto__:null,c:function(J){return M.H.useMemoCache(J)}},Dr.cache=function(J){return function(){return J.apply(null,arguments)}},Dr.cacheSignal=function(){return null},Dr.cloneElement=function(J,Z,ee){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var te=v({},J.props),oe=J.key;if(Z!=null)for(ae in Z.key!==void 0&&(oe=""+Z.key),Z)!R.call(Z,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&Z.ref===void 0||(te[ae]=Z[ae]);var ae=arguments.length-2;if(ae===1)te.children=ee;else if(1<ae){for(var se=Array(ae),fe=0;fe<ae;fe++)se[fe]=arguments[fe+2];te.children=se}return k(J.type,oe,te)},Dr.createContext=function(J){return J={$$typeof:a,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:s,_context:J},J},Dr.createElement=function(J,Z,ee){var te,oe={},ae=null;if(Z!=null)for(te in Z.key!==void 0&&(ae=""+Z.key),Z)R.call(Z,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(oe[te]=Z[te]);var se=arguments.length-2;if(se===1)oe.children=ee;else if(1<se){for(var fe=Array(se),Ee=0;Ee<se;Ee++)fe[Ee]=arguments[Ee+2];oe.children=fe}if(J&&J.defaultProps)for(te in se=J.defaultProps,se)oe[te]===void 0&&(oe[te]=se[te]);return k(J,ae,oe)},Dr.createRef=function(){return{current:null}},Dr.forwardRef=function(J){return{$$typeof:o,render:J}},Dr.isValidElement=F,Dr.lazy=function(J){return{$$typeof:u,_payload:{_status:-1,_result:J},_init:K}},Dr.memo=function(J,Z){return{$$typeof:c,type:J,compare:Z===void 0?null:Z}},Dr.startTransition=function(J){var Z=M.T,ee={};M.T=ee;try{var te=J(),oe=M.S;oe!==null&&oe(ee,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(T,X)}catch(ae){X(ae)}finally{Z!==null&&ee.types!==null&&(Z.types=ee.types),M.T=Z}},Dr.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Dr.use=function(J){return M.H.use(J)},Dr.useActionState=function(J,Z,ee){return M.H.useActionState(J,Z,ee)},Dr.useCallback=function(J,Z){return M.H.useCallback(J,Z)},Dr.useContext=function(J){return M.H.useContext(J)},Dr.useDebugValue=function(){},Dr.useDeferredValue=function(J,Z){return M.H.useDeferredValue(J,Z)},Dr.useEffect=function(J,Z){return M.H.useEffect(J,Z)},Dr.useEffectEvent=function(J){return M.H.useEffectEvent(J)},Dr.useId=function(){return M.H.useId()},Dr.useImperativeHandle=function(J,Z,ee){return M.H.useImperativeHandle(J,Z,ee)},Dr.useInsertionEffect=function(J,Z){return M.H.useInsertionEffect(J,Z)},Dr.useLayoutEffect=function(J,Z){return M.H.useLayoutEffect(J,Z)},Dr.useMemo=function(J,Z){return M.H.useMemo(J,Z)},Dr.useOptimistic=function(J,Z){return M.H.useOptimistic(J,Z)},Dr.useReducer=function(J,Z,ee){return M.H.useReducer(J,Z,ee)},Dr.useRef=function(J){return M.H.useRef(J)},Dr.useState=function(J){return M.H.useState(J)},Dr.useSyncExternalStore=function(J,Z,ee){return M.H.useSyncExternalStore(J,Z,ee)},Dr.useTransition=function(){return M.H.useTransition()},Dr.version="19.2.1",Dr}var yO;function DE(){return yO||(yO=1,TD.exports=cfe()),TD.exports}var C=DE();const we=qg(C);var MD={exports:{}},RS={},DD={exports:{}},RD={};var vO;function ufe(){return vO||(vO=1,(function(t){function e(O,H){var K=O.length;O.push(H);e:for(;0<K;){var X=K-1>>>1,re=O[X];if(0<i(re,H))O[X]=H,O[K]=re,K=X;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var H=O[0],K=O.pop();if(K!==H){O[0]=K;e:for(var X=0,re=O.length,J=re>>>1;X<J;){var Z=2*(X+1)-1,ee=O[Z],te=Z+1,oe=O[te];if(0>i(ee,K))te<re&&0>i(oe,ee)?(O[X]=oe,O[te]=K,X=te):(O[X]=ee,O[Z]=K,X=Z);else if(te<re&&0>i(oe,K))O[X]=oe,O[te]=K,X=te;else break e}}return H}function i(O,H){var K=O.sortIndex-H.sortIndex;return K!==0?K:O.id-H.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,h=null,f=3,p=!1,m=!1,v=!1,A=!1,x=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function B(O){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=O)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(c)}}function D(O){if(v=!1,B(O),!m)if(n(l)!==null)m=!0,T||(T=!0,z());else{var H=n(c);H!==null&&q(D,H.startTime-O)}}var T=!1,M=-1,R=5,k=-1;function L(){return A?!0:!(t.unstable_now()-k<R)}function F(){if(A=!1,T){var O=t.unstable_now();k=O;var H=!0;try{e:{m=!1,v&&(v=!1,E(M),M=-1),p=!0;var K=f;try{t:{for(B(O),h=n(l);h!==null&&!(h.expirationTime>O&&L());){var X=h.callback;if(typeof X=="function"){h.callback=null,f=h.priorityLevel;var re=X(h.expirationTime<=O);if(O=t.unstable_now(),typeof re=="function"){h.callback=re,B(O),H=!0;break t}h===n(l)&&r(l),B(O)}else r(l);h=n(l)}if(h!==null)H=!0;else{var J=n(c);J!==null&&q(D,J.startTime-O),H=!1}}break e}finally{h=null,f=K,p=!1}H=void 0}}finally{H?z():T=!1}}}var z;if(typeof w=="function")z=function(){w(F)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,V=G.port2;G.port1.onmessage=F,z=function(){V.postMessage(null)}}else z=function(){x(F,0)};function q(O,H){M=x(function(){O(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(O){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var K=f;f=H;try{return O()}finally{f=K}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(O,H){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var K=f;f=O;try{return H()}finally{f=K}},t.unstable_scheduleCallback=function(O,H,K){var X=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?X+K:X):K=X,O){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=K+re,O={id:u++,callback:H,priorityLevel:O,startTime:K,expirationTime:re,sortIndex:-1},K>X?(O.sortIndex=K,e(c,O),n(l)===null&&O===n(c)&&(v?(E(M),M=-1):v=!0,q(D,K-X))):(O.sortIndex=re,e(l,O),m||p||(m=!0,T||(T=!0,z()))),O},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(O){var H=f;return function(){var K=f;f=H;try{return O.apply(this,arguments)}finally{f=K}}}})(RD)),RD}var xO;function dfe(){return xO||(xO=1,DD.exports=ufe()),DD.exports}var PD={exports:{}},Ec={};var bO;function hfe(){if(bO)return Ec;bO=1;var t=DE();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,c,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:l,containerInfo:c,implementation:u}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Ec.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ec.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,u)},Ec.flushSync=function(l){var c=a.T,u=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=c,r.p=u,r.d.f()}},Ec.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},Ec.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Ec.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,h=o(u,c.crossOrigin),f=typeof c.integrity=="string"?c.integrity:void 0,p=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:f,fetchPriority:p}):u==="script"&&r.d.X(l,{crossOrigin:h,integrity:f,fetchPriority:p,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Ec.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=o(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},Ec.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,h=o(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Ec.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=o(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},Ec.requestFormReset=function(l){r.d.r(l)},Ec.unstable_batchedUpdates=function(l,c){return l(c)},Ec.useFormState=function(l,c,u){return a.H.useFormState(l,c,u)},Ec.useFormStatus=function(){return a.H.useHostTransitionStatus()},Ec.version="19.2.1",Ec}var CO;function Sq(){if(CO)return PD.exports;CO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),PD.exports=hfe(),PD.exports}var EO;function ffe(){if(EO)return RS;EO=1;var t=dfe(),e=DE(),n=Sq();function r(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)}function s(g){var y=g,_=g;if(g.alternate)for(;y.return;)y=y.return;else{g=y;do y=g,(y.flags&4098)!==0&&(_=y.return),g=y.return;while(g)}return y.tag===3?_:null}function a(g){if(g.tag===13){var y=g.memoizedState;if(y===null&&(g=g.alternate,g!==null&&(y=g.memoizedState)),y!==null)return y.dehydrated}return null}function o(g){if(g.tag===31){var y=g.memoizedState;if(y===null&&(g=g.alternate,g!==null&&(y=g.memoizedState)),y!==null)return y.dehydrated}return null}function l(g){if(s(g)!==g)throw Error(r(188))}function c(g){var y=g.alternate;if(!y){if(y=s(g),y===null)throw Error(r(188));return y!==g?null:g}for(var _=g,P=y;;){var $=_.return;if($===null)break;var W=$.alternate;if(W===null){if(P=$.return,P!==null){_=P;continue}break}if($.child===W.child){for(W=$.child;W;){if(W===_)return l($),g;if(W===P)return l($),y;W=W.sibling}throw Error(r(188))}if(_.return!==P.return)_=$,P=W;else{for(var le=!1,ye=$.child;ye;){if(ye===_){le=!0,_=$,P=W;break}if(ye===P){le=!0,P=$,_=W;break}ye=ye.sibling}if(!le){for(ye=W.child;ye;){if(ye===_){le=!0,_=W,P=$;break}if(ye===P){le=!0,P=W,_=$;break}ye=ye.sibling}if(!le)throw Error(r(189))}}if(_.alternate!==P)throw Error(r(190))}if(_.tag!==3)throw Error(r(188));return _.stateNode.current===_?g:y}function u(g){var y=g.tag;if(y===5||y===26||y===27||y===6)return g;for(g=g.child;g!==null;){if(y=u(g),y!==null)return y;g=g.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),w=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function z(g){return g===null||typeof g!="object"?null:(g=F&&g[F]||g["@@iterator"],typeof g=="function"?g:null)}var G=Symbol.for("react.client.reference");function V(g){if(g==null)return null;if(typeof g=="function")return g.$$typeof===G?null:g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case v:return"Fragment";case x:return"Profiler";case A:return"StrictMode";case D:return"Suspense";case T:return"SuspenseList";case k:return"Activity"}if(typeof g=="object")switch(g.$$typeof){case m:return"Portal";case w:return g.displayName||"Context";case E:return(g._context.displayName||"Context")+".Consumer";case B:var y=g.render;return g=g.displayName,g||(g=y.displayName||y.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case M:return y=g.displayName||null,y!==null?y:V(g.type)||"Memo";case R:y=g._payload,g=g._init;try{return V(g(y))}catch{}}return null}var q=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},X=[],re=-1;function J(g){return{current:g}}function Z(g){0>re||(g.current=X[re],X[re]=null,re--)}function ee(g,y){re++,X[re]=g.current,g.current=y}var te=J(null),oe=J(null),ae=J(null),se=J(null);function fe(g,y){switch(ee(ae,y),ee(oe,g),ee(te,null),y.nodeType){case 9:case 11:g=(g=y.documentElement)&&(g=g.namespaceURI)?ex(g):0;break;default:if(g=y.tagName,y=y.namespaceURI)y=ex(y),g=bc(y,g);else switch(g){case"svg":g=1;break;case"math":g=2;break;default:g=0}}Z(te),ee(te,g)}function Ee(){Z(te),Z(oe),Z(ae)}function Be(g){g.memoizedState!==null&&ee(se,g);var y=te.current,_=bc(y,g.type);y!==_&&(ee(oe,g),ee(te,_))}function _e(g){oe.current===g&&(Z(te),Z(oe)),se.current===g&&(Z(se),WA._currentValue=K)}var Ce,Se;function Me(g){if(Ce===void 0)try{throw Error()}catch(_){var y=_.stack.trim().match(/\n( *(at )?)/);Ce=y&&y[1]||"",Se=-1<_.stack.indexOf(`
    at`)?" (<anonymous>)":-1<_.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ce+g+Se}var ce=!1;function $e(g,y){if(!g||ce)return"";ce=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var P={DetermineComponentFrameRoot:function(){try{if(y){var kt=function(){throw Error()};if(Object.defineProperty(kt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(kt,[])}catch(bt){var dt=bt}Reflect.construct(g,[],kt)}else{try{kt.call()}catch(bt){dt=bt}g.call(kt.prototype)}}else{try{throw Error()}catch(bt){dt=bt}(kt=g())&&typeof kt.catch=="function"&&kt.catch(function(){})}}catch(bt){if(bt&&dt&&typeof bt.stack=="string")return[bt.stack,dt.stack]}return[null,null]}};P.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var $=Object.getOwnPropertyDescriptor(P.DetermineComponentFrameRoot,"name");$&&$.configurable&&Object.defineProperty(P.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var W=P.DetermineComponentFrameRoot(),le=W[0],ye=W[1];if(le&&ye){var Pe=le.split(`
`),st=ye.split(`
`);for($=P=0;P<Pe.length&&!Pe[P].includes("DetermineComponentFrameRoot");)P++;for(;$<st.length&&!st[$].includes("DetermineComponentFrameRoot");)$++;if(P===Pe.length||$===st.length)for(P=Pe.length-1,$=st.length-1;1<=P&&0<=$&&Pe[P]!==st[$];)$--;for(;1<=P&&0<=$;P--,$--)if(Pe[P]!==st[$]){if(P!==1||$!==1)do if(P--,$--,0>$||Pe[P]!==st[$]){var wt=`
`+Pe[P].replace(" at new "," at ");return g.displayName&&wt.includes("<anonymous>")&&(wt=wt.replace("<anonymous>",g.displayName)),wt}while(1<=P&&0<=$);break}}}finally{ce=!1,Error.prepareStackTrace=_}return(_=g?g.displayName||g.name:"")?Me(_):""}function qe(g,y){switch(g.tag){case 26:case 27:case 5:return Me(g.type);case 16:return Me("Lazy");case 13:return g.child!==y&&y!==null?Me("Suspense Fallback"):Me("Suspense");case 19:return Me("SuspenseList");case 0:case 15:return $e(g.type,!1);case 11:return $e(g.type.render,!1);case 1:return $e(g.type,!0);case 31:return Me("Activity");default:return""}}function ft(g){try{var y="",_=null;do y+=qe(g,_),_=g,g=g.return;while(g);return y}catch(P){return`
Error generating stack: `+P.message+`
`+P.stack}}var Ie=Object.prototype.hasOwnProperty,ht=t.unstable_scheduleCallback,Ue=t.unstable_cancelCallback,xt=t.unstable_shouldYield,ve=t.unstable_requestPaint,ue=t.unstable_now,ke=t.unstable_getCurrentPriorityLevel,He=t.unstable_ImmediatePriority,Qe=t.unstable_UserBlockingPriority,Ke=t.unstable_NormalPriority,jt=t.unstable_LowPriority,St=t.unstable_IdlePriority,Zt=t.log,Bt=t.unstable_setDisableYieldValue,at=null,pt=null;function Vt(g){if(typeof Zt=="function"&&Bt(g),pt&&typeof pt.setStrictMode=="function")try{pt.setStrictMode(at,g)}catch{}}var qt=Math.clz32?Math.clz32:Ne,Wt=Math.log,gn=Math.LN2;function Ne(g){return g>>>=0,g===0?32:31-(Wt(g)/gn|0)|0}var Ht=256,Qt=262144,$t=4194304;function It(g){var y=g&42;if(y!==0)return y;switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return g&261888;case 262144:case 524288:case 1048576:case 2097152:return g&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return g&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return g}}function Ct(g,y,_){var P=g.pendingLanes;if(P===0)return 0;var $=0,W=g.suspendedLanes,le=g.pingedLanes;g=g.warmLanes;var ye=P&134217727;return ye!==0?(P=ye&~W,P!==0?$=It(P):(le&=ye,le!==0?$=It(le):_||(_=ye&~g,_!==0&&($=It(_))))):(ye=P&~W,ye!==0?$=It(ye):le!==0?$=It(le):_||(_=P&~g,_!==0&&($=It(_)))),$===0?0:y!==0&&y!==$&&(y&W)===0&&(W=$&-$,_=y&-y,W>=_||W===32&&(_&4194048)!==0)?y:$}function ln(g,y){return(g.pendingLanes&~(g.suspendedLanes&~g.pingedLanes)&y)===0}function lt(g,y){switch(g){case 1:case 2:case 4:case 8:case 64:return y+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _t(){var g=$t;return $t<<=1,($t&62914560)===0&&($t=4194304),g}function Pt(g){for(var y=[],_=0;31>_;_++)y.push(g);return y}function zt(g,y){g.pendingLanes|=y,y!==268435456&&(g.suspendedLanes=0,g.pingedLanes=0,g.warmLanes=0)}function Wn(g,y,_,P,$,W){var le=g.pendingLanes;g.pendingLanes=_,g.suspendedLanes=0,g.pingedLanes=0,g.warmLanes=0,g.expiredLanes&=_,g.entangledLanes&=_,g.errorRecoveryDisabledLanes&=_,g.shellSuspendCounter=0;var ye=g.entanglements,Pe=g.expirationTimes,st=g.hiddenUpdates;for(_=le&~_;0<_;){var wt=31-qt(_),kt=1<<wt;ye[wt]=0,Pe[wt]=-1;var dt=st[wt];if(dt!==null)for(st[wt]=null,wt=0;wt<dt.length;wt++){var bt=dt[wt];bt!==null&&(bt.lane&=-536870913)}_&=~kt}P!==0&&In(g,P,0),W!==0&&$===0&&g.tag!==0&&(g.suspendedLanes|=W&~(le&~y))}function In(g,y,_){g.pendingLanes|=y,g.suspendedLanes&=~y;var P=31-qt(y);g.entangledLanes|=y,g.entanglements[P]=g.entanglements[P]|1073741824|_&261930}function tn(g,y){var _=g.entangledLanes|=y;for(g=g.entanglements;_;){var P=31-qt(_),$=1<<P;$&y|g[P]&y&&(g[P]|=y),_&=~$}}function cn(g,y){var _=y&-y;return _=(_&42)!==0?1:Zn(_),(_&(g.suspendedLanes|y))!==0?0:_}function Zn(g){switch(g){case 2:g=1;break;case 8:g=4;break;case 32:g=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:g=128;break;case 268435456:g=134217728;break;default:g=0}return g}function pr(g){return g&=-g,2<g?8<g?(g&134217727)!==0?32:268435456:8:2}function zr(){var g=H.p;return g!==0?g:(g=window.event,g===void 0?32:T2(g.type))}function qi(g,y){var _=H.p;try{return H.p=g,y()}finally{H.p=_}}var Nr=Math.random().toString(36).slice(2),Yn="__reactFiber$"+Nr,Ii="__reactProps$"+Nr,bs="__reactContainer$"+Nr,oo="__reactEvents$"+Nr,Nc="__reactListeners$"+Nr,Ad="__reactHandles$"+Nr,Au="__reactResources$"+Nr,Tl="__reactMarker$"+Nr;function ec(g){delete g[Yn],delete g[Ii],delete g[oo],delete g[Nc],delete g[Ad]}function Qi(g){var y=g[Yn];if(y)return y;for(var _=g.parentNode;_;){if(y=_[bs]||_[Yn]){if(_=y.alternate,y.child!==null||_!==null&&_.child!==null)for(g=h2(g);g!==null;){if(_=g[Yn])return _;g=h2(g)}return y}g=_,_=g.parentNode}return null}function me(g){if(g=g[Yn]||g[bs]){var y=g.tag;if(y===5||y===6||y===13||y===31||y===26||y===27||y===3)return g}return null}function Ge(g){var y=g.tag;if(y===5||y===26||y===27||y===6)return g.stateNode;throw Error(r(33))}function rt(g){var y=g[Au];return y||(y=g[Au]={hoistableStyles:new Map,hoistableScripts:new Map}),y}function nt(g){g[Tl]=!0}var We=new Set,Kt={};function nn(g,y){un(g,y),un(g+"Capture",y)}function un(g,y){for(Kt[g]=y,g=0;g<y.length;g++)We.add(y[g])}var dn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bn={},En={};function Sn(g){return Ie.call(En,g)?!0:Ie.call(Bn,g)?!1:dn.test(g)?En[g]=!0:(Bn[g]=!0,!1)}function ir(g,y,_){if(Sn(y))if(_===null)g.removeAttribute(y);else{switch(typeof _){case"undefined":case"function":case"symbol":g.removeAttribute(y);return;case"boolean":var P=y.toLowerCase().slice(0,5);if(P!=="data-"&&P!=="aria-"){g.removeAttribute(y);return}}g.setAttribute(y,""+_)}}function he(g,y,_){if(_===null)g.removeAttribute(y);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":g.removeAttribute(y);return}g.setAttribute(y,""+_)}}function pe(g,y,_,P){if(P===null)g.removeAttribute(_);else{switch(typeof P){case"undefined":case"function":case"symbol":case"boolean":g.removeAttribute(_);return}g.setAttributeNS(y,_,""+P)}}function Te(g){switch(typeof g){case"bigint":case"boolean":case"number":case"string":case"undefined":return g;case"object":return g;default:return""}}function Le(g){var y=g.type;return(g=g.nodeName)&&g.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function Fe(g,y,_){var P=Object.getOwnPropertyDescriptor(g.constructor.prototype,y);if(!g.hasOwnProperty(y)&&typeof P<"u"&&typeof P.get=="function"&&typeof P.set=="function"){var $=P.get,W=P.set;return Object.defineProperty(g,y,{configurable:!0,get:function(){return $.call(this)},set:function(le){_=""+le,W.call(this,le)}}),Object.defineProperty(g,y,{enumerable:P.enumerable}),{getValue:function(){return _},setValue:function(le){_=""+le},stopTracking:function(){g._valueTracker=null,delete g[y]}}}}function ct(g){if(!g._valueTracker){var y=Le(g)?"checked":"value";g._valueTracker=Fe(g,y,""+g[y])}}function vt(g){if(!g)return!1;var y=g._valueTracker;if(!y)return!0;var _=y.getValue(),P="";return g&&(P=Le(g)?g.checked?"true":"false":g.value),g=P,g!==_?(y.setValue(g),!0):!1}function Tt(g){if(g=g||(typeof document<"u"?document:void 0),typeof g>"u")return null;try{return g.activeElement||g.body}catch{return g.body}}var Xt=/[\n"\\]/g;function Dt(g){return g.replace(Xt,function(y){return"\\"+y.charCodeAt(0).toString(16)+" "})}function rn(g,y,_,P,$,W,le,ye){g.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?g.type=le:g.removeAttribute("type"),y!=null?le==="number"?(y===0&&g.value===""||g.value!=y)&&(g.value=""+Te(y)):g.value!==""+Te(y)&&(g.value=""+Te(y)):le!=="submit"&&le!=="reset"||g.removeAttribute("value"),y!=null?Un(g,le,Te(y)):_!=null?Un(g,le,Te(_)):P!=null&&g.removeAttribute("value"),$==null&&W!=null&&(g.defaultChecked=!!W),$!=null&&(g.checked=$&&typeof $!="function"&&typeof $!="symbol"),ye!=null&&typeof ye!="function"&&typeof ye!="symbol"&&typeof ye!="boolean"?g.name=""+Te(ye):g.removeAttribute("name")}function sn(g,y,_,P,$,W,le,ye){if(W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"&&(g.type=W),y!=null||_!=null){if(!(W!=="submit"&&W!=="reset"||y!=null)){ct(g);return}_=_!=null?""+Te(_):"",y=y!=null?""+Te(y):_,ye||y===g.value||(g.value=y),g.defaultValue=y}P=P??$,P=typeof P!="function"&&typeof P!="symbol"&&!!P,g.checked=ye?g.checked:!!P,g.defaultChecked=!!P,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(g.name=le),ct(g)}function Un(g,y,_){y==="number"&&Tt(g.ownerDocument)===g||g.defaultValue===""+_||(g.defaultValue=""+_)}function gr(g,y,_,P){if(g=g.options,y){y={};for(var $=0;$<_.length;$++)y["$"+_[$]]=!0;for(_=0;_<g.length;_++)$=y.hasOwnProperty("$"+g[_].value),g[_].selected!==$&&(g[_].selected=$),$&&P&&(g[_].defaultSelected=!0)}else{for(_=""+Te(_),y=null,$=0;$<g.length;$++){if(g[$].value===_){g[$].selected=!0,P&&(g[$].defaultSelected=!0);return}y!==null||g[$].disabled||(y=g[$])}y!==null&&(y.selected=!0)}}function qn(g,y,_){if(y!=null&&(y=""+Te(y),y!==g.value&&(g.value=y),_==null)){g.defaultValue!==y&&(g.defaultValue=y);return}g.defaultValue=_!=null?""+Te(_):""}function Lr(g,y,_,P){if(y==null){if(P!=null){if(_!=null)throw Error(r(92));if(q(P)){if(1<P.length)throw Error(r(93));P=P[0]}_=P}_==null&&(_=""),y=_}_=Te(y),g.defaultValue=_,P=g.textContent,P===_&&P!==""&&P!==null&&(g.value=P),ct(g)}function Ui(g,y){if(y){var _=g.firstChild;if(_&&_===g.lastChild&&_.nodeType===3){_.nodeValue=y;return}}g.textContent=y}var ma=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lo(g,y,_){var P=y.indexOf("--")===0;_==null||typeof _=="boolean"||_===""?P?g.setProperty(y,""):y==="float"?g.cssFloat="":g[y]="":P?g.setProperty(y,_):typeof _!="number"||_===0||ma.has(y)?y==="float"?g.cssFloat=_:g[y]=(""+_).trim():g[y]=_+"px"}function Qp(g,y,_){if(y!=null&&typeof y!="object")throw Error(r(62));if(g=g.style,_!=null){for(var P in _)!_.hasOwnProperty(P)||y!=null&&y.hasOwnProperty(P)||(P.indexOf("--")===0?g.setProperty(P,""):P==="float"?g.cssFloat="":g[P]="");for(var $ in y)P=y[$],y.hasOwnProperty($)&&_[$]!==P&&lo(g,$,P)}else for(var W in y)y.hasOwnProperty(W)&&lo(g,W,y[W])}function yd(g){if(g.indexOf("-")===-1)return!1;switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ev=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Up(g){return ev.test(""+g)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":g}function yu(){}var Jg=null;function G0(g){return g=g.target||g.srcElement||window,g.correspondingUseElement&&(g=g.correspondingUseElement),g.nodeType===3?g.parentNode:g}var ch=null,uh=null;function tv(g){var y=me(g);if(y&&(g=y.stateNode)){var _=g[Ii]||null;e:switch(g=y.stateNode,y.type){case"input":if(rn(g,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name),y=_.name,_.type==="radio"&&y!=null){for(_=g;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll('input[name="'+Dt(""+y)+'"][type="radio"]'),y=0;y<_.length;y++){var P=_[y];if(P!==g&&P.form===g.form){var $=P[Ii]||null;if(!$)throw Error(r(90));rn(P,$.value,$.defaultValue,$.defaultValue,$.checked,$.defaultChecked,$.type,$.name)}}for(y=0;y<_.length;y++)P=_[y],P.form===g.form&&vt(P)}break e;case"textarea":qn(g,_.value,_.defaultValue);break e;case"select":y=_.value,y!=null&&gr(g,!!_.multiple,y,!1)}}}var V0=!1;function nv(g,y,_){if(V0)return g(y,_);V0=!0;try{var P=g(y);return P}finally{if(V0=!1,(ch!==null||uh!==null)&&(xe(),ch&&(y=ch,g=uh,uh=ch=null,tv(y),g)))for(y=0;y<g.length;y++)tv(g[y])}}function vd(g,y){var _=g.stateNode;if(_===null)return null;var P=_[Ii]||null;if(P===null)return null;_=P[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(P=!P.disabled)||(g=g.type,P=!(g==="button"||g==="input"||g==="select"||g==="textarea")),g=!P;break e;default:g=!1}if(g)return null;if(_&&typeof _!="function")throw Error(r(231,y,typeof _));return _}var vu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),W0=!1;if(vu)try{var Zg={};Object.defineProperty(Zg,"passive",{get:function(){W0=!0}}),window.addEventListener("test",Zg,Zg),window.removeEventListener("test",Zg,Zg)}catch{W0=!1}var dh=null,K0=null,pi=null;function ki(){if(pi)return pi;var g,y=K0,_=y.length,P,$="value"in dh?dh.value:dh.textContent,W=$.length;for(g=0;g<_&&y[g]===$[g];g++);var le=_-g;for(P=1;P<=le&&y[_-P]===$[W-P];P++);return pi=$.slice(g,1<P?1-P:void 0)}function Sf(g){var y=g.keyCode;return"charCode"in g?(g=g.charCode,g===0&&y===13&&(g=13)):g=y,g===10&&(g=13),32<=g||g===13?g:0}function em(){return!0}function rv(){return!1}function co(g){function y(_,P,$,W,le){this._reactName=_,this._targetInst=$,this.type=P,this.nativeEvent=W,this.target=le,this.currentTarget=null;for(var ye in g)g.hasOwnProperty(ye)&&(_=g[ye],this[ye]=_?_(W):W[ye]);return this.isDefaultPrevented=(W.defaultPrevented!=null?W.defaultPrevented:W.returnValue===!1)?em:rv,this.isPropagationStopped=rv,this}return h(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=em)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=em)},persist:function(){},isPersistent:em}),y}var hh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tm=co(hh),tc=h({},hh,{view:0,detail:0}),q0=co(tc),ea,wf,nc,Hp=h({},tc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_f,button:0,buttons:0,relatedTarget:function(g){return g.relatedTarget===void 0?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==nc&&(nc&&g.type==="mousemove"?(ea=g.screenX-nc.screenX,wf=g.screenY-nc.screenY):wf=ea=0,nc=g),ea)},movementY:function(g){return"movementY"in g?g.movementY:wf}}),Y0=co(Hp),Hi=h({},Hp,{dataTransfer:0}),iv=co(Hi),sv=h({},tc,{relatedTarget:0}),nm=co(sv),av=h({},hh,{animationName:0,elapsedTime:0,pseudoElement:0}),ov=co(av),Gp=h({},hh,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),jo=co(Gp),Xb=h({},hh,{data:0}),el=co(Xb),Jb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rm(g){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(g):(g=xu[g])?!!y[g]:!1}function _f(){return rm}var ts=h({},tc,{key:function(g){if(g.key){var y=Jb[g.key]||g.key;if(y!=="Unidentified")return y}return g.type==="keypress"?(g=Sf(g),g===13?"Enter":String.fromCharCode(g)):g.type==="keydown"||g.type==="keyup"?X0[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_f,charCode:function(g){return g.type==="keypress"?Sf(g):0},keyCode:function(g){return g.type==="keydown"||g.type==="keyup"?g.keyCode:0},which:function(g){return g.type==="keypress"?Sf(g):g.type==="keydown"||g.type==="keyup"?g.keyCode:0}}),bu=co(ts),J0=h({},Hp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Z0=co(J0),eA=h({},tc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_f}),xd=co(eA),lv=h({},hh,{propertyName:0,elapsedTime:0,pseudoElement:0}),rS=co(lv),cv=h({},Hp,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),Lc=co(cv),tl=h({},hh,{newState:0,oldState:0}),uv=co(tl),tA=[9,13,27,32],fh=vu&&"CompositionEvent"in window,Cu=null;vu&&"documentMode"in document&&(Cu=document.documentMode);var bd=vu&&"TextEvent"in window&&!Cu,ka=vu&&(!fh||Cu&&8<Cu&&11>=Cu),im=" ",sm=!1;function Vp(g,y){switch(g){case"keyup":return tA.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wp(g){return g=g.detail,typeof g=="object"&&"data"in g?g.data:null}var Cd=!1;function uo(g,y){switch(g){case"compositionend":return Wp(y);case"keypress":return y.which!==32?null:(sm=!0,im);case"textInput":return g=y.data,g===im&&sm?null:g;default:return null}}function nA(g,y){if(Cd)return g==="compositionend"||!fh&&Vp(g,y)?(g=ki(),pi=K0=dh=null,Cd=!1,g):null;switch(g){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return ka&&y.locale!=="ko"?null:y.data;default:return null}}var Ha={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rA(g){var y=g&&g.nodeName&&g.nodeName.toLowerCase();return y==="input"?!!Ha[g.type]:y==="textarea"}function am(g,y,_,P){ch?uh?uh.push(P):uh=[P]:ch=P,y=Yv(y,"onChange"),0<y.length&&(_=new tm("onChange","change",null,_,P),g.push({event:_,listeners:y}))}var Kp=null,qp=null;function dv(g){r2(g,0)}function Yp(g){var y=Ge(g);if(vt(y))return g}function hv(g,y){if(g==="change")return y}var Eu=!1;if(vu){var If;if(vu){var us="oninput"in document;if(!us){var iA=document.createElement("div");iA.setAttribute("oninput","return;"),us=typeof iA.oninput=="function"}If=us}else If=!1;Eu=If&&(!document.documentMode||9<document.documentMode)}function fv(){Kp&&(Kp.detachEvent("onpropertychange",Su),qp=Kp=null)}function Su(g){if(g.propertyName==="value"&&Yp(qp)){var y=[];am(y,qp,g,G0(g)),nv(dv,y)}}function ph(g,y,_){g==="focusin"?(fv(),Kp=y,qp=_,Kp.attachEvent("onpropertychange",Su)):g==="focusout"&&fv()}function gh(g){if(g==="selectionchange"||g==="keyup"||g==="keydown")return Yp(qp)}function Zb(g,y){if(g==="click")return Yp(y)}function eC(g,y){if(g==="input"||g==="change")return Yp(y)}function rc(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var Zr=typeof Object.is=="function"?Object.is:rc;function Bf(g,y){if(Zr(g,y))return!0;if(typeof g!="object"||g===null||typeof y!="object"||y===null)return!1;var _=Object.keys(g),P=Object.keys(y);if(_.length!==P.length)return!1;for(P=0;P<_.length;P++){var $=_[P];if(!Ie.call(y,$)||!Zr(g[$],y[$]))return!1}return!0}function pv(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function gv(g,y){var _=pv(g);g=0;for(var P;_;){if(_.nodeType===3){if(P=g+_.textContent.length,g<=y&&P>=y)return{node:_,offset:y-g};g=P}e:{for(;_;){if(_.nextSibling){_=_.nextSibling;break e}_=_.parentNode}_=void 0}_=pv(_)}}function sA(g,y){return g&&y?g===y?!0:g&&g.nodeType===3?!1:y&&y.nodeType===3?sA(g,y.parentNode):"contains"in g?g.contains(y):g.compareDocumentPosition?!!(g.compareDocumentPosition(y)&16):!1:!1}function aA(g){g=g!=null&&g.ownerDocument!=null&&g.ownerDocument.defaultView!=null?g.ownerDocument.defaultView:window;for(var y=Tt(g.document);y instanceof g.HTMLIFrameElement;){try{var _=typeof y.contentWindow.location.href=="string"}catch{_=!1}if(_)g=y.contentWindow;else break;y=Tt(g.document)}return y}function Xp(g){var y=g&&g.nodeName&&g.nodeName.toLowerCase();return y&&(y==="input"&&(g.type==="text"||g.type==="search"||g.type==="tel"||g.type==="url"||g.type==="password")||y==="textarea"||g.contentEditable==="true")}var Tf=vu&&"documentMode"in document&&11>=document.documentMode,Ve=null,Et=null,gt=null,on=!1;function sr(g,y,_){var P=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;on||Ve==null||Ve!==Tt(P)||(P=Ve,"selectionStart"in P&&Xp(P)?P={start:P.selectionStart,end:P.selectionEnd}:(P=(P.ownerDocument&&P.ownerDocument.defaultView||window).getSelection(),P={anchorNode:P.anchorNode,anchorOffset:P.anchorOffset,focusNode:P.focusNode,focusOffset:P.focusOffset}),gt&&Bf(gt,P)||(gt=P,P=Yv(Et,"onSelect"),0<P.length&&(y=new tm("onSelect","select",null,y,_),g.push({event:y,listeners:P}),y.target=Ve)))}function Fr(g,y){var _={};return _[g.toLowerCase()]=y.toLowerCase(),_["Webkit"+g]="webkit"+y,_["Moz"+g]="moz"+y,_}var ms={animationend:Fr("Animation","AnimationEnd"),animationiteration:Fr("Animation","AnimationIteration"),animationstart:Fr("Animation","AnimationStart"),transitionrun:Fr("Transition","TransitionRun"),transitionstart:Fr("Transition","TransitionStart"),transitioncancel:Fr("Transition","TransitionCancel"),transitionend:Fr("Transition","TransitionEnd")},yi={},Ga={};vu&&(Ga=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function mh(g){if(yi[g])return yi[g];if(!ms[g])return g;var y=ms[g],_;for(_ in y)if(y.hasOwnProperty(_)&&_ in Ga)return yi[g]=y[_];return g}var ds=mh("animationend"),Jp=mh("animationiteration"),wu=mh("animationstart"),Fc=mh("transitionrun"),jc=mh("transitionstart"),Zp=mh("transitioncancel"),gi=mh("transitionend"),Ed=new Map,om="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");om.push("scrollEnd");function Aa(g,y){Ed.set(g,y),nn(y,[g])}var Ah=typeof reportError=="function"?reportError:function(g){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof g=="object"&&g!==null&&typeof g.message=="string"?String(g.message):String(g),error:g});if(!window.dispatchEvent(y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",g);return}console.error(g)},Na=[],Mf=0,Df=0;function Oo(){for(var g=Mf,y=Df=Mf=0;y<g;){var _=Na[y];Na[y++]=null;var P=Na[y];Na[y++]=null;var $=Na[y];Na[y++]=null;var W=Na[y];if(Na[y++]=null,P!==null&&$!==null){var le=P.pending;le===null?$.next=$:($.next=le.next,le.next=$),P.pending=$}W!==0&&lm(_,$,W)}}function yh(g,y,_,P){Na[Mf++]=g,Na[Mf++]=y,Na[Mf++]=_,Na[Mf++]=P,Df|=P,g.lanes|=P,g=g.alternate,g!==null&&(g.lanes|=P)}function Rf(g,y,_,P){return yh(g,y,_,P),Pf(g)}function Oc(g,y){return yh(g,null,null,y),Pf(g)}function lm(g,y,_){g.lanes|=_;var P=g.alternate;P!==null&&(P.lanes|=_);for(var $=!1,W=g.return;W!==null;)W.childLanes|=_,P=W.alternate,P!==null&&(P.childLanes|=_),W.tag===22&&(g=W.stateNode,g===null||g._visibility&1||($=!0)),g=W,W=W.return;return g.tag===3?(W=g.stateNode,$&&y!==null&&($=31-qt(_),g=W.hiddenUpdates,P=g[$],P===null?g[$]=[y]:P.push(y),y.lane=_|536870912),W):null}function Pf(g){if(50<ep)throw ep=0,tp=null,Error(r(185));for(var y=g.return;y!==null;)g=y,y=g.return;return g.tag===3?g.stateNode:null}var zc={};function mv(g,y,_,P){this.tag=g,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ya(g,y,_,P){return new mv(g,y,_,P)}function Qs(g){return g=g.prototype,!(!g||!g.isReactComponent)}function Ml(g,y){var _=g.alternate;return _===null?(_=ya(g.tag,y,g.key,g.mode),_.elementType=g.elementType,_.type=g.type,_.stateNode=g.stateNode,_.alternate=g,g.alternate=_):(_.pendingProps=y,_.type=g.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=g.flags&65011712,_.childLanes=g.childLanes,_.lanes=g.lanes,_.child=g.child,_.memoizedProps=g.memoizedProps,_.memoizedState=g.memoizedState,_.updateQueue=g.updateQueue,y=g.dependencies,_.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},_.sibling=g.sibling,_.index=g.index,_.ref=g.ref,_.refCleanup=g.refCleanup,_}function ho(g,y){g.flags&=65011714;var _=g.alternate;return _===null?(g.childLanes=0,g.lanes=y,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=_.childLanes,g.lanes=_.lanes,g.child=_.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=_.memoizedProps,g.memoizedState=_.memoizedState,g.updateQueue=_.updateQueue,g.type=_.type,y=_.dependencies,g.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),g}function cm(g,y,_,P,$,W){var le=0;if(P=g,typeof g=="function")Qs(g)&&(le=1);else if(typeof g=="string")le=vD(g,_,te.current)?26:g==="html"||g==="head"||g==="body"?27:5;else e:switch(g){case k:return g=ya(31,_,y,$),g.elementType=k,g.lanes=W,g;case v:return Sd(_.children,$,W,y);case A:le=8,$|=24;break;case x:return g=ya(12,_,y,$|2),g.elementType=x,g.lanes=W,g;case D:return g=ya(13,_,y,$),g.elementType=D,g.lanes=W,g;case T:return g=ya(19,_,y,$),g.elementType=T,g.lanes=W,g;default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case w:le=10;break e;case E:le=9;break e;case B:le=11;break e;case M:le=14;break e;case R:le=16,P=null;break e}le=29,_=Error(r(130,g===null?"null":typeof g,"")),P=null}return y=ya(le,_,y,$),y.elementType=g,y.type=P,y.lanes=W,y}function Sd(g,y,_,P){return g=ya(7,g,P,y),g.lanes=_,g}function kf(g,y,_){return g=ya(6,g,null,y),g.lanes=_,g}function um(g){var y=ya(18,null,null,0);return y.stateNode=g,y}function Dl(g,y,_){return y=ya(4,g.children!==null?g.children:[],g.key,y),y.lanes=_,y.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},y}var Av=new WeakMap;function zo(g,y){if(typeof g=="object"&&g!==null){var _=Av.get(g);return _!==void 0?_:(y={value:g,source:y,stack:ft(y)},Av.set(g,y),y)}return{value:g,source:y,stack:ft(y)}}var $c=[],Nf=0,Cs=null,Us=0,Rl=[],nl=0,Qc=null,_u=1,ic="";function Pl(g,y){$c[Nf++]=Us,$c[Nf++]=Cs,Cs=g,Us=y}function dm(g,y,_){Rl[nl++]=_u,Rl[nl++]=ic,Rl[nl++]=Qc,Qc=g;var P=_u;g=ic;var $=32-qt(P)-1;P&=~(1<<$),_+=1;var W=32-qt(y)+$;if(30<W){var le=$-$%5;W=(P&(1<<le)-1).toString(32),P>>=le,$-=le,_u=1<<32-qt(y)+$|_<<$|P,ic=W+g}else _u=1<<W|_<<$|P,ic=g}function wd(g){g.return!==null&&(Pl(g,1),dm(g,1,0))}function sc(g){for(;g===Cs;)Cs=$c[--Nf],$c[Nf]=null,Us=$c[--Nf],$c[Nf]=null;for(;g===Qc;)Qc=Rl[--nl],Rl[nl]=null,ic=Rl[--nl],Rl[nl]=null,_u=Rl[--nl],Rl[nl]=null}function _d(g,y){Rl[nl++]=_u,Rl[nl++]=ic,Rl[nl++]=Qc,_u=y.id,ic=y.overflow,Qc=g}var Hs=null,vi=null,ei=!1,Id=null,La=!1,oA=Error(r(519));function Kr(g){var y=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bh(zo(y,g)),oA}function Lf(g){var y=g.stateNode,_=g.type,P=g.memoizedProps;switch(y[Yn]=g,y[Ii]=P,_){case"dialog":ni("cancel",y),ni("close",y);break;case"iframe":case"object":case"embed":ni("load",y);break;case"video":case"audio":for(_=0;_<qv.length;_++)ni(qv[_],y);break;case"source":ni("error",y);break;case"img":case"image":case"link":ni("error",y),ni("load",y);break;case"details":ni("toggle",y);break;case"input":ni("invalid",y),sn(y,P.value,P.defaultValue,P.checked,P.defaultChecked,P.type,P.name,!0);break;case"select":ni("invalid",y);break;case"textarea":ni("invalid",y),Lr(y,P.value,P.defaultValue,P.children)}_=P.children,typeof _!="string"&&typeof _!="number"&&typeof _!="bigint"||y.textContent===""+_||P.suppressHydrationWarning===!0||a2(y.textContent,_)?(P.popover!=null&&(ni("beforetoggle",y),ni("toggle",y)),P.onScroll!=null&&ni("scroll",y),P.onScrollEnd!=null&&ni("scrollend",y),P.onClick!=null&&(y.onclick=yu),y=!0):y=!1,y||Kr(g,!0)}function eg(g){for(Hs=g.return;Hs;)switch(Hs.tag){case 5:case 31:case 13:La=!1;return;case 27:case 3:La=!0;return;default:Hs=Hs.return}}function vh(g){if(g!==Hs)return!1;if(!ei)return eg(g),ei=!0,!1;var y=g.tag,_;if((_=y!==3&&y!==27)&&((_=y===5)&&(_=g.type,_=!(_!=="form"&&_!=="button")||yg(g.type,g.memoizedProps)),_=!_),_&&vi&&Kr(g),eg(g),y===13){if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));vi=d2(g)}else if(y===31){if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));vi=d2(g)}else y===27?(y=vi,ar(g.type)?(g=bS,bS=null,vi=g):vi=y):vi=Hs?$u(g.stateNode.nextSibling):null;return!0}function Ae(){vi=Hs=null,ei=!1}function xh(){var g=Id;return g!==null&&(So===null?So=g:So.push.apply(So,g),Id=null),g}function bh(g){Id===null?Id=[g]:Id.push(g)}var rl=J(null),mr=null,fo=null;function Bd(g,y,_){ee(rl,y._currentValue),y._currentValue=_}function ac(g){g._currentValue=rl.current,Z(rl)}function $o(g,y,_){for(;g!==null;){var P=g.alternate;if((g.childLanes&y)!==y?(g.childLanes|=y,P!==null&&(P.childLanes|=y)):P!==null&&(P.childLanes&y)!==y&&(P.childLanes|=y),g===_)break;g=g.return}}function lA(g,y,_,P){var $=g.child;for($!==null&&($.return=g);$!==null;){var W=$.dependencies;if(W!==null){var le=$.child;W=W.firstContext;e:for(;W!==null;){var ye=W;W=$;for(var Pe=0;Pe<y.length;Pe++)if(ye.context===y[Pe]){W.lanes|=_,ye=W.alternate,ye!==null&&(ye.lanes|=_),$o(W.return,_,g),P||(le=null);break e}W=ye.next}}else if($.tag===18){if(le=$.return,le===null)throw Error(r(341));le.lanes|=_,W=le.alternate,W!==null&&(W.lanes|=_),$o(le,_,g),le=null}else le=$.child;if(le!==null)le.return=$;else for(le=$;le!==null;){if(le===g){le=null;break}if($=le.sibling,$!==null){$.return=le.return,le=$;break}le=le.return}$=le}}function Ch(g,y,_,P){g=null;for(var $=y,W=!1;$!==null;){if(!W){if(($.flags&524288)!==0)W=!0;else if(($.flags&262144)!==0)break}if($.tag===10){var le=$.alternate;if(le===null)throw Error(r(387));if(le=le.memoizedProps,le!==null){var ye=$.type;Zr($.pendingProps.value,le.value)||(g!==null?g.push(ye):g=[ye])}}else if($===se.current){if(le=$.alternate,le===null)throw Error(r(387));le.memoizedState.memoizedState!==$.memoizedState.memoizedState&&(g!==null?g.push(WA):g=[WA])}$=$.return}g!==null&&lA(y,g,_,P),y.flags|=262144}function tg(g){for(g=g.firstContext;g!==null;){if(!Zr(g.context._currentValue,g.memoizedValue))return!0;g=g.next}return!1}function Ff(g){mr=g,fo=null,g=g.dependencies,g!==null&&(g.firstContext=null)}function Fa(g){return yv(mr,g)}function kl(g,y){return mr===null&&Ff(g),yv(g,y)}function yv(g,y){var _=y._currentValue;if(y={context:y,memoizedValue:_,next:null},fo===null){if(g===null)throw Error(r(308));fo=y,g.dependencies={lanes:0,firstContext:y},g.flags|=524288}else fo=fo.next=y;return _}var tC=typeof AbortController<"u"?AbortController:function(){var g=[],y=this.signal={aborted:!1,addEventListener:function(_,P){g.push(P)}};this.abort=function(){y.aborted=!0,g.forEach(function(_){return _()})}},nC=t.unstable_scheduleCallback,vv=t.unstable_NormalPriority,Nn={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uc(){return{controller:new tC,data:new Map,refCount:0}}function Va(g){g.refCount--,g.refCount===0&&nC(vv,function(){g.controller.abort()})}var jf=null,xv=0,Td=0,Hc=null;function oc(g,y){if(jf===null){var _=jf=[];xv=0,Td=nu(),Hc={status:"pending",value:void 0,then:function(P){_.push(P)}}}return xv++,y.then(bv,bv),y}function bv(){if(--xv===0&&jf!==null){Hc!==null&&(Hc.status="fulfilled");var g=jf;jf=null,Td=0,Hc=null;for(var y=0;y<g.length;y++)(0,g[y])()}}function Cv(g,y){var _=[],P={status:"pending",value:null,reason:null,then:function($){_.push($)}};return g.then(function(){P.status="fulfilled",P.value=y;for(var $=0;$<_.length;$++)(0,_[$])(y)},function($){for(P.status="rejected",P.reason=$,$=0;$<_.length;$++)(0,_[$])(void 0)}),P}var lc=O.S;O.S=function(g,y){pg=ue(),typeof y=="object"&&y!==null&&typeof y.then=="function"&&oc(g,y),lc!==null&&lc(g,y)};var Eh=J(null);function Iu(){var g=Eh.current;return g!==null?g:Bi.pooledCache}function ng(g,y){y===null?ee(Eh,Eh.current):ee(Eh,y.pool)}function cA(){var g=Iu();return g===null?null:{parent:Nn._currentValue,pool:g}}var Sh=Error(r(460)),rg=Error(r(474)),cc=Error(r(542)),hm={then:function(){}};function rC(g){return g=g.status,g==="fulfilled"||g==="rejected"}function fm(g,y,_){switch(_=g[_],_===void 0?g.push(y):_!==y&&(y.then(yu,yu),y=_),y.status){case"fulfilled":return y.value;case"rejected":throw g=y.reason,dA(g),g;default:if(typeof y.status=="string")y.then(yu,yu);else{if(g=Bi,g!==null&&100<g.shellSuspendCounter)throw Error(r(482));g=y,g.status="pending",g.then(function(P){if(y.status==="pending"){var $=y;$.status="fulfilled",$.value=P}},function(P){if(y.status==="pending"){var $=y;$.status="rejected",$.reason=P}})}switch(y.status){case"fulfilled":return y.value;case"rejected":throw g=y.reason,dA(g),g}throw Hn=y,Sh}}function Gc(g){try{var y=g._init;return y(g._payload)}catch(_){throw _!==null&&typeof _=="object"&&typeof _.then=="function"?(Hn=_,Sh):_}}var Hn=null;function uA(){if(Hn===null)throw Error(r(459));var g=Hn;return Hn=null,g}function dA(g){if(g===Sh||g===cc)throw Error(r(483))}var wh=null,po=0;function ig(g){var y=po;return po+=1,wh===null&&(wh=[]),fm(wh,g,y)}function Vc(g,y){y=y.props.ref,g.ref=y!==void 0?y:null}function go(g,y){throw y.$$typeof===f?Error(r(525)):(g=Object.prototype.toString.call(y),Error(r(31,g==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":g)))}function sg(g){function y(Je,ze){if(g){var it=Je.deletions;it===null?(Je.deletions=[ze],Je.flags|=16):it.push(ze)}}function _(Je,ze){if(!g)return null;for(;ze!==null;)y(Je,ze),ze=ze.sibling;return null}function P(Je){for(var ze=new Map;Je!==null;)Je.key!==null?ze.set(Je.key,Je):ze.set(Je.index,Je),Je=Je.sibling;return ze}function $(Je,ze){return Je=Ml(Je,ze),Je.index=0,Je.sibling=null,Je}function W(Je,ze,it){return Je.index=it,g?(it=Je.alternate,it!==null?(it=it.index,it<ze?(Je.flags|=67108866,ze):it):(Je.flags|=67108866,ze)):(Je.flags|=1048576,ze)}function le(Je){return g&&Je.alternate===null&&(Je.flags|=67108866),Je}function ye(Je,ze,it,Rt){return ze===null||ze.tag!==6?(ze=kf(it,Je.mode,Rt),ze.return=Je,ze):(ze=$(ze,it),ze.return=Je,ze)}function Pe(Je,ze,it,Rt){var Kn=it.type;return Kn===v?wt(Je,ze,it.props.children,Rt,it.key):ze!==null&&(ze.elementType===Kn||typeof Kn=="object"&&Kn!==null&&Kn.$$typeof===R&&Gc(Kn)===ze.type)?(ze=$(ze,it.props),Vc(ze,it),ze.return=Je,ze):(ze=cm(it.type,it.key,it.props,null,Je.mode,Rt),Vc(ze,it),ze.return=Je,ze)}function st(Je,ze,it,Rt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==it.containerInfo||ze.stateNode.implementation!==it.implementation?(ze=Dl(it,Je.mode,Rt),ze.return=Je,ze):(ze=$(ze,it.children||[]),ze.return=Je,ze)}function wt(Je,ze,it,Rt,Kn){return ze===null||ze.tag!==7?(ze=Sd(it,Je.mode,Rt,Kn),ze.return=Je,ze):(ze=$(ze,it),ze.return=Je,ze)}function kt(Je,ze,it){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return ze=kf(""+ze,Je.mode,it),ze.return=Je,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case p:return it=cm(ze.type,ze.key,ze.props,null,Je.mode,it),Vc(it,ze),it.return=Je,it;case m:return ze=Dl(ze,Je.mode,it),ze.return=Je,ze;case R:return ze=Gc(ze),kt(Je,ze,it)}if(q(ze)||z(ze))return ze=Sd(ze,Je.mode,it,null),ze.return=Je,ze;if(typeof ze.then=="function")return kt(Je,ig(ze),it);if(ze.$$typeof===w)return kt(Je,kl(Je,ze),it);go(Je,ze)}return null}function dt(Je,ze,it,Rt){var Kn=ze!==null?ze.key:null;if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return Kn!==null?null:ye(Je,ze,""+it,Rt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case p:return it.key===Kn?Pe(Je,ze,it,Rt):null;case m:return it.key===Kn?st(Je,ze,it,Rt):null;case R:return it=Gc(it),dt(Je,ze,it,Rt)}if(q(it)||z(it))return Kn!==null?null:wt(Je,ze,it,Rt,null);if(typeof it.then=="function")return dt(Je,ze,ig(it),Rt);if(it.$$typeof===w)return dt(Je,ze,kl(Je,it),Rt);go(Je,it)}return null}function bt(Je,ze,it,Rt,Kn){if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint")return Je=Je.get(it)||null,ye(ze,Je,""+Rt,Kn);if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case p:return Je=Je.get(Rt.key===null?it:Rt.key)||null,Pe(ze,Je,Rt,Kn);case m:return Je=Je.get(Rt.key===null?it:Rt.key)||null,st(ze,Je,Rt,Kn);case R:return Rt=Gc(Rt),bt(Je,ze,it,Rt,Kn)}if(q(Rt)||z(Rt))return Je=Je.get(it)||null,wt(ze,Je,Rt,Kn,null);if(typeof Rt.then=="function")return bt(Je,ze,it,ig(Rt),Kn);if(Rt.$$typeof===w)return bt(Je,ze,it,kl(ze,Rt),Kn);go(ze,Rt)}return null}function wn(Je,ze,it,Rt){for(var Kn=null,Ti=null,Rn=ze,Pr=ze=0,li=null;Rn!==null&&Pr<it.length;Pr++){Rn.index>Pr?(li=Rn,Rn=null):li=Rn.sibling;var Mi=dt(Je,Rn,it[Pr],Rt);if(Mi===null){Rn===null&&(Rn=li);break}g&&Rn&&Mi.alternate===null&&y(Je,Rn),ze=W(Mi,ze,Pr),Ti===null?Kn=Mi:Ti.sibling=Mi,Ti=Mi,Rn=li}if(Pr===it.length)return _(Je,Rn),ei&&Pl(Je,Pr),Kn;if(Rn===null){for(;Pr<it.length;Pr++)Rn=kt(Je,it[Pr],Rt),Rn!==null&&(ze=W(Rn,ze,Pr),Ti===null?Kn=Rn:Ti.sibling=Rn,Ti=Rn);return ei&&Pl(Je,Pr),Kn}for(Rn=P(Rn);Pr<it.length;Pr++)li=bt(Rn,Je,Pr,it[Pr],Rt),li!==null&&(g&&li.alternate!==null&&Rn.delete(li.key===null?Pr:li.key),ze=W(li,ze,Pr),Ti===null?Kn=li:Ti.sibling=li,Ti=li);return g&&Rn.forEach(function(Sg){return y(Je,Sg)}),ei&&Pl(Je,Pr),Kn}function er(Je,ze,it,Rt){if(it==null)throw Error(r(151));for(var Kn=null,Ti=null,Rn=ze,Pr=ze=0,li=null,Mi=it.next();Rn!==null&&!Mi.done;Pr++,Mi=it.next()){Rn.index>Pr?(li=Rn,Rn=null):li=Rn.sibling;var Sg=dt(Je,Rn,Mi.value,Rt);if(Sg===null){Rn===null&&(Rn=li);break}g&&Rn&&Sg.alternate===null&&y(Je,Rn),ze=W(Sg,ze,Pr),Ti===null?Kn=Sg:Ti.sibling=Sg,Ti=Sg,Rn=li}if(Mi.done)return _(Je,Rn),ei&&Pl(Je,Pr),Kn;if(Rn===null){for(;!Mi.done;Pr++,Mi=it.next())Mi=kt(Je,Mi.value,Rt),Mi!==null&&(ze=W(Mi,ze,Pr),Ti===null?Kn=Mi:Ti.sibling=Mi,Ti=Mi);return ei&&Pl(Je,Pr),Kn}for(Rn=P(Rn);!Mi.done;Pr++,Mi=it.next())Mi=bt(Rn,Je,Pr,Mi.value,Rt),Mi!==null&&(g&&Mi.alternate!==null&&Rn.delete(Mi.key===null?Pr:Mi.key),ze=W(Mi,ze,Pr),Ti===null?Kn=Mi:Ti.sibling=Mi,Ti=Mi);return g&&Rn.forEach(function(ID){return y(Je,ID)}),ei&&Pl(Je,Pr),Kn}function rs(Je,ze,it,Rt){if(typeof it=="object"&&it!==null&&it.type===v&&it.key===null&&(it=it.props.children),typeof it=="object"&&it!==null){switch(it.$$typeof){case p:e:{for(var Kn=it.key;ze!==null;){if(ze.key===Kn){if(Kn=it.type,Kn===v){if(ze.tag===7){_(Je,ze.sibling),Rt=$(ze,it.props.children),Rt.return=Je,Je=Rt;break e}}else if(ze.elementType===Kn||typeof Kn=="object"&&Kn!==null&&Kn.$$typeof===R&&Gc(Kn)===ze.type){_(Je,ze.sibling),Rt=$(ze,it.props),Vc(Rt,it),Rt.return=Je,Je=Rt;break e}_(Je,ze);break}else y(Je,ze);ze=ze.sibling}it.type===v?(Rt=Sd(it.props.children,Je.mode,Rt,it.key),Rt.return=Je,Je=Rt):(Rt=cm(it.type,it.key,it.props,null,Je.mode,Rt),Vc(Rt,it),Rt.return=Je,Je=Rt)}return le(Je);case m:e:{for(Kn=it.key;ze!==null;){if(ze.key===Kn)if(ze.tag===4&&ze.stateNode.containerInfo===it.containerInfo&&ze.stateNode.implementation===it.implementation){_(Je,ze.sibling),Rt=$(ze,it.children||[]),Rt.return=Je,Je=Rt;break e}else{_(Je,ze);break}else y(Je,ze);ze=ze.sibling}Rt=Dl(it,Je.mode,Rt),Rt.return=Je,Je=Rt}return le(Je);case R:return it=Gc(it),rs(Je,ze,it,Rt)}if(q(it))return wn(Je,ze,it,Rt);if(z(it)){if(Kn=z(it),typeof Kn!="function")throw Error(r(150));return it=Kn.call(it),er(Je,ze,it,Rt)}if(typeof it.then=="function")return rs(Je,ze,ig(it),Rt);if(it.$$typeof===w)return rs(Je,ze,kl(Je,it),Rt);go(Je,it)}return typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint"?(it=""+it,ze!==null&&ze.tag===6?(_(Je,ze.sibling),Rt=$(ze,it),Rt.return=Je,Je=Rt):(_(Je,ze),Rt=kf(it,Je.mode,Rt),Rt.return=Je,Je=Rt),le(Je)):_(Je,ze)}return function(Je,ze,it,Rt){try{po=0;var Kn=rs(Je,ze,it,Rt);return wh=null,Kn}catch(Rn){if(Rn===Sh||Rn===cc)throw Rn;var Ti=ya(29,Rn,null,Je.mode);return Ti.lanes=Rt,Ti.return=Je,Ti}finally{}}}var _h=sg(!0),Ev=sg(!1),uc=!1;function Bu(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hA(g,y){g=g.updateQueue,y.updateQueue===g&&(y.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,callbacks:null})}function Tu(g){return{lane:g,tag:0,payload:null,callback:null,next:null}}function dc(g,y,_){var P=g.updateQueue;if(P===null)return null;if(P=P.shared,(si&2)!==0){var $=P.pending;return $===null?y.next=y:(y.next=$.next,$.next=y),P.pending=y,y=Pf(g),lm(g,null,_),y}return yh(g,P,y,_),Pf(g)}function Ih(g,y,_){if(y=y.updateQueue,y!==null&&(y=y.shared,(_&4194048)!==0)){var P=y.lanes;P&=g.pendingLanes,_|=P,y.lanes=_,tn(g,_)}}function pm(g,y){var _=g.updateQueue,P=g.alternate;if(P!==null&&(P=P.updateQueue,_===P)){var $=null,W=null;if(_=_.firstBaseUpdate,_!==null){do{var le={lane:_.lane,tag:_.tag,payload:_.payload,callback:null,next:null};W===null?$=W=le:W=W.next=le,_=_.next}while(_!==null);W===null?$=W=y:W=W.next=y}else $=W=y;_={baseState:P.baseState,firstBaseUpdate:$,lastBaseUpdate:W,shared:P.shared,callbacks:P.callbacks},g.updateQueue=_;return}g=_.lastBaseUpdate,g===null?_.firstBaseUpdate=y:g.next=y,_.lastBaseUpdate=y}var va=!1;function Of(){if(va){var g=Hc;if(g!==null)throw g}}function Bh(g,y,_,P){va=!1;var $=g.updateQueue;uc=!1;var W=$.firstBaseUpdate,le=$.lastBaseUpdate,ye=$.shared.pending;if(ye!==null){$.shared.pending=null;var Pe=ye,st=Pe.next;Pe.next=null,le===null?W=st:le.next=st,le=Pe;var wt=g.alternate;wt!==null&&(wt=wt.updateQueue,ye=wt.lastBaseUpdate,ye!==le&&(ye===null?wt.firstBaseUpdate=st:ye.next=st,wt.lastBaseUpdate=Pe))}if(W!==null){var kt=$.baseState;le=0,wt=st=Pe=null,ye=W;do{var dt=ye.lane&-536870913,bt=dt!==ye.lane;if(bt?(qr&dt)===dt:(P&dt)===dt){dt!==0&&dt===Td&&(va=!0),wt!==null&&(wt=wt.next={lane:0,tag:ye.tag,payload:ye.payload,callback:null,next:null});e:{var wn=g,er=ye;dt=y;var rs=_;switch(er.tag){case 1:if(wn=er.payload,typeof wn=="function"){kt=wn.call(rs,kt,dt);break e}kt=wn;break e;case 3:wn.flags=wn.flags&-65537|128;case 0:if(wn=er.payload,dt=typeof wn=="function"?wn.call(rs,kt,dt):wn,dt==null)break e;kt=h({},kt,dt);break e;case 2:uc=!0}}dt=ye.callback,dt!==null&&(g.flags|=64,bt&&(g.flags|=8192),bt=$.callbacks,bt===null?$.callbacks=[dt]:bt.push(dt))}else bt={lane:dt,tag:ye.tag,payload:ye.payload,callback:ye.callback,next:null},wt===null?(st=wt=bt,Pe=kt):wt=wt.next=bt,le|=dt;if(ye=ye.next,ye===null){if(ye=$.shared.pending,ye===null)break;bt=ye,ye=bt.next,bt.next=null,$.lastBaseUpdate=bt,$.shared.pending=null}}while(!0);wt===null&&(Pe=kt),$.baseState=Pe,$.firstBaseUpdate=st,$.lastBaseUpdate=wt,W===null&&($.shared.lanes=0),Ul|=le,g.lanes=le,g.memoizedState=kt}}function xa(g,y){if(typeof g!="function")throw Error(r(191,g));g.call(y)}function ba(g,y){var _=g.callbacks;if(_!==null)for(g.callbacks=null,g=0;g<_.length;g++)xa(_[g],y)}var mo=J(null),Gs=J(0);function fA(g,y){g=Ss,ee(Gs,g),ee(mo,y),Ss=g|y.baseLanes}function Wa(){ee(Gs,Ss),ee(mo,mo.current)}function ja(){Ss=Gs.current,Z(mo),Z(Gs)}var Ca=J(null),hc=null;function Th(g){var y=g.alternate;ee(Ts,Ts.current&1),ee(Ca,g),hc===null&&(y===null||mo.current!==null||y.memoizedState!==null)&&(hc=g)}function gm(g){ee(Ts,Ts.current),ee(Ca,g),hc===null&&(hc=g)}function iC(g){g.tag===22?(ee(Ts,Ts.current),ee(Ca,g),hc===null&&(hc=g)):Nl()}function Nl(){ee(Ts,Ts.current),ee(Ca,Ca.current)}function il(g){Z(Ca),hc===g&&(hc=null),Z(Ts)}var Ts=J(0);function pA(g){for(var y=g;y!==null;){if(y.tag===13){var _=y.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||bC(_)||$A(_)))return y}else if(y.tag===19&&(y.memoizedProps.revealOrder==="forwards"||y.memoizedProps.revealOrder==="backwards"||y.memoizedProps.revealOrder==="unstable_legacy-backwards"||y.memoizedProps.revealOrder==="together")){if((y.flags&128)!==0)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===g)break;for(;y.sibling===null;){if(y.return===null||y.return===g)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var Oa=0,tr=null,Gi=null,Ms=null,mm=!1,Mu=!1,zf=!1,gA=0,ag=0,fc=null,iS=0;function As(){throw Error(r(321))}function mA(g,y){if(y===null)return!1;for(var _=0;_<y.length&&_<g.length;_++)if(!Zr(g[_],y[_]))return!1;return!0}function AA(g,y,_,P,$,W){return Oa=W,tr=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,O.H=g===null||g.memoizedState===null?uC:Hf,zf=!1,W=_(P,$),zf=!1,Mu&&(W=Am(y,_,P,$)),Sv(g),W}function Sv(g){O.H=kh;var y=Gi!==null&&Gi.next!==null;if(Oa=0,Ms=Gi=tr=null,mm=!1,ag=0,fc=null,y)throw Error(r(300));g===null||Vi||(g=g.dependencies,g!==null&&tg(g)&&(Vi=!0))}function Am(g,y,_,P){tr=g;var $=0;do{if(Mu&&(fc=null),ag=0,Mu=!1,25<=$)throw Error(r(301));if($+=1,Ms=Gi=null,g.updateQueue!=null){var W=g.updateQueue;W.lastEffect=null,W.events=null,W.stores=null,W.memoCache!=null&&(W.memoCache.index=0)}O.H=Nh,W=y(_,P)}while(Mu);return W}function sS(){var g=O.H,y=g.useState()[0];return y=typeof y.then=="function"?og(y):y,g=g.useState()[0],(Gi!==null?Gi.memoizedState:null)!==g&&(tr.flags|=1024),y}function yA(){var g=gA!==0;return gA=0,g}function vA(g,y,_){y.updateQueue=g.updateQueue,y.flags&=-2053,g.lanes&=~_}function wv(g){if(mm){for(g=g.memoizedState;g!==null;){var y=g.queue;y!==null&&(y.pending=null),g=g.next}mm=!1}Oa=0,Ms=Gi=tr=null,Mu=!1,ag=gA=0,fc=null}function Ao(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ms===null?tr.memoizedState=Ms=g:Ms=Ms.next=g,Ms}function Vs(){if(Gi===null){var g=tr.alternate;g=g!==null?g.memoizedState:null}else g=Gi.next;var y=Ms===null?tr.memoizedState:Ms.next;if(y!==null)Ms=y,Gi=g;else{if(g===null)throw tr.alternate===null?Error(r(467)):Error(r(310));Gi=g,g={memoizedState:Gi.memoizedState,baseState:Gi.baseState,baseQueue:Gi.baseQueue,queue:Gi.queue,next:null},Ms===null?tr.memoizedState=Ms=g:Ms=Ms.next=g}return Ms}function $f(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function og(g){var y=ag;return ag+=1,fc===null&&(fc=[]),g=fm(fc,g,y),y=tr,(Ms===null?y.memoizedState:Ms.next)===null&&(y=y.alternate,O.H=y===null||y.memoizedState===null?uC:Hf),g}function lg(g){if(g!==null&&typeof g=="object"){if(typeof g.then=="function")return og(g);if(g.$$typeof===w)return Fa(g)}throw Error(r(438,String(g)))}function _v(g){var y=null,_=tr.updateQueue;if(_!==null&&(y=_.memoCache),y==null){var P=tr.alternate;P!==null&&(P=P.updateQueue,P!==null&&(P=P.memoCache,P!=null&&(y={data:P.data.map(function($){return $.slice()}),index:0})))}if(y==null&&(y={data:[],index:0}),_===null&&(_=$f(),tr.updateQueue=_),_.memoCache=y,_=y.data[y.index],_===void 0)for(_=y.data[y.index]=Array(g),P=0;P<g;P++)_[P]=L;return y.index++,_}function Wc(g,y){return typeof y=="function"?y(g):y}function _r(g){var y=Vs();return Iv(y,Gi,g)}function Iv(g,y,_){var P=g.queue;if(P===null)throw Error(r(311));P.lastRenderedReducer=_;var $=g.baseQueue,W=P.pending;if(W!==null){if($!==null){var le=$.next;$.next=W.next,W.next=le}y.baseQueue=$=W,P.pending=null}if(W=g.baseState,$===null)g.memoizedState=W;else{y=$.next;var ye=le=null,Pe=null,st=y,wt=!1;do{var kt=st.lane&-536870913;if(kt!==st.lane?(qr&kt)===kt:(Oa&kt)===kt){var dt=st.revertLane;if(dt===0)Pe!==null&&(Pe=Pe.next={lane:0,revertLane:0,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),kt===Td&&(wt=!0);else if((Oa&dt)===dt){st=st.next,dt===Td&&(wt=!0);continue}else kt={lane:0,revertLane:st.revertLane,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},Pe===null?(ye=Pe=kt,le=W):Pe=Pe.next=kt,tr.lanes|=dt,Ul|=dt;kt=st.action,zf&&_(W,kt),W=st.hasEagerState?st.eagerState:_(W,kt)}else dt={lane:kt,revertLane:st.revertLane,gesture:st.gesture,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},Pe===null?(ye=Pe=dt,le=W):Pe=Pe.next=dt,tr.lanes|=kt,Ul|=kt;st=st.next}while(st!==null&&st!==y);if(Pe===null?le=W:Pe.next=ye,!Zr(W,g.memoizedState)&&(Vi=!0,wt&&(_=Hc,_!==null)))throw _;g.memoizedState=W,g.baseState=le,g.baseQueue=Pe,P.lastRenderedState=W}return $===null&&(P.lanes=0),[g.memoizedState,P.dispatch]}function xA(g){var y=Vs(),_=y.queue;if(_===null)throw Error(r(311));_.lastRenderedReducer=g;var P=_.dispatch,$=_.pending,W=y.memoizedState;if($!==null){_.pending=null;var le=$=$.next;do W=g(W,le.action),le=le.next;while(le!==$);Zr(W,y.memoizedState)||(Vi=!0),y.memoizedState=W,y.baseQueue===null&&(y.baseState=W),_.lastRenderedState=W}return[W,P]}function Qf(g,y,_){var P=tr,$=Vs(),W=ei;if(W){if(_===void 0)throw Error(r(407));_=_()}else _=y();var le=!Zr((Gi||$).memoizedState,_);if(le&&($.memoizedState=_,Vi=!0),$=$.queue,xm(Mv.bind(null,P,$,g),[g]),$.getSnapshot!==y||le||Ms!==null&&Ms.memoizedState.tag&1){if(P.flags|=2048,Ll(9,{destroy:void 0},Tv.bind(null,P,$,_,y),null),Bi===null)throw Error(r(349));W||(Oa&127)!==0||Bv(P,y,_)}return _}function Bv(g,y,_){g.flags|=16384,g={getSnapshot:y,value:_},y=tr.updateQueue,y===null?(y=$f(),tr.updateQueue=y,y.stores=[g]):(_=y.stores,_===null?y.stores=[g]:_.push(g))}function Tv(g,y,_,P){y.value=_,y.getSnapshot=P,sl(y)&&bA(g)}function Mv(g,y,_){return _(function(){sl(y)&&bA(g)})}function sl(g){var y=g.getSnapshot;g=g.value;try{var _=y();return!Zr(g,_)}catch{return!0}}function bA(g){var y=Oc(g,2);y!==null&&S(y,g,2)}function Mh(g){var y=Ao();if(typeof g=="function"){var _=g;if(g=_(),zf){Vt(!0);try{_()}finally{Vt(!1)}}}return y.memoizedState=y.baseState=g,y.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wc,lastRenderedState:g},y}function CA(g,y,_,P){return g.baseState=_,Iv(g,Gi,typeof P=="function"?P:Wc)}function sC(g,y,_,P,$){if(Ru(g))throw Error(r(485));if(g=y.action,g!==null){var W={payload:$,action:g,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){W.listeners.push(le)}};O.T!==null?_(!0):W.isTransition=!1,P(W),_=y.pending,_===null?(W.next=y.pending=W,Dv(y,W)):(W.next=_.next,y.pending=_.next=W)}}function Dv(g,y){var _=y.action,P=y.payload,$=g.state;if(y.isTransition){var W=O.T,le={};O.T=le;try{var ye=_($,P),Pe=O.S;Pe!==null&&Pe(le,ye),al(g,y,ye)}catch(st){cg(g,y,st)}finally{W!==null&&le.types!==null&&(W.types=le.types),O.T=W}}else try{W=_($,P),al(g,y,W)}catch(st){cg(g,y,st)}}function al(g,y,_){_!==null&&typeof _=="object"&&typeof _.then=="function"?_.then(function(P){Du(g,y,P)},function(P){return cg(g,y,P)}):Du(g,y,_)}function Du(g,y,_){y.status="fulfilled",y.value=_,Rv(y),g.state=_,y=g.pending,y!==null&&(_=y.next,_===y?g.pending=null:(_=_.next,y.next=_,Dv(g,_)))}function cg(g,y,_){var P=g.pending;if(g.pending=null,P!==null){P=P.next;do y.status="rejected",y.reason=_,Rv(y),y=y.next;while(y!==P)}g.action=null}function Rv(g){g=g.listeners;for(var y=0;y<g.length;y++)(0,g[y])()}function ym(g,y){return y}function Pv(g,y){if(ei){var _=Bi.formState;if(_!==null){e:{var P=tr;if(ei){if(vi){t:{for(var $=vi,W=La;$.nodeType!==8;){if(!W){$=null;break t}if($=$u($.nextSibling),$===null){$=null;break t}}W=$.data,$=W==="F!"||W==="F"?$:null}if($){vi=$u($.nextSibling),P=$.data==="F!";break e}}Kr(P)}P=!1}P&&(y=_[0])}}return _=Ao(),_.memoizedState=_.baseState=y,P={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ym,lastRenderedState:y},_.queue=P,_=$v.bind(null,tr,P),P.dispatch=_,P=Mh(!1),W=Ph.bind(null,tr,!1,P.queue),P=Ao(),$={state:y,dispatch:null,action:g,pending:null},P.queue=$,_=sC.bind(null,tr,$,W,_),$.dispatch=_,P.memoizedState=g,[y,_,!1]}function EA(g){var y=Vs();return kv(y,Gi,g)}function kv(g,y,_){if(y=Iv(g,y,ym)[0],g=_r(Wc)[0],typeof y=="object"&&y!==null&&typeof y.then=="function")try{var P=og(y)}catch(le){throw le===Sh?cc:le}else P=y;y=Vs();var $=y.queue,W=$.dispatch;return _!==y.memoizedState&&(tr.flags|=2048,Ll(9,{destroy:void 0},Nv.bind(null,$,_),null)),[P,W,g]}function Nv(g,y){g.action=y}function SA(g){var y=Vs(),_=Gi;if(_!==null)return kv(y,_,g);Vs(),y=y.memoizedState,_=Vs();var P=_.queue.dispatch;return _.memoizedState=g,[y,P,!1]}function Ll(g,y,_,P){return g={tag:g,create:_,deps:P,inst:y,next:null},y=tr.updateQueue,y===null&&(y=$f(),tr.updateQueue=y),_=y.lastEffect,_===null?y.lastEffect=g.next=g:(P=_.next,_.next=g,g.next=P,y.lastEffect=g),g}function aC(){return Vs().memoizedState}function Kc(g,y,_,P){var $=Ao();tr.flags|=g,$.memoizedState=Ll(1|y,{destroy:void 0},_,P===void 0?null:P)}function vm(g,y,_,P){var $=Vs();P=P===void 0?null:P;var W=$.memoizedState.inst;Gi!==null&&P!==null&&mA(P,Gi.memoizedState.deps)?$.memoizedState=Ll(y,W,_,P):(tr.flags|=g,$.memoizedState=Ll(1|y,W,_,P))}function Lv(g,y){Kc(8390656,8,g,y)}function xm(g,y){vm(2048,8,g,y)}function oC(g){tr.flags|=4;var y=tr.updateQueue;if(y===null)y=$f(),tr.updateQueue=y,y.events=[g];else{var _=y.events;_===null?y.events=[g]:_.push(g)}}function lC(g){var y=Vs().memoizedState;return oC({ref:y,nextImpl:g}),function(){if((si&2)!==0)throw Error(r(440));return y.impl.apply(void 0,arguments)}}function cC(g,y){return vm(4,2,g,y)}function ol(g,y){return vm(4,4,g,y)}function wA(g,y){if(typeof y=="function"){g=g();var _=y(g);return function(){typeof _=="function"?_():y(null)}}if(y!=null)return g=g(),y.current=g,function(){y.current=null}}function _A(g,y,_){_=_!=null?_.concat([g]):null,vm(4,4,wA.bind(null,y,g),_)}function bm(){}function IA(g,y){var _=Vs();y=y===void 0?null:y;var P=_.memoizedState;return y!==null&&mA(y,P[1])?P[0]:(_.memoizedState=[g,y],g)}function yo(g,y){var _=Vs();y=y===void 0?null:y;var P=_.memoizedState;if(y!==null&&mA(y,P[1]))return P[0];if(P=g(),zf){Vt(!0);try{g()}finally{Vt(!1)}}return _.memoizedState=[P,y],P}function pc(g,y,_){return _===void 0||(Oa&1073741824)!==0&&(qr&261930)===0?g.memoizedState=y:(g.memoizedState=_,g=b(),tr.lanes|=g,Ul|=g,_)}function Fv(g,y,_,P){return Zr(_,y)?_:mo.current!==null?(g=pc(g,_,P),Zr(g,y)||(Vi=!0),g):(Oa&42)===0||(Oa&1073741824)!==0&&(qr&261930)===0?(Vi=!0,g.memoizedState=_):(g=b(),tr.lanes|=g,Ul|=g,y)}function jv(g,y,_,P,$){var W=H.p;H.p=W!==0&&8>W?W:8;var le=O.T,ye={};O.T=ye,Ph(g,!1,y,_);try{var Pe=$(),st=O.S;if(st!==null&&st(ye,Pe),Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var wt=Cv(Pe,P);Uf(g,y,wt,Go(g))}else Uf(g,y,P,Go(g))}catch(kt){Uf(g,y,{then:function(){},status:"rejected",reason:kt},Go())}finally{H.p=W,le!==null&&ye.types!==null&&(le.types=ye.types),O.T=le}}function BA(){}function Dh(g,y,_,P){if(g.tag!==5)throw Error(r(476));var $=Ov(g).queue;jv(g,$,y,K,_===null?BA:function(){return TA(g),_(P)})}function Ov(g){var y=g.memoizedState;if(y!==null)return y;y={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wc,lastRenderedState:K},next:null};var _={};return y.next={memoizedState:_,baseState:_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wc,lastRenderedState:_},next:null},g.memoizedState=y,g=g.alternate,g!==null&&(g.memoizedState=y),y}function TA(g){var y=Ov(g);y.next===null&&(y=g.alternate.memoizedState),Uf(g,y.next.queue,{},Go())}function zv(){return Fa(WA)}function za(){return Vs().memoizedState}function Rh(){return Vs().memoizedState}function Cm(g){for(var y=g.return;y!==null;){switch(y.tag){case 24:case 3:var _=Go();g=Tu(_);var P=dc(y,g,_);P!==null&&(S(P,y,_),Ih(P,y,_)),y={cache:Uc()},g.payload=y;return}y=y.return}}function aS(g,y,_){var P=Go();_={lane:P,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},Ru(g)?Pu(y,_):(_=Rf(g,y,_,P),_!==null&&(S(_,g,P),vo(_,y,P)))}function $v(g,y,_){var P=Go();Uf(g,y,_,P)}function Uf(g,y,_,P){var $={lane:P,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null};if(Ru(g))Pu(y,$);else{var W=g.alternate;if(g.lanes===0&&(W===null||W.lanes===0)&&(W=y.lastRenderedReducer,W!==null))try{var le=y.lastRenderedState,ye=W(le,_);if($.hasEagerState=!0,$.eagerState=ye,Zr(ye,le))return yh(g,y,$,0),Bi===null&&Oo(),!1}catch{}finally{}if(_=Rf(g,y,$,P),_!==null)return S(_,g,P),vo(_,y,P),!0}return!1}function Ph(g,y,_,P){if(P={lane:2,revertLane:nu(),gesture:null,action:P,hasEagerState:!1,eagerState:null,next:null},Ru(g)){if(y)throw Error(r(479))}else y=Rf(g,_,P,2),y!==null&&S(y,g,2)}function Ru(g){var y=g.alternate;return g===tr||y!==null&&y===tr}function Pu(g,y){Mu=mm=!0;var _=g.pending;_===null?y.next=y:(y.next=_.next,_.next=y),g.pending=y}function vo(g,y,_){if((_&4194048)!==0){var P=y.lanes;P&=g.pendingLanes,_|=P,y.lanes=_,tn(g,_)}}var kh={readContext:Fa,use:lg,useCallback:As,useContext:As,useEffect:As,useImperativeHandle:As,useLayoutEffect:As,useInsertionEffect:As,useMemo:As,useReducer:As,useRef:As,useState:As,useDebugValue:As,useDeferredValue:As,useTransition:As,useSyncExternalStore:As,useId:As,useHostTransitionStatus:As,useFormState:As,useActionState:As,useOptimistic:As,useMemoCache:As,useCacheRefresh:As};kh.useEffectEvent=As;var uC={readContext:Fa,use:lg,useCallback:function(g,y){return Ao().memoizedState=[g,y===void 0?null:y],g},useContext:Fa,useEffect:Lv,useImperativeHandle:function(g,y,_){_=_!=null?_.concat([g]):null,Kc(4194308,4,wA.bind(null,y,g),_)},useLayoutEffect:function(g,y){return Kc(4194308,4,g,y)},useInsertionEffect:function(g,y){Kc(4,2,g,y)},useMemo:function(g,y){var _=Ao();y=y===void 0?null:y;var P=g();if(zf){Vt(!0);try{g()}finally{Vt(!1)}}return _.memoizedState=[P,y],P},useReducer:function(g,y,_){var P=Ao();if(_!==void 0){var $=_(y);if(zf){Vt(!0);try{_(y)}finally{Vt(!1)}}}else $=y;return P.memoizedState=P.baseState=$,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:$},P.queue=g,g=g.dispatch=aS.bind(null,tr,g),[P.memoizedState,g]},useRef:function(g){var y=Ao();return g={current:g},y.memoizedState=g},useState:function(g){g=Mh(g);var y=g.queue,_=$v.bind(null,tr,y);return y.dispatch=_,[g.memoizedState,_]},useDebugValue:bm,useDeferredValue:function(g,y){var _=Ao();return pc(_,g,y)},useTransition:function(){var g=Mh(!1);return g=jv.bind(null,tr,g.queue,!0,!1),Ao().memoizedState=g,[!1,g]},useSyncExternalStore:function(g,y,_){var P=tr,$=Ao();if(ei){if(_===void 0)throw Error(r(407));_=_()}else{if(_=y(),Bi===null)throw Error(r(349));(qr&127)!==0||Bv(P,y,_)}$.memoizedState=_;var W={value:_,getSnapshot:y};return $.queue=W,Lv(Mv.bind(null,P,W,g),[g]),P.flags|=2048,Ll(9,{destroy:void 0},Tv.bind(null,P,W,_,y),null),_},useId:function(){var g=Ao(),y=Bi.identifierPrefix;if(ei){var _=ic,P=_u;_=(P&~(1<<32-qt(P)-1)).toString(32)+_,y="_"+y+"R_"+_,_=gA++,0<_&&(y+="H"+_.toString(32)),y+="_"}else _=iS++,y="_"+y+"r_"+_.toString(32)+"_";return g.memoizedState=y},useHostTransitionStatus:zv,useFormState:Pv,useActionState:Pv,useOptimistic:function(g){var y=Ao();y.memoizedState=y.baseState=g;var _={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return y.queue=_,y=Ph.bind(null,tr,!0,_),_.dispatch=y,[g,y]},useMemoCache:_v,useCacheRefresh:function(){return Ao().memoizedState=Cm.bind(null,tr)},useEffectEvent:function(g){var y=Ao(),_={impl:g};return y.memoizedState=_,function(){if((si&2)!==0)throw Error(r(440));return _.impl.apply(void 0,arguments)}}},Hf={readContext:Fa,use:lg,useCallback:IA,useContext:Fa,useEffect:xm,useImperativeHandle:_A,useInsertionEffect:cC,useLayoutEffect:ol,useMemo:yo,useReducer:_r,useRef:aC,useState:function(){return _r(Wc)},useDebugValue:bm,useDeferredValue:function(g,y){var _=Vs();return Fv(_,Gi.memoizedState,g,y)},useTransition:function(){var g=_r(Wc)[0],y=Vs().memoizedState;return[typeof g=="boolean"?g:og(g),y]},useSyncExternalStore:Qf,useId:za,useHostTransitionStatus:zv,useFormState:EA,useActionState:EA,useOptimistic:function(g,y){var _=Vs();return CA(_,Gi,g,y)},useMemoCache:_v,useCacheRefresh:Rh};Hf.useEffectEvent=lC;var Nh={readContext:Fa,use:lg,useCallback:IA,useContext:Fa,useEffect:xm,useImperativeHandle:_A,useInsertionEffect:cC,useLayoutEffect:ol,useMemo:yo,useReducer:xA,useRef:aC,useState:function(){return xA(Wc)},useDebugValue:bm,useDeferredValue:function(g,y){var _=Vs();return Gi===null?pc(_,g,y):Fv(_,Gi.memoizedState,g,y)},useTransition:function(){var g=xA(Wc)[0],y=Vs().memoizedState;return[typeof g=="boolean"?g:og(g),y]},useSyncExternalStore:Qf,useId:za,useHostTransitionStatus:zv,useFormState:SA,useActionState:SA,useOptimistic:function(g,y){var _=Vs();return Gi!==null?CA(_,Gi,g,y):(_.baseState=g,[g,_.queue.dispatch])},useMemoCache:_v,useCacheRefresh:Rh};Nh.useEffectEvent=lC;function Gf(g,y,_,P){y=g.memoizedState,_=_(P,y),_=_==null?y:h({},y,_),g.memoizedState=_,g.lanes===0&&(g.updateQueue.baseState=_)}var Vf={enqueueSetState:function(g,y,_){g=g._reactInternals;var P=Go(),$=Tu(P);$.payload=y,_!=null&&($.callback=_),y=dc(g,$,P),y!==null&&(S(y,g,P),Ih(y,g,P))},enqueueReplaceState:function(g,y,_){g=g._reactInternals;var P=Go(),$=Tu(P);$.tag=1,$.payload=y,_!=null&&($.callback=_),y=dc(g,$,P),y!==null&&(S(y,g,P),Ih(y,g,P))},enqueueForceUpdate:function(g,y){g=g._reactInternals;var _=Go(),P=Tu(_);P.tag=2,y!=null&&(P.callback=y),y=dc(g,P,_),y!==null&&(S(y,g,_),Ih(y,g,_))}};function dC(g,y,_,P,$,W,le){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(P,W,le):y.prototype&&y.prototype.isPureReactComponent?!Bf(_,P)||!Bf($,W):!0}function Qv(g,y,_,P){g=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(_,P),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(_,P),y.state!==g&&Vf.enqueueReplaceState(y,y.state,null)}function hs(g,y){var _=y;if("ref"in y){_={};for(var P in y)P!=="ref"&&(_[P]=y[P])}if(g=g.defaultProps){_===y&&(_=h({},_));for(var $ in g)_[$]===void 0&&(_[$]=g[$])}return _}function MA(g){Ah(g)}function Uv(g){console.error(g)}function DA(g){Ah(g)}function Em(g,y){try{var _=g.onUncaughtError;_(y.value,{componentStack:y.stack})}catch(P){setTimeout(function(){throw P})}}function hC(g,y,_){try{var P=g.onCaughtError;P(_.value,{componentStack:_.stack,errorBoundary:y.tag===1?y.stateNode:null})}catch($){setTimeout(function(){throw $})}}function Hv(g,y,_){return _=Tu(_),_.tag=3,_.payload={element:null},_.callback=function(){Em(g,y)},_}function ll(g){return g=Tu(g),g.tag=3,g}function xo(g,y,_,P){var $=_.type.getDerivedStateFromError;if(typeof $=="function"){var W=P.value;g.payload=function(){return $(W)},g.callback=function(){hC(y,_,P)}}var le=_.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(g.callback=function(){hC(y,_,P),typeof $!="function"&&(Ou===null?Ou=new Set([this]):Ou.add(this));var ye=P.stack;this.componentDidCatch(P.value,{componentStack:ye!==null?ye:""})})}function Qo(g,y,_,P,$){if(_.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){if(y=_.alternate,y!==null&&Ch(y,_,$,!0),_=Ca.current,_!==null){switch(_.tag){case 31:case 13:return hc===null?ur():_.alternate===null&&Ei===0&&(Ei=3),_.flags&=-257,_.flags|=65536,_.lanes=$,P===hm?_.flags|=16384:(y=_.updateQueue,y===null?_.updateQueue=new Set([P]):y.add(P),cS(g,P,$)),!1;case 22:return _.flags|=65536,P===hm?_.flags|=16384:(y=_.updateQueue,y===null?(y={transitions:null,markerInstances:null,retryQueue:new Set([P])},_.updateQueue=y):(_=y.retryQueue,_===null?y.retryQueue=new Set([P]):_.add(P)),cS(g,P,$)),!1}throw Error(r(435,_.tag))}return cS(g,P,$),ur(),!1}if(ei)return y=Ca.current,y!==null?((y.flags&65536)===0&&(y.flags|=256),y.flags|=65536,y.lanes=$,P!==oA&&(g=Error(r(422),{cause:P}),bh(zo(g,_)))):(P!==oA&&(y=Error(r(423),{cause:P}),bh(zo(y,_))),g=g.current.alternate,g.flags|=65536,$&=-$,g.lanes|=$,P=zo(P,_),$=Hv(g.stateNode,P,$),pm(g,$),Ei!==4&&(Ei=2)),!1;var W=Error(r(520),{cause:P});if(W=zo(W,_),eu===null?eu=[W]:eu.push(W),Ei!==4&&(Ei=2),y===null)return!0;P=zo(P,_),_=y;do{switch(_.tag){case 3:return _.flags|=65536,g=$&-$,_.lanes|=g,g=Hv(_.stateNode,P,g),pm(_,g),!1;case 1:if(y=_.type,W=_.stateNode,(_.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Ou===null||!Ou.has(W))))return _.flags|=65536,$&=-$,_.lanes|=$,$=ll($),xo($,g,_,P),pm(_,$),!1}_=_.return}while(_!==null);return!1}var ug=Error(r(461)),Vi=!1;function Yi(g,y,_,P){y.child=g===null?Ev(y,null,_,P):_h(y,g.child,_,P)}function zn(g,y,_,P,$){_=_.render;var W=y.ref;if("ref"in P){var le={};for(var ye in P)ye!=="ref"&&(le[ye]=P[ye])}else le=P;return Ff(y),P=AA(g,y,_,le,W,$),ye=yA(),g!==null&&!Vi?(vA(g,y,$),Ac(g,y,$)):(ei&&ye&&wd(y),y.flags|=1,Yi(g,y,P,$),y.child)}function Lh(g,y,_,P,$){if(g===null){var W=_.type;return typeof W=="function"&&!Qs(W)&&W.defaultProps===void 0&&_.compare===null?(y.tag=15,y.type=W,Uo(g,y,W,P,$)):(g=cm(_.type,null,P,y,y.mode,$),g.ref=y.ref,g.return=y,y.child=g)}if(W=g.child,!Dd(g,$)){var le=W.memoizedProps;if(_=_.compare,_=_!==null?_:Bf,_(le,P)&&g.ref===y.ref)return Ac(g,y,$)}return y.flags|=1,g=Ml(W,P),g.ref=y.ref,g.return=y,y.child=g}function Uo(g,y,_,P,$){if(g!==null){var W=g.memoizedProps;if(Bf(W,P)&&g.ref===y.ref)if(Vi=!1,y.pendingProps=P=W,Dd(g,$))(g.flags&131072)!==0&&(Vi=!0);else return y.lanes=g.lanes,Ac(g,y,$)}return Wf(g,y,_,P,$)}function Ea(g,y,_,P){var $=P.children,W=g!==null?g.memoizedState:null;if(g===null&&y.stateNode===null&&(y.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),P.mode==="hidden"){if((y.flags&128)!==0){if(W=W!==null?W.baseLanes|_:_,g!==null){for(P=y.child=g.child,$=0;P!==null;)$=$|P.lanes|P.childLanes,P=P.sibling;P=$&~W}else P=0,y.child=null;return gc(g,y,W,_,P)}if((_&536870912)!==0)y.memoizedState={baseLanes:0,cachePool:null},g!==null&&ng(y,W!==null?W.cachePool:null),W!==null?fA(y,W):Wa(),iC(y);else return P=y.lanes=536870912,gc(g,y,W!==null?W.baseLanes|_:_,_,P)}else W!==null?(ng(y,W.cachePool),fA(y,W),Nl(),y.memoizedState=null):(g!==null&&ng(y,null),Wa(),Nl());return Yi(g,y,$,_),y.child}function qc(g,y){return g!==null&&g.tag===22||y.stateNode!==null||(y.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.sibling}function gc(g,y,_,P,$){var W=Iu();return W=W===null?null:{parent:Nn._currentValue,pool:W},y.memoizedState={baseLanes:_,cachePool:W},g!==null&&ng(y,null),Wa(),iC(y),g!==null&&Ch(g,y,P,!0),y.childLanes=$,null}function Fl(g,y){return y=dg({mode:y.mode,children:y.children},g.mode),y.ref=g.ref,g.child=y,y.return=g,y}function ci(g,y,_){return _h(y,g.child,null,_),g=Fl(y,y.pendingProps),g.flags|=2,il(y),y.memoizedState=null,g}function Sm(g,y,_){var P=y.pendingProps,$=(y.flags&128)!==0;if(y.flags&=-129,g===null){if(ei){if(P.mode==="hidden")return g=Fl(y,P),y.lanes=536870912,qc(null,g);if(gm(y),(g=vi)?(g=u2(g,La),g=g!==null&&g.data==="&"?g:null,g!==null&&(y.memoizedState={dehydrated:g,treeContext:Qc!==null?{id:_u,overflow:ic}:null,retryLane:536870912,hydrationErrors:null},_=um(g),_.return=y,y.child=_,Hs=y,vi=null)):g=null,g===null)throw Kr(y);return y.lanes=536870912,null}return Fl(y,P)}var W=g.memoizedState;if(W!==null){var le=W.dehydrated;if(gm(y),$)if(y.flags&256)y.flags&=-257,y=ci(g,y,_);else if(y.memoizedState!==null)y.child=g.child,y.flags|=128,y=null;else throw Error(r(558));else if(Vi||Ch(g,y,_,!1),$=(_&g.childLanes)!==0,Vi||$){if(P=Bi,P!==null&&(le=cn(P,_),le!==0&&le!==W.retryLane))throw W.retryLane=le,Oc(g,le),S(P,g,le),ug;ur(),y=ci(g,y,_)}else g=W.treeContext,vi=$u(le.nextSibling),Hs=y,ei=!0,Id=null,La=!1,g!==null&&_d(y,g),y=Fl(y,P),y.flags|=4096;return y}return g=Ml(g.child,{mode:P.mode,children:P.children}),g.ref=y.ref,y.child=g,g.return=y,g}function Yc(g,y){var _=y.ref;if(_===null)g!==null&&g.ref!==null&&(y.flags|=4194816);else{if(typeof _!="function"&&typeof _!="object")throw Error(r(284));(g===null||g.ref!==_)&&(y.flags|=4194816)}}function Wf(g,y,_,P,$){return Ff(y),_=AA(g,y,_,P,void 0,$),P=yA(),g!==null&&!Vi?(vA(g,y,$),Ac(g,y,$)):(ei&&P&&wd(y),y.flags|=1,Yi(g,y,_,$),y.child)}function bo(g,y,_,P,$,W){return Ff(y),y.updateQueue=null,_=Am(y,P,_,$),Sv(g),P=yA(),g!==null&&!Vi?(vA(g,y,W),Ac(g,y,W)):(ei&&P&&wd(y),y.flags|=1,Yi(g,y,_,W),y.child)}function $a(g,y,_,P,$){if(Ff(y),y.stateNode===null){var W=zc,le=_.contextType;typeof le=="object"&&le!==null&&(W=Fa(le)),W=new _(P,W),y.memoizedState=W.state!==null&&W.state!==void 0?W.state:null,W.updater=Vf,y.stateNode=W,W._reactInternals=y,W=y.stateNode,W.props=P,W.state=y.memoizedState,W.refs={},Bu(y),le=_.contextType,W.context=typeof le=="object"&&le!==null?Fa(le):zc,W.state=y.memoizedState,le=_.getDerivedStateFromProps,typeof le=="function"&&(Gf(y,_,le,P),W.state=y.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof W.getSnapshotBeforeUpdate=="function"||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(le=W.state,typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount(),le!==W.state&&Vf.enqueueReplaceState(W,W.state,null),Bh(y,P,W,$),Of(),W.state=y.memoizedState),typeof W.componentDidMount=="function"&&(y.flags|=4194308),P=!0}else if(g===null){W=y.stateNode;var ye=y.memoizedProps,Pe=hs(_,ye);W.props=Pe;var st=W.context,wt=_.contextType;le=zc,typeof wt=="object"&&wt!==null&&(le=Fa(wt));var kt=_.getDerivedStateFromProps;wt=typeof kt=="function"||typeof W.getSnapshotBeforeUpdate=="function",ye=y.pendingProps!==ye,wt||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ye||st!==le)&&Qv(y,W,P,le),uc=!1;var dt=y.memoizedState;W.state=dt,Bh(y,P,W,$),Of(),st=y.memoizedState,ye||dt!==st||uc?(typeof kt=="function"&&(Gf(y,_,kt,P),st=y.memoizedState),(Pe=uc||dC(y,_,Pe,P,dt,st,le))?(wt||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(y.flags|=4194308)):(typeof W.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=P,y.memoizedState=st),W.props=P,W.state=st,W.context=le,P=Pe):(typeof W.componentDidMount=="function"&&(y.flags|=4194308),P=!1)}else{W=y.stateNode,hA(g,y),le=y.memoizedProps,wt=hs(_,le),W.props=wt,kt=y.pendingProps,dt=W.context,st=_.contextType,Pe=zc,typeof st=="object"&&st!==null&&(Pe=Fa(st)),ye=_.getDerivedStateFromProps,(st=typeof ye=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(le!==kt||dt!==Pe)&&Qv(y,W,P,Pe),uc=!1,dt=y.memoizedState,W.state=dt,Bh(y,P,W,$),Of();var bt=y.memoizedState;le!==kt||dt!==bt||uc||g!==null&&g.dependencies!==null&&tg(g.dependencies)?(typeof ye=="function"&&(Gf(y,_,ye,P),bt=y.memoizedState),(wt=uc||dC(y,_,wt,P,dt,bt,Pe)||g!==null&&g.dependencies!==null&&tg(g.dependencies))?(st||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(P,bt,Pe),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(P,bt,Pe)),typeof W.componentDidUpdate=="function"&&(y.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof W.componentDidUpdate!="function"||le===g.memoizedProps&&dt===g.memoizedState||(y.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||le===g.memoizedProps&&dt===g.memoizedState||(y.flags|=1024),y.memoizedProps=P,y.memoizedState=bt),W.props=P,W.state=bt,W.context=Pe,P=wt):(typeof W.componentDidUpdate!="function"||le===g.memoizedProps&&dt===g.memoizedState||(y.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||le===g.memoizedProps&&dt===g.memoizedState||(y.flags|=1024),P=!1)}return W=P,Yc(g,y),P=(y.flags&128)!==0,W||P?(W=y.stateNode,_=P&&typeof _.getDerivedStateFromError!="function"?null:W.render(),y.flags|=1,g!==null&&P?(y.child=_h(y,g.child,null,$),y.child=_h(y,null,_,$)):Yi(g,y,_,$),y.memoizedState=W.state,g=y.child):g=Ac(g,y,$),g}function ui(g,y,_,P){return Ae(),y.flags|=256,Yi(g,y,_,P),y.child}var jl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mc(g){return{baseLanes:g,cachePool:cA()}}function Ol(g,y,_){return g=g!==null?g.childLanes&~_:0,y&&(g|=ai),g}function Xi(g,y,_){var P=y.pendingProps,$=!1,W=(y.flags&128)!==0,le;if((le=W)||(le=g!==null&&g.memoizedState===null?!1:(Ts.current&2)!==0),le&&($=!0,y.flags&=-129),le=(y.flags&32)!==0,y.flags&=-33,g===null){if(ei){if($?Th(y):Nl(),(g=vi)?(g=u2(g,La),g=g!==null&&g.data!=="&"?g:null,g!==null&&(y.memoizedState={dehydrated:g,treeContext:Qc!==null?{id:_u,overflow:ic}:null,retryLane:536870912,hydrationErrors:null},_=um(g),_.return=y,y.child=_,Hs=y,vi=null)):g=null,g===null)throw Kr(y);return $A(g)?y.lanes=32:y.lanes=536870912,null}var ye=P.children;return P=P.fallback,$?(Nl(),$=y.mode,ye=dg({mode:"hidden",children:ye},$),P=Sd(P,$,_,null),ye.return=y,P.return=y,ye.sibling=P,y.child=ye,P=y.child,P.memoizedState=mc(_),P.childLanes=Ol(g,le,_),y.memoizedState=jl,qc(null,P)):(Th(y),ku(y,ye))}var Pe=g.memoizedState;if(Pe!==null&&(ye=Pe.dehydrated,ye!==null)){if(W)y.flags&256?(Th(y),y.flags&=-257,y=Fh(g,y,_)):y.memoizedState!==null?(Nl(),y.child=g.child,y.flags|=128,y=null):(Nl(),ye=P.fallback,$=y.mode,P=dg({mode:"visible",children:P.children},$),ye=Sd(ye,$,_,null),ye.flags|=2,P.return=y,ye.return=y,P.sibling=ye,y.child=P,_h(y,g.child,null,_),P=y.child,P.memoizedState=mc(_),P.childLanes=Ol(g,le,_),y.memoizedState=jl,y=qc(null,P));else if(Th(y),$A(ye)){if(le=ye.nextSibling&&ye.nextSibling.dataset,le)var st=le.dgst;le=st,P=Error(r(419)),P.stack="",P.digest=le,bh({value:P,source:null,stack:null}),y=Fh(g,y,_)}else if(Vi||Ch(g,y,_,!1),le=(_&g.childLanes)!==0,Vi||le){if(le=Bi,le!==null&&(P=cn(le,_),P!==0&&P!==Pe.retryLane))throw Pe.retryLane=P,Oc(g,P),S(le,g,P),ug;bC(ye)||ur(),y=Fh(g,y,_)}else bC(ye)?(y.flags|=192,y.child=g.child,y=null):(g=Pe.treeContext,vi=$u(ye.nextSibling),Hs=y,ei=!0,Id=null,La=!1,g!==null&&_d(y,g),y=ku(y,P.children),y.flags|=4096);return y}return $?(Nl(),ye=P.fallback,$=y.mode,Pe=g.child,st=Pe.sibling,P=Ml(Pe,{mode:"hidden",children:P.children}),P.subtreeFlags=Pe.subtreeFlags&65011712,st!==null?ye=Ml(st,ye):(ye=Sd(ye,$,_,null),ye.flags|=2),ye.return=y,P.return=y,P.sibling=ye,y.child=P,qc(null,P),P=y.child,ye=g.child.memoizedState,ye===null?ye=mc(_):($=ye.cachePool,$!==null?(Pe=Nn._currentValue,$=$.parent!==Pe?{parent:Pe,pool:Pe}:$):$=cA(),ye={baseLanes:ye.baseLanes|_,cachePool:$}),P.memoizedState=ye,P.childLanes=Ol(g,le,_),y.memoizedState=jl,qc(g.child,P)):(Th(y),_=g.child,g=_.sibling,_=Ml(_,{mode:"visible",children:P.children}),_.return=y,_.sibling=null,g!==null&&(le=y.deletions,le===null?(y.deletions=[g],y.flags|=16):le.push(g)),y.child=_,y.memoizedState=null,_)}function ku(g,y){return y=dg({mode:"visible",children:y},g.mode),y.return=g,g.child=y}function dg(g,y){return g=ya(22,g,null,y),g.lanes=0,g}function Fh(g,y,_){return _h(y,g.child,null,_),g=ku(y,y.pendingProps.children),g.flags|=2,y.memoizedState=null,g}function Kf(g,y,_){g.lanes|=y;var P=g.alternate;P!==null&&(P.lanes|=y),$o(g.return,y,_)}function wm(g,y,_,P,$,W){var le=g.memoizedState;le===null?g.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:P,tail:_,tailMode:$,treeForkCount:W}:(le.isBackwards=y,le.rendering=null,le.renderingStartTime=0,le.last=P,le.tail=_,le.tailMode=$,le.treeForkCount=W)}function Md(g,y,_){var P=y.pendingProps,$=P.revealOrder,W=P.tail;P=P.children;var le=Ts.current,ye=(le&2)!==0;if(ye?(le=le&1|2,y.flags|=128):le&=1,ee(Ts,le),Yi(g,y,P,_),P=ei?Us:0,!ye&&g!==null&&(g.flags&128)!==0)e:for(g=y.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&Kf(g,_,y);else if(g.tag===19)Kf(g,_,y);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===y)break e;for(;g.sibling===null;){if(g.return===null||g.return===y)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}switch($){case"forwards":for(_=y.child,$=null;_!==null;)g=_.alternate,g!==null&&pA(g)===null&&($=_),_=_.sibling;_=$,_===null?($=y.child,y.child=null):($=_.sibling,_.sibling=null),wm(y,!1,$,_,W,P);break;case"backwards":case"unstable_legacy-backwards":for(_=null,$=y.child,y.child=null;$!==null;){if(g=$.alternate,g!==null&&pA(g)===null){y.child=$;break}g=$.sibling,$.sibling=_,_=$,$=g}wm(y,!0,_,null,W,P);break;case"together":wm(y,!1,null,null,void 0,P);break;default:y.memoizedState=null}return y.child}function Ac(g,y,_){if(g!==null&&(y.dependencies=g.dependencies),Ul|=y.lanes,(_&y.childLanes)===0)if(g!==null){if(Ch(g,y,_,!1),(_&y.childLanes)===0)return null}else return null;if(g!==null&&y.child!==g.child)throw Error(r(153));if(y.child!==null){for(g=y.child,_=Ml(g,g.pendingProps),y.child=_,_.return=y;g.sibling!==null;)g=g.sibling,_=_.sibling=Ml(g,g.pendingProps),_.return=y;_.sibling=null}return y.child}function Dd(g,y){return(g.lanes&y)!==0?!0:(g=g.dependencies,!!(g!==null&&tg(g)))}function _m(g,y,_){switch(y.tag){case 3:fe(y,y.stateNode.containerInfo),Bd(y,Nn,g.memoizedState.cache),Ae();break;case 27:case 5:Be(y);break;case 4:fe(y,y.stateNode.containerInfo);break;case 10:Bd(y,y.type,y.memoizedProps.value);break;case 31:if(y.memoizedState!==null)return y.flags|=128,gm(y),null;break;case 13:var P=y.memoizedState;if(P!==null)return P.dehydrated!==null?(Th(y),y.flags|=128,null):(_&y.child.childLanes)!==0?Xi(g,y,_):(Th(y),g=Ac(g,y,_),g!==null?g.sibling:null);Th(y);break;case 19:var $=(g.flags&128)!==0;if(P=(_&y.childLanes)!==0,P||(Ch(g,y,_,!1),P=(_&y.childLanes)!==0),$){if(P)return Md(g,y,_);y.flags|=128}if($=y.memoizedState,$!==null&&($.rendering=null,$.tail=null,$.lastEffect=null),ee(Ts,Ts.current),P)break;return null;case 22:return y.lanes=0,Ea(g,y,_,y.pendingProps);case 24:Bd(y,Nn,g.memoizedState.cache)}return Ac(g,y,_)}function RA(g,y,_){if(g!==null)if(g.memoizedProps!==y.pendingProps)Vi=!0;else{if(!Dd(g,_)&&(y.flags&128)===0)return Vi=!1,_m(g,y,_);Vi=(g.flags&131072)!==0}else Vi=!1,ei&&(y.flags&1048576)!==0&&dm(y,Us,y.index);switch(y.lanes=0,y.tag){case 16:e:{var P=y.pendingProps;if(g=Gc(y.elementType),y.type=g,typeof g=="function")Qs(g)?(P=hs(g,P),y.tag=1,y=$a(null,y,g,P,_)):(y.tag=0,y=Wf(null,y,g,P,_));else{if(g!=null){var $=g.$$typeof;if($===B){y.tag=11,y=zn(null,y,g,P,_);break e}else if($===M){y.tag=14,y=Lh(null,y,g,P,_);break e}}throw y=V(g)||g,Error(r(306,y,""))}}return y;case 0:return Wf(g,y,y.type,y.pendingProps,_);case 1:return P=y.type,$=hs(P,y.pendingProps),$a(g,y,P,$,_);case 3:e:{if(fe(y,y.stateNode.containerInfo),g===null)throw Error(r(387));P=y.pendingProps;var W=y.memoizedState;$=W.element,hA(g,y),Bh(y,P,null,_);var le=y.memoizedState;if(P=le.cache,Bd(y,Nn,P),P!==W.cache&&lA(y,[Nn],_,!0),Of(),P=le.element,W.isDehydrated)if(W={element:P,isDehydrated:!1,cache:le.cache},y.updateQueue.baseState=W,y.memoizedState=W,y.flags&256){y=ui(g,y,P,_);break e}else if(P!==$){$=zo(Error(r(424)),y),bh($),y=ui(g,y,P,_);break e}else{switch(g=y.stateNode.containerInfo,g.nodeType){case 9:g=g.body;break;default:g=g.nodeName==="HTML"?g.ownerDocument.body:g}for(vi=$u(g.firstChild),Hs=y,ei=!0,Id=null,La=!0,_=Ev(y,null,P,_),y.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling}else{if(Ae(),P===$){y=Ac(g,y,_);break e}Yi(g,y,P,_)}y=y.child}return y;case 26:return Yc(g,y),g===null?(_=m2(y.type,null,y.pendingProps,null))?y.memoizedState=_:ei||(_=y.type,g=y.pendingProps,P=Zv(ae.current).createElement(_),P[Yn]=y,P[Ii]=g,Vo(P,_,g),nt(P),y.stateNode=P):y.memoizedState=m2(y.type,g.memoizedProps,y.pendingProps,g.memoizedState),null;case 27:return Be(y),g===null&&ei&&(P=y.stateNode=f2(y.type,y.pendingProps,ae.current),Hs=y,La=!0,$=vi,ar(y.type)?(bS=$,vi=$u(P.firstChild)):vi=$),Yi(g,y,y.pendingProps.children,_),Yc(g,y),g===null&&(y.flags|=4194304),y.child;case 5:return g===null&&ei&&(($=P=vi)&&(P=uD(P,y.type,y.pendingProps,La),P!==null?(y.stateNode=P,Hs=y,vi=$u(P.firstChild),La=!1,$=!0):$=!1),$||Kr(y)),Be(y),$=y.type,W=y.pendingProps,le=g!==null?g.memoizedProps:null,P=W.children,yg($,W)?P=null:le!==null&&yg($,le)&&(y.flags|=32),y.memoizedState!==null&&($=AA(g,y,sS,null,null,_),WA._currentValue=$),Yc(g,y),Yi(g,y,P,_),y.child;case 6:return g===null&&ei&&((g=_=vi)&&(_=Ki(_,y.pendingProps,La),_!==null?(y.stateNode=_,Hs=y,vi=null,g=!0):g=!1),g||Kr(y)),null;case 13:return Xi(g,y,_);case 4:return fe(y,y.stateNode.containerInfo),P=y.pendingProps,g===null?y.child=_h(y,null,P,_):Yi(g,y,P,_),y.child;case 11:return zn(g,y,y.type,y.pendingProps,_);case 7:return Yi(g,y,y.pendingProps,_),y.child;case 8:return Yi(g,y,y.pendingProps.children,_),y.child;case 12:return Yi(g,y,y.pendingProps.children,_),y.child;case 10:return P=y.pendingProps,Bd(y,y.type,P.value),Yi(g,y,P.children,_),y.child;case 9:return $=y.type._context,P=y.pendingProps.children,Ff(y),$=Fa($),P=P($),y.flags|=1,Yi(g,y,P,_),y.child;case 14:return Lh(g,y,y.type,y.pendingProps,_);case 15:return Uo(g,y,y.type,y.pendingProps,_);case 19:return Md(g,y,_);case 31:return Sm(g,y,_);case 22:return Ea(g,y,_,y.pendingProps);case 24:return Ff(y),P=Fa(Nn),g===null?($=Iu(),$===null&&($=Bi,W=Uc(),$.pooledCache=W,W.refCount++,W!==null&&($.pooledCacheLanes|=_),$=W),y.memoizedState={parent:P,cache:$},Bu(y),Bd(y,Nn,$)):((g.lanes&_)!==0&&(hA(g,y),Bh(y,null,null,_),Of()),$=g.memoizedState,W=y.memoizedState,$.parent!==P?($={parent:P,cache:P},y.memoizedState=$,y.lanes===0&&(y.memoizedState=y.updateQueue.baseState=$),Bd(y,Nn,P)):(P=W.cache,Bd(y,Nn,P),P!==$.cache&&lA(y,[Nn],_,!0))),Yi(g,y,y.pendingProps.children,_),y.child;case 29:throw y.pendingProps}throw Error(r(156,y.tag))}function cl(g){g.flags|=4}function jh(g,y,_,P,$){if((y=(g.mode&32)!==0)&&(y=!1),y){if(g.flags|=16777216,($&335544128)===$)if(g.stateNode.complete)g.flags|=8192;else if(Jt())g.flags|=8192;else throw Hn=hm,rg}else g.flags&=-16777217}function Nu(g,y){if(y.type!=="stylesheet"||(y.state.loading&4)!==0)g.flags&=-16777217;else if(g.flags|=16777216,!b2(y))if(Jt())g.flags|=8192;else throw Hn=hm,rg}function qf(g,y){y!==null&&(g.flags|=4),g.flags&16384&&(y=g.tag!==22?_t():536870912,g.lanes|=y,Hl|=y)}function Im(g,y){if(!ei)switch(g.tailMode){case"hidden":y=g.tail;for(var _=null;y!==null;)y.alternate!==null&&(_=y),y=y.sibling;_===null?g.tail=null:_.sibling=null;break;case"collapsed":_=g.tail;for(var P=null;_!==null;)_.alternate!==null&&(P=_),_=_.sibling;P===null?y||g.tail===null?g.tail=null:g.tail.sibling=null:P.sibling=null}}function xi(g){var y=g.alternate!==null&&g.alternate.child===g.child,_=0,P=0;if(y)for(var $=g.child;$!==null;)_|=$.lanes|$.childLanes,P|=$.subtreeFlags&65011712,P|=$.flags&65011712,$.return=g,$=$.sibling;else for($=g.child;$!==null;)_|=$.lanes|$.childLanes,P|=$.subtreeFlags,P|=$.flags,$.return=g,$=$.sibling;return g.subtreeFlags|=P,g.childLanes=_,y}function PA(g,y,_){var P=y.pendingProps;switch(sc(y),y.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xi(y),null;case 1:return xi(y),null;case 3:return _=y.stateNode,P=null,g!==null&&(P=g.memoizedState.cache),y.memoizedState.cache!==P&&(y.flags|=2048),ac(Nn),Ee(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(g===null||g.child===null)&&(vh(y)?cl(y):g===null||g.memoizedState.isDehydrated&&(y.flags&256)===0||(y.flags|=1024,xh())),xi(y),null;case 26:var $=y.type,W=y.memoizedState;return g===null?(cl(y),W!==null?(xi(y),Nu(y,W)):(xi(y),jh(y,$,null,P,_))):W?W!==g.memoizedState?(cl(y),xi(y),Nu(y,W)):(xi(y),y.flags&=-16777217):(g=g.memoizedProps,g!==P&&cl(y),xi(y),jh(y,$,g,P,_)),null;case 27:if(_e(y),_=ae.current,$=y.type,g!==null&&y.stateNode!=null)g.memoizedProps!==P&&cl(y);else{if(!P){if(y.stateNode===null)throw Error(r(166));return xi(y),null}g=te.current,vh(y)?Lf(y):(g=f2($,P,_),y.stateNode=g,cl(y))}return xi(y),null;case 5:if(_e(y),$=y.type,g!==null&&y.stateNode!=null)g.memoizedProps!==P&&cl(y);else{if(!P){if(y.stateNode===null)throw Error(r(166));return xi(y),null}if(W=te.current,vh(y))Lf(y);else{var le=Zv(ae.current);switch(W){case 1:W=le.createElementNS("http://www.w3.org/2000/svg",$);break;case 2:W=le.createElementNS("http://www.w3.org/1998/Math/MathML",$);break;default:switch($){case"svg":W=le.createElementNS("http://www.w3.org/2000/svg",$);break;case"math":W=le.createElementNS("http://www.w3.org/1998/Math/MathML",$);break;case"script":W=le.createElement("div"),W.innerHTML="<script><\/script>",W=W.removeChild(W.firstChild);break;case"select":W=typeof P.is=="string"?le.createElement("select",{is:P.is}):le.createElement("select"),P.multiple?W.multiple=!0:P.size&&(W.size=P.size);break;default:W=typeof P.is=="string"?le.createElement($,{is:P.is}):le.createElement($)}}W[Yn]=y,W[Ii]=P;e:for(le=y.child;le!==null;){if(le.tag===5||le.tag===6)W.appendChild(le.stateNode);else if(le.tag!==4&&le.tag!==27&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===y)break e;for(;le.sibling===null;){if(le.return===null||le.return===y)break e;le=le.return}le.sibling.return=le.return,le=le.sibling}y.stateNode=W;e:switch(Vo(W,$,P),$){case"button":case"input":case"select":case"textarea":P=!!P.autoFocus;break e;case"img":P=!0;break e;default:P=!1}P&&cl(y)}}return xi(y),jh(y,y.type,g===null?null:g.memoizedProps,y.pendingProps,_),null;case 6:if(g&&y.stateNode!=null)g.memoizedProps!==P&&cl(y);else{if(typeof P!="string"&&y.stateNode===null)throw Error(r(166));if(g=ae.current,vh(y)){if(g=y.stateNode,_=y.memoizedProps,P=null,$=Hs,$!==null)switch($.tag){case 27:case 5:P=$.memoizedProps}g[Yn]=y,g=!!(g.nodeValue===_||P!==null&&P.suppressHydrationWarning===!0||a2(g.nodeValue,_)),g||Kr(y,!0)}else g=Zv(g).createTextNode(P),g[Yn]=y,y.stateNode=g}return xi(y),null;case 31:if(_=y.memoizedState,g===null||g.memoizedState!==null){if(P=vh(y),_!==null){if(g===null){if(!P)throw Error(r(318));if(g=y.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(557));g[Yn]=y}else Ae(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;xi(y),g=!1}else _=xh(),g!==null&&g.memoizedState!==null&&(g.memoizedState.hydrationErrors=_),g=!0;if(!g)return y.flags&256?(il(y),y):(il(y),null);if((y.flags&128)!==0)throw Error(r(558))}return xi(y),null;case 13:if(P=y.memoizedState,g===null||g.memoizedState!==null&&g.memoizedState.dehydrated!==null){if($=vh(y),P!==null&&P.dehydrated!==null){if(g===null){if(!$)throw Error(r(318));if($=y.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(r(317));$[Yn]=y}else Ae(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;xi(y),$=!1}else $=xh(),g!==null&&g.memoizedState!==null&&(g.memoizedState.hydrationErrors=$),$=!0;if(!$)return y.flags&256?(il(y),y):(il(y),null)}return il(y),(y.flags&128)!==0?(y.lanes=_,y):(_=P!==null,g=g!==null&&g.memoizedState!==null,_&&(P=y.child,$=null,P.alternate!==null&&P.alternate.memoizedState!==null&&P.alternate.memoizedState.cachePool!==null&&($=P.alternate.memoizedState.cachePool.pool),W=null,P.memoizedState!==null&&P.memoizedState.cachePool!==null&&(W=P.memoizedState.cachePool.pool),W!==$&&(P.flags|=2048)),_!==g&&_&&(y.child.flags|=8192),qf(y,y.updateQueue),xi(y),null);case 4:return Ee(),g===null&&pS(y.stateNode.containerInfo),xi(y),null;case 10:return ac(y.type),xi(y),null;case 19:if(Z(Ts),P=y.memoizedState,P===null)return xi(y),null;if($=(y.flags&128)!==0,W=P.rendering,W===null)if($)Im(P,!1);else{if(Ei!==0||g!==null&&(g.flags&128)!==0)for(g=y.child;g!==null;){if(W=pA(g),W!==null){for(y.flags|=128,Im(P,!1),g=W.updateQueue,y.updateQueue=g,qf(y,g),y.subtreeFlags=0,g=_,_=y.child;_!==null;)ho(_,g),_=_.sibling;return ee(Ts,Ts.current&1|2),ei&&Pl(y,P.treeForkCount),y.child}g=g.sibling}P.tail!==null&&ue()>wo&&(y.flags|=128,$=!0,Im(P,!1),y.lanes=4194304)}else{if(!$)if(g=pA(W),g!==null){if(y.flags|=128,$=!0,g=g.updateQueue,y.updateQueue=g,qf(y,g),Im(P,!0),P.tail===null&&P.tailMode==="hidden"&&!W.alternate&&!ei)return xi(y),null}else 2*ue()-P.renderingStartTime>wo&&_!==536870912&&(y.flags|=128,$=!0,Im(P,!1),y.lanes=4194304);P.isBackwards?(W.sibling=y.child,y.child=W):(g=P.last,g!==null?g.sibling=W:y.child=W,P.last=W)}return P.tail!==null?(g=P.tail,P.rendering=g,P.tail=g.sibling,P.renderingStartTime=ue(),g.sibling=null,_=Ts.current,ee(Ts,$?_&1|2:_&1),ei&&Pl(y,P.treeForkCount),g):(xi(y),null);case 22:case 23:return il(y),ja(),P=y.memoizedState!==null,g!==null?g.memoizedState!==null!==P&&(y.flags|=8192):P&&(y.flags|=8192),P?(_&536870912)!==0&&(y.flags&128)===0&&(xi(y),y.subtreeFlags&6&&(y.flags|=8192)):xi(y),_=y.updateQueue,_!==null&&qf(y,_.retryQueue),_=null,g!==null&&g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(_=g.memoizedState.cachePool.pool),P=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(P=y.memoizedState.cachePool.pool),P!==_&&(y.flags|=2048),g!==null&&Z(Eh),null;case 24:return _=null,g!==null&&(_=g.memoizedState.cache),y.memoizedState.cache!==_&&(y.flags|=2048),ac(Nn),xi(y),null;case 25:return null;case 30:return null}throw Error(r(156,y.tag))}function Oh(g,y){switch(sc(y),y.tag){case 1:return g=y.flags,g&65536?(y.flags=g&-65537|128,y):null;case 3:return ac(Nn),Ee(),g=y.flags,(g&65536)!==0&&(g&128)===0?(y.flags=g&-65537|128,y):null;case 26:case 27:case 5:return _e(y),null;case 31:if(y.memoizedState!==null){if(il(y),y.alternate===null)throw Error(r(340));Ae()}return g=y.flags,g&65536?(y.flags=g&-65537|128,y):null;case 13:if(il(y),g=y.memoizedState,g!==null&&g.dehydrated!==null){if(y.alternate===null)throw Error(r(340));Ae()}return g=y.flags,g&65536?(y.flags=g&-65537|128,y):null;case 19:return Z(Ts),null;case 4:return Ee(),null;case 10:return ac(y.type),null;case 22:case 23:return il(y),ja(),g!==null&&Z(Eh),g=y.flags,g&65536?(y.flags=g&-65537|128,y):null;case 24:return ac(Nn),null;case 25:return null;default:return null}}function Rd(g,y){switch(sc(y),y.tag){case 3:ac(Nn),Ee();break;case 26:case 27:case 5:_e(y);break;case 4:Ee();break;case 31:y.memoizedState!==null&&il(y);break;case 13:il(y);break;case 19:Z(Ts);break;case 10:ac(y.type);break;case 22:case 23:il(y),ja(),g!==null&&Z(Eh);break;case 24:ac(Nn)}}function Xc(g,y){try{var _=y.updateQueue,P=_!==null?_.lastEffect:null;if(P!==null){var $=P.next;_=$;do{if((_.tag&g)===g){P=void 0;var W=_.create,le=_.inst;P=W(),le.destroy=P}_=_.next}while(_!==$)}}catch(ye){Ji(y,y.return,ye)}}function zl(g,y,_){try{var P=y.updateQueue,$=P!==null?P.lastEffect:null;if($!==null){var W=$.next;P=W;do{if((P.tag&g)===g){var le=P.inst,ye=le.destroy;if(ye!==void 0){le.destroy=void 0,$=y;var Pe=_,st=ye;try{st()}catch(wt){Ji($,Pe,wt)}}}P=P.next}while(P!==W)}}catch(wt){Ji(y,y.return,wt)}}function Jc(g){var y=g.updateQueue;if(y!==null){var _=g.stateNode;try{ba(y,_)}catch(P){Ji(g,g.return,P)}}}function kA(g,y,_){_.props=hs(g.type,g.memoizedProps),_.state=g.memoizedState;try{_.componentWillUnmount()}catch(P){Ji(g,y,P)}}function Sa(g,y){try{var _=g.ref;if(_!==null){switch(g.tag){case 26:case 27:case 5:var P=g.stateNode;break;case 30:P=g.stateNode;break;default:P=g.stateNode}typeof _=="function"?g.refCleanup=_(P):_.current=P}}catch($){Ji(g,y,$)}}function wa(g,y){var _=g.ref,P=g.refCleanup;if(_!==null)if(typeof P=="function")try{P()}catch($){Ji(g,y,$)}finally{g.refCleanup=null,g=g.alternate,g!=null&&(g.refCleanup=null)}else if(typeof _=="function")try{_(null)}catch($){Ji(g,y,$)}else _.current=null}function $l(g){var y=g.type,_=g.memoizedProps,P=g.stateNode;try{e:switch(y){case"button":case"input":case"select":case"textarea":_.autoFocus&&P.focus();break e;case"img":_.src?P.src=_.src:_.srcSet&&(P.srcset=_.srcSet)}}catch($){Ji(g,g.return,$)}}function Ql(g,y,_){try{var P=g.stateNode;oD(P,g.type,_,y),P[Ii]=y}catch($){Ji(g,g.return,$)}}function ta(g){return g.tag===5||g.tag===3||g.tag===26||g.tag===27&&ar(g.type)||g.tag===4}function Lu(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||ta(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.tag===27&&ar(g.type)||g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function Tr(g,y,_){var P=g.tag;if(P===5||P===6)g=g.stateNode,y?(_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_).insertBefore(g,y):(y=_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_,y.appendChild(g),_=_._reactRootContainer,_!=null||y.onclick!==null||(y.onclick=yu));else if(P!==4&&(P===27&&ar(g.type)&&(_=g.stateNode,y=null),g=g.child,g!==null))for(Tr(g,y,_),g=g.sibling;g!==null;)Tr(g,y,_),g=g.sibling}function bi(g,y,_){var P=g.tag;if(P===5||P===6)g=g.stateNode,y?_.insertBefore(g,y):_.appendChild(g);else if(P!==4&&(P===27&&ar(g.type)&&(_=g.stateNode),g=g.child,g!==null))for(bi(g,y,_),g=g.sibling;g!==null;)bi(g,y,_),g=g.sibling}function Ws(g){var y=g.stateNode,_=g.memoizedProps;try{for(var P=g.type,$=y.attributes;$.length;)y.removeAttributeNode($[0]);Vo(y,P,_),y[Yn]=g,y[Ii]=_}catch(W){Ji(g,g.return,W)}}var yc=!1,fs=!1,Pd=!1,Bm=typeof WeakSet=="function"?WeakSet:Set,Ds=null;function hg(g,y){if(g=g.containerInfo,Jv=BC,g=aA(g),Xp(g)){if("selectionStart"in g)var _={start:g.selectionStart,end:g.selectionEnd};else e:{_=(_=g.ownerDocument)&&_.defaultView||window;var P=_.getSelection&&_.getSelection();if(P&&P.rangeCount!==0){_=P.anchorNode;var $=P.anchorOffset,W=P.focusNode;P=P.focusOffset;try{_.nodeType,W.nodeType}catch{_=null;break e}var le=0,ye=-1,Pe=-1,st=0,wt=0,kt=g,dt=null;t:for(;;){for(var bt;kt!==_||$!==0&&kt.nodeType!==3||(ye=le+$),kt!==W||P!==0&&kt.nodeType!==3||(Pe=le+P),kt.nodeType===3&&(le+=kt.nodeValue.length),(bt=kt.firstChild)!==null;)dt=kt,kt=bt;for(;;){if(kt===g)break t;if(dt===_&&++st===$&&(ye=le),dt===W&&++wt===P&&(Pe=le),(bt=kt.nextSibling)!==null)break;kt=dt,dt=kt.parentNode}kt=bt}_=ye===-1||Pe===-1?null:{start:ye,end:Pe}}else _=null}_=_||{start:0,end:0}}else _=null;for(yS={focusedElem:g,selectionRange:_},BC=!1,Ds=y;Ds!==null;)if(y=Ds,g=y.child,(y.subtreeFlags&1028)!==0&&g!==null)g.return=y,Ds=g;else for(;Ds!==null;){switch(y=Ds,W=y.alternate,g=y.flags,y.tag){case 0:if((g&4)!==0&&(g=y.updateQueue,g=g!==null?g.events:null,g!==null))for(_=0;_<g.length;_++)$=g[_],$.ref.impl=$.nextImpl;break;case 11:case 15:break;case 1:if((g&1024)!==0&&W!==null){g=void 0,_=y,$=W.memoizedProps,W=W.memoizedState,P=_.stateNode;try{var wn=hs(_.type,$);g=P.getSnapshotBeforeUpdate(wn,W),P.__reactInternalSnapshotBeforeUpdate=g}catch(er){Ji(_,_.return,er)}}break;case 3:if((g&1024)!==0){if(g=y.stateNode.containerInfo,_=g.nodeType,_===9)xC(g);else if(_===1)switch(g.nodeName){case"HEAD":case"HTML":case"BODY":xC(g);break;default:g.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((g&1024)!==0)throw Error(r(163))}if(g=y.sibling,g!==null){g.return=y.return,Ds=g;break}Ds=y.return}}function Gv(g,y,_){var P=_.flags;switch(_.tag){case 0:case 11:case 15:kd(g,_),P&4&&Xc(5,_);break;case 1:if(kd(g,_),P&4)if(g=_.stateNode,y===null)try{g.componentDidMount()}catch(le){Ji(_,_.return,le)}else{var $=hs(_.type,y.memoizedProps);y=y.memoizedState;try{g.componentDidUpdate($,y,g.__reactInternalSnapshotBeforeUpdate)}catch(le){Ji(_,_.return,le)}}P&64&&Jc(_),P&512&&Sa(_,_.return);break;case 3:if(kd(g,_),P&64&&(g=_.updateQueue,g!==null)){if(y=null,_.child!==null)switch(_.child.tag){case 27:case 5:y=_.child.stateNode;break;case 1:y=_.child.stateNode}try{ba(g,y)}catch(le){Ji(_,_.return,le)}}break;case 27:y===null&&P&4&&Ws(_);case 26:case 5:kd(g,_),y===null&&P&4&&$l(_),P&512&&Sa(_,_.return);break;case 12:kd(g,_);break;case 31:kd(g,_),P&4&&Mm(g,_);break;case 13:kd(g,_),P&4&&Vv(g,_),P&64&&(g=_.memoizedState,g!==null&&(g=g.dehydrated,g!==null&&(_=gC.bind(null,_),dD(g,_))));break;case 22:if(P=_.memoizedState!==null||yc,!P){y=y!==null&&y.memoizedState!==null||fs,$=yc;var W=fs;yc=P,(fs=y)&&!W?Ci(g,_,(_.subtreeFlags&8772)!==0):kd(g,_),yc=$,fs=W}break;case 30:break;default:kd(g,_)}}function Tm(g){var y=g.alternate;y!==null&&(g.alternate=null,Tm(y)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(y=g.stateNode,y!==null&&ec(y)),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}var ii=null,na=!1;function Co(g,y,_){for(_=_.child;_!==null;)zh(g,y,_),_=_.sibling}function zh(g,y,_){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(at,_)}catch{}switch(_.tag){case 26:fs||wa(_,y),Co(g,y,_),_.memoizedState?_.memoizedState.count--:_.stateNode&&(_=_.stateNode,_.parentNode.removeChild(_));break;case 27:fs||wa(_,y);var P=ii,$=na;ar(_.type)&&(ii=_.stateNode,na=!1),Co(g,y,_),tx(_.stateNode),ii=P,na=$;break;case 5:fs||wa(_,y);case 6:if(P=ii,$=na,ii=null,Co(g,y,_),ii=P,na=$,ii!==null)if(na)try{(ii.nodeType===9?ii.body:ii.nodeName==="HTML"?ii.ownerDocument.body:ii).removeChild(_.stateNode)}catch(W){Ji(_,y,W)}else try{ii.removeChild(_.stateNode)}catch(W){Ji(_,y,W)}break;case 18:ii!==null&&(na?(g=ii,xS(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,_.stateNode),qA(g)):xS(ii,_.stateNode));break;case 4:P=ii,$=na,ii=_.stateNode.containerInfo,na=!0,Co(g,y,_),ii=P,na=$;break;case 0:case 11:case 14:case 15:zl(2,_,y),fs||zl(4,_,y),Co(g,y,_);break;case 1:fs||(wa(_,y),P=_.stateNode,typeof P.componentWillUnmount=="function"&&kA(_,y,P)),Co(g,y,_);break;case 21:Co(g,y,_);break;case 22:fs=(P=fs)||_.memoizedState!==null,Co(g,y,_),fs=P;break;default:Co(g,y,_)}}function Mm(g,y){if(y.memoizedState===null&&(g=y.alternate,g!==null&&(g=g.memoizedState,g!==null))){g=g.dehydrated;try{qA(g)}catch(_){Ji(y,y.return,_)}}}function Vv(g,y){if(y.memoizedState===null&&(g=y.alternate,g!==null&&(g=g.memoizedState,g!==null&&(g=g.dehydrated,g!==null))))try{qA(g)}catch(_){Ji(y,y.return,_)}}function fC(g){switch(g.tag){case 31:case 13:case 19:var y=g.stateNode;return y===null&&(y=g.stateNode=new Bm),y;case 22:return g=g.stateNode,y=g._retryCache,y===null&&(y=g._retryCache=new Bm),y;default:throw Error(r(435,g.tag))}}function Ks(g,y){var _=fC(g);y.forEach(function(P){if(!_.has(P)){_.add(P);var $=rD.bind(null,g,P);P.then($,$)}})}function Eo(g,y){var _=y.deletions;if(_!==null)for(var P=0;P<_.length;P++){var $=_[P],W=g,le=y,ye=le;e:for(;ye!==null;){switch(ye.tag){case 27:if(ar(ye.type)){ii=ye.stateNode,na=!1;break e}break;case 5:ii=ye.stateNode,na=!1;break e;case 3:case 4:ii=ye.stateNode.containerInfo,na=!0;break e}ye=ye.return}if(ii===null)throw Error(r(160));zh(W,le,$),ii=null,na=!1,W=$.alternate,W!==null&&(W.return=null),$.return=null}if(y.subtreeFlags&13886)for(y=y.child;y!==null;)$h(y,g),y=y.sibling}var ul=null;function $h(g,y){var _=g.alternate,P=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:Eo(y,g),di(g),P&4&&(zl(3,g,g.return),Xc(3,g),zl(5,g,g.return));break;case 1:Eo(y,g),di(g),P&512&&(fs||_===null||wa(_,_.return)),P&64&&yc&&(g=g.updateQueue,g!==null&&(P=g.callbacks,P!==null&&(_=g.shared.hiddenCallbacks,g.shared.hiddenCallbacks=_===null?P:_.concat(P))));break;case 26:var $=ul;if(Eo(y,g),di(g),P&512&&(fs||_===null||wa(_,_.return)),P&4){var W=_!==null?_.memoizedState:null;if(P=g.memoizedState,_===null)if(P===null)if(g.stateNode===null){e:{P=g.type,_=g.memoizedProps,$=$.ownerDocument||$;t:switch(P){case"title":W=$.getElementsByTagName("title")[0],(!W||W[Tl]||W[Yn]||W.namespaceURI==="http://www.w3.org/2000/svg"||W.hasAttribute("itemprop"))&&(W=$.createElement(P),$.head.insertBefore(W,$.querySelector("head > title"))),Vo(W,P,_),W[Yn]=g,nt(W),P=W;break e;case"link":var le=v2("link","href",$).get(P+(_.href||""));if(le){for(var ye=0;ye<le.length;ye++)if(W=le[ye],W.getAttribute("href")===(_.href==null||_.href===""?null:_.href)&&W.getAttribute("rel")===(_.rel==null?null:_.rel)&&W.getAttribute("title")===(_.title==null?null:_.title)&&W.getAttribute("crossorigin")===(_.crossOrigin==null?null:_.crossOrigin)){le.splice(ye,1);break t}}W=$.createElement(P),Vo(W,P,_),$.head.appendChild(W);break;case"meta":if(le=v2("meta","content",$).get(P+(_.content||""))){for(ye=0;ye<le.length;ye++)if(W=le[ye],W.getAttribute("content")===(_.content==null?null:""+_.content)&&W.getAttribute("name")===(_.name==null?null:_.name)&&W.getAttribute("property")===(_.property==null?null:_.property)&&W.getAttribute("http-equiv")===(_.httpEquiv==null?null:_.httpEquiv)&&W.getAttribute("charset")===(_.charSet==null?null:_.charSet)){le.splice(ye,1);break t}}W=$.createElement(P),Vo(W,P,_),$.head.appendChild(W);break;default:throw Error(r(468,P))}W[Yn]=g,nt(W),P=W}g.stateNode=P}else x2($,g.type,g.stateNode);else g.stateNode=y2($,P,g.memoizedProps);else W!==P?(W===null?_.stateNode!==null&&(_=_.stateNode,_.parentNode.removeChild(_)):W.count--,P===null?x2($,g.type,g.stateNode):y2($,P,g.memoizedProps)):P===null&&g.stateNode!==null&&Ql(g,g.memoizedProps,_.memoizedProps)}break;case 27:Eo(y,g),di(g),P&512&&(fs||_===null||wa(_,_.return)),_!==null&&P&4&&Ql(g,g.memoizedProps,_.memoizedProps);break;case 5:if(Eo(y,g),di(g),P&512&&(fs||_===null||wa(_,_.return)),g.flags&32){$=g.stateNode;try{Ui($,"")}catch(wn){Ji(g,g.return,wn)}}P&4&&g.stateNode!=null&&($=g.memoizedProps,Ql(g,$,_!==null?_.memoizedProps:$)),P&1024&&(Pd=!0);break;case 6:if(Eo(y,g),di(g),P&4){if(g.stateNode===null)throw Error(r(162));P=g.memoizedProps,_=g.stateNode;try{_.nodeValue=P}catch(wn){Ji(g,g.return,wn)}}break;case 3:if(nx=null,$=ul,ul=CC(y.containerInfo),Eo(y,g),ul=$,di(g),P&4&&_!==null&&_.memoizedState.isDehydrated)try{qA(y.containerInfo)}catch(wn){Ji(g,g.return,wn)}Pd&&(Pd=!1,pC(g));break;case 4:P=ul,ul=CC(g.stateNode.containerInfo),Eo(y,g),di(g),ul=P;break;case 12:Eo(y,g),di(g);break;case 31:Eo(y,g),di(g),P&4&&(P=g.updateQueue,P!==null&&(g.updateQueue=null,Ks(g,P)));break;case 13:Eo(y,g),di(g),g.child.flags&8192&&g.memoizedState!==null!=(_!==null&&_.memoizedState!==null)&&(ju=ue()),P&4&&(P=g.updateQueue,P!==null&&(g.updateQueue=null,Ks(g,P)));break;case 22:$=g.memoizedState!==null;var Pe=_!==null&&_.memoizedState!==null,st=yc,wt=fs;if(yc=st||$,fs=wt||Pe,Eo(y,g),fs=wt,yc=st,di(g),P&8192)e:for(y=g.stateNode,y._visibility=$?y._visibility&-2:y._visibility|1,$&&(_===null||Pe||yc||fs||Yf(g)),_=null,y=g;;){if(y.tag===5||y.tag===26){if(_===null){Pe=_=y;try{if(W=Pe.stateNode,$)le=W.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{ye=Pe.stateNode;var kt=Pe.memoizedProps.style,dt=kt!=null&&kt.hasOwnProperty("display")?kt.display:null;ye.style.display=dt==null||typeof dt=="boolean"?"":(""+dt).trim()}}catch(wn){Ji(Pe,Pe.return,wn)}}}else if(y.tag===6){if(_===null){Pe=y;try{Pe.stateNode.nodeValue=$?"":Pe.memoizedProps}catch(wn){Ji(Pe,Pe.return,wn)}}}else if(y.tag===18){if(_===null){Pe=y;try{var bt=Pe.stateNode;$?iu(bt,!0):iu(Pe.stateNode,!1)}catch(wn){Ji(Pe,Pe.return,wn)}}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===g)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===g)break e;for(;y.sibling===null;){if(y.return===null||y.return===g)break e;_===y&&(_=null),y=y.return}_===y&&(_=null),y.sibling.return=y.return,y=y.sibling}P&4&&(P=g.updateQueue,P!==null&&(_=P.retryQueue,_!==null&&(P.retryQueue=null,Ks(g,_))));break;case 19:Eo(y,g),di(g),P&4&&(P=g.updateQueue,P!==null&&(g.updateQueue=null,Ks(g,P)));break;case 30:break;case 21:break;default:Eo(y,g),di(g)}}function di(g){var y=g.flags;if(y&2){try{for(var _,P=g.return;P!==null;){if(ta(P)){_=P;break}P=P.return}if(_==null)throw Error(r(160));switch(_.tag){case 27:var $=_.stateNode,W=Lu(g);bi(g,W,$);break;case 5:var le=_.stateNode;_.flags&32&&(Ui(le,""),_.flags&=-33);var ye=Lu(g);bi(g,ye,le);break;case 3:case 4:var Pe=_.stateNode.containerInfo,st=Lu(g);Tr(g,st,Pe);break;default:throw Error(r(161))}}catch(wt){Ji(g,g.return,wt)}g.flags&=-3}y&4096&&(g.flags&=-4097)}function pC(g){if(g.subtreeFlags&1024)for(g=g.child;g!==null;){var y=g;pC(y),y.tag===5&&y.flags&1024&&y.stateNode.reset(),g=g.sibling}}function kd(g,y){if(y.subtreeFlags&8772)for(y=y.child;y!==null;)Gv(g,y.alternate,y),y=y.sibling}function Yf(g){for(g=g.child;g!==null;){var y=g;switch(y.tag){case 0:case 11:case 14:case 15:zl(4,y,y.return),Yf(y);break;case 1:wa(y,y.return);var _=y.stateNode;typeof _.componentWillUnmount=="function"&&kA(y,y.return,_),Yf(y);break;case 27:tx(y.stateNode);case 26:case 5:wa(y,y.return),Yf(y);break;case 22:y.memoizedState===null&&Yf(y);break;case 30:Yf(y);break;default:Yf(y)}g=g.sibling}}function Ci(g,y,_){for(_=_&&(y.subtreeFlags&8772)!==0,y=y.child;y!==null;){var P=y.alternate,$=g,W=y,le=W.flags;switch(W.tag){case 0:case 11:case 15:Ci($,W,_),Xc(4,W);break;case 1:if(Ci($,W,_),P=W,$=P.stateNode,typeof $.componentDidMount=="function")try{$.componentDidMount()}catch(st){Ji(P,P.return,st)}if(P=W,$=P.updateQueue,$!==null){var ye=P.stateNode;try{var Pe=$.shared.hiddenCallbacks;if(Pe!==null)for($.shared.hiddenCallbacks=null,$=0;$<Pe.length;$++)xa(Pe[$],ye)}catch(st){Ji(P,P.return,st)}}_&&le&64&&Jc(W),Sa(W,W.return);break;case 27:Ws(W);case 26:case 5:Ci($,W,_),_&&P===null&&le&4&&$l(W),Sa(W,W.return);break;case 12:Ci($,W,_);break;case 31:Ci($,W,_),_&&le&4&&Mm($,W);break;case 13:Ci($,W,_),_&&le&4&&Vv($,W);break;case 22:W.memoizedState===null&&Ci($,W,_),Sa(W,W.return);break;case 30:break;default:Ci($,W,_)}y=y.sibling}}function NA(g,y){var _=null;g!==null&&g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(_=g.memoizedState.cachePool.pool),g=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(g=y.memoizedState.cachePool.pool),g!==_&&(g!=null&&g.refCount++,_!=null&&Va(_))}function Nd(g,y){g=null,y.alternate!==null&&(g=y.alternate.memoizedState.cache),y=y.memoizedState.cache,y!==g&&(y.refCount++,g!=null&&Va(g))}function _a(g,y,_,P){if(y.subtreeFlags&10256)for(y=y.child;y!==null;)Es(g,y,_,P),y=y.sibling}function Es(g,y,_,P){var $=y.flags;switch(y.tag){case 0:case 11:case 15:_a(g,y,_,P),$&2048&&Xc(9,y);break;case 1:_a(g,y,_,P);break;case 3:_a(g,y,_,P),$&2048&&(g=null,y.alternate!==null&&(g=y.alternate.memoizedState.cache),y=y.memoizedState.cache,y!==g&&(y.refCount++,g!=null&&Va(g)));break;case 12:if($&2048){_a(g,y,_,P),g=y.stateNode;try{var W=y.memoizedProps,le=W.id,ye=W.onPostCommit;typeof ye=="function"&&ye(le,y.alternate===null?"mount":"update",g.passiveEffectDuration,-0)}catch(Pe){Ji(y,y.return,Pe)}}else _a(g,y,_,P);break;case 31:_a(g,y,_,P);break;case 13:_a(g,y,_,P);break;case 23:break;case 22:W=y.stateNode,le=y.alternate,y.memoizedState!==null?W._visibility&2?_a(g,y,_,P):fg(g,y):W._visibility&2?_a(g,y,_,P):(W._visibility|=2,Fu(g,y,_,P,(y.subtreeFlags&10256)!==0||!1)),$&2048&&NA(le,y);break;case 24:_a(g,y,_,P),$&2048&&Nd(y.alternate,y);break;default:_a(g,y,_,P)}}function Fu(g,y,_,P,$){for($=$&&((y.subtreeFlags&10256)!==0||!1),y=y.child;y!==null;){var W=g,le=y,ye=_,Pe=P,st=le.flags;switch(le.tag){case 0:case 11:case 15:Fu(W,le,ye,Pe,$),Xc(8,le);break;case 23:break;case 22:var wt=le.stateNode;le.memoizedState!==null?wt._visibility&2?Fu(W,le,ye,Pe,$):fg(W,le):(wt._visibility|=2,Fu(W,le,ye,Pe,$)),$&&st&2048&&NA(le.alternate,le);break;case 24:Fu(W,le,ye,Pe,$),$&&st&2048&&Nd(le.alternate,le);break;default:Fu(W,le,ye,Pe,$)}y=y.sibling}}function fg(g,y){if(y.subtreeFlags&10256)for(y=y.child;y!==null;){var _=g,P=y,$=P.flags;switch(P.tag){case 22:fg(_,P),$&2048&&NA(P.alternate,P);break;case 24:fg(_,P),$&2048&&Nd(P.alternate,P);break;default:fg(_,P)}y=y.sibling}}var Rs=8192;function Xf(g,y,_){if(g.subtreeFlags&Rs)for(g=g.child;g!==null;)qs(g,y,_),g=g.sibling}function qs(g,y,_){switch(g.tag){case 26:Xf(g,y,_),g.flags&Rs&&g.memoizedState!==null&&VA(_,ul,g.memoizedState,g.memoizedProps);break;case 5:Xf(g,y,_);break;case 3:case 4:var P=ul;ul=CC(g.stateNode.containerInfo),Xf(g,y,_),ul=P;break;case 22:g.memoizedState===null&&(P=g.alternate,P!==null&&P.memoizedState!==null?(P=Rs,Rs=16777216,Xf(g,y,_),Rs=P):Xf(g,y,_));break;default:Xf(g,y,_)}}function dl(g){var y=g.alternate;if(y!==null&&(g=y.child,g!==null)){y.child=null;do y=g.sibling,g.sibling=null,g=y;while(g!==null)}}function Ho(g){var y=g.deletions;if((g.flags&16)!==0){if(y!==null)for(var _=0;_<y.length;_++){var P=y[_];Ds=P,Dm(P,g)}dl(g)}if(g.subtreeFlags&10256)for(g=g.child;g!==null;)Jf(g),g=g.sibling}function Jf(g){switch(g.tag){case 0:case 11:case 15:Ho(g),g.flags&2048&&zl(9,g,g.return);break;case 3:Ho(g);break;case 12:Ho(g);break;case 22:var y=g.stateNode;g.memoizedState!==null&&y._visibility&2&&(g.return===null||g.return.tag!==13)?(y._visibility&=-3,LA(g)):Ho(g);break;default:Ho(g)}}function LA(g){var y=g.deletions;if((g.flags&16)!==0){if(y!==null)for(var _=0;_<y.length;_++){var P=y[_];Ds=P,Dm(P,g)}dl(g)}for(g=g.child;g!==null;){switch(y=g,y.tag){case 0:case 11:case 15:zl(8,y,y.return),LA(y);break;case 22:_=y.stateNode,_._visibility&2&&(_._visibility&=-3,LA(y));break;default:LA(y)}g=g.sibling}}function Dm(g,y){for(;Ds!==null;){var _=Ds;switch(_.tag){case 0:case 11:case 15:zl(8,_,y);break;case 23:case 22:if(_.memoizedState!==null&&_.memoizedState.cachePool!==null){var P=_.memoizedState.cachePool.pool;P!=null&&P.refCount++}break;case 24:Va(_.memoizedState.cache)}if(P=_.child,P!==null)P.return=_,Ds=P;else e:for(_=g;Ds!==null;){P=Ds;var $=P.sibling,W=P.return;if(Tm(P),P===_){Ds=null;break e}if($!==null){$.return=W,Ds=$;break e}Ds=W}}}var FA={getCacheForType:function(g){var y=Fa(Nn),_=y.data.get(g);return _===void 0&&(_=g(),y.data.set(g,_)),_},cacheSignal:function(){return Fa(Nn).controller.signal}},jA=typeof WeakMap=="function"?WeakMap:Map,si=0,Bi=null,Mr=null,qr=0,Ln=0,jr=null,Ar=!1,Rr=!1,Wi=!1,Ss=0,Ei=0,Ul=0,Ld=0,Zc=0,ai=0,Hl=0,eu=null,So=null,hl=!1,ju=0,pg=0,wo=1/0,gg=null,Ou=null,ws=0,tu=null,Gl=null,vc=0,Fd=0,Zf=null,OA=null,ep=0,tp=null;function Go(){return(si&2)!==0&&qr!==0?qr&-qr:O.T!==null?nu():zr()}function b(){if(ai===0)if((qr&536870912)===0||ei){var g=Qt;Qt<<=1,(Qt&3932160)===0&&(Qt=262144),ai=g}else ai=536870912;return g=Ca.current,g!==null&&(g.flags|=32),ai}function S(g,y,_){(g===Bi&&(Ln===2||Ln===9)||g.cancelPendingCommit!==null)&&(Ze(g,0),ie(g,qr,ai,!1)),zt(g,_),((si&2)===0||g!==Bi)&&(g===Bi&&((si&2)===0&&(Ld|=_),Ei===4&&ie(g,qr,ai,!1)),Qh(g))}function j(g,y,_){if((si&6)!==0)throw Error(r(327));var P=!_&&(y&127)===0&&(y&g.expiredLanes)===0||ln(g,y),$=P?np(g,y):fl(g,y,!0),W=P;do{if($===0){Rr&&!P&&ie(g,y,0,!1);break}else{if(_=g.current.alternate,W&&!Y(_)){$=fl(g,y,!1),W=!1;continue}if($===2){if(W=y,g.errorRecoveryDisabledLanes&W)var le=0;else le=g.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){y=le;e:{var ye=g;$=eu;var Pe=ye.current.memoizedState.isDehydrated;if(Pe&&(Ze(ye,le).flags|=256),le=fl(ye,le,!1),le!==2){if(Wi&&!Pe){ye.errorRecoveryDisabledLanes|=W,Ld|=W,$=4;break e}W=So,So=$,W!==null&&(So===null?So=W:So.push.apply(So,W))}$=le}if(W=!1,$!==2)continue}}if($===1){Ze(g,0),ie(g,y,0,!0);break}e:{switch(P=g,W=$,W){case 0:case 1:throw Error(r(345));case 4:if((y&4194048)!==y)break;case 6:ie(P,y,ai,!Ar);break e;case 2:So=null;break;case 3:case 5:break;default:throw Error(r(329))}if((y&62914560)===y&&($=ju+300-ue(),10<$)){if(ie(P,y,ai,!Ar),Ct(P,0,!0)!==0)break e;vc=y,P.timeoutHandle=o2(Q.bind(null,P,_,So,gg,hl,y,ai,Ld,Hl,Ar,W,"Throttled",-0,0),$);break e}Q(P,_,So,gg,hl,y,ai,Ld,Hl,Ar,W,null,-0,0)}}break}while(!0);Qh(g)}function Q(g,y,_,P,$,W,le,ye,Pe,st,wt,kt,dt,bt){if(g.timeoutHandle=-1,kt=y.subtreeFlags,kt&8192||(kt&16785408)===16785408){kt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:yu},qs(y,W,kt);var wn=(W&62914560)===W?ju-ue():(W&4194048)===W?pg-ue():0;if(wn=xD(kt,wn),wn!==null){vc=W,g.cancelPendingCommit=wn(nr.bind(null,g,y,W,_,P,$,le,ye,Pe,wt,kt,null,dt,bt)),ie(g,W,le,!st);return}}nr(g,y,W,_,P,$,le,ye,Pe)}function Y(g){for(var y=g;;){var _=y.tag;if((_===0||_===11||_===15)&&y.flags&16384&&(_=y.updateQueue,_!==null&&(_=_.stores,_!==null)))for(var P=0;P<_.length;P++){var $=_[P],W=$.getSnapshot;$=$.value;try{if(!Zr(W(),$))return!1}catch{return!1}}if(_=y.child,y.subtreeFlags&16384&&_!==null)_.return=y,y=_;else{if(y===g)break;for(;y.sibling===null;){if(y.return===null||y.return===g)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function ie(g,y,_,P){y&=~Zc,y&=~Ld,g.suspendedLanes|=y,g.pingedLanes&=~y,P&&(g.warmLanes|=y),P=g.expirationTimes;for(var $=y;0<$;){var W=31-qt($),le=1<<W;P[W]=-1,$&=~le}_!==0&&In(g,_,y)}function xe(){return(si&6)===0?(Kv(0),!1):!0}function Re(){if(Mr!==null){if(Ln===0)var g=Mr.return;else g=Mr,fo=mr=null,wv(g),wh=null,po=0,g=Mr;for(;g!==null;)Rd(g.alternate,g),g=g.return;Mr=null}}function Ze(g,y){var _=g.timeoutHandle;_!==-1&&(g.timeoutHandle=-1,cD(_)),_=g.cancelPendingCommit,_!==null&&(g.cancelPendingCommit=null,_()),vc=0,Re(),Bi=g,Mr=_=Ml(g.current,null),qr=y,Ln=0,jr=null,Ar=!1,Rr=ln(g,y),Wi=!1,Hl=ai=Zc=Ld=Ul=Ei=0,So=eu=null,hl=!1,(y&8)!==0&&(y|=y&32);var P=g.entangledLanes;if(P!==0)for(g=g.entanglements,P&=y;0<P;){var $=31-qt(P),W=1<<$;y|=g[$],P&=~W}return Ss=y,Oo(),_}function Mt(g,y){tr=null,O.H=kh,y===Sh||y===cc?(y=uA(),Ln=3):y===rg?(y=uA(),Ln=4):Ln=y===ug?8:y!==null&&typeof y=="object"&&typeof y.then=="function"?6:1,jr=y,Mr===null&&(Ei=1,Em(g,zo(y,g.current)))}function Jt(){var g=Ca.current;return g===null?!0:(qr&4194048)===qr?hc===null:(qr&62914560)===qr||(qr&536870912)!==0?g===hc:!1}function hn(){var g=O.H;return O.H=kh,g===null?kh:g}function An(){var g=O.A;return O.A=FA,g}function ur(){Ei=4,Ar||(qr&4194048)!==qr&&Ca.current!==null||(Rr=!0),(Ul&134217727)===0&&(Ld&134217727)===0||Bi===null||ie(Bi,qr,ai,!1)}function fl(g,y,_){var P=si;si|=2;var $=hn(),W=An();(Bi!==g||qr!==y)&&(gg=null,Ze(g,y)),y=!1;var le=Ei;e:do try{if(Ln!==0&&Mr!==null){var ye=Mr,Pe=jr;switch(Ln){case 8:Re(),le=6;break e;case 3:case 2:case 9:case 6:Ca.current===null&&(y=!0);var st=Ln;if(Ln=0,jr=null,Gt(g,ye,Pe,st),_&&Rr){le=0;break e}break;default:st=Ln,Ln=0,jr=null,Gt(g,ye,Pe,st)}}Rm(),le=Ei;break}catch(wt){Mt(g,wt)}while(!0);return y&&g.shellSuspendCounter++,fo=mr=null,si=P,O.H=$,O.A=W,Mr===null&&(Bi=null,qr=0,Oo()),le}function Rm(){for(;Mr!==null;)Xe(Mr)}function np(g,y){var _=si;si|=2;var P=hn(),$=An();Bi!==g||qr!==y?(gg=null,wo=ue()+500,Ze(g,y)):Rr=ln(g,y);e:do try{if(Ln!==0&&Mr!==null){y=Mr;var W=jr;t:switch(Ln){case 1:Ln=0,jr=null,Gt(g,y,W,1);break;case 2:case 9:if(rC(W)){Ln=0,jr=null,At(y);break}y=function(){Ln!==2&&Ln!==9||Bi!==g||(Ln=7),Qh(g)},W.then(y,y);break e;case 3:Ln=7;break e;case 4:Ln=5;break e;case 7:rC(W)?(Ln=0,jr=null,At(y)):(Ln=0,jr=null,Gt(g,y,W,7));break;case 5:var le=null;switch(Mr.tag){case 26:le=Mr.memoizedState;case 5:case 27:var ye=Mr;if(le?b2(le):ye.stateNode.complete){Ln=0,jr=null;var Pe=ye.sibling;if(Pe!==null)Mr=Pe;else{var st=ye.return;st!==null?(Mr=st,Pn(st)):Mr=null}break t}}Ln=0,jr=null,Gt(g,y,W,5);break;case 6:Ln=0,jr=null,Gt(g,y,W,6);break;case 8:Re(),Ei=6;break e;default:throw Error(r(462))}}ut();break}catch(wt){Mt(g,wt)}while(!0);return fo=mr=null,O.H=P,O.A=$,si=_,Mr!==null?0:(Bi=null,qr=0,Oo(),Ei)}function ut(){for(;Mr!==null&&!xt();)Xe(Mr)}function Xe(g){var y=RA(g.alternate,g,Ss);g.memoizedProps=g.pendingProps,y===null?Pn(g):Mr=y}function At(g){var y=g,_=y.alternate;switch(y.tag){case 15:case 0:y=bo(_,y,y.pendingProps,y.type,void 0,qr);break;case 11:y=bo(_,y,y.pendingProps,y.type.render,y.ref,qr);break;case 5:wv(y);default:Rd(_,y),y=Mr=ho(y,Ss),y=RA(_,y,Ss)}g.memoizedProps=g.pendingProps,y===null?Pn(g):Mr=y}function Gt(g,y,_,P){fo=mr=null,wv(y),wh=null,po=0;var $=y.return;try{if(Qo(g,$,y,_,qr)){Ei=1,Em(g,zo(_,g.current)),Mr=null;return}}catch(W){if($!==null)throw Mr=$,W;Ei=1,Em(g,zo(_,g.current)),Mr=null;return}y.flags&32768?(ei||P===1?g=!0:Rr||(qr&536870912)!==0?g=!1:(Ar=g=!0,(P===2||P===9||P===3||P===6)&&(P=Ca.current,P!==null&&P.tag===13&&(P.flags|=16384))),Ni(y,g)):Pn(y)}function Pn(g){var y=g;do{if((y.flags&32768)!==0){Ni(y,Ar);return}g=y.return;var _=PA(y.alternate,y,Ss);if(_!==null){Mr=_;return}if(y=y.sibling,y!==null){Mr=y;return}Mr=y=g}while(y!==null);Ei===0&&(Ei=5)}function Ni(g,y){do{var _=Oh(g.alternate,g);if(_!==null){_.flags&=32767,Mr=_;return}if(_=g.return,_!==null&&(_.flags|=32768,_.subtreeFlags=0,_.deletions=null),!y&&(g=g.sibling,g!==null)){Mr=g;return}Mr=g=_}while(g!==null);Ei=6,Mr=null}function nr(g,y,_,P,$,W,le,ye,Pe){g.cancelPendingCommit=null;do Pm();while(ws!==0);if((si&6)!==0)throw Error(r(327));if(y!==null){if(y===g.current)throw Error(r(177));if(W=y.lanes|y.childLanes,W|=Df,Wn(g,_,W,le,ye,Pe),g===Bi&&(Mr=Bi=null,qr=0),Gl=y,tu=g,vc=_,Fd=W,Zf=$,OA=P,(y.subtreeFlags&10256)!==0||(y.flags&10256)!==0?(g.callbackNode=null,g.callbackPriority=0,iD(Ke,function(){return oS(),null})):(g.callbackNode=null,g.callbackPriority=0),P=(y.flags&13878)!==0,(y.subtreeFlags&13878)!==0||P){P=O.T,O.T=null,$=H.p,H.p=2,le=si,si|=4;try{hg(g,y,_)}finally{si=le,H.p=$,O.T=P}}ws=1,oi(),ra(),ti()}}function oi(){if(ws===1){ws=0;var g=tu,y=Gl,_=(y.flags&13878)!==0;if((y.subtreeFlags&13878)!==0||_){_=O.T,O.T=null;var P=H.p;H.p=2;var $=si;si|=4;try{$h(y,g);var W=yS,le=aA(g.containerInfo),ye=W.focusedElem,Pe=W.selectionRange;if(le!==ye&&ye&&ye.ownerDocument&&sA(ye.ownerDocument.documentElement,ye)){if(Pe!==null&&Xp(ye)){var st=Pe.start,wt=Pe.end;if(wt===void 0&&(wt=st),"selectionStart"in ye)ye.selectionStart=st,ye.selectionEnd=Math.min(wt,ye.value.length);else{var kt=ye.ownerDocument||document,dt=kt&&kt.defaultView||window;if(dt.getSelection){var bt=dt.getSelection(),wn=ye.textContent.length,er=Math.min(Pe.start,wn),rs=Pe.end===void 0?er:Math.min(Pe.end,wn);!bt.extend&&er>rs&&(le=rs,rs=er,er=le);var Je=gv(ye,er),ze=gv(ye,rs);if(Je&&ze&&(bt.rangeCount!==1||bt.anchorNode!==Je.node||bt.anchorOffset!==Je.offset||bt.focusNode!==ze.node||bt.focusOffset!==ze.offset)){var it=kt.createRange();it.setStart(Je.node,Je.offset),bt.removeAllRanges(),er>rs?(bt.addRange(it),bt.extend(ze.node,ze.offset)):(it.setEnd(ze.node,ze.offset),bt.addRange(it))}}}}for(kt=[],bt=ye;bt=bt.parentNode;)bt.nodeType===1&&kt.push({element:bt,left:bt.scrollLeft,top:bt.scrollTop});for(typeof ye.focus=="function"&&ye.focus(),ye=0;ye<kt.length;ye++){var Rt=kt[ye];Rt.element.scrollLeft=Rt.left,Rt.element.scrollTop=Rt.top}}BC=!!Jv,yS=Jv=null}finally{si=$,H.p=P,O.T=_}}g.current=y,ws=2}}function ra(){if(ws===2){ws=0;var g=tu,y=Gl,_=(y.flags&8772)!==0;if((y.subtreeFlags&8772)!==0||_){_=O.T,O.T=null;var P=H.p;H.p=2;var $=si;si|=4;try{Gv(g,y.alternate,y)}finally{si=$,H.p=P,O.T=_}}ws=3}}function ti(){if(ws===4||ws===3){ws=0,ve();var g=tu,y=Gl,_=vc,P=OA;(y.subtreeFlags&10256)!==0||(y.flags&10256)!==0?ws=5:(ws=0,Gl=tu=null,zu(g,g.pendingLanes));var $=g.pendingLanes;if($===0&&(Ou=null),pr(_),y=y.stateNode,pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(at,y,void 0,(y.current.flags&128)===128)}catch{}if(P!==null){y=O.T,$=H.p,H.p=2,O.T=null;try{for(var W=g.onRecoverableError,le=0;le<P.length;le++){var ye=P[le];W(ye.value,{componentStack:ye.stack})}}finally{O.T=y,H.p=$}}(vc&3)!==0&&Pm(),Qh(g),$=g.pendingLanes,(_&261930)!==0&&($&42)!==0?g===tp?ep++:(ep=0,tp=g):ep=0,Kv(0)}}function zu(g,y){(g.pooledCacheLanes&=y)===0&&(y=g.pooledCache,y!=null&&(g.pooledCache=null,Va(y)))}function Pm(){return oi(),ra(),ti(),oS()}function oS(){if(ws!==5)return!1;var g=tu,y=Fd;Fd=0;var _=pr(vc),P=O.T,$=H.p;try{H.p=32>_?32:_,O.T=null,_=Zf,Zf=null;var W=tu,le=vc;if(ws=0,Gl=tu=null,vc=0,(si&6)!==0)throw Error(r(331));var ye=si;if(si|=4,Jf(W.current),Es(W,W.current,le,_),si=ye,Kv(0,!1),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(at,W)}catch{}return!0}finally{H.p=$,O.T=P,zu(g,y)}}function lS(g,y,_){y=zo(_,y),y=Hv(g.stateNode,y,2),g=dc(g,y,2),g!==null&&(zt(g,2),Qh(g))}function Ji(g,y,_){if(g.tag===3)lS(g,g,_);else for(;y!==null;){if(y.tag===3){lS(y,g,_);break}else if(y.tag===1){var P=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(Ou===null||!Ou.has(P))){g=zo(_,g),_=ll(2),P=dc(y,_,2),P!==null&&(xo(_,P,y,g),zt(P,2),Qh(P));break}}y=y.return}}function cS(g,y,_){var P=g.pingCache;if(P===null){P=g.pingCache=new jA;var $=new Set;P.set(y,$)}else $=P.get(y),$===void 0&&($=new Set,P.set(y,$));$.has(_)||(Wi=!0,$.add(_),g=nD.bind(null,g,y,_),y.then(g,g))}function nD(g,y,_){var P=g.pingCache;P!==null&&P.delete(y),g.pingedLanes|=g.suspendedLanes&_,g.warmLanes&=~_,Bi===g&&(qr&_)===_&&(Ei===4||Ei===3&&(qr&62914560)===qr&&300>ue()-ju?(si&2)===0&&Ze(g,0):Zc|=_,Hl===qr&&(Hl=0)),Qh(g)}function Wv(g,y){y===0&&(y=_t()),g=Oc(g,y),g!==null&&(zt(g,y),Qh(g))}function gC(g){var y=g.memoizedState,_=0;y!==null&&(_=y.retryLane),Wv(g,_)}function rD(g,y){var _=0;switch(g.tag){case 31:case 13:var P=g.stateNode,$=g.memoizedState;$!==null&&(_=$.retryLane);break;case 19:P=g.stateNode;break;case 22:P=g.stateNode._retryCache;break;default:throw Error(r(314))}P!==null&&P.delete(y),Wv(g,_)}function iD(g,y){return ht(g,y)}var zA=null,km=null,uS=!1,mC=!1,dS=!1,mg=0;function Qh(g){g!==km&&g.next===null&&(km===null?zA=km=g:km=km.next=g),mC=!0,uS||(uS=!0,aD())}function Kv(g,y){if(!dS&&mC){dS=!0;do for(var _=!1,P=zA;P!==null;){if(g!==0){var $=P.pendingLanes;if($===0)var W=0;else{var le=P.suspendedLanes,ye=P.pingedLanes;W=(1<<31-qt(42|g)+1)-1,W&=$&~(le&~ye),W=W&201326741?W&201326741|1:W?W|2:0}W!==0&&(_=!0,e2(P,W))}else W=qr,W=Ct(P,P===Bi?W:0,P.cancelPendingCommit!==null||P.timeoutHandle!==-1),(W&3)===0||ln(P,W)||(_=!0,e2(P,W));P=P.next}while(_);dS=!1}}function sD(){XI()}function XI(){mC=uS=!1;var g=0;mg!==0&&lD()&&(g=mg);for(var y=ue(),_=null,P=zA;P!==null;){var $=P.next,W=JI(P,y);W===0?(P.next=null,_===null?zA=$:_.next=$,$===null&&(km=_)):(_=P,(g!==0||(W&3)!==0)&&(mC=!0)),P=$}ws!==0&&ws!==5||Kv(g),mg!==0&&(mg=0)}function JI(g,y){for(var _=g.suspendedLanes,P=g.pingedLanes,$=g.expirationTimes,W=g.pendingLanes&-62914561;0<W;){var le=31-qt(W),ye=1<<le,Pe=$[le];Pe===-1?((ye&_)===0||(ye&P)!==0)&&($[le]=lt(ye,y)):Pe<=y&&(g.expiredLanes|=ye),W&=~ye}if(y=Bi,_=qr,_=Ct(g,g===y?_:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),P=g.callbackNode,_===0||g===y&&(Ln===2||Ln===9)||g.cancelPendingCommit!==null)return P!==null&&P!==null&&Ue(P),g.callbackNode=null,g.callbackPriority=0;if((_&3)===0||ln(g,_)){if(y=_&-_,y===g.callbackPriority)return y;switch(P!==null&&Ue(P),pr(_)){case 2:case 8:_=Qe;break;case 32:_=Ke;break;case 268435456:_=St;break;default:_=Ke}return P=ZI.bind(null,g),_=ht(_,P),g.callbackPriority=y,g.callbackNode=_,y}return P!==null&&P!==null&&Ue(P),g.callbackPriority=2,g.callbackNode=null,2}function ZI(g,y){if(ws!==0&&ws!==5)return g.callbackNode=null,g.callbackPriority=0,null;var _=g.callbackNode;if(Pm()&&g.callbackNode!==_)return null;var P=qr;return P=Ct(g,g===Bi?P:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),P===0?null:(j(g,P,y),JI(g,ue()),g.callbackNode!=null&&g.callbackNode===_?ZI.bind(null,g):null)}function e2(g,y){if(Pm())return null;j(g,y,!0)}function aD(){c2(function(){(si&6)!==0?ht(He,sD):XI()})}function nu(){if(mg===0){var g=Td;g===0&&(g=Ht,Ht<<=1,(Ht&261888)===0&&(Ht=256)),mg=g}return mg}function t2(g){return g==null||typeof g=="symbol"||typeof g=="boolean"?null:typeof g=="function"?g:Up(""+g)}function n2(g,y){var _=y.ownerDocument.createElement("input");return _.name=y.name,_.value=y.value,g.id&&_.setAttribute("form",g.id),y.parentNode.insertBefore(_,y),g=new FormData(g),_.parentNode.removeChild(_),g}function Nm(g,y,_,P,$){if(y==="submit"&&_&&_.stateNode===$){var W=t2(($[Ii]||null).action),le=P.submitter;le&&(y=(y=le[Ii]||null)?t2(y.formAction):le.getAttribute("formAction"),y!==null&&(W=y,le=null));var ye=new tm("action","action",null,P,$);g.push({event:ye,listeners:[{instance:null,listener:function(){if(P.defaultPrevented){if(mg!==0){var Pe=le?n2($,le):new FormData($);Dh(_,{pending:!0,data:Pe,method:$.method,action:W},null,Pe)}}else typeof W=="function"&&(ye.preventDefault(),Pe=le?n2($,le):new FormData($),Dh(_,{pending:!0,data:Pe,method:$.method,action:W},W,Pe))},currentTarget:$}]})}}for(var Er=0;Er<om.length;Er++){var hS=om[Er],xc=hS.toLowerCase(),Ia=hS[0].toUpperCase()+hS.slice(1);Aa(xc,"on"+Ia)}Aa(ds,"onAnimationEnd"),Aa(Jp,"onAnimationIteration"),Aa(wu,"onAnimationStart"),Aa("dblclick","onDoubleClick"),Aa("focusin","onFocus"),Aa("focusout","onBlur"),Aa(Fc,"onTransitionRun"),Aa(jc,"onTransitionStart"),Aa(Zp,"onTransitionCancel"),Aa(gi,"onTransitionEnd"),un("onMouseEnter",["mouseout","mouseover"]),un("onMouseLeave",["mouseout","mouseover"]),un("onPointerEnter",["pointerout","pointerover"]),un("onPointerLeave",["pointerout","pointerover"]),nn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nn("onBeforeInput",["compositionend","keypress","textInput","paste"]),nn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ag=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qv));function r2(g,y){y=(y&4)!==0;for(var _=0;_<g.length;_++){var P=g[_],$=P.event;P=P.listeners;e:{var W=void 0;if(y)for(var le=P.length-1;0<=le;le--){var ye=P[le],Pe=ye.instance,st=ye.currentTarget;if(ye=ye.listener,Pe!==W&&$.isPropagationStopped())break e;W=ye,$.currentTarget=st;try{W($)}catch(wt){Ah(wt)}$.currentTarget=null,W=Pe}else for(le=0;le<P.length;le++){if(ye=P[le],Pe=ye.instance,st=ye.currentTarget,ye=ye.listener,Pe!==W&&$.isPropagationStopped())break e;W=ye,$.currentTarget=st;try{W($)}catch(wt){Ah(wt)}$.currentTarget=null,W=Pe}}}}function ni(g,y){var _=y[oo];_===void 0&&(_=y[oo]=new Set);var P=g+"__bubble";_.has(P)||(yC(y,g,2,!1),_.add(P))}function fS(g,y,_){var P=0;y&&(P|=4),yC(_,g,P,y)}var AC="_reactListening"+Math.random().toString(36).slice(2);function pS(g){if(!g[AC]){g[AC]=!0,We.forEach(function(_){_!=="selectionchange"&&(Ag.has(_)||fS(_,!1,g),fS(_,!0,g))});var y=g.nodeType===9?g:g.ownerDocument;y===null||y[AC]||(y[AC]=!0,fS("selectionchange",!1,y))}}function yC(g,y,_,P){switch(T2(y)){case 2:var $=CD;break;case 8:$=ED;break;default:$=_S}_=$.bind(null,y,_,g),$=void 0,!W0||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||($=!0),P?$!==void 0?g.addEventListener(y,_,{capture:!0,passive:$}):g.addEventListener(y,_,!0):$!==void 0?g.addEventListener(y,_,{passive:$}):g.addEventListener(y,_,!1)}function gS(g,y,_,P,$){var W=P;if((y&1)===0&&(y&2)===0&&P!==null)e:for(;;){if(P===null)return;var le=P.tag;if(le===3||le===4){var ye=P.stateNode.containerInfo;if(ye===$)break;if(le===4)for(le=P.return;le!==null;){var Pe=le.tag;if((Pe===3||Pe===4)&&le.stateNode.containerInfo===$)return;le=le.return}for(;ye!==null;){if(le=Qi(ye),le===null)return;if(Pe=le.tag,Pe===5||Pe===6||Pe===26||Pe===27){P=W=le;continue e}ye=ye.parentNode}}P=P.return}nv(function(){var st=W,wt=G0(_),kt=[];e:{var dt=Ed.get(g);if(dt!==void 0){var bt=tm,wn=g;switch(g){case"keypress":if(Sf(_)===0)break e;case"keydown":case"keyup":bt=bu;break;case"focusin":wn="focus",bt=nm;break;case"focusout":wn="blur",bt=nm;break;case"beforeblur":case"afterblur":bt=nm;break;case"click":if(_.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":bt=Y0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":bt=iv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":bt=xd;break;case ds:case Jp:case wu:bt=ov;break;case gi:bt=rS;break;case"scroll":case"scrollend":bt=q0;break;case"wheel":bt=Lc;break;case"copy":case"cut":case"paste":bt=jo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":bt=Z0;break;case"toggle":case"beforetoggle":bt=uv}var er=(y&4)!==0,rs=!er&&(g==="scroll"||g==="scrollend"),Je=er?dt!==null?dt+"Capture":null:dt;er=[];for(var ze=st,it;ze!==null;){var Rt=ze;if(it=Rt.stateNode,Rt=Rt.tag,Rt!==5&&Rt!==26&&Rt!==27||it===null||Je===null||(Rt=vd(ze,Je),Rt!=null&&er.push(ru(ze,Rt,it))),rs)break;ze=ze.return}0<er.length&&(dt=new bt(dt,wn,null,_,wt),kt.push({event:dt,listeners:er}))}}if((y&7)===0){e:{if(dt=g==="mouseover"||g==="pointerover",bt=g==="mouseout"||g==="pointerout",dt&&_!==Jg&&(wn=_.relatedTarget||_.fromElement)&&(Qi(wn)||wn[bs]))break e;if((bt||dt)&&(dt=wt.window===wt?wt:(dt=wt.ownerDocument)?dt.defaultView||dt.parentWindow:window,bt?(wn=_.relatedTarget||_.toElement,bt=st,wn=wn?Qi(wn):null,wn!==null&&(rs=s(wn),er=wn.tag,wn!==rs||er!==5&&er!==27&&er!==6)&&(wn=null)):(bt=null,wn=st),bt!==wn)){if(er=Y0,Rt="onMouseLeave",Je="onMouseEnter",ze="mouse",(g==="pointerout"||g==="pointerover")&&(er=Z0,Rt="onPointerLeave",Je="onPointerEnter",ze="pointer"),rs=bt==null?dt:Ge(bt),it=wn==null?dt:Ge(wn),dt=new er(Rt,ze+"leave",bt,_,wt),dt.target=rs,dt.relatedTarget=it,Rt=null,Qi(wt)===st&&(er=new er(Je,ze+"enter",wn,_,wt),er.target=it,er.relatedTarget=rs,Rt=er),rs=Rt,bt&&wn)t:{for(er=vC,Je=bt,ze=wn,it=0,Rt=Je;Rt;Rt=er(Rt))it++;Rt=0;for(var Kn=ze;Kn;Kn=er(Kn))Rt++;for(;0<it-Rt;)Je=er(Je),it--;for(;0<Rt-it;)ze=er(ze),Rt--;for(;it--;){if(Je===ze||ze!==null&&Je===ze.alternate){er=Je;break t}Je=er(Je),ze=er(ze)}er=null}else er=null;bt!==null&&Ps(kt,dt,bt,er,!1),wn!==null&&rs!==null&&Ps(kt,rs,wn,er,!0)}}e:{if(dt=st?Ge(st):window,bt=dt.nodeName&&dt.nodeName.toLowerCase(),bt==="select"||bt==="input"&&dt.type==="file")var Ti=hv;else if(rA(dt))if(Eu)Ti=eC;else{Ti=gh;var Rn=ph}else bt=dt.nodeName,!bt||bt.toLowerCase()!=="input"||dt.type!=="checkbox"&&dt.type!=="radio"?st&&yd(st.elementType)&&(Ti=hv):Ti=Zb;if(Ti&&(Ti=Ti(g,st))){am(kt,Ti,_,wt);break e}Rn&&Rn(g,dt,st),g==="focusout"&&st&&dt.type==="number"&&st.memoizedProps.value!=null&&Un(dt,"number",dt.value)}switch(Rn=st?Ge(st):window,g){case"focusin":(rA(Rn)||Rn.contentEditable==="true")&&(Ve=Rn,Et=st,gt=null);break;case"focusout":gt=Et=Ve=null;break;case"mousedown":on=!0;break;case"contextmenu":case"mouseup":case"dragend":on=!1,sr(kt,_,wt);break;case"selectionchange":if(Tf)break;case"keydown":case"keyup":sr(kt,_,wt)}var Pr;if(fh)e:{switch(g){case"compositionstart":var li="onCompositionStart";break e;case"compositionend":li="onCompositionEnd";break e;case"compositionupdate":li="onCompositionUpdate";break e}li=void 0}else Cd?Vp(g,_)&&(li="onCompositionEnd"):g==="keydown"&&_.keyCode===229&&(li="onCompositionStart");li&&(ka&&_.locale!=="ko"&&(Cd||li!=="onCompositionStart"?li==="onCompositionEnd"&&Cd&&(Pr=ki()):(dh=wt,K0="value"in dh?dh.value:dh.textContent,Cd=!0)),Rn=Yv(st,li),0<Rn.length&&(li=new el(li,g,null,_,wt),kt.push({event:li,listeners:Rn}),Pr?li.data=Pr:(Pr=Wp(_),Pr!==null&&(li.data=Pr)))),(Pr=bd?uo(g,_):nA(g,_))&&(li=Yv(st,"onBeforeInput"),0<li.length&&(Rn=new el("onBeforeInput","beforeinput",null,_,wt),kt.push({event:Rn,listeners:li}),Rn.data=Pr)),Nm(kt,g,st,_,wt)}r2(kt,y)})}function ru(g,y,_){return{instance:g,listener:y,currentTarget:_}}function Yv(g,y){for(var _=y+"Capture",P=[];g!==null;){var $=g,W=$.stateNode;if($=$.tag,$!==5&&$!==26&&$!==27||W===null||($=vd(g,_),$!=null&&P.unshift(ru(g,$,W)),$=vd(g,y),$!=null&&P.push(ru(g,$,W))),g.tag===3)return P;g=g.return}return[]}function vC(g){if(g===null)return null;do g=g.return;while(g&&g.tag!==5&&g.tag!==27);return g||null}function Ps(g,y,_,P,$){for(var W=y._reactName,le=[];_!==null&&_!==P;){var ye=_,Pe=ye.alternate,st=ye.stateNode;if(ye=ye.tag,Pe!==null&&Pe===P)break;ye!==5&&ye!==26&&ye!==27||st===null||(Pe=st,$?(st=vd(_,W),st!=null&&le.unshift(ru(_,st,Pe))):$||(st=vd(_,W),st!=null&&le.push(ru(_,st,Pe)))),_=_.return}le.length!==0&&g.push({event:y,listeners:le})}var ia=/\r\n?/g,i2=/\u0000|\uFFFD/g;function s2(g){return(typeof g=="string"?g:""+g).replace(ia,`
`).replace(i2,"")}function a2(g,y){return y=s2(y),s2(g)===y}function ns(g,y,_,P,$,W){switch(_){case"children":typeof P=="string"?y==="body"||y==="textarea"&&P===""||Ui(g,P):(typeof P=="number"||typeof P=="bigint")&&y!=="body"&&Ui(g,""+P);break;case"className":he(g,"class",P);break;case"tabIndex":he(g,"tabindex",P);break;case"dir":case"role":case"viewBox":case"width":case"height":he(g,_,P);break;case"style":Qp(g,P,W);break;case"data":if(y!=="object"){he(g,"data",P);break}case"src":case"href":if(P===""&&(y!=="a"||_!=="href")){g.removeAttribute(_);break}if(P==null||typeof P=="function"||typeof P=="symbol"||typeof P=="boolean"){g.removeAttribute(_);break}P=Up(""+P),g.setAttribute(_,P);break;case"action":case"formAction":if(typeof P=="function"){g.setAttribute(_,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof W=="function"&&(_==="formAction"?(y!=="input"&&ns(g,y,"name",$.name,$,null),ns(g,y,"formEncType",$.formEncType,$,null),ns(g,y,"formMethod",$.formMethod,$,null),ns(g,y,"formTarget",$.formTarget,$,null)):(ns(g,y,"encType",$.encType,$,null),ns(g,y,"method",$.method,$,null),ns(g,y,"target",$.target,$,null)));if(P==null||typeof P=="symbol"||typeof P=="boolean"){g.removeAttribute(_);break}P=Up(""+P),g.setAttribute(_,P);break;case"onClick":P!=null&&(g.onclick=yu);break;case"onScroll":P!=null&&ni("scroll",g);break;case"onScrollEnd":P!=null&&ni("scrollend",g);break;case"dangerouslySetInnerHTML":if(P!=null){if(typeof P!="object"||!("__html"in P))throw Error(r(61));if(_=P.__html,_!=null){if($.children!=null)throw Error(r(60));g.innerHTML=_}}break;case"multiple":g.multiple=P&&typeof P!="function"&&typeof P!="symbol";break;case"muted":g.muted=P&&typeof P!="function"&&typeof P!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(P==null||typeof P=="function"||typeof P=="boolean"||typeof P=="symbol"){g.removeAttribute("xlink:href");break}_=Up(""+P),g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",_);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":P!=null&&typeof P!="function"&&typeof P!="symbol"?g.setAttribute(_,""+P):g.removeAttribute(_);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":P&&typeof P!="function"&&typeof P!="symbol"?g.setAttribute(_,""):g.removeAttribute(_);break;case"capture":case"download":P===!0?g.setAttribute(_,""):P!==!1&&P!=null&&typeof P!="function"&&typeof P!="symbol"?g.setAttribute(_,P):g.removeAttribute(_);break;case"cols":case"rows":case"size":case"span":P!=null&&typeof P!="function"&&typeof P!="symbol"&&!isNaN(P)&&1<=P?g.setAttribute(_,P):g.removeAttribute(_);break;case"rowSpan":case"start":P==null||typeof P=="function"||typeof P=="symbol"||isNaN(P)?g.removeAttribute(_):g.setAttribute(_,P);break;case"popover":ni("beforetoggle",g),ni("toggle",g),ir(g,"popover",P);break;case"xlinkActuate":pe(g,"http://www.w3.org/1999/xlink","xlink:actuate",P);break;case"xlinkArcrole":pe(g,"http://www.w3.org/1999/xlink","xlink:arcrole",P);break;case"xlinkRole":pe(g,"http://www.w3.org/1999/xlink","xlink:role",P);break;case"xlinkShow":pe(g,"http://www.w3.org/1999/xlink","xlink:show",P);break;case"xlinkTitle":pe(g,"http://www.w3.org/1999/xlink","xlink:title",P);break;case"xlinkType":pe(g,"http://www.w3.org/1999/xlink","xlink:type",P);break;case"xmlBase":pe(g,"http://www.w3.org/XML/1998/namespace","xml:base",P);break;case"xmlLang":pe(g,"http://www.w3.org/XML/1998/namespace","xml:lang",P);break;case"xmlSpace":pe(g,"http://www.w3.org/XML/1998/namespace","xml:space",P);break;case"is":ir(g,"is",P);break;case"innerText":case"textContent":break;default:(!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(_=Zy.get(_)||_,ir(g,_,P))}}function mS(g,y,_,P,$,W){switch(_){case"style":Qp(g,P,W);break;case"dangerouslySetInnerHTML":if(P!=null){if(typeof P!="object"||!("__html"in P))throw Error(r(61));if(_=P.__html,_!=null){if($.children!=null)throw Error(r(60));g.innerHTML=_}}break;case"children":typeof P=="string"?Ui(g,P):(typeof P=="number"||typeof P=="bigint")&&Ui(g,""+P);break;case"onScroll":P!=null&&ni("scroll",g);break;case"onScrollEnd":P!=null&&ni("scrollend",g);break;case"onClick":P!=null&&(g.onclick=yu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kt.hasOwnProperty(_))e:{if(_[0]==="o"&&_[1]==="n"&&($=_.endsWith("Capture"),y=_.slice(2,$?_.length-7:void 0),W=g[Ii]||null,W=W!=null?W[_]:null,typeof W=="function"&&g.removeEventListener(y,W,$),typeof P=="function")){typeof W!="function"&&W!==null&&(_ in g?g[_]=null:g.hasAttribute(_)&&g.removeAttribute(_)),g.addEventListener(y,P,$);break e}_ in g?g[_]=P:P===!0?g.setAttribute(_,""):ir(g,_,P)}}}function Vo(g,y,_){switch(y){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ni("error",g),ni("load",g);var P=!1,$=!1,W;for(W in _)if(_.hasOwnProperty(W)){var le=_[W];if(le!=null)switch(W){case"src":P=!0;break;case"srcSet":$=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,y));default:ns(g,y,W,le,_,null)}}$&&ns(g,y,"srcSet",_.srcSet,_,null),P&&ns(g,y,"src",_.src,_,null);return;case"input":ni("invalid",g);var ye=W=le=$=null,Pe=null,st=null;for(P in _)if(_.hasOwnProperty(P)){var wt=_[P];if(wt!=null)switch(P){case"name":$=wt;break;case"type":le=wt;break;case"checked":Pe=wt;break;case"defaultChecked":st=wt;break;case"value":W=wt;break;case"defaultValue":ye=wt;break;case"children":case"dangerouslySetInnerHTML":if(wt!=null)throw Error(r(137,y));break;default:ns(g,y,P,wt,_,null)}}sn(g,W,ye,Pe,st,le,$,!1);return;case"select":ni("invalid",g),P=le=W=null;for($ in _)if(_.hasOwnProperty($)&&(ye=_[$],ye!=null))switch($){case"value":W=ye;break;case"defaultValue":le=ye;break;case"multiple":P=ye;default:ns(g,y,$,ye,_,null)}y=W,_=le,g.multiple=!!P,y!=null?gr(g,!!P,y,!1):_!=null&&gr(g,!!P,_,!0);return;case"textarea":ni("invalid",g),W=$=P=null;for(le in _)if(_.hasOwnProperty(le)&&(ye=_[le],ye!=null))switch(le){case"value":P=ye;break;case"defaultValue":$=ye;break;case"children":W=ye;break;case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(91));break;default:ns(g,y,le,ye,_,null)}Lr(g,P,$,W);return;case"option":for(Pe in _)if(_.hasOwnProperty(Pe)&&(P=_[Pe],P!=null))switch(Pe){case"selected":g.selected=P&&typeof P!="function"&&typeof P!="symbol";break;default:ns(g,y,Pe,P,_,null)}return;case"dialog":ni("beforetoggle",g),ni("toggle",g),ni("cancel",g),ni("close",g);break;case"iframe":case"object":ni("load",g);break;case"video":case"audio":for(P=0;P<qv.length;P++)ni(qv[P],g);break;case"image":ni("error",g),ni("load",g);break;case"details":ni("toggle",g);break;case"embed":case"source":case"link":ni("error",g),ni("load",g);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(st in _)if(_.hasOwnProperty(st)&&(P=_[st],P!=null))switch(st){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,y));default:ns(g,y,st,P,_,null)}return;default:if(yd(y)){for(wt in _)_.hasOwnProperty(wt)&&(P=_[wt],P!==void 0&&mS(g,y,wt,P,_,void 0));return}}for(ye in _)_.hasOwnProperty(ye)&&(P=_[ye],P!=null&&ns(g,y,ye,P,_,null))}function oD(g,y,_,P){switch(y){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var $=null,W=null,le=null,ye=null,Pe=null,st=null,wt=null;for(bt in _){var kt=_[bt];if(_.hasOwnProperty(bt)&&kt!=null)switch(bt){case"checked":break;case"value":break;case"defaultValue":Pe=kt;default:P.hasOwnProperty(bt)||ns(g,y,bt,null,P,kt)}}for(var dt in P){var bt=P[dt];if(kt=_[dt],P.hasOwnProperty(dt)&&(bt!=null||kt!=null))switch(dt){case"type":W=bt;break;case"name":$=bt;break;case"checked":st=bt;break;case"defaultChecked":wt=bt;break;case"value":le=bt;break;case"defaultValue":ye=bt;break;case"children":case"dangerouslySetInnerHTML":if(bt!=null)throw Error(r(137,y));break;default:bt!==kt&&ns(g,y,dt,bt,P,kt)}}rn(g,le,ye,Pe,st,wt,W,$);return;case"select":bt=le=ye=dt=null;for(W in _)if(Pe=_[W],_.hasOwnProperty(W)&&Pe!=null)switch(W){case"value":break;case"multiple":bt=Pe;default:P.hasOwnProperty(W)||ns(g,y,W,null,P,Pe)}for($ in P)if(W=P[$],Pe=_[$],P.hasOwnProperty($)&&(W!=null||Pe!=null))switch($){case"value":dt=W;break;case"defaultValue":ye=W;break;case"multiple":le=W;default:W!==Pe&&ns(g,y,$,W,P,Pe)}y=ye,_=le,P=bt,dt!=null?gr(g,!!_,dt,!1):!!P!=!!_&&(y!=null?gr(g,!!_,y,!0):gr(g,!!_,_?[]:"",!1));return;case"textarea":bt=dt=null;for(ye in _)if($=_[ye],_.hasOwnProperty(ye)&&$!=null&&!P.hasOwnProperty(ye))switch(ye){case"value":break;case"children":break;default:ns(g,y,ye,null,P,$)}for(le in P)if($=P[le],W=_[le],P.hasOwnProperty(le)&&($!=null||W!=null))switch(le){case"value":dt=$;break;case"defaultValue":bt=$;break;case"children":break;case"dangerouslySetInnerHTML":if($!=null)throw Error(r(91));break;default:$!==W&&ns(g,y,le,$,P,W)}qn(g,dt,bt);return;case"option":for(var wn in _)if(dt=_[wn],_.hasOwnProperty(wn)&&dt!=null&&!P.hasOwnProperty(wn))switch(wn){case"selected":g.selected=!1;break;default:ns(g,y,wn,null,P,dt)}for(Pe in P)if(dt=P[Pe],bt=_[Pe],P.hasOwnProperty(Pe)&&dt!==bt&&(dt!=null||bt!=null))switch(Pe){case"selected":g.selected=dt&&typeof dt!="function"&&typeof dt!="symbol";break;default:ns(g,y,Pe,dt,P,bt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var er in _)dt=_[er],_.hasOwnProperty(er)&&dt!=null&&!P.hasOwnProperty(er)&&ns(g,y,er,null,P,dt);for(st in P)if(dt=P[st],bt=_[st],P.hasOwnProperty(st)&&dt!==bt&&(dt!=null||bt!=null))switch(st){case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(r(137,y));break;default:ns(g,y,st,dt,P,bt)}return;default:if(yd(y)){for(var rs in _)dt=_[rs],_.hasOwnProperty(rs)&&dt!==void 0&&!P.hasOwnProperty(rs)&&mS(g,y,rs,void 0,P,dt);for(wt in P)dt=P[wt],bt=_[wt],!P.hasOwnProperty(wt)||dt===bt||dt===void 0&&bt===void 0||mS(g,y,wt,dt,P,bt);return}}for(var Je in _)dt=_[Je],_.hasOwnProperty(Je)&&dt!=null&&!P.hasOwnProperty(Je)&&ns(g,y,Je,null,P,dt);for(kt in P)dt=P[kt],bt=_[kt],!P.hasOwnProperty(kt)||dt===bt||dt==null&&bt==null||ns(g,y,kt,dt,P,bt)}function AS(g){switch(g){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Xv(){if(typeof performance.getEntriesByType=="function"){for(var g=0,y=0,_=performance.getEntriesByType("resource"),P=0;P<_.length;P++){var $=_[P],W=$.transferSize,le=$.initiatorType,ye=$.duration;if(W&&ye&&AS(le)){for(le=0,ye=$.responseEnd,P+=1;P<_.length;P++){var Pe=_[P],st=Pe.startTime;if(st>ye)break;var wt=Pe.transferSize,kt=Pe.initiatorType;wt&&AS(kt)&&(Pe=Pe.responseEnd,le+=wt*(Pe<ye?1:(ye-st)/(Pe-st)))}if(--P,y+=8*(W+le)/($.duration/1e3),g++,10<g)break}}if(0<g)return y/g/1e6}return navigator.connection&&(g=navigator.connection.downlink,typeof g=="number")?g:5}var Jv=null,yS=null;function Zv(g){return g.nodeType===9?g:g.ownerDocument}function ex(g){switch(g){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bc(g,y){if(g===0)switch(y){case"svg":return 1;case"math":return 2;default:return 0}return g===1&&y==="foreignObject"?0:g}function yg(g,y){return g==="textarea"||g==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.children=="bigint"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var vS=null;function lD(){var g=window.event;return g&&g.type==="popstate"?g===vS?!1:(vS=g,!0):(vS=null,!1)}var o2=typeof setTimeout=="function"?setTimeout:void 0,cD=typeof clearTimeout=="function"?clearTimeout:void 0,l2=typeof Promise=="function"?Promise:void 0,c2=typeof queueMicrotask=="function"?queueMicrotask:typeof l2<"u"?function(g){return l2.resolve(null).then(g).catch(rp)}:o2;function rp(g){setTimeout(function(){throw g})}function ar(g){return g==="head"}function xS(g,y){var _=y,P=0;do{var $=_.nextSibling;if(g.removeChild(_),$&&$.nodeType===8)if(_=$.data,_==="/$"||_==="/&"){if(P===0){g.removeChild($),qA(y);return}P--}else if(_==="$"||_==="$?"||_==="$~"||_==="$!"||_==="&")P++;else if(_==="html")tx(g.ownerDocument.documentElement);else if(_==="head"){_=g.ownerDocument.head,tx(_);for(var W=_.firstChild;W;){var le=W.nextSibling,ye=W.nodeName;W[Tl]||ye==="SCRIPT"||ye==="STYLE"||ye==="LINK"&&W.rel.toLowerCase()==="stylesheet"||_.removeChild(W),W=le}}else _==="body"&&tx(g.ownerDocument.body);_=$}while(_);qA(y)}function iu(g,y){var _=g;g=0;do{var P=_.nextSibling;if(_.nodeType===1?y?(_._stashedDisplay=_.style.display,_.style.display="none"):(_.style.display=_._stashedDisplay||"",_.getAttribute("style")===""&&_.removeAttribute("style")):_.nodeType===3&&(y?(_._stashedText=_.nodeValue,_.nodeValue=""):_.nodeValue=_._stashedText||""),P&&P.nodeType===8)if(_=P.data,_==="/$"){if(g===0)break;g--}else _!=="$"&&_!=="$?"&&_!=="$~"&&_!=="$!"||g++;_=P}while(_)}function xC(g){var y=g.firstChild;for(y&&y.nodeType===10&&(y=y.nextSibling);y;){var _=y;switch(y=y.nextSibling,_.nodeName){case"HTML":case"HEAD":case"BODY":xC(_),ec(_);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(_.rel.toLowerCase()==="stylesheet")continue}g.removeChild(_)}}function uD(g,y,_,P){for(;g.nodeType===1;){var $=_;if(g.nodeName.toLowerCase()!==y.toLowerCase()){if(!P&&(g.nodeName!=="INPUT"||g.type!=="hidden"))break}else if(P){if(!g[Tl])switch(y){case"meta":if(!g.hasAttribute("itemprop"))break;return g;case"link":if(W=g.getAttribute("rel"),W==="stylesheet"&&g.hasAttribute("data-precedence"))break;if(W!==$.rel||g.getAttribute("href")!==($.href==null||$.href===""?null:$.href)||g.getAttribute("crossorigin")!==($.crossOrigin==null?null:$.crossOrigin)||g.getAttribute("title")!==($.title==null?null:$.title))break;return g;case"style":if(g.hasAttribute("data-precedence"))break;return g;case"script":if(W=g.getAttribute("src"),(W!==($.src==null?null:$.src)||g.getAttribute("type")!==($.type==null?null:$.type)||g.getAttribute("crossorigin")!==($.crossOrigin==null?null:$.crossOrigin))&&W&&g.hasAttribute("async")&&!g.hasAttribute("itemprop"))break;return g;default:return g}}else if(y==="input"&&g.type==="hidden"){var W=$.name==null?null:""+$.name;if($.type==="hidden"&&g.getAttribute("name")===W)return g}else return g;if(g=$u(g.nextSibling),g===null)break}return null}function Ki(g,y,_){if(y==="")return null;for(;g.nodeType!==3;)if((g.nodeType!==1||g.nodeName!=="INPUT"||g.type!=="hidden")&&!_||(g=$u(g.nextSibling),g===null))return null;return g}function u2(g,y){for(;g.nodeType!==8;)if((g.nodeType!==1||g.nodeName!=="INPUT"||g.type!=="hidden")&&!y||(g=$u(g.nextSibling),g===null))return null;return g}function bC(g){return g.data==="$?"||g.data==="$~"}function $A(g){return g.data==="$!"||g.data==="$?"&&g.ownerDocument.readyState!=="loading"}function dD(g,y){var _=g.ownerDocument;if(g.data==="$~")g._reactRetry=y;else if(g.data!=="$?"||_.readyState!=="loading")y();else{var P=function(){y(),_.removeEventListener("DOMContentLoaded",P)};_.addEventListener("DOMContentLoaded",P),g._reactRetry=P}}function $u(g){for(;g!=null;g=g.nextSibling){var y=g.nodeType;if(y===1||y===3)break;if(y===8){if(y=g.data,y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"||y==="F!"||y==="F")break;if(y==="/$"||y==="/&")return null}}return g}var bS=null;function d2(g){g=g.nextSibling;for(var y=0;g;){if(g.nodeType===8){var _=g.data;if(_==="/$"||_==="/&"){if(y===0)return $u(g.nextSibling);y--}else _!=="$"&&_!=="$!"&&_!=="$?"&&_!=="$~"&&_!=="&"||y++}g=g.nextSibling}return null}function h2(g){g=g.previousSibling;for(var y=0;g;){if(g.nodeType===8){var _=g.data;if(_==="$"||_==="$!"||_==="$?"||_==="$~"||_==="&"){if(y===0)return g;y--}else _!=="/$"&&_!=="/&"||y++}g=g.previousSibling}return null}function f2(g,y,_){switch(y=Zv(_),g){case"html":if(g=y.documentElement,!g)throw Error(r(452));return g;case"head":if(g=y.head,!g)throw Error(r(453));return g;case"body":if(g=y.body,!g)throw Error(r(454));return g;default:throw Error(r(451))}}function tx(g){for(var y=g.attributes;y.length;)g.removeAttributeNode(y[0]);ec(g)}var Qu=new Map,p2=new Set;function CC(g){return typeof g.getRootNode=="function"?g.getRootNode():g.nodeType===9?g:g.ownerDocument}var ip=H.d;H.d={f:hD,r:fD,D:CS,C:pD,L:gD,m:mD,X:Cc,S:_o,M:AD};function hD(){var g=ip.f(),y=xe();return g||y}function fD(g){var y=me(g);y!==null&&y.tag===5&&y.type==="form"?TA(y):ip.r(g)}var vg=typeof document>"u"?null:document;function g2(g,y,_){var P=vg;if(P&&typeof y=="string"&&y){var $=Dt(y);$='link[rel="'+g+'"][href="'+$+'"]',typeof _=="string"&&($+='[crossorigin="'+_+'"]'),p2.has($)||(p2.add($),g={rel:g,crossOrigin:_,href:y},P.querySelector($)===null&&(y=P.createElement("link"),Vo(y,"link",g),nt(y),P.head.appendChild(y)))}}function CS(g){ip.D(g),g2("dns-prefetch",g,null)}function pD(g,y){ip.C(g,y),g2("preconnect",g,y)}function gD(g,y,_){ip.L(g,y,_);var P=vg;if(P&&g&&y){var $='link[rel="preload"][as="'+Dt(y)+'"]';y==="image"&&_&&_.imageSrcSet?($+='[imagesrcset="'+Dt(_.imageSrcSet)+'"]',typeof _.imageSizes=="string"&&($+='[imagesizes="'+Dt(_.imageSizes)+'"]')):$+='[href="'+Dt(g)+'"]';var W=$;switch(y){case"style":W=QA(g);break;case"script":W=HA(g)}Qu.has(W)||(g=h({rel:"preload",href:y==="image"&&_&&_.imageSrcSet?void 0:g,as:y},_),Qu.set(W,g),P.querySelector($)!==null||y==="style"&&P.querySelector(UA(W))||y==="script"&&P.querySelector(GA(W))||(y=P.createElement("link"),Vo(y,"link",g),nt(y),P.head.appendChild(y)))}}function mD(g,y){ip.m(g,y);var _=vg;if(_&&g){var P=y&&typeof y.as=="string"?y.as:"script",$='link[rel="modulepreload"][as="'+Dt(P)+'"][href="'+Dt(g)+'"]',W=$;switch(P){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":W=HA(g)}if(!Qu.has(W)&&(g=h({rel:"modulepreload",href:g},y),Qu.set(W,g),_.querySelector($)===null)){switch(P){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(_.querySelector(GA(W)))return}P=_.createElement("link"),Vo(P,"link",g),nt(P),_.head.appendChild(P)}}}function _o(g,y,_){ip.S(g,y,_);var P=vg;if(P&&g){var $=rt(P).hoistableStyles,W=QA(g);y=y||"default";var le=$.get(W);if(!le){var ye={loading:0,preload:null};if(le=P.querySelector(UA(W)))ye.loading=5;else{g=h({rel:"stylesheet",href:g,"data-precedence":y},_),(_=Qu.get(W))&&ES(g,_);var Pe=le=P.createElement("link");nt(Pe),Vo(Pe,"link",g),Pe._p=new Promise(function(st,wt){Pe.onload=st,Pe.onerror=wt}),Pe.addEventListener("load",function(){ye.loading|=1}),Pe.addEventListener("error",function(){ye.loading|=2}),ye.loading|=4,EC(le,y,P)}le={type:"stylesheet",instance:le,count:1,state:ye},$.set(W,le)}}}function Cc(g,y){ip.X(g,y);var _=vg;if(_&&g){var P=rt(_).hoistableScripts,$=HA(g),W=P.get($);W||(W=_.querySelector(GA($)),W||(g=h({src:g,async:!0},y),(y=Qu.get($))&&SC(g,y),W=_.createElement("script"),nt(W),Vo(W,"link",g),_.head.appendChild(W)),W={type:"script",instance:W,count:1,state:null},P.set($,W))}}function AD(g,y){ip.M(g,y);var _=vg;if(_&&g){var P=rt(_).hoistableScripts,$=HA(g),W=P.get($);W||(W=_.querySelector(GA($)),W||(g=h({src:g,async:!0,type:"module"},y),(y=Qu.get($))&&SC(g,y),W=_.createElement("script"),nt(W),Vo(W,"link",g),_.head.appendChild(W)),W={type:"script",instance:W,count:1,state:null},P.set($,W))}}function m2(g,y,_,P){var $=($=ae.current)?CC($):null;if(!$)throw Error(r(446));switch(g){case"meta":case"title":return null;case"style":return typeof _.precedence=="string"&&typeof _.href=="string"?(y=QA(_.href),_=rt($).hoistableStyles,P=_.get(y),P||(P={type:"style",instance:null,count:0,state:null},_.set(y,P)),P):{type:"void",instance:null,count:0,state:null};case"link":if(_.rel==="stylesheet"&&typeof _.href=="string"&&typeof _.precedence=="string"){g=QA(_.href);var W=rt($).hoistableStyles,le=W.get(g);if(le||($=$.ownerDocument||$,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},W.set(g,le),(W=$.querySelector(UA(g)))&&!W._p&&(le.instance=W,le.state.loading=5),Qu.has(g)||(_={rel:"preload",as:"style",href:_.href,crossOrigin:_.crossOrigin,integrity:_.integrity,media:_.media,hrefLang:_.hrefLang,referrerPolicy:_.referrerPolicy},Qu.set(g,_),W||yD($,g,_,le.state))),y&&P===null)throw Error(r(528,""));return le}if(y&&P!==null)throw Error(r(529,""));return null;case"script":return y=_.async,_=_.src,typeof _=="string"&&y&&typeof y!="function"&&typeof y!="symbol"?(y=HA(_),_=rt($).hoistableScripts,P=_.get(y),P||(P={type:"script",instance:null,count:0,state:null},_.set(y,P)),P):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,g))}}function QA(g){return'href="'+Dt(g)+'"'}function UA(g){return'link[rel="stylesheet"]['+g+"]"}function A2(g){return h({},g,{"data-precedence":g.precedence,precedence:null})}function yD(g,y,_,P){g.querySelector('link[rel="preload"][as="style"]['+y+"]")?P.loading=1:(y=g.createElement("link"),P.preload=y,y.addEventListener("load",function(){return P.loading|=1}),y.addEventListener("error",function(){return P.loading|=2}),Vo(y,"link",_),nt(y),g.head.appendChild(y))}function HA(g){return'[src="'+Dt(g)+'"]'}function GA(g){return"script[async]"+g}function y2(g,y,_){if(y.count++,y.instance===null)switch(y.type){case"style":var P=g.querySelector('style[data-href~="'+Dt(_.href)+'"]');if(P)return y.instance=P,nt(P),P;var $=h({},_,{"data-href":_.href,"data-precedence":_.precedence,href:null,precedence:null});return P=(g.ownerDocument||g).createElement("style"),nt(P),Vo(P,"style",$),EC(P,_.precedence,g),y.instance=P;case"stylesheet":$=QA(_.href);var W=g.querySelector(UA($));if(W)return y.state.loading|=4,y.instance=W,nt(W),W;P=A2(_),($=Qu.get($))&&ES(P,$),W=(g.ownerDocument||g).createElement("link"),nt(W);var le=W;return le._p=new Promise(function(ye,Pe){le.onload=ye,le.onerror=Pe}),Vo(W,"link",P),y.state.loading|=4,EC(W,_.precedence,g),y.instance=W;case"script":return W=HA(_.src),($=g.querySelector(GA(W)))?(y.instance=$,nt($),$):(P=_,($=Qu.get(W))&&(P=h({},_),SC(P,$)),g=g.ownerDocument||g,$=g.createElement("script"),nt($),Vo($,"link",P),g.head.appendChild($),y.instance=$);case"void":return null;default:throw Error(r(443,y.type))}else y.type==="stylesheet"&&(y.state.loading&4)===0&&(P=y.instance,y.state.loading|=4,EC(P,_.precedence,g));return y.instance}function EC(g,y,_){for(var P=_.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),$=P.length?P[P.length-1]:null,W=$,le=0;le<P.length;le++){var ye=P[le];if(ye.dataset.precedence===y)W=ye;else if(W!==$)break}W?W.parentNode.insertBefore(g,W.nextSibling):(y=_.nodeType===9?_.head:_,y.insertBefore(g,y.firstChild))}function ES(g,y){g.crossOrigin==null&&(g.crossOrigin=y.crossOrigin),g.referrerPolicy==null&&(g.referrerPolicy=y.referrerPolicy),g.title==null&&(g.title=y.title)}function SC(g,y){g.crossOrigin==null&&(g.crossOrigin=y.crossOrigin),g.referrerPolicy==null&&(g.referrerPolicy=y.referrerPolicy),g.integrity==null&&(g.integrity=y.integrity)}var nx=null;function v2(g,y,_){if(nx===null){var P=new Map,$=nx=new Map;$.set(_,P)}else $=nx,P=$.get(_),P||(P=new Map,$.set(_,P));if(P.has(g))return P;for(P.set(g,null),_=_.getElementsByTagName(g),$=0;$<_.length;$++){var W=_[$];if(!(W[Tl]||W[Yn]||g==="link"&&W.getAttribute("rel")==="stylesheet")&&W.namespaceURI!=="http://www.w3.org/2000/svg"){var le=W.getAttribute(y)||"";le=g+le;var ye=P.get(le);ye?ye.push(W):P.set(le,[W])}}return P}function x2(g,y,_){g=g.ownerDocument||g,g.head.insertBefore(_,y==="title"?g.querySelector("head > title"):null)}function vD(g,y,_){if(_===1||y.itemProp!=null)return!1;switch(g){case"meta":case"title":return!0;case"style":if(typeof y.precedence!="string"||typeof y.href!="string"||y.href==="")break;return!0;case"link":if(typeof y.rel!="string"||typeof y.href!="string"||y.href===""||y.onLoad||y.onError)break;switch(y.rel){case"stylesheet":return g=y.disabled,typeof y.precedence=="string"&&g==null;default:return!0}case"script":if(y.async&&typeof y.async!="function"&&typeof y.async!="symbol"&&!y.onLoad&&!y.onError&&y.src&&typeof y.src=="string")return!0}return!1}function b2(g){return!(g.type==="stylesheet"&&(g.state.loading&3)===0)}function VA(g,y,_,P){if(_.type==="stylesheet"&&(typeof P.media!="string"||matchMedia(P.media).matches!==!1)&&(_.state.loading&4)===0){if(_.instance===null){var $=QA(P.href),W=y.querySelector(UA($));if(W){y=W._p,y!==null&&typeof y=="object"&&typeof y.then=="function"&&(g.count++,g=wC.bind(g),y.then(g,g)),_.state.loading|=4,_.instance=W,nt(W);return}W=y.ownerDocument||y,P=A2(P),($=Qu.get($))&&ES(P,$),W=W.createElement("link"),nt(W);var le=W;le._p=new Promise(function(ye,Pe){le.onload=ye,le.onerror=Pe}),Vo(W,"link",P),_.instance=W}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(_,y),(y=_.state.preload)&&(_.state.loading&3)===0&&(g.count++,_=wC.bind(g),y.addEventListener("load",_),y.addEventListener("error",_))}}var SS=0;function xD(g,y){return g.stylesheets&&g.count===0&&IC(g,g.stylesheets),0<g.count||0<g.imgCount?function(_){var P=setTimeout(function(){if(g.stylesheets&&IC(g,g.stylesheets),g.unsuspend){var W=g.unsuspend;g.unsuspend=null,W()}},6e4+y);0<g.imgBytes&&SS===0&&(SS=62500*Xv());var $=setTimeout(function(){if(g.waitingForImages=!1,g.count===0&&(g.stylesheets&&IC(g,g.stylesheets),g.unsuspend)){var W=g.unsuspend;g.unsuspend=null,W()}},(g.imgBytes>SS?50:800)+y);return g.unsuspend=_,function(){g.unsuspend=null,clearTimeout(P),clearTimeout($)}}:null}function wC(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)IC(this,this.stylesheets);else if(this.unsuspend){var g=this.unsuspend;this.unsuspend=null,g()}}}var _C=null;function IC(g,y){g.stylesheets=null,g.unsuspend!==null&&(g.count++,_C=new Map,y.forEach(C2,g),_C=null,wC.call(g))}function C2(g,y){if(!(y.state.loading&4)){var _=_C.get(g);if(_)var P=_.get(null);else{_=new Map,_C.set(g,_);for(var $=g.querySelectorAll("link[data-precedence],style[data-precedence]"),W=0;W<$.length;W++){var le=$[W];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(_.set(le.dataset.precedence,le),P=le)}P&&_.set(null,P)}$=y.instance,le=$.getAttribute("data-precedence"),W=_.get(le)||P,W===P&&_.set(null,$),_.set(le,$),this.count++,P=wC.bind(this),$.addEventListener("load",P),$.addEventListener("error",P),W?W.parentNode.insertBefore($,W.nextSibling):(g=g.nodeType===9?g.head:g,g.insertBefore($,g.firstChild)),y.state.loading|=4}}var WA={$$typeof:w,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function bD(g,y,_,P,$,W,le,ye,Pe){this.tag=1,this.containerInfo=g,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pt(0),this.hiddenUpdates=Pt(null),this.identifierPrefix=P,this.onUncaughtError=$,this.onCaughtError=W,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Pe,this.incompleteTransitions=new Map}function E2(g,y,_,P,$,W,le,ye,Pe,st,wt,kt){return g=new bD(g,y,_,le,Pe,st,wt,kt,ye),y=1,W===!0&&(y|=24),W=ya(3,null,null,y),g.current=W,W.stateNode=g,y=Uc(),y.refCount++,g.pooledCache=y,y.refCount++,W.memoizedState={element:P,isDehydrated:_,cache:y},Bu(W),g}function S2(g){return g?(g=zc,g):zc}function w2(g,y,_,P,$,W){$=S2($),P.context===null?P.context=$:P.pendingContext=$,P=Tu(y),P.payload={element:_},W=W===void 0?null:W,W!==null&&(P.callback=W),_=dc(g,P,y),_!==null&&(S(_,g,y),Ih(_,g,y))}function _2(g,y){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var _=g.retryLane;g.retryLane=_!==0&&_<y?_:y}}function wS(g,y){_2(g,y),(g=g.alternate)&&_2(g,y)}function I2(g){if(g.tag===13||g.tag===31){var y=Oc(g,67108864);y!==null&&S(y,g,67108864),wS(g,67108864)}}function B2(g){if(g.tag===13||g.tag===31){var y=Go();y=Zn(y);var _=Oc(g,y);_!==null&&S(_,g,y),wS(g,y)}}var BC=!0;function CD(g,y,_,P){var $=O.T;O.T=null;var W=H.p;try{H.p=2,_S(g,y,_,P)}finally{H.p=W,O.T=$}}function ED(g,y,_,P){var $=O.T;O.T=null;var W=H.p;try{H.p=8,_S(g,y,_,P)}finally{H.p=W,O.T=$}}function _S(g,y,_,P){if(BC){var $=IS(P);if($===null)gS(g,y,P,TC,_),M2(g,P);else if(D2($,g,y,_,P))P.stopPropagation();else if(M2(g,P),y&4&&-1<SD.indexOf(g)){for(;$!==null;){var W=me($);if(W!==null)switch(W.tag){case 3:if(W=W.stateNode,W.current.memoizedState.isDehydrated){var le=It(W.pendingLanes);if(le!==0){var ye=W;for(ye.pendingLanes|=2,ye.entangledLanes|=2;le;){var Pe=1<<31-qt(le);ye.entanglements[1]|=Pe,le&=~Pe}Qh(W),(si&6)===0&&(wo=ue()+500,Kv(0))}}break;case 31:case 13:ye=Oc(W,2),ye!==null&&S(ye,W,2),xe(),wS(W,2)}if(W=IS(P),W===null&&gS(g,y,P,TC,_),W===$)break;$=W}$!==null&&P.stopPropagation()}else gS(g,y,P,null,_)}}function IS(g){return g=G0(g),BS(g)}var TC=null;function BS(g){if(TC=null,g=Qi(g),g!==null){var y=s(g);if(y===null)g=null;else{var _=y.tag;if(_===13){if(g=a(y),g!==null)return g;g=null}else if(_===31){if(g=o(y),g!==null)return g;g=null}else if(_===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;g=null}else y!==g&&(g=null)}}return TC=g,null}function T2(g){switch(g){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ke()){case He:return 2;case Qe:return 8;case Ke:case jt:return 32;case St:return 268435456;default:return 32}default:return 32}}var TS=!1,xg=null,bg=null,Cg=null,rx=new Map,ix=new Map,Eg=[],SD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function M2(g,y){switch(g){case"focusin":case"focusout":xg=null;break;case"dragenter":case"dragleave":bg=null;break;case"mouseover":case"mouseout":Cg=null;break;case"pointerover":case"pointerout":rx.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":ix.delete(y.pointerId)}}function Lm(g,y,_,P,$,W){return g===null||g.nativeEvent!==W?(g={blockedOn:y,domEventName:_,eventSystemFlags:P,nativeEvent:W,targetContainers:[$]},y!==null&&(y=me(y),y!==null&&I2(y)),g):(g.eventSystemFlags|=P,y=g.targetContainers,$!==null&&y.indexOf($)===-1&&y.push($),g)}function D2(g,y,_,P,$){switch(y){case"focusin":return xg=Lm(xg,g,y,_,P,$),!0;case"dragenter":return bg=Lm(bg,g,y,_,P,$),!0;case"mouseover":return Cg=Lm(Cg,g,y,_,P,$),!0;case"pointerover":var W=$.pointerId;return rx.set(W,Lm(rx.get(W)||null,g,y,_,P,$)),!0;case"gotpointercapture":return W=$.pointerId,ix.set(W,Lm(ix.get(W)||null,g,y,_,P,$)),!0}return!1}function MS(g){var y=Qi(g.target);if(y!==null){var _=s(y);if(_!==null){if(y=_.tag,y===13){if(y=a(_),y!==null){g.blockedOn=y,qi(g.priority,function(){B2(_)});return}}else if(y===31){if(y=o(_),y!==null){g.blockedOn=y,qi(g.priority,function(){B2(_)});return}}else if(y===3&&_.stateNode.current.memoizedState.isDehydrated){g.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}g.blockedOn=null}function MC(g){if(g.blockedOn!==null)return!1;for(var y=g.targetContainers;0<y.length;){var _=IS(g.nativeEvent);if(_===null){_=g.nativeEvent;var P=new _.constructor(_.type,_);Jg=P,_.target.dispatchEvent(P),Jg=null}else return y=me(_),y!==null&&I2(y),g.blockedOn=_,!1;y.shift()}return!0}function R2(g,y,_){MC(g)&&_.delete(y)}function wD(){TS=!1,xg!==null&&MC(xg)&&(xg=null),bg!==null&&MC(bg)&&(bg=null),Cg!==null&&MC(Cg)&&(Cg=null),rx.forEach(R2),ix.forEach(R2)}function KA(g,y){g.blockedOn===y&&(g.blockedOn=null,TS||(TS=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,wD)))}var DC=null;function P2(g){DC!==g&&(DC=g,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){DC===g&&(DC=null);for(var y=0;y<g.length;y+=3){var _=g[y],P=g[y+1],$=g[y+2];if(typeof P!="function"){if(BS(P||_)===null)continue;break}var W=me(_);W!==null&&(g.splice(y,3),y-=3,Dh(W,{pending:!0,data:$,method:_.method,action:P},P,$))}}))}function qA(g){function y(Pe){return KA(Pe,g)}xg!==null&&KA(xg,g),bg!==null&&KA(bg,g),Cg!==null&&KA(Cg,g),rx.forEach(y),ix.forEach(y);for(var _=0;_<Eg.length;_++){var P=Eg[_];P.blockedOn===g&&(P.blockedOn=null)}for(;0<Eg.length&&(_=Eg[0],_.blockedOn===null);)MS(_),_.blockedOn===null&&Eg.shift();if(_=(g.ownerDocument||g).$$reactFormReplay,_!=null)for(P=0;P<_.length;P+=3){var $=_[P],W=_[P+1],le=$[Ii]||null;if(typeof W=="function")le||P2(_);else if(le){var ye=null;if(W&&W.hasAttribute("formAction")){if($=W,le=W[Ii]||null)ye=le.formAction;else if(BS($)!==null)continue}else ye=le.action;typeof ye=="function"?_[P+1]=ye:(_.splice(P,3),P-=3),P2(_)}}}function Vl(){function g(W){W.canIntercept&&W.info==="react-transition"&&W.intercept({handler:function(){return new Promise(function(le){return $=le})},focusReset:"manual",scroll:"manual"})}function y(){$!==null&&($(),$=null),P||setTimeout(_,20)}function _(){if(!P&&!navigation.transition){var W=navigation.currentEntry;W&&W.url!=null&&navigation.navigate(W.url,{state:W.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var P=!1,$=null;return navigation.addEventListener("navigate",g),navigation.addEventListener("navigatesuccess",y),navigation.addEventListener("navigateerror",y),setTimeout(_,100),function(){P=!0,navigation.removeEventListener("navigate",g),navigation.removeEventListener("navigatesuccess",y),navigation.removeEventListener("navigateerror",y),$!==null&&($(),$=null)}}}function sx(g){this._internalRoot=g}RC.prototype.render=sx.prototype.render=function(g){var y=this._internalRoot;if(y===null)throw Error(r(409));var _=y.current,P=Go();w2(_,P,g,y,null,null)},RC.prototype.unmount=sx.prototype.unmount=function(){var g=this._internalRoot;if(g!==null){this._internalRoot=null;var y=g.containerInfo;w2(g.current,2,null,g,null,null),xe(),y[bs]=null}};function RC(g){this._internalRoot=g}RC.prototype.unstable_scheduleHydration=function(g){if(g){var y=zr();g={blockedOn:null,target:g,priority:y};for(var _=0;_<Eg.length&&y!==0&&y<Eg[_].priority;_++);Eg.splice(_,0,g),_===0&&MS(g)}};var k2=e.version;if(k2!=="19.2.1")throw Error(r(527,k2,"19.2.1"));H.findDOMNode=function(g){var y=g._reactInternals;if(y===void 0)throw typeof g.render=="function"?Error(r(188)):(g=Object.keys(g).join(","),Error(r(268,g)));return g=c(y),g=g!==null?u(g):null,g=g===null?null:g.stateNode,g};var _D={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var PC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!PC.isDisabled&&PC.supportsFiber)try{at=PC.inject(_D),pt=PC}catch{}}return RS.createRoot=function(g,y){if(!i(g))throw Error(r(299));var _=!1,P="",$=MA,W=Uv,le=DA;return y!=null&&(y.unstable_strictMode===!0&&(_=!0),y.identifierPrefix!==void 0&&(P=y.identifierPrefix),y.onUncaughtError!==void 0&&($=y.onUncaughtError),y.onCaughtError!==void 0&&(W=y.onCaughtError),y.onRecoverableError!==void 0&&(le=y.onRecoverableError)),y=E2(g,1,!1,null,null,_,P,null,$,W,le,Vl),g[bs]=y.current,pS(g),new sx(y)},RS.hydrateRoot=function(g,y,_){if(!i(g))throw Error(r(299));var P=!1,$="",W=MA,le=Uv,ye=DA,Pe=null;return _!=null&&(_.unstable_strictMode===!0&&(P=!0),_.identifierPrefix!==void 0&&($=_.identifierPrefix),_.onUncaughtError!==void 0&&(W=_.onUncaughtError),_.onCaughtError!==void 0&&(le=_.onCaughtError),_.onRecoverableError!==void 0&&(ye=_.onRecoverableError),_.formState!==void 0&&(Pe=_.formState)),y=E2(g,1,!0,y,_??null,P,$,Pe,W,le,ye,Vl),y.context=S2(null),_=y.current,P=Go(),P=Zn(P),$=Tu(P),$.callback=null,dc(_,$,P),_=P,y.current.lanes=_,zt(y,_),Qh(y),g[bs]=y.current,pS(g),new RC(y)},RS.version="19.2.1",RS}var SO;function pfe(){if(SO)return MD.exports;SO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),MD.exports=ffe(),MD.exports}var gfe=pfe();const mfe=qg(gfe);var wO="popstate";function Afe(t={}){function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return RN("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:p_(i)}return vfe(e,n,null,t)}function ua(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yfe(){return Math.random().toString(36).substring(2,10)}function _O(t,e){return{usr:t.state,key:t.key,idx:e}}function RN(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?RE(e):e,state:n,key:e&&e.key||r||yfe()}}function p_({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function RE(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function vfe(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o="POP",l=null,c=u();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function u(){return(a.state||{idx:null}).idx}function h(){o="POP";let A=u(),x=A==null?null:A-c;c=A,l&&l({action:o,location:v.location,delta:x})}function f(A,x){o="PUSH";let E=RN(v.location,A,x);c=u()+1;let w=_O(E,c),B=v.createHref(E);try{a.pushState(w,"",B)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(B)}s&&l&&l({action:o,location:v.location,delta:1})}function p(A,x){o="REPLACE";let E=RN(v.location,A,x);c=u();let w=_O(E,c),B=v.createHref(E);a.replaceState(w,"",B),s&&l&&l({action:o,location:v.location,delta:0})}function m(A){return xfe(A)}let v={get action(){return o},get location(){return t(i,a)},listen(A){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(wO,h),l=A,()=>{i.removeEventListener(wO,h),l=null}},createHref(A){return e(i,A)},createURL:m,encodeLocation(A){let x=m(A);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:p,go(A){return a.go(A)}};return v}function xfe(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ua(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:p_(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function wq(t,e,n="/"){return bfe(t,e,n,!1)}function bfe(t,e,n,r){let i=typeof e=="string"?RE(e):e,s=B0(i.pathname||"/",n);if(s==null)return null;let a=_q(t);Cfe(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=Pfe(s);o=Dfe(a[l],c,r)}return o}function _q(t,e=[],n=[],r="",i=!1){let s=(a,o,l=i,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(r)&&l)return;ua(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length)}let h=y0([r,u.relativePath]),f=n.concat(u);a.children&&a.children.length>0&&(ua(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),_q(a.children,e,f,h,l)),!(a.path==null&&!a.index)&&e.push({path:h,score:Tfe(h,a.index),routesMeta:f})};return t.forEach((a,o)=>{if(a.path===""||!a.path?.includes("?"))s(a,o);else for(let l of Iq(a.path))s(a,o,!0,l)}),e}function Iq(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=Iq(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function Cfe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Mfe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Efe=/^:[\w-]+$/,Sfe=3,wfe=2,_fe=1,Ife=10,Bfe=-2,IO=t=>t==="*";function Tfe(t,e){let n=t.split("/"),r=n.length;return n.some(IO)&&(r+=Bfe),e&&(r+=wfe),n.filter(i=>!IO(i)).reduce((i,s)=>i+(Efe.test(s)?Sfe:s===""?_fe:Ife),r)}function Mfe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Dfe(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=vT({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=vT({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(i,h.params),a.push({params:i,pathname:y0([s,h.pathname]),pathnameBase:jfe(y0([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=y0([s,h.pathnameBase]))}return a}function vT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Rfe(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:h},f)=>{if(u==="*"){let m=o[f]||"";a=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=o[f];return h&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function Rfe(t,e=!1,n=!0){cf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Pfe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cf(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function B0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var kfe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nfe=t=>kfe.test(t);function Lfe(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?RE(t):t,s;if(n)if(Nfe(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),cf(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?s=BO(n.substring(1),"/"):s=BO(n,e)}else s=e;return{pathname:s,search:Ofe(r),hash:zfe(i)}}function BO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function kD(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ffe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function m8(t){let e=Ffe(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function A8(t,e,n,r=!1){let i;typeof t=="string"?i=RE(t):(i={...t},ua(!i.pathname||!i.pathname.includes("?"),kD("?","pathname","search",i)),ua(!i.pathname||!i.pathname.includes("#"),kD("#","pathname","hash",i)),ua(!i.search||!i.search.includes("#"),kD("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let h=e.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}o=h>=0?e[h]:"/"}let l=Lfe(i,o),c=a&&a!=="/"&&a.endsWith("/"),u=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var y0=t=>t.join("/").replace(/\/\/+/g,"/"),jfe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ofe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,zfe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $fe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Qfe(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Bq=["POST","PUT","PATCH","DELETE"];new Set(Bq);var Ufe=["GET",...Bq];new Set(Ufe);var PE=C.createContext(null);PE.displayName="DataRouter";var PM=C.createContext(null);PM.displayName="DataRouterState";C.createContext(!1);var Tq=C.createContext({isTransitioning:!1});Tq.displayName="ViewTransition";var Hfe=C.createContext(new Map);Hfe.displayName="Fetchers";var Gfe=C.createContext(null);Gfe.displayName="Await";var pf=C.createContext(null);pf.displayName="Navigation";var oI=C.createContext(null);oI.displayName="Location";var Lp=C.createContext({outlet:null,matches:[],isDataRoute:!1});Lp.displayName="Route";var y8=C.createContext(null);y8.displayName="RouteError";function Vfe(t,{relative:e}={}){ua(kE(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=C.useContext(pf),{hash:i,pathname:s,search:a}=cI(t,{relative:e}),o=s;return n!=="/"&&(o=s==="/"?n:y0([n,s])),r.createHref({pathname:o,search:a,hash:i})}function kE(){return C.useContext(oI)!=null}function j0(){return ua(kE(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(oI).location}var Mq="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Dq(t){C.useContext(pf).static||C.useLayoutEffect(t)}function lI(){let{isDataRoute:t}=C.useContext(Lp);return t?spe():Wfe()}function Wfe(){ua(kE(),"useNavigate() may be used only in the context of a <Router> component.");let t=C.useContext(PE),{basename:e,navigator:n}=C.useContext(pf),{matches:r}=C.useContext(Lp),{pathname:i}=j0(),s=JSON.stringify(m8(r)),a=C.useRef(!1);return Dq(()=>{a.current=!0}),C.useCallback((l,c={})=>{if(cf(a.current,Mq),!a.current)return;if(typeof l=="number"){n.go(l);return}let u=A8(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:y0([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,s,i,t])}C.createContext(null);function Fb(){let{matches:t}=C.useContext(Lp),e=t[t.length-1];return e?e.params:{}}function cI(t,{relative:e}={}){let{matches:n}=C.useContext(Lp),{pathname:r}=j0(),i=JSON.stringify(m8(n));return C.useMemo(()=>A8(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Kfe(t,e){return Rq(t,e)}function Rq(t,e,n,r,i){ua(kE(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=C.useContext(pf),{matches:a}=C.useContext(Lp),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",h=o&&o.route;{let E=h&&h.path||"";Pq(c,!h||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let f=j0(),p;if(e){let E=typeof e=="string"?RE(e):e;ua(u==="/"||E.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${E.pathname}" was given in the \`location\` prop.`),p=E}else p=f;let m=p.pathname||"/",v=m;if(u!=="/"){let E=u.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(E.length).join("/")}let A=wq(t,{pathname:v});cf(h||A!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),cf(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=Zfe(A&&A.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:y0([u,s.encodeLocation?s.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?u:y0([u,s.encodeLocation?s.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),a,n,r,i);return e&&x?C.createElement(oI.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},x):x}function qfe(){let t=ipe(),e=$fe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:s},"ErrorBoundary")," or"," ",C.createElement("code",{style:s},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:i},n):null,a)}var Yfe=C.createElement(qfe,null),Xfe=class extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?C.createElement(Lp.Provider,{value:this.props.routeContext},C.createElement(y8.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Jfe({routeContext:t,match:e,children:n}){let r=C.useContext(PE);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(Lp.Provider,{value:t},n)}function Zfe(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n?.errors;if(a!=null){let u=s.findIndex(h=>h.route.id&&a?.[h.route.id]!==void 0);ua(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let o=!1,l=-1;if(n)for(let u=0;u<s.length;u++){let h=s[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(l=u),h.route.id){let{loaderData:f,errors:p}=n,m=h.route.loader&&!f.hasOwnProperty(h.route.id)&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let c=n&&r?(u,h)=>{r(u,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:Qfe(n.matches),errorInfo:h})}:void 0;return s.reduceRight((u,h,f)=>{let p,m=!1,v=null,A=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,v=h.route.errorElement||Yfe,o&&(l<0&&f===0?(Pq("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,A=null):l===f&&(m=!0,A=h.route.hydrateFallbackElement||null)));let x=e.concat(s.slice(0,f+1)),E=()=>{let w;return p?w=v:m?w=A:h.route.Component?w=C.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=u,C.createElement(Jfe,{match:h,routeContext:{outlet:u,matches:x,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?C.createElement(Xfe,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:E(),routeContext:{outlet:null,matches:x,isDataRoute:!0},onError:c}):E()},null)}function v8(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function epe(t){let e=C.useContext(PE);return ua(e,v8(t)),e}function tpe(t){let e=C.useContext(PM);return ua(e,v8(t)),e}function npe(t){let e=C.useContext(Lp);return ua(e,v8(t)),e}function x8(t){let e=npe(t),n=e.matches[e.matches.length-1];return ua(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function rpe(){return x8("useRouteId")}function ipe(){let t=C.useContext(y8),e=tpe("useRouteError"),n=x8("useRouteError");return t!==void 0?t:e.errors?.[n]}function spe(){let{router:t}=epe("useNavigate"),e=x8("useNavigate"),n=C.useRef(!1);return Dq(()=>{n.current=!0}),C.useCallback(async(i,s={})=>{cf(n.current,Mq),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var TO={};function Pq(t,e,n){!e&&!TO[t]&&(TO[t]=!0,cf(!1,n))}C.memo(ape);function ape({routes:t,future:e,state:n,unstable_onError:r}){return Rq(t,void 0,n,r,e)}function ope({to:t,replace:e,state:n,relative:r}){ua(kE(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=C.useContext(pf);cf(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=C.useContext(Lp),{pathname:a}=j0(),o=lI(),l=A8(t,m8(s),a,r==="path"),c=JSON.stringify(l);return C.useEffect(()=>{o(JSON.parse(c),{replace:e,state:n,relative:r})},[o,c,r,e,n]),null}function g1(t){ua(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lpe({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1,unstable_useTransitions:a}){ua(!kE(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=C.useMemo(()=>({basename:o,navigator:i,static:s,unstable_useTransitions:a,future:{}}),[o,i,s,a]);typeof n=="string"&&(n=RE(n));let{pathname:c="/",search:u="",hash:h="",state:f=null,key:p="default"}=n,m=C.useMemo(()=>{let v=B0(c,o);return v==null?null:{location:{pathname:v,search:u,hash:h,state:f,key:p},navigationType:r}},[o,c,u,h,f,p,r]);return cf(m!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:C.createElement(pf.Provider,{value:l},C.createElement(oI.Provider,{children:e,value:m}))}function cpe({children:t,location:e}){return Kfe(PN(t),e)}function PN(t,e=[]){let n=[];return C.Children.forEach(t,(r,i)=>{if(!C.isValidElement(r))return;let s=[...e,i];if(r.type===C.Fragment){n.push.apply(n,PN(r.props.children,s));return}ua(r.type===g1,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ua(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=PN(r.props.children,s)),n.push(a)}),n}var $3="get",Q3="application/x-www-form-urlencoded";function kM(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function upe(t){return kM(t)&&t.tagName.toLowerCase()==="button"}function dpe(t){return kM(t)&&t.tagName.toLowerCase()==="form"}function hpe(t){return kM(t)&&t.tagName.toLowerCase()==="input"}function fpe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ppe(t,e){return t.button===0&&(!e||e==="_self")&&!fpe(t)}var L2=null;function gpe(){if(L2===null)try{new FormData(document.createElement("form"),0),L2=!1}catch{L2=!0}return L2}var mpe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ND(t){return t!=null&&!mpe.has(t)?(cf(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Q3}"`),null):t}function Ape(t,e){let n,r,i,s,a;if(dpe(t)){let o=t.getAttribute("action");r=o?B0(o,e):null,n=t.getAttribute("method")||$3,i=ND(t.getAttribute("enctype"))||Q3,s=new FormData(t)}else if(upe(t)||hpe(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(r=l?B0(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||$3,i=ND(t.getAttribute("formenctype"))||ND(o.getAttribute("enctype"))||Q3,s=new FormData(o,t),!gpe()){let{name:c,type:u,value:h}=t;if(u==="image"){let f=c?`${c}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else c&&s.append(c,h)}}else{if(kM(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=$3,r=null,i=Q3,a=t}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function b8(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ype(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&B0(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function vpe(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xpe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function bpe(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await vpe(s,n);return a.links?a.links():[]}return[]}));return wpe(r.flat(1).filter(xpe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function MO(t,e,n,r,i,s){let a=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,o=(l,c)=>n[c].pathname!==l.pathname||n[c].route.path?.endsWith("*")&&n[c].params["*"]!==l.params["*"];return s==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?e.filter((l,c)=>{let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Cpe(t,e,{includeHydrateFallback:n}={}){return Epe(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Epe(t){return[...new Set(t)]}function Spe(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function wpe(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(Spe(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function kq(){let t=C.useContext(PE);return b8(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function _pe(){let t=C.useContext(PM);return b8(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var C8=C.createContext(void 0);C8.displayName="FrameworkContext";function Nq(){let t=C.useContext(C8);return b8(t,"You must render this element inside a <HydratedRouter> element"),t}function Ipe(t,e){let n=C.useContext(C8),[r,i]=C.useState(!1),[s,a]=C.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:h}=e,f=C.useRef(null);C.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let v=x=>{x.forEach(E=>{a(E.isIntersecting)})},A=new IntersectionObserver(v,{threshold:.5});return f.current&&A.observe(f.current),()=>{A.disconnect()}}},[t]),C.useEffect(()=>{if(r){let v=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(v)}}},[r]);let p=()=>{i(!0)},m=()=>{i(!1),a(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:PS(o,p),onBlur:PS(l,m),onMouseEnter:PS(c,p),onMouseLeave:PS(u,m),onTouchStart:PS(h,p)}]:[!1,f,{}]}function PS(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Bpe({page:t,...e}){let{router:n}=kq(),r=C.useMemo(()=>wq(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?C.createElement(Mpe,{page:t,matches:r,...e}):null}function Tpe(t){let{manifest:e,routeModules:n}=Nq(),[r,i]=C.useState([]);return C.useEffect(()=>{let s=!1;return bpe(t,e,n).then(a=>{s||i(a)}),()=>{s=!0}},[t,e,n]),r}function Mpe({page:t,matches:e,...n}){let r=j0(),{manifest:i,routeModules:s}=Nq(),{basename:a}=kq(),{loaderData:o,matches:l}=_pe(),c=C.useMemo(()=>MO(t,e,l,i,r,"data"),[t,e,l,i,r]),u=C.useMemo(()=>MO(t,e,l,i,r,"assets"),[t,e,l,i,r]),h=C.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let m=new Set,v=!1;if(e.forEach(x=>{let E=i.routes[x.route.id];!E||!E.hasLoader||(!c.some(w=>w.route.id===x.route.id)&&x.route.id in o&&s[x.route.id]?.shouldRevalidate||E.hasClientLoader?v=!0:m.add(x.route.id))}),m.size===0)return[];let A=ype(t,a,"data");return v&&m.size>0&&A.searchParams.set("_routes",e.filter(x=>m.has(x.route.id)).map(x=>x.route.id).join(",")),[A.pathname+A.search]},[a,o,r,i,c,e,t,s]),f=C.useMemo(()=>Cpe(u,i),[u,i]),p=Tpe(u);return C.createElement(C.Fragment,null,h.map(m=>C.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...n})),f.map(m=>C.createElement("link",{key:m,rel:"modulepreload",href:m,...n})),p.map(({key:m,link:v})=>C.createElement("link",{key:m,nonce:n.nonce,...v})))}function Dpe(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Lq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Lq&&(window.__reactRouterVersion="7.10.1")}catch{}function Rpe({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=C.useRef();i.current==null&&(i.current=Afe({window:r,v5Compat:!0}));let s=i.current,[a,o]=C.useState({action:s.action,location:s.location}),l=C.useCallback(c=>{n===!1?o(c):C.startTransition(()=>o(c))},[n]);return C.useLayoutEffect(()=>s.listen(l),[s,l]),C.createElement(lpe,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:s,unstable_useTransitions:n===!0})}var Fq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jq=C.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:h,...f},p){let{basename:m,unstable_useTransitions:v}=C.useContext(pf),A=typeof c=="string"&&Fq.test(c),x,E=!1;if(typeof c=="string"&&A&&(x=c,Lq))try{let L=new URL(window.location.href),F=c.startsWith("//")?new URL(L.protocol+c):new URL(c),z=B0(F.pathname,m);F.origin===L.origin&&z!=null?c=z+F.search+F.hash:E=!0}catch{cf(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=Vfe(c,{relative:i}),[B,D,T]=Ipe(r,f),M=Lpe(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:i,viewTransition:h,unstable_useTransitions:v});function R(L){e&&e(L),L.defaultPrevented||M(L)}let k=C.createElement("a",{...f,...T,href:x||w,onClick:E||s?e:R,ref:Dpe(p,D),target:l,"data-discover":!A&&n==="render"?"true":void 0});return B&&!A?C.createElement(C.Fragment,null,k,C.createElement(Bpe,{page:w})):k});jq.displayName="Link";var Ppe=C.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:o,children:l,...c},u){let h=cI(a,{relative:c.relative}),f=j0(),p=C.useContext(PM),{navigator:m,basename:v}=C.useContext(pf),A=p!=null&&$pe(h)&&o===!0,x=m.encodeLocation?m.encodeLocation(h).pathname:h.pathname,E=f.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(E=E.toLowerCase(),w=w?w.toLowerCase():null,x=x.toLowerCase()),w&&v&&(w=B0(w,v)||w);const B=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let D=E===x||!i&&E.startsWith(x)&&E.charAt(B)==="/",T=w!=null&&(w===x||!i&&w.startsWith(x)&&w.charAt(x.length)==="/"),M={isActive:D,isPending:T,isTransitioning:A},R=D?e:void 0,k;typeof r=="function"?k=r(M):k=[r,D?"active":null,T?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let L=typeof s=="function"?s(M):s;return C.createElement(jq,{...c,"aria-current":R,className:k,ref:u,style:L,to:a,viewTransition:o},typeof l=="function"?l(M):l)});Ppe.displayName="NavLink";var kpe=C.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:a=$3,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:h,...f},p)=>{let{unstable_useTransitions:m}=C.useContext(pf),v=Ope(),A=zpe(o,{relative:c}),x=a.toLowerCase()==="get"?"get":"post",E=typeof o=="string"&&Fq.test(o),w=B=>{if(l&&l(B),B.defaultPrevented)return;B.preventDefault();let D=B.nativeEvent.submitter,T=D?.getAttribute("formmethod")||a,M=()=>v(D||B.currentTarget,{fetcherKey:e,method:T,navigate:n,replace:i,state:s,relative:c,preventScrollReset:u,viewTransition:h});m&&n!==!1?C.startTransition(()=>M()):M()};return C.createElement("form",{ref:p,method:x,action:A,onSubmit:r?l:w,...f,"data-discover":!E&&t==="render"?"true":void 0})});kpe.displayName="Form";function Npe(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Oq(t){let e=C.useContext(PE);return ua(e,Npe(t)),e}function Lpe(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a,unstable_useTransitions:o}={}){let l=lI(),c=j0(),u=cI(t,{relative:s});return C.useCallback(h=>{if(ppe(h,e)){h.preventDefault();let f=n!==void 0?n:p_(c)===p_(u),p=()=>l(t,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:a});o?C.startTransition(()=>p()):p()}},[c,l,u,n,r,e,t,i,s,a,o])}var Fpe=0,jpe=()=>`__${String(++Fpe)}__`;function Ope(){let{router:t}=Oq("useSubmit"),{basename:e}=C.useContext(pf),n=rpe(),r=t.fetch,i=t.navigate;return C.useCallback(async(s,a={})=>{let{action:o,method:l,encType:c,formData:u,body:h}=Ape(s,e);if(a.navigate===!1){let f=a.fetcherKey||jpe();await r(f,n,a.action||o,{preventScrollReset:a.preventScrollReset,formData:u,body:h,formMethod:a.method||l,formEncType:a.encType||c,flushSync:a.flushSync})}else await i(a.action||o,{preventScrollReset:a.preventScrollReset,formData:u,body:h,formMethod:a.method||l,formEncType:a.encType||c,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,i,e,n])}function zpe(t,{relative:e}={}){let{basename:n}=C.useContext(pf),r=C.useContext(Lp);ua(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...cI(t||".",{relative:e})},a=j0();if(t==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(u=>u==="")){o.delete("index"),l.filter(h=>h).forEach(h=>o.append("index",h));let u=o.toString();s.search=u?`?${u}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:y0([n,s.pathname])),p_(s)}function $pe(t,{relative:e}={}){let n=C.useContext(Tq);ua(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Oq("useViewTransitionState"),i=cI(t,{relative:e});if(!n.isTransitioning)return!1;let s=B0(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=B0(n.nextLocation.pathname,r)||n.nextLocation.pathname;return vT(i.pathname,a)!=null||vT(i.pathname,s)!=null}var uI=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Qpe={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Upe=class{#e=Qpe;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},Vx=new Upe;function Hpe(t){setTimeout(t,0)}var pb=typeof window>"u"||"Deno"in globalThis;function ed(){}function Gpe(t,e){return typeof t=="function"?t(e):t}function kN(t){return typeof t=="number"&&t>=0&&t!==1/0}function zq(t,e){return Math.max(t+(e||0)-Date.now(),0)}function _y(t,e){return typeof t=="function"?t(e):t}function Xh(t,e){return typeof t=="function"?t(e):t}function DO(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:a,stale:o}=t;if(a){if(r){if(e.queryHash!==E8(a,e.options))return!1}else if(!m_(e.queryKey,a))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||i&&i!==e.state.fetchStatus||s&&!s(e))}function RO(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(g_(e.options.mutationKey)!==g_(s))return!1}else if(!m_(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function E8(t,e){return(e?.queryKeyHashFn||g_)(t)}function g_(t){return JSON.stringify(t,(e,n)=>LN(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function m_(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>m_(t[n],e[n])):!1}var Vpe=Object.prototype.hasOwnProperty;function $q(t,e){if(t===e)return t;const n=PO(t)&&PO(e);if(!n&&!(LN(t)&&LN(e)))return e;const i=(n?t:Object.keys(t)).length,s=n?e:Object.keys(e),a=s.length,o=n?new Array(a):{};let l=0;for(let c=0;c<a;c++){const u=n?c:s[c],h=t[u],f=e[u];if(h===f){o[u]=h,(n?c<i:Vpe.call(t,u))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){o[u]=f;continue}const p=$q(h,f);o[u]=p,p===h&&l++}return i===a&&l===i?t:o}function NN(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function PO(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function LN(t){if(!kO(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!kO(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function kO(t){return Object.prototype.toString.call(t)==="[object Object]"}function Wpe(t){return new Promise(e=>{Vx.setTimeout(e,t)})}function FN(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?$q(t,e):e}function Kpe(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function qpe(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var S8=Symbol();function Qq(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===S8?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Ype(t,e){return typeof t=="function"?t(...e):!!t}var Xpe=class extends uI{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!pb&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},w8=new Xpe;function jN(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var Jpe=Hpe;function Zpe(){let t=[],e=0,n=o=>{o()},r=o=>{o()},i=Jpe;const s=o=>{e?t.push(o):i(()=>{n(o)})},a=()=>{const o=t;t=[],o.length&&i(()=>{r(()=>{o.forEach(l=>{n(l)})})})};return{batch:o=>{let l;e++;try{l=o()}finally{e--,e||a()}return l},batchCalls:o=>(...l)=>{s(()=>{o(...l)})},schedule:s,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{i=o}}}var Xl=Zpe(),ege=class extends uI{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!pb&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},xT=new ege;function tge(t){return Math.min(1e3*2**t,3e4)}function Uq(t){return(t??"online")==="online"?xT.isOnline():!0}var ON=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function Hq(t){let e=!1,n=0,r;const i=jN(),s=()=>i.status!=="pending",a=v=>{if(!s()){const A=new ON(v);f(A),t.onCancel?.(A)}},o=()=>{e=!0},l=()=>{e=!1},c=()=>w8.isFocused()&&(t.networkMode==="always"||xT.isOnline())&&t.canRun(),u=()=>Uq(t.networkMode)&&t.canRun(),h=v=>{s()||(r?.(),i.resolve(v))},f=v=>{s()||(r?.(),i.reject(v))},p=()=>new Promise(v=>{r=A=>{(s()||c())&&v(A)},t.onPause?.()}).then(()=>{r=void 0,s()||t.onContinue?.()}),m=()=>{if(s())return;let v;const A=n===0?t.initialPromise:void 0;try{v=A??t.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(h).catch(x=>{if(s())return;const E=t.retry??(pb?0:3),w=t.retryDelay??tge,B=typeof w=="function"?w(n,x):w,D=E===!0||typeof E=="number"&&n<E||typeof E=="function"&&E(n,x);if(e||!D){f(x);return}n++,t.onFail?.(n,x),Wpe(B).then(()=>c()?void 0:p()).then(()=>{e?f(x):m()})})};return{promise:i,status:()=>i.status,cancel:a,continue:()=>(r?.(),i),cancelRetry:o,continueRetry:l,canStart:u,start:()=>(u()?m():p().then(m),i)}}var Gq=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),kN(this.gcTime)&&(this.#e=Vx.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(pb?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Vx.clearTimeout(this.#e),this.#e=void 0)}},nge=class extends Gq{#e;#t;#n;#i;#r;#o;#a;constructor(t){super(),this.#a=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#i=t.client,this.#n=this.#i.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=LO(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=LO(this.options);e.data!==void 0&&(this.setState(NO(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=FN(this.state.data,t,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#s({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(ed).catch(ed):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Xh(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===S8||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>_y(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!zq(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#a?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const o=this.observers.find(l=>l.options.queryFn);o&&this.setOptions(o.options)}const n=new AbortController,r=o=>{Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},i=()=>{const o=Qq(this.options,e),c=(()=>{const u={client:this.#i,queryKey:this.queryKey,meta:this.meta};return r(u),u})();return this.#a=!1,this.options.persister?this.options.persister(o,c,this):o(c)},a=(()=>{const o={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:i};return r(o),o})();this.options.behavior?.onFetch(a,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#s({type:"fetch",meta:a.fetchOptions?.meta}),this.#r=Hq({initialPromise:e?.initialPromise,fn:a.fetchFn,onCancel:o=>{o instanceof ON&&o.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(o,l)=>{this.#s({type:"failed",failureCount:o,error:l})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{const o=await this.#r.start();if(o===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(o),this.#n.config.onSuccess?.(o,this),this.#n.config.onSettled?.(o,this.state.error,this),o}catch(o){if(o instanceof ON){if(o.silent)return this.#r.promise;if(o.revert){if(this.state.data===void 0)throw o;return this.state.data}}throw this.#s({type:"error",error:o}),this.#n.config.onError?.(o,this),this.#n.config.onSettled?.(this.state.data,o,this),o}finally{this.scheduleGc()}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Vq(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,...NO(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Xl.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function Vq(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Uq(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function NO(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function LO(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var rge=class extends uI{constructor(t,e){super(),this.options=e,this.#e=t,this.#s=null,this.#a=jN(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#i=void 0;#r;#o;#a;#s;#g;#h;#f;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),FO(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return zN(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return zN(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#b(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Xh(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#C(),this.#t.setOptions(this.options),e._defaulted&&!NN(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&jO(this.#t,n,this.options,e)&&this.#d(),this.updateResult(),r&&(this.#t!==n||Xh(this.options.enabled,this.#t)!==Xh(e.enabled,this.#t)||_y(this.options.staleTime,this.#t)!==_y(e.staleTime,this.#t))&&this.#m();const i=this.#A();r&&(this.#t!==n||Xh(this.options.enabled,this.#t)!==Xh(e.enabled,this.#t)||i!==this.#l)&&this.#y(i)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return sge(this,n)&&(this.#i=n,this.#o=this.options,this.#r=this.#t.state),n}getCurrentResult(){return this.#i}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#d(t){this.#C();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(ed)),e}#m(){this.#x();const t=_y(this.options.staleTime,this.#t);if(pb||this.#i.isStale||!kN(t))return;const n=zq(this.#i.dataUpdatedAt,t)+1;this.#c=Vx.setTimeout(()=>{this.#i.isStale||this.updateResult()},n)}#A(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(t){this.#b(),this.#l=t,!(pb||Xh(this.options.enabled,this.#t)===!1||!kN(this.#l)||this.#l===0)&&(this.#u=Vx.setInterval(()=>{(this.options.refetchIntervalInBackground||w8.isFocused())&&this.#d()},this.#l))}#v(){this.#m(),this.#y(this.#A())}#x(){this.#c&&(Vx.clearTimeout(this.#c),this.#c=void 0)}#b(){this.#u&&(Vx.clearInterval(this.#u),this.#u=void 0)}createResult(t,e){const n=this.#t,r=this.options,i=this.#i,s=this.#r,a=this.#o,l=t!==n?t.state:this.#n,{state:c}=t;let u={...c},h=!1,f;if(e._optimisticResults){const R=this.hasListeners(),k=!R&&FO(t,e),L=R&&jO(t,n,e,r);(k||L)&&(u={...u,...Vq(c.data,t.options)}),e._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:p,errorUpdatedAt:m,status:v}=u;f=u.data;let A=!1;if(e.placeholderData!==void 0&&f===void 0&&v==="pending"){let R;i?.isPlaceholderData&&e.placeholderData===a?.placeholderData?(R=i.data,A=!0):R=typeof e.placeholderData=="function"?e.placeholderData(this.#f?.state.data,this.#f):e.placeholderData,R!==void 0&&(v="success",f=FN(i?.data,R,e),h=!0)}if(e.select&&f!==void 0&&!A)if(i&&f===s?.data&&e.select===this.#g)f=this.#h;else try{this.#g=e.select,f=e.select(f),f=FN(i?.data,f,e),this.#h=f,this.#s=null}catch(R){this.#s=R}this.#s&&(p=this.#s,f=this.#h,m=Date.now(),v="error");const x=u.fetchStatus==="fetching",E=v==="pending",w=v==="error",B=E&&x,D=f!==void 0,M={status:v,fetchStatus:u.fetchStatus,isPending:E,isSuccess:v==="success",isError:w,isInitialLoading:B,isLoading:B,data:f,dataUpdatedAt:u.dataUpdatedAt,error:p,errorUpdatedAt:m,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>l.dataUpdateCount||u.errorUpdateCount>l.errorUpdateCount,isFetching:x,isRefetching:x&&!E,isLoadingError:w&&!D,isPaused:u.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:w&&D,isStale:_8(t,e),refetch:this.refetch,promise:this.#a,isEnabled:Xh(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const R=F=>{M.status==="error"?F.reject(M.error):M.data!==void 0&&F.resolve(M.data)},k=()=>{const F=this.#a=M.promise=jN();R(F)},L=this.#a;switch(L.status){case"pending":t.queryHash===n.queryHash&&R(L);break;case"fulfilled":(M.status==="error"||M.data!==L.value)&&k();break;case"rejected":(M.status!=="error"||M.error!==L.reason)&&k();break}}return M}updateResult(){const t=this.#i,e=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#o=this.options,this.#r.data!==void 0&&(this.#f=this.#t),NN(e,t))return;this.#i=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!this.#p.size)return!0;const s=new Set(i??this.#p);return this.options.throwOnError&&s.add("error"),Object.keys(this.#i).some(a=>{const o=a;return this.#i[o]!==t[o]&&s.has(o)})};this.#E({listeners:n()})}#C(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#E(t){Xl.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function ige(t,e){return Xh(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function FO(t,e){return ige(t,e)||t.state.data!==void 0&&zN(t,e,e.refetchOnMount)}function zN(t,e,n){if(Xh(e.enabled,t)!==!1&&_y(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&_8(t,e)}return!1}function jO(t,e,n,r){return(t!==e||Xh(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&_8(t,n)}function _8(t,e){return Xh(e.enabled,t)!==!1&&t.isStaleByTime(_y(e.staleTime,t))}function sge(t,e){return!NN(t.getCurrentResult(),e)}function OO(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],a=e.state.data?.pageParams||[];let o={pages:[],pageParams:[]},l=0;const c=async()=>{let u=!1;const h=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(e.signal.aborted?u=!0:e.signal.addEventListener("abort",()=>{u=!0}),e.signal)})},f=Qq(e.options,e.fetchOptions),p=async(m,v,A)=>{if(u)return Promise.reject();if(v==null&&m.pages.length)return Promise.resolve(m);const E=(()=>{const T={client:e.client,queryKey:e.queryKey,pageParam:v,direction:A?"backward":"forward",meta:e.options.meta};return h(T),T})(),w=await f(E),{maxPages:B}=e.options,D=A?qpe:Kpe;return{pages:D(m.pages,w,B),pageParams:D(m.pageParams,v,B)}};if(i&&s.length){const m=i==="backward",v=m?age:zO,A={pages:s,pageParams:a},x=v(r,A);o=await p(A,x,m)}else{const m=t??s.length;do{const v=l===0?a[0]??r.initialPageParam:zO(r,o);if(l>0&&v==null)break;o=await p(o,v),l++}while(l<m)}return o};e.options.persister?e.fetchFn=()=>e.options.persister?.(c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=c}}}function zO(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function age(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var oge=class extends Gq{#e;#t;#n;#i;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||lge(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#r({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=Hq({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(s,a)=>{this.#r({type:"failed",failureCount:s,error:a})},onPause:()=>{this.#r({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",i=!this.#i.canStart();try{if(r)e();else{this.#r({type:"pending",variables:t,isPaused:i}),await this.#n.config.onMutate?.(t,this,n);const a=await this.options.onMutate?.(t,n);a!==this.state.context&&this.#r({type:"pending",context:a,variables:t,isPaused:i})}const s=await this.#i.start();return await this.#n.config.onSuccess?.(s,t,this.state.context,this,n),await this.options.onSuccess?.(s,t,this.state.context,n),await this.#n.config.onSettled?.(s,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(s,null,t,this.state.context,n),this.#r({type:"success",data:s}),s}catch(s){try{throw await this.#n.config.onError?.(s,t,this.state.context,this,n),await this.options.onError?.(s,t,this.state.context,n),await this.#n.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,s,t,this.state.context,n),s}finally{this.#r({type:"error",error:s})}}finally{this.#n.runNext(this)}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Xl.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function lge(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var cge=class extends uI{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new oge({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=F2(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=F2(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=F2(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=F2(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Xl.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>RO(e,n))}findAll(t={}){return this.getAll().filter(e=>RO(t,e))}notify(t){Xl.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Xl.batch(()=>Promise.all(t.map(e=>e.continue().catch(ed))))}};function F2(t){return t.options.scope?.id}var uge=class extends uI{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??E8(r,e);let s=this.get(i);return s||(s=new nge({client:t,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Xl.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>DO(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>DO(t,n)):e}notify(t){Xl.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Xl.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Xl.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},dge=class{#e;#t;#n;#i;#r;#o;#a;#s;constructor(t={}){this.#e=t.queryCache||new uge,this.#t=t.mutationCache||new cge,this.#n=t.defaultOptions||{},this.#i=new Map,this.#r=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=w8.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=xT.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#s?.(),this.#s=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(_y(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(r.queryHash)?.state.data,a=Gpe(e,s);if(a!==void 0)return this.#e.build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return Xl.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Xl.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return Xl.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Xl.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(ed).catch(ed)}invalidateQueries(t,e={}){return Xl.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Xl.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(ed)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(ed)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(_y(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ed).catch(ed)}fetchInfiniteQuery(t){return t.behavior=OO(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ed).catch(ed)}ensureInfiniteQueryData(t){return t.behavior=OO(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return xT.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#i.set(g_(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#i.values()],n={};return e.forEach(r=>{m_(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#r.set(g_(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{m_(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=E8(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===S8&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Wq=C.createContext(void 0),hge=t=>{const e=C.useContext(Wq);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},fge=({client:t,children:e})=>(C.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),d.jsx(Wq.Provider,{value:t,children:e})),Kq=C.createContext(!1),pge=()=>C.useContext(Kq);Kq.Provider;function gge(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var mge=C.createContext(gge()),Age=()=>C.useContext(mge),yge=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},vge=t=>{C.useEffect(()=>{t.clearReset()},[t])},xge=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||Ype(n,[t.error,r])),bge=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Cge=(t,e)=>t.isLoading&&t.isFetching&&!e,Ege=(t,e)=>t?.suspense&&e.isPending,$O=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function Sge(t,e,n){const r=pge(),i=Age(),s=hge(),a=s.defaultQueryOptions(t);s.getDefaultOptions().queries?._experimental_beforeQuery?.(a),a._optimisticResults=r?"isRestoring":"optimistic",bge(a),yge(a,i),vge(i);const o=!s.getQueryCache().get(a.queryHash),[l]=C.useState(()=>new e(s,a)),c=l.getOptimisticResult(a),u=!r&&t.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(h=>{const f=u?l.subscribe(Xl.batchCalls(h)):ed;return l.updateResult(),f},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),C.useEffect(()=>{l.setOptions(a)},[a,l]),Ege(a,c))throw $O(a,l,i);if(xge({result:c,errorResetBoundary:i,throwOnError:a.throwOnError,query:s.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw c.error;return s.getDefaultOptions().queries?._experimental_afterQuery?.(a,c),a.experimental_prefetchInRender&&!pb&&Cge(c,r)&&(o?$O(a,l,i):s.getQueryCache().get(a.queryHash)?.promise)?.catch(ed).finally(()=>{l.updateResult()}),a.notifyOnChangeProps?c:l.trackResult(c)}function NM(t,e){return Sge(t,rge)}const wge="modulepreload",_ge=function(t){return"/xstudio/"+t},QO={},fn=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");i=l(n.map(c=>{if(c=_ge(c),c in QO)return;QO[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":wge,u||(f.as="script"),f.crossOrigin="",f.href=c,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};var gb=Sq();const Ige=qg(gb);const Bge=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Tge=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),UO=t=>{const e=Tge(t);return e.charAt(0).toUpperCase()+e.slice(1)},qq=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Mge=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Dge={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Rge=C.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>C.createElement("svg",{ref:l,...Dge,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:qq("lucide",i),...!s&&!Mge(o)&&{"aria-hidden":"true"},...o},[...a.map(([c,u])=>C.createElement(c,u)),...Array.isArray(s)?s:[s]]));const tt=(t,e)=>{const n=C.forwardRef(({className:r,...i},s)=>C.createElement(Rge,{ref:s,iconNode:e,className:qq(`lucide-${Bge(UO(t))}`,`lucide-${t}`,r),...i}));return n.displayName=UO(t),n};const Pge=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],hy=tt("activity",Pge);const kge=[["rect",{width:"6",height:"14",x:"4",y:"5",rx:"2",key:"1wwnby"}],["rect",{width:"6",height:"10",x:"14",y:"7",rx:"2",key:"1fe6j6"}],["path",{d:"M17 22v-5",key:"4b6g73"}],["path",{d:"M17 7V2",key:"hnrr36"}],["path",{d:"M7 22v-3",key:"1r4jpn"}],["path",{d:"M7 5V2",key:"liy1u9"}]],Nge=tt("align-horizontal-distribute-center",kge);const Lge=[["rect",{width:"6",height:"10",x:"9",y:"7",rx:"2",key:"yn7j0q"}],["path",{d:"M4 22V2",key:"tsjzd3"}],["path",{d:"M20 22V2",key:"1bnhr8"}]],HO=tt("align-horizontal-space-around",Lge);const Fge=[["path",{d:"M22 17h-3",key:"1lwga1"}],["path",{d:"M22 7h-5",key:"o2endc"}],["path",{d:"M5 17H2",key:"1gx9xc"}],["path",{d:"M7 7H2",key:"6bq26l"}],["rect",{x:"5",y:"14",width:"14",height:"6",rx:"2",key:"1qrzuf"}],["rect",{x:"7",y:"4",width:"10",height:"6",rx:"2",key:"we8e9z"}]],jge=tt("align-vertical-distribute-center",Fge);const Oge=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Yq=tt("align-vertical-justify-center",Oge);const zge=[["rect",{width:"14",height:"6",x:"5",y:"12",rx:"2",key:"4l4tp2"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 22h20",key:"272qi7"}]],Xq=tt("align-vertical-justify-end",zge);const $ge=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"6",rx:"2",key:"13squh"}],["path",{d:"M2 2h20",key:"1ennik"}]],Jq=tt("align-vertical-justify-start",$ge);const Qge=[["rect",{width:"10",height:"6",x:"7",y:"9",rx:"2",key:"b1zbii"}],["path",{d:"M22 20H2",key:"1p1f7z"}],["path",{d:"M22 4H2",key:"1b7qnq"}]],Uge=tt("align-vertical-space-around",Qge);const Hge=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M14 8h.01",key:"1primd"}]],$N=tt("app-window-mac",Hge);const Gge=[["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}],["path",{d:"M10 4v4",key:"pp8u80"}],["path",{d:"M2 8h20",key:"d11cs7"}],["path",{d:"M6 4v4",key:"1svtjw"}]],Vge=tt("app-window",Gge);const Wge=[["path",{d:"M19 3H5",key:"1236rx"}],["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m6 15 6 6 6-6",key:"h15q88"}]],Kge=tt("arrow-down-from-line",Wge);const qge=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Yge=tt("arrow-down",qge);const Xge=[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M21 12H7",key:"13ipq5"}],["path",{d:"m15 18 6-6-6-6",key:"6tx3qv"}]],Jge=tt("arrow-right-from-line",Xge);const Zge=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],eme=tt("arrow-right-left",Zge);const tme=[["path",{d:"M17 12H3",key:"8awo09"}],["path",{d:"m11 18 6-6-6-6",key:"8c2y43"}],["path",{d:"M21 5v14",key:"nzette"}]],nme=tt("arrow-right-to-line",tme);const rme=[["path",{d:"M12 6v12",key:"1vza4d"}],["path",{d:"M17.196 9 6.804 15",key:"1ah31z"}],["path",{d:"m6.804 9 10.392 6",key:"1b6pxd"}]],ime=tt("asterisk",rme);const sme=[["path",{d:"M4 20h16",key:"14thso"}],["path",{d:"m6 16 6-12 6 12",key:"1b4byz"}],["path",{d:"M8 12h8",key:"1wcyev"}]],ame=tt("baseline",sme);const ome=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],lme=tt("bell",ome);const cme=[["path",{d:"M12 6V2H8",key:"1155em"}],["path",{d:"M15 11v2",key:"i11awn"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 16a2 2 0 0 1-2 2H8.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 4 20.286V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2z",key:"11gyqh"}],["path",{d:"M9 11v2",key:"1ueba0"}]],ume=tt("bot-message-square",cme);const dme=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Zq=tt("bot",dme);const hme=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Zi=tt("box",hme);const fme=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],eY=tt("building-2",fme);const pme=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],GO=tt("calendar-check",pme);const gme=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],mme=tt("calendar-days",gme);const Ame=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],yme=tt("calendar",Ame);const vme=[["path",{d:"M10 9v7",key:"ylp826"}],["path",{d:"M14 6v10",key:"1jy4vg"}],["circle",{cx:"17.5",cy:"12.5",r:"3.5",key:"1a9481"}],["circle",{cx:"6.5",cy:"12.5",r:"3.5",key:"2jlv1r"}]],xme=tt("case-lower",vme);const bme=[["path",{d:"m2 16 4.039-9.69a.5.5 0 0 1 .923 0L11 16",key:"d5nyq2"}],["path",{d:"M22 9v7",key:"pvm9v3"}],["path",{d:"M3.304 13h6.392",key:"1q3zxz"}],["circle",{cx:"18.5",cy:"12.5",r:"3.5",key:"z97x68"}]],Cme=tt("case-sensitive",bme);const Eme=[["path",{d:"M15 11h4.5a1 1 0 0 1 0 5h-4a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h3a1 1 0 0 1 0 5",key:"nxs35"}],["path",{d:"m2 16 4.039-9.69a.5.5 0 0 1 .923 0L11 16",key:"d5nyq2"}],["path",{d:"M3.304 13h6.392",key:"1q3zxz"}]],Sme=tt("case-upper",Eme);const wme=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],tY=tt("chart-column",wme);const _me=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],Ime=tt("chart-line",_me);const Bme=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],nY=tt("check",Bme);const Tme=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],zs=tt("chevron-down",Tme);const Mme=[["path",{d:"m17 18-6-6 6-6",key:"1yerx2"}],["path",{d:"M7 6v12",key:"1p53r6"}]],VO=tt("chevron-first",Mme);const Dme=[["path",{d:"m7 18 6-6-6-6",key:"lwmzdw"}],["path",{d:"M17 6v12",key:"1o0aio"}]],LD=tt("chevron-last",Dme);const Rme=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Sl=tt("chevron-right",Rme);const Pme=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],A_=tt("chevron-left",Pme);const kme=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],y_=tt("chevron-up",kme);const Nme=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],I8=tt("circle-alert",Nme);const Lme=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],rY=tt("circle-check-big",Lme);const Fme=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],eE=tt("circle-plus",Fme);const jme=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]],Ome=tt("clipboard-copy",jme);const zme=[["path",{d:"M11 14h10",key:"1w8e9d"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v1.344",key:"1e62lh"}],["path",{d:"m17 18 4-4-4-4",key:"z2g111"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113",key:"bjbb7m"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]],B8=tt("clipboard-paste",zme);const $me=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],iY=tt("clock",$me);const Qme=[["path",{d:"M12 12v4",key:"tww15h"}],["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M17 18h.5a1 1 0 0 0 0-9h-1.79A7 7 0 1 0 7 17.708",key:"xsb5ju"}]],Ume=tt("cloud-alert",Qme);const Hme=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],sY=tt("cloud-upload",Hme);const Gme=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],aY=tt("cloud",Gme);const Vme=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],dI=tt("code",Vme);const Wme=[["line",{x1:"12",x2:"18",y1:"15",y2:"15",key:"1nscbv"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],oY=tt("copy-minus",Wme);const Kme=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],T8=tt("copy",Kme);const qme=[["path",{d:"M20 4v7a4 4 0 0 1-4 4H4",key:"6o5b7l"}],["path",{d:"m9 10-5 5 5 5",key:"1kshq7"}]],Yme=tt("corner-down-left",qme);const Xme=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],wx=tt("cpu",Xme);const Jme=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],qo=tt("database",Jme);const Zme=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],LM=tt("download",Zme);const e0e=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],yy=tt("ellipsis-vertical",e0e);const t0e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vw=tt("eye",t0e);const n0e=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],lY=tt("factory",n0e);const r0e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],WO=tt("file-braces",r0e);const i0e=[["path",{d:"M12.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v9.34",key:"o6klzx"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10.378 12.622a1 1 0 0 1 3 3.003L8.36 20.637a2 2 0 0 1-.854.506l-2.867.837a.5.5 0 0 1-.62-.62l.836-2.869a2 2 0 0 1 .506-.853z",key:"zhnas1"}]],M8=tt("file-pen",i0e);const s0e=[["path",{d:"M11 21a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1",key:"likhh7"}],["path",{d:"M16 16a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1",key:"17ky3x"}],["path",{d:"M21 6a2 2 0 0 0-.586-1.414l-2-2A2 2 0 0 0 17 2h-3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1z",key:"1hyeo0"}]],a0e=tt("file-stack",s0e);const o0e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],D8=tt("file-text",o0e);const l0e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],S1=tt("file",l0e);const c0e=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],u0e=tt("folder-tree",c0e);const d0e=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],bT=tt("folder",d0e);const h0e=[["line",{x1:"22",x2:"2",y1:"6",y2:"6",key:"15w7dq"}],["line",{x1:"22",x2:"2",y1:"18",y2:"18",key:"1ip48p"}],["line",{x1:"6",x2:"6",y1:"2",y2:"22",key:"a2lnyx"}],["line",{x1:"18",x2:"18",y1:"2",y2:"22",key:"8vb6jd"}]],f0e=tt("frame",h0e);const p0e=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],KO=tt("funnel",p0e);const g0e=[["path",{d:"M2 3v18",key:"pzttux"}],["rect",{width:"12",height:"18",x:"6",y:"3",rx:"2",key:"btr8bg"}],["path",{d:"M22 3v18",key:"6jf3v"}]],m0e=tt("gallery-horizontal",g0e);const A0e=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],cY=tt("gauge",A0e);const y0e=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],uY=tt("git-branch",y0e);const v0e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],v_=tt("globe",v0e);const x0e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],dY=tt("grid-3x3",x0e);const b0e=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],C0e=tt("grip-horizontal",b0e);const E0e=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],hY=tt("grip-vertical",E0e);const S0e=[["path",{d:"M3 7V5c0-1.1.9-2 2-2h2",key:"adw53z"}],["path",{d:"M17 3h2c1.1 0 2 .9 2 2v2",key:"an4l38"}],["path",{d:"M21 17v2c0 1.1-.9 2-2 2h-2",key:"144t0e"}],["path",{d:"M7 21H5c-1.1 0-2-.9-2-2v-2",key:"rtnfgi"}],["rect",{width:"7",height:"5",x:"7",y:"7",rx:"1",key:"1eyiv7"}],["rect",{width:"7",height:"5",x:"10",y:"12",rx:"1",key:"1qlmkx"}]],tE=tt("group",S0e);const w0e=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],_0e=tt("hard-drive",w0e);const I0e=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],R8=tt("hash",I0e);const B0e=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],qO=tt("history",B0e);const T0e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],M0e=tt("info",T0e);const D0e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 7h.01",key:"7u93v4"}],["path",{d:"M17 7h.01",key:"14a9sn"}],["path",{d:"M7 17h.01",key:"19xn7k"}],["path",{d:"M17 17h.01",key:"1sd3ek"}]],fY=tt("inspection-panel",D0e);const R0e=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],P0e=tt("italic",R0e);const k0e=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],N0e=tt("key",k0e);const L0e=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],F0e=tt("keyboard",L0e);const j0e=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],x_=tt("layers",j0e);const O0e=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],QN=tt("layout-grid",O0e);const z0e=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],pY=tt("link-2",z0e);const $0e=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],hI=tt("link",$0e);const Q0e=[["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"M3 10a2 2 0 0 0 2 2h3",key:"1npucw"}],["path",{d:"M3 5v12a2 2 0 0 0 2 2h3",key:"x1gjn2"}]],U0e=tt("list-tree",Q0e);const H0e=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],G0e=tt("list",H0e);const V0e=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],W0e=tt("lock",V0e);const K0e=[["path",{d:"m12 15 4 4",key:"lnac28"}],["path",{d:"M2.352 10.648a1.205 1.205 0 0 0 0 1.704l2.296 2.296a1.205 1.205 0 0 0 1.704 0l6.029-6.029a1 1 0 1 1 3 3l-6.029 6.029a1.205 1.205 0 0 0 0 1.704l2.296 2.296a1.205 1.205 0 0 0 1.704 0l6.365-6.367A1 1 0 0 0 8.716 4.282z",key:"nlhkjb"}],["path",{d:"m5 8 4 4",key:"j6kj7e"}]],q0e=tt("magnet",K0e);const Y0e=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],X0e=tt("mail",Y0e);const J0e=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],UN=tt("maximize-2",J0e);const Z0e=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],P8=tt("menu",Z0e);const eAe=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],tAe=tt("message-circle",eAe);const nAe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],gY=tt("message-square",nAe);const rAe=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],iAe=tt("minimize-2",rAe);const sAe=[["path",{d:"M5 12h14",key:"1ays0h"}]],YO=tt("minus",sAe);const aAe=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],oAe=tt("monitor",aAe);const lAe=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Ww=tt("moon",lAe);const cAe=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Kw=tt("mouse-pointer",cAe);const uAe=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],dAe=tt("navigation",uAe);const hAe=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],mY=tt("package",hAe);const fAe=[["rect",{width:"16",height:"6",x:"2",y:"2",rx:"2",key:"jcyz7m"}],["path",{d:"M10 16v-2a2 2 0 0 1 2-2h8a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2",key:"1b9h7c"}],["rect",{width:"4",height:"6",x:"8",y:"16",rx:"1",key:"d6e7yl"}]],pAe=tt("paint-roller",fAe);const gAe=[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]],mAe=tt("paintbrush",gAe);const AAe=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],w1=tt("palette",AAe);const yAe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],fI=tt("panels-top-left",yAe);const vAe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],FM=tt("pen",vAe);const xAe=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],bAe=tt("percent",xAe);const CAe=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],NE=tt("play",CAe);const EAe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Pc=tt("plus",EAe);const SAe=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M17 12h.01",key:"1m0b6t"}],["path",{d:"M7 12h.01",key:"eqddd0"}]],wAe=tt("rectangle-ellipsis",SAe);const _Ae=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],IAe=tt("redo",_Ae);const BAe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],mb=tt("refresh-cw",BAe);const TAe=[["path",{d:"M4 7V4h16v3",key:"9msm58"}],["path",{d:"M5 20h6",key:"1h6pxn"}],["path",{d:"M13 4 8 20",key:"kqq6aj"}],["path",{d:"m15 15 5 5",key:"me55sn"}],["path",{d:"m20 15-5 5",key:"11p7ol"}]],MAe=tt("remove-formatting",TAe);const DAe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],k8=tt("rotate-ccw",DAe);const RAe=[["path",{d:"M10 15v-3",key:"1pjskw"}],["path",{d:"M14 15v-3",key:"1o1mqj"}],["path",{d:"M18 15v-3",key:"cws6he"}],["path",{d:"M2 8V4",key:"3jv1jz"}],["path",{d:"M22 6H2",key:"1iqbfk"}],["path",{d:"M22 8V4",key:"16f4ou"}],["path",{d:"M6 15v-3",key:"1ij1qe"}],["rect",{x:"2",y:"12",width:"20",height:"8",rx:"2",key:"1tqiko"}]],HN=tt("ruler-dimension-line",RAe);const PAe=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],kAe=tt("ruler",PAe);const NAe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],LAe=tt("save",NAe);const FAe=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],XO=tt("scan",FAe);const jAe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Xd=tt("search",jAe);const OAe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],FD=tt("send",OAe);const zAe=[["path",{d:"m16 16-4 4-4-4",key:"3dv8je"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"m8 8 4-4 4 4",key:"2bscm2"}]],$Ae=tt("separator-horizontal",zAe);const QAe=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Fg=tt("settings-2",QAe);const UAe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gf=tt("settings",UAe);const HAe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],GAe=tt("shield",HAe);const VAe=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],AY=tt("shopping-cart",VAe);const WAe=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],KAe=tt("sliders-horizontal",WAe);const qAe=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],YAe=tt("smartphone",qAe);const XAe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],GN=tt("sparkles",XAe);const JAe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ZAe=tt("square-check",JAe);const eye=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],tye=tt("square-check-big",eye);const nye=[["path",{d:"M5 21a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2",key:"as5y1o"}],["path",{d:"M9 21h1",key:"15o7lz"}],["path",{d:"M14 21h1",key:"v9vybs"}]],rye=tt("square-dashed-bottom",nye);const iye=[["path",{d:"M5 3a2 2 0 0 0-2 2",key:"y57alp"}],["path",{d:"M19 3a2 2 0 0 1 2 2",key:"18rm91"}],["path",{d:"M21 19a2 2 0 0 1-2 2",key:"1j7049"}],["path",{d:"M5 21a2 2 0 0 1-2-2",key:"sbafld"}],["path",{d:"M9 3h1",key:"1yesri"}],["path",{d:"M9 21h1",key:"15o7lz"}],["path",{d:"M14 3h1",key:"1ec4yj"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"M3 9v1",key:"1r0deq"}],["path",{d:"M21 9v1",key:"mxsmne"}],["path",{d:"M3 14v1",key:"vnatye"}],["path",{d:"M21 14v1",key:"169vum"}]],sye=tt("square-dashed",iye);const aye=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M9 17c2 0 2.8-1 2.8-2.8V10c0-2 1-3.3 3.2-3",key:"m1af9g"}],["path",{d:"M9 11.2h5.7",key:"3zgcl2"}]],oye=tt("square-function",aye);const lye=[["path",{d:"M12.034 12.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.943l-3.444 1.068a1 1 0 0 0-.66.66l-1.067 3.443a.5.5 0 0 1-.943.033z",key:"xwnzip"}],["path",{d:"M21 11V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6",key:"14rsvq"}]],N8=tt("square-mouse-pointer",lye);const cye=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],uye=tt("square-plus",cye);const dye=[["path",{d:"M21 11a8 8 0 0 0-8-8",key:"1lxwo5"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1dv2y5"}]],hye=tt("square-round-corner",dye);const fye=[["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],pye=tt("square-square",fye);const gye=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Ny=tt("square",gye);const mye=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],yY=tt("star",mye);const Aye=[["rect",{width:"20",height:"6",x:"2",y:"4",rx:"2",key:"qdearl"}],["rect",{width:"20",height:"6",x:"2",y:"14",rx:"2",key:"1xrn6j"}]],yye=tt("stretch-horizontal",Aye);const vye=[["rect",{width:"6",height:"20",x:"4",y:"2",rx:"2",key:"19qu7m"}],["rect",{width:"6",height:"20",x:"14",y:"2",rx:"2",key:"24v0nk"}]],xye=tt("stretch-vertical",vye);const bye=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],Cye=tt("strikethrough",bye);const Eye=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],VN=tt("sun",Eye);const Sye=[["path",{d:"M11 17a4 4 0 0 1-8 0V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2Z",key:"1ldrpk"}],["path",{d:"M16.7 13H19a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H7",key:"11i5po"}],["path",{d:"M 7 17h.01",key:"1euzgo"}],["path",{d:"m11 8 2.3-2.3a2.4 2.4 0 0 1 3.404.004L18.6 7.6a2.4 2.4 0 0 1 .026 3.434L9.9 19.8",key:"o2gii7"}]],b_=tt("swatch-book",Sye);const wye=[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]],C_=tt("table-2",wye);const _ye=[["path",{d:"M15 3v18",key:"14nvp0"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]],Iye=tt("table-properties",_ye);const Bye=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]],Tye=tt("tablet",Bye);const Mye=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],jM=tt("tag",Mye);const Dye=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],Rye=tt("test-tube",Dye);const Pye=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],vY=tt("text-align-center",Pye);const kye=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],xY=tt("text-align-end",kye);const Nye=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],L8=tt("text-align-start",Nye);const Lye=[["path",{d:"m16 16-3 3 3 3",key:"117b85"}],["path",{d:"M3 12h14.5a1 1 0 0 1 0 7H13",key:"18xa6z"}],["path",{d:"M3 19h6",key:"1ygdsz"}],["path",{d:"M3 5h18",key:"1u36vt"}]],Fye=tt("text-wrap",Lye);const jye=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Oye=tt("toggle-left",jye);const zye=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],$ye=tt("toggle-right",zye);const Qye=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],pu=tt("trash-2",Qye);const Uye=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Gd=tt("trash",Uye);const Hye=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bY=tt("triangle-alert",Hye);const Gye=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Rg=tt("type",Gye);const Vye=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],Wye=tt("underline",Vye);const Kye=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],qye=tt("undo",Kye);const Yye=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Xye=tt("upload",Yye);const Jye=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Zye=tt("user",Jye);const eve=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],F8=tt("users",eve);const tve=[["path",{d:"M8 21s-4-3-4-9 4-9 4-9",key:"uto9ud"}],["path",{d:"M16 3s4 3 4 9-4 9-4 9",key:"4w2vsq"}],["line",{x1:"15",x2:"9",y1:"9",y2:"15",key:"f7djnv"}],["line",{x1:"9",x2:"15",y1:"9",y2:"15",key:"1shsy8"}]],CT=tt("variable",tve);const nve=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],rve=tt("wand-sparkles",nve);const ive=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],WN=tt("workflow",ive);const sve=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],ave=tt("wrench",sve);const ove=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],eh=tt("x",ove);const lve=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],cve=tt("zoom-in",lve);const uve=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ib=tt("zap",uve),Ap=18e3,u0=2400,Wx=1200,JO=4,ZO=.28,j2=30,jD=260,pI=.08,gI=.024,CY=.045,j8=.015,dve=150,hve={type:"text",value:"BESPOKE"},EY={name:"sand",colors:{dark:{primary:{r:.92,g:.78,b:.52},secondary:{r:.75,g:.58,b:.35},dust:{r:.85,g:.72,b:.48}},light:{primary:{r:.35,g:.25,b:.12},secondary:{r:.28,g:.18,b:.08},dust:{r:.42,g:.32,b:.18}}},drift:{primarySpeed:1.2,primaryDirection:-1,lowLayerEffect:2.5,midLayerEffect:1.8,highLayerEffect:.8,waveSpeed:.4,waveScale:.015,clusterStrength:1.5,clusterScale:.008},vortex:{growthRate:.15,maxRadius:180,minRadius:20,maxHeight:250,rotationSpeed:3,spiralTightness:.03,suctionStrength:15,liftForce:8,coreDensity:1,edgeDensity:.3,tiltAmount:.15,tiltDirection:1},form:{turbulence:4,gustStrength:12,gustFrequency:.6,convergenceForce:.85,layerCount:5},particleBaseSize:250,particleSizeVariance:80,layerSizeReduction:.5,blending:"additive",baseAlpha:{low:.7,high:.4},shaderTweaks:{vortexFadeMultiplier:160,formIntensityMultiplier:4,aliveBreathScale:2.5,vibrationScale:.7}};let kC=null,ez=null;function fve(){return kC||(kC=document.createElement("canvas"),kC.width=u0,kC.height=Wx,ez=kC.getContext("2d",{willReadFrequently:!0})),{canvas:kC,ctx:ez}}function Sc(t,e,n=0){return parseFloat(t.getAttribute(e)||String(n))}function tz(t,e,n){const r=t.getAttribute("points")?.trim().split(/\s+|,/).map(Number)||[];if(!(r.length<4)){e.beginPath(),e.moveTo(r[0],r[1]);for(let i=2;i<r.length;i+=2)e.lineTo(r[i],r[i+1]);n&&e.closePath(),e.stroke()}}const pve={path:(t,e)=>{const n=t.getAttribute("d");n&&e.stroke(new Path2D(n))},circle:(t,e)=>{e.beginPath(),e.arc(Sc(t,"cx"),Sc(t,"cy"),Sc(t,"r"),0,Math.PI*2),e.stroke()},line:(t,e)=>{e.beginPath(),e.moveTo(Sc(t,"x1"),Sc(t,"y1")),e.lineTo(Sc(t,"x2"),Sc(t,"y2")),e.stroke()},rect:(t,e)=>{const n=Sc(t,"x"),r=Sc(t,"y"),i=Sc(t,"width"),s=Sc(t,"height"),a=Sc(t,"rx");a>0?(e.beginPath(),e.roundRect(n,r,i,s,a),e.stroke()):e.strokeRect(n,r,i,s)},ellipse:(t,e)=>{e.beginPath(),e.ellipse(Sc(t,"cx"),Sc(t,"cy"),Sc(t,"rx"),Sc(t,"ry"),0,0,Math.PI*2),e.stroke()},polyline:(t,e)=>tz(t,e,!1),polygon:(t,e)=>tz(t,e,!0)};function gve(t,e){const r=new DOMParser().parseFromString(t,"image/svg+xml").querySelector("svg");if(!r)return;const i=r.getAttribute("viewBox")?.split(" ").map(Number)||[0,0,24,24],[,,s,a]=i;e.save(),e.translate(u0/2-s*j2/2,Wx/2-a*j2/2),e.scale(j2,j2),e.lineWidth=2,e.strokeStyle=e.fillStyle="white",e.lineCap=e.lineJoin="round",r.querySelectorAll("path, circle, line, rect, ellipse, polyline, polygon").forEach(o=>{const l=pve[o.tagName.toLowerCase()];l&&l(o,e)}),e.restore()}function mve(t,e){e.textAlign="center";const n=u0*.85;e.font=`bold ${jD}px sans-serif`;let r=jD;const i=e.measureText(t).width;i>n&&(r=Math.floor(jD*n/i),e.font=`bold ${r}px sans-serif`);const s=e.measureText(t),a=s.actualBoundingBoxAscent+s.actualBoundingBoxDescent,o=Wx/2+s.actualBoundingBoxAscent-a/2;e.fillText(t,u0/2,o)}function T0(t){const{ctx:e}=fve();e.fillStyle="black",e.fillRect(0,0,u0,Wx),e.fillStyle="white",t.type==="text"?mve(t.value,e):gve(t.value,e);const{data:n}=e.getImageData(0,0,u0,Wx),r=[],i=u0/2,s=Wx/2;for(let o=0;o<Wx;o+=JO)for(let l=0;l<u0;l+=JO)n[(o*u0+l)*4]>128&&r.push((l-i)*ZO,-(o-s)*ZO,(Math.random()-.5)*12);const a=r.length/3;for(;r.length/3<Ap;){const o=Math.floor(Math.random()*a)*3;r.push(r[o]+(Math.random()-.5)*7,r[o+1]+(Math.random()-.5)*7,r[o+2])}return new Float32Array(r.slice(0,Ap*3))}const Ave=`
  vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
  vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
  vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
  vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }

  float snoise(vec3 v) {
    const vec2 C = vec2(1.0/6.0, 1.0/3.0);
    const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);
    vec3 i  = floor(v + dot(v, C.yyy));
    vec3 x0 = v - i + dot(i, C.xxx);
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min(g.xyz, l.zxy);
    vec3 i2 = max(g.xyz, l.zxy);
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy;
    vec3 x3 = x0 - D.yyy;
    i = mod289(i);
    vec4 p = permute(permute(permute(
              i.z + vec4(0.0, i1.z, i2.z, 1.0))
            + i.y + vec4(0.0, i1.y, i2.y, 1.0))
            + i.x + vec4(0.0, i1.x, i2.x, 1.0));
    float n_ = 0.142857142857;
    vec3 ns = n_ * D.wyz - D.xzx;
    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);
    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_);
    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);
    vec4 b0 = vec4(x.xy, y.xy);
    vec4 b1 = vec4(x.zw, y.zw);
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));
    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww;
    vec3 p0 = vec3(a0.xy, h.x);
    vec3 p1 = vec3(a0.zw, h.y);
    vec3 p2 = vec3(a1.xy, h.z);
    vec3 p3 = vec3(a1.zw, h.w);
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2,p2), dot(p3,p3)));
    p0 *= norm.x; p1 *= norm.y; p2 *= norm.z; p3 *= norm.w;
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot(m*m, vec4(dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3)));
  }
`,yve=`
  attribute float random;
  attribute float heightLayer;
  attribute float particleSize;
  attribute vec3 targetPos;
  attribute vec3 prevTargetPos;

  uniform float morphProgress;
  uniform float transitionProgress;
  uniform float time;

  //  
  uniform float vortexActive;
  uniform vec2 vortexCenter;
  uniform float vortexStrength;
  uniform float vortexRadius;
  uniform float vortexHeight;

  // / 
  uniform float primarySpeed;
  uniform float primaryDirection;
  uniform float lowLayerEffect;
  uniform float midLayerEffect;
  uniform float highLayerEffect;
  uniform float waveSpeed;
  uniform float waveScale;
  uniform float clusterStrength;
  uniform float clusterScale;

  //  
  uniform float turbulence;
  uniform float gustStrength;
  uniform float gustFrequency;
  uniform float convergenceForce;

  //  
  uniform float rotationSpeed;
  uniform float spiralTightness;
  uniform float suctionStrength;
  uniform float liftForce;
  uniform float coreDensity;
  uniform float edgeDensity;
  uniform float tiltAmount;
  uniform float tiltDirection;
  uniform float maxVortexHeight;

  //  
  uniform float formIntensityMultiplier;
  uniform float aliveBreathScale;
  uniform float vibrationScale;
  uniform float baseAlphaLow;
  uniform float baseAlphaHigh;

  varying float vAlpha;
  varying float vHeightLayer;
  varying float vMorph;
  varying float vVortexInfluence;
  varying float vDistortion;

  ${Ave}

  void main() {
    vec3 currentTarget = mix(prevTargetPos, targetPos, transitionProgress);
    vec3 pos = position;

    float layerFactor = heightLayer;

    // ========== : /  ==========
    float baseMove = time * primarySpeed;
    float moveNoise = snoise(vec3(pos.x * 0.008, pos.y * 0.008, time * 0.2)) * 0.4;

    //  
    float lowEffect = (1.0 - layerFactor) * lowLayerEffect;
    float lowMove = sin(time * 1.8 + random * 6.28 + pos.x * 0.01) * lowEffect;

    float midEffect = (1.0 - abs(layerFactor - 0.5) * 2.0) * midLayerEffect;
    float midMove = sin(time * 0.6 + pos.y * 0.005 + random * 3.14) * midEffect * 8.0;

    float highEffect = layerFactor * highLayerEffect;
    float highMoveX = cos(time * 0.2 + random * 6.28) * highEffect * 12.0;
    float highMoveY = sin(time * 0.25 + random * 4.0) * highEffect * 10.0;

    // 
    float wave = sin(time * waveSpeed + pos.x * waveScale * 40.0) *
                 cos(time * waveSpeed * 0.6 + pos.y * waveScale * 25.0) *
                 (1.0 - layerFactor) * 4.0;

    // 
    vec3 clusterPos = vec3(pos.x * clusterScale, pos.y * clusterScale, time * 0.1);
    float clusterX = snoise(clusterPos) * clusterStrength * 20.0;
    float clusterY = snoise(clusterPos + vec3(100.0, 0.0, 0.0)) * clusterStrength * 15.0;

    //   (Curl  -     )
    vec3 windPos = vec3(pos.xy * 0.003, time * 0.08);
    float windAngle = snoise(windPos) * 6.28; //   
    vec2 circularWind = vec2(cos(windAngle), sin(windAngle)) * primarySpeed * 8.0;

    //    (  )
    float distFromCenter = length(pos.xy);
    float convergeFactor = smoothstep(100.0, 250.0, distFromCenter);
    vec2 toCenter = -normalize(pos.xy + vec2(0.001)) * convergeFactor * 2.0;

    vec3 driftMove = vec3(
      circularWind.x + moveNoise * 8.0 + highMoveX + clusterX + lowMove + toCenter.x,
      circularWind.y + midMove + wave + clusterY + highMoveY + toCenter.y,
      snoise(vec3(pos.xy * 0.008, time * 0.3)) * 4.0 * (0.3 + layerFactor * 0.7)
    );

    // ==========   ==========
    float vortexInfluence = 0.0;
    vec3 vortexMove = vec3(0.0);

    if (vortexActive > 0.5 && vortexStrength > 0.01) {
      vec2 toVortex = pos.xy - vortexCenter;
      float distToVortex = length(toVortex);
      float normalizedDist = distToVortex / vortexRadius;

      vortexInfluence = smoothstep(1.2, 0.0, normalizedDist) * vortexStrength;

      if (vortexInfluence > 0.01) {
        float angle = atan(toVortex.y, toVortex.x);
        float spiralAngle = angle + time * rotationSpeed * (1.0 + vortexStrength);
        float rotSpeed = rotationSpeed * (1.0 + (1.0 - normalizedDist) * 1.5);
        spiralAngle += time * rotSpeed;

        float spiralRadius = distToVortex * (1.0 + vortexStrength * spiralTightness * 0.3);

        vec2 rotatedPos = vec2(
          cos(spiralAngle) * spiralRadius,
          sin(spiralAngle) * spiralRadius
        );

        float suction = suctionStrength * vortexInfluence * (1.0 - layerFactor * 0.3);
        vec2 suctionDir = -normalize(toVortex + vec2(0.001));

        float lift = liftForce * vortexInfluence * vortexStrength;
        lift *= (1.0 - normalizedDist * 0.4);

        float maxLift = vortexHeight * (1.0 - normalizedDist * 0.2);
        float currentLift = lift * (1.0 - smoothstep(0.0, maxLift, pos.y + 80.0));

        float tilt = tiltAmount * vortexStrength * pos.y * 0.008 * tiltDirection;

        vortexMove = vec3(
          (rotatedPos.x - toVortex.x) * vortexInfluence + suctionDir.x * suction + tilt,
          currentLift + (rotatedPos.y - toVortex.y) * vortexInfluence * 0.4,
          suctionDir.y * suction * 0.4
        );

        vec3 turbNoisePos = vec3(pos.xy * 0.015, time * 1.2);
        vortexMove += vec3(
          snoise(turbNoisePos) * 6.0,
          snoise(turbNoisePos + vec3(50.0, 0.0, 0.0)) * 5.0,
          snoise(turbNoisePos + vec3(0.0, 50.0, 0.0)) * 3.0
        ) * vortexInfluence * vortexStrength;
      }
    }

    // ==========    ==========
    vec3 formMove = vec3(0.0);

    if (morphProgress > 0.01) {
      vec3 turbPos = vec3(pos.xy * 0.01, time * 0.5);
      float turbX = snoise(turbPos) * turbulence;
      float turbY = snoise(turbPos + vec3(80.0, 0.0, 0.0)) * turbulence * 0.7;

      float gustTime = time * gustFrequency;
      float gust = sin(gustTime + random * 6.28) * cos(gustTime * 0.6) * gustStrength;

      formMove = vec3(turbX + gust, turbY, snoise(turbPos + vec3(0.0, 80.0, 0.0)) * turbulence * 0.4);
    }

    // ==========    ==========
    vec3 morphedPos = mix(position, currentTarget, morphProgress);

    float driftIntensity = (1.0 - morphProgress) * (1.0 - morphProgress);
    morphedPos += driftMove * driftIntensity;

    float formIntensity = morphProgress * (1.0 - morphProgress) * formIntensityMultiplier;
    morphedPos += formMove * formIntensity * 0.6;

    morphedPos += vortexMove * (1.0 - morphProgress * 0.25);

    pos = morphedPos;

    // ==========      ==========
    if (morphProgress > 0.5) {
      float aliveIntensity = (morphProgress - 0.5) * 2.0;

      float breathe = sin(time * 1.0) * 0.4 + sin(time * 0.5) * 0.25;
      vec3 breatheMove = normalize(currentTarget) * breathe * aliveBreathScale * aliveIntensity;

      float wavePhase = length(currentTarget.xy) * 0.04 + time * 1.8;
      float waveAmp = sin(wavePhase + random * 6.28) * 0.4;
      vec3 waveMove = vec3(
        cos(wavePhase) * waveAmp,
        sin(wavePhase * 0.7) * waveAmp,
        sin(wavePhase * 1.0) * waveAmp * 0.25
      ) * aliveIntensity;

      vec3 jitter = vec3(
        sin(time * 6.0 + random * 25.0),
        cos(time * 5.5 + random * 20.0),
        sin(time * 4.5 + random * 15.0)
      ) * 0.6 * aliveIntensity;

      float edgeFactor = smoothstep(0.0, 40.0, length(currentTarget.xy));
      vec3 edgeWobble = vec3(
        sin(time * 2.5 + currentTarget.x * 0.08) * 0.6,
        cos(time * 2.0 + currentTarget.y * 0.08) * 0.6,
        sin(time * 1.5) * 0.3
      ) * edgeFactor * aliveIntensity;

      pos += breatheMove + waveMove + jitter + edgeWobble;
    }

    //  
    vec3 vibration = vec3(
      sin(time * 4.0 + random * 15.0) * 0.3,
      cos(time * 3.5 + random * 12.0) * 0.3,
      sin(time * 2.5 + random * 8.0) * 0.2
    ) * (morphProgress * vibrationScale + vortexInfluence * 0.7);
    pos += vibration;

    // ==========  ==========
    float distFade = 1.0 - smoothstep(180.0, 350.0, length(pos.xy));
    float vortexBrightness = 1.0 + vortexInfluence * 0.4;
    float formBrightness = 1.0 + morphProgress * 0.25;

    float layerAlpha = mix(baseAlphaLow, baseAlphaHigh, layerFactor);

    vAlpha = layerAlpha * distFade * vortexBrightness * formBrightness;
    vHeightLayer = heightLayer;
    vMorph = morphProgress;
    vVortexInfluence = vortexInfluence;
    vDistortion = vortexInfluence * vortexStrength + morphProgress * 0.25;

    vec4 mvPos = modelViewMatrix * vec4(pos, 1.0);
    gl_Position = projectionMatrix * mvPos;

    float layerSize = mix(1.2, 0.8, layerFactor);
    float vortexSize = 1.0 + vortexInfluence * 0.3;
    float formSize = 1.0 + morphProgress * 0.15;

    float finalSize = particleSize * layerSize * vortexSize * formSize;
    gl_PointSize = (finalSize / -mvPos.z) * (0.9 + random * 0.3);
  }
`,vve=`
  uniform vec3 colorPrimary;
  uniform vec3 colorSecondary;
  uniform vec3 colorDust;
  uniform float time;
  uniform vec3 morphColorTint;
  uniform vec3 hazeColor;

  varying float vAlpha;
  varying float vHeightLayer;
  varying float vMorph;
  varying float vVortexInfluence;
  varying float vDistortion;

  void main() {
    vec2 uv = gl_PointCoord - 0.5;
    float dist = length(uv);
    if (dist > 0.5) discard;

    float alpha = exp(-dist * dist * 4.0);
    alpha = smoothstep(0.0, 1.0, alpha);
    alpha *= vAlpha;

    vec3 baseColor = mix(colorSecondary, colorDust, vHeightLayer);
    baseColor = mix(baseColor, colorPrimary, vVortexInfluence * 0.4);
    baseColor += morphColorTint * vMorph;
    baseColor += vec3(0.03, 0.03, 0.03) * sin(time * 0.6 + vHeightLayer * 3.14);

    float haze = vDistortion * 0.12;
    baseColor = mix(baseColor, hazeColor, haze);

    gl_FragColor = vec4(baseColor, alpha * 0.85);
  }
`,SY=C.createContext(null);function xve({children:t,initialContent:e=hve,leaveDelayMs:n=dve,preset:r,initialEffectType:i="sand"}){const s=C.useRef(0),a=C.useRef(e),[o,l]=C.useState(0),c=C.useRef(null),[u,h]=C.useState(i),f=r?.vortex.minRadius??15,p=C.useRef({active:!1,x:0,y:0,strength:0,radius:f,height:0}),m=C.useRef(!1),v=C.useCallback(A=>{c.current&&(clearTimeout(c.current),c.current=null),A?(m.current=!1,a.current=A,s.current=1,l(x=>x+1)):(m.current=!0,c.current=setTimeout(()=>{m.current&&(s.current=0,m.current=!1),c.current=null},n))},[n]);return d.jsx(SY.Provider,{value:{targetMorphRef:s,contentRef:a,setHoverContent:v,contentVersion:o,vortexRef:p,effectType:u,setEffectType:h},children:t})}function Hy(){const t=C.useContext(SY);if(!t)throw new Error("useParticleBackground must be used within ParticleBackgroundProvider");return t}const O8="181",bve=0,nz=1,Cve=2,wY=1,Eve=2,t0=3,Ly=0,ld=1,jg=2,Ip=0,sb=1,Ab=2,rz=3,iz=4,Sve=5,Ox=100,wve=101,_ve=102,Ive=103,Bve=104,Tve=200,Mve=201,Dve=202,Rve=203,KN=204,qN=205,Pve=206,kve=207,Nve=208,Lve=209,Fve=210,jve=211,Ove=212,zve=213,$ve=214,YN=0,XN=1,JN=2,nE=3,ZN=4,e5=5,t5=6,n5=7,_Y=0,Qve=1,Uve=2,Iy=0,IY=1,BY=2,TY=3,MY=4,DY=5,RY=6,PY=7,kY=300,rE=301,iE=302,r5=303,i5=304,OM=306,s5=1e3,f0=1001,a5=1002,hu=1003,Hve=1004,O2=1005,_l=1006,OD=1007,Kx=1008,M0=1009,NY=1010,LY=1011,E_=1012,z8=1013,yb=1014,Cp=1015,af=1016,$8=1017,Q8=1018,S_=1020,FY=35902,jY=35899,OY=1021,zY=1022,nf=1023,w_=1026,__=1027,U8=1028,H8=1029,G8=1030,V8=1031,W8=1033,U3=33776,H3=33777,G3=33778,V3=33779,o5=35840,l5=35841,c5=35842,u5=35843,d5=36196,h5=37492,f5=37496,p5=37808,g5=37809,m5=37810,A5=37811,y5=37812,v5=37813,x5=37814,b5=37815,C5=37816,E5=37817,S5=37818,w5=37819,_5=37820,I5=37821,B5=36492,T5=36494,M5=36495,D5=36283,R5=36284,P5=36285,k5=36286,Gve=3200,Vve=3201,Wve=0,Kve=1,fy="",Jh="srgb",sE="srgb-linear",ET="linear",ps="srgb",NC=7680,sz=519,qve=512,Yve=513,Xve=514,$Y=515,Jve=516,Zve=517,exe=518,txe=519,az=35044,oz="300 es",Og=2e3,ST=2001;function QY(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function wT(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function nxe(){const t=wT("canvas");return t.style.display="block",t}const lz={};function cz(...t){const e="THREE."+t.shift();console.log(e,...t)}function Or(...t){const e="THREE."+t.shift();console.warn(e,...t)}function eo(...t){const e="THREE."+t.shift();console.error(e,...t)}function I_(...t){const e=t.join(" ");e in lz||(lz[e]=!0,Or(...t))}function rxe(t,e,n){return new Promise(function(r,i){function s(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:r()}}setTimeout(s,n)})}class LE{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const r=n[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}}const wc=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],zD=Math.PI/180,N5=180/Math.PI;function mI(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(wc[t&255]+wc[t>>8&255]+wc[t>>16&255]+wc[t>>24&255]+"-"+wc[e&255]+wc[e>>8&255]+"-"+wc[e>>16&15|64]+wc[e>>24&255]+"-"+wc[n&63|128]+wc[n>>8&255]+"-"+wc[n>>16&255]+wc[n>>24&255]+wc[r&255]+wc[r>>8&255]+wc[r>>16&255]+wc[r>>24&255]).toLowerCase()}function wi(t,e,n){return Math.max(e,Math.min(n,t))}function ixe(t,e){return(t%e+e)%e}function $D(t,e,n){return(1-n)*t+n*e}function kS(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Uu(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}class Ir{constructor(e=0,n=0){Ir.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=wi(this.x,e.x,n.x),this.y=wi(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=wi(this.x,e,n),this.y=wi(this.y,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(wi(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(wi(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,a=this.y-e.y;return this.x=s*r-a*i+e.x,this.y=s*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class AI{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,a,o){let l=r[i+0],c=r[i+1],u=r[i+2],h=r[i+3],f=s[a+0],p=s[a+1],m=s[a+2],v=s[a+3];if(o<=0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=h;return}if(o>=1){e[n+0]=f,e[n+1]=p,e[n+2]=m,e[n+3]=v;return}if(h!==v||l!==f||c!==p||u!==m){let A=l*f+c*p+u*m+h*v;A<0&&(f=-f,p=-p,m=-m,v=-v,A=-A);let x=1-o;if(A<.9995){const E=Math.acos(A),w=Math.sin(E);x=Math.sin(x*E)/w,o=Math.sin(o*E)/w,l=l*x+f*o,c=c*x+p*o,u=u*x+m*o,h=h*x+v*o}else{l=l*x+f*o,c=c*x+p*o,u=u*x+m*o,h=h*x+v*o;const E=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=E,c*=E,u*=E,h*=E}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=h}static multiplyQuaternionsFlat(e,n,r,i,s,a){const o=r[i],l=r[i+1],c=r[i+2],u=r[i+3],h=s[a],f=s[a+1],p=s[a+2],m=s[a+3];return e[n]=o*m+u*h+l*p-c*f,e[n+1]=l*m+u*f+c*h-o*p,e[n+2]=c*m+u*p+o*f-l*h,e[n+3]=u*m-o*h-l*f-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(r/2),u=o(i/2),h=o(s/2),f=l(r/2),p=l(i/2),m=l(s/2);switch(a){case"XYZ":this._x=f*u*h+c*p*m,this._y=c*p*h-f*u*m,this._z=c*u*m+f*p*h,this._w=c*u*h-f*p*m;break;case"YXZ":this._x=f*u*h+c*p*m,this._y=c*p*h-f*u*m,this._z=c*u*m-f*p*h,this._w=c*u*h+f*p*m;break;case"ZXY":this._x=f*u*h-c*p*m,this._y=c*p*h+f*u*m,this._z=c*u*m+f*p*h,this._w=c*u*h-f*p*m;break;case"ZYX":this._x=f*u*h-c*p*m,this._y=c*p*h+f*u*m,this._z=c*u*m-f*p*h,this._w=c*u*h+f*p*m;break;case"YZX":this._x=f*u*h+c*p*m,this._y=c*p*h+f*u*m,this._z=c*u*m-f*p*h,this._w=c*u*h-f*p*m;break;case"XZY":this._x=f*u*h-c*p*m,this._y=c*p*h-f*u*m,this._z=c*u*m+f*p*h,this._w=c*u*h+f*p*m;break;default:Or("Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],a=n[1],o=n[5],l=n[9],c=n[2],u=n[6],h=n[10],f=r+o+h;if(f>0){const p=.5/Math.sqrt(f+1);this._w=.25/p,this._x=(u-l)*p,this._y=(s-c)*p,this._z=(a-i)*p}else if(r>o&&r>h){const p=2*Math.sqrt(1+r-o-h);this._w=(u-l)/p,this._x=.25*p,this._y=(i+a)/p,this._z=(s+c)/p}else if(o>h){const p=2*Math.sqrt(1+o-r-h);this._w=(s-c)/p,this._x=(i+a)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+h-r-o);this._w=(a-i)/p,this._x=(s+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<1e-8?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(wi(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,a=e._w,o=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+a*o+i*c-s*l,this._y=i*u+a*l+s*o-r*c,this._z=s*u+a*c+r*l-i*o,this._w=a*u-r*o-i*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n<=0)return this;if(n>=1)return this.copy(e);let r=e._x,i=e._y,s=e._z,a=e._w,o=this.dot(e);o<0&&(r=-r,i=-i,s=-s,a=-a,o=-o);let l=1-n;if(o<.9995){const c=Math.acos(o),u=Math.sin(c);l=Math.sin(l*c)/u,n=Math.sin(n*c)/u,this._x=this._x*l+r*n,this._y=this._y*l+i*n,this._z=this._z*l+s*n,this._w=this._w*l+a*n,this._onChangeCallback()}else this._x=this._x*l+r*n,this._y=this._y*l+i*n,this._z=this._z*l+s*n,this._w=this._w*l+a*n,this.normalize();return this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(n),s*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class mt{constructor(e=0,n=0,r=0){mt.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(uz.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(uz.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,a=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*a,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*a,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*a,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*i-o*r),u=2*(o*n-s*i),h=2*(s*r-a*n);return this.x=n+l*c+a*h-o*u,this.y=r+l*u+o*c-s*h,this.z=i+l*h+s*u-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=wi(this.x,e.x,n.x),this.y=wi(this.y,e.y,n.y),this.z=wi(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=wi(this.x,e,n),this.y=wi(this.y,e,n),this.z=wi(this.z,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(wi(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,a=n.x,o=n.y,l=n.z;return this.x=i*l-s*o,this.y=s*a-r*l,this.z=r*o-i*a,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return QD.copy(this).projectOnVector(e),this.sub(QD)}reflect(e){return this.sub(QD.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(wi(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const QD=new mt,uz=new AI;class Qr{constructor(e,n,r,i,s,a,o,l,c){Qr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,a,o,l,c)}set(e,n,r,i,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=o,u[3]=n,u[4]=s,u[5]=l,u[6]=r,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,a=r[0],o=r[3],l=r[6],c=r[1],u=r[4],h=r[7],f=r[2],p=r[5],m=r[8],v=i[0],A=i[3],x=i[6],E=i[1],w=i[4],B=i[7],D=i[2],T=i[5],M=i[8];return s[0]=a*v+o*E+l*D,s[3]=a*A+o*w+l*T,s[6]=a*x+o*B+l*M,s[1]=c*v+u*E+h*D,s[4]=c*A+u*w+h*T,s[7]=c*x+u*B+h*M,s[2]=f*v+p*E+m*D,s[5]=f*A+p*w+m*T,s[8]=f*x+p*B+m*M,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return n*a*u-n*o*c-r*s*u+r*o*l+i*s*c-i*a*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=u*a-o*c,f=o*l-u*s,p=c*s-a*l,m=n*h+r*f+i*p;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/m;return e[0]=h*v,e[1]=(i*c-u*r)*v,e[2]=(o*r-i*a)*v,e[3]=f*v,e[4]=(u*n-i*l)*v,e[5]=(i*s-o*n)*v,e[6]=p*v,e[7]=(r*l-c*n)*v,e[8]=(a*n-r*s)*v,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*a+c*o)+a+e,-i*c,i*l,-i*(-c*a+l*o)+o+n,0,0,1),this}scale(e,n){return this.premultiply(UD.makeScale(e,n)),this}rotate(e){return this.premultiply(UD.makeRotation(-e)),this}translate(e,n){return this.premultiply(UD.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const UD=new Qr,dz=new Qr().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),hz=new Qr().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function sxe(){const t={enabled:!0,workingColorSpace:sE,spaces:{},convert:function(i,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===ps&&(i.r=v0(i.r),i.g=v0(i.g),i.b=v0(i.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===ps&&(i.r=F1(i.r),i.g=F1(i.g),i.b=F1(i.b))),i},workingToColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},colorSpaceToWorking:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===fy?ET:this.spaces[i].transfer},getToneMappingMode:function(i){return this.spaces[i].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,a){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,s){return I_("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),t.workingToColorSpace(i,s)},toWorkingColorSpace:function(i,s){return I_("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),t.colorSpaceToWorking(i,s)}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[sE]:{primaries:e,whitePoint:r,transfer:ET,toXYZ:dz,fromXYZ:hz,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Jh},outputColorSpaceConfig:{drawingBufferColorSpace:Jh}},[Jh]:{primaries:e,whitePoint:r,transfer:ps,toXYZ:dz,fromXYZ:hz,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Jh}}}),t}const Li=sxe();function v0(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function F1(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let LC;class axe{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{LC===void 0&&(LC=wT("canvas")),LC.width=e.width,LC.height=e.height;const i=LC.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=LC}return r.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=wT("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=v0(s[a]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(v0(n[r]/255)*255):n[r]=v0(n[r]);return{data:n,width:e.width,height:e.height}}else return Or("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let oxe=0;class K8{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:oxe++}),this.uuid=mI(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const n=this.data;return typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement?e.set(n.videoWidth,n.videoHeight,0):n instanceof VideoFrame?e.set(n.displayHeight,n.displayWidth,0):n!==null?e.set(n.width,n.height,n.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let a=0,o=i.length;a<o;a++)i[a].isDataTexture?s.push(HD(i[a].image)):s.push(HD(i[a]))}else s=HD(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function HD(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?axe.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(Or("Texture: Unable to serialize Texture."),{})}let lxe=0;const GD=new mt;let mf=class W3 extends LE{constructor(e=W3.DEFAULT_IMAGE,n=W3.DEFAULT_MAPPING,r=f0,i=f0,s=_l,a=Kx,o=nf,l=M0,c=W3.DEFAULT_ANISOTROPY,u=fy){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:lxe++}),this.uuid=mI(),this.name="",this.source=new K8(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Ir(0,0),this.repeat=new Ir(1,1),this.center=new Ir(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Qr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(GD).x}get height(){return this.source.getSize(GD).y}get depth(){return this.source.getSize(GD).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const n in e){const r=e[n];if(r===void 0){Or(`Texture.setValues(): parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){Or(`Texture.setValues(): property '${n}' does not exist.`);continue}i&&r&&i.isVector2&&r.isVector2||i&&r&&i.isVector3&&r.isVector3||i&&r&&i.isMatrix3&&r.isMatrix3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==kY)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case s5:e.x=e.x-Math.floor(e.x);break;case f0:e.x=e.x<0?0:1;break;case a5:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case s5:e.y=e.y-Math.floor(e.y);break;case f0:e.y=e.y<0?0:1;break;case a5:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};mf.DEFAULT_IMAGE=null;mf.DEFAULT_MAPPING=kY;mf.DEFAULT_ANISOTROPY=1;class to{constructor(e=0,n=0,r=0,i=1){to.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*i+a[12]*s,this.y=a[1]*n+a[5]*r+a[9]*i+a[13]*s,this.z=a[2]*n+a[6]*r+a[10]*i+a[14]*s,this.w=a[3]*n+a[7]*r+a[11]*i+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,c=l[0],u=l[4],h=l[8],f=l[1],p=l[5],m=l[9],v=l[2],A=l[6],x=l[10];if(Math.abs(u-f)<.01&&Math.abs(h-v)<.01&&Math.abs(m-A)<.01){if(Math.abs(u+f)<.1&&Math.abs(h+v)<.1&&Math.abs(m+A)<.1&&Math.abs(c+p+x-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const w=(c+1)/2,B=(p+1)/2,D=(x+1)/2,T=(u+f)/4,M=(h+v)/4,R=(m+A)/4;return w>B&&w>D?w<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(w),i=T/r,s=M/r):B>D?B<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(B),r=T/i,s=R/i):D<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(D),r=M/s,i=R/s),this.set(r,i,s,n),this}let E=Math.sqrt((A-m)*(A-m)+(h-v)*(h-v)+(f-u)*(f-u));return Math.abs(E)<.001&&(E=1),this.x=(A-m)/E,this.y=(h-v)/E,this.z=(f-u)/E,this.w=Math.acos((c+p+x-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=wi(this.x,e.x,n.x),this.y=wi(this.y,e.y,n.y),this.z=wi(this.z,e.z,n.z),this.w=wi(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=wi(this.x,e,n),this.y=wi(this.y,e,n),this.z=wi(this.z,e,n),this.w=wi(this.w,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(wi(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class cxe extends LE{constructor(e=1,n=1,r={}){super(),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:_l,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},r),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=r.depth,this.scissor=new to(0,0,e,n),this.scissorTest=!1,this.viewport=new to(0,0,e,n);const i={width:e,height:n,depth:r.depth},s=new mf(i);this.textures=[];const a=r.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(r),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples,this.multiview=r.multiview}_setTextureOptions(e={}){const n={minFilter:_l,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(n.mapping=e.mapping),e.wrapS!==void 0&&(n.wrapS=e.wrapS),e.wrapT!==void 0&&(n.wrapT=e.wrapT),e.wrapR!==void 0&&(n.wrapR=e.wrapR),e.magFilter!==void 0&&(n.magFilter=e.magFilter),e.minFilter!==void 0&&(n.minFilter=e.minFilter),e.format!==void 0&&(n.format=e.format),e.type!==void 0&&(n.type=e.type),e.anisotropy!==void 0&&(n.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(n.colorSpace=e.colorSpace),e.flipY!==void 0&&(n.flipY=e.flipY),e.generateMipmaps!==void 0&&(n.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(n.internalFormat=e.internalFormat);for(let r=0;r<this.textures.length;r++)this.textures[r].setValues(n)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r,this.textures[i].isData3DTexture!==!0&&(this.textures[i].isArrayTexture=this.textures[i].image.depth>1);this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const i=Object.assign({},e.textures[n].image);this.textures[n].source=new K8(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Jd extends cxe{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class UY extends mf{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=hu,this.minFilter=hu,this.wrapR=f0,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class uxe extends mf{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=hu,this.minFilter=hu,this.wrapR=f0,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class jb{constructor(e=new mt(1/0,1/0,1/0),n=new mt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(ap.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(ap.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=ap.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,ap):ap.fromBufferAttribute(s,a),ap.applyMatrix4(e.matrixWorld),this.expandByPoint(ap);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),z2.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),z2.copy(r.boundingBox)),z2.applyMatrix4(e.matrixWorld),this.union(z2)}const i=e.children;for(let s=0,a=i.length;s<a;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ap),ap.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(NS),$2.subVectors(this.max,NS),FC.subVectors(e.a,NS),jC.subVectors(e.b,NS),OC.subVectors(e.c,NS),YA.subVectors(jC,FC),XA.subVectors(OC,jC),ax.subVectors(FC,OC);let n=[0,-YA.z,YA.y,0,-XA.z,XA.y,0,-ax.z,ax.y,YA.z,0,-YA.x,XA.z,0,-XA.x,ax.z,0,-ax.x,-YA.y,YA.x,0,-XA.y,XA.x,0,-ax.y,ax.x,0];return!VD(n,FC,jC,OC,$2)||(n=[1,0,0,0,1,0,0,0,1],!VD(n,FC,jC,OC,$2))?!1:(Q2.crossVectors(YA,XA),n=[Q2.x,Q2.y,Q2.z],VD(n,FC,jC,OC,$2))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ap).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ap).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(jm[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),jm[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),jm[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),jm[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),jm[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),jm[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),jm[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),jm[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(jm),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const jm=[new mt,new mt,new mt,new mt,new mt,new mt,new mt,new mt],ap=new mt,z2=new jb,FC=new mt,jC=new mt,OC=new mt,YA=new mt,XA=new mt,ax=new mt,NS=new mt,$2=new mt,Q2=new mt,ox=new mt;function VD(t,e,n,r,i){for(let s=0,a=t.length-3;s<=a;s+=3){ox.fromArray(t,s);const o=i.x*Math.abs(ox.x)+i.y*Math.abs(ox.y)+i.z*Math.abs(ox.z),l=e.dot(ox),c=n.dot(ox),u=r.dot(ox);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const dxe=new jb,LS=new mt,WD=new mt;class FE{constructor(e=new mt,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):dxe.setFromPoints(e).getCenter(r);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;LS.subVectors(e,this.center);const n=LS.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(LS,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(WD.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(LS.copy(e.center).add(WD)),this.expandByPoint(LS.copy(e.center).sub(WD))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Om=new mt,KD=new mt,U2=new mt,JA=new mt,qD=new mt,H2=new mt,YD=new mt;class HY{constructor(e=new mt,n=new mt(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Om)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Om.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Om.copy(this.origin).addScaledVector(this.direction,n),Om.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){KD.copy(e).add(n).multiplyScalar(.5),U2.copy(n).sub(e).normalize(),JA.copy(this.origin).sub(KD);const s=e.distanceTo(n)*.5,a=-this.direction.dot(U2),o=JA.dot(this.direction),l=-JA.dot(U2),c=JA.lengthSq(),u=Math.abs(1-a*a);let h,f,p,m;if(u>0)if(h=a*l-o,f=a*o-l,m=s*u,h>=0)if(f>=-m)if(f<=m){const v=1/u;h*=v,f*=v,p=h*(h+a*f+2*o)+f*(a*h+f+2*l)+c}else f=s,h=Math.max(0,-(a*f+o)),p=-h*h+f*(f+2*l)+c;else f=-s,h=Math.max(0,-(a*f+o)),p=-h*h+f*(f+2*l)+c;else f<=-m?(h=Math.max(0,-(-a*s+o)),f=h>0?-s:Math.min(Math.max(-s,-l),s),p=-h*h+f*(f+2*l)+c):f<=m?(h=0,f=Math.min(Math.max(-s,-l),s),p=f*(f+2*l)+c):(h=Math.max(0,-(a*s+o)),f=h>0?s:Math.min(Math.max(-s,-l),s),p=-h*h+f*(f+2*l)+c);else f=a>0?-s:s,h=Math.max(0,-(a*f+o)),p=-h*h+f*(f+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(KD).addScaledVector(U2,f),p}intersectSphere(e,n){Om.subVectors(e.center,this.origin);const r=Om.dot(this.direction),i=Om.dot(Om)-r*r,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),o=r-a,l=r+a;return l<0?null:o<0?this.at(l,n):this.at(o,n)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,f=this.origin;return c>=0?(r=(e.min.x-f.x)*c,i=(e.max.x-f.x)*c):(r=(e.max.x-f.x)*c,i=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,a=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,a=(e.min.y-f.y)*u),r>a||s>i||((s>r||isNaN(r))&&(r=s),(a<i||isNaN(i))&&(i=a),h>=0?(o=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(o=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),r>l||o>i)||((o>r||r!==r)&&(r=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Om)!==null}intersectTriangle(e,n,r,i,s){qD.subVectors(n,e),H2.subVectors(r,e),YD.crossVectors(qD,H2);let a=this.direction.dot(YD),o;if(a>0){if(i)return null;o=1}else if(a<0)o=-1,a=-a;else return null;JA.subVectors(this.origin,e);const l=o*this.direction.dot(H2.crossVectors(JA,H2));if(l<0)return null;const c=o*this.direction.dot(qD.cross(JA));if(c<0||l+c>a)return null;const u=-o*JA.dot(YD);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ma{constructor(e,n,r,i,s,a,o,l,c,u,h,f,p,m,v,A){Ma.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,a,o,l,c,u,h,f,p,m,v,A)}set(e,n,r,i,s,a,o,l,c,u,h,f,p,m,v,A){const x=this.elements;return x[0]=e,x[4]=n,x[8]=r,x[12]=i,x[1]=s,x[5]=a,x[9]=o,x[13]=l,x[2]=c,x[6]=u,x[10]=h,x[14]=f,x[3]=p,x[7]=m,x[11]=v,x[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ma().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/zC.setFromMatrixColumn(e,0).length(),s=1/zC.setFromMatrixColumn(e,1).length(),a=1/zC.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,a=Math.cos(r),o=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const f=a*u,p=a*h,m=o*u,v=o*h;n[0]=l*u,n[4]=-l*h,n[8]=c,n[1]=p+m*c,n[5]=f-v*c,n[9]=-o*l,n[2]=v-f*c,n[6]=m+p*c,n[10]=a*l}else if(e.order==="YXZ"){const f=l*u,p=l*h,m=c*u,v=c*h;n[0]=f+v*o,n[4]=m*o-p,n[8]=a*c,n[1]=a*h,n[5]=a*u,n[9]=-o,n[2]=p*o-m,n[6]=v+f*o,n[10]=a*l}else if(e.order==="ZXY"){const f=l*u,p=l*h,m=c*u,v=c*h;n[0]=f-v*o,n[4]=-a*h,n[8]=m+p*o,n[1]=p+m*o,n[5]=a*u,n[9]=v-f*o,n[2]=-a*c,n[6]=o,n[10]=a*l}else if(e.order==="ZYX"){const f=a*u,p=a*h,m=o*u,v=o*h;n[0]=l*u,n[4]=m*c-p,n[8]=f*c+v,n[1]=l*h,n[5]=v*c+f,n[9]=p*c-m,n[2]=-c,n[6]=o*l,n[10]=a*l}else if(e.order==="YZX"){const f=a*l,p=a*c,m=o*l,v=o*c;n[0]=l*u,n[4]=v-f*h,n[8]=m*h+p,n[1]=h,n[5]=a*u,n[9]=-o*u,n[2]=-c*u,n[6]=p*h+m,n[10]=f-v*h}else if(e.order==="XZY"){const f=a*l,p=a*c,m=o*l,v=o*c;n[0]=l*u,n[4]=-h,n[8]=c*u,n[1]=f*h+v,n[5]=a*u,n[9]=p*h-m,n[2]=m*h-p,n[6]=o*u,n[10]=v*h+f}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(hxe,e,fxe)}lookAt(e,n,r){const i=this.elements;return zd.subVectors(e,n),zd.lengthSq()===0&&(zd.z=1),zd.normalize(),ZA.crossVectors(r,zd),ZA.lengthSq()===0&&(Math.abs(r.z)===1?zd.x+=1e-4:zd.z+=1e-4,zd.normalize(),ZA.crossVectors(r,zd)),ZA.normalize(),G2.crossVectors(zd,ZA),i[0]=ZA.x,i[4]=G2.x,i[8]=zd.x,i[1]=ZA.y,i[5]=G2.y,i[9]=zd.y,i[2]=ZA.z,i[6]=G2.z,i[10]=zd.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,a=r[0],o=r[4],l=r[8],c=r[12],u=r[1],h=r[5],f=r[9],p=r[13],m=r[2],v=r[6],A=r[10],x=r[14],E=r[3],w=r[7],B=r[11],D=r[15],T=i[0],M=i[4],R=i[8],k=i[12],L=i[1],F=i[5],z=i[9],G=i[13],V=i[2],q=i[6],O=i[10],H=i[14],K=i[3],X=i[7],re=i[11],J=i[15];return s[0]=a*T+o*L+l*V+c*K,s[4]=a*M+o*F+l*q+c*X,s[8]=a*R+o*z+l*O+c*re,s[12]=a*k+o*G+l*H+c*J,s[1]=u*T+h*L+f*V+p*K,s[5]=u*M+h*F+f*q+p*X,s[9]=u*R+h*z+f*O+p*re,s[13]=u*k+h*G+f*H+p*J,s[2]=m*T+v*L+A*V+x*K,s[6]=m*M+v*F+A*q+x*X,s[10]=m*R+v*z+A*O+x*re,s[14]=m*k+v*G+A*H+x*J,s[3]=E*T+w*L+B*V+D*K,s[7]=E*M+w*F+B*q+D*X,s[11]=E*R+w*z+B*O+D*re,s[15]=E*k+w*G+B*H+D*J,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],h=e[6],f=e[10],p=e[14],m=e[3],v=e[7],A=e[11],x=e[15];return m*(+s*l*h-i*c*h-s*o*f+r*c*f+i*o*p-r*l*p)+v*(+n*l*p-n*c*f+s*a*f-i*a*p+i*c*u-s*l*u)+A*(+n*c*h-n*o*p-s*a*h+r*a*p+s*o*u-r*c*u)+x*(-i*o*u-n*l*h+n*o*f+i*a*h-r*a*f+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],p=e[11],m=e[12],v=e[13],A=e[14],x=e[15],E=h*A*c-v*f*c+v*l*p-o*A*p-h*l*x+o*f*x,w=m*f*c-u*A*c-m*l*p+a*A*p+u*l*x-a*f*x,B=u*v*c-m*h*c+m*o*p-a*v*p-u*o*x+a*h*x,D=m*h*l-u*v*l-m*o*f+a*v*f+u*o*A-a*h*A,T=n*E+r*w+i*B+s*D;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/T;return e[0]=E*M,e[1]=(v*f*s-h*A*s-v*i*p+r*A*p+h*i*x-r*f*x)*M,e[2]=(o*A*s-v*l*s+v*i*c-r*A*c-o*i*x+r*l*x)*M,e[3]=(h*l*s-o*f*s-h*i*c+r*f*c+o*i*p-r*l*p)*M,e[4]=w*M,e[5]=(u*A*s-m*f*s+m*i*p-n*A*p-u*i*x+n*f*x)*M,e[6]=(m*l*s-a*A*s-m*i*c+n*A*c+a*i*x-n*l*x)*M,e[7]=(a*f*s-u*l*s+u*i*c-n*f*c-a*i*p+n*l*p)*M,e[8]=B*M,e[9]=(m*h*s-u*v*s-m*r*p+n*v*p+u*r*x-n*h*x)*M,e[10]=(a*v*s-m*o*s+m*r*c-n*v*c-a*r*x+n*o*x)*M,e[11]=(u*o*s-a*h*s-u*r*c+n*h*c+a*r*p-n*o*p)*M,e[12]=D*M,e[13]=(u*v*i-m*h*i+m*r*f-n*v*f-u*r*A+n*h*A)*M,e[14]=(m*o*i-a*v*i-m*r*l+n*v*l+a*r*A-n*o*A)*M,e[15]=(a*h*i-u*o*i+u*r*l-n*h*l-a*r*f+n*o*f)*M,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+r,c*o-i*l,c*l+i*o,0,c*o+i*l,u*o+r,u*l-i*a,0,c*l-i*o,u*l+i*a,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,a){return this.set(1,r,s,0,e,1,a,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,a=n._y,o=n._z,l=n._w,c=s+s,u=a+a,h=o+o,f=s*c,p=s*u,m=s*h,v=a*u,A=a*h,x=o*h,E=l*c,w=l*u,B=l*h,D=r.x,T=r.y,M=r.z;return i[0]=(1-(v+x))*D,i[1]=(p+B)*D,i[2]=(m-w)*D,i[3]=0,i[4]=(p-B)*T,i[5]=(1-(f+x))*T,i[6]=(A+E)*T,i[7]=0,i[8]=(m+w)*M,i[9]=(A-E)*M,i[10]=(1-(f+v))*M,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=zC.set(i[0],i[1],i[2]).length();const a=zC.set(i[4],i[5],i[6]).length(),o=zC.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],op.copy(this);const c=1/s,u=1/a,h=1/o;return op.elements[0]*=c,op.elements[1]*=c,op.elements[2]*=c,op.elements[4]*=u,op.elements[5]*=u,op.elements[6]*=u,op.elements[8]*=h,op.elements[9]*=h,op.elements[10]*=h,n.setFromRotationMatrix(op),r.x=s,r.y=a,r.z=o,this}makePerspective(e,n,r,i,s,a,o=Og,l=!1){const c=this.elements,u=2*s/(n-e),h=2*s/(r-i),f=(n+e)/(n-e),p=(r+i)/(r-i);let m,v;if(l)m=s/(a-s),v=a*s/(a-s);else if(o===Og)m=-(a+s)/(a-s),v=-2*a*s/(a-s);else if(o===ST)m=-a/(a-s),v=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return c[0]=u,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=h,c[9]=p,c[13]=0,c[2]=0,c[6]=0,c[10]=m,c[14]=v,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,n,r,i,s,a,o=Og,l=!1){const c=this.elements,u=2/(n-e),h=2/(r-i),f=-(n+e)/(n-e),p=-(r+i)/(r-i);let m,v;if(l)m=1/(a-s),v=a/(a-s);else if(o===Og)m=-2/(a-s),v=-(a+s)/(a-s);else if(o===ST)m=-1/(a-s),v=-s/(a-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return c[0]=u,c[4]=0,c[8]=0,c[12]=f,c[1]=0,c[5]=h,c[9]=0,c[13]=p,c[2]=0,c[6]=0,c[10]=m,c[14]=v,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const zC=new mt,op=new Ma,hxe=new mt(0,0,0),fxe=new mt(1,1,1),ZA=new mt,G2=new mt,zd=new mt,fz=new Ma,pz=new AI;class D0{constructor(e=0,n=0,r=0,i=D0.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],a=i[4],o=i[8],l=i[1],c=i[5],u=i[9],h=i[2],f=i[6],p=i[10];switch(n){case"XYZ":this._y=Math.asin(wi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-wi(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(wi(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-wi(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(wi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(o,p));break;case"XZY":this._z=Math.asin(-wi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:Or("Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return fz.makeRotationFromQuaternion(e),this.setFromRotationMatrix(fz,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return pz.setFromEuler(this),this.setFromQuaternion(pz,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}D0.DEFAULT_ORDER="XYZ";let GY=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},pxe=0;const gz=new mt,$C=new AI,zm=new Ma,V2=new mt,FS=new mt,gxe=new mt,mxe=new AI,mz=new mt(1,0,0),Az=new mt(0,1,0),yz=new mt(0,0,1),vz={type:"added"},Axe={type:"removed"},QC={type:"childadded",child:null},XD={type:"childremoved",child:null};class fu extends LE{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:pxe++}),this.uuid=mI(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=fu.DEFAULT_UP.clone();const e=new mt,n=new D0,r=new AI,i=new mt(1,1,1);function s(){r.setFromEuler(n,!1)}function a(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ma},normalMatrix:{value:new Qr}}),this.matrix=new Ma,this.matrixWorld=new Ma,this.matrixAutoUpdate=fu.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=fu.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new GY,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return $C.setFromAxisAngle(e,n),this.quaternion.multiply($C),this}rotateOnWorldAxis(e,n){return $C.setFromAxisAngle(e,n),this.quaternion.premultiply($C),this}rotateX(e){return this.rotateOnAxis(mz,e)}rotateY(e){return this.rotateOnAxis(Az,e)}rotateZ(e){return this.rotateOnAxis(yz,e)}translateOnAxis(e,n){return gz.copy(e).applyQuaternion(this.quaternion),this.position.add(gz.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(mz,e)}translateY(e){return this.translateOnAxis(Az,e)}translateZ(e){return this.translateOnAxis(yz,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(zm.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?V2.copy(e):V2.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),FS.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?zm.lookAt(FS,V2,this.up):zm.lookAt(V2,FS,this.up),this.quaternion.setFromRotationMatrix(zm),i&&(zm.extractRotation(i.matrixWorld),$C.setFromRotationMatrix(zm),this.quaternion.premultiply($C.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(eo("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(vz),QC.child=e,this.dispatchEvent(QC),QC.child=null):eo("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Axe),XD.child=e,this.dispatchEvent(XD),XD.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),zm.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),zm.multiply(e.parent.matrixWorld)),e.applyMatrix4(zm),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(vz),QC.child=e,this.dispatchEvent(QC),QC.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,n);if(a!==void 0)return a}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(FS,e,gxe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(FS,mxe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(o=>({...o})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));i.material=o}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(s(e.animations,l))}}if(n){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),h=a(e.shapes),f=a(e.skeletons),p=a(e.animations),m=a(e.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),m.length>0&&(r.nodes=m)}return r.object=i,r;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}fu.DEFAULT_UP=new mt(0,1,0);fu.DEFAULT_MATRIX_AUTO_UPDATE=!0;fu.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const lp=new mt,$m=new mt,JD=new mt,Qm=new mt,UC=new mt,HC=new mt,xz=new mt,ZD=new mt,eR=new mt,tR=new mt,nR=new to,rR=new to,iR=new to;class yp{constructor(e=new mt,n=new mt,r=new mt){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),lp.subVectors(e,n),i.cross(lp);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){lp.subVectors(i,n),$m.subVectors(r,n),JD.subVectors(e,n);const a=lp.dot(lp),o=lp.dot($m),l=lp.dot(JD),c=$m.dot($m),u=$m.dot(JD),h=a*c-o*o;if(h===0)return s.set(0,0,0),null;const f=1/h,p=(c*l-o*u)*f,m=(a*u-o*l)*f;return s.set(1-p-m,m,p)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Qm)===null?!1:Qm.x>=0&&Qm.y>=0&&Qm.x+Qm.y<=1}static getInterpolation(e,n,r,i,s,a,o,l){return this.getBarycoord(e,n,r,i,Qm)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Qm.x),l.addScaledVector(a,Qm.y),l.addScaledVector(o,Qm.z),l)}static getInterpolatedAttribute(e,n,r,i,s,a){return nR.setScalar(0),rR.setScalar(0),iR.setScalar(0),nR.fromBufferAttribute(e,n),rR.fromBufferAttribute(e,r),iR.fromBufferAttribute(e,i),a.setScalar(0),a.addScaledVector(nR,s.x),a.addScaledVector(rR,s.y),a.addScaledVector(iR,s.z),a}static isFrontFacing(e,n,r,i){return lp.subVectors(r,n),$m.subVectors(e,n),lp.cross($m).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return lp.subVectors(this.c,this.b),$m.subVectors(this.a,this.b),lp.cross($m).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return yp.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return yp.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,s){return yp.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return yp.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return yp.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let a,o;UC.subVectors(i,r),HC.subVectors(s,r),ZD.subVectors(e,r);const l=UC.dot(ZD),c=HC.dot(ZD);if(l<=0&&c<=0)return n.copy(r);eR.subVectors(e,i);const u=UC.dot(eR),h=HC.dot(eR);if(u>=0&&h<=u)return n.copy(i);const f=l*h-u*c;if(f<=0&&l>=0&&u<=0)return a=l/(l-u),n.copy(r).addScaledVector(UC,a);tR.subVectors(e,s);const p=UC.dot(tR),m=HC.dot(tR);if(m>=0&&p<=m)return n.copy(s);const v=p*c-l*m;if(v<=0&&c>=0&&m<=0)return o=c/(c-m),n.copy(r).addScaledVector(HC,o);const A=u*m-p*h;if(A<=0&&h-u>=0&&p-m>=0)return xz.subVectors(s,i),o=(h-u)/(h-u+(p-m)),n.copy(i).addScaledVector(xz,o);const x=1/(A+v+f);return a=v*x,o=f*x,n.copy(r).addScaledVector(UC,a).addScaledVector(HC,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const VY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ey={h:0,s:0,l:0},W2={h:0,s:0,l:0};function sR(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}let Gr=class{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Jh){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Li.colorSpaceToWorking(this,n),this}setRGB(e,n,r,i=Li.workingColorSpace){return this.r=e,this.g=n,this.b=r,Li.colorSpaceToWorking(this,i),this}setHSL(e,n,r,i=Li.workingColorSpace){if(e=ixe(e,1),n=wi(n,0,1),r=wi(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,a=2*r-s;this.r=sR(a,s,e+1/3),this.g=sR(a,s,e),this.b=sR(a,s,e-1/3)}return Li.colorSpaceToWorking(this,i),this}setStyle(e,n=Jh){function r(s){s!==void 0&&parseFloat(s)<1&&Or("Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:Or("Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(a===6)return this.setHex(parseInt(s,16),n);Or("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Jh){const r=VY[e.toLowerCase()];return r!==void 0?this.setHex(r,n):Or("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=v0(e.r),this.g=v0(e.g),this.b=v0(e.b),this}copyLinearToSRGB(e){return this.r=F1(e.r),this.g=F1(e.g),this.b=F1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Jh){return Li.workingToColorSpace(_c.copy(this),e),Math.round(wi(_c.r*255,0,255))*65536+Math.round(wi(_c.g*255,0,255))*256+Math.round(wi(_c.b*255,0,255))}getHexString(e=Jh){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Li.workingColorSpace){Li.workingToColorSpace(_c.copy(this),n);const r=_c.r,i=_c.g,s=_c.b,a=Math.max(r,i,s),o=Math.min(r,i,s);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const h=a-o;switch(c=u<=.5?h/(a+o):h/(2-a-o),a){case r:l=(i-s)/h+(i<s?6:0);break;case i:l=(s-r)/h+2;break;case s:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=Li.workingColorSpace){return Li.workingToColorSpace(_c.copy(this),n),e.r=_c.r,e.g=_c.g,e.b=_c.b,e}getStyle(e=Jh){Li.workingToColorSpace(_c.copy(this),e);const n=_c.r,r=_c.g,i=_c.b;return e!==Jh?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(ey),this.setHSL(ey.h+e,ey.s+n,ey.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(ey),e.getHSL(W2);const r=$D(ey.h,W2.h,n),i=$D(ey.s,W2.s,n),s=$D(ey.l,W2.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const _c=new Gr;Gr.NAMES=VY;let yxe=0;class yI extends LE{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:yxe++}),this.uuid=mI(),this.name="",this.type="Material",this.blending=sb,this.side=Ly,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=KN,this.blendDst=qN,this.blendEquation=Ox,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Gr(0,0,0),this.blendAlpha=0,this.depthFunc=nE,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=sz,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=NC,this.stencilZFail=NC,this.stencilZPass=NC,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){Or(`Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){Or(`Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(r.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(r.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==sb&&(r.blending=this.blending),this.side!==Ly&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==KN&&(r.blendSrc=this.blendSrc),this.blendDst!==qN&&(r.blendDst=this.blendDst),this.blendEquation!==Ox&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==nE&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==sz&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==NC&&(r.stencilFail=this.stencilFail),this.stencilZFail!==NC&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==NC&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(n){const s=i(e.textures),a=i(e.images);s.length>0&&(r.textures=s),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class q8 extends yI{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Gr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new D0,this.combine=_Y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Io=new mt,K2=new Ir;let vxe=0;class xr{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:vxe++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=az,this.updateRanges=[],this.gpuType=Cp,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)K2.fromBufferAttribute(this,n),K2.applyMatrix3(e),this.setXY(n,K2.x,K2.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Io.fromBufferAttribute(this,n),Io.applyMatrix3(e),this.setXYZ(n,Io.x,Io.y,Io.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Io.fromBufferAttribute(this,n),Io.applyMatrix4(e),this.setXYZ(n,Io.x,Io.y,Io.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Io.fromBufferAttribute(this,n),Io.applyNormalMatrix(e),this.setXYZ(n,Io.x,Io.y,Io.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Io.fromBufferAttribute(this,n),Io.transformDirection(e),this.setXYZ(n,Io.x,Io.y,Io.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=kS(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Uu(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=kS(n,this.array)),n}setX(e,n){return this.normalized&&(n=Uu(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=kS(n,this.array)),n}setY(e,n){return this.normalized&&(n=Uu(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=kS(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Uu(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=kS(n,this.array)),n}setW(e,n){return this.normalized&&(n=Uu(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Uu(n,this.array),r=Uu(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Uu(n,this.array),r=Uu(r,this.array),i=Uu(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Uu(n,this.array),r=Uu(r,this.array),i=Uu(i,this.array),s=Uu(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==az&&(e.usage=this.usage),e}}class WY extends xr{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class KY extends xr{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class x0 extends xr{constructor(e,n,r){super(new Float32Array(e),n,r)}}let xxe=0;const Uh=new Ma,aR=new fu,GC=new mt,$d=new jb,jS=new jb,pl=new mt;class pd extends LE{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:xxe++}),this.uuid=mI(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(QY(e)?KY:WY)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Qr().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Uh.makeRotationFromQuaternion(e),this.applyMatrix4(Uh),this}rotateX(e){return Uh.makeRotationX(e),this.applyMatrix4(Uh),this}rotateY(e){return Uh.makeRotationY(e),this.applyMatrix4(Uh),this}rotateZ(e){return Uh.makeRotationZ(e),this.applyMatrix4(Uh),this}translate(e,n,r){return Uh.makeTranslation(e,n,r),this.applyMatrix4(Uh),this}scale(e,n,r){return Uh.makeScale(e,n,r),this.applyMatrix4(Uh),this}lookAt(e){return aR.lookAt(e),aR.updateMatrix(),this.applyMatrix4(aR.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(GC).negate(),this.translate(GC.x,GC.y,GC.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const a=e[i];r.push(a.x,a.y,a.z||0)}this.setAttribute("position",new x0(r,3))}else{const r=Math.min(e.length,n.count);for(let i=0;i<r;i++){const s=e[i];n.setXYZ(i,s.x,s.y,s.z||0)}e.length>n.count&&Or("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new jb);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){eo("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new mt(-1/0,-1/0,-1/0),new mt(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];$d.setFromBufferAttribute(s),this.morphTargetsRelative?(pl.addVectors(this.boundingBox.min,$d.min),this.boundingBox.expandByPoint(pl),pl.addVectors(this.boundingBox.max,$d.max),this.boundingBox.expandByPoint(pl)):(this.boundingBox.expandByPoint($d.min),this.boundingBox.expandByPoint($d.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&eo('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new FE);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){eo("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new mt,1/0);return}if(e){const r=this.boundingSphere.center;if($d.setFromBufferAttribute(e),n)for(let s=0,a=n.length;s<a;s++){const o=n[s];jS.setFromBufferAttribute(o),this.morphTargetsRelative?(pl.addVectors($d.min,jS.min),$d.expandByPoint(pl),pl.addVectors($d.max,jS.max),$d.expandByPoint(pl)):($d.expandByPoint(jS.min),$d.expandByPoint(jS.max))}$d.getCenter(r);let i=0;for(let s=0,a=e.count;s<a;s++)pl.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(pl));if(n)for(let s=0,a=n.length;s<a;s++){const o=n[s],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)pl.fromBufferAttribute(o,c),l&&(GC.fromBufferAttribute(e,c),pl.add(GC)),i=Math.max(i,r.distanceToSquared(pl))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&eo('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){eo("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,s=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new xr(new Float32Array(4*r.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let R=0;R<r.count;R++)o[R]=new mt,l[R]=new mt;const c=new mt,u=new mt,h=new mt,f=new Ir,p=new Ir,m=new Ir,v=new mt,A=new mt;function x(R,k,L){c.fromBufferAttribute(r,R),u.fromBufferAttribute(r,k),h.fromBufferAttribute(r,L),f.fromBufferAttribute(s,R),p.fromBufferAttribute(s,k),m.fromBufferAttribute(s,L),u.sub(c),h.sub(c),p.sub(f),m.sub(f);const F=1/(p.x*m.y-m.x*p.y);isFinite(F)&&(v.copy(u).multiplyScalar(m.y).addScaledVector(h,-p.y).multiplyScalar(F),A.copy(h).multiplyScalar(p.x).addScaledVector(u,-m.x).multiplyScalar(F),o[R].add(v),o[k].add(v),o[L].add(v),l[R].add(A),l[k].add(A),l[L].add(A))}let E=this.groups;E.length===0&&(E=[{start:0,count:e.count}]);for(let R=0,k=E.length;R<k;++R){const L=E[R],F=L.start,z=L.count;for(let G=F,V=F+z;G<V;G+=3)x(e.getX(G+0),e.getX(G+1),e.getX(G+2))}const w=new mt,B=new mt,D=new mt,T=new mt;function M(R){D.fromBufferAttribute(i,R),T.copy(D);const k=o[R];w.copy(k),w.sub(D.multiplyScalar(D.dot(k))).normalize(),B.crossVectors(T,k);const F=B.dot(l[R])<0?-1:1;a.setXYZW(R,w.x,w.y,w.z,F)}for(let R=0,k=E.length;R<k;++R){const L=E[R],F=L.start,z=L.count;for(let G=F,V=F+z;G<V;G+=3)M(e.getX(G+0)),M(e.getX(G+1)),M(e.getX(G+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new xr(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let f=0,p=r.count;f<p;f++)r.setXYZ(f,0,0,0);const i=new mt,s=new mt,a=new mt,o=new mt,l=new mt,c=new mt,u=new mt,h=new mt;if(e)for(let f=0,p=e.count;f<p;f+=3){const m=e.getX(f+0),v=e.getX(f+1),A=e.getX(f+2);i.fromBufferAttribute(n,m),s.fromBufferAttribute(n,v),a.fromBufferAttribute(n,A),u.subVectors(a,s),h.subVectors(i,s),u.cross(h),o.fromBufferAttribute(r,m),l.fromBufferAttribute(r,v),c.fromBufferAttribute(r,A),o.add(u),l.add(u),c.add(u),r.setXYZ(m,o.x,o.y,o.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(A,c.x,c.y,c.z)}else for(let f=0,p=n.count;f<p;f+=3)i.fromBufferAttribute(n,f+0),s.fromBufferAttribute(n,f+1),a.fromBufferAttribute(n,f+2),u.subVectors(a,s),h.subVectors(i,s),u.cross(h),r.setXYZ(f+0,u.x,u.y,u.z),r.setXYZ(f+1,u.x,u.y,u.z),r.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)pl.fromBufferAttribute(e,n),pl.normalize(),e.setXYZ(n,pl.x,pl.y,pl.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,h=o.normalized,f=new c.constructor(l.length*u);let p=0,m=0;for(let v=0,A=l.length;v<A;v++){o.isInterleavedBufferAttribute?p=l[v]*o.data.stride+o.offset:p=l[v]*u;for(let x=0;x<u;x++)f[m++]=c[p++]}return new xr(f,u,h)}if(this.index===null)return Or("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new pd,r=this.index.array,i=this.attributes;for(const o in i){const l=i[o],c=e(l,r);n.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let u=0,h=c.length;u<h;u++){const f=c[u],p=e(f,r);l.push(p)}n.morphAttributes[o]=l}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,f=c.length;h<f;h++){const p=c[h];u.push(p.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let f=0,p=h.length;f<p;f++)u.push(h[f].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const h=a[c];this.addGroup(h.start,h.count,h.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const bz=new Ma,lx=new HY,q2=new FE,Cz=new mt,Y2=new mt,X2=new mt,J2=new mt,oR=new mt,Z2=new mt,Ez=new mt,eB=new mt;class Dp extends fu{constructor(e=new pd,n=new q8){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,a=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(s&&o){Z2.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=o[l],h=s[l];u!==0&&(oR.fromBufferAttribute(h,e),a?Z2.addScaledVector(oR,u):Z2.addScaledVector(oR.sub(n),u))}n.add(Z2)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),q2.copy(r.boundingSphere),q2.applyMatrix4(s),lx.copy(e.ray).recast(e.near),!(q2.containsPoint(lx.origin)===!1&&(lx.intersectSphere(q2,Cz)===null||lx.origin.distanceToSquared(Cz)>(e.far-e.near)**2))&&(bz.copy(s).invert(),lx.copy(e.ray).applyMatrix4(bz),!(r.boundingBox!==null&&lx.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,lx)))}_computeIntersections(e,n,r){let i;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,f=s.groups,p=s.drawRange;if(o!==null)if(Array.isArray(a))for(let m=0,v=f.length;m<v;m++){const A=f[m],x=a[A.materialIndex],E=Math.max(A.start,p.start),w=Math.min(o.count,Math.min(A.start+A.count,p.start+p.count));for(let B=E,D=w;B<D;B+=3){const T=o.getX(B),M=o.getX(B+1),R=o.getX(B+2);i=tB(this,x,e,r,c,u,h,T,M,R),i&&(i.faceIndex=Math.floor(B/3),i.face.materialIndex=A.materialIndex,n.push(i))}}else{const m=Math.max(0,p.start),v=Math.min(o.count,p.start+p.count);for(let A=m,x=v;A<x;A+=3){const E=o.getX(A),w=o.getX(A+1),B=o.getX(A+2);i=tB(this,a,e,r,c,u,h,E,w,B),i&&(i.faceIndex=Math.floor(A/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let m=0,v=f.length;m<v;m++){const A=f[m],x=a[A.materialIndex],E=Math.max(A.start,p.start),w=Math.min(l.count,Math.min(A.start+A.count,p.start+p.count));for(let B=E,D=w;B<D;B+=3){const T=B,M=B+1,R=B+2;i=tB(this,x,e,r,c,u,h,T,M,R),i&&(i.faceIndex=Math.floor(B/3),i.face.materialIndex=A.materialIndex,n.push(i))}}else{const m=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);for(let A=m,x=v;A<x;A+=3){const E=A,w=A+1,B=A+2;i=tB(this,a,e,r,c,u,h,E,w,B),i&&(i.faceIndex=Math.floor(A/3),n.push(i))}}}}function bxe(t,e,n,r,i,s,a,o){let l;if(e.side===ld?l=r.intersectTriangle(a,s,i,!0,o):l=r.intersectTriangle(i,s,a,e.side===Ly,o),l===null)return null;eB.copy(o),eB.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(eB);return c<n.near||c>n.far?null:{distance:c,point:eB.clone(),object:t}}function tB(t,e,n,r,i,s,a,o,l,c){t.getVertexPosition(o,Y2),t.getVertexPosition(l,X2),t.getVertexPosition(c,J2);const u=bxe(t,e,n,r,Y2,X2,J2,Ez);if(u){const h=new mt;yp.getBarycoord(Ez,Y2,X2,J2,h),i&&(u.uv=yp.getInterpolatedAttribute(i,o,l,c,h,new Ir)),s&&(u.uv1=yp.getInterpolatedAttribute(s,o,l,c,h,new Ir)),a&&(u.normal=yp.getInterpolatedAttribute(a,o,l,c,h,new mt),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const f={a:o,b:l,c,normal:new mt,materialIndex:0};yp.getNormal(Y2,X2,J2,f.normal),u.face=f,u.barycoord=h}return u}class vI extends pd{constructor(e=1,n=1,r=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:a};const o=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],u=[],h=[];let f=0,p=0;m("z","y","x",-1,-1,r,n,e,a,s,0),m("z","y","x",1,-1,r,n,-e,a,s,1),m("x","z","y",1,1,e,r,n,i,a,2),m("x","z","y",1,-1,e,r,-n,i,a,3),m("x","y","z",1,-1,e,n,r,i,s,4),m("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new x0(c,3)),this.setAttribute("normal",new x0(u,3)),this.setAttribute("uv",new x0(h,2));function m(v,A,x,E,w,B,D,T,M,R,k){const L=B/M,F=D/R,z=B/2,G=D/2,V=T/2,q=M+1,O=R+1;let H=0,K=0;const X=new mt;for(let re=0;re<O;re++){const J=re*F-G;for(let Z=0;Z<q;Z++){const ee=Z*L-z;X[v]=ee*E,X[A]=J*w,X[x]=V,c.push(X.x,X.y,X.z),X[v]=0,X[A]=0,X[x]=T>0?1:-1,u.push(X.x,X.y,X.z),h.push(Z/M),h.push(1-re/R),H+=1}}for(let re=0;re<R;re++)for(let J=0;J<M;J++){const Z=f+J+q*re,ee=f+J+q*(re+1),te=f+(J+1)+q*(re+1),oe=f+(J+1)+q*re;l.push(Z,ee,oe),l.push(ee,te,oe),K+=6}o.addGroup(p,K,k),p+=K,f+=H}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vI(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function aE(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(Or("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function ou(t){const e={};for(let n=0;n<t.length;n++){const r=aE(t[n]);for(const i in r)e[i]=r[i]}return e}function Cxe(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function qY(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Li.workingColorSpace}const vb={clone:aE,merge:ou};var Exe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Sxe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ta extends yI{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Exe,this.fragmentShader=Sxe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=aE(e.uniforms),this.uniformsGroups=Cxe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?n.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?n.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[i]={type:"m4",value:a.toArray()}:n.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class YY extends fu{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ma,this.projectionMatrix=new Ma,this.projectionMatrixInverse=new Ma,this.coordinateSystem=Og,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ty=new mt,Sz=new Ir,wz=new Ir;class lu extends YY{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=N5*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(zD*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return N5*2*Math.atan(Math.tan(zD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){ty.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(ty.x,ty.y).multiplyScalar(-e/ty.z),ty.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(ty.x,ty.y).multiplyScalar(-e/ty.z)}getViewSize(e,n){return this.getViewBounds(e,Sz,wz),n.subVectors(wz,Sz)}setViewOffset(e,n,r,i,s,a){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(zD*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*i/l,n-=a.offsetY*r/c,i*=a.width/l,r*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const VC=-90,WC=1;class wxe extends fu{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new lu(VC,WC,e,n);i.layers=this.layers,this.add(i);const s=new lu(VC,WC,e,n);s.layers=this.layers,this.add(s);const a=new lu(VC,WC,e,n);a.layers=this.layers,this.add(a);const o=new lu(VC,WC,e,n);o.layers=this.layers,this.add(o);const l=new lu(VC,WC,e,n);l.layers=this.layers,this.add(l);const c=new lu(VC,WC,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,s,a,o,l]=n;for(const c of n)this.remove(c);if(e===Og)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===ST)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,c,u]=this.children,h=e.getRenderTarget(),f=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,s),e.setRenderTarget(r,1,i),e.render(n,a),e.setRenderTarget(r,2,i),e.render(n,o),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(h,f,p),e.xr.enabled=m,r.texture.needsPMREMUpdate=!0}}class XY extends mf{constructor(e=[],n=rE,r,i,s,a,o,l,c,u){super(e,n,r,i,s,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class _xe extends Jd{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new XY(i),this._setTextureOptions(n),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new vI(5,5,5),s=new Ta({name:"CubemapFromEquirect",uniforms:aE(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ld,blending:Ip});s.uniforms.tEquirect.value=n;const a=new Dp(i,s),o=n.minFilter;return n.minFilter===Kx&&(n.minFilter=_l),new wxe(1,10,this).update(e,a),n.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,n=!0,r=!0,i=!0){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(n,r,i);e.setRenderTarget(s)}}let nB=class extends fu{constructor(){super(),this.isGroup=!0,this.type="Group"}};const Ixe={type:"move"};class lR{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new nB,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new nB,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new mt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new mt),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new nB,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new mt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new mt),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const v of e.hand.values()){const A=n.getJointPose(v,r),x=this._getHandJoint(c,v);A!==null&&(x.matrix.fromArray(A.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=A.radius),x.visible=A!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],f=u.position.distanceTo(h.position),p=.02,m=.005;c.inputState.pinching&&f>p+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=p-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Ixe)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new nB;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class Y8{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new Gr(e),this.near=n,this.far=r}clone(){return new Y8(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class xI extends fu{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new D0,this.environmentIntensity=1,this.environmentRotation=new D0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class X8 extends mf{constructor(e=null,n=1,r=1,i,s,a,o,l,c=hu,u=hu,h,f){super(null,a,o,l,c,u,i,s,h,f),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class r0 extends xr{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const KC=new Ma,_z=new Ma,rB=[],Iz=new jb,Bxe=new Ma,OS=new Dp,zS=new FE;class Txe extends Dp{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new r0(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,Bxe)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new jb),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,KC),Iz.copy(e.boundingBox).applyMatrix4(KC),this.boundingBox.union(Iz)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new FE),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,KC),zS.copy(e.boundingSphere).applyMatrix4(KC),this.boundingSphere.union(zS)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const r=n.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,a=e*s+1;for(let o=0;o<r.length;o++)r[o]=i[a+o]}raycast(e,n){const r=this.matrixWorld,i=this.count;if(OS.geometry=this.geometry,OS.material=this.material,OS.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),zS.copy(this.boundingSphere),zS.applyMatrix4(r),e.ray.intersectsSphere(zS)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,KC),_z.multiplyMatrices(r,KC),OS.matrixWorld=_z,OS.raycast(e,rB);for(let a=0,o=rB.length;a<o;a++){const l=rB[a];l.instanceId=s,l.object=this,n.push(l)}rB.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new r0(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const r=n.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new X8(new Float32Array(i*this.count),i,this.count,U8,Cp));const s=this.morphTexture.source.data.data;let a=0;for(let c=0;c<r.length;c++)a+=r[c];const o=this.geometry.morphTargetsRelative?1:1-a,l=i*e;s[l]=o,s.set(r,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const cR=new mt,Mxe=new mt,Dxe=new Qr;class _x{constructor(e=new mt(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=cR.subVectors(r,n).cross(Mxe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(cR),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||Dxe.getNormalMatrix(e),i=this.coplanarPoint(cR).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const cx=new FE,Rxe=new Ir(.5,.5),iB=new mt;class JY{constructor(e=new _x,n=new _x,r=new _x,i=new _x,s=new _x,a=new _x){this.planes=[e,n,r,i,s,a]}set(e,n,r,i,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(n),o[2].copy(r),o[3].copy(i),o[4].copy(s),o[5].copy(a),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=Og,r=!1){const i=this.planes,s=e.elements,a=s[0],o=s[1],l=s[2],c=s[3],u=s[4],h=s[5],f=s[6],p=s[7],m=s[8],v=s[9],A=s[10],x=s[11],E=s[12],w=s[13],B=s[14],D=s[15];if(i[0].setComponents(c-a,p-u,x-m,D-E).normalize(),i[1].setComponents(c+a,p+u,x+m,D+E).normalize(),i[2].setComponents(c+o,p+h,x+v,D+w).normalize(),i[3].setComponents(c-o,p-h,x-v,D-w).normalize(),r)i[4].setComponents(l,f,A,B).normalize(),i[5].setComponents(c-l,p-f,x-A,D-B).normalize();else if(i[4].setComponents(c-l,p-f,x-A,D-B).normalize(),n===Og)i[5].setComponents(c+l,p+f,x+A,D+B).normalize();else if(n===ST)i[5].setComponents(l,f,A,B).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),cx.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),cx.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(cx)}intersectsSprite(e){cx.center.set(0,0,0);const n=Rxe.distanceTo(e.center);return cx.radius=.7071067811865476+n,cx.applyMatrix4(e.matrixWorld),this.intersectsSphere(cx)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(iB.x=i.normal.x>0?e.max.x:e.min.x,iB.y=i.normal.y>0?e.max.y:e.min.y,iB.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(iB)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class Pxe extends yI{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Gr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Bz=new Ma,L5=new HY,sB=new FE,aB=new mt;class zM extends fu{constructor(e=new pd,n=new Pxe){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),sB.copy(r.boundingSphere),sB.applyMatrix4(i),sB.radius+=s,e.ray.intersectsSphere(sB)===!1)return;Bz.copy(i).invert(),L5.copy(e.ray).applyMatrix4(Bz);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=r.index,h=r.attributes.position;if(c!==null){const f=Math.max(0,a.start),p=Math.min(c.count,a.start+a.count);for(let m=f,v=p;m<v;m++){const A=c.getX(m);aB.fromBufferAttribute(h,A),Tz(aB,A,l,i,e,n,this)}}else{const f=Math.max(0,a.start),p=Math.min(h.count,a.start+a.count);for(let m=f,v=p;m<v;m++)aB.fromBufferAttribute(h,m),Tz(aB,m,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function Tz(t,e,n,r,i,s,a){const o=L5.distanceSqToPoint(t);if(o<n){const l=new mt;L5.closestPointToPoint(t,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class J8 extends mf{constructor(e,n,r,i,s,a,o,l,c){super(e,n,r,i,s,a,o,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ZY extends mf{constructor(e,n,r=yb,i,s,a,o=hu,l=hu,c,u=w_,h=1){if(u!==w_&&u!==__)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const f={width:e,height:n,depth:h};super(f,i,s,a,o,l,u,r,c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new K8(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class eX extends mf{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}let Z8=class tX extends pd{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,a=n/2,o=Math.floor(r),l=Math.floor(i),c=o+1,u=l+1,h=e/o,f=n/l,p=[],m=[],v=[],A=[];for(let x=0;x<u;x++){const E=x*f-a;for(let w=0;w<c;w++){const B=w*h-s;m.push(B,-E,0),v.push(0,0,1),A.push(w/o),A.push(1-x/l)}}for(let x=0;x<l;x++)for(let E=0;E<o;E++){const w=E+c*x,B=E+c*(x+1),D=E+1+c*(x+1),T=E+1+c*x;p.push(w,B,T),p.push(B,D,T)}this.setIndex(p),this.setAttribute("position",new x0(m,3)),this.setAttribute("normal",new x0(v,3)),this.setAttribute("uv",new x0(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tX(e.width,e.height,e.widthSegments,e.heightSegments)}};class kxe extends Ta{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Nxe extends yI{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Gve,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Lxe extends yI{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class eF extends YY{constructor(e=-1,n=1,r=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,a=r+e,o=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class Fxe extends lu{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class jE{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=performance.now();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function Mz(t,e,n,r){const i=jxe(r);switch(n){case OY:return t*e;case U8:return t*e/i.components*i.byteLength;case H8:return t*e/i.components*i.byteLength;case G8:return t*e*2/i.components*i.byteLength;case V8:return t*e*2/i.components*i.byteLength;case zY:return t*e*3/i.components*i.byteLength;case nf:return t*e*4/i.components*i.byteLength;case W8:return t*e*4/i.components*i.byteLength;case U3:case H3:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case G3:case V3:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case l5:case u5:return Math.max(t,16)*Math.max(e,8)/4;case o5:case c5:return Math.max(t,8)*Math.max(e,8)/2;case d5:case h5:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case f5:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case p5:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case g5:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case m5:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case A5:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case y5:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case v5:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case x5:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case b5:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case C5:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case E5:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case S5:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case w5:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case _5:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case I5:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case B5:case T5:case M5:return Math.ceil(t/4)*Math.ceil(e/4)*16;case D5:case R5:return Math.ceil(t/4)*Math.ceil(e/4)*8;case P5:case k5:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function jxe(t){switch(t){case M0:case NY:return{byteLength:1,components:1};case E_:case LY:case af:return{byteLength:2,components:1};case $8:case Q8:return{byteLength:2,components:4};case yb:case z8:case Cp:return{byteLength:4,components:1};case FY:case jY:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:O8}}));typeof window<"u"&&(window.__THREE__?Or("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=O8);function nX(){let t=null,e=!1,n=null,r=null;function i(s,a){n(s,a),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function Oxe(t){const e=new WeakMap;function n(o,l){const c=o.array,u=o.usage,h=c.byteLength,f=t.createBuffer();t.bindBuffer(l,f),t.bufferData(l,c,u),o.onUploadCallback();let p;if(c instanceof Float32Array)p=t.FLOAT;else if(typeof Float16Array<"u"&&c instanceof Float16Array)p=t.HALF_FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?p=t.HALF_FLOAT:p=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)p=t.SHORT;else if(c instanceof Uint32Array)p=t.UNSIGNED_INT;else if(c instanceof Int32Array)p=t.INT;else if(c instanceof Int8Array)p=t.BYTE;else if(c instanceof Uint8Array)p=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)p=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:p,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:h}}function r(o,l,c){const u=l.array,h=l.updateRanges;if(t.bindBuffer(c,o),h.length===0)t.bufferSubData(c,0,u);else{h.sort((p,m)=>p.start-m.start);let f=0;for(let p=1;p<h.length;p++){const m=h[f],v=h[p];v.start<=m.start+m.count+1?m.count=Math.max(m.count,v.start+v.count-m.start):(++f,h[f]=v)}h.length=f+1;for(let p=0,m=h.length;p<m;p++){const v=h[p];t.bufferSubData(c,v.start*u.BYTES_PER_ELEMENT,u,v.start,v.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(t.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const u=e.get(o);(!u||u.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const c=e.get(o);if(c===void 0)e.set(o,n(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,o,l),c.version=o.version}}return{get:i,remove:s,update:a}}var zxe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,$xe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Qxe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Uxe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Hxe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Gxe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Vxe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Wxe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Kxe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,qxe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Yxe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Xxe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Jxe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Zxe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,ebe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,tbe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,nbe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,rbe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,ibe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,sbe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,abe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,obe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,lbe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,cbe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,ube=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,dbe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,hbe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,fbe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,pbe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,gbe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,mbe="gl_FragColor = linearToOutputTexel( gl_FragColor );",Abe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,ybe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,vbe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,xbe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,bbe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Cbe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Ebe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Sbe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,wbe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,_be=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Ibe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Bbe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Tbe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Mbe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Dbe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Rbe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Pbe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,kbe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Nbe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Lbe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Fbe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,jbe=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 uv = vec2( roughness, dotNV );
	return texture2D( dfgLUT, uv ).rg;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNV * dotNV), 0.0, dotNV), material.roughness );
	vec2 dfgL = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNL * dotNL), 0.0, dotNL), material.roughness );
	vec3 FssEss_V = material.specularColor * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColor * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColor + ( 1.0 - material.specularColor ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Obe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,zbe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,$be=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Qbe=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Ube=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Hbe=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Gbe=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Vbe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Wbe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Kbe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,qbe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ybe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Xbe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Jbe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Zbe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,eCe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,tCe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,nCe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,rCe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,iCe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,sCe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,aCe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,oCe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,lCe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,cCe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,uCe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,dCe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,hCe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,fCe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,pCe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,gCe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,mCe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,ACe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,yCe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,vCe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,xCe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,bCe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,CCe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,ECe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,SCe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,wCe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,_Ce=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,ICe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,BCe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,TCe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,MCe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,DCe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,RCe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,PCe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,kCe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,NCe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,LCe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,FCe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,jCe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const OCe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,zCe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$Ce=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,QCe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,UCe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,HCe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,GCe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,VCe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,WCe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,KCe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,qCe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,YCe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,XCe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,JCe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ZCe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,e1e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,t1e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,n1e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,r1e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,i1e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,s1e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,a1e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,o1e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,l1e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,c1e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,u1e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,d1e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,h1e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,f1e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,p1e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,g1e=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,m1e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,A1e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,y1e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Xr={alphahash_fragment:zxe,alphahash_pars_fragment:$xe,alphamap_fragment:Qxe,alphamap_pars_fragment:Uxe,alphatest_fragment:Hxe,alphatest_pars_fragment:Gxe,aomap_fragment:Vxe,aomap_pars_fragment:Wxe,batching_pars_vertex:Kxe,batching_vertex:qxe,begin_vertex:Yxe,beginnormal_vertex:Xxe,bsdfs:Jxe,iridescence_fragment:Zxe,bumpmap_pars_fragment:ebe,clipping_planes_fragment:tbe,clipping_planes_pars_fragment:nbe,clipping_planes_pars_vertex:rbe,clipping_planes_vertex:ibe,color_fragment:sbe,color_pars_fragment:abe,color_pars_vertex:obe,color_vertex:lbe,common:cbe,cube_uv_reflection_fragment:ube,defaultnormal_vertex:dbe,displacementmap_pars_vertex:hbe,displacementmap_vertex:fbe,emissivemap_fragment:pbe,emissivemap_pars_fragment:gbe,colorspace_fragment:mbe,colorspace_pars_fragment:Abe,envmap_fragment:ybe,envmap_common_pars_fragment:vbe,envmap_pars_fragment:xbe,envmap_pars_vertex:bbe,envmap_physical_pars_fragment:Rbe,envmap_vertex:Cbe,fog_vertex:Ebe,fog_pars_vertex:Sbe,fog_fragment:wbe,fog_pars_fragment:_be,gradientmap_pars_fragment:Ibe,lightmap_pars_fragment:Bbe,lights_lambert_fragment:Tbe,lights_lambert_pars_fragment:Mbe,lights_pars_begin:Dbe,lights_toon_fragment:Pbe,lights_toon_pars_fragment:kbe,lights_phong_fragment:Nbe,lights_phong_pars_fragment:Lbe,lights_physical_fragment:Fbe,lights_physical_pars_fragment:jbe,lights_fragment_begin:Obe,lights_fragment_maps:zbe,lights_fragment_end:$be,logdepthbuf_fragment:Qbe,logdepthbuf_pars_fragment:Ube,logdepthbuf_pars_vertex:Hbe,logdepthbuf_vertex:Gbe,map_fragment:Vbe,map_pars_fragment:Wbe,map_particle_fragment:Kbe,map_particle_pars_fragment:qbe,metalnessmap_fragment:Ybe,metalnessmap_pars_fragment:Xbe,morphinstance_vertex:Jbe,morphcolor_vertex:Zbe,morphnormal_vertex:eCe,morphtarget_pars_vertex:tCe,morphtarget_vertex:nCe,normal_fragment_begin:rCe,normal_fragment_maps:iCe,normal_pars_fragment:sCe,normal_pars_vertex:aCe,normal_vertex:oCe,normalmap_pars_fragment:lCe,clearcoat_normal_fragment_begin:cCe,clearcoat_normal_fragment_maps:uCe,clearcoat_pars_fragment:dCe,iridescence_pars_fragment:hCe,opaque_fragment:fCe,packing:pCe,premultiplied_alpha_fragment:gCe,project_vertex:mCe,dithering_fragment:ACe,dithering_pars_fragment:yCe,roughnessmap_fragment:vCe,roughnessmap_pars_fragment:xCe,shadowmap_pars_fragment:bCe,shadowmap_pars_vertex:CCe,shadowmap_vertex:ECe,shadowmask_pars_fragment:SCe,skinbase_vertex:wCe,skinning_pars_vertex:_Ce,skinning_vertex:ICe,skinnormal_vertex:BCe,specularmap_fragment:TCe,specularmap_pars_fragment:MCe,tonemapping_fragment:DCe,tonemapping_pars_fragment:RCe,transmission_fragment:PCe,transmission_pars_fragment:kCe,uv_pars_fragment:NCe,uv_pars_vertex:LCe,uv_vertex:FCe,worldpos_vertex:jCe,background_vert:OCe,background_frag:zCe,backgroundCube_vert:$Ce,backgroundCube_frag:QCe,cube_vert:UCe,cube_frag:HCe,depth_vert:GCe,depth_frag:VCe,distanceRGBA_vert:WCe,distanceRGBA_frag:KCe,equirect_vert:qCe,equirect_frag:YCe,linedashed_vert:XCe,linedashed_frag:JCe,meshbasic_vert:ZCe,meshbasic_frag:e1e,meshlambert_vert:t1e,meshlambert_frag:n1e,meshmatcap_vert:r1e,meshmatcap_frag:i1e,meshnormal_vert:s1e,meshnormal_frag:a1e,meshphong_vert:o1e,meshphong_frag:l1e,meshphysical_vert:c1e,meshphysical_frag:u1e,meshtoon_vert:d1e,meshtoon_frag:h1e,points_vert:f1e,points_frag:p1e,shadow_vert:g1e,shadow_frag:m1e,sprite_vert:A1e,sprite_frag:y1e},vn={common:{diffuse:{value:new Gr(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Qr},alphaMap:{value:null},alphaMapTransform:{value:new Qr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Qr}},envmap:{envMap:{value:null},envMapRotation:{value:new Qr},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Qr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Qr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Qr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Qr},normalScale:{value:new Ir(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Qr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Qr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Qr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Qr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Gr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Gr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Qr},alphaTest:{value:0},uvTransform:{value:new Qr}},sprite:{diffuse:{value:new Gr(16777215)},opacity:{value:1},center:{value:new Ir(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Qr},alphaMap:{value:null},alphaMapTransform:{value:new Qr},alphaTest:{value:0}}},Ng={basic:{uniforms:ou([vn.common,vn.specularmap,vn.envmap,vn.aomap,vn.lightmap,vn.fog]),vertexShader:Xr.meshbasic_vert,fragmentShader:Xr.meshbasic_frag},lambert:{uniforms:ou([vn.common,vn.specularmap,vn.envmap,vn.aomap,vn.lightmap,vn.emissivemap,vn.bumpmap,vn.normalmap,vn.displacementmap,vn.fog,vn.lights,{emissive:{value:new Gr(0)}}]),vertexShader:Xr.meshlambert_vert,fragmentShader:Xr.meshlambert_frag},phong:{uniforms:ou([vn.common,vn.specularmap,vn.envmap,vn.aomap,vn.lightmap,vn.emissivemap,vn.bumpmap,vn.normalmap,vn.displacementmap,vn.fog,vn.lights,{emissive:{value:new Gr(0)},specular:{value:new Gr(1118481)},shininess:{value:30}}]),vertexShader:Xr.meshphong_vert,fragmentShader:Xr.meshphong_frag},standard:{uniforms:ou([vn.common,vn.envmap,vn.aomap,vn.lightmap,vn.emissivemap,vn.bumpmap,vn.normalmap,vn.displacementmap,vn.roughnessmap,vn.metalnessmap,vn.fog,vn.lights,{emissive:{value:new Gr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Xr.meshphysical_vert,fragmentShader:Xr.meshphysical_frag},toon:{uniforms:ou([vn.common,vn.aomap,vn.lightmap,vn.emissivemap,vn.bumpmap,vn.normalmap,vn.displacementmap,vn.gradientmap,vn.fog,vn.lights,{emissive:{value:new Gr(0)}}]),vertexShader:Xr.meshtoon_vert,fragmentShader:Xr.meshtoon_frag},matcap:{uniforms:ou([vn.common,vn.bumpmap,vn.normalmap,vn.displacementmap,vn.fog,{matcap:{value:null}}]),vertexShader:Xr.meshmatcap_vert,fragmentShader:Xr.meshmatcap_frag},points:{uniforms:ou([vn.points,vn.fog]),vertexShader:Xr.points_vert,fragmentShader:Xr.points_frag},dashed:{uniforms:ou([vn.common,vn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Xr.linedashed_vert,fragmentShader:Xr.linedashed_frag},depth:{uniforms:ou([vn.common,vn.displacementmap]),vertexShader:Xr.depth_vert,fragmentShader:Xr.depth_frag},normal:{uniforms:ou([vn.common,vn.bumpmap,vn.normalmap,vn.displacementmap,{opacity:{value:1}}]),vertexShader:Xr.meshnormal_vert,fragmentShader:Xr.meshnormal_frag},sprite:{uniforms:ou([vn.sprite,vn.fog]),vertexShader:Xr.sprite_vert,fragmentShader:Xr.sprite_frag},background:{uniforms:{uvTransform:{value:new Qr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Xr.background_vert,fragmentShader:Xr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Qr}},vertexShader:Xr.backgroundCube_vert,fragmentShader:Xr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Xr.cube_vert,fragmentShader:Xr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Xr.equirect_vert,fragmentShader:Xr.equirect_frag},distanceRGBA:{uniforms:ou([vn.common,vn.displacementmap,{referencePosition:{value:new mt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Xr.distanceRGBA_vert,fragmentShader:Xr.distanceRGBA_frag},shadow:{uniforms:ou([vn.lights,vn.fog,{color:{value:new Gr(0)},opacity:{value:1}}]),vertexShader:Xr.shadow_vert,fragmentShader:Xr.shadow_frag}};Ng.physical={uniforms:ou([Ng.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Qr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Qr},clearcoatNormalScale:{value:new Ir(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Qr},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Qr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Qr},sheen:{value:0},sheenColor:{value:new Gr(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Qr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Qr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Qr},transmissionSamplerSize:{value:new Ir},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Qr},attenuationDistance:{value:0},attenuationColor:{value:new Gr(0)},specularColor:{value:new Gr(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Qr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Qr},anisotropyVector:{value:new Ir},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Qr}}]),vertexShader:Xr.meshphysical_vert,fragmentShader:Xr.meshphysical_frag};const oB={r:0,b:0,g:0},ux=new D0,v1e=new Ma;function x1e(t,e,n,r,i,s,a){const o=new Gr(0);let l=s===!0?0:1,c,u,h=null,f=0,p=null;function m(w){let B=w.isScene===!0?w.background:null;return B&&B.isTexture&&(B=(w.backgroundBlurriness>0?n:e).get(B)),B}function v(w){let B=!1;const D=m(w);D===null?x(o,l):D&&D.isColor&&(x(D,1),B=!0);const T=t.xr.getEnvironmentBlendMode();T==="additive"?r.buffers.color.setClear(0,0,0,1,a):T==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,a),(t.autoClear||B)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function A(w,B){const D=m(B);D&&(D.isCubeTexture||D.mapping===OM)?(u===void 0&&(u=new Dp(new vI(1,1,1),new Ta({name:"BackgroundCubeMaterial",uniforms:aE(Ng.backgroundCube.uniforms),vertexShader:Ng.backgroundCube.vertexShader,fragmentShader:Ng.backgroundCube.fragmentShader,side:ld,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(T,M,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),ux.copy(B.backgroundRotation),ux.x*=-1,ux.y*=-1,ux.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(ux.y*=-1,ux.z*=-1),u.material.uniforms.envMap.value=D,u.material.uniforms.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=B.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(v1e.makeRotationFromEuler(ux)),u.material.toneMapped=Li.getTransfer(D.colorSpace)!==ps,(h!==D||f!==D.version||p!==t.toneMapping)&&(u.material.needsUpdate=!0,h=D,f=D.version,p=t.toneMapping),u.layers.enableAll(),w.unshift(u,u.geometry,u.material,0,0,null)):D&&D.isTexture&&(c===void 0&&(c=new Dp(new Z8(2,2),new Ta({name:"BackgroundMaterial",uniforms:aE(Ng.background.uniforms),vertexShader:Ng.background.vertexShader,fragmentShader:Ng.background.fragmentShader,side:Ly,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=D,c.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,c.material.toneMapped=Li.getTransfer(D.colorSpace)!==ps,D.matrixAutoUpdate===!0&&D.updateMatrix(),c.material.uniforms.uvTransform.value.copy(D.matrix),(h!==D||f!==D.version||p!==t.toneMapping)&&(c.material.needsUpdate=!0,h=D,f=D.version,p=t.toneMapping),c.layers.enableAll(),w.unshift(c,c.geometry,c.material,0,0,null))}function x(w,B){w.getRGB(oB,qY(t)),r.buffers.color.setClear(oB.r,oB.g,oB.b,B,a)}function E(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return o},setClearColor:function(w,B=1){o.set(w),l=B,x(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(w){l=w,x(o,l)},render:v,addToRenderList:A,dispose:E}}function b1e(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=f(null);let s=i,a=!1;function o(L,F,z,G,V){let q=!1;const O=h(G,z,F);s!==O&&(s=O,c(s.object)),q=p(L,G,z,V),q&&m(L,G,z,V),V!==null&&e.update(V,t.ELEMENT_ARRAY_BUFFER),(q||a)&&(a=!1,B(L,F,z,G),V!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(V).buffer))}function l(){return t.createVertexArray()}function c(L){return t.bindVertexArray(L)}function u(L){return t.deleteVertexArray(L)}function h(L,F,z){const G=z.wireframe===!0;let V=r[L.id];V===void 0&&(V={},r[L.id]=V);let q=V[F.id];q===void 0&&(q={},V[F.id]=q);let O=q[G];return O===void 0&&(O=f(l()),q[G]=O),O}function f(L){const F=[],z=[],G=[];for(let V=0;V<n;V++)F[V]=0,z[V]=0,G[V]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:z,attributeDivisors:G,object:L,attributes:{},index:null}}function p(L,F,z,G){const V=s.attributes,q=F.attributes;let O=0;const H=z.getAttributes();for(const K in H)if(H[K].location>=0){const re=V[K];let J=q[K];if(J===void 0&&(K==="instanceMatrix"&&L.instanceMatrix&&(J=L.instanceMatrix),K==="instanceColor"&&L.instanceColor&&(J=L.instanceColor)),re===void 0||re.attribute!==J||J&&re.data!==J.data)return!0;O++}return s.attributesNum!==O||s.index!==G}function m(L,F,z,G){const V={},q=F.attributes;let O=0;const H=z.getAttributes();for(const K in H)if(H[K].location>=0){let re=q[K];re===void 0&&(K==="instanceMatrix"&&L.instanceMatrix&&(re=L.instanceMatrix),K==="instanceColor"&&L.instanceColor&&(re=L.instanceColor));const J={};J.attribute=re,re&&re.data&&(J.data=re.data),V[K]=J,O++}s.attributes=V,s.attributesNum=O,s.index=G}function v(){const L=s.newAttributes;for(let F=0,z=L.length;F<z;F++)L[F]=0}function A(L){x(L,0)}function x(L,F){const z=s.newAttributes,G=s.enabledAttributes,V=s.attributeDivisors;z[L]=1,G[L]===0&&(t.enableVertexAttribArray(L),G[L]=1),V[L]!==F&&(t.vertexAttribDivisor(L,F),V[L]=F)}function E(){const L=s.newAttributes,F=s.enabledAttributes;for(let z=0,G=F.length;z<G;z++)F[z]!==L[z]&&(t.disableVertexAttribArray(z),F[z]=0)}function w(L,F,z,G,V,q,O){O===!0?t.vertexAttribIPointer(L,F,z,V,q):t.vertexAttribPointer(L,F,z,G,V,q)}function B(L,F,z,G){v();const V=G.attributes,q=z.getAttributes(),O=F.defaultAttributeValues;for(const H in q){const K=q[H];if(K.location>=0){let X=V[H];if(X===void 0&&(H==="instanceMatrix"&&L.instanceMatrix&&(X=L.instanceMatrix),H==="instanceColor"&&L.instanceColor&&(X=L.instanceColor)),X!==void 0){const re=X.normalized,J=X.itemSize,Z=e.get(X);if(Z===void 0)continue;const ee=Z.buffer,te=Z.type,oe=Z.bytesPerElement,ae=te===t.INT||te===t.UNSIGNED_INT||X.gpuType===z8;if(X.isInterleavedBufferAttribute){const se=X.data,fe=se.stride,Ee=X.offset;if(se.isInstancedInterleavedBuffer){for(let Be=0;Be<K.locationSize;Be++)x(K.location+Be,se.meshPerAttribute);L.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let Be=0;Be<K.locationSize;Be++)A(K.location+Be);t.bindBuffer(t.ARRAY_BUFFER,ee);for(let Be=0;Be<K.locationSize;Be++)w(K.location+Be,J/K.locationSize,te,re,fe*oe,(Ee+J/K.locationSize*Be)*oe,ae)}else{if(X.isInstancedBufferAttribute){for(let se=0;se<K.locationSize;se++)x(K.location+se,X.meshPerAttribute);L.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=X.meshPerAttribute*X.count)}else for(let se=0;se<K.locationSize;se++)A(K.location+se);t.bindBuffer(t.ARRAY_BUFFER,ee);for(let se=0;se<K.locationSize;se++)w(K.location+se,J/K.locationSize,te,re,J*oe,J/K.locationSize*se*oe,ae)}}else if(O!==void 0){const re=O[H];if(re!==void 0)switch(re.length){case 2:t.vertexAttrib2fv(K.location,re);break;case 3:t.vertexAttrib3fv(K.location,re);break;case 4:t.vertexAttrib4fv(K.location,re);break;default:t.vertexAttrib1fv(K.location,re)}}}}E()}function D(){R();for(const L in r){const F=r[L];for(const z in F){const G=F[z];for(const V in G)u(G[V].object),delete G[V];delete F[z]}delete r[L]}}function T(L){if(r[L.id]===void 0)return;const F=r[L.id];for(const z in F){const G=F[z];for(const V in G)u(G[V].object),delete G[V];delete F[z]}delete r[L.id]}function M(L){for(const F in r){const z=r[F];if(z[L.id]===void 0)continue;const G=z[L.id];for(const V in G)u(G[V].object),delete G[V];delete z[L.id]}}function R(){k(),a=!0,s!==i&&(s=i,c(s.object))}function k(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:R,resetDefaultState:k,dispose:D,releaseStatesOfGeometry:T,releaseStatesOfProgram:M,initAttributes:v,enableAttribute:A,disableUnusedAttributes:E}}function C1e(t,e,n){let r;function i(c){r=c}function s(c,u){t.drawArrays(r,c,u),n.update(u,r,1)}function a(c,u,h){h!==0&&(t.drawArraysInstanced(r,c,u,h),n.update(u,r,h))}function o(c,u,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,h);let p=0;for(let m=0;m<h;m++)p+=u[m];n.update(p,r,1)}function l(c,u,h,f){if(h===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let m=0;m<c.length;m++)a(c[m],u[m],f[m]);else{p.multiDrawArraysInstancedWEBGL(r,c,0,u,0,f,0,h);let m=0;for(let v=0;v<h;v++)m+=u[v]*f[v];n.update(m,r,1)}}this.setMode=i,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function E1e(t,e,n,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const M=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(M){return!(M!==nf&&r.convert(M)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(M){const R=M===af&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(M!==M0&&r.convert(M)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&M!==Cp&&!R)}function l(M){if(M==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp";const u=l(c);u!==c&&(Or("WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const h=n.logarithmicDepthBuffer===!0,f=n.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),p=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),m=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=t.getParameter(t.MAX_TEXTURE_SIZE),A=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),x=t.getParameter(t.MAX_VERTEX_ATTRIBS),E=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),w=t.getParameter(t.MAX_VARYING_VECTORS),B=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),D=m>0,T=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:h,reversedDepthBuffer:f,maxTextures:p,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:A,maxAttributes:x,maxVertexUniforms:E,maxVaryings:w,maxFragmentUniforms:B,vertexTextures:D,maxSamples:T}}function S1e(t){const e=this;let n=null,r=0,i=!1,s=!1;const a=new _x,o=new Qr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f){const p=h.length!==0||f||r!==0||i;return i=f,r=h.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,f){n=u(h,f,0)},this.setState=function(h,f,p){const m=h.clippingPlanes,v=h.clipIntersection,A=h.clipShadows,x=t.get(h);if(!i||m===null||m.length===0||s&&!A)s?u(null):c();else{const E=s?0:r,w=E*4;let B=x.clippingState||null;l.value=B,B=u(m,f,w,p);for(let D=0;D!==w;++D)B[D]=n[D];x.clippingState=B,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=E}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(h,f,p,m){const v=h!==null?h.length:0;let A=null;if(v!==0){if(A=l.value,m!==!0||A===null){const x=p+v*4,E=f.matrixWorldInverse;o.getNormalMatrix(E),(A===null||A.length<x)&&(A=new Float32Array(x));for(let w=0,B=p;w!==v;++w,B+=4)a.copy(h[w]).applyMatrix4(E,o),a.normal.toArray(A,B),A[B+3]=a.constant}l.value=A,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,A}}function w1e(t){let e=new WeakMap;function n(a,o){return o===r5?a.mapping=rE:o===i5&&(a.mapping=iE),a}function r(a){if(a&&a.isTexture){const o=a.mapping;if(o===r5||o===i5)if(e.has(a)){const l=e.get(a).texture;return n(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new _xe(l.height);return c.fromEquirectangularTexture(t,a),e.set(a,c),a.addEventListener("dispose",i),n(c.texture,a.mapping)}else return null}}return a}function i(a){const o=a.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const vy=4,Dz=[.125,.215,.35,.446,.526,.582],zx=20,_1e=256,$S=new eF,Rz=new Gr;let uR=null,dR=0,hR=0,fR=!1;const I1e=new mt;class Pz{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,n=0,r=.1,i=100,s={}){const{size:a=256,position:o=I1e}=s;uR=this._renderer.getRenderTarget(),dR=this._renderer.getActiveCubeFace(),hR=this._renderer.getActiveMipmapLevel(),fR=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,r,i,l,o),n>0&&this._blur(l,0,0,n),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Lz(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Nz(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(uR,dR,hR),this._renderer.xr.enabled=fR,e.scissorTest=!1,qC(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===rE||e.mapping===iE?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),uR=this._renderer.getRenderTarget(),dR=this._renderer.getActiveCubeFace(),hR=this._renderer.getActiveMipmapLevel(),fR=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:_l,minFilter:_l,generateMipmaps:!1,type:af,format:nf,colorSpace:sE,depthBuffer:!1},i=kz(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=kz(e,n,r);const{_lodMax:s}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=B1e(s)),this._blurMaterial=M1e(s,e,n),this._ggxMaterial=T1e(s,e,n)}return i}_compileMaterial(e){const n=new Dp(new pd,e);this._renderer.compile(n,$S)}_sceneToCubeUV(e,n,r,i,s){const l=new lu(90,1,n,r),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,f=h.autoClear,p=h.toneMapping;h.getClearColor(Rz),h.toneMapping=Iy,h.autoClear=!1,h.state.buffers.depth.getReversed()&&(h.setRenderTarget(i),h.clearDepth(),h.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Dp(new vI,new q8({name:"PMREM.Background",side:ld,depthWrite:!1,depthTest:!1})));const v=this._backgroundBox,A=v.material;let x=!1;const E=e.background;E?E.isColor&&(A.color.copy(E),e.background=null,x=!0):(A.color.copy(Rz),x=!0);for(let w=0;w<6;w++){const B=w%3;B===0?(l.up.set(0,c[w],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+u[w],s.y,s.z)):B===1?(l.up.set(0,0,c[w]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+u[w],s.z)):(l.up.set(0,c[w],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+u[w]));const D=this._cubeSize;qC(i,B*D,w>2?D:0,D,D),h.setRenderTarget(i),x&&h.render(v,l),h.render(e,l)}h.toneMapping=p,h.autoClear=f,e.background=E}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===rE||e.mapping===iE;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=Lz()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Nz());const s=i?this._cubemapMaterial:this._equirectMaterial,a=this._lodMeshes[0];a.material=s;const o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;qC(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(a,$S)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodMeshes.length;for(let s=1;s<i;s++)this._applyGGXFilter(e,s-1,s);n.autoClear=r}_applyGGXFilter(e,n,r){const i=this._renderer,s=this._pingPongRenderTarget,a=this._ggxMaterial,o=this._lodMeshes[r];o.material=a;const l=a.uniforms,c=r/(this._lodMeshes.length-1),u=n/(this._lodMeshes.length-1),h=Math.sqrt(c*c-u*u),f=.05+c*.95,p=h*f,{_lodMax:m}=this,v=this._sizeLods[r],A=3*v*(r>m-vy?r-m+vy:0),x=4*(this._cubeSize-v);l.envMap.value=e.texture,l.roughness.value=p,l.mipInt.value=m-n,qC(s,A,x,3*v,2*v),i.setRenderTarget(s),i.render(o,$S),l.envMap.value=s.texture,l.roughness.value=0,l.mipInt.value=m-r,qC(e,A,x,3*v,2*v),i.setRenderTarget(e),i.render(o,$S)}_blur(e,n,r,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,n,r,i,"latitudinal",s),this._halfBlur(a,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&eo("blur direction must be either latitudinal or longitudinal!");const u=3,h=this._lodMeshes[i];h.material=c;const f=c.uniforms,p=this._sizeLods[r]-1,m=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*zx-1),v=s/m,A=isFinite(s)?1+Math.floor(u*v):zx;A>zx&&Or(`sigmaRadians, ${s}, is too large and will clip, as it requested ${A} samples when the maximum is set to ${zx}`);const x=[];let E=0;for(let M=0;M<zx;++M){const R=M/v,k=Math.exp(-R*R/2);x.push(k),M===0?E+=k:M<A&&(E+=2*k)}for(let M=0;M<x.length;M++)x[M]=x[M]/E;f.envMap.value=e.texture,f.samples.value=A,f.weights.value=x,f.latitudinal.value=a==="latitudinal",o&&(f.poleAxis.value=o);const{_lodMax:w}=this;f.dTheta.value=m,f.mipInt.value=w-r;const B=this._sizeLods[i],D=3*B*(i>w-vy?i-w+vy:0),T=4*(this._cubeSize-B);qC(n,D,T,3*B,2*B),l.setRenderTarget(n),l.render(h,$S)}}function B1e(t){const e=[],n=[],r=[];let i=t;const s=t-vy+1+Dz.length;for(let a=0;a<s;a++){const o=Math.pow(2,i);e.push(o);let l=1/o;a>t-vy?l=Dz[a-t+vy-1]:a===0&&(l=0),n.push(l);const c=1/(o-2),u=-c,h=1+c,f=[u,u,h,u,h,h,u,u,h,h,u,h],p=6,m=6,v=3,A=2,x=1,E=new Float32Array(v*m*p),w=new Float32Array(A*m*p),B=new Float32Array(x*m*p);for(let T=0;T<p;T++){const M=T%3*2/3-1,R=T>2?0:-1,k=[M,R,0,M+2/3,R,0,M+2/3,R+1,0,M,R,0,M+2/3,R+1,0,M,R+1,0];E.set(k,v*m*T),w.set(f,A*m*T);const L=[T,T,T,T,T,T];B.set(L,x*m*T)}const D=new pd;D.setAttribute("position",new xr(E,v)),D.setAttribute("uv",new xr(w,A)),D.setAttribute("faceIndex",new xr(B,x)),r.push(new Dp(D,null)),i>vy&&i--}return{lodMeshes:r,sizeLods:e,sigmas:n}}function kz(t,e,n){const r=new Jd(t,e,n);return r.texture.mapping=OM,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function qC(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function T1e(t,e,n){return new Ta({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:_1e,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:$M(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Ip,depthTest:!1,depthWrite:!1})}function M1e(t,e,n){const r=new Float32Array(zx),i=new mt(0,1,0);return new Ta({name:"SphericalGaussianBlur",defines:{n:zx,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:$M(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ip,depthTest:!1,depthWrite:!1})}function Nz(){return new Ta({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:$M(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ip,depthTest:!1,depthWrite:!1})}function Lz(){return new Ta({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:$M(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ip,depthTest:!1,depthWrite:!1})}function $M(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function D1e(t){let e=new WeakMap,n=null;function r(o){if(o&&o.isTexture){const l=o.mapping,c=l===r5||l===i5,u=l===rE||l===iE;if(c||u){let h=e.get(o);const f=h!==void 0?h.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==f)return n===null&&(n=new Pz(t)),h=c?n.fromEquirectangular(o,h):n.fromCubemap(o,h),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),h.texture;if(h!==void 0)return h.texture;{const p=o.image;return c&&p&&p.height>0||u&&p&&i(p)?(n===null&&(n=new Pz(t)),h=c?n.fromEquirectangular(o):n.fromCubemap(o),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),o.addEventListener("dispose",s),h.texture):null}}}return o}function i(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:a}}function R1e(t){const e={};function n(r){if(e[r]!==void 0)return e[r];const i=t.getExtension(r);return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&I_("WebGLRenderer: "+r+" extension not supported."),i}}}function P1e(t,e,n,r){const i={},s=new WeakMap;function a(h){const f=h.target;f.index!==null&&e.remove(f.index);for(const m in f.attributes)e.remove(f.attributes[m]);f.removeEventListener("dispose",a),delete i[f.id];const p=s.get(f);p&&(e.remove(p),s.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,n.memory.geometries--}function o(h,f){return i[f.id]===!0||(f.addEventListener("dispose",a),i[f.id]=!0,n.memory.geometries++),f}function l(h){const f=h.attributes;for(const p in f)e.update(f[p],t.ARRAY_BUFFER)}function c(h){const f=[],p=h.index,m=h.attributes.position;let v=0;if(p!==null){const E=p.array;v=p.version;for(let w=0,B=E.length;w<B;w+=3){const D=E[w+0],T=E[w+1],M=E[w+2];f.push(D,T,T,M,M,D)}}else if(m!==void 0){const E=m.array;v=m.version;for(let w=0,B=E.length/3-1;w<B;w+=3){const D=w+0,T=w+1,M=w+2;f.push(D,T,T,M,M,D)}}else return;const A=new(QY(f)?KY:WY)(f,1);A.version=v;const x=s.get(h);x&&e.remove(x),s.set(h,A)}function u(h){const f=s.get(h);if(f){const p=h.index;p!==null&&f.version<p.version&&c(h)}else c(h);return s.get(h)}return{get:o,update:l,getWireframeAttribute:u}}function k1e(t,e,n){let r;function i(f){r=f}let s,a;function o(f){s=f.type,a=f.bytesPerElement}function l(f,p){t.drawElements(r,p,s,f*a),n.update(p,r,1)}function c(f,p,m){m!==0&&(t.drawElementsInstanced(r,p,s,f*a,m),n.update(p,r,m))}function u(f,p,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,p,0,s,f,0,m);let A=0;for(let x=0;x<m;x++)A+=p[x];n.update(A,r,1)}function h(f,p,m,v){if(m===0)return;const A=e.get("WEBGL_multi_draw");if(A===null)for(let x=0;x<f.length;x++)c(f[x]/a,p[x],v[x]);else{A.multiDrawElementsInstancedWEBGL(r,p,0,s,f,0,v,0,m);let x=0;for(let E=0;E<m;E++)x+=p[E]*v[E];n.update(x,r,1)}}this.setMode=i,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=h}function N1e(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,a,o){switch(n.calls++,a){case t.TRIANGLES:n.triangles+=o*(s/3);break;case t.LINES:n.lines+=o*(s/2);break;case t.LINE_STRIP:n.lines+=o*(s-1);break;case t.LINE_LOOP:n.lines+=o*s;break;case t.POINTS:n.points+=o*s;break;default:eo("WebGLInfo: Unknown draw mode:",a);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function L1e(t,e,n){const r=new WeakMap,i=new to;function s(a,o,l){const c=a.morphTargetInfluences,u=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,h=u!==void 0?u.length:0;let f=r.get(o);if(f===void 0||f.count!==h){let k=function(){M.dispose(),r.delete(o),o.removeEventListener("dispose",k)};f!==void 0&&f.texture.dispose();const p=o.morphAttributes.position!==void 0,m=o.morphAttributes.normal!==void 0,v=o.morphAttributes.color!==void 0,A=o.morphAttributes.position||[],x=o.morphAttributes.normal||[],E=o.morphAttributes.color||[];let w=0;p===!0&&(w=1),m===!0&&(w=2),v===!0&&(w=3);let B=o.attributes.position.count*w,D=1;B>e.maxTextureSize&&(D=Math.ceil(B/e.maxTextureSize),B=e.maxTextureSize);const T=new Float32Array(B*D*4*h),M=new UY(T,B,D,h);M.type=Cp,M.needsUpdate=!0;const R=w*4;for(let L=0;L<h;L++){const F=A[L],z=x[L],G=E[L],V=B*D*4*L;for(let q=0;q<F.count;q++){const O=q*R;p===!0&&(i.fromBufferAttribute(F,q),T[V+O+0]=i.x,T[V+O+1]=i.y,T[V+O+2]=i.z,T[V+O+3]=0),m===!0&&(i.fromBufferAttribute(z,q),T[V+O+4]=i.x,T[V+O+5]=i.y,T[V+O+6]=i.z,T[V+O+7]=0),v===!0&&(i.fromBufferAttribute(G,q),T[V+O+8]=i.x,T[V+O+9]=i.y,T[V+O+10]=i.z,T[V+O+11]=G.itemSize===4?i.w:1)}}f={count:h,texture:M,size:new Ir(B,D)},r.set(o,f),o.addEventListener("dispose",k)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",a.morphTexture,n);else{let p=0;for(let v=0;v<c.length;v++)p+=c[v];const m=o.morphTargetsRelative?1:1-p;l.getUniforms().setValue(t,"morphTargetBaseInfluence",m),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",f.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",f.size)}return{update:s}}function F1e(t,e,n,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,h=e.get(l,u);if(i.get(h)!==c&&(e.update(h),i.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==c&&(f.update(),i.set(f,c))}return h}function a(){i=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:a}}const rX=new mf,Fz=new ZY(1,1),iX=new UY,sX=new uxe,aX=new XY,jz=[],Oz=[],zz=new Float32Array(16),$z=new Float32Array(9),Qz=new Float32Array(4);function OE(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=jz[i];if(s===void 0&&(s=new Float32Array(i),jz[i]=s),e!==0){r.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=n,t[a].toArray(s,o)}return s}function Xo(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Jo(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function QM(t,e){let n=Oz[e];n===void 0&&(n=new Int32Array(e),Oz[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function j1e(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function O1e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Xo(n,e))return;t.uniform2fv(this.addr,e),Jo(n,e)}}function z1e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Xo(n,e))return;t.uniform3fv(this.addr,e),Jo(n,e)}}function $1e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Xo(n,e))return;t.uniform4fv(this.addr,e),Jo(n,e)}}function Q1e(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Xo(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Jo(n,e)}else{if(Xo(n,r))return;Qz.set(r),t.uniformMatrix2fv(this.addr,!1,Qz),Jo(n,r)}}function U1e(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Xo(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Jo(n,e)}else{if(Xo(n,r))return;$z.set(r),t.uniformMatrix3fv(this.addr,!1,$z),Jo(n,r)}}function H1e(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Xo(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Jo(n,e)}else{if(Xo(n,r))return;zz.set(r),t.uniformMatrix4fv(this.addr,!1,zz),Jo(n,r)}}function G1e(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function V1e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Xo(n,e))return;t.uniform2iv(this.addr,e),Jo(n,e)}}function W1e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Xo(n,e))return;t.uniform3iv(this.addr,e),Jo(n,e)}}function K1e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Xo(n,e))return;t.uniform4iv(this.addr,e),Jo(n,e)}}function q1e(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Y1e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Xo(n,e))return;t.uniform2uiv(this.addr,e),Jo(n,e)}}function X1e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Xo(n,e))return;t.uniform3uiv(this.addr,e),Jo(n,e)}}function J1e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Xo(n,e))return;t.uniform4uiv(this.addr,e),Jo(n,e)}}function Z1e(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let s;this.type===t.SAMPLER_2D_SHADOW?(Fz.compareFunction=$Y,s=Fz):s=rX,n.setTexture2D(e||s,i)}function eEe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||sX,i)}function tEe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||aX,i)}function nEe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||iX,i)}function rEe(t){switch(t){case 5126:return j1e;case 35664:return O1e;case 35665:return z1e;case 35666:return $1e;case 35674:return Q1e;case 35675:return U1e;case 35676:return H1e;case 5124:case 35670:return G1e;case 35667:case 35671:return V1e;case 35668:case 35672:return W1e;case 35669:case 35673:return K1e;case 5125:return q1e;case 36294:return Y1e;case 36295:return X1e;case 36296:return J1e;case 35678:case 36198:case 36298:case 36306:case 35682:return Z1e;case 35679:case 36299:case 36307:return eEe;case 35680:case 36300:case 36308:case 36293:return tEe;case 36289:case 36303:case 36311:case 36292:return nEe}}function iEe(t,e){t.uniform1fv(this.addr,e)}function sEe(t,e){const n=OE(e,this.size,2);t.uniform2fv(this.addr,n)}function aEe(t,e){const n=OE(e,this.size,3);t.uniform3fv(this.addr,n)}function oEe(t,e){const n=OE(e,this.size,4);t.uniform4fv(this.addr,n)}function lEe(t,e){const n=OE(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function cEe(t,e){const n=OE(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function uEe(t,e){const n=OE(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function dEe(t,e){t.uniform1iv(this.addr,e)}function hEe(t,e){t.uniform2iv(this.addr,e)}function fEe(t,e){t.uniform3iv(this.addr,e)}function pEe(t,e){t.uniform4iv(this.addr,e)}function gEe(t,e){t.uniform1uiv(this.addr,e)}function mEe(t,e){t.uniform2uiv(this.addr,e)}function AEe(t,e){t.uniform3uiv(this.addr,e)}function yEe(t,e){t.uniform4uiv(this.addr,e)}function vEe(t,e,n){const r=this.cache,i=e.length,s=QM(n,i);Xo(r,s)||(t.uniform1iv(this.addr,s),Jo(r,s));for(let a=0;a!==i;++a)n.setTexture2D(e[a]||rX,s[a])}function xEe(t,e,n){const r=this.cache,i=e.length,s=QM(n,i);Xo(r,s)||(t.uniform1iv(this.addr,s),Jo(r,s));for(let a=0;a!==i;++a)n.setTexture3D(e[a]||sX,s[a])}function bEe(t,e,n){const r=this.cache,i=e.length,s=QM(n,i);Xo(r,s)||(t.uniform1iv(this.addr,s),Jo(r,s));for(let a=0;a!==i;++a)n.setTextureCube(e[a]||aX,s[a])}function CEe(t,e,n){const r=this.cache,i=e.length,s=QM(n,i);Xo(r,s)||(t.uniform1iv(this.addr,s),Jo(r,s));for(let a=0;a!==i;++a)n.setTexture2DArray(e[a]||iX,s[a])}function EEe(t){switch(t){case 5126:return iEe;case 35664:return sEe;case 35665:return aEe;case 35666:return oEe;case 35674:return lEe;case 35675:return cEe;case 35676:return uEe;case 5124:case 35670:return dEe;case 35667:case 35671:return hEe;case 35668:case 35672:return fEe;case 35669:case 35673:return pEe;case 5125:return gEe;case 36294:return mEe;case 36295:return AEe;case 36296:return yEe;case 35678:case 36198:case 36298:case 36306:case 35682:return vEe;case 35679:case 36299:case 36307:return xEe;case 35680:case 36300:case 36308:case 36293:return bEe;case 36289:case 36303:case 36311:case 36292:return CEe}}class SEe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=rEe(n.type)}}class wEe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=EEe(n.type)}}class _Ee{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const o=i[s];o.setValue(e,n[o.id],r)}}}const pR=/(\w+)(\])?(\[|\.)?/g;function Uz(t,e){t.seq.push(e),t.map[e.id]=e}function IEe(t,e,n){const r=t.name,i=r.length;for(pR.lastIndex=0;;){const s=pR.exec(r),a=pR.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===i){Uz(n,c===void 0?new SEe(o,t,e):new wEe(o,t,e));break}else{let h=n.map[o];h===void 0&&(h=new _Ee(o),Uz(n,h)),n=h}}}class K3{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),a=e.getUniformLocation(n,s.name);IEe(s,a,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,a=n.length;s!==a;++s){const o=n[s],l=r[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in n&&r.push(a)}return r}}function Hz(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const BEe=37297;let TEe=0;function MEe(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let a=i;a<s;a++){const o=a+1;r.push(`${o===e?">":" "} ${o}: ${n[a]}`)}return r.join(`
`)}const Gz=new Qr;function DEe(t){Li._getMatrix(Gz,Li.workingColorSpace,t);const e=`mat3( ${Gz.elements.map(n=>n.toFixed(4))} )`;switch(Li.getTransfer(t)){case ET:return[e,"LinearTransferOETF"];case ps:return[e,"sRGBTransferOETF"];default:return Or("WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function Vz(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),s=(t.getShaderInfoLog(e)||"").trim();if(r&&s==="")return"";const a=/ERROR: 0:(\d+)/.exec(s);if(a){const o=parseInt(a[1]);return n.toUpperCase()+`

`+s+`

`+MEe(t.getShaderSource(e),o)}else return s}function REe(t,e){const n=DEe(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function PEe(t,e){let n;switch(e){case IY:n="Linear";break;case BY:n="Reinhard";break;case TY:n="Cineon";break;case MY:n="ACESFilmic";break;case RY:n="AgX";break;case PY:n="Neutral";break;case DY:n="Custom";break;default:Or("WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const lB=new mt;function kEe(){Li.getLuminanceCoefficients(lB);const t=lB.x.toFixed(4),e=lB.y.toFixed(4),n=lB.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function NEe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Sw).join(`
`)}function LEe(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function FEe(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),a=s.name;let o=1;s.type===t.FLOAT_MAT2&&(o=2),s.type===t.FLOAT_MAT3&&(o=3),s.type===t.FLOAT_MAT4&&(o=4),n[a]={type:s.type,location:t.getAttribLocation(e,a),locationSize:o}}return n}function Sw(t){return t!==""}function Wz(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Kz(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const jEe=/^[ \t]*#include +<([\w\d./]+)>/gm;function F5(t){return t.replace(jEe,zEe)}const OEe=new Map;function zEe(t,e){let n=Xr[e];if(n===void 0){const r=OEe.get(e);if(r!==void 0)n=Xr[r],Or('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return F5(n)}const $Ee=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function qz(t){return t.replace($Ee,QEe)}function QEe(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function Yz(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function UEe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===wY?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Eve?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===t0&&(e="SHADOWMAP_TYPE_VSM"),e}function HEe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case rE:case iE:e="ENVMAP_TYPE_CUBE";break;case OM:e="ENVMAP_TYPE_CUBE_UV";break}return e}function GEe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case iE:e="ENVMAP_MODE_REFRACTION";break}return e}function VEe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case _Y:e="ENVMAP_BLENDING_MULTIPLY";break;case Qve:e="ENVMAP_BLENDING_MIX";break;case Uve:e="ENVMAP_BLENDING_ADD";break}return e}function WEe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}function KEe(t,e,n,r){const i=t.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=UEe(n),c=HEe(n),u=GEe(n),h=VEe(n),f=WEe(n),p=NEe(n),m=LEe(s),v=i.createProgram();let A,x,E=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(A=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(Sw).join(`
`),A.length>0&&(A+=`
`),x=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(Sw).join(`
`),x.length>0&&(x+=`
`)):(A=[Yz(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Sw).join(`
`),x=[Yz(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Iy?"#define TONE_MAPPING":"",n.toneMapping!==Iy?Xr.tonemapping_pars_fragment:"",n.toneMapping!==Iy?PEe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Xr.colorspace_pars_fragment,REe("linearToOutputTexel",n.outputColorSpace),kEe(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Sw).join(`
`)),a=F5(a),a=Wz(a,n),a=Kz(a,n),o=F5(o),o=Wz(o,n),o=Kz(o,n),a=qz(a),o=qz(o),n.isRawShaderMaterial!==!0&&(E=`#version 300 es
`,A=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+A,x=["#define varying in",n.glslVersion===oz?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===oz?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const w=E+A+a,B=E+x+o,D=Hz(i,i.VERTEX_SHADER,w),T=Hz(i,i.FRAGMENT_SHADER,B);i.attachShader(v,D),i.attachShader(v,T),n.index0AttributeName!==void 0?i.bindAttribLocation(v,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v);function M(F){if(t.debug.checkShaderErrors){const z=i.getProgramInfoLog(v)||"",G=i.getShaderInfoLog(D)||"",V=i.getShaderInfoLog(T)||"",q=z.trim(),O=G.trim(),H=V.trim();let K=!0,X=!0;if(i.getProgramParameter(v,i.LINK_STATUS)===!1)if(K=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,v,D,T);else{const re=Vz(i,D,"vertex"),J=Vz(i,T,"fragment");eo("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,i.VALIDATE_STATUS)+`

Material Name: `+F.name+`
Material Type: `+F.type+`

Program Info Log: `+q+`
`+re+`
`+J)}else q!==""?Or("WebGLProgram: Program Info Log:",q):(O===""||H==="")&&(X=!1);X&&(F.diagnostics={runnable:K,programLog:q,vertexShader:{log:O,prefix:A},fragmentShader:{log:H,prefix:x}})}i.deleteShader(D),i.deleteShader(T),R=new K3(i,v),k=FEe(i,v)}let R;this.getUniforms=function(){return R===void 0&&M(this),R};let k;this.getAttributes=function(){return k===void 0&&M(this),k};let L=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=i.getProgramParameter(v,BEe)),L},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=TEe++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=D,this.fragmentShader=T,this}let qEe=0;class YEe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new XEe(e),n.set(e,r)),r}}class XEe{constructor(e){this.id=qEe++,this.code=e,this.usedTimes=0}}function JEe(t,e,n,r,i,s,a){const o=new GY,l=new YEe,c=new Set,u=[],h=i.logarithmicDepthBuffer,f=i.vertexTextures;let p=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(k){return c.add(k),k===0?"uv":`uv${k}`}function A(k,L,F,z,G){const V=z.fog,q=G.geometry,O=k.isMeshStandardMaterial?z.environment:null,H=(k.isMeshStandardMaterial?n:e).get(k.envMap||O),K=H&&H.mapping===OM?H.image.height:null,X=m[k.type];k.precision!==null&&(p=i.getMaxPrecision(k.precision),p!==k.precision&&Or("WebGLProgram.getParameters:",k.precision,"not supported, using",p,"instead."));const re=q.morphAttributes.position||q.morphAttributes.normal||q.morphAttributes.color,J=re!==void 0?re.length:0;let Z=0;q.morphAttributes.position!==void 0&&(Z=1),q.morphAttributes.normal!==void 0&&(Z=2),q.morphAttributes.color!==void 0&&(Z=3);let ee,te,oe,ae;if(X){const Pt=Ng[X];ee=Pt.vertexShader,te=Pt.fragmentShader}else ee=k.vertexShader,te=k.fragmentShader,l.update(k),oe=l.getVertexShaderID(k),ae=l.getFragmentShaderID(k);const se=t.getRenderTarget(),fe=t.state.buffers.depth.getReversed(),Ee=G.isInstancedMesh===!0,Be=G.isBatchedMesh===!0,_e=!!k.map,Ce=!!k.matcap,Se=!!H,Me=!!k.aoMap,ce=!!k.lightMap,$e=!!k.bumpMap,qe=!!k.normalMap,ft=!!k.displacementMap,Ie=!!k.emissiveMap,ht=!!k.metalnessMap,Ue=!!k.roughnessMap,xt=k.anisotropy>0,ve=k.clearcoat>0,ue=k.dispersion>0,ke=k.iridescence>0,He=k.sheen>0,Qe=k.transmission>0,Ke=xt&&!!k.anisotropyMap,jt=ve&&!!k.clearcoatMap,St=ve&&!!k.clearcoatNormalMap,Zt=ve&&!!k.clearcoatRoughnessMap,Bt=ke&&!!k.iridescenceMap,at=ke&&!!k.iridescenceThicknessMap,pt=He&&!!k.sheenColorMap,Vt=He&&!!k.sheenRoughnessMap,qt=!!k.specularMap,Wt=!!k.specularColorMap,gn=!!k.specularIntensityMap,Ne=Qe&&!!k.transmissionMap,Ht=Qe&&!!k.thicknessMap,Qt=!!k.gradientMap,$t=!!k.alphaMap,It=k.alphaTest>0,Ct=!!k.alphaHash,ln=!!k.extensions;let lt=Iy;k.toneMapped&&(se===null||se.isXRRenderTarget===!0)&&(lt=t.toneMapping);const _t={shaderID:X,shaderType:k.type,shaderName:k.name,vertexShader:ee,fragmentShader:te,defines:k.defines,customVertexShaderID:oe,customFragmentShaderID:ae,isRawShaderMaterial:k.isRawShaderMaterial===!0,glslVersion:k.glslVersion,precision:p,batching:Be,batchingColor:Be&&G._colorsTexture!==null,instancing:Ee,instancingColor:Ee&&G.instanceColor!==null,instancingMorph:Ee&&G.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:se===null?t.outputColorSpace:se.isXRRenderTarget===!0?se.texture.colorSpace:sE,alphaToCoverage:!!k.alphaToCoverage,map:_e,matcap:Ce,envMap:Se,envMapMode:Se&&H.mapping,envMapCubeUVHeight:K,aoMap:Me,lightMap:ce,bumpMap:$e,normalMap:qe,displacementMap:f&&ft,emissiveMap:Ie,normalMapObjectSpace:qe&&k.normalMapType===Kve,normalMapTangentSpace:qe&&k.normalMapType===Wve,metalnessMap:ht,roughnessMap:Ue,anisotropy:xt,anisotropyMap:Ke,clearcoat:ve,clearcoatMap:jt,clearcoatNormalMap:St,clearcoatRoughnessMap:Zt,dispersion:ue,iridescence:ke,iridescenceMap:Bt,iridescenceThicknessMap:at,sheen:He,sheenColorMap:pt,sheenRoughnessMap:Vt,specularMap:qt,specularColorMap:Wt,specularIntensityMap:gn,transmission:Qe,transmissionMap:Ne,thicknessMap:Ht,gradientMap:Qt,opaque:k.transparent===!1&&k.blending===sb&&k.alphaToCoverage===!1,alphaMap:$t,alphaTest:It,alphaHash:Ct,combine:k.combine,mapUv:_e&&v(k.map.channel),aoMapUv:Me&&v(k.aoMap.channel),lightMapUv:ce&&v(k.lightMap.channel),bumpMapUv:$e&&v(k.bumpMap.channel),normalMapUv:qe&&v(k.normalMap.channel),displacementMapUv:ft&&v(k.displacementMap.channel),emissiveMapUv:Ie&&v(k.emissiveMap.channel),metalnessMapUv:ht&&v(k.metalnessMap.channel),roughnessMapUv:Ue&&v(k.roughnessMap.channel),anisotropyMapUv:Ke&&v(k.anisotropyMap.channel),clearcoatMapUv:jt&&v(k.clearcoatMap.channel),clearcoatNormalMapUv:St&&v(k.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Zt&&v(k.clearcoatRoughnessMap.channel),iridescenceMapUv:Bt&&v(k.iridescenceMap.channel),iridescenceThicknessMapUv:at&&v(k.iridescenceThicknessMap.channel),sheenColorMapUv:pt&&v(k.sheenColorMap.channel),sheenRoughnessMapUv:Vt&&v(k.sheenRoughnessMap.channel),specularMapUv:qt&&v(k.specularMap.channel),specularColorMapUv:Wt&&v(k.specularColorMap.channel),specularIntensityMapUv:gn&&v(k.specularIntensityMap.channel),transmissionMapUv:Ne&&v(k.transmissionMap.channel),thicknessMapUv:Ht&&v(k.thicknessMap.channel),alphaMapUv:$t&&v(k.alphaMap.channel),vertexTangents:!!q.attributes.tangent&&(qe||xt),vertexColors:k.vertexColors,vertexAlphas:k.vertexColors===!0&&!!q.attributes.color&&q.attributes.color.itemSize===4,pointsUvs:G.isPoints===!0&&!!q.attributes.uv&&(_e||$t),fog:!!V,useFog:k.fog===!0,fogExp2:!!V&&V.isFogExp2,flatShading:k.flatShading===!0&&k.wireframe===!1,sizeAttenuation:k.sizeAttenuation===!0,logarithmicDepthBuffer:h,reversedDepthBuffer:fe,skinning:G.isSkinnedMesh===!0,morphTargets:q.morphAttributes.position!==void 0,morphNormals:q.morphAttributes.normal!==void 0,morphColors:q.morphAttributes.color!==void 0,morphTargetsCount:J,morphTextureStride:Z,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:k.dithering,shadowMapEnabled:t.shadowMap.enabled&&F.length>0,shadowMapType:t.shadowMap.type,toneMapping:lt,decodeVideoTexture:_e&&k.map.isVideoTexture===!0&&Li.getTransfer(k.map.colorSpace)===ps,decodeVideoTextureEmissive:Ie&&k.emissiveMap.isVideoTexture===!0&&Li.getTransfer(k.emissiveMap.colorSpace)===ps,premultipliedAlpha:k.premultipliedAlpha,doubleSided:k.side===jg,flipSided:k.side===ld,useDepthPacking:k.depthPacking>=0,depthPacking:k.depthPacking||0,index0AttributeName:k.index0AttributeName,extensionClipCullDistance:ln&&k.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ln&&k.extensions.multiDraw===!0||Be)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:k.customProgramCacheKey()};return _t.vertexUv1s=c.has(1),_t.vertexUv2s=c.has(2),_t.vertexUv3s=c.has(3),c.clear(),_t}function x(k){const L=[];if(k.shaderID?L.push(k.shaderID):(L.push(k.customVertexShaderID),L.push(k.customFragmentShaderID)),k.defines!==void 0)for(const F in k.defines)L.push(F),L.push(k.defines[F]);return k.isRawShaderMaterial===!1&&(E(L,k),w(L,k),L.push(t.outputColorSpace)),L.push(k.customProgramCacheKey),L.join()}function E(k,L){k.push(L.precision),k.push(L.outputColorSpace),k.push(L.envMapMode),k.push(L.envMapCubeUVHeight),k.push(L.mapUv),k.push(L.alphaMapUv),k.push(L.lightMapUv),k.push(L.aoMapUv),k.push(L.bumpMapUv),k.push(L.normalMapUv),k.push(L.displacementMapUv),k.push(L.emissiveMapUv),k.push(L.metalnessMapUv),k.push(L.roughnessMapUv),k.push(L.anisotropyMapUv),k.push(L.clearcoatMapUv),k.push(L.clearcoatNormalMapUv),k.push(L.clearcoatRoughnessMapUv),k.push(L.iridescenceMapUv),k.push(L.iridescenceThicknessMapUv),k.push(L.sheenColorMapUv),k.push(L.sheenRoughnessMapUv),k.push(L.specularMapUv),k.push(L.specularColorMapUv),k.push(L.specularIntensityMapUv),k.push(L.transmissionMapUv),k.push(L.thicknessMapUv),k.push(L.combine),k.push(L.fogExp2),k.push(L.sizeAttenuation),k.push(L.morphTargetsCount),k.push(L.morphAttributeCount),k.push(L.numDirLights),k.push(L.numPointLights),k.push(L.numSpotLights),k.push(L.numSpotLightMaps),k.push(L.numHemiLights),k.push(L.numRectAreaLights),k.push(L.numDirLightShadows),k.push(L.numPointLightShadows),k.push(L.numSpotLightShadows),k.push(L.numSpotLightShadowsWithMaps),k.push(L.numLightProbes),k.push(L.shadowMapType),k.push(L.toneMapping),k.push(L.numClippingPlanes),k.push(L.numClipIntersection),k.push(L.depthPacking)}function w(k,L){o.disableAll(),L.supportsVertexTextures&&o.enable(0),L.instancing&&o.enable(1),L.instancingColor&&o.enable(2),L.instancingMorph&&o.enable(3),L.matcap&&o.enable(4),L.envMap&&o.enable(5),L.normalMapObjectSpace&&o.enable(6),L.normalMapTangentSpace&&o.enable(7),L.clearcoat&&o.enable(8),L.iridescence&&o.enable(9),L.alphaTest&&o.enable(10),L.vertexColors&&o.enable(11),L.vertexAlphas&&o.enable(12),L.vertexUv1s&&o.enable(13),L.vertexUv2s&&o.enable(14),L.vertexUv3s&&o.enable(15),L.vertexTangents&&o.enable(16),L.anisotropy&&o.enable(17),L.alphaHash&&o.enable(18),L.batching&&o.enable(19),L.dispersion&&o.enable(20),L.batchingColor&&o.enable(21),L.gradientMap&&o.enable(22),k.push(o.mask),o.disableAll(),L.fog&&o.enable(0),L.useFog&&o.enable(1),L.flatShading&&o.enable(2),L.logarithmicDepthBuffer&&o.enable(3),L.reversedDepthBuffer&&o.enable(4),L.skinning&&o.enable(5),L.morphTargets&&o.enable(6),L.morphNormals&&o.enable(7),L.morphColors&&o.enable(8),L.premultipliedAlpha&&o.enable(9),L.shadowMapEnabled&&o.enable(10),L.doubleSided&&o.enable(11),L.flipSided&&o.enable(12),L.useDepthPacking&&o.enable(13),L.dithering&&o.enable(14),L.transmission&&o.enable(15),L.sheen&&o.enable(16),L.opaque&&o.enable(17),L.pointsUvs&&o.enable(18),L.decodeVideoTexture&&o.enable(19),L.decodeVideoTextureEmissive&&o.enable(20),L.alphaToCoverage&&o.enable(21),k.push(o.mask)}function B(k){const L=m[k.type];let F;if(L){const z=Ng[L];F=vb.clone(z.uniforms)}else F=k.uniforms;return F}function D(k,L){let F;for(let z=0,G=u.length;z<G;z++){const V=u[z];if(V.cacheKey===L){F=V,++F.usedTimes;break}}return F===void 0&&(F=new KEe(t,L,k,s),u.push(F)),F}function T(k){if(--k.usedTimes===0){const L=u.indexOf(k);u[L]=u[u.length-1],u.pop(),k.destroy()}}function M(k){l.remove(k)}function R(){l.dispose()}return{getParameters:A,getProgramCacheKey:x,getUniforms:B,acquireProgram:D,releaseProgram:T,releaseShaderCache:M,programs:u,dispose:R}}function ZEe(){let t=new WeakMap;function e(a){return t.has(a)}function n(a){let o=t.get(a);return o===void 0&&(o={},t.set(a,o)),o}function r(a){t.delete(a)}function i(a,o,l){t.get(a)[o]=l}function s(){t=new WeakMap}return{has:e,get:n,remove:r,update:i,dispose:s}}function eSe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Xz(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Jz(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function a(h,f,p,m,v,A){let x=t[e];return x===void 0?(x={id:h.id,object:h,geometry:f,material:p,groupOrder:m,renderOrder:h.renderOrder,z:v,group:A},t[e]=x):(x.id=h.id,x.object=h,x.geometry=f,x.material=p,x.groupOrder=m,x.renderOrder=h.renderOrder,x.z=v,x.group=A),e++,x}function o(h,f,p,m,v,A){const x=a(h,f,p,m,v,A);p.transmission>0?r.push(x):p.transparent===!0?i.push(x):n.push(x)}function l(h,f,p,m,v,A){const x=a(h,f,p,m,v,A);p.transmission>0?r.unshift(x):p.transparent===!0?i.unshift(x):n.unshift(x)}function c(h,f){n.length>1&&n.sort(h||eSe),r.length>1&&r.sort(f||Xz),i.length>1&&i.sort(f||Xz)}function u(){for(let h=e,f=t.length;h<f;h++){const p=t[h];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:o,unshift:l,finish:u,sort:c}}function tSe(){let t=new WeakMap;function e(r,i){const s=t.get(r);let a;return s===void 0?(a=new Jz,t.set(r,[a])):i>=s.length?(a=new Jz,s.push(a)):a=s[i],a}function n(){t=new WeakMap}return{get:e,dispose:n}}function nSe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new mt,color:new Gr};break;case"SpotLight":n={position:new mt,direction:new mt,color:new Gr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new mt,color:new Gr,distance:0,decay:0};break;case"HemisphereLight":n={direction:new mt,skyColor:new Gr,groundColor:new Gr};break;case"RectAreaLight":n={color:new Gr,position:new mt,halfWidth:new mt,halfHeight:new mt};break}return t[e.id]=n,n}}}function rSe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ir};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ir};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ir,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let iSe=0;function sSe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function aSe(t){const e=new nSe,n=rSe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new mt);const i=new mt,s=new Ma,a=new Ma;function o(c){let u=0,h=0,f=0;for(let k=0;k<9;k++)r.probe[k].set(0,0,0);let p=0,m=0,v=0,A=0,x=0,E=0,w=0,B=0,D=0,T=0,M=0;c.sort(sSe);for(let k=0,L=c.length;k<L;k++){const F=c[k],z=F.color,G=F.intensity,V=F.distance,q=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)u+=z.r*G,h+=z.g*G,f+=z.b*G;else if(F.isLightProbe){for(let O=0;O<9;O++)r.probe[O].addScaledVector(F.sh.coefficients[O],G);M++}else if(F.isDirectionalLight){const O=e.get(F);if(O.color.copy(F.color).multiplyScalar(F.intensity),F.castShadow){const H=F.shadow,K=n.get(F);K.shadowIntensity=H.intensity,K.shadowBias=H.bias,K.shadowNormalBias=H.normalBias,K.shadowRadius=H.radius,K.shadowMapSize=H.mapSize,r.directionalShadow[p]=K,r.directionalShadowMap[p]=q,r.directionalShadowMatrix[p]=F.shadow.matrix,E++}r.directional[p]=O,p++}else if(F.isSpotLight){const O=e.get(F);O.position.setFromMatrixPosition(F.matrixWorld),O.color.copy(z).multiplyScalar(G),O.distance=V,O.coneCos=Math.cos(F.angle),O.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),O.decay=F.decay,r.spot[v]=O;const H=F.shadow;if(F.map&&(r.spotLightMap[D]=F.map,D++,H.updateMatrices(F),F.castShadow&&T++),r.spotLightMatrix[v]=H.matrix,F.castShadow){const K=n.get(F);K.shadowIntensity=H.intensity,K.shadowBias=H.bias,K.shadowNormalBias=H.normalBias,K.shadowRadius=H.radius,K.shadowMapSize=H.mapSize,r.spotShadow[v]=K,r.spotShadowMap[v]=q,B++}v++}else if(F.isRectAreaLight){const O=e.get(F);O.color.copy(z).multiplyScalar(G),O.halfWidth.set(F.width*.5,0,0),O.halfHeight.set(0,F.height*.5,0),r.rectArea[A]=O,A++}else if(F.isPointLight){const O=e.get(F);if(O.color.copy(F.color).multiplyScalar(F.intensity),O.distance=F.distance,O.decay=F.decay,F.castShadow){const H=F.shadow,K=n.get(F);K.shadowIntensity=H.intensity,K.shadowBias=H.bias,K.shadowNormalBias=H.normalBias,K.shadowRadius=H.radius,K.shadowMapSize=H.mapSize,K.shadowCameraNear=H.camera.near,K.shadowCameraFar=H.camera.far,r.pointShadow[m]=K,r.pointShadowMap[m]=q,r.pointShadowMatrix[m]=F.shadow.matrix,w++}r.point[m]=O,m++}else if(F.isHemisphereLight){const O=e.get(F);O.skyColor.copy(F.color).multiplyScalar(G),O.groundColor.copy(F.groundColor).multiplyScalar(G),r.hemi[x]=O,x++}}A>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=vn.LTC_FLOAT_1,r.rectAreaLTC2=vn.LTC_FLOAT_2):(r.rectAreaLTC1=vn.LTC_HALF_1,r.rectAreaLTC2=vn.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=h,r.ambient[2]=f;const R=r.hash;(R.directionalLength!==p||R.pointLength!==m||R.spotLength!==v||R.rectAreaLength!==A||R.hemiLength!==x||R.numDirectionalShadows!==E||R.numPointShadows!==w||R.numSpotShadows!==B||R.numSpotMaps!==D||R.numLightProbes!==M)&&(r.directional.length=p,r.spot.length=v,r.rectArea.length=A,r.point.length=m,r.hemi.length=x,r.directionalShadow.length=E,r.directionalShadowMap.length=E,r.pointShadow.length=w,r.pointShadowMap.length=w,r.spotShadow.length=B,r.spotShadowMap.length=B,r.directionalShadowMatrix.length=E,r.pointShadowMatrix.length=w,r.spotLightMatrix.length=B+D-T,r.spotLightMap.length=D,r.numSpotLightShadowsWithMaps=T,r.numLightProbes=M,R.directionalLength=p,R.pointLength=m,R.spotLength=v,R.rectAreaLength=A,R.hemiLength=x,R.numDirectionalShadows=E,R.numPointShadows=w,R.numSpotShadows=B,R.numSpotMaps=D,R.numLightProbes=M,r.version=iSe++)}function l(c,u){let h=0,f=0,p=0,m=0,v=0;const A=u.matrixWorldInverse;for(let x=0,E=c.length;x<E;x++){const w=c[x];if(w.isDirectionalLight){const B=r.directional[h];B.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),B.direction.sub(i),B.direction.transformDirection(A),h++}else if(w.isSpotLight){const B=r.spot[p];B.position.setFromMatrixPosition(w.matrixWorld),B.position.applyMatrix4(A),B.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),B.direction.sub(i),B.direction.transformDirection(A),p++}else if(w.isRectAreaLight){const B=r.rectArea[m];B.position.setFromMatrixPosition(w.matrixWorld),B.position.applyMatrix4(A),a.identity(),s.copy(w.matrixWorld),s.premultiply(A),a.extractRotation(s),B.halfWidth.set(w.width*.5,0,0),B.halfHeight.set(0,w.height*.5,0),B.halfWidth.applyMatrix4(a),B.halfHeight.applyMatrix4(a),m++}else if(w.isPointLight){const B=r.point[f];B.position.setFromMatrixPosition(w.matrixWorld),B.position.applyMatrix4(A),f++}else if(w.isHemisphereLight){const B=r.hemi[v];B.direction.setFromMatrixPosition(w.matrixWorld),B.direction.transformDirection(A),v++}}}return{setup:o,setupView:l,state:r}}function Zz(t){const e=new aSe(t),n=[],r=[];function i(u){c.camera=u,n.length=0,r.length=0}function s(u){n.push(u)}function a(u){r.push(u)}function o(){e.setup(n)}function l(u){e.setupView(n,u)}const c={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function oSe(t){let e=new WeakMap;function n(i,s=0){const a=e.get(i);let o;return a===void 0?(o=new Zz(t),e.set(i,[o])):s>=a.length?(o=new Zz(t),a.push(o)):o=a[s],o}function r(){e=new WeakMap}return{get:n,dispose:r}}const lSe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,cSe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function uSe(t,e,n){let r=new JY;const i=new Ir,s=new Ir,a=new to,o=new Nxe({depthPacking:Vve}),l=new Lxe,c={},u=n.maxTextureSize,h={[Ly]:ld,[ld]:Ly,[jg]:jg},f=new Ta({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ir},radius:{value:4}},vertexShader:lSe,fragmentShader:cSe}),p=f.clone();p.defines.HORIZONTAL_PASS=1;const m=new pd;m.setAttribute("position",new xr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Dp(m,f),A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=wY;let x=this.type;this.render=function(T,M,R){if(A.enabled===!1||A.autoUpdate===!1&&A.needsUpdate===!1||T.length===0)return;const k=t.getRenderTarget(),L=t.getActiveCubeFace(),F=t.getActiveMipmapLevel(),z=t.state;z.setBlending(Ip),z.buffers.depth.getReversed()===!0?z.buffers.color.setClear(0,0,0,0):z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);const G=x!==t0&&this.type===t0,V=x===t0&&this.type!==t0;for(let q=0,O=T.length;q<O;q++){const H=T[q],K=H.shadow;if(K===void 0){Or("WebGLShadowMap:",H,"has no shadow.");continue}if(K.autoUpdate===!1&&K.needsUpdate===!1)continue;i.copy(K.mapSize);const X=K.getFrameExtents();if(i.multiply(X),s.copy(K.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/X.x),i.x=s.x*X.x,K.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/X.y),i.y=s.y*X.y,K.mapSize.y=s.y)),K.map===null||G===!0||V===!0){const J=this.type!==t0?{minFilter:hu,magFilter:hu}:{};K.map!==null&&K.map.dispose(),K.map=new Jd(i.x,i.y,J),K.map.texture.name=H.name+".shadowMap",K.camera.updateProjectionMatrix()}t.setRenderTarget(K.map),t.clear();const re=K.getViewportCount();for(let J=0;J<re;J++){const Z=K.getViewport(J);a.set(s.x*Z.x,s.y*Z.y,s.x*Z.z,s.y*Z.w),z.viewport(a),K.updateMatrices(H,J),r=K.getFrustum(),B(M,R,K.camera,H,this.type)}K.isPointLightShadow!==!0&&this.type===t0&&E(K,R),K.needsUpdate=!1}x=this.type,A.needsUpdate=!1,t.setRenderTarget(k,L,F)};function E(T,M){const R=e.update(v);f.defines.VSM_SAMPLES!==T.blurSamples&&(f.defines.VSM_SAMPLES=T.blurSamples,p.defines.VSM_SAMPLES=T.blurSamples,f.needsUpdate=!0,p.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new Jd(i.x,i.y)),f.uniforms.shadow_pass.value=T.map.texture,f.uniforms.resolution.value=T.mapSize,f.uniforms.radius.value=T.radius,t.setRenderTarget(T.mapPass),t.clear(),t.renderBufferDirect(M,null,R,f,v,null),p.uniforms.shadow_pass.value=T.mapPass.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,t.setRenderTarget(T.map),t.clear(),t.renderBufferDirect(M,null,R,p,v,null)}function w(T,M,R,k){let L=null;const F=R.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(F!==void 0)L=F;else if(L=R.isPointLight===!0?l:o,t.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0||M.alphaToCoverage===!0){const z=L.uuid,G=M.uuid;let V=c[z];V===void 0&&(V={},c[z]=V);let q=V[G];q===void 0&&(q=L.clone(),V[G]=q,M.addEventListener("dispose",D)),L=q}if(L.visible=M.visible,L.wireframe=M.wireframe,k===t0?L.side=M.shadowSide!==null?M.shadowSide:M.side:L.side=M.shadowSide!==null?M.shadowSide:h[M.side],L.alphaMap=M.alphaMap,L.alphaTest=M.alphaToCoverage===!0?.5:M.alphaTest,L.map=M.map,L.clipShadows=M.clipShadows,L.clippingPlanes=M.clippingPlanes,L.clipIntersection=M.clipIntersection,L.displacementMap=M.displacementMap,L.displacementScale=M.displacementScale,L.displacementBias=M.displacementBias,L.wireframeLinewidth=M.wireframeLinewidth,L.linewidth=M.linewidth,R.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const z=t.properties.get(L);z.light=R}return L}function B(T,M,R,k,L){if(T.visible===!1)return;if(T.layers.test(M.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&L===t0)&&(!T.frustumCulled||r.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,T.matrixWorld);const G=e.update(T),V=T.material;if(Array.isArray(V)){const q=G.groups;for(let O=0,H=q.length;O<H;O++){const K=q[O],X=V[K.materialIndex];if(X&&X.visible){const re=w(T,X,k,L);T.onBeforeShadow(t,T,M,R,G,re,K),t.renderBufferDirect(R,null,G,re,T,K),T.onAfterShadow(t,T,M,R,G,re,K)}}}else if(V.visible){const q=w(T,V,k,L);T.onBeforeShadow(t,T,M,R,G,q,null),t.renderBufferDirect(R,null,G,q,T,null),T.onAfterShadow(t,T,M,R,G,q,null)}}const z=T.children;for(let G=0,V=z.length;G<V;G++)B(z[G],M,R,k,L)}function D(T){T.target.removeEventListener("dispose",D);for(const R in c){const k=c[R],L=T.target.uuid;L in k&&(k[L].dispose(),delete k[L])}}}const dSe={[YN]:XN,[JN]:t5,[ZN]:n5,[nE]:e5,[XN]:YN,[t5]:JN,[n5]:ZN,[e5]:nE};function hSe(t,e){function n(){let Ne=!1;const Ht=new to;let Qt=null;const $t=new to(0,0,0,0);return{setMask:function(It){Qt!==It&&!Ne&&(t.colorMask(It,It,It,It),Qt=It)},setLocked:function(It){Ne=It},setClear:function(It,Ct,ln,lt,_t){_t===!0&&(It*=lt,Ct*=lt,ln*=lt),Ht.set(It,Ct,ln,lt),$t.equals(Ht)===!1&&(t.clearColor(It,Ct,ln,lt),$t.copy(Ht))},reset:function(){Ne=!1,Qt=null,$t.set(-1,0,0,0)}}}function r(){let Ne=!1,Ht=!1,Qt=null,$t=null,It=null;return{setReversed:function(Ct){if(Ht!==Ct){const ln=e.get("EXT_clip_control");Ct?ln.clipControlEXT(ln.LOWER_LEFT_EXT,ln.ZERO_TO_ONE_EXT):ln.clipControlEXT(ln.LOWER_LEFT_EXT,ln.NEGATIVE_ONE_TO_ONE_EXT),Ht=Ct;const lt=It;It=null,this.setClear(lt)}},getReversed:function(){return Ht},setTest:function(Ct){Ct?se(t.DEPTH_TEST):fe(t.DEPTH_TEST)},setMask:function(Ct){Qt!==Ct&&!Ne&&(t.depthMask(Ct),Qt=Ct)},setFunc:function(Ct){if(Ht&&(Ct=dSe[Ct]),$t!==Ct){switch(Ct){case YN:t.depthFunc(t.NEVER);break;case XN:t.depthFunc(t.ALWAYS);break;case JN:t.depthFunc(t.LESS);break;case nE:t.depthFunc(t.LEQUAL);break;case ZN:t.depthFunc(t.EQUAL);break;case e5:t.depthFunc(t.GEQUAL);break;case t5:t.depthFunc(t.GREATER);break;case n5:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}$t=Ct}},setLocked:function(Ct){Ne=Ct},setClear:function(Ct){It!==Ct&&(Ht&&(Ct=1-Ct),t.clearDepth(Ct),It=Ct)},reset:function(){Ne=!1,Qt=null,$t=null,It=null,Ht=!1}}}function i(){let Ne=!1,Ht=null,Qt=null,$t=null,It=null,Ct=null,ln=null,lt=null,_t=null;return{setTest:function(Pt){Ne||(Pt?se(t.STENCIL_TEST):fe(t.STENCIL_TEST))},setMask:function(Pt){Ht!==Pt&&!Ne&&(t.stencilMask(Pt),Ht=Pt)},setFunc:function(Pt,zt,Wn){(Qt!==Pt||$t!==zt||It!==Wn)&&(t.stencilFunc(Pt,zt,Wn),Qt=Pt,$t=zt,It=Wn)},setOp:function(Pt,zt,Wn){(Ct!==Pt||ln!==zt||lt!==Wn)&&(t.stencilOp(Pt,zt,Wn),Ct=Pt,ln=zt,lt=Wn)},setLocked:function(Pt){Ne=Pt},setClear:function(Pt){_t!==Pt&&(t.clearStencil(Pt),_t=Pt)},reset:function(){Ne=!1,Ht=null,Qt=null,$t=null,It=null,Ct=null,ln=null,lt=null,_t=null}}}const s=new n,a=new r,o=new i,l=new WeakMap,c=new WeakMap;let u={},h={},f=new WeakMap,p=[],m=null,v=!1,A=null,x=null,E=null,w=null,B=null,D=null,T=null,M=new Gr(0,0,0),R=0,k=!1,L=null,F=null,z=null,G=null,V=null;const q=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let O=!1,H=0;const K=t.getParameter(t.VERSION);K.indexOf("WebGL")!==-1?(H=parseFloat(/^WebGL (\d)/.exec(K)[1]),O=H>=1):K.indexOf("OpenGL ES")!==-1&&(H=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),O=H>=2);let X=null,re={};const J=t.getParameter(t.SCISSOR_BOX),Z=t.getParameter(t.VIEWPORT),ee=new to().fromArray(J),te=new to().fromArray(Z);function oe(Ne,Ht,Qt,$t){const It=new Uint8Array(4),Ct=t.createTexture();t.bindTexture(Ne,Ct),t.texParameteri(Ne,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Ne,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let ln=0;ln<Qt;ln++)Ne===t.TEXTURE_3D||Ne===t.TEXTURE_2D_ARRAY?t.texImage3D(Ht,0,t.RGBA,1,1,$t,0,t.RGBA,t.UNSIGNED_BYTE,It):t.texImage2D(Ht+ln,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,It);return Ct}const ae={};ae[t.TEXTURE_2D]=oe(t.TEXTURE_2D,t.TEXTURE_2D,1),ae[t.TEXTURE_CUBE_MAP]=oe(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),ae[t.TEXTURE_2D_ARRAY]=oe(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),ae[t.TEXTURE_3D]=oe(t.TEXTURE_3D,t.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),se(t.DEPTH_TEST),a.setFunc(nE),$e(!1),qe(nz),se(t.CULL_FACE),Me(Ip);function se(Ne){u[Ne]!==!0&&(t.enable(Ne),u[Ne]=!0)}function fe(Ne){u[Ne]!==!1&&(t.disable(Ne),u[Ne]=!1)}function Ee(Ne,Ht){return h[Ne]!==Ht?(t.bindFramebuffer(Ne,Ht),h[Ne]=Ht,Ne===t.DRAW_FRAMEBUFFER&&(h[t.FRAMEBUFFER]=Ht),Ne===t.FRAMEBUFFER&&(h[t.DRAW_FRAMEBUFFER]=Ht),!0):!1}function Be(Ne,Ht){let Qt=p,$t=!1;if(Ne){Qt=f.get(Ht),Qt===void 0&&(Qt=[],f.set(Ht,Qt));const It=Ne.textures;if(Qt.length!==It.length||Qt[0]!==t.COLOR_ATTACHMENT0){for(let Ct=0,ln=It.length;Ct<ln;Ct++)Qt[Ct]=t.COLOR_ATTACHMENT0+Ct;Qt.length=It.length,$t=!0}}else Qt[0]!==t.BACK&&(Qt[0]=t.BACK,$t=!0);$t&&t.drawBuffers(Qt)}function _e(Ne){return m!==Ne?(t.useProgram(Ne),m=Ne,!0):!1}const Ce={[Ox]:t.FUNC_ADD,[wve]:t.FUNC_SUBTRACT,[_ve]:t.FUNC_REVERSE_SUBTRACT};Ce[Ive]=t.MIN,Ce[Bve]=t.MAX;const Se={[Tve]:t.ZERO,[Mve]:t.ONE,[Dve]:t.SRC_COLOR,[KN]:t.SRC_ALPHA,[Fve]:t.SRC_ALPHA_SATURATE,[Nve]:t.DST_COLOR,[Pve]:t.DST_ALPHA,[Rve]:t.ONE_MINUS_SRC_COLOR,[qN]:t.ONE_MINUS_SRC_ALPHA,[Lve]:t.ONE_MINUS_DST_COLOR,[kve]:t.ONE_MINUS_DST_ALPHA,[jve]:t.CONSTANT_COLOR,[Ove]:t.ONE_MINUS_CONSTANT_COLOR,[zve]:t.CONSTANT_ALPHA,[$ve]:t.ONE_MINUS_CONSTANT_ALPHA};function Me(Ne,Ht,Qt,$t,It,Ct,ln,lt,_t,Pt){if(Ne===Ip){v===!0&&(fe(t.BLEND),v=!1);return}if(v===!1&&(se(t.BLEND),v=!0),Ne!==Sve){if(Ne!==A||Pt!==k){if((x!==Ox||B!==Ox)&&(t.blendEquation(t.FUNC_ADD),x=Ox,B=Ox),Pt)switch(Ne){case sb:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Ab:t.blendFunc(t.ONE,t.ONE);break;case rz:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case iz:t.blendFuncSeparate(t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ZERO,t.ONE);break;default:eo("WebGLState: Invalid blending: ",Ne);break}else switch(Ne){case sb:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Ab:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE,t.ONE,t.ONE);break;case rz:eo("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case iz:eo("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:eo("WebGLState: Invalid blending: ",Ne);break}E=null,w=null,D=null,T=null,M.set(0,0,0),R=0,A=Ne,k=Pt}return}It=It||Ht,Ct=Ct||Qt,ln=ln||$t,(Ht!==x||It!==B)&&(t.blendEquationSeparate(Ce[Ht],Ce[It]),x=Ht,B=It),(Qt!==E||$t!==w||Ct!==D||ln!==T)&&(t.blendFuncSeparate(Se[Qt],Se[$t],Se[Ct],Se[ln]),E=Qt,w=$t,D=Ct,T=ln),(lt.equals(M)===!1||_t!==R)&&(t.blendColor(lt.r,lt.g,lt.b,_t),M.copy(lt),R=_t),A=Ne,k=!1}function ce(Ne,Ht){Ne.side===jg?fe(t.CULL_FACE):se(t.CULL_FACE);let Qt=Ne.side===ld;Ht&&(Qt=!Qt),$e(Qt),Ne.blending===sb&&Ne.transparent===!1?Me(Ip):Me(Ne.blending,Ne.blendEquation,Ne.blendSrc,Ne.blendDst,Ne.blendEquationAlpha,Ne.blendSrcAlpha,Ne.blendDstAlpha,Ne.blendColor,Ne.blendAlpha,Ne.premultipliedAlpha),a.setFunc(Ne.depthFunc),a.setTest(Ne.depthTest),a.setMask(Ne.depthWrite),s.setMask(Ne.colorWrite);const $t=Ne.stencilWrite;o.setTest($t),$t&&(o.setMask(Ne.stencilWriteMask),o.setFunc(Ne.stencilFunc,Ne.stencilRef,Ne.stencilFuncMask),o.setOp(Ne.stencilFail,Ne.stencilZFail,Ne.stencilZPass)),Ie(Ne.polygonOffset,Ne.polygonOffsetFactor,Ne.polygonOffsetUnits),Ne.alphaToCoverage===!0?se(t.SAMPLE_ALPHA_TO_COVERAGE):fe(t.SAMPLE_ALPHA_TO_COVERAGE)}function $e(Ne){L!==Ne&&(Ne?t.frontFace(t.CW):t.frontFace(t.CCW),L=Ne)}function qe(Ne){Ne!==bve?(se(t.CULL_FACE),Ne!==F&&(Ne===nz?t.cullFace(t.BACK):Ne===Cve?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):fe(t.CULL_FACE),F=Ne}function ft(Ne){Ne!==z&&(O&&t.lineWidth(Ne),z=Ne)}function Ie(Ne,Ht,Qt){Ne?(se(t.POLYGON_OFFSET_FILL),(G!==Ht||V!==Qt)&&(t.polygonOffset(Ht,Qt),G=Ht,V=Qt)):fe(t.POLYGON_OFFSET_FILL)}function ht(Ne){Ne?se(t.SCISSOR_TEST):fe(t.SCISSOR_TEST)}function Ue(Ne){Ne===void 0&&(Ne=t.TEXTURE0+q-1),X!==Ne&&(t.activeTexture(Ne),X=Ne)}function xt(Ne,Ht,Qt){Qt===void 0&&(X===null?Qt=t.TEXTURE0+q-1:Qt=X);let $t=re[Qt];$t===void 0&&($t={type:void 0,texture:void 0},re[Qt]=$t),($t.type!==Ne||$t.texture!==Ht)&&(X!==Qt&&(t.activeTexture(Qt),X=Qt),t.bindTexture(Ne,Ht||ae[Ne]),$t.type=Ne,$t.texture=Ht)}function ve(){const Ne=re[X];Ne!==void 0&&Ne.type!==void 0&&(t.bindTexture(Ne.type,null),Ne.type=void 0,Ne.texture=void 0)}function ue(){try{t.compressedTexImage2D(...arguments)}catch(Ne){Ne("WebGLState:",Ne)}}function ke(){try{t.compressedTexImage3D(...arguments)}catch(Ne){Ne("WebGLState:",Ne)}}function He(){try{t.texSubImage2D(...arguments)}catch(Ne){Ne("WebGLState:",Ne)}}function Qe(){try{t.texSubImage3D(...arguments)}catch(Ne){Ne("WebGLState:",Ne)}}function Ke(){try{t.compressedTexSubImage2D(...arguments)}catch(Ne){Ne("WebGLState:",Ne)}}function jt(){try{t.compressedTexSubImage3D(...arguments)}catch(Ne){Ne("WebGLState:",Ne)}}function St(){try{t.texStorage2D(...arguments)}catch(Ne){Ne("WebGLState:",Ne)}}function Zt(){try{t.texStorage3D(...arguments)}catch(Ne){Ne("WebGLState:",Ne)}}function Bt(){try{t.texImage2D(...arguments)}catch(Ne){Ne("WebGLState:",Ne)}}function at(){try{t.texImage3D(...arguments)}catch(Ne){Ne("WebGLState:",Ne)}}function pt(Ne){ee.equals(Ne)===!1&&(t.scissor(Ne.x,Ne.y,Ne.z,Ne.w),ee.copy(Ne))}function Vt(Ne){te.equals(Ne)===!1&&(t.viewport(Ne.x,Ne.y,Ne.z,Ne.w),te.copy(Ne))}function qt(Ne,Ht){let Qt=c.get(Ht);Qt===void 0&&(Qt=new WeakMap,c.set(Ht,Qt));let $t=Qt.get(Ne);$t===void 0&&($t=t.getUniformBlockIndex(Ht,Ne.name),Qt.set(Ne,$t))}function Wt(Ne,Ht){const $t=c.get(Ht).get(Ne);l.get(Ht)!==$t&&(t.uniformBlockBinding(Ht,$t,Ne.__bindingPointIndex),l.set(Ht,$t))}function gn(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),a.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},X=null,re={},h={},f=new WeakMap,p=[],m=null,v=!1,A=null,x=null,E=null,w=null,B=null,D=null,T=null,M=new Gr(0,0,0),R=0,k=!1,L=null,F=null,z=null,G=null,V=null,ee.set(0,0,t.canvas.width,t.canvas.height),te.set(0,0,t.canvas.width,t.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:se,disable:fe,bindFramebuffer:Ee,drawBuffers:Be,useProgram:_e,setBlending:Me,setMaterial:ce,setFlipSided:$e,setCullFace:qe,setLineWidth:ft,setPolygonOffset:Ie,setScissorTest:ht,activeTexture:Ue,bindTexture:xt,unbindTexture:ve,compressedTexImage2D:ue,compressedTexImage3D:ke,texImage2D:Bt,texImage3D:at,updateUBOMapping:qt,uniformBlockBinding:Wt,texStorage2D:St,texStorage3D:Zt,texSubImage2D:He,texSubImage3D:Qe,compressedTexSubImage2D:Ke,compressedTexSubImage3D:jt,scissor:pt,viewport:Vt,reset:gn}}function fSe(t,e,n,r,i,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Ir,u=new WeakMap;let h;const f=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(ve,ue){return p?new OffscreenCanvas(ve,ue):wT("canvas")}function v(ve,ue,ke){let He=1;const Qe=xt(ve);if((Qe.width>ke||Qe.height>ke)&&(He=ke/Math.max(Qe.width,Qe.height)),He<1)if(typeof HTMLImageElement<"u"&&ve instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ve instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ve instanceof ImageBitmap||typeof VideoFrame<"u"&&ve instanceof VideoFrame){const Ke=Math.floor(He*Qe.width),jt=Math.floor(He*Qe.height);h===void 0&&(h=m(Ke,jt));const St=ue?m(Ke,jt):h;return St.width=Ke,St.height=jt,St.getContext("2d").drawImage(ve,0,0,Ke,jt),Or("WebGLRenderer: Texture has been resized from ("+Qe.width+"x"+Qe.height+") to ("+Ke+"x"+jt+")."),St}else return"data"in ve&&Or("WebGLRenderer: Image in DataTexture is too big ("+Qe.width+"x"+Qe.height+")."),ve;return ve}function A(ve){return ve.generateMipmaps}function x(ve){t.generateMipmap(ve)}function E(ve){return ve.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:ve.isWebGL3DRenderTarget?t.TEXTURE_3D:ve.isWebGLArrayRenderTarget||ve.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function w(ve,ue,ke,He,Qe=!1){if(ve!==null){if(t[ve]!==void 0)return t[ve];Or("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ve+"'")}let Ke=ue;if(ue===t.RED&&(ke===t.FLOAT&&(Ke=t.R32F),ke===t.HALF_FLOAT&&(Ke=t.R16F),ke===t.UNSIGNED_BYTE&&(Ke=t.R8)),ue===t.RED_INTEGER&&(ke===t.UNSIGNED_BYTE&&(Ke=t.R8UI),ke===t.UNSIGNED_SHORT&&(Ke=t.R16UI),ke===t.UNSIGNED_INT&&(Ke=t.R32UI),ke===t.BYTE&&(Ke=t.R8I),ke===t.SHORT&&(Ke=t.R16I),ke===t.INT&&(Ke=t.R32I)),ue===t.RG&&(ke===t.FLOAT&&(Ke=t.RG32F),ke===t.HALF_FLOAT&&(Ke=t.RG16F),ke===t.UNSIGNED_BYTE&&(Ke=t.RG8)),ue===t.RG_INTEGER&&(ke===t.UNSIGNED_BYTE&&(Ke=t.RG8UI),ke===t.UNSIGNED_SHORT&&(Ke=t.RG16UI),ke===t.UNSIGNED_INT&&(Ke=t.RG32UI),ke===t.BYTE&&(Ke=t.RG8I),ke===t.SHORT&&(Ke=t.RG16I),ke===t.INT&&(Ke=t.RG32I)),ue===t.RGB_INTEGER&&(ke===t.UNSIGNED_BYTE&&(Ke=t.RGB8UI),ke===t.UNSIGNED_SHORT&&(Ke=t.RGB16UI),ke===t.UNSIGNED_INT&&(Ke=t.RGB32UI),ke===t.BYTE&&(Ke=t.RGB8I),ke===t.SHORT&&(Ke=t.RGB16I),ke===t.INT&&(Ke=t.RGB32I)),ue===t.RGBA_INTEGER&&(ke===t.UNSIGNED_BYTE&&(Ke=t.RGBA8UI),ke===t.UNSIGNED_SHORT&&(Ke=t.RGBA16UI),ke===t.UNSIGNED_INT&&(Ke=t.RGBA32UI),ke===t.BYTE&&(Ke=t.RGBA8I),ke===t.SHORT&&(Ke=t.RGBA16I),ke===t.INT&&(Ke=t.RGBA32I)),ue===t.RGB&&(ke===t.UNSIGNED_INT_5_9_9_9_REV&&(Ke=t.RGB9_E5),ke===t.UNSIGNED_INT_10F_11F_11F_REV&&(Ke=t.R11F_G11F_B10F)),ue===t.RGBA){const jt=Qe?ET:Li.getTransfer(He);ke===t.FLOAT&&(Ke=t.RGBA32F),ke===t.HALF_FLOAT&&(Ke=t.RGBA16F),ke===t.UNSIGNED_BYTE&&(Ke=jt===ps?t.SRGB8_ALPHA8:t.RGBA8),ke===t.UNSIGNED_SHORT_4_4_4_4&&(Ke=t.RGBA4),ke===t.UNSIGNED_SHORT_5_5_5_1&&(Ke=t.RGB5_A1)}return(Ke===t.R16F||Ke===t.R32F||Ke===t.RG16F||Ke===t.RG32F||Ke===t.RGBA16F||Ke===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Ke}function B(ve,ue){let ke;return ve?ue===null||ue===yb||ue===S_?ke=t.DEPTH24_STENCIL8:ue===Cp?ke=t.DEPTH32F_STENCIL8:ue===E_&&(ke=t.DEPTH24_STENCIL8,Or("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):ue===null||ue===yb||ue===S_?ke=t.DEPTH_COMPONENT24:ue===Cp?ke=t.DEPTH_COMPONENT32F:ue===E_&&(ke=t.DEPTH_COMPONENT16),ke}function D(ve,ue){return A(ve)===!0||ve.isFramebufferTexture&&ve.minFilter!==hu&&ve.minFilter!==_l?Math.log2(Math.max(ue.width,ue.height))+1:ve.mipmaps!==void 0&&ve.mipmaps.length>0?ve.mipmaps.length:ve.isCompressedTexture&&Array.isArray(ve.image)?ue.mipmaps.length:1}function T(ve){const ue=ve.target;ue.removeEventListener("dispose",T),R(ue),ue.isVideoTexture&&u.delete(ue)}function M(ve){const ue=ve.target;ue.removeEventListener("dispose",M),L(ue)}function R(ve){const ue=r.get(ve);if(ue.__webglInit===void 0)return;const ke=ve.source,He=f.get(ke);if(He){const Qe=He[ue.__cacheKey];Qe.usedTimes--,Qe.usedTimes===0&&k(ve),Object.keys(He).length===0&&f.delete(ke)}r.remove(ve)}function k(ve){const ue=r.get(ve);t.deleteTexture(ue.__webglTexture);const ke=ve.source,He=f.get(ke);delete He[ue.__cacheKey],a.memory.textures--}function L(ve){const ue=r.get(ve);if(ve.depthTexture&&(ve.depthTexture.dispose(),r.remove(ve.depthTexture)),ve.isWebGLCubeRenderTarget)for(let He=0;He<6;He++){if(Array.isArray(ue.__webglFramebuffer[He]))for(let Qe=0;Qe<ue.__webglFramebuffer[He].length;Qe++)t.deleteFramebuffer(ue.__webglFramebuffer[He][Qe]);else t.deleteFramebuffer(ue.__webglFramebuffer[He]);ue.__webglDepthbuffer&&t.deleteRenderbuffer(ue.__webglDepthbuffer[He])}else{if(Array.isArray(ue.__webglFramebuffer))for(let He=0;He<ue.__webglFramebuffer.length;He++)t.deleteFramebuffer(ue.__webglFramebuffer[He]);else t.deleteFramebuffer(ue.__webglFramebuffer);if(ue.__webglDepthbuffer&&t.deleteRenderbuffer(ue.__webglDepthbuffer),ue.__webglMultisampledFramebuffer&&t.deleteFramebuffer(ue.__webglMultisampledFramebuffer),ue.__webglColorRenderbuffer)for(let He=0;He<ue.__webglColorRenderbuffer.length;He++)ue.__webglColorRenderbuffer[He]&&t.deleteRenderbuffer(ue.__webglColorRenderbuffer[He]);ue.__webglDepthRenderbuffer&&t.deleteRenderbuffer(ue.__webglDepthRenderbuffer)}const ke=ve.textures;for(let He=0,Qe=ke.length;He<Qe;He++){const Ke=r.get(ke[He]);Ke.__webglTexture&&(t.deleteTexture(Ke.__webglTexture),a.memory.textures--),r.remove(ke[He])}r.remove(ve)}let F=0;function z(){F=0}function G(){const ve=F;return ve>=i.maxTextures&&Or("WebGLTextures: Trying to use "+ve+" texture units while this GPU supports only "+i.maxTextures),F+=1,ve}function V(ve){const ue=[];return ue.push(ve.wrapS),ue.push(ve.wrapT),ue.push(ve.wrapR||0),ue.push(ve.magFilter),ue.push(ve.minFilter),ue.push(ve.anisotropy),ue.push(ve.internalFormat),ue.push(ve.format),ue.push(ve.type),ue.push(ve.generateMipmaps),ue.push(ve.premultiplyAlpha),ue.push(ve.flipY),ue.push(ve.unpackAlignment),ue.push(ve.colorSpace),ue.join()}function q(ve,ue){const ke=r.get(ve);if(ve.isVideoTexture&&ht(ve),ve.isRenderTargetTexture===!1&&ve.isExternalTexture!==!0&&ve.version>0&&ke.__version!==ve.version){const He=ve.image;if(He===null)Or("WebGLRenderer: Texture marked for update but no image data found.");else if(He.complete===!1)Or("WebGLRenderer: Texture marked for update but image is incomplete");else{ae(ke,ve,ue);return}}else ve.isExternalTexture&&(ke.__webglTexture=ve.sourceTexture?ve.sourceTexture:null);n.bindTexture(t.TEXTURE_2D,ke.__webglTexture,t.TEXTURE0+ue)}function O(ve,ue){const ke=r.get(ve);if(ve.isRenderTargetTexture===!1&&ve.version>0&&ke.__version!==ve.version){ae(ke,ve,ue);return}else ve.isExternalTexture&&(ke.__webglTexture=ve.sourceTexture?ve.sourceTexture:null);n.bindTexture(t.TEXTURE_2D_ARRAY,ke.__webglTexture,t.TEXTURE0+ue)}function H(ve,ue){const ke=r.get(ve);if(ve.isRenderTargetTexture===!1&&ve.version>0&&ke.__version!==ve.version){ae(ke,ve,ue);return}n.bindTexture(t.TEXTURE_3D,ke.__webglTexture,t.TEXTURE0+ue)}function K(ve,ue){const ke=r.get(ve);if(ve.version>0&&ke.__version!==ve.version){se(ke,ve,ue);return}n.bindTexture(t.TEXTURE_CUBE_MAP,ke.__webglTexture,t.TEXTURE0+ue)}const X={[s5]:t.REPEAT,[f0]:t.CLAMP_TO_EDGE,[a5]:t.MIRRORED_REPEAT},re={[hu]:t.NEAREST,[Hve]:t.NEAREST_MIPMAP_NEAREST,[O2]:t.NEAREST_MIPMAP_LINEAR,[_l]:t.LINEAR,[OD]:t.LINEAR_MIPMAP_NEAREST,[Kx]:t.LINEAR_MIPMAP_LINEAR},J={[qve]:t.NEVER,[txe]:t.ALWAYS,[Yve]:t.LESS,[$Y]:t.LEQUAL,[Xve]:t.EQUAL,[exe]:t.GEQUAL,[Jve]:t.GREATER,[Zve]:t.NOTEQUAL};function Z(ve,ue){if(ue.type===Cp&&e.has("OES_texture_float_linear")===!1&&(ue.magFilter===_l||ue.magFilter===OD||ue.magFilter===O2||ue.magFilter===Kx||ue.minFilter===_l||ue.minFilter===OD||ue.minFilter===O2||ue.minFilter===Kx)&&Or("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(ve,t.TEXTURE_WRAP_S,X[ue.wrapS]),t.texParameteri(ve,t.TEXTURE_WRAP_T,X[ue.wrapT]),(ve===t.TEXTURE_3D||ve===t.TEXTURE_2D_ARRAY)&&t.texParameteri(ve,t.TEXTURE_WRAP_R,X[ue.wrapR]),t.texParameteri(ve,t.TEXTURE_MAG_FILTER,re[ue.magFilter]),t.texParameteri(ve,t.TEXTURE_MIN_FILTER,re[ue.minFilter]),ue.compareFunction&&(t.texParameteri(ve,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(ve,t.TEXTURE_COMPARE_FUNC,J[ue.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(ue.magFilter===hu||ue.minFilter!==O2&&ue.minFilter!==Kx||ue.type===Cp&&e.has("OES_texture_float_linear")===!1)return;if(ue.anisotropy>1||r.get(ue).__currentAnisotropy){const ke=e.get("EXT_texture_filter_anisotropic");t.texParameterf(ve,ke.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ue.anisotropy,i.getMaxAnisotropy())),r.get(ue).__currentAnisotropy=ue.anisotropy}}}function ee(ve,ue){let ke=!1;ve.__webglInit===void 0&&(ve.__webglInit=!0,ue.addEventListener("dispose",T));const He=ue.source;let Qe=f.get(He);Qe===void 0&&(Qe={},f.set(He,Qe));const Ke=V(ue);if(Ke!==ve.__cacheKey){Qe[Ke]===void 0&&(Qe[Ke]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,ke=!0),Qe[Ke].usedTimes++;const jt=Qe[ve.__cacheKey];jt!==void 0&&(Qe[ve.__cacheKey].usedTimes--,jt.usedTimes===0&&k(ue)),ve.__cacheKey=Ke,ve.__webglTexture=Qe[Ke].texture}return ke}function te(ve,ue,ke){return Math.floor(Math.floor(ve/ke)/ue)}function oe(ve,ue,ke,He){const Ke=ve.updateRanges;if(Ke.length===0)n.texSubImage2D(t.TEXTURE_2D,0,0,0,ue.width,ue.height,ke,He,ue.data);else{Ke.sort((at,pt)=>at.start-pt.start);let jt=0;for(let at=1;at<Ke.length;at++){const pt=Ke[jt],Vt=Ke[at],qt=pt.start+pt.count,Wt=te(Vt.start,ue.width,4),gn=te(pt.start,ue.width,4);Vt.start<=qt+1&&Wt===gn&&te(Vt.start+Vt.count-1,ue.width,4)===Wt?pt.count=Math.max(pt.count,Vt.start+Vt.count-pt.start):(++jt,Ke[jt]=Vt)}Ke.length=jt+1;const St=t.getParameter(t.UNPACK_ROW_LENGTH),Zt=t.getParameter(t.UNPACK_SKIP_PIXELS),Bt=t.getParameter(t.UNPACK_SKIP_ROWS);t.pixelStorei(t.UNPACK_ROW_LENGTH,ue.width);for(let at=0,pt=Ke.length;at<pt;at++){const Vt=Ke[at],qt=Math.floor(Vt.start/4),Wt=Math.ceil(Vt.count/4),gn=qt%ue.width,Ne=Math.floor(qt/ue.width),Ht=Wt,Qt=1;t.pixelStorei(t.UNPACK_SKIP_PIXELS,gn),t.pixelStorei(t.UNPACK_SKIP_ROWS,Ne),n.texSubImage2D(t.TEXTURE_2D,0,gn,Ne,Ht,Qt,ke,He,ue.data)}ve.clearUpdateRanges(),t.pixelStorei(t.UNPACK_ROW_LENGTH,St),t.pixelStorei(t.UNPACK_SKIP_PIXELS,Zt),t.pixelStorei(t.UNPACK_SKIP_ROWS,Bt)}}function ae(ve,ue,ke){let He=t.TEXTURE_2D;(ue.isDataArrayTexture||ue.isCompressedArrayTexture)&&(He=t.TEXTURE_2D_ARRAY),ue.isData3DTexture&&(He=t.TEXTURE_3D);const Qe=ee(ve,ue),Ke=ue.source;n.bindTexture(He,ve.__webglTexture,t.TEXTURE0+ke);const jt=r.get(Ke);if(Ke.version!==jt.__version||Qe===!0){n.activeTexture(t.TEXTURE0+ke);const St=Li.getPrimaries(Li.workingColorSpace),Zt=ue.colorSpace===fy?null:Li.getPrimaries(ue.colorSpace),Bt=ue.colorSpace===fy||St===Zt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,ue.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,ue.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Bt);let at=v(ue.image,!1,i.maxTextureSize);at=Ue(ue,at);const pt=s.convert(ue.format,ue.colorSpace),Vt=s.convert(ue.type);let qt=w(ue.internalFormat,pt,Vt,ue.colorSpace,ue.isVideoTexture);Z(He,ue);let Wt;const gn=ue.mipmaps,Ne=ue.isVideoTexture!==!0,Ht=jt.__version===void 0||Qe===!0,Qt=Ke.dataReady,$t=D(ue,at);if(ue.isDepthTexture)qt=B(ue.format===__,ue.type),Ht&&(Ne?n.texStorage2D(t.TEXTURE_2D,1,qt,at.width,at.height):n.texImage2D(t.TEXTURE_2D,0,qt,at.width,at.height,0,pt,Vt,null));else if(ue.isDataTexture)if(gn.length>0){Ne&&Ht&&n.texStorage2D(t.TEXTURE_2D,$t,qt,gn[0].width,gn[0].height);for(let It=0,Ct=gn.length;It<Ct;It++)Wt=gn[It],Ne?Qt&&n.texSubImage2D(t.TEXTURE_2D,It,0,0,Wt.width,Wt.height,pt,Vt,Wt.data):n.texImage2D(t.TEXTURE_2D,It,qt,Wt.width,Wt.height,0,pt,Vt,Wt.data);ue.generateMipmaps=!1}else Ne?(Ht&&n.texStorage2D(t.TEXTURE_2D,$t,qt,at.width,at.height),Qt&&oe(ue,at,pt,Vt)):n.texImage2D(t.TEXTURE_2D,0,qt,at.width,at.height,0,pt,Vt,at.data);else if(ue.isCompressedTexture)if(ue.isCompressedArrayTexture){Ne&&Ht&&n.texStorage3D(t.TEXTURE_2D_ARRAY,$t,qt,gn[0].width,gn[0].height,at.depth);for(let It=0,Ct=gn.length;It<Ct;It++)if(Wt=gn[It],ue.format!==nf)if(pt!==null)if(Ne){if(Qt)if(ue.layerUpdates.size>0){const ln=Mz(Wt.width,Wt.height,ue.format,ue.type);for(const lt of ue.layerUpdates){const _t=Wt.data.subarray(lt*ln/Wt.data.BYTES_PER_ELEMENT,(lt+1)*ln/Wt.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,It,0,0,lt,Wt.width,Wt.height,1,pt,_t)}ue.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,It,0,0,0,Wt.width,Wt.height,at.depth,pt,Wt.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,It,qt,Wt.width,Wt.height,at.depth,0,Wt.data,0,0);else Or("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ne?Qt&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,It,0,0,0,Wt.width,Wt.height,at.depth,pt,Vt,Wt.data):n.texImage3D(t.TEXTURE_2D_ARRAY,It,qt,Wt.width,Wt.height,at.depth,0,pt,Vt,Wt.data)}else{Ne&&Ht&&n.texStorage2D(t.TEXTURE_2D,$t,qt,gn[0].width,gn[0].height);for(let It=0,Ct=gn.length;It<Ct;It++)Wt=gn[It],ue.format!==nf?pt!==null?Ne?Qt&&n.compressedTexSubImage2D(t.TEXTURE_2D,It,0,0,Wt.width,Wt.height,pt,Wt.data):n.compressedTexImage2D(t.TEXTURE_2D,It,qt,Wt.width,Wt.height,0,Wt.data):Or("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ne?Qt&&n.texSubImage2D(t.TEXTURE_2D,It,0,0,Wt.width,Wt.height,pt,Vt,Wt.data):n.texImage2D(t.TEXTURE_2D,It,qt,Wt.width,Wt.height,0,pt,Vt,Wt.data)}else if(ue.isDataArrayTexture)if(Ne){if(Ht&&n.texStorage3D(t.TEXTURE_2D_ARRAY,$t,qt,at.width,at.height,at.depth),Qt)if(ue.layerUpdates.size>0){const It=Mz(at.width,at.height,ue.format,ue.type);for(const Ct of ue.layerUpdates){const ln=at.data.subarray(Ct*It/at.data.BYTES_PER_ELEMENT,(Ct+1)*It/at.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,Ct,at.width,at.height,1,pt,Vt,ln)}ue.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,at.width,at.height,at.depth,pt,Vt,at.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,qt,at.width,at.height,at.depth,0,pt,Vt,at.data);else if(ue.isData3DTexture)Ne?(Ht&&n.texStorage3D(t.TEXTURE_3D,$t,qt,at.width,at.height,at.depth),Qt&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,at.width,at.height,at.depth,pt,Vt,at.data)):n.texImage3D(t.TEXTURE_3D,0,qt,at.width,at.height,at.depth,0,pt,Vt,at.data);else if(ue.isFramebufferTexture){if(Ht)if(Ne)n.texStorage2D(t.TEXTURE_2D,$t,qt,at.width,at.height);else{let It=at.width,Ct=at.height;for(let ln=0;ln<$t;ln++)n.texImage2D(t.TEXTURE_2D,ln,qt,It,Ct,0,pt,Vt,null),It>>=1,Ct>>=1}}else if(gn.length>0){if(Ne&&Ht){const It=xt(gn[0]);n.texStorage2D(t.TEXTURE_2D,$t,qt,It.width,It.height)}for(let It=0,Ct=gn.length;It<Ct;It++)Wt=gn[It],Ne?Qt&&n.texSubImage2D(t.TEXTURE_2D,It,0,0,pt,Vt,Wt):n.texImage2D(t.TEXTURE_2D,It,qt,pt,Vt,Wt);ue.generateMipmaps=!1}else if(Ne){if(Ht){const It=xt(at);n.texStorage2D(t.TEXTURE_2D,$t,qt,It.width,It.height)}Qt&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,pt,Vt,at)}else n.texImage2D(t.TEXTURE_2D,0,qt,pt,Vt,at);A(ue)&&x(He),jt.__version=Ke.version,ue.onUpdate&&ue.onUpdate(ue)}ve.__version=ue.version}function se(ve,ue,ke){if(ue.image.length!==6)return;const He=ee(ve,ue),Qe=ue.source;n.bindTexture(t.TEXTURE_CUBE_MAP,ve.__webglTexture,t.TEXTURE0+ke);const Ke=r.get(Qe);if(Qe.version!==Ke.__version||He===!0){n.activeTexture(t.TEXTURE0+ke);const jt=Li.getPrimaries(Li.workingColorSpace),St=ue.colorSpace===fy?null:Li.getPrimaries(ue.colorSpace),Zt=ue.colorSpace===fy||jt===St?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,ue.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,ue.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Zt);const Bt=ue.isCompressedTexture||ue.image[0].isCompressedTexture,at=ue.image[0]&&ue.image[0].isDataTexture,pt=[];for(let Ct=0;Ct<6;Ct++)!Bt&&!at?pt[Ct]=v(ue.image[Ct],!0,i.maxCubemapSize):pt[Ct]=at?ue.image[Ct].image:ue.image[Ct],pt[Ct]=Ue(ue,pt[Ct]);const Vt=pt[0],qt=s.convert(ue.format,ue.colorSpace),Wt=s.convert(ue.type),gn=w(ue.internalFormat,qt,Wt,ue.colorSpace),Ne=ue.isVideoTexture!==!0,Ht=Ke.__version===void 0||He===!0,Qt=Qe.dataReady;let $t=D(ue,Vt);Z(t.TEXTURE_CUBE_MAP,ue);let It;if(Bt){Ne&&Ht&&n.texStorage2D(t.TEXTURE_CUBE_MAP,$t,gn,Vt.width,Vt.height);for(let Ct=0;Ct<6;Ct++){It=pt[Ct].mipmaps;for(let ln=0;ln<It.length;ln++){const lt=It[ln];ue.format!==nf?qt!==null?Ne?Qt&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,ln,0,0,lt.width,lt.height,qt,lt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,ln,gn,lt.width,lt.height,0,lt.data):Or("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ne?Qt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,ln,0,0,lt.width,lt.height,qt,Wt,lt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,ln,gn,lt.width,lt.height,0,qt,Wt,lt.data)}}}else{if(It=ue.mipmaps,Ne&&Ht){It.length>0&&$t++;const Ct=xt(pt[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,$t,gn,Ct.width,Ct.height)}for(let Ct=0;Ct<6;Ct++)if(at){Ne?Qt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,0,0,0,pt[Ct].width,pt[Ct].height,qt,Wt,pt[Ct].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,0,gn,pt[Ct].width,pt[Ct].height,0,qt,Wt,pt[Ct].data);for(let ln=0;ln<It.length;ln++){const _t=It[ln].image[Ct].image;Ne?Qt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,ln+1,0,0,_t.width,_t.height,qt,Wt,_t.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,ln+1,gn,_t.width,_t.height,0,qt,Wt,_t.data)}}else{Ne?Qt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,0,0,0,qt,Wt,pt[Ct]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,0,gn,qt,Wt,pt[Ct]);for(let ln=0;ln<It.length;ln++){const lt=It[ln];Ne?Qt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,ln+1,0,0,qt,Wt,lt.image[Ct]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,ln+1,gn,qt,Wt,lt.image[Ct])}}}A(ue)&&x(t.TEXTURE_CUBE_MAP),Ke.__version=Qe.version,ue.onUpdate&&ue.onUpdate(ue)}ve.__version=ue.version}function fe(ve,ue,ke,He,Qe,Ke){const jt=s.convert(ke.format,ke.colorSpace),St=s.convert(ke.type),Zt=w(ke.internalFormat,jt,St,ke.colorSpace),Bt=r.get(ue),at=r.get(ke);if(at.__renderTarget=ue,!Bt.__hasExternalTextures){const pt=Math.max(1,ue.width>>Ke),Vt=Math.max(1,ue.height>>Ke);Qe===t.TEXTURE_3D||Qe===t.TEXTURE_2D_ARRAY?n.texImage3D(Qe,Ke,Zt,pt,Vt,ue.depth,0,jt,St,null):n.texImage2D(Qe,Ke,Zt,pt,Vt,0,jt,St,null)}n.bindFramebuffer(t.FRAMEBUFFER,ve),Ie(ue)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,He,Qe,at.__webglTexture,0,ft(ue)):(Qe===t.TEXTURE_2D||Qe>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Qe<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,He,Qe,at.__webglTexture,Ke),n.bindFramebuffer(t.FRAMEBUFFER,null)}function Ee(ve,ue,ke){if(t.bindRenderbuffer(t.RENDERBUFFER,ve),ue.depthBuffer){const He=ue.depthTexture,Qe=He&&He.isDepthTexture?He.type:null,Ke=B(ue.stencilBuffer,Qe),jt=ue.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,St=ft(ue);Ie(ue)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,St,Ke,ue.width,ue.height):ke?t.renderbufferStorageMultisample(t.RENDERBUFFER,St,Ke,ue.width,ue.height):t.renderbufferStorage(t.RENDERBUFFER,Ke,ue.width,ue.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,jt,t.RENDERBUFFER,ve)}else{const He=ue.textures;for(let Qe=0;Qe<He.length;Qe++){const Ke=He[Qe],jt=s.convert(Ke.format,Ke.colorSpace),St=s.convert(Ke.type),Zt=w(Ke.internalFormat,jt,St,Ke.colorSpace),Bt=ft(ue);ke&&Ie(ue)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Bt,Zt,ue.width,ue.height):Ie(ue)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Bt,Zt,ue.width,ue.height):t.renderbufferStorage(t.RENDERBUFFER,Zt,ue.width,ue.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Be(ve,ue){if(ue&&ue.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,ve),!(ue.depthTexture&&ue.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const He=r.get(ue.depthTexture);He.__renderTarget=ue,(!He.__webglTexture||ue.depthTexture.image.width!==ue.width||ue.depthTexture.image.height!==ue.height)&&(ue.depthTexture.image.width=ue.width,ue.depthTexture.image.height=ue.height,ue.depthTexture.needsUpdate=!0),q(ue.depthTexture,0);const Qe=He.__webglTexture,Ke=ft(ue);if(ue.depthTexture.format===w_)Ie(ue)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Qe,0,Ke):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Qe,0);else if(ue.depthTexture.format===__)Ie(ue)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Qe,0,Ke):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Qe,0);else throw new Error("Unknown depthTexture format")}function _e(ve){const ue=r.get(ve),ke=ve.isWebGLCubeRenderTarget===!0;if(ue.__boundDepthTexture!==ve.depthTexture){const He=ve.depthTexture;if(ue.__depthDisposeCallback&&ue.__depthDisposeCallback(),He){const Qe=()=>{delete ue.__boundDepthTexture,delete ue.__depthDisposeCallback,He.removeEventListener("dispose",Qe)};He.addEventListener("dispose",Qe),ue.__depthDisposeCallback=Qe}ue.__boundDepthTexture=He}if(ve.depthTexture&&!ue.__autoAllocateDepthBuffer){if(ke)throw new Error("target.depthTexture not supported in Cube render targets");const He=ve.texture.mipmaps;He&&He.length>0?Be(ue.__webglFramebuffer[0],ve):Be(ue.__webglFramebuffer,ve)}else if(ke){ue.__webglDepthbuffer=[];for(let He=0;He<6;He++)if(n.bindFramebuffer(t.FRAMEBUFFER,ue.__webglFramebuffer[He]),ue.__webglDepthbuffer[He]===void 0)ue.__webglDepthbuffer[He]=t.createRenderbuffer(),Ee(ue.__webglDepthbuffer[He],ve,!1);else{const Qe=ve.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ke=ue.__webglDepthbuffer[He];t.bindRenderbuffer(t.RENDERBUFFER,Ke),t.framebufferRenderbuffer(t.FRAMEBUFFER,Qe,t.RENDERBUFFER,Ke)}}else{const He=ve.texture.mipmaps;if(He&&He.length>0?n.bindFramebuffer(t.FRAMEBUFFER,ue.__webglFramebuffer[0]):n.bindFramebuffer(t.FRAMEBUFFER,ue.__webglFramebuffer),ue.__webglDepthbuffer===void 0)ue.__webglDepthbuffer=t.createRenderbuffer(),Ee(ue.__webglDepthbuffer,ve,!1);else{const Qe=ve.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ke=ue.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,Ke),t.framebufferRenderbuffer(t.FRAMEBUFFER,Qe,t.RENDERBUFFER,Ke)}}n.bindFramebuffer(t.FRAMEBUFFER,null)}function Ce(ve,ue,ke){const He=r.get(ve);ue!==void 0&&fe(He.__webglFramebuffer,ve,ve.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),ke!==void 0&&_e(ve)}function Se(ve){const ue=ve.texture,ke=r.get(ve),He=r.get(ue);ve.addEventListener("dispose",M);const Qe=ve.textures,Ke=ve.isWebGLCubeRenderTarget===!0,jt=Qe.length>1;if(jt||(He.__webglTexture===void 0&&(He.__webglTexture=t.createTexture()),He.__version=ue.version,a.memory.textures++),Ke){ke.__webglFramebuffer=[];for(let St=0;St<6;St++)if(ue.mipmaps&&ue.mipmaps.length>0){ke.__webglFramebuffer[St]=[];for(let Zt=0;Zt<ue.mipmaps.length;Zt++)ke.__webglFramebuffer[St][Zt]=t.createFramebuffer()}else ke.__webglFramebuffer[St]=t.createFramebuffer()}else{if(ue.mipmaps&&ue.mipmaps.length>0){ke.__webglFramebuffer=[];for(let St=0;St<ue.mipmaps.length;St++)ke.__webglFramebuffer[St]=t.createFramebuffer()}else ke.__webglFramebuffer=t.createFramebuffer();if(jt)for(let St=0,Zt=Qe.length;St<Zt;St++){const Bt=r.get(Qe[St]);Bt.__webglTexture===void 0&&(Bt.__webglTexture=t.createTexture(),a.memory.textures++)}if(ve.samples>0&&Ie(ve)===!1){ke.__webglMultisampledFramebuffer=t.createFramebuffer(),ke.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,ke.__webglMultisampledFramebuffer);for(let St=0;St<Qe.length;St++){const Zt=Qe[St];ke.__webglColorRenderbuffer[St]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ke.__webglColorRenderbuffer[St]);const Bt=s.convert(Zt.format,Zt.colorSpace),at=s.convert(Zt.type),pt=w(Zt.internalFormat,Bt,at,Zt.colorSpace,ve.isXRRenderTarget===!0),Vt=ft(ve);t.renderbufferStorageMultisample(t.RENDERBUFFER,Vt,pt,ve.width,ve.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+St,t.RENDERBUFFER,ke.__webglColorRenderbuffer[St])}t.bindRenderbuffer(t.RENDERBUFFER,null),ve.depthBuffer&&(ke.__webglDepthRenderbuffer=t.createRenderbuffer(),Ee(ke.__webglDepthRenderbuffer,ve,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Ke){n.bindTexture(t.TEXTURE_CUBE_MAP,He.__webglTexture),Z(t.TEXTURE_CUBE_MAP,ue);for(let St=0;St<6;St++)if(ue.mipmaps&&ue.mipmaps.length>0)for(let Zt=0;Zt<ue.mipmaps.length;Zt++)fe(ke.__webglFramebuffer[St][Zt],ve,ue,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+St,Zt);else fe(ke.__webglFramebuffer[St],ve,ue,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+St,0);A(ue)&&x(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(jt){for(let St=0,Zt=Qe.length;St<Zt;St++){const Bt=Qe[St],at=r.get(Bt);let pt=t.TEXTURE_2D;(ve.isWebGL3DRenderTarget||ve.isWebGLArrayRenderTarget)&&(pt=ve.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(pt,at.__webglTexture),Z(pt,Bt),fe(ke.__webglFramebuffer,ve,Bt,t.COLOR_ATTACHMENT0+St,pt,0),A(Bt)&&x(pt)}n.unbindTexture()}else{let St=t.TEXTURE_2D;if((ve.isWebGL3DRenderTarget||ve.isWebGLArrayRenderTarget)&&(St=ve.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(St,He.__webglTexture),Z(St,ue),ue.mipmaps&&ue.mipmaps.length>0)for(let Zt=0;Zt<ue.mipmaps.length;Zt++)fe(ke.__webglFramebuffer[Zt],ve,ue,t.COLOR_ATTACHMENT0,St,Zt);else fe(ke.__webglFramebuffer,ve,ue,t.COLOR_ATTACHMENT0,St,0);A(ue)&&x(St),n.unbindTexture()}ve.depthBuffer&&_e(ve)}function Me(ve){const ue=ve.textures;for(let ke=0,He=ue.length;ke<He;ke++){const Qe=ue[ke];if(A(Qe)){const Ke=E(ve),jt=r.get(Qe).__webglTexture;n.bindTexture(Ke,jt),x(Ke),n.unbindTexture()}}}const ce=[],$e=[];function qe(ve){if(ve.samples>0){if(Ie(ve)===!1){const ue=ve.textures,ke=ve.width,He=ve.height;let Qe=t.COLOR_BUFFER_BIT;const Ke=ve.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,jt=r.get(ve),St=ue.length>1;if(St)for(let Bt=0;Bt<ue.length;Bt++)n.bindFramebuffer(t.FRAMEBUFFER,jt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Bt,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,jt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Bt,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,jt.__webglMultisampledFramebuffer);const Zt=ve.texture.mipmaps;Zt&&Zt.length>0?n.bindFramebuffer(t.DRAW_FRAMEBUFFER,jt.__webglFramebuffer[0]):n.bindFramebuffer(t.DRAW_FRAMEBUFFER,jt.__webglFramebuffer);for(let Bt=0;Bt<ue.length;Bt++){if(ve.resolveDepthBuffer&&(ve.depthBuffer&&(Qe|=t.DEPTH_BUFFER_BIT),ve.stencilBuffer&&ve.resolveStencilBuffer&&(Qe|=t.STENCIL_BUFFER_BIT)),St){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,jt.__webglColorRenderbuffer[Bt]);const at=r.get(ue[Bt]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,at,0)}t.blitFramebuffer(0,0,ke,He,0,0,ke,He,Qe,t.NEAREST),l===!0&&(ce.length=0,$e.length=0,ce.push(t.COLOR_ATTACHMENT0+Bt),ve.depthBuffer&&ve.resolveDepthBuffer===!1&&(ce.push(Ke),$e.push(Ke),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,$e)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,ce))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),St)for(let Bt=0;Bt<ue.length;Bt++){n.bindFramebuffer(t.FRAMEBUFFER,jt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Bt,t.RENDERBUFFER,jt.__webglColorRenderbuffer[Bt]);const at=r.get(ue[Bt]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,jt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Bt,t.TEXTURE_2D,at,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,jt.__webglMultisampledFramebuffer)}else if(ve.depthBuffer&&ve.resolveDepthBuffer===!1&&l){const ue=ve.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[ue])}}}function ft(ve){return Math.min(i.maxSamples,ve.samples)}function Ie(ve){const ue=r.get(ve);return ve.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ue.__useRenderToTexture!==!1}function ht(ve){const ue=a.render.frame;u.get(ve)!==ue&&(u.set(ve,ue),ve.update())}function Ue(ve,ue){const ke=ve.colorSpace,He=ve.format,Qe=ve.type;return ve.isCompressedTexture===!0||ve.isVideoTexture===!0||ke!==sE&&ke!==fy&&(Li.getTransfer(ke)===ps?(He!==nf||Qe!==M0)&&Or("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):eo("WebGLTextures: Unsupported texture color space:",ke)),ue}function xt(ve){return typeof HTMLImageElement<"u"&&ve instanceof HTMLImageElement?(c.width=ve.naturalWidth||ve.width,c.height=ve.naturalHeight||ve.height):typeof VideoFrame<"u"&&ve instanceof VideoFrame?(c.width=ve.displayWidth,c.height=ve.displayHeight):(c.width=ve.width,c.height=ve.height),c}this.allocateTextureUnit=G,this.resetTextureUnits=z,this.setTexture2D=q,this.setTexture2DArray=O,this.setTexture3D=H,this.setTextureCube=K,this.rebindTextures=Ce,this.setupRenderTarget=Se,this.updateRenderTargetMipmap=Me,this.updateMultisampleRenderTarget=qe,this.setupDepthRenderbuffer=_e,this.setupFrameBufferTexture=fe,this.useMultisampledRTT=Ie}function pSe(t,e){function n(r,i=fy){let s;const a=Li.getTransfer(i);if(r===M0)return t.UNSIGNED_BYTE;if(r===$8)return t.UNSIGNED_SHORT_4_4_4_4;if(r===Q8)return t.UNSIGNED_SHORT_5_5_5_1;if(r===FY)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===jY)return t.UNSIGNED_INT_10F_11F_11F_REV;if(r===NY)return t.BYTE;if(r===LY)return t.SHORT;if(r===E_)return t.UNSIGNED_SHORT;if(r===z8)return t.INT;if(r===yb)return t.UNSIGNED_INT;if(r===Cp)return t.FLOAT;if(r===af)return t.HALF_FLOAT;if(r===OY)return t.ALPHA;if(r===zY)return t.RGB;if(r===nf)return t.RGBA;if(r===w_)return t.DEPTH_COMPONENT;if(r===__)return t.DEPTH_STENCIL;if(r===U8)return t.RED;if(r===H8)return t.RED_INTEGER;if(r===G8)return t.RG;if(r===V8)return t.RG_INTEGER;if(r===W8)return t.RGBA_INTEGER;if(r===U3||r===H3||r===G3||r===V3)if(a===ps)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===U3)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===H3)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===G3)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===V3)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===U3)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===H3)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===G3)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===V3)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===o5||r===l5||r===c5||r===u5)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===o5)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===l5)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===c5)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===u5)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===d5||r===h5||r===f5)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===d5||r===h5)return a===ps?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===f5)return a===ps?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===p5||r===g5||r===m5||r===A5||r===y5||r===v5||r===x5||r===b5||r===C5||r===E5||r===S5||r===w5||r===_5||r===I5)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===p5)return a===ps?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===g5)return a===ps?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===m5)return a===ps?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===A5)return a===ps?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===y5)return a===ps?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===v5)return a===ps?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===x5)return a===ps?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===b5)return a===ps?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===C5)return a===ps?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===E5)return a===ps?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===S5)return a===ps?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===w5)return a===ps?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===_5)return a===ps?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===I5)return a===ps?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===B5||r===T5||r===M5)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===B5)return a===ps?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===T5)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===M5)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===D5||r===R5||r===P5||r===k5)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===D5)return s.COMPRESSED_RED_RGTC1_EXT;if(r===R5)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===P5)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===k5)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===S_?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}const gSe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,mSe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class ASe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n){if(this.texture===null){const r=new eX(e.texture);(e.depthNear!==n.depthNear||e.depthFar!==n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new Ta({vertexShader:gSe,fragmentShader:mSe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Dp(new Z8(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class ySe extends LE{constructor(e,n){super();const r=this;let i=null,s=1,a=null,o="local-floor",l=1,c=null,u=null,h=null,f=null,p=null,m=null;const v=typeof XRWebGLBinding<"u",A=new ASe,x={},E=n.getContextAttributes();let w=null,B=null;const D=[],T=[],M=new Ir;let R=null;const k=new lu;k.viewport=new to;const L=new lu;L.viewport=new to;const F=[k,L],z=new Fxe;let G=null,V=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ae){let se=D[ae];return se===void 0&&(se=new lR,D[ae]=se),se.getTargetRaySpace()},this.getControllerGrip=function(ae){let se=D[ae];return se===void 0&&(se=new lR,D[ae]=se),se.getGripSpace()},this.getHand=function(ae){let se=D[ae];return se===void 0&&(se=new lR,D[ae]=se),se.getHandSpace()};function q(ae){const se=T.indexOf(ae.inputSource);if(se===-1)return;const fe=D[se];fe!==void 0&&(fe.update(ae.inputSource,ae.frame,c||a),fe.dispatchEvent({type:ae.type,data:ae.inputSource}))}function O(){i.removeEventListener("select",q),i.removeEventListener("selectstart",q),i.removeEventListener("selectend",q),i.removeEventListener("squeeze",q),i.removeEventListener("squeezestart",q),i.removeEventListener("squeezeend",q),i.removeEventListener("end",O),i.removeEventListener("inputsourceschange",H);for(let ae=0;ae<D.length;ae++){const se=T[ae];se!==null&&(T[ae]=null,D[ae].disconnect(se))}G=null,V=null,A.reset();for(const ae in x)delete x[ae];e.setRenderTarget(w),p=null,f=null,h=null,i=null,B=null,oe.stop(),r.isPresenting=!1,e.setPixelRatio(R),e.setSize(M.width,M.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ae){s=ae,r.isPresenting===!0&&Or("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ae){o=ae,r.isPresenting===!0&&Or("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(ae){c=ae},this.getBaseLayer=function(){return f!==null?f:p},this.getBinding=function(){return h===null&&v&&(h=new XRWebGLBinding(i,n)),h},this.getFrame=function(){return m},this.getSession=function(){return i},this.setSession=async function(ae){if(i=ae,i!==null){if(w=e.getRenderTarget(),i.addEventListener("select",q),i.addEventListener("selectstart",q),i.addEventListener("selectend",q),i.addEventListener("squeeze",q),i.addEventListener("squeezestart",q),i.addEventListener("squeezeend",q),i.addEventListener("end",O),i.addEventListener("inputsourceschange",H),E.xrCompatible!==!0&&await n.makeXRCompatible(),R=e.getPixelRatio(),e.getSize(M),v&&"createProjectionLayer"in XRWebGLBinding.prototype){let fe=null,Ee=null,Be=null;E.depth&&(Be=E.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,fe=E.stencil?__:w_,Ee=E.stencil?S_:yb);const _e={colorFormat:n.RGBA8,depthFormat:Be,scaleFactor:s};h=this.getBinding(),f=h.createProjectionLayer(_e),i.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),B=new Jd(f.textureWidth,f.textureHeight,{format:nf,type:M0,depthTexture:new ZY(f.textureWidth,f.textureHeight,Ee,void 0,void 0,void 0,void 0,void 0,void 0,fe),stencilBuffer:E.stencil,colorSpace:e.outputColorSpace,samples:E.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}else{const fe={antialias:E.antialias,alpha:!0,depth:E.depth,stencil:E.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(i,n,fe),i.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),B=new Jd(p.framebufferWidth,p.framebufferHeight,{format:nf,type:M0,colorSpace:e.outputColorSpace,stencilBuffer:E.stencil,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}B.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await i.requestReferenceSpace(o),oe.setContext(i),oe.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return A.getDepthTexture()};function H(ae){for(let se=0;se<ae.removed.length;se++){const fe=ae.removed[se],Ee=T.indexOf(fe);Ee>=0&&(T[Ee]=null,D[Ee].disconnect(fe))}for(let se=0;se<ae.added.length;se++){const fe=ae.added[se];let Ee=T.indexOf(fe);if(Ee===-1){for(let _e=0;_e<D.length;_e++)if(_e>=T.length){T.push(fe),Ee=_e;break}else if(T[_e]===null){T[_e]=fe,Ee=_e;break}if(Ee===-1)break}const Be=D[Ee];Be&&Be.connect(fe)}}const K=new mt,X=new mt;function re(ae,se,fe){K.setFromMatrixPosition(se.matrixWorld),X.setFromMatrixPosition(fe.matrixWorld);const Ee=K.distanceTo(X),Be=se.projectionMatrix.elements,_e=fe.projectionMatrix.elements,Ce=Be[14]/(Be[10]-1),Se=Be[14]/(Be[10]+1),Me=(Be[9]+1)/Be[5],ce=(Be[9]-1)/Be[5],$e=(Be[8]-1)/Be[0],qe=(_e[8]+1)/_e[0],ft=Ce*$e,Ie=Ce*qe,ht=Ee/(-$e+qe),Ue=ht*-$e;if(se.matrixWorld.decompose(ae.position,ae.quaternion,ae.scale),ae.translateX(Ue),ae.translateZ(ht),ae.matrixWorld.compose(ae.position,ae.quaternion,ae.scale),ae.matrixWorldInverse.copy(ae.matrixWorld).invert(),Be[10]===-1)ae.projectionMatrix.copy(se.projectionMatrix),ae.projectionMatrixInverse.copy(se.projectionMatrixInverse);else{const xt=Ce+ht,ve=Se+ht,ue=ft-Ue,ke=Ie+(Ee-Ue),He=Me*Se/ve*xt,Qe=ce*Se/ve*xt;ae.projectionMatrix.makePerspective(ue,ke,He,Qe,xt,ve),ae.projectionMatrixInverse.copy(ae.projectionMatrix).invert()}}function J(ae,se){se===null?ae.matrixWorld.copy(ae.matrix):ae.matrixWorld.multiplyMatrices(se.matrixWorld,ae.matrix),ae.matrixWorldInverse.copy(ae.matrixWorld).invert()}this.updateCamera=function(ae){if(i===null)return;let se=ae.near,fe=ae.far;A.texture!==null&&(A.depthNear>0&&(se=A.depthNear),A.depthFar>0&&(fe=A.depthFar)),z.near=L.near=k.near=se,z.far=L.far=k.far=fe,(G!==z.near||V!==z.far)&&(i.updateRenderState({depthNear:z.near,depthFar:z.far}),G=z.near,V=z.far),z.layers.mask=ae.layers.mask|6,k.layers.mask=z.layers.mask&3,L.layers.mask=z.layers.mask&5;const Ee=ae.parent,Be=z.cameras;J(z,Ee);for(let _e=0;_e<Be.length;_e++)J(Be[_e],Ee);Be.length===2?re(z,k,L):z.projectionMatrix.copy(k.projectionMatrix),Z(ae,z,Ee)};function Z(ae,se,fe){fe===null?ae.matrix.copy(se.matrixWorld):(ae.matrix.copy(fe.matrixWorld),ae.matrix.invert(),ae.matrix.multiply(se.matrixWorld)),ae.matrix.decompose(ae.position,ae.quaternion,ae.scale),ae.updateMatrixWorld(!0),ae.projectionMatrix.copy(se.projectionMatrix),ae.projectionMatrixInverse.copy(se.projectionMatrixInverse),ae.isPerspectiveCamera&&(ae.fov=N5*2*Math.atan(1/ae.projectionMatrix.elements[5]),ae.zoom=1)}this.getCamera=function(){return z},this.getFoveation=function(){if(!(f===null&&p===null))return l},this.setFoveation=function(ae){l=ae,f!==null&&(f.fixedFoveation=ae),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=ae)},this.hasDepthSensing=function(){return A.texture!==null},this.getDepthSensingMesh=function(){return A.getMesh(z)},this.getCameraTexture=function(ae){return x[ae]};let ee=null;function te(ae,se){if(u=se.getViewerPose(c||a),m=se,u!==null){const fe=u.views;p!==null&&(e.setRenderTargetFramebuffer(B,p.framebuffer),e.setRenderTarget(B));let Ee=!1;fe.length!==z.cameras.length&&(z.cameras.length=0,Ee=!0);for(let Se=0;Se<fe.length;Se++){const Me=fe[Se];let ce=null;if(p!==null)ce=p.getViewport(Me);else{const qe=h.getViewSubImage(f,Me);ce=qe.viewport,Se===0&&(e.setRenderTargetTextures(B,qe.colorTexture,qe.depthStencilTexture),e.setRenderTarget(B))}let $e=F[Se];$e===void 0&&($e=new lu,$e.layers.enable(Se),$e.viewport=new to,F[Se]=$e),$e.matrix.fromArray(Me.transform.matrix),$e.matrix.decompose($e.position,$e.quaternion,$e.scale),$e.projectionMatrix.fromArray(Me.projectionMatrix),$e.projectionMatrixInverse.copy($e.projectionMatrix).invert(),$e.viewport.set(ce.x,ce.y,ce.width,ce.height),Se===0&&(z.matrix.copy($e.matrix),z.matrix.decompose(z.position,z.quaternion,z.scale)),Ee===!0&&z.cameras.push($e)}const Be=i.enabledFeatures;if(Be&&Be.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&v){h=r.getBinding();const Se=h.getDepthInformation(fe[0]);Se&&Se.isValid&&Se.texture&&A.init(Se,i.renderState)}if(Be&&Be.includes("camera-access")&&v){e.state.unbindTexture(),h=r.getBinding();for(let Se=0;Se<fe.length;Se++){const Me=fe[Se].camera;if(Me){let ce=x[Me];ce||(ce=new eX,x[Me]=ce);const $e=h.getCameraImage(Me);ce.sourceTexture=$e}}}}for(let fe=0;fe<D.length;fe++){const Ee=T[fe],Be=D[fe];Ee!==null&&Be!==void 0&&Be.update(Ee,se,c||a)}ee&&ee(ae,se),se.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:se}),m=null}const oe=new nX;oe.setAnimationLoop(te),this.setAnimationLoop=function(ae){ee=ae},this.dispose=function(){}}}const dx=new D0,vSe=new Ma;function xSe(t,e){function n(A,x){A.matrixAutoUpdate===!0&&A.updateMatrix(),x.value.copy(A.matrix)}function r(A,x){x.color.getRGB(A.fogColor.value,qY(t)),x.isFog?(A.fogNear.value=x.near,A.fogFar.value=x.far):x.isFogExp2&&(A.fogDensity.value=x.density)}function i(A,x,E,w,B){x.isMeshBasicMaterial||x.isMeshLambertMaterial?s(A,x):x.isMeshToonMaterial?(s(A,x),h(A,x)):x.isMeshPhongMaterial?(s(A,x),u(A,x)):x.isMeshStandardMaterial?(s(A,x),f(A,x),x.isMeshPhysicalMaterial&&p(A,x,B)):x.isMeshMatcapMaterial?(s(A,x),m(A,x)):x.isMeshDepthMaterial?s(A,x):x.isMeshDistanceMaterial?(s(A,x),v(A,x)):x.isMeshNormalMaterial?s(A,x):x.isLineBasicMaterial?(a(A,x),x.isLineDashedMaterial&&o(A,x)):x.isPointsMaterial?l(A,x,E,w):x.isSpriteMaterial?c(A,x):x.isShadowMaterial?(A.color.value.copy(x.color),A.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function s(A,x){A.opacity.value=x.opacity,x.color&&A.diffuse.value.copy(x.color),x.emissive&&A.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(A.map.value=x.map,n(x.map,A.mapTransform)),x.alphaMap&&(A.alphaMap.value=x.alphaMap,n(x.alphaMap,A.alphaMapTransform)),x.bumpMap&&(A.bumpMap.value=x.bumpMap,n(x.bumpMap,A.bumpMapTransform),A.bumpScale.value=x.bumpScale,x.side===ld&&(A.bumpScale.value*=-1)),x.normalMap&&(A.normalMap.value=x.normalMap,n(x.normalMap,A.normalMapTransform),A.normalScale.value.copy(x.normalScale),x.side===ld&&A.normalScale.value.negate()),x.displacementMap&&(A.displacementMap.value=x.displacementMap,n(x.displacementMap,A.displacementMapTransform),A.displacementScale.value=x.displacementScale,A.displacementBias.value=x.displacementBias),x.emissiveMap&&(A.emissiveMap.value=x.emissiveMap,n(x.emissiveMap,A.emissiveMapTransform)),x.specularMap&&(A.specularMap.value=x.specularMap,n(x.specularMap,A.specularMapTransform)),x.alphaTest>0&&(A.alphaTest.value=x.alphaTest);const E=e.get(x),w=E.envMap,B=E.envMapRotation;w&&(A.envMap.value=w,dx.copy(B),dx.x*=-1,dx.y*=-1,dx.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(dx.y*=-1,dx.z*=-1),A.envMapRotation.value.setFromMatrix4(vSe.makeRotationFromEuler(dx)),A.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,A.reflectivity.value=x.reflectivity,A.ior.value=x.ior,A.refractionRatio.value=x.refractionRatio),x.lightMap&&(A.lightMap.value=x.lightMap,A.lightMapIntensity.value=x.lightMapIntensity,n(x.lightMap,A.lightMapTransform)),x.aoMap&&(A.aoMap.value=x.aoMap,A.aoMapIntensity.value=x.aoMapIntensity,n(x.aoMap,A.aoMapTransform))}function a(A,x){A.diffuse.value.copy(x.color),A.opacity.value=x.opacity,x.map&&(A.map.value=x.map,n(x.map,A.mapTransform))}function o(A,x){A.dashSize.value=x.dashSize,A.totalSize.value=x.dashSize+x.gapSize,A.scale.value=x.scale}function l(A,x,E,w){A.diffuse.value.copy(x.color),A.opacity.value=x.opacity,A.size.value=x.size*E,A.scale.value=w*.5,x.map&&(A.map.value=x.map,n(x.map,A.uvTransform)),x.alphaMap&&(A.alphaMap.value=x.alphaMap,n(x.alphaMap,A.alphaMapTransform)),x.alphaTest>0&&(A.alphaTest.value=x.alphaTest)}function c(A,x){A.diffuse.value.copy(x.color),A.opacity.value=x.opacity,A.rotation.value=x.rotation,x.map&&(A.map.value=x.map,n(x.map,A.mapTransform)),x.alphaMap&&(A.alphaMap.value=x.alphaMap,n(x.alphaMap,A.alphaMapTransform)),x.alphaTest>0&&(A.alphaTest.value=x.alphaTest)}function u(A,x){A.specular.value.copy(x.specular),A.shininess.value=Math.max(x.shininess,1e-4)}function h(A,x){x.gradientMap&&(A.gradientMap.value=x.gradientMap)}function f(A,x){A.metalness.value=x.metalness,x.metalnessMap&&(A.metalnessMap.value=x.metalnessMap,n(x.metalnessMap,A.metalnessMapTransform)),A.roughness.value=x.roughness,x.roughnessMap&&(A.roughnessMap.value=x.roughnessMap,n(x.roughnessMap,A.roughnessMapTransform)),x.envMap&&(A.envMapIntensity.value=x.envMapIntensity)}function p(A,x,E){A.ior.value=x.ior,x.sheen>0&&(A.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),A.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(A.sheenColorMap.value=x.sheenColorMap,n(x.sheenColorMap,A.sheenColorMapTransform)),x.sheenRoughnessMap&&(A.sheenRoughnessMap.value=x.sheenRoughnessMap,n(x.sheenRoughnessMap,A.sheenRoughnessMapTransform))),x.clearcoat>0&&(A.clearcoat.value=x.clearcoat,A.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(A.clearcoatMap.value=x.clearcoatMap,n(x.clearcoatMap,A.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(A.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,n(x.clearcoatRoughnessMap,A.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(A.clearcoatNormalMap.value=x.clearcoatNormalMap,n(x.clearcoatNormalMap,A.clearcoatNormalMapTransform),A.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===ld&&A.clearcoatNormalScale.value.negate())),x.dispersion>0&&(A.dispersion.value=x.dispersion),x.iridescence>0&&(A.iridescence.value=x.iridescence,A.iridescenceIOR.value=x.iridescenceIOR,A.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],A.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(A.iridescenceMap.value=x.iridescenceMap,n(x.iridescenceMap,A.iridescenceMapTransform)),x.iridescenceThicknessMap&&(A.iridescenceThicknessMap.value=x.iridescenceThicknessMap,n(x.iridescenceThicknessMap,A.iridescenceThicknessMapTransform))),x.transmission>0&&(A.transmission.value=x.transmission,A.transmissionSamplerMap.value=E.texture,A.transmissionSamplerSize.value.set(E.width,E.height),x.transmissionMap&&(A.transmissionMap.value=x.transmissionMap,n(x.transmissionMap,A.transmissionMapTransform)),A.thickness.value=x.thickness,x.thicknessMap&&(A.thicknessMap.value=x.thicknessMap,n(x.thicknessMap,A.thicknessMapTransform)),A.attenuationDistance.value=x.attenuationDistance,A.attenuationColor.value.copy(x.attenuationColor)),x.anisotropy>0&&(A.anisotropyVector.value.set(x.anisotropy*Math.cos(x.anisotropyRotation),x.anisotropy*Math.sin(x.anisotropyRotation)),x.anisotropyMap&&(A.anisotropyMap.value=x.anisotropyMap,n(x.anisotropyMap,A.anisotropyMapTransform))),A.specularIntensity.value=x.specularIntensity,A.specularColor.value.copy(x.specularColor),x.specularColorMap&&(A.specularColorMap.value=x.specularColorMap,n(x.specularColorMap,A.specularColorMapTransform)),x.specularIntensityMap&&(A.specularIntensityMap.value=x.specularIntensityMap,n(x.specularIntensityMap,A.specularIntensityMapTransform))}function m(A,x){x.matcap&&(A.matcap.value=x.matcap)}function v(A,x){const E=e.get(x).light;A.referencePosition.value.setFromMatrixPosition(E.matrixWorld),A.nearDistance.value=E.shadow.camera.near,A.farDistance.value=E.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function bSe(t,e,n,r){let i={},s={},a=[];const o=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(E,w){const B=w.program;r.uniformBlockBinding(E,B)}function c(E,w){let B=i[E.id];B===void 0&&(m(E),B=u(E),i[E.id]=B,E.addEventListener("dispose",A));const D=w.program;r.updateUBOMapping(E,D);const T=e.render.frame;s[E.id]!==T&&(f(E),s[E.id]=T)}function u(E){const w=h();E.__bindingPointIndex=w;const B=t.createBuffer(),D=E.__size,T=E.usage;return t.bindBuffer(t.UNIFORM_BUFFER,B),t.bufferData(t.UNIFORM_BUFFER,D,T),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,w,B),B}function h(){for(let E=0;E<o;E++)if(a.indexOf(E)===-1)return a.push(E),E;return eo("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(E){const w=i[E.id],B=E.uniforms,D=E.__cache;t.bindBuffer(t.UNIFORM_BUFFER,w);for(let T=0,M=B.length;T<M;T++){const R=Array.isArray(B[T])?B[T]:[B[T]];for(let k=0,L=R.length;k<L;k++){const F=R[k];if(p(F,T,k,D)===!0){const z=F.__offset,G=Array.isArray(F.value)?F.value:[F.value];let V=0;for(let q=0;q<G.length;q++){const O=G[q],H=v(O);typeof O=="number"||typeof O=="boolean"?(F.__data[0]=O,t.bufferSubData(t.UNIFORM_BUFFER,z+V,F.__data)):O.isMatrix3?(F.__data[0]=O.elements[0],F.__data[1]=O.elements[1],F.__data[2]=O.elements[2],F.__data[3]=0,F.__data[4]=O.elements[3],F.__data[5]=O.elements[4],F.__data[6]=O.elements[5],F.__data[7]=0,F.__data[8]=O.elements[6],F.__data[9]=O.elements[7],F.__data[10]=O.elements[8],F.__data[11]=0):(O.toArray(F.__data,V),V+=H.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,z,F.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function p(E,w,B,D){const T=E.value,M=w+"_"+B;if(D[M]===void 0)return typeof T=="number"||typeof T=="boolean"?D[M]=T:D[M]=T.clone(),!0;{const R=D[M];if(typeof T=="number"||typeof T=="boolean"){if(R!==T)return D[M]=T,!0}else if(R.equals(T)===!1)return R.copy(T),!0}return!1}function m(E){const w=E.uniforms;let B=0;const D=16;for(let M=0,R=w.length;M<R;M++){const k=Array.isArray(w[M])?w[M]:[w[M]];for(let L=0,F=k.length;L<F;L++){const z=k[L],G=Array.isArray(z.value)?z.value:[z.value];for(let V=0,q=G.length;V<q;V++){const O=G[V],H=v(O),K=B%D,X=K%H.boundary,re=K+X;B+=X,re!==0&&D-re<H.storage&&(B+=D-re),z.__data=new Float32Array(H.storage/Float32Array.BYTES_PER_ELEMENT),z.__offset=B,B+=H.storage}}}const T=B%D;return T>0&&(B+=D-T),E.__size=B,E.__cache={},this}function v(E){const w={boundary:0,storage:0};return typeof E=="number"||typeof E=="boolean"?(w.boundary=4,w.storage=4):E.isVector2?(w.boundary=8,w.storage=8):E.isVector3||E.isColor?(w.boundary=16,w.storage=12):E.isVector4?(w.boundary=16,w.storage=16):E.isMatrix3?(w.boundary=48,w.storage=48):E.isMatrix4?(w.boundary=64,w.storage=64):E.isTexture?Or("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Or("WebGLRenderer: Unsupported uniform value type.",E),w}function A(E){const w=E.target;w.removeEventListener("dispose",A);const B=a.indexOf(w.__bindingPointIndex);a.splice(B,1),t.deleteBuffer(i[w.id]),delete i[w.id],delete s[w.id]}function x(){for(const E in i)t.deleteBuffer(i[E]);a=[],i={},s={}}return{bind:l,update:c,dispose:x}}const CSe=new Uint16Array([11481,15204,11534,15171,11808,15015,12385,14843,12894,14716,13396,14600,13693,14483,13976,14366,14237,14171,14405,13961,14511,13770,14605,13598,14687,13444,14760,13305,14822,13066,14876,12857,14923,12675,14963,12517,14997,12379,15025,12230,15049,12023,15070,11843,15086,11687,15100,11551,15111,11433,15120,11330,15127,11217,15132,11060,15135,10922,15138,10801,15139,10695,15139,10600,13012,14923,13020,14917,13064,14886,13176,14800,13349,14666,13513,14526,13724,14398,13960,14230,14200,14020,14383,13827,14488,13651,14583,13491,14667,13348,14740,13132,14803,12908,14856,12713,14901,12542,14938,12394,14968,12241,14992,12017,15010,11822,15024,11654,15034,11507,15041,11380,15044,11269,15044,11081,15042,10913,15037,10764,15031,10635,15023,10520,15014,10419,15003,10330,13657,14676,13658,14673,13670,14660,13698,14622,13750,14547,13834,14442,13956,14317,14112,14093,14291,13889,14407,13704,14499,13538,14586,13389,14664,13201,14733,12966,14792,12758,14842,12577,14882,12418,14915,12272,14940,12033,14959,11826,14972,11646,14980,11490,14983,11355,14983,11212,14979,11008,14971,10830,14961,10675,14950,10540,14936,10420,14923,10315,14909,10204,14894,10041,14089,14460,14090,14459,14096,14452,14112,14431,14141,14388,14186,14305,14252,14130,14341,13941,14399,13756,14467,13585,14539,13430,14610,13272,14677,13026,14737,12808,14790,12617,14833,12449,14869,12303,14896,12065,14916,11845,14929,11655,14937,11490,14939,11347,14936,11184,14930,10970,14921,10783,14912,10621,14900,10480,14885,10356,14867,10247,14848,10062,14827,9894,14805,9745,14400,14208,14400,14206,14402,14198,14406,14174,14415,14122,14427,14035,14444,13913,14469,13767,14504,13613,14548,13463,14598,13324,14651,13082,14704,12858,14752,12658,14795,12483,14831,12330,14860,12106,14881,11875,14895,11675,14903,11501,14905,11351,14903,11178,14900,10953,14892,10757,14880,10589,14865,10442,14847,10313,14827,10162,14805,9965,14782,9792,14757,9642,14731,9507,14562,13883,14562,13883,14563,13877,14566,13862,14570,13830,14576,13773,14584,13689,14595,13582,14613,13461,14637,13336,14668,13120,14704,12897,14741,12695,14776,12516,14808,12358,14835,12150,14856,11910,14870,11701,14878,11519,14882,11361,14884,11187,14880,10951,14871,10748,14858,10572,14842,10418,14823,10286,14801,10099,14777,9897,14751,9722,14725,9567,14696,9430,14666,9309,14702,13604,14702,13604,14702,13600,14703,13591,14705,13570,14707,13533,14709,13477,14712,13400,14718,13305,14727,13106,14743,12907,14762,12716,14784,12539,14807,12380,14827,12190,14844,11943,14855,11727,14863,11539,14870,11376,14871,11204,14868,10960,14858,10748,14845,10565,14829,10406,14809,10269,14786,10058,14761,9852,14734,9671,14705,9512,14674,9374,14641,9253,14608,9076,14821,13366,14821,13365,14821,13364,14821,13358,14821,13344,14821,13320,14819,13252,14817,13145,14815,13011,14814,12858,14817,12698,14823,12539,14832,12389,14841,12214,14850,11968,14856,11750,14861,11558,14866,11390,14867,11226,14862,10972,14853,10754,14840,10565,14823,10401,14803,10259,14780,10032,14754,9820,14725,9635,14694,9473,14661,9333,14627,9203,14593,8988,14557,8798,14923,13014,14922,13014,14922,13012,14922,13004,14920,12987,14919,12957,14915,12907,14909,12834,14902,12738,14894,12623,14888,12498,14883,12370,14880,12203,14878,11970,14875,11759,14873,11569,14874,11401,14872,11243,14865,10986,14855,10762,14842,10568,14825,10401,14804,10255,14781,10017,14754,9799,14725,9611,14692,9445,14658,9301,14623,9139,14587,8920,14548,8729,14509,8562,15008,12672,15008,12672,15008,12671,15007,12667,15005,12656,15001,12637,14997,12605,14989,12556,14978,12490,14966,12407,14953,12313,14940,12136,14927,11934,14914,11742,14903,11563,14896,11401,14889,11247,14879,10992,14866,10767,14851,10570,14833,10400,14812,10252,14789,10007,14761,9784,14731,9592,14698,9424,14663,9279,14627,9088,14588,8868,14548,8676,14508,8508,14467,8360,15080,12386,15080,12386,15079,12385,15078,12383,15076,12378,15072,12367,15066,12347,15057,12315,15045,12253,15030,12138,15012,11998,14993,11845,14972,11685,14951,11530,14935,11383,14920,11228,14904,10981,14887,10762,14870,10567,14850,10397,14827,10248,14803,9997,14774,9771,14743,9578,14710,9407,14674,9259,14637,9048,14596,8826,14555,8632,14514,8464,14471,8317,14427,8182,15139,12008,15139,12008,15138,12008,15137,12007,15135,12003,15130,11990,15124,11969,15115,11929,15102,11872,15086,11794,15064,11693,15041,11581,15013,11459,14987,11336,14966,11170,14944,10944,14921,10738,14898,10552,14875,10387,14850,10239,14824,9983,14794,9758,14762,9563,14728,9392,14692,9244,14653,9014,14611,8791,14569,8597,14526,8427,14481,8281,14436,8110,14391,7885,15188,11617,15188,11617,15187,11617,15186,11618,15183,11617,15179,11612,15173,11601,15163,11581,15150,11546,15133,11495,15110,11427,15083,11346,15051,11246,15024,11057,14996,10868,14967,10687,14938,10517,14911,10362,14882,10206,14853,9956,14821,9737,14787,9543,14752,9375,14715,9228,14675,8980,14632,8760,14589,8565,14544,8395,14498,8248,14451,8049,14404,7824,14357,7630,15228,11298,15228,11298,15227,11299,15226,11301,15223,11303,15219,11302,15213,11299,15204,11290,15191,11271,15174,11217,15150,11129,15119,11015,15087,10886,15057,10744,15024,10599,14990,10455,14957,10318,14924,10143,14891,9911,14856,9701,14820,9516,14782,9352,14744,9200,14703,8946,14659,8725,14615,8533,14568,8366,14521,8220,14472,7992,14423,7770,14374,7578,14315,7408,15260,10819,15260,10819,15259,10822,15258,10826,15256,10832,15251,10836,15246,10841,15237,10838,15225,10821,15207,10788,15183,10734,15151,10660,15120,10571,15087,10469,15049,10359,15012,10249,14974,10041,14937,9837,14900,9647,14860,9475,14820,9320,14779,9147,14736,8902,14691,8688,14646,8499,14598,8335,14549,8189,14499,7940,14448,7720,14397,7529,14347,7363,14256,7218,15285,10410,15285,10411,15285,10413,15284,10418,15282,10425,15278,10434,15272,10442,15264,10449,15252,10445,15235,10433,15210,10403,15179,10358,15149,10301,15113,10218,15073,10059,15033,9894,14991,9726,14951,9565,14909,9413,14865,9273,14822,9073,14777,8845,14730,8641,14682,8459,14633,8300,14583,8129,14531,7883,14479,7670,14426,7482,14373,7321,14305,7176,14201,6939,15305,9939,15305,9940,15305,9945,15304,9955,15302,9967,15298,9989,15293,10010,15286,10033,15274,10044,15258,10045,15233,10022,15205,9975,15174,9903,15136,9808,15095,9697,15053,9578,15009,9451,14965,9327,14918,9198,14871,8973,14825,8766,14775,8579,14725,8408,14675,8259,14622,8058,14569,7821,14515,7615,14460,7435,14405,7276,14350,7108,14256,6866,14149,6653,15321,9444,15321,9445,15321,9448,15320,9458,15317,9470,15314,9490,15310,9515,15302,9540,15292,9562,15276,9579,15251,9577,15226,9559,15195,9519,15156,9463,15116,9389,15071,9304,15025,9208,14978,9023,14927,8838,14878,8661,14827,8496,14774,8344,14722,8206,14667,7973,14612,7749,14556,7555,14499,7382,14443,7229,14385,7025,14322,6791,14210,6588,14100,6409,15333,8920,15333,8921,15332,8927,15332,8943,15329,8965,15326,9002,15322,9048,15316,9106,15307,9162,15291,9204,15267,9221,15244,9221,15212,9196,15175,9134,15133,9043,15088,8930,15040,8801,14990,8665,14938,8526,14886,8391,14830,8261,14775,8087,14719,7866,14661,7664,14603,7482,14544,7322,14485,7178,14426,6936,14367,6713,14281,6517,14166,6348,14054,6198,15341,8360,15341,8361,15341,8366,15341,8379,15339,8399,15336,8431,15332,8473,15326,8527,15318,8585,15302,8632,15281,8670,15258,8690,15227,8690,15191,8664,15149,8612,15104,8543,15055,8456,15001,8360,14948,8259,14892,8122,14834,7923,14776,7734,14716,7558,14656,7397,14595,7250,14534,7070,14472,6835,14410,6628,14350,6443,14243,6283,14125,6135,14010,5889,15348,7715,15348,7717,15348,7725,15347,7745,15345,7780,15343,7836,15339,7905,15334,8e3,15326,8103,15310,8193,15293,8239,15270,8270,15240,8287,15204,8283,15163,8260,15118,8223,15067,8143,15014,8014,14958,7873,14899,7723,14839,7573,14778,7430,14715,7293,14652,7164,14588,6931,14524,6720,14460,6531,14396,6362,14330,6210,14207,6015,14086,5781,13969,5576,15352,7114,15352,7116,15352,7128,15352,7159,15350,7195,15348,7237,15345,7299,15340,7374,15332,7457,15317,7544,15301,7633,15280,7703,15251,7754,15216,7775,15176,7767,15131,7733,15079,7670,15026,7588,14967,7492,14906,7387,14844,7278,14779,7171,14714,6965,14648,6770,14581,6587,14515,6420,14448,6269,14382,6123,14299,5881,14172,5665,14049,5477,13929,5310,15355,6329,15355,6330,15355,6339,15355,6362,15353,6410,15351,6472,15349,6572,15344,6688,15337,6835,15323,6985,15309,7142,15287,7220,15260,7277,15226,7310,15188,7326,15142,7318,15090,7285,15036,7239,14976,7177,14914,7045,14849,6892,14782,6736,14714,6581,14645,6433,14576,6293,14506,6164,14438,5946,14369,5733,14270,5540,14140,5369,14014,5216,13892,5043,15357,5483,15357,5484,15357,5496,15357,5528,15356,5597,15354,5692,15351,5835,15347,6011,15339,6195,15328,6317,15314,6446,15293,6566,15268,6668,15235,6746,15197,6796,15152,6811,15101,6790,15046,6748,14985,6673,14921,6583,14854,6479,14785,6371,14714,6259,14643,6149,14571,5946,14499,5750,14428,5567,14358,5401,14242,5250,14109,5111,13980,4870,13856,4657,15359,4555,15359,4557,15358,4573,15358,4633,15357,4715,15355,4841,15353,5061,15349,5216,15342,5391,15331,5577,15318,5770,15299,5967,15274,6150,15243,6223,15206,6280,15161,6310,15111,6317,15055,6300,14994,6262,14928,6208,14860,6141,14788,5994,14715,5838,14641,5684,14566,5529,14492,5384,14418,5247,14346,5121,14216,4892,14079,4682,13948,4496,13822,4330,15359,3498,15359,3501,15359,3520,15359,3598,15358,3719,15356,3860,15355,4137,15351,4305,15344,4563,15334,4809,15321,5116,15303,5273,15280,5418,15250,5547,15214,5653,15170,5722,15120,5761,15064,5763,15002,5733,14935,5673,14865,5597,14792,5504,14716,5400,14640,5294,14563,5185,14486,5041,14410,4841,14335,4655,14191,4482,14051,4325,13918,4183,13790,4012,15360,2282,15360,2285,15360,2306,15360,2401,15359,2547,15357,2748,15355,3103,15352,3349,15345,3675,15336,4020,15324,4272,15307,4496,15285,4716,15255,4908,15220,5086,15178,5170,15128,5214,15072,5234,15010,5231,14943,5206,14871,5166,14796,5102,14718,4971,14639,4833,14559,4687,14480,4541,14402,4401,14315,4268,14167,4142,14025,3958,13888,3747,13759,3556,15360,923,15360,925,15360,946,15360,1052,15359,1214,15357,1494,15356,1892,15352,2274,15346,2663,15338,3099,15326,3393,15309,3679,15288,3980,15260,4183,15226,4325,15185,4437,15136,4517,15080,4570,15018,4591,14950,4581,14877,4545,14800,4485,14720,4411,14638,4325,14556,4231,14475,4136,14395,3988,14297,3803,14145,3628,13999,3465,13861,3314,13729,3177,15360,263,15360,264,15360,272,15360,325,15359,407,15358,548,15356,780,15352,1144,15347,1580,15339,2099,15328,2425,15312,2795,15292,3133,15264,3329,15232,3517,15191,3689,15143,3819,15088,3923,15025,3978,14956,3999,14882,3979,14804,3931,14722,3855,14639,3756,14554,3645,14470,3529,14388,3409,14279,3289,14124,3173,13975,3055,13834,2848,13701,2658,15360,49,15360,49,15360,52,15360,75,15359,111,15358,201,15356,283,15353,519,15348,726,15340,1045,15329,1415,15314,1795,15295,2173,15269,2410,15237,2649,15197,2866,15150,3054,15095,3140,15032,3196,14963,3228,14888,3236,14808,3224,14725,3191,14639,3146,14553,3088,14466,2976,14382,2836,14262,2692,14103,2549,13952,2409,13808,2278,13674,2154,15360,4,15360,4,15360,4,15360,13,15359,33,15358,59,15357,112,15353,199,15348,302,15341,456,15331,628,15316,827,15297,1082,15272,1332,15241,1601,15202,1851,15156,2069,15101,2172,15039,2256,14970,2314,14894,2348,14813,2358,14728,2344,14640,2311,14551,2263,14463,2203,14376,2133,14247,2059,14084,1915,13930,1761,13784,1609,13648,1464,15360,0,15360,0,15360,0,15360,3,15359,18,15358,26,15357,53,15354,80,15348,97,15341,165,15332,238,15318,326,15299,427,15275,529,15245,654,15207,771,15161,885,15108,994,15046,1089,14976,1170,14900,1229,14817,1266,14731,1284,14641,1282,14550,1260,14460,1223,14370,1174,14232,1116,14066,1050,13909,981,13761,910,13623,839]);let Um=null;function ESe(){return Um===null&&(Um=new X8(CSe,32,32,G8,af),Um.minFilter=_l,Um.magFilter=_l,Um.wrapS=f0,Um.wrapT=f0,Um.generateMipmaps=!1,Um.needsUpdate=!0),Um}class bI{constructor(e={}){const{canvas:n=nxe(),context:r=null,depth:i=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1,reversedDepthBuffer:f=!1}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=a;const m=new Set([W8,V8,H8]),v=new Set([M0,yb,E_,S_,$8,Q8]),A=new Uint32Array(4),x=new Int32Array(4);let E=null,w=null;const B=[],D=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Iy,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const T=this;let M=!1;this._outputColorSpace=Jh;let R=0,k=0,L=null,F=-1,z=null;const G=new to,V=new to;let q=null;const O=new Gr(0);let H=0,K=n.width,X=n.height,re=1,J=null,Z=null;const ee=new to(0,0,K,X),te=new to(0,0,K,X);let oe=!1;const ae=new JY;let se=!1,fe=!1;const Ee=new Ma,Be=new mt,_e=new to,Ce={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Se=!1;function Me(){return L===null?re:1}let ce=r;function $e(me,Ge){return n.getContext(me,Ge)}try{const me={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${O8}`),n.addEventListener("webglcontextlost",It,!1),n.addEventListener("webglcontextrestored",Ct,!1),n.addEventListener("webglcontextcreationerror",ln,!1),ce===null){const Ge="webgl2";if(ce=$e(Ge,me),ce===null)throw $e(Ge)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(me){throw me("WebGLRenderer: "+me.message),me}let qe,ft,Ie,ht,Ue,xt,ve,ue,ke,He,Qe,Ke,jt,St,Zt,Bt,at,pt,Vt,qt,Wt,gn,Ne,Ht;function Qt(){qe=new R1e(ce),qe.init(),gn=new pSe(ce,qe),ft=new E1e(ce,qe,e,gn),Ie=new hSe(ce,qe),ft.reversedDepthBuffer&&f&&Ie.buffers.depth.setReversed(!0),ht=new N1e(ce),Ue=new ZEe,xt=new fSe(ce,qe,Ie,Ue,ft,gn,ht),ve=new w1e(T),ue=new D1e(T),ke=new Oxe(ce),Ne=new b1e(ce,ke),He=new P1e(ce,ke,ht,Ne),Qe=new F1e(ce,He,ke,ht),Vt=new L1e(ce,ft,xt),Bt=new S1e(Ue),Ke=new JEe(T,ve,ue,qe,ft,Ne,Bt),jt=new xSe(T,Ue),St=new tSe,Zt=new oSe(qe),pt=new x1e(T,ve,ue,Ie,Qe,p,l),at=new uSe(T,Qe,ft),Ht=new bSe(ce,ht,ft,Ie),qt=new C1e(ce,qe,ht),Wt=new k1e(ce,qe,ht),ht.programs=Ke.programs,T.capabilities=ft,T.extensions=qe,T.properties=Ue,T.renderLists=St,T.shadowMap=at,T.state=Ie,T.info=ht}Qt();const $t=new ySe(T,ce);this.xr=$t,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const me=qe.get("WEBGL_lose_context");me&&me.loseContext()},this.forceContextRestore=function(){const me=qe.get("WEBGL_lose_context");me&&me.restoreContext()},this.getPixelRatio=function(){return re},this.setPixelRatio=function(me){me!==void 0&&(re=me,this.setSize(K,X,!1))},this.getSize=function(me){return me.set(K,X)},this.setSize=function(me,Ge,rt=!0){if($t.isPresenting){Or("WebGLRenderer: Can't change size while VR device is presenting.");return}K=me,X=Ge,n.width=Math.floor(me*re),n.height=Math.floor(Ge*re),rt===!0&&(n.style.width=me+"px",n.style.height=Ge+"px"),this.setViewport(0,0,me,Ge)},this.getDrawingBufferSize=function(me){return me.set(K*re,X*re).floor()},this.setDrawingBufferSize=function(me,Ge,rt){K=me,X=Ge,re=rt,n.width=Math.floor(me*rt),n.height=Math.floor(Ge*rt),this.setViewport(0,0,me,Ge)},this.getCurrentViewport=function(me){return me.copy(G)},this.getViewport=function(me){return me.copy(ee)},this.setViewport=function(me,Ge,rt,nt){me.isVector4?ee.set(me.x,me.y,me.z,me.w):ee.set(me,Ge,rt,nt),Ie.viewport(G.copy(ee).multiplyScalar(re).round())},this.getScissor=function(me){return me.copy(te)},this.setScissor=function(me,Ge,rt,nt){me.isVector4?te.set(me.x,me.y,me.z,me.w):te.set(me,Ge,rt,nt),Ie.scissor(V.copy(te).multiplyScalar(re).round())},this.getScissorTest=function(){return oe},this.setScissorTest=function(me){Ie.setScissorTest(oe=me)},this.setOpaqueSort=function(me){J=me},this.setTransparentSort=function(me){Z=me},this.getClearColor=function(me){return me.copy(pt.getClearColor())},this.setClearColor=function(){pt.setClearColor(...arguments)},this.getClearAlpha=function(){return pt.getClearAlpha()},this.setClearAlpha=function(){pt.setClearAlpha(...arguments)},this.clear=function(me=!0,Ge=!0,rt=!0){let nt=0;if(me){let We=!1;if(L!==null){const Kt=L.texture.format;We=m.has(Kt)}if(We){const Kt=L.texture.type,nn=v.has(Kt),un=pt.getClearColor(),dn=pt.getClearAlpha(),Bn=un.r,En=un.g,Sn=un.b;nn?(A[0]=Bn,A[1]=En,A[2]=Sn,A[3]=dn,ce.clearBufferuiv(ce.COLOR,0,A)):(x[0]=Bn,x[1]=En,x[2]=Sn,x[3]=dn,ce.clearBufferiv(ce.COLOR,0,x))}else nt|=ce.COLOR_BUFFER_BIT}Ge&&(nt|=ce.DEPTH_BUFFER_BIT),rt&&(nt|=ce.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ce.clear(nt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",It,!1),n.removeEventListener("webglcontextrestored",Ct,!1),n.removeEventListener("webglcontextcreationerror",ln,!1),pt.dispose(),St.dispose(),Zt.dispose(),Ue.dispose(),ve.dispose(),ue.dispose(),Qe.dispose(),Ne.dispose(),Ht.dispose(),Ke.dispose(),$t.dispose(),$t.removeEventListener("sessionstart",tn),$t.removeEventListener("sessionend",cn),Zn.stop()};function It(me){me.preventDefault(),cz("WebGLRenderer: Context Lost."),M=!0}function Ct(){cz("WebGLRenderer: Context Restored."),M=!1;const me=ht.autoReset,Ge=at.enabled,rt=at.autoUpdate,nt=at.needsUpdate,We=at.type;Qt(),ht.autoReset=me,at.enabled=Ge,at.autoUpdate=rt,at.needsUpdate=nt,at.type=We}function ln(me){eo("WebGLRenderer: A WebGL context could not be created. Reason: ",me.statusMessage)}function lt(me){const Ge=me.target;Ge.removeEventListener("dispose",lt),_t(Ge)}function _t(me){Pt(me),Ue.remove(me)}function Pt(me){const Ge=Ue.get(me).programs;Ge!==void 0&&(Ge.forEach(function(rt){Ke.releaseProgram(rt)}),me.isShaderMaterial&&Ke.releaseShaderCache(me))}this.renderBufferDirect=function(me,Ge,rt,nt,We,Kt){Ge===null&&(Ge=Ce);const nn=We.isMesh&&We.matrixWorld.determinant()<0,un=Nc(me,Ge,rt,nt,We);Ie.setMaterial(nt,nn);let dn=rt.index,Bn=1;if(nt.wireframe===!0){if(dn=He.getWireframeAttribute(rt),dn===void 0)return;Bn=2}const En=rt.drawRange,Sn=rt.attributes.position;let ir=En.start*Bn,he=(En.start+En.count)*Bn;Kt!==null&&(ir=Math.max(ir,Kt.start*Bn),he=Math.min(he,(Kt.start+Kt.count)*Bn)),dn!==null?(ir=Math.max(ir,0),he=Math.min(he,dn.count)):Sn!=null&&(ir=Math.max(ir,0),he=Math.min(he,Sn.count));const pe=he-ir;if(pe<0||pe===1/0)return;Ne.setup(We,nt,un,rt,dn);let Te,Le=qt;if(dn!==null&&(Te=ke.get(dn),Le=Wt,Le.setIndex(Te)),We.isMesh)nt.wireframe===!0?(Ie.setLineWidth(nt.wireframeLinewidth*Me()),Le.setMode(ce.LINES)):Le.setMode(ce.TRIANGLES);else if(We.isLine){let Fe=nt.linewidth;Fe===void 0&&(Fe=1),Ie.setLineWidth(Fe*Me()),We.isLineSegments?Le.setMode(ce.LINES):We.isLineLoop?Le.setMode(ce.LINE_LOOP):Le.setMode(ce.LINE_STRIP)}else We.isPoints?Le.setMode(ce.POINTS):We.isSprite&&Le.setMode(ce.TRIANGLES);if(We.isBatchedMesh)if(We._multiDrawInstances!==null)I_("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Le.renderMultiDrawInstances(We._multiDrawStarts,We._multiDrawCounts,We._multiDrawCount,We._multiDrawInstances);else if(qe.get("WEBGL_multi_draw"))Le.renderMultiDraw(We._multiDrawStarts,We._multiDrawCounts,We._multiDrawCount);else{const Fe=We._multiDrawStarts,ct=We._multiDrawCounts,vt=We._multiDrawCount,Tt=dn?ke.get(dn).bytesPerElement:1,Xt=Ue.get(nt).currentProgram.getUniforms();for(let Dt=0;Dt<vt;Dt++)Xt.setValue(ce,"_gl_DrawID",Dt),Le.render(Fe[Dt]/Tt,ct[Dt])}else if(We.isInstancedMesh)Le.renderInstances(ir,pe,We.count);else if(rt.isInstancedBufferGeometry){const Fe=rt._maxInstanceCount!==void 0?rt._maxInstanceCount:1/0,ct=Math.min(rt.instanceCount,Fe);Le.renderInstances(ir,pe,ct)}else Le.render(ir,pe)};function zt(me,Ge,rt){me.transparent===!0&&me.side===jg&&me.forceSinglePass===!1?(me.side=ld,me.needsUpdate=!0,Ii(me,Ge,rt),me.side=Ly,me.needsUpdate=!0,Ii(me,Ge,rt),me.side=jg):Ii(me,Ge,rt)}this.compile=function(me,Ge,rt=null){rt===null&&(rt=me),w=Zt.get(rt),w.init(Ge),D.push(w),rt.traverseVisible(function(We){We.isLight&&We.layers.test(Ge.layers)&&(w.pushLight(We),We.castShadow&&w.pushShadow(We))}),me!==rt&&me.traverseVisible(function(We){We.isLight&&We.layers.test(Ge.layers)&&(w.pushLight(We),We.castShadow&&w.pushShadow(We))}),w.setupLights();const nt=new Set;return me.traverse(function(We){if(!(We.isMesh||We.isPoints||We.isLine||We.isSprite))return;const Kt=We.material;if(Kt)if(Array.isArray(Kt))for(let nn=0;nn<Kt.length;nn++){const un=Kt[nn];zt(un,rt,We),nt.add(un)}else zt(Kt,rt,We),nt.add(Kt)}),w=D.pop(),nt},this.compileAsync=function(me,Ge,rt=null){const nt=this.compile(me,Ge,rt);return new Promise(We=>{function Kt(){if(nt.forEach(function(nn){Ue.get(nn).currentProgram.isReady()&&nt.delete(nn)}),nt.size===0){We(me);return}setTimeout(Kt,10)}qe.get("KHR_parallel_shader_compile")!==null?Kt():setTimeout(Kt,10)})};let Wn=null;function In(me){Wn&&Wn(me)}function tn(){Zn.stop()}function cn(){Zn.start()}const Zn=new nX;Zn.setAnimationLoop(In),typeof self<"u"&&Zn.setContext(self),this.setAnimationLoop=function(me){Wn=me,$t.setAnimationLoop(me),me===null?Zn.stop():Zn.start()},$t.addEventListener("sessionstart",tn),$t.addEventListener("sessionend",cn),this.render=function(me,Ge){if(Ge!==void 0&&Ge.isCamera!==!0){eo("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(M===!0)return;if(me.matrixWorldAutoUpdate===!0&&me.updateMatrixWorld(),Ge.parent===null&&Ge.matrixWorldAutoUpdate===!0&&Ge.updateMatrixWorld(),$t.enabled===!0&&$t.isPresenting===!0&&($t.cameraAutoUpdate===!0&&$t.updateCamera(Ge),Ge=$t.getCamera()),me.isScene===!0&&me.onBeforeRender(T,me,Ge,L),w=Zt.get(me,D.length),w.init(Ge),D.push(w),Ee.multiplyMatrices(Ge.projectionMatrix,Ge.matrixWorldInverse),ae.setFromProjectionMatrix(Ee,Og,Ge.reversedDepth),fe=this.localClippingEnabled,se=Bt.init(this.clippingPlanes,fe),E=St.get(me,B.length),E.init(),B.push(E),$t.enabled===!0&&$t.isPresenting===!0){const Kt=T.xr.getDepthSensingMesh();Kt!==null&&pr(Kt,Ge,-1/0,T.sortObjects)}pr(me,Ge,0,T.sortObjects),E.finish(),T.sortObjects===!0&&E.sort(J,Z),Se=$t.enabled===!1||$t.isPresenting===!1||$t.hasDepthSensing()===!1,Se&&pt.addToRenderList(E,me),this.info.render.frame++,se===!0&&Bt.beginShadows();const rt=w.state.shadowsArray;at.render(rt,me,Ge),se===!0&&Bt.endShadows(),this.info.autoReset===!0&&this.info.reset();const nt=E.opaque,We=E.transmissive;if(w.setupLights(),Ge.isArrayCamera){const Kt=Ge.cameras;if(We.length>0)for(let nn=0,un=Kt.length;nn<un;nn++){const dn=Kt[nn];qi(nt,We,me,dn)}Se&&pt.render(me);for(let nn=0,un=Kt.length;nn<un;nn++){const dn=Kt[nn];zr(E,me,dn,dn.viewport)}}else We.length>0&&qi(nt,We,me,Ge),Se&&pt.render(me),zr(E,me,Ge);L!==null&&k===0&&(xt.updateMultisampleRenderTarget(L),xt.updateRenderTargetMipmap(L)),me.isScene===!0&&me.onAfterRender(T,me,Ge),Ne.resetDefaultState(),F=-1,z=null,D.pop(),D.length>0?(w=D[D.length-1],se===!0&&Bt.setGlobalState(T.clippingPlanes,w.state.camera)):w=null,B.pop(),B.length>0?E=B[B.length-1]:E=null};function pr(me,Ge,rt,nt){if(me.visible===!1)return;if(me.layers.test(Ge.layers)){if(me.isGroup)rt=me.renderOrder;else if(me.isLOD)me.autoUpdate===!0&&me.update(Ge);else if(me.isLight)w.pushLight(me),me.castShadow&&w.pushShadow(me);else if(me.isSprite){if(!me.frustumCulled||ae.intersectsSprite(me)){nt&&_e.setFromMatrixPosition(me.matrixWorld).applyMatrix4(Ee);const nn=Qe.update(me),un=me.material;un.visible&&E.push(me,nn,un,rt,_e.z,null)}}else if((me.isMesh||me.isLine||me.isPoints)&&(!me.frustumCulled||ae.intersectsObject(me))){const nn=Qe.update(me),un=me.material;if(nt&&(me.boundingSphere!==void 0?(me.boundingSphere===null&&me.computeBoundingSphere(),_e.copy(me.boundingSphere.center)):(nn.boundingSphere===null&&nn.computeBoundingSphere(),_e.copy(nn.boundingSphere.center)),_e.applyMatrix4(me.matrixWorld).applyMatrix4(Ee)),Array.isArray(un)){const dn=nn.groups;for(let Bn=0,En=dn.length;Bn<En;Bn++){const Sn=dn[Bn],ir=un[Sn.materialIndex];ir&&ir.visible&&E.push(me,nn,ir,rt,_e.z,Sn)}}else un.visible&&E.push(me,nn,un,rt,_e.z,null)}}const Kt=me.children;for(let nn=0,un=Kt.length;nn<un;nn++)pr(Kt[nn],Ge,rt,nt)}function zr(me,Ge,rt,nt){const{opaque:We,transmissive:Kt,transparent:nn}=me;w.setupLightsView(rt),se===!0&&Bt.setGlobalState(T.clippingPlanes,rt),nt&&Ie.viewport(G.copy(nt)),We.length>0&&Nr(We,Ge,rt),Kt.length>0&&Nr(Kt,Ge,rt),nn.length>0&&Nr(nn,Ge,rt),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1)}function qi(me,Ge,rt,nt){if((rt.isScene===!0?rt.overrideMaterial:null)!==null)return;w.state.transmissionRenderTarget[nt.id]===void 0&&(w.state.transmissionRenderTarget[nt.id]=new Jd(1,1,{generateMipmaps:!0,type:qe.has("EXT_color_buffer_half_float")||qe.has("EXT_color_buffer_float")?af:M0,minFilter:Kx,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Li.workingColorSpace}));const Kt=w.state.transmissionRenderTarget[nt.id],nn=nt.viewport||G;Kt.setSize(nn.z*T.transmissionResolutionScale,nn.w*T.transmissionResolutionScale);const un=T.getRenderTarget(),dn=T.getActiveCubeFace(),Bn=T.getActiveMipmapLevel();T.setRenderTarget(Kt),T.getClearColor(O),H=T.getClearAlpha(),H<1&&T.setClearColor(16777215,.5),T.clear(),Se&&pt.render(rt);const En=T.toneMapping;T.toneMapping=Iy;const Sn=nt.viewport;if(nt.viewport!==void 0&&(nt.viewport=void 0),w.setupLightsView(nt),se===!0&&Bt.setGlobalState(T.clippingPlanes,nt),Nr(me,rt,nt),xt.updateMultisampleRenderTarget(Kt),xt.updateRenderTargetMipmap(Kt),qe.has("WEBGL_multisampled_render_to_texture")===!1){let ir=!1;for(let he=0,pe=Ge.length;he<pe;he++){const Te=Ge[he],{object:Le,geometry:Fe,material:ct,group:vt}=Te;if(ct.side===jg&&Le.layers.test(nt.layers)){const Tt=ct.side;ct.side=ld,ct.needsUpdate=!0,Yn(Le,rt,nt,Fe,ct,vt),ct.side=Tt,ct.needsUpdate=!0,ir=!0}}ir===!0&&(xt.updateMultisampleRenderTarget(Kt),xt.updateRenderTargetMipmap(Kt))}T.setRenderTarget(un,dn,Bn),T.setClearColor(O,H),Sn!==void 0&&(nt.viewport=Sn),T.toneMapping=En}function Nr(me,Ge,rt){const nt=Ge.isScene===!0?Ge.overrideMaterial:null;for(let We=0,Kt=me.length;We<Kt;We++){const nn=me[We],{object:un,geometry:dn,group:Bn}=nn;let En=nn.material;En.allowOverride===!0&&nt!==null&&(En=nt),un.layers.test(rt.layers)&&Yn(un,Ge,rt,dn,En,Bn)}}function Yn(me,Ge,rt,nt,We,Kt){me.onBeforeRender(T,Ge,rt,nt,We,Kt),me.modelViewMatrix.multiplyMatrices(rt.matrixWorldInverse,me.matrixWorld),me.normalMatrix.getNormalMatrix(me.modelViewMatrix),We.onBeforeRender(T,Ge,rt,nt,me,Kt),We.transparent===!0&&We.side===jg&&We.forceSinglePass===!1?(We.side=ld,We.needsUpdate=!0,T.renderBufferDirect(rt,Ge,nt,We,me,Kt),We.side=Ly,We.needsUpdate=!0,T.renderBufferDirect(rt,Ge,nt,We,me,Kt),We.side=jg):T.renderBufferDirect(rt,Ge,nt,We,me,Kt),me.onAfterRender(T,Ge,rt,nt,We,Kt)}function Ii(me,Ge,rt){Ge.isScene!==!0&&(Ge=Ce);const nt=Ue.get(me),We=w.state.lights,Kt=w.state.shadowsArray,nn=We.state.version,un=Ke.getParameters(me,We.state,Kt,Ge,rt),dn=Ke.getProgramCacheKey(un);let Bn=nt.programs;nt.environment=me.isMeshStandardMaterial?Ge.environment:null,nt.fog=Ge.fog,nt.envMap=(me.isMeshStandardMaterial?ue:ve).get(me.envMap||nt.environment),nt.envMapRotation=nt.environment!==null&&me.envMap===null?Ge.environmentRotation:me.envMapRotation,Bn===void 0&&(me.addEventListener("dispose",lt),Bn=new Map,nt.programs=Bn);let En=Bn.get(dn);if(En!==void 0){if(nt.currentProgram===En&&nt.lightsStateVersion===nn)return oo(me,un),En}else un.uniforms=Ke.getUniforms(me),me.onBeforeCompile(un,T),En=Ke.acquireProgram(un,dn),Bn.set(dn,En),nt.uniforms=un.uniforms;const Sn=nt.uniforms;return(!me.isShaderMaterial&&!me.isRawShaderMaterial||me.clipping===!0)&&(Sn.clippingPlanes=Bt.uniform),oo(me,un),nt.needsLights=Au(me),nt.lightsStateVersion=nn,nt.needsLights&&(Sn.ambientLightColor.value=We.state.ambient,Sn.lightProbe.value=We.state.probe,Sn.directionalLights.value=We.state.directional,Sn.directionalLightShadows.value=We.state.directionalShadow,Sn.spotLights.value=We.state.spot,Sn.spotLightShadows.value=We.state.spotShadow,Sn.rectAreaLights.value=We.state.rectArea,Sn.ltc_1.value=We.state.rectAreaLTC1,Sn.ltc_2.value=We.state.rectAreaLTC2,Sn.pointLights.value=We.state.point,Sn.pointLightShadows.value=We.state.pointShadow,Sn.hemisphereLights.value=We.state.hemi,Sn.directionalShadowMap.value=We.state.directionalShadowMap,Sn.directionalShadowMatrix.value=We.state.directionalShadowMatrix,Sn.spotShadowMap.value=We.state.spotShadowMap,Sn.spotLightMatrix.value=We.state.spotLightMatrix,Sn.spotLightMap.value=We.state.spotLightMap,Sn.pointShadowMap.value=We.state.pointShadowMap,Sn.pointShadowMatrix.value=We.state.pointShadowMatrix),nt.currentProgram=En,nt.uniformsList=null,En}function bs(me){if(me.uniformsList===null){const Ge=me.currentProgram.getUniforms();me.uniformsList=K3.seqWithValue(Ge.seq,me.uniforms)}return me.uniformsList}function oo(me,Ge){const rt=Ue.get(me);rt.outputColorSpace=Ge.outputColorSpace,rt.batching=Ge.batching,rt.batchingColor=Ge.batchingColor,rt.instancing=Ge.instancing,rt.instancingColor=Ge.instancingColor,rt.instancingMorph=Ge.instancingMorph,rt.skinning=Ge.skinning,rt.morphTargets=Ge.morphTargets,rt.morphNormals=Ge.morphNormals,rt.morphColors=Ge.morphColors,rt.morphTargetsCount=Ge.morphTargetsCount,rt.numClippingPlanes=Ge.numClippingPlanes,rt.numIntersection=Ge.numClipIntersection,rt.vertexAlphas=Ge.vertexAlphas,rt.vertexTangents=Ge.vertexTangents,rt.toneMapping=Ge.toneMapping}function Nc(me,Ge,rt,nt,We){Ge.isScene!==!0&&(Ge=Ce),xt.resetTextureUnits();const Kt=Ge.fog,nn=nt.isMeshStandardMaterial?Ge.environment:null,un=L===null?T.outputColorSpace:L.isXRRenderTarget===!0?L.texture.colorSpace:sE,dn=(nt.isMeshStandardMaterial?ue:ve).get(nt.envMap||nn),Bn=nt.vertexColors===!0&&!!rt.attributes.color&&rt.attributes.color.itemSize===4,En=!!rt.attributes.tangent&&(!!nt.normalMap||nt.anisotropy>0),Sn=!!rt.morphAttributes.position,ir=!!rt.morphAttributes.normal,he=!!rt.morphAttributes.color;let pe=Iy;nt.toneMapped&&(L===null||L.isXRRenderTarget===!0)&&(pe=T.toneMapping);const Te=rt.morphAttributes.position||rt.morphAttributes.normal||rt.morphAttributes.color,Le=Te!==void 0?Te.length:0,Fe=Ue.get(nt),ct=w.state.lights;if(se===!0&&(fe===!0||me!==z)){const qn=me===z&&nt.id===F;Bt.setState(nt,me,qn)}let vt=!1;nt.version===Fe.__version?(Fe.needsLights&&Fe.lightsStateVersion!==ct.state.version||Fe.outputColorSpace!==un||We.isBatchedMesh&&Fe.batching===!1||!We.isBatchedMesh&&Fe.batching===!0||We.isBatchedMesh&&Fe.batchingColor===!0&&We.colorTexture===null||We.isBatchedMesh&&Fe.batchingColor===!1&&We.colorTexture!==null||We.isInstancedMesh&&Fe.instancing===!1||!We.isInstancedMesh&&Fe.instancing===!0||We.isSkinnedMesh&&Fe.skinning===!1||!We.isSkinnedMesh&&Fe.skinning===!0||We.isInstancedMesh&&Fe.instancingColor===!0&&We.instanceColor===null||We.isInstancedMesh&&Fe.instancingColor===!1&&We.instanceColor!==null||We.isInstancedMesh&&Fe.instancingMorph===!0&&We.morphTexture===null||We.isInstancedMesh&&Fe.instancingMorph===!1&&We.morphTexture!==null||Fe.envMap!==dn||nt.fog===!0&&Fe.fog!==Kt||Fe.numClippingPlanes!==void 0&&(Fe.numClippingPlanes!==Bt.numPlanes||Fe.numIntersection!==Bt.numIntersection)||Fe.vertexAlphas!==Bn||Fe.vertexTangents!==En||Fe.morphTargets!==Sn||Fe.morphNormals!==ir||Fe.morphColors!==he||Fe.toneMapping!==pe||Fe.morphTargetsCount!==Le)&&(vt=!0):(vt=!0,Fe.__version=nt.version);let Tt=Fe.currentProgram;vt===!0&&(Tt=Ii(nt,Ge,We));let Xt=!1,Dt=!1,rn=!1;const sn=Tt.getUniforms(),Un=Fe.uniforms;if(Ie.useProgram(Tt.program)&&(Xt=!0,Dt=!0,rn=!0),nt.id!==F&&(F=nt.id,Dt=!0),Xt||z!==me){Ie.buffers.depth.getReversed()&&me.reversedDepth!==!0&&(me._reversedDepth=!0,me.updateProjectionMatrix()),sn.setValue(ce,"projectionMatrix",me.projectionMatrix),sn.setValue(ce,"viewMatrix",me.matrixWorldInverse);const Lr=sn.map.cameraPosition;Lr!==void 0&&Lr.setValue(ce,Be.setFromMatrixPosition(me.matrixWorld)),ft.logarithmicDepthBuffer&&sn.setValue(ce,"logDepthBufFC",2/(Math.log(me.far+1)/Math.LN2)),(nt.isMeshPhongMaterial||nt.isMeshToonMaterial||nt.isMeshLambertMaterial||nt.isMeshBasicMaterial||nt.isMeshStandardMaterial||nt.isShaderMaterial)&&sn.setValue(ce,"isOrthographic",me.isOrthographicCamera===!0),z!==me&&(z=me,Dt=!0,rn=!0)}if(We.isSkinnedMesh){sn.setOptional(ce,We,"bindMatrix"),sn.setOptional(ce,We,"bindMatrixInverse");const qn=We.skeleton;qn&&(qn.boneTexture===null&&qn.computeBoneTexture(),sn.setValue(ce,"boneTexture",qn.boneTexture,xt))}We.isBatchedMesh&&(sn.setOptional(ce,We,"batchingTexture"),sn.setValue(ce,"batchingTexture",We._matricesTexture,xt),sn.setOptional(ce,We,"batchingIdTexture"),sn.setValue(ce,"batchingIdTexture",We._indirectTexture,xt),sn.setOptional(ce,We,"batchingColorTexture"),We._colorsTexture!==null&&sn.setValue(ce,"batchingColorTexture",We._colorsTexture,xt));const gr=rt.morphAttributes;if((gr.position!==void 0||gr.normal!==void 0||gr.color!==void 0)&&Vt.update(We,rt,Tt),(Dt||Fe.receiveShadow!==We.receiveShadow)&&(Fe.receiveShadow=We.receiveShadow,sn.setValue(ce,"receiveShadow",We.receiveShadow)),nt.isMeshGouraudMaterial&&nt.envMap!==null&&(Un.envMap.value=dn,Un.flipEnvMap.value=dn.isCubeTexture&&dn.isRenderTargetTexture===!1?-1:1),nt.isMeshStandardMaterial&&nt.envMap===null&&Ge.environment!==null&&(Un.envMapIntensity.value=Ge.environmentIntensity),Un.dfgLUT!==void 0&&(Un.dfgLUT.value=ESe()),Dt&&(sn.setValue(ce,"toneMappingExposure",T.toneMappingExposure),Fe.needsLights&&Ad(Un,rn),Kt&&nt.fog===!0&&jt.refreshFogUniforms(Un,Kt),jt.refreshMaterialUniforms(Un,nt,re,X,w.state.transmissionRenderTarget[me.id]),K3.upload(ce,bs(Fe),Un,xt)),nt.isShaderMaterial&&nt.uniformsNeedUpdate===!0&&(K3.upload(ce,bs(Fe),Un,xt),nt.uniformsNeedUpdate=!1),nt.isSpriteMaterial&&sn.setValue(ce,"center",We.center),sn.setValue(ce,"modelViewMatrix",We.modelViewMatrix),sn.setValue(ce,"normalMatrix",We.normalMatrix),sn.setValue(ce,"modelMatrix",We.matrixWorld),nt.isShaderMaterial||nt.isRawShaderMaterial){const qn=nt.uniformsGroups;for(let Lr=0,Ui=qn.length;Lr<Ui;Lr++){const ma=qn[Lr];Ht.update(ma,Tt),Ht.bind(ma,Tt)}}return Tt}function Ad(me,Ge){me.ambientLightColor.needsUpdate=Ge,me.lightProbe.needsUpdate=Ge,me.directionalLights.needsUpdate=Ge,me.directionalLightShadows.needsUpdate=Ge,me.pointLights.needsUpdate=Ge,me.pointLightShadows.needsUpdate=Ge,me.spotLights.needsUpdate=Ge,me.spotLightShadows.needsUpdate=Ge,me.rectAreaLights.needsUpdate=Ge,me.hemisphereLights.needsUpdate=Ge}function Au(me){return me.isMeshLambertMaterial||me.isMeshToonMaterial||me.isMeshPhongMaterial||me.isMeshStandardMaterial||me.isShadowMaterial||me.isShaderMaterial&&me.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(me,Ge,rt){const nt=Ue.get(me);nt.__autoAllocateDepthBuffer=me.resolveDepthBuffer===!1,nt.__autoAllocateDepthBuffer===!1&&(nt.__useRenderToTexture=!1),Ue.get(me.texture).__webglTexture=Ge,Ue.get(me.depthTexture).__webglTexture=nt.__autoAllocateDepthBuffer?void 0:rt,nt.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(me,Ge){const rt=Ue.get(me);rt.__webglFramebuffer=Ge,rt.__useDefaultFramebuffer=Ge===void 0};const Tl=ce.createFramebuffer();this.setRenderTarget=function(me,Ge=0,rt=0){L=me,R=Ge,k=rt;let nt=!0,We=null,Kt=!1,nn=!1;if(me){const dn=Ue.get(me);if(dn.__useDefaultFramebuffer!==void 0)Ie.bindFramebuffer(ce.FRAMEBUFFER,null),nt=!1;else if(dn.__webglFramebuffer===void 0)xt.setupRenderTarget(me);else if(dn.__hasExternalTextures)xt.rebindTextures(me,Ue.get(me.texture).__webglTexture,Ue.get(me.depthTexture).__webglTexture);else if(me.depthBuffer){const Sn=me.depthTexture;if(dn.__boundDepthTexture!==Sn){if(Sn!==null&&Ue.has(Sn)&&(me.width!==Sn.image.width||me.height!==Sn.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");xt.setupDepthRenderbuffer(me)}}const Bn=me.texture;(Bn.isData3DTexture||Bn.isDataArrayTexture||Bn.isCompressedArrayTexture)&&(nn=!0);const En=Ue.get(me).__webglFramebuffer;me.isWebGLCubeRenderTarget?(Array.isArray(En[Ge])?We=En[Ge][rt]:We=En[Ge],Kt=!0):me.samples>0&&xt.useMultisampledRTT(me)===!1?We=Ue.get(me).__webglMultisampledFramebuffer:Array.isArray(En)?We=En[rt]:We=En,G.copy(me.viewport),V.copy(me.scissor),q=me.scissorTest}else G.copy(ee).multiplyScalar(re).floor(),V.copy(te).multiplyScalar(re).floor(),q=oe;if(rt!==0&&(We=Tl),Ie.bindFramebuffer(ce.FRAMEBUFFER,We)&&nt&&Ie.drawBuffers(me,We),Ie.viewport(G),Ie.scissor(V),Ie.setScissorTest(q),Kt){const dn=Ue.get(me.texture);ce.framebufferTexture2D(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,dn.__webglTexture,rt)}else if(nn){const dn=Ge;for(let Bn=0;Bn<me.textures.length;Bn++){const En=Ue.get(me.textures[Bn]);ce.framebufferTextureLayer(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0+Bn,En.__webglTexture,rt,dn)}}else if(me!==null&&rt!==0){const dn=Ue.get(me.texture);ce.framebufferTexture2D(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,dn.__webglTexture,rt)}F=-1},this.readRenderTargetPixels=function(me,Ge,rt,nt,We,Kt,nn,un=0){if(!(me&&me.isWebGLRenderTarget)){eo("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let dn=Ue.get(me).__webglFramebuffer;if(me.isWebGLCubeRenderTarget&&nn!==void 0&&(dn=dn[nn]),dn){Ie.bindFramebuffer(ce.FRAMEBUFFER,dn);try{const Bn=me.textures[un],En=Bn.format,Sn=Bn.type;if(!ft.textureFormatReadable(En)){eo("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ft.textureTypeReadable(Sn)){eo("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ge>=0&&Ge<=me.width-nt&&rt>=0&&rt<=me.height-We&&(me.textures.length>1&&ce.readBuffer(ce.COLOR_ATTACHMENT0+un),ce.readPixels(Ge,rt,nt,We,gn.convert(En),gn.convert(Sn),Kt))}finally{const Bn=L!==null?Ue.get(L).__webglFramebuffer:null;Ie.bindFramebuffer(ce.FRAMEBUFFER,Bn)}}},this.readRenderTargetPixelsAsync=async function(me,Ge,rt,nt,We,Kt,nn,un=0){if(!(me&&me.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let dn=Ue.get(me).__webglFramebuffer;if(me.isWebGLCubeRenderTarget&&nn!==void 0&&(dn=dn[nn]),dn)if(Ge>=0&&Ge<=me.width-nt&&rt>=0&&rt<=me.height-We){Ie.bindFramebuffer(ce.FRAMEBUFFER,dn);const Bn=me.textures[un],En=Bn.format,Sn=Bn.type;if(!ft.textureFormatReadable(En))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ft.textureTypeReadable(Sn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const ir=ce.createBuffer();ce.bindBuffer(ce.PIXEL_PACK_BUFFER,ir),ce.bufferData(ce.PIXEL_PACK_BUFFER,Kt.byteLength,ce.STREAM_READ),me.textures.length>1&&ce.readBuffer(ce.COLOR_ATTACHMENT0+un),ce.readPixels(Ge,rt,nt,We,gn.convert(En),gn.convert(Sn),0);const he=L!==null?Ue.get(L).__webglFramebuffer:null;Ie.bindFramebuffer(ce.FRAMEBUFFER,he);const pe=ce.fenceSync(ce.SYNC_GPU_COMMANDS_COMPLETE,0);return ce.flush(),await rxe(ce,pe,4),ce.bindBuffer(ce.PIXEL_PACK_BUFFER,ir),ce.getBufferSubData(ce.PIXEL_PACK_BUFFER,0,Kt),ce.deleteBuffer(ir),ce.deleteSync(pe),Kt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(me,Ge=null,rt=0){const nt=Math.pow(2,-rt),We=Math.floor(me.image.width*nt),Kt=Math.floor(me.image.height*nt),nn=Ge!==null?Ge.x:0,un=Ge!==null?Ge.y:0;xt.setTexture2D(me,0),ce.copyTexSubImage2D(ce.TEXTURE_2D,rt,0,0,nn,un,We,Kt),Ie.unbindTexture()};const ec=ce.createFramebuffer(),Qi=ce.createFramebuffer();this.copyTextureToTexture=function(me,Ge,rt=null,nt=null,We=0,Kt=null){Kt===null&&(We!==0?(I_("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Kt=We,We=0):Kt=0);let nn,un,dn,Bn,En,Sn,ir,he,pe;const Te=me.isCompressedTexture?me.mipmaps[Kt]:me.image;if(rt!==null)nn=rt.max.x-rt.min.x,un=rt.max.y-rt.min.y,dn=rt.isBox3?rt.max.z-rt.min.z:1,Bn=rt.min.x,En=rt.min.y,Sn=rt.isBox3?rt.min.z:0;else{const gr=Math.pow(2,-We);nn=Math.floor(Te.width*gr),un=Math.floor(Te.height*gr),me.isDataArrayTexture?dn=Te.depth:me.isData3DTexture?dn=Math.floor(Te.depth*gr):dn=1,Bn=0,En=0,Sn=0}nt!==null?(ir=nt.x,he=nt.y,pe=nt.z):(ir=0,he=0,pe=0);const Le=gn.convert(Ge.format),Fe=gn.convert(Ge.type);let ct;Ge.isData3DTexture?(xt.setTexture3D(Ge,0),ct=ce.TEXTURE_3D):Ge.isDataArrayTexture||Ge.isCompressedArrayTexture?(xt.setTexture2DArray(Ge,0),ct=ce.TEXTURE_2D_ARRAY):(xt.setTexture2D(Ge,0),ct=ce.TEXTURE_2D),ce.pixelStorei(ce.UNPACK_FLIP_Y_WEBGL,Ge.flipY),ce.pixelStorei(ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ge.premultiplyAlpha),ce.pixelStorei(ce.UNPACK_ALIGNMENT,Ge.unpackAlignment);const vt=ce.getParameter(ce.UNPACK_ROW_LENGTH),Tt=ce.getParameter(ce.UNPACK_IMAGE_HEIGHT),Xt=ce.getParameter(ce.UNPACK_SKIP_PIXELS),Dt=ce.getParameter(ce.UNPACK_SKIP_ROWS),rn=ce.getParameter(ce.UNPACK_SKIP_IMAGES);ce.pixelStorei(ce.UNPACK_ROW_LENGTH,Te.width),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,Te.height),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,Bn),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,En),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,Sn);const sn=me.isDataArrayTexture||me.isData3DTexture,Un=Ge.isDataArrayTexture||Ge.isData3DTexture;if(me.isDepthTexture){const gr=Ue.get(me),qn=Ue.get(Ge),Lr=Ue.get(gr.__renderTarget),Ui=Ue.get(qn.__renderTarget);Ie.bindFramebuffer(ce.READ_FRAMEBUFFER,Lr.__webglFramebuffer),Ie.bindFramebuffer(ce.DRAW_FRAMEBUFFER,Ui.__webglFramebuffer);for(let ma=0;ma<dn;ma++)sn&&(ce.framebufferTextureLayer(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,Ue.get(me).__webglTexture,We,Sn+ma),ce.framebufferTextureLayer(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,Ue.get(Ge).__webglTexture,Kt,pe+ma)),ce.blitFramebuffer(Bn,En,nn,un,ir,he,nn,un,ce.DEPTH_BUFFER_BIT,ce.NEAREST);Ie.bindFramebuffer(ce.READ_FRAMEBUFFER,null),Ie.bindFramebuffer(ce.DRAW_FRAMEBUFFER,null)}else if(We!==0||me.isRenderTargetTexture||Ue.has(me)){const gr=Ue.get(me),qn=Ue.get(Ge);Ie.bindFramebuffer(ce.READ_FRAMEBUFFER,ec),Ie.bindFramebuffer(ce.DRAW_FRAMEBUFFER,Qi);for(let Lr=0;Lr<dn;Lr++)sn?ce.framebufferTextureLayer(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,gr.__webglTexture,We,Sn+Lr):ce.framebufferTexture2D(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,gr.__webglTexture,We),Un?ce.framebufferTextureLayer(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,qn.__webglTexture,Kt,pe+Lr):ce.framebufferTexture2D(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,qn.__webglTexture,Kt),We!==0?ce.blitFramebuffer(Bn,En,nn,un,ir,he,nn,un,ce.COLOR_BUFFER_BIT,ce.NEAREST):Un?ce.copyTexSubImage3D(ct,Kt,ir,he,pe+Lr,Bn,En,nn,un):ce.copyTexSubImage2D(ct,Kt,ir,he,Bn,En,nn,un);Ie.bindFramebuffer(ce.READ_FRAMEBUFFER,null),Ie.bindFramebuffer(ce.DRAW_FRAMEBUFFER,null)}else Un?me.isDataTexture||me.isData3DTexture?ce.texSubImage3D(ct,Kt,ir,he,pe,nn,un,dn,Le,Fe,Te.data):Ge.isCompressedArrayTexture?ce.compressedTexSubImage3D(ct,Kt,ir,he,pe,nn,un,dn,Le,Te.data):ce.texSubImage3D(ct,Kt,ir,he,pe,nn,un,dn,Le,Fe,Te):me.isDataTexture?ce.texSubImage2D(ce.TEXTURE_2D,Kt,ir,he,nn,un,Le,Fe,Te.data):me.isCompressedTexture?ce.compressedTexSubImage2D(ce.TEXTURE_2D,Kt,ir,he,Te.width,Te.height,Le,Te.data):ce.texSubImage2D(ce.TEXTURE_2D,Kt,ir,he,nn,un,Le,Fe,Te);ce.pixelStorei(ce.UNPACK_ROW_LENGTH,vt),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,Tt),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,Xt),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,Dt),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,rn),Kt===0&&Ge.generateMipmaps&&ce.generateMipmap(ct),Ie.unbindTexture()},this.initRenderTarget=function(me){Ue.get(me).__webglFramebuffer===void 0&&xt.setupRenderTarget(me)},this.initTexture=function(me){me.isCubeTexture?xt.setTextureCube(me,0):me.isData3DTexture?xt.setTexture3D(me,0):me.isDataArrayTexture||me.isCompressedArrayTexture?xt.setTexture2DArray(me,0):xt.setTexture2D(me,0),Ie.unbindTexture()},this.resetState=function(){R=0,k=0,L=null,Ie.reset(),Ne.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Og}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=Li._getDrawingBufferColorSpace(e),n.unpackColorSpace=Li._getUnpackColorSpace()}}const ab={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class Ob{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const SSe=new eF(-1,1,1,-1,0,1);class wSe extends pd{constructor(){super(),this.setAttribute("position",new x0([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new x0([0,2,0,0,2,0],2))}}const _Se=new wSe;class B_{constructor(e){this._mesh=new Dp(_Se,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,SSe)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class ISe extends Ob{constructor(e,n="tDiffuse"){super(),this.textureID=n,this.uniforms=null,this.material=null,e instanceof Ta?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=vb.clone(e.uniforms),this.material=new Ta({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this._fsQuad=new B_(this.material)}render(e,n,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this._fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}}class e$ extends Ob{constructor(e,n){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,r){const i=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let a,o;this.inverse?(a=0,o=1):(a=1,o=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),s.buffers.stencil.setFunc(i.ALWAYS,a,4294967295),s.buffers.stencil.setClear(o),s.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(i.EQUAL,1,4294967295),s.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),s.buffers.stencil.setLocked(!0)}}class BSe extends Ob{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class CI{constructor(e,n){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),n===void 0){const r=e.getSize(new Ir);this._width=r.width,this._height=r.height,n=new Jd(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:af}),n.texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new ISe(ab),this.copyPass.material.blending=Ip,this.clock=new jE}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let r=!1;for(let i=0,s=this.passes.length;i<s;i++){const a=this.passes[i];if(a.enabled!==!1){if(a.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),a.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),a.needsSwap){if(r){const o=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}e$!==void 0&&(a instanceof e$?r=!0:a instanceof BSe&&(r=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new Ir);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const r=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(r,i),this.renderTarget2.setSize(r,i);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(r,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class EI extends Ob{constructor(e,n,r=null,i=null,s=null){super(),this.scene=e,this.camera=n,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Gr}render(e,n,r){const i=e.autoClear;e.autoClear=!1;let s,a;this.overrideMaterial!==null&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=a),e.autoClear=i}}const gR={uniforms:{damp:{value:.96},tOld:{value:null},tNew:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float damp;

		uniform sampler2D tOld;
		uniform sampler2D tNew;

		varying vec2 vUv;

		vec4 when_gt( vec4 x, float y ) {

			return max( sign( x - y ), 0.0 );

		}

		void main() {

			vec4 texelOld = texture2D( tOld, vUv );
			vec4 texelNew = texture2D( tNew, vUv );

			texelOld *= damp * when_gt( texelOld, 0.1 );

			gl_FragColor = max(texelNew, texelOld);

		}`};class tF extends Ob{constructor(e=.96){super(),this.uniforms=vb.clone(gR.uniforms),this.damp=e,this.compFsMaterial=new Ta({uniforms:this.uniforms,vertexShader:gR.vertexShader,fragmentShader:gR.fragmentShader}),this.copyFsMaterial=new Ta({uniforms:vb.clone(ab.uniforms),vertexShader:ab.vertexShader,fragmentShader:ab.fragmentShader,blending:Ip,depthTest:!1,depthWrite:!1}),this._textureComp=new Jd(window.innerWidth,window.innerHeight,{magFilter:hu,type:af}),this._textureOld=new Jd(window.innerWidth,window.innerHeight,{magFilter:hu,type:af}),this._compFsQuad=new B_(this.compFsMaterial),this._copyFsQuad=new B_(this.copyFsMaterial)}get damp(){return this.uniforms.damp.value}set damp(e){this.uniforms.damp.value=e}render(e,n,r){this.uniforms.tOld.value=this._textureOld.texture,this.uniforms.tNew.value=r.texture,e.setRenderTarget(this._textureComp),this._compFsQuad.render(e),this._copyFsQuad.material.uniforms.tDiffuse.value=this._textureComp.texture,this.renderToScreen?(e.setRenderTarget(null),this._copyFsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(),this._copyFsQuad.render(e));const i=this._textureOld;this._textureOld=this._textureComp,this._textureComp=i}setSize(e,n){this._textureComp.setSize(e,n),this._textureOld.setSize(e,n)}dispose(){this._textureComp.dispose(),this._textureOld.dispose(),this.compFsMaterial.dispose(),this.copyFsMaterial.dispose(),this._compFsQuad.dispose(),this._copyFsQuad.dispose()}}const TSe={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Gr(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class R0 extends Ob{constructor(e,n=1,r,i){super(),this.strength=n,this.radius=r,this.threshold=i,this.resolution=e!==void 0?new Ir(e.x,e.y):new Ir(256,256),this.clearColor=new Gr(0,0,0),this.needsSwap=!1,this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);this.renderTargetBright=new Jd(s,a,{type:af}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let u=0;u<this.nMips;u++){const h=new Jd(s,a,{type:af});h.texture.name="UnrealBloomPass.h"+u,h.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(h);const f=new Jd(s,a,{type:af});f.texture.name="UnrealBloomPass.v"+u,f.texture.generateMipmaps=!1,this.renderTargetsVertical.push(f),s=Math.round(s/2),a=Math.round(a/2)}const o=TSe;this.highPassUniforms=vb.clone(o.uniforms),this.highPassUniforms.luminosityThreshold.value=i,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Ta({uniforms:this.highPassUniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader}),this.separableBlurMaterials=[];const l=[6,10,14,18,22];s=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);for(let u=0;u<this.nMips;u++)this.separableBlurMaterials.push(this._getSeparableBlurMaterial(l[u])),this.separableBlurMaterials[u].uniforms.invSize.value=new Ir(1/s,1/a),s=Math.round(s/2),a=Math.round(a/2);this.compositeMaterial=this._getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=n,this.compositeMaterial.uniforms.bloomRadius.value=.1;const c=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=c,this.bloomTintColors=[new mt(1,1,1),new mt(1,1,1),new mt(1,1,1),new mt(1,1,1),new mt(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,this.copyUniforms=vb.clone(ab.uniforms),this.blendMaterial=new Ta({uniforms:this.copyUniforms,vertexShader:ab.vertexShader,fragmentShader:ab.fragmentShader,blending:Ab,depthTest:!1,depthWrite:!1,transparent:!0}),this._oldClearColor=new Gr,this._oldClearAlpha=1,this._basic=new q8,this._fsQuad=new B_(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this._basic.dispose(),this._fsQuad.dispose()}setSize(e,n){let r=Math.round(e/2),i=Math.round(n/2);this.renderTargetBright.setSize(r,i);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(r,i),this.renderTargetsVertical[s].setSize(r,i),this.separableBlurMaterials[s].uniforms.invSize.value=new Ir(1/r,1/i),r=Math.round(r/2),i=Math.round(i/2)}render(e,n,r,i,s){e.getClearColor(this._oldClearColor),this._oldClearAlpha=e.getClearAlpha();const a=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this._fsQuad.material=this._basic,this._basic.map=r.texture,e.setRenderTarget(null),e.clear(),this._fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=r.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this._fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this._fsQuad.render(e);let o=this.renderTargetBright;for(let l=0;l<this.nMips;l++)this._fsQuad.material=this.separableBlurMaterials[l],this.separableBlurMaterials[l].uniforms.colorTexture.value=o.texture,this.separableBlurMaterials[l].uniforms.direction.value=R0.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[l]),e.clear(),this._fsQuad.render(e),this.separableBlurMaterials[l].uniforms.colorTexture.value=this.renderTargetsHorizontal[l].texture,this.separableBlurMaterials[l].uniforms.direction.value=R0.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[l]),e.clear(),this._fsQuad.render(e),o=this.renderTargetsVertical[l];this._fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this._fsQuad.render(e),this._fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(r),this._fsQuad.render(e)),e.setClearColor(this._oldClearColor,this._oldClearAlpha),e.autoClear=a}_getSeparableBlurMaterial(e){const n=[],r=e/3;for(let i=0;i<e;i++)n.push(.39894*Math.exp(-.5*i*i/(r*r))/r);return new Ta({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new Ir(.5,.5)},direction:{value:new Ir(.5,.5)},gaussianCoefficients:{value:n}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += ( sample1 + sample2 ) * w;
					}
					gl_FragColor = vec4( diffuseSum, 1.0 );
				}`})}_getCompositeMaterial(e){return new Ta({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}R0.BlurDirectionX=new Ir(1,0);R0.BlurDirectionY=new Ir(0,1);const cB={name:"OutputShader",uniforms:{tDiffuse:{value:null},toneMappingExposure:{value:1}},vertexShader:`
		precision highp float;

		uniform mat4 modelViewMatrix;
		uniform mat4 projectionMatrix;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D tDiffuse;

		#include <tonemapping_pars_fragment>
		#include <colorspace_pars_fragment>

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );

			// tone mapping

			#ifdef LINEAR_TONE_MAPPING

				gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );

			#elif defined( REINHARD_TONE_MAPPING )

				gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );

			#elif defined( CINEON_TONE_MAPPING )

				gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );

			#elif defined( ACES_FILMIC_TONE_MAPPING )

				gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );

			#elif defined( AGX_TONE_MAPPING )

				gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );

			#elif defined( NEUTRAL_TONE_MAPPING )

				gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );

			#elif defined( CUSTOM_TONE_MAPPING )

				gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );

			#endif

			// color space

			#ifdef SRGB_TRANSFER

				gl_FragColor = sRGBTransferOETF( gl_FragColor );

			#endif

		}`};class SI extends Ob{constructor(){super(),this.uniforms=vb.clone(cB.uniforms),this.material=new kxe({name:cB.name,uniforms:this.uniforms,vertexShader:cB.vertexShader,fragmentShader:cB.fragmentShader}),this._fsQuad=new B_(this.material),this._outputColorSpace=null,this._toneMapping=null}render(e,n,r){this.uniforms.tDiffuse.value=r.texture,this.uniforms.toneMappingExposure.value=e.toneMappingExposure,(this._outputColorSpace!==e.outputColorSpace||this._toneMapping!==e.toneMapping)&&(this._outputColorSpace=e.outputColorSpace,this._toneMapping=e.toneMapping,this.material.defines={},Li.getTransfer(this._outputColorSpace)===ps&&(this.material.defines.SRGB_TRANSFER=""),this._toneMapping===IY?this.material.defines.LINEAR_TONE_MAPPING="":this._toneMapping===BY?this.material.defines.REINHARD_TONE_MAPPING="":this._toneMapping===TY?this.material.defines.CINEON_TONE_MAPPING="":this._toneMapping===MY?this.material.defines.ACES_FILMIC_TONE_MAPPING="":this._toneMapping===RY?this.material.defines.AGX_TONE_MAPPING="":this._toneMapping===PY?this.material.defines.NEUTRAL_TONE_MAPPING="":this._toneMapping===DY&&(this.material.defines.CUSTOM_TONE_MAPPING=""),this.material.needsUpdate=!0),this.renderToScreen===!0?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}}function MSe({preset:t,afterImageDamp:e=.35,bloomStrength:n=.4,bloomRadius:r=.3,bloomThreshold:i=.6}){const s=C.useRef(null),{targetMorphRef:a,contentRef:o,contentVersion:l,vortexRef:c}=Hy(),u=C.useRef(0),h=C.useRef(1),f=C.useRef(null),p=C.useRef(null);return C.useEffect(()=>{const m=f.current;if(!m)return;const v=m.getAttribute("targetPos");v&&m.setAttribute("prevTargetPos",new xr(new Float32Array(v.array),3)),m.setAttribute("targetPos",new xr(T0(o.current),3)),h.current=0},[l,o]),C.useEffect(()=>{if(!s.current)return;const m=s.current,v=new xI,A=new lu(60,window.innerWidth/window.innerHeight,.1,1e3);A.position.set(0,0,200),A.lookAt(0,0,0);const x=new bI({antialias:!0,alpha:!0,powerPreference:"high-performance"});x.setPixelRatio(Math.min(window.devicePixelRatio,2)),x.setSize(window.innerWidth,window.innerHeight),m.appendChild(x.domElement);const E=new pd,w=new Float32Array(Ap*3),B=new Float32Array(Ap),D=new Float32Array(Ap),T=new Float32Array(Ap);for(let ae=0;ae<Ap;ae++){const se=ae*3;w[se]=(Math.random()-.5)*550,w[se+1]=(Math.random()-.5)*380,w[se+2]=(Math.random()-.5)*100,B[ae]=Math.random();const fe=Math.random();D[ae]=fe*fe;const Ee=t.particleBaseSize+Math.random()*t.particleSizeVariance;T[ae]=Ee*(1-D[ae]*t.layerSizeReduction)}const M=T0(o.current);E.setAttribute("position",new xr(w,3)),E.setAttribute("random",new xr(B,1)),E.setAttribute("heightLayer",new xr(D,1)),E.setAttribute("particleSize",new xr(T,1)),E.setAttribute("targetPos",new xr(M,3)),E.setAttribute("prevTargetPos",new xr(new Float32Array(M),3)),f.current=E;const k=window.matchMedia("(prefers-color-scheme: dark)").matches?t.colors.dark:t.colors.light,L=t.name==="sand"?new mt(.12,.06,0):new mt(.05,.05,.05),F=t.name==="sand"?new mt(.9,.8,.6):new mt(.85,.85,.9),z=t.shaderTweaks??{},G=new Ta({uniforms:{time:{value:0},morphProgress:{value:0},transitionProgress:{value:1},colorPrimary:{value:new mt(k.primary.r,k.primary.g,k.primary.b)},colorSecondary:{value:new mt(k.secondary.r,k.secondary.g,k.secondary.b)},colorDust:{value:new mt(k.dust.r,k.dust.g,k.dust.b)},morphColorTint:{value:L},hazeColor:{value:F},vortexActive:{value:0},vortexCenter:{value:new Ir(0,0)},vortexStrength:{value:0},vortexRadius:{value:t.vortex.minRadius},vortexHeight:{value:0},primarySpeed:{value:t.drift.primarySpeed},primaryDirection:{value:t.drift.primaryDirection},lowLayerEffect:{value:t.drift.lowLayerEffect},midLayerEffect:{value:t.drift.midLayerEffect},highLayerEffect:{value:t.drift.highLayerEffect},waveSpeed:{value:t.drift.waveSpeed},waveScale:{value:t.drift.waveScale},clusterStrength:{value:t.drift.clusterStrength},clusterScale:{value:t.drift.clusterScale},turbulence:{value:t.form.turbulence},gustStrength:{value:t.form.gustStrength},gustFrequency:{value:t.form.gustFrequency},convergenceForce:{value:t.form.convergenceForce},rotationSpeed:{value:t.vortex.rotationSpeed},spiralTightness:{value:t.vortex.spiralTightness},suctionStrength:{value:t.vortex.suctionStrength},liftForce:{value:t.vortex.liftForce},coreDensity:{value:t.vortex.coreDensity},edgeDensity:{value:t.vortex.edgeDensity},tiltAmount:{value:t.vortex.tiltAmount},tiltDirection:{value:t.vortex.tiltDirection},maxVortexHeight:{value:t.vortex.maxHeight},formIntensityMultiplier:{value:z.formIntensityMultiplier??3.5},aliveBreathScale:{value:z.aliveBreathScale??2},vibrationScale:{value:z.vibrationScale??.6},baseAlphaLow:{value:t.baseAlpha.low},baseAlphaHigh:{value:t.baseAlpha.high}},vertexShader:yve,fragmentShader:vve,transparent:!0,blending:t.blending==="additive"?Ab:sb,depthWrite:!1});p.current=G;const V=window.matchMedia("(prefers-color-scheme: dark)"),q=ae=>{const se=ae.matches?t.colors.dark:t.colors.light;G.uniforms.colorPrimary.value.set(se.primary.r,se.primary.g,se.primary.b),G.uniforms.colorSecondary.value.set(se.secondary.r,se.secondary.g,se.secondary.b),G.uniforms.colorDust.value.set(se.dust.r,se.dust.g,se.dust.b)};V.addEventListener("change",q),v.add(new zM(E,G));const O=new CI(x),H=new EI(v,A);O.addPass(H);const K=new tF(e);O.addPass(K);const X=new R0(new Ir(window.innerWidth,window.innerHeight),n,r,i);O.addPass(X);const re=new SI;O.addPass(re);const J=new jE;let Z;const ee=z.vortexFadeMultiplier??135,te=()=>{const ae=J.getDelta();G.uniforms.time.value+=ae;const se=a.current>u.current?pI:gI;u.current+=(a.current-u.current)*se,G.uniforms.morphProgress.value=u.current,h.current+=(1-h.current)*CY,G.uniforms.transitionProgress.value=h.current;const fe=c.current;!fe.active&&fe.strength>0&&(fe.strength=Math.max(0,fe.strength-j8),fe.radius=t.vortex.minRadius+fe.strength*ee,fe.height=fe.strength*t.vortex.maxHeight),G.uniforms.vortexActive.value=fe.strength>.01?1:0,G.uniforms.vortexCenter.value.set(fe.x,fe.y),G.uniforms.vortexStrength.value=fe.strength,G.uniforms.vortexRadius.value=fe.radius,G.uniforms.vortexHeight.value=fe.height,O.render(),Z=requestAnimationFrame(te)};te();const oe=()=>{A.aspect=window.innerWidth/window.innerHeight,A.updateProjectionMatrix(),x.setSize(window.innerWidth,window.innerHeight),O.setSize(window.innerWidth,window.innerHeight),X.resolution.set(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",oe),()=>{f.current=null,p.current=null,cancelAnimationFrame(Z),window.removeEventListener("resize",oe),V.removeEventListener("change",q),m.removeChild(x.domElement),E.dispose(),G.dispose(),O.dispose(),x.dispose()}},[a,o,c,t,e,n,r,i]),d.jsx("div",{ref:s,style:{position:"fixed",inset:0,zIndex:-1,pointerEvents:"none"}})}const DSe=.012,RSe=`
  attribute float size;
  attribute float life;
  attribute vec3 velocity;
  attribute vec3 targetPos;
  attribute vec3 prevTargetPos;

  uniform float time;
  uniform float morphProgress;
  uniform float transitionProgress;
  uniform float vortexActive;
  uniform vec2 vortexCenter;
  uniform float vortexStrength;

  varying float vLife;
  varying float vMorph;
  varying float vSpeed;
  varying float vTransition;

  // Simplex noise functions
  vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
  vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
  vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
  vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }

  float snoise(vec3 v) {
    const vec2 C = vec2(1.0/6.0, 1.0/3.0);
    const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);
    vec3 i = floor(v + dot(v, C.yyy));
    vec3 x0 = v - i + dot(i, C.xxx);
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min(g.xyz, l.zxy);
    vec3 i2 = max(g.xyz, l.zxy);
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy;
    vec3 x3 = x0 - D.yyy;
    i = mod289(i);
    vec4 p = permute(permute(permute(
              i.z + vec4(0.0, i1.z, i2.z, 1.0))
            + i.y + vec4(0.0, i1.y, i2.y, 1.0))
            + i.x + vec4(0.0, i1.x, i2.x, 1.0));
    float n_ = 0.142857142857;
    vec3 ns = n_ * D.wyz - D.xzx;
    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);
    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_);
    vec4 x = x_ * ns.x + ns.yyyy;
    vec4 y = y_ * ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);
    vec4 b0 = vec4(x.xy, y.xy);
    vec4 b1 = vec4(x.zw, y.zw);
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));
    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww;
    vec3 p0 = vec3(a0.xy, h.x);
    vec3 p1 = vec3(a0.zw, h.y);
    vec3 p2 = vec3(a1.xy, h.z);
    vec3 p3 = vec3(a1.zw, h.w);
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2,p2), dot(p3,p3)));
    p0 *= norm.x; p1 *= norm.y; p2 *= norm.z; p3 *= norm.w;
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot(m*m, vec4(dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3)));
  }

  // Curl Noise -    ( )
  vec3 curlNoise(vec3 p) {
    float e = 0.1;
    vec3 dx = vec3(e, 0.0, 0.0);
    vec3 dy = vec3(0.0, e, 0.0);
    vec3 dz = vec3(0.0, 0.0, e);

    float n1 = snoise(p + dy) - snoise(p - dy);
    float n2 = snoise(p + dz) - snoise(p - dz);
    float n3 = snoise(p + dx) - snoise(p - dx);
    float n4 = snoise(p + dz) - snoise(p - dz);
    float n5 = snoise(p + dx) - snoise(p - dx);
    float n6 = snoise(p + dy) - snoise(p - dy);

    return normalize(vec3(
      n1 - n2,
      n3 - n4,
      n5 - n6
    )) / (2.0 * e);
  }

  // Smooth easing function
  float easeInOutCubic(float t) {
    return t < 0.5 ? 4.0 * t * t * t : 1.0 - pow(-2.0 * t + 2.0, 3.0) / 2.0;
  }

  void main() {
    // /  (easing )
    float easedTransition = easeInOutCubic(transitionProgress);
    vec3 currentTarget = mix(prevTargetPos, targetPos, easedTransition);

    //  
    vec3 pos = position;

    //    (0~1   )
    float isTransitioning = 1.0 - abs(transitionProgress * 2.0 - 1.0);
    isTransitioning = smoothstep(0.0, 0.3, isTransitioning);

    // Curl Noise  (   )
    float noiseScale = 0.008;
    float noiseSpeed = time * 0.15;
    vec3 noisePos = pos * noiseScale + vec3(0.0, 0.0, noiseSpeed);
    vec3 curl = curlNoise(noisePos);

    //      
    vec3 toTarget = normalize(currentTarget - pos);
    float distToTarget = length(currentTarget - pos);

    //  :   + curl noise 
    vec3 transitionFlow = mix(curl, toTarget, 0.3) * isTransitioning * 40.0;

    //    (life  ,   )
    float baseFlowStrength = 25.0 * (0.5 + life * 0.5);
    float flowStrength = baseFlowStrength * (1.0 - isTransitioning * 0.5);
    vec3 flowOffset = curl * flowStrength + transitionFlow;

    //    (  )
    float floatIntensity = 1.0 - isTransitioning * 0.7;
    float floatY = sin(time * 0.3 + life * 6.28) * 8.0 * floatIntensity;
    float floatX = cos(time * 0.2 + life * 4.0) * 6.0 * floatIntensity;

    //  
    vec3 vortexOffset = vec3(0.0);
    if (vortexActive > 0.5 && vortexStrength > 0.01) {
      vec2 toVortex = pos.xy - vortexCenter;
      float dist = length(toVortex);
      float influence = smoothstep(200.0, 0.0, dist) * vortexStrength;

      if (influence > 0.01) {
        float angle = atan(toVortex.y, toVortex.x) + time * 2.0 * vortexStrength;
        float spiralRadius = dist * (1.0 - influence * 0.3);

        vortexOffset.xy = vec2(cos(angle), sin(angle)) * spiralRadius - toVortex;
        vortexOffset.y += influence * 50.0;
      }
    }

    //   (curl noise + float)
    vec3 flowPos = pos + flowOffset + vec3(floatX, floatY, 0.0) + vortexOffset;

    //   (easing)
    float easedMorph = easeInOutCubic(morphProgress);
    vec3 morphedPos = mix(flowPos, currentTarget, easedMorph);

    //     
    if (morphProgress > 0.5) {
      float aliveIntensity = (morphProgress - 0.5) * 2.0;

      //  
      float breathe = sin(time * 1.2 + life * 3.14) * 2.0;
      morphedPos += normalize(currentTarget) * breathe * aliveIntensity * 0.5;

      //  (   )
      vec3 ripple = curlNoise(currentTarget * 0.02 + vec3(time * 0.5, 0.0, 0.0)) * 3.0;
      morphedPos += ripple * aliveIntensity;

      //     (     )
      if (isTransitioning > 0.1) {
        vec3 flowToNew = curlNoise(morphedPos * 0.01 + vec3(time * 0.3, 0.0, 0.0));
        morphedPos += flowToNew * isTransitioning * 5.0;
      }
    }

    pos = morphedPos;

    //   (/ )
    vSpeed = length(curl) + vortexStrength * 0.5 + isTransitioning * 0.3;

    vLife = life;
    vMorph = morphProgress;
    vTransition = isTransitioning;

    vec4 mvPos = modelViewMatrix * vec4(pos, 1.0);
    gl_Position = projectionMatrix * mvPos;

    //   (   )
    float baseSize = size * (1.0 + morphProgress * 0.3);
    float speedSize = 1.0 + vSpeed * 0.2;
    float transitionSize = 1.0 + isTransitioning * 0.2;
    gl_PointSize = (baseSize * speedSize * transitionSize / -mvPos.z) * 150.0;
  }
`,PSe=`
  uniform vec3 color1;
  uniform vec3 color2;
  uniform vec3 color3;
  uniform float time;

  varying float vLife;
  varying float vMorph;
  varying float vSpeed;
  varying float vTransition;

  void main() {
    //   
    vec2 uv = gl_PointCoord - 0.5;
    float dist = length(uv);
    if (dist > 0.5) discard;

    //   
    float alpha = exp(-dist * dist * 8.0);

    //   (life + speed )
    float colorMix = vLife + vSpeed * 0.3;
    colorMix = fract(colorMix + time * 0.05);

    vec3 color;
    if (colorMix < 0.5) {
      color = mix(color1, color2, colorMix * 2.0);
    } else {
      color = mix(color2, color3, (colorMix - 0.5) * 2.0);
    }

    //   
    color += vec3(0.1) * vMorph;

    //    (  )
    color += vec3(0.08, 0.06, 0.1) * vTransition;

    //   
    color += vec3(0.05) * vSpeed;

    // 
    alpha *= 0.7 + vMorph * 0.3;

    gl_FragColor = vec4(color, alpha);
  }
`,uB={dark:{color1:{r:.4,g:.5,b:.7},color2:{r:.6,g:.6,b:.75},color3:{r:.75,g:.75,b:.85}},light:{color1:{r:.2,g:.25,b:.4},color2:{r:.3,g:.3,b:.45},color3:{r:.4,g:.4,b:.5}}};function kSe({colors:t,particleCount:e=Ap,afterImageDamp:n=.35}){const r=C.useRef(null),{targetMorphRef:i,contentRef:s,contentVersion:a,vortexRef:o}=Hy(),l=C.useRef(0),c=C.useRef(1),u=C.useRef(null),h=C.useRef(null);return C.useEffect(()=>{const f=u.current;if(!f)return;const p=f.getAttribute("targetPos");p&&f.setAttribute("prevTargetPos",new xr(new Float32Array(p.array),3)),f.setAttribute("targetPos",new xr(T0(s.current),3)),c.current=0},[a,s]),C.useEffect(()=>{if(!r.current)return;const f=r.current,p=new xI,m=new lu(60,window.innerWidth/window.innerHeight,.1,1e3);m.position.set(0,0,200),m.lookAt(0,0,0);const v=new bI({antialias:!0,alpha:!0,powerPreference:"high-performance"});v.setPixelRatio(Math.min(window.devicePixelRatio,2)),v.setSize(window.innerWidth,window.innerHeight),f.appendChild(v.domElement);const A=new pd,x=new Float32Array(e*3),E=new Float32Array(e),w=new Float32Array(e),B=new Float32Array(e*3);for(let X=0;X<e;X++){const re=X*3;x[re]=(Math.random()-.5)*500,x[re+1]=(Math.random()-.5)*350,x[re+2]=(Math.random()-.5)*80,E[X]=.8+Math.random()*1.2,w[X]=Math.random(),B[re]=(Math.random()-.5)*2,B[re+1]=(Math.random()-.5)*2,B[re+2]=(Math.random()-.5)*.5}const D=T0(s.current);A.setAttribute("position",new xr(x,3)),A.setAttribute("size",new xr(E,1)),A.setAttribute("life",new xr(w,1)),A.setAttribute("velocity",new xr(B,3)),A.setAttribute("targetPos",new xr(D,3)),A.setAttribute("prevTargetPos",new xr(new Float32Array(D),3)),u.current=A;const T=window.matchMedia("(prefers-color-scheme: dark)").matches,M=t||(T?uB.dark:uB.light),R=new Ta({uniforms:{time:{value:0},morphProgress:{value:0},transitionProgress:{value:1},vortexActive:{value:0},vortexCenter:{value:new Ir(0,0)},vortexStrength:{value:0},color1:{value:new mt(M.color1.r,M.color1.g,M.color1.b)},color2:{value:new mt(M.color2.r,M.color2.g,M.color2.b)},color3:{value:new mt(M.color3.r,M.color3.g,M.color3.b)}},vertexShader:RSe,fragmentShader:PSe,transparent:!0,blending:Ab,depthWrite:!1});h.current=R;const k=window.matchMedia("(prefers-color-scheme: dark)"),L=X=>{const re=X.matches?uB.dark:uB.light;R.uniforms.color1.value.set(re.color1.r,re.color1.g,re.color1.b),R.uniforms.color2.value.set(re.color2.r,re.color2.g,re.color2.b),R.uniforms.color3.value.set(re.color3.r,re.color3.g,re.color3.b)};k.addEventListener("change",L),p.add(new zM(A,R));const F=new CI(v),z=new EI(p,m);F.addPass(z);const G=new tF(n);F.addPass(G);const V=new SI;F.addPass(V);const q=new jE;let O;const H=()=>{const X=q.getDelta();R.uniforms.time.value+=X;const re=i.current>l.current?pI:gI;l.current+=(i.current-l.current)*re,R.uniforms.morphProgress.value=l.current,c.current+=(1-c.current)*DSe,R.uniforms.transitionProgress.value=c.current;const J=o.current;!J.active&&J.strength>0&&(J.strength=Math.max(0,J.strength-j8)),R.uniforms.vortexActive.value=J.strength>.01?1:0,R.uniforms.vortexCenter.value.set(J.x,J.y),R.uniforms.vortexStrength.value=J.strength,F.render(),O=requestAnimationFrame(H)};H();const K=()=>{m.aspect=window.innerWidth/window.innerHeight,m.updateProjectionMatrix(),v.setSize(window.innerWidth,window.innerHeight),F.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",K),()=>{u.current=null,h.current=null,cancelAnimationFrame(O),window.removeEventListener("resize",K),k.removeEventListener("change",L),f.removeChild(v.domElement),A.dispose(),R.dispose(),F.dispose(),v.dispose()}},[i,s,o,t,e,n]),d.jsx("div",{ref:r,style:{position:"fixed",inset:0,zIndex:-1,pointerEvents:"none"}})}const gl=Math.min(Ap,2e4),QS=100,t$=168,NSe=200,YC=.6,dB=2,hx=128,n$=150,hB=2,r$=.05,fB=168,i$=198,oX="",lX="",LSe=(()=>{let t="";for(const e of oX)for(const n of lX){const r=44032+(e.charCodeAt(0)-12593)*588+(n.charCodeAt(0)-12623)*28;r>=44032&&r<=55203&&(t+=String.fromCharCode(r))}return t})(),FSe="",jSe="",OSe="",zSe="",$Se="",xy="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz{}[]()<>+-*/=!?;:.,@#$%^&|~`_\\\"'"+FSe+jSe+oX+lX+LSe+OSe+zSe+$Se;function QSe(){const e=Math.ceil(xy.length/12),n=12*hx,r=e*hx,i=document.createElement("canvas");i.width=n,i.height=r;const s=i.getContext("2d");s.clearRect(0,0,n,r),s.font=`bold ${hx*.75}px "MS Gothic", "Meiryo", "Hiragino Kaku Gothic Pro", monospace`,s.textAlign="center",s.textBaseline="middle";for(let o=0;o<xy.length;o++){const l=o%12,c=Math.floor(o/12),u=l*hx+hx/2,h=c*hx+hx/2;s.shadowColor="rgba(0, 255, 100, 1)",s.shadowBlur=8,s.fillStyle="#00ff66",s.fillText(xy[o],u,h),s.shadowBlur=0,s.fillText(xy[o],u,h)}const a=new J8(i);return a.minFilter=_l,a.magFilter=_l,a.needsUpdate=!0,a}const USe=`
  attribute vec3 instancePosition;
  attribute float instanceCharIndex;
  attribute float instanceBrightness;
  attribute float instanceDepth;
  attribute float instanceSpeed;
  attribute float instanceSize;
  attribute float instanceSpawnTime;

  uniform float time;
  uniform float morphProgress;
  uniform sampler2D targetPositions;
  uniform vec2 targetSize;
  uniform float screenHeight;
  uniform float depthSpeedMultiplier;
  uniform float mouseWorldX;
  uniform float mouseWorldY;
  uniform float mouseActive;

  //   ( 1/2 )
  const float AVOID_RADIUS = 18.0;      //   
  const float AVOID_STRENGTH = 15.0;    //   
  const float RETURN_DISTANCE = 30.0;   //   

  varying vec2 vUv;
  varying float vBrightness;
  varying float vCharIndex;
  varying float vDepth;
  varying float vCollision;
  varying float vVisible;

  void main() {
    vUv = uv;
    vCharIndex = instanceCharIndex;
    vDepth = instanceDepth;

    //   :     
    float spawnProgress = step(instanceSpawnTime, time);
    vVisible = spawnProgress;

    //       
    if (spawnProgress < 0.5) {
      gl_Position = vec4(0.0, 0.0, -1000.0, 1.0);
      vBrightness = 0.0;
      vCollision = 0.0;
      return;
    }

    vec3 pos = instancePosition;

    // Matrix :   
    float vortexEffect = 0.0;

    //    ( )
    float instanceId = float(gl_InstanceID);
    vec2 targetUV = vec2(mod(instanceId, targetSize.x) / targetSize.x,
                         floor(instanceId / targetSize.x) / targetSize.y);
    vec4 targetData = texture2D(targetPositions, targetUV);
    vec3 targetPos = targetData.xyz;

    //  :     
    float distToTarget = length(pos.xy - targetPos.xy);
    float collisionRadius = 8.0;
    float collision = smoothstep(collisionRadius, 0.0, distToTarget) * morphProgress;
    vCollision = max(collision, vortexEffect); //   collision 

    //  :      
    if (collision > 0.1) {
      //   
      pos.xy = mix(pos.xy, targetPos.xy, collision * 0.8);
      //    :  ( depth)   
      float depthSpeedFactor = 1.0 + (1.0 - instanceDepth) * depthSpeedMultiplier;
      pos.y -= collision * time * instanceSpeed * depthSpeedFactor * 0.3;
      //   
      pos.x += sin(time * 2.0 + float(gl_InstanceID) * 0.1) * collision * 2.0;
    }

    //    ()
    float depthScale = 1.0 - instanceDepth * 0.4;

    // ==========    ==========
    //   
    float distToMouseX = pos.x - mouseWorldX;
    float distToMouseY = pos.y - mouseWorldY;
    float distToMouse = length(vec2(distToMouseX, distToMouseY));

    //    (  )
    float avoidOffset = 0.0;
    if (mouseActive > 0.5) {
      // X    (  )
      float xProximity = 1.0 - smoothstep(0.0, AVOID_RADIUS, abs(distToMouseX));

      // Y     
      float yFactor = 0.0;
      if (distToMouseY > 0.0) {
        //  :    ()
        yFactor = smoothstep(AVOID_RADIUS * 2.0, 0.0, distToMouseY);
      } else {
        //  :  
        yFactor = smoothstep(-RETURN_DISTANCE, 0.0, distToMouseY);
      }

      //    (  )
      float pushDir = sign(distToMouseX);
      //   /  ID  
      if (abs(distToMouseX) < 3.0) {
        pushDir = (mod(float(gl_InstanceID), 2.0) * 2.0 - 1.0);
      }

      //   
      avoidOffset = pushDir * xProximity * yFactor * AVOID_STRENGTH;
    }

    //   
    pos.x += avoidOffset;

    //       (  )
    float mouseGlow = smoothstep(AVOID_RADIUS * 1.5, 0.0, distToMouse) * mouseActive * 0.3;

    //    (   ,  )
    float finalSize = instanceSize * depthScale;

    //       
    //   = 1.0 (,  )
    //   =   ()
    float age = time - instanceSpawnTime;
    float fadeTime = 8.0; //     ()
    float ageBrightness = max(0.05, 1.0 - age / fadeTime);

    // :    +  
    vBrightness = ageBrightness * (1.0 - instanceDepth * 0.3);

    // /   
    vBrightness += vCollision * 0.5;

    //       
    vBrightness += mouseGlow;

    //      (  )
    vec3 transformed = position * finalSize + pos;

    // Billboard:   
    vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);
    mvPosition.xyz += position * finalSize;

    gl_Position = projectionMatrix * mvPosition;
  }
`,HSe=`
  uniform sampler2D charAtlas;
  uniform float charsPerRow;
  uniform float charRows;
  uniform float time;

  varying vec2 vUv;
  varying float vBrightness;
  varying float vCharIndex;
  varying float vDepth;
  varying float vCollision;
  varying float vVisible;

  void main() {
    //      
    if (vVisible < 0.5) discard;
    //   UV 
    float charIdx = floor(vCharIndex);
    float col = mod(charIdx, charsPerRow);
    float row = floor(charIdx / charsPerRow);

    vec2 charUV = vec2(
      (col + vUv.x) / charsPerRow,
      (row + (1.0 - vUv.y)) / charRows
    );

    vec4 texColor = texture2D(charAtlas, charUV);

    //  
    vec3 baseGreen = vec3(0.0, 1.0, 0.4);
    vec3 brightGreen = vec3(0.5, 1.0, 0.6);
    vec3 headWhite = vec3(0.9, 1.0, 0.95);

    //   
    vec3 color;
    if (vBrightness > 0.9) {
      // : 
      color = mix(brightGreen, headWhite, (vBrightness - 0.9) * 10.0);
    } else {
      // :  
      color = mix(baseGreen * 0.3, brightGreen, vBrightness);
    }

    //     
    color = mix(color, headWhite, vCollision * 0.5);

    //  
    float flicker = 0.9 + 0.1 * sin(time * 10.0 + vCharIndex * 2.5);
    color *= flicker;

    //    
    float fog = 1.0 - vDepth * 0.3;
    color *= fog;

    // 
    float alpha = texColor.a * vBrightness;

    //     
    alpha = mix(alpha, min(alpha * 1.5, 1.0), vCollision);

    if (alpha < 0.05) discard;

    gl_FragColor = vec4(color, alpha);
  }
`;function GSe({bloomStrength:t=1.2,bloomRadius:e=.8,bloomThreshold:n=.1,speedMultiplier:r=1}){const i=C.useRef(null),{targetMorphRef:s,contentRef:a,contentVersion:o}=Hy(),l=C.useRef(0),c=C.useRef(null),u=C.useRef(null);return C.useEffect(()=>{if(!c.current)return;const h=T0(a.current),f=Math.ceil(Math.sqrt(gl)),p=new Float32Array(f*f*4);for(let v=0;v<gl;v++){const A=v*3,x=v*4;p[x]=h[A]||0,p[x+1]=h[A+1]||0,p[x+2]=h[A+2]||0,p[x+3]=1}const m=c.current.image?.data;m&&(m.set(p),c.current.needsUpdate=!0)},[o,a]),C.useEffect(()=>{if(!i.current)return;const h=i.current,f=new xI;f.background=new Gr(0),f.fog=new Y8(0,100,400);const p=new lu(75,window.innerWidth/window.innerHeight,.1,1e3);p.position.set(0,0,100),p.lookAt(0,0,0);const m=new bI({antialias:!0,alpha:!1,powerPreference:"high-performance"});m.setPixelRatio(Math.min(window.devicePixelRatio,2)),m.setSize(window.innerWidth,window.innerHeight),h.appendChild(m.domElement);const v=QSe(),A=12,x=Math.ceil(xy.length/A),E=Math.ceil(Math.sqrt(gl)),w=new Float32Array(E*E*4),B=new X8(w,E,E,nf,Cp);B.needsUpdate=!0,c.current=B;const D=window.innerWidth/window.innerHeight,T=2*Math.tan(75*Math.PI/360)*100,M=T*D,R=M/2,k=T/2,L=new Z8(1,1),F=new Float32Array(gl*3),z=new Float32Array(gl),G=new Float32Array(gl),V=new Float32Array(gl),q=new Float32Array(gl),O=new Float32Array(gl),H=new Float32Array(gl),K=M*1.2/QS,X=[];for(let ht=0;ht<QS;ht++)X.push({speed:(.3+Math.random()*.7)*r,length:fB+Math.floor(Math.random()*(i$-fB+1)),depth:Math.random(),headY:k+Math.random()*k*2,charCount:t$+Math.floor(Math.random()*(NSe-t$+1)),startDelay:Math.random()*2,spawnedCount:0,lastSpawnTime:0});let re=0;for(let ht=0;ht<QS&&re<gl;ht++){const Ue=X[ht],ve=-R*1.1+ht*K+K/2+(Math.random()-.5)*.3,ue=(YC+dB)/2*1.2;for(let ke=0;ke<Ue.charCount&&re<gl;ke++){const He=re*3;F[He]=ve;const Qe=YC+Math.random()*(dB-YC);F[He+1]=Ue.headY-ke*ue,F[He+2]=-Ue.depth*n$,z[re]=Math.floor(Math.random()*xy.length);const Ke=ke===0?1:ke<Ue.length?Math.max(.1,1-ke/Ue.length*.9):.05;G[re]=Ke,V[re]=Ue.depth;const jt=1+(1-Ue.depth)*hB;q[re]=Ue.speed*jt,O[re]=Qe,H[re]=Ue.startDelay+ke*r$,re++}}const J=L.clone();J.setAttribute("instancePosition",new r0(F,3)),J.setAttribute("instanceCharIndex",new r0(z,1)),J.setAttribute("instanceBrightness",new r0(G,1)),J.setAttribute("instanceDepth",new r0(V,1)),J.setAttribute("instanceSpeed",new r0(q,1)),J.setAttribute("instanceSize",new r0(O,1)),J.setAttribute("instanceSpawnTime",new r0(H,1));const Z=new Ta({uniforms:{charAtlas:{value:v},charsPerRow:{value:A},charRows:{value:x},time:{value:0},morphProgress:{value:0},targetPositions:{value:B},targetSize:{value:new Ir(E,E)},screenHeight:{value:T},depthSpeedMultiplier:{value:hB},mouseWorldX:{value:0},mouseWorldY:{value:0},mouseActive:{value:0}},vertexShader:USe,fragmentShader:HSe,transparent:!0,blending:Ab,depthWrite:!1,depthTest:!0,side:jg});u.current=Z;const ee=new Txe(J,Z,gl);ee.frustumCulled=!1;const te=new fu;for(let ht=0;ht<gl;ht++)te.position.set(0,0,0),te.updateMatrix(),ee.setMatrixAt(ht,te.matrix);ee.instanceMatrix.needsUpdate=!0,f.add(ee);const oe=new CI(m);oe.addPass(new EI(f,p));const ae=new R0(new Ir(window.innerWidth,window.innerHeight),t,e,n);oe.addPass(ae),oe.addPass(new SI);const se=new jE;let fe;const Ee=new Float32Array(gl);for(let ht=0;ht<gl;ht++)Ee[ht]=Math.random()*30;let Be=0,_e=0,Ce=0,Se=0,Me=0;const ce=.08,$e=ht=>{const Ue=ht.clientX/window.innerWidth*2-1,xt=-(ht.clientY/window.innerHeight*2-1);Be=Ue*R,_e=xt*k,Me=1},qe=()=>{Me=0};window.addEventListener("mousemove",$e),window.addEventListener("mouseleave",qe);const ft=()=>{const ht=se.getDelta(),Ue=se.getElapsedTime();Z.uniforms.time.value=Ue,Ce+=(Be-Ce)*ce,Se+=(_e-Se)*ce,Z.uniforms.mouseWorldX.value=Ce,Z.uniforms.mouseWorldY.value=Se,Z.uniforms.mouseActive.value=Me;const ve=l.current>.1?.1:1,ue=s.current>l.current?pI:gI;l.current+=(s.current-l.current)*ue,Z.uniforms.morphProgress.value=l.current;const ke=J.getAttribute("instancePosition"),He=J.getAttribute("instanceCharIndex"),Qe=J.getAttribute("instanceBrightness"),Ke=J.getAttribute("instanceDepth"),jt=J.getAttribute("instanceSize"),St=J.getAttribute("instanceSpeed"),Zt=J.getAttribute("instanceSpawnTime"),Bt=[];let at=0;for(let pt=0;pt<QS;pt++)Bt[pt]=at,at+=X[pt].charCount;for(let pt=0;pt<QS;pt++){const Vt=X[pt],qt=-R*1.1+pt*K+K/2,Wt=Bt[pt],gn=1+(1-Vt.depth)*hB,Ne=Vt.speed*gn*ht*30*ve;let Ht=1/0,Qt=Vt.headY;for(let $t=0;$t<Vt.charCount&&Wt+$t<gl;$t++){const It=Wt+$t,Ct=It*3,ln=Zt.array[It];if(Ue>=ln){const _t=ke.array[Ct+1]-Ne;ke.array[Ct+1]=_t,Ht=_t,Qt=_t;const Pt=$t===0;Ee[It]-=ht*60*(Pt?4:1),Ee[It]<=0&&(He.array[It]=Math.floor(Math.random()*xy.length),Ee[It]=Pt?2+Math.random()*5:8+Math.random()*25)}else{const _t=jt.array[It];ke.array[Ct+1]=Qt+_t*1.5}}if(Ht!==1/0&&Ht<-k-30){const $t=k+30+Math.random()*60,It=fB+Math.floor(Math.random()*(i$-fB+1)),Ct=Math.random();Vt.headY=$t,Vt.length=It,Vt.depth=Ct,Vt.speed=(.3+Math.random()*.7)*r;const ln=qt+(Math.random()-.5)*.3,lt=(YC+dB)/2*1.2;for(let _t=0;_t<Vt.charCount&&Wt+_t<gl;_t++){const Pt=Wt+_t,zt=Pt*3;ke.array[zt]=ln;const Wn=YC+Math.random()*(dB-YC);ke.array[zt+1]=$t-_t*lt,ke.array[zt+2]=-Ct*n$,He.array[Pt]=Math.floor(Math.random()*xy.length);const In=_t===0?1:_t<It?Math.max(.1,1-_t/It*.9):.05;Qe.array[Pt]=In,Ke.array[Pt]=Ct;const tn=1+(1-Ct)*hB;St.array[Pt]=Vt.speed*tn,jt.array[Pt]=Wn,Zt.array[Pt]=Ue+_t*r$}St.needsUpdate=!0,Zt.needsUpdate=!0}}ke.needsUpdate=!0,He.needsUpdate=!0,Qe.needsUpdate=!0,Ke.needsUpdate=!0,jt.needsUpdate=!0,oe.render(),fe=requestAnimationFrame(ft)};ft();const Ie=()=>{p.aspect=window.innerWidth/window.innerHeight,p.updateProjectionMatrix(),m.setSize(window.innerWidth,window.innerHeight),oe.setSize(window.innerWidth,window.innerHeight),ae.resolution.set(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",Ie),()=>{c.current=null,u.current=null,cancelAnimationFrame(fe),window.removeEventListener("resize",Ie),window.removeEventListener("mousemove",$e),window.removeEventListener("mouseleave",qe),h.removeChild(m.domElement),J.dispose(),L.dispose(),Z.dispose(),v.dispose(),B.dispose(),oe.dispose(),m.dispose()}},[s,a,t,e,n,r]),d.jsx("div",{ref:i,style:{position:"fixed",inset:0,zIndex:-1,pointerEvents:"none"}})}const Hh=Math.min(Ap,15e3),fx=24,cX="",uX="",VSe=(()=>{let t="";for(const e of cX)for(const n of uX){const r=44032+(e.charCodeAt(0)-12593)*588+(n.charCodeAt(0)-12623)*28;r>=44032&&r<=55203&&(t+=String.fromCharCode(r))}return t})(),WSe="",KSe="",qSe="",YSe="",XSe="",qx="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz{}[]()<>+-*/=!?;:.,@#$%^&|~`_\\\"'"+WSe+KSe+cX+uX+VSe+qSe+YSe+XSe;function JSe(){const e=Math.ceil(qx.length/12),n=12*fx,r=e*fx,i=document.createElement("canvas");i.width=n,i.height=r;const s=i.getContext("2d");s.clearRect(0,0,n,r),s.font=`bold ${fx*.7}px "Fira Code", "Source Code Pro", "Consolas", monospace`,s.textAlign="center",s.textBaseline="middle";for(let o=0;o<qx.length;o++){const l=o%12,c=Math.floor(o/12),u=l*fx+fx/2,h=c*fx+fx/2;s.shadowColor="rgba(0, 255, 180, 0.8)",s.shadowBlur=4,s.fillStyle="#00ffaa",s.fillText(qx[o],u,h),s.shadowBlur=0,s.fillText(qx[o],u,h)}const a=new J8(i);return a.minFilter=_l,a.magFilter=_l,a.needsUpdate=!0,a}const ZSe=`
  attribute float charIndex;
  attribute float random;
  attribute float heightLayer;
  attribute float particleSize;
  attribute float glowIntensity;
  attribute vec3 targetPos;
  attribute vec3 prevTargetPos;

  uniform float time;
  uniform float morphProgress;
  uniform float transitionProgress;

  // / 
  uniform float primarySpeed;
  uniform float primaryDirection;
  uniform float lowLayerEffect;
  uniform float midLayerEffect;
  uniform float highLayerEffect;
  uniform float waveSpeed;
  uniform float waveScale;
  uniform float clusterStrength;
  uniform float clusterScale;

  //  
  uniform float turbulence;
  uniform float gustStrength;
  uniform float gustFrequency;
  uniform float convergenceForce;
  uniform float formIntensityMultiplier;
  uniform float aliveBreathScale;
  uniform float vibrationScale;

  //  
  uniform float vortexActive;
  uniform vec2 vortexCenter;
  uniform float vortexStrength;
  uniform float vortexRadius;
  uniform float vortexHeight;
  uniform float rotationSpeed;
  uniform float spiralTightness;
  uniform float suctionStrength;
  uniform float liftForce;
  uniform float coreDensity;
  uniform float edgeDensity;
  uniform float tiltAmount;
  uniform float tiltDirection;
  uniform float maxVortexHeight;

  varying vec2 vUv;
  varying float vCharIndex;
  varying float vAlpha;
  varying float vMorphProgress;
  varying float vGlowIntensity;

  //   
  vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
  vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
  vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
  vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }

  float snoise(vec3 v) {
    const vec2 C = vec2(1.0/6.0, 1.0/3.0);
    const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);
    vec3 i = floor(v + dot(v, C.yyy));
    vec3 x0 = v - i + dot(i, C.xxx);
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min(g.xyz, l.zxy);
    vec3 i2 = max(g.xyz, l.zxy);
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy;
    vec3 x3 = x0 - D.yyy;
    i = mod289(i);
    vec4 p = permute(permute(permute(
              i.z + vec4(0.0, i1.z, i2.z, 1.0))
            + i.y + vec4(0.0, i1.y, i2.y, 1.0))
            + i.x + vec4(0.0, i1.x, i2.x, 1.0));
    float n_ = 0.142857142857;
    vec3 ns = n_ * D.wyz - D.xzx;
    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);
    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_);
    vec4 x = x_ * ns.x + ns.yyyy;
    vec4 y = y_ * ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);
    vec4 b0 = vec4(x.xy, y.xy);
    vec4 b1 = vec4(x.zw, y.zw);
    vec4 s0 = floor(b0) * 2.0 + 1.0;
    vec4 s1 = floor(b1) * 2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));
    vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy;
    vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww;
    vec3 p0 = vec3(a0.xy, h.x);
    vec3 p1 = vec3(a0.zw, h.y);
    vec3 p2 = vec3(a1.xy, h.z);
    vec3 p3 = vec3(a1.zw, h.w);
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2,p2), dot(p3,p3)));
    p0 *= norm.x; p1 *= norm.y; p2 *= norm.z; p3 *= norm.w;
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot(m*m, vec4(dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3)));
  }

  void main() {
    vUv = uv;
    vCharIndex = charIndex;
    vMorphProgress = morphProgress;

    //   
    vec3 currentTarget = mix(prevTargetPos, targetPos, transitionProgress);
    vec3 pos = position;

    // ===== Curl Noise    (sin/cos  -  ) =====
    // CurlNoiseCanvas   

    float layerEffect = mix(
      mix(lowLayerEffect, midLayerEffect, heightLayer),
      highLayerEffect,
      heightLayer * heightLayer
    );

    // Curl noise :    
    // curl(f) = (df/dy, -df/dx)  sin/cos 
    float noiseScale = 0.008; //  
    float flowSpeed = time * 0.4; //  

    //  curl   (3 )
    float px1 = pos.x * noiseScale + flowSpeed;
    float py1 = pos.y * noiseScale + flowSpeed * 0.7;
    float pz1 = pos.z * noiseScale * 0.5;

    //    (  )
    float curl1x = sin(py1 * 2.0 + pz1) * cos(px1 * 1.3) - sin(pz1 * 1.5 + px1) * cos(py1 * 0.8);
    float curl1y = sin(pz1 * 2.0 + px1) * cos(py1 * 1.3) - sin(px1 * 1.5 + py1) * cos(pz1 * 0.8);
    float curl1z = sin(px1 * 2.0 + py1) * cos(pz1 * 1.3) - sin(py1 * 1.5 + pz1) * cos(px1 * 0.8);

    //    ( )
    float px2 = pos.x * noiseScale * 2.0 + flowSpeed * 1.3;
    float py2 = pos.y * noiseScale * 2.0 + flowSpeed * 0.9;
    float curl2x = sin(py2 * 2.5 + random * 3.0) * cos(px2 * 1.8) * 0.5;
    float curl2y = sin(px2 * 2.5 + random * 2.0) * cos(py2 * 1.8) * 0.5;

    //    ( )
    float px3 = pos.x * noiseScale * 4.0 + flowSpeed * 2.0;
    float py3 = pos.y * noiseScale * 4.0 + flowSpeed * 1.5;
    float curl3x = sin(py3 * 3.0) * cos(px3 * 2.5) * 0.25;
    float curl3y = sin(px3 * 3.0) * cos(py3 * 2.5) * 0.25;

    //  curl 
    vec3 curlFlow = vec3(
      curl1x + curl2x + curl3x,
      curl1y + curl2y + curl3y,
      curl1z * 0.3 // z 
    );

    //   (CurlNoiseCanvas flowStrength = 25.0 )
    float flowStrength = 20.0 * (0.6 + heightLayer * 0.4); //   
    vec3 flowOffset = normalize(curlFlow + vec3(0.001)) * flowStrength;

    // Float  (CurlNoiseCanvas  -   amplitude)
    float floatPhase = time * 0.3 + random * 6.28;
    float floatY = sin(floatPhase) * 8.0; // Y amplitude 8.0
    float floatX = cos(time * 0.2 + random * 4.0) * 6.0; // X amplitude 6.0
    float floatZ = sin(time * 0.15 + random * 5.0) * 4.0; // Z amplitude 4.0
    vec3 floatOffset = vec3(floatX, floatY, floatZ);

    //   (  )
    float wavePhase = pos.x * waveScale * 50.0 + pos.y * waveScale * 30.0 + time * waveSpeed;
    float wave = (sin(wavePhase) + cos(wavePhase * 0.7)) * 0.5 * layerEffect * 5.0;

    //   ( )
    float clusterPhase = pos.x * clusterScale * 80.0 + pos.y * clusterScale * 60.0 + time * 0.15 + random * 10.0;
    float cluster = sin(clusterPhase) * clusterStrength * 1.5;

    //   drift   (  )
    float driftReduction = 1.0 - morphProgress * morphProgress * 0.95; //   95% 

    //  : curl flow + float + wave + cluster (  )
    vec3 driftOffset = (flowOffset + floatOffset + vec3(wave, cluster, 0.0)) * driftReduction;

    // ===== /  =====
    float formIntensity = morphProgress * formIntensityMultiplier;

    vec3 toTarget = currentTarget - pos;
    float dist = length(toTarget);
    vec3 dir = normalize(toTarget + vec3(0.001));

    //    (:   )
    float pullStrength = convergenceForce * formIntensity * (1.0 + dist * 0.02);
    vec3 convergence = dir * pullStrength * 25.0; // 15.0  25.0 

    //      (morphProgress    )
    float accuracyBoost = morphProgress * morphProgress * morphProgress; // 3 
    vec3 accuracyCorrection = toTarget * accuracyBoost * 0.15;

    //  (sin   -  ) -    
    float turbReduction = 1.0 - morphProgress * 0.8; //   80% 
    float turbPhase = pos.x * 0.02 + pos.y * 0.015 + time * 0.3 + random * 6.28;
    float turbNoise = sin(turbPhase) * cos(turbPhase * 1.3) * turbulence * formIntensity * turbReduction;
    vec3 turbulenceOffset = vec3(turbNoise, turbNoise * 0.8, turbNoise * 0.5);

    //  -    
    float gustPhase = time * gustFrequency + random * 6.28;
    float gustMask = smoothstep(0.7, 1.0, sin(gustPhase));
    vec3 gustOffset = vec3(
      sin(gustPhase * 2.3) * gustStrength,
      cos(gustPhase * 1.7) * gustStrength * 0.6,
      0.0
    ) * gustMask * formIntensity * 0.3 * turbReduction;

    //   -    
    float breath = sin(time * 1.5 + random * 6.28) * aliveBreathScale * morphProgress * (1.0 - morphProgress * 0.7);
    vec3 breathOffset = dir * breath;

    //   (sin   -  ) -    
    float vibPhaseX = pos.x * 0.1 + pos.y * 0.08 + time * 3.0;
    float vibPhaseY = pos.x * 0.08 + pos.y * 0.1 + time * 3.0 + 1.57;
    vec3 vibration = vec3(
      sin(vibPhaseX) * cos(vibPhaseX * 0.5),
      sin(vibPhaseY) * cos(vibPhaseY * 0.5),
      0.0
    ) * vibrationScale * morphProgress * turbReduction;

    // =====   =====
    vec3 vortexOffset = vec3(0.0);
    if (vortexActive > 0.5 && vortexStrength > 0.01) {
      vec2 toVortex = pos.xy - vortexCenter;
      float vDist = length(toVortex);

      float influence = smoothstep(vortexRadius * 1.5, 0.0, vDist);
      influence *= vortexStrength;

      float angle = atan(toVortex.y, toVortex.x);
      float rotAngle = angle + time * rotationSpeed * (1.0 + (1.0 - vDist / vortexRadius) * 2.0);

      float spiralR = vDist * (1.0 - influence * spiralTightness);
      vec2 rotatedPos = vec2(cos(rotAngle), sin(rotAngle)) * spiralR;

      vec2 suctionDir = -normalize(toVortex + vec2(0.001));
      float suctionForce = suctionStrength * influence * (1.0 - vDist / vortexRadius);

      float heightProgress = vDist / vortexRadius;
      float targetHeight = vortexHeight * (1.0 - heightProgress * heightProgress);
      float currentLift = (targetHeight - pos.z) * liftForce * influence;

      float tiltOffset = sin(angle + tiltDirection) * tiltAmount * vortexHeight * influence;

      vortexOffset = vec3(
        (rotatedPos.x - toVortex.x) * influence + suctionDir.x * suctionForce,
        (rotatedPos.y - toVortex.y) * influence + suctionDir.y * suctionForce,
        currentLift + tiltOffset
      );
    }

    // =====   =====
    vec3 alivePos = pos + driftOffset;

    //  : morphProgress    
    //     (   )
    float vibX = sin(time * 2.5 + random * 6.28) * 1.5;
    float vibY = cos(time * 2.0 + random * 5.0) * 1.2;
    float vibZ = sin(time * 1.5 + random * 4.0) * 0.8;
    vec3 formedPos = currentTarget + vec3(vibX, vibY, vibZ);

    //  : morphProgress  alivePos  formedPos
    vec3 blendedPos = mix(alivePos, formedPos, morphProgress);

    //    (  )
    blendedPos += vortexOffset;

    // =====   =====
    float baseAlpha = mix(0.7, 0.4, heightLayer);
    float morphAlpha = 1.0 - morphProgress * 0.2;
    float distAlpha = smoothstep(300.0, 0.0, dist) * morphProgress + (1.0 - morphProgress);
    vAlpha = baseAlpha * morphAlpha * distAlpha;

    // =====   =====
    vec4 mvPosition = modelViewMatrix * vec4(blendedPos, 1.0);
    gl_Position = projectionMatrix * mvPosition;

    //   
    float sizeMod = 1.0 + morphProgress * 0.3;
    gl_PointSize = particleSize * sizeMod * (200.0 / -mvPosition.z);

    // =====      =====
    //   :   (mvPosition.z  )
    // mvPosition.z :  -250 ~ -150 ( z=200 )
    float depthNormalized = clamp((-mvPosition.z - 150.0) / 100.0, 0.0, 1.0); // 0() ~ 1()
    float depthFactor = 1.0 - depthNormalized; // 0() ~ 1()

    // =====     (sin   -  ) =====
    //      (random   )
    float glowPhase1 = random * 50.0 + time * 0.5;
    float glowPhase2 = random * 30.0 + time * 0.3;
    float glowNoise = sin(glowPhase1) * cos(glowPhase2) + sin(glowPhase1 * 0.7) * 0.5; // -1.5 ~ 1.5
    float glowThreshold = 0.9; //  20%  (glowNoise  -1.5~1.5,  3.0  0.6)

    //    (  )
    bool isGlowing = glowNoise > glowThreshold;

    if (isGlowing) {
      //  :    (1.5 ~ 3.0)
      float glowStrength = (glowNoise - glowThreshold) / (1.5 - glowThreshold); // 0 ~ 1
      vGlowIntensity = (1.5 + depthFactor * 1.5) * (0.7 + glowStrength * 0.3);
    } else {
      //  :  0.5,  0.15
      vGlowIntensity = 0.15 + depthFactor * 0.35;
    }
  }
`,ewe=`
  uniform sampler2D charAtlas;
  uniform float charsPerRow;
  uniform float charRows;
  uniform float time;

  uniform vec3 colorPrimary;
  uniform vec3 colorSecondary;
  uniform vec3 morphColorTint;

  varying vec2 vUv;
  varying float vCharIndex;
  varying float vAlpha;
  varying float vMorphProgress;
  varying float vGlowIntensity;

  void main() {
    //  UV 
    vec2 pointUV = gl_PointCoord;

    //   UV 
    float charIdx = floor(vCharIndex);
    float col = mod(charIdx, charsPerRow);
    float row = floor(charIdx / charsPerRow);

    vec2 charUV = vec2(
      (col + pointUV.x) / charsPerRow,
      (row + (1.0 - pointUV.y)) / charRows
    );

    vec4 texColor = texture2D(charAtlas, charUV);

    //   - /  
    vec3 baseColor = mix(colorPrimary, colorSecondary, pointUV.y * 0.5 + 0.25);

    //    
    baseColor = mix(baseColor, baseColor + morphColorTint, vMorphProgress * 0.5);

    //  
    float flicker = 0.9 + 0.1 * sin(time * 8.0 + vCharIndex * 1.5);
    baseColor *= flicker;

    //  :   (bloom threshold    )
    // vGlowIntensity    (1.0 = , 2.0+ = )
    baseColor *= vGlowIntensity;

    //  
    float alpha = texColor.a * vAlpha;

    if (alpha < 0.05) discard;

    gl_FragColor = vec4(baseColor, alpha);
  }
`;function twe({afterImageDamp:t=.5,bloomStrength:e=.6,bloomRadius:n=.5,bloomThreshold:r=.4}){const i=C.useRef(null),{targetMorphRef:s,contentRef:a,contentVersion:o,vortexRef:l}=Hy(),c=C.useRef(0),u=C.useRef(1),h=C.useRef(null);C.useEffect(()=>{c.current=s.current},[s]);const f=EY;return C.useEffect(()=>{const p=h.current;if(!p)return;const m=p.getAttribute("targetPos");m&&p.setAttribute("prevTargetPos",new xr(new Float32Array(m.array),3)),p.setAttribute("targetPos",new xr(T0(a.current),3)),u.current=0},[o,a]),C.useEffect(()=>{if(!i.current)return;const p=i.current,m=new xI,v=new lu(60,window.innerWidth/window.innerHeight,.1,1e3);v.position.set(0,0,200),v.lookAt(0,0,0);const A=new bI({antialias:!0,alpha:!0,powerPreference:"high-performance"});A.setPixelRatio(Math.min(window.devicePixelRatio,2)),A.setSize(window.innerWidth,window.innerHeight),p.appendChild(A.domElement);const x=JSe(),E=12,w=Math.ceil(qx.length/E),B=new pd,D=new Float32Array(Hh*3),T=new Float32Array(Hh),M=new Float32Array(Hh),R=new Float32Array(Hh),k=new Float32Array(Hh),L=new Float32Array(Hh),F=.15;for(let ae=0;ae<Hh;ae++){const se=ae*3;D[se]=(Math.random()-.5)*550,D[se+1]=(Math.random()-.5)*380,D[se+2]=(Math.random()-.5)*100,T[ae]=Math.floor(Math.random()*qx.length),M[ae]=Math.random();const fe=Math.random();R[ae]=fe*fe;const Ee=12+Math.random()*8;k[ae]=Ee*(1-R[ae]*.3),Math.random()<F?L[ae]=1:L[ae]=0}const z=T0(a.current);B.setAttribute("position",new xr(D,3)),B.setAttribute("charIndex",new xr(T,1)),B.setAttribute("random",new xr(M,1)),B.setAttribute("heightLayer",new xr(R,1)),B.setAttribute("particleSize",new xr(k,1)),B.setAttribute("glowIntensity",new xr(L,1)),B.setAttribute("targetPos",new xr(z,3)),B.setAttribute("prevTargetPos",new xr(new Float32Array(z),3)),h.current=B;const G=new mt(0,1,.7),V=new mt(0,.8,.5),q=new mt(.1,.2,.1),O=f.shaderTweaks??{},H=new Ta({uniforms:{charAtlas:{value:x},charsPerRow:{value:E},charRows:{value:w},time:{value:0},morphProgress:{value:c.current},transitionProgress:{value:u.current},colorPrimary:{value:G},colorSecondary:{value:V},morphColorTint:{value:q},vortexActive:{value:0},vortexCenter:{value:new Ir(0,0)},vortexStrength:{value:0},vortexRadius:{value:f.vortex.minRadius},vortexHeight:{value:0},primarySpeed:{value:f.drift.primarySpeed},primaryDirection:{value:f.drift.primaryDirection},lowLayerEffect:{value:f.drift.lowLayerEffect},midLayerEffect:{value:f.drift.midLayerEffect},highLayerEffect:{value:f.drift.highLayerEffect},waveSpeed:{value:f.drift.waveSpeed},waveScale:{value:f.drift.waveScale},clusterStrength:{value:f.drift.clusterStrength},clusterScale:{value:f.drift.clusterScale},turbulence:{value:f.form.turbulence},gustStrength:{value:f.form.gustStrength},gustFrequency:{value:f.form.gustFrequency},convergenceForce:{value:f.form.convergenceForce},rotationSpeed:{value:f.vortex.rotationSpeed},spiralTightness:{value:f.vortex.spiralTightness},suctionStrength:{value:f.vortex.suctionStrength},liftForce:{value:f.vortex.liftForce},coreDensity:{value:f.vortex.coreDensity},edgeDensity:{value:f.vortex.edgeDensity},tiltAmount:{value:f.vortex.tiltAmount},tiltDirection:{value:f.vortex.tiltDirection},maxVortexHeight:{value:f.vortex.maxHeight},formIntensityMultiplier:{value:O.formIntensityMultiplier??4},aliveBreathScale:{value:O.aliveBreathScale??2.5},vibrationScale:{value:O.vibrationScale??.7}},vertexShader:ZSe,fragmentShader:ewe,transparent:!0,blending:Ab,depthWrite:!1});m.add(new zM(B,H));const K=new CI(A);K.addPass(new EI(m,v)),K.addPass(new tF(t));const X=new R0(new Ir(window.innerWidth,window.innerHeight),e,n,r);K.addPass(X),K.addPass(new SI);const re=new Float32Array(Hh);for(let ae=0;ae<Hh;ae++)re[ae]=Math.random()*180;const J=new jE;let Z;const ee=O.vortexFadeMultiplier??160,te=()=>{const ae=J.getDelta();H.uniforms.time.value+=ae;const se=s.current>c.current?pI:gI;c.current+=(s.current-c.current)*se,H.uniforms.morphProgress.value=c.current,u.current+=(1-u.current)*CY,H.uniforms.transitionProgress.value=u.current;const fe=l.current;!fe.active&&fe.strength>0&&(fe.strength=Math.max(0,fe.strength-j8),fe.radius=f.vortex.minRadius+fe.strength*ee,fe.height=fe.strength*f.vortex.maxHeight),H.uniforms.vortexActive.value=fe.strength>.01?1:0,H.uniforms.vortexCenter.value.set(fe.x,fe.y),H.uniforms.vortexStrength.value=fe.strength,H.uniforms.vortexRadius.value=fe.radius,H.uniforms.vortexHeight.value=fe.height;const Ee=B.getAttribute("charIndex");let Be=!1;const _e=Math.ceil(Hh/10),Ce=Math.floor(Math.random()*Hh);for(let Se=0;Se<_e;Se++){const Me=(Ce+Se)%Hh;re[Me]-=ae*60*10,re[Me]<=0&&(Ee.array[Me]=Math.floor(Math.random()*qx.length),re[Me]=120+Math.random()*180,Be=!0)}Be&&(Ee.needsUpdate=!0),K.render(),Z=requestAnimationFrame(te)};te();const oe=()=>{v.aspect=window.innerWidth/window.innerHeight,v.updateProjectionMatrix(),A.setSize(window.innerWidth,window.innerHeight),K.setSize(window.innerWidth,window.innerHeight),X.resolution.set(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",oe),()=>{h.current=null,cancelAnimationFrame(Z),window.removeEventListener("resize",oe),p.removeChild(A.domElement),B.dispose(),H.dispose(),x.dispose(),K.dispose(),A.dispose()}},[s,a,l,f,t,e,n,r]),d.jsx("div",{ref:i,style:{position:"fixed",inset:0,zIndex:-1,pointerEvents:"none"}})}const pB=1.618033988749895,j5=6,nwe=60,dX=12,Yx=14,rwe=12e3,s$=3e3,gB=1500,Ix=4,px=64,hX="",fX="",iwe=(()=>{let t="";for(const e of hX)for(const n of fX){const r=44032+(e.charCodeAt(0)-12593)*588+(n.charCodeAt(0)-12623)*28;r>=44032&&r<=55203&&(t+=String.fromCharCode(r))}return t})(),swe="",awe="",owe="",lwe="",cwe="",_1="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz{}[]()<>+-*/=!?;:.,@#$%^&|~`_\\\"'"+swe+awe+hX+fX+iwe+owe+lwe+cwe,a$={red:new Gr(13378082),blue:new Gr(1710796),yellow:new Gr(15259680),white:new Gr(16119280),black:new Gr(1710618)},o$=[{color:"white",weight:.5},{color:"red",weight:.15},{color:"blue",weight:.15},{color:"yellow",weight:.14},{color:"black",weight:.06}];function uwe(){const e=Math.ceil(_1.length/16),n=16*px,r=e*px,i=document.createElement("canvas");i.width=n,i.height=r;const s=i.getContext("2d");s.clearRect(0,0,n,r),s.font=`bold ${px*.7}px "Fira Code", "Source Code Pro", "Consolas", monospace`,s.textAlign="center",s.textBaseline="middle";for(let o=0;o<_1.length;o++){const l=o%16,c=Math.floor(o/16),u=l*px+px/2,h=c*px+px/2;s.shadowColor="rgba(255, 255, 255, 0.5)",s.shadowBlur=2,s.fillStyle="#ffffff",s.fillText(_1[o],u,h),s.shadowBlur=0,s.fillText(_1[o],u,h)}const a=new J8(i);return a.minFilter=_l,a.magFilter=_l,a.needsUpdate=!0,a}function l$(){const t=o$.reduce((n,r)=>n+r.weight,0);let e=Math.random()*t;for(const{color:n,weight:r}of o$)if(e-=r,e<=0)return a$[n].clone();return a$.white.clone()}function I1(t,e,n,r,i,s=nwe){if(i===0||n<s*1.5||r<s*1.5)return[{x:t,y:e,width:n,height:r,color:l$()}];const a=Math.max(0,(j5-i)*.1);if(Math.random()<a)return[{x:t,y:e,width:n,height:r,color:l$()}];const o=n/r;if(o>1.2?Math.random()>.2:o<.8?Math.random()>.8:Math.random()>.5){const u=Math.random()>.4?Math.random()>.5?1/pB:1-1/pB:Math.random()*.4+.3,h=n*u;return[...I1(t,e,h-Ix/2,r,i-1,s),...I1(t+h+Ix/2,e,n-h-Ix/2,r,i-1,s)]}else{const u=Math.random()>.4?Math.random()>.5?1/pB:1-1/pB:Math.random()*.4+.3,h=r*u;return[...I1(t,e,n,h-Ix/2,i-1,s),...I1(t,e+h+Ix/2,n,r-h-Ix/2,i-1,s)]}}const c$=3.5;function u$(t,e){const n=[];for(let A=0;A<t.length;A+=3){const x=t[A]*c$,E=t[A+1]*c$,w=t[A+2];(x!==0||E!==0)&&n.push({x,y:E,z:w})}if(n.length===0)return new Float32Array(e*3);let r=1/0,i=-1/0,s=1/0,a=-1/0;for(const A of n)r=Math.min(r,A.x),i=Math.max(i,A.x),s=Math.min(s,A.y),a=Math.max(a,A.y);const o=i-r,l=a-s,c=Yx,u=Math.max(1,Math.floor(o/c)),h=Math.max(1,Math.floor(l/c)),f=new Map;for(const A of n){const x=Math.floor((A.x-r)/c),E=Math.floor((A.y-s)/c);f.set(`${x},${E}`,!0)}const p=new Float32Array(e*3);let m=0;const v=[];for(let A=0;A<=h;A++)for(let x=0;x<=u;x++)f.has(`${x},${A}`)&&v.push({col:x,row:A});for(let A=0;A<e&&m<e*3;A++){const x=v[A%v.length];x&&(p[m]=r+x.col*c+c/2,p[m+1]=s+x.row*c+c/2,p[m+2]=(Math.random()-.5)*5),m+=3}return p}function d$(t,e,n){const r=[];for(const l of t){const c=Ix+dX/2,u=l.width-c*2,h=l.height-c*2;if(u<Yx||h<Yx)continue;const f=Math.floor(u/Yx),p=Math.floor(h/Yx),m=u/Math.max(1,f),v=h/Math.max(1,p);for(let A=0;A<p;A++)for(let x=0;x<f;x++){const E=l.x+c+x*m+m/2,w=l.y+c+A*v+v/2,B=E-e/2,D=-(w-n/2),T=Math.floor(Math.random()*_1.length);r.push({x:B,y:D,color:l.color,charIndex:T})}}const i=r.length,s=new Float32Array(i*3),a=new Float32Array(i*3),o=new Float32Array(i);for(let l=0;l<i;l++){const c=r[l];s[l*3]=c.x,s[l*3+1]=c.y,s[l*3+2]=0,a[l*3]=c.color.r,a[l*3+1]=c.color.g,a[l*3+2]=c.color.b,o[l]=c.charIndex}return{positions:s,colors:a,charIndices:o,count:i}}const dwe=`
  attribute vec3 color;
  attribute float opacity;
  attribute float size;
  attribute float charIndex;
  attribute vec3 targetPosition;
  attribute vec3 targetColor;
  attribute float targetCharIndex;
  attribute float moveDelay;
  attribute vec3 morphTargetPos;
  attribute vec3 prevMorphTargetPos;

  uniform float morphProgress;
  uniform float time;
  uniform float charsPerRow;
  uniform float maxDelay;
  uniform float transitionDuration;
  uniform float hoverMorphProgress;
  uniform float morphTransitionProgress;

  varying vec3 vColor;
  varying float vOpacity;
  varying float vCharIndex;

  void main() {
    //      
    float totalDuration = transitionDuration + maxDelay;
    float particleStart = moveDelay / totalDuration;
    float particleEnd = (moveDelay + transitionDuration) / totalDuration;

    //     (0~1)
    float localProgress = clamp((morphProgress - particleStart) / (particleEnd - particleStart), 0.0, 1.0);

    // easeInOutQuad
    float easedProgress = localProgress < 0.5
      ? 2.0 * localProgress * localProgress
      : 1.0 - pow(-2.0 * localProgress + 2.0, 2.0) / 2.0;

    //    (/ )
    vec3 basePos;
    vec3 diff = targetPosition - position;

    if (easedProgress < 0.5) {
      // : X 
      float xProgress = easedProgress * 2.0;
      basePos.x = position.x + diff.x * xProgress;
      basePos.y = position.y;
      basePos.z = position.z;
    } else {
      // : Y 
      float yProgress = (easedProgress - 0.5) * 2.0;
      basePos.x = targetPosition.x;
      basePos.y = position.y + diff.y * yProgress;
      basePos.z = position.z;
    }

    //    (    )
    //     
    float morphTransStart = moveDelay / totalDuration;
    float morphTransEnd = (moveDelay + transitionDuration) / totalDuration;
    float localMorphTransProgress = clamp(
      (morphTransitionProgress - morphTransStart) / (morphTransEnd - morphTransStart),
      0.0, 1.0
    );

    // easeInOutQuad for smooth transition
    float easedMorphTransProgress = localMorphTransProgress < 0.5
      ? 2.0 * localMorphTransProgress * localMorphTransProgress
      : 1.0 - pow(-2.0 * localMorphTransProgress + 2.0, 2.0) / 2.0;

    vec3 currentMorphTarget;
    vec3 morphTransDiff = morphTargetPos - prevMorphTargetPos;

    if (easedMorphTransProgress < 0.5) {
      // : X 
      float xTransProgress = easedMorphTransProgress * 2.0;
      currentMorphTarget.x = prevMorphTargetPos.x + morphTransDiff.x * xTransProgress;
      currentMorphTarget.y = prevMorphTargetPos.y;
      currentMorphTarget.z = prevMorphTargetPos.z;
    } else {
      // : Y 
      float yTransProgress = (easedMorphTransProgress - 0.5) * 2.0;
      currentMorphTarget.x = morphTargetPos.x;
      currentMorphTarget.y = prevMorphTargetPos.y + morphTransDiff.y * yTransProgress;
      currentMorphTarget.z = prevMorphTargetPos.z + morphTransDiff.z * yTransProgress;
    }

    //    (/ ,  )
    vec3 pos;
    vec3 morphDiff = currentMorphTarget - basePos;

    if (hoverMorphProgress < 0.5) {
      // : X 
      float xMorphProgress = hoverMorphProgress * 2.0;
      pos.x = basePos.x + morphDiff.x * xMorphProgress;
      pos.y = basePos.y;
      pos.z = basePos.z;
    } else {
      // : Y 
      float yMorphProgress = (hoverMorphProgress - 0.5) * 2.0;
      pos.x = currentMorphTarget.x;
      pos.y = basePos.y + morphDiff.y * yMorphProgress;
      pos.z = basePos.z + morphDiff.z * yMorphProgress;
    }

    //   (  )
    vColor = mix(color, targetColor, step(0.9, localProgress));
    vOpacity = opacity;
    vCharIndex = mix(charIndex, targetCharIndex, step(0.9, localProgress));

    vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);
    gl_Position = projectionMatrix * mvPosition;
    gl_PointSize = size * (300.0 / -mvPosition.z);
  }
`,hwe=`
  uniform sampler2D charAtlas;
  uniform float charsPerRow;
  uniform float charRows;
  uniform float time;

  varying vec3 vColor;
  varying float vOpacity;
  varying float vCharIndex;

  void main() {
    //   UV 
    float charIdx = floor(vCharIndex);
    float col = mod(charIdx, charsPerRow);
    float row = floor(charIdx / charsPerRow);

    vec2 charUV = vec2(
      (col + gl_PointCoord.x) / charsPerRow,
      (row + (1.0 - gl_PointCoord.y)) / charRows
    );

    vec4 texColor = texture2D(charAtlas, charUV);

    //      
    float alpha = texColor.a * vOpacity;

    if (alpha < 0.1) discard;

    //  
    float flicker = 0.95 + 0.05 * sin(time * 3.0 + vCharIndex * 0.5);

    gl_FragColor = vec4(vColor * flicker, alpha);
  }
`;function fwe({bloomStrength:t=.15,bloomRadius:e=.3,bloomThreshold:n=.9}){const r=C.useRef(null),{targetMorphRef:i,contentRef:s,contentVersion:a}=Hy(),o=C.useRef(null),l=C.useRef(null),c=C.useRef(0),u=C.useRef(1);return C.useEffect(()=>{const h=o.current,f=l.current;if(!h||!f)return;const p=h.getAttribute("morphTargetPos"),m=h.getAttribute("prevMorphTargetPos");if(!p||!m)return;for(let E=0;E<p.array.length;E++)m.array[E]=p.array[E];m.needsUpdate=!0;const v=T0(s.current),A=p.array.length/3,x=u$(v,A);for(let E=0;E<x.length;E++)p.array[E]=x[E];p.needsUpdate=!0,u.current=0},[a,s]),C.useEffect(()=>{if(!r.current)return;const h=r.current,f=window.innerWidth,p=window.innerHeight,m=new xI;m.background=new Gr(1710618);const v=new eF(-f/2,f/2,p/2,-p/2,.1,1e3);v.position.z=100;const A=new bI({antialias:!0,alpha:!1});A.setSize(f,p),A.setPixelRatio(Math.min(window.devicePixelRatio,2)),h.appendChild(A.domElement);const x=uwe(),E=16,w=Math.ceil(_1.length/E),B=new CI(A);B.addPass(new EI(m,v));const D=new R0(new Ir(f,p),t,e,n);B.addPass(D),B.addPass(new SI);let T=I1(0,0,f,p,j5),M=d$(T,f,p),R=[],k=null;const L=Math.floor(f/Yx*(p/Yx)*1.5),F=new pd,z=Math.max(L,Ap),G=new Float32Array(z*3),V=new Float32Array(z*3),q=new Float32Array(z),O=new Float32Array(z),H=new Float32Array(z),K=new Float32Array(z*3),X=new Float32Array(z*3),re=new Float32Array(z),J=new Float32Array(z),Z=new Float32Array(z*3),ee=new Float32Array(z*3);G.set(M.positions),V.set(M.colors),H.set(M.charIndices);for(let $e=0;$e<M.count;$e++)q[$e]=.95,O[$e]=dX,J[$e]=Math.random()*gB;K.set(M.positions),X.set(M.colors),re.set(M.charIndices);const te=T0(s.current),oe=u$(te,z);Z.set(oe),ee.set(oe),F.setAttribute("position",new xr(G,3)),F.setAttribute("color",new xr(V,3)),F.setAttribute("opacity",new xr(q,1)),F.setAttribute("size",new xr(O,1)),F.setAttribute("charIndex",new xr(H,1)),F.setAttribute("targetPosition",new xr(K,3)),F.setAttribute("targetColor",new xr(X,3)),F.setAttribute("targetCharIndex",new xr(re,1)),F.setAttribute("moveDelay",new xr(J,1)),F.setAttribute("morphTargetPos",new xr(Z,3)),F.setAttribute("prevMorphTargetPos",new xr(ee,3)),F.setDrawRange(0,M.count),o.current=F;const ae=new Ta({uniforms:{morphProgress:{value:1},time:{value:0},charAtlas:{value:x},charsPerRow:{value:E},charRows:{value:w},maxDelay:{value:gB},transitionDuration:{value:s$},hoverMorphProgress:{value:0},morphTransitionProgress:{value:1}},vertexShader:dwe,fragmentShader:hwe,transparent:!0,depthWrite:!1});l.current=ae;const se=new zM(F,ae);m.add(se);const fe=new jE;let Ee,Be=0,_e=1,Ce=0,Se=!1;const Me=()=>{Ee=requestAnimationFrame(Me);const $e=fe.getElapsedTime(),qe=$e*1e3;ae.uniforms.time.value=$e;const ft=i.current>c.current?pI:gI;c.current+=(i.current-c.current)*ft,ae.uniforms.hoverMorphProgress.value=c.current;const Ie=.008;u.current<1&&(u.current=Math.min(1,u.current+Ie),ae.uniforms.morphTransitionProgress.value=u.current);const ht=s$+gB;if(Se&&k){const Ue=qe-Ce;if(_e=Math.min(1,Ue/ht),ae.uniforms.morphProgress.value=_e,_e>=1){Se=!1,T=R,M=k;const xt=F.getAttribute("position"),ve=F.getAttribute("color"),ue=F.getAttribute("charIndex");xt.array.set(k.positions),ve.array.set(k.colors),ue.array.set(k.charIndices),xt.needsUpdate=!0,ve.needsUpdate=!0,ue.needsUpdate=!0,F.setDrawRange(0,M.count)}}if(qe-Be>rwe&&!Se){Be=qe,R=I1(0,0,f,p,j5),k=d$(R,f,p);const Ue=F.getAttribute("targetPosition"),xt=F.getAttribute("targetColor"),ve=F.getAttribute("targetCharIndex"),ue=F.getAttribute("moveDelay"),ke=Math.max(M.count,k.count);F.setDrawRange(0,ke);for(let He=0;He<ke;He++){const Qe=He*3;ue.array[He]=Math.random()*gB,He<k.count?(Ue.array[Qe]=k.positions[Qe],Ue.array[Qe+1]=k.positions[Qe+1],Ue.array[Qe+2]=k.positions[Qe+2],xt.array[Qe]=k.colors[Qe],xt.array[Qe+1]=k.colors[Qe+1],xt.array[Qe+2]=k.colors[Qe+2],ve.array[He]=k.charIndices[He],q[He]=.95):(Ue.array[Qe]=(Math.random()-.5)*f,Ue.array[Qe+1]=(Math.random()-.5)*p,Ue.array[Qe+2]=0,xt.array[Qe]=0,xt.array[Qe+1]=0,xt.array[Qe+2]=0,ve.array[He]=0,q[He]=0)}Ue.needsUpdate=!0,xt.needsUpdate=!0,ve.needsUpdate=!0,ue.needsUpdate=!0,F.getAttribute("opacity").needsUpdate=!0,Se=!0,Ce=qe,_e=0,ae.uniforms.morphProgress.value=0}B.render()};Me();const ce=()=>{const $e=window.innerWidth,qe=window.innerHeight;v.left=-$e/2,v.right=$e/2,v.top=qe/2,v.bottom=-qe/2,v.updateProjectionMatrix(),A.setSize($e,qe),B.setSize($e,qe),D.setSize($e,qe)};return window.addEventListener("resize",ce),()=>{o.current=null,l.current=null,cancelAnimationFrame(Ee),window.removeEventListener("resize",ce),m.remove(se),F.dispose(),ae.dispose(),x.dispose(),A.dispose(),B.dispose(),h.contains(A.domElement)&&h.removeChild(A.domElement)}},[t,e,n,i,s]),d.jsx("div",{ref:r,style:{position:"fixed",inset:0,zIndex:-1,pointerEvents:"none"}})}function pwe(){const{effectType:t}=Hy();return t==="matrix"?d.jsx(GSe,{bloomStrength:.8,bloomRadius:.5,bloomThreshold:.2,speedMultiplier:1}):t==="code"?d.jsx(twe,{afterImageDamp:.5,bloomStrength:.6,bloomRadius:.5,bloomThreshold:.4}):t==="art"?d.jsx(fwe,{bloomStrength:.15,bloomRadius:.3,bloomThreshold:.9}):t==="curl"?d.jsx(kSe,{afterImageDamp:.35}):d.jsx(MSe,{preset:EY,afterImageDamp:.65,bloomStrength:.4,bloomRadius:.6,bloomThreshold:.6})}function wg({children:t,size:e="md",variant:n="default",onClick:r,className:i=""}){const{setHoverContent:s}=Hy(),a=C.useRef(null),o=C.useCallback(()=>{if(typeof t=="string"){s({type:"text",value:t});return}if(we.isValidElement(t)&&a.current){const c=a.current.querySelector("svg");if(c){const u=c.outerHTML;s({type:"svg",value:u});return}}if(Array.isArray(t)){const c=t[0];if(typeof c=="string"){s({type:"text",value:c});return}if(a.current){const u=a.current.querySelector("svg");if(u){const h=u.outerHTML;s({type:"svg",value:h});return}}}},[t,s]),l=C.useCallback(()=>{s(null)},[s]);return d.jsx("button",{ref:a,className:`particle-button particle-button-${n} particle-button-${e} ${i}`,onClick:r,onMouseEnter:o,onMouseLeave:l,children:t})}function uf({title:t,icon:e,actions:n,className:r=""}){return d.jsxs("div",{className:`panel-header ${r}`.trim(),children:[d.jsxs("h3",{className:"panel-title",children:[e&&d.jsx("span",{className:"panel-icon",children:e}),t]}),n&&d.jsx("div",{className:"panel-actions",children:n})]})}const h$=t=>{let e;const n=new Set,r=(c,u)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const f=e;e=u??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(p=>p(e,f))}},i=()=>e,o={setState:r,getState:i,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(r,i,o);return o},gwe=(t=>t?h$(t):h$),mwe=t=>t;function Awe(t,e=mwe){const n=we.useSyncExternalStore(t.subscribe,we.useCallback(()=>e(t.getState()),[t,e]),we.useCallback(()=>e(t.getInitialState()),[t,e]));return we.useDebugValue(n),n}const f$=t=>{const e=gwe(t),n=r=>Awe(e,r);return Object.assign(n,e),n},Jl=(t=>t?f$(t):f$),p$={BASE_URL:"/xstudio/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxpbHhwc2N3aXFnZ3htZHJvc2huIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU0NzI1NjYsImV4cCI6MjA3MTA0ODU2Nn0.XhCb-gSV9IM8w355prG4ebgKFHU4yasR3eXg3dr7_60",VITE_SUPABASE_URL:"https://lilxpscwiqggxmdroshn.supabase.co"},T_=new Map,mB=t=>{const e=T_.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},ywe=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=T_.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return T_.set(n.name,i),{type:"tracked",store:t,...i}},vwe=(t,e)=>{if(e===void 0)return;const n=T_.get(t);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&T_.delete(t))},xwe=t=>{var e,n;if(!t)return;const r=t.split(`
`),i=r.findIndex(a=>a.includes("api.setState"));if(i<0)return;const s=((e=r[i+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(s))==null?void 0:n[1]},bwe=(t,e={})=>(n,r,i)=>{const{enabled:s,anonymousActionType:a,store:o,...l}=e;let c;try{c=(s??(p$?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!c)return t(n,r,i);const{connection:u,...h}=ywe(o,c,l);let f=!0;i.setState=((v,A,x)=>{const E=n(v,A);if(!f)return E;const w=x===void 0?{type:a||xwe(new Error().stack)||"anonymous"}:typeof x=="string"?{type:x}:x;return o===void 0?(u?.send(w,r()),E):(u?.send({...w,type:`${o}/${w.type}`},{...mB(l.name),[o]:i.getState()}),E)}),i.devtools={cleanup:()=>{u&&typeof u.unsubscribe=="function"&&u.unsubscribe(),vwe(l.name,o)}};const p=(...v)=>{const A=f;f=!1,n(...v),f=A},m=t(i.setState,r,i);if(h.type==="untracked"?u?.init(m):(h.stores[h.store]=i,u?.init(Object.fromEntries(Object.entries(h.stores).map(([v,A])=>[v,v===h.store?m:A.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let v=!1;const A=i.dispatch;i.dispatch=(...x)=>{(p$?"production":void 0)!=="production"&&x[0].type==="__setState"&&!v&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),v=!0),A(...x)}}return u.subscribe(v=>{var A;switch(v.type){case"ACTION":if(typeof v.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return mR(v.payload,x=>{if(x.type==="__setState"){if(o===void 0){p(x.state);return}Object.keys(x.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const E=x.state[o];if(E==null)return;JSON.stringify(i.getState())!==JSON.stringify(E)&&p(E);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(x)});case"DISPATCH":switch(v.payload.type){case"RESET":return p(m),o===void 0?u?.init(i.getState()):u?.init(mB(l.name));case"COMMIT":if(o===void 0){u?.init(i.getState());return}return u?.init(mB(l.name));case"ROLLBACK":return mR(v.state,x=>{if(o===void 0){p(x),u?.init(i.getState());return}p(x[o]),u?.init(mB(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return mR(v.state,x=>{if(o===void 0){p(x);return}JSON.stringify(i.getState())!==JSON.stringify(x[o])&&p(x[o])});case"IMPORT_STATE":{const{nextLiftedState:x}=v.payload,E=(A=x.computedStates.slice(-1)[0])==null?void 0:A.state;if(!E)return;p(o===void 0?E:E[o]),u?.send(null,x);return}case"PAUSE_RECORDING":return f=!f}return}}),m},Cwe=bwe,mR=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)},Ewe=t=>(e,n,r)=>{const i=r.subscribe;return r.subscribe=((a,o,l)=>{let c=a;if(o){const u=l?.equalityFn||Object.is;let h=a(r.getState());c=f=>{const p=a(f);if(!u(h,p)){const m=h;o(h=p,m)}},l?.fireImmediately&&o(h,h)}return i(c)}),t(e,n,r)},nF=Ewe;function Swe(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const a=l=>l===null?null:JSON.parse(l,void 0),o=(s=n.getItem(i))!=null?s:null;return o instanceof Promise?o.then(a):a(o)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const O5=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return O5(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return O5(r)(n)}}}},wwe=(t,e)=>(n,r,i)=>{let s={storage:Swe(()=>localStorage),partialize:v=>v,version:0,merge:(v,A)=>({...A,...v}),...e},a=!1;const o=new Set,l=new Set;let c=s.storage;if(!c)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...v)},r,i);const u=()=>{const v=s.partialize({...r()});return c.setItem(s.name,{state:v,version:s.version})},h=i.setState;i.setState=(v,A)=>(h(v,A),u());const f=t((...v)=>(n(...v),u()),r,i);i.getInitialState=()=>f;let p;const m=()=>{var v,A;if(!c)return;a=!1,o.forEach(E=>{var w;return E((w=r())!=null?w:f)});const x=((A=s.onRehydrateStorage)==null?void 0:A.call(s,(v=r())!=null?v:f))||void 0;return O5(c.getItem.bind(c))(s.name).then(E=>{if(E)if(typeof E.version=="number"&&E.version!==s.version){if(s.migrate){const w=s.migrate(E.state,E.version);return w instanceof Promise?w.then(B=>[!0,B]):[!0,w]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,E.state];return[!1,void 0]}).then(E=>{var w;const[B,D]=E;if(p=s.merge(D,(w=r())!=null?w:f),n(p,!0),B)return u()}).then(()=>{x?.(p,void 0),p=r(),a=!0,l.forEach(E=>E(p))}).catch(E=>{x?.(void 0,E)})};return i.persist={setOptions:v=>{s={...s,...v},v.storage&&(c=v.storage)},clearStorage:()=>{c?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>m(),hasHydrated:()=>a,onHydrate:v=>(o.add(v),()=>{o.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},s.skipHydration||m(),p||f},UM=wwe,_we=(t,e)=>({mode:"page",pageId:null,layoutId:null,enterPageMode:n=>{t({mode:"page",pageId:n,layoutId:null}),console.log(" Page   :",n)},enterLayoutMode:n=>{t({mode:"layout",pageId:null,layoutId:n}),console.log(" Layout   :",n)},getEditContext:()=>{const{mode:n,pageId:r,layoutId:i}=e();return{mode:n,pageId:r,layoutId:i}},setMode:n=>{t({mode:n}),console.log(` Edit Mode : ${n}`)},setCurrentPageId:n=>{t({pageId:n})},setCurrentLayoutId:n=>{t({layoutId:n})}}),sd=Jl()(UM(_we,{name:"xstudio-edit-mode",partialize:t=>({mode:t.mode})})),ge={color:"var(--color-gray-500)",stroke:1,size:16},Iwe=C.createContext(null),pX=C.createContext(null),gX=C.createContext(null),mX=C.createContext(null),Bwe=C.createContext(null),AX=C.createContext({}),Twe=C.createContext(null),yX=C.createContext(null),Fi=typeof document<"u"?we.useLayoutEffect:()=>{};var AR;const Mwe=(AR=we.useInsertionEffect)!==null&&AR!==void 0?AR:Fi;function Js(t){const e=C.useRef(null);return Mwe(()=>{e.current=t},[t]),C.useCallback((...n)=>{const r=e.current;return r?.(...n)},[])}function Dwe(t){let[e,n]=C.useState(t),r=C.useRef(null),i=Js(()=>{if(!r.current)return;let a=r.current.next();if(a.done){r.current=null;return}e===a.value?i():n(a.value)});Fi(()=>{r.current&&i()});let s=Js(a=>{r.current=a(e),i()});return[e,s]}const vX={prefix:String(Math.round(Math.random()*1e10)),current:0},xX=we.createContext(vX),Rwe=we.createContext(!1);let yR=new WeakMap;function Pwe(t=!1){let e=C.useContext(xX),n=C.useRef(null);if(n.current===null&&!t){var r,i;let s=(i=we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||i===void 0||(r=i.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(s){let a=yR.get(s);a==null?yR.set(s,{id:e.current,state:s.memoizedState}):s.memoizedState!==a.state&&(e.current=a.id,yR.delete(s))}n.current=++e.current}return n.current}function kwe(t){let e=C.useContext(xX),n=Pwe(!!t),r=`react-aria${e.prefix}`;return t||`${r}-${n}`}function Nwe(t){let e=we.useId(),[n]=C.useState(zb()),r=n?"react-aria":`react-aria${vX.prefix}`;return t||`${r}-${e}`}const Lwe=typeof we.useId=="function"?Nwe:kwe;function Fwe(){return!1}function jwe(){return!0}function Owe(t){return()=>{}}function zb(){return typeof we.useSyncExternalStore=="function"?we.useSyncExternalStore(Owe,Fwe,jwe):C.useContext(Rwe)}let zwe=!!(typeof window<"u"&&window.document&&window.document.createElement),j1=new Map,ww;typeof FinalizationRegistry<"u"&&(ww=new FinalizationRegistry(t=>{j1.delete(t)}));function ro(t){let[e,n]=C.useState(t),r=C.useRef(null),i=Lwe(e),s=C.useRef(null);if(ww&&ww.register(s,i),zwe){const a=j1.get(i);a&&!a.includes(r)?a.push(r):j1.set(i,[r])}return Fi(()=>{let a=i;return()=>{ww&&ww.unregister(s),j1.delete(a)}},[i]),C.useEffect(()=>{let a=r.current;return a&&n(a),()=>{a&&(r.current=null)}}),i}function $we(t,e){if(t===e)return t;let n=j1.get(t);if(n)return n.forEach(i=>i.current=e),e;let r=j1.get(e);return r?(r.forEach(i=>i.current=t),t):e}function M_(t=[]){let e=ro(),[n,r]=Dwe(e),i=C.useCallback(()=>{r(function*(){yield e,yield document.getElementById(e)?e:void 0})},[e,r]);return Fi(i,[e,i,...t]),n}function Fp(...t){return(...e)=>{for(let n of t)typeof n=="function"&&n(...e)}}const ji=t=>{var e;return(e=t?.ownerDocument)!==null&&e!==void 0?e:document},ad=t=>t&&"window"in t&&t.window===t?t:ji(t).defaultView||window;function Qwe(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"}function Uwe(t){return Qwe(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in t}let Hwe=!1;function HM(){return Hwe}function Zu(t,e){if(!HM())return e&&t?t.contains(e):!1;if(!t||!e)return!1;let n=e;for(;n!==null;){if(n===t)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:Uwe(n)?n=n.host:n=n.parentNode}return!1}const Yo=(t=document)=>{var e;if(!HM())return t.activeElement;let n=t.activeElement;for(;n&&"shadowRoot"in n&&(!((e=n.shadowRoot)===null||e===void 0)&&e.activeElement);)n=n.shadowRoot.activeElement;return n};function Xa(t){return HM()&&t.target.shadowRoot&&t.composedPath?t.composedPath()[0]:t.target}class Gwe{get currentNode(){return this._currentNode}set currentNode(e){if(!Zu(this.root,e))throw new Error("Cannot set currentNode to a node that is not contained by the root node.");const n=[];let r=e,i=e;for(this._currentNode=e;r&&r!==this.root;)if(r.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const a=r,o=this._doc.createTreeWalker(a,this.whatToShow,{acceptNode:this._acceptNode});n.push(o),o.currentNode=i,this._currentSetFor.add(o),r=i=a.host}else r=r.parentNode;const s=this._doc.createTreeWalker(this.root,this.whatToShow,{acceptNode:this._acceptNode});n.push(s),s.currentNode=i,this._currentSetFor.add(s),this._walkerStack=n}get doc(){return this._doc}firstChild(){let e=this.currentNode,n=this.nextNode();return Zu(e,n)?(n&&(this.currentNode=n),n):(this.currentNode=e,null)}lastChild(){let n=this._walkerStack[0].lastChild();return n&&(this.currentNode=n),n}nextNode(){const e=this._walkerStack[0].nextNode();if(e){if(e.shadowRoot){var n;let i;if(typeof this.filter=="function"?i=this.filter(e):!((n=this.filter)===null||n===void 0)&&n.acceptNode&&(i=this.filter.acceptNode(e)),i===NodeFilter.FILTER_ACCEPT)return this.currentNode=e,e;let s=this.nextNode();return s&&(this.currentNode=s),s}return e&&(this.currentNode=e),e}else if(this._walkerStack.length>1){this._walkerStack.shift();let r=this.nextNode();return r&&(this.currentNode=r),r}else return null}previousNode(){const e=this._walkerStack[0];if(e.currentNode===e.root){if(this._currentSetFor.has(e))if(this._currentSetFor.delete(e),this._walkerStack.length>1){this._walkerStack.shift();let i=this.previousNode();return i&&(this.currentNode=i),i}else return null;return null}const n=e.previousNode();if(n){if(n.shadowRoot){var r;let s;if(typeof this.filter=="function"?s=this.filter(n):!((r=this.filter)===null||r===void 0)&&r.acceptNode&&(s=this.filter.acceptNode(n)),s===NodeFilter.FILTER_ACCEPT)return n&&(this.currentNode=n),n;let a=this.lastChild();return a&&(this.currentNode=a),a}return n&&(this.currentNode=n),n}else if(this._walkerStack.length>1){this._walkerStack.shift();let i=this.previousNode();return i&&(this.currentNode=i),i}else return null}nextSibling(){return null}previousSibling(){return null}parentNode(){return null}constructor(e,n,r,i){this._walkerStack=[],this._currentSetFor=new Set,this._acceptNode=a=>{if(a.nodeType===Node.ELEMENT_NODE){const l=a.shadowRoot;if(l){const c=this._doc.createTreeWalker(l,this.whatToShow,{acceptNode:this._acceptNode});return this._walkerStack.unshift(c),NodeFilter.FILTER_ACCEPT}else{var o;if(typeof this.filter=="function")return this.filter(a);if(!((o=this.filter)===null||o===void 0)&&o.acceptNode)return this.filter.acceptNode(a);if(this.filter===null)return NodeFilter.FILTER_ACCEPT}}return NodeFilter.FILTER_SKIP},this._doc=e,this.root=n,this.filter=i??null,this.whatToShow=r??NodeFilter.SHOW_ALL,this._currentNode=n,this._walkerStack.unshift(e.createTreeWalker(n,r,this._acceptNode));const s=n.shadowRoot;if(s){const a=this._doc.createTreeWalker(s,this.whatToShow,{acceptNode:this._acceptNode});this._walkerStack.unshift(a)}}}function Vwe(t,e,n,r){return HM()?new Gwe(t,e,n,r):t.createTreeWalker(e,n,r)}function bX(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=bX(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Wwe(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=bX(t))&&(r&&(r+=" "),r+=e);return r}function an(...t){let e={...t[0]};for(let n=1;n<t.length;n++){let r=t[n];for(let i in r){let s=e[i],a=r[i];typeof s=="function"&&typeof a=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?e[i]=Fp(s,a):(i==="className"||i==="UNSAFE_className")&&typeof s=="string"&&typeof a=="string"?e[i]=Wwe(s,a):i==="id"&&s&&a?e.id=$we(s,a):e[i]=a!==void 0?a:s}}return e}function wI(...t){return t.length===1&&t[0]?t[0]:e=>{let n=!1;const r=t.map(i=>{const s=g$(i,e);return n||(n=typeof s=="function"),s});if(n)return()=>{r.forEach((i,s)=>{typeof i=="function"?i():g$(t[s],null)})}}}function g$(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}const Kwe=new Set(["id"]),qwe=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),Ywe=new Set(["href","hrefLang","target","rel","download","ping","referrerPolicy"]),Xwe=new Set(["dir","lang","hidden","inert","translate"]),m$=new Set(["onClick","onAuxClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut","onGotPointerCapture","onLostPointerCapture","onScroll","onWheel","onAnimationStart","onAnimationEnd","onAnimationIteration","onTransitionCancel","onTransitionEnd","onTransitionRun","onTransitionStart"]),Jwe=/^(data-.*)$/;function Cr(t,e={}){let{labelable:n,isLink:r,global:i,events:s=i,propNames:a}=e,o={};for(const l in t)Object.prototype.hasOwnProperty.call(t,l)&&(Kwe.has(l)||n&&qwe.has(l)||r&&Ywe.has(l)||i&&Xwe.has(l)||s&&m$.has(l)||l.endsWith("Capture")&&m$.has(l.slice(0,-7))||a?.has(l)||Jwe.test(l))&&(o[l]=t[l]);return o}function th(t){if(Zwe())t.focus({preventScroll:!0});else{let e=e_e(t);t.focus(),t_e(e)}}let AB=null;function Zwe(){if(AB==null){AB=!1;try{document.createElement("div").focus({get preventScroll(){return AB=!0,!0}})}catch{}}return AB}function e_e(t){let e=t.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;e instanceof HTMLElement&&e!==r;)(e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)&&n.push({element:e,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),e=e.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function t_e(t){for(let{element:e,scrollTop:n,scrollLeft:r}of t)e.scrollTop=n,e.scrollLeft=r}function GM(t){var e;if(typeof window>"u"||window.navigator==null)return!1;let n=(e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands;return Array.isArray(n)&&n.some(r=>t.test(r.brand))||t.test(window.navigator.userAgent)}function rF(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function O0(t){let e=null;return()=>(e==null&&(e=t()),e)}const Fy=O0(function(){return rF(/^Mac/i)}),CX=O0(function(){return rF(/^iPhone/i)}),EX=O0(function(){return rF(/^iPad/i)||Fy()&&navigator.maxTouchPoints>1}),zE=O0(function(){return CX()||EX()}),q3=O0(function(){return Fy()||zE()}),iF=O0(function(){return GM(/AppleWebKit/i)&&!sF()}),sF=O0(function(){return GM(/Chrome/i)}),_I=O0(function(){return GM(/Android/i)}),n_e=O0(function(){return GM(/Firefox/i)}),r_e=C.createContext({isNative:!0,open:s_e,useHref:t=>t});function VM(){return C.useContext(r_e)}function xb(t,e,n=!0){var r,i;let{metaKey:s,ctrlKey:a,altKey:o,shiftKey:l}=e;n_e()&&(!((i=window.event)===null||i===void 0||(r=i.type)===null||r===void 0)&&r.startsWith("key"))&&t.target==="_blank"&&(Fy()?s=!0:a=!0);let c=iF()&&Fy()&&!EX()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:s,ctrlKey:a,altKey:o,shiftKey:l}):new MouseEvent("click",{metaKey:s,ctrlKey:a,altKey:o,shiftKey:l,bubbles:!0,cancelable:!0});xb.isOpening=n,th(t),t.dispatchEvent(c),xb.isOpening=!1}xb.isOpening=!1;function i_e(t,e){if(t instanceof HTMLAnchorElement)e(t);else if(t.hasAttribute("data-href")){let n=document.createElement("a");n.href=t.getAttribute("data-href"),t.hasAttribute("data-target")&&(n.target=t.getAttribute("data-target")),t.hasAttribute("data-rel")&&(n.rel=t.getAttribute("data-rel")),t.hasAttribute("data-download")&&(n.download=t.getAttribute("data-download")),t.hasAttribute("data-ping")&&(n.ping=t.getAttribute("data-ping")),t.hasAttribute("data-referrer-policy")&&(n.referrerPolicy=t.getAttribute("data-referrer-policy")),t.appendChild(n),e(n),t.removeChild(n)}}function s_e(t,e){i_e(t,n=>xb(n,e))}function SX(t){let e=VM();var n;const r=e.useHref((n=t?.href)!==null&&n!==void 0?n:"");return{href:t?.href?r:void 0,target:t?.target,rel:t?.rel,download:t?.download,ping:t?.ping,referrerPolicy:t?.referrerPolicy}}let py=new Map,z5=new Set;function A$(){if(typeof window>"u")return;function t(r){return"propertyName"in r}let e=r=>{if(!t(r)||!r.target)return;let i=py.get(r.target);i||(i=new Set,py.set(r.target,i),r.target.addEventListener("transitioncancel",n,{once:!0})),i.add(r.propertyName)},n=r=>{if(!t(r)||!r.target)return;let i=py.get(r.target);if(i&&(i.delete(r.propertyName),i.size===0&&(r.target.removeEventListener("transitioncancel",n),py.delete(r.target)),py.size===0)){for(let s of z5)s();z5.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",n)}typeof document<"u"&&(document.readyState!=="loading"?A$():document.addEventListener("DOMContentLoaded",A$));function a_e(){for(const[t]of py)"isConnected"in t&&!t.isConnected&&py.delete(t)}function wX(t){requestAnimationFrame(()=>{a_e(),py.size===0?t():z5.add(t)})}function z0(){let t=C.useRef(new Map),e=C.useCallback((i,s,a,o)=>{let l=o?.once?(...c)=>{t.current.delete(a),a(...c)}:a;t.current.set(a,{type:s,eventTarget:i,fn:l,options:o}),i.addEventListener(s,l,o)},[]),n=C.useCallback((i,s,a,o)=>{var l;let c=((l=t.current.get(a))===null||l===void 0?void 0:l.fn)||a;i.removeEventListener(s,c,o),t.current.delete(a)},[]),r=C.useCallback(()=>{t.current.forEach((i,s)=>{n(i.eventTarget,i.type,s,i.options)})},[n]);return C.useEffect(()=>r,[r]),{addGlobalListener:e,removeGlobalListener:n,removeAllGlobalListeners:r}}function b0(t,e){let{id:n,"aria-label":r,"aria-labelledby":i}=t;return n=ro(n),i&&r?i=[...new Set([n,...i.trim().split(/\s+/)])].join(" "):i&&(i=i.trim().split(/\s+/).join(" ")),!r&&!i&&e&&(r=e),{id:n,"aria-label":r,"aria-labelledby":i}}function ah(t){const e=C.useRef(null),n=C.useRef(void 0),r=C.useCallback(i=>{if(typeof t=="function"){const s=t,a=s(i);return()=>{typeof a=="function"?a():s(null)}}else if(t)return t.current=i,()=>{t.current=null}},[t]);return C.useMemo(()=>({get current(){return e.current},set current(i){e.current=i,n.current&&(n.current(),n.current=void 0),i!=null&&(n.current=r(i))}}),[r])}function o_e(t,e){const n=C.useRef(!0),r=C.useRef(null);C.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),C.useEffect(()=>{let i=r.current;n.current?n.current=!1:(!i||e.some((s,a)=>!Object.is(s,i[a])))&&t(),r.current=e},e)}function y$(t,e){const n=C.useRef(!0),r=C.useRef(null);Fi(()=>(n.current=!0,()=>{n.current=!1}),[]),Fi(()=>{n.current?n.current=!1:(!r.current||e.some((i,s)=>!Object.is(i,r[s])))&&t(),r.current=e},e)}function l_e(){return typeof window.ResizeObserver<"u"}function D_(t){const{ref:e,box:n,onResize:r}=t;C.useEffect(()=>{let i=e?.current;if(i)if(l_e()){const s=new window.ResizeObserver(a=>{a.length&&r()});return s.observe(i,{box:n}),()=>{i&&s.unobserve(i)}}else return window.addEventListener("resize",r,!1),()=>{window.removeEventListener("resize",r,!1)}},[r,e,n])}function aF(t,e){Fi(()=>{if(t&&t.ref&&e)return t.ref.current=e.current,()=>{t.ref&&(t.ref.current=null)}})}function bb(t,e){if(!t)return!1;let n=window.getComputedStyle(t),r=/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY);return r&&e&&(r=t.scrollHeight!==t.clientHeight||t.scrollWidth!==t.clientWidth),r}function oF(t,e){let n=t;for(bb(n,e)&&(n=n.parentElement);n&&!bb(n,e);)n=n.parentElement;return n||document.scrollingElement||document.documentElement}function c_e(t,e){const n=[];for(;t&&t!==document.documentElement;)bb(t,e)&&n.push(t),t=t.parentElement;return n}function m1(t){return Fy()?t.metaKey:t.ctrlKey}const u_e=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function qw(t){return t instanceof HTMLInputElement&&!u_e.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}let td=typeof document<"u"&&window.visualViewport;function d_e(){let t=zb(),[e,n]=C.useState(()=>t?{width:0,height:0}:v$());return C.useEffect(()=>{let r=()=>{td&&td.scale>1||n(a=>{let o=v$();return o.width===a.width&&o.height===a.height?a:o})},i,s=a=>{td&&td.scale>1||qw(a.target)&&(i=requestAnimationFrame(()=>{(!document.activeElement||!qw(document.activeElement))&&n(o=>{let l={width:window.innerWidth,height:window.innerHeight};return l.width===o.width&&l.height===o.height?o:l})}))};return window.addEventListener("blur",s,!0),td?td.addEventListener("resize",r):window.addEventListener("resize",r),()=>{cancelAnimationFrame(i),window.removeEventListener("blur",s,!0),td?td.removeEventListener("resize",r):window.removeEventListener("resize",r)}},[]),e}function v$(){return{width:td?td.width*td.scale:window.innerWidth,height:td?td.height*td.scale:window.innerHeight}}let h_e=0;const vR=new Map;function f_e(t){let[e,n]=C.useState();return Fi(()=>{if(!t)return;let r=vR.get(t);if(r)n(r.element.id);else{let i=`react-aria-description-${h_e++}`;n(i);let s=document.createElement("div");s.id=i,s.style.display="none",s.textContent=t,document.body.appendChild(s),r={refCount:0,element:s},vR.set(t,r)}return r.refCount++,()=>{r&&--r.refCount===0&&(r.element.remove(),vR.delete(t))}},[t]),{"aria-describedby":t?e:void 0}}function B1(t,e,n,r){let i=Js(n),s=n==null;C.useEffect(()=>{if(s||!t.current)return;let a=t.current;return a.addEventListener(e,i,r),()=>{a.removeEventListener(e,i,r)}},[t,e,r,s,i])}function _X(t,e){let n=x$(t,e,"left"),r=x$(t,e,"top"),i=e.offsetWidth,s=e.offsetHeight,a=t.scrollLeft,o=t.scrollTop,{borderTopWidth:l,borderLeftWidth:c,scrollPaddingTop:u,scrollPaddingRight:h,scrollPaddingBottom:f,scrollPaddingLeft:p}=getComputedStyle(t),{scrollMarginTop:m,scrollMarginRight:v,scrollMarginBottom:A,scrollMarginLeft:x}=getComputedStyle(e),E=a+parseInt(c,10),w=o+parseInt(l,10),B=E+t.clientWidth,D=w+t.clientHeight,T=parseInt(u,10)||0,M=parseInt(f,10)||0,R=parseInt(h,10)||0,k=parseInt(p,10)||0,L=parseInt(m,10)||0,F=parseInt(A,10)||0,z=parseInt(v,10)||0,G=parseInt(x,10)||0,V=n-G,q=n+i+z,O=r-L,H=r+s+F,K=a+parseInt(c,10)+k,X=B-R,re=o+parseInt(l,10)+T,J=D-M;(V>K||q<X)&&(V<=a+k?a=V-parseInt(c,10)-k:q>B-R&&(a+=q-B+R)),(O>re||H<J)&&(O<=w+T?o=O-parseInt(l,10)-T:H>D-M&&(o+=H-D+M)),t.scrollTo({left:a,top:o})}function x$(t,e,n){const r=n==="left"?"offsetLeft":"offsetTop";let i=0;for(;e.offsetParent&&(i+=e[r],e.offsetParent!==t);){if(e.offsetParent.contains(t)){i-=t[r];break}e=e.offsetParent}return i}function b$(t,e){if(t&&document.contains(t)){let a=document.scrollingElement||document.documentElement;if(!(window.getComputedStyle(a).overflow==="hidden")&&!sF()){var n;let{left:l,top:c}=t.getBoundingClientRect();t==null||(n=t.scrollIntoView)===null||n===void 0||n.call(t,{block:"nearest"});let{left:u,top:h}=t.getBoundingClientRect();if(Math.abs(l-u)>1||Math.abs(c-h)>1){var r,i,s;e==null||(i=e.containingElement)===null||i===void 0||(r=i.scrollIntoView)===null||r===void 0||r.call(i,{block:"center",inline:"center"}),(s=t.scrollIntoView)===null||s===void 0||s.call(t,{block:"nearest"})}}else{let l=c_e(t);for(let c of l)_X(c,t)}}}function IX(t){return t.pointerType===""&&t.isTrusted?!0:_I()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function p_e(t){return!_I()&&t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"}function Gy(t,e,n){let r=Js(()=>{n&&n(e)});C.useEffect(()=>{var i;let s=t==null||(i=t.current)===null||i===void 0?void 0:i.form;return s?.addEventListener("reset",r),()=>{s?.removeEventListener("reset",r)}},[t,r])}function g_e(t,e){let{collection:n,onLoadMore:r,scrollOffset:i=1}=t,s=C.useRef(null),a=Js(o=>{for(let l of o)l.isIntersecting&&r&&r()});Fi(()=>(e.current&&(s.current=new IntersectionObserver(a,{root:oF(e?.current),rootMargin:`0px ${100*i}% ${100*i}% ${100*i}%`}),s.current.observe(e.current)),()=>{s.current&&s.current.disconnect()}),[n,a,e,i])}function $5(t){const e=C.version.split(".");return parseInt(e[0],10)>=19?t:t?"true":void 0}const m_e="react-aria-clear-focus",A_e="react-aria-focus";function lF(t,e=!0){let[n,r]=C.useState(!0),i=n&&e;return Fi(()=>{if(i&&t.current&&"getAnimations"in t.current)for(let s of t.current.getAnimations())s instanceof CSSTransition&&s.cancel()},[t,i]),BX(t,i,C.useCallback(()=>r(!1),[])),i}function Q5(t,e){let[n,r]=C.useState(e?"open":"closed");switch(n){case"open":e||r("exiting");break;case"closed":case"exiting":e&&r("open");break}let i=n==="exiting";return BX(t,i,C.useCallback(()=>{r(s=>s==="exiting"?"closed":s)},[])),i}function BX(t,e,n){Fi(()=>{if(e&&t.current){if(!("getAnimations"in t.current)){n();return}let r=t.current.getAnimations();if(r.length===0){n();return}let i=!1;return Promise.all(r.map(s=>s.finished)).then(()=>{i||gb.flushSync(()=>{n()})}).catch(()=>{}),()=>{i=!0}}},[t,e,n])}const y_e=typeof Element<"u"&&"checkVisibility"in Element.prototype;function v_e(t){const e=ad(t);if(!(t instanceof e.HTMLElement)&&!(t instanceof e.SVGElement))return!1;let{display:n,visibility:r}=t.style,i=n!=="none"&&r!=="hidden"&&r!=="collapse";if(i){const{getComputedStyle:s}=t.ownerDocument.defaultView;let{display:a,visibility:o}=s(t);i=a!=="none"&&o!=="hidden"&&o!=="collapse"}return i}function x_e(t,e){return!t.hasAttribute("hidden")&&!t.hasAttribute("data-react-aria-prevent-focus")&&(t.nodeName==="DETAILS"&&e&&e.nodeName!=="SUMMARY"?t.hasAttribute("open"):!0)}function cF(t,e){return y_e?t.checkVisibility({visibilityProperty:!0})&&!t.closest("[data-react-aria-prevent-focus]"):t.nodeName!=="#comment"&&v_e(t)&&x_e(t,e)&&(!t.parentElement||cF(t.parentElement,t))}const uF=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])',"permission"],b_e=uF.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";uF.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const C_e=uF.join(':not([hidden]):not([tabindex="-1"]),');function TX(t){return t.matches(b_e)&&cF(t)&&!MX(t)}function E_e(t){return t.matches(C_e)&&cF(t)&&!MX(t)}function MX(t){let e=t;for(;e!=null;){if(e instanceof e.ownerDocument.defaultView.HTMLElement&&e.inert)return!0;e=e.parentElement}return!1}function Zl(t,e,n){let[r,i]=C.useState(t||e),s=C.useRef(t!==void 0),a=t!==void 0;C.useEffect(()=>{s.current,s.current=a},[a]);let o=a?t:r,l=C.useCallback((c,...u)=>{let h=(f,...p)=>{n&&(Object.is(o,f)||n(f,...p)),a||(o=f)};typeof c=="function"?i((p,...m)=>{let v=c(a?o:p,...m);return h(v,...u),a?p:v}):(a||i(c),h(c,...u))},[a,o,n]);return[o,l]}function Bl(t,e=-1/0,n=1/0){return Math.min(Math.max(t,e),n)}function yB(t,e){let n=t,r=0,i=e.toString(),s=i.toLowerCase().indexOf("e-");if(s>0)r=Math.abs(Math.floor(Math.log10(Math.abs(e))))+s;else{let a=i.indexOf(".");a>=0&&(r=i.length-a)}if(r>0){let a=Math.pow(10,r);n=Math.round(n*a)/a}return n}function Do(t,e,n,r){e=Number(e),n=Number(n);let i=(t-(isNaN(e)?0:e))%r,s=yB(Math.abs(i)*2>=r?t+Math.sign(i)*(r-Math.abs(i)):t-i,r);return isNaN(e)?!isNaN(n)&&s>n&&(s=Math.floor(yB(n/r,r))*r):s<e?s=e:!isNaN(n)&&s>n&&(s=e+Math.floor(yB((n-e)/r,r))*r),s=yB(s,r),s}function Ro(t,e,n=10){const r=Math.pow(n,e);return Math.round(t*r)/r}const _T=Symbol("default");function Zo({values:t,children:e}){for(let[n,r]of t)e=we.createElement(n.Provider,{value:r},e);return e}function Wr(t){let{className:e,style:n,children:r,defaultClassName:i,defaultChildren:s,defaultStyle:a,values:o}=t;return C.useMemo(()=>{let l,c,u;return typeof e=="function"?l=e({...o,defaultClassName:i}):l=e,typeof n=="function"?c=n({...o,defaultStyle:a||{}}):c=n,typeof r=="function"?u=r({...o,defaultChildren:s}):r==null?u=s:u=r,{className:l??i,style:c||a?{...a,...c}:void 0,children:u??s,"data-rac":""}},[e,n,r,i,s,a,o])}function Vy(t,e){return n=>e(typeof t=="function"?t(n):t,n)}function Af(t,e){let n=C.useContext(t);if(e===null)return null;if(n&&typeof n=="object"&&"slots"in n&&n.slots){let r=e||_T;if(!n.slots[r]){let i=new Intl.ListFormat().format(Object.keys(n.slots).map(a=>`"${a}"`)),s=e?`Invalid slot "${e}".`:"A slot prop is required.";throw new Error(`${s} Valid slot names are ${i}.`)}return n.slots[r]}return n}function Ai(t,e,n){let r=Af(n,t.slot)||{},{ref:i,...s}=r,a=ah(C.useMemo(()=>wI(e,i),[e,i])),o=an(s,t);return"style"in s&&s.style&&"style"in t&&t.style&&(typeof s.style=="function"||typeof t.style=="function"?o.style=l=>{let c=typeof s.style=="function"?s.style(l):s.style,u={...l.defaultStyle,...c},h=typeof t.style=="function"?t.style({...l,defaultStyle:u}):t.style;return{...u,...h}}:o.style={...s.style,...t.style}),[o,a]}function yf(t=!0){let[e,n]=C.useState(t),r=C.useRef(!1),i=C.useCallback(s=>{r.current=!0,n(!!s)},[]);return Fi(()=>{r.current||n(!1)},[]),[i,e]}function Rp(t){const e=/^(data-.*)$/;let n={};for(const r in t)e.test(r)||(n[r]=t[r]);return n}var DX={};DX={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})} .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText} `};var RX={};RX={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})}  .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var PX={};PX={buttonLabel:"Zobrazit doporuen",countAnnouncement:(t,e)=>`K dispozici ${e.plural(t.optionCount,{one:()=>`je ${e.number(t.optionCount)} monost`,other:()=>`jsou/je ${e.number(t.optionCount)} monosti/-`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Zadan skupina ${t.groupTitle} ${e.plural(t.groupCount,{one:()=>`s ${e.number(t.groupCount)} monost`,other:()=>`se ${e.number(t.groupCount)} monostmi`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:" (vybrno)",other:""},t.isSelected)}`,listboxLabel:"Nvrhy",selectedAnnouncement:t=>`${t.optionText}, vybrno`};var kX={};kX={buttonLabel:"Vis forslag",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} mulighed tilgngelig`,other:()=>`${e.number(t.optionCount)} muligheder tilgngelige`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Angivet gruppe ${t.groupTitle}, med ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} mulighed`,other:()=>`${e.number(t.groupCount)} muligheder`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valgt",other:""},t.isSelected)}`,listboxLabel:"Forslag",selectedAnnouncement:t=>`${t.optionText}, valgt`};var NX={};NX={buttonLabel:"Empfehlungen anzeigen",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} Option`,other:()=>`${e.number(t.optionCount)} Optionen`})} verfgbar.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Eingetretene Gruppe ${t.groupTitle}, mit ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} Option`,other:()=>`${e.number(t.groupCount)} Optionen`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ausgewhlt",other:""},t.isSelected)}`,listboxLabel:"Empfehlungen",selectedAnnouncement:t=>`${t.optionText}, ausgewhlt`};var LX={};LX={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)}  `})} .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var FX={};FX={focusAnnouncement:(t,e)=>`${e.select({true:()=>`Entered group ${t.groupTitle}, with ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} option`,other:()=>`${e.number(t.groupCount)} options`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selected",other:""},t.isSelected)}`,countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} option`,other:()=>`${e.number(t.optionCount)} options`})} available.`,selectedAnnouncement:t=>`${t.optionText}, selected`,buttonLabel:"Show suggestions",listboxLabel:"Suggestions"};var jX={};jX={buttonLabel:"Mostrar sugerencias",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcin`,other:()=>`${e.number(t.optionCount)} opciones`})} disponible(s).`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Se ha unido al grupo ${t.groupTitle}, con ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcin`,other:()=>`${e.number(t.groupCount)} opciones`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", seleccionado",other:""},t.isSelected)}`,listboxLabel:"Sugerencias",selectedAnnouncement:t=>`${t.optionText}, seleccionado`};var OX={};OX={buttonLabel:"Kuva soovitused",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} valik`,other:()=>`${e.number(t.optionCount)} valikud`})} saadaval.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Sisestatud rhm ${t.groupTitle}, valikuga ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} valik`,other:()=>`${e.number(t.groupCount)} valikud`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valitud",other:""},t.isSelected)}`,listboxLabel:"Soovitused",selectedAnnouncement:t=>`${t.optionText}, valitud`};var zX={};zX={buttonLabel:"Nyt ehdotukset",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} vaihtoehto`,other:()=>`${e.number(t.optionCount)} vaihtoehdot`})} saatavilla.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Mentiin ryhmn ${t.groupTitle}, ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} vaihtoehdon`,other:()=>`${e.number(t.groupCount)} vaihtoehdon`})} kanssa.`,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valittu",other:""},t.isSelected)}`,listboxLabel:"Ehdotukset",selectedAnnouncement:t=>`${t.optionText}, valittu`};var $X={};$X={buttonLabel:"Afficher les suggestions",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} option`,other:()=>`${e.number(t.optionCount)} options`})} disponible(s).`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Groupe ${t.groupTitle} rejoint, avec ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} option`,other:()=>`${e.number(t.groupCount)} options`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", slectionn(s)",other:""},t.isSelected)}`,listboxLabel:"Suggestions",selectedAnnouncement:t=>`${t.optionText}, slectionn`};var QX={};QX={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>` ${e.number(t.optionCount)}`,other:()=>`${e.number(t.optionCount)} `})}  .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>` ${e.number(t.groupCount)}`,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var UX={};UX={buttonLabel:"Prikai prijedloge",countAnnouncement:(t,e)=>`Dostupno jo: ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcija`,other:()=>`${e.number(t.optionCount)} opcije/a`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Unesena skupina ${t.groupTitle}, s ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcijom`,other:()=>`${e.number(t.groupCount)} opcije/a`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", odabranih",other:""},t.isSelected)}`,listboxLabel:"Prijedlozi",selectedAnnouncement:t=>`${t.optionText}, odabrano`};var HX={};HX={buttonLabel:"Javaslatok megjelentse",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} lehetsg`,other:()=>`${e.number(t.optionCount)} lehetsg`})} ll rendelkezsre.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Belpett a(z) ${t.groupTitle} csoportba, amely ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} lehetsget`,other:()=>`${e.number(t.groupCount)} lehetsget`})} tartalmaz. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", kijellve",other:""},t.isSelected)}`,listboxLabel:"Javaslatok",selectedAnnouncement:t=>`${t.optionText}, kijellve`};var GX={};GX={buttonLabel:"Mostra suggerimenti",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opzione disponibile`,other:()=>`${e.number(t.optionCount)} opzioni disponibili`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Ingresso nel gruppo ${t.groupTitle}, con ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opzione`,other:()=>`${e.number(t.groupCount)} opzioni`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selezionato",other:""},t.isSelected)}`,listboxLabel:"Suggerimenti",selectedAnnouncement:t=>`${t.optionText}, selezionato`};var VX={};VX={buttonLabel:"",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})}`,focusAnnouncement:(t,e)=>`${e.select({true:()=>` ${t.groupTitle}${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}`,other:""},t.isGroupChange)}${t.optionText}${e.select({true:"",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}`};var WX={};WX={buttonLabel:"  ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})}   .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle}, ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var KX={};KX={buttonLabel:"Rodyti pasilymus",countAnnouncement:(t,e)=>`Yra ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} parinktis`,other:()=>`${e.number(t.optionCount)} parinktys (-i)`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`vesta grup ${t.groupTitle}, su ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} parinktimi`,other:()=>`${e.number(t.groupCount)} parinktimis (-i)`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", pasirinkta",other:""},t.isSelected)}`,listboxLabel:"Pasilymai",selectedAnnouncement:t=>`${t.optionText}, pasirinkta`};var qX={};qX={buttonLabel:"Rdt ieteikumus",countAnnouncement:(t,e)=>`Pieejamo opciju skaits: ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcija`,other:()=>`${e.number(t.optionCount)} opcijas`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Ievadta grupa ${t.groupTitle}, ar ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opciju`,other:()=>`${e.number(t.groupCount)} opcijm`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", atlasta",other:""},t.isSelected)}`,listboxLabel:"Ieteikumi",selectedAnnouncement:t=>`${t.optionText}, atlasta`};var YX={};YX={buttonLabel:"Vis forslag",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} alternativ`,other:()=>`${e.number(t.optionCount)} alternativer`})} finnes.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Angitt gruppe ${t.groupTitle}, med ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} alternativ`,other:()=>`${e.number(t.groupCount)} alternativer`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valgt",other:""},t.isSelected)}`,listboxLabel:"Forslag",selectedAnnouncement:t=>`${t.optionText}, valgt`};var XX={};XX={buttonLabel:"Suggesties weergeven",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} optie`,other:()=>`${e.number(t.optionCount)} opties`})} beschikbaar.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Groep ${t.groupTitle} ingevoerd met ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} optie`,other:()=>`${e.number(t.groupCount)} opties`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", geselecteerd",other:""},t.isSelected)}`,listboxLabel:"Suggesties",selectedAnnouncement:t=>`${t.optionText}, geselecteerd`};var JX={};JX={buttonLabel:"Wywietlaj sugestie",countAnnouncement:(t,e)=>`dostpna/dostpne(-nych) ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcja`,other:()=>`${e.number(t.optionCount)} opcje(-i)`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Doczono do grupy ${t.groupTitle}, z ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcj`,other:()=>`${e.number(t.groupCount)} opcjami`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", wybrano",other:""},t.isSelected)}`,listboxLabel:"Sugestie",selectedAnnouncement:t=>`${t.optionText}, wybrano`};var ZX={};ZX={buttonLabel:"Mostrar sugestes",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opo`,other:()=>`${e.number(t.optionCount)} opes`})} disponvel.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Grupo inserido ${t.groupTitle}, com ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opo`,other:()=>`${e.number(t.groupCount)} opes`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selecionado",other:""},t.isSelected)}`,listboxLabel:"Sugestes",selectedAnnouncement:t=>`${t.optionText}, selecionado`};var eJ={};eJ={buttonLabel:"Apresentar sugestes",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opo`,other:()=>`${e.number(t.optionCount)} opes`})} disponvel.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Grupo introduzido ${t.groupTitle}, com ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opo`,other:()=>`${e.number(t.groupCount)} opes`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selecionado",other:""},t.isSelected)}`,listboxLabel:"Sugestes",selectedAnnouncement:t=>`${t.optionText}, selecionado`};var tJ={};tJ={buttonLabel:"Afiare sugestii",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opiune`,other:()=>`${e.number(t.optionCount)} opiuni`})} disponibile.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Grup ${t.groupTitle} introdus, cu ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opiune`,other:()=>`${e.number(t.groupCount)} opiuni`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", selectat",other:""},t.isSelected)}`,listboxLabel:"Sugestii",selectedAnnouncement:t=>`${t.optionText}, selectat`};var nJ={};nJ={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})} .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var rJ={};rJ={buttonLabel:"Zobrazi nvrhy",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} monos`,other:()=>`${e.number(t.optionCount)} monosti/-`})} k dispozcii.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Zadan skupina ${t.groupTitle}, s ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} monosou`,other:()=>`${e.number(t.groupCount)} monosami`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", vybrat",other:""},t.isSelected)}`,listboxLabel:"Nvrhy",selectedAnnouncement:t=>`${t.optionText}, vybrat`};var iJ={};iJ={buttonLabel:"Prikai predloge",countAnnouncement:(t,e)=>`Na voljo je ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcija`,other:()=>`${e.number(t.optionCount)} opcije`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Vnesena skupina ${t.groupTitle}, z ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcija`,other:()=>`${e.number(t.groupCount)} opcije`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", izbrano",other:""},t.isSelected)}`,listboxLabel:"Predlogi",selectedAnnouncement:t=>`${t.optionText}, izbrano`};var sJ={};sJ={buttonLabel:"Prikai predloge",countAnnouncement:(t,e)=>`Dostupno jo: ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} opcija`,other:()=>`${e.number(t.optionCount)} opcije/a`})}.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Unesena grupa ${t.groupTitle}, s ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} opcijom`,other:()=>`${e.number(t.groupCount)} optione/a`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", izabranih",other:""},t.isSelected)}`,listboxLabel:"Predlozi",selectedAnnouncement:t=>`${t.optionText}, izabrano`};var aJ={};aJ={buttonLabel:"Visa frslag",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} alternativ`,other:()=>`${e.number(t.optionCount)} alternativ`})} tillgngliga.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Ingick i gruppen ${t.groupTitle} med ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} alternativ`,other:()=>`${e.number(t.groupCount)} alternativ`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", valda",other:""},t.isSelected)}`,listboxLabel:"Frslag",selectedAnnouncement:t=>`${t.optionText}, valda`};var oJ={};oJ={buttonLabel:"nerileri gster",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} seenek`,other:()=>`${e.number(t.optionCount)} seenekler`})} kullanlabilir.`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`Girilen grup ${t.groupTitle}, ile ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} seenek`,other:()=>`${e.number(t.groupCount)} seenekler`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", seildi",other:""},t.isSelected)}`,listboxLabel:"neriler",selectedAnnouncement:t=>`${t.optionText}, seildi`};var lJ={};lJ={buttonLabel:" ",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} (-)`})} .`,focusAnnouncement:(t,e)=>`${e.select({true:()=>`  ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} (-)`})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var cJ={};cJ={buttonLabel:"",countAnnouncement:(t,e)=>` ${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})}`,focusAnnouncement:(t,e)=>`${e.select({true:()=>` ${t.groupTitle}  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var uJ={};uJ={buttonLabel:"",countAnnouncement:(t,e)=>`${e.plural(t.optionCount,{one:()=>`${e.number(t.optionCount)} `,other:()=>`${e.number(t.optionCount)} `})} `,focusAnnouncement:(t,e)=>`${e.select({true:()=>` ${t.groupTitle},  ${e.plural(t.groupCount,{one:()=>`${e.number(t.groupCount)} `,other:()=>`${e.number(t.groupCount)} `})}. `,other:""},t.isGroupChange)}${t.optionText}${e.select({true:", ",other:""},t.isSelected)}`,listboxLabel:"",selectedAnnouncement:t=>`${t.optionText}, `};var dJ={};dJ={"ar-AE":DX,"bg-BG":RX,"cs-CZ":PX,"da-DK":kX,"de-DE":NX,"el-GR":LX,"en-US":FX,"es-ES":jX,"et-EE":OX,"fi-FI":zX,"fr-FR":$X,"he-IL":QX,"hr-HR":UX,"hu-HU":HX,"it-IT":GX,"ja-JP":VX,"ko-KR":WX,"lt-LT":KX,"lv-LV":qX,"nb-NO":YX,"nl-NL":XX,"pl-PL":JX,"pt-BR":ZX,"pt-PT":eJ,"ro-RO":tJ,"ru-RU":nJ,"sk-SK":rJ,"sl-SI":iJ,"sr-SP":sJ,"sv-SE":aJ,"tr-TR":oJ,"uk-UA":lJ,"zh-CN":cJ,"zh-TW":uJ};const hJ=7e3;let Wh=null;function O1(t,e="assertive",n=hJ){Wh?Wh.announce(t,e,n):(Wh=new w_e,(typeof IS_REACT_ACT_ENVIRONMENT=="boolean"?IS_REACT_ACT_ENVIRONMENT:typeof jest<"u")?Wh.announce(t,e,n):setTimeout(()=>{Wh?.isAttached()&&Wh?.announce(t,e,n)},100))}function S_e(t){Wh&&Wh.clear(t)}class w_e{isAttached(){var e;return(e=this.node)===null||e===void 0?void 0:e.isConnected}createLog(e){let n=document.createElement("div");return n.setAttribute("role","log"),n.setAttribute("aria-live",e),n.setAttribute("aria-relevant","additions"),n}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(e,n="assertive",r=hJ){var i,s;if(!this.node)return;let a=document.createElement("div");typeof e=="object"?(a.setAttribute("role","img"),a.setAttribute("aria-labelledby",e["aria-labelledby"])):a.textContent=e,n==="assertive"?(i=this.assertiveLog)===null||i===void 0||i.appendChild(a):(s=this.politeLog)===null||s===void 0||s.appendChild(a),e!==""&&setTimeout(()=>{a.remove()},r)}clear(e){this.node&&((!e||e==="assertive")&&this.assertiveLog&&(this.assertiveLog.innerHTML=""),(!e||e==="polite")&&this.politeLog&&(this.politeLog.innerHTML=""))}constructor(){this.node=null,this.assertiveLog=null,this.politeLog=null,typeof document<"u"&&(this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node))}}const zg={top:"top",bottom:"top",left:"left",right:"left"},IT={top:"bottom",bottom:"top",left:"right",right:"left"},__e={top:"left",left:"top"},U5={top:"height",left:"width"},fJ={width:"totalWidth",height:"totalHeight"},vB={};let ml=typeof document<"u"?window.visualViewport:null;function C$(t){let e=0,n=0,r=0,i=0,s=0,a=0,o={};var l;let c=((l=ml?.scale)!==null&&l!==void 0?l:1)>1;if(t.tagName==="BODY"){let m=document.documentElement;r=m.clientWidth,i=m.clientHeight;var u;e=(u=ml?.width)!==null&&u!==void 0?u:r;var h;n=(h=ml?.height)!==null&&h!==void 0?h:i,o.top=m.scrollTop||t.scrollTop,o.left=m.scrollLeft||t.scrollLeft,ml&&(s=ml.offsetTop,a=ml.offsetLeft)}else({width:e,height:n,top:s,left:a}=z1(t,!1)),o.top=t.scrollTop,o.left=t.scrollLeft,r=e,i=n;if(iF()&&(t.tagName==="BODY"||t.tagName==="HTML")&&c){o.top=0,o.left=0;var f;s=(f=ml?.pageTop)!==null&&f!==void 0?f:0;var p;a=(p=ml?.pageLeft)!==null&&p!==void 0?p:0}return{width:e,height:n,totalWidth:r,totalHeight:i,scroll:o,top:s,left:a}}function I_e(t){return{top:t.scrollTop,left:t.scrollLeft,width:t.scrollWidth,height:t.scrollHeight}}function E$(t,e,n,r,i,s,a){var o;let l=(o=i.scroll[t])!==null&&o!==void 0?o:0,c=r[U5[t]],u=r.scroll[zg[t]]+s,h=c+r.scroll[zg[t]]-s,f=e-l+a[t]-r[zg[t]],p=e-l+n+a[t]-r[zg[t]];return f<u?u-f:p>h?Math.max(h-p,u-f):0}function B_e(t){let e=window.getComputedStyle(t);return{top:parseInt(e.marginTop,10)||0,bottom:parseInt(e.marginBottom,10)||0,left:parseInt(e.marginLeft,10)||0,right:parseInt(e.marginRight,10)||0}}function S$(t){if(vB[t])return vB[t];let[e,n]=t.split(" "),r=zg[e]||"right",i=__e[r];zg[n]||(n="center");let s=U5[r],a=U5[i];return vB[t]={placement:e,crossPlacement:n,axis:r,crossAxis:i,size:s,crossSize:a},vB[t]}function xR(t,e,n,r,i,s,a,o,l,c){let{placement:u,crossPlacement:h,axis:f,crossAxis:p,size:m,crossSize:v}=r,A={};var x;A[p]=(x=t[p])!==null&&x!==void 0?x:0;var E,w,B,D;h==="center"?A[p]+=(((E=t[v])!==null&&E!==void 0?E:0)-((w=n[v])!==null&&w!==void 0?w:0))/2:h!==p&&(A[p]+=((B=t[v])!==null&&B!==void 0?B:0)-((D=n[v])!==null&&D!==void 0?D:0)),A[p]+=s;const T=t[p]-n[v]+l+c,M=t[p]+t[v]-l-c;if(A[p]=Bl(A[p],T,M),u===f){const R=o?a[m]:e[fJ[m]];A[IT[f]]=Math.floor(R-t[f]+i)}else A[f]=Math.floor(t[f]+t[m]+i);return A}function T_e(t,e,n,r,i,s,a,o){const l=r?n.height:e[fJ.height];var c;let u=t.top!=null?n.top+t.top:n.top+(l-((c=t.bottom)!==null&&c!==void 0?c:0)-a);var h,f,p,m,v,A;let x=o!=="top"?Math.max(0,e.height+e.top+((h=e.scroll.top)!==null&&h!==void 0?h:0)-u-(((f=i.top)!==null&&f!==void 0?f:0)+((p=i.bottom)!==null&&p!==void 0?p:0)+s)):Math.max(0,u+a-(e.top+((m=e.scroll.top)!==null&&m!==void 0?m:0))-(((v=i.top)!==null&&v!==void 0?v:0)+((A=i.bottom)!==null&&A!==void 0?A:0)+s));return Math.min(e.height-s*2,x)}function w$(t,e,n,r,i,s){let{placement:a,axis:o,size:l}=s;var c,u;if(a===o)return Math.max(0,n[o]-t[o]-((c=t.scroll[o])!==null&&c!==void 0?c:0)+e[o]-((u=r[o])!==null&&u!==void 0?u:0)-r[IT[o]]-i);var h;return Math.max(0,t[l]+t[o]+t.scroll[o]-e[o]-n[o]-n[l]-((h=r[o])!==null&&h!==void 0?h:0)-r[IT[o]]-i)}function M_e(t,e,n,r,i,s,a,o,l,c,u,h,f,p,m,v){let A=S$(t),{size:x,crossAxis:E,crossSize:w,placement:B,crossPlacement:D}=A,T=xR(e,o,n,A,u,h,c,f,m,v),M=u,R=w$(o,c,e,i,s+u,A);if(a&&r[x]>R){let se=S$(`${IT[B]} ${D}`),fe=xR(e,o,n,se,u,h,c,f,m,v);w$(o,c,e,i,s+u,se)>R&&(A=se,T=fe,M=u)}let k="bottom";A.axis==="top"?A.placement==="top"?k="top":A.placement==="bottom"&&(k="bottom"):A.crossAxis==="top"&&(A.crossPlacement==="top"?k="bottom":A.crossPlacement==="bottom"&&(k="top"));let L=E$(E,T[E],n[w],o,l,s,c);T[E]+=L;let F=T_e(T,o,c,f,i,s,n.height,k);p&&p<F&&(F=p),n.height=Math.min(n.height,F),T=xR(e,o,n,A,M,h,c,f,m,v),L=E$(E,T[E],n[w],o,l,s,c),T[E]+=L;let z={},G=e[E]-T[E]-i[zg[E]],V=G+.5*e[w];const q=m/2+v;var O,H,K,X;const re=zg[E]==="left"?((O=i.left)!==null&&O!==void 0?O:0)+((H=i.right)!==null&&H!==void 0?H:0):((K=i.top)!==null&&K!==void 0?K:0)+((X=i.bottom)!==null&&X!==void 0?X:0),J=n[w]-re-m/2-v,Z=e[E]+m/2-(T[E]+i[zg[E]]),ee=e[E]+e[w]-m/2-(T[E]+i[zg[E]]),te=Bl(V,Z,ee);z[E]=Bl(te,q,J),{placement:B,crossPlacement:D}=A,m?G=z[E]:D==="right"?G+=e[w]:D==="center"&&(G+=e[w]/2);let oe=B==="left"||B==="top"?n[x]:0,ae={x:B==="top"||B==="bottom"?G:oe,y:B==="left"||B==="right"?G:oe};return{position:T,maxHeight:F,arrowOffsetLeft:z.left,arrowOffsetTop:z.top,placement:B,triggerAnchorPoint:ae}}function D_e(t){let{placement:e,targetNode:n,overlayNode:r,scrollNode:i,padding:s,shouldFlip:a,boundaryElement:o,offset:l,crossOffset:c,maxHeight:u,arrowSize:h=0,arrowBoundaryOffset:f=0}=t,p=r instanceof HTMLElement?R_e(r):document.documentElement,m=p===document.documentElement;const v=window.getComputedStyle(p).position;let A=!!v&&v!=="static",x=m?z1(n,!1):_$(n,p,!1);if(!m){let{marginTop:z,marginLeft:G}=window.getComputedStyle(n);x.top+=parseInt(z,10)||0,x.left+=parseInt(G,10)||0}let E=z1(r,!0),w=B_e(r);var B,D;E.width+=((B=w.left)!==null&&B!==void 0?B:0)+((D=w.right)!==null&&D!==void 0?D:0);var T,M;E.height+=((T=w.top)!==null&&T!==void 0?T:0)+((M=w.bottom)!==null&&M!==void 0?M:0);let R=I_e(i),k=C$(o),L=C$(p),F=o.tagName==="BODY"?z1(p,!1):_$(p,o,!1);return p.tagName==="HTML"&&o.tagName==="BODY"&&(L.scroll.top=0,L.scroll.left=0),M_e(e,x,E,R,w,s,a,k,L,F,l,c,A,u,h,f)}function dF(t,e){let{top:n,left:r,width:i,height:s}=t.getBoundingClientRect();return e&&t instanceof t.ownerDocument.defaultView.HTMLElement&&(i=t.offsetWidth,s=t.offsetHeight),{top:n,left:r,width:i,height:s}}function z1(t,e){let{top:n,left:r,width:i,height:s}=dF(t,e),{scrollTop:a,scrollLeft:o,clientTop:l,clientLeft:c}=document.documentElement;return{top:n+a-l,left:r+o-c,width:i,height:s}}function _$(t,e,n){let r=window.getComputedStyle(t),i;if(r.position==="fixed")i=dF(t,n);else{i=z1(t,n);let s=z1(e,n),a=window.getComputedStyle(e);s.top+=(parseInt(a.borderTopWidth,10)||0)-e.scrollTop,s.left+=(parseInt(a.borderLeftWidth,10)||0)-e.scrollLeft,i.top-=s.top,i.left-=s.left}return i.top-=parseInt(r.marginTop,10)||0,i.left-=parseInt(r.marginLeft,10)||0,i}function R_e(t){let e=t.offsetParent;if(e&&e===document.body&&window.getComputedStyle(e).position==="static"&&!I$(e)&&(e=document.documentElement),e==null)for(e=t.parentElement;e&&!I$(e);)e=e.parentElement;return e||document.documentElement}function I$(t){let e=window.getComputedStyle(t);return e.transform!=="none"||/transform|perspective/.test(e.willChange)||e.filter!=="none"||e.contain==="paint"||"backdropFilter"in e&&e.backdropFilter!=="none"||"WebkitBackdropFilter"in e&&e.WebkitBackdropFilter!=="none"}const pJ=new WeakMap;function P_e(t){let{triggerRef:e,isOpen:n,onClose:r}=t;C.useEffect(()=>{if(!n||r===null)return;let i=s=>{let a=s.target;if(!e.current||a instanceof Node&&!a.contains(e.current)||s.target instanceof HTMLInputElement||s.target instanceof HTMLTextAreaElement)return;let o=r||pJ.get(e.current);o&&o()};return window.addEventListener("scroll",i,!0),()=>{window.removeEventListener("scroll",i,!0)}},[n,r,e])}const k_e=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),N_e=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function L_e(t){if(Intl.Locale){let n=new Intl.Locale(t).maximize(),r=typeof n.getTextInfo=="function"?n.getTextInfo():n.textInfo;if(r)return r.direction==="rtl";if(n.script)return k_e.has(n.script)}let e=t.split("-")[0];return N_e.has(e)}const F_e=Symbol.for("react-aria.i18n.locale");function gJ(){let t=typeof window<"u"&&window[F_e]||typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([t])}catch{t="en-US"}return{locale:t,direction:L_e(t)?"rtl":"ltr"}}let H5=gJ(),_w=new Set;function B$(){H5=gJ();for(let t of _w)t(H5)}function j_e(){let t=zb(),[e,n]=C.useState(H5);return C.useEffect(()=>(_w.size===0&&window.addEventListener("languagechange",B$),_w.add(n),()=>{_w.delete(n),_w.size===0&&window.removeEventListener("languagechange",B$)}),[]),t?{locale:"en-US",direction:"ltr"}:e}const O_e=we.createContext(null);function so(){let t=j_e();return C.useContext(O_e)||t}var G5=function(t,e){return G5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},G5(t,e)};function mJ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");G5(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var BT=function(){return BT=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},BT.apply(this,arguments)};function $E(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function AJ(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function yJ(t,e){return function(n,r){e(n,r,t)}}function vJ(t,e,n,r,i,s){function a(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",c=!e&&t?r.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,f=!1,p=n.length-1;p>=0;p--){var m={};for(var v in r)m[v]=v==="access"?{}:r[v];for(var v in r.access)m.access[v]=r.access[v];m.addInitializer=function(x){if(f)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(x||null))};var A=(0,n[p])(o==="accessor"?{get:u.get,set:u.set}:u[l],m);if(o==="accessor"){if(A===void 0)continue;if(A===null||typeof A!="object")throw new TypeError("Object expected");(h=a(A.get))&&(u.get=h),(h=a(A.set))&&(u.set=h),(h=a(A.init))&&i.unshift(h)}else(h=a(A))&&(o==="field"?i.unshift(h):u[l]=h)}c&&Object.defineProperty(c,r.name,u),f=!0}function xJ(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function bJ(t){return typeof t=="symbol"?t:"".concat(t)}function CJ(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function EJ(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function _n(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(u){try{c(r.next(u))}catch(h){a(h)}}function l(u){try{c(r.throw(u))}catch(h){a(h)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((r=r.apply(t,e||[])).next())})}function SJ(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var WM=Object.create?(function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]});function wJ(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&WM(e,t,n)}function TT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hF(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s}function _J(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(hF(arguments[e]));return t}function IJ(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)r[i]=s[a];return r}function BJ(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function oE(t){return this instanceof oE?(this.v=t,this):new oE(t)}function TJ(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(p){return function(m){return Promise.resolve(m).then(p,h)}}function o(p,m){r[p]&&(i[p]=function(v){return new Promise(function(A,x){s.push([p,v,A,x])>1||l(p,v)})},m&&(i[p]=m(i[p])))}function l(p,m){try{c(r[p](m))}catch(v){f(s[0][3],v)}}function c(p){p.value instanceof oE?Promise.resolve(p.value.v).then(u,h):f(s[0][2],p)}function u(p){l("next",p)}function h(p){l("throw",p)}function f(p,m){p(m),s.shift(),s.length&&l(s[0][0],s[0][1])}}function MJ(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(a){return(n=!n)?{value:oE(t[i](a)),done:!1}:s?s(a):a}:s}}function DJ(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof TT=="function"?TT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(a){return new Promise(function(o,l){a=t[s](a),i(o,l,a.done,a.value)})}}function i(s,a,o,l){Promise.resolve(l).then(function(c){s({value:c,done:o})},a)}}function RJ(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var z_e=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},V5=function(t){return V5=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},V5(t)};function PJ(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=V5(t),r=0;r<n.length;r++)n[r]!=="default"&&WM(e,t,n[r]);return z_e(e,t),e}function kJ(t){return t&&t.__esModule?t:{default:t}}function NJ(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function LJ(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function FJ(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function jJ(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var $_e=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function OJ(t){function e(s){t.error=t.hasError?new $_e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(i,function(a){return e(a),i()})}else r|=1}catch(a){e(a)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function zJ(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,s,a){return r?e?".jsx":".js":i&&(!s||!a)?n:i+s+"."+a.toLowerCase()+"js"}):t}const Q_e={__extends:mJ,__assign:BT,__rest:$E,__decorate:AJ,__param:yJ,__esDecorate:vJ,__runInitializers:xJ,__propKey:bJ,__setFunctionName:CJ,__metadata:EJ,__awaiter:_n,__generator:SJ,__createBinding:WM,__exportStar:wJ,__values:TT,__read:hF,__spread:_J,__spreadArrays:IJ,__spreadArray:BJ,__await:oE,__asyncGenerator:TJ,__asyncDelegator:MJ,__asyncValues:DJ,__makeTemplateObject:RJ,__importStar:PJ,__importDefault:kJ,__classPrivateFieldGet:NJ,__classPrivateFieldSet:LJ,__classPrivateFieldIn:FJ,__addDisposableResource:jJ,__disposeResources:OJ,__rewriteRelativeImportExtension:zJ},U_e=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:jJ,get __assign(){return BT},__asyncDelegator:MJ,__asyncGenerator:TJ,__asyncValues:DJ,__await:oE,__awaiter:_n,__classPrivateFieldGet:NJ,__classPrivateFieldIn:FJ,__classPrivateFieldSet:LJ,__createBinding:WM,__decorate:AJ,__disposeResources:OJ,__esDecorate:vJ,__exportStar:wJ,__extends:mJ,__generator:SJ,__importDefault:kJ,__importStar:PJ,__makeTemplateObject:RJ,__metadata:EJ,__param:yJ,__propKey:bJ,__read:hF,__rest:$E,__rewriteRelativeImportExtension:zJ,__runInitializers:xJ,__setFunctionName:CJ,__spread:_J,__spreadArray:BJ,__spreadArrays:IJ,__values:TT,default:Q_e},Symbol.toStringTag,{value:"Module"})),H_e=Symbol.for("react-aria.i18n.locale"),G_e=Symbol.for("react-aria.i18n.strings");let XC;class By{getStringForLocale(e,n){let i=this.getStringsForLocale(n)[e];if(!i)throw new Error(`Could not find intl message ${e} in ${n} locale`);return i}getStringsForLocale(e){let n=this.strings[e];return n||(n=V_e(e,this.strings,this.defaultLocale),this.strings[e]=n),n}static getGlobalDictionaryForPackage(e){if(typeof window>"u")return null;let n=window[H_e];if(XC===void 0){let i=window[G_e];if(!i)return null;XC={};for(let s in i)XC[s]=new By({[n]:i[s]},n)}let r=XC?.[e];if(!r)throw new Error(`Strings for package "${e}" were not included by LocalizedStringProvider. Please add it to the list passed to createLocalizedStringDictionary.`);return r}constructor(e,n="en-US"){this.strings=Object.fromEntries(Object.entries(e).filter(([,r])=>r)),this.defaultLocale=n}}function V_e(t,e,n="en-US"){if(e[t])return e[t];let r=W_e(t);if(e[r])return e[r];for(let i in e)if(i.startsWith(r+"-"))return e[i];return e[n]}function W_e(t){return Intl.Locale?new Intl.Locale(t).language:t.split("-")[0]}const T$=new Map,M$=new Map;class $J{format(e,n){let r=this.strings.getStringForLocale(e,this.locale);return typeof r=="function"?r(n,this):r}plural(e,n,r="cardinal"){let i=n["="+e];if(i)return typeof i=="function"?i():i;let s=this.locale+":"+r,a=T$.get(s);a||(a=new Intl.PluralRules(this.locale,{type:r}),T$.set(s,a));let o=a.select(e);return i=n[o]||n.other,typeof i=="function"?i():i}number(e){let n=M$.get(this.locale);return n||(n=new Intl.NumberFormat(this.locale),M$.set(this.locale,n)),n.format(e)}select(e,n){let r=e[n]||e.other;return typeof r=="function"?r():r}constructor(e,n){this.locale=e,this.strings=n}}const D$=new WeakMap;function K_e(t){let e=D$.get(t);return e||(e=new By(t),D$.set(t,e)),e}function q_e(t,e){return e&&By.getGlobalDictionaryForPackage(e)||K_e(t)}function Yg(t,e){let{locale:n}=so(),r=q_e(t,e);return C.useMemo(()=>new $J(n,r),[n,r])}function Y_e(t={}){let{locale:e}=so();return C.useMemo(()=>new Intl.ListFormat(e,t),[e,t])}function X_e(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function J_e(t,e,n){X_e(t,e),e.set(t,n)}let bR=new Map,W5=!1;try{W5=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let MT=!1;try{MT=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const QJ={degree:{narrow:{default:"","ja-JP":" ","zh-TW":"","sl-SI":" "}}};class jy{format(e){let n="";if(!W5&&this.options.signDisplay!=null?n=eIe(this.numberFormatter,this.options.signDisplay,e):n=this.numberFormatter.format(e),this.options.style==="unit"&&!MT){var r;let{unit:i,unitDisplay:s="short",locale:a}=this.resolvedOptions();if(!i)return n;let o=(r=QJ[i])===null||r===void 0?void 0:r[s];n+=o[a]||o.default}return n}formatToParts(e){return this.numberFormatter.formatToParts(e)}formatRange(e,n){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(e,n);if(n<e)throw new RangeError("End date must be >= start date");return`${this.format(e)}  ${this.format(n)}`}formatRangeToParts(e,n){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(e,n);if(n<e)throw new RangeError("End date must be >= start date");let r=this.numberFormatter.formatToParts(e),i=this.numberFormatter.formatToParts(n);return[...r.map(s=>({...s,source:"startRange"})),{type:"literal",value:"  ",source:"shared"},...i.map(s=>({...s,source:"endRange"}))]}resolvedOptions(){let e=this.numberFormatter.resolvedOptions();return!W5&&this.options.signDisplay!=null&&(e={...e,signDisplay:this.options.signDisplay}),!MT&&this.options.style==="unit"&&(e={...e,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),e}constructor(e,n={}){this.numberFormatter=Z_e(e,n),this.options=n}}function Z_e(t,e={}){let{numberingSystem:n}=e;if(n&&t.includes("-nu-")&&(t.includes("-u-")||(t+="-u-"),t+=`-nu-${n}`),e.style==="unit"&&!MT){var r;let{unit:a,unitDisplay:o="short"}=e;if(!a)throw new Error('unit option must be provided with style: "unit"');if(!(!((r=QJ[a])===null||r===void 0)&&r[o]))throw new Error(`Unsupported unit ${a} with unitDisplay = ${o}`);e={...e,style:"decimal"}}let i=t+(e?Object.entries(e).sort((a,o)=>a[0]<o[0]?-1:1).join():"");if(bR.has(i))return bR.get(i);let s=new Intl.NumberFormat(t,e);return bR.set(i,s),s}function eIe(t,e,n){if(e==="auto")return t.format(n);if(e==="never")return t.format(Math.abs(n));{let r=!1;if(e==="always"?r=n>0||Object.is(n,0):e==="exceptZero"&&(Object.is(n,-0)||Object.is(n,0)?n=Math.abs(n):r=n>0),r){let i=t.format(-n),s=t.format(n),a=i.replace(s,"").replace(/\u200e|\u061C/,"");return[...a].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),i.replace(s,"!!!").replace(a,"+").replace("!!!",s)}else return t.format(n)}}const tIe=new RegExp("^.*\\(.*\\).*$"),nIe=["latn","arab","hanidec","deva","beng","fullwide"];class UJ{parse(e){return CR(this.locale,this.options,e).parse(e)}isValidPartialNumber(e,n,r){return CR(this.locale,this.options,e).isValidPartialNumber(e,n,r)}getNumberingSystem(e){return CR(this.locale,this.options,e).options.numberingSystem}constructor(e,n={}){this.locale=e,this.options=n}}const R$=new Map;function CR(t,e,n){let r=P$(t,e);if(!t.includes("-nu-")&&!r.isValidPartialNumber(n)){for(let i of nIe)if(i!==r.options.numberingSystem){let s=P$(t+(t.includes("-u-")?"-nu-":"-u-nu-")+i,e);if(s.isValidPartialNumber(n))return s}}return r}function P$(t,e){let n=t+(e?Object.entries(e).sort((i,s)=>i[0]<s[0]?-1:1).join():""),r=R$.get(n);return r||(r=new rIe(t,e),R$.set(n,r)),r}class rIe{parse(e){let n=this.sanitize(e);if(this.symbols.group&&(n=JC(n,this.symbols.group,"")),this.symbols.decimal&&(n=n.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(n=n.replace(this.symbols.minusSign,"-")),n=n.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let a=n.indexOf("-");n=n.replace("-",""),n=n.replace("+","");let o=n.indexOf(".");o===-1&&(o=n.length),n=n.replace(".",""),o-2===0?n=`0.${n}`:o-2===-1?n=`0.0${n}`:o-2===-2?n="0.00":n=`${n.slice(0,o-2)}.${n.slice(o-2)}`,a>-1&&(n=`-${n}`)}let r=n?+n:NaN;if(isNaN(r))return NaN;if(this.options.style==="percent"){var i,s;let a={...this.options,style:"decimal",minimumFractionDigits:Math.min(((i=this.options.minimumFractionDigits)!==null&&i!==void 0?i:0)+2,20),maximumFractionDigits:Math.min(((s=this.options.maximumFractionDigits)!==null&&s!==void 0?s:0)+2,20)};return new UJ(this.locale,a).parse(new jy(this.locale,a).format(r))}return this.options.currencySign==="accounting"&&tIe.test(e)&&(r=-1*r),r}sanitize(e){return e=e.replace(this.symbols.literals,""),this.symbols.minusSign&&(e=e.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(e=e.replace(",",this.symbols.decimal),e=e.replace("",this.symbols.decimal)),this.symbols.group&&(e=JC(e,".",this.symbols.group))),this.symbols.group===""&&e.includes("'")&&(e=JC(e,"'",this.symbols.group)),this.options.locale==="fr-FR"&&this.symbols.group&&(e=JC(e," ",this.symbols.group),e=JC(e,/\u00A0/g,this.symbols.group)),e}isValidPartialNumber(e,n=-1/0,r=1/0){return e=this.sanitize(e),this.symbols.minusSign&&e.startsWith(this.symbols.minusSign)&&n<0?e=e.slice(this.symbols.minusSign.length):this.symbols.plusSign&&e.startsWith(this.symbols.plusSign)&&r>0&&(e=e.slice(this.symbols.plusSign.length)),this.symbols.group&&e.startsWith(this.symbols.group)||this.symbols.decimal&&e.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(e=JC(e,this.symbols.group,"")),e=e.replace(this.symbols.numeral,""),this.symbols.decimal&&(e=e.replace(this.symbols.decimal,"")),e.length===0)}constructor(e,n={}){this.locale=e,n.roundingIncrement!==1&&n.roundingIncrement!=null&&(n.maximumFractionDigits==null&&n.minimumFractionDigits==null?(n.maximumFractionDigits=0,n.minimumFractionDigits=0):n.maximumFractionDigits==null?n.maximumFractionDigits=n.minimumFractionDigits:n.minimumFractionDigits==null&&(n.minimumFractionDigits=n.maximumFractionDigits)),this.formatter=new Intl.NumberFormat(e,n),this.options=this.formatter.resolvedOptions(),this.symbols=sIe(e,this.formatter,this.options,n);var r,i;this.options.style==="percent"&&(((r=this.options.minimumFractionDigits)!==null&&r!==void 0?r:0)>18||((i=this.options.maximumFractionDigits)!==null&&i!==void 0?i:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const k$=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),iIe=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function sIe(t,e,n,r){var i,s,a,o;let l=new Intl.NumberFormat(t,{...n,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),c=l.formatToParts(-10000.111),u=l.formatToParts(10000.111),h=iIe.map(L=>l.formatToParts(L));var f;let p=(f=(i=c.find(L=>L.type==="minusSign"))===null||i===void 0?void 0:i.value)!==null&&f!==void 0?f:"-",m=(s=u.find(L=>L.type==="plusSign"))===null||s===void 0?void 0:s.value;!m&&(r?.signDisplay==="exceptZero"||r?.signDisplay==="always")&&(m="+");let A=(a=new Intl.NumberFormat(t,{...n,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(L=>L.type==="decimal"))===null||a===void 0?void 0:a.value,x=(o=c.find(L=>L.type==="group"))===null||o===void 0?void 0:o.value,E=c.filter(L=>!k$.has(L.type)).map(L=>N$(L.value)),w=h.flatMap(L=>L.filter(F=>!k$.has(F.type)).map(F=>N$(F.value))),B=[...new Set([...E,...w])].sort((L,F)=>F.length-L.length),D=B.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${B.join("|")}|[\\p{White_Space}]`,"gu"),T=[...new Intl.NumberFormat(n.locale,{useGrouping:!1}).format(9876543210)].reverse(),M=new Map(T.map((L,F)=>[L,F])),R=new RegExp(`[${T.join("")}]`,"g");return{minusSign:p,plusSign:m,decimal:A,group:x,literals:D,numeral:R,index:L=>String(M.get(L))}}function JC(t,e,n){return t.replaceAll?t.replaceAll(e,n):t.split(e).join(n)}function N$(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function K5(t={}){let{locale:e}=so();return C.useMemo(()=>new jy(e,t),[e,t])}let ER=new Map;function KM(t){let{locale:e}=so(),n=e+(t?Object.entries(t).sort((i,s)=>i[0]<s[0]?-1:1).join():"");if(ER.has(n))return ER.get(n);let r=new Intl.Collator(e,t);return ER.set(n,r),r}function aIe(t){let e=KM({usage:"search",...t}),n=C.useCallback((s,a)=>a.length===0?!0:(s=s.normalize("NFC"),a=a.normalize("NFC"),e.compare(s.slice(0,a.length),a)===0),[e]),r=C.useCallback((s,a)=>a.length===0?!0:(s=s.normalize("NFC"),a=a.normalize("NFC"),e.compare(s.slice(-a.length),a)===0),[e]),i=C.useCallback((s,a)=>{if(a.length===0)return!0;s=s.normalize("NFC"),a=a.normalize("NFC");let o=0,l=a.length;for(;o+l<=s.length;o++){let c=s.slice(o,o+l);if(e.compare(a,c)===0)return!0}return!1},[e]);return C.useMemo(()=>({startsWith:n,endsWith:r,contains:i}),[n,r,i])}let qa=typeof document<"u"?window.visualViewport:null;function oIe(t){let{direction:e}=so(),{arrowSize:n,targetRef:r,overlayRef:i,arrowRef:s,scrollRef:a=i,placement:o="bottom",containerPadding:l=12,shouldFlip:c=!0,boundaryElement:u=typeof document<"u"?document.body:null,offset:h=0,crossOffset:f=0,shouldUpdatePosition:p=!0,isOpen:m=!0,onClose:v,maxHeight:A,arrowBoundaryOffset:x=0}=t,[E,w]=C.useState(null),B=[p,o,i.current,r.current,s?.current,a.current,l,c,u,h,f,m,e,A,x,n],D=C.useRef(qa?.scale);C.useEffect(()=>{m&&(D.current=qa?.scale)},[m]);let T=C.useCallback(()=>{if(p===!1||!m||!i.current||!r.current||!u||qa?.scale!==D.current)return;let z=null;if(a.current&&a.current.contains(document.activeElement)){var G;let re=(G=document.activeElement)===null||G===void 0?void 0:G.getBoundingClientRect(),J=a.current.getBoundingClientRect();var V;if(z={type:"top",offset:((V=re?.top)!==null&&V!==void 0?V:0)-J.top},z.offset>J.height/2){z.type="bottom";var q;z.offset=((q=re?.bottom)!==null&&q!==void 0?q:0)-J.bottom}}let O=i.current;if(!A&&i.current){var H;O.style.top="0px",O.style.bottom="";var K;O.style.maxHeight=((K=(H=window.visualViewport)===null||H===void 0?void 0:H.height)!==null&&K!==void 0?K:window.innerHeight)+"px"}let X=D_e({placement:cIe(o,e),overlayNode:i.current,targetNode:r.current,scrollNode:a.current||i.current,padding:l,shouldFlip:c,boundaryElement:u,offset:h,crossOffset:f,maxHeight:A,arrowSize:n??(s?.current?dF(s.current,!0).width:0),arrowBoundaryOffset:x});if(X.position){if(O.style.top="",O.style.bottom="",O.style.left="",O.style.right="",Object.keys(X.position).forEach(re=>O.style[re]=X.position[re]+"px"),O.style.maxHeight=X.maxHeight!=null?X.maxHeight+"px":"",z&&document.activeElement&&a.current){let re=document.activeElement.getBoundingClientRect(),J=a.current.getBoundingClientRect(),Z=re[z.type]-J[z.type];a.current.scrollTop+=Z-z.offset}w(X)}},B);Fi(T,B),lIe(T),D_({ref:i,onResize:T}),D_({ref:r,onResize:T});let M=C.useRef(!1);Fi(()=>{let z,G=()=>{M.current=!0,clearTimeout(z),z=setTimeout(()=>{M.current=!1},500),T()},V=()=>{M.current&&G()};return qa?.addEventListener("resize",G),qa?.addEventListener("scroll",V),()=>{qa?.removeEventListener("resize",G),qa?.removeEventListener("scroll",V)}},[T]);let R=C.useCallback(()=>{M.current||v?.()},[v,M]);P_e({triggerRef:r,isOpen:m,onClose:v&&R});var k,L,F;return{overlayProps:{style:{position:E?"absolute":"fixed",top:E?void 0:0,left:E?void 0:0,zIndex:1e5,...E?.position,maxHeight:(k=E?.maxHeight)!==null&&k!==void 0?k:"100vh"}},placement:(L=E?.placement)!==null&&L!==void 0?L:null,triggerAnchorPoint:(F=E?.triggerAnchorPoint)!==null&&F!==void 0?F:null,arrowProps:{"aria-hidden":"true",role:"presentation",style:{left:E?.arrowOffsetLeft,top:E?.arrowOffsetTop}},updatePosition:T}}function lIe(t){Fi(()=>(window.addEventListener("resize",t,!1),()=>{window.removeEventListener("resize",t,!1)}),[t])}function cIe(t,e){return e==="rtl"?t.replace("start","right").replace("end","left"):t.replace("start","left").replace("end","right")}function fF(t){let e=t;return e.nativeEvent=t,e.isDefaultPrevented=()=>e.defaultPrevented,e.isPropagationStopped=()=>e.cancelBubble,e.persist=()=>{},e}function HJ(t,e){Object.defineProperty(t,"target",{value:e}),Object.defineProperty(t,"currentTarget",{value:e})}function GJ(t){let e=C.useRef({isFocused:!1,observer:null});Fi(()=>{const r=e.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=Js(r=>{t?.(r)});return C.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){e.current.isFocused=!0;let i=r.target,s=a=>{if(e.current.isFocused=!1,i.disabled){let o=fF(a);n(o)}e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};i.addEventListener("focusout",s,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&i.disabled){var a;(a=e.current.observer)===null||a===void 0||a.disconnect();let o=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:o})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:o}))}}),e.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let DT=!1;function uIe(t){for(;t&&!TX(t);)t=t.parentElement;let e=ad(t),n=e.document.activeElement;if(!n||n===t)return;DT=!0;let r=!1,i=u=>{(u.target===n||r)&&u.stopImmediatePropagation()},s=u=>{(u.target===n||r)&&(u.stopImmediatePropagation(),!t&&!r&&(r=!0,th(n),l()))},a=u=>{(u.target===t||r)&&u.stopImmediatePropagation()},o=u=>{(u.target===t||r)&&(u.stopImmediatePropagation(),r||(r=!0,th(n),l()))};e.addEventListener("blur",i,!0),e.addEventListener("focusout",s,!0),e.addEventListener("focusin",o,!0),e.addEventListener("focus",a,!0);let l=()=>{cancelAnimationFrame(c),e.removeEventListener("blur",i,!0),e.removeEventListener("focusout",s,!0),e.removeEventListener("focusin",o,!0),e.removeEventListener("focus",a,!0),DT=!1,r=!1},c=requestAnimationFrame(l);return l}let T1="default",q5="",Y3=new WeakMap;function VJ(t){if(zE()){if(T1==="default"){const e=ji(t);q5=e.documentElement.style.webkitUserSelect,e.documentElement.style.webkitUserSelect="none"}T1="disabled"}else if(t instanceof HTMLElement||t instanceof SVGElement){let e="userSelect"in t.style?"userSelect":"webkitUserSelect";Y3.set(t,t.style[e]),t.style[e]="none"}}function Y5(t){if(zE()){if(T1!=="disabled")return;T1="restoring",setTimeout(()=>{wX(()=>{if(T1==="restoring"){const e=ji(t);e.documentElement.style.webkitUserSelect==="none"&&(e.documentElement.style.webkitUserSelect=q5||""),q5="",T1="default"}})},300)}else if((t instanceof HTMLElement||t instanceof SVGElement)&&t&&Y3.has(t)){let e=Y3.get(t),n="userSelect"in t.style?"userSelect":"webkitUserSelect";t.style[n]==="none"&&(t.style[n]=e),t.getAttribute("style")===""&&t.removeAttribute("style"),Y3.delete(t)}}const R_=we.createContext({register:()=>{}});R_.displayName="PressResponderContext";function dIe(t,e){return e.get?e.get.call(t):e.value}function WJ(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function hIe(t,e){var n=WJ(t,e,"get");return dIe(t,n)}function fIe(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}function L$(t,e,n){var r=WJ(t,e,"set");return fIe(t,r,n),n}function pIe(t){let e=C.useContext(R_);if(e){let{register:n,...r}=e;t=an(r,t),n()}return aF(e,t.ref),t}var xB=new WeakMap;class bB{continuePropagation(){L$(this,xB,!1)}get shouldStopPropagation(){return hIe(this,xB)}constructor(e,n,r,i){J_e(this,xB,{writable:!0,value:void 0}),L$(this,xB,!0);var s;let a=(s=i?.target)!==null&&s!==void 0?s:r.currentTarget;const o=a?.getBoundingClientRect();let l,c=0,u,h=null;r.clientX!=null&&r.clientY!=null&&(u=r.clientX,h=r.clientY),o&&(u!=null&&h!=null?(l=u-o.left,c=h-o.top):(l=o.width/2,c=o.height/2)),this.type=e,this.pointerType=n,this.target=r.currentTarget,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.x=l,this.y=c}}const F$=Symbol("linkClicked"),j$="react-aria-pressable-style",O$="data-react-aria-pressable";function Oy(t){let{onPress:e,onPressChange:n,onPressStart:r,onPressEnd:i,onPressUp:s,onClick:a,isDisabled:o,isPressed:l,preventFocusOnPress:c,shouldCancelOnPointerExit:u,allowTextSelectionOnPress:h,ref:f,...p}=pIe(t),[m,v]=C.useState(!1),A=C.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:x,removeAllGlobalListeners:E}=z0(),w=Js((F,z)=>{let G=A.current;if(o||G.didFirePressStart)return!1;let V=!0;if(G.isTriggeringEvent=!0,r){let q=new bB("pressstart",z,F);r(q),V=q.shouldStopPropagation}return n&&n(!0),G.isTriggeringEvent=!1,G.didFirePressStart=!0,v(!0),V}),B=Js((F,z,G=!0)=>{let V=A.current;if(!V.didFirePressStart)return!1;V.didFirePressStart=!1,V.isTriggeringEvent=!0;let q=!0;if(i){let O=new bB("pressend",z,F);i(O),q=O.shouldStopPropagation}if(n&&n(!1),v(!1),e&&G&&!o){let O=new bB("press",z,F);e(O),q&&(q=O.shouldStopPropagation)}return V.isTriggeringEvent=!1,q}),D=Js((F,z)=>{let G=A.current;if(o)return!1;if(s){G.isTriggeringEvent=!0;let V=new bB("pressup",z,F);return s(V),G.isTriggeringEvent=!1,V.shouldStopPropagation}return!0}),T=Js(F=>{let z=A.current;if(z.isPressed&&z.target){z.didFirePressStart&&z.pointerType!=null&&B(gx(z.target,F),z.pointerType,!1),z.isPressed=!1,z.isOverTarget=!1,z.activePointerId=null,z.pointerType=null,E(),h||Y5(z.target);for(let G of z.disposables)G();z.disposables=[]}}),M=Js(F=>{u&&T(F)}),R=Js(F=>{o||a?.(F)}),k=Js((F,z)=>{if(!o&&a){let G=new MouseEvent("click",F);HJ(G,z),a(fF(G))}}),L=C.useMemo(()=>{let F=A.current,z={onKeyDown(V){if(SR(V.nativeEvent,V.currentTarget)&&Zu(V.currentTarget,Xa(V.nativeEvent))){var q;z$(Xa(V.nativeEvent),V.key)&&V.preventDefault();let O=!0;if(!F.isPressed&&!V.repeat){F.target=V.currentTarget,F.isPressed=!0,F.pointerType="keyboard",O=w(V,"keyboard");let H=V.currentTarget,K=X=>{SR(X,H)&&!X.repeat&&Zu(H,Xa(X))&&F.target&&D(gx(F.target,X),"keyboard")};x(ji(V.currentTarget),"keyup",Fp(K,G),!0)}O&&V.stopPropagation(),V.metaKey&&Fy()&&((q=F.metaKeyEvents)===null||q===void 0||q.set(V.key,V.nativeEvent))}else V.key==="Meta"&&(F.metaKeyEvents=new Map)},onClick(V){if(!(V&&!Zu(V.currentTarget,Xa(V.nativeEvent)))&&V&&V.button===0&&!F.isTriggeringEvent&&!xb.isOpening){let q=!0;if(o&&V.preventDefault(),!F.ignoreEmulatedMouseEvents&&!F.isPressed&&(F.pointerType==="virtual"||IX(V.nativeEvent))){let O=w(V,"virtual"),H=D(V,"virtual"),K=B(V,"virtual");R(V),q=O&&H&&K}else if(F.isPressed&&F.pointerType!=="keyboard"){let O=F.pointerType||V.nativeEvent.pointerType||"virtual",H=D(gx(V.currentTarget,V),O),K=B(gx(V.currentTarget,V),O,!0);q=H&&K,F.isOverTarget=!1,R(V),T(V)}F.ignoreEmulatedMouseEvents=!1,q&&V.stopPropagation()}}},G=V=>{var q;if(F.isPressed&&F.target&&SR(V,F.target)){var O;z$(Xa(V),V.key)&&V.preventDefault();let K=Xa(V),X=Zu(F.target,Xa(V));B(gx(F.target,V),"keyboard",X),X&&k(V,F.target),E(),V.key!=="Enter"&&pF(F.target)&&Zu(F.target,K)&&!V[F$]&&(V[F$]=!0,xb(F.target,V,!1)),F.isPressed=!1,(O=F.metaKeyEvents)===null||O===void 0||O.delete(V.key)}else if(V.key==="Meta"&&(!((q=F.metaKeyEvents)===null||q===void 0)&&q.size)){var H;let K=F.metaKeyEvents;F.metaKeyEvents=void 0;for(let X of K.values())(H=F.target)===null||H===void 0||H.dispatchEvent(new KeyboardEvent("keyup",X))}};if(typeof PointerEvent<"u"){z.onPointerDown=O=>{if(O.button!==0||!Zu(O.currentTarget,Xa(O.nativeEvent)))return;if(p_e(O.nativeEvent)){F.pointerType="virtual";return}F.pointerType=O.pointerType;let H=!0;if(!F.isPressed){F.isPressed=!0,F.isOverTarget=!0,F.activePointerId=O.pointerId,F.target=O.currentTarget,h||VJ(F.target),H=w(O,F.pointerType);let K=Xa(O.nativeEvent);"releasePointerCapture"in K&&K.releasePointerCapture(O.pointerId),x(ji(O.currentTarget),"pointerup",V,!1),x(ji(O.currentTarget),"pointercancel",q,!1)}H&&O.stopPropagation()},z.onMouseDown=O=>{if(Zu(O.currentTarget,Xa(O.nativeEvent))&&O.button===0){if(c){let H=uIe(O.target);H&&F.disposables.push(H)}O.stopPropagation()}},z.onPointerUp=O=>{!Zu(O.currentTarget,Xa(O.nativeEvent))||F.pointerType==="virtual"||O.button===0&&!F.isPressed&&D(O,F.pointerType||O.pointerType)},z.onPointerEnter=O=>{O.pointerId===F.activePointerId&&F.target&&!F.isOverTarget&&F.pointerType!=null&&(F.isOverTarget=!0,w(gx(F.target,O),F.pointerType))},z.onPointerLeave=O=>{O.pointerId===F.activePointerId&&F.target&&F.isOverTarget&&F.pointerType!=null&&(F.isOverTarget=!1,B(gx(F.target,O),F.pointerType,!1),M(O))};let V=O=>{if(O.pointerId===F.activePointerId&&F.isPressed&&O.button===0&&F.target){if(Zu(F.target,Xa(O))&&F.pointerType!=null){let H=!1,K=setTimeout(()=>{F.isPressed&&F.target instanceof HTMLElement&&(H?T(O):(th(F.target),F.target.click()))},80);x(O.currentTarget,"click",()=>H=!0,!0),F.disposables.push(()=>clearTimeout(K))}else T(O);F.isOverTarget=!1}},q=O=>{T(O)};z.onDragStart=O=>{Zu(O.currentTarget,Xa(O.nativeEvent))&&T(O)}}return z},[x,o,c,E,h,T,M,B,w,D,R,k]);return C.useEffect(()=>{if(!f)return;const F=ji(f.current);if(!F||!F.head||F.getElementById(j$))return;const z=F.createElement("style");z.id=j$,z.textContent=`
@layer {
  [${O$}] {
    touch-action: pan-x pan-y pinch-zoom;
  }
}
    `.trim(),F.head.prepend(z)},[f]),C.useEffect(()=>{let F=A.current;return()=>{var z;h||Y5((z=F.target)!==null&&z!==void 0?z:void 0);for(let G of F.disposables)G();F.disposables=[]}},[h]),{isPressed:l||m,pressProps:an(p,L,{[O$]:!0})}}function pF(t){return t.tagName==="A"&&t.hasAttribute("href")}function SR(t,e){const{key:n,code:r}=t,i=e,s=i.getAttribute("role");return(n==="Enter"||n===" "||n==="Spacebar"||r==="Space")&&!(i instanceof ad(i).HTMLInputElement&&!KJ(i,n)||i instanceof ad(i).HTMLTextAreaElement||i.isContentEditable)&&!((s==="link"||!s&&pF(i))&&n!=="Enter")}function gx(t,e){let n=e.clientX,r=e.clientY;return{currentTarget:t,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,clientX:n,clientY:r}}function gIe(t){return t instanceof HTMLInputElement?!1:t instanceof HTMLButtonElement?t.type!=="submit"&&t.type!=="reset":!pF(t)}function z$(t,e){return t instanceof HTMLInputElement?!KJ(t,e):gIe(t)}const mIe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function KJ(t,e){return t.type==="checkbox"||t.type==="radio"?e===" ":mIe.has(t.type)}let $b=null,X5=new Set,Yw=new Map,Cb=!1,J5=!1;const AIe={Tab:!0,Escape:!0};function qM(t,e){for(let n of X5)n(t,e)}function yIe(t){return!(t.metaKey||!Fy()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function RT(t){Cb=!0,yIe(t)&&($b="keyboard",qM("keyboard",t))}function $1(t){$b="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(Cb=!0,qM("pointer",t))}function qJ(t){IX(t)&&(Cb=!0,$b="virtual")}function YJ(t){t.target===window||t.target===document||DT||!t.isTrusted||(!Cb&&!J5&&($b="virtual",qM("virtual",t)),Cb=!1,J5=!1)}function XJ(){DT||(Cb=!1,J5=!0)}function Z5(t){if(typeof window>"u"||typeof document>"u"||Yw.get(ad(t)))return;const e=ad(t),n=ji(t);let r=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){Cb=!0,r.apply(this,arguments)},n.addEventListener("keydown",RT,!0),n.addEventListener("keyup",RT,!0),n.addEventListener("click",qJ,!0),e.addEventListener("focus",YJ,!0),e.addEventListener("blur",XJ,!1),typeof PointerEvent<"u"&&(n.addEventListener("pointerdown",$1,!0),n.addEventListener("pointermove",$1,!0),n.addEventListener("pointerup",$1,!0)),e.addEventListener("beforeunload",()=>{JJ(t)},{once:!0}),Yw.set(e,{focus:r})}const JJ=(t,e)=>{const n=ad(t),r=ji(t);e&&r.removeEventListener("DOMContentLoaded",e),Yw.has(n)&&(n.HTMLElement.prototype.focus=Yw.get(n).focus,r.removeEventListener("keydown",RT,!0),r.removeEventListener("keyup",RT,!0),r.removeEventListener("click",qJ,!0),n.removeEventListener("focus",YJ,!0),n.removeEventListener("blur",XJ,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",$1,!0),r.removeEventListener("pointermove",$1,!0),r.removeEventListener("pointerup",$1,!0)),Yw.delete(n))};function vIe(t){const e=ji(t);let n;return e.readyState!=="loading"?Z5(t):(n=()=>{Z5(t)},e.addEventListener("DOMContentLoaded",n)),()=>JJ(t,n)}typeof document<"u"&&vIe();function PT(){return $b!=="pointer"}function kT(){return $b}function gF(t){$b=t,qM(t,null)}const xIe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function bIe(t,e,n){let r=ji(n?.target);const i=typeof window<"u"?ad(n?.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?ad(n?.target).HTMLTextAreaElement:HTMLTextAreaElement,a=typeof window<"u"?ad(n?.target).HTMLElement:HTMLElement,o=typeof window<"u"?ad(n?.target).KeyboardEvent:KeyboardEvent;return t=t||r.activeElement instanceof i&&!xIe.has(r.activeElement.type)||r.activeElement instanceof s||r.activeElement instanceof a&&r.activeElement.isContentEditable,!(t&&e==="keyboard"&&n instanceof o&&!AIe[n.key])}function CIe(t,e,n){Z5(),C.useEffect(()=>{let r=(i,s)=>{bIe(!!n?.isTextInput,i,s)&&t(PT())};return X5.add(r),()=>{X5.delete(r)}},e)}function zy(t){const e=ji(t),n=Yo(e);if(kT()==="virtual"){let r=n;wX(()=>{Yo(e)===r&&t.isConnected&&th(t)})}else th(t)}function P_(t){let{isDisabled:e,onFocus:n,onBlur:r,onFocusChange:i}=t;const s=C.useCallback(l=>{if(l.target===l.currentTarget)return r&&r(l),i&&i(!1),!0},[r,i]),a=GJ(s),o=C.useCallback(l=>{const c=ji(l.target),u=c?Yo(c):Yo();l.target===l.currentTarget&&u===Xa(l.nativeEvent)&&(n&&n(l),i&&i(!0),a(l))},[i,n,a]);return{focusProps:{onFocus:!e&&(n||i||r)?o:void 0,onBlur:!e&&(r||i)?s:void 0}}}function $$(t){if(!t)return;let e=!0;return n=>{let r={...n,preventDefault(){n.preventDefault()},isDefaultPrevented(){return n.isDefaultPrevented()},stopPropagation(){e=!0},continuePropagation(){e=!1},isPropagationStopped(){return e}};t(r),e&&n.stopPropagation()}}function mF(t){return{keyboardProps:t.isDisabled?{}:{onKeyDown:$$(t.onKeyDown),onKeyUp:$$(t.onKeyUp)}}}let eL=we.createContext(null);function EIe(t){let e=C.useContext(eL)||{};aF(e,t);let{ref:n,...r}=e;return r}function QE(t,e){let{focusProps:n}=P_(t),{keyboardProps:r}=mF(t),i=an(n,r),s=EIe(e),a=t.isDisabled?{}:s,o=C.useRef(t.autoFocus);C.useEffect(()=>{o.current&&e.current&&zy(e.current),o.current=!1},[e]);let l=t.excludeFromTabOrder?-1:0;return t.isDisabled&&(l=void 0),{focusableProps:an({...i,tabIndex:l},a)}}const SIe=we.forwardRef(({children:t,...e},n)=>{let r=C.useRef(!1),i=C.useContext(R_);n=ah(n||i?.ref);let s=an(i||{},{...e,ref:n,register(){r.current=!0,i&&i.register()}});return aF(i,n),C.useEffect(()=>{r.current||(r.current=!0)},[]),we.createElement(R_.Provider,{value:s},t)});function wIe({children:t}){let e=C.useMemo(()=>({register:()=>{}}),[]);return we.createElement(R_.Provider,{value:e},t)}function Wy(t){let{isDisabled:e,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=t,s=C.useRef({isFocusWithin:!1}),{addGlobalListener:a,removeAllGlobalListeners:o}=z0(),l=C.useCallback(h=>{h.currentTarget.contains(h.target)&&s.current.isFocusWithin&&!h.currentTarget.contains(h.relatedTarget)&&(s.current.isFocusWithin=!1,o(),n&&n(h),i&&i(!1))},[n,i,s,o]),c=GJ(l),u=C.useCallback(h=>{if(!h.currentTarget.contains(h.target))return;const f=ji(h.target),p=Yo(f);if(!s.current.isFocusWithin&&p===Xa(h.nativeEvent)){r&&r(h),i&&i(!0),s.current.isFocusWithin=!0,c(h);let m=h.currentTarget;a(f,"focus",v=>{if(s.current.isFocusWithin&&!Zu(m,v.target)){let A=new f.defaultView.FocusEvent("blur",{relatedTarget:v.target});HJ(A,m);let x=fF(A);l(x)}},{capture:!0})}},[r,i,c,a,l]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:u,onBlur:l}}}let tL=!1,CB=0;function _Ie(){tL=!0,setTimeout(()=>{tL=!1},50)}function Q$(t){t.pointerType==="touch"&&_Ie()}function IIe(){if(!(typeof document>"u"))return CB===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",Q$),CB++,()=>{CB--,!(CB>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",Q$)}}function oh(t){let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,isDisabled:i}=t,[s,a]=C.useState(!1),o=C.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;C.useEffect(IIe,[]);let{addGlobalListener:l,removeAllGlobalListeners:c}=z0(),{hoverProps:u,triggerHoverEnd:h}=C.useMemo(()=>{let f=(v,A)=>{if(o.pointerType=A,i||A==="touch"||o.isHovered||!v.currentTarget.contains(v.target))return;o.isHovered=!0;let x=v.currentTarget;o.target=x,l(ji(v.target),"pointerover",E=>{o.isHovered&&o.target&&!Zu(o.target,E.target)&&p(E,E.pointerType)},{capture:!0}),e&&e({type:"hoverstart",target:x,pointerType:A}),n&&n(!0),a(!0)},p=(v,A)=>{let x=o.target;o.pointerType="",o.target=null,!(A==="touch"||!o.isHovered||!x)&&(o.isHovered=!1,c(),r&&r({type:"hoverend",target:x,pointerType:A}),n&&n(!1),a(!1))},m={};return typeof PointerEvent<"u"&&(m.onPointerEnter=v=>{tL&&v.pointerType==="mouse"||f(v,v.pointerType)},m.onPointerLeave=v=>{!i&&v.currentTarget.contains(v.target)&&p(v,v.pointerType)}),{hoverProps:m,triggerHoverEnd:p}},[e,n,r,i,o,l,c]);return C.useEffect(()=>{i&&h({currentTarget:o.target},o.pointerType)},[i]),{hoverProps:u,isHovered:s}}function BIe(t){let{ref:e,onInteractOutside:n,isDisabled:r,onInteractOutsideStart:i}=t,s=C.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),a=Js(l=>{n&&U$(l,e)&&(i&&i(l),s.current.isPointerDown=!0)}),o=Js(l=>{n&&n(l)});C.useEffect(()=>{let l=s.current;if(r)return;const c=e.current,u=ji(c);if(typeof PointerEvent<"u"){let h=f=>{l.isPointerDown&&U$(f,e)&&o(f),l.isPointerDown=!1};return u.addEventListener("pointerdown",a,!0),u.addEventListener("click",h,!0),()=>{u.removeEventListener("pointerdown",a,!0),u.removeEventListener("click",h,!0)}}},[e,r,a,o])}function U$(t,e){if(t.button>0)return!1;if(t.target){const n=t.target.ownerDocument;if(!n||!n.documentElement.contains(t.target)||t.target.closest("[data-react-aria-top-layer]"))return!1}return e.current?!t.composedPath().includes(e.current):!1}function NT(t){let{onMoveStart:e,onMove:n,onMoveEnd:r}=t,i=C.useRef({didMove:!1,lastPosition:null,id:null}),{addGlobalListener:s,removeGlobalListener:a}=z0(),o=Js((u,h,f,p)=>{f===0&&p===0||(i.current.didMove||(i.current.didMove=!0,e?.({type:"movestart",pointerType:h,shiftKey:u.shiftKey,metaKey:u.metaKey,ctrlKey:u.ctrlKey,altKey:u.altKey})),n?.({type:"move",pointerType:h,deltaX:f,deltaY:p,shiftKey:u.shiftKey,metaKey:u.metaKey,ctrlKey:u.ctrlKey,altKey:u.altKey}))}),l=Js((u,h)=>{Y5(),i.current.didMove&&r?.({type:"moveend",pointerType:h,shiftKey:u.shiftKey,metaKey:u.metaKey,ctrlKey:u.ctrlKey,altKey:u.altKey})});return{moveProps:C.useMemo(()=>{let u={},h=()=>{VJ(),i.current.didMove=!1};{let p=v=>{if(v.pointerId===i.current.id){var A,x;let B=v.pointerType||"mouse";var E,w;o(v,B,v.pageX-((E=(A=i.current.lastPosition)===null||A===void 0?void 0:A.pageX)!==null&&E!==void 0?E:0),v.pageY-((w=(x=i.current.lastPosition)===null||x===void 0?void 0:x.pageY)!==null&&w!==void 0?w:0)),i.current.lastPosition={pageX:v.pageX,pageY:v.pageY}}},m=v=>{if(v.pointerId===i.current.id){let A=v.pointerType||"mouse";l(v,A),i.current.id=null,a(window,"pointermove",p,!1),a(window,"pointerup",m,!1),a(window,"pointercancel",m,!1)}};u.onPointerDown=v=>{v.button===0&&i.current.id==null&&(h(),v.stopPropagation(),v.preventDefault(),i.current.lastPosition={pageX:v.pageX,pageY:v.pageY},i.current.id=v.pointerId,s(window,"pointermove",p,!1),s(window,"pointerup",m,!1),s(window,"pointercancel",m,!1))}}let f=(p,m,v)=>{h(),o(p,"keyboard",m,v),l(p,"keyboard")};return u.onKeyDown=p=>{switch(p.key){case"Left":case"ArrowLeft":p.preventDefault(),p.stopPropagation(),f(p,-1,0);break;case"Right":case"ArrowRight":p.preventDefault(),p.stopPropagation(),f(p,1,0);break;case"Up":case"ArrowUp":p.preventDefault(),p.stopPropagation(),f(p,0,-1);break;case"Down":case"ArrowDown":p.preventDefault(),p.stopPropagation(),f(p,0,1);break}},u},[i,s,a,o,l])}}function ZJ(t,e){let{onScroll:n,isDisabled:r}=t,i=C.useCallback(s=>{s.ctrlKey||(s.preventDefault(),s.stopPropagation(),n&&n({deltaX:s.deltaX,deltaY:s.deltaY}))},[n]);B1(e,"wheel",r?void 0:i)}const TIe=500;function eZ(t){let{isDisabled:e,onLongPressStart:n,onLongPressEnd:r,onLongPress:i,threshold:s=TIe,accessibilityDescription:a}=t;const o=C.useRef(void 0);let{addGlobalListener:l,removeGlobalListener:c}=z0(),{pressProps:u}=Oy({isDisabled:e,onPressStart(f){if(f.continuePropagation(),(f.pointerType==="mouse"||f.pointerType==="touch")&&(n&&n({...f,type:"longpressstart"}),o.current=setTimeout(()=>{f.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),ji(f.target).activeElement!==f.target&&th(f.target),i&&i({...f,type:"longpress"}),o.current=void 0},s),f.pointerType==="touch")){let p=m=>{m.preventDefault()};l(f.target,"contextmenu",p,{once:!0}),l(window,"pointerup",()=>{setTimeout(()=>{c(f.target,"contextmenu",p)},30)},{once:!0})}},onPressEnd(f){o.current&&clearTimeout(o.current),r&&(f.pointerType==="mouse"||f.pointerType==="touch")&&r({...f,type:"longpressend"})}}),h=f_e(i&&!e?a:void 0);return{longPressProps:an(u,h)}}const H$=we.createContext(null),nL="react-aria-focus-scope-restore";let Ls=null;function AF(t){let{children:e,contain:n,restoreFocus:r,autoFocus:i}=t,s=C.useRef(null),a=C.useRef(null),o=C.useRef([]),{parentNode:l}=C.useContext(H$)||{},c=C.useMemo(()=>new iL({scopeRef:o}),[o]);Fi(()=>{let f=l||Mo.root;if(Mo.getTreeNode(f.scopeRef)&&Ls&&!LT(Ls,f.scopeRef)){let p=Mo.getTreeNode(Ls);p&&(f=p)}f.addChild(c),Mo.addNode(c)},[c,l]),Fi(()=>{let f=Mo.getTreeNode(o);f&&(f.contain=!!n)},[n]),Fi(()=>{var f;let p=(f=s.current)===null||f===void 0?void 0:f.nextSibling,m=[],v=A=>A.stopPropagation();for(;p&&p!==a.current;)m.push(p),p.addEventListener(nL,v),p=p.nextSibling;return o.current=m,()=>{for(let A of m)A.removeEventListener(nL,v)}},[e]),NIe(o,r,n),RIe(o,n),LIe(o,r,n),kIe(o,i),C.useEffect(()=>{const f=Yo(ji(o.current?o.current[0]:void 0));let p=null;if(df(f,o.current)){for(let m of Mo.traverse())m.scopeRef&&df(f,m.scopeRef.current)&&(p=m);p===Mo.getTreeNode(o)&&(Ls=p.scopeRef)}},[o]),Fi(()=>()=>{var f,p,m;let v=(m=(p=Mo.getTreeNode(o))===null||p===void 0||(f=p.parent)===null||f===void 0?void 0:f.scopeRef)!==null&&m!==void 0?m:null;(o===Ls||LT(o,Ls))&&(!v||Mo.getTreeNode(v))&&(Ls=v),Mo.removeTreeNode(o)},[o]);let u=C.useMemo(()=>MIe(o),[]),h=C.useMemo(()=>({focusManager:u,parentNode:c}),[c,u]);return we.createElement(H$.Provider,{value:h},we.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:s}),e,we.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:a}))}function MIe(t){return{focusNext(e={}){let n=t.current,{from:r,tabbable:i,wrap:s,accept:a}=e;var o;let l=r||Yo(ji((o=n[0])!==null&&o!==void 0?o:void 0)),c=n[0].previousElementSibling,u=Xx(n),h=uu(u,{tabbable:i,accept:a},n);h.currentNode=df(l,n)?l:c;let f=h.nextNode();return!f&&s&&(h.currentNode=c,f=h.nextNode()),f&&rd(f,!0),f},focusPrevious(e={}){let n=t.current,{from:r,tabbable:i,wrap:s,accept:a}=e;var o;let l=r||Yo(ji((o=n[0])!==null&&o!==void 0?o:void 0)),c=n[n.length-1].nextElementSibling,u=Xx(n),h=uu(u,{tabbable:i,accept:a},n);h.currentNode=df(l,n)?l:c;let f=h.previousNode();return!f&&s&&(h.currentNode=c,f=h.previousNode()),f&&rd(f,!0),f},focusFirst(e={}){let n=t.current,{tabbable:r,accept:i}=e,s=Xx(n),a=uu(s,{tabbable:r,accept:i},n);a.currentNode=n[0].previousElementSibling;let o=a.nextNode();return o&&rd(o,!0),o},focusLast(e={}){let n=t.current,{tabbable:r,accept:i}=e,s=Xx(n),a=uu(s,{tabbable:r,accept:i},n);a.currentNode=n[n.length-1].nextElementSibling;let o=a.previousNode();return o&&rd(o,!0),o}}}function Xx(t){return t[0].parentElement}function Iw(t){let e=Mo.getTreeNode(Ls);for(;e&&e.scopeRef!==t;){if(e.contain)return!1;e=e.parent}return!0}function DIe(t){if(t.checked)return!0;let e=[];if(!t.form)e=[...ji(t).querySelectorAll(`input[type="radio"][name="${CSS.escape(t.name)}"]`)].filter(s=>!s.form);else{var n,r;let s=(r=t.form)===null||r===void 0||(n=r.elements)===null||n===void 0?void 0:n.namedItem(t.name);e=[...s??[]]}return e?!e.some(s=>s.checked):!1}function RIe(t,e){let n=C.useRef(void 0),r=C.useRef(void 0);Fi(()=>{let i=t.current;if(!e){r.current&&(cancelAnimationFrame(r.current),r.current=void 0);return}const s=ji(i?i[0]:void 0);let a=c=>{if(c.key!=="Tab"||c.altKey||c.ctrlKey||c.metaKey||!Iw(t)||c.isComposing)return;let u=Yo(s),h=t.current;if(!h||!df(u,h))return;let f=Xx(h),p=uu(f,{tabbable:!0},h);if(!u)return;p.currentNode=u;let m=c.shiftKey?p.previousNode():p.nextNode();m||(p.currentNode=c.shiftKey?h[h.length-1].nextElementSibling:h[0].previousElementSibling,m=c.shiftKey?p.previousNode():p.nextNode()),c.preventDefault(),m&&rd(m,!0)},o=c=>{(!Ls||LT(Ls,t))&&df(Xa(c),t.current)?(Ls=t,n.current=Xa(c)):Iw(t)&&!by(Xa(c),t)?n.current?n.current.focus():Ls&&Ls.current&&rL(Ls.current):Iw(t)&&(n.current=Xa(c))},l=c=>{r.current&&cancelAnimationFrame(r.current),r.current=requestAnimationFrame(()=>{let u=kT(),h=(u==="virtual"||u===null)&&_I()&&sF(),f=Yo(s);if(!h&&f&&Iw(t)&&!by(f,t)){Ls=t;let m=Xa(c);if(m&&m.isConnected){var p;n.current=m,(p=n.current)===null||p===void 0||p.focus()}else Ls.current&&rL(Ls.current)}})};return s.addEventListener("keydown",a,!1),s.addEventListener("focusin",o,!1),i?.forEach(c=>c.addEventListener("focusin",o,!1)),i?.forEach(c=>c.addEventListener("focusout",l,!1)),()=>{s.removeEventListener("keydown",a,!1),s.removeEventListener("focusin",o,!1),i?.forEach(c=>c.removeEventListener("focusin",o,!1)),i?.forEach(c=>c.removeEventListener("focusout",l,!1))}},[t,e]),Fi(()=>()=>{r.current&&cancelAnimationFrame(r.current)},[r])}function tZ(t){return by(t)}function df(t,e){return!t||!e?!1:e.some(n=>n.contains(t))}function by(t,e=null){if(t instanceof Element&&t.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:n}of Mo.traverse(Mo.getTreeNode(e)))if(n&&df(t,n.current))return!0;return!1}function PIe(t){return by(t,Ls)}function LT(t,e){var n;let r=(n=Mo.getTreeNode(e))===null||n===void 0?void 0:n.parent;for(;r;){if(r.scopeRef===t)return!0;r=r.parent}return!1}function rd(t,e=!1){if(t!=null&&!e)try{zy(t)}catch{}else if(t!=null)try{t.focus()}catch{}}function nZ(t,e=!0){let n=t[0].previousElementSibling,r=Xx(t),i=uu(r,{tabbable:e},t);i.currentNode=n;let s=i.nextNode();return e&&!s&&(r=Xx(t),i=uu(r,{tabbable:!1},t),i.currentNode=n,s=i.nextNode()),s}function rL(t,e=!0){rd(nZ(t,e))}function kIe(t,e){const n=we.useRef(e);C.useEffect(()=>{if(n.current){Ls=t;const r=ji(t.current?t.current[0]:void 0);!df(Yo(r),Ls.current)&&t.current&&rL(t.current)}n.current=!1},[t])}function NIe(t,e,n){Fi(()=>{if(e||n)return;let r=t.current;const i=ji(r?r[0]:void 0);let s=a=>{let o=Xa(a);df(o,t.current)?Ls=t:tZ(o)||(Ls=null)};return i.addEventListener("focusin",s,!1),r?.forEach(a=>a.addEventListener("focusin",s,!1)),()=>{i.removeEventListener("focusin",s,!1),r?.forEach(a=>a.removeEventListener("focusin",s,!1))}},[t,e,n])}function G$(t){let e=Mo.getTreeNode(Ls);for(;e&&e.scopeRef!==t;){if(e.nodeToRestore)return!1;e=e.parent}return e?.scopeRef===t}function LIe(t,e,n){const r=C.useRef(typeof document<"u"?Yo(ji(t.current?t.current[0]:void 0)):null);Fi(()=>{let i=t.current;const s=ji(i?i[0]:void 0);if(!e||n)return;let a=()=>{(!Ls||LT(Ls,t))&&df(Yo(s),t.current)&&(Ls=t)};return s.addEventListener("focusin",a,!1),i?.forEach(o=>o.addEventListener("focusin",a,!1)),()=>{s.removeEventListener("focusin",a,!1),i?.forEach(o=>o.removeEventListener("focusin",a,!1))}},[t,n]),Fi(()=>{const i=ji(t.current?t.current[0]:void 0);if(!e)return;let s=a=>{if(a.key!=="Tab"||a.altKey||a.ctrlKey||a.metaKey||!Iw(t)||a.isComposing)return;let o=i.activeElement;if(!by(o,t)||!G$(t))return;let l=Mo.getTreeNode(t);if(!l)return;let c=l.nodeToRestore,u=uu(i.body,{tabbable:!0});u.currentNode=o;let h=a.shiftKey?u.previousNode():u.nextNode();if((!c||!c.isConnected||c===i.body)&&(c=void 0,l.nodeToRestore=void 0),(!h||!by(h,t))&&c){u.currentNode=c;do h=a.shiftKey?u.previousNode():u.nextNode();while(by(h,t));a.preventDefault(),a.stopPropagation(),h?rd(h,!0):tZ(c)?rd(c,!0):o.blur()}};return n||i.addEventListener("keydown",s,!0),()=>{n||i.removeEventListener("keydown",s,!0)}},[t,e,n]),Fi(()=>{const i=ji(t.current?t.current[0]:void 0);if(!e)return;let s=Mo.getTreeNode(t);if(s){var a;return s.nodeToRestore=(a=r.current)!==null&&a!==void 0?a:void 0,()=>{let o=Mo.getTreeNode(t);if(!o)return;let l=o.nodeToRestore,c=Yo(i);if(e&&l&&(c&&by(c,t)||c===i.body&&G$(t))){let u=Mo.clone();requestAnimationFrame(()=>{if(i.activeElement===i.body){let h=u.getTreeNode(t);for(;h;){if(h.nodeToRestore&&h.nodeToRestore.isConnected){V$(h.nodeToRestore);return}h=h.parent}for(h=u.getTreeNode(t);h;){if(h.scopeRef&&h.scopeRef.current&&Mo.getTreeNode(h.scopeRef)){let f=nZ(h.scopeRef.current,!0);V$(f);return}h=h.parent}}})}}}},[t,e])}function V$(t){t.dispatchEvent(new CustomEvent(nL,{bubbles:!0,cancelable:!0}))&&rd(t)}function uu(t,e,n){let r=e?.tabbable?E_e:TX,i=t?.nodeType===Node.ELEMENT_NODE?t:null,s=ji(i),a=Vwe(s,t||s,NodeFilter.SHOW_ELEMENT,{acceptNode(o){var l;return!(e==null||(l=e.from)===null||l===void 0)&&l.contains(o)||e?.tabbable&&o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(!DIe(o)||a.currentNode.tagName==="INPUT"&&a.currentNode.type==="radio"&&a.currentNode.name===o.name)?NodeFilter.FILTER_REJECT:r(o)&&(!n||df(o,n))&&(!e?.accept||e.accept(o))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return e?.from&&(a.currentNode=e.from),a}function FIe(t,e={}){return{focusNext(n={}){let r=t.current;if(!r)return null;let{from:i,tabbable:s=e.tabbable,wrap:a=e.wrap,accept:o=e.accept}=n,l=i||Yo(ji(r)),c=uu(r,{tabbable:s,accept:o});r.contains(l)&&(c.currentNode=l);let u=c.nextNode();return!u&&a&&(c.currentNode=r,u=c.nextNode()),u&&rd(u,!0),u},focusPrevious(n=e){let r=t.current;if(!r)return null;let{from:i,tabbable:s=e.tabbable,wrap:a=e.wrap,accept:o=e.accept}=n,l=i||Yo(ji(r)),c=uu(r,{tabbable:s,accept:o});if(r.contains(l))c.currentNode=l;else{let h=wR(c);return h&&rd(h,!0),h??null}let u=c.previousNode();if(!u&&a){c.currentNode=r;let h=wR(c);if(!h)return null;u=h}return u&&rd(u,!0),u??null},focusFirst(n=e){let r=t.current;if(!r)return null;let{tabbable:i=e.tabbable,accept:s=e.accept}=n,o=uu(r,{tabbable:i,accept:s}).nextNode();return o&&rd(o,!0),o},focusLast(n=e){let r=t.current;if(!r)return null;let{tabbable:i=e.tabbable,accept:s=e.accept}=n,a=uu(r,{tabbable:i,accept:s}),o=wR(a);return o&&rd(o,!0),o??null}}}function wR(t){let e,n;do n=t.lastChild(),n&&(e=n);while(n);return e}class yF{get size(){return this.fastMap.size}getTreeNode(e){return this.fastMap.get(e)}addTreeNode(e,n,r){let i=this.fastMap.get(n??null);if(!i)return;let s=new iL({scopeRef:e});i.addChild(s),s.parent=i,this.fastMap.set(e,s),r&&(s.nodeToRestore=r)}addNode(e){this.fastMap.set(e.scopeRef,e)}removeTreeNode(e){if(e===null)return;let n=this.fastMap.get(e);if(!n)return;let r=n.parent;for(let s of this.traverse())s!==n&&n.nodeToRestore&&s.nodeToRestore&&n.scopeRef&&n.scopeRef.current&&df(s.nodeToRestore,n.scopeRef.current)&&(s.nodeToRestore=n.nodeToRestore);let i=n.children;r&&(r.removeChild(n),i.size>0&&i.forEach(s=>r&&r.addChild(s))),this.fastMap.delete(n.scopeRef)}*traverse(e=this.root){if(e.scopeRef!=null&&(yield e),e.children.size>0)for(let n of e.children)yield*this.traverse(n)}clone(){var e;let n=new yF;var r;for(let i of this.traverse())n.addTreeNode(i.scopeRef,(r=(e=i.parent)===null||e===void 0?void 0:e.scopeRef)!==null&&r!==void 0?r:null,i.nodeToRestore);return n}constructor(){this.fastMap=new Map,this.root=new iL({scopeRef:null}),this.fastMap.set(null,this.root)}}class iL{addChild(e){this.children.add(e),e.parent=this}removeChild(e){this.children.delete(e),e.parent=void 0}constructor(e){this.children=new Set,this.contain=!1,this.scopeRef=e.scopeRef}}let Mo=new yF;function mu(t={}){let{autoFocus:e=!1,isTextInput:n,within:r}=t,i=C.useRef({isFocused:!1,isFocusVisible:e||PT()}),[s,a]=C.useState(!1),[o,l]=C.useState(()=>i.current.isFocused&&i.current.isFocusVisible),c=C.useCallback(()=>l(i.current.isFocused&&i.current.isFocusVisible),[]),u=C.useCallback(p=>{i.current.isFocused=p,a(p),c()},[c]);CIe(p=>{i.current.isFocusVisible=p,c()},[],{isTextInput:n});let{focusProps:h}=P_({isDisabled:r,onFocusChange:u}),{focusWithinProps:f}=Wy({isDisabled:!r,onFocusWithinChange:u});return{isFocused:s,isFocusVisible:o,focusProps:r?f:h}}function jIe(t,e){let n=e?.isDisabled,[r,i]=C.useState(!1);return Fi(()=>{if(t?.current&&!n){let s=()=>{if(t.current){let o=uu(t.current,{tabbable:!0});i(!!o.nextNode())}};s();let a=new MutationObserver(s);return a.observe(t.current,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabIndex","disabled"]}),()=>{a.disconnect()}}}),n?!1:r}function rZ(t){let e=zIe(ji(t));e!==t&&(e&&OIe(e,t),t&&vF(t,e))}function OIe(t,e){t.dispatchEvent(new FocusEvent("blur",{relatedTarget:e})),t.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:e}))}function vF(t,e){t.dispatchEvent(new FocusEvent("focus",{relatedTarget:e})),t.dispatchEvent(new FocusEvent("focusin",{bubbles:!0,relatedTarget:e}))}function zIe(t){let e=Yo(t),n=e?.getAttribute("aria-activedescendant");return n&&t.getElementById(n)||e}const _g=[];function iZ(t,e){let{onClose:n,shouldCloseOnBlur:r,isOpen:i,isDismissable:s=!1,isKeyboardDismissDisabled:a=!1,shouldCloseOnInteractOutside:o}=t;C.useEffect(()=>{if(i&&!_g.includes(e))return _g.push(e),()=>{let m=_g.indexOf(e);m>=0&&_g.splice(m,1)}},[i,e]);let l=()=>{_g[_g.length-1]===e&&n&&n()},c=m=>{(!o||o(m.target))&&_g[_g.length-1]===e&&(m.stopPropagation(),m.preventDefault())},u=m=>{(!o||o(m.target))&&(_g[_g.length-1]===e&&(m.stopPropagation(),m.preventDefault()),l())},h=m=>{m.key==="Escape"&&!a&&!m.nativeEvent.isComposing&&(m.stopPropagation(),m.preventDefault(),l())};BIe({ref:e,onInteractOutside:s&&i?u:void 0,onInteractOutsideStart:c});let{focusWithinProps:f}=Wy({isDisabled:!r,onBlurWithin:m=>{!m.relatedTarget||PIe(m.relatedTarget)||(!o||o(m.relatedTarget))&&n?.()}}),p=m=>{m.target===m.currentTarget&&m.preventDefault()};return{overlayProps:{onKeyDown:h,...f},underlayProps:{onPointerDown:p}}}function sZ(t,e,n){let{type:r}=t,{isOpen:i}=e;C.useEffect(()=>{n&&n.current&&pJ.set(n.current,e.close)});let s;r==="menu"?s=!0:r==="listbox"&&(s="listbox");let a=ro();return{triggerProps:{"aria-haspopup":s,"aria-expanded":i,"aria-controls":i?a:void 0,onPress:e.toggle},overlayProps:{id:a}}}const Xw=typeof document<"u"&&window.visualViewport;let EB=0,_R;function aZ(t={}){let{isDisabled:e}=t;Fi(()=>{if(!e)return EB++,EB===1&&(zE()?_R=QIe():_R=$Ie()),()=>{EB--,EB===0&&_R()}},[e])}function $Ie(){let t=window.innerWidth-document.documentElement.clientWidth;return Fp(t>0&&("scrollbarGutter"in document.documentElement.style?IR(document.documentElement,"scrollbarGutter","stable"):IR(document.documentElement,"paddingRight",`${t}px`)),IR(document.documentElement,"overflow","hidden"))}function QIe(){let t,e=!1,n=l=>{let c=l.target;t=bb(c)?c:oF(c,!0),e=!1;let u=c.ownerDocument.defaultView.getSelection();u&&!u.isCollapsed&&u.containsNode(c,!0)&&(e=!0),"selectionStart"in c&&"selectionEnd"in c&&c.selectionStart<c.selectionEnd&&c.ownerDocument.activeElement===c&&(e=!0)},r=document.createElement("style");r.textContent=`
@layer {
  * {
    overscroll-behavior: contain;
  }
}`.trim(),document.head.prepend(r);let i=l=>{if(!(l.touches.length===2||e)){if(!t||t===document.documentElement||t===document.body){l.preventDefault();return}t.scrollHeight===t.clientHeight&&t.scrollWidth===t.clientWidth&&l.preventDefault()}},s=l=>{let c=l.target,u=l.relatedTarget;if(u&&qw(u))u.focus({preventScroll:!0}),W$(u,qw(c));else if(!u){var h;let f=(h=c.parentElement)===null||h===void 0?void 0:h.closest("[tabindex]");f?.focus({preventScroll:!0})}},a=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(l){let c=document.activeElement!=null&&qw(document.activeElement);a.call(this,{...l,preventScroll:!0}),(!l||!l.preventScroll)&&W$(this,c)};let o=Fp(BR(document,"touchstart",n,{passive:!1,capture:!0}),BR(document,"touchmove",i,{passive:!1,capture:!0}),BR(document,"blur",s,!0));return()=>{o(),r.remove(),HTMLElement.prototype.focus=a}}function IR(t,e,n){let r=t.style[e];return t.style[e]=n,()=>{t.style[e]=r}}function BR(t,e,n,r){return t.addEventListener(e,n,r),()=>{t.removeEventListener(e,n,r)}}function W$(t,e){e||!Xw?K$(t):Xw.addEventListener("resize",()=>K$(t),{once:!0})}function K$(t){let e=document.scrollingElement||document.documentElement,n=t;for(;n&&n!==e;){let r=oF(n);if(r!==document.documentElement&&r!==document.body&&r!==n){let i=r.getBoundingClientRect(),s=n.getBoundingClientRect();if(s.top<i.top||s.bottom>i.top+n.clientHeight){let a=i.bottom;Xw&&(a=Math.min(a,Xw.offsetTop+Xw.height));let o=s.top-i.top-((a-i.top)/2-s.height/2);r.scrollTo({top:Math.max(0,Math.min(r.scrollHeight-r.clientHeight,r.scrollTop+o)),behavior:"smooth"})}}n=r.parentElement}}const UIe=C.createContext({});function HIe(){var t;return(t=C.useContext(UIe))!==null&&t!==void 0?t:{}}var oZ={};oZ={dismiss:""};var lZ={};lZ={dismiss:""};var cZ={};cZ={dismiss:"Odstranit"};var uZ={};uZ={dismiss:"Luk"};var dZ={};dZ={dismiss:"Schlieen"};var hZ={};hZ={dismiss:""};var fZ={};fZ={dismiss:"Dismiss"};var pZ={};pZ={dismiss:"Descartar"};var gZ={};gZ={dismiss:"Lpeta"};var mZ={};mZ={dismiss:"Hylk"};var AZ={};AZ={dismiss:"Rejeter"};var yZ={};yZ={dismiss:""};var vZ={};vZ={dismiss:"Odbaci"};var xZ={};xZ={dismiss:"Elutasts"};var bZ={};bZ={dismiss:"Ignora"};var CZ={};CZ={dismiss:""};var EZ={};EZ={dismiss:""};var SZ={};SZ={dismiss:"Atmesti"};var wZ={};wZ={dismiss:"Nerdt"};var _Z={};_Z={dismiss:"Lukk"};var IZ={};IZ={dismiss:"Negeren"};var BZ={};BZ={dismiss:"Zignoruj"};var TZ={};TZ={dismiss:"Descartar"};var MZ={};MZ={dismiss:"Dispensar"};var DZ={};DZ={dismiss:"Revocare"};var RZ={};RZ={dismiss:""};var PZ={};PZ={dismiss:"Zrui"};var kZ={};kZ={dismiss:"Opusti"};var NZ={};NZ={dismiss:"Odbaci"};var LZ={};LZ={dismiss:"Avvisa"};var FZ={};FZ={dismiss:"Kapat"};var jZ={};jZ={dismiss:""};var OZ={};OZ={dismiss:""};var zZ={};zZ={dismiss:""};var $Z={};$Z={"ar-AE":oZ,"bg-BG":lZ,"cs-CZ":cZ,"da-DK":uZ,"de-DE":dZ,"el-GR":hZ,"en-US":fZ,"es-ES":pZ,"et-EE":gZ,"fi-FI":mZ,"fr-FR":AZ,"he-IL":yZ,"hr-HR":vZ,"hu-HU":xZ,"it-IT":bZ,"ja-JP":CZ,"ko-KR":EZ,"lt-LT":SZ,"lv-LV":wZ,"nb-NO":_Z,"nl-NL":IZ,"pl-PL":BZ,"pt-BR":TZ,"pt-PT":MZ,"ro-RO":DZ,"ru-RU":RZ,"sk-SK":PZ,"sl-SI":kZ,"sr-SP":NZ,"sv-SE":LZ,"tr-TR":FZ,"uk-UA":jZ,"zh-CN":OZ,"zh-TW":zZ};const q$={border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"};function YM(t={}){let{style:e,isFocusable:n}=t,[r,i]=C.useState(!1),{focusWithinProps:s}=Wy({isDisabled:!n,onFocusWithinChange:o=>i(o)}),a=C.useMemo(()=>r?e:e?{...q$,...e}:q$,[r]);return{visuallyHiddenProps:{...s,style:a}}}function II(t){let{children:e,elementType:n="div",isFocusable:r,style:i,...s}=t,{visuallyHiddenProps:a}=YM(t);return we.createElement(n,an(s,a),e)}function GIe(t){return t&&t.__esModule?t.default:t}function sL(t){let{onDismiss:e,...n}=t,r=Yg(GIe($Z),"@react-aria/overlays"),i=b0(n,r.format("dismiss")),s=()=>{e&&e()};return we.createElement(II,null,we.createElement("button",{...i,tabIndex:-1,onClick:s,style:{width:1,height:1}}))}const VIe=typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype;let US=new WeakMap,Yu=[];function xF(t,e){let n=ad(t?.[0]),r=e instanceof n.Element?{root:e}:e;var i;let s=(i=r?.root)!==null&&i!==void 0?i:document.body,a=r?.shouldUseInert&&VIe,o=new Set(t),l=new Set,c=v=>a&&v instanceof n.HTMLElement?v.inert:v.getAttribute("aria-hidden")==="true",u=(v,A)=>{a&&v instanceof n.HTMLElement?v.inert=A:A?v.setAttribute("aria-hidden","true"):(v.removeAttribute("aria-hidden"),v instanceof n.HTMLElement&&(v.inert=!1))},h=v=>{for(let w of v.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))o.add(w);let A=w=>{if(l.has(w)||o.has(w)||w.parentElement&&l.has(w.parentElement)&&w.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let B of o)if(w.contains(B))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},x=document.createTreeWalker(v,NodeFilter.SHOW_ELEMENT,{acceptNode:A}),E=A(v);if(E===NodeFilter.FILTER_ACCEPT&&f(v),E!==NodeFilter.FILTER_REJECT){let w=x.nextNode();for(;w!=null;)f(w),w=x.nextNode()}},f=v=>{var A;let x=(A=US.get(v))!==null&&A!==void 0?A:0;c(v)&&x===0||(x===0&&u(v,!0),l.add(v),US.set(v,x+1))};Yu.length&&Yu[Yu.length-1].disconnect(),h(s);let p=new MutationObserver(v=>{for(let A of v)if(A.type==="childList"&&![...o,...l].some(x=>x.contains(A.target)))for(let x of A.addedNodes)(x instanceof HTMLElement||x instanceof SVGElement)&&(x.dataset.liveAnnouncer==="true"||x.dataset.reactAriaTopLayer==="true")?o.add(x):x instanceof Element&&h(x)});p.observe(s,{childList:!0,subtree:!0});let m={visibleNodes:o,hiddenNodes:l,observe(){p.observe(s,{childList:!0,subtree:!0})},disconnect(){p.disconnect()}};return Yu.push(m),()=>{p.disconnect();for(let v of l){let A=US.get(v);A!=null&&(A===1?(u(v,!1),US.delete(v)):US.set(v,A-1))}m===Yu[Yu.length-1]?(Yu.pop(),Yu.length&&Yu[Yu.length-1].observe()):Yu.splice(Yu.indexOf(m),1)}}function WIe(t){let e=Yu[Yu.length-1];if(e&&!e.visibleNodes.has(t))return e.visibleNodes.add(t),()=>{e.visibleNodes.delete(t)}}function KIe(t,e){let{triggerRef:n,popoverRef:r,groupRef:i,isNonModal:s,isKeyboardDismissDisabled:a,shouldCloseOnInteractOutside:o,...l}=t,c=l.trigger==="SubmenuTrigger",{overlayProps:u,underlayProps:h}=iZ({isOpen:e.isOpen,onClose:e.close,shouldCloseOnBlur:!0,isDismissable:!s||c,isKeyboardDismissDisabled:a,shouldCloseOnInteractOutside:o},i??r),{overlayProps:f,arrowProps:p,placement:m,triggerAnchorPoint:v}=oIe({...l,targetRef:n,overlayRef:r,isOpen:e.isOpen,onClose:s&&!c?e.close:null});return aZ({isDisabled:s||!e.isOpen}),C.useEffect(()=>{if(e.isOpen&&r.current){var A,x;return s?WIe((A=i?.current)!==null&&A!==void 0?A:r.current):xF([(x=i?.current)!==null&&x!==void 0?x:r.current],{shouldUseInert:!0})}},[s,e.isOpen,r,i]),{popoverProps:an(u,f),arrowProps:p,underlayProps:h,placement:m,triggerAnchorPoint:v}}const QZ=we.createContext(null);function aL(t){let e=zb(),{portalContainer:n=e?null:document.body,isExiting:r}=t,[i,s]=C.useState(!1),a=C.useMemo(()=>({contain:i,setContain:s}),[i,s]),{getContainer:o}=HIe();if(!t.portalContainer&&o&&(n=o()),!n)return null;let l=t.children;return t.disableFocusManagement||(l=we.createElement(AF,{restoreFocus:!0,contain:(t.shouldContainFocus||i)&&!r},l)),l=we.createElement(QZ.Provider,{value:a},we.createElement(wIe,null,l)),Ige.createPortal(l,n)}function UZ(){let t=C.useContext(QZ),e=t?.setContain;Fi(()=>{e?.(!0)},[e])}function qIe(t,e,n){let{overlayProps:r,underlayProps:i}=iZ({...t,isOpen:e.isOpen,onClose:e.close},n);return aZ({isDisabled:!e.isOpen}),UZ(),C.useEffect(()=>{if(e.isOpen&&n.current)return xF([n.current],{shouldUseInert:!0})},[e.isOpen,n]),{modalProps:an(r),underlayProps:i}}const XM=new WeakMap;function YIe(t){return typeof t=="string"?t.replace(/\s*/g,""):""+t}function HZ(t,e){let n=XM.get(t);if(!n)throw new Error("Unknown list");return`${n.id}-option-${YIe(e)}`}function JM(t){let{id:e,label:n,"aria-labelledby":r,"aria-label":i,labelElementType:s="label"}=t;e=ro(e);let a=ro(),o={};n&&(r=r?`${a} ${r}`:a,o={id:a,htmlFor:s==="label"?e:void 0});let l=b0({id:e,"aria-label":i,"aria-labelledby":r});return{labelProps:o,fieldProps:l}}function bF(t){let{description:e,errorMessage:n,isInvalid:r,validationState:i}=t,{labelProps:s,fieldProps:a}=JM(t),o=M_([!!e,!!n,r,i]),l=M_([!!e,!!n,r,i]);return a=an(a,{"aria-describedby":[o,l,t["aria-describedby"]].filter(Boolean).join(" ")||void 0}),{labelProps:s,fieldProps:a,descriptionProps:{id:o},errorMessageProps:{id:l}}}function oL(t){return q3()?t.altKey:t.ctrlKey}function X3(t,e){var n,r;let i=`[data-key="${CSS.escape(String(e))}"]`,s=(n=t.current)===null||n===void 0?void 0:n.dataset.collection;return s&&(i=`[data-collection="${CSS.escape(s)}"]${i}`),(r=t.current)===null||r===void 0?void 0:r.querySelector(i)}const GZ=new WeakMap;function XIe(t){let e=ro();return GZ.set(t,e),e}function JIe(t){return GZ.get(t)}const ZIe=1e3;function VZ(t){let{keyboardDelegate:e,selectionManager:n,onTypeSelect:r}=t,i=C.useRef({search:"",timeout:void 0}).current,s=a=>{let o=e2e(a.key);if(!(!o||a.ctrlKey||a.metaKey||!a.currentTarget.contains(a.target)||i.search.length===0&&o===" ")){if(o===" "&&i.search.trim().length>0&&(a.preventDefault(),"continuePropagation"in a||a.stopPropagation()),i.search+=o,e.getKeyForSearch!=null){let l=e.getKeyForSearch(i.search,n.focusedKey);l==null&&(l=e.getKeyForSearch(i.search)),l!=null&&(n.setFocusedKey(l),r&&r(l))}clearTimeout(i.timeout),i.timeout=setTimeout(()=>{i.search=""},ZIe)}};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?s:void 0}}}function e2e(t){return t.length===1||!/^[A-Z]/i.test(t)?t:""}function CF(t){let{selectionManager:e,keyboardDelegate:n,ref:r,autoFocus:i=!1,shouldFocusWrap:s=!1,disallowEmptySelection:a=!1,disallowSelectAll:o=!1,escapeKeyBehavior:l="clearSelection",selectOnFocus:c=e.selectionBehavior==="replace",disallowTypeAhead:u=!1,shouldUseVirtualFocus:h,allowsTabNavigation:f=!1,isVirtualized:p,scrollRef:m=r,linkBehavior:v="action"}=t,{direction:A}=so(),x=VM(),E=H=>{var K;if(H.altKey&&H.key==="Tab"&&H.preventDefault(),!(!((K=r.current)===null||K===void 0)&&K.contains(H.target)))return;const X=(Ce,Se)=>{if(Ce!=null){if(e.isLink(Ce)&&v==="selection"&&c&&!oL(H)){gb.flushSync(()=>{e.setFocusedKey(Ce,Se)});let Me=X3(r,Ce),ce=e.getItemProps(Ce);Me&&x.open(Me,H,ce.href,ce.routerOptions);return}if(e.setFocusedKey(Ce,Se),e.isLink(Ce)&&v==="override")return;H.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(Ce):c&&!oL(H)&&e.replaceSelection(Ce)}};switch(H.key){case"ArrowDown":if(n.getKeyBelow){var re,J,Z;let Ce=e.focusedKey!=null?(re=n.getKeyBelow)===null||re===void 0?void 0:re.call(n,e.focusedKey):(J=n.getFirstKey)===null||J===void 0?void 0:J.call(n);Ce==null&&s&&(Ce=(Z=n.getFirstKey)===null||Z===void 0?void 0:Z.call(n,e.focusedKey)),Ce!=null&&(H.preventDefault(),X(Ce))}break;case"ArrowUp":if(n.getKeyAbove){var ee,te,oe;let Ce=e.focusedKey!=null?(ee=n.getKeyAbove)===null||ee===void 0?void 0:ee.call(n,e.focusedKey):(te=n.getLastKey)===null||te===void 0?void 0:te.call(n);Ce==null&&s&&(Ce=(oe=n.getLastKey)===null||oe===void 0?void 0:oe.call(n,e.focusedKey)),Ce!=null&&(H.preventDefault(),X(Ce))}break;case"ArrowLeft":if(n.getKeyLeftOf){var ae,se,fe;let Ce=e.focusedKey!=null?(ae=n.getKeyLeftOf)===null||ae===void 0?void 0:ae.call(n,e.focusedKey):null;Ce==null&&s&&(Ce=A==="rtl"?(se=n.getFirstKey)===null||se===void 0?void 0:se.call(n,e.focusedKey):(fe=n.getLastKey)===null||fe===void 0?void 0:fe.call(n,e.focusedKey)),Ce!=null&&(H.preventDefault(),X(Ce,A==="rtl"?"first":"last"))}break;case"ArrowRight":if(n.getKeyRightOf){var Ee,Be,_e;let Ce=e.focusedKey!=null?(Ee=n.getKeyRightOf)===null||Ee===void 0?void 0:Ee.call(n,e.focusedKey):null;Ce==null&&s&&(Ce=A==="rtl"?(Be=n.getLastKey)===null||Be===void 0?void 0:Be.call(n,e.focusedKey):(_e=n.getFirstKey)===null||_e===void 0?void 0:_e.call(n,e.focusedKey)),Ce!=null&&(H.preventDefault(),X(Ce,A==="rtl"?"last":"first"))}break;case"Home":if(n.getFirstKey){if(e.focusedKey===null&&H.shiftKey)return;H.preventDefault();let Ce=n.getFirstKey(e.focusedKey,m1(H));e.setFocusedKey(Ce),Ce!=null&&(m1(H)&&H.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(Ce):c&&e.replaceSelection(Ce))}break;case"End":if(n.getLastKey){if(e.focusedKey===null&&H.shiftKey)return;H.preventDefault();let Ce=n.getLastKey(e.focusedKey,m1(H));e.setFocusedKey(Ce),Ce!=null&&(m1(H)&&H.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(Ce):c&&e.replaceSelection(Ce))}break;case"PageDown":if(n.getKeyPageBelow&&e.focusedKey!=null){let Ce=n.getKeyPageBelow(e.focusedKey);Ce!=null&&(H.preventDefault(),X(Ce))}break;case"PageUp":if(n.getKeyPageAbove&&e.focusedKey!=null){let Ce=n.getKeyPageAbove(e.focusedKey);Ce!=null&&(H.preventDefault(),X(Ce))}break;case"a":m1(H)&&e.selectionMode==="multiple"&&o!==!0&&(H.preventDefault(),e.selectAll());break;case"Escape":l==="clearSelection"&&!a&&e.selectedKeys.size!==0&&(H.stopPropagation(),H.preventDefault(),e.clearSelection());break;case"Tab":if(!f){if(H.shiftKey)r.current.focus();else{let Ce=uu(r.current,{tabbable:!0}),Se,Me;do Me=Ce.lastChild(),Me&&(Se=Me);while(Me);Se&&!Se.contains(document.activeElement)&&th(Se)}break}}},w=C.useRef({top:0,left:0});B1(m,"scroll",p?void 0:()=>{var H,K,X,re;w.current={top:(X=(H=m.current)===null||H===void 0?void 0:H.scrollTop)!==null&&X!==void 0?X:0,left:(re=(K=m.current)===null||K===void 0?void 0:K.scrollLeft)!==null&&re!==void 0?re:0}});let B=H=>{if(e.isFocused){H.currentTarget.contains(H.target)||e.setFocused(!1);return}if(H.currentTarget.contains(H.target)){if(e.setFocused(!0),e.focusedKey==null){var K,X;let Z=te=>{te!=null&&(e.setFocusedKey(te),c&&!e.isSelected(te)&&e.replaceSelection(te))},ee=H.relatedTarget;var re,J;ee&&H.currentTarget.compareDocumentPosition(ee)&Node.DOCUMENT_POSITION_FOLLOWING?Z((re=e.lastSelectedKey)!==null&&re!==void 0?re:(K=n.getLastKey)===null||K===void 0?void 0:K.call(n)):Z((J=e.firstSelectedKey)!==null&&J!==void 0?J:(X=n.getFirstKey)===null||X===void 0?void 0:X.call(n))}else!p&&m.current&&(m.current.scrollTop=w.current.top,m.current.scrollLeft=w.current.left);if(e.focusedKey!=null&&m.current){let Z=X3(r,e.focusedKey);Z instanceof HTMLElement&&(!Z.contains(document.activeElement)&&!h&&th(Z),kT()==="keyboard"&&b$(Z,{containingElement:r.current}))}}},D=H=>{H.currentTarget.contains(H.relatedTarget)||e.setFocused(!1)},T=C.useRef(!1);B1(r,A_e,h?H=>{let{detail:K}=H;H.stopPropagation(),e.setFocused(!0),K?.focusStrategy==="first"&&(T.current=!0)}:void 0);let M=Js(()=>{var H,K;let X=(K=(H=n.getFirstKey)===null||H===void 0?void 0:H.call(n))!==null&&K!==void 0?K:null;if(X==null){let re=Yo();rZ(r.current),vF(re,null),e.collection.size>0&&(T.current=!1)}else e.setFocusedKey(X),T.current=!1});y$(()=>{T.current&&M()},[e.collection,M]);let R=Js(()=>{e.collection.size>0&&(T.current=!1)});y$(()=>{R()},[e.focusedKey,R]),B1(r,m_e,h?H=>{var K;H.stopPropagation(),e.setFocused(!1),!((K=H.detail)===null||K===void 0)&&K.clearFocusKey&&e.setFocusedKey(null)}:void 0);const k=C.useRef(i),L=C.useRef(!1);C.useEffect(()=>{if(k.current){var H,K;let J=null;var X;i==="first"&&(J=(X=(H=n.getFirstKey)===null||H===void 0?void 0:H.call(n))!==null&&X!==void 0?X:null);var re;i==="last"&&(J=(re=(K=n.getLastKey)===null||K===void 0?void 0:K.call(n))!==null&&re!==void 0?re:null);let Z=e.selectedKeys;if(Z.size){for(let ee of Z)if(e.canSelectItem(ee)){J=ee;break}}e.setFocused(!0),e.setFocusedKey(J),J==null&&!h&&r.current&&zy(r.current),e.collection.size>0&&(k.current=!1,L.current=!0)}});let F=C.useRef(e.focusedKey),z=C.useRef(null);C.useEffect(()=>{if(e.isFocused&&e.focusedKey!=null&&(e.focusedKey!==F.current||L.current)&&m.current&&r.current){let H=kT(),K=X3(r,e.focusedKey);if(!(K instanceof HTMLElement))return;(H==="keyboard"||L.current)&&(z.current&&cancelAnimationFrame(z.current),z.current=requestAnimationFrame(()=>{m.current&&(_X(m.current,K),H!=="virtual"&&b$(K,{containingElement:r.current}))}))}!h&&e.isFocused&&e.focusedKey==null&&F.current!=null&&r.current&&zy(r.current),F.current=e.focusedKey,L.current=!1}),C.useEffect(()=>()=>{z.current&&cancelAnimationFrame(z.current)},[]),B1(r,"react-aria-focus-scope-restore",H=>{H.preventDefault(),e.setFocused(!0)});let G={onKeyDown:E,onFocus:B,onBlur:D,onMouseDown(H){m.current===H.target&&H.preventDefault()}},{typeSelectProps:V}=VZ({keyboardDelegate:n,selectionManager:e});u||(G=an(V,G));let q;h||(q=e.focusedKey==null?0:-1);let O=XIe(e.collection);return{collectionProps:an(G,{tabIndex:q,"data-collection":O})}}function WZ(t){let{id:e,selectionManager:n,key:r,ref:i,shouldSelectOnPressUp:s,shouldUseVirtualFocus:a,focus:o,isDisabled:l,onAction:c,allowsDifferentPressOrigin:u,linkBehavior:h="action"}=t,f=VM();e=ro(e);let p=re=>{if(re.pointerType==="keyboard"&&oL(re))n.toggleSelection(r);else{if(n.selectionMode==="none")return;if(n.isLink(r)){if(h==="selection"&&i.current){let J=n.getItemProps(r);f.open(i.current,re,J.href,J.routerOptions),n.setSelectedKeys(n.selectedKeys);return}else if(h==="override"||h==="none")return}n.selectionMode==="single"?n.isSelected(r)&&!n.disallowEmptySelection?n.toggleSelection(r):n.replaceSelection(r):re&&re.shiftKey?n.extendSelection(r):n.selectionBehavior==="toggle"||re&&(m1(re)||re.pointerType==="touch"||re.pointerType==="virtual")?n.toggleSelection(r):n.replaceSelection(r)}};C.useEffect(()=>{r===n.focusedKey&&n.isFocused&&(a?rZ(i.current):o?o():document.activeElement!==i.current&&i.current&&zy(i.current))},[i,r,n.focusedKey,n.childFocusStrategy,n.isFocused,a]),l=l||n.isDisabled(r);let m={};!a&&!l?m={tabIndex:r===n.focusedKey?0:-1,onFocus(re){re.target===i.current&&n.setFocusedKey(r)}}:l&&(m.onMouseDown=re=>{re.preventDefault()});let v=n.isLink(r)&&h==="override",A=c&&t.UNSTABLE_itemBehavior==="action",x=n.isLink(r)&&h!=="selection"&&h!=="none",E=!l&&n.canSelectItem(r)&&!v&&!A,w=(c||x)&&!l,B=w&&(n.selectionBehavior==="replace"?!E:!E||n.isEmpty),D=w&&E&&n.selectionBehavior==="replace",T=B||D,M=C.useRef(null),R=T&&E,k=C.useRef(!1),L=C.useRef(!1),F=n.getItemProps(r),z=re=>{if(c){var J;c(),(J=i.current)===null||J===void 0||J.dispatchEvent(new CustomEvent("react-aria-item-action",{bubbles:!0}))}x&&i.current&&f.open(i.current,re,F.href,F.routerOptions)},G={ref:i};if(s?(G.onPressStart=re=>{M.current=re.pointerType,k.current=R,re.pointerType==="keyboard"&&(!T||X$())&&p(re)},u?(G.onPressUp=B?void 0:re=>{re.pointerType==="mouse"&&E&&p(re)},G.onPress=B?z:re=>{re.pointerType!=="keyboard"&&re.pointerType!=="mouse"&&E&&p(re)}):G.onPress=re=>{if(B||D&&re.pointerType!=="mouse"){if(re.pointerType==="keyboard"&&!Y$())return;z(re)}else re.pointerType!=="keyboard"&&E&&p(re)}):(G.onPressStart=re=>{M.current=re.pointerType,k.current=R,L.current=B,E&&(re.pointerType==="mouse"&&!B||re.pointerType==="keyboard"&&(!w||X$()))&&p(re)},G.onPress=re=>{(re.pointerType==="touch"||re.pointerType==="pen"||re.pointerType==="virtual"||re.pointerType==="keyboard"&&T&&Y$()||re.pointerType==="mouse"&&L.current)&&(T?z(re):E&&p(re))}),m["data-collection"]=JIe(n.collection),m["data-key"]=r,G.preventFocusOnPress=a,a&&(G=an(G,{onPressStart(re){re.pointerType!=="touch"&&(n.setFocused(!0),n.setFocusedKey(r))},onPress(re){re.pointerType==="touch"&&(n.setFocused(!0),n.setFocusedKey(r))}})),F)for(let re of["onPressStart","onPressEnd","onPressChange","onPress","onPressUp","onClick"])F[re]&&(G[re]=Fp(G[re],F[re]));let{pressProps:V,isPressed:q}=Oy(G),O=D?re=>{M.current==="mouse"&&(re.stopPropagation(),re.preventDefault(),z(re))}:void 0,{longPressProps:H}=eZ({isDisabled:!R,onLongPress(re){re.pointerType==="touch"&&(p(re),n.setSelectionBehavior("toggle"))}}),K=re=>{M.current==="touch"&&k.current&&re.preventDefault()},X=h!=="none"&&n.isLink(r)?re=>{xb.isOpening||re.preventDefault()}:void 0;return{itemProps:an(m,E||B||a&&!l?V:{},R?H:{},{onDoubleClick:O,onDragStartCapture:K,onClick:X,id:e},a?{onMouseDown:re=>re.preventDefault()}:void 0),isPressed:q,isSelected:n.isSelected(r),isFocused:n.isFocused&&n.focusedKey===r,isDisabled:l,allowsSelection:E,hasAction:T}}function Y$(){let t=window.event;return t?.key==="Enter"}function X$(){let t=window.event;return t?.key===" "||t?.code==="Space"}class J${getItemRect(e){let n=this.ref.current;if(!n)return null;let r=e!=null?X3(this.ref,e):null;if(!r)return null;let i=n.getBoundingClientRect(),s=r.getBoundingClientRect();return{x:s.left-i.left-n.clientLeft+n.scrollLeft,y:s.top-i.top-n.clientTop+n.scrollTop,width:s.width,height:s.height}}getContentSize(){let e=this.ref.current;var n,r;return{width:(n=e?.scrollWidth)!==null&&n!==void 0?n:0,height:(r=e?.scrollHeight)!==null&&r!==void 0?r:0}}getVisibleRect(){let e=this.ref.current;var n,r,i,s;return{x:(n=e?.scrollLeft)!==null&&n!==void 0?n:0,y:(r=e?.scrollTop)!==null&&r!==void 0?r:0,width:(i=e?.clientWidth)!==null&&i!==void 0?i:0,height:(s=e?.clientHeight)!==null&&s!==void 0?s:0}}constructor(e){this.ref=e}}class ZM{isDisabled(e){var n;return this.disabledBehavior==="all"&&(((n=e.props)===null||n===void 0?void 0:n.isDisabled)||this.disabledKeys.has(e.key))}findNextNonDisabled(e,n){let r=e;for(;r!=null;){let i=this.collection.getItem(r);if(i?.type==="item"&&!this.isDisabled(i))return r;r=n(r)}return null}getNextKey(e){let n=e;return n=this.collection.getKeyAfter(n),this.findNextNonDisabled(n,r=>this.collection.getKeyAfter(r))}getPreviousKey(e){let n=e;return n=this.collection.getKeyBefore(n),this.findNextNonDisabled(n,r=>this.collection.getKeyBefore(r))}findKey(e,n,r){let i=e,s=this.layoutDelegate.getItemRect(i);if(!s||i==null)return null;let a=s;do{if(i=n(i),i==null)break;s=this.layoutDelegate.getItemRect(i)}while(s&&r(a,s)&&i!=null);return i}isSameRow(e,n){return e.y===n.y||e.x!==n.x}isSameColumn(e,n){return e.x===n.x||e.y!==n.y}getKeyBelow(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,n=>this.getNextKey(n),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,n=>this.getPreviousKey(n),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,n){return n?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){let n=this.direction==="ltr"?"getKeyRightOf":"getKeyLeftOf";return this.layoutDelegate[n]?(e=this.layoutDelegate[n](e),this.findNextNonDisabled(e,r=>this.layoutDelegate[n](r))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="rtl"):this.findKey(e,r=>this.getNextColumn(r,this.direction==="rtl"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="rtl"):null}getKeyLeftOf(e){let n=this.direction==="ltr"?"getKeyLeftOf":"getKeyRightOf";return this.layoutDelegate[n]?(e=this.layoutDelegate[n](e),this.findNextNonDisabled(e,r=>this.layoutDelegate[n](r))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="ltr"):this.findKey(e,r=>this.getNextColumn(r,this.direction==="ltr"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="ltr"):null}getFirstKey(){let e=this.collection.getFirstKey();return this.findNextNonDisabled(e,n=>this.collection.getKeyAfter(n))}getLastKey(){let e=this.collection.getLastKey();return this.findNextNonDisabled(e,n=>this.collection.getKeyBefore(n))}getKeyPageAbove(e){let n=this.ref.current,r=this.layoutDelegate.getItemRect(e);if(!r)return null;if(n&&!bb(n))return this.getFirstKey();let i=e;if(this.orientation==="horizontal"){let s=Math.max(0,r.x+r.width-this.layoutDelegate.getVisibleRect().width);for(;r&&r.x>s&&i!=null;)i=this.getKeyAbove(i),r=i==null?null:this.layoutDelegate.getItemRect(i)}else{let s=Math.max(0,r.y+r.height-this.layoutDelegate.getVisibleRect().height);for(;r&&r.y>s&&i!=null;)i=this.getKeyAbove(i),r=i==null?null:this.layoutDelegate.getItemRect(i)}return i??this.getFirstKey()}getKeyPageBelow(e){let n=this.ref.current,r=this.layoutDelegate.getItemRect(e);if(!r)return null;if(n&&!bb(n))return this.getLastKey();let i=e;if(this.orientation==="horizontal"){let s=Math.min(this.layoutDelegate.getContentSize().width,r.y-r.width+this.layoutDelegate.getVisibleRect().width);for(;r&&r.x<s&&i!=null;)i=this.getKeyBelow(i),r=i==null?null:this.layoutDelegate.getItemRect(i)}else{let s=Math.min(this.layoutDelegate.getContentSize().height,r.y-r.height+this.layoutDelegate.getVisibleRect().height);for(;r&&r.y<s&&i!=null;)i=this.getKeyBelow(i),r=i==null?null:this.layoutDelegate.getItemRect(i)}return i??this.getLastKey()}getKeyForSearch(e,n){if(!this.collator)return null;let r=this.collection,i=n||this.getFirstKey();for(;i!=null;){let s=r.getItem(i);if(!s)return null;let a=s.textValue.slice(0,e.length);if(s.textValue&&this.collator.compare(a,e)===0)return i;i=this.getNextKey(i)}return null}constructor(...e){if(e.length===1){let n=e[0];this.collection=n.collection,this.ref=n.ref,this.collator=n.collator,this.disabledKeys=n.disabledKeys||new Set,this.disabledBehavior=n.disabledBehavior||"all",this.orientation=n.orientation||"vertical",this.direction=n.direction,this.layout=n.layout||"stack",this.layoutDelegate=n.layoutDelegate||new J$(n.ref)}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout="stack",this.orientation="vertical",this.disabledBehavior="all",this.layoutDelegate=new J$(this.ref);this.layout==="stack"&&this.orientation==="vertical"&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}function t2e(t){let{selectionManager:e,collection:n,disabledKeys:r,ref:i,keyboardDelegate:s,layoutDelegate:a}=t,o=KM({usage:"search",sensitivity:"base"}),l=e.disabledBehavior,c=C.useMemo(()=>s||new ZM({collection:n,disabledKeys:r,disabledBehavior:l,ref:i,collator:o,layoutDelegate:a}),[s,a,n,r,i,o,l]),{collectionProps:u}=CF({...t,ref:i,selectionManager:e,keyboardDelegate:c});return{listProps:u}}function n2e(t,e,n){let r=Cr(t,{labelable:!0}),i=t.selectionBehavior||"toggle",s=t.linkBehavior||(i==="replace"?"action":"override");i==="toggle"&&s==="action"&&(s="override");let{listProps:a}=t2e({...t,ref:n,selectionManager:e.selectionManager,collection:e.collection,disabledKeys:e.disabledKeys,linkBehavior:s}),{focusWithinProps:o}=Wy({onFocusWithin:t.onFocus,onBlurWithin:t.onBlur,onFocusWithinChange:t.onFocusChange}),l=ro(t.id);XM.set(e,{id:l,shouldUseVirtualFocus:t.shouldUseVirtualFocus,shouldSelectOnPressUp:t.shouldSelectOnPressUp,shouldFocusOnHover:t.shouldFocusOnHover,isVirtualized:t.isVirtualized,onAction:t.onAction,linkBehavior:s,UNSTABLE_itemBehavior:t.UNSTABLE_itemBehavior});let{labelProps:c,fieldProps:u}=JM({...t,id:l,labelElementType:"span"});return{labelProps:c,listBoxProps:an(r,o,e.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",...an(u,a)})}}class r2e{build(e,n){return this.context=n,Z$(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:n,items:r}=e;if(we.isValidElement(n)&&n.type===we.Fragment)yield*this.iterateCollection({children:n.props.children,items:r});else if(typeof n=="function"){if(!r)throw new Error("props.children was a function but props.items is missing");let i=0;for(let s of r)yield*this.getFullNode({value:s,index:i},{renderer:n}),i++}else{let i=[];we.Children.forEach(n,a=>{a&&i.push(a)});let s=0;for(let a of i){let o=this.getFullNode({element:a,index:s},{});for(let l of o)s++,yield l}}}getKey(e,n,r,i){if(e.key!=null)return e.key;if(n.type==="cell"&&n.key!=null)return`${i}${n.key}`;let s=n.value;if(s!=null){var a;let o=(a=s.key)!==null&&a!==void 0?a:s.id;if(o==null)throw new Error("No key found for item");return o}return i?`${i}.${n.index}`:`$.${n.index}`}getChildState(e,n){return{renderer:n.renderer||e.renderer}}*getFullNode(e,n,r,i){if(we.isValidElement(e.element)&&e.element.type===we.Fragment){let A=[];we.Children.forEach(e.element.props.children,E=>{A.push(E)});var s;let x=(s=e.index)!==null&&s!==void 0?s:0;for(const E of A)yield*this.getFullNode({element:E,index:x++},n,r,i);return}let a=e.element;if(!a&&e.value&&n&&n.renderer){let A=this.cache.get(e.value);if(A&&(!A.shouldInvalidate||!A.shouldInvalidate(this.context))){A.index=e.index,A.parentKey=i?i.key:null,yield A;return}a=n.renderer(e.value)}if(we.isValidElement(a)){let A=a.type;if(typeof A!="function"&&typeof A.getCollectionNode!="function"){let B=a.type;throw new Error(`Unknown element <${B}> in collection.`)}let x=A.getCollectionNode(a.props,this.context);var o;let E=(o=e.index)!==null&&o!==void 0?o:0,w=x.next();for(;!w.done&&w.value;){let B=w.value;e.index=E;var l;let D=(l=B.key)!==null&&l!==void 0?l:null;D==null&&(D=B.element?null:this.getKey(a,e,n,r));let M=[...this.getFullNode({...B,key:D,index:E,wrapper:i2e(e.wrapper,B.wrapper)},this.getChildState(n,B),r?`${r}${a.key}`:a.key,i)];for(let R of M){var c,u;R.value=(u=(c=B.value)!==null&&c!==void 0?c:e.value)!==null&&u!==void 0?u:null,R.value&&this.cache.set(R.value,R);var h;if(e.type&&R.type!==e.type)throw new Error(`Unsupported type <${TR(R.type)}> in <${TR((h=i?.type)!==null&&h!==void 0?h:"unknown parent type")}>. Only <${TR(e.type)}> is supported.`);E++,yield R}w=x.next(M)}return}if(e.key==null||e.type==null)return;let f=this;var p,m;let v={type:e.type,props:e.props,key:e.key,parentKey:i?i.key:null,value:(p=e.value)!==null&&p!==void 0?p:null,level:i?i.level+1:0,index:e.index,rendered:e.rendered,textValue:(m=e.textValue)!==null&&m!==void 0?m:"","aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes||!1,childNodes:Z$(function*(){if(!e.hasChildNodes||!e.childNodes)return;let A=0;for(let x of e.childNodes()){x.key!=null&&(x.key=`${v.key}${x.key}`);let E=f.getFullNode({...x,index:A},f.getChildState(n,x),v.key,v);for(let w of E)A++,yield w}})};yield v}constructor(){this.cache=new WeakMap}}function Z$(t){let e=[],n=null;return{*[Symbol.iterator](){for(let r of e)yield r;n||(n=t());for(let r of n)e.push(r),yield r}}}function i2e(t,e){if(t&&e)return n=>t(e(n));if(t)return t;if(e)return e}function TR(t){return t[0].toUpperCase()+t.slice(1)}function s2e(t,e,n){let r=C.useMemo(()=>new r2e,[]),{children:i,items:s,collection:a}=t;return C.useMemo(()=>{if(a)return a;let l=r.build({children:i,items:s},n);return e(l)},[r,i,s,a,n,e])}function e4(t,e){return typeof e.getChildren=="function"?e.getChildren(t.key):t.childNodes}function a2e(t){return o2e(t)}function o2e(t,e){for(let n of t)return n}function MR(t,e,n){if(e.parentKey===n.parentKey)return e.index-n.index;let r=[...e7(t,e),e],i=[...e7(t,n),n],s=r.slice(0,i.length).findIndex((a,o)=>a!==i[o]);return s!==-1?(e=r[s],n=i[s],e.index-n.index):r.findIndex(a=>a===n)>=0?1:(i.findIndex(a=>a===e)>=0,-1)}function e7(t,e){let n=[],r=e;for(;r?.parentKey!=null;)r=t.getItem(r.parentKey),r&&n.unshift(r);return n}const t7=new WeakMap;function KZ(t){let e=t7.get(t);if(e!=null)return e;let n=0,r=i=>{for(let s of i)s.type==="section"?r(e4(s,t)):s.type==="item"&&n++};return r(t),t7.set(t,n),n}function l2e(t,e,n){var r,i;let{key:s}=t,a=XM.get(e);var o;let l=(o=t.isDisabled)!==null&&o!==void 0?o:e.selectionManager.isDisabled(s);var c;let u=(c=t.isSelected)!==null&&c!==void 0?c:e.selectionManager.isSelected(s);var h;let f=(h=t.shouldSelectOnPressUp)!==null&&h!==void 0?h:a?.shouldSelectOnPressUp;var p;let m=(p=t.shouldFocusOnHover)!==null&&p!==void 0?p:a?.shouldFocusOnHover;var v;let A=(v=t.shouldUseVirtualFocus)!==null&&v!==void 0?v:a?.shouldUseVirtualFocus;var x;let E=(x=t.isVirtualized)!==null&&x!==void 0?x:a?.isVirtualized,w=M_(),B=M_(),D={role:"option","aria-disabled":l||void 0,"aria-selected":e.selectionManager.selectionMode!=="none"?u:void 0};Fy()&&iF()||(D["aria-label"]=t["aria-label"],D["aria-labelledby"]=w,D["aria-describedby"]=B);let T=e.collection.getItem(s);if(E){let H=Number(T?.index);D["aria-posinset"]=Number.isNaN(H)?void 0:H+1,D["aria-setsize"]=KZ(e.collection)}let M=a?.onAction?()=>{var H;return a==null||(H=a.onAction)===null||H===void 0?void 0:H.call(a,s)}:void 0,R=HZ(e,s),{itemProps:k,isPressed:L,isFocused:F,hasAction:z,allowsSelection:G}=WZ({selectionManager:e.selectionManager,key:s,ref:n,shouldSelectOnPressUp:f,allowsDifferentPressOrigin:f&&m,isVirtualized:E,shouldUseVirtualFocus:A,isDisabled:l,onAction:M||!(T==null||(r=T.props)===null||r===void 0)&&r.onAction?Fp(T==null||(i=T.props)===null||i===void 0?void 0:i.onAction,M):void 0,linkBehavior:a?.linkBehavior,UNSTABLE_itemBehavior:a?.UNSTABLE_itemBehavior,id:R}),{hoverProps:V}=oh({isDisabled:l||!m,onHoverStart(){PT()||(e.selectionManager.setFocused(!0),e.selectionManager.setFocusedKey(s))}}),q=Cr(T?.props);delete q.id;let O=SX(T?.props);return{optionProps:{...D,...an(q,k,V,O),id:R},labelProps:{id:w},descriptionProps:{id:B},isFocused:F,isFocusVisible:F&&e.selectionManager.isFocused&&PT(),isSelected:u,isDisabled:l,isPressed:L,allowsSelection:G,hasAction:z}}function c2e(t){let{heading:e,"aria-label":n}=t,r=ro();return{itemProps:{role:"presentation"},headingProps:e?{id:r,role:"presentation"}:{},groupProps:{role:"group","aria-label":n,"aria-labelledby":e?r:void 0}}}const qZ={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},YZ={...qZ,customError:!0,valid:!1},A1={isInvalid:!1,validationDetails:qZ,validationErrors:[]},u2e=C.createContext({}),Eb="__formValidationState"+Date.now();function Ky(t){if(t[Eb]){let{realtimeValidation:e,displayValidation:n,updateValidation:r,resetValidation:i,commitValidation:s}=t[Eb];return{realtimeValidation:e,displayValidation:n,updateValidation:r,resetValidation:i,commitValidation:s}}return d2e(t)}function d2e(t){let{isInvalid:e,validationState:n,name:r,value:i,builtinValidation:s,validate:a,validationBehavior:o="aria"}=t;n&&(e||(e=n==="invalid"));let l=e!==void 0?{isInvalid:e,validationErrors:[],validationDetails:YZ}:null,c=C.useMemo(()=>{if(!a||i==null)return null;let L=h2e(a,i);return n7(L)},[a,i]);s?.validationDetails.valid&&(s=void 0);let u=C.useContext(u2e),h=C.useMemo(()=>r?Array.isArray(r)?r.flatMap(L=>lL(u[L])):lL(u[r]):[],[u,r]),[f,p]=C.useState(u),[m,v]=C.useState(!1);u!==f&&(p(u),v(!1));let A=C.useMemo(()=>n7(m?[]:h),[m,h]),x=C.useRef(A1),[E,w]=C.useState(A1),B=C.useRef(A1),D=()=>{if(!T)return;M(!1);let L=c||s||x.current;DR(L,B.current)||(B.current=L,w(L))},[T,M]=C.useState(!1);return C.useEffect(D),{realtimeValidation:l||A||c||s||A1,displayValidation:o==="native"?l||A||E:l||A||c||s||E,updateValidation(L){o==="aria"&&!DR(E,L)?w(L):x.current=L},resetValidation(){let L=A1;DR(L,B.current)||(B.current=L,w(L)),o==="native"&&M(!1),v(!0)},commitValidation(){o==="native"&&M(!0),v(!0)}}}function lL(t){return t?Array.isArray(t)?t:[t]:[]}function h2e(t,e){if(typeof t=="function"){let n=t(e);if(n&&typeof n!="boolean")return lL(n)}return[]}function n7(t){return t.length?{isInvalid:!0,validationErrors:t,validationDetails:YZ}:null}function DR(t,e){return t===e?!0:!!t&&!!e&&t.isInvalid===e.isInvalid&&t.validationErrors.length===e.validationErrors.length&&t.validationErrors.every((n,r)=>n===e.validationErrors[r])&&Object.entries(t.validationDetails).every(([n,r])=>e.validationDetails[n]===r)}var XZ={};XZ={longPressMessage:"     Alt +    "};var JZ={};JZ={longPressMessage:"    Alt+  ,    "};var ZZ={};ZZ={longPressMessage:"Dlouhm stiskem nebo stisknutm klves Alt + ipka dol otevete nabdku"};var eee={};eee={longPressMessage:"Langt tryk eller tryk p Alt + pil ned for at bne menuen"};var tee={};tee={longPressMessage:"Drcken Sie lange oder drcken Sie Alt + Nach-unten, um das Men zu ffnen"};var nee={};nee={longPressMessage:"    Alt +       "};var ree={};ree={longPressMessage:"Long press or press Alt + ArrowDown to open menu"};var iee={};iee={longPressMessage:"Mantenga pulsado o pulse Alt + flecha abajo para abrir el men"};var see={};see={longPressMessage:"Men avamiseks vajutage pikalt vi vajutage klahve Alt + allanool"};var aee={};aee={longPressMessage:"Avaa valikko painamalla pohjassa tai nppinyhdistelmll Alt + Alanuoli"};var oee={};oee={longPressMessage:"Appuyez de manire prolonge ou appuyez sur Alt+Flche vers le bas pour ouvrir le menu."};var lee={};lee={longPressMessage:"     Alt + ArrowDown    "};var cee={};cee={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dolje za otvaranje izbornika"};var uee={};uee={longPressMessage:"Nyomja meg hosszan, vagy nyomja meg az Alt + lefele nyl gombot a men megnyitshoz"};var dee={};dee={longPressMessage:"Premere a lungo o premere Alt + Freccia gi per aprire il menu"};var hee={};hee={longPressMessage:" Alt+"};var fee={};fee={longPressMessage:"  Alt +     "};var pee={};pee={longPressMessage:"Nordami atidaryti meniu, nuspaud palaikykite arba paspauskite Alt + ArrowDown."};var gee={};gee={longPressMessage:"Lai atvrtu izvlni, turiet nospiestu vai nospiediet taustiu kombinciju Alt + lejupvrst bultia"};var mee={};mee={longPressMessage:"Langt trykk eller trykk Alt + PilNed for  pne menyen"};var Aee={};Aee={longPressMessage:"Druk lang op Alt + pijl-omlaag of druk op Alt om het menu te openen"};var yee={};yee={longPressMessage:"Nacinij i przytrzymaj lub nacinij klawisze Alt + Strzaka w d, aby otworzy menu"};var vee={};vee={longPressMessage:"Pressione e segure ou pressione Alt + Seta para baixo para abrir o menu"};var xee={};xee={longPressMessage:"Prima continuamente ou prima Alt + Seta Para Baixo para abrir o menu"};var bee={};bee={longPressMessage:"Apsai lung sau apsai pe Alt + sgeat n jos pentru a deschide meniul"};var Cee={};Cee={longPressMessage:"     Alt +  ,   "};var Eee={};Eee={longPressMessage:"Ponuku otvorte dlhm stlaenm alebo stlaenm klvesu Alt + klvesu so pkou nadol"};var See={};See={longPressMessage:"Za odprtje menija pritisnite in drite gumb ali pritisnite Alt+puica navzdol"};var wee={};wee={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dole da otvorite meni"};var _ee={};_ee={longPressMessage:"Hll nedtryckt eller tryck p Alt + pil nedt fr att ppna menyn"};var Iee={};Iee={longPressMessage:"Meny amak iin uzun basn veya Alt + Aa Ok tuuna basn"};var Bee={};Bee={longPressMessage:"      Alt   ,   "};var Tee={};Tee={longPressMessage:" Alt + "};var Mee={};Mee={longPressMessage:" Alt+"};var Dee={};Dee={"ar-AE":XZ,"bg-BG":JZ,"cs-CZ":ZZ,"da-DK":eee,"de-DE":tee,"el-GR":nee,"en-US":ree,"es-ES":iee,"et-EE":see,"fi-FI":aee,"fr-FR":oee,"he-IL":lee,"hr-HR":cee,"hu-HU":uee,"it-IT":dee,"ja-JP":hee,"ko-KR":fee,"lt-LT":pee,"lv-LV":gee,"nb-NO":mee,"nl-NL":Aee,"pl-PL":yee,"pt-BR":vee,"pt-PT":xee,"ro-RO":bee,"ru-RU":Cee,"sk-SK":Eee,"sl-SI":See,"sr-SP":wee,"sv-SE":_ee,"tr-TR":Iee,"uk-UA":Bee,"zh-CN":Tee,"zh-TW":Mee};function f2e(t){return t&&t.__esModule?t.default:t}function Ree(t,e,n){let{type:r="menu",isDisabled:i,trigger:s="press"}=t,a=ro(),{triggerProps:o,overlayProps:l}=sZ({type:r},e,n),c=p=>{if(!i&&!(s==="longPress"&&!p.altKey)&&n&&n.current)switch(p.key){case"Enter":case" ":if(s==="longPress"||p.isDefaultPrevented())return;case"ArrowDown":"continuePropagation"in p||p.stopPropagation(),p.preventDefault(),e.toggle("first");break;case"ArrowUp":"continuePropagation"in p||p.stopPropagation(),p.preventDefault(),e.toggle("last");break;default:"continuePropagation"in p&&p.continuePropagation()}},u=Yg(f2e(Dee),"@react-aria/menu"),{longPressProps:h}=eZ({isDisabled:i||s!=="longPress",accessibilityDescription:u.format("longPressMessage"),onLongPressStart(){e.close()},onLongPress(){e.open("first")}}),f={preventFocusOnPress:!0,onPressStart(p){p.pointerType!=="touch"&&p.pointerType!=="keyboard"&&!i&&(th(p.target),e.open(p.pointerType==="virtual"?"first":null))},onPress(p){p.pointerType==="touch"&&!i&&(th(p.target),e.toggle())}};return delete o.onPress,{menuTriggerProps:{...o,...s==="press"?f:h,id:a,onKeyDown:c},menuProps:{...l,"aria-labelledby":a,autoFocus:e.focusStrategy||!0,onClose:e.close}}}function t4(t,e,n){let{validationBehavior:r,focus:i}=t;Fi(()=>{if(r==="native"&&n?.current&&!n.current.disabled){let c=e.realtimeValidation.isInvalid?e.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";n.current.setCustomValidity(c),n.current.hasAttribute("title")||(n.current.title=""),e.realtimeValidation.isInvalid||e.updateValidation(g2e(n.current))}});let s=C.useRef(!1),a=Js(()=>{s.current||e.resetValidation()}),o=Js(c=>{var u;e.displayValidation.isInvalid||e.commitValidation();let h=n==null||(u=n.current)===null||u===void 0?void 0:u.form;if(!c.defaultPrevented&&n&&h&&m2e(h)===n.current){var f;i?i():(f=n.current)===null||f===void 0||f.focus(),gF("keyboard")}c.preventDefault()}),l=Js(()=>{e.commitValidation()});C.useEffect(()=>{let c=n?.current;if(!c)return;let u=c.form,h=u?.reset;return u&&(u.reset=()=>{s.current=!window.event||window.event.type==="message"&&window.event.target instanceof MessagePort,h?.call(u),s.current=!1}),c.addEventListener("invalid",o),c.addEventListener("change",l),u?.addEventListener("reset",a),()=>{c.removeEventListener("invalid",o),c.removeEventListener("change",l),u?.removeEventListener("reset",a),u&&(u.reset=h)}},[n,o,l,a,r])}function p2e(t){let e=t.validity;return{badInput:e.badInput,customError:e.customError,patternMismatch:e.patternMismatch,rangeOverflow:e.rangeOverflow,rangeUnderflow:e.rangeUnderflow,stepMismatch:e.stepMismatch,tooLong:e.tooLong,tooShort:e.tooShort,typeMismatch:e.typeMismatch,valueMissing:e.valueMissing,valid:e.valid}}function g2e(t){return{isInvalid:!t.validity.valid,validationDetails:p2e(t),validationErrors:t.validationMessage?[t.validationMessage]:[]}}function m2e(t){for(let e=0;e<t.elements.length;e++){let n=t.elements[e];if(!n.validity.valid)return n}return null}function n4(t,e){let{inputElementType:n="input",isDisabled:r=!1,isRequired:i=!1,isReadOnly:s=!1,type:a="text",validationBehavior:o="aria"}=t,[l,c]=Zl(t.value,t.defaultValue||"",t.onChange),{focusableProps:u}=QE(t,e),h=Ky({...t,value:l}),{isInvalid:f,validationErrors:p,validationDetails:m}=h.displayValidation,{labelProps:v,fieldProps:A,descriptionProps:x,errorMessageProps:E}=bF({...t,isInvalid:f,errorMessage:t.errorMessage||p}),w=Cr(t,{labelable:!0});const B={type:a,pattern:t.pattern};let[D]=C.useState(l);var T;return Gy(e,(T=t.defaultValue)!==null&&T!==void 0?T:D,c),t4(t,h,e),C.useEffect(()=>{if(e.current instanceof ad(e.current).HTMLTextAreaElement){let M=e.current;Object.defineProperty(M,"defaultValue",{get:()=>M.value,set:()=>{},configurable:!0})}},[e]),{labelProps:v,inputProps:an(w,n==="input"?B:void 0,{disabled:r,readOnly:s,required:i&&o==="native","aria-required":i&&o==="aria"||void 0,"aria-invalid":f||void 0,"aria-errormessage":t["aria-errormessage"],"aria-activedescendant":t["aria-activedescendant"],"aria-autocomplete":t["aria-autocomplete"],"aria-haspopup":t["aria-haspopup"],"aria-controls":t["aria-controls"],value:l,onChange:M=>c(M.target.value),autoComplete:t.autoComplete,autoCapitalize:t.autoCapitalize,maxLength:t.maxLength,minLength:t.minLength,name:t.name,form:t.form,placeholder:t.placeholder,inputMode:t.inputMode,autoCorrect:t.autoCorrect,spellCheck:t.spellCheck,[parseInt(we.version,10)>=17?"enterKeyHint":"enterkeyhint"]:t.enterKeyHint,onCopy:t.onCopy,onCut:t.onCut,onPaste:t.onPaste,onCompositionEnd:t.onCompositionEnd,onCompositionStart:t.onCompositionStart,onCompositionUpdate:t.onCompositionUpdate,onSelect:t.onSelect,onBeforeInput:t.onBeforeInput,onInput:t.onInput,...u,...A}),descriptionProps:x,errorMessageProps:E,isInvalid:f,validationErrors:p,validationDetails:m}}function r7(){return typeof window<"u"&&window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"}function Pee(t,e,n){let r=Js(h=>{let f=n.current;if(!f)return;let p=null;switch(h.inputType){case"historyUndo":case"historyRedo":return;case"insertLineBreak":return;case"deleteContent":case"deleteByCut":case"deleteByDrag":p=f.value.slice(0,f.selectionStart)+f.value.slice(f.selectionEnd);break;case"deleteContentForward":p=f.selectionEnd===f.selectionStart?f.value.slice(0,f.selectionStart)+f.value.slice(f.selectionEnd+1):f.value.slice(0,f.selectionStart)+f.value.slice(f.selectionEnd);break;case"deleteContentBackward":p=f.selectionEnd===f.selectionStart?f.value.slice(0,f.selectionStart-1)+f.value.slice(f.selectionStart):f.value.slice(0,f.selectionStart)+f.value.slice(f.selectionEnd);break;case"deleteSoftLineBackward":case"deleteHardLineBackward":p=f.value.slice(f.selectionStart);break;default:h.data!=null&&(p=f.value.slice(0,f.selectionStart)+h.data+f.value.slice(f.selectionEnd));break}(p==null||!e.validate(p))&&h.preventDefault()});C.useEffect(()=>{if(!r7()||!n.current)return;let h=n.current;return h.addEventListener("beforeinput",r,!1),()=>{h.removeEventListener("beforeinput",r,!1)}},[n,r]);let i=r7()?null:h=>{let f=h.target.value.slice(0,h.target.selectionStart)+h.data+h.target.value.slice(h.target.selectionEnd);e.validate(f)||h.preventDefault()},{labelProps:s,inputProps:a,descriptionProps:o,errorMessageProps:l,...c}=n4(t,n),u=C.useRef(null);return{inputProps:an(a,{onBeforeInput:i,onCompositionStart(){let{value:h,selectionStart:f,selectionEnd:p}=n.current;u.current={value:h,selectionStart:f,selectionEnd:p}},onCompositionEnd(){if(n.current&&!e.validate(n.current.value)){let{value:h,selectionStart:f,selectionEnd:p}=u.current;n.current.value=h,n.current.setSelectionRange(f,p),e.setInputValue(h)}}}),labelProps:s,descriptionProps:o,errorMessageProps:l,...c}}function A2e(t){return t&&t.__esModule?t.default:t}function y2e(t,e){let{buttonRef:n,popoverRef:r,inputRef:i,listBoxRef:s,keyboardDelegate:a,layoutDelegate:o,shouldFocusWrap:l,isReadOnly:c,isDisabled:u}=t,h=C.useRef(null);n=n??h;let f=Yg(A2e(dJ),"@react-aria/combobox"),{menuTriggerProps:p,menuProps:m}=Ree({type:"listbox",isDisabled:u||c},e,n);XM.set(e,{id:m.id});let{collection:v}=e,{disabledKeys:A}=e.selectionManager,x=C.useMemo(()=>a||new ZM({collection:v,disabledKeys:A,ref:s,layoutDelegate:o}),[a,o,v,A,s]),{collectionProps:E}=CF({selectionManager:e.selectionManager,keyboardDelegate:x,disallowTypeAhead:!0,disallowEmptySelection:!0,shouldFocusWrap:l,ref:i,isVirtualized:!0}),w=VM(),B=_e=>{if(!_e.nativeEvent.isComposing)switch(_e.key){case"Enter":case"Tab":if(e.isOpen&&_e.key==="Enter"&&_e.preventDefault(),e.isOpen&&s.current&&e.selectionManager.focusedKey!=null){let Ce=e.collection.getItem(e.selectionManager.focusedKey);if(Ce?.props.href){let Se=s.current.querySelector(`[data-key="${CSS.escape(e.selectionManager.focusedKey.toString())}"]`);_e.key==="Enter"&&Se instanceof HTMLAnchorElement&&w.open(Se,_e,Ce.props.href,Ce.props.routerOptions),e.close();break}else if(Ce?.props.onAction){Ce.props.onAction(),e.close();break}}e.commit();break;case"Escape":(e.selectedKey!==null||e.inputValue===""||t.allowsCustomValue)&&_e.continuePropagation(),e.revert();break;case"ArrowDown":e.open("first","manual");break;case"ArrowUp":e.open("last","manual");break;case"ArrowLeft":case"ArrowRight":e.selectionManager.setFocusedKey(null);break}},D=_e=>{var Ce;let Se=n?.current&&n.current===_e.relatedTarget,Me=(Ce=r.current)===null||Ce===void 0?void 0:Ce.contains(_e.relatedTarget);Se||Me||(t.onBlur&&t.onBlur(_e),e.setFocused(!1))},T=_e=>{e.isFocused||(t.onFocus&&t.onFocus(_e),e.setFocused(!0))},{isInvalid:M,validationErrors:R,validationDetails:k}=e.displayValidation,{labelProps:L,inputProps:F,descriptionProps:z,errorMessageProps:G}=n4({...t,onChange:e.setInputValue,onKeyDown:c?t.onKeyDown:Fp(e.isOpen&&E.onKeyDown,B,t.onKeyDown),onBlur:D,value:e.inputValue,defaultValue:e.defaultInputValue,onFocus:T,autoComplete:"off",validate:void 0,[Eb]:e},i),V=_e=>{if(_e.pointerType==="touch"){var Ce;(Ce=i.current)===null||Ce===void 0||Ce.focus(),e.toggle(null,"manual")}},q=_e=>{if(_e.pointerType!=="touch"){var Ce;(Ce=i.current)===null||Ce===void 0||Ce.focus(),e.toggle(_e.pointerType==="keyboard"||_e.pointerType==="virtual"?"first":null,"manual")}},O=b0({id:p.id,"aria-label":f.format("buttonLabel"),"aria-labelledby":t["aria-labelledby"]||L.id}),H=b0({id:m.id,"aria-label":f.format("listboxLabel"),"aria-labelledby":t["aria-labelledby"]||L.id}),K=C.useRef(0),X=_e=>{if(u||c)return;if(_e.timeStamp-K.current<500){var Ce;_e.preventDefault(),(Ce=i.current)===null||Ce===void 0||Ce.focus();return}let Se=_e.target.getBoundingClientRect(),Me=_e.changedTouches[0],ce=Math.ceil(Se.left+.5*Se.width),$e=Math.ceil(Se.top+.5*Se.height);if(Me.clientX===ce&&Me.clientY===$e){var qe;_e.preventDefault(),(qe=i.current)===null||qe===void 0||qe.focus(),e.toggle(null,"manual"),K.current=_e.timeStamp}},re=e.selectionManager.focusedKey!=null&&e.isOpen?e.collection.getItem(e.selectionManager.focusedKey):void 0;var J;let Z=(J=re?.parentKey)!==null&&J!==void 0?J:null;var ee;let te=(ee=e.selectionManager.focusedKey)!==null&&ee!==void 0?ee:null,oe=C.useRef(Z),ae=C.useRef(te);C.useEffect(()=>{if(q3()&&re!=null&&te!=null&&te!==ae.current){let Ce=e.selectionManager.isSelected(te),Se=Z!=null?e.collection.getItem(Z):null,Me=Se?.["aria-label"]||(typeof Se?.rendered=="string"?Se.rendered:"")||"";var _e;let ce=f.format("focusAnnouncement",{isGroupChange:(_e=Se&&Z!==oe.current)!==null&&_e!==void 0?_e:!1,groupTitle:Me,groupCount:Se?[...e4(Se,e.collection)].length:0,optionText:re["aria-label"]||re.textValue||"",isSelected:Ce});O1(ce)}oe.current=Z,ae.current=te});let se=KZ(e.collection),fe=C.useRef(se),Ee=C.useRef(e.isOpen);C.useEffect(()=>{let _e=e.isOpen!==Ee.current&&(e.selectionManager.focusedKey==null||q3());if(e.isOpen&&(_e||se!==fe.current)){let Ce=f.format("countAnnouncement",{optionCount:se});O1(Ce)}fe.current=se,Ee.current=e.isOpen});let Be=C.useRef(e.selectedKey);return C.useEffect(()=>{if(q3()&&e.isFocused&&e.selectedItem&&e.selectedKey!==Be.current){let _e=e.selectedItem["aria-label"]||e.selectedItem.textValue||"",Ce=f.format("selectedAnnouncement",{optionText:_e});O1(Ce)}Be.current=e.selectedKey}),C.useEffect(()=>{if(e.isOpen)return xF([i.current,r.current].filter(_e=>_e!=null))},[e.isOpen,i,r]),o_e(()=>{!re&&i.current&&Yo(ji(i.current))===i.current&&vF(i.current,null)},[re]),B1(s,"react-aria-item-action",e.isOpen?()=>{e.close()}:void 0),{labelProps:L,buttonProps:{...p,...O,excludeFromTabOrder:!0,preventFocusOnPress:!0,onPress:V,onPressStart:q,isDisabled:u||c},inputProps:an(F,{role:"combobox","aria-expanded":p["aria-expanded"],"aria-controls":e.isOpen?m.id:void 0,"aria-autocomplete":"list","aria-activedescendant":re?HZ(e,re.key):void 0,onTouchEnd:X,autoCorrect:"off",spellCheck:"false"}),listBoxProps:an(m,H,{autoFocus:e.focusStrategy||!0,shouldUseVirtualFocus:!0,shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,linkBehavior:"selection",UNSTABLE_itemBehavior:"action"}),descriptionProps:z,errorMessageProps:G,isInvalid:M,validationErrors:R,validationDetails:k}}var kee={};kee={"Clear search":" "};var Nee={};Nee={"Clear search":"  "};var Lee={};Lee={"Clear search":"Vymazat hledn"};var Fee={};Fee={"Clear search":"Ryd sgning"};var jee={};jee={"Clear search":"Suche zurcksetzen"};var Oee={};Oee={"Clear search":" "};var zee={};zee={"Clear search":"Clear search"};var $ee={};$ee={"Clear search":"Borrar bsqueda"};var Qee={};Qee={"Clear search":"Thjenda otsing"};var Uee={};Uee={"Clear search":"Tyhjenn haku"};var Hee={};Hee={"Clear search":"Effacer la recherche"};var Gee={};Gee={"Clear search":" "};var Vee={};Vee={"Clear search":"Obrii pretragu"};var Wee={};Wee={"Clear search":"Keress trlse"};var Kee={};Kee={"Clear search":"Cancella ricerca"};var qee={};qee={"Clear search":""};var Yee={};Yee={"Clear search":" "};var Xee={};Xee={"Clear search":"Ivalyti iek"};var Jee={};Jee={"Clear search":"Notrt meklanu"};var Zee={};Zee={"Clear search":"Tm sk"};var ete={};ete={"Clear search":"Zoekactie wissen"};var tte={};tte={"Clear search":"Wyczy zawarto wyszukiwania"};var nte={};nte={"Clear search":"Limpar pesquisa"};var rte={};rte={"Clear search":"Limpar pesquisa"};var ite={};ite={"Clear search":"tergei cutarea"};var ste={};ste={"Clear search":" "};var ate={};ate={"Clear search":"Vymaza vyhadvanie"};var ote={};ote={"Clear search":"Poisti iskanje"};var lte={};lte={"Clear search":"Obrii pretragu"};var cte={};cte={"Clear search":"Rensa skning"};var ute={};ute={"Clear search":"Aramay temizle"};var dte={};dte={"Clear search":" "};var hte={};hte={"Clear search":""};var fte={};fte={"Clear search":""};var pte={};pte={"ar-AE":kee,"bg-BG":Nee,"cs-CZ":Lee,"da-DK":Fee,"de-DE":jee,"el-GR":Oee,"en-US":zee,"es-ES":$ee,"et-EE":Qee,"fi-FI":Uee,"fr-FR":Hee,"he-IL":Gee,"hr-HR":Vee,"hu-HU":Wee,"it-IT":Kee,"ja-JP":qee,"ko-KR":Yee,"lt-LT":Xee,"lv-LV":Jee,"nb-NO":Zee,"nl-NL":ete,"pl-PL":tte,"pt-BR":nte,"pt-PT":rte,"ro-RO":ite,"ru-RU":ste,"sk-SK":ate,"sl-SI":ote,"sr-SP":lte,"sv-SE":cte,"tr-TR":ute,"uk-UA":dte,"zh-CN":hte,"zh-TW":fte};function v2e(t){return t&&t.__esModule?t.default:t}function x2e(t,e,n){let r=Yg(v2e(pte),"@react-aria/searchfield"),{isDisabled:i,isReadOnly:s,onSubmit:a,onClear:o,type:l="search"}=t,c=x=>{const E=x.key;E==="Enter"&&(i||s)&&x.preventDefault(),!(i||s)&&(E==="Enter"&&a&&(x.preventDefault(),a(e.value)),E==="Escape"&&(e.value===""&&(!n.current||n.current.value==="")?x.continuePropagation():(x.preventDefault(),e.setValue(""),o&&o())))},u=()=>{e.setValue(""),o&&o()},h=()=>{var x;(x=n.current)===null||x===void 0||x.focus()},{labelProps:f,inputProps:p,descriptionProps:m,errorMessageProps:v,...A}=n4({...t,value:e.value,onChange:e.setValue,onKeyDown:s?t.onKeyDown:Fp(c,t.onKeyDown),type:l},n);return{labelProps:f,inputProps:{...p,defaultValue:void 0},clearButtonProps:{"aria-label":r.format("Clear search"),excludeFromTabOrder:!0,preventFocusOnPress:!0,isDisabled:i||s,onPress:u,onPressStart:h},descriptionProps:m,errorMessageProps:v,...A}}class Qb{get childNodes(){throw new Error("childNodes is not supported")}clone(){let e=new this.constructor(this.key);return e.value=this.value,e.level=this.level,e.hasChildNodes=this.hasChildNodes,e.rendered=this.rendered,e.textValue=this.textValue,e["aria-label"]=this["aria-label"],e.index=this.index,e.parentKey=this.parentKey,e.prevKey=this.prevKey,e.nextKey=this.nextKey,e.firstChildKey=this.firstChildKey,e.lastChildKey=this.lastChildKey,e.props=this.props,e.render=this.render,e.colSpan=this.colSpan,e.colIndex=this.colIndex,e}filter(e,n,r){let i=this.clone();return n.addDescendants(i,e),i}constructor(e){this.value=null,this.level=0,this.hasChildNodes=!1,this.rendered=null,this.textValue="",this["aria-label"]=void 0,this.index=0,this.parentKey=null,this.prevKey=null,this.nextKey=null,this.firstChildKey=null,this.lastChildKey=null,this.props={},this.colSpan=null,this.colIndex=null,this.type=this.constructor.type,this.key=e}}class gte extends Qb{filter(e,n,r){let[i,s]=yte(e,n,this.firstChildKey,r),a=this.clone();return a.firstChildKey=i,a.lastChildKey=s,a}}class b2e extends Qb{}b2e.type="header";class mte extends Qb{}mte.type="loader";class Ate extends gte{filter(e,n,r){if(r(this.textValue,this)){let i=this.clone();return n.addDescendants(i,e),i}return null}}Ate.type="item";class C2e extends gte{filter(e,n,r){let i=super.filter(e,n,r);if(i&&i.lastChildKey!==null){let s=e.getItem(i.lastChildKey);if(s&&s.type!=="header")return i}return null}}C2e.type="section";class E2e{get size(){return this.itemCount}getKeys(){return this.keyMap.keys()}*[Symbol.iterator](){let e=this.firstKey!=null?this.keyMap.get(this.firstKey):void 0;for(;e;)yield e,e=e.nextKey!=null?this.keyMap.get(e.nextKey):void 0}getChildren(e){let n=this.keyMap;return{*[Symbol.iterator](){let r=n.get(e),i=r?.firstChildKey!=null?n.get(r.firstChildKey):null;for(;i;)yield i,i=i.nextKey!=null?n.get(i.nextKey):void 0}}}getKeyBefore(e){let n=this.keyMap.get(e);if(!n)return null;if(n.prevKey!=null){for(n=this.keyMap.get(n.prevKey);n&&n.type!=="item"&&n.lastChildKey!=null;)n=this.keyMap.get(n.lastChildKey);var r;return(r=n?.key)!==null&&r!==void 0?r:null}return n.parentKey}getKeyAfter(e){let n=this.keyMap.get(e);if(!n)return null;if(n.type!=="item"&&n.firstChildKey!=null)return n.firstChildKey;for(;n;){if(n.nextKey!=null)return n.nextKey;if(n.parentKey!=null)n=this.keyMap.get(n.parentKey);else return null}return null}getFirstKey(){return this.firstKey}getLastKey(){let e=this.lastKey!=null?this.keyMap.get(this.lastKey):null;for(;e?.lastChildKey!=null;)e=this.keyMap.get(e.lastChildKey);var n;return(n=e?.key)!==null&&n!==void 0?n:null}getItem(e){var n;return(n=this.keyMap.get(e))!==null&&n!==void 0?n:null}at(){throw new Error("Not implemented")}clone(){let e=this.constructor,n=new e;return n.keyMap=new Map(this.keyMap),n.firstKey=this.firstKey,n.lastKey=this.lastKey,n.itemCount=this.itemCount,n}addNode(e){if(this.frozen)throw new Error("Cannot add a node to a frozen collection");e.type==="item"&&this.keyMap.get(e.key)==null&&this.itemCount++,this.keyMap.set(e.key,e)}addDescendants(e,n){this.addNode(e);let r=n.getChildren(e.key);for(let i of r)this.addDescendants(i,n)}removeNode(e){if(this.frozen)throw new Error("Cannot remove a node to a frozen collection");let n=this.keyMap.get(e);n!=null&&n.type==="item"&&this.itemCount--,this.keyMap.delete(e)}commit(e,n,r=!1){if(this.frozen)throw new Error("Cannot commit a frozen collection");this.firstKey=e,this.lastKey=n,this.frozen=!r}filter(e){let n=new this.constructor,[r,i]=yte(this,n,this.firstKey,e);return n?.commit(r,i),n}constructor(){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.frozen=!1,this.itemCount=0}}function yte(t,e,n,r){if(n==null)return[null,null];let i=null,s=null,a=t.getItem(n);for(;a!=null;){let c=a.filter(t,e,r);c!=null&&(c.nextKey=null,s&&(c.prevKey=s.key,s.nextKey=c.key),i==null&&(i=c),e.addNode(c),s=c),a=a.nextKey?t.getItem(a.nextKey):null}if(s&&s.type==="separator"){let c=s.prevKey;e.removeNode(s.key),c?(s=e.getItem(c),s.nextKey=null):s=null}var o,l;return[(o=i?.key)!==null&&o!==void 0?o:null,(l=s?.key)!==null&&l!==void 0?l:null]}class vte{*[Symbol.iterator](){let e=this.firstChild;for(;e;)yield e,e=e.nextSibling}get firstChild(){return this._firstChild}set firstChild(e){this._firstChild=e,this.ownerDocument.markDirty(this)}get lastChild(){return this._lastChild}set lastChild(e){this._lastChild=e,this.ownerDocument.markDirty(this)}get previousSibling(){return this._previousSibling}set previousSibling(e){this._previousSibling=e,this.ownerDocument.markDirty(this)}get nextSibling(){return this._nextSibling}set nextSibling(e){this._nextSibling=e,this.ownerDocument.markDirty(this)}get parentNode(){return this._parentNode}set parentNode(e){this._parentNode=e,this.ownerDocument.markDirty(this)}get isConnected(){var e;return((e=this.parentNode)===null||e===void 0?void 0:e.isConnected)||!1}invalidateChildIndices(e){(this._minInvalidChildIndex==null||!this._minInvalidChildIndex.isConnected||e.index<this._minInvalidChildIndex.index)&&(this._minInvalidChildIndex=e,this.ownerDocument.markDirty(this))}updateChildIndices(){let e=this._minInvalidChildIndex;for(;e;)e.index=e.previousSibling?e.previousSibling.index+1:0,e=e.nextSibling;this._minInvalidChildIndex=null}appendChild(e){e.parentNode&&e.parentNode.removeChild(e),this.firstChild==null&&(this.firstChild=e),this.lastChild?(this.lastChild.nextSibling=e,e.index=this.lastChild.index+1,e.previousSibling=this.lastChild):(e.previousSibling=null,e.index=0),e.parentNode=this,e.nextSibling=null,this.lastChild=e,this.ownerDocument.markDirty(this),this.isConnected&&this.ownerDocument.queueUpdate()}insertBefore(e,n){if(n==null)return this.appendChild(e);e.parentNode&&e.parentNode.removeChild(e),e.nextSibling=n,e.previousSibling=n.previousSibling,e.index=n.index-1,this.firstChild===n?this.firstChild=e:n.previousSibling&&(n.previousSibling.nextSibling=e),n.previousSibling=e,e.parentNode=n.parentNode,this.invalidateChildIndices(e),this.isConnected&&this.ownerDocument.queueUpdate()}removeChild(e){e.parentNode===this&&(this._minInvalidChildIndex===e&&(this._minInvalidChildIndex=null),e.nextSibling&&(this.invalidateChildIndices(e.nextSibling),e.nextSibling.previousSibling=e.previousSibling),e.previousSibling&&(e.previousSibling.nextSibling=e.nextSibling),this.firstChild===e&&(this.firstChild=e.nextSibling),this.lastChild===e&&(this.lastChild=e.previousSibling),e.parentNode=null,e.nextSibling=null,e.previousSibling=null,e.index=0,this.ownerDocument.markDirty(e),this.isConnected&&this.ownerDocument.queueUpdate())}addEventListener(){}removeEventListener(){}get previousVisibleSibling(){let e=this.previousSibling;for(;e&&e.isHidden;)e=e.previousSibling;return e}get nextVisibleSibling(){let e=this.nextSibling;for(;e&&e.isHidden;)e=e.nextSibling;return e}get firstVisibleChild(){let e=this.firstChild;for(;e&&e.isHidden;)e=e.nextSibling;return e}get lastVisibleChild(){let e=this.lastChild;for(;e&&e.isHidden;)e=e.previousSibling;return e}constructor(e){this._firstChild=null,this._lastChild=null,this._previousSibling=null,this._nextSibling=null,this._parentNode=null,this._minInvalidChildIndex=null,this.ownerDocument=e}}class Q1 extends vte{get index(){return this._index}set index(e){this._index=e,this.ownerDocument.markDirty(this)}get level(){var e;return this.parentNode instanceof Q1?this.parentNode.level+(((e=this.node)===null||e===void 0?void 0:e.type)==="item"?1:0):0}getMutableNode(){return this.node==null?null:(this.isMutated||(this.node=this.node.clone(),this.isMutated=!0),this.ownerDocument.markDirty(this),this.node)}updateNode(){var e,n,r,i,s,a,o,l;let c=this.nextVisibleSibling,u=this.getMutableNode();if(u!=null){u.index=this.index,u.level=this.level;var h;u.parentKey=this.parentNode instanceof Q1&&(h=(e=this.parentNode.node)===null||e===void 0?void 0:e.key)!==null&&h!==void 0?h:null;var f;u.prevKey=(f=(r=this.previousVisibleSibling)===null||r===void 0||(n=r.node)===null||n===void 0?void 0:n.key)!==null&&f!==void 0?f:null;var p;u.nextKey=(p=c==null||(i=c.node)===null||i===void 0?void 0:i.key)!==null&&p!==void 0?p:null,u.hasChildNodes=!!this.firstChild;var m;u.firstChildKey=(m=(a=this.firstVisibleChild)===null||a===void 0||(s=a.node)===null||s===void 0?void 0:s.key)!==null&&m!==void 0?m:null;var v;if(u.lastChildKey=(v=(l=this.lastVisibleChild)===null||l===void 0||(o=l.node)===null||o===void 0?void 0:o.key)!==null&&v!==void 0?v:null,(u.colSpan!=null||u.colIndex!=null)&&c){var A,x;let E=((A=u.colIndex)!==null&&A!==void 0?A:u.index)+((x=u.colSpan)!==null&&x!==void 0?x:1);if(c.node!=null&&E!==c.node.colIndex){let w=c.getMutableNode();w.colIndex=E}}}}setProps(e,n,r,i,s){let a,{value:o,textValue:l,id:c,...u}=e;if(this.node==null?(a=new r(c??`react-aria-${++this.ownerDocument.nodeId}`),this.node=a):a=this.getMutableNode(),u.ref=n,a.props=u,a.rendered=i,a.render=s,a.value=o,a.textValue=l||(typeof u.children=="string"?u.children:"")||e["aria-label"]||"",c!=null&&c!==a.key)throw new Error("Cannot change the id of an item");u.colSpan!=null&&(a.colSpan=u.colSpan),this.isConnected&&this.ownerDocument.queueUpdate()}get style(){let e=this;return{get display(){return e.isHidden?"none":""},set display(n){let r=n==="none";if(e.isHidden!==r){var i,s;(((i=e.parentNode)===null||i===void 0?void 0:i.firstVisibleChild)===e||((s=e.parentNode)===null||s===void 0?void 0:s.lastVisibleChild)===e)&&e.ownerDocument.markDirty(e.parentNode);let a=e.previousVisibleSibling,o=e.nextVisibleSibling;a&&e.ownerDocument.markDirty(a),o&&e.ownerDocument.markDirty(o),e.isHidden=r,e.ownerDocument.markDirty(e)}}}}hasAttribute(){}setAttribute(){}setAttributeNS(){}removeAttribute(){}constructor(e,n){super(n),this.nodeType=8,this.isMutated=!0,this._index=0,this.isHidden=!1,this.node=null}}class S2e extends vte{get isConnected(){return!0}createElement(e){return new Q1(e,this)}getMutableCollection(){return this.nextCollection||(this.nextCollection=this.collection.clone()),this.nextCollection}markDirty(e){this.dirtyNodes.add(e)}addNode(e){if(e.isHidden||e.node==null)return;let n=this.getMutableCollection();if(!n.getItem(e.node.key))for(let r of e)this.addNode(r);n.addNode(e.node)}removeNode(e){for(let n of e)this.removeNode(n);e.node&&this.getMutableCollection().removeNode(e.node.key)}getCollection(){return this.inSubscription?this.collection.clone():(this.queuedRender=!1,this.updateCollection(),this.collection)}updateCollection(){for(let o of this.dirtyNodes)o instanceof Q1&&(!o.isConnected||o.isHidden)?this.removeNode(o):o.updateChildIndices();for(let o of this.dirtyNodes)o instanceof Q1?(o.isConnected&&!o.isHidden&&(o.updateNode(),this.addNode(o)),o.node&&this.dirtyNodes.delete(o),o.isMutated=!1):this.dirtyNodes.delete(o);if(this.nextCollection){var e,n,r,i,s,a;this.nextCollection.commit((s=(n=this.firstVisibleChild)===null||n===void 0||(e=n.node)===null||e===void 0?void 0:e.key)!==null&&s!==void 0?s:null,(a=(i=this.lastVisibleChild)===null||i===void 0||(r=i.node)===null||r===void 0?void 0:r.key)!==null&&a!==void 0?a:null,this.isSSR),this.isSSR||(this.collection=this.nextCollection,this.nextCollection=null)}}queueUpdate(){if(!(this.dirtyNodes.size===0||this.queuedRender)){this.queuedRender=!0,this.inSubscription=!0;for(let e of this.subscriptions)e();this.inSubscription=!1}}subscribe(e){return this.subscriptions.add(e),()=>this.subscriptions.delete(e)}resetAfterSSR(){this.isSSR&&(this.isSSR=!1,this.firstChild=null,this.lastChild=null,this.nodeId=0)}constructor(e){super(null),this.nodeType=11,this.ownerDocument=this,this.dirtyNodes=new Set,this.isSSR=!1,this.nodeId=0,this.nodesByProps=new WeakMap,this.nextCollection=null,this.subscriptions=new Set,this.queuedRender=!1,this.inSubscription=!1,this.collection=e,this.nextCollection=e}}function xte(t){let{children:e,items:n,idScope:r,addIdAndValue:i,dependencies:s=[]}=t,a=C.useMemo(()=>new WeakMap,s);return C.useMemo(()=>{if(n&&typeof e=="function"){let c=[];for(let u of n){let h=a.get(u);if(!h){h=e(u);var o,l;let f=(l=(o=h.props.id)!==null&&o!==void 0?o:u.key)!==null&&l!==void 0?l:u.id;if(f==null)throw new Error("Could not determine key for item");r&&(f=r+":"+f),h=C.cloneElement(h,i?{key:f,id:f,value:u}:{key:f}),a.set(u,h)}c.push(h)}return c}else if(typeof e!="function")return e},[e,n,a,r,i])}if(typeof HTMLTemplateElement<"u"){const t=Object.getOwnPropertyDescriptor(Node.prototype,"firstChild").get;Object.defineProperty(HTMLTemplateElement.prototype,"firstChild",{configurable:!0,enumerable:!0,get:function(){return this.dataset.reactAriaHidden?this.content.firstChild:t.call(this)}})}const FT=C.createContext(!1);function w2e(t){if(C.useContext(FT))return we.createElement(we.Fragment,null,t.children);let n=we.createElement(FT.Provider,{value:!0},t.children);return we.createElement("template",{"data-react-aria-hidden":!0},n)}function Ub(t){let e=(n,r)=>C.useContext(FT)?null:t(n,r);return e.displayName=t.displayName||t.name,C.forwardRef(e)}function _2e(){return C.useContext(FT)}var RR={exports:{}},PR={};var i7;function I2e(){if(i7)return PR;i7=1;var t=DE();function e(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,a=t.useDebugValue;function o(h,f){var p=f(),m=r({inst:{value:p,getSnapshot:f}}),v=m[0].inst,A=m[1];return s(function(){v.value=p,v.getSnapshot=f,l(v)&&A({inst:v})},[h,p,f]),i(function(){return l(v)&&A({inst:v}),h(function(){l(v)&&A({inst:v})})},[h]),a(p),p}function l(h){var f=h.getSnapshot;h=h.value;try{var p=f();return!n(h,p)}catch{return!0}}function c(h,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return PR.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,PR}var s7;function bte(){return s7||(s7=1,RR.exports=I2e()),RR.exports}var B2e=bte();const Cte=C.createContext(!1),k_=C.createContext(null);function r4(t){if(C.useContext(k_))return t.content;let{collection:n,document:r}=R2e(t.createCollection);return we.createElement(we.Fragment,null,we.createElement(w2e,null,we.createElement(k_.Provider,{value:r},t.content)),we.createElement(T2e,{render:t.children,collection:n}))}function T2e({collection:t,render:e}){return e(t)}function M2e(t,e,n){let r=zb(),i=C.useRef(r);i.current=r;let s=C.useCallback(()=>i.current?n():e(),[e,n]);return B2e.useSyncExternalStore(t,s)}const D2e=typeof we.useSyncExternalStore=="function"?we.useSyncExternalStore:M2e;function R2e(t){let[e]=C.useState(()=>new S2e(t?.()||new E2e)),n=C.useCallback(a=>e.subscribe(a),[e]),r=C.useCallback(()=>{let a=e.getCollection();return e.isSSR&&e.resetAfterSSR(),a},[e]),i=C.useCallback(()=>(e.isSSR=!0,e.getCollection()),[e]);return{collection:D2e(n,r,i),document:e}}const cL=C.createContext(null);function P2e(t){var e;return e=class extends Qb{},e.type=t,e}function k2e(t,e,n,r,i,s){typeof t=="string"&&(t=P2e(t));let a=C.useCallback(l=>{l?.setProps(e,n,t,r,s)},[e,n,r,s,t]),o=C.useContext(cL);if(o){let l=o.ownerDocument.nodesByProps.get(e);return l||(l=o.ownerDocument.createElement(t.type),l.setProps(e,n,t,r,s),o.appendChild(l),o.ownerDocument.updateCollection(),o.ownerDocument.nodesByProps.set(e,l)),i?we.createElement(cL.Provider,{value:l},i):null}return we.createElement(t.type,{ref:a},i)}function EF(t,e){let n=({node:i})=>e(i.props,i.props.ref,i),r=C.forwardRef((i,s)=>{let a=C.useContext(eL);if(!C.useContext(Cte)){if(e.length>=3)throw new Error(e.name+" cannot be rendered outside a collection.");return e(i,s)}return k2e(t,i,s,"children"in i?i.children:null,null,l=>we.createElement(eL.Provider,{value:a},we.createElement(n,{node:l})))});return r.displayName=e.name,r}function N2e(t){return xte({...t,addIdAndValue:!0})}const a7=C.createContext(null);function Ete(t){let e=C.useContext(a7),n=(e?.dependencies||[]).concat(t.dependencies),r=t.idScope||e?.idScope,i=N2e({...t,idScope:r,dependencies:n});return C.useContext(k_)&&(i=we.createElement(L2e,null,i)),e=C.useMemo(()=>({dependencies:n,idScope:r}),[r,...n]),we.createElement(a7.Provider,{value:e},i)}function L2e({children:t}){let e=C.useContext(k_),n=C.useMemo(()=>we.createElement(k_.Provider,{value:null},we.createElement(Cte.Provider,{value:!0},t)),[t]);return zb()?we.createElement(cL.Provider,{value:e},n):gb.createPortal(n,e)}const F2e=C.createContext(null),Ste={CollectionRoot({collection:t,renderDropIndicator:e}){return o7(t,null,e)},CollectionBranch({collection:t,parent:e,renderDropIndicator:n}){return o7(t,e,n)}};function o7(t,e,n){return xte({items:e?t.getChildren(e.key):t,dependencies:[n],children(r){let i=r.render(r);return!n||r.type!=="item"?i:we.createElement(we.Fragment,null,n({type:"item",key:r.key,dropPosition:"before"}),i,j2e(t,r,n))}})}function j2e(t,e,n){let r=e.key,i=t.getKeyAfter(r),s=i!=null?t.getItem(i):null;for(;s!=null&&s.type!=="item";)i=t.getKeyAfter(s.key),s=i!=null?t.getItem(i):null;let a=e.nextKey!=null?t.getItem(e.nextKey):null;for(;a!=null&&a.type!=="item";)a=a.nextKey!=null?t.getItem(a.nextKey):null;let o=[];if(a==null){let l=e;for(;l&&(!s||l.parentKey!==s.parentKey&&s.level<l.level);){let c=n({type:"item",key:l.key,dropPosition:"after"});C.isValidElement(c)&&o.push(C.cloneElement(c,{key:`${l.key}-after`})),l=l.parentKey!=null?t.getItem(l.parentKey):null}}return o}const BI=C.createContext(Ste);function O2e(t){return C.useMemo(()=>t!=null?new Set([t]):null,[t])}function wte(t,e){let{elementType:n="button",isDisabled:r,onPress:i,onPressStart:s,onPressEnd:a,onPressUp:o,onPressChange:l,preventFocusOnPress:c,allowFocusWhenDisabled:u,onClick:h,href:f,target:p,rel:m,type:v="button"}=t,A;n==="button"?A={type:v,disabled:r,form:t.form,formAction:t.formAction,formEncType:t.formEncType,formMethod:t.formMethod,formNoValidate:t.formNoValidate,formTarget:t.formTarget,name:t.name,value:t.value}:A={role:"button",href:n==="a"&&!r?f:void 0,target:n==="a"?p:void 0,type:n==="input"?v:void 0,disabled:n==="input"?r:void 0,"aria-disabled":!r||n==="input"?void 0:r,rel:n==="a"?m:void 0};let{pressProps:x,isPressed:E}=Oy({onPressStart:s,onPressEnd:a,onPressChange:l,onPress:i,onPressUp:o,onClick:h,isDisabled:r,preventFocusOnPress:c,ref:e}),{focusableProps:w}=QE(t,e);u&&(w.tabIndex=r?-1:w.tabIndex);let B=an(w,x,Cr(t,{labelable:!0}));return{isPressed:E,buttonProps:an(A,B,{"aria-haspopup":t["aria-haspopup"],"aria-expanded":t["aria-expanded"],"aria-controls":t["aria-controls"],"aria-pressed":t["aria-pressed"],"aria-current":t["aria-current"],"aria-disabled":t["aria-disabled"]})}}function _te(t,e,n){const{isSelected:r}=e,{isPressed:i,buttonProps:s}=wte({...t,onPress:Fp(e.toggle,t.onPress)},n);return{isPressed:i,isSelected:r,isDisabled:t.isDisabled||!1,buttonProps:an(s,{"aria-pressed":r})}}function z2e(t,e){const{"aria-label":n,"aria-labelledby":r,orientation:i="horizontal"}=t;let[s,a]=C.useState(!1);Fi(()=>{var m;a(!!(e.current&&(!((m=e.current.parentElement)===null||m===void 0)&&m.closest('[role="toolbar"]'))))});const{direction:o}=so(),l=o==="rtl"&&i==="horizontal";let c=FIe(e);const u=m=>{if(m.currentTarget.contains(m.target)){if(i==="horizontal"&&m.key==="ArrowRight"||i==="vertical"&&m.key==="ArrowDown")l?c.focusPrevious():c.focusNext();else if(i==="horizontal"&&m.key==="ArrowLeft"||i==="vertical"&&m.key==="ArrowUp")l?c.focusNext():c.focusPrevious();else if(m.key==="Tab"){m.stopPropagation(),h.current=document.activeElement,m.shiftKey?c.focusFirst():c.focusLast();return}else return;m.stopPropagation(),m.preventDefault()}},h=C.useRef(null),f=m=>{!m.currentTarget.contains(m.relatedTarget)&&!h.current&&(h.current=m.target)},p=m=>{var v;if(h.current&&!m.currentTarget.contains(m.relatedTarget)&&(!((v=e.current)===null||v===void 0)&&v.contains(m.target))){var A;(A=h.current)===null||A===void 0||A.focus(),h.current=null}};return{toolbarProps:{...Cr(t,{labelable:!0}),role:s?"group":"toolbar","aria-orientation":i,"aria-label":n,"aria-labelledby":n==null?r:void 0,onKeyDownCapture:s?void 0:u,onFocusCapture:s?void 0:p,onBlurCapture:s?void 0:f}}}function $2e(t,e,n){let{isDisabled:r}=t,{toolbarProps:i}=z2e(t,n);return{groupProps:{...i,role:e.selectionMode==="single"?"radiogroup":i.role,"aria-disabled":r}}}function Q2e(t,e,n){let r={isSelected:e.selectedKeys.has(t.id),defaultSelected:!1,setSelected(l){e.setSelected(t.id,l)},toggle(){e.toggleKey(t.id)}},{isPressed:i,isSelected:s,isDisabled:a,buttonProps:o}=_te({...t,id:void 0,isDisabled:t.isDisabled||e.isDisabled},r,n);return e.selectionMode==="single"&&(o.role="radio",o["aria-checked"]=r.isSelected,delete o["aria-pressed"]),{isPressed:i,isSelected:s,isDisabled:a,buttonProps:o}}function Ite(t,e,n){let{isDisabled:r=!1,isReadOnly:i=!1,value:s,name:a,form:o,children:l,"aria-label":c,"aria-labelledby":u,validationState:h="valid",isInvalid:f,onPressStart:p,onPressEnd:m,onPressChange:v,onPress:A,onPressUp:x,onClick:E}=t,w=F=>{F.stopPropagation(),e.setSelected(F.target.checked)},{pressProps:B,isPressed:D}=Oy({onPressStart:p,onPressEnd:m,onPressChange:v,onPress:A,onPressUp:x,onClick:E,isDisabled:r}),{pressProps:T,isPressed:M}=Oy({onPressStart:p,onPressEnd:m,onPressChange:v,onPressUp:x,onClick:E,onPress(F){var z;A?.(F),e.toggle(),(z=n.current)===null||z===void 0||z.focus()},isDisabled:r||i}),{focusableProps:R}=QE(t,n),k=an(B,R),L=Cr(t,{labelable:!0});return Gy(n,e.defaultSelected,e.setSelected),{labelProps:an(T,{onClick:F=>F.preventDefault()}),inputProps:an(L,{"aria-invalid":f||h==="invalid"||void 0,"aria-errormessage":t["aria-errormessage"],"aria-controls":t["aria-controls"],"aria-readonly":i||void 0,onChange:w,disabled:r,...s==null?{}:{value:s},name:a,form:o,type:"checkbox",...k}),isSelected:e.isSelected,isPressed:D||M,isDisabled:r,isReadOnly:i,isInvalid:f||h==="invalid"}}function Bte(t,e,n){let r=Ky({...t,value:e.isSelected}),{isInvalid:i,validationErrors:s,validationDetails:a}=r.displayValidation,{labelProps:o,inputProps:l,isSelected:c,isPressed:u,isDisabled:h,isReadOnly:f}=Ite({...t,isInvalid:i},e,n);t4(t,r,n);let{isIndeterminate:p,isRequired:m,validationBehavior:v="aria"}=t;C.useEffect(()=>{n.current&&(n.current.indeterminate=!!p)});let{pressProps:A}=Oy({isDisabled:h||f,onPress(){let{[Eb]:x}=t,{commitValidation:E}=x||r;E()}});return{labelProps:an(o,A,C.useMemo(()=>({onMouseDown:x=>x.preventDefault()}),[])),inputProps:{...l,checked:c,"aria-required":m&&v==="aria"||void 0,required:m&&v==="native"},isSelected:c,isPressed:u,isDisabled:h,isReadOnly:f,isInvalid:i,validationErrors:s,validationDetails:a}}const U2e=new WeakMap;function i4(t={}){let{isReadOnly:e}=t,[n,r]=Zl(t.isSelected,t.defaultSelected||!1,t.onChange),[i]=C.useState(n);function s(l){e||r(l)}function a(){e||r(!n)}var o;return{isSelected:n,defaultSelected:(o=t.defaultSelected)!==null&&o!==void 0?o:i,setSelected:s,toggle:a}}function H2e(t){let{selectionMode:e="single",disallowEmptySelection:n,isDisabled:r=!1}=t,[i,s]=Zl(C.useMemo(()=>t.selectedKeys?new Set(t.selectedKeys):void 0,[t.selectedKeys]),C.useMemo(()=>t.defaultSelectedKeys?new Set(t.defaultSelectedKeys):new Set,[t.defaultSelectedKeys]),t.onSelectionChange);return{selectionMode:e,isDisabled:r,selectedKeys:i,setSelectedKeys:s,toggleKey(a){let o;e==="multiple"?(o=new Set(i),o.has(a)&&(!n||o.size>1)?o.delete(a):o.add(a)):o=new Set(i.has(a)&&!n?[]:[a]),s(o)},setSelected(a,o){o!==i.has(a)&&this.toggleKey(a)}}}function G2e(t,e,n){const r=i4({isReadOnly:t.isReadOnly||e.isReadOnly,isSelected:e.isSelected(t.value),defaultSelected:e.defaultValue.includes(t.value),onChange(x){x?e.addValue(t.value):e.removeValue(t.value),t.onChange&&t.onChange(x)}});let{name:i,form:s,descriptionId:a,errorMessageId:o,validationBehavior:l}=U2e.get(e);var c;l=(c=t.validationBehavior)!==null&&c!==void 0?c:l;let{realtimeValidation:u}=Ky({...t,value:r.isSelected,name:void 0,validationBehavior:"aria"}),h=C.useRef(A1),f=()=>{e.setInvalid(t.value,u.isInvalid?u:h.current)};C.useEffect(f);let p=e.realtimeValidation.isInvalid?e.realtimeValidation:u,m=l==="native"?e.displayValidation:p;var v;let A=Bte({...t,isReadOnly:t.isReadOnly||e.isReadOnly,isDisabled:t.isDisabled||e.isDisabled,name:t.name||i,form:t.form||s,isRequired:(v=t.isRequired)!==null&&v!==void 0?v:e.isRequired,validationBehavior:l,[Eb]:{realtimeValidation:p,displayValidation:m,resetValidation:e.resetValidation,commitValidation:e.commitValidation,updateValidation(x){h.current=x,f()}}},r,n);return{...A,inputProps:{...A.inputProps,"aria-describedby":[t["aria-describedby"],e.isInvalid?o:null,a].filter(Boolean).join(" ")||void 0}}}var Tte={};Tte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"  ",colorSwatch:" ",transparent:"",twoDimensionalSlider:" 2D"};var Mte={};Mte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"    ",colorSwatch:" ",transparent:"",twoDimensionalSlider:"2D "};var Dte={};Dte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Vbr barvy",colorSwatch:"barevn vzorek",transparent:"prhledn",twoDimensionalSlider:"2D posuvnk"};var Rte={};Rte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Farvevlger",colorSwatch:"farveprve",transparent:"gennemsigtig",twoDimensionalSlider:"2D-skyder"};var Pte={};Pte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Farbwhler",colorSwatch:"Farbfeld",transparent:"transparent",twoDimensionalSlider:"2D-Schieberegler"};var kte={};kte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:" ",colorSwatch:" ",transparent:"",twoDimensionalSlider:" 2D"};var Nte={};Nte={colorPicker:"Color picker",twoDimensionalSlider:"2D slider",colorNameAndValue:t=>`${t.name}: ${t.value}`,colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorSwatch:"color swatch",transparent:"transparent"};var Lte={};Lte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Selector de color",colorSwatch:"muestra de color",transparent:"transparente",twoDimensionalSlider:"Regulador 2D"};var Fte={};Fte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Vrvivalija",colorSwatch:"vrvinidis",transparent:"lbipaistev",twoDimensionalSlider:"2D-liugur"};var jte={};jte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Vrimuokkain",colorSwatch:"vrimalli",transparent:"lpinkyv",twoDimensionalSlider:"2D-liukusdin"};var Ote={};Ote={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Slecteur de couleurs",colorSwatch:"chantillon de couleurs",transparent:"Transparent",twoDimensionalSlider:"Curseur2D"};var zte={};zte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:" ",colorSwatch:" ",transparent:"",twoDimensionalSlider:"  "};var $te={};$te={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Odabir boje",colorSwatch:"uzorak boje",transparent:"transparentno",twoDimensionalSlider:"2D kliza"};var Qte={};Qte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Sznvlaszt",colorSwatch:"szntr",transparent:"tltsz",twoDimensionalSlider:"2D-csszka"};var Ute={};Ute={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Selettore colore",colorSwatch:"campione di colore",transparent:"trasparente",twoDimensionalSlider:"Cursore 2D"};var Hte={};Hte={colorInputLabel:t=>`${t.label}${t.channelLabel}`,colorNameAndValue:t=>`${t.name} : ${t.value}`,colorPicker:"",colorSwatch:"",transparent:"",twoDimensionalSlider:"2D "};var Gte={};Gte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:" ",colorSwatch:" ",transparent:"",twoDimensionalSlider:"2D "};var Vte={};Vte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Spalv parinkiklis",colorSwatch:"spalv pavyzdys",transparent:"skaidrus",twoDimensionalSlider:"2D slankiklis"};var Wte={};Wte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Krsu atlastjs",colorSwatch:"krsu paraugs",transparent:"caurspdgs",twoDimensionalSlider:"2D sldnis"};var Kte={};Kte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Fargevelger",colorSwatch:"fargekart",transparent:"gjennomsiktig",twoDimensionalSlider:"2D-glidebryter"};var qte={};qte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Kleurkiezer",colorSwatch:"kleurstaal",transparent:"transparant",twoDimensionalSlider:"2D-schuifregelaar"};var Yte={};Yte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Prbnik kolorw",colorSwatch:"prbka koloru",transparent:"przezroczysty",twoDimensionalSlider:"Suwak 2D"};var Xte={};Xte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Seletor de cores",colorSwatch:"amostra de cores",transparent:"transparente",twoDimensionalSlider:"Controle deslizante 2D"};var Jte={};Jte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Seletor de cores",colorSwatch:"amostra de cor",transparent:"transparente",twoDimensionalSlider:"Controle deslizante 2D"};var Zte={};Zte={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Selector de culori",colorSwatch:"specimen de culoare",transparent:"transparent",twoDimensionalSlider:"Glisor 2D"};var ene={};ene={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:" ",colorSwatch:" ",transparent:"",twoDimensionalSlider:" 2D"};var tne={};tne={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Vber farieb",colorSwatch:"vzorkovnk farieb",transparent:"transparentn",twoDimensionalSlider:"2D jazdec"};var nne={};nne={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Izbirnik barv",colorSwatch:"barvna paleta",transparent:"prozorno",twoDimensionalSlider:"2D drsnik"};var rne={};rne={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Bira boja",colorSwatch:"Uzorak boje",transparent:"providno",twoDimensionalSlider:"2D kliza"};var ine={};ine={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Frgvljaren",colorSwatch:"frgruta",transparent:"genomskinlig",twoDimensionalSlider:"2D-reglage"};var sne={};sne={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:"Renk Seici",colorSwatch:"renk rnei",transparent:"saydam",twoDimensionalSlider:"2D srg"};var ane={};ane={colorInputLabel:t=>`${t.label}, ${t.channelLabel}`,colorNameAndValue:t=>`${t.name}: ${t.value}`,colorPicker:" ",colorSwatch:" ",transparent:"",twoDimensionalSlider:" 2D"};var one={};one={colorInputLabel:t=>`${t.label}${t.channelLabel}`,colorNameAndValue:t=>`${t.name}${t.value}`,colorPicker:"",colorSwatch:"",transparent:"",twoDimensionalSlider:"2D "};var lne={};lne={colorInputLabel:t=>`${t.label}${t.channelLabel}`,colorNameAndValue:t=>`${t.name}${t.value}`,colorPicker:"",colorSwatch:"",transparent:"",twoDimensionalSlider:"2D "};var SF={};SF={"ar-AE":Tte,"bg-BG":Mte,"cs-CZ":Dte,"da-DK":Rte,"de-DE":Pte,"el-GR":kte,"en-US":Nte,"es-ES":Lte,"et-EE":Fte,"fi-FI":jte,"fr-FR":Ote,"he-IL":zte,"hr-HR":$te,"hu-HU":Qte,"it-IT":Ute,"ja-JP":Hte,"ko-KR":Gte,"lt-LT":Vte,"lv-LV":Wte,"nb-NO":Kte,"nl-NL":qte,"pl-PL":Yte,"pt-BR":Xte,"pt-PT":Jte,"ro-RO":Zte,"ru-RU":ene,"sk-SK":tne,"sl-SI":nne,"sr-SP":rne,"sv-SE":ine,"tr-TR":sne,"uk-UA":ane,"zh-CN":one,"zh-TW":lne};var cne={};cne={alpha:"",black:"",blue:"","blue purple":" ",brightness:"",brown:"","brown yellow":" ",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"","cyan blue":" ",dark:"",gray:"",grayish:" ",green:"","green cyan":" ",hue:" ",light:"",lightness:"",magenta:"","magenta pink":" ",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":"",red:"","red orange":" ",saturation:"",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} `,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":" "};var une={};une={alpha:"",black:"",blue:"","blue purple":" ",brightness:"",brown:"","brown yellow":" ",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"","cyan blue":" ",dark:"",gray:"",grayish:"",green:"","green cyan":" ",hue:"",light:"",lightness:"",magenta:"","magenta pink":" ",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":" ",red:"","red orange":" ",saturation:"",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} `,"very dark":" ","very light":" ",vibrant:" ",white:"",yellow:"","yellow green":" "};var dne={};dne={alpha:"Alfa",black:"ern",blue:"Modr","blue purple":"modrofialov",brightness:"Jas",brown:"hnd","brown yellow":"hndolut",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"tyrkysov","cyan blue":"tyrkysovomodr",dark:"tmav",gray:"ed",grayish:"naedl",green:"Zelen","green cyan":"zelenotyrkysov",hue:"Odstn",light:"svtl",lightness:"Svtlost",magenta:"purpurov","magenta pink":"purpurov rov",orange:"oranov","orange yellow":"oranovolut",pale:"bled",pink:"rov","pink red":"rovoerven",purple:"fialov","purple magenta":"fialov purpurov",red:"erven","red orange":"ervenooranov",saturation:"Sytost",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} prhledn`,"very dark":"velmi tmav","very light":"velmi svtl",vibrant:"ziv",white:"bl",yellow:"lut","yellow green":"lutozelen"};var hne={};hne={alpha:"Alfa",black:"sort",blue:"Bl","blue purple":"bllilla",brightness:"Lysstyrke",brown:"brun","brown yellow":"brungul",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cyan","cyan blue":"cyan bl",dark:"mrk",gray:"gr",grayish:"grlig",green:"Grn","green cyan":"grn cyan",hue:"Tone",light:"lys",lightness:"Lyshed",magenta:"magenta","magenta pink":"magenta pink",orange:"orange","orange yellow":"orangegul",pale:"bleg",pink:"lyserd","pink red":"lyserdlig rd",purple:"lilla","purple magenta":"lilla magenta",red:"Rd","red orange":"rdorange",saturation:"Farvemtning",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} gennemsigtig`,"very dark":"meget mrk","very light":"meget lys",vibrant:"klar",white:"hvid",yellow:"gul","yellow green":"gulgrn"};var fne={};fne={alpha:"Alpha",black:"Schwarz",blue:"Blau","blue purple":"Blaulila",brightness:"Helligkeit",brown:"Braun","brown yellow":"Braungelb",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"Cyan","cyan blue":"Cyanblau",dark:"dunkles",gray:"Grau",grayish:"gruliches",green:"Grn","green cyan":"Grncyan",hue:"Farbton",light:"helles",lightness:"Leuchtkraft",magenta:"Magenta","magenta pink":"Magentarosa",orange:"Orange","orange yellow":"Orangegelb",pale:"blasses",pink:"Rosa","pink red":"Rosarot",purple:"Lila","purple magenta":"Lilamagenta",red:"Rot","red orange":"Rotorange",saturation:"Sttigung",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, zu ${t.percentTransparent} transparent`,"very dark":"sehr dunkles","very light":"sehr helles",vibrant:"lebhaftes",white:"Wei",yellow:"Gelb","yellow green":"Gelbgrn"};var pne={};pne={alpha:"",black:"",blue:"","blue purple":" ",brightness:"",brown:"","brown yellow":" ",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"","cyan blue":" ",dark:"",gray:"",grayish:"",green:"","green cyan":" ",hue:"",light:"",lightness:"",magenta:"","magenta pink":" ",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":" ",red:"","red orange":" ",saturation:"",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} `,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":" "};var gne={};gne={hue:"Hue",saturation:"Saturation",lightness:"Lightness",brightness:"Brightness",red:"Red",green:"Green",blue:"Blue",alpha:"Alpha",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} transparent`,"very dark":"very dark",dark:"dark",light:"light","very light":"very light",pale:"pale",grayish:"grayish",vibrant:"vibrant",black:"black",white:"white",gray:"gray",pink:"pink","pink red":"pink red","red orange":"red orange",brown:"brown",orange:"orange","orange yellow":"orange yellow","brown yellow":"brown yellow",yellow:"yellow","yellow green":"yellow green","green cyan":"green cyan",cyan:"cyan","cyan blue":"cyan blue","blue purple":"blue purple",purple:"purple","purple magenta":"purple magenta",magenta:"magenta","magenta pink":"magenta pink"};var mne={};mne={alpha:"Alpha",black:"negro",blue:"Azul","blue purple":"prpura azulado",brightness:"Brillo",brown:"marrn","brown yellow":"amarillo amarronado",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cian","cyan blue":"azul cian",dark:"oscuro",gray:"gris",grayish:"grisceo",green:"Verde","green cyan":"cian verdoso",hue:"Tono",light:"claro",lightness:"Luminosidad",magenta:"magenta","magenta pink":"rosa magenta",orange:"naranja","orange yellow":"amarillo anaranjado",pale:"plido",pink:"rosa","pink red":"rojo rosado",purple:"morado","purple magenta":"magenta violceo",red:"Rojo","red orange":"naranja rojizo",saturation:"Saturacin",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} transparente`,"very dark":"muy oscuro","very light":"muy claro",vibrant:"intenso",white:"blanco",yellow:"amarillo","yellow green":"verde amarillento"};var Ane={};Ane={alpha:"Alfa",black:"must",blue:"Sinine","blue purple":"sinakaslilla",brightness:"Heledus",brown:"pruun","brown yellow":"pruunikaskollane",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"tsaan","cyan blue":"tsaansinine",dark:"tume",gray:"hall",grayish:"hallikas",green:"Roheline","green cyan":"tsaanroheline",hue:"Vrv",light:"valgus",lightness:"Valgus",magenta:"magentapunane","magenta pink":"magentaroosa",orange:"oran","orange yellow":"oranikaskollane",pale:"kahvatu",pink:"roosa","pink red":"vaarikapunane",purple:"lilla","purple magenta":"purpurne magenta",red:"Punane","red orange":"punakasoran",saturation:"Kllastus",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} lbipaistev`,"very dark":"vga tume","very light":"vga hele",vibrant:"ere",white:"valge",yellow:"kollane","yellow green":"kollakasroheline"};var yne={};yne={alpha:"Alpha",black:"musta",blue:"Sininen","blue purple":"sinivioletti",brightness:"Kirkkaus",brown:"ruskea","brown yellow":"ruskeankeltainen",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"syaani","cyan blue":"syaaninsininen",dark:"tumma",gray:"harmaa",grayish:"harmahtava",green:"Vihre","green cyan":"vihrensyaani",hue:"Svy",light:"vaalea",lightness:"Valomr",magenta:"magenta","magenta pink":"magentapinkki",orange:"oranssi","orange yellow":"oranssinkeltainen",pale:"vaalea",pink:"pinkki","pink red":"vaaleanpunainen",purple:"violetti","purple magenta":"violettimagenta",red:"Punainen","red orange":"punaoranssi",saturation:"Vrikyllisyys",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} lpinkyv`,"very dark":"hyvin tumma","very light":"erittin vaalea",vibrant:"eloisa",white:"valkea",yellow:"keltainen","yellow green":"keltavihre"};var vne={};vne={alpha:"Alpha",black:"Noir",blue:"Bleu","blue purple":"Violet bleu",brightness:"Luminosit",brown:"Brun","brown yellow":"Jaune brun",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"Cyan","cyan blue":"Bleu cyan",dark:"Sombre",gray:"Gris",grayish:"Gristre",green:"Vert","green cyan":"Cyan vert",hue:"Teinte",light:"Clair",lightness:"Luminosit",magenta:"Magenta","magenta pink":"Rose magenta",orange:"Orange","orange yellow":"Jaune orang",pale:"Ple",pink:"Rose","pink red":"Rouge ros",purple:"Violet","purple magenta":"Magenta violet",red:"Rouge","red orange":"Orange rouge",saturation:"Saturation",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} transparent`,"very dark":"Trs sombre","very light":"Trs clair",vibrant:"Vif",white:"Blanc",yellow:"Jaune","yellow green":"Vert jaune"};var xne={};xne={alpha:"",black:"",blue:"","blue purple":" ",brightness:"",brown:"","brown yellow":" ",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"","cyan blue":" ",dark:"",gray:"",grayish:"",green:"","green cyan":" ",hue:"",light:"",lightness:" ",magenta:"'","magenta pink":" '",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":"' ",red:"","red orange":" ",saturation:"",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} `,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":" "};var bne={};bne={alpha:"Alfa",black:"crno",blue:"Plava","blue purple":"plavo ljubiasta",brightness:"Svjetlina",brown:"smea","brown yellow":"smee uta",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cijan","cyan blue":"cijan plava",dark:"tamno",gray:"siva",grayish:"sivkasto",green:"Zelena","green cyan":"zelena cijan",hue:"Nijansa",light:"svjetlo",lightness:"Osvijetljenost",magenta:"magenta","magenta pink":"magentno ruiasta",orange:"naranasta","orange yellow":"naranasto uta",pale:"blijeda",pink:"ruiasta","pink red":"ruiasto crvena",purple:"ljubiasta","purple magenta":"ljubiasta magenta",red:"Crvena","red orange":"crveno naranasta",saturation:"Zasienost",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} prozirnosti`,"very dark":"jako tamna","very light":"vrlo svijetlo",vibrant:"vibrantna",white:"bijela",yellow:"uto","yellow green":"uto zelena"};var Cne={};Cne={alpha:"Alfa",black:"fekete",blue:"Kk","blue purple":"kk lila",brightness:"Fnyessg",brown:"barna","brown yellow":"barna srga",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cinkk","cyan blue":"cinkk",dark:"stt",gray:"szrke",grayish:"szrks",green:"Zld","green cyan":"zld cinkk",hue:"Sznrnyalat",light:"vilgos",lightness:"Vilgossg",magenta:"bbor","magenta pink":"bbor rzsaszn",orange:"narancs","orange yellow":"narancssrga",pale:"halvny",pink:"rzsaszn","pink red":"rzsaszn piros",purple:"lila","purple magenta":"lila bbor",red:"Piros","red orange":"piros narancs",saturation:"Teltettsg",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} tltsz`,"very dark":"nagyon stt","very light":"nagyon vilgos",vibrant:"lnk",white:"fehr",yellow:"srga","yellow green":"srga zld"};var Ene={};Ene={alpha:"Alfa",black:"nero",blue:"Blu","blue purple":"blu viola",brightness:"Luminosit",brown:"marrone","brown yellow":"giallo bruno",colorName:t=>`${t.hue} ${t.chroma} ${t.lightness}`,cyan:"ciano","cyan blue":"blu ciano",dark:"scuro",gray:"grigio",grayish:"grigiastro",green:"Verde","green cyan":"verde ciano",hue:"Tonalit",light:"chiaro",lightness:"Luminosit",magenta:"magenta","magenta pink":"rosa magenta",orange:"arancio","orange yellow":"giallo arancio",pale:"tenue",pink:"rosa","pink red":"rosa rosso",purple:"viola","purple magenta":"viola magenta",red:"Rosso","red orange":"rosso arancio",saturation:"Saturazione",transparentColorName:t=>`${t.hue} ${t.chroma} ${t.lightness}, trasparenza ${t.percentTransparent}`,"very dark":"molto scuro","very light":"molto chiaro",vibrant:"vivace",white:"bianco",yellow:"giallo","yellow green":"giallo verde"};var Sne={};Sne={alpha:"",black:"",blue:"","blue purple":"",brightness:"",brown:"","brown yellow":"",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"","cyan blue":"",dark:"",gray:"",grayish:"",green:"","green cyan":"",hue:"",light:"",lightness:"",magenta:"","magenta pink":"",orange:"","orange yellow":"",pale:"",pink:"","pink red":"",purple:"","purple magenta":"",red:"","red orange":"",saturation:"",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} `,"very dark":"","very light":"",vibrant:"",white:"",yellow:"","yellow green":""};var wne={};wne={alpha:"",black:"",blue:"","blue purple":"",brightness:"",brown:"","brown yellow":"",colorName:t=>`${t.lightness}, ${t.chroma}, ${t.hue}`,cyan:"","cyan blue":"",dark:"",gray:"",grayish:"",green:"","green cyan":"",hue:"",light:"",lightness:"",magenta:"","magenta pink":" ",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":" ",red:"","red orange":" ",saturation:"",transparentColorName:t=>`${t.lightness}, ${t.chroma}, ${t.hue}, ${t.percentTransparent} `,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":""};var _ne={};_ne={alpha:"Alfa",black:"juoda",blue:"Mlyna","blue purple":"melsvai violetin",brightness:"Rykumas",brown:"ruda","brown yellow":"rusvai geltona",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"alsvai mlyna","cyan blue":"alsvai mlyna",dark:"tamsi",gray:"pilka",grayish:"pilkva",green:"alia","green cyan":"alsvai mlyna",hue:"Atspalvis",light:"viesi",lightness:"viesumas",magenta:"rausvai raudona","magenta pink":"purpurin",orange:"oranin","orange yellow":"oraninio atspalvio geltona",pale:"blyki",pink:"roin","pink red":"roin raudona",purple:"violetin","purple magenta":"purpurin rausvai raudona",red:"Raudona","red orange":"rausvai oranin",saturation:"sotinimas",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} skaidri`,"very dark":"labai tamsi","very light":"labai viesi",vibrant:"ryki",white:"balta",yellow:"geltona","yellow green":"gelsvai alia"};var Ine={};Ine={alpha:"Alfa",black:"melns",blue:"Zila","blue purple":"zili violets",brightness:"Spilgtums",brown:"brns","brown yellow":"brni dzeltens",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cins","cyan blue":"cina zils",dark:"tums",gray:"pelks",grayish:"pelcgs",green:"Zaa","green cyan":"za cins",hue:"Nokrsa",light:"gais",lightness:"Gaiums",magenta:"fuksiju","magenta pink":"fuksiju roz",orange:"orans","orange yellow":"orani dzeltens",pale:"bls",pink:"roz","pink red":"rozgi sarkans",purple:"violets","purple magenta":"violets fuksiju",red:"Sarkana","red orange":"sarkangi orans",saturation:"Piestinjums",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} caurspdgs`,"very dark":"oti tums","very light":"oti gais",vibrant:"kos",white:"balts",yellow:"dzeltens","yellow green":"dzelteni za"};var Bne={};Bne={alpha:"Alfa",black:"svart",blue:"Bl","blue purple":"bllilla",brightness:"Lysstyrke",brown:"brun","brown yellow":"brungul",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cyan","cyan blue":"cyanbl",dark:"mrk",gray:"gr",grayish:"graktig",green:"Grnn","green cyan":"grnncyan",hue:"Fargetone",light:"lys",lightness:"Lyshet",magenta:"magenta","magenta pink":"magentarosa",orange:"oransje","orange yellow":"oransjegul",pale:"blek",pink:"rosa","pink red":"rosard",purple:"lilla","purple magenta":"lillamagenta",red:"Rd","red orange":"rdoransje",saturation:"Metning",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} gjennomsiktig`,"very dark":"svrt mrk","very light":"svrt lys",vibrant:"levende",white:"hvit",yellow:"gul","yellow green":"gulgrnn"};var Tne={};Tne={alpha:"Alfa",black:"zwart",blue:"Blauw","blue purple":"paarsblauw",brightness:"Helderheid",brown:"bruin","brown yellow":"bruingeel",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cyaan","cyan blue":"cyaanblauw",dark:"donker",gray:"grijs",grayish:"grijsachtig",green:"Groen","green cyan":"cyaangroen",hue:"Kleurtoon",light:"licht",lightness:"Lichtsterkte",magenta:"magenta","magenta pink":"magentaroze",orange:"oranje","orange yellow":"oranjegeel",pale:"bleek",pink:"roze","pink red":"rozerood",purple:"paars","purple magenta":"magentapaars",red:"Rood","red orange":"roodoranje",saturation:"Verzadiging",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} transparant`,"very dark":"heel donker","very light":"heel licht",vibrant:"levendig",white:"wit",yellow:"geel","yellow green":"geelgroen"};var Mne={};Mne={alpha:"Alfa",black:"czarny",blue:"Niebieski","blue purple":"niebiesko-fioletowy",brightness:"Jasno",brown:"brzowy","brown yellow":"brzowo-ty",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cyjanowy","cyan blue":"cyjanowo-niebieski",dark:"ciemny",gray:"szary",grayish:"szarawy",green:"Zielony","green cyan":"zielono-cyjanowy",hue:"Odcie",light:"jasny",lightness:"Jaskrawo",magenta:"purpurowy","magenta pink":"purpurowo-rowy",orange:"pomaraczowy","orange yellow":"pomaraczowo-ty",pale:"blady",pink:"rowy","pink red":"rowo-czerwony",purple:"fioletowy","purple magenta":"fioletowo-purpurowy",red:"Czerwony","red orange":"czerwono-pomaraczowy",saturation:"Nasycenie",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} przezroczystoci`,"very dark":"bardzo ciemny","very light":"bardzo jasny",vibrant:"intensywny",white:"biay",yellow:"ty","yellow green":"to-zielony"};var Dne={};Dne={alpha:"Alfa",black:"preto",blue:"Azul","blue purple":"roxo azulado",brightness:"Brilho",brown:"marrom","brown yellow":"marrom amarelado",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"ciano","cyan blue":"azul-ciano",dark:"escuro",gray:"cinza",grayish:"acinzentado",green:"Verde","green cyan":"verde-ciano",hue:"Matiz",light:"claro",lightness:"Luminosidade",magenta:"magenta","magenta pink":"rosa-magenta",orange:"laranja","orange yellow":"amarelo alaranjado",pale:"plido",pink:"rosa","pink red":"rosa avermelhado",purple:"roxo","purple magenta":"roxo-magenta",red:"Vermelho","red orange":"laranja avermelhado",saturation:"Saturao",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} transparente`,"very dark":"muito escuro","very light":"muito claro",vibrant:"vibrante",white:"branco",yellow:"amarelo","yellow green":"verde amarelado"};var Rne={};Rne={alpha:"Alfa",black:"preto",blue:"Azul","blue purple":"azul-prpura",brightness:"Luminosidade",brown:"castanho","brown yellow":"amarelo-castanho",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"ciano","cyan blue":"azul-ciano",dark:"escuro",gray:"cinzento",grayish:"acinzentado",green:"Verde","green cyan":"verde-ciano",hue:"Tonalidade",light:"claro",lightness:"Claridade",magenta:"magenta","magenta pink":"rosa-magenta",orange:"laranja","orange yellow":"amarelo-laranja",pale:"plido",pink:"cor-de-rosa","pink red":"vermelho-rosa",purple:"prpura","purple magenta":"prpura-magenta",red:"Vermelho","red orange":"laranja-vermelho",saturation:"Saturao",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} transparente`,"very dark":"muito escuro","very light":"muito claro",vibrant:"vibrante",white:"branco",yellow:"amarelo","yellow green":"verde-amarelo"};var Pne={};Pne={alpha:"Alfa",black:"negru",blue:"Albastru","blue purple":"albastru-violet",brightness:"Luminozitate",brown:"maro","brown yellow":"galben maro",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"bleu","cyan blue":"albastru-bleu",dark:"nchis",gray:"gri",grayish:"cenuiu",green:"Verde","green cyan":"verde bleu",hue:"Nuan",light:"deschis",lightness:"Luminozitate",magenta:"fucsia","magenta pink":"roz-fucsia",orange:"portocaliu","orange yellow":"galben-portocaliu",pale:"pal",pink:"roz","pink red":"roz-rou",purple:"violet","purple magenta":"violet-fucsia",red:"Rou","red orange":"portocaliu-rou",saturation:"Saturaie",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} transparent`,"very dark":"foarte nchis","very light":"foarte deschis",vibrant:"plin de via",white:"alb",yellow:"galben","yellow green":"galben-verde"};var kne={};kne={alpha:"",black:"",blue:"","blue purple":"-",brightness:"",brown:"","brown yellow":"-",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"","cyan blue":"  ",dark:"",gray:"",grayish:"",green:"","green cyan":"-",hue:"",light:"",lightness:"",magenta:"","magenta pink":"-",orange:"","orange yellow":"-",pale:"",pink:"","pink red":"-",purple:"","purple magenta":"-",red:"","red orange":"-",saturation:"",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue},   ${t.percentTransparent}`,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":"-"};var Nne={};Nne={alpha:"Alfa",black:"ierna",blue:"Modr","blue purple":"modrofialov",brightness:"Jas",brown:"hned","brown yellow":"hnedolt",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"azrov","cyan blue":"azrov modr",dark:"tmav",gray:"siv",grayish:"sivast",green:"Zelen","green cyan":"zelen azrov",hue:"Odtie",light:"svetl",lightness:"Svetlos",magenta:"purpurov","magenta pink":"ruov purpurov",orange:"oranov","orange yellow":"oranovolt",pale:"bled",pink:"ruov","pink red":"ruovoerven",purple:"fialov","purple magenta":"fialov purpurov",red:"erven","red orange":"ervenooranov",saturation:"Stos",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} priehadn`,"very dark":"vemi tmav","very light":"vemi svetl",vibrant:"energick",white:"biela",yellow:"lt","yellow green":"ltozelen"};var Lne={};Lne={alpha:"Alfa",black:"rna",blue:"Modra","blue purple":"modro vijolina",brightness:"Svetlost",brown:"rjava","brown yellow":"rjavo rumena",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cian","cyan blue":"cian modra",dark:"temna",gray:"siva",grayish:"sivkasta",green:"Zelena","green cyan":"zelena cian",hue:"Barva",light:"svetla",lightness:"Lahkost",magenta:"krlatna","magenta pink":"krlatno roza",orange:"oranna","orange yellow":"oranno rumena",pale:"bleda",pink:"roza","pink red":"roza rdea",purple:"vijolina","purple magenta":"vijolino krlatna",red:"Rdea","red orange":"rdee oranna",saturation:"Nasienost",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} prozorna`,"very dark":"zelo temna","very light":"zelo svetla",vibrant:"ivahna",white:"bela",yellow:"rumena","yellow green":"rumeno zelena"};var Fne={};Fne={alpha:"Alfa",black:"crno",blue:"Plava","blue purple":"plavoljubiasta",brightness:"Osvetljenost",brown:"smea","brown yellow":"smeeuta",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cijan","cyan blue":"cijan plava",dark:"tamno",gray:"siva",grayish:"sivkasta",green:"Zelena","green cyan":"zeleno cijan",hue:"Nijansa",light:"svetla",lightness:"Osvetljenje",magenta:"purpurnocrvena","magenta pink":"magenta ruiasta",orange:"narandasta","orange yellow":"narandastouta",pale:"bledo",pink:"ruiasta","pink red":"ruiastocrvena",purple:"ljubiasta","purple magenta":"ljubiasta magenta",red:"Crvena","red orange":"crvenonarandasta",saturation:"Zasienje",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} prozirna`,"very dark":"veoma tamno","very light":"vrlo svetlo",vibrant:"ivopisna",white:"bela",yellow:"uto","yellow green":"utozelena"};var jne={};jne={alpha:"Alfa",black:"svart",blue:"Bltt","blue purple":"bllila",brightness:"Ljusstyrka",brown:"brun","brown yellow":"brungul",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"cyan","cyan blue":"cyanbl",dark:"mrk",gray:"gr",grayish:"graktig",green:"Grnt","green cyan":"grn cyan",hue:"Nyans",light:"ljus",lightness:"Ljushet",magenta:"magenta","magenta pink":"magentarosa",orange:"orange","orange yellow":"orangegul",pale:"blek",pink:"rosa","pink red":"rosard",purple:"lila","purple magenta":"lila magenta",red:"Rtt","red orange":"rdorange",saturation:"Mttnad",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} genomskinlig`,"very dark":"mycket mrk","very light":"mycket ljus",vibrant:"livfull",white:"vit",yellow:"gul","yellow green":"gulgrn"};var One={};One={alpha:"Alfa",black:"siyah",blue:"Mavi","blue purple":"mavi mor",brightness:"Parlaklk",brown:"kahverengi","brown yellow":"kahverengi sar",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"camgbei","cyan blue":"camgbei mavi",dark:"koyu",gray:"gri",grayish:"grimsi",green:"Yeil","green cyan":"yeil camgbei",hue:"Ton",light:"ak",lightness:"Canllk",magenta:"eflatun","magenta pink":"eflatun pembe",orange:"turuncu","orange yellow":"turuncu sar",pale:"solgun",pink:"pembe","pink red":"pembe krmz",purple:"mor","purple magenta":"mor eflatun",red:"Krmz","red orange":"krmz portakal",saturation:"Doygunluk",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} saydam`,"very dark":"ok koyu","very light":"ok ak",vibrant:"canl",white:"beyaz",yellow:"sar","yellow green":"sar yeil"};var zne={};zne={alpha:"",black:"",blue:"","blue purple":"-",brightness:"",brown:"","brown yellow":"-",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"","cyan blue":"-",dark:"",gray:"",grayish:"",green:"","green cyan":"-",hue:"",light:"",lightness:"",magenta:"","magenta pink":"-",orange:"","orange yellow":"-",pale:"",pink:"","pink red":"-",purple:"","purple magenta":"-",red:"","red orange":"-",saturation:"",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue},   ${t.percentTransparent}`,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":"-"};var $ne={};$ne={alpha:"Alpha",black:"",blue:"","blue purple":"",brightness:"",brown:"","brown yellow":"",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"","cyan blue":"",dark:"",gray:"",grayish:"",green:"","green cyan":"",hue:"",light:"",lightness:"",magenta:"","magenta pink":"",orange:"","orange yellow":"",pale:"",pink:"","pink red":"",purple:"","purple magenta":"",red:"","red orange":"",saturation:"",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} `,"very dark":"","very light":"",vibrant:"",white:"",yellow:"","yellow green":"/"};var Qne={};Qne={alpha:"Alpha",black:"",blue:"","blue purple":"",brightness:"",brown:"","brown yellow":"",colorName:t=>`${t.lightness} ${t.chroma} ${t.hue}`,cyan:"","cyan blue":"",dark:"",gray:"",grayish:"",green:"","green cyan":"",hue:"",light:"",lightness:"",magenta:"","magenta pink":"",orange:"","orange yellow":"",pale:"",pink:"","pink red":"",purple:"","purple magenta":"",red:"","red orange":"",saturation:"",transparentColorName:t=>`${t.lightness} ${t.chroma} ${t.hue}, ${t.percentTransparent} `,"very dark":"","very light":"",vibrant:"",white:"",yellow:"","yellow green":""};var Une={};Une={"ar-AE":cne,"bg-BG":une,"cs-CZ":dne,"da-DK":hne,"de-DE":fne,"el-GR":pne,"en-US":gne,"es-ES":mne,"et-EE":Ane,"fi-FI":yne,"fr-FR":vne,"he-IL":xne,"hr-HR":bne,"hu-HU":Cne,"it-IT":Ene,"ja-JP":Sne,"ko-KR":wne,"lt-LT":_ne,"lv-LV":Ine,"nb-NO":Bne,"nl-NL":Tne,"pl-PL":Mne,"pt-BR":Dne,"pt-PT":Rne,"ro-RO":Pne,"ru-RU":kne,"sk-SK":Nne,"sl-SI":Lne,"sr-SP":Fne,"sv-SE":jne,"tr-TR":One,"uk-UA":zne,"zh-CN":$ne,"zh-TW":Qne};function V2e(t){return t&&t.__esModule?t.default:t}let kR=new By(V2e(Une));function cd(t){let e=Ty.parse(t)||My.parse(t)||Dy.parse(t);if(e)return e;throw new Error("Invalid color value: "+t)}function U1(t){return typeof t=="string"?cd(t):t}function Hne(t){return t===360?t:(t%360+360)%360}const l7=.68,W2e=.85,c7=.55,u7=.001,NR=[[0,"pink"],[15,"red"],[48,"orange"],[94,"yellow"],[135,"green"],[175,"cyan"],[264,"blue"],[284,"purple"],[320,"magenta"],[349,"pink"]];class wF{toHexInt(){return this.toFormat("rgb").toHexInt()}getChannelValue(e){if(e in this)return this[e];throw new Error("Unsupported color channel: "+e)}withChannelValue(e,n){if(e in this){let r=this.clone();return r[e]=n,r}throw new Error("Unsupported color channel: "+e)}getChannelName(e,n){return(By.getGlobalDictionaryForPackage("@react-stately/color")||kR).getStringForLocale(e,n)}getColorSpaceAxes(e){let{xChannel:n,yChannel:r}=e,i=n||this.getColorChannels().find(o=>o!==r),s=r||this.getColorChannels().find(o=>o!==i),a=this.getColorChannels().find(o=>o!==i&&o!==s);return{xChannel:i,yChannel:s,zChannel:a}}getColorName(e){let[n,r,i]=d7(this),s=By.getGlobalDictionaryForPackage("@react-stately/color")||kR;if(n>.999)return s.getStringForLocale("white",e);if(n<.001)return s.getStringForLocale("black",e);let a;[a,n]=this.getOklchHue(n,r,i,e);let o="",l="";r<=.1&&r>=u7?n>=.7?l="pale":l="grayish":r>=.15&&(l="vibrant"),n<.3?o="very dark":n<c7?o="dark":n<.7||(n<.85?o="light":o="very light"),l&&(l=s.getStringForLocale(l,e)),o&&(o=s.getStringForLocale(o,e));let c=this.getChannelValue("alpha"),u=new $J(e,s);if(c<1){let h=new jy(e,{style:"percent"}).format(1-c);return u.format("transparentColorName",{lightness:o,chroma:l,hue:a,percentTransparent:h}).replace(/\s+/g," ").trim()}else return u.format("colorName",{lightness:o,chroma:l,hue:a}).replace(/\s+/g," ").trim()}getOklchHue(e,n,r,i){let s=By.getGlobalDictionaryForPackage("@react-stately/color")||kR;if(n<u7)return[s.getStringForLocale("gray",i),e];for(let a=0;a<NR.length;a++){let[o,l]=NR[a],[c,u]=NR[a+1]||[360,"pink"];if(r>=o&&r<c)return l==="orange"&&(e<l7?l="brown":e=e-l7+c7),r>o+(c-o)/2&&l!==u?l=`${l} ${u}`:l==="yellow"&&e<W2e&&(l="yellow green"),[s.getStringForLocale(l,i).toLocaleLowerCase(i),e]}throw new Error("Unexpected hue")}getHueName(e){let[n,r,i]=d7(this),[s]=this.getOklchHue(n,r,i,e);return s}}class Ty extends wF{static parse(e){let n=[];if(/^#[\da-f]+$/i.test(e)&&[4,5,7,9].includes(e.length)){const s=(e.length<6?e.replace(/[^#]/gi,"$&$&"):e).slice(1).split("");for(;s.length>0;)n.push(parseInt(s.splice(0,2).join(""),16));n[3]=n[3]!==void 0?n[3]/255:void 0}const r=e.match(/^rgba?\((.*)\)$/);if(r?.[1]&&(n=r[1].split(",").map(s=>Number(s.trim())),n=n.map((s,a)=>Bl(s??0,0,a<3?255:1))),!(n[0]===void 0||n[1]===void 0||n[2]===void 0)){var i;return n.length<3?void 0:new Ty(n[0],n[1],n[2],(i=n[3])!==null&&i!==void 0?i:1)}}toString(e="css"){switch(e){case"hex":return"#"+(this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")).toUpperCase();case"hexa":return"#"+(this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")+Math.round(this.alpha*255).toString(16).padStart(2,"0")).toUpperCase();case"rgb":return`rgb(${this.red}, ${this.green}, ${this.blue})`;case"css":case"rgba":return`rgba(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`;default:return this.toFormat(e).toString(e)}}toFormat(e){switch(e){case"hex":case"hexa":case"rgb":case"rgba":return this;case"hsb":case"hsba":return this.toHSB();case"hsl":case"hsla":return this.toHSL();default:throw new Error("Unsupported color conversion: rgb -> "+e)}}toHexInt(){return this.red<<16|this.green<<8|this.blue}toHSB(){const e=this.red/255,n=this.green/255,r=this.blue/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=s-i,o=s===0?0:a/s;let l=0;if(a!==0){switch(s){case e:l=(n-r)/a+(n<r?6:0);break;case n:l=(r-e)/a+2;break;case r:l=(e-n)/a+4;break}l/=6}return new My(Ro(l*360,2),Ro(o*100,2),Ro(s*100,2),this.alpha)}toHSL(){const e=this.red/255,n=this.green/255,r=this.blue/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=(s+i)/2,o=s-i;let l,c;if(o===0)l=c=0;else{switch(c=o/(a<.5?s+i:2-s-i),s){case e:l=(n-r)/o+(n<r?6:0);break;case n:l=(r-e)/o+2;break;case r:default:l=(e-n)/o+4;break}l/=6}return new Dy(Ro(l*360,2),Ro(c*100,2),Ro(a*100,2),this.alpha)}clone(){return new Ty(this.red,this.green,this.blue,this.alpha)}getChannelRange(e){switch(e){case"red":case"green":case"blue":return{minValue:0,maxValue:255,step:1,pageSize:17};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+e)}}getChannelFormatOptions(e){switch(e){case"red":case"green":case"blue":return{style:"decimal"};case"alpha":return{style:"percent"};default:throw new Error("Unknown color channel: "+e)}}formatChannelValue(e,n){let r=this.getChannelFormatOptions(e),i=this.getChannelValue(e);return new jy(n,r).format(i)}getColorSpace(){return"rgb"}getColorChannels(){return Ty.colorChannels}constructor(e,n,r,i){super(),this.red=e,this.green=n,this.blue=r,this.alpha=i}}Ty.colorChannels=["red","green","blue"];const K2e=/hsb\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsba\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/;class My extends wF{static parse(e){let n;if(n=e.match(K2e)){var r;const[i,s,a,o]=((r=n[1])!==null&&r!==void 0?r:n[2]).split(",").map(l=>Number(l.trim().replace("%","")));return new My(Hne(i),Bl(s,0,100),Bl(a,0,100),Bl(o??1,0,1))}}toString(e="css"){switch(e){case"css":return this.toHSL().toString("css");case"hex":return this.toRGB().toString("hex");case"hexa":return this.toRGB().toString("hexa");case"hsb":return`hsb(${this.hue}, ${Ro(this.saturation,2)}%, ${Ro(this.brightness,2)}%)`;case"hsba":return`hsba(${this.hue}, ${Ro(this.saturation,2)}%, ${Ro(this.brightness,2)}%, ${this.alpha})`;default:return this.toFormat(e).toString(e)}}toFormat(e){switch(e){case"hsb":case"hsba":return this;case"hsl":case"hsla":return this.toHSL();case"rgb":case"rgba":return this.toRGB();default:throw new Error("Unsupported color conversion: hsb -> "+e)}}toHSL(){let e=this.saturation/100,n=this.brightness/100,r=n*(1-e/2);return e=r===0||r===1?0:(n-r)/Math.min(r,1-r),new Dy(Ro(this.hue,2),Ro(e*100,2),Ro(r*100,2),this.alpha)}toRGB(){let e=this.hue,n=this.saturation/100,r=this.brightness/100,i=(s,a=(s+e/60)%6)=>r-n*r*Math.max(Math.min(a,4-a,1),0);return new Ty(Math.round(i(5)*255),Math.round(i(3)*255),Math.round(i(1)*255),this.alpha)}clone(){return new My(this.hue,this.saturation,this.brightness,this.alpha)}getChannelRange(e){switch(e){case"hue":return{minValue:0,maxValue:360,step:1,pageSize:15};case"saturation":case"brightness":return{minValue:0,maxValue:100,step:1,pageSize:10};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+e)}}getChannelFormatOptions(e){switch(e){case"hue":return{style:"unit",unit:"degree",unitDisplay:"narrow"};case"saturation":case"brightness":case"alpha":return{style:"percent"};default:throw new Error("Unknown color channel: "+e)}}formatChannelValue(e,n){let r=this.getChannelFormatOptions(e),i=this.getChannelValue(e);return(e==="saturation"||e==="brightness")&&(i/=100),new jy(n,r).format(i)}getColorSpace(){return"hsb"}getColorChannels(){return My.colorChannels}constructor(e,n,r,i){super(),this.hue=e,this.saturation=n,this.brightness=r,this.alpha=i}}My.colorChannels=["hue","saturation","brightness"];const q2e=/hsl\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsla\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/;class Dy extends wF{static parse(e){let n;if(n=e.match(q2e)){var r;const[i,s,a,o]=((r=n[1])!==null&&r!==void 0?r:n[2]).split(",").map(l=>Number(l.trim().replace("%","")));return new Dy(Hne(i),Bl(s,0,100),Bl(a,0,100),Bl(o??1,0,1))}}toString(e="css"){switch(e){case"hex":return this.toRGB().toString("hex");case"hexa":return this.toRGB().toString("hexa");case"hsl":return`hsl(${this.hue}, ${Ro(this.saturation,2)}%, ${Ro(this.lightness,2)}%)`;case"css":case"hsla":return`hsla(${this.hue}, ${Ro(this.saturation,2)}%, ${Ro(this.lightness,2)}%, ${this.alpha})`;default:return this.toFormat(e).toString(e)}}toFormat(e){switch(e){case"hsl":case"hsla":return this;case"hsb":case"hsba":return this.toHSB();case"rgb":case"rgba":return this.toRGB();default:throw new Error("Unsupported color conversion: hsl -> "+e)}}toHSB(){let e=this.saturation/100,n=this.lightness/100,r=n+e*Math.min(n,1-n);return e=r===0?0:2*(1-n/r),new My(Ro(this.hue,2),Ro(e*100,2),Ro(r*100,2),this.alpha)}toRGB(){let e=this.hue,n=this.saturation/100,r=this.lightness/100,i=n*Math.min(r,1-r),s=(a,o=(a+e/30)%12)=>r-i*Math.max(Math.min(o-3,9-o,1),-1);return new Ty(Math.round(s(0)*255),Math.round(s(8)*255),Math.round(s(4)*255),this.alpha)}clone(){return new Dy(this.hue,this.saturation,this.lightness,this.alpha)}getChannelRange(e){switch(e){case"hue":return{minValue:0,maxValue:360,step:1,pageSize:15};case"saturation":case"lightness":return{minValue:0,maxValue:100,step:1,pageSize:10};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+e)}}getChannelFormatOptions(e){switch(e){case"hue":return{style:"unit",unit:"degree",unitDisplay:"narrow"};case"saturation":case"lightness":case"alpha":return{style:"percent"};default:throw new Error("Unknown color channel: "+e)}}formatChannelValue(e,n){let r=this.getChannelFormatOptions(e),i=this.getChannelValue(e);return(e==="saturation"||e==="lightness")&&(i/=100),new jy(n,r).format(i)}getColorSpace(){return"hsl"}getColorChannels(){return Dy.colorChannels}constructor(e,n,r,i){super(),this.hue=e,this.saturation=n,this.lightness=r,this.alpha=i}}Dy.colorChannels=["hue","saturation","lightness"];function d7(t){let e=t.toFormat("rgb"),n=e.getChannelValue("red")/255,r=e.getChannelValue("green")/255,i=e.getChannelValue("blue")/255;[n,r,i]=X2e(n,r,i);let[s,a,o]=J2e(n,r,i),[l,c,u]=Z2e(s,a,o);return Y2e(l,c,u)}function Y2e(t,e,n){var r=Math.atan2(n,e)*180/Math.PI;return[t,Math.sqrt(e**2+n**2),r>=0?r:r+360]}function X2e(t,e,n){return[LR(t),LR(e),LR(n)]}function LR(t){let e=t<0?-1:1,n=Math.abs(t);return n<=.04045?t/12.92:e*Math.pow((n+.055)/1.055,2.4)}function J2e(t,e,n){return uL([.4123907992659595,.35758433938387796,.1804807884018343,.21263900587151036,.7151686787677559,.07219231536073371,.01933081871559185,.11919477979462599,.9505321522496606],t,e,n)}function Z2e(t,e,n){const r=[.819022437996703,.3619062600528904,-.1288737815209879,.0329836539323885,.9292868615863434,.0361446663506424,.0481771893596242,.2642395317527308,.6335478284694309],i=[.210454268309314,.7936177747023054,-.0040720430116193,1.9779985324311684,-2.42859224204858,.450593709617411,.0259040424655478,.7827717124575296,-.8086757549230774];let[s,a,o]=uL(r,t,e,n);return uL(i,Math.cbrt(s),Math.cbrt(a),Math.cbrt(o))}function uL(t,e,n,r){let i=t[0]*e+t[1]*n+t[2]*r,s=t[3]*e+t[4]*n+t[5]*r,a=t[6]*e+t[7]*n+t[8]*r;return[i,s,a]}const eBe=cd("#ffffff");function tBe(t){let{value:e,defaultValue:n,colorSpace:r,xChannel:i,yChannel:s,onChange:a,onChangeEnd:o}=t;!e&&!n&&(n=eBe),e&&(e=U1(e)),n&&(n=U1(n));let[l,c]=Zl(e,n,a),[u]=C.useState(l),h=C.useMemo(()=>r&&l?l.toFormat(r):l,[l,r]),f=C.useRef(h),p=O=>{f.current=O,c(O)},m=C.useMemo(()=>h.getColorSpaceAxes({xChannel:i,yChannel:s}),[h,i,s]),v=h.getChannelRange(m.xChannel),A=h.getChannelRange(m.yChannel),{minValue:x,maxValue:E,step:w,pageSize:B}=v,{minValue:D,maxValue:T,step:M,pageSize:R}=A,[k,L]=C.useState(!1),F=C.useRef(!1),z=h.getChannelValue(m.xChannel),G=h.getChannelValue(m.yChannel),V=O=>{if(O===z)return;let H=h.withChannelValue(m.xChannel,O);p(H)},q=O=>{if(O===G)return;let H=h.withChannelValue(m.yChannel,O);p(H)};return{channels:m,xChannelStep:w,yChannelStep:M,xChannelPageStep:B,yChannelPageStep:R,value:h,defaultValue:e!==void 0?u:n,setValue(O){p(U1(O))},xValue:z,setXValue:V,yValue:G,setYValue:q,setColorFromPoint(O,H){let K=x+Bl(O,0,1)*(E-x),X=D+(1-Bl(H,0,1))*(T-D),re;K!==z&&(K=Do(K,x,E,w),re=h.withChannelValue(m.xChannel,K)),X!==G&&(X=Do(X,D,T,M),re=(re||h).withChannelValue(m.yChannel,X)),re&&p(re)},getThumbPosition(){let O=(z-x)/(E-x),H=1-(G-D)/(T-D);return{x:O,y:H}},incrementX(O=1){V(z+O>E?E:Do(z+O,x,E,w))},incrementY(O=1){q(G+O>T?T:Do(G+O,D,T,M))},decrementX(O=1){V(Do(z-O,x,E,w))},decrementY(O=1){q(Do(G-O,D,T,M))},setDragging(O){let H=F.current;F.current=O,o&&!O&&H&&o(f.current),L(O)},isDragging:k,getDisplayColor(){return h.withChannelValue("alpha",1)}}}const nBe=0,rBe=100,iBe=1;function Gne(t){const{isDisabled:e=!1,minValue:n=nBe,maxValue:r=rBe,numberFormatter:i,step:s=iBe,orientation:a="horizontal"}=t;let o=C.useMemo(()=>{let Z=(r-n)/10;return Z=Do(Z,0,Z+s,s),Math.max(Z,s)},[s,r,n]),l=C.useCallback(Z=>Z?.map((ee,te)=>{let oe=te===0?n:Z[te-1],ae=te===Z.length-1?r:Z[te+1];return Do(ee,oe,ae,s)}),[n,r,s]),c=C.useMemo(()=>l(f7(t.value)),[t.value,l]),u=C.useMemo(()=>{var Z;return l((Z=f7(t.defaultValue))!==null&&Z!==void 0?Z:[n])},[t.defaultValue,n,l]),h=p7(t.value,t.defaultValue,t.onChange),f=p7(t.value,t.defaultValue,t.onChangeEnd);const[p,m]=Zl(c,u,h);let[v]=C.useState(p);const[A,x]=C.useState(new Array(p.length).fill(!1)),E=C.useRef(new Array(p.length).fill(!0)),[w,B]=C.useState(void 0),D=C.useRef(p),T=C.useRef(A);let M=Z=>{D.current=Z,m(Z)},R=Z=>{T.current=Z,x(Z)};function k(Z){return(Z-n)/(r-n)}function L(Z){return Z===0?n:p[Z-1]}function F(Z){return Z===p.length-1?r:p[Z+1]}function z(Z){return E.current[Z]}function G(Z,ee){E.current[Z]=ee}function V(Z,ee){if(e||!z(Z))return;const te=L(Z),oe=F(Z);ee=Do(ee,te,oe,s);let ae=h7(D.current,Z,ee);M(ae)}function q(Z,ee){if(e||!z(Z))return;ee&&(D.current=p);const te=T.current[Z];T.current=h7(T.current,Z,ee),R(T.current),f&&te&&!T.current.some(Boolean)&&f(D.current)}function O(Z){return i.format(Z)}function H(Z,ee){V(Z,X(ee))}function K(Z){return Math.round((Z-n)/s)*s+n}function X(Z){const ee=Z*(r-n)+n;return Bl(K(ee),n,r)}function re(Z,ee=1){let te=Math.max(ee,s);V(Z,Do(p[Z]+te,n,r,s))}function J(Z,ee=1){let te=Math.max(ee,s);V(Z,Do(p[Z]-te,n,r,s))}return{values:p,defaultValues:t.defaultValue!==void 0?u:v,getThumbValue:Z=>p[Z],setThumbValue:V,setThumbPercent:H,isThumbDragging:Z=>A[Z],setThumbDragging:q,focusedThumb:w,setFocusedThumb:B,getThumbPercent:Z=>k(p[Z]),getValuePercent:k,getThumbValueLabel:Z=>O(p[Z]),getFormattedValue:O,getThumbMinValue:L,getThumbMaxValue:F,getPercentValue:X,isThumbEditable:z,setThumbEditable:G,incrementThumb:re,decrementThumb:J,step:s,pageSize:o,orientation:a,isDisabled:e}}function h7(t,e,n){return t[e]===n?t:[...t.slice(0,e),n,...t.slice(e+1)]}function f7(t){if(t!=null)return Array.isArray(t)?t:[t]}function p7(t,e,n){return r=>{n?.(typeof t=="number"||typeof e=="number"?r[0]:r)}}function sBe(t){let{channel:e,colorSpace:n,value:r,defaultValue:i,onChange:s,locale:a,...o}=t;if(r==null&&i==null)throw new Error("useColorSliderState requires a value or defaultValue");r&&(r=U1(r)),i&&(i=U1(i));let[l,c]=Zl(r,i,s),u=C.useMemo(()=>n&&l?l.toFormat(n):l,[l,n]),[h]=C.useState(l),f=i??h,p=C.useMemo(()=>n&&f?f.toFormat(n):f,[f,n]),m=Gne({...u.getChannelRange(e),...o,numberFormatter:null,value:u.getChannelValue(e),defaultValue:p.getChannelValue(e),onChange(x){c(u.withChannelValue(e,x))},onChangeEnd(x){t.onChangeEnd&&t.onChangeEnd(u.withChannelValue(e,x))}}),{step:v,pageSize:A}=u.getChannelRange(e);return{...m,value:u,setValue(x){c(U1(x))},getDisplayColor(){switch(e){case"hue":return cd(`hsl(${u.getChannelValue("hue")}, 100%, 50%)`);case"lightness":case"brightness":case"saturation":case"red":case"green":case"blue":return u.withChannelValue("alpha",1);case"alpha":return u;default:throw new Error("Unknown color channel: "+e)}},getThumbValueLabel(){return u.formatChannelValue(e,a)},step:v,pageSize:A,isDragging:m.isThumbDragging(0)}}function Sb(t){return C.useMemo(()=>{if(typeof t=="string")try{return cd(t)}catch{return}return t},[t])}const jT=cd("#000000"),Vne=cd("#FFFFFF"),aBe=jT.toHexInt(),oBe=Vne.toHexInt();function lBe(t){let{value:e,defaultValue:n,onChange:r}=t,{step:i}=jT.getChannelRange("red"),s=Sb(n),[a,o]=Zl(Sb(e),s,r),[l]=C.useState(a),[c,u]=C.useState(()=>(e||n)&&a?a.toString("hex"):""),h=Ky({...t,value:a}),f=T=>{if(!a||!T){o(T);return}if(T.toHexInt()!==a.toHexInt()){o(T);return}},[p,m]=C.useState(a);p!==a&&(u(a?a.toString("hex"):""),m(a));let v=C.useMemo(()=>{let T;try{T=cd(c.startsWith("#")?c:`#${c}`)}catch{T=null}return T},[c]);return{...h,validate:T=>{var M;return T===""||!!(!((M=T.match(/^#?[0-9a-f]{0,6}$/i))===null||M===void 0)&&M[0])},colorValue:a,defaultColorValue:s??l,setColorValue:o,inputValue:c,setInputValue:u,commit:()=>{if(!c.length){f(null),u(e===void 0||a===null?"":a.toString("hex"));return}if(v==null){u(a?a.toString("hex"):"");return}f(v);let T="";a&&(T=a.toString("hex")),u(T),h.commitValidation()},increment:()=>{let T=g7(v,i);T===a&&u(T.toString("hex")),f(T),h.commitValidation()},incrementToMax:()=>f(Vne),decrement:()=>{let T=g7(v,-i);T===a&&u(T.toString("hex")),f(T),h.commitValidation()},decrementToMin:()=>f(jT)}}function g7(t,e){let n=t||jT,r=n.toHexInt(),i=Math.min(Math.max(r+e,aBe),oBe);if(i!==r){let s=`#${i.toString(16).padStart(6,"0").toUpperCase()}`;n=cd(s)}return n}function Wne(t){let{minValue:e,maxValue:n,step:r,formatOptions:i,value:s,defaultValue:a=NaN,onChange:o,locale:l,isDisabled:c,isReadOnly:u}=t;s===null&&(s=NaN),s!==void 0&&!isNaN(s)&&(r!==void 0&&!isNaN(r)?s=Do(s,e,n,r):s=Bl(s,e,n)),isNaN(a)||(r!==void 0&&!isNaN(r)?a=Do(a,e,n,r):a=Bl(a,e,n));let[h,f]=Zl(s,isNaN(a)?NaN:a,o),[p]=C.useState(h),[m,v]=C.useState(()=>isNaN(h)?"":new jy(l,i).format(h)),A=C.useMemo(()=>new UJ(l,i),[l,i]),x=C.useMemo(()=>A.getNumberingSystem(m),[A,m]),E=C.useMemo(()=>new jy(l,{...i,numberingSystem:x}),[l,i,x]),w=C.useMemo(()=>E.resolvedOptions(),[E]),B=C.useCallback(ee=>isNaN(ee)||ee===null?"":E.format(ee),[E]),D=Ky({...t,value:h}),T=r!==void 0&&!isNaN(r)?r:1;w.style==="percent"&&(r===void 0||isNaN(r))&&(T=.01);let[M,R]=C.useState(h),[k,L]=C.useState(l),[F,z]=C.useState(i);(!Object.is(h,M)||l!==k||i!==F)&&(v(B(h)),R(h),L(l),z(i));let G=C.useMemo(()=>A.parse(m),[A,m]),V=()=>{if(!m.length){f(NaN),v(s===void 0?"":B(h));return}if(isNaN(G)){v(B(h));return}let ee;r===void 0||isNaN(r)?ee=Bl(G,e,n):ee=Do(G,e,n,r),ee=A.parse(B(ee)),f(ee),v(B(s===void 0?ee:h)),D.commitValidation()},q=(ee,te=0)=>{let oe=G;if(isNaN(oe)){let ae=isNaN(te)?0:te;return Do(ae,e,n,T)}else{let ae=Do(oe,e,n,T);return ee==="+"&&ae>oe||ee==="-"&&ae<oe?ae:Do(FR(ee,oe,T),e,n,T)}},O=()=>{let ee=q("+",e);ee===h&&v(B(ee)),f(ee),D.commitValidation()},H=()=>{let ee=q("-",n);ee===h&&v(B(ee)),f(ee),D.commitValidation()},K=()=>{n!=null&&(f(Do(n,e,n,T)),D.commitValidation())},X=()=>{e!=null&&(f(e),D.commitValidation())},re=C.useMemo(()=>!c&&!u&&(isNaN(G)||n===void 0||isNaN(n)||Do(G,e,n,T)>G||FR("+",G,T)<=n),[c,u,e,n,T,G]),J=C.useMemo(()=>!c&&!u&&(isNaN(G)||e===void 0||isNaN(e)||Do(G,e,n,T)<G||FR("-",G,T)>=e),[c,u,e,n,T,G]);return{...D,validate:ee=>A.isValidPartialNumber(ee,e,n),increment:O,incrementToMax:K,decrement:H,decrementToMin:X,canIncrement:re,canDecrement:J,minValue:e,maxValue:n,numberValue:G,defaultNumberValue:isNaN(a)?p:a,setNumberValue:f,setInputValue:v,inputValue:m,commit:V}}function FR(t,e,n){let r=t==="+"?e+n:e-n;if(e%1!==0||n%1!==0){const i=e.toString().split("."),s=n.toString().split("."),a=i[1]&&i[1].length||0,o=s[1]&&s[1].length||0,l=Math.pow(10,Math.max(a,o));e=Math.round(e*l),n=Math.round(n*l),r=t==="+"?e+n:e-n,r/=l}return r}function cBe(t){let{channel:e,colorSpace:n,locale:r}=t,i=Sb(t.value),s=Sb(t.defaultValue),[a,o]=Zl(i,s??null,t.onChange),l=m7(a,n),[c]=C.useState(a),u=s??c,h=m7(u,n),f=l.getChannelValue(e),p=l.getChannelRange(e),m=C.useMemo(()=>l.getChannelFormatOptions(e),[l,e]),v=m.style==="percent"&&p.maxValue===100?100:1;return{...Wne({locale:r,value:a===null?NaN:f/v,defaultValue:u===null?NaN:h.getChannelValue(e)/v,onChange:x=>{Number.isNaN(x)?o(null):o(l.withChannelValue(e,x*v))},minValue:p.minValue/v,maxValue:p.maxValue/v,step:p.step/v,formatOptions:m}),colorValue:l,defaultColorValue:u,setColorValue:o}}function m7(t,e){let n=Sb("#000");return C.useMemo(()=>{let r=t||n;return e&&r?r.toFormat(e):r},[n,t,e])}function Kne(t){let e=Sb(t.value),n=Sb(t.defaultValue||"#000000"),[r,i]=Zl(e||void 0,n,t.onChange);return{color:r,setColor(s){s!=null&&i(s||cd("#000000"))}}}const qne=t=>[0,60,120,180,240,300,360].map(e=>t.withChannelValue("hue",e).toString("css")).join(", "),Yne=t=>`${t.withChannelValue("saturation",0)}, transparent`,uBe={hue:qne,saturation:Yne,lightness:()=>"black, transparent, white"},dBe={hue:qne,saturation:Yne,brightness:()=>"black, transparent"};function hBe({direction:t,state:e,zChannel:n,xChannel:r,yChannel:i}){return C.useMemo(()=>{let a=t==="rtl"?"left":"right",o={},l=e.value.getChannelValue(n);switch(e.value.getColorSpace()){case"rgb":{let f=cd("rgb(0, 0, 0)");o={background:[`linear-gradient(to ${a}, ${f.withChannelValue(r,0)}, ${f.withChannelValue(r,255)})`,`linear-gradient(to top, ${f.withChannelValue(i,0)}, ${f.withChannelValue(i,255)})`,f.withChannelValue(n,l)].join(","),backgroundBlendMode:"screen"};break}case"hsl":{let f=e.value.getColorChannels(),p=cd("hsl(0, 100%, 50%)").withChannelValue(n,l),m=f.filter(v=>v!==n).map(v=>`linear-gradient(to ${v===r?a:"top"}, ${uBe[v](p)})`).reverse();n==="hue"&&m.push(p.toString("css")),o={background:m.join(", ")};break}case"hsb":{let f=e.value.getColorChannels(),p=cd("hsb(0, 100%, 100%)").withChannelValue(n,l),m=f.filter(v=>v!==n).map(v=>`linear-gradient(to ${v===r?a:"top"}, ${dBe[v](p)})`).reverse();n==="hue"&&m.push(p.toString("css")),o={background:m.join(", ")};break}}let{x:c,y:u}=e.getThumbPosition();t==="rtl"&&(c=1-c);let h={forcedColorAdjust:"none"};return{colorAreaStyleProps:{style:{position:"relative",touchAction:"none",...h,...o}},thumbStyleProps:{style:{position:"absolute",left:`${c*100}%`,top:`${u*100}%`,transform:"translate(-50%, -50%)",touchAction:"none",...h}}}},[t,e,n,r,i])}function fBe(t){return t&&t.__esModule?t.default:t}function pBe(t,e){let{isDisabled:n,inputXRef:r,inputYRef:i,containerRef:s,"aria-label":a,xName:o,yName:l,form:c}=t,u=Yg(fBe(SF),"@react-aria/color"),{addGlobalListener:h,removeGlobalListener:f}=z0(),{direction:p,locale:m}=so(),[v,A]=C.useState(null),x=C.useCallback((Ie=r)=>{Ie.current&&th(Ie.current)},[r]);Gy(r,e.defaultValue,e.setValue);let[E,w]=C.useState(!1),[B,D]=C.useState(!1),{xChannel:T,yChannel:M,zChannel:R}=e.channels,k=e.xChannelStep,L=e.yChannelStep,F=C.useRef(null),{keyboardProps:z}=mF({onKeyDown(Ie){if(!/^(PageUp|PageDown|Home|End)$/.test(Ie.key)){Ie.continuePropagation();return}Ie.preventDefault(),e.setDragging(!0),w(!0);let ht;switch(Ie.key){case"PageUp":e.incrementY(e.yChannelPageStep),ht="y";break;case"PageDown":e.decrementY(e.yChannelPageStep),ht="y";break;case"Home":p==="rtl"?e.incrementX(e.xChannelPageStep):e.decrementX(e.xChannelPageStep),ht="x";break;case"End":p==="rtl"?e.decrementX(e.xChannelPageStep):e.incrementX(e.xChannelPageStep),ht="x";break}e.setDragging(!1),ht&&(x(ht==="x"?r:i),A(ht))}}),G={onMoveStart(){F.current=null,e.setDragging(!0)},onMove({deltaX:Ie,deltaY:ht,pointerType:Ue,shiftKey:xt}){var ve;let{incrementX:ue,decrementX:ke,incrementY:He,decrementY:Qe,xChannelPageStep:Ke,xChannelStep:jt,yChannelPageStep:St,yChannelStep:Zt,getThumbPosition:Bt,setColorFromPoint:at}=e;F.current==null&&(F.current=Bt());let{width:pt,height:Vt}=((ve=s.current)===null||ve===void 0?void 0:ve.getBoundingClientRect())||{width:0,height:0},qt=Ie!==0||ht!==0;if(Ue==="keyboard"){let Wt=xt&&Ke>jt?Ke:jt,gn=xt&&St>Zt?St:Zt;Ie>0&&p==="ltr"||Ie<0&&p==="rtl"?ue(Wt):Ie<0&&p==="ltr"||Ie>0&&p==="rtl"?ke(Wt):ht>0?Qe(gn):ht<0&&He(gn),w(qt),v=qt&&Math.abs(ht)>Math.abs(Ie)?"y":"x",A(v)}else F.current.x+=(p==="rtl"?-1:1)*Ie/pt,F.current.y+=ht/Vt,at(F.current.x,F.current.y)},onMoveEnd(){H.current=!1,e.setDragging(!1),x(v==="x"?r:i)}},{moveProps:V}=NT(G),{focusWithinProps:q}=Wy({onFocusWithinChange:Ie=>{Ie||(w(!1),D(!1))}}),O=C.useRef(void 0),H=C.useRef(!1),{moveProps:K}=NT({onMoveStart(){H.current&&G.onMoveStart()},onMove(Ie){H.current&&G.onMove(Ie)},onMoveEnd(){H.current&&G.onMoveEnd()}}),X=Ie=>{e.isDragging||(O.current=Ie,w(!1),x(),e.setDragging(!0),typeof PointerEvent<"u"?h(window,"pointerup",re,!1):(h(window,"mouseup",re,!1),h(window,"touchend",re,!1)))},re=Ie=>{var ht,Ue;((Ue=Ie.pointerId)!==null&&Ue!==void 0?Ue:(ht=Ie.changedTouches)===null||ht===void 0?void 0:ht[0].identifier)===O.current&&(w(!1),x(),e.setDragging(!1),O.current=void 0,H.current=!1,typeof PointerEvent<"u"?f(window,"pointerup",re,!1):(f(window,"mouseup",re,!1),f(window,"touchend",re,!1)))},J=(Ie,ht,Ue,xt)=>{let ve=Ie.getBoundingClientRect(),{width:ue,height:ke}=ve,He=(Ue-ve.x)/ue,Qe=(xt-ve.y)/ke;p==="rtl"&&(He=1-He),He>=0&&He<=1&&Qe>=0&&Qe<=1&&!e.isDragging&&O.current===void 0&&(H.current=!0,w(!1),O.current=ht,e.setColorFromPoint(He,Qe),x(),e.setDragging(!0),typeof PointerEvent<"u"?h(window,"pointerup",Z,!1):(h(window,"mouseup",Z,!1),h(window,"touchend",Z,!1)))},Z=Ie=>{var ht,Ue;let xt=(Ue=Ie.pointerId)!==null&&Ue!==void 0?Ue:(ht=Ie.changedTouches)===null||ht===void 0?void 0:ht[0].identifier;H.current&&xt===O.current&&(H.current=!1,w(!1),O.current=void 0,e.setDragging(!1),x(),typeof PointerEvent<"u"?f(window,"pointerup",Z,!1):(f(window,"mouseup",Z,!1),f(window,"touchend",Z,!1)))},ee=n?{}:an({...typeof PointerEvent<"u"?{onPointerDown:Ie=>{Ie.pointerType==="mouse"&&(Ie.button!==0||Ie.altKey||Ie.ctrlKey||Ie.metaKey)||J(Ie.currentTarget,Ie.pointerId,Ie.clientX,Ie.clientY)}}:{onMouseDown:Ie=>{Ie.button!==0||Ie.altKey||Ie.ctrlKey||Ie.metaKey||J(Ie.currentTarget,void 0,Ie.clientX,Ie.clientY)},onTouchStart:Ie=>{J(Ie.currentTarget,Ie.changedTouches[0].identifier,Ie.changedTouches[0].clientX,Ie.changedTouches[0].clientY)}}},K),te=n?{}:an({...typeof PointerEvent<"u"?{onPointerDown:Ie=>{Ie.pointerType==="mouse"&&(Ie.button!==0||Ie.altKey||Ie.ctrlKey||Ie.metaKey)||X(Ie.pointerId)}}:{onMouseDown:Ie=>{Ie.button!==0||Ie.altKey||Ie.ctrlKey||Ie.metaKey||X(void 0)},onTouchStart:Ie=>{X(Ie.changedTouches[0].identifier)}}},q,z,V),{focusProps:oe}=P_({onFocus:()=>{A("x")}}),{focusProps:ae}=P_({onFocus:()=>{A("y")}});const se=Ie=>{const{target:ht}=Ie;D(!0),ht===r.current?e.setXValue(parseFloat(ht.value)):ht===i.current&&e.setYValue(parseFloat(ht.value))};let fe=zE()||_I(),Ee=e.getDisplayColor();const Be=C.useCallback(Ie=>`${B||E?u.format("colorNameAndValue",{name:Ee.getChannelName(Ie,m),value:Ee.formatChannelValue(Ie,m)}):[u.format("colorNameAndValue",{name:Ee.getChannelName(Ie,m),value:Ee.formatChannelValue(Ie,m)}),u.format("colorNameAndValue",{name:Ee.getChannelName(Ie===M?T:M,m),value:Ee.formatChannelValue(Ie===M?T:M,m)}),u.format("colorNameAndValue",{name:Ee.getChannelName(R,m),value:Ee.formatChannelValue(R,m)})].join(", ")}, ${Ee.getColorName(m)}`,[m,Ee,u,B,E,T,M,R]);let _e=u.format("colorPicker"),Ce=b0({...t,"aria-label":a?u.format("colorInputLabel",{label:a,channelLabel:_e}):_e}),Se=b0({...t,"aria-label":a?u.format("colorInputLabel",{label:a,channelLabel:_e}):_e}),Me=b0({...t,"aria-label":a?`${a}, ${_e}`:void 0},fe?_e:void 0),ce=u.format("twoDimensionalSlider"),{visuallyHiddenProps:$e}=YM({style:{opacity:"0.0001",width:"100%",height:"100%",pointerEvents:"none"}}),{colorAreaStyleProps:qe,thumbStyleProps:ft}=hBe({direction:p,state:e,xChannel:T,yChannel:M,zChannel:R});return{colorAreaProps:{...Me,...ee,...qe,role:"group"},thumbProps:{...te,...ft,role:"presentation"},xInputProps:{...Ce,...$e,...oe,type:"range",min:e.value.getChannelRange(T).minValue,max:e.value.getChannelRange(T).maxValue,step:k,"aria-roledescription":ce,"aria-valuetext":Be(T),"aria-orientation":"horizontal","aria-describedby":t["aria-describedby"],"aria-details":t["aria-details"],disabled:n,value:e.value.getChannelValue(T),name:o,form:c,tabIndex:fe||!v||v==="x"?void 0:-1,"aria-hidden":fe||!v||v==="x"||E?void 0:"true",onChange:se},yInputProps:{...Se,...$e,...ae,type:"range",min:e.value.getChannelRange(M).minValue,max:e.value.getChannelRange(M).maxValue,step:L,"aria-roledescription":ce,"aria-valuetext":Be(M),"aria-orientation":"vertical","aria-describedby":t["aria-describedby"],"aria-details":t["aria-details"],disabled:n,value:e.value.getChannelValue(M),name:l,form:c,tabIndex:fe||v==="y"?void 0:-1,"aria-hidden":fe||v==="y"||E?void 0:"true",onChange:se}}}const _F=new WeakMap;function dL(t,e){let n=_F.get(t);if(!n)throw new Error("Unknown slider state");return`${n.id}-${e}`}function Xne(t,e,n){let{labelProps:r,fieldProps:i}=JM(t),s=t.orientation==="vertical";var a;_F.set(e,{id:(a=r.id)!==null&&a!==void 0?a:i.id,"aria-describedby":t["aria-describedby"],"aria-details":t["aria-details"]});let{direction:o}=so(),{addGlobalListener:l,removeGlobalListener:c}=z0();const u=C.useRef(null),h=o==="rtl",f=C.useRef(null),{moveProps:p}=NT({onMoveStart(){f.current=null},onMove({deltaX:x,deltaY:E}){if(!n.current)return;let{height:w,width:B}=n.current.getBoundingClientRect(),D=s?w:B;f.current==null&&u.current!=null&&(f.current=e.getThumbPercent(u.current)*D);let T=s?E:x;if((s||h)&&(T=-T),f.current+=T,u.current!=null&&n.current){const M=Bl(f.current/D,0,1);e.setThumbPercent(u.current,M)}},onMoveEnd(){u.current!=null&&(e.setThumbDragging(u.current,!1),u.current=null)}});let m=C.useRef(void 0),v=(x,E,w,B)=>{if(n.current&&!t.isDisabled&&e.values.every((D,T)=>!e.isThumbDragging(T))){let{height:D,width:T,top:M,left:R}=n.current.getBoundingClientRect(),k=s?D:T,G=((s?B:w)-(s?M:R))/k;(o==="rtl"||s)&&(G=1-G);let V=e.getPercentValue(G),q,O=e.values.findIndex(H=>V-H<0);if(O===0)q=O;else if(O===-1)q=e.values.length-1;else{let H=e.values[O-1],K=e.values[O];Math.abs(H-V)<Math.abs(K-V)?q=O-1:q=O}q>=0&&e.isThumbEditable(q)?(x.preventDefault(),u.current=q,e.setFocusedThumb(q),m.current=E,e.setThumbDragging(u.current,!0),e.setThumbValue(q,V),l(window,"mouseup",A,!1),l(window,"touchend",A,!1),l(window,"pointerup",A,!1)):u.current=null}},A=x=>{var E,w;((w=x.pointerId)!==null&&w!==void 0?w:(E=x.changedTouches)===null||E===void 0?void 0:E[0].identifier)===m.current&&(u.current!=null&&(e.setThumbDragging(u.current,!1),u.current=null),c(window,"mouseup",A,!1),c(window,"touchend",A,!1),c(window,"pointerup",A,!1))};return"htmlFor"in r&&r.htmlFor&&(delete r.htmlFor,r.onClick=()=>{var x;(x=document.getElementById(dL(e,0)))===null||x===void 0||x.focus(),gF("keyboard")}),{labelProps:r,groupProps:{role:"group",...i},trackProps:an({onMouseDown(x){x.button!==0||x.altKey||x.ctrlKey||x.metaKey||v(x,void 0,x.clientX,x.clientY)},onPointerDown(x){x.pointerType==="mouse"&&(x.button!==0||x.altKey||x.ctrlKey||x.metaKey)||v(x,x.pointerId,x.clientX,x.clientY)},onTouchStart(x){v(x,x.changedTouches[0].identifier,x.changedTouches[0].clientX,x.changedTouches[0].clientY)},style:{position:"relative",touchAction:"none"}},p),outputProps:{htmlFor:e.values.map((x,E)=>dL(e,E)).join(" "),"aria-live":"off"}}}function Jne(t,e){let{index:n=0,isRequired:r,validationState:i,isInvalid:s,trackRef:a,inputRef:o,orientation:l=e.orientation,name:c,form:u}=t,h=t.isDisabled||e.isDisabled,f=l==="vertical",{direction:p}=so(),{addGlobalListener:m,removeGlobalListener:v}=z0(),A=_F.get(e);var x;const{labelProps:E,fieldProps:w}=JM({...t,id:dL(e,n),"aria-labelledby":`${A.id} ${(x=t["aria-labelledby"])!==null&&x!==void 0?x:""}`.trim()}),B=e.values[n],D=C.useCallback(()=>{o.current&&th(o.current)},[o]),T=e.focusedThumb===n;C.useEffect(()=>{T&&D()},[T,D]);let M=p==="rtl",R=C.useRef(null),{keyboardProps:k}=mF({onKeyDown(H){let{getThumbMaxValue:K,getThumbMinValue:X,decrementThumb:re,incrementThumb:J,setThumbValue:Z,setThumbDragging:ee,pageSize:te}=e;if(!/^(PageUp|PageDown|Home|End)$/.test(H.key)){H.continuePropagation();return}switch(H.preventDefault(),ee(n,!0),H.key){case"PageUp":J(n,te);break;case"PageDown":re(n,te);break;case"Home":Z(n,X(n));break;case"End":Z(n,K(n));break}ee(n,!1)}}),{moveProps:L}=NT({onMoveStart(){R.current=null,e.setThumbDragging(n,!0)},onMove({deltaX:H,deltaY:K,pointerType:X,shiftKey:re}){const{getThumbPercent:J,setThumbPercent:Z,decrementThumb:ee,incrementThumb:te,step:oe,pageSize:ae}=e;if(!a.current)return;let{width:se,height:fe}=a.current.getBoundingClientRect(),Ee=f?fe:se;if(R.current==null&&(R.current=J(n)*Ee),X==="keyboard")H>0&&M||H<0&&!M||K>0?ee(n,re?ae:oe):te(n,re?ae:oe);else{let Be=f?K:H;(f||M)&&(Be=-Be),R.current+=Be,Z(n,Bl(R.current/Ee,0,1))}},onMoveEnd(){e.setThumbDragging(n,!1)}});e.setThumbEditable(n,!h);const{focusableProps:F}=QE(an(t,{onFocus:()=>e.setFocusedThumb(n),onBlur:()=>e.setFocusedThumb(void 0)}),o);let z=C.useRef(void 0),G=H=>{D(),z.current=H,e.setThumbDragging(n,!0),m(window,"mouseup",V,!1),m(window,"touchend",V,!1),m(window,"pointerup",V,!1)},V=H=>{var K,X;((X=H.pointerId)!==null&&X!==void 0?X:(K=H.changedTouches)===null||K===void 0?void 0:K[0].identifier)===z.current&&(D(),e.setThumbDragging(n,!1),v(window,"mouseup",V,!1),v(window,"touchend",V,!1),v(window,"pointerup",V,!1))},q=e.getThumbPercent(n);(f||p==="rtl")&&(q=1-q);let O=h?{}:an(k,L,{onMouseDown:H=>{H.button!==0||H.altKey||H.ctrlKey||H.metaKey||G()},onPointerDown:H=>{H.button!==0||H.altKey||H.ctrlKey||H.metaKey||G(H.pointerId)},onTouchStart:H=>{G(H.changedTouches[0].identifier)}});return Gy(o,e.defaultValues[n],H=>{e.setThumbValue(n,H)}),{inputProps:an(F,w,{type:"range",tabIndex:h?void 0:0,min:e.getThumbMinValue(n),max:e.getThumbMaxValue(n),step:e.step,value:B,name:c,form:u,disabled:h,"aria-orientation":l,"aria-valuetext":e.getThumbValueLabel(n),"aria-required":r||void 0,"aria-invalid":s||i==="invalid"||void 0,"aria-errormessage":t["aria-errormessage"],"aria-describedby":[A["aria-describedby"],t["aria-describedby"]].filter(Boolean).join(" "),"aria-details":[A["aria-details"],t["aria-details"]].filter(Boolean).join(" "),onChange:H=>{e.setThumbValue(n,parseFloat(H.target.value))}}),thumbProps:{...O,style:{position:"absolute",[f?"top":"left"]:`${q*100}%`,transform:"translate(-50%, -50%)",touchAction:"none"}},labelProps:E,isDragging:e.isThumbDragging(n),isDisabled:h,isFocused:T}}function gBe(t,e){let{trackRef:n,inputRef:r,orientation:i,channel:s,"aria-label":a,name:o,form:l}=t,{locale:c,direction:u}=so();!t.label&&!a&&!t["aria-labelledby"]&&(a=e.value.getChannelName(s,c));let{groupProps:h,trackProps:f,labelProps:p,outputProps:m}=Xne({...t,"aria-label":a},e,n),{inputProps:v,thumbProps:A}=Jne({index:0,orientation:i,isDisabled:t.isDisabled,name:o,form:l,trackRef:n,inputRef:r},e),x=e.getDisplayColor(),E=()=>{let D;switch(i==="vertical"?D="top":u==="ltr"?D="right":D="left",s){case"hue":{let T=[0,60,120,180,240,300,360].map(M=>x.withChannelValue("hue",M).toString("css")).join(", ");return`linear-gradient(to ${D}, ${T})`}case"lightness":{let T=e.getThumbMinValue(0),M=e.getThumbMaxValue(0),R=x.withChannelValue(s,T).toString("css"),k=x.withChannelValue(s,(M-T)/2).toString("css"),L=x.withChannelValue(s,M).toString("css");return`linear-gradient(to ${D}, ${R}, ${k}, ${L})`}case"saturation":case"brightness":case"red":case"green":case"blue":case"alpha":{let T=x.withChannelValue(s,e.getThumbMinValue(0)).toString("css"),M=x.withChannelValue(s,e.getThumbMaxValue(0)).toString("css");return`linear-gradient(to ${D}, ${T}, ${M})`}default:throw new Error("Unknown color channel: "+s)}},w={forcedColorAdjust:"none"};s==="hue"?v["aria-valuetext"]+=`, ${x.getHueName(c)}`:s!=="alpha"&&(v["aria-valuetext"]+=`, ${x.getColorName(c)}`);let{visuallyHiddenProps:B}=YM({style:{opacity:"0.0001",width:"100%",height:"100%",pointerEvents:"none"}});return{trackProps:{...an(h,f),style:{...f.style,...w,background:E()}},inputProps:{...v,style:{...v.style,...B.style}},thumbProps:{...A,style:{...A.style,...w}},labelProps:p,outputProps:m}}var Zne={};Zne={Empty:""};var ere={};ere={Empty:""};var tre={};tre={Empty:"Przdn"};var nre={};nre={Empty:"Tom"};var rre={};rre={Empty:"Leer"};var ire={};ire={Empty:""};var sre={};sre={Empty:"Empty"};var are={};are={Empty:"Vaco"};var ore={};ore={Empty:"Thjenda"};var lre={};lre={Empty:"Tyhj"};var cre={};cre={Empty:"Vide"};var ure={};ure={Empty:""};var dre={};dre={Empty:"Prazno"};var hre={};hre={Empty:"res"};var fre={};fre={Empty:"Vuoto"};var pre={};pre={Empty:""};var gre={};gre={Empty:" "};var mre={};mre={Empty:"Tuias"};var Are={};Are={Empty:"Tuks"};var yre={};yre={Empty:"Tom"};var vre={};vre={Empty:"Leeg"};var xre={};xre={Empty:"Pusty"};var bre={};bre={Empty:"Vazio"};var Cre={};Cre={Empty:"Vazio"};var Ere={};Ere={Empty:"Gol"};var Sre={};Sre={Empty:" "};var wre={};wre={Empty:"Przdne"};var _re={};_re={Empty:"Prazen"};var Ire={};Ire={Empty:"Prazno"};var Bre={};Bre={Empty:"Tomt"};var Tre={};Tre={Empty:"Bo"};var Mre={};Mre={Empty:""};var Dre={};Dre={Empty:""};var Rre={};Rre={Empty:""};var Pre={};Pre={"ar-AE":Zne,"bg-BG":ere,"cs-CZ":tre,"da-DK":nre,"de-DE":rre,"el-GR":ire,"en-US":sre,"es-ES":are,"et-EE":ore,"fi-FI":lre,"fr-FR":cre,"he-IL":ure,"hr-HR":dre,"hu-HU":hre,"it-IT":fre,"ja-JP":pre,"ko-KR":gre,"lt-LT":mre,"lv-LV":Are,"nb-NO":yre,"nl-NL":vre,"pl-PL":xre,"pt-BR":bre,"pt-PT":Cre,"ro-RO":Ere,"ru-RU":Sre,"sk-SK":wre,"sl-SI":_re,"sr-SP":Ire,"sv-SE":Bre,"tr-TR":Tre,"uk-UA":Mre,"zh-CN":Dre,"zh-TW":Rre};function mBe(t){return t&&t.__esModule?t.default:t}function kre(t){const e=C.useRef(void 0);let{value:n,textValue:r,minValue:i,maxValue:s,isDisabled:a,isReadOnly:o,isRequired:l,onIncrement:c,onIncrementPage:u,onDecrement:h,onDecrementPage:f,onDecrementToMin:p,onIncrementToMax:m}=t;const v=Yg(mBe(Pre),"@react-aria/spinbutton"),A=()=>clearTimeout(e.current);C.useEffect(()=>()=>A(),[]);let x=F=>{if(!(F.ctrlKey||F.metaKey||F.shiftKey||F.altKey||o||F.nativeEvent.isComposing))switch(F.key){case"PageUp":if(u){F.preventDefault(),u?.();break}case"ArrowUp":case"Up":c&&(F.preventDefault(),c?.());break;case"PageDown":if(f){F.preventDefault(),f?.();break}case"ArrowDown":case"Down":h&&(F.preventDefault(),h?.());break;case"Home":p&&(F.preventDefault(),p?.());break;case"End":m&&(F.preventDefault(),m?.());break}},E=C.useRef(!1),w=()=>{E.current=!0},B=()=>{E.current=!1},D=r===""?v.format("Empty"):(r||`${n}`).replace("-","");C.useEffect(()=>{E.current&&(S_e("assertive"),O1(D,"assertive"))},[D]);const T=Js(F=>{A(),c?.(),e.current=window.setTimeout(()=>{(s===void 0||isNaN(s)||n===void 0||isNaN(n)||n<s)&&T(60)},F)}),M=Js(F=>{A(),h?.(),e.current=window.setTimeout(()=>{(i===void 0||isNaN(i)||n===void 0||isNaN(n)||n>i)&&M(60)},F)});let R=F=>{F.preventDefault()},{addGlobalListener:k,removeAllGlobalListeners:L}=z0();return{spinButtonProps:{role:"spinbutton","aria-valuenow":n!==void 0&&!isNaN(n)?n:void 0,"aria-valuetext":D,"aria-valuemin":i,"aria-valuemax":s,"aria-disabled":a||void 0,"aria-readonly":o||void 0,"aria-required":l||void 0,onKeyDown:x,onFocus:w,onBlur:B},incrementButtonProps:{onPressStart:()=>{T(400),k(window,"contextmenu",R)},onPressEnd:()=>{A(),L()},onFocus:w,onBlur:B},decrementButtonProps:{onPressStart:()=>{M(400),k(window,"contextmenu",R)},onPressEnd:()=>{A(),L()},onFocus:w,onBlur:B}}}function ABe(t,e,n){let{isDisabled:r,isReadOnly:i,isRequired:s,isWheelDisabled:a,validationBehavior:o="aria"}=t,{colorValue:l,inputValue:c,increment:u,decrement:h,incrementToMax:f,decrementToMin:p,commit:m}=e,v=ro(),{spinButtonProps:A}=kre({isDisabled:r,isReadOnly:i,isRequired:s,maxValue:16777215,minValue:0,onIncrement:u,onIncrementToMax:f,onDecrement:h,onDecrementToMin:p,value:l?l.toHexInt():void 0,textValue:l?l.toString("hex"):void 0}),[x,E]=C.useState(!1),{focusWithinProps:w}=Wy({isDisabled:r,onFocusWithinChange:E}),B=C.useCallback(k=>{Math.abs(k.deltaY)<=Math.abs(k.deltaX)||(k.deltaY>0?u():k.deltaY<0&&h())},[h,u]);ZJ({onScroll:B,isDisabled:a||r||i||!x},n);let T=k=>{e.validate(k)&&e.setInputValue(k)},{inputProps:M,...R}=Pee({...t,id:v,value:c,defaultValue:"!",validate:void 0,[Eb]:e,type:"text",autoComplete:"off",onChange:T},e,n);return Gy(n,e.defaultColorValue,e.setColorValue),M=an(M,A,w,{role:"textbox","aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null,autoCorrect:"off",spellCheck:"false",onBlur:m}),o==="native"&&(M["aria-required"]=void 0),{inputProps:M,...R}}function yBe(t){return t&&t.__esModule?t.default:t}function vBe(t){let{color:e,colorName:n}=t,r=e||"#fff0",i=C.useMemo(()=>typeof r=="string"?cd(r):r,[r]),{locale:s}=so(),a=Cr(t,{labelable:!0}),o=Yg(yBe(SF),"@react-aria/color"),l=ro(t.id);return n||(n=i.getChannelValue("alpha")===0?o.format("transparent"):i.getColorName(s)),{colorSwatchProps:{...a,role:"img","aria-roledescription":o.format("colorSwatch"),"aria-label":[n,t["aria-label"]||""].filter(Boolean).join(", "),"aria-labelledby":t["aria-labelledby"]?`${l} ${t["aria-labelledby"]}`:void 0,id:l,style:{backgroundColor:i.toString("css"),forcedColorAdjust:"none"}},color:i||null}}var Nre={};Nre={decrease:t=>` ${t.fieldLabel}`,increase:t=>` ${t.fieldLabel}`,numberField:" "};var Lre={};Lre={decrease:t=>` ${t.fieldLabel}`,increase:t=>` ${t.fieldLabel}`,numberField:"  "};var Fre={};Fre={decrease:t=>`Snit ${t.fieldLabel}`,increase:t=>`Zvit ${t.fieldLabel}`,numberField:"seln pole"};var jre={};jre={decrease:t=>`Reducer ${t.fieldLabel}`,increase:t=>`g ${t.fieldLabel}`,numberField:"Talfelt"};var Ore={};Ore={decrease:t=>`${t.fieldLabel} verringern`,increase:t=>`${t.fieldLabel} erhhen`,numberField:"Nummernfeld"};var zre={};zre={decrease:t=>` ${t.fieldLabel}`,increase:t=>` ${t.fieldLabel}`,numberField:" "};var $re={};$re={decrease:t=>`Decrease ${t.fieldLabel}`,increase:t=>`Increase ${t.fieldLabel}`,numberField:"Number field"};var Qre={};Qre={decrease:t=>`Reducir ${t.fieldLabel}`,increase:t=>`Aumentar ${t.fieldLabel}`,numberField:"Campo de nmero"};var Ure={};Ure={decrease:t=>`Vhenda ${t.fieldLabel}`,increase:t=>`Suurenda ${t.fieldLabel}`,numberField:"Numbri vli"};var Hre={};Hre={decrease:t=>`Vhenn ${t.fieldLabel}`,increase:t=>`Lis ${t.fieldLabel}`,numberField:"Numerokentt"};var Gre={};Gre={decrease:t=>`Diminuer ${t.fieldLabel}`,increase:t=>`Augmenter ${t.fieldLabel}`,numberField:"Champ de nombre"};var Vre={};Vre={decrease:t=>` ${t.fieldLabel}`,increase:t=>` ${t.fieldLabel}`,numberField:" "};var Wre={};Wre={decrease:t=>`Smanji ${t.fieldLabel}`,increase:t=>`Poveaj ${t.fieldLabel}`,numberField:"Polje broja"};var Kre={};Kre={decrease:t=>`${t.fieldLabel} cskkentse`,increase:t=>`${t.fieldLabel} nvelse`,numberField:"Szmmez"};var qre={};qre={decrease:t=>`Riduci ${t.fieldLabel}`,increase:t=>`Aumenta ${t.fieldLabel}`,numberField:"Campo numero"};var Yre={};Yre={decrease:t=>`${t.fieldLabel}`,increase:t=>`${t.fieldLabel}`,numberField:""};var Xre={};Xre={decrease:t=>`${t.fieldLabel} `,increase:t=>`${t.fieldLabel} `,numberField:" "};var Jre={};Jre={decrease:t=>`Sumainti ${t.fieldLabel}`,increase:t=>`Padidinti ${t.fieldLabel}`,numberField:"Numerio laukas"};var Zre={};Zre={decrease:t=>`Samazinana ${t.fieldLabel}`,increase:t=>`Palielinana ${t.fieldLabel}`,numberField:"Skaitu lauks"};var eie={};eie={decrease:t=>`Reduser ${t.fieldLabel}`,increase:t=>`k ${t.fieldLabel}`,numberField:"Tallfelt"};var tie={};tie={decrease:t=>`${t.fieldLabel} verlagen`,increase:t=>`${t.fieldLabel} verhogen`,numberField:"Getalveld"};var nie={};nie={decrease:t=>`Zmniejsz ${t.fieldLabel}`,increase:t=>`Zwiksz ${t.fieldLabel}`,numberField:"Pole numeru"};var rie={};rie={decrease:t=>`Diminuir ${t.fieldLabel}`,increase:t=>`Aumentar ${t.fieldLabel}`,numberField:"Campo de nmero"};var iie={};iie={decrease:t=>`Diminuir ${t.fieldLabel}`,increase:t=>`Aumentar ${t.fieldLabel}`,numberField:"Campo numrico"};var sie={};sie={decrease:t=>`Scdere ${t.fieldLabel}`,increase:t=>`Cretere ${t.fieldLabel}`,numberField:"Cmp numeric"};var aie={};aie={decrease:t=>` ${t.fieldLabel}`,increase:t=>` ${t.fieldLabel}`,numberField:" "};var oie={};oie={decrease:t=>`Zni ${t.fieldLabel}`,increase:t=>`Zvi ${t.fieldLabel}`,numberField:"seln pole"};var lie={};lie={decrease:t=>`Upadati ${t.fieldLabel}`,increase:t=>`Poveajte ${t.fieldLabel}`,numberField:"tevilno polje"};var cie={};cie={decrease:t=>`Smanji ${t.fieldLabel}`,increase:t=>`Poveaj ${t.fieldLabel}`,numberField:"Polje broja"};var uie={};uie={decrease:t=>`Minska ${t.fieldLabel}`,increase:t=>`ka ${t.fieldLabel}`,numberField:"Nummerflt"};var die={};die={decrease:t=>`${t.fieldLabel} azalt`,increase:t=>`${t.fieldLabel} arttr`,numberField:"Say alan"};var hie={};hie={decrease:t=>` ${t.fieldLabel}`,increase:t=>` ${t.fieldLabel}`,numberField:" "};var fie={};fie={decrease:t=>` ${t.fieldLabel}`,increase:t=>` ${t.fieldLabel}`,numberField:""};var pie={};pie={decrease:t=>` ${t.fieldLabel}`,increase:t=>` ${t.fieldLabel}`,numberField:""};var gie={};gie={"ar-AE":Nre,"bg-BG":Lre,"cs-CZ":Fre,"da-DK":jre,"de-DE":Ore,"el-GR":zre,"en-US":$re,"es-ES":Qre,"et-EE":Ure,"fi-FI":Hre,"fr-FR":Gre,"he-IL":Vre,"hr-HR":Wre,"hu-HU":Kre,"it-IT":qre,"ja-JP":Yre,"ko-KR":Xre,"lt-LT":Jre,"lv-LV":Zre,"nb-NO":eie,"nl-NL":tie,"pl-PL":nie,"pt-BR":rie,"pt-PT":iie,"ro-RO":sie,"ru-RU":aie,"sk-SK":oie,"sl-SI":lie,"sr-SP":cie,"sv-SE":uie,"tr-TR":die,"uk-UA":hie,"zh-CN":fie,"zh-TW":pie};function xBe(t){return t&&t.__esModule?t.default:t}function mie(t,e,n){let{id:r,decrementAriaLabel:i,incrementAriaLabel:s,isDisabled:a,isReadOnly:o,isRequired:l,minValue:c,maxValue:u,autoFocus:h,label:f,formatOptions:p,onBlur:m=()=>{},onFocus:v,onFocusChange:A,onKeyDown:x,onKeyUp:E,description:w,errorMessage:B,isWheelDisabled:D,...T}=t,{increment:M,incrementToMax:R,decrement:k,decrementToMin:L,numberValue:F,inputValue:z,commit:G,commitValidation:V}=e;const q=Yg(xBe(gie),"@react-aria/numberfield");let O=ro(r),{focusProps:H}=P_({onBlur(){G()}}),K=K5(p),X=C.useMemo(()=>K.resolvedOptions(),[K]),re=K5({...p,currencySign:void 0}),J=C.useMemo(()=>isNaN(F)?"":re.format(F),[re,F]),{spinButtonProps:Z,incrementButtonProps:ee,decrementButtonProps:te}=kre({isDisabled:a,isReadOnly:o,isRequired:l,maxValue:u,minValue:c,onIncrement:M,onIncrementToMax:R,onDecrement:k,onDecrementToMin:L,value:F,textValue:J}),[oe,ae]=C.useState(!1),{focusWithinProps:se}=Wy({isDisabled:a,onFocusWithinChange:ae}),fe=C.useCallback(Bt=>{Math.abs(Bt.deltaY)<=Math.abs(Bt.deltaX)||(Bt.deltaY>0?M():Bt.deltaY<0&&k())},[k,M]);ZJ({onScroll:fe,isDisabled:D||a||o||!oe},n);var Be;let _e=((Be=X.maximumFractionDigits)!==null&&Be!==void 0?Be:0)>0,Ce=e.minValue===void 0||isNaN(e.minValue)||e.minValue<0,Se="numeric";CX()?Ce?Se="text":_e&&(Se="decimal"):_I()&&(Ce?Se="numeric":_e&&(Se="decimal"));let Me=Bt=>{e.validate(Bt)&&e.setInputValue(Bt)},ce=Cr(t),$e=C.useCallback(Bt=>{Bt.nativeEvent.isComposing||(Bt.key==="Enter"?(G(),V()):Bt.continuePropagation())},[G,V]),{isInvalid:qe,validationErrors:ft,validationDetails:Ie}=e.displayValidation,{labelProps:ht,inputProps:Ue,descriptionProps:xt,errorMessageProps:ve}=Pee({...T,...ce,name:void 0,form:void 0,label:f,autoFocus:h,isDisabled:a,isReadOnly:o,isRequired:l,validate:void 0,[Eb]:e,value:z,defaultValue:"!",autoComplete:"off","aria-label":t["aria-label"]||void 0,"aria-labelledby":t["aria-labelledby"]||void 0,id:O,type:"text",inputMode:Se,onChange:Me,onBlur:m,onFocus:v,onFocusChange:A,onKeyDown:C.useMemo(()=>Fp($e,x),[$e,x]),onKeyUp:E,description:w,errorMessage:B},e,n);Gy(n,e.defaultNumberValue,e.setNumberValue);let ue=an(Z,H,Ue,{role:null,"aria-roledescription":zE()?null:q.format("numberField"),"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null,autoCorrect:"off",spellCheck:"false"});t.validationBehavior==="native"&&(ue["aria-required"]=void 0);let ke=Bt=>{var at;document.activeElement!==n.current&&(Bt.pointerType==="mouse"?(at=n.current)===null||at===void 0||at.focus():Bt.target.focus())},He=t["aria-label"]||(typeof t.label=="string"?t.label:""),Qe;He||(Qe=t.label!=null?ht.id:t["aria-labelledby"]);let Ke=ro(),jt=ro(),St=an(ee,{"aria-label":s||q.format("increase",{fieldLabel:He}).trim(),id:Qe&&!s?Ke:null,"aria-labelledby":Qe&&!s?`${Ke} ${Qe}`:null,"aria-controls":O,excludeFromTabOrder:!0,preventFocusOnPress:!0,allowFocusWhenDisabled:!0,isDisabled:!e.canIncrement,onPressStart:ke}),Zt=an(te,{"aria-label":i||q.format("decrease",{fieldLabel:He}).trim(),id:Qe&&!i?jt:null,"aria-labelledby":Qe&&!i?`${jt} ${Qe}`:null,"aria-controls":O,excludeFromTabOrder:!0,preventFocusOnPress:!0,allowFocusWhenDisabled:!0,isDisabled:!e.canDecrement,onPressStart:ke});return{groupProps:{...se,role:"group","aria-disabled":a,"aria-invalid":qe?"true":void 0},labelProps:ht,inputProps:ue,incrementButtonProps:St,decrementButtonProps:Zt,errorMessageProps:ve,descriptionProps:xt,isInvalid:qe,validationErrors:ft,validationDetails:Ie}}function bBe(t,e,n){let{locale:r}=so();return mie({...t,value:void 0,defaultValue:void 0,onChange:void 0,validate:void 0,"aria-label":t["aria-label"]||(t.label||t["aria-labelledby"]?void 0:e.colorValue.getChannelName(t.channel,r))},e,n)}function CBe(t,e){let{role:n="dialog"}=t,r=M_();r=t["aria-label"]?void 0:r;let i=C.useRef(!1);return C.useEffect(()=>{if(e.current&&!e.current.contains(document.activeElement)){zy(e.current);let s=setTimeout(()=>{(document.activeElement===e.current||document.activeElement===document.body)&&(i.current=!0,e.current&&(e.current.blur(),zy(e.current)),i.current=!1)},500);return()=>{clearTimeout(s)}}},[e]),UZ(),{dialogProps:{...Cr(t,{labelable:!0}),role:n,tabIndex:-1,"aria-labelledby":t["aria-labelledby"]||r,onBlur:s=>{i.current&&s.stopPropagation()}},titleProps:{id:r}}}const Aie=new WeakMap;function EBe(t,e,n){let{value:r,children:i,"aria-label":s,"aria-labelledby":a,onPressStart:o,onPressEnd:l,onPressChange:c,onPress:u,onPressUp:h,onClick:f}=t;const p=t.isDisabled||e.isDisabled;let m=e.selectedValue===r,v=G=>{G.stopPropagation(),e.setSelectedValue(r)},{pressProps:A,isPressed:x}=Oy({onPressStart:o,onPressEnd:l,onPressChange:c,onPress:u,onPressUp:h,onClick:f,isDisabled:p}),{pressProps:E,isPressed:w}=Oy({onPressStart:o,onPressEnd:l,onPressChange:c,onPressUp:h,onClick:f,isDisabled:p,onPress(G){var V;u?.(G),e.setSelectedValue(r),(V=n.current)===null||V===void 0||V.focus()}}),{focusableProps:B}=QE(an(t,{onFocus:()=>e.setLastFocusedValue(r)}),n),D=an(A,B),T=Cr(t,{labelable:!0}),M=-1;e.selectedValue!=null?e.selectedValue===r&&(M=0):(e.lastFocusedValue===r||e.lastFocusedValue==null)&&(M=0),p&&(M=void 0);let{name:R,form:k,descriptionId:L,errorMessageId:F,validationBehavior:z}=Aie.get(e);return Gy(n,e.defaultSelectedValue,e.setSelectedValue),t4({validationBehavior:z},e,n),{labelProps:an(E,C.useMemo(()=>({onClick:G=>G.preventDefault(),onMouseDown:G=>G.preventDefault()}),[])),inputProps:an(T,{...D,type:"radio",name:R,form:k,tabIndex:M,disabled:p,required:e.isRequired&&z==="native",checked:m,value:r,onChange:v,"aria-describedby":[t["aria-describedby"],e.isInvalid?F:null,L].filter(Boolean).join(" ")||void 0}),isDisabled:p,isSelected:m,isPressed:x||w}}function SBe(t,e){let{name:n,form:r,isReadOnly:i,isRequired:s,isDisabled:a,orientation:o="vertical",validationBehavior:l="aria"}=t,{direction:c}=so(),{isInvalid:u,validationErrors:h,validationDetails:f}=e.displayValidation,{labelProps:p,fieldProps:m,descriptionProps:v,errorMessageProps:A}=bF({...t,labelElementType:"span",isInvalid:e.isInvalid,errorMessage:t.errorMessage||h}),x=Cr(t,{labelable:!0}),{focusWithinProps:E}=Wy({onBlurWithin(D){var T;(T=t.onBlur)===null||T===void 0||T.call(t,D),e.selectedValue||e.setLastFocusedValue(null)},onFocusWithin:t.onFocus,onFocusWithinChange:t.onFocusChange}),w=D=>{let T;switch(D.key){case"ArrowRight":c==="rtl"&&o!=="vertical"?T="prev":T="next";break;case"ArrowLeft":c==="rtl"&&o!=="vertical"?T="next":T="prev";break;case"ArrowDown":T="next";break;case"ArrowUp":T="prev";break;default:return}D.preventDefault();let M=uu(D.currentTarget,{from:D.target,accept:k=>k instanceof ad(k).HTMLInputElement&&k.type==="radio"}),R;T==="next"?(R=M.nextNode(),R||(M.currentNode=D.currentTarget,R=M.firstChild())):(R=M.previousNode(),R||(M.currentNode=D.currentTarget,R=M.lastChild())),R&&(R.focus(),e.setSelectedValue(R.value))},B=ro(n);return Aie.set(e,{name:B,form:r,descriptionId:v.id,errorMessageId:A.id,validationBehavior:l}),{radioGroupProps:an(x,{role:"radiogroup",onKeyDown:w,"aria-invalid":e.isInvalid||void 0,"aria-errormessage":t["aria-errormessage"],"aria-readonly":i||void 0,"aria-required":s||void 0,"aria-disabled":a||void 0,"aria-orientation":o,...m,...E}),labelProps:p,descriptionProps:v,errorMessageProps:A,isInvalid:u,validationErrors:h,validationDetails:f}}const IF=new WeakMap;function wBe(t,e,n){let{keyboardDelegate:r,isDisabled:i,isRequired:s,name:a,form:o,validationBehavior:l="aria"}=t,c=KM({usage:"search",sensitivity:"base"}),u=C.useMemo(()=>r||new ZM(e.collection,e.disabledKeys,n,c),[r,e.collection,e.disabledKeys,c,n]),{menuTriggerProps:h,menuProps:f}=Ree({isDisabled:i,type:"listbox"},e,n),p=k=>{if(e.selectionManager.selectionMode!=="multiple")switch(k.key){case"ArrowLeft":{var L,F;k.preventDefault();let V=e.selectedKey!=null?(L=u.getKeyAbove)===null||L===void 0?void 0:L.call(u,e.selectedKey):(F=u.getFirstKey)===null||F===void 0?void 0:F.call(u);V&&e.setSelectedKey(V);break}case"ArrowRight":{var z,G;k.preventDefault();let V=e.selectedKey!=null?(z=u.getKeyBelow)===null||z===void 0?void 0:z.call(u,e.selectedKey):(G=u.getFirstKey)===null||G===void 0?void 0:G.call(u);V&&e.setSelectedKey(V);break}}},{typeSelectProps:m}=VZ({keyboardDelegate:u,selectionManager:e.selectionManager,onTypeSelect(k){e.setSelectedKey(k)}}),{isInvalid:v,validationErrors:A,validationDetails:x}=e.displayValidation,{labelProps:E,fieldProps:w,descriptionProps:B,errorMessageProps:D}=bF({...t,labelElementType:"span",isInvalid:v,errorMessage:t.errorMessage||A});m.onKeyDown=m.onKeyDownCapture,delete m.onKeyDownCapture,e.selectionManager.selectionMode==="multiple"&&(m={});let T=Cr(t,{labelable:!0}),M=an(m,h,w),R=ro();return IF.set(e,{isDisabled:i,isRequired:s,name:a,form:o,validationBehavior:l}),{labelProps:{...E,onClick:()=>{if(!t.isDisabled){var k;(k=n.current)===null||k===void 0||k.focus(),gF("keyboard")}}},triggerProps:an(T,{...M,isDisabled:i,onKeyDown:Fp(M.onKeyDown,p,t.onKeyDown),onKeyUp:t.onKeyUp,"aria-labelledby":[R,M["aria-labelledby"],M["aria-label"]&&!M["aria-labelledby"]?M.id:null].filter(Boolean).join(" "),onFocus(k){e.isFocused||(t.onFocus&&t.onFocus(k),t.onFocusChange&&t.onFocusChange(!0),e.setFocused(!0))},onBlur(k){e.isOpen||(t.onBlur&&t.onBlur(k),t.onFocusChange&&t.onFocusChange(!1),e.setFocused(!1))}}),valueProps:{id:R},menuProps:{...f,autoFocus:e.focusStrategy||!0,shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,disallowEmptySelection:!0,linkBehavior:"selection",onBlur:k=>{k.currentTarget.contains(k.relatedTarget)||(t.onBlur&&t.onBlur(k),t.onFocusChange&&t.onFocusChange(!1),e.setFocused(!1))},"aria-labelledby":[w["aria-labelledby"],M["aria-label"]&&!w["aria-labelledby"]?M.id:null].filter(Boolean).join(" ")},descriptionProps:B,errorMessageProps:D,isInvalid:v,validationErrors:A,validationDetails:x,hiddenSelectProps:{isDisabled:i,name:a,label:t.label,state:e,triggerRef:n,form:o}}}function _Be(t,e,n){let r=IF.get(e)||{},{autoComplete:i,name:s=r.name,form:a=r.form,isDisabled:o=r.isDisabled}=t,{validationBehavior:l,isRequired:c}=r,{visuallyHiddenProps:u}=YM({style:{position:"fixed",top:0,left:0}});Gy(t.selectRef,e.defaultValue,e.setValue),t4({validationBehavior:l,focus:()=>{var m;return(m=n.current)===null||m===void 0?void 0:m.focus()}},e,t.selectRef);let h=e.setValue,f=C.useCallback(m=>{m.target.multiple?h(Array.from(m.target.selectedOptions,v=>v.value)):h(m.currentTarget.value)},[h]);var p;return{containerProps:{...u,"aria-hidden":!0,"data-react-aria-prevent-focus":!0,"data-a11y-ignore":"aria-hidden-focus"},inputProps:{style:{display:"none"}},selectProps:{tabIndex:-1,autoComplete:i,disabled:o,multiple:e.selectionManager.selectionMode==="multiple",required:l==="native"&&c,name:s,form:a,value:(p=e.value)!==null&&p!==void 0?p:"",onChange:f,onInput:f}}}function IBe(t){let{state:e,triggerRef:n,label:r,name:i,form:s,isDisabled:a}=t,o=C.useRef(null),l=C.useRef(null),{containerProps:c,selectProps:u}=_Be({...t,selectRef:e.collection.size<=300?o:l},e,n);if(e.collection.size<=300)return we.createElement("div",{...c,"data-testid":"hidden-select-container"},we.createElement("label",null,r,we.createElement("select",{...u,ref:o},we.createElement("option",null),[...e.collection.getKeys()].map(h=>{let f=e.collection.getItem(h);if(f&&f.type==="item")return we.createElement("option",{key:f.key,value:f.key},f.textValue)}))));if(i){let h=IF.get(e)||{},{validationBehavior:f}=h,p=Array.isArray(e.value)?e.value:[e.value];p.length===0&&(p=[null]);let m=p.map((v,A)=>{let x={type:"hidden",autoComplete:u.autoComplete,name:i,form:s,disabled:a,value:v??""};return f==="native"?we.createElement("input",{key:A,...x,ref:A===0?l:null,style:{display:"none"},type:"text",required:A===0?u.required:!1,onChange:()=>{}}):we.createElement("input",{key:A,...x,ref:A===0?l:null})});return we.createElement(we.Fragment,null,m)}return null}function BBe(t,e,n){let{labelProps:r,inputProps:i,isSelected:s,isPressed:a,isDisabled:o,isReadOnly:l}=Ite(t,e,n);return{labelProps:r,inputProps:{...i,role:"switch",checked:s},isSelected:s,isPressed:a,isDisabled:o,isReadOnly:l}}const yie=new WeakMap;function OT(t,e,n){return t?(typeof e=="string"&&(e=e.replace(/\s+/g,"")),`${yie.get(t)}-${n}-${e}`):""}function TBe(t,e,n){let{key:r,isDisabled:i,shouldSelectOnPressUp:s}=t,{selectionManager:a,selectedKey:o}=e,l=r===o,c=i||e.isDisabled||e.selectionManager.isDisabled(r),{itemProps:u,isPressed:h}=WZ({selectionManager:a,key:r,ref:n,isDisabled:c,shouldSelectOnPressUp:s,linkBehavior:"selection"}),f=OT(e,r,"tab"),p=OT(e,r,"tabpanel"),{tabIndex:m}=u,v=e.collection.getItem(r),A=Cr(v?.props,{labelable:!0});delete A.id;let x=SX(v?.props),{focusableProps:E}=QE({isDisabled:c},n);return{tabProps:an(A,E,x,u,{id:f,"aria-selected":l,"aria-disabled":c||void 0,"aria-controls":l?p:void 0,tabIndex:c?void 0:m,role:"tab"}),isSelected:l,isDisabled:c,isPressed:h}}function MBe(t,e,n){let r=jIe(n)?void 0:0;var i;const s=OT(e,(i=t.id)!==null&&i!==void 0?i:e?.selectedKey,"tabpanel"),a=b0({...t,id:s,"aria-labelledby":OT(e,e?.selectedKey,"tab")});return{tabPanelProps:an(a,{tabIndex:r,role:"tabpanel","aria-describedby":t["aria-describedby"],"aria-details":t["aria-details"]})}}class DBe{getKeyLeftOf(e){return this.flipDirection?this.getNextKey(e):this.getPreviousKey(e)}getKeyRightOf(e){return this.flipDirection?this.getPreviousKey(e):this.getNextKey(e)}isDisabled(e){var n,r;return this.disabledKeys.has(e)||!!(!((r=this.collection.getItem(e))===null||r===void 0||(n=r.props)===null||n===void 0)&&n.isDisabled)}getFirstKey(){let e=this.collection.getFirstKey();return e!=null&&this.isDisabled(e)&&(e=this.getNextKey(e)),e}getLastKey(){let e=this.collection.getLastKey();return e!=null&&this.isDisabled(e)&&(e=this.getPreviousKey(e)),e}getKeyAbove(e){return this.tabDirection?null:this.getPreviousKey(e)}getKeyBelow(e){return this.tabDirection?null:this.getNextKey(e)}getNextKey(e){let n=e;do n=this.collection.getKeyAfter(n),n==null&&(n=this.collection.getFirstKey());while(n!=null&&this.isDisabled(n));return n}getPreviousKey(e){let n=e;do n=this.collection.getKeyBefore(n),n==null&&(n=this.collection.getLastKey());while(n!=null&&this.isDisabled(n));return n}constructor(e,n,r,i=new Set){this.collection=e,this.flipDirection=n==="rtl"&&r==="horizontal",this.disabledKeys=i,this.tabDirection=r==="horizontal"}}function RBe(t,e,n){let{orientation:r="horizontal",keyboardActivation:i="automatic"}=t,{collection:s,selectionManager:a,disabledKeys:o}=e,{direction:l}=so(),c=C.useMemo(()=>new DBe(s,l,r,o),[s,o,r,l]),{collectionProps:u}=CF({ref:n,selectionManager:a,keyboardDelegate:c,selectOnFocus:i==="automatic",disallowEmptySelection:!0,scrollRef:n,linkBehavior:"selection"}),h=ro();yie.set(e,h);let f=b0({...t,id:h});return{tabListProps:{...an(u,f),role:"tablist","aria-orientation":r,tabIndex:void 0}}}const lh=C.createContext({}),xn=Ub(function(e,n){[e,n]=Ai(e,n,lh);let{elementType:r="label",...i}=e;return we.createElement(r,{className:"react-aria-Label",...i,ref:n})}),PBe=C.createContext(null),qy=C.createContext({}),en=Ub(function(e,n){[e,n]=Ai(e,n,qy);let r=e,{isPending:i}=r,{buttonProps:s,isPressed:a}=wte(e,n);s=kBe(s,i);let{focusProps:o,isFocused:l,isFocusVisible:c}=mu(e),{hoverProps:u,isHovered:h}=oh({...e,isDisabled:e.isDisabled||i}),f={isHovered:h,isPressed:(r.isPressed||a)&&!i,isFocused:l,isFocusVisible:c,isDisabled:e.isDisabled||!1,isPending:i??!1},p=Wr({...e,values:f,defaultClassName:"react-aria-Button"}),m=ro(s.id),v=ro(),A=s["aria-labelledby"];i&&(A?A=`${A} ${v}`:s["aria-label"]&&(A=`${m} ${v}`));let x=C.useRef(i);C.useEffect(()=>{let w={"aria-labelledby":A||m};(!x.current&&l&&i||x.current&&l&&!i)&&O1(w,"assertive"),x.current=i},[i,l,A,m]);let E=Cr(e,{global:!0});return delete E.onClick,we.createElement("button",{...an(E,p,s,o,u),type:s.type==="submit"&&i?"button":s.type,id:m,ref:n,"aria-labelledby":A,slot:e.slot||void 0,"aria-disabled":i?"true":s["aria-disabled"],"data-disabled":e.isDisabled||void 0,"data-pressed":f.isPressed||void 0,"data-hovered":h||void 0,"data-focused":l||void 0,"data-pending":i||void 0,"data-focus-visible":c||void 0},we.createElement(PBe.Provider,{value:{id:v}},p.children))});function kBe(t,e){if(e){for(const n in t)n.startsWith("on")&&!(n.includes("Focus")||n.includes("Blur"))&&(t[n]=void 0);t.href=void 0,t.target=void 0}return t}const vf=C.createContext({}),lE=C.forwardRef(function(e,n){[e,n]=Ai(e,n,vf);let{elementType:r="span",...i}=e;return we.createElement(r,{className:"react-aria-Text",...i,ref:n})});class hL{*[Symbol.iterator](){yield*this.iterable}get size(){return this._size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){let n=this.keyMap.get(e);var r;return n&&(r=n.prevKey)!==null&&r!==void 0?r:null}getKeyAfter(e){let n=this.keyMap.get(e);var r;return n&&(r=n.nextKey)!==null&&r!==void 0?r:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){var n;return(n=this.keyMap.get(e))!==null&&n!==void 0?n:null}at(e){const n=[...this.getKeys()];return this.getItem(n[e])}getChildren(e){let n=this.keyMap.get(e);return n?.childNodes||[]}constructor(e){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.iterable=e;let n=o=>{if(this.keyMap.set(o.key,o),o.childNodes&&o.type==="section")for(let l of o.childNodes)n(l)};for(let o of e)n(o);let r=null,i=0,s=0;for(let[o,l]of this.keyMap)r?(r.nextKey=o,l.prevKey=r.key):(this.firstKey=o,l.prevKey=void 0),l.type==="item"&&(l.index=i++),(l.type==="section"||l.type==="item")&&s++,r=l,r.nextKey=void 0;this._size=s;var a;this.lastKey=(a=r?.key)!==null&&a!==void 0?a:null}}class fp extends Set{constructor(e,n,r){super(e),e instanceof fp?(this.anchorKey=n??e.anchorKey,this.currentKey=r??e.currentKey):(this.anchorKey=n??null,this.currentKey=r??null)}}function NBe(t,e){if(t.size!==e.size)return!1;for(let n of t)if(!e.has(n))return!1;return!0}function LBe(t){let{selectionMode:e="none",disallowEmptySelection:n=!1,allowDuplicateSelectionEvents:r,selectionBehavior:i="toggle",disabledBehavior:s="all"}=t,a=C.useRef(!1),[,o]=C.useState(!1),l=C.useRef(null),c=C.useRef(null),[,u]=C.useState(null),h=C.useMemo(()=>A7(t.selectedKeys),[t.selectedKeys]),f=C.useMemo(()=>A7(t.defaultSelectedKeys,new fp),[t.defaultSelectedKeys]),[p,m]=Zl(h,f,t.onSelectionChange),v=C.useMemo(()=>t.disabledKeys?new Set(t.disabledKeys):new Set,[t.disabledKeys]),[A,x]=C.useState(i);i==="replace"&&A==="toggle"&&typeof p=="object"&&p.size===0&&x("replace");let E=C.useRef(i);return C.useEffect(()=>{i!==E.current&&(x(i),E.current=i)},[i]),{selectionMode:e,disallowEmptySelection:n,selectionBehavior:A,setSelectionBehavior:x,get isFocused(){return a.current},setFocused(w){a.current=w,o(w)},get focusedKey(){return l.current},get childFocusStrategy(){return c.current},setFocusedKey(w,B="first"){l.current=w,c.current=B,u(w)},selectedKeys:p,setSelectedKeys(w){(r||!NBe(w,p))&&m(w)},disabledKeys:v,disabledBehavior:s}}function A7(t,e){return t?t==="all"?"all":new fp(t):e}class BF{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,n){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,n)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){if(this.state.selectionMode==="none")return!1;let n=this.getKey(e);return n==null?!1:this.state.selectedKeys==="all"?this.canSelectItem(n):this.state.selectedKeys.has(n)}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),n=this.state.selectedKeys;return this._isSelectAll=e.every(r=>n.has(r)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let r of this.state.selectedKeys){let i=this.collection.getItem(r);(!e||i&&MR(this.collection,i,e)<0)&&(e=i)}var n;return(n=e?.key)!==null&&n!==void 0?n:null}get lastSelectedKey(){let e=null;for(let r of this.state.selectedKeys){let i=this.collection.getItem(r);(!e||i&&MR(this.collection,i,e)>0)&&(e=i)}var n;return(n=e?.key)!==null&&n!==void 0?n:null}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}let n=this.getKey(e);if(n==null)return;let r;if(this.state.selectedKeys==="all")r=new fp([n],n,n);else{let a=this.state.selectedKeys;var i;let o=(i=a.anchorKey)!==null&&i!==void 0?i:n;r=new fp(a,o,n);var s;for(let l of this.getKeyRange(o,(s=a.currentKey)!==null&&s!==void 0?s:n))r.delete(l);for(let l of this.getKeyRange(n,o))this.canSelectItem(l)&&r.add(l)}this.state.setSelectedKeys(r)}getKeyRange(e,n){let r=this.collection.getItem(e),i=this.collection.getItem(n);return r&&i?MR(this.collection,r,i)<=0?this.getKeyRangeInternal(e,n):this.getKeyRangeInternal(n,e):[]}getKeyRangeInternal(e,n){var r;if(!((r=this.layoutDelegate)===null||r===void 0)&&r.getKeyRange)return this.layoutDelegate.getKeyRange(e,n);let i=[],s=e;for(;s!=null;){let a=this.collection.getItem(s);if(a&&(a.type==="item"||a.type==="cell"&&this.allowsCellSelection)&&i.push(s),s===n)return i;s=this.collection.getKeyAfter(s)}return[]}getKey(e){let n=this.collection.getItem(e);if(!n||n.type==="cell"&&this.allowsCellSelection)return e;for(;n&&n.type!=="item"&&n.parentKey!=null;)n=this.collection.getItem(n.parentKey);return!n||n.type!=="item"?null:n.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}let n=this.getKey(e);if(n==null)return;let r=new fp(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);r.has(n)?r.delete(n):this.canSelectItem(n)&&(r.add(n),r.anchorKey=n,r.currentKey=n),!(this.disallowEmptySelection&&r.size===0)&&this.state.setSelectedKeys(r)}replaceSelection(e){if(this.selectionMode==="none")return;let n=this.getKey(e);if(n==null)return;let r=this.canSelectItem(n)?new fp([n],n,n):new fp;this.state.setSelectedKeys(r)}setSelectedKeys(e){if(this.selectionMode==="none")return;let n=new fp;for(let r of e){let i=this.getKey(r);if(i!=null&&(n.add(i),this.selectionMode==="single"))break}this.state.setSelectedKeys(n)}getSelectAllKeys(){let e=[],n=r=>{for(;r!=null;){if(this.canSelectItem(r)){var i;let a=this.collection.getItem(r);a?.type==="item"&&e.push(r);var s;a?.hasChildNodes&&(this.allowsCellSelection||a.type!=="item")&&n((s=(i=a2e(e4(a,this.collection)))===null||i===void 0?void 0:i.key)!==null&&s!==void 0?s:null)}r=this.collection.getKeyAfter(r)}};return n(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new fp)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,n){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||n&&(n.pointerType==="touch"||n.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let n=this.selectedKeys;if(e.size!==n.size)return!1;for(let r of e)if(!n.has(r))return!1;for(let r of n)if(!e.has(r))return!1;return!0}canSelectItem(e){var n;if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let r=this.collection.getItem(e);return!(!r||!(r==null||(n=r.props)===null||n===void 0)&&n.isDisabled||r.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){var n,r;return this.state.disabledBehavior==="all"&&(this.state.disabledKeys.has(e)||!!(!((r=this.collection.getItem(e))===null||r===void 0||(n=r.props)===null||n===void 0)&&n.isDisabled))}isLink(e){var n,r;return!!(!((r=this.collection.getItem(e))===null||r===void 0||(n=r.props)===null||n===void 0)&&n.href)}getItemProps(e){var n;return(n=this.collection.getItem(e))===null||n===void 0?void 0:n.props}withCollection(e){return new BF(e,this.state,{allowsCellSelection:this.allowsCellSelection,layoutDelegate:this.layoutDelegate||void 0})}constructor(e,n,r){this.collection=e,this.state=n;var i;this.allowsCellSelection=(i=r?.allowsCellSelection)!==null&&i!==void 0?i:!1,this._isSelectAll=null,this.layoutDelegate=r?.layoutDelegate||null}}function TF(t){let{filter:e,layoutDelegate:n}=t,r=LBe(t),i=C.useMemo(()=>t.disabledKeys?new Set(t.disabledKeys):new Set,[t.disabledKeys]),s=C.useCallback(c=>e?new hL(e(c)):new hL(c),[e]),a=C.useMemo(()=>({suppressTextValueWarning:t.suppressTextValueWarning}),[t.suppressTextValueWarning]),o=s2e(t,s,a),l=C.useMemo(()=>new BF(o,r,{layoutDelegate:n}),[o,r,n]);return vie(o,l),{collection:o,disabledKeys:i,selectionManager:l}}function FBe(t,e){let n=C.useMemo(()=>e?t.collection.filter(e):t.collection,[t.collection,e]),r=t.selectionManager.withCollection(n);return vie(n,r),{collection:n,selectionManager:r,disabledKeys:t.disabledKeys}}function vie(t,e){const n=C.useRef(null);C.useEffect(()=>{if(e.focusedKey!=null&&!t.getItem(e.focusedKey)&&n.current){const u=n.current.getItem(e.focusedKey),h=[...n.current.getKeys()].map(x=>{const E=n.current.getItem(x);return E?.type==="item"?E:null}).filter(x=>x!==null),f=[...t.getKeys()].map(x=>{const E=t.getItem(x);return E?.type==="item"?E:null}).filter(x=>x!==null);var r,i;const p=((r=h?.length)!==null&&r!==void 0?r:0)-((i=f?.length)!==null&&i!==void 0?i:0);var s,a,o;let m=Math.min(p>1?Math.max(((s=u?.index)!==null&&s!==void 0?s:0)-p+1,0):(a=u?.index)!==null&&a!==void 0?a:0,((o=f?.length)!==null&&o!==void 0?o:0)-1),v=null,A=!1;for(;m>=0;){if(!e.isDisabled(f[m].key)){v=f[m];break}if(m<f.length-1&&!A)m++;else{A=!0;var l,c;m>((l=u?.index)!==null&&l!==void 0?l:0)&&(m=(c=u?.index)!==null&&c!==void 0?c:0),m--}}e.setFocusedKey(v?v.key:null)}n.current=t},[t,e])}function xie(t){var e;let[n,r]=Zl(t.selectedKey,(e=t.defaultSelectedKey)!==null&&e!==void 0?e:null,t.onSelectionChange),i=C.useMemo(()=>n!=null?[n]:[],[n]),{collection:s,disabledKeys:a,selectionManager:o}=TF({...t,selectionMode:"single",disallowEmptySelection:!0,allowDuplicateSelectionEvents:!0,selectedKeys:i,onSelectionChange:c=>{if(c==="all")return;var u;let h=(u=c.values().next().value)!==null&&u!==void 0?u:null;h===n&&t.onSelectionChange&&t.onSelectionChange(h),r(h)}}),l=n!=null?s.getItem(n):null;return{collection:s,disabledKeys:a,selectionManager:o,selectedKey:n,setSelectedKey:r,selectedItem:l}}function TI(t){let[e,n]=Zl(t.isOpen,t.defaultOpen||!1,t.onOpenChange);const r=C.useCallback(()=>{n(!0)},[n]),i=C.useCallback(()=>{n(!1)},[n]),s=C.useCallback(()=>{n(!e)},[n,e]);return{isOpen:e,setOpen:n,open:r,close:i,toggle:s}}function jBe(t){var e;let{defaultFilter:n,menuTrigger:r="input",allowsEmptyCollection:i=!1,allowsCustomValue:s,shouldCloseOnBlur:a=!0}=t,[o,l]=C.useState(!1),[c,u]=C.useState(!1),[h,f]=C.useState(null),p=Ue=>{t.onSelectionChange&&t.onSelectionChange(Ue),Ue===x&&(ee(),re())};var m;let{collection:v,selectionManager:A,selectedKey:x,setSelectedKey:E,selectedItem:w,disabledKeys:B}=xie({...t,onSelectionChange:p,items:(m=t.items)!==null&&m!==void 0?m:t.defaultItems}),[D,T]=Zl(t.inputValue,y7(t.defaultInputValue,x,v)||"",t.onInputChange),[M]=C.useState(x),[R]=C.useState(D),k=v,L=C.useMemo(()=>t.items!=null||!n?v:OBe(v,D,n),[v,D,n,t.items]),[F,z]=C.useState(L),G=C.useRef("focus"),q=TI({...t,onOpenChange:Ue=>{t.onOpenChange&&t.onOpenChange(Ue,Ue?G.current:void 0),A.setFocused(Ue),Ue||A.setFocusedKey(null)},isOpen:void 0,defaultOpen:void 0}),O=(Ue=null,xt)=>{let ve=xt==="manual"||xt==="focus"&&r==="focus";(i||L.size>0||ve&&k.size>0||t.items)&&(ve&&!q.isOpen&&t.items===void 0&&l(!0),G.current=xt,f(Ue),q.open())},H=(Ue=null,xt)=>{let ve=xt==="manual"||xt==="focus"&&r==="focus";!(i||L.size>0||ve&&k.size>0||t.items)&&!q.isOpen||(ve&&!q.isOpen&&t.items===void 0&&l(!0),q.isOpen||(G.current=xt),X(Ue))},K=C.useCallback(()=>{z(o?k:L)},[o,k,L]),X=C.useCallback((Ue=null)=>{q.isOpen&&K(),f(Ue),q.toggle()},[q,K]),re=C.useCallback(()=>{q.isOpen&&(K(),q.close())},[q,K]),[J,Z]=C.useState(D),ee=()=>{var Ue,xt;let ve=x!=null&&(xt=(Ue=v.getItem(x))===null||Ue===void 0?void 0:Ue.textValue)!==null&&xt!==void 0?xt:"";Z(ve),T(ve)};var te,oe;let ae=C.useRef((oe=(te=t.selectedKey)!==null&&te!==void 0?te:t.defaultSelectedKey)!==null&&oe!==void 0?oe:null);var se;let fe=C.useRef(x!=null&&(se=(e=v.getItem(x))===null||e===void 0?void 0:e.textValue)!==null&&se!==void 0?se:"");C.useEffect(()=>{var Ue;c&&(L.size>0||i)&&!q.isOpen&&D!==J&&r!=="manual"&&O(null,"input"),!o&&!i&&q.isOpen&&L.size===0&&re(),x!=null&&x!==ae.current&&re(),D!==J&&(A.setFocusedKey(null),l(!1),D===""&&(t.inputValue===void 0||t.selectedKey===void 0)&&E(null)),x!==ae.current&&(t.inputValue===void 0||t.selectedKey===void 0)?ee():J!==D&&Z(D);var xt;let ve=x!=null&&(xt=(Ue=v.getItem(x))===null||Ue===void 0?void 0:Ue.textValue)!==null&&xt!==void 0?xt:"";!c&&x!=null&&t.inputValue===void 0&&x===ae.current&&fe.current!==ve&&(Z(ve),T(ve)),ae.current=x,fe.current=ve});let Ee=Ky({...t,value:C.useMemo(()=>({inputValue:D,selectedKey:x}),[D,x])}),Be=()=>{s&&x==null?_e():Ce()},_e=()=>{ae.current=null,E(null),re()},Ce=()=>{if(t.selectedKey!==void 0&&t.inputValue!==void 0){var Ue,xt;(Ue=t.onSelectionChange)===null||Ue===void 0||Ue.call(t,x);var ve;let ue=x!=null&&(ve=(xt=v.getItem(x))===null||xt===void 0?void 0:xt.textValue)!==null&&ve!==void 0?ve:"";Z(ue),re()}else ee(),re()};const Se=()=>{if(s){var Ue,xt;const ve=x!=null&&(xt=(Ue=v.getItem(x))===null||Ue===void 0?void 0:Ue.textValue)!==null&&xt!==void 0?xt:"";D===ve?Ce():_e()}else Ce()};let Me=()=>{q.isOpen&&A.focusedKey!=null?x===A.focusedKey?Ce():E(A.focusedKey):Se()},ce=C.useRef(D),$e=Ue=>{Ue?(ce.current=D,r==="focus"&&!t.isReadOnly&&O(null,"focus")):(a&&Se(),D!==ce.current&&Ee.commitValidation()),u(Ue)},qe=C.useMemo(()=>q.isOpen?o?k:L:F,[q.isOpen,k,L,o,F]);var ft;let Ie=(ft=t.defaultSelectedKey)!==null&&ft!==void 0?ft:M;var ht;return{...Ee,...q,focusStrategy:h,toggle:H,open:O,close:Se,selectionManager:A,selectedKey:x,defaultSelectedKey:Ie,setSelectedKey:E,disabledKeys:B,isFocused:c,setFocused:$e,selectedItem:w,collection:qe,inputValue:D,defaultInputValue:(ht=y7(t.defaultInputValue,Ie,v))!==null&&ht!==void 0?ht:R,setInputValue:T,commit:Me,revert:Be}}function OBe(t,e,n){return new hL(bie(t,t,e,n))}function bie(t,e,n,r){let i=[];for(let s of e)if(s.type==="section"&&s.hasChildNodes){let a=bie(t,e4(s,t),n,r);[...a].some(o=>o.type==="item")&&i.push({...s,childNodes:a})}else s.type==="item"&&r(s.textValue,n)?i.push({...s}):s.type!=="item"&&i.push({...s});return i}function y7(t,e,n){if(t==null){var r,i;if(e!=null)return(i=(r=n.getItem(e))===null||r===void 0?void 0:r.textValue)!==null&&i!==void 0?i:""}return t}function UE(t){let{initialItems:e=[],initialSelectedKeys:n,getKey:r=c=>{var u;return(u=c.id)!==null&&u!==void 0?u:c.key},filter:i,initialFilterText:s=""}=t,[a,o]=C.useState({items:e,selectedKeys:n==="all"?"all":new Set(n||[]),filterText:s}),l=C.useMemo(()=>i?a.items.filter(c=>i(c,a.filterText)):a.items,[a.items,a.filterText,i]);return{...a,items:l,...Cie({getKey:r},o),getItem(c){return a.items.find(u=>r(u)===c)}}}function Cie(t,e){let{cursor:n,getKey:r}=t;return{setSelectedKeys(i){e(s=>({...s,selectedKeys:i}))},addKeysToSelection(i){e(s=>s.selectedKeys==="all"?s:i==="all"?{...s,selectedKeys:"all"}:{...s,selectedKeys:new Set([...s.selectedKeys,...i])})},removeKeysFromSelection(i){e(s=>{if(i==="all")return{...s,selectedKeys:new Set};let a=s.selectedKeys==="all"?new Set(s.items.map(r)):new Set(s.selectedKeys);for(let o of i)a.delete(o);return{...s,selectedKeys:a}})},setFilterText(i){e(s=>({...s,filterText:i}))},insert(i,...s){e(a=>HS(a,i,...s))},insertBefore(i,...s){e(a=>{let o=a.items.findIndex(l=>r?.(l)===i);if(o===-1)if(a.items.length===0)o=0;else return a;return HS(a,o,...s)})},insertAfter(i,...s){e(a=>{let o=a.items.findIndex(l=>r?.(l)===i);if(o===-1)if(a.items.length===0)o=0;else return a;return HS(a,o+1,...s)})},prepend(...i){e(s=>HS(s,0,...i))},append(...i){e(s=>HS(s,s.items.length,...i))},remove(...i){e(s=>{let a=new Set(i),o=s.items.filter(c=>!a.has(r(c))),l="all";if(s.selectedKeys!=="all"){l=new Set(s.selectedKeys);for(let c of i)l.delete(c)}return n==null&&o.length===0&&(l=new Set),{...s,items:o,selectedKeys:l}})},removeSelectedItems(){e(i=>{if(i.selectedKeys==="all")return{...i,items:[],selectedKeys:new Set};let s=i.selectedKeys,a=i.items.filter(o=>!s.has(r(o)));return{...i,items:a,selectedKeys:new Set}})},move(i,s){e(a=>{let o=a.items.findIndex(u=>r(u)===i);if(o===-1)return a;let l=a.items.slice(),[c]=l.splice(o,1);return l.splice(s,0,c),{...a,items:l}})},moveBefore(i,s){e(a=>{let o=a.items.findIndex(u=>r(u)===i);if(o===-1)return a;let c=(Array.isArray(s)?s:[...s]).map(u=>a.items.findIndex(h=>r(h)===u)).sort((u,h)=>u-h);return v7(a,c,o)})},moveAfter(i,s){e(a=>{let o=a.items.findIndex(u=>r(u)===i);if(o===-1)return a;let c=(Array.isArray(s)?s:[...s]).map(u=>a.items.findIndex(h=>r(h)===u)).sort((u,h)=>u-h);return v7(a,c,o+1)})},update(i,s){e(a=>{let o=a.items.findIndex(l=>r(l)===i);return o===-1?a:{...a,items:[...a.items.slice(0,o),s,...a.items.slice(o+1)]}})}}}function HS(t,e,...n){return{...t,items:[...t.items.slice(0,e),...n,...t.items.slice(e)]}}function v7(t,e,n){n-=e.filter(s=>s<n).length;let r=e.map(s=>({from:s,to:n++}));for(let s=0;s<r.length;s++){let a=r[s].from;for(let o=s;o<r.length;o++)r[o].from>a&&r[o].from--}for(let s=0;s<r.length;s++){let a=r[s];for(let o=r.length-1;o>s;o--){let l=r[o];l.from<a.to?a.to++:l.from++}}let i=t.items.slice();for(let s of r){let[a]=i.splice(s.from,1);i.splice(s.to,0,a)}return{...t,items:i}}function zBe(t,e){let n;switch(t.state){case"idle":case"error":switch(e.type){case"loading":case"loadingMore":case"sorting":case"filtering":var r,i;return{...t,filterText:(r=e.filterText)!==null&&r!==void 0?r:t.filterText,state:e.type,items:e.type==="loading"?[]:t.items,sortDescriptor:(i=e.sortDescriptor)!==null&&i!==void 0?i:t.sortDescriptor,abortController:e.abortController};case"update":var s;return{...t,...(s=e.updater)===null||s===void 0?void 0:s.call(e,t)};case"success":case"error":return t;default:throw new Error(`Invalid action "${e.type}" in state "${t.state}"`)}case"loading":case"sorting":case"filtering":switch(e.type){case"success":if(e.abortController!==t.abortController)return t;var a;n=(a=e.selectedKeys)!==null&&a!==void 0?a:t.selectedKeys;var o,l,c;return{...t,filterText:(o=e.filterText)!==null&&o!==void 0?o:t.filterText,state:"idle",items:[...(l=e.items)!==null&&l!==void 0?l:[]],selectedKeys:n==="all"?"all":new Set(n),sortDescriptor:(c=e.sortDescriptor)!==null&&c!==void 0?c:t.sortDescriptor,abortController:void 0,cursor:e.cursor};case"error":return e.abortController!==t.abortController?t:{...t,state:"error",error:e.error,abortController:void 0};case"loading":case"loadingMore":case"sorting":case"filtering":var u;(u=t.abortController)===null||u===void 0||u.abort();var h;return{...t,filterText:(h=e.filterText)!==null&&h!==void 0?h:t.filterText,state:e.type,items:e.type==="loading"?[]:t.items,abortController:e.abortController};case"update":var f;return{...t,...(f=e.updater)===null||f===void 0?void 0:f.call(e,t)};default:throw new Error(`Invalid action "${e.type}" in state "${t.state}"`)}case"loadingMore":switch(e.type){case"success":var p;n=t.selectedKeys==="all"||e.selectedKeys==="all"?"all":new Set([...t.selectedKeys,...(p=e.selectedKeys)!==null&&p!==void 0?p:[]]);var m,v;return{...t,state:"idle",items:[...t.items,...(m=e.items)!==null&&m!==void 0?m:[]],selectedKeys:n,sortDescriptor:(v=e.sortDescriptor)!==null&&v!==void 0?v:t.sortDescriptor,abortController:void 0,cursor:e.cursor};case"error":return e.abortController!==t.abortController?t:{...t,state:"error",error:e.error};case"loading":case"sorting":case"filtering":var A;(A=t.abortController)===null||A===void 0||A.abort();var x;return{...t,filterText:(x=e.filterText)!==null&&x!==void 0?x:t.filterText,state:e.type,items:e.type==="loading"?[]:t.items,abortController:e.abortController};case"loadingMore":var E;return(E=e.abortController)===null||E===void 0||E.abort(),t;case"update":var w;return{...t,...(w=e.updater)===null||w===void 0?void 0:w.call(e,t)};default:throw new Error(`Invalid action "${e.type}" in state "${t.state}"`)}default:throw new Error(`Invalid state "${t.state}"`)}}function Eie(t){const{load:e,sort:n,initialSelectedKeys:r,initialSortDescriptor:i,getKey:s=h=>h.id||h.key,initialFilterText:a=""}=t;let[o,l]=C.useReducer(zBe,{state:"idle",error:void 0,items:[],selectedKeys:r==="all"?"all":new Set(r),sortDescriptor:i,filterText:a});const c=async(h,f)=>{let p=new AbortController;try{l({...h,abortController:p});var m;let x=(m=h.filterText)!==null&&m!==void 0?m:o.filterText;var v;let E=await f({items:o.items.slice(),selectedKeys:o.selectedKeys,sortDescriptor:(v=h.sortDescriptor)!==null&&v!==void 0?v:o.sortDescriptor,signal:p.signal,cursor:h.type==="loadingMore"?o.cursor:void 0,filterText:x,loadingState:o.state});var A;let w=(A=E.filterText)!==null&&A!==void 0?A:x;l({type:"success",...E,abortController:p}),w&&w!==x&&!p.signal.aborted&&c({type:"filtering",filterText:w},e)}catch(x){l({type:"error",error:x,abortController:p})}};let u=C.useRef(!1);return C.useEffect(()=>{u.current||(c({type:"loading"},e),u.current=!0)},[]),{items:o.items,selectedKeys:o.selectedKeys,sortDescriptor:o.sortDescriptor,isLoading:o.state==="loading"||o.state==="loadingMore"||o.state==="sorting"||o.state==="filtering",loadingState:o.state,error:o.error,filterText:o.filterText,getItem(h){return o.items.find(f=>s(f)===h)},reload(){c({type:"loading"},e)},loadMore(){o.state==="loading"||o.state==="loadingMore"||o.state==="filtering"||o.cursor==null||c({type:"loadingMore"},e)},sort(h){c({type:"sorting",sortDescriptor:h},n||e)},...Cie({...t,getKey:s,cursor:o.cursor},h=>{l({type:"update",updater:h})}),setFilterText(h){c({type:"filtering",filterText:h},e)}}}function $Be(t){let e=TI(t),[n,r]=C.useState(null),[i,s]=C.useState([]),a=()=>{s([]),e.close()};return{focusStrategy:n,...e,open(c=null){r(c),e.open()},toggle(c=null){r(c),e.toggle()},close(){a()},expandedKeysStack:i,openSubmenu:(c,u)=>{s(h=>u>h.length?h:[...h.slice(0,u),c])},closeSubmenu:(c,u)=>{s(h=>h[u]===c?h.slice(0,u):h)}}}let QBe=Math.round(Math.random()*1e10),UBe=0;function HBe(t){let e=C.useMemo(()=>t.name||`radio-group-${QBe}-${++UBe}`,[t.name]);var n;let[r,i]=Zl(t.value,(n=t.defaultValue)!==null&&n!==void 0?n:null,t.onChange),[s]=C.useState(r),[a,o]=C.useState(null),l=Ky({...t,value:r}),c=f=>{!t.isReadOnly&&!t.isDisabled&&(i(f),l.commitValidation())},u=l.displayValidation.isInvalid;var h;return{...l,name:e,selectedValue:r,defaultSelectedValue:t.value!==void 0?s:(h=t.defaultValue)!==null&&h!==void 0?h:null,setSelectedValue:c,lastFocusedValue:a,setLastFocusedValue:o,isDisabled:t.isDisabled||!1,isReadOnly:t.isReadOnly||!1,isRequired:t.isRequired||!1,validationState:t.validationState||(u?"invalid":null),isInvalid:u}}function GBe(t){let[e,n]=Zl(x7(t.value),x7(t.defaultValue)||"",t.onChange);return{value:e,setValue:n}}function x7(t){if(t!=null)return t.toString()}function VBe(t){let{selectionMode:e="single"}=t,n=TI(t),[r,i]=C.useState(null),s=C.useMemo(()=>{var B;return t.defaultValue!==void 0?t.defaultValue:e==="single"?(B=t.defaultSelectedKey)!==null&&B!==void 0?B:null:[]},[t.defaultValue,t.defaultSelectedKey,e]),a=C.useMemo(()=>t.value!==void 0?t.value:e==="single"?t.selectedKey:void 0,[t.value,t.selectedKey,e]),[o,l]=Zl(a,s,t.onChange),c=e==="single"&&Array.isArray(o)?o[0]:o,u=B=>{if(e==="single"){var D,T;let M=Array.isArray(B)?(T=B[0])!==null&&T!==void 0?T:null:B;l(M),M!==c&&((D=t.onSelectionChange)===null||D===void 0||D.call(t,M))}else{let M=[];Array.isArray(B)?M=B:B!=null&&(M=[B]),l(M)}},h=TF({...t,selectionMode:e,disallowEmptySelection:e==="single",allowDuplicateSelectionEvents:!0,selectedKeys:C.useMemo(()=>WBe(c),[c]),onSelectionChange:B=>{if(B!=="all"){if(e==="single"){var D;let T=(D=B.values().next().value)!==null&&D!==void 0?D:null;u(T),n.close()}else u([...B]);m.commitValidation()}}}),f=h.selectionManager.firstSelectedKey,p=C.useMemo(()=>[...h.selectionManager.selectedKeys].map(B=>h.collection.getItem(B)).filter(B=>B!=null),[h.selectionManager.selectedKeys,h.collection]),m=Ky({...t,value:Array.isArray(c)&&c.length===0?null:c}),[v,A]=C.useState(!1),[x]=C.useState(c);var E,w;return{...m,...h,...n,value:c,defaultValue:s??x,setValue:u,selectedKey:f,setSelectedKey:u,selectedItem:(E=p[0])!==null&&E!==void 0?E:null,selectedItems:p,defaultSelectedKey:(w=t.defaultSelectedKey)!==null&&w!==void 0?w:t.selectionMode==="single"?x:null,focusStrategy:r,open(B=null){h.collection.size!==0&&(i(B),n.open())},toggle(B=null){h.collection.size!==0&&(i(B),n.toggle())},isFocused:v,setFocused:A}}function WBe(t){if(t!==void 0)return t===null?[]:Array.isArray(t)?t:[t]}function KBe(t){var e,n;let r=xie({...t,onSelectionChange:t.onSelectionChange?l=>{var c;l!=null&&((c=t.onSelectionChange)===null||c===void 0||c.call(t,l))}:void 0,suppressTextValueWarning:!0,defaultSelectedKey:(n=(e=t.defaultSelectedKey)!==null&&e!==void 0?e:b7(t.collection,t.disabledKeys?new Set(t.disabledKeys):new Set))!==null&&n!==void 0?n:void 0}),{selectionManager:i,collection:s,selectedKey:a}=r,o=C.useRef(a);return C.useEffect(()=>{let l=a;t.selectedKey==null&&(i.isEmpty||l==null||!s.getItem(l))&&(l=b7(s,r.disabledKeys),l!=null&&i.setSelectedKeys([l])),(l!=null&&i.focusedKey==null||!i.isFocused&&l!==o.current)&&i.setFocusedKey(l),o.current=l}),{...r,isDisabled:t.isDisabled||!1}}function b7(t,e){let n=null;if(t){var r,i,s,a;for(n=t.getFirstKey();n!=null&&(e.has(n)||!((i=t.getItem(n))===null||i===void 0||(r=i.props)===null||r===void 0)&&r.isDisabled)&&n!==t.getLastKey();)n=t.getKeyAfter(n);n!=null&&(e.has(n)||!((a=t.getItem(n))===null||a===void 0||(s=a.props)===null||s===void 0)&&s.isDisabled)&&n===t.getLastKey()&&(n=t.getFirstKey())}return n}const $0=C.createContext(null),zT=C.forwardRef(function(e,n){let r=C.useContext($0);return r?.isInvalid?we.createElement(qBe,{...e,ref:n}):null}),qBe=C.forwardRef((t,e)=>{let n=C.useContext($0),r=Cr(t,{global:!0}),i=Wr({...t,defaultClassName:"react-aria-FieldError",defaultChildren:n.validationErrors.length===0?void 0:n.validationErrors.join(" "),values:n});return i.children==null?null:we.createElement(lE,{slot:"errorMessage",...r,...i,ref:e})}),Hb=C.createContext(null),YBe=C.createContext(null),N_=C.forwardRef(function(e,n){let{inputRef:r=null,...i}=e;[e,n]=Ai(i,n,Iwe);let{validationBehavior:s}=Af(Hb)||{};var a,o;let l=(o=(a=e.validationBehavior)!==null&&a!==void 0?a:s)!==null&&o!==void 0?o:"native",c=C.useContext(YBe),u=ah(C.useMemo(()=>wI(r,e.inputRef!==void 0?e.inputRef:null),[r,e.inputRef])),{labelProps:h,inputProps:f,isSelected:p,isDisabled:m,isReadOnly:v,isPressed:A,isInvalid:x}=c?G2e({...Rp(e),value:e.value,children:typeof e.children=="function"?!0:e.children},c,u):Bte({...Rp(e),children:typeof e.children=="function"?!0:e.children,validationBehavior:l},i4(e),u),{isFocused:E,isFocusVisible:w,focusProps:B}=mu(),D=m||v,{hoverProps:T,isHovered:M}=oh({...e,isDisabled:D}),R=Wr({...e,defaultClassName:"react-aria-Checkbox",values:{isSelected:p,isIndeterminate:e.isIndeterminate||!1,isPressed:A,isHovered:M,isFocused:E,isFocusVisible:w,isDisabled:m,isReadOnly:v,isInvalid:x,isRequired:e.isRequired||!1}}),k=Cr(e,{global:!0});return delete k.id,delete k.onClick,we.createElement("label",{...an(k,h,T,R),ref:n,slot:e.slot||void 0,"data-selected":p||void 0,"data-indeterminate":e.isIndeterminate||void 0,"data-pressed":A||void 0,"data-hovered":M||void 0,"data-focused":E||void 0,"data-focus-visible":w||void 0,"data-disabled":m||void 0,"data-readonly":v||void 0,"data-invalid":x||void 0,"data-required":e.isRequired||void 0},we.createElement(II,{elementType:"span"},we.createElement("input",{...an(f,B),ref:u})),R.children)}),MF=C.createContext(null),s4=C.forwardRef(function(e,n){let{state:r,thumbProps:i,inputXRef:s,inputYRef:a,xInputProps:o,yInputProps:l,isDisabled:c=!1}=C.useContext(MF),{focusProps:u,isFocused:h,isFocusVisible:f}=mu(),{hoverProps:p,isHovered:m}=oh(e),v=Wr({...e,defaultClassName:"react-aria-ColorThumb",defaultStyle:{...i.style,backgroundColor:r.getDisplayColor().toString()},values:{color:r.getDisplayColor(),isHovered:m,isDragging:r.isDragging,isFocused:h,isFocusVisible:f,isDisabled:c}}),A=Cr(e,{global:!0});return delete A.id,we.createElement("div",{...an(i,p,A),...v,ref:n,"data-hovered":m||void 0,"data-dragging":r.isDragging||void 0,"data-focused":h||void 0,"data-focus-visible":f||void 0,"data-disabled":c||void 0},we.createElement("input",{ref:s,...o,...u}),l&&we.createElement("input",{ref:a,...l,...u}),v.children)}),XBe=C.createContext(null),Sie=C.forwardRef(function(e,n){[e,n]=Ai(e,n,pX);let r=C.useRef(null),i=C.useRef(null),s=tBe(e),{colorAreaProps:a,xInputProps:o,yInputProps:l,thumbProps:c}=pBe({...e,inputXRef:r,inputYRef:i,containerRef:n},s),u=Wr({...e,defaultClassName:"react-aria-ColorArea",defaultStyle:a.style,values:{state:s,isDisabled:e.isDisabled||!1}}),h=Cr(e,{global:!0});return delete h.id,we.createElement("div",{ref:n,...an(h,a,u),slot:e.slot||void 0,"data-disabled":e.isDisabled||void 0},we.createElement(Zo,{values:[[XBe,s],[MF,{state:s,thumbProps:c,inputXRef:r,xInputProps:o,inputYRef:i,yInputProps:l,isDisabled:e.isDisabled}]]},u.children))}),HE=C.createContext({}),Gb=C.createContext({});let JBe=t=>{let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,...i}=t;return i};const br=Ub(function(e,n){[e,n]=Ai(e,n,Gb);let{hoverProps:r,isHovered:i}=oh(e),{isFocused:s,isFocusVisible:a,focusProps:o}=mu({isTextInput:!0,autoFocus:e.autoFocus}),l=!!e["aria-invalid"]&&e["aria-invalid"]!=="false",c=Wr({...e,values:{isHovered:i,isFocused:s,isFocusVisible:a,isDisabled:e.disabled||!1,isInvalid:l},defaultClassName:"react-aria-Input"});return we.createElement("input",{...an(JBe(e),o,r),...c,ref:n,"data-focused":s||void 0,"data-disabled":e.disabled||void 0,"data-hovered":i||void 0,"data-focus-visible":a||void 0,"data-invalid":l||void 0})}),ZBe=C.createContext(null),e3e=C.forwardRef(function(e,n){return[e,n]=Ai(e,n,gX),e.channel?we.createElement(t3e,{...e,channel:e.channel,forwardedRef:n}):we.createElement(n3e,{...e,forwardedRef:n})});function t3e(t){let{locale:e}=so(),n=cBe({...t,locale:e}),r=C.useRef(null),[i,s]=yf(!t["aria-label"]&&!t["aria-labelledby"]);var a;let{labelProps:o,inputProps:l,descriptionProps:c,errorMessageProps:u,...h}=bBe({...Rp(t),label:s,validationBehavior:(a=t.validationBehavior)!==null&&a!==void 0?a:"native"},n,r);return we.createElement(we.Fragment,null,wie(t,n,t.forwardedRef,l,r,o,i,c,u,h),t.name&&we.createElement("input",{type:"hidden",name:t.name,form:t.form,value:isNaN(n.numberValue)?"":n.numberValue}))}function n3e(t){var e;let n=lBe({...t,validationBehavior:(e=t.validationBehavior)!==null&&e!==void 0?e:"native"}),r=C.useRef(null),[i,s]=yf(!t["aria-label"]&&!t["aria-labelledby"]);var a;let{labelProps:o,inputProps:l,descriptionProps:c,errorMessageProps:u,...h}=ABe({...Rp(t),label:s,validationBehavior:(a=t.validationBehavior)!==null&&a!==void 0?a:"native"},n,r);return wie(t,n,t.forwardedRef,l,r,o,i,c,u,h)}function wie(t,e,n,r,i,s,a,o,l,c){let u=Wr({...t,values:{state:e,channel:t.channel||"hex",isDisabled:t.isDisabled||!1,isInvalid:c.isInvalid||!1},defaultClassName:"react-aria-ColorField"}),h=Cr(t,{global:!0});return delete h.id,we.createElement(Zo,{values:[[ZBe,e],[Gb,{...r,ref:i}],[lh,{...s,ref:a}],[HE,{role:"presentation",isInvalid:c.isInvalid,isDisabled:t.isDisabled||!1}],[vf,{slots:{description:o,errorMessage:l}}],[$0,c]]},we.createElement("div",{...h,...u,ref:n,slot:t.slot||void 0,"data-channel":t.channel||"hex","data-disabled":t.isDisabled||void 0,"data-invalid":c.isInvalid||void 0}))}const DF=C.createContext(null),r3e=C.forwardRef(function(e,n){[e,n]=Ai(e,n,DF);let{colorSwatchProps:r,color:i}=vBe(e),s=Wr({...e,defaultClassName:"react-aria-ColorSwatch",defaultStyle:r.style,values:{color:i}}),a=Cr(e,{global:!0});return we.createElement("div",{...an(a,r,s),slot:e.slot||void 0,ref:n})});var _ie={};_ie={colorSwatchPicker:" ",dropzoneLabel:"DropZone",selectPlaceholder:" ",tableResizer:"  "};var Iie={};Iie={colorSwatchPicker:" ",dropzoneLabel:"DropZone",selectPlaceholder:" ",tableResizer:""};var Bie={};Bie={colorSwatchPicker:"Vzorky barev",dropzoneLabel:"Msto pro petaen",selectPlaceholder:"Vyberte poloku",tableResizer:"Zmna velikosti"};var Tie={};Tie={colorSwatchPicker:"Farveprver",dropzoneLabel:"DropZone",selectPlaceholder:"Vlg et element",tableResizer:"Strrelsesndring"};var Mie={};Mie={colorSwatchPicker:"Farbfelder",dropzoneLabel:"Ablegebereich",selectPlaceholder:"Element whlen",tableResizer:"Grenanpassung"};var Die={};Die={colorSwatchPicker:" ",dropzoneLabel:"DropZone",selectPlaceholder:"  ",tableResizer:" "};var Rie={};Rie={selectPlaceholder:"Select an item",tableResizer:"Resizer",dropzoneLabel:"DropZone",colorSwatchPicker:"Color swatches"};var Pie={};Pie={colorSwatchPicker:"Muestras de colores",dropzoneLabel:"DropZone",selectPlaceholder:"Seleccionar un artculo",tableResizer:"Cambiador de tamao"};var kie={};kie={colorSwatchPicker:"Vrvinidised",dropzoneLabel:"DropZone",selectPlaceholder:"Valige ksus",tableResizer:"Suuruse muutja"};var Nie={};Nie={colorSwatchPicker:"Vrimallit",dropzoneLabel:"DropZone",selectPlaceholder:"Valitse kohde",tableResizer:"Koon muuttaja"};var Lie={};Lie={colorSwatchPicker:"chantillons de couleurs",dropzoneLabel:"DropZone",selectPlaceholder:"Slectionner un lment",tableResizer:"Redimensionneur"};var Fie={};Fie={colorSwatchPicker:" ",dropzoneLabel:"DropZone",selectPlaceholder:" ",tableResizer:" "};var jie={};jie={colorSwatchPicker:"Uzorci boja",dropzoneLabel:"Zona sputanja",selectPlaceholder:"Odaberite stavku",tableResizer:"Promjena veliine"};var Oie={};Oie={colorSwatchPicker:"Szntrak",dropzoneLabel:"DropZone",selectPlaceholder:"Vlasszon ki egy elemet",tableResizer:"tmretez"};var zie={};zie={colorSwatchPicker:"Campioni di colore",dropzoneLabel:"Zona di rilascio",selectPlaceholder:"Seleziona un elemento",tableResizer:"Ridimensionamento"};var $ie={};$ie={colorSwatchPicker:"",dropzoneLabel:"",selectPlaceholder:"",tableResizer:""};var Qie={};Qie={colorSwatchPicker:" ",dropzoneLabel:" ",selectPlaceholder:" ",tableResizer:" "};var Uie={};Uie={colorSwatchPicker:"Spalv pavyzdiai",dropzoneLabel:"DropZone",selectPlaceholder:"Pasirinkite element",tableResizer:"Dydio keitiklis"};var Hie={};Hie={colorSwatchPicker:"Krsu paraugi",dropzoneLabel:"DropZone",selectPlaceholder:"Izvlties vienumu",tableResizer:"Izmra maintjs"};var Gie={};Gie={colorSwatchPicker:"Fargekart",dropzoneLabel:"Droppsone",selectPlaceholder:"Velg et element",tableResizer:"Strrelsesendrer"};var Vie={};Vie={colorSwatchPicker:"kleurstalen",dropzoneLabel:"DropZone",selectPlaceholder:"Selecteer een item",tableResizer:"Resizer"};var Wie={};Wie={colorSwatchPicker:"Prbki kolorw",dropzoneLabel:"Strefa upuszczania",selectPlaceholder:"Wybierz element",tableResizer:"Zmiana rozmiaru"};var Kie={};Kie={colorSwatchPicker:"Amostras de cores",dropzoneLabel:"DropZone",selectPlaceholder:"Selecione um item",tableResizer:"Redimensionador"};var qie={};qie={colorSwatchPicker:"Amostras de cores",dropzoneLabel:"DropZone",selectPlaceholder:"Selecione um item",tableResizer:"Redimensionador"};var Yie={};Yie={colorSwatchPicker:"Specimene de culoare",dropzoneLabel:"Zon de plasare",selectPlaceholder:"Selectai un element",tableResizer:"Instrument de redimensionare"};var Xie={};Xie={colorSwatchPicker:" ",dropzoneLabel:"DropZone",selectPlaceholder:" ",tableResizer:"  "};var Jie={};Jie={colorSwatchPicker:"Vzorkovnky farieb",dropzoneLabel:"DropZone",selectPlaceholder:"Vyberte poloku",tableResizer:"Nstroj na zmenu vekosti"};var Zie={};Zie={colorSwatchPicker:"Barvne palete",dropzoneLabel:"DropZone",selectPlaceholder:"Izberite element",tableResizer:"Spreminjanje velikosti"};var ese={};ese={colorSwatchPicker:"Uzorci boje",dropzoneLabel:"DropZone",selectPlaceholder:"Izaberite stavku",tableResizer:"Promena veliine"};var tse={};tse={colorSwatchPicker:"Frgrutor",dropzoneLabel:"DropZone",selectPlaceholder:"Vlj en artikel",tableResizer:"Storleksndrare"};var nse={};nse={colorSwatchPicker:"Renk rnekleri",dropzoneLabel:"Brakma Blgesi",selectPlaceholder:"Bir e sein",tableResizer:"Yeniden boyutlandrc"};var rse={};rse={colorSwatchPicker:" ",dropzoneLabel:"DropZone",selectPlaceholder:" ",tableResizer:"  "};var ise={};ise={colorSwatchPicker:"",dropzoneLabel:"",selectPlaceholder:"",tableResizer:""};var sse={};sse={colorSwatchPicker:"",dropzoneLabel:"",selectPlaceholder:"",tableResizer:""};var RF={};RF={"ar-AE":_ie,"bg-BG":Iie,"cs-CZ":Bie,"da-DK":Tie,"de-DE":Mie,"el-GR":Die,"en-US":Rie,"es-ES":Pie,"et-EE":kie,"fi-FI":Nie,"fr-FR":Lie,"he-IL":Fie,"hr-HR":jie,"hu-HU":Oie,"it-IT":zie,"ja-JP":$ie,"ko-KR":Qie,"lt-LT":Uie,"lv-LV":Hie,"nb-NO":Gie,"nl-NL":Vie,"pl-PL":Wie,"pt-BR":Kie,"pt-PT":qie,"ro-RO":Yie,"ru-RU":Xie,"sk-SK":Jie,"sl-SI":Zie,"sr-SP":ese,"sv-SE":tse,"tr-TR":nse,"uk-UA":rse,"zh-CN":ise,"zh-TW":sse};const a4=C.createContext({}),ase=C.createContext(null),i3e=C.forwardRef(function(e,n){let{render:r}=C.useContext(ase);return we.createElement(we.Fragment,null,r(e,n))});function ose(t,e){var n;let r=t?.renderDropIndicator,i=t==null||(n=t.isVirtualDragging)===null||n===void 0?void 0:n.call(t),s=C.useCallback(a=>{if(i||e?.isDropTarget(a))return r?r(a):we.createElement(i3e,{target:a})},[e?.target,i,r]);return t?.useDropIndicator?s:void 0}function s3e(t,e,n){var r,i;let s=t.focusedKey,a=null;if(!(e==null||(r=e.isVirtualDragging)===null||r===void 0)&&r.call(e)&&(n==null||(i=n.target)===null||i===void 0?void 0:i.type)==="item"&&(a=n.target.key,n.target.dropPosition==="after")){let h=n.collection.getKeyAfter(a),f=null;if(h!=null){var o,l;let p=(l=(o=n.collection.getItem(a))===null||o===void 0?void 0:o.level)!==null&&l!==void 0?l:0;for(;h;){let m=n.collection.getItem(h);if(!m)break;if(m.type!=="item"){h=n.collection.getKeyAfter(h);continue}var c;if(((c=m.level)!==null&&c!==void 0?c:0)<=p)break;f=h,h=n.collection.getKeyAfter(h)}}var u;a=(u=h??f)!==null&&u!==void 0?u:a}return C.useMemo(()=>new Set([s,a].filter(h=>h!=null)),[s,a])}const a3e=C.createContext({}),lse=C.createContext(null);function o4(t){let e=C.useRef({});return we.createElement(lse.Provider,{value:e},t.children)}const o3e=C.forwardRef(function(e,n){let{name:r,isVisible:i=!0,children:s,className:a,style:o,...l}=e,[c,u]=C.useState(i?"visible":"hidden"),h=C.useContext(lse);if(!h)throw new Error("<SharedElement> must be rendered inside a <SharedElementTransition>");i&&c==="hidden"&&u("visible"),n=ah(n),Fi(()=>{let p=n.current,m=h.current,v=m[r],A=null;if(p&&i&&v){u("visible");let x=p.getAnimations(),E=v.style.map(([w,B])=>{let D=p.style[w];if(w==="translate"){let T=v.rect,M=p.getBoundingClientRect(),R=T.left-M?.left,k=T.top-M?.top;p.style.translate=`${R}px ${k}px`}else p.style[w]=B;return[w,D]});for(let w of p.getAnimations())x.includes(w)||w.cancel();A=requestAnimationFrame(()=>{A=null;for(let[w,B]of E)p.style[w]=B}),delete m[r]}else p&&i&&!v?(queueMicrotask(()=>gb.flushSync(()=>u("entering"))),A=requestAnimationFrame(()=>{A=null,u("visible")})):p&&!i&&queueMicrotask(()=>{m[r]?(delete m[r],gb.flushSync(()=>u("exiting")),Promise.all(p.getAnimations().map(x=>x.finished)).then(()=>u("hidden")).catch(()=>{})):u("hidden")});return()=>{if(A!=null&&cancelAnimationFrame(A),p&&p.isConnected&&!p.hasAttribute("data-exiting")){let x=window.getComputedStyle(p);if(x.transitionProperty!=="none"){let E=x.transitionProperty.split(/\s*,\s*/);m[r]={rect:p.getBoundingClientRect(),style:E.map(w=>[w,x[w]])}}}}},[n,h,r,i]);let f=Wr({children:s,className:a,style:o,values:{isEntering:c==="entering",isExiting:c==="exiting"}});return c==="hidden"?null:we.createElement("div",{...l,...f,ref:n,"data-entering":c==="entering"||void 0,"data-exiting":c==="exiting"||void 0})}),MI=C.createContext({isSelected:!1}),l3e=C.forwardRef(function(e,n){[e,n]=Ai(e,n,MI);let{isSelected:r,...i}=e;return we.createElement(o3e,{...i,ref:n,className:e.className||"react-aria-SelectionIndicator",name:"SelectionIndicator",isVisible:r})}),c3e=C.createContext({});class u3e extends Qb{filter(e,n){let r=n.getItem(this.prevKey);if(r&&r.type!=="separator"){let i=this.clone();return n.addDescendants(i,e),i}return null}}u3e.type="separator";const DI=C.createContext(null),Vb=C.createContext(null),$i=C.forwardRef(function(e,n){[e,n]=Ai(e,n,DI);let r=C.useContext(Vb);return r?we.createElement(cse,{state:r,props:e,listBoxRef:n}):we.createElement(r4,{content:we.createElement(Ete,e)},i=>we.createElement(d3e,{props:e,listBoxRef:n,collection:i}))});function d3e({props:t,listBoxRef:e,collection:n}){t={...t,collection:n,children:null,items:null};let{layoutDelegate:r}=C.useContext(BI),i=TF({...t,layoutDelegate:r});return we.createElement(cse,{state:i,props:t,listBoxRef:e})}function cse({state:t,props:e,listBoxRef:n}){[e,n]=Ai(e,n,Twe);let{dragAndDropHooks:r,layout:i="stack",orientation:s="vertical",filter:a}=e,o=FBe(t,a),{collection:l,selectionManager:c}=o,u=!!r?.useDraggableCollectionState,h=!!r?.useDroppableCollectionState,{direction:f}=so(),{disabledBehavior:p,disabledKeys:m}=c,v=KM({usage:"search",sensitivity:"base"}),{isVirtualized:A,layoutDelegate:x,dropTargetDelegate:E,CollectionRoot:w}=C.useContext(BI),B=C.useMemo(()=>e.keyboardDelegate||new ZM({collection:l,collator:v,ref:n,disabledKeys:m,disabledBehavior:p,layout:i,orientation:s,direction:f,layoutDelegate:x}),[l,v,n,p,m,s,f,e.keyboardDelegate,i,x]),{listBoxProps:D}=n2e({...e,shouldSelectOnPressUp:u||e.shouldSelectOnPressUp,keyboardDelegate:B,isVirtualized:A},o,n);C.useRef(u),C.useRef(h),C.useEffect(()=>{},[u,h]);let T,M,R,k=!1,L=null,F=C.useRef(null);if(u&&r){T=r.useDraggableCollectionState({collection:l,selectionManager:c,preview:r.renderDragPreview?F:void 0}),r.useDraggableCollection({},T,n);let re=r.DragPreview;L=r.renderDragPreview?we.createElement(re,{ref:F},r.renderDragPreview):null}if(h&&r){M=r.useDroppableCollectionState({collection:l,selectionManager:c});let re=r.dropTargetDelegate||E||new r.ListDropTargetDelegate(l,n,{orientation:s,layout:i,direction:f});R=r.useDroppableCollection({keyboardDelegate:B,dropTargetDelegate:re},M,n),k=M.isDropTarget({type:"root"})}let{focusProps:z,isFocused:G,isFocusVisible:V}=mu(),q=o.collection.size===0,O={isDropTarget:k,isEmpty:q,isFocused:G,isFocusVisible:V,layout:e.layout||"stack",state:o},H=Wr({className:e.className,style:e.style,defaultClassName:"react-aria-ListBox",values:O}),K=null;q&&e.renderEmptyState&&(K=we.createElement("div",{role:"option",style:{display:"contents"}},e.renderEmptyState(O)));let X=Cr(e,{global:!0});return we.createElement(AF,null,we.createElement("div",{...an(X,H,D,z,R?.collectionProps),ref:n,slot:e.slot||void 0,onScroll:e.onScroll,"data-drop-target":k||void 0,"data-empty":q||void 0,"data-focused":G||void 0,"data-focus-visible":V||void 0,"data-layout":e.layout||"stack","data-orientation":e.orientation||"vertical"},we.createElement(Zo,{values:[[DI,e],[Vb,o],[a4,{dragAndDropHooks:r,dragState:T,dropState:M}],[c3e,{elementType:"div"}],[ase,{render:f3e}],[F2e,{name:"ListBoxSection",render:h3e}]]},we.createElement(o4,null,we.createElement(w,{collection:l,scrollRef:n,persistedKeys:s3e(c,r,M),renderDropIndicator:ose(r,M)}))),K,L))}function h3e(t,e,n,r="react-aria-ListBoxSection"){let i=C.useContext(Vb),{dragAndDropHooks:s,dropState:a}=C.useContext(a4),{CollectionBranch:o}=C.useContext(BI),[l,c]=yf();var u;let{headingProps:h,groupProps:f}=c2e({heading:c,"aria-label":(u=t["aria-label"])!==null&&u!==void 0?u:void 0}),p=Wr({defaultClassName:r,className:t.className,style:t.style,values:{}}),m=Cr(t,{global:!0});return delete m.id,we.createElement("section",{...an(m,p,f),ref:e},we.createElement(a3e.Provider,{value:{...h,ref:l}},we.createElement(o,{collection:i.collection,parent:n,renderDropIndicator:ose(s,a)})))}const Sr=EF(Ate,function(e,n,r){let i=ah(n),s=C.useContext(Vb),{dragAndDropHooks:a,dragState:o,dropState:l}=C.useContext(a4),{optionProps:c,labelProps:u,descriptionProps:h,...f}=l2e({key:r.key,"aria-label":e?.["aria-label"]},s,i),{hoverProps:p,isHovered:m}=oh({isDisabled:!f.allowsSelection&&!f.hasAction,onHoverStart:r.props.onHoverStart,onHoverChange:r.props.onHoverChange,onHoverEnd:r.props.onHoverEnd}),v=null;o&&a&&(v=a.useDraggableItem({key:r.key},o));let A=null;l&&a&&(A=a.useDroppableItem({target:{type:"item",key:r.key,dropPosition:"on"}},l,i));let x=o&&o.isDragging(r.key),E=Wr({...e,id:void 0,children:e.children,defaultClassName:"react-aria-ListBoxItem",values:{...f,isHovered:m,selectionMode:s.selectionManager.selectionMode,selectionBehavior:s.selectionManager.selectionBehavior,allowsDragging:!!o,isDragging:x,isDropTarget:A?.isDropTarget}});C.useEffect(()=>{r.textValue},[r.textValue]);let w=e.href?"a":"div",B=Cr(e,{global:!0});return delete B.id,delete B.onClick,we.createElement(w,{...an(B,E,c,p,v?.dragProps,A?.dropProps),ref:i,"data-allows-dragging":!!o||void 0,"data-selected":f.isSelected||void 0,"data-disabled":f.isDisabled||void 0,"data-hovered":m||void 0,"data-focused":f.isFocused||void 0,"data-focus-visible":f.isFocusVisible||void 0,"data-pressed":f.isPressed||void 0,"data-dragging":x||void 0,"data-drop-target":A?.isDropTarget||void 0,"data-selection-mode":s.selectionManager.selectionMode==="none"?void 0:s.selectionManager.selectionMode},we.createElement(Zo,{values:[[vf,{slots:{[_T]:u,label:u,description:h}}],[MI,{isSelected:f.isSelected}]]},E.children))});function f3e(t,e){e=ah(e);let{dragAndDropHooks:n,dropState:r}=C.useContext(a4),{dropIndicatorProps:i,isHidden:s,isDropTarget:a}=n.useDropIndicator(t,r,e);return s?null:we.createElement(g3e,{...t,dropIndicatorProps:i,isDropTarget:a,ref:e})}function p3e(t,e){let{dropIndicatorProps:n,isDropTarget:r,...i}=t,s=Wr({...i,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:r}});return we.createElement("div",{...n,...s,role:"option",ref:e,"data-drop-target":r||void 0})}const g3e=C.forwardRef(p3e);EF(mte,function(e,n,r){let i=C.useContext(Vb),{isLoading:s,onLoadMore:a,scrollOffset:o,...l}=e,c=C.useRef(null),u=C.useMemo(()=>({onLoadMore:a,collection:i?.collection,sentinelRef:c,scrollOffset:o}),[a,o,i?.collection]);g_e(u,c);let h=Wr({...l,id:void 0,children:r.rendered,defaultClassName:"react-aria-ListBoxLoadingIndicator",values:null}),f={tabIndex:-1};return we.createElement(we.Fragment,null,we.createElement("div",{style:{position:"relative",width:0,height:0},inert:$5(!0)},we.createElement("div",{"data-testid":"loadMoreSentinel",ref:c,style:{position:"absolute",height:1,width:1}})),s&&h.children&&we.createElement("div",{...an(Cr(e,{global:!0}),f),...h,role:"option",ref:n},h.children))});function m3e(t){return t&&t.__esModule?t.default:t}const use=C.createContext(null),dse=C.createContext(null),A3e=C.forwardRef(function(e,n){[e,n]=Ai(e,n,use);let r=Kne(e),i=C.useMemo(()=>new Map,[]),s=Yg(m3e(RF),"react-aria-components");return we.createElement($i,{...Cr(e,{labelable:!0}),ref:n,className:e.className||"react-aria-ColorSwatchPicker",style:e.style,"aria-label":e["aria-label"]||(e["aria-labelledby"]?void 0:s.format("colorSwatchPicker")),layout:e.layout||"grid",selectionMode:"single",selectedKeys:[r.color.toString("hexa")],onSelectionChange:a=>{a!=="all"&&r.setColor(i.get([...a][0]))},disallowEmptySelection:!0},we.createElement(dse.Provider,{value:i},e.children))}),y3e=C.forwardRef(function(e,n){let r=e.color||"#0000",i=C.useMemo(()=>typeof r=="string"?cd(r):r,[r]),{locale:s}=so(),a=C.useContext(dse);C.useEffect(()=>{let l=i.toString("hexa");return a.set(l,i),()=>{a.delete(l)}},[i,a]);let o=l=>typeof l=="function"?c=>l({...c,color:i}):l;return we.createElement(Sr,{...e,ref:n,id:i.toString("hexa"),textValue:i.getColorName(s),className:o(e.className||"react-aria-ColorSwatchPickerItem"),style:o(e.style)},Vy(o(e.children),l=>we.createElement(DF.Provider,{value:{color:i}},l)))}),v3e=C.createContext(null),x3e=C.createContext(null);function b3e(t){let e=Af(v3e,t.slot);t=an(e,t);let n=Kne(t),r=Wr({...t,values:{color:n.color}});return we.createElement(Zo,{values:[[x3e,n],[mX,{value:n.color,onChange:n.setColor}],[pX,{value:n.color,onChange:n.setColor}],[Bwe,{value:n.color,onChange:n.setColor}],[gX,{value:n.color,onChange:n.setColor}],[DF,{color:n.color}],[use,{value:n.color,onChange:n.setColor}]]},r.children)}const C3e=C.createContext(null),RI=C.createContext(null),l4=C.createContext(null),PF=C.createContext(null),E3e=C.forwardRef(function(e,n){[e,n]=Ai(e,n,C3e);let r=C.useRef(null),i=K5(e.formatOptions),s=Gne({...e,numberFormatter:i}),[a,o]=yf(!e["aria-label"]&&!e["aria-labelledby"]),{groupProps:l,trackProps:c,labelProps:u,outputProps:h}=Xne({...e,label:o},s,r),f=Wr({...e,values:{orientation:s.orientation,isDisabled:s.isDisabled,state:s},defaultClassName:"react-aria-Slider"}),p=Cr(e,{global:!0});return delete p.id,we.createElement(Zo,{values:[[RI,s],[l4,{...c,ref:r}],[PF,h],[lh,{...u,ref:a}]]},we.createElement("div",{...an(p,f,l),ref:n,slot:e.slot||void 0,"data-orientation":s.orientation,"data-disabled":s.isDisabled||void 0}))}),S3e=C.forwardRef(function(e,n){[e,n]=Ai(e,n,PF);let{children:r,style:i,className:s,...a}=e,o=C.useContext(RI),l=Wr({className:s,style:i,children:r,defaultChildren:o.getThumbValueLabel(0),defaultClassName:"react-aria-SliderOutput",values:{orientation:o.orientation,isDisabled:o.isDisabled,state:o}});return we.createElement("output",{...a,...l,ref:n,"data-orientation":o.orientation||void 0,"data-disabled":o.isDisabled||void 0})}),kF=C.forwardRef(function(e,n){[e,n]=Ai(e,n,l4);let r=C.useContext(RI),{onHoverStart:i,onHoverEnd:s,onHoverChange:a,...o}=e,{hoverProps:l,isHovered:c}=oh({onHoverStart:i,onHoverEnd:s,onHoverChange:a}),u=Wr({...e,defaultClassName:"react-aria-SliderTrack",values:{orientation:r.orientation,isDisabled:r.isDisabled,isHovered:c,state:r}});return we.createElement("div",{...an(o,l),...u,ref:n,"data-hovered":c||void 0,"data-orientation":r.orientation||void 0,"data-disabled":r.isDisabled||void 0})}),w3e=C.forwardRef(function(e,n){let{inputRef:r=null}=e,i=C.useContext(RI),{ref:s}=Af(l4),{index:a=0}=e,o=C.useRef(null),l=r||o,[c,u]=yf(!e["aria-label"]&&!e["aria-labelledby"]),{thumbProps:h,inputProps:f,labelProps:p,isDragging:m,isFocused:v,isDisabled:A}=Jne({...e,index:a,trackRef:s,inputRef:l,label:u},i),{focusProps:x,isFocusVisible:E}=mu(),{hoverProps:w,isHovered:B}=oh(e),D=Wr({...e,defaultClassName:"react-aria-SliderThumb",values:{state:i,isHovered:B,isDragging:m,isFocused:v,isFocusVisible:E,isDisabled:A}}),T=Cr(e,{global:!0});return delete T.id,we.createElement("div",{...an(T,h,w),...D,ref:n,style:{...h.style,...D.style},"data-hovered":B||void 0,"data-dragging":m||void 0,"data-focused":v||void 0,"data-focus-visible":E||void 0,"data-disabled":A||void 0},we.createElement(II,null,we.createElement("input",{ref:l,...an(f,x)})),we.createElement(Zo,{values:[[lh,{...p,ref:c}]]},D.children))}),_3e=C.createContext(null),hse=C.forwardRef(function(e,n){[e,n]=Ai(e,n,mX);let{locale:r}=so(),i=sBe({...e,locale:r}),s=we.useRef(null),a=we.useRef(null),[o,l]=yf(!e["aria-label"]&&!e["aria-labelledby"]),{trackProps:c,thumbProps:u,inputProps:h,labelProps:f,outputProps:p}=gBe({...e,label:l,trackRef:s,inputRef:a},i),m=Wr({...e,values:{orientation:i.orientation,isDisabled:i.isDisabled,state:i},defaultClassName:"react-aria-ColorSlider"}),v=Cr(e,{global:!0});return delete v.id,we.createElement(Zo,{values:[[_3e,i],[RI,i],[l4,{...c,ref:s}],[PF,p],[lh,{...f,ref:o,children:i.value.getChannelName(e.channel,r)}],[MF,{state:i,thumbProps:u,inputXRef:a,xInputProps:h,isDisabled:e.isDisabled}]]},we.createElement("div",{...v,...m,ref:n,slot:e.slot||void 0,"data-orientation":i.orientation,"data-disabled":i.isDisabled||void 0}))}),fse=C.createContext({placement:"bottom"}),I3e=C.forwardRef(function(e,n){[e,n]=Ai(e,n,fse);let r=e.placement,i={position:"absolute",transform:r==="top"||r==="bottom"?"translateX(-50%)":"translateY(-50%)"};r!=null&&(i[r]="100%");let s=Wr({...e,defaultClassName:"react-aria-OverlayArrow",values:{placement:r}});s.style&&Object.keys(s.style).forEach(o=>s.style[o]===void 0&&delete s.style[o]);let a=Cr(e);return we.createElement("div",{...a,...s,style:{...i,...s.style},ref:n,"data-placement":r})}),c4=C.createContext(null),C7=C.createContext(null),gs=C.forwardRef(function(e,n){[e,n]=Ai(e,n,c4);let r=C.useContext(Yy),i=TI(e),s=e.isOpen!=null||e.defaultOpen!=null||!r?i:r,a=Q5(n,s.isOpen)||e.isExiting||!1,o=_2e(),{direction:l}=so();if(o){let c=e.children;return typeof c=="function"&&(c=c({trigger:e.trigger||null,placement:"bottom",isEntering:!1,isExiting:!1,defaultChildren:null})),we.createElement(we.Fragment,null,c)}return s&&!s.isOpen&&!a?null:we.createElement(B3e,{...e,triggerRef:e.triggerRef,state:s,popoverRef:n,isExiting:a,dir:l})});function B3e({state:t,isExiting:e,UNSTABLE_portalContainer:n,clearContexts:r,...i}){let s=C.useRef(null),a=C.useRef(null),o=C.useContext(C7),l=o&&i.trigger==="SubmenuTrigger";var c;let{popoverProps:u,underlayProps:h,arrowProps:f,placement:p,triggerAnchorPoint:m}=KIe({...i,offset:(c=i.offset)!==null&&c!==void 0?c:8,arrowRef:s,groupRef:l?o:a},t),v=i.popoverRef,A=lF(v,!!p)||i.isEntering||!1,x=Wr({...i,defaultClassName:"react-aria-Popover",values:{trigger:i.trigger||null,placement:p,isEntering:A,isExiting:e}}),E=!i.isNonModal||i.trigger==="SubmenuTrigger",[w,B]=C.useState(!1);Fi(()=>{v.current&&B(E&&!v.current.querySelector("[role=dialog]"))},[v,E]),C.useEffect(()=>{w&&i.trigger!=="SubmenuTrigger"&&v.current&&!v.current.contains(document.activeElement)&&zy(v.current)},[w,v,i.trigger]);let D=C.useMemo(()=>{let k=x.children;if(r)for(let L of r)k=we.createElement(L.Provider,{value:null},k);return k},[x.children,r]),T={...u.style,"--trigger-anchor-point":m?`${m.x}px ${m.y}px`:void 0,...x.style},M=we.createElement("div",{...an(Cr(i,{global:!0}),u),...x,role:w?"dialog":void 0,tabIndex:w?-1:void 0,"aria-label":i["aria-label"],"aria-labelledby":i["aria-labelledby"],ref:v,slot:i.slot||void 0,style:T,dir:i.dir,"data-trigger":i.trigger,"data-placement":p,"data-entering":A||void 0,"data-exiting":e||void 0},!i.isNonModal&&we.createElement(sL,{onDismiss:t.close}),we.createElement(fse.Provider,{value:{...f,placement:p,ref:s}},D),we.createElement(sL,{onDismiss:t.close}));if(!l)return we.createElement(aL,{...i,shouldContainFocus:w,isExiting:e,portalContainer:n},!i.isNonModal&&t.isOpen&&we.createElement("div",{"data-testid":"underlay",...h,style:{position:"fixed",inset:0}}),we.createElement("div",{ref:a,style:{display:"contents"}},we.createElement(C7.Provider,{value:a},M)));var R;return we.createElement(aL,{...i,shouldContainFocus:w,isExiting:e,portalContainer:(R=n??o?.current)!==null&&R!==void 0?R:void 0},M)}const T3e=C.createContext(null);class M3e extends Qb{filter(e,n,r){let i=e.getItem(this.firstChildKey);if(i&&r(i.textValue,this)){let s=this.clone();return n.addDescendants(s,e),s}return null}}M3e.type="submenutrigger";const pse=C.createContext(null),Yy=C.createContext(null);function cE(t){let e=$Be(t),n=C.useRef(null),{triggerProps:r,overlayProps:i}=sZ({type:"dialog"},e,n),[s,a]=C.useState(null),o=C.useCallback(()=>{n.current&&a(n.current.offsetWidth+"px")},[n]);return D_({ref:n,onResize:o}),r.id=ro(),i["aria-labelledby"]=r.id,we.createElement(Zo,{values:[[Yy,e],[T3e,e],[pse,i],[c4,{trigger:"DialogTrigger",triggerRef:n,"aria-labelledby":i["aria-labelledby"],style:{"--trigger-width":s}}]]},we.createElement(SIe,{...r,ref:n,isPressed:e.isOpen},t.children))}const gse=C.forwardRef(function(e,n){let r=e["aria-labelledby"];[e,n]=Ai(e,n,pse);let{dialogProps:i,titleProps:s}=CBe({...e,"aria-labelledby":r},n),a=C.useContext(Yy);!i["aria-label"]&&!i["aria-labelledby"]&&e["aria-labelledby"]&&(i["aria-labelledby"]=e["aria-labelledby"]);let o=Wr({defaultClassName:"react-aria-Dialog",className:e.className,style:e.style,children:e.children,values:{close:a?.close||(()=>{})}}),l=Cr(e,{global:!0});return we.createElement("section",{...an(l,o,i),ref:n,slot:e.slot||void 0},we.createElement(Zo,{values:[[AX,{slots:{[_T]:{},title:{...s,level:2}}}],[qy,{slots:{[_T]:{},close:{onPress:()=>a?.close()}}}]]},o.children))}),D3e=C.createContext(null),R3e=C.createContext(null),$T=C.forwardRef(function(e,n){[e,n]=Ai(e,n,D3e);let{children:r,isDisabled:i=!1,isInvalid:s=!1,isRequired:a=!1}=e,o=C.useMemo(()=>{var l;return we.createElement(DI.Provider,{value:{items:(l=e.items)!==null&&l!==void 0?l:e.defaultItems}},typeof r=="function"?r({isOpen:!1,isDisabled:i,isInvalid:s,isRequired:a,defaultChildren:null}):r)},[r,i,s,a,e.items,e.defaultItems]);return we.createElement(r4,{content:o},l=>we.createElement(k3e,{props:e,collection:l,comboBoxRef:n}))}),P3e=[lh,qy,Gb,HE,vf];function k3e({props:t,collection:e,comboBoxRef:n}){let{name:r,formValue:i="key",allowsCustomValue:s}=t;s&&(i="text");let{validationBehavior:a}=Af(Hb)||{};var o,l;let c=(l=(o=t.validationBehavior)!==null&&o!==void 0?o:a)!==null&&l!==void 0?l:"native",{contains:u}=aIe({sensitivity:"base"}),h=jBe({defaultFilter:t.defaultFilter||u,...t,items:t.items,children:void 0,collection:e,validationBehavior:c}),f=C.useRef(null),p=C.useRef(null),m=C.useRef(null),v=C.useRef(null),[A,x]=yf(!t["aria-label"]&&!t["aria-labelledby"]),{buttonProps:E,inputProps:w,listBoxProps:B,labelProps:D,descriptionProps:T,errorMessageProps:M,...R}=y2e({...Rp(t),label:x,inputRef:p,buttonRef:f,listBoxRef:m,popoverRef:v,name:i==="text"?r:void 0,validationBehavior:c},h),[k,L]=C.useState(null),F=C.useCallback(()=>{if(p.current){var O;let H=(O=f.current)===null||O===void 0?void 0:O.getBoundingClientRect(),K=p.current.getBoundingClientRect(),X=H?Math.min(H.left,K.left):K.left,re=H?Math.max(H.right,K.right):K.right;L(re-X+"px")}},[f,p,L]);D_({ref:p,onResize:F});let z=C.useMemo(()=>({isOpen:h.isOpen,isDisabled:t.isDisabled||!1,isInvalid:R.isInvalid||!1,isRequired:t.isRequired||!1}),[h.isOpen,t.isDisabled,R.isInvalid,t.isRequired]),G=Wr({...t,values:z,defaultClassName:"react-aria-ComboBox"}),V=Cr(t,{global:!0});delete V.id;var q;return we.createElement(Zo,{values:[[R3e,h],[lh,{...D,ref:A}],[qy,{...E,ref:f,isPressed:h.isOpen}],[Gb,{...w,ref:p}],[Yy,h],[c4,{ref:v,triggerRef:p,scrollRef:m,placement:"bottom start",isNonModal:!0,trigger:"ComboBox",style:{"--trigger-width":k},clearContexts:P3e}],[DI,{...B,ref:m}],[Vb,h],[vf,{slots:{description:T,errorMessage:M}}],[HE,{isInvalid:R.isInvalid,isDisabled:t.isDisabled||!1}],[$0,R]]},we.createElement("div",{...V,...G,ref:n,slot:t.slot||void 0,"data-focused":h.isFocused||void 0,"data-open":h.isOpen||void 0,"data-disabled":t.isDisabled||void 0,"data-invalid":R.isInvalid||void 0,"data-required":t.isRequired||void 0}),r&&i==="key"&&we.createElement("input",{type:"hidden",name:r,form:t.form,value:(q=h.selectedKey)!==null&&q!==void 0?q:""}))}const N3e=C.forwardRef(function(e,n){[e,n]=Ai(e,n,AX);let{children:r,level:i=3,className:s,...a}=e,o=`h${i}`;return we.createElement(o,{...a,ref:n,className:s??"react-aria-Heading"},r)}),L3e=C.createContext(null),NF=C.createContext(null),F3e=C.forwardRef(function(e,n){if(C.useContext(NF))return we.createElement(E7,{...e,modalRef:n},e.children);let{isDismissable:i,isKeyboardDismissDisabled:s,isOpen:a,defaultOpen:o,onOpenChange:l,children:c,isEntering:u,isExiting:h,UNSTABLE_portalContainer:f,shouldCloseOnInteractOutside:p,...m}=e;return we.createElement(O3e,{isDismissable:i,isKeyboardDismissDisabled:s,isOpen:a,defaultOpen:o,onOpenChange:l,isEntering:u,isExiting:h,UNSTABLE_portalContainer:f,shouldCloseOnInteractOutside:p},we.createElement(E7,{...m,modalRef:n},c))});function j3e(t,e){[t,e]=Ai(t,e,L3e);let n=C.useContext(Yy),r=TI(t),i=t.isOpen!=null||t.defaultOpen!=null||!n?r:n,s=ah(e),a=C.useRef(null),o=Q5(s,i.isOpen),l=Q5(a,i.isOpen),c=o||l||t.isExiting||!1,u=zb();return!i.isOpen&&!c||u?null:we.createElement(z3e,{...t,state:i,isExiting:c,overlayRef:s,modalRef:a})}const O3e=C.forwardRef(j3e);function z3e({UNSTABLE_portalContainer:t,...e}){let n=e.modalRef,{state:r}=e,{modalProps:i,underlayProps:s}=qIe(e,r,n),a=lF(e.overlayRef)||e.isEntering||!1,o=Wr({...e,defaultClassName:"react-aria-ModalOverlay",values:{isEntering:a,isExiting:e.isExiting,state:r}}),l=d_e(),c;if(typeof document<"u"){let h=bb(document.body)?document.body:document.scrollingElement||document.documentElement,f=h.getBoundingClientRect().height%1;c=h.scrollHeight-f}let u={...o.style,"--visual-viewport-height":l.height+"px","--page-height":c!==void 0?c+"px":void 0};return we.createElement(aL,{isExiting:e.isExiting,portalContainer:t},we.createElement("div",{...an(Cr(e,{global:!0}),s),...o,style:u,ref:e.overlayRef,"data-entering":a||void 0,"data-exiting":e.isExiting||void 0},we.createElement(Zo,{values:[[NF,{modalProps:i,modalRef:n,isExiting:e.isExiting,isDismissable:e.isDismissable}],[Yy,r]]},o.children)))}function E7(t){let{modalProps:e,modalRef:n,isExiting:r,isDismissable:i}=C.useContext(NF),s=C.useContext(Yy),a=C.useMemo(()=>wI(t.modalRef,n),[t.modalRef,n]),o=ah(a),l=lF(o),c=Wr({...t,defaultClassName:"react-aria-Modal",values:{isEntering:l,isExiting:r,state:s}});return we.createElement("div",{...an(Cr(t,{global:!0}),e),...c,ref:o,"data-entering":l||void 0,"data-exiting":r||void 0},i&&we.createElement(sL,{onDismiss:s.close}),c.children)}const $3e=C.createContext(null),Q3e=C.createContext(null),U3e=C.forwardRef(function(e,n){[e,n]=Ai(e,n,$3e);let{validationBehavior:r}=Af(Hb)||{};var i,s;let a=(s=(i=e.validationBehavior)!==null&&i!==void 0?i:r)!==null&&s!==void 0?s:"native",{locale:o}=so(),l=Wne({...e,locale:o,validationBehavior:a}),c=C.useRef(null),[u,h]=yf(!e["aria-label"]&&!e["aria-labelledby"]),{labelProps:f,groupProps:p,inputProps:m,incrementButtonProps:v,decrementButtonProps:A,descriptionProps:x,errorMessageProps:E,...w}=mie({...Rp(e),label:h,validationBehavior:a},l,c),B=Wr({...e,values:{state:l,isDisabled:e.isDisabled||!1,isInvalid:w.isInvalid||!1,isRequired:e.isRequired||!1},defaultClassName:"react-aria-NumberField"}),D=Cr(e,{global:!0});return delete D.id,we.createElement(Zo,{values:[[Q3e,l],[HE,p],[Gb,{...m,ref:c}],[lh,{...f,ref:u}],[qy,{slots:{increment:v,decrement:A}}],[vf,{slots:{description:x,errorMessage:E}}],[$0,w]]},we.createElement("div",{...D,...B,ref:n,slot:e.slot||void 0,"data-disabled":e.isDisabled||void 0,"data-required":e.isRequired||void 0,"data-invalid":w.isInvalid||void 0}),e.name&&we.createElement("input",{type:"hidden",name:e.name,form:e.form,value:isNaN(l.numberValue)?"":l.numberValue,disabled:e.isDisabled||void 0}))}),H3e=C.createContext(null),G3e=C.createContext(null),mse=C.createContext(null),V3e=C.forwardRef(function(e,n){[e,n]=Ai(e,n,H3e);let{validationBehavior:r}=Af(Hb)||{};var i,s;let a=(s=(i=e.validationBehavior)!==null&&i!==void 0?i:r)!==null&&s!==void 0?s:"native",o=HBe({...e,validationBehavior:a}),[l,c]=yf(!e["aria-label"]&&!e["aria-labelledby"]),{radioGroupProps:u,labelProps:h,descriptionProps:f,errorMessageProps:p,...m}=SBe({...e,label:c,validationBehavior:a},o),v=Wr({...e,values:{orientation:e.orientation||"vertical",isDisabled:o.isDisabled,isReadOnly:o.isReadOnly,isRequired:o.isRequired,isInvalid:o.isInvalid,state:o},defaultClassName:"react-aria-RadioGroup"}),A=Cr(e,{global:!0});return we.createElement("div",{...an(A,v,u),ref:n,slot:e.slot||void 0,"data-orientation":e.orientation||"vertical","data-invalid":o.isInvalid||void 0,"data-disabled":o.isDisabled||void 0,"data-readonly":o.isReadOnly||void 0,"data-required":o.isRequired||void 0},we.createElement(Zo,{values:[[mse,o],[lh,{...h,ref:l,elementType:"span"}],[vf,{slots:{description:f,errorMessage:p}}],[$0,m]]},we.createElement(o4,null,v.children)))}),jR=C.forwardRef(function(e,n){let{inputRef:r=null,...i}=e;[e,n]=Ai(i,n,G3e);let s=we.useContext(mse),a=ah(C.useMemo(()=>wI(r,e.inputRef!==void 0?e.inputRef:null),[r,e.inputRef])),{labelProps:o,inputProps:l,isSelected:c,isDisabled:u,isPressed:h}=EBe({...Rp(e),children:typeof e.children=="function"?!0:e.children},s,a),{isFocused:f,isFocusVisible:p,focusProps:m}=mu(),v=u||s.isReadOnly,{hoverProps:A,isHovered:x}=oh({...e,isDisabled:v}),E=Wr({...e,defaultClassName:"react-aria-Radio",values:{isSelected:c,isPressed:h,isHovered:x,isFocused:f,isFocusVisible:p,isDisabled:u,isReadOnly:s.isReadOnly,isInvalid:s.isInvalid,isRequired:s.isRequired}}),w=Cr(e,{global:!0});return delete w.id,delete w.onClick,we.createElement("label",{...an(w,o,A,E),ref:n,"data-selected":c||void 0,"data-pressed":h||void 0,"data-hovered":x||void 0,"data-focused":f||void 0,"data-focus-visible":p||void 0,"data-disabled":u||void 0,"data-readonly":s.isReadOnly||void 0,"data-invalid":s.isInvalid||void 0,"data-required":s.isRequired||void 0},we.createElement(II,{elementType:"span"},we.createElement("input",{...an(l,m),ref:a})),we.createElement(MI.Provider,{value:{isSelected:c}},E.children))}),W3e=C.createContext(null),K3e=Ub(function(e,n){[e,n]=Ai(e,n,W3e);let{validationBehavior:r}=Af(Hb)||{};var i,s;let a=(s=(i=e.validationBehavior)!==null&&i!==void 0?i:r)!==null&&s!==void 0?s:"native",o=C.useRef(null);[e,o]=Ai(e,o,yX);let[l,c]=yf(!e["aria-label"]&&!e["aria-labelledby"]),u=GBe({...e,validationBehavior:a}),{labelProps:h,inputProps:f,clearButtonProps:p,descriptionProps:m,errorMessageProps:v,...A}=x2e({...Rp(e),label:c,validationBehavior:a},u,o),x=Wr({...e,values:{isEmpty:u.value==="",isDisabled:e.isDisabled||!1,isInvalid:A.isInvalid||!1,state:u},defaultClassName:"react-aria-SearchField"}),E=Cr(e,{global:!0});return delete E.id,we.createElement("div",{...E,...x,ref:n,slot:e.slot||void 0,"data-empty":u.value===""||void 0,"data-disabled":e.isDisabled||void 0,"data-invalid":A.isInvalid||void 0},we.createElement(Zo,{values:[[lh,{...h,ref:l}],[Gb,{...f,ref:o}],[qy,p],[vf,{slots:{description:m,errorMessage:v}}],[HE,{isInvalid:A.isInvalid,isDisabled:e.isDisabled||!1}],[$0,A]]},x.children))});function q3e(t){return t&&t.__esModule?t.default:t}const LF=C.createContext(null),Ase=C.createContext(null),da=C.forwardRef(function(e,n){[e,n]=Ai(e,n,LF);let{children:r,isDisabled:i=!1,isInvalid:s=!1,isRequired:a=!1}=e,o=C.useMemo(()=>typeof r=="function"?r({isOpen:!1,isDisabled:i,isInvalid:s,isRequired:a,isFocused:!1,isFocusVisible:!1,defaultChildren:null}):r,[r,i,s,a]);return we.createElement(r4,{content:o},l=>we.createElement(X3e,{props:e,collection:l,selectRef:n}))}),Y3e=[lh,qy,vf];function X3e({props:t,selectRef:e,collection:n}){let{validationBehavior:r}=Af(Hb)||{};var i,s;let a=(s=(i=t.validationBehavior)!==null&&i!==void 0?i:r)!==null&&s!==void 0?s:"native",o=VBe({...t,collection:n,children:void 0,validationBehavior:a}),{isFocusVisible:l,focusProps:c}=mu({within:!0}),u=C.useRef(null),[h,f]=yf(!t["aria-label"]&&!t["aria-labelledby"]),{labelProps:p,triggerProps:m,valueProps:v,menuProps:A,descriptionProps:x,errorMessageProps:E,hiddenSelectProps:w,...B}=wBe({...Rp(t),label:f,validationBehavior:a},o,u),[D,T]=C.useState(null),M=C.useCallback(()=>{u.current&&T(u.current.offsetWidth+"px")},[u]);D_({ref:u,onResize:M});let R=C.useMemo(()=>({isOpen:o.isOpen,isFocused:o.isFocused,isFocusVisible:l,isDisabled:t.isDisabled||!1,isInvalid:B.isInvalid||!1,isRequired:t.isRequired||!1}),[o.isOpen,o.isFocused,l,t.isDisabled,B.isInvalid,t.isRequired]),k=Wr({...t,values:R,defaultClassName:"react-aria-Select"}),L=Cr(t,{global:!0});delete L.id;let F=C.useRef(null);return we.createElement(Zo,{values:[[LF,t],[Ase,o],[yse,v],[lh,{...p,ref:h,elementType:"span"}],[qy,{...m,ref:u,isPressed:o.isOpen,autoFocus:t.autoFocus}],[Yy,o],[c4,{trigger:"Select",triggerRef:u,scrollRef:F,placement:"bottom start",style:{"--trigger-width":D},"aria-labelledby":A["aria-labelledby"],clearContexts:Y3e}],[DI,{...A,ref:F}],[Vb,o],[vf,{slots:{description:x,errorMessage:E}}],[$0,B]]},we.createElement("div",{...an(L,k,c),ref:e,slot:t.slot||void 0,"data-focused":o.isFocused||void 0,"data-focus-visible":l||void 0,"data-open":o.isOpen||void 0,"data-disabled":t.isDisabled||void 0,"data-invalid":B.isInvalid||void 0,"data-required":t.isRequired||void 0},k.children,we.createElement(IBe,{...w,autoComplete:t.autoComplete})))}const yse=C.createContext(null),$s=Ub(function(e,n){var r;[e,n]=Ai(e,n,yse);let i=C.useContext(Ase),{placeholder:s}=Af(LF),a=i.selectedItems.map(x=>{var E;let w=(E=x.props)===null||E===void 0?void 0:E.children;return typeof w=="function"&&(w=w({isHovered:!1,isPressed:!1,isSelected:!1,isFocused:!1,isFocusVisible:!1,isDisabled:!1,selectionMode:"single",selectionBehavior:"toggle"})),w}),o=Y_e(),l=C.useMemo(()=>i.selectedItems.map(x=>x?.textValue),[i.selectedItems]),c=i.selectionManager.selectionMode,u=C.useMemo(()=>{var x;return c==="single"?(x=l[0])!==null&&x!==void 0?x:"":o.format(l)},[c,o,l]),h=C.useMemo(()=>{if(c==="single")return a[0];let x=o.formatToParts(l);if(x.length===0)return null;let E=0;return x.map(w=>w.type==="element"?we.createElement(C.Fragment,{key:E},a[E++]):w.value)},[c,o,l,a]),f=Yg(q3e(RF),"react-aria-components");var p,m;let v=Wr({...e,defaultChildren:(p=h??s)!==null&&p!==void 0?p:f.format("selectPlaceholder"),defaultClassName:"react-aria-SelectValue",values:{selectedItem:(m=(r=i.selectedItems[0])===null||r===void 0?void 0:r.value)!==null&&m!==void 0?m:null,selectedItems:C.useMemo(()=>i.selectedItems.map(x=>{var E;return(E=x.value)!==null&&E!==void 0?E:null}),[i.selectedItems]),selectedText:u,isPlaceholder:i.selectedItems.length===0,state:i}}),A=Cr(e,{global:!0});return we.createElement("span",{ref:n,...A,...v,"data-placeholder":i.selectedItems.length===0||void 0},we.createElement(vf.Provider,{value:void 0},v.children))}),J3e=C.createContext(null),u4=C.forwardRef(function(e,n){let{inputRef:r=null,...i}=e;[e,n]=Ai(i,n,J3e);let s=ah(wI(r,e.inputRef!==void 0?e.inputRef:null)),a=i4(e),{labelProps:o,inputProps:l,isSelected:c,isDisabled:u,isReadOnly:h,isPressed:f}=BBe({...Rp(e),children:typeof e.children=="function"?!0:e.children},a,s),{isFocused:p,isFocusVisible:m,focusProps:v}=mu(),A=e.isDisabled||e.isReadOnly,{hoverProps:x,isHovered:E}=oh({...e,isDisabled:A}),w=Wr({...e,defaultClassName:"react-aria-Switch",values:{isSelected:c,isPressed:f,isHovered:E,isFocused:p,isFocusVisible:m,isDisabled:u,isReadOnly:h,state:a}}),B=Cr(e,{global:!0});return delete B.id,delete B.onClick,we.createElement("label",{...an(B,o,x,w),ref:n,slot:e.slot||void 0,"data-selected":c||void 0,"data-pressed":f||void 0,"data-hovered":E||void 0,"data-focused":p||void 0,"data-focus-visible":m||void 0,"data-disabled":u||void 0,"data-readonly":h||void 0},we.createElement(II,{elementType:"span"},we.createElement("input",{...an(l,v),ref:s})),w.children)}),d4=C.createContext(null),uE=C.createContext(null),Z3e=C.forwardRef(function(e,n){[e,n]=Ai(e,n,d4);let{children:r,orientation:i="horizontal"}=e;return r=C.useMemo(()=>typeof r=="function"?r({orientation:i,defaultChildren:null}):r,[r,i]),we.createElement(r4,{content:r},s=>we.createElement(eTe,{props:e,collection:s,tabsRef:n}))});function eTe({props:t,tabsRef:e,collection:n}){let{orientation:r="horizontal"}=t,i=KBe({...t,collection:n,children:void 0}),{focusProps:s,isFocused:a,isFocusVisible:o}=mu({within:!0}),l=C.useMemo(()=>({orientation:r,isFocusWithin:a,isFocusVisible:o}),[r,a,o]),c=Wr({...t,defaultClassName:"react-aria-Tabs",values:l}),u=Cr(t,{global:!0});return we.createElement("div",{...an(u,c,s),ref:e,slot:t.slot||void 0,"data-focused":a||void 0,"data-orientation":r,"data-focus-visible":o||void 0,"data-disabled":i.isDisabled||void 0},we.createElement(Zo,{values:[[d4,t],[uE,i]]},c.children))}const tTe=C.forwardRef(function(e,n){return C.useContext(uE)?we.createElement(nTe,{props:e,forwardedRef:n}):we.createElement(Ete,e)});function nTe({props:t,forwardedRef:e}){let n=C.useContext(uE),{CollectionRoot:r}=C.useContext(BI),{orientation:i="horizontal",keyboardActivation:s="automatic"}=Af(d4),a=ah(e),{tabListProps:o}=RBe({...t,orientation:i,keyboardActivation:s},n,a),l=Wr({...t,children:null,defaultClassName:"react-aria-TabList",values:{orientation:i,state:n}}),c=Cr(t,{global:!0});return delete c.id,we.createElement("div",{...an(c,l,o),ref:a,"data-orientation":i||void 0},we.createElement(o4,null,we.createElement(r,{collection:n.collection,persistedKeys:O2e(n.selectionManager.focusedKey)})))}class vse extends Qb{}vse.type="item";const GS=EF(vse,(t,e,n)=>{let r=C.useContext(uE),i=ah(e),{tabProps:s,isSelected:a,isDisabled:o,isPressed:l}=TBe({key:n.key,...t},r,i),{focusProps:c,isFocused:u,isFocusVisible:h}=mu(),{hoverProps:f,isHovered:p}=oh({isDisabled:o,onHoverStart:t.onHoverStart,onHoverEnd:t.onHoverEnd,onHoverChange:t.onHoverChange}),m=Wr({...t,id:void 0,children:n.rendered,defaultClassName:"react-aria-Tab",values:{isSelected:a,isDisabled:o,isFocused:u,isFocusVisible:h,isPressed:l,isHovered:p}}),v=n.props.href?"a":"div",A=Cr(t,{global:!0});return delete A.id,delete A.onClick,we.createElement(v,{...an(A,m,s,c,f),ref:i,"data-selected":a||void 0,"data-disabled":o||void 0,"data-focused":u||void 0,"data-focus-visible":h||void 0,"data-pressed":l||void 0,"data-hovered":p||void 0},we.createElement(MI.Provider,{value:{isSelected:a}},m.children))}),VS=Ub(function(e,n){const r=C.useContext(uE);let i=ah(n),{id:s,...a}=e,{tabPanelProps:o}=MBe(e,r,i),{focusProps:l,isFocused:c,isFocusVisible:u}=mu(),h=r.selectedKey===e.id,f=Wr({...e,defaultClassName:"react-aria-TabPanel",values:{isFocused:c,isFocusVisible:u,isInert:$5(!h),state:r}});if(!h&&!e.shouldForceMount)return null;let p=Cr(a,{global:!0});delete p.id;let m=h?an(p,o,l,f):f;return we.createElement("div",{...m,ref:i,"data-focused":c||void 0,"data-focus-visible":u||void 0,inert:$5(!h||e.inert),"data-inert":h?void 0:"true"},we.createElement(Zo,{values:[[d4,null],[uE,null]]},we.createElement(BI.Provider,{value:Ste},f.children)))}),xse=C.createContext({});let rTe=t=>{let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,...i}=t;return i};const fd=C.forwardRef(function(e,n){[e,n]=Ai(e,n,xse);let{hoverProps:r,isHovered:i}=oh(e),{isFocused:s,isFocusVisible:a,focusProps:o}=mu({isTextInput:!0,autoFocus:e.autoFocus}),l=!!e["aria-invalid"]&&e["aria-invalid"]!=="false",c=Wr({...e,values:{isHovered:i,isFocused:s,isFocusVisible:a,isDisabled:e.disabled||!1,isInvalid:l},defaultClassName:"react-aria-TextArea"});return we.createElement("textarea",{...an(rTe(e),o,r),...c,ref:n,"data-focused":s||void 0,"data-disabled":e.disabled||void 0,"data-hovered":i||void 0,"data-focus-visible":a||void 0,"data-invalid":l||void 0})}),iTe=C.createContext(null),dr=Ub(function(e,n){[e,n]=Ai(e,n,iTe);let{validationBehavior:r}=Af(Hb)||{};var i,s;let a=(s=(i=e.validationBehavior)!==null&&i!==void 0?i:r)!==null&&s!==void 0?s:"native",o=C.useRef(null);[e,o]=Ai(e,o,yX);let[l,c]=yf(!e["aria-label"]&&!e["aria-labelledby"]),[u,h]=C.useState("input"),{labelProps:f,inputProps:p,descriptionProps:m,errorMessageProps:v,...A}=n4({...Rp(e),inputElementType:u,label:c,validationBehavior:a},o),x=C.useCallback(B=>{o.current=B,B&&h(B instanceof HTMLTextAreaElement?"textarea":"input")},[o]),E=Wr({...e,values:{isDisabled:e.isDisabled||!1,isInvalid:A.isInvalid,isReadOnly:e.isReadOnly||!1,isRequired:e.isRequired||!1},defaultClassName:"react-aria-TextField"}),w=Cr(e,{global:!0});return delete w.id,we.createElement("div",{...w,...E,ref:n,slot:e.slot||void 0,"data-disabled":e.isDisabled||void 0,"data-invalid":A.isInvalid||void 0,"data-readonly":e.isReadOnly||void 0,"data-required":e.isRequired||void 0},we.createElement(Zo,{values:[[lh,{...f,ref:l}],[Gb,{...p,ref:x}],[xse,{...p,ref:x}],[HE,{role:"presentation",isInvalid:A.isInvalid,isDisabled:e.isDisabled||!1}],[vf,{slots:{description:m,errorMessage:v}}],[$0,A]]},E.children))}),sTe=C.createContext({}),bse=C.createContext(null),ny=C.forwardRef(function(e,n){[e,n]=Ai(e,n,sTe);let r=H2e(e),{groupProps:i}=$2e(e,r,n),s=Wr({...e,values:{isDisabled:r.isDisabled,state:r},defaultClassName:"react-aria-ToggleButtonGroup"}),a=Cr(e,{global:!0});return we.createElement("div",{...an(a,s,i),ref:n,slot:e.slot||void 0,"data-orientation":e.orientation||"horizontal","data-disabled":e.isDisabled||void 0},we.createElement(bse.Provider,{value:r},we.createElement(o4,null,s.children)))}),aTe=C.createContext({}),y1=C.forwardRef(function(e,n){[e,n]=Ai(e,n,aTe);let r=C.useContext(bse),i=i4(r&&e.id!=null?{isSelected:r.selectedKeys.has(e.id),onChange(A){r.setSelected(e.id,A)}}:e),{buttonProps:s,isPressed:a,isSelected:o,isDisabled:l}=r&&e.id!=null?Q2e({...e,id:e.id},r,n):_te({...e,id:e.id!=null?String(e.id):void 0},i,n),{focusProps:c,isFocused:u,isFocusVisible:h}=mu(e),{hoverProps:f,isHovered:p}=oh(e),m=Wr({...e,id:void 0,values:{isHovered:p,isPressed:a,isFocused:u,isSelected:i.isSelected,isFocusVisible:h,isDisabled:l,state:i},defaultClassName:"react-aria-ToggleButton"}),v=Cr(e,{global:!0});return delete v.id,delete v.onClick,we.createElement("button",{...an(v,m,s,c,f),ref:n,slot:e.slot||void 0,"data-focused":u||void 0,"data-disabled":l||void 0,"data-pressed":a||void 0,"data-selected":o||void 0,"data-hovered":p||void 0,"data-focus-visible":h||void 0},we.createElement(MI.Provider,{value:{isSelected:o}},m.children))});var oTe=/\s+/g,lTe=t=>typeof t!="string"||!t?t:t.replace(oTe," ").trim(),QT=(...t)=>{const e=[],n=r=>{if(!r&&r!==0&&r!==0n)return;if(Array.isArray(r)){for(let s=0,a=r.length;s<a;s++)n(r[s]);return}const i=typeof r;if(i==="string"||i==="number"||i==="bigint"){if(i==="number"&&r!==r)return;e.push(String(r))}else if(i==="object"){const s=Object.keys(r);for(let a=0,o=s.length;a<o;a++){const l=s[a];r[l]&&e.push(l)}}};for(let r=0,i=t.length;r<i;r++){const s=t[r];s!=null&&n(s)}return e.length>0?lTe(e.join(" ")):void 0},S7=t=>t===!1?"false":t===!0?"true":t===0?"0":t,Ku=t=>{if(!t||typeof t!="object")return!0;for(const e in t)return!1;return!0},cTe=(t,e)=>{if(t===e)return!0;if(!t||!e)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++){const s=n[i];if(!r.includes(s)||t[s]!==e[s])return!1}return!0},uTe=(t,e)=>{for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];n in t?t[n]=QT(t[n],r):t[n]=r}return t},Cse=(t,e)=>{for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)?Cse(r,e):r&&e.push(r)}},Ese=(...t)=>{const e=[];Cse(t,e);const n=[];for(let r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},fL=(t,e)=>{const n={};for(const r in t){const i=t[r];if(r in e){const s=e[r];Array.isArray(i)||Array.isArray(s)?n[r]=Ese(s,i):typeof i=="object"&&typeof s=="object"&&i&&s?n[r]=fL(i,s):n[r]=s+" "+i}else n[r]=i}for(const r in e)r in t||(n[r]=e[r]);return n},dTe={twMerge:!0,twMergeConfig:{}};function hTe(){let t=null,e={},n=!1;return{get cachedTwMerge(){return t},set cachedTwMerge(r){t=r},get cachedTwMergeConfig(){return e},set cachedTwMergeConfig(r){e=r},get didTwMergeConfigChange(){return n},set didTwMergeConfigChange(r){n=r},reset(){t=null,e={},n=!1}}}var s0=hTe(),fTe=t=>{const e=(r,i)=>{const{extend:s=null,slots:a={},variants:o={},compoundVariants:l=[],compoundSlots:c=[],defaultVariants:u={}}=r,h={...dTe,...i},f=s?.base?QT(s.base,r?.base):r?.base,p=s?.variants&&!Ku(s.variants)?fL(o,s.variants):o,m=s?.defaultVariants&&!Ku(s.defaultVariants)?{...s.defaultVariants,...u}:u;!Ku(h.twMergeConfig)&&!cTe(h.twMergeConfig,s0.cachedTwMergeConfig)&&(s0.didTwMergeConfigChange=!0,s0.cachedTwMergeConfig=h.twMergeConfig);const v=Ku(s?.slots),A=Ku(a)?{}:{base:QT(r?.base,v&&s?.base),...a},x=v?A:uTe({...s?.slots},Ku(A)?{base:r?.base}:A),E=Ku(s?.compoundVariants)?l:Ese(s?.compoundVariants,l),w=D=>{if(Ku(p)&&Ku(a)&&v)return t(f,D?.class,D?.className)(h);if(E&&!Array.isArray(E))throw new TypeError(`The "compoundVariants" prop must be an array. Received: ${typeof E}`);if(c&&!Array.isArray(c))throw new TypeError(`The "compoundSlots" prop must be an array. Received: ${typeof c}`);const T=(V,q=p,O=null,H=null)=>{const K=q[V];if(!K||Ku(K))return null;const X=H?.[V]??D?.[V];if(X===null)return null;const re=S7(X);if(typeof re=="object")return null;const J=m?.[V],Z=re??S7(J);return K[Z||"false"]},M=()=>{if(!p)return null;const V=Object.keys(p),q=[];for(let O=0;O<V.length;O++){const H=T(V[O],p);H&&q.push(H)}return q},R=(V,q)=>{if(!p||typeof p!="object")return null;const O=[];for(const H in p){const K=T(H,p,V,q),X=V==="base"&&typeof K=="string"?K:K&&K[V];X&&O.push(X)}return O},k={};for(const V in D){const q=D[V];q!==void 0&&(k[V]=q)}const L=(V,q)=>{const O=typeof D?.[V]=="object"?{[V]:D[V]?.initial}:{};return{...m,...k,...O,...q}},F=(V=[],q)=>{const O=[],H=V.length;for(let K=0;K<H;K++){const{class:X,className:re,...J}=V[K];let Z=!0;const ee=L(null,q);for(const te in J){const oe=J[te],ae=ee[te];if(Array.isArray(oe)){if(!oe.includes(ae)){Z=!1;break}}else{if((oe==null||oe===!1)&&(ae==null||ae===!1))continue;if(ae!==oe){Z=!1;break}}}Z&&(X&&O.push(X),re&&O.push(re))}return O},z=V=>{const q=F(E,V);if(!Array.isArray(q))return q;const O={},H=t;for(let K=0;K<q.length;K++){const X=q[K];if(typeof X=="string")O.base=H(O.base,X)(h);else if(typeof X=="object")for(const re in X)O[re]=H(O[re],X[re])(h)}return O},G=V=>{if(c.length<1)return null;const q={},O=L(null,V);for(let H=0;H<c.length;H++){const{slots:K=[],class:X,className:re,...J}=c[H];if(!Ku(J)){let Z=!0;for(const ee in J){const te=O[ee],oe=J[ee];if(te===void 0||(Array.isArray(oe)?!oe.includes(te):oe!==te)){Z=!1;break}}if(!Z)continue}for(let Z=0;Z<K.length;Z++){const ee=K[Z];q[ee]||(q[ee]=[]),q[ee].push([X,re])}}return q};if(!Ku(a)||!v){const V={};if(typeof x=="object"&&!Ku(x)){const q=t;for(const O in x)V[O]=H=>{const K=z(H),X=G(H);return q(x[O],R(O,H),K?K[O]:void 0,X?X[O]:void 0,H?.class,H?.className)(h)}}return V}return t(f,M(),F(E),D?.class,D?.className)(h)},B=()=>{if(!(!p||typeof p!="object"))return Object.keys(p)};return w.variantKeys=B(),w.extend=s,w.base=f,w.slots=x,w.variants=p,w.defaultVariants=m,w.compoundSlots=c,w.compoundVariants=E,w};return{tv:e,createTV:r=>(i,s)=>e(i,s?fL(r,s):r)}};const pTe=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},gTe=(t,e)=>({classGroupId:t,validator:e}),Sse=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),UT="-",w7=[],mTe="arbitrary..",ATe=t=>{const e=vTe(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]"))return yTe(a);const o=a.split(UT),l=o[0]===""&&o.length>1?1:0;return wse(o,l,e)},getConflictingClassGroupIds:(a,o)=>{if(o){const l=r[a],c=n[a];return l?c?pTe(c,l):l:c||w7}return n[a]||w7}}},wse=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],s=n.nextPart.get(i);if(s){const c=wse(t,e+1,s);if(c)return c}const a=n.validators;if(a===null)return;const o=e===0?t.join(UT):t.slice(e).join(UT),l=a.length;for(let c=0;c<l;c++){const u=a[c];if(u.validator(o))return u.classGroupId}},yTe=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?mTe+r:void 0})(),vTe=t=>{const{theme:e,classGroups:n}=t;return xTe(n,e)},xTe=(t,e)=>{const n=Sse();for(const r in t){const i=t[r];FF(i,n,r,e)}return n},FF=(t,e,n,r)=>{const i=t.length;for(let s=0;s<i;s++){const a=t[s];bTe(a,e,n,r)}},bTe=(t,e,n,r)=>{if(typeof t=="string"){CTe(t,e,n);return}if(typeof t=="function"){ETe(t,e,n,r);return}STe(t,e,n,r)},CTe=(t,e,n)=>{const r=t===""?e:_se(e,t);r.classGroupId=n},ETe=(t,e,n,r)=>{if(wTe(t)){FF(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(gTe(n,t))},STe=(t,e,n,r)=>{const i=Object.entries(t),s=i.length;for(let a=0;a<s;a++){const[o,l]=i[a];FF(l,_se(e,o),n,r)}},_se=(t,e)=>{let n=t;const r=e.split(UT),i=r.length;for(let s=0;s<i;s++){const a=r[s];let o=n.nextPart.get(a);o||(o=Sse(),n.nextPart.set(a,o)),n=o}return n},wTe=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,_Te=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const i=(s,a)=>{n[s]=a,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(s){let a=n[s];if(a!==void 0)return a;if((a=r[s])!==void 0)return i(s,a),a},set(s,a){s in n?n[s]=a:i(s,a)}}},pL="!",_7=":",ITe=[],I7=(t,e,n,r,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),BTe=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let a=0,o=0,l=0,c;const u=i.length;for(let v=0;v<u;v++){const A=i[v];if(a===0&&o===0){if(A===_7){s.push(i.slice(l,v)),l=v+1;continue}if(A==="/"){c=v;continue}}A==="["?a++:A==="]"?a--:A==="("?o++:A===")"&&o--}const h=s.length===0?i:i.slice(l);let f=h,p=!1;h.endsWith(pL)?(f=h.slice(0,-1),p=!0):h.startsWith(pL)&&(f=h.slice(1),p=!0);const m=c&&c>l?c-l:void 0;return I7(s,p,f,m)};if(e){const i=e+_7,s=r;r=a=>a.startsWith(i)?s(a.slice(i.length)):I7(ITe,!1,a,void 0,!0)}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},TTe=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let s=0;s<n.length;s++){const a=n[s],o=a[0]==="[",l=e.has(a);o||l?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(a)):i.push(a)}return i.length>0&&(i.sort(),r.push(...i)),r}},MTe=t=>({cache:_Te(t.cacheSize),parseClassName:BTe(t),sortModifiers:TTe(t),...ATe(t)}),DTe=/\s+/,RTe=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,a=[],o=t.trim().split(DTe);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{isExternal:h,modifiers:f,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:v}=n(u);if(h){l=u+(l.length>0?" "+l:l);continue}let A=!!v,x=r(A?m.substring(0,v):m);if(!x){if(!A){l=u+(l.length>0?" "+l:l);continue}if(x=r(m),!x){l=u+(l.length>0?" "+l:l);continue}A=!1}const E=f.length===0?"":f.length===1?f[0]:s(f).join(":"),w=p?E+pL:E,B=w+x;if(a.indexOf(B)>-1)continue;a.push(B);const D=i(x,A);for(let T=0;T<D.length;++T){const M=D[T];a.push(w+M)}l=u+(l.length>0?" "+l:l)}return l},PTe=(...t)=>{let e=0,n,r,i="";for(;e<t.length;)(n=t[e++])&&(r=Ise(n))&&(i&&(i+=" "),i+=r);return i},Ise=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Ise(t[r]))&&(n&&(n+=" "),n+=e);return n},gL=(t,...e)=>{let n,r,i,s;const a=l=>{const c=e.reduce((u,h)=>h(u),t());return n=MTe(c),r=n.cache.get,i=n.cache.set,s=o,o(l)},o=l=>{const c=r(l);if(c)return c;const u=RTe(l,n);return i(l,u),u};return s=a,(...l)=>s(PTe(...l))},kTe=[],Wo=t=>{const e=n=>n[t]||kTe;return e.isThemeGetter=!0,e},Bse=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Tse=/^\((?:(\w[\w-]*):)?(.+)\)$/i,NTe=/^\d+\/\d+$/,LTe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,FTe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,jTe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,OTe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,zTe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ZC=t=>NTe.test(t),ri=t=>!!t&&!Number.isNaN(Number(t)),ry=t=>!!t&&Number.isInteger(Number(t)),OR=t=>t.endsWith("%")&&ri(t.slice(0,-1)),Hm=t=>LTe.test(t),$Te=()=>!0,QTe=t=>FTe.test(t)&&!jTe.test(t),Mse=()=>!1,UTe=t=>OTe.test(t),HTe=t=>zTe.test(t),GTe=t=>!Tn(t)&&!Mn(t),VTe=t=>GE(t,Pse,Mse),Tn=t=>Bse.test(t),mx=t=>GE(t,kse,QTe),zR=t=>GE(t,XTe,ri),B7=t=>GE(t,Dse,Mse),WTe=t=>GE(t,Rse,HTe),SB=t=>GE(t,Nse,UTe),Mn=t=>Tse.test(t),WS=t=>VE(t,kse),KTe=t=>VE(t,JTe),T7=t=>VE(t,Dse),qTe=t=>VE(t,Pse),YTe=t=>VE(t,Rse),wB=t=>VE(t,Nse,!0),GE=(t,e,n)=>{const r=Bse.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},VE=(t,e,n=!1)=>{const r=Tse.exec(t);return r?r[1]?e(r[1]):n:!1},Dse=t=>t==="position"||t==="percentage",Rse=t=>t==="image"||t==="url",Pse=t=>t==="length"||t==="size"||t==="bg-size",kse=t=>t==="length",XTe=t=>t==="number",JTe=t=>t==="family-name",Nse=t=>t==="shadow",mL=()=>{const t=Wo("color"),e=Wo("font"),n=Wo("text"),r=Wo("font-weight"),i=Wo("tracking"),s=Wo("leading"),a=Wo("breakpoint"),o=Wo("container"),l=Wo("spacing"),c=Wo("radius"),u=Wo("shadow"),h=Wo("inset-shadow"),f=Wo("text-shadow"),p=Wo("drop-shadow"),m=Wo("blur"),v=Wo("perspective"),A=Wo("aspect"),x=Wo("ease"),E=Wo("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],D=()=>[...B(),Mn,Tn],T=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],R=()=>[Mn,Tn,l],k=()=>[ZC,"full","auto",...R()],L=()=>[ry,"none","subgrid",Mn,Tn],F=()=>["auto",{span:["full",ry,Mn,Tn]},ry,Mn,Tn],z=()=>[ry,"auto",Mn,Tn],G=()=>["auto","min","max","fr",Mn,Tn],V=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],q=()=>["start","end","center","stretch","center-safe","end-safe"],O=()=>["auto",...R()],H=()=>[ZC,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],K=()=>[t,Mn,Tn],X=()=>[...B(),T7,B7,{position:[Mn,Tn]}],re=()=>["no-repeat",{repeat:["","x","y","space","round"]}],J=()=>["auto","cover","contain",qTe,VTe,{size:[Mn,Tn]}],Z=()=>[OR,WS,mx],ee=()=>["","none","full",c,Mn,Tn],te=()=>["",ri,WS,mx],oe=()=>["solid","dashed","dotted","double"],ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],se=()=>[ri,OR,T7,B7],fe=()=>["","none",m,Mn,Tn],Ee=()=>["none",ri,Mn,Tn],Be=()=>["none",ri,Mn,Tn],_e=()=>[ri,Mn,Tn],Ce=()=>[ZC,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Hm],breakpoint:[Hm],color:[$Te],container:[Hm],"drop-shadow":[Hm],ease:["in","out","in-out"],font:[GTe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Hm],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Hm],shadow:[Hm],spacing:["px",ri],text:[Hm],"text-shadow":[Hm],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ZC,Tn,Mn,A]}],container:["container"],columns:[{columns:[ri,Tn,Mn,o]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:D()}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[ry,"auto",Mn,Tn]}],basis:[{basis:[ZC,"full","auto",o,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ri,ZC,"auto","initial","none",Tn]}],grow:[{grow:["",ri,Mn,Tn]}],shrink:[{shrink:["",ri,Mn,Tn]}],order:[{order:[ry,"first","last","none",Mn,Tn]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:F()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:F()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":G()}],"auto-rows":[{"auto-rows":G()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...q(),"normal"]}],"justify-self":[{"justify-self":["auto",...q()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...q(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...q(),{baseline:["","last"]}]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...q(),"baseline"]}],"place-self":[{"place-self":["auto",...q()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:O()}],mx:[{mx:O()}],my:[{my:O()}],ms:[{ms:O()}],me:[{me:O()}],mt:[{mt:O()}],mr:[{mr:O()}],mb:[{mb:O()}],ml:[{ml:O()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:H()}],w:[{w:[o,"screen",...H()]}],"min-w":[{"min-w":[o,"screen","none",...H()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...H()]}],h:[{h:["screen","lh",...H()]}],"min-h":[{"min-h":["screen","lh","none",...H()]}],"max-h":[{"max-h":["screen","lh",...H()]}],"font-size":[{text:["base",n,WS,mx]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Mn,zR]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",OR,Tn]}],"font-family":[{font:[KTe,Tn,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Mn,Tn]}],"line-clamp":[{"line-clamp":[ri,"none",Mn,zR]}],leading:[{leading:[s,...R()]}],"list-image":[{"list-image":["none",Mn,Tn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Mn,Tn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:K()}],"text-color":[{text:K()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...oe(),"wavy"]}],"text-decoration-thickness":[{decoration:[ri,"from-font","auto",Mn,mx]}],"text-decoration-color":[{decoration:K()}],"underline-offset":[{"underline-offset":[ri,"auto",Mn,Tn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Mn,Tn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Mn,Tn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:X()}],"bg-repeat":[{bg:re()}],"bg-size":[{bg:J()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ry,Mn,Tn],radial:["",Mn,Tn],conic:[ry,Mn,Tn]},YTe,WTe]}],"bg-color":[{bg:K()}],"gradient-from-pos":[{from:Z()}],"gradient-via-pos":[{via:Z()}],"gradient-to-pos":[{to:Z()}],"gradient-from":[{from:K()}],"gradient-via":[{via:K()}],"gradient-to":[{to:K()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:te()}],"border-w-x":[{"border-x":te()}],"border-w-y":[{"border-y":te()}],"border-w-s":[{"border-s":te()}],"border-w-e":[{"border-e":te()}],"border-w-t":[{"border-t":te()}],"border-w-r":[{"border-r":te()}],"border-w-b":[{"border-b":te()}],"border-w-l":[{"border-l":te()}],"divide-x":[{"divide-x":te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...oe(),"hidden","none"]}],"divide-style":[{divide:[...oe(),"hidden","none"]}],"border-color":[{border:K()}],"border-color-x":[{"border-x":K()}],"border-color-y":[{"border-y":K()}],"border-color-s":[{"border-s":K()}],"border-color-e":[{"border-e":K()}],"border-color-t":[{"border-t":K()}],"border-color-r":[{"border-r":K()}],"border-color-b":[{"border-b":K()}],"border-color-l":[{"border-l":K()}],"divide-color":[{divide:K()}],"outline-style":[{outline:[...oe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ri,Mn,Tn]}],"outline-w":[{outline:["",ri,WS,mx]}],"outline-color":[{outline:K()}],shadow:[{shadow:["","none",u,wB,SB]}],"shadow-color":[{shadow:K()}],"inset-shadow":[{"inset-shadow":["none",h,wB,SB]}],"inset-shadow-color":[{"inset-shadow":K()}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:K()}],"ring-offset-w":[{"ring-offset":[ri,mx]}],"ring-offset-color":[{"ring-offset":K()}],"inset-ring-w":[{"inset-ring":te()}],"inset-ring-color":[{"inset-ring":K()}],"text-shadow":[{"text-shadow":["none",f,wB,SB]}],"text-shadow-color":[{"text-shadow":K()}],opacity:[{opacity:[ri,Mn,Tn]}],"mix-blend":[{"mix-blend":[...ae(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ae()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ri]}],"mask-image-linear-from-pos":[{"mask-linear-from":se()}],"mask-image-linear-to-pos":[{"mask-linear-to":se()}],"mask-image-linear-from-color":[{"mask-linear-from":K()}],"mask-image-linear-to-color":[{"mask-linear-to":K()}],"mask-image-t-from-pos":[{"mask-t-from":se()}],"mask-image-t-to-pos":[{"mask-t-to":se()}],"mask-image-t-from-color":[{"mask-t-from":K()}],"mask-image-t-to-color":[{"mask-t-to":K()}],"mask-image-r-from-pos":[{"mask-r-from":se()}],"mask-image-r-to-pos":[{"mask-r-to":se()}],"mask-image-r-from-color":[{"mask-r-from":K()}],"mask-image-r-to-color":[{"mask-r-to":K()}],"mask-image-b-from-pos":[{"mask-b-from":se()}],"mask-image-b-to-pos":[{"mask-b-to":se()}],"mask-image-b-from-color":[{"mask-b-from":K()}],"mask-image-b-to-color":[{"mask-b-to":K()}],"mask-image-l-from-pos":[{"mask-l-from":se()}],"mask-image-l-to-pos":[{"mask-l-to":se()}],"mask-image-l-from-color":[{"mask-l-from":K()}],"mask-image-l-to-color":[{"mask-l-to":K()}],"mask-image-x-from-pos":[{"mask-x-from":se()}],"mask-image-x-to-pos":[{"mask-x-to":se()}],"mask-image-x-from-color":[{"mask-x-from":K()}],"mask-image-x-to-color":[{"mask-x-to":K()}],"mask-image-y-from-pos":[{"mask-y-from":se()}],"mask-image-y-to-pos":[{"mask-y-to":se()}],"mask-image-y-from-color":[{"mask-y-from":K()}],"mask-image-y-to-color":[{"mask-y-to":K()}],"mask-image-radial":[{"mask-radial":[Mn,Tn]}],"mask-image-radial-from-pos":[{"mask-radial-from":se()}],"mask-image-radial-to-pos":[{"mask-radial-to":se()}],"mask-image-radial-from-color":[{"mask-radial-from":K()}],"mask-image-radial-to-color":[{"mask-radial-to":K()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":B()}],"mask-image-conic-pos":[{"mask-conic":[ri]}],"mask-image-conic-from-pos":[{"mask-conic-from":se()}],"mask-image-conic-to-pos":[{"mask-conic-to":se()}],"mask-image-conic-from-color":[{"mask-conic-from":K()}],"mask-image-conic-to-color":[{"mask-conic-to":K()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:X()}],"mask-repeat":[{mask:re()}],"mask-size":[{mask:J()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Mn,Tn]}],filter:[{filter:["","none",Mn,Tn]}],blur:[{blur:fe()}],brightness:[{brightness:[ri,Mn,Tn]}],contrast:[{contrast:[ri,Mn,Tn]}],"drop-shadow":[{"drop-shadow":["","none",p,wB,SB]}],"drop-shadow-color":[{"drop-shadow":K()}],grayscale:[{grayscale:["",ri,Mn,Tn]}],"hue-rotate":[{"hue-rotate":[ri,Mn,Tn]}],invert:[{invert:["",ri,Mn,Tn]}],saturate:[{saturate:[ri,Mn,Tn]}],sepia:[{sepia:["",ri,Mn,Tn]}],"backdrop-filter":[{"backdrop-filter":["","none",Mn,Tn]}],"backdrop-blur":[{"backdrop-blur":fe()}],"backdrop-brightness":[{"backdrop-brightness":[ri,Mn,Tn]}],"backdrop-contrast":[{"backdrop-contrast":[ri,Mn,Tn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ri,Mn,Tn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ri,Mn,Tn]}],"backdrop-invert":[{"backdrop-invert":["",ri,Mn,Tn]}],"backdrop-opacity":[{"backdrop-opacity":[ri,Mn,Tn]}],"backdrop-saturate":[{"backdrop-saturate":[ri,Mn,Tn]}],"backdrop-sepia":[{"backdrop-sepia":["",ri,Mn,Tn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Mn,Tn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ri,"initial",Mn,Tn]}],ease:[{ease:["linear","initial",x,Mn,Tn]}],delay:[{delay:[ri,Mn,Tn]}],animate:[{animate:["none",E,Mn,Tn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,Mn,Tn]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:Ee()}],"rotate-x":[{"rotate-x":Ee()}],"rotate-y":[{"rotate-y":Ee()}],"rotate-z":[{"rotate-z":Ee()}],scale:[{scale:Be()}],"scale-x":[{"scale-x":Be()}],"scale-y":[{"scale-y":Be()}],"scale-z":[{"scale-z":Be()}],"scale-3d":["scale-3d"],skew:[{skew:_e()}],"skew-x":[{"skew-x":_e()}],"skew-y":[{"skew-y":_e()}],transform:[{transform:[Mn,Tn,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ce()}],"translate-x":[{"translate-x":Ce()}],"translate-y":[{"translate-y":Ce()}],"translate-z":[{"translate-z":Ce()}],"translate-none":["translate-none"],accent:[{accent:K()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:K()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Mn,Tn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Mn,Tn]}],fill:[{fill:["none",...K()]}],"stroke-w":[{stroke:[ri,WS,mx,zR]}],stroke:[{stroke:["none",...K()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},ZTe=(t,{cacheSize:e,prefix:n,experimentalParseClassName:r,extend:i={},override:s={}})=>(Bw(t,"cacheSize",e),Bw(t,"prefix",n),Bw(t,"experimentalParseClassName",r),_B(t.theme,s.theme),_B(t.classGroups,s.classGroups),_B(t.conflictingClassGroups,s.conflictingClassGroups),_B(t.conflictingClassGroupModifiers,s.conflictingClassGroupModifiers),Bw(t,"orderSensitiveModifiers",s.orderSensitiveModifiers),IB(t.theme,i.theme),IB(t.classGroups,i.classGroups),IB(t.conflictingClassGroups,i.conflictingClassGroups),IB(t.conflictingClassGroupModifiers,i.conflictingClassGroupModifiers),Lse(t,i,"orderSensitiveModifiers"),t),Bw=(t,e,n)=>{n!==void 0&&(t[e]=n)},_B=(t,e)=>{if(e)for(const n in e)Bw(t,n,e[n])},IB=(t,e)=>{if(e)for(const n in e)Lse(t,e,n)},Lse=(t,e,n)=>{const r=e[n];r!==void 0&&(t[n]=t[n]?t[n].concat(r):r)},eMe=(t,...e)=>typeof t=="function"?gL(mL,t,...e):gL(()=>ZTe(mL(),t),...e),Fse=gL(mL);var tMe=t=>Ku(t)?Fse:eMe({...t,extend:{theme:t.theme,classGroups:t.classGroups,conflictingClassGroupModifiers:t.conflictingClassGroupModifiers,conflictingClassGroups:t.conflictingClassGroups,...t.extend}}),nMe=(t,e)=>{const n=QT(t);return!n||!(e?.twMerge??!0)?n:((!s0.cachedTwMerge||s0.didTwMergeConfigChange)&&(s0.didTwMergeConfigChange=!1,s0.cachedTwMerge=tMe(s0.cachedTwMergeConfig)),s0.cachedTwMerge(n)||void 0)},rMe=(...t)=>e=>nMe(t,e),{tv:fr}=fTe(rMe);const iMe=fr({base:"react-aria-SearchField",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});function sMe({label:t,description:e,errorMessage:n,placeholder:r,variant:i="primary",size:s="md",...a}){return d.jsxs(K3e,{...a,className:Vy(a.className,(o,l)=>iMe({...l,variant:i,size:s,className:o})),children:[t&&d.jsx(xn,{children:t}),d.jsx(br,{placeholder:r}),d.jsx(en,{children:""}),e&&d.jsx(lE,{slot:"description",children:e}),d.jsx(zT,{children:n})]})}const jF="xstudio_recent_searches",M7=10;function aMe(){try{const t=localStorage.getItem(jF);if(t){const e=JSON.parse(t);if(Array.isArray(e))return e}}catch(t){console.error("Failed to load recent searches:",t)}return[]}function oMe(t){try{localStorage.setItem(jF,JSON.stringify(t))}catch(e){console.error("Failed to save recent searches:",e)}}function lMe(){const t=UE({initialItems:aMe(),getKey:i=>i.id});C.useEffect(()=>{oMe(t.items)},[t.items]);const e=i=>{if(!i.trim())return;const s=i.trim().toLowerCase(),a=t.items.find(l=>l.query.toLowerCase()===s);a&&t.remove(a.id);const o={id:`${Date.now()}-${s}`,query:i.trim(),timestamp:Date.now()};if(t.prepend(o),t.items.length>M7){const l=t.items.slice(M7);t.remove(...l.map(c=>c.id))}},n=()=>{const i=t.items.map(s=>s.id);t.remove(...i),localStorage.removeItem(jF)},r=i=>{t.remove(i)};return{recentSearches:t.items,addSearch:e,clearSearches:n,removeSearch:r}}function cMe({onSearchChange:t}){const[e,n]=C.useState(""),r=C.useRef(null),{addSearch:i}=lMe(),o=`Search components... (${C.useMemo(()=>typeof navigator>"u"?!1:/Mac|iPhone|iPad|iPod/.test(navigator.platform)||/Mac|iPhone|iPad|iPod/.test(navigator.userAgent),[])?"K":"Ctrl+K"})`;return C.useEffect(()=>{const l=c=>{(c.metaKey||c.ctrlKey)&&c.key==="k"&&(c.preventDefault(),r.current?.focus())};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[]),C.useEffect(()=>{t(e)},[e,t]),C.useEffect(()=>{if(!e.trim())return;const l=setTimeout(()=>{i(e)},1e3);return()=>clearTimeout(l)},[e,i]),d.jsx("div",{className:"component-search",children:d.jsx(sMe,{value:e,onChange:n,placeholder:o,"aria-label":"Search components",className:"component-search-field"})})}const OF="xstudio_recent_components",D7=8;function uMe(){try{const t=localStorage.getItem(OF);if(t){const e=JSON.parse(t);if(Array.isArray(e))return e.map(n=>typeof n=="string"?{id:n,tag:n,count:1}:n.tag&&typeof n.tag=="string"?{id:n.id||n.tag,tag:n.tag,count:n.count||1}:{id:n.id,tag:n.tag,count:n.count||1})}}catch(t){console.error("Failed to load recent components:",t)}return[]}function dMe(t){try{localStorage.setItem(OF,JSON.stringify(t))}catch(e){console.error("Failed to save recent components:",e)}}function hMe(){const t=UE({initialItems:uMe(),getKey:s=>s.id});C.useEffect(()=>{dMe(t.items)},[t.items]);const e=s=>{const a=t.items.find(o=>o.tag===s);if(a?(t.remove(s),t.prepend({id:s,tag:s,count:a.count+1})):t.prepend({id:s,tag:s,count:1}),t.items.length>D7){const l=t.items.slice(D7).map(c=>c.id);t.remove(...l)}},n=()=>{const s=t.items.map(a=>a.id);t.remove(...s),localStorage.removeItem(OF)},r=s=>t.items.find(o=>o.tag===s)?.count||0;return{recentTags:t.items.map(s=>s.tag),addRecentComponent:e,clearRecentComponents:n,getComponentCount:r}}const zF="xstudio_favorite_components";function fMe(){try{const t=localStorage.getItem(zF);if(t){const e=JSON.parse(t);if(Array.isArray(e))return e.map(n=>({id:n,tag:n}))}}catch(t){console.error("Failed to load favorite components:",t)}return[]}function pMe(t){try{const e=t.map(n=>n.tag);localStorage.setItem(zF,JSON.stringify(e))}catch(e){console.error("Failed to save favorite components:",e)}}function gMe(){const t=UE({initialItems:fMe(),getKey:s=>s.id});C.useEffect(()=>{pMe(t.items)},[t.items]);const e=s=>{t.items.some(o=>o.tag===s)?t.remove(s):t.append({id:s,tag:s})},n=s=>t.items.some(a=>a.tag===s),r=()=>{const s=t.items.map(a=>a.id);t.remove(...s),localStorage.removeItem(zF)};return{favoriteTags:t.items.map(s=>s.tag),toggleFavorite:e,isFavorite:n,clearFavorites:r}}const R7="xstudio_category_expansion";function mMe(t={}){const{initialExpanded:e=[],persist:n=!0}=t,r=C.useCallback(()=>{if(!n)return new Set(e);try{const h=localStorage.getItem(R7);if(h){const f=JSON.parse(h);return new Set(Array.isArray(f)?f:e)}}catch(h){console.warn("Failed to load category expansion state:",h)}return new Set(e)},[e,n]),[i,s]=C.useState(r);C.useEffect(()=>{if(n)try{const h=Array.from(i);localStorage.setItem(R7,JSON.stringify(h))}catch(h){console.warn("Failed to save category expansion state:",h)}},[i,n]);const a=C.useCallback(h=>i.has(h),[i]),o=C.useCallback(h=>{s(f=>{const p=new Set(f);return p.has(h)?p.delete(h):p.add(h),p})},[]),l=C.useCallback(h=>{s(f=>{const p=new Set(f);return h.forEach(m=>p.add(m)),p})},[]),c=C.useCallback(h=>{s(new Set(h))},[]),u=C.useCallback(()=>{s(new Set)},[]);return{expandedCategories:i,isExpanded:a,toggleCategory:o,expandCategories:l,expandAll:c,collapseAll:u}}const AL=fr({base:"react-aria-Skeleton",variants:{variant:{text:"text",circular:"circular",rectangular:"rectangular",rounded:"rounded"},animation:{shimmer:"shimmer",pulse:"pulse",wave:"wave",none:""},componentVariant:{button:"button",badge:"badge",link:"link",input:"input",checkbox:"checkbox",radio:"radio",switch:"switch",slider:"slider","list-item":"list-item","grid-item":"grid-item","table-row":"table-row","table-cell":"table-cell","tree-node":"tree-node",card:"card","card-gallery":"card-gallery","card-horizontal":"card-horizontal",tabs:"tabs",tab:"tab",calendar:"calendar","calendar-cell":"calendar-cell",progress:"progress",meter:"meter",avatar:"avatar",nav:"nav",breadcrumb:"breadcrumb",pagination:"pagination","color-swatch":"color-swatch","color-area":"color-area",tag:"tag","menu-item":"menu-item",disclosure:"disclosure"},size:{xs:"xs",sm:"sm",md:"md",lg:"lg",xl:"xl"}},defaultVariants:{variant:"text",animation:"shimmer",size:"md"}});function AMe({width:t,height:e,isLast:n,lastLineWidth:r,animation:i,className:s,style:a}){const o=n&&r?r:t;return d.jsx("div",{className:AL({variant:"text",animation:i,className:s}),style:{width:typeof o=="number"?`${o}px`:o,height:typeof e=="number"?`${e}px`:e,...a},"aria-hidden":"true"})}function Pp({variant:t="text",animation:e="shimmer",width:n,height:r,lines:i=1,lineHeight:s,lastLineWidth:a="60%",lineGap:o,componentVariant:l,size:c="md",className:u,style:h,index:f,"aria-label":p="Loading...","data-testid":m="skeleton"}){return l?d.jsx("div",{className:AL({componentVariant:l,size:c,animation:e,className:u}),style:{"--skeleton-index":f,...h},role:"status","aria-label":p,"aria-busy":"true","data-testid":m,children:yMe(l)}):t==="text"&&i>1?d.jsx("div",{className:"react-aria-Skeleton-group",style:{display:"flex",flexDirection:"column",gap:typeof o=="number"?`${o}px`:o||"8px",...h},role:"status","aria-label":p,"aria-busy":"true","data-testid":m,children:Array.from({length:i}).map((v,A)=>d.jsx(AMe,{width:n||"100%",height:s||r||14,isLast:A===i-1,lastLineWidth:a,animation:e},A))}):d.jsx("div",{className:AL({variant:t,animation:e,className:u}),style:{width:typeof n=="number"?`${n}px`:n,height:typeof r=="number"?`${r}px`:r,"--skeleton-index":f,...h},role:"status","aria-label":p,"aria-busy":"true","data-testid":m})}function yMe(t){switch(t){case"button":return d.jsx("span",{className:"skeleton-content"});case"badge":return d.jsx("span",{className:"skeleton-content"});case"input":return d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"skeleton-label"}),d.jsx("span",{className:"skeleton-input"})]});case"checkbox":case"radio":return d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"skeleton-box"}),d.jsx("span",{className:"skeleton-label"})]});case"switch":return d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"skeleton-track"}),d.jsx("span",{className:"skeleton-label"})]});case"slider":return d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"skeleton-track"}),d.jsx("span",{className:"skeleton-thumb"})]});case"list-item":case"menu-item":return d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"skeleton-line title"}),d.jsx("span",{className:"skeleton-line desc"})]});case"grid-item":return d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"skeleton-image"}),d.jsx("span",{className:"skeleton-line title"}),d.jsx("span",{className:"skeleton-line desc"})]});case"table-row":return d.jsx(d.Fragment,{children:[1,2,3,4].map(e=>d.jsx("span",{className:"skeleton-cell",style:{width:`${20+e*5}%`}},e))});case"table-cell":return d.jsx("span",{className:"skeleton-content"});case"tree-node":return d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"skeleton-icon"}),d.jsx("span",{className:"skeleton-line title"})]});case"card":return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"skeleton-header",children:[d.jsx("span",{className:"skeleton-line title"}),d.jsx("span",{className:"skeleton-line subtitle"})]}),d.jsxs("div",{className:"skeleton-body",children:[d.jsx("span",{className:"skeleton-line"}),d.jsx("span",{className:"skeleton-line"}),d.jsx("span",{className:"skeleton-line short"})]})]});case"card-gallery":return d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"skeleton-image"}),d.jsxs("div",{className:"skeleton-content",children:[d.jsx("span",{className:"skeleton-line title"}),d.jsx("span",{className:"skeleton-line desc"})]})]});case"card-horizontal":return d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"skeleton-image"}),d.jsxs("div",{className:"skeleton-content",children:[d.jsx("span",{className:"skeleton-line title"}),d.jsx("span",{className:"skeleton-line desc"}),d.jsx("span",{className:"skeleton-line short"})]})]});case"tabs":return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"skeleton-tab-list",children:[1,2,3].map(e=>d.jsx("span",{className:"skeleton-tab"},e))}),d.jsxs("div",{className:"skeleton-tab-panel",children:[d.jsx("span",{className:"skeleton-line"}),d.jsx("span",{className:"skeleton-line"}),d.jsx("span",{className:"skeleton-line short"})]})]});case"tab":return d.jsx("span",{className:"skeleton-content"});case"calendar":return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"skeleton-calendar-header",children:[d.jsx("span",{className:"skeleton-nav"}),d.jsx("span",{className:"skeleton-title"}),d.jsx("span",{className:"skeleton-nav"})]}),d.jsx("div",{className:"skeleton-calendar-grid",children:Array.from({length:35}).map((e,n)=>d.jsx("span",{className:"skeleton-day"},n))})]});case"calendar-cell":return d.jsx("span",{className:"skeleton-content"});case"progress":case"meter":return d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"skeleton-label"}),d.jsx("span",{className:"skeleton-bar"})]});case"avatar":return d.jsx("span",{className:"skeleton-circle"});case"breadcrumb":return d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"skeleton-item"}),d.jsx("span",{className:"skeleton-separator"}),d.jsx("span",{className:"skeleton-item"}),d.jsx("span",{className:"skeleton-separator"}),d.jsx("span",{className:"skeleton-item current"})]});case"pagination":return d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"skeleton-button"}),[1,2,3].map(e=>d.jsx("span",{className:"skeleton-page"},e)),d.jsx("span",{className:"skeleton-button"})]});case"color-swatch":return d.jsx("span",{className:"skeleton-swatch"});case"color-area":return d.jsx("span",{className:"skeleton-area"});case"tag":return d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"skeleton-content"}),d.jsx("span",{className:"skeleton-remove"})]});case"disclosure":return d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"skeleton-icon"}),d.jsx("span",{className:"skeleton-title"})]});default:return d.jsx("span",{className:"skeleton-content"})}}Pp.Text=function({lines:e=1,...n}){return d.jsx(Pp,{variant:"text",lines:e,...n})};Pp.Circle=function({size:e=48,...n}){return d.jsx(Pp,{variant:"circular",width:e,height:e,...n})};Pp.Rect=function(e){return d.jsx(Pp,{variant:"rectangular",...e})};const vMe=fr({base:"react-aria-Badge",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"},isDot:{true:"dot",false:""},isPulsing:{true:"pulsing",false:""}},defaultVariants:{variant:"primary",size:"sm",isDot:!1,isPulsing:!1}});function xMe({variant:t="primary",size:e="sm",isDot:n=!1,isPulsing:r=!1,isLoading:i=!1,className:s,children:a,...o}){const l=vMe({variant:t,size:e,isDot:n,isPulsing:r,className:s});return i?d.jsx(Pp,{componentVariant:"badge",size:e,className:s,"aria-label":"Loading badge..."}):d.jsx("span",{...o,className:l,"data-badge":!0,children:!n&&a})}const P7=[{tag:"Panel",label:"panel",icon:fY},{tag:"Card",label:"card",icon:$N},{tag:"Tabs",label:"tabs",icon:Vge},{tag:"Breadcrumbs",label:"breadcrumbs",icon:Sl},{tag:"Link",label:"link",icon:hI},{tag:"Separator",label:"separator",icon:$Ae},{tag:"Nav",label:"navigation",icon:P8},{tag:"Slot",label:"slot",icon:x_,layoutOnly:!0}],bMe=[{tag:"TextField",label:"text field",icon:wAe},{tag:"NumberField",label:"number field",icon:R8},{tag:"SearchField",label:"search field",icon:Xd},{tag:"Checkbox",label:"checkbox",icon:ZAe},{tag:"CheckboxGroup",label:"checkbox group",icon:tE},{tag:"RadioGroup",label:"radio group",icon:tE},{tag:"Select",label:"select",icon:zs},{tag:"ComboBox",label:"combo box",icon:zs},{tag:"Switch",label:"switch",icon:$ye},{tag:"Slider",label:"slider",icon:KAe},{tag:"TailSwatch",label:"color picker",icon:mAe}],CMe=[{tag:"Button",label:"button",icon:Kw},{tag:"ToggleButton",label:"toggle button",icon:Oye},{tag:"ToggleButtonGroup",label:"toggle button group",icon:tE},{tag:"Menu",label:"menu",icon:P8},{tag:"Toolbar",label:"toolbar",icon:gf}],EMe=[{tag:"Table",label:"table",icon:Iye},{tag:"ListBox",label:"list box",icon:G0e},{tag:"GridList",label:"grid list",icon:dY},{tag:"Tree",label:"tree",icon:U0e},{tag:"TagGroup",label:"tag group",icon:jM},{tag:"Field",label:"field",icon:tE}],SMe=[{tag:"Tooltip",label:"tooltip",icon:gY},{tag:"ProgressBar",label:"progress bar",icon:tY},{tag:"Meter",label:"meter",icon:cY},{tag:"Badge",label:"badge",icon:yY}],wMe=[{tag:"Calendar",label:"calendar",icon:yme},{tag:"DatePicker",label:"date picker",icon:GO},{tag:"DateRangePicker",label:"date range picker",icon:mme},{tag:"DateField",label:"date field",icon:GO},{tag:"TimeField",label:"time field",icon:zs}],_Me=[{tag:"Dialog",label:"dialog",icon:$N},{tag:"Modal",label:"modal",icon:fY},{tag:"Popover",label:"popover",icon:$N},{tag:"Tooltip",label:"tooltip",icon:gY}],IMe=[{tag:"Text",label:"text",icon:L8},{tag:"section",label:"section",icon:Ny},{tag:"Div",label:"division",icon:dI}],BMe=[{tag:"Form",label:"form",icon:tE}],$R={layout:{label:"Layout",description:"Containers and structure"},inputs:{label:"Inputs",description:"Form controls"},actions:{label:"Actions",description:"Buttons and interactions"},collections:{label:"Collections",description:"Lists and data display"},feedback:{label:"Feedback",description:"Status indicators"},dateTime:{label:"Date & Time",description:"Date pickers"},overlays:{label:"Overlays",description:"Dialogs and modals"},structure:{label:"Structure",description:"Basic elements"},other:{label:"Other",description:"Item components"}},Tw=({component:t,onAdd:e,selectedElementId:n,isRecent:r=!1,count:i=0})=>{const s=C.useCallback(()=>{e(t.tag,n||void 0)},[t.tag,e,n]);return d.jsxs("button",{className:"list-item",onClick:s,title:`Add ${t.label} element`,children:[d.jsx("div",{className:"list-item-icon",children:d.jsx(t.icon,{strokeWidth:1.5,width:16,height:16})}),r&&i>0&&d.jsx(xMe,{children:i}),d.jsx("span",{className:"list-item-name",children:t.label})]})};Tw.displayName="ComponentItem";const jse=C.memo(({handleAddElement:t,selectedElementId:e})=>{const{recentTags:n,addRecentComponent:r,clearRecentComponents:i,getComponentCount:s}=hMe(),{favoriteTags:a}=gMe(),[o,l]=C.useState(""),u=sd(T=>T.mode)==="layout",h=C.useMemo(()=>["layout","inputs","actions","collections","feedback","dateTime","overlays","structure","other"],[]),{isExpanded:f,toggleCategory:p,expandCategories:m}=mMe({initialExpanded:h,persist:!0}),v=C.useCallback((T,M)=>{t(T,M),r(T)},[t,r]),A=C.useMemo(()=>({layout:u?P7:P7.filter(T=>!("layoutOnly"in T&&T.layoutOnly)),inputs:bMe,actions:CMe,collections:EMe,feedback:SMe,dateTime:wMe,overlays:_Me,structure:IMe,other:BMe}),[u]),x=C.useMemo(()=>Object.entries(A).flatMap(([T,M])=>{const R=$R[T];return M.map(k=>({...k,category:R.label,categoryKey:T}))}),[A]),E=C.useMemo(()=>{if(!o.trim())return null;const T=o.toLowerCase();return x.map(R=>{const k=R.label.toLowerCase(),L=R.tag.toLowerCase(),F=R.category.toLowerCase();let z=0;(k===T||L===T)&&(z+=100),(k.startsWith(T)||L.startsWith(T))&&(z+=50),k.includes(T)&&(z+=30),L.includes(T)&&(z+=25),F.includes(T)&&(z+=10);const G=T.split(" ").filter(q=>q.length>0);return G.every(q=>k.includes(q)||L.includes(q))&&G.length>1&&(z+=20),{...R,score:z}}).filter(R=>R.score>0).sort((R,k)=>k.score-R.score)},[o,x]),w=C.useMemo(()=>{if(!E)return null;const T={};return E.forEach(M=>{T[M.categoryKey]||(T[M.categoryKey]=[]),T[M.categoryKey].push(M)}),T},[E]),B=C.useMemo(()=>n.map(T=>x.find(M=>M.tag===T)).filter(T=>T!==void 0).slice(0,8),[n,x]),D=C.useMemo(()=>a.map(T=>x.find(M=>M.tag===T)).filter(T=>T!==void 0),[a,x]);return C.useEffect(()=>{if(o&&w){const T=Object.keys(w);m(T)}},[o,w,m]),d.jsxs("div",{className:"panel",children:[d.jsx(uf,{icon:d.jsx(Zi,{size:16}),title:"Components",actions:d.jsx("button",{className:"iconButton","aria-label":"filter components",children:d.jsx(Fg,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})})}),d.jsx(cMe,{onSearchChange:l}),d.jsxs("div",{className:"panel-contents",children:[!o&&B.length>0&&d.jsxs("div",{className:"section",children:[d.jsxs("div",{className:"section-header",children:[d.jsxs("div",{className:"category-info",children:[d.jsx("h3",{className:"section-title",children:"Recently Used"}),d.jsx("span",{className:"category-count",children:B.length})]}),d.jsx("div",{className:"section-actions",children:d.jsx("button",{className:"iconButton","aria-label":"Clear Recent History",onClick:i,children:d.jsx(pu,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})})})]}),d.jsx("div",{className:"section-content",children:d.jsx("div",{className:"list-group",role:"list",children:B.map(T=>d.jsx(Tw,{component:T,onAdd:v,selectedElementId:e,isRecent:!0,count:s(T.tag)},T.tag))})})]}),D.length>0&&d.jsxs("div",{className:"section",children:[d.jsx("div",{className:"section-header",children:d.jsxs("div",{className:"category-info",children:[d.jsx(yY,{size:14,className:"category-icon-small"}),d.jsx("h3",{className:"section-title",children:"Favorites"}),d.jsx("span",{className:"category-count",children:D.length})]})}),d.jsx("div",{className:"section-content",children:d.jsx("div",{className:"list-group",role:"list",children:D.map(T=>d.jsx(Tw,{component:T,onAdd:v,selectedElementId:e},T.tag))})})]}),o&&w?Object.entries(w).map(([T,M])=>{const R=T,k=$R[R],L=f(R);return!M||M.length===0?null:d.jsxs("div",{className:"section",children:[d.jsxs("div",{className:"section-header",children:[d.jsxs("div",{className:"category-info",children:[d.jsx("h3",{className:"section-title",children:k.label}),d.jsx("span",{className:"category-count",children:M.length})]}),d.jsx("div",{className:"section-actions",children:d.jsx("button",{className:"iconButton","aria-label":`Toggle ${k.label}`,onClick:()=>p(R),children:L?d.jsx(y_,{color:ge.color,strokeWidth:ge.stroke,size:ge.size}):d.jsx(zs,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})})})]}),L&&d.jsx("div",{className:"section-content",children:d.jsx("div",{className:"list-group",role:"list",children:M.map(F=>d.jsx(Tw,{component:F,onAdd:v,selectedElementId:e},F.tag))})})]},T)}):o?d.jsx("div",{className:"section",children:d.jsxs("div",{className:"search-no-results",children:[d.jsx(Xd,{size:24,color:ge.color}),d.jsx("p",{className:"no-results-title",children:"No components found"}),d.jsx("p",{className:"no-results-hint",children:"Try 'button', 'input', or 'table'"})]})}):Object.entries(A).map(([T,M])=>{const R=T,k=$R[R],L=f(R);return d.jsxs("div",{className:"section",children:[d.jsxs("div",{className:"section-header",children:[d.jsxs("div",{className:"category-info",children:[d.jsx("h3",{className:"section-title",children:k.label}),d.jsx("span",{className:"category-count",children:M.length})]}),d.jsx("div",{className:"section-actions",children:d.jsx("button",{className:"iconButton","aria-label":`Toggle ${k.label}`,onClick:()=>p(R),children:L?d.jsx(y_,{color:ge.color,strokeWidth:ge.stroke,size:ge.size}):d.jsx(zs,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})})})]}),L&&d.jsx("div",{className:"section-content",children:d.jsx("div",{className:"list-group",role:"list",children:M.map(F=>d.jsx(Tw,{component:F,onAdd:v,selectedElementId:e},F.tag))})})]},T)})]})]})});jse.displayName="ComponentList";fr({base:"react-aria-Slider",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"default",size:"md"}});const TMe=fr({base:"react-aria-Button",variants:{variant:{default:"",primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",surface:"surface",outline:"outline",ghost:"ghost"},size:{xs:"xs",sm:"sm",md:"md",lg:"lg",xl:"xl"},isFocusVisible:{true:"focus-visible",false:""}},defaultVariants:{variant:"default",size:"sm"}}),Xn=C.forwardRef(function(e,n){const{isLoading:r,loadingLabel:i="Loading...",children:s,size:a="sm",...o}=e,{focusProps:l,isFocusVisible:c}=mu();return d.jsx(en,{ref:n,...an(o,l),type:e.type,isDisabled:r||e.isDisabled,"data-focus-visible":c,"data-loading":r||void 0,"aria-busy":r||void 0,className:Vy(e.className,(u,h)=>TMe({...h,variant:e.variant,size:a,isFocusVisible:c,className:u})),children:r?d.jsxs(d.Fragment,{children:[d.jsx(Pp,{componentVariant:"button",size:a,"aria-label":i}),d.jsx("span",{className:"sr-only",children:i})]}):s})}),KS=t=>({id:t,status:"idle",data:[],error:null,lastLoadedAt:null,consumers:[]});function MMe(t,e){if(!e)return t;let n=[...t];if(e.filter&&e.filter.length>0&&(n=n.filter(r=>e.filter.every(i=>{const s=r[i.field],a=i.value;switch(i.operator){case"eq":return s===a;case"ne":return s!==a;case"gt":return typeof s=="number"&&typeof a=="number"&&s>a;case"gte":return typeof s=="number"&&typeof a=="number"&&s>=a;case"lt":return typeof s=="number"&&typeof a=="number"&&s<a;case"lte":return typeof s=="number"&&typeof a=="number"&&s<=a;case"contains":return typeof s=="string"&&typeof a=="string"&&s.includes(a);case"startsWith":return typeof s=="string"&&typeof a=="string"&&s.startsWith(a);case"endsWith":return typeof s=="string"&&typeof a=="string"&&s.endsWith(a);default:return!0}}))),e.sort){const{field:r,direction:i}=e.sort;n.sort((s,a)=>{const o=s[r],l=a[r];if(o===l)return 0;if(o==null)return 1;if(l==null)return-1;const c=o<l?-1:1;return i==="asc"?c:-c})}return e.offset&&e.offset>0&&(n=n.slice(e.offset)),e.limit&&e.limit>0&&(n=n.slice(0,e.limit)),e.select&&e.select.length>0&&(n=n.map(r=>{const i={};return e.select.forEach(s=>{s in r&&(i[s]=r[s])}),i})),e.map&&Object.keys(e.map).length>0&&(n=n.map(r=>{const i={...r};return Object.entries(e.map).forEach(([s,a])=>{s in i&&(i[a]=i[s],delete i[s])}),i})),n}const $F=t=>`xstudio_datatable_cache_${t}`;function DMe(t,e){try{const n=$F(t),r=localStorage.getItem(n);if(!r)return null;const{data:i,timestamp:s}=JSON.parse(r);return Date.now()-s>e?(localStorage.removeItem(n),console.log(` DataTable cache expired: ${t}`),null):(console.log(` DataTable cache restored from localStorage: ${t}`),i)}catch(n){return console.warn(` Failed to load cached data for ${t}:`,n),null}}function RMe(t,e){try{const n=$F(t),r={data:e,timestamp:Date.now()};localStorage.setItem(n,JSON.stringify(r)),console.log(` DataTable cache saved to localStorage: ${t}`)}catch(n){console.warn(` Failed to save cache for ${t}:`,n)}}function k7(t){try{const e=$F(t);localStorage.removeItem(e),console.log(` DataTable cache cleared: ${t}`)}catch(e){console.warn(` Failed to clear cache for ${t}:`,e)}}async function PMe(t,e){if(!t||t.type!=="collection")return[];if(t.source==="static"){const r=t.config.data;if(r&&Array.isArray(r))return r;throw new Error("Static data is not an array or is missing")}if(t.source==="api"){const n=t.config;if(!n.baseUrl||!n.endpoint)throw new Error("API configuration is incomplete");if(n.baseUrl==="MOCK_DATA"){const{apiConfig:a}=await fn(async()=>{const{apiConfig:l}=await Promise.resolve().then(()=>$ae);return{apiConfig:l}},[]),o=a.MOCK_DATA;if(o){const l=await o(n.endpoint||"/data",n.params),c=n.dataMapping?.resultPath?l[n.dataMapping.resultPath]:l;return Array.isArray(c)?c:[]}throw new Error("Mock API function not found")}const r=await fetch(`${n.baseUrl}${n.customUrl||n.endpoint}`,{method:n.method||"GET",headers:{...n.headers,"Content-Type":"application/json"},body:n.method!=="GET"?JSON.stringify(n.params):void 0,signal:e});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const i=await r.json(),s=n.dataMapping?.resultPath?i[n.dataMapping.resultPath]:i;return Array.isArray(s)?s:[]}throw t.source==="supabase"?new Error("Supabase data binding not yet implemented"):new Error(`Unknown data source: ${t.source}`)}const Jx=Jl((t,e)=>({dataTables:new Map,dataTableStates:new Map,registerDataTable:n=>{t(r=>{const i=new Map(r.dataTables),s=new Map(r.dataTableStates);return i.set(n.id,n),s.has(n.id)||s.set(n.id,KS(n.id)),console.log(` DataTable registered: ${n.id} (${n.name})`),{dataTables:i,dataTableStates:s}})},unregisterDataTable:n=>{const{dataTables:r}=e();r.get(n)?.persistCache&&k7(n),t(s=>{const a=new Map(s.dataTables),o=new Map(s.dataTableStates);return a.delete(n),o.delete(n),console.log(` DataTable unregistered: ${n}`),{dataTables:a,dataTableStates:o}})},loadDataTable:async n=>{const{dataTables:r,dataTableStates:i}=e(),s=r.get(n);if(!s){console.warn(` DataTable not found: ${n}`);return}const a=i.get(n),o=s.cacheTTL||300*1e3;if(s.useCache!==!1&&a?.status==="success"&&a.lastLoadedAt&&Date.now()-a.lastLoadedAt<o){console.log(` DataTable memory cache hit: ${n}`);return}if(s.persistCache&&s.useCache!==!1){const l=DMe(n,o);if(l){t(c=>{const u=new Map(c.dataTableStates),h=u.get(n)||KS(n);return u.set(n,{...h,status:"success",data:l,error:null,lastLoadedAt:Date.now()}),{dataTableStates:u}}),console.log(` DataTable localStorage cache hit: ${n}`);return}}t(l=>{const c=new Map(l.dataTableStates),u=c.get(n)||KS(n);return c.set(n,{...u,status:"loading",error:null}),{dataTableStates:c}});try{console.log(` DataTable loading: ${n}`);const l=await PMe(s.dataBinding),c=MMe(l,s.transform);s.persistCache&&RMe(n,c),t(u=>{const h=new Map(u.dataTableStates),f=h.get(n)||KS(n);return h.set(n,{...f,status:"success",data:c,error:null,lastLoadedAt:Date.now()}),console.log(` DataTable loaded: ${n} (raw: ${l.length}, transformed: ${c.length} items)`),{dataTableStates:h}})}catch(l){const c=l instanceof Error?l.message:"Unknown error";t(u=>{const h=new Map(u.dataTableStates),f=h.get(n)||KS(n);return h.set(n,{...f,status:"error",error:c}),console.error(` DataTable load error: ${n}`,c),{dataTableStates:h}})}},refreshDataTable:async n=>{const{dataTables:r}=e();if(!r.get(n)){console.warn(` DataTable not found: ${n}`);return}t(s=>{const a=new Map(s.dataTableStates),o=a.get(n);return o&&a.set(n,{...o,lastLoadedAt:null}),{dataTableStates:a}}),await e().loadDataTable(n)},refreshAllDataTables:async()=>{const{dataTables:n,refreshDataTable:r}=e(),i=Array.from(n.keys());console.log(` Refreshing all dataTables (${i.length})`),await Promise.all(i.map(s=>r(s))),console.log(" All dataTables refreshed")},addConsumer:(n,r)=>{t(i=>{const s=new Map(i.dataTableStates),a=s.get(n);return a&&!a.consumers.includes(r)&&(s.set(n,{...a,consumers:[...a.consumers,r]}),console.log(` Consumer added to ${n}: ${r}`)),{dataTableStates:s}})},removeConsumer:(n,r)=>{t(i=>{const s=new Map(i.dataTableStates),a=s.get(n);return a&&(s.set(n,{...a,consumers:a.consumers.filter(o=>o!==r)}),console.log(` Consumer removed from ${n}: ${r}`)),{dataTableStates:s}})},getDataTableData:n=>{const{dataTableStates:r}=e();return r.get(n)?.data||[]},getDataTableState:n=>{const{dataTableStates:r}=e();return r.get(n)},updateDataTableConfig:(n,r)=>{t(i=>{const s=new Map(i.dataTables),a=s.get(n);return a&&(s.set(n,{...a,...r}),console.log(` DataTable config updated: ${n}`)),{dataTables:s}})},clearAllDataTables:()=>{const{dataTables:n}=e();n.forEach((r,i)=>{r.persistCache&&k7(i)}),t({dataTables:new Map,dataTableStates:new Map}),console.log(" All dataTables cleared")}}));class QR{capacity;cache;head=null;tail=null;hits=0;misses=0;constructor(e=1e3){this.capacity=e,this.cache=new Map}get(e){const n=this.cache.get(e);return n?(this.moveToFront(n),this.hits++,n.value):(this.misses++,null)}set(e,n){const r=this.cache.get(e);if(r){r.value=n,this.moveToFront(r);return}const i={key:e,value:n,prev:null,next:null};this.cache.set(e,i),this.addToFront(i),this.cache.size>this.capacity&&this.removeLRU()}delete(e){const n=this.cache.get(e);return n?(this.removeNode(n),this.cache.delete(e),!0):!1}clear(){this.cache.clear(),this.head=null,this.tail=null,this.hits=0,this.misses=0}has(e){return this.cache.has(e)}moveToFront(e){e!==this.head&&(this.removeNode(e),this.addToFront(e))}addToFront(e){e.next=this.head,e.prev=null,this.head&&(this.head.prev=e),this.head=e,this.tail||(this.tail=e)}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}removeLRU(){if(!this.tail)return;const e=this.tail;this.removeNode(e),this.cache.delete(e.key)}setMany(e){e.forEach(({key:n,value:r})=>{this.set(n,r)})}deleteMany(e){e.forEach(n=>{this.delete(n)})}getStats(){const e=this.hits+this.misses,n=e>0?this.hits/e*100:0;return{size:this.cache.size,capacity:this.capacity,hits:this.hits,misses:this.misses,hitRate:n.toFixed(2)+"%",memoryUsage:this.estimateMemoryUsage()}}resetStats(){this.hits=0,this.misses=0}estimateMemoryUsage(){const e=this.cache.size*2048;return e<1024?e+" B":e<1024*1024?(e/1024).toFixed(2)+" KB":(e/(1024*1024)).toFixed(2)+" MB"}getSize(){return this.cache.size}getCapacity(){return this.capacity}setCapacity(e){for(this.capacity=e;this.cache.size>this.capacity;)this.removeLRU()}}const kMe="xstudio",NMe=7;class LMe{db=null;elementCache=new QR(1e3);pageCache=new QR(100);projectCache=new QR(10);async init(){return new Promise((e,n)=>{const r=indexedDB.open(kMe,NMe);r.onerror=()=>{n(new Error("Failed to open IndexedDB"))},r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=i=>{const s=i.target.result;if(s.objectStoreNames.contains("projects")||(s.createObjectStore("projects",{keyPath:"id"}),console.log("[IndexedDB] Created store: projects")),!s.objectStoreNames.contains("pages")){const a=s.createObjectStore("pages",{keyPath:"id"});a.createIndex("project_id","project_id",{unique:!1}),a.createIndex("order_num","order_num",{unique:!1}),console.log("[IndexedDB] Created store: pages")}if(s.objectStoreNames.contains("elements")){const a=i.target.transaction;if(a){const o=a.objectStore("elements");o.indexNames.contains("layout_id")||(o.createIndex("layout_id","layout_id",{unique:!1}),console.log("[IndexedDB] Added index: elements.layout_id"))}}else{const a=s.createObjectStore("elements",{keyPath:"id"});a.createIndex("page_id","page_id",{unique:!1}),a.createIndex("parent_id","parent_id",{unique:!1}),a.createIndex("order_num","order_num",{unique:!1}),a.createIndex("layout_id","layout_id",{unique:!1}),console.log("[IndexedDB] Created store: elements")}if(s.objectStoreNames.contains("design_tokens")){const a=i.target.transaction;if(a){const o=a.objectStore("design_tokens");o.indexNames.contains("theme_id")||(o.createIndex("theme_id","theme_id",{unique:!1}),console.log("[IndexedDB] Added index: design_tokens.theme_id"))}}else{const a=s.createObjectStore("design_tokens",{keyPath:"id"});a.createIndex("project_id","project_id",{unique:!1}),a.createIndex("theme_id","theme_id",{unique:!1}),console.log("[IndexedDB] Created store: design_tokens")}if(!s.objectStoreNames.contains("history")){const a=s.createObjectStore("history",{keyPath:"id"});a.createIndex("page_id","page_id",{unique:!1}),a.createIndex("created_at","created_at",{unique:!1}),console.log("[IndexedDB] Created store: history")}if(!s.objectStoreNames.contains("design_themes")){const a=s.createObjectStore("design_themes",{keyPath:"id"});a.createIndex("project_id","project_id",{unique:!1}),a.createIndex("status","status",{unique:!1}),console.log("[IndexedDB] Created store: design_themes")}if(s.objectStoreNames.contains("metadata")||(s.createObjectStore("metadata",{keyPath:"project_id"}),console.log("[IndexedDB] Created store: metadata")),s.objectStoreNames.contains("layouts")){const a=i.target.transaction;if(a){const o=a.objectStore("layouts");o.indexNames.contains("order_num")||(o.createIndex("order_num","order_num",{unique:!1}),console.log("[IndexedDB] Added index: layouts.order_num")),o.indexNames.contains("slug")||(o.createIndex("slug","slug",{unique:!1}),console.log("[IndexedDB] Added index: layouts.slug"))}}else{const a=s.createObjectStore("layouts",{keyPath:"id"});a.createIndex("project_id","project_id",{unique:!1}),a.createIndex("name","name",{unique:!1}),a.createIndex("order_num","order_num",{unique:!1}),a.createIndex("slug","slug",{unique:!1}),console.log("[IndexedDB] Created store: layouts with order_num, slug indexes")}if(!s.objectStoreNames.contains("data_tables")){const a=s.createObjectStore("data_tables",{keyPath:"id"});a.createIndex("project_id","project_id",{unique:!1}),a.createIndex("name","name",{unique:!1}),console.log("[IndexedDB] Created store: data_tables")}if(!s.objectStoreNames.contains("api_endpoints")){const a=s.createObjectStore("api_endpoints",{keyPath:"id"});a.createIndex("project_id","project_id",{unique:!1}),a.createIndex("name","name",{unique:!1}),a.createIndex("targetDataTable","targetDataTable",{unique:!1}),console.log("[IndexedDB] Created store: api_endpoints")}if(!s.objectStoreNames.contains("variables")){const a=s.createObjectStore("variables",{keyPath:"id"});a.createIndex("project_id","project_id",{unique:!1}),a.createIndex("name","name",{unique:!1}),a.createIndex("scope","scope",{unique:!1}),a.createIndex("page_id","page_id",{unique:!1}),console.log("[IndexedDB] Created store: variables")}if(!s.objectStoreNames.contains("transformers")){const a=s.createObjectStore("transformers",{keyPath:"id"});a.createIndex("project_id","project_id",{unique:!1}),a.createIndex("name","name",{unique:!1}),a.createIndex("level","level",{unique:!1}),a.createIndex("inputDataTable","inputDataTable",{unique:!1}),a.createIndex("outputDataTable","outputDataTable",{unique:!1}),console.log("[IndexedDB] Created store: transformers")}console.log("[IndexedDB] Schema upgrade completed")}})}async close(){this.db&&(this.db.close(),this.db=null,this.elementCache.clear(),this.pageCache.clear(),this.projectCache.clear(),console.log("[IndexedDB] Database closed and caches cleared"))}ensureDB(){if(!this.db)throw new Error("Database not initialized. Call init() first.");return this.db}async getFromStore(e,n){const r=this.ensureDB();return new Promise((i,s)=>{const l=r.transaction(e,"readonly").objectStore(e).get(n);l.onsuccess=()=>i(l.result||null),l.onerror=()=>s(l.error)})}async putToStore(e,n){const r=this.ensureDB();return new Promise((i,s)=>{const l=r.transaction(e,"readwrite").objectStore(e).put(n);l.onsuccess=()=>i(n),l.onerror=()=>s(l.error)})}async deleteFromStore(e,n){const r=this.ensureDB();return new Promise((i,s)=>{const l=r.transaction(e,"readwrite").objectStore(e).delete(n);l.onsuccess=()=>i(),l.onerror=()=>s(l.error)})}async getAllFromStore(e){const n=this.ensureDB();return new Promise((r,i)=>{const o=n.transaction(e,"readonly").objectStore(e).getAll();o.onsuccess=()=>r(o.result),o.onerror=()=>i(o.error)})}async getAllByIndex(e,n,r){const i=this.ensureDB();return new Promise((s,a)=>{const u=i.transaction(e,"readonly").objectStore(e).index(n).getAll(r);u.onsuccess=()=>s(u.result),u.onerror=()=>a(u.error)})}projects={insert:async e=>{const n=await this.putToStore("projects",e);return this.projectCache.set(e.id,n),n},update:async(e,n)=>{let r=this.projectCache.get(e);if(r||(r=await this.getFromStore("projects",e)),!r)throw new Error(`Project not found: ${e}`);const i={...r,...n,updated_at:new Date().toISOString()},s=await this.putToStore("projects",i);return this.projectCache.set(e,s),s},delete:async e=>{await this.deleteFromStore("projects",e),this.projectCache.delete(e)},getById:async e=>{const n=this.projectCache.get(e);if(n)return n;const r=await this.getFromStore("projects",e);return r&&this.projectCache.set(e,r),r},getAll:async()=>this.getAllFromStore("projects")};pages={insert:async e=>{const n=await this.putToStore("pages",e);return this.pageCache.set(e.id,n),n},insertMany:async e=>{if(e.length===0)return[];const n=this.ensureDB();return new Promise((r,i)=>{const s=n.transaction("pages","readwrite"),a=s.objectStore("pages");e.forEach(o=>{a.put(o)}),s.oncomplete=()=>{this.pageCache.setMany(e.map(o=>({key:o.id,value:o}))),r(e)},s.onerror=()=>{console.error(" [IndexedDB] pages.insertMany transaction failed:",s.error),i(s.error)}})},update:async(e,n)=>{let r=this.pageCache.get(e);if(r||(r=await this.getFromStore("pages",e)),!r)throw new Error(`Page not found: ${e}`);const i={...r,...n,updated_at:new Date().toISOString()},s=await this.putToStore("pages",i);return this.pageCache.set(e,s),s},delete:async e=>{await this.deleteFromStore("pages",e),this.pageCache.delete(e)},getById:async e=>{const n=this.pageCache.get(e);if(n)return n;const r=await this.getFromStore("pages",e);return r&&this.pageCache.set(e,r),r},getByProject:async e=>this.getAllByIndex("pages","project_id",e),getAll:async()=>this.getAllFromStore("pages")};elements={insert:async e=>{const n=await this.putToStore("elements",e);return this.elementCache.set(e.id,n),n},insertMany:async e=>{if(e.length===0)return[];const n=this.ensureDB();return new Promise((r,i)=>{const s=n.transaction("elements","readwrite"),a=s.objectStore("elements");e.forEach(o=>{a.put(o)}),s.oncomplete=()=>{this.elementCache.setMany(e.map(o=>({key:o.id,value:o}))),r(e)},s.onerror=()=>{console.error(" [IndexedDB] insertMany transaction failed:",s.error),i(s.error)}})},update:async(e,n)=>{let r=this.elementCache.get(e);if(r||(r=await this.getFromStore("elements",e)),!r)throw new Error(`Element not found: ${e}`);const i={...r,...n,updated_at:new Date().toISOString()},s=await this.putToStore("elements",i);return this.elementCache.set(e,s),s},updateMany:async e=>{if(e.length===0)return[];const n=this.ensureDB();return new Promise((r,i)=>{const s=n.transaction("elements","readwrite"),a=s.objectStore("elements"),o=[];e.forEach(({id:l,data:c})=>{const u=a.get(l);u.onsuccess=()=>{const h=u.result;if(h){const f={...h,...c,updated_at:new Date().toISOString()};a.put(f),o.push(f)}}}),s.oncomplete=()=>{this.elementCache.setMany(o.map(l=>({key:l.id,value:l}))),r(o)},s.onerror=()=>{console.error(" [IndexedDB] updateMany transaction failed:",s.error),i(s.error)}})},delete:async e=>{await this.deleteFromStore("elements",e),this.elementCache.delete(e)},deleteMany:async e=>{if(e.length===0)return;const n=this.ensureDB();return new Promise((r,i)=>{const s=n.transaction("elements","readwrite"),a=s.objectStore("elements");e.forEach(o=>{a.delete(o)}),s.oncomplete=()=>{this.elementCache.deleteMany(e),r()},s.onerror=()=>{console.error(" [IndexedDB] deleteMany transaction failed:",s.error),i(s.error)}})},getById:async e=>{const n=this.elementCache.get(e);if(n)return n;const r=await this.getFromStore("elements",e);return r&&this.elementCache.set(e,r),r},getByPage:async e=>this.getAllByIndex("elements","page_id",e),getByLayout:async e=>{console.log(` [IndexedDB] getByLayout : layoutId=${e}`);const n=await this.getAllByIndex("elements","layout_id",e);return console.log(` [IndexedDB] getByLayout : ${n.length} `),n},getChildren:async e=>this.getAllByIndex("elements","parent_id",e),getAll:async()=>this.getAllFromStore("elements")};designTokens={getById:async e=>this.getFromStore("design_tokens",e),insert:async e=>this.putToStore("design_tokens",e),insertMany:async e=>{if(e.length===0)return[];const n=this.ensureDB();return new Promise((r,i)=>{const s=n.transaction("design_tokens","readwrite"),a=s.objectStore("design_tokens");e.forEach(o=>{a.put(o)}),s.oncomplete=()=>{r(e)},s.onerror=()=>{console.error(" [IndexedDB] designTokens.insertMany transaction failed:",s.error),i(s.error)}})},update:async(e,n)=>{const r=await this.getFromStore("design_tokens",e);if(!r)throw new Error(`Design token not found: ${e}`);const i={...r,...n};return this.putToStore("design_tokens",i)},delete:async e=>this.deleteFromStore("design_tokens",e),getByProject:async e=>this.getAllByIndex("design_tokens","project_id",e),getByTheme:async e=>this.getAllByIndex("design_tokens","theme_id",e),getAll:async()=>this.getAllFromStore("design_tokens")};history={insert:async e=>this.putToStore("history",e),getByPage:async(e,n=50)=>{const r=this.ensureDB();return new Promise((i,s)=>{const c=r.transaction("history","readonly").objectStore("history").index("page_id").getAll(e);c.onsuccess=()=>{const u=c.result.sort((h,f)=>new Date(f.created_at).getTime()-new Date(h.created_at).getTime()).slice(0,n);i(u)},c.onerror=()=>s(c.error)})},deleteOldEntries:async(e,n)=>{const i=(await this.history.getByPage(e,1e3)).slice(n),s=this.ensureDB();return new Promise((a,o)=>{const c=s.transaction("history","readwrite").objectStore("history");let u=0;i.forEach(h=>{const f=c.delete(h.id);f.onsuccess=()=>{u++,u===i.length&&a()},f.onerror=()=>o(f.error)}),i.length===0&&a()})},clear:async e=>{const n=await this.history.getByPage(e,1e3),r=this.ensureDB();return new Promise((i,s)=>{const o=r.transaction("history","readwrite").objectStore("history");let l=0;n.forEach(c=>{const u=o.delete(c.id);u.onsuccess=()=>{l++,l===n.length&&i()},u.onerror=()=>s(u.error)}),n.length===0&&i()})}};themes={getAll:async()=>this.getAllFromStore("design_themes"),getById:async e=>this.getFromStore("design_themes",e),getByProject:async e=>{const n=this.ensureDB();return new Promise((r,i)=>{const l=n.transaction("design_themes","readonly").objectStore("design_themes").index("project_id").getAll(e);l.onsuccess=()=>r(l.result||[]),l.onerror=()=>i(l.error)})},getActiveTheme:async e=>{const n=await this.themes.getByProject(e);return n.find(i=>i.status==="active")||n[0]||null},insert:async e=>(await this.putToStore("design_themes",e),e),update:async(e,n)=>{const r=await this.themes.getById(e);if(!r)throw new Error(`Theme ${e} not found`);const i={...r,...n,updated_at:new Date().toISOString()};return await this.putToStore("design_themes",i),i},delete:async e=>{const n=this.ensureDB();return new Promise((r,i)=>{const o=n.transaction("design_themes","readwrite").objectStore("design_themes").delete(e);o.onsuccess=()=>r(),o.onerror=()=>i(o.error)})}};layouts={insert:async e=>{const n=new Date().toISOString(),r={...e,created_at:e.created_at||n,updated_at:e.updated_at||n};return await this.putToStore("layouts",r),r},update:async(e,n)=>{const r=await this.layouts.getById(e);if(!r)throw new Error(`Layout ${e} not found`);const i={...r,...n,updated_at:new Date().toISOString()};return await this.putToStore("layouts",i),i},delete:async e=>{await this.deleteFromStore("layouts",e)},getById:async e=>this.getFromStore("layouts",e),getByProject:async e=>this.getAllByIndex("layouts","project_id",e),getAll:async()=>this.getAllFromStore("layouts")};data_tables={insert:async e=>{const n=new Date().toISOString(),r={...e,created_at:e.created_at||n,updated_at:e.updated_at||n};return await this.putToStore("data_tables",r),r},update:async(e,n)=>{const r=await this.data_tables.getById(e);if(!r)throw new Error(`DataTable ${e} not found`);const i={...r,...n,updated_at:new Date().toISOString()};return await this.putToStore("data_tables",i),i},delete:async e=>{await this.deleteFromStore("data_tables",e)},getById:async e=>this.getFromStore("data_tables",e),getByProject:async e=>this.getAllByIndex("data_tables","project_id",e),getByName:async e=>(await this.getAllByIndex("data_tables","name",e))[0]||null,getAll:async()=>this.getAllFromStore("data_tables")};api_endpoints={insert:async e=>{const n=new Date().toISOString(),r={...e,created_at:e.created_at||n,updated_at:e.updated_at||n};return await this.putToStore("api_endpoints",r),r},update:async(e,n)=>{const r=await this.api_endpoints.getById(e);if(!r)throw new Error(`ApiEndpoint ${e} not found`);const i={...r,...n,updated_at:new Date().toISOString()};return await this.putToStore("api_endpoints",i),i},delete:async e=>{await this.deleteFromStore("api_endpoints",e)},getById:async e=>this.getFromStore("api_endpoints",e),getByProject:async e=>this.getAllByIndex("api_endpoints","project_id",e),getByName:async e=>(await this.getAllByIndex("api_endpoints","name",e))[0]||null,getByTargetDataTable:async e=>this.getAllByIndex("api_endpoints","targetDataTable",e),getAll:async()=>this.getAllFromStore("api_endpoints")};variables={insert:async e=>{const n=new Date().toISOString(),r={...e,created_at:e.created_at||n,updated_at:e.updated_at||n};return await this.putToStore("variables",r),r},update:async(e,n)=>{const r=await this.variables.getById(e);if(!r)throw new Error(`Variable ${e} not found`);const i={...r,...n,updated_at:new Date().toISOString()};return await this.putToStore("variables",i),i},delete:async e=>{await this.deleteFromStore("variables",e)},getById:async e=>this.getFromStore("variables",e),getByProject:async e=>this.getAllByIndex("variables","project_id",e),getByName:async e=>(await this.getAllByIndex("variables","name",e))[0]||null,getByScope:async e=>this.getAllByIndex("variables","scope",e),getByPage:async e=>this.getAllByIndex("variables","page_id",e),getAll:async()=>this.getAllFromStore("variables")};transformers={insert:async e=>{const n=new Date().toISOString(),r={...e,created_at:e.created_at||n,updated_at:e.updated_at||n};return await this.putToStore("transformers",r),r},update:async(e,n)=>{const r=await this.transformers.getById(e);if(!r)throw new Error(`Transformer ${e} not found`);const i={...r,...n,updated_at:new Date().toISOString()};return await this.putToStore("transformers",i),i},delete:async e=>{await this.deleteFromStore("transformers",e)},getById:async e=>this.getFromStore("transformers",e),getByProject:async e=>this.getAllByIndex("transformers","project_id",e),getByName:async e=>(await this.getAllByIndex("transformers","name",e))[0]||null,getByLevel:async e=>this.getAllByIndex("transformers","level",e),getByInputDataTable:async e=>this.getAllByIndex("transformers","inputDataTable",e),getByOutputDataTable:async e=>this.getAllByIndex("transformers","outputDataTable",e),getAll:async()=>this.getAllFromStore("transformers")};metadata={get:async()=>(await this.getAllFromStore("metadata"))[0]||null,set:async e=>{await this.putToStore("metadata",e)},update:async e=>{const n=await this.metadata.get();if(!n)throw new Error("Metadata not found. Call set() first.");const r={...n,...e};await this.putToStore("metadata",r)}};cache={getStats:()=>({elements:this.elementCache.getStats(),pages:this.pageCache.getStats(),projects:this.projectCache.getStats()}),clear:()=>{this.elementCache.clear(),this.pageCache.clear(),this.projectCache.clear(),console.log("[IndexedDB] All caches cleared")},resetStats:()=>{this.elementCache.resetStats(),this.pageCache.resetStats(),this.projectCache.resetStats(),console.log("[IndexedDB] Cache statistics reset")}};batch={export:async()=>{const[e,n,r,i,s]=await Promise.all([this.projects.getAll().then(a=>a[0]||null),this.pages.getAll(),this.elements.getAll(),this.designTokens.getAll(),this.metadata.get()]);return{project:e,pages:n,elements:r,designTokens:i,metadata:s}},import:async e=>{e.project&&await this.projects.insert(e.project),e.pages&&e.pages.length>0&&await this.pages.insertMany(e.pages),e.elements&&e.elements.length>0&&await this.elements.insertMany(e.elements),e.designTokens&&e.designTokens.length>0&&await this.designTokens.insertMany(e.designTokens),e.metadata&&await this.metadata.set(e.metadata),console.log("[IndexedDB] Import completed:",{pages:e.pages?.length||0,elements:e.elements?.length||0,designTokens:e.designTokens?.length||0})},clear:async()=>{const e=this.ensureDB();return new Promise((n,r)=>{const i=["projects","pages","elements","design_tokens","design_themes","history","metadata","layouts","data_tables","api_endpoints","variables","transformers"],s=e.transaction(i,"readwrite");let a=0;i.forEach(o=>{const l=s.objectStore(o).clear();l.onsuccess=()=>{a++,a===i.length&&(console.log("[IndexedDB] All stores cleared"),n())},l.onerror=()=>r(l.error)})})}}}let UR=null,qS=null;async function On(){return UR||qS||(qS=(async()=>{const t=new LMe;return await t.init(),UR=t,qS=null,t})(),qS)}const yL=Object.freeze(Object.defineProperty({__proto__:null,getDB:On},Symbol.toStringTag,{value:"Module"}));function Ose(t,e){return e}function nh(){return Ose(void 0,!1)}function xf(){return Ose(void 0,!1)}function WE(t){if(!(nh()&&!xf()))try{const n=document.getElementById("previewFrame");if(n?.contentWindow){const r=Array.from(t.values()).map(i=>({id:i.id,name:i.name,schema:i.schema,mockData:i.mockData,runtimeData:i.runtimeData,useMockData:i.useMockData}));n.contentWindow.postMessage({type:"UPDATE_DATA_TABLES",dataTables:r},"*")}}catch(n){console.warn(" Canvas  :",n)}}const FMe=t=>async e=>{t({isLoading:!0});try{const r=await(await On()).data_tables?.getByProject(e)||[],i=new Map;(r||[]).forEach(s=>{i.set(s.name,s)}),t(s=>({dataTables:i,isLoading:!1,errors:new Map(s.errors)})),WE(i)}catch(n){console.error(" DataTable   :",n),t(r=>{const i=new Map(r.errors);return i.set("fetchDataTables",n),{errors:i,isLoading:!1}})}},jMe=(t,e)=>async n=>{t({isLoading:!0});try{const r=await On(),i={id:crypto.randomUUID(),name:n.name,project_id:n.project_id,schema:n.schema||[],mockData:n.mockData||[],useMockData:n.useMockData??!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await r.data_tables?.insert(i);const{dataTables:s}=e(),a=new Map(s);return a.set(i.name,i),t({dataTables:a,isLoading:!1}),WE(a),i}catch(r){throw console.error(" DataTable  :",r),t(i=>{const s=new Map(i.errors);return s.set("createDataTable",r),{errors:s,isLoading:!1}}),r}},OMe=(t,e)=>async(n,r)=>{try{await(await On()).data_tables?.update(n,r);const{dataTables:s}=e(),a=new Map(s);let o;if(s.forEach((l,c)=>{l.id===n&&(o=c)}),o){const c={...a.get(o),...r,updated_at:new Date().toISOString()};r.name&&r.name!==o?(a.delete(o),a.set(r.name,c)):a.set(o,c)}t({dataTables:a}),WE(a)}catch(i){throw console.error(" DataTable  :",i),t(s=>{const a=new Map(s.errors);return a.set("updateDataTable",i),{errors:a}}),i}},zMe=(t,e)=>async n=>{t({isLoading:!0});try{const i=(await On()).data_tables;if(!i)throw new Error("data_tables store not found in database");await i.delete(n);const{dataTables:s}=e(),a=new Map(s);let o=null;s.forEach((l,c)=>{l.id===n&&(o=c,a.delete(c))}),t({dataTables:a,isLoading:!1}),WE(a)}catch(r){throw console.error(" DataTable  :",r),t(i=>{const s=new Map(i.errors);return s.set("deleteDataTable",r),{errors:s,isLoading:!1}}),r}},$Me=t=>e=>{const{dataTables:n}=t(),r=n.get(e);return r?r.useMockData?r.mockData||[]:r.runtimeData||[]:(console.warn(` DataTable "${e}" not found`),[])},QMe=(t,e)=>(n,r)=>{const{dataTables:i}=e(),s=i.get(n);if(!s){console.warn(` DataTable "${n}" not found`);return}const a=new Map(i);a.set(n,{...s,runtimeData:r}),t({dataTables:a}),WE(a)},UMe=t=>async e=>{t({isLoading:!0});try{const r=await(await On()).api_endpoints?.getByProject(e)||[],i=new Map;(r||[]).forEach(s=>{i.set(s.name,s)}),t(s=>({apiEndpoints:i,isLoading:!1,errors:new Map(s.errors)}))}catch(n){console.error(" ApiEndpoint   :",n),t(r=>{const i=new Map(r.errors);return i.set("fetchApiEndpoints",n),{errors:i,isLoading:!1}})}},HMe=(t,e)=>async n=>{t({isLoading:!0});try{const r=await On(),i={id:crypto.randomUUID(),name:n.name,project_id:n.project_id,method:n.method,baseUrl:n.baseUrl,path:n.path,headers:n.headers||[],queryParams:n.queryParams||[],bodyType:n.bodyType||"none",bodyTemplate:n.bodyTemplate,responseMapping:n.responseMapping||{dataPath:"data"},targetDataTable:n.targetDataTable,executionMode:n.executionMode||"client",serverConfig:n.serverConfig,timeout:n.timeout||3e4,retryCount:n.retryCount||0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await r.api_endpoints?.insert(i);const{apiEndpoints:s}=e(),a=new Map(s);return a.set(i.name,i),t({apiEndpoints:a,isLoading:!1}),i}catch(r){throw console.error(" ApiEndpoint  :",r),t(i=>{const s=new Map(i.errors);return s.set("createApiEndpoint",r),{errors:s,isLoading:!1}}),r}},GMe=(t,e)=>async(n,r)=>{try{await(await On()).api_endpoints?.update(n,r);const{apiEndpoints:s}=e(),a=new Map(s);let o;if(s.forEach((l,c)=>{l.id===n&&(o=c)}),o){const c={...a.get(o),...r,updated_at:new Date().toISOString()};r.name&&r.name!==o?(a.delete(o),a.set(r.name,c)):a.set(o,c)}t({apiEndpoints:a})}catch(i){throw console.error(" ApiEndpoint  :",i),t(s=>{const a=new Map(s.errors);return a.set("updateApiEndpoint",i),{errors:a}}),i}},VMe=(t,e)=>async n=>{t({isLoading:!0});try{await(await On()).api_endpoints?.delete(n);const{apiEndpoints:i}=e(),s=new Map(i);i.forEach((a,o)=>{a.id===n&&s.delete(o)}),t({apiEndpoints:s,isLoading:!1})}catch(r){throw console.error(" ApiEndpoint  :",r),t(i=>{const s=new Map(i.errors);return s.set("deleteApiEndpoint",r),{errors:s,isLoading:!1}}),r}},WMe=(t,e)=>async(n,r)=>{const{apiEndpoints:i,loadingApis:s}=e();let a;if(i.forEach(l=>{l.id===n&&(a=l)}),!a)throw new Error(`ApiEndpoint not found: ${n}`);const o=new Set(s);o.add(n),t({loadingApis:o});try{let l=`${a.baseUrl}${a.path}`;if(r&&Object.entries(r).forEach(([w,B])=>{l=l.replace(`{{${w}}}`,String(B))}),a.queryParams.length>0){const w=new URLSearchParams;a.queryParams.forEach(D=>{if(D.key){let T=D.value;r&&Object.entries(r).forEach(([M,R])=>{T=T.replace(`{{${M}}}`,String(R))}),w.append(D.key,T)}});const B=w.toString();B&&(l+=`?${B}`)}const c={};a.headers.forEach(w=>{if(w.enabled&&w.key){let B=w.value;r&&Object.entries(r).forEach(([D,T])=>{B=B.replace(`{{${D}}}`,String(T))}),c[w.key]=B}});let u;a.bodyType!=="none"&&a.bodyTemplate&&(u=a.bodyTemplate,r&&Object.entries(r).forEach(([w,B])=>{u=u.replace(`{{${w}}}`,JSON.stringify(B))}));let h=l;const f=l.startsWith("http://")||l.startsWith("https://"),p=!1,m=new AbortController,v=setTimeout(()=>m.abort(),a.timeout||3e4),A=await fetch(h,{method:a.method,headers:c,body:u,signal:m.signal});if(clearTimeout(v),!A.ok)throw new Error(`HTTP ${A.status}: ${A.statusText}`);const x=await A.json();let E=x;if(a.responseMapping.dataPath&&(E=a.responseMapping.dataPath.split(".").reduce((B,D)=>B?.[D],x)),a.targetDataTable&&E){const{dataTables:w}=e(),B=w.get(a.targetDataTable);if(B){const D=new Map(w);D.set(a.targetDataTable,{...B,runtimeData:Array.isArray(E)?E:[E]}),t({dataTables:D}),WE(D)}}return E}catch(l){throw console.error(` ApiEndpoint "${a?.name}"  :`,l),t(c=>{const u=new Map(c.errors);return u.set(`executeApi_${n}`,l),{errors:u}}),l}finally{const l=e().loadingApis,c=new Set(l);c.delete(n),t({loadingApis:c})}},KMe=t=>async e=>{t({isLoading:!0});try{const r=await(await On()).variables?.getByProject(e)||[],i=new Map;(r||[]).forEach(s=>{i.set(s.name,s)}),t(s=>({variables:i,isLoading:!1,errors:new Map(s.errors)}))}catch(n){console.error(" Variable   :",n),t(r=>{const i=new Map(r.errors);return i.set("fetchVariables",n),{errors:i,isLoading:!1}})}},qMe=(t,e)=>async n=>{t({isLoading:!0});try{const r=await On(),i={id:crypto.randomUUID(),name:n.name,project_id:n.project_id,type:n.type,defaultValue:n.defaultValue,persist:n.persist??!1,scope:n.scope||"global",page_id:n.page_id,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await r.variables?.insert(i);const{variables:s}=e(),a=new Map(s);return a.set(i.name,i),t({variables:a,isLoading:!1}),i}catch(r){throw console.error(" Variable  :",r),t(i=>{const s=new Map(i.errors);return s.set("createVariable",r),{errors:s,isLoading:!1}}),r}},YMe=(t,e)=>async(n,r)=>{try{await(await On()).variables?.update(n,r);const{variables:s}=e(),a=new Map(s);let o;if(s.forEach((l,c)=>{l.id===n&&(o=c)}),o){const c={...a.get(o),...r,updated_at:new Date().toISOString()};r.name&&r.name!==o?(a.delete(o),a.set(r.name,c)):a.set(o,c)}t({variables:a})}catch(i){throw console.error(" Variable  :",i),t(s=>{const a=new Map(s.errors);return a.set("updateVariable",i),{errors:a}}),i}},XMe=(t,e)=>async n=>{t({isLoading:!0});try{await(await On()).variables?.delete(n);const{variables:i}=e(),s=new Map(i);i.forEach((a,o)=>{a.id===n&&s.delete(o)}),t({variables:s,isLoading:!1})}catch(r){throw console.error(" Variable  :",r),t(i=>{const s=new Map(i.errors);return s.set("deleteVariable",r),{errors:s,isLoading:!1}}),r}},JMe=t=>e=>{const{variables:n}=t(),r=n.get(e);if(!r){console.warn(` Variable "${e}" not found`);return}return r.defaultValue},ZMe=(t,e)=>(n,r)=>{const{variables:i}=e(),s=i.get(n);if(!s){console.warn(` Variable "${n}" not found`);return}const a=new Map(i);a.set(n,{...s,defaultValue:r}),t({variables:a})},e4e=t=>async e=>{t({isLoading:!0});try{const r=await(await On()).transformers?.getByProject(e)||[],i=new Map;(r||[]).forEach(s=>{i.set(s.name,s)}),t(s=>({transformers:i,isLoading:!1,errors:new Map(s.errors)}))}catch(n){console.error(" Transformer   :",n),t(r=>{const i=new Map(r.errors);return i.set("fetchTransformers",n),{errors:i,isLoading:!1}})}},t4e=(t,e)=>async n=>{t({isLoading:!0});try{const r=await On(),i={id:crypto.randomUUID(),name:n.name,project_id:n.project_id,level:n.level,responseMapping:n.responseMapping,jsTransformer:n.jsTransformer,customFunction:n.customFunction,inputDataTable:n.inputDataTable,outputDataTable:n.outputDataTable,enabled:n.enabled??!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await r.transformers?.insert(i);const{transformers:s}=e(),a=new Map(s);return a.set(i.name,i),t({transformers:a,isLoading:!1}),i}catch(r){throw console.error(" Transformer  :",r),t(i=>{const s=new Map(i.errors);return s.set("createTransformer",r),{errors:s,isLoading:!1}}),r}},n4e=(t,e)=>async(n,r)=>{t({isLoading:!0});try{await(await On()).transformers?.update(n,r);const{transformers:s}=e(),a=new Map(s);let o;if(s.forEach((l,c)=>{l.id===n&&(o=c)}),o){const c={...a.get(o),...r,updated_at:new Date().toISOString()};r.name&&r.name!==o?(a.delete(o),a.set(r.name,c)):a.set(o,c)}t({transformers:a,isLoading:!1})}catch(i){throw console.error(" Transformer  :",i),t(s=>{const a=new Map(s.errors);return a.set("updateTransformer",i),{errors:a,isLoading:!1}}),i}},r4e=(t,e)=>async n=>{t({isLoading:!0});try{await(await On()).transformers?.delete(n);const{transformers:i}=e(),s=new Map(i);i.forEach((a,o)=>{a.id===n&&s.delete(o)}),t({transformers:s,isLoading:!1})}catch(r){throw console.error(" Transformer  :",r),t(i=>{const s=new Map(i.errors);return s.set("deleteTransformer",r),{errors:s,isLoading:!1}}),r}},i4e=t=>async(e,n)=>{const{transformers:r,dataTables:i,variables:s}=t();let a;if(r.forEach(o=>{o.id===e&&(a=o)}),!a)throw new Error(`Transformer not found: ${e}`);if(!a.enabled)return console.warn(` Transformer "${a.name}" is disabled`),n;try{const o={dataTables:Object.fromEntries(Array.from(i.entries()).map(([c,u])=>[c,u.useMockData?u.mockData:u.runtimeData||[]])),variables:Object.fromEntries(Array.from(s.entries()).map(([c,u])=>[c,u.defaultValue])),api:{fetch:async(c,u)=>(await fetch(c,u)).json()},utils:{formatDate:(c,u)=>{const h=new Date(c);return u.replace("YYYY",h.getFullYear().toString()).replace("MM",(h.getMonth()+1).toString().padStart(2,"0")).replace("DD",h.getDate().toString().padStart(2,"0"))},formatCurrency:(c,u)=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:u}).format(c)}};let l=n;switch(a.level){case"level1_mapping":if(a.responseMapping){const{dataPath:c,fieldMappings:u}=a.responseMapping;c&&typeof n=="object"&&(l=c.split(".").reduce((f,p)=>f&&typeof f=="object"&&p in f?f[p]:f,n)),u&&Array.isArray(l)&&(l=l.map(h=>{const f={};return u.forEach(p=>{let m=h[p.sourceKey];if(p.transform&&m!==void 0)switch(p.transform){case"uppercase":m=String(m).toUpperCase();break;case"lowercase":m=String(m).toLowerCase();break;case"trim":m=String(m).trim();break;case"number":m=Number(m);break;case"boolean":m=!!m;break;case"date":m=new Date(String(m)).toISOString();break}f[p.targetKey]=m}),f}))}break;case"level2_transformer":a.jsTransformer?.code&&(l=new Function("data","context",a.jsTransformer.code)(n,o));break;case"level3_custom":console.warn("Level 3 Custom Function   .");break}return Array.isArray(l)?l:[l]}catch(o){throw console.error(` Transformer "${a?.name}"  :`,o),o}},s4e=t=>()=>{t({errors:new Map})},a4e=t=>()=>{t({dataTables:new Map,apiEndpoints:new Map,variables:new Map,transformers:new Map,loadingApis:new Set,errors:new Map,isLoading:!1})},zse="xstudio-runtime-values";function o4e(){try{const t=localStorage.getItem(zse);if(t){const e=JSON.parse(t);return new Map(Object.entries(e))}}catch(t){console.warn("[DataStore] Failed to load persisted runtime values:",t)}return new Map}function l4e(t,e){try{const n={};e.forEach((r,i)=>{r.persist&&t.has(i)&&(n[i]=t.get(i))}),localStorage.setItem(zse,JSON.stringify(n))}catch(n){console.warn("[DataStore] Failed to save persisted runtime values:",n)}}const c4e=(t,e)=>{const n=FMe(t),r=jMe(t,e),i=OMe(t,e),s=zMe(t,e),a=$Me(e),o=QMe(t,e),l=UMe(t),c=HMe(t,e),u=GMe(t,e),h=VMe(t,e),f=WMe(t,e),p=KMe(t),m=qMe(t,e),v=YMe(t,e),A=XMe(t,e),x=JMe(e),E=ZMe(t,e),w=e4e(t),B=t4e(t,e),D=n4e(t,e),T=r4e(t,e),M=i4e(e),R=s4e(t),k=a4e(t);return{dataTables:new Map,apiEndpoints:new Map,variables:new Map,transformers:new Map,loadingApis:new Set,errors:new Map,isLoading:!1,runtimeValues:new Map,isInitialized:!1,currentProjectId:null,fetchDataTables:n,createDataTable:r,updateDataTable:i,deleteDataTable:s,getDataTableData:a,setRuntimeData:o,fetchApiEndpoints:l,createApiEndpoint:c,updateApiEndpoint:u,deleteApiEndpoint:h,executeApiEndpoint:f,fetchVariables:p,createVariable:m,updateVariable:v,deleteVariable:A,getVariableValue:x,setVariableValue:E,fetchTransformers:w,createTransformer:B,updateTransformer:D,deleteTransformer:T,executeTransformer:M,setRuntimeValue:(G,V)=>{const{runtimeValues:q,variables:O}=e(),H=new Map(q);H.set(G,V),t({runtimeValues:H}),l4e(H,O)},getRuntimeValue:G=>{const{runtimeValues:V,variables:q}=e();return V.has(G)?V.get(G):q.get(G)?.defaultValue},initializeForProject:async G=>{const{currentProjectId:V,isInitialized:q}=e();if(q&&V===G){console.log(`[DataStore] Already initialized for project: ${G}`);return}console.log(`[DataStore] Initializing for project: ${G}`),t({isLoading:!0,currentProjectId:G});try{await Promise.all([p(G),n(G),l(G),w(G)]);const O=o4e(),{variables:H}=e(),K=new Map;H.forEach((X,re)=>{X.persist&&O.has(re)&&K.set(re,O.get(re))}),t({isInitialized:!0,isLoading:!1,runtimeValues:K}),console.log(`[DataStore] Initialized: ${H.size} variables, ${e().dataTables.size} tables`)}catch(O){throw console.error("[DataStore] Initialization failed:",O),t({isLoading:!1}),O}},clearErrors:R,reset:k}},Oi=Jl()(nF(c4e)),QF=()=>{const t=Oi(e=>e.dataTables);return Array.from(t.values())},h4=()=>{const t=Oi(e=>e.apiEndpoints);return Array.from(t.values())},UF=()=>{const t=Oi(e=>e.variables);return Array.from(t.values())},u4e=()=>{const t=Oi(e=>e.transformers);return Array.from(t.values())},d4e=()=>{const{variables:t,getRuntimeValue:e}=Oi.getState();return Array.from(t.values()).map(n=>({id:n.id,name:n.name,type:n.type,defaultValue:e(n.name),persist:n.persist,scope:n.scope,page_id:n.page_id}))};function h4e(t,e){for(const n of Object.keys(e))if(t[n]!==e[n])return!0;return!1}const f4e=()=>Jl((t,e)=>({elements:[],setElements:n=>t({elements:n}),updateElementProps:(n,r)=>{const i=r??{};Object.keys(i).length!==0&&t(s=>{const a=s.elements.findIndex(h=>h.id===n);if(a<0)return s;const o=s.elements[a],l=o.props??{};if(!h4e(l,i))return s;const c={...o,props:{...l,...i}},u=s.elements.slice();return u[a]=c,{elements:u}})},addElement:n=>{t(r=>({elements:[...r.elements,n]}))},addElements:n=>{t(r=>({elements:[...r.elements,...n]}))},removeElement:n=>{t(r=>({elements:r.elements.filter(i=>i.id!==n)}))},removeElements:n=>{const r=new Set(n);t(i=>({elements:i.elements.filter(s=>!r.has(s.id))}))},updateElement:(n,r)=>{t(i=>({elements:i.elements.map(s=>s.id===n?{...s,...r}:s)}))},getElements:()=>e().elements,pages:[],setPages:n=>t({pages:n}),currentPageId:null,setCurrentPageId:n=>t({currentPageId:n}),currentPath:"/",setCurrentPath:n=>t({currentPath:n}),routeParams:{},setRouteParams:n=>t({routeParams:n}),layouts:[],setLayouts:n=>t({layouts:n}),currentLayoutId:null,setCurrentLayoutId:n=>t({currentLayoutId:n}),themeVars:[],setThemeVars:n=>{t({themeVars:n}),N7(n,e().isDarkMode)},isDarkMode:!1,setDarkMode:n=>{t({isDarkMode:n}),document.documentElement.setAttribute("data-theme",n?"dark":"light"),N7(e().themeVars,n)},dataSources:[],setDataSources:n=>t({dataSources:n}),dataStates:new Map,setDataState:(n,r)=>{t(i=>{const s=new Map(i.dataStates);return s.set(n,r),{dataStates:s}})},dataTables:[],setDataTables:n=>t({dataTables:n}),apiEndpoints:[],setApiEndpoints:n=>t({apiEndpoints:n}),variables:[],setVariables:n=>{t({variables:n});const i={...e().appState};n.forEach(s=>{s.scope==="global"&&s.defaultValue!==void 0&&(s.name in i||(i[s.name]=s.defaultValue))}),t({appState:i})},authToken:null,setAuthToken:n=>t({authToken:n}),appState:{},pageStates:new Map,componentStates:new Map,setState:(n,r)=>{const[i,...s]=n.split("."),a=s.join(".");switch(i){case"app":t(o=>({appState:{...o.appState,[a]:r}}));break;case"page":{const o=e().currentPageId;o&&t(l=>{const c=new Map(l.pageStates),u=c.get(o)||{};return c.set(o,{...u,[a]:r}),{pageStates:c}});break}case"component":{const o=a.indexOf(".");if(o>0){const l=a.slice(0,o),c=a.slice(o+1);t(u=>{const h=new Map(u.componentStates),f=h.get(l)||{};return h.set(l,{...f,[c]:r}),{componentStates:h}})}break}default:t(o=>({appState:{...o.appState,[n]:r}}))}},getState:n=>{const[r,...i]=n.split("."),s=i.join("."),a=e();switch(r){case"app":return BB(a.appState,s);case"page":return BB(a.pageStates.get(a.currentPageId||"")||{},s);case"component":{const o=s.indexOf(".");if(o>0){const l=s.slice(0,o),c=s.slice(o+1);return BB(a.componentStates.get(l)||{},c)}return}default:return BB(a.appState,n)}},isReady:!1,setReady:n=>t({isReady:n})}));function BB(t,e){if(!e)return t;const n=e.split(".");let r=t;for(const i of n){if(r==null||typeof r!="object")return;r=r[i]}return r}function N7(t,e){const n=document.documentElement,r=document.getElementById("runtime-theme-vars");r&&r.remove();const i=t.filter(l=>!l.isDark),s=t.filter(l=>l.isDark);let a=`:root {
`;i.forEach(l=>{a+=`  ${l.name}: ${l.value};
`}),a+=`}
`,s.length>0&&(a+=`[data-theme="dark"] {
`,s.forEach(l=>{a+=`  ${l.name}: ${l.value};
`}),a+=`}
`);const o=document.createElement("style");o.id="runtime-theme-vars",o.textContent=a,document.head.appendChild(o),n.setAttribute("data-theme",e?"dark":"light")}let HR=null;function p4e(){return HR||(HR=f4e()),HR}function L7(t){return p4e()(t)}const $se=300*1e3,Qse=100;class Use{cache=new Map;ttl;maxEntries;constructor(e={}){this.ttl=e.ttl||$se,this.maxEntries=e.maxEntries||Qse}static createKey(e){if(!e)return"";try{if(typeof e=="object"&&"source"in e&&"name"in e){const n=e;return`prop:${n.source}:${n.name}:${n.path||""}`}return typeof e=="object"&&"type"in e&&"config"in e?`data:${JSON.stringify(e)}`:""}catch{return""}}get(e){const n=this.cache.get(e);if(!n)return;const r=Date.now();if(r-n.createdAt>n.ttl){this.cache.delete(e);return}return n.lastAccessedAt=r,n.data}set(e,n,r){this.cache.size>=this.maxEntries&&this.evictLRU();const i=Date.now();this.cache.set(e,{data:n,createdAt:i,lastAccessedAt:i,ttl:r||this.ttl})}invalidate(e){this.cache.delete(e)}invalidateMatching(e){const n=typeof e=="string"?new RegExp(e):e;for(const r of this.cache.keys())n.test(r)&&this.cache.delete(r)}clear(){this.cache.clear()}getStats(){return{size:this.cache.size,maxEntries:this.maxEntries,ttl:this.ttl}}evictLRU(){let e=null,n=1/0;for(const[r,i]of this.cache.entries())i.lastAccessedAt<n&&(n=i.lastAccessedAt,e=r);e&&this.cache.delete(e)}}const TB=new Use({ttl:$se,maxEntries:Qse}),GR=Use.createKey;async function g4e(t){const n=t.config.data;if(n&&Array.isArray(n))return n;throw new Error("Static data is not an array or is missing")}async function m4e(t,e,n,r){const i=t.config;if(!i.baseUrl||!i.endpoint)throw new Error("API configuration is incomplete");if(i.baseUrl==="MOCK_DATA")try{const{apiConfig:h}=await fn(async()=>{const{apiConfig:p}=await Promise.resolve().then(()=>$ae);return{apiConfig:p}},void 0),f=h.MOCK_DATA;if(f){const p=await f(i.endpoint||"/data",i.params),m=i.dataMapping?.resultPath?p[i.dataMapping.resultPath]:p;return Array.isArray(m)?m:[]}else throw new Error("Mock API function not found")}catch(h){if(n.length>0)return n;throw h}let s=i.baseUrl||"";switch(i.baseUrl){case"JSONPLACEHOLDER":s="https://jsonplaceholder.typicode.com";break;case"DUMMYJSON":s="https://dummyjson.com";break;case"CUSTOM":s=i.customUrl||"";break}const a=`${s}${i.endpoint}`,o=await fetch(a,{method:i.method||"GET",headers:{...i.headers,"Content-Type":"application/json"},body:i.method!=="GET"?JSON.stringify(i.params):void 0,signal:r});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const l=await o.json(),c=i.dataMapping?.resultPath?l[i.dataMapping.resultPath]:l;return Array.isArray(c)?c:[]}function HF({dataBinding:t,componentName:e,fallbackData:n=[],datatableId:r,elementId:i}){const s=Jx(Se=>r?Se.datatableStates.get(r):void 0),a=Jx(Se=>Se.addConsumer),o=Jx(Se=>Se.removeConsumer),l=Jx(Se=>Se.loadDataTable),c=C.useMemo(()=>typeof window>"u"?!1:window.parent!==window,[]),u=QF(),h=L7(Se=>Se.dataTables),f=c?h:u,p=h4(),m=L7(Se=>Se.apiEndpoints),v=c?m:p,A=Oi(Se=>Se.executeApiEndpoint);C.useEffect(()=>{if(r&&i)return a(r,i),(!s||s.status==="idle")&&l(r),()=>{o(r,i)}},[r,i,a,o,l,s]);const[x,E]=C.useState(null),[w,B]=C.useState(""),D=C.useMemo(()=>{if(!t)return"";try{return JSON.stringify(t)}catch{return String(t)}},[t]),T=C.useMemo(()=>t,[D]),M=T&&"source"in T&&"name"in T&&!("type"in T),R=C.useMemo(()=>M&&T.refreshMode||"manual",[M,T]),k=C.useMemo(()=>M&&T.refreshInterval||5e3,[M,T]),L=C.useMemo(()=>{if(M){const Se=T;if(Se.source==="dataTable"&&Se.name){const Me=f.find(ce=>ce.name===Se.name);if(Me){const ce=Me.runtimeData&&Me.runtimeData.length>0,$e=Me.useMockData?Me.mockData:ce?Me.runtimeData:Me.mockData,qe=(Me.schema||[]).map(ft=>({key:ft.key,type:ft.type,label:ft.label}));return{data:$e,schema:qe}}}}return null},[M,f,T]),F=L?.data||null,z=L?.schema,[G,V]=C.useState(null),[q,O]=C.useState(!1),[H,K]=C.useState(null),[X,re]=C.useState(0);C.useEffect(()=>{if(!M)return;const Se=T;if(Se.source!=="api"||!Se.name)return;const Me=v.find(qe=>qe.name===Se.name);if(!Me){K(`API Endpoint '${Se.name}'   `);return}const ce=GR(T);if(X===0&&ce){const qe=TB.get(ce);if(qe){V(qe),O(!1),K(null);return}}O(!0),K(null),(async()=>{try{let qe;if(c){const Ie=`${Me.baseUrl}${Me.path}`,ht=`/api/proxy?url=${encodeURIComponent(Ie)}`,Ue=await fetch(ht,{method:Me.method||"GET",headers:Me.headers||{}});if(!Ue.ok)throw new Error(`HTTP error! status: ${Ue.status}`);qe=await Ue.json()}else qe=await A(Me.id);let ft=[];if(Array.isArray(qe))ft=qe;else if(qe&&typeof qe=="object"){const Ie=qe;Array.isArray(Ie.results)?ft=Ie.results:Array.isArray(Ie.data)?ft=Ie.data:Array.isArray(Ie.items)?ft=Ie.items:ft=[Ie]}ce&&TB.set(ce,ft),V(ft),O(!1)}catch(qe){console.error("API Endpoint data load failed:",qe),K(qe.message||"  "),O(!1)}})()},[M,D,v,A,c,X,T]);const J=Eie({async load({signal:Se}){if(M)return{items:[]};if(r)return{items:[]};if(!t||t.type!=="collection")return{items:[]};try{let Me=[];if(t.source==="static")Me=await g4e(t);else if(t.source==="api")Me=await m4e(t,e,n,Se);else throw t.source==="supabase"?new Error("Supabase data binding not yet implemented"):new Error(`Unknown data source: ${t.source}`);return{items:Me}}catch(Me){if(Me.name==="AbortError")return{items:[]};throw Me}},getKey:Se=>String(Se.id||Math.random())}),Z=C.useCallback(Se=>{E(Se)},[]),ee=C.useMemo(()=>{let Se;F&&F.length>0?Se=F:G&&G.length>0?Se=G:r&&s?Se=s.data:Se=J.items;let Me=[...Se];if(w.trim()){const ce=w.toLowerCase();Me=Me.filter($e=>Object.values($e).some(qe=>String(qe).toLowerCase().includes(ce)))}return x&&Me.sort((ce,$e)=>{const qe=ce[x.column],ft=$e[x.column];let Ie=0;return qe<ft?Ie=-1:qe>ft&&(Ie=1),x.direction==="descending"?-Ie:Ie}),Me},[J.items,w,x,r,s,F,G]),te=void 0,oe=!1,ae=C.useCallback(()=>{if(r)l(r);else if(M){const Se=T;if(Se.source==="api"&&Se.name){const Me=GR(T);Me&&TB.invalidate(Me),re(ce=>ce+1)}}else J.reload()},[r,l,J,M,T]);C.useEffect(()=>{if(M&&T.source==="api"&&R==="interval"&&k>0){const Me=setInterval(()=>{ae()},k);return()=>{clearInterval(Me)}}},[R,k,M,T,ae,e]);const se=M&&T.source==="api",Ee=M&&T.source==="dataTable"&&f.length===0,Be=M?se?q:Ee:r?s?.status==="loading":J.isLoading,_e=M?se?H:F===null&&T&&!Ee?"DataTable   ":null:r?s?.error||null:J.error?J.error.message:null,Ce=C.useCallback(()=>{const Se=GR(T);Se&&TB.invalidate(Se)},[T]);return{data:ee,loading:Be,error:_e,reload:ae,clearCache:Ce,schema:z,sort:Z,filterText:w,setFilterText:B,loadMore:te,hasMore:oe}}const n0=C.createContext(!1);function A4e(){return C.useContext(n0)}const y4e=fr({base:"react-aria-ToggleButtonGroup",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"default",size:"sm"}});function tf({indicator:t=!1,variant:e="default",size:n="sm",dataBinding:r,columnMapping:i,children:s,...a}){const{data:o,loading:l,error:c}=HF({dataBinding:r,componentName:"ToggleButtonGroup",fallbackData:[{id:1,name:"Button 1",value:"button-1"},{id:2,name:"Button 2",value:"button-2"}]}),u=r&&"source"in r&&"name"in r&&!("type"in r),h=!u&&r&&"type"in r&&r.type==="collection"||u,f=Vy(a.className,p=>y4e({variant:e,size:n,className:p}));if(h&&i)return console.log(" ToggleButtonGroup: columnMapping  -  ToggleButton ",{columnMapping:i,hasChildren:!!s,dataCount:o.length}),l?d.jsx(ny,{...a,"data-indicator":t?"true":"false","data-togglebutton-variant":e,"data-togglebutton-size":n,className:f,isDisabled:!0,children:d.jsx(n0.Provider,{value:t,children:d.jsx(y1,{className:"react-aria-ToggleButton",children:"  ..."})})}):c?d.jsx(ny,{...a,"data-indicator":t?"true":"false","data-togglebutton-variant":e,"data-togglebutton-size":n,className:f,isDisabled:!0,children:d.jsx(n0.Provider,{value:t,children:d.jsx(y1,{className:"react-aria-ToggleButton",children:" "})})}):o.length>0?(console.log(" ToggleButtonGroup with columnMapping - using children template"),d.jsx(ny,{...a,"data-indicator":t?"true":"false","data-togglebutton-variant":e,"data-togglebutton-size":n,className:f,children:d.jsx(n0.Provider,{value:t,children:s})})):d.jsx(ny,{...a,"data-indicator":t?"true":"false","data-togglebutton-variant":e,"data-togglebutton-size":n,className:f,children:d.jsx(n0.Provider,{value:t,children:s})});if(h){if(l)return d.jsx(ny,{...a,"data-indicator":t?"true":"false","data-togglebutton-variant":e,"data-togglebutton-size":n,className:f,isDisabled:!0,children:d.jsx(n0.Provider,{value:t,children:d.jsx(y1,{className:"react-aria-ToggleButton",children:"  ..."})})});if(c)return d.jsx(ny,{...a,"data-indicator":t?"true":"false","data-togglebutton-variant":e,"data-togglebutton-size":n,className:f,isDisabled:!0,children:d.jsx(n0.Provider,{value:t,children:d.jsx(y1,{className:"react-aria-ToggleButton",children:" "})})});if(o.length>0){const p=o.map((m,v)=>({id:String(m.id||m.value||v),label:String(m.name||m.title||m.label||`Button ${v+1}`),isDisabled:!!m.isDisabled}));return console.log(" ToggleButtonGroup Dynamic Collection - items:",p),d.jsx(ny,{...a,"data-indicator":t?"true":"false","data-togglebutton-variant":e,"data-togglebutton-size":n,className:f,children:d.jsx(n0.Provider,{value:t,children:p.map(m=>d.jsx(y1,{id:m.id,isDisabled:m.isDisabled,className:"react-aria-ToggleButton",children:m.label},m.id))})})}}return d.jsx(ny,{...a,"data-indicator":t?"true":"false","data-togglebutton-variant":e,"data-togglebutton-size":n,className:f,children:d.jsx(n0.Provider,{value:t,children:s})})}const v4e=fr({base:"react-aria-ToggleButton",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"default",size:"sm"}});function $r({variant:t="default",size:e="sm",children:n,...r}){const i=A4e(),s=Vy(r.className,a=>v4e({variant:t,size:e,className:a}));return d.jsxs(y1,{...r,className:s,children:[i&&d.jsx(l3e,{}),n]})}fr({base:"react-aria-Group",variants:{isDisabled:{true:"disabled"},isInvalid:{true:"invalid"},isReadOnly:{true:"read-only"}}});function Hse({handleAddElement:t,selectedElementId:e}){return d.jsx(jse,{handleAddElement:t,selectedElementId:e})}const x4e=.02,b4e=1;function C4e(){const t=lI(),{vortexRef:e,effectType:n,setEffectType:r}=Hy(),i=C.useRef(null),s=C.useCallback(()=>{r(p=>p==="sand"?"curl":p==="curl"?"matrix":p==="matrix"?"code":p==="code"?"art":"sand")},[r]),[a,o]=C.useState(()=>{const p=localStorage.getItem("theme");return p?p==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});C.useEffect(()=>{document.documentElement.setAttribute("data-theme",a?"dark":"light"),localStorage.setItem("theme",a?"dark":"light")},[a]);const l=C.useCallback(p=>{o(p)},[]),c=C.useCallback((p,m)=>{const v=p/window.innerWidth*2-1,A=-(m/window.innerHeight*2-1),x=200,E=60*Math.PI/180,w=Math.tan(E/2)*x,B=w*(window.innerWidth/window.innerHeight);return{x:v*B,y:A*w}},[]),u=C.useCallback(p=>{if(p.target.closest("button"))return;const{x:m,y:v}=c(p.clientX,p.clientY);e.current={active:!0,x:m,y:v,strength:.1,radius:20,height:0},i.current=setInterval(()=>{e.current.active&&(e.current.strength=Math.min(e.current.strength+x4e,b4e),e.current.radius=20+e.current.strength*160,e.current.height=e.current.strength*250)},16)},[e,c]),h=C.useCallback(p=>{if(p.target.closest("button")||!e.current.active)return;const{x:m,y:v}=c(p.clientX,p.clientY);e.current.x=m,e.current.y=v},[e,c]),f=C.useCallback(()=>{i.current&&(clearInterval(i.current),i.current=null),e.current.active=!1},[e]);return d.jsxs("main",{className:"main",onMouseDown:u,onMouseMove:h,onMouseUp:f,onMouseLeave:f,children:[d.jsx("section",{className:"welcome-wrapper",children:d.jsxs("div",{className:"welcome-container",children:[d.jsx("div",{className:"logo-container",children:d.jsx("div",{className:"logo",children:"ICONIC FUTURE"})}),d.jsx("div",{className:"header-container",children:d.jsxs("div",{className:"landing-header",children:[d.jsx("h1",{className:"landing-header-title",children:"COMPOSE"}),d.jsx("p",{className:"landing-header-subtitle",children:"Bespoke by design, cutting-edge platform."})]})}),d.jsx("div",{className:"landing-cta",children:d.jsx(wg,{className:"react-aria-Button",variant:"primary",onClick:()=>t("/signin"),children:"Start App"})}),d.jsxs("div",{className:"landing-features",children:[d.jsx(wg,{size:"sm",variant:"ghost",children:d.jsx(eE,{})}),d.jsx(wg,{size:"sm",variant:"ghost",children:d.jsx(oye,{})}),d.jsx(wg,{size:"sm",variant:"ghost",children:d.jsx(Ime,{})}),d.jsx(wg,{size:"sm",variant:"ghost",children:d.jsx(qo,{})}),d.jsx(wg,{size:"sm",variant:"ghost",children:d.jsx(ume,{})}),d.jsx(wg,{size:"sm",variant:"ghost",children:d.jsx(Zi,{})}),d.jsx(wg,{size:"sm",variant:"ghost",children:d.jsx(sY,{})}),d.jsx(wg,{size:"sm",variant:"ghost",children:d.jsx(b_,{})}),d.jsx(wg,{size:"sm",variant:"ghost",children:d.jsx(NE,{})})]})]})}),d.jsxs("footer",{className:"footer",children:[d.jsx($r,{id:"effect",className:"toggle-button",isSelected:n==="matrix"||n==="code",onChange:s,children:n.toUpperCase()}),d.jsx($r,{id:"day",className:"toggle-button",isSelected:a,onChange:l,children:a?"DARK":"LIGHT"})]})]})}var Gm={},MB={};const E4e=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let f4=class extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}},Gse=class extends f4{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},vL=class extends f4{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},xL=class extends f4{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var HT;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(HT||(HT={}));class S4e{constructor(e,{headers:n={},customFetch:r,region:i=HT.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=E4e(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return _n(this,arguments,void 0,function*(n,r={}){var i;let s,a;try{const{headers:o,method:l,body:c,signal:u,timeout:h}=r;let f={},{region:p}=r;p||(p=this.region);const m=new URL(`${this.url}/${n}`);p&&p!=="any"&&(f["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let v;c&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=c):typeof c=="string"?(f["Content-Type"]="text/plain",v=c):typeof FormData<"u"&&c instanceof FormData?v=c:(f["Content-Type"]="application/json",v=JSON.stringify(c)):v=c;let A=u;h&&(a=new AbortController,s=setTimeout(()=>a.abort(),h),u?(A=a.signal,u.addEventListener("abort",()=>a.abort())):A=a.signal);const x=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:v,signal:A}).catch(D=>{throw new Gse(D)}),E=x.headers.get("x-relay-error");if(E&&E==="true")throw new vL(x);if(!x.ok)throw new xL(x);let w=((i=x.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),B;return w==="application/json"?B=yield x.json():w==="application/octet-stream"||w==="application/pdf"?B=yield x.blob():w==="text/event-stream"?B=x:w==="multipart/form-data"?B=yield x.formData():B=yield x.text(),{data:B,error:null,response:x}}catch(o){return{data:null,error:o,response:o instanceof xL||o instanceof vL?o.context:void 0}}finally{s&&clearTimeout(s)}})}}const w4e=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return HT},FunctionsClient:S4e,FunctionsError:f4,FunctionsFetchError:Gse,FunctionsHttpError:xL,FunctionsRelayError:vL},Symbol.toStringTag,{value:"Module"})),Vse=aI(w4e);var Ic={};const KE=aI(U_e);var DB={},RB={},PB={},kB={},NB={},LB={},F7;function Wse(){if(F7)return LB;F7=1,Object.defineProperty(LB,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return LB.default=t,LB}var j7;function Kse(){if(j7)return NB;j7=1,Object.defineProperty(NB,"__esModule",{value:!0});const e=KE.__importDefault(Wse());let n=class{constructor(i){var s,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(s=i.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=new Headers(this.headers),this.headers.set(i,s),this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let o=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,u,h,f;let p=null,m=null,v=null,A=l.status,x=l.statusText;if(l.ok){if(this.method!=="HEAD"){const D=await l.text();D===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?m=D:m=JSON.parse(D))}const w=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),B=(h=l.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");w&&B&&B.length>1&&(v=parseInt(B[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(p={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,v=null,A=406,x="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const w=await l.text();try{p=JSON.parse(w),Array.isArray(p)&&l.status===404&&(m=[],p=null,A=200,x="OK")}catch{l.status===404&&w===""?(A=204,x="No Content"):p={message:w}}if(p&&this.isMaybeSingle&&(!((f=p?.details)===null||f===void 0)&&f.includes("0 rows"))&&(p=null,A=200,x="OK"),p&&this.shouldThrowOnError)throw new e.default(p)}return{error:p,data:m,count:v,status:A,statusText:x}});return this.shouldThrowOnError||(o=o.catch(l=>{var c,u,h,f,p,m;let v="";const A=l?.cause;if(A){const x=(c=A?.message)!==null&&c!==void 0?c:"",E=(u=A?.code)!==null&&u!==void 0?u:"";v=`${(h=l?.name)!==null&&h!==void 0?h:"FetchError"}: ${l?.message}`,v+=`

Caused by: ${(f=A?.name)!==null&&f!==void 0?f:"Error"}: ${x}`,E&&(v+=` (${E})`),A?.stack&&(v+=`
${A.stack}`)}else v=(p=l?.stack)!==null&&p!==void 0?p:"";return{error:{message:`${(m=l?.name)!==null&&m!==void 0?m:"FetchError"}: ${l?.message}`,details:v,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(i,s)}returns(){return this}overrideTypes(){return this}};return NB.default=n,NB}var O7;function qse(){if(O7)return kB;O7=1,Object.defineProperty(kB,"__esModule",{value:!0});const e=KE.__importDefault(Kse());let n=class extends e.default{select(i){let s=!1;const a=(i??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:a,foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${i}.${s?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:a=s}={}){const o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${i}`),this}range(i,s,{foreignTable:a,referencedTable:o=a}={}){const l=typeof o>"u"?"offset":`${o}.offset`,c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:a=!1,buffers:o=!1,wal:l=!1,format:c="text"}={}){var u;const h=[i?"analyze":null,s?"verbose":null,a?"settings":null,o?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${f}"; options=${h};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};return kB.default=n,kB}var z7;function GF(){if(z7)return PB;z7=1,Object.defineProperty(PB,"__esModule",{value:!0});const e=KE.__importDefault(qse()),n=new RegExp("[,()]");let r=class extends e.default{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}regexMatch(s,a){return this.url.searchParams.append(s,`match.${a}`),this}regexIMatch(s,a){return this.url.searchParams.append(s,`imatch.${a}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}isDistinct(s,a){return this.url.searchParams.append(s,`isdistinct.${a}`),this}in(s,a){const o=Array.from(new Set(a)).map(l=>typeof l=="string"&&n.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:o,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${c}fts${u}.${a}`),this}match(s){return Object.entries(s).forEach(([a,o])=>{this.url.searchParams.append(a,`eq.${o}`)}),this}not(s,a,o){return this.url.searchParams.append(s,`not.${a}.${o}`),this}or(s,{foreignTable:a,referencedTable:o=a}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,a,o){return this.url.searchParams.append(s,`${a}.${o}`),this}};return PB.default=r,PB}var $7;function Yse(){if($7)return RB;$7=1,Object.defineProperty(RB,"__esModule",{value:!0});const e=KE.__importDefault(GF());let n=class{constructor(i,{headers:s={},schema:a,fetch:o}){this.url=i,this.headers=new Headers(s),this.schema=a,this.fetch=o}select(i,s){const{head:a=!1,count:o}=s??{},l=a?"HEAD":"GET";let c=!1;const u=(i??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",u),o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:a=!0}={}){var o;const l="POST";if(s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const c=i.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:a=!1,count:o,defaultToNull:l=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),o&&this.headers.append("Prefer",`count=${o}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const h=i.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(h.length>0){const f=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(i,{count:s}={}){var a;const o="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var s;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};return RB.default=n,RB}var Q7;function _4e(){if(Q7)return DB;Q7=1,Object.defineProperty(DB,"__esModule",{value:!0});const t=KE,e=t.__importDefault(Yse()),n=t.__importDefault(GF());let r=class Xse{constructor(s,{headers:a={},schema:o,fetch:l}={}){this.url=s,this.headers=new Headers(a),this.schemaName=o,this.fetch=l}from(s){if(!s||typeof s!="string"||s.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const a=new URL(`${this.url}/${s}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new Xse(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,a={},{head:o=!1,get:l=!1,count:c}={}){var u;let h;const f=new URL(`${this.url}/rpc/${s}`);let p;o||l?(h=o?"HEAD":"GET",Object.entries(a).filter(([v,A])=>A!==void 0).map(([v,A])=>[v,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([v,A])=>{f.searchParams.append(v,A)})):(h="POST",p=a);const m=new Headers(this.headers);return c&&m.set("Prefer",`count=${c}`),new n.default({method:h,url:f,headers:m,schema:this.schemaName,body:p,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};return DB.default=r,DB}var U7;function Jse(){if(U7)return Ic;U7=1,Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.PostgrestError=Ic.PostgrestBuilder=Ic.PostgrestTransformBuilder=Ic.PostgrestFilterBuilder=Ic.PostgrestQueryBuilder=Ic.PostgrestClient=void 0;const t=KE,e=t.__importDefault(_4e());Ic.PostgrestClient=e.default;const n=t.__importDefault(Yse());Ic.PostgrestQueryBuilder=n.default;const r=t.__importDefault(GF());Ic.PostgrestFilterBuilder=r.default;const i=t.__importDefault(qse());Ic.PostgrestTransformBuilder=i.default;const s=t.__importDefault(Kse());Ic.PostgrestBuilder=s.default;const a=t.__importDefault(Wse());return Ic.PostgrestError=a.default,Ic.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:a.default},Ic}class Zse{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const I4e="2.87.1",B4e=`realtime-js/${I4e}`,eae="1.0.0",T4e="2.0.0",H7=eae,bL=1e4,M4e=1e3,D4e=100;var $x;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})($x||($x={}));var Bo;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Bo||(Bo={}));var pp;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(pp||(pp={}));var CL;(function(t){t.websocket="websocket"})(CL||(CL={}));var Qx;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Qx||(Qx={}));class R4e{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,n,r){var i,s;const a=e.topic,o=(i=e.ref)!==null&&i!==void 0?i:"",l=(s=e.join_ref)!==null&&s!==void 0?s:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+a.length+c.length+h.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let m=new DataView(p),v=0;m.setUint8(v++,this.KINDS.userBroadcastPush),m.setUint8(v++,l.length),m.setUint8(v++,o.length),m.setUint8(v++,a.length),m.setUint8(v++,c.length),m.setUint8(v++,h.length),m.setUint8(v++,n),Array.from(l,x=>m.setUint8(v++,x.charCodeAt(0))),Array.from(o,x=>m.setUint8(v++,x.charCodeAt(0))),Array.from(a,x=>m.setUint8(v++,x.charCodeAt(0))),Array.from(c,x=>m.setUint8(v++,x.charCodeAt(0))),Array.from(h,x=>m.setUint8(v++,x.charCodeAt(0)));var A=new Uint8Array(p.byteLength+r.byteLength);return A.set(new Uint8Array(p),0),A.set(new Uint8Array(r),p.byteLength),A.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,s,a,o,l]=r;return n({join_ref:i,ref:s,topic:a,event:o,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2),a=n.getUint8(3),o=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+i));l=l+i;const u=r.decode(e.slice(l,l+s));l=l+s;const h=r.decode(e.slice(l,l+a));l=l+a;const f=e.slice(l,e.byteLength),p=o===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,m={type:this.BROADCAST_EVENT,event:u,payload:p};return a>0&&(m.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}let tae=class{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Ns;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ns||(Ns={}));const G7=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,a)=>(s[a]=P4e(a,t,e,i),s),{}):{}},P4e=(t,e,n,r)=>{const i=e.find(o=>o.name===t),s=i?.type,a=n[t];return s&&!r.includes(s)?nae(s,a):EL(a)},nae=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return F4e(e,n)}switch(t){case Ns.bool:return k4e(e);case Ns.float4:case Ns.float8:case Ns.int2:case Ns.int4:case Ns.int8:case Ns.numeric:case Ns.oid:return N4e(e);case Ns.json:case Ns.jsonb:return L4e(e);case Ns.timestamp:return j4e(e);case Ns.abstime:case Ns.date:case Ns.daterange:case Ns.int4range:case Ns.int8range:case Ns.money:case Ns.reltime:case Ns.text:case Ns.time:case Ns.timestamptz:case Ns.timetz:case Ns.tsrange:case Ns.tstzrange:return EL(e);default:return EL(e)}},EL=t=>t,k4e=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},N4e=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},L4e=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},F4e=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const a=t.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>nae(e,o))}return t},j4e=t=>typeof t=="string"?t.replace(" ","T"):t,rae=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class VR{constructor(e,n,r={},i=bL){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var SL;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(SL||(SL={}));let iae=class J3{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=J3.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=J3.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=J3.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),a=this.transformState(n),o={},l={};return this.map(s,(c,u)=>{a[c]||(l[c]=u)}),this.map(a,(c,u)=>{const h=s[c];if(h){const f=u.map(A=>A.presence_ref),p=h.map(A=>A.presence_ref),m=u.filter(A=>p.indexOf(A.presence_ref)<0),v=h.filter(A=>f.indexOf(A.presence_ref)<0);m.length>0&&(o[c]=m),v.length>0&&(l[c]=v)}else o[c]=u}),this.syncDiff(s,{joins:o,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(o,l)=>{var c;const u=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),u.length>0){const h=e[o].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);e[o].unshift(...f)}r(o,u,l)}),this.map(a,(o,l)=>{let c=e[o];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[o]=c,i(o,c,l),c.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var wL;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(wL||(wL={}));var H1;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(H1||(H1={}));var Pg;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Pg||(Pg={}));const O4e=Bo;let sae=class Mw{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Bo.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new VR(this,pp.join,this.params,this.timeout),this.rejoinTimer=new tae(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bo.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bo.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Bo.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bo.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Bo.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pp.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new iae(this),this.broadcastEndpointURL=rae(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Bo.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[H1.PRESENCE]&&this.bindings[H1.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},f={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e?.(Pg.CHANNEL_ERROR,p)),this._onClose(()=>e?.(Pg.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){e?.(Pg.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,A=(m=v?.length)!==null&&m!==void 0?m:0,x=[];for(let E=0;E<A;E++){const w=v[E],{filter:{event:B,schema:D,table:T,filter:M}}=w,R=p&&p[E];if(R&&R.event===B&&Mw.isFilterValueEqual(R.schema,D)&&Mw.isFilterValueEqual(R.table,T)&&Mw.isFilterValueEqual(R.filter,M))x.push(Object.assign(Object.assign({},w),{id:R.id}));else{this.unsubscribe(),this.state=Bo.errored,e?.(Pg.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(Pg.SUBSCRIBED);return}}).receive("error",p=>{this.state=Bo.errored,e?.(Pg.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e?.(Pg.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Bo.joined&&e===H1.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const c=await o.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Bo.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pp.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new VR(this,pp.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bo.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new VR(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>D4e){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:u}=pp;if(r&&[o,l,c,u].indexOf(a)>=0&&r!==this._joinRef())return;let f=this._onMessage(a,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var m,v,A;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((A=(v=p.filter)===null||v===void 0?void 0:v.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===a}).map(p=>p.callback(f,r)):(s=this.bindings[a])===null||s===void 0||s.filter(p=>{var m,v,A,x,E,w;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const B=p.id,D=(m=p.filter)===null||m===void 0?void 0:m.event;return B&&((v=n.ids)===null||v===void 0?void 0:v.includes(B))&&(D==="*"||D?.toLocaleLowerCase()===((A=n.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const B=(E=(x=p?.filter)===null||x===void 0?void 0:x.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return B==="*"||B===((w=n?.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:v,table:A,commit_timestamp:x,type:E,errors:w}=m;f=Object.assign(Object.assign({},{schema:v,table:A,commit_timestamp:x,eventType:E,new:{},old:{},errors:w}),this._getPayloadRecords(m))}p.callback(f,r)})}_isClosed(){return this.state===Bo.closed}_isJoined(){return this.state===Bo.joined}_isJoining(){return this.state===Bo.joining}_isLeaving(){return this.state===Bo.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Mw.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(pp.close,{},e)}_onError(e){this._on(pp.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bo.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=G7(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=G7(e.columns,e.old_record)),n}};const WR=()=>{},FB={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},z4e=[1e3,2e3,5e3,1e4],$4e=1e4,Q4e=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let U4e=class{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=bL,this.transport=null,this.heartbeatIntervalMs=FB.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=WR,this.ref=0,this.reconnectTimer=null,this.vsn=H7,this.logger=WR,this.conn=null,this.sendBuffer=[],this.serializer=new R4e,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${CL.websocket}`,this.httpEndpoint=rae(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Zse.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case $x.connecting:return Qx.Connecting;case $x.open:return Qx.Open;case $x.closing:return Qx.Closing;default:return Qx.Closed}}isConnected(){return this.connectionState()===Qx.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new sae(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(M4e,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},FB.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:a}=n,o=a?`(${a})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${o}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===$x.open||this.conn.readyState===$x.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(pp.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Q4e],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:B4e};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(pp.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new tae(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},FB.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,a,o,l,c,u,h,f,p;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:bL,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:FB.HEARTBEAT_INTERVAL,this.worker=(s=e?.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=e?.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=e?.heartbeatCallback)!==null&&o!==void 0?o:WR,this.vsn=(l=e?.vsn)!==null&&l!==void 0?l:H7,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e?.reconnectAfterMs)!==null&&c!==void 0?c:(m=>z4e[m-1]||$4e),this.vsn){case eae:this.encode=(u=e?.encode)!==null&&u!==void 0?u:((m,v)=>v(JSON.stringify(m))),this.decode=(h=e?.decode)!==null&&h!==void 0?h:((m,v)=>v(JSON.parse(m)));break;case T4e:this.encode=(f=e?.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=e?.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}};const H4e=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:O4e,get REALTIME_LISTEN_TYPES(){return H1},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return wL},get REALTIME_PRESENCE_LISTEN_EVENTS(){return SL},get REALTIME_SUBSCRIBE_STATES(){return Pg},RealtimeChannel:sae,RealtimeClient:U4e,RealtimePresence:iae,WebSocketFactory:Zse},Symbol.toStringTag,{value:"Module"})),aae=aI(H4e);class PI extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function aa(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class oae extends PI{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class GT extends PI{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const VF=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),G4e=()=>Response,_L=t=>{if(Array.isArray(t))return t.map(n=>_L(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=_L(r)}),e},V4e=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},W4e=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),KR=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},K4e=(t,e,n)=>_n(void 0,void 0,void 0,function*(){const r=yield G4e();t instanceof r&&!n?.noResolveJson?t.json().then(i=>{const s=t.status||500,a=i?.statusCode||s+"";e(new oae(KR(i),s,a))}).catch(i=>{e(new GT(KR(i),i))}):e(new GT(KR(t),t))}),q4e=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||!r?i:(V4e(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function kI(t,e,n,r,i,s){return _n(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(n,q4e(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>K4e(l,o,r))})})}function L_(t,e,n,r){return _n(this,void 0,void 0,function*(){return kI(t,"GET",e,n,r)})}function dp(t,e,n,r,i){return _n(this,void 0,void 0,function*(){return kI(t,"POST",e,r,i,n)})}function IL(t,e,n,r,i){return _n(this,void 0,void 0,function*(){return kI(t,"PUT",e,r,i,n)})}function Y4e(t,e,n,r){return _n(this,void 0,void 0,function*(){return kI(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function WF(t,e,n,r,i){return _n(this,void 0,void 0,function*(){return kI(t,"DELETE",e,r,i,n)})}class X4e{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return _n(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aa(e))return{data:null,error:e};throw e}})}}var lae;class J4e{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[lae]="BlobDownloadBuilder",this.promise=null}asStream(){return new X4e(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return _n(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aa(e))return{data:null,error:e};throw e}})}}lae=Symbol.toStringTag;const Z4e={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},V7={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class eDe{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=VF(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return _n(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},V7),i);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),l&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(l))):(s=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!a.duplex&&(a.duplex="half")),i?.headers&&(o=Object.assign(Object.assign({},o),i.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),h=yield(e=="PUT"?IL:dp)(this.fetch,`${this.url}/object/${u}`,s,Object.assign({headers:o},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(aa(s))return{data:null,error:s};throw s}})}upload(e,n,r){return _n(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return _n(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:V7.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield IL(this.fetch,o.toString(),l,{headers:u});return{data:{path:s,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(aa(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return _n(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n?.upsert&&(i["x-upsert"]="true");const s=yield dp(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),o=a.searchParams.get("token");if(!o)throw new PI("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(aa(r))return{data:null,error:r};throw r}})}update(e,n,r){return _n(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return _n(this,void 0,void 0,function*(){try{return{data:yield dp(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(aa(i))return{data:null,error:i};throw i}})}copy(e,n,r){return _n(this,void 0,void 0,function*(){try{return{data:{path:(yield dp(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(aa(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return _n(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield dp(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(aa(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return _n(this,void 0,void 0,function*(){try{const i=yield dp(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(aa(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof n?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(n?.transform||{}),a=s?`?${s}`:"",o=this._getFinalPath(e),l=()=>L_(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new J4e(l,this.shouldThrowOnError)}info(e){return _n(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield L_(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:_L(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(aa(r))return{data:null,error:r};throw r}})}exists(e){return _n(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Y4e(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(aa(r)&&r instanceof GT){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n?.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const o=typeof n?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(n?.transform||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${c}`)}}}remove(e){return _n(this,void 0,void 0,function*(){try{return{data:yield WF(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(aa(n))return{data:null,error:n};throw n}})}list(e,n,r){return _n(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Z4e),n),{prefix:e||""});return{data:yield dp(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(aa(i))return{data:null,error:i};throw i}})}listV2(e,n){return _n(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield dp(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(aa(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const cae="2.87.1",uae={"X-Client-Info":`storage-js/${cae}`};class tDe{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uae),n),this.fetch=VF(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return _n(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield L_(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(aa(n))return{data:null,error:n};throw n}})}getBucket(e){return _n(this,void 0,void 0,function*(){try{return{data:yield L_(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(aa(n))return{data:null,error:n};throw n}})}createBucket(e){return _n(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield dp(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(aa(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return _n(this,void 0,void 0,function*(){try{return{data:yield IL(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(aa(r))return{data:null,error:r};throw r}})}emptyBucket(e){return _n(this,void 0,void 0,function*(){try{return{data:yield dp(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(aa(n))return{data:null,error:n};throw n}})}deleteBucket(e){return _n(this,void 0,void 0,function*(){try{return{data:yield WF(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(aa(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var F_=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function nDe(t,e,n){const r=new URL(e,t);if(n)for(const[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function rDe(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function iDe(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:a}){const o=nDe(t.baseUrl,r,i),l=await rDe(t.auth),c=await e(o,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...a},body:s?JSON.stringify(s):void 0}),u=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),f=h&&u?JSON.parse(u):u;if(!c.ok){const p=h?f:void 0,m=p?.error;throw new F_(m?.message??`Request failed with status ${c.status}`,{status:c.status,icebergType:m?.type,icebergCode:m?.code,details:p})}return{status:c.status,headers:c.headers,data:f}}}}function jB(t){return t.join("")}var sDe=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:jB(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${jB(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${jB(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${jB(t.namespace)}`}),!0}catch(e){if(e instanceof F_&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof F_&&n.status===409)return;throw n}}};function e1(t){return t.join("")}var aDe=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${e1(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${e1(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${e1(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${e1(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${e1(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${e1(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof F_&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof F_&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},oDe=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=iDe({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new sDe(this.client,e),this.tableOps=new aDe(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class dae{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uae),n),this.fetch=VF(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return _n(this,void 0,void 0,function*(){try{return{data:yield dp(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(aa(n))return{data:null,error:n};throw n}})}listBuckets(e){return _n(this,void 0,void 0,function*(){try{const n=new URLSearchParams;e?.limit!==void 0&&n.set("limit",e.limit.toString()),e?.offset!==void 0&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield L_(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(aa(n))return{data:null,error:n};throw n}})}deleteBucket(e){return _n(this,void 0,void 0,function*(){try{return{data:yield WF(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(aa(n))return{data:null,error:n};throw n}})}from(e){if(!W4e(e))throw new PI("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new oDe({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>_n(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,a){const o=s[a];return typeof o!="function"?o:(...l)=>_n(this,void 0,void 0,function*(){try{return{data:yield o.apply(s,l),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}})}})}}const KF={"X-Client-Info":`storage-js/${cae}`,"Content-Type":"application/json"};class qF extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function id(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Z3 extends qF{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class hae extends qF{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var BL;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(BL||(BL={}));const p4=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),lDe=()=>Response,fae=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},cDe=t=>Array.from(new Float32Array(t)),uDe=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},W7=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),dDe=(t,e,n)=>_n(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const i=t.status||500,s=t;if(typeof s.json=="function")s.json().then(a=>{const o=a?.statusCode||a?.code||i+"";e(new Z3(W7(a),i,o))}).catch(()=>{const a=i+"",o=s.statusText||`HTTP ${i} error`;e(new Z3(o,i,a))});else{const a=i+"",o=s.statusText||`HTTP ${i} error`;e(new Z3(o,i,a))}}else e(new hae(W7(t),t))}),hDe=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return r?(fae(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function fDe(t,e,n,r,i,s){return _n(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(n,hDe(e,r,i,s)).then(l=>{if(!l.ok)throw l;if(r?.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>dDe(l,o,r))})})}function Vd(t,e,n,r,i){return _n(this,void 0,void 0,function*(){return fDe(t,"POST",e,r,i,n)})}class pae{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},KF),n),this.fetch=p4(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return _n(this,void 0,void 0,function*(){try{return{data:(yield Vd(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(id(n))return{data:null,error:n};throw n}})}getIndex(e,n){return _n(this,void 0,void 0,function*(){try{return{data:yield Vd(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(id(r))return{data:null,error:r};throw r}})}listIndexes(e){return _n(this,void 0,void 0,function*(){try{return{data:yield Vd(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(id(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return _n(this,void 0,void 0,function*(){try{return{data:(yield Vd(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(id(r))return{data:null,error:r};throw r}})}}class gae{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},KF),n),this.fetch=p4(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return _n(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Vd(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(id(n))return{data:null,error:n};throw n}})}getVectors(e){return _n(this,void 0,void 0,function*(){try{return{data:yield Vd(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(id(n))return{data:null,error:n};throw n}})}listVectors(e){return _n(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Vd(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(id(n))return{data:null,error:n};throw n}})}queryVectors(e){return _n(this,void 0,void 0,function*(){try{return{data:yield Vd(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(id(n))return{data:null,error:n};throw n}})}deleteVectors(e){return _n(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Vd(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(id(n))return{data:null,error:n};throw n}})}}class mae{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},KF),n),this.fetch=p4(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return _n(this,void 0,void 0,function*(){try{return{data:(yield Vd(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(id(n))return{data:null,error:n};throw n}})}getBucket(e){return _n(this,void 0,void 0,function*(){try{return{data:yield Vd(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(id(n))return{data:null,error:n};throw n}})}listBuckets(){return _n(this,arguments,void 0,function*(e={}){try{return{data:yield Vd(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(id(n))return{data:null,error:n};throw n}})}deleteBucket(e){return _n(this,void 0,void 0,function*(){try{return{data:(yield Vd(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(id(n))return{data:null,error:n};throw n}})}}class Aae extends mae{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new yae(this.url,this.headers,e,this.fetch)}createBucket(e){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return _n(this,void 0,void 0,function*(){return n.createBucket.call(this,e)})}getBucket(e){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return _n(this,void 0,void 0,function*(){return n.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return _n(this,arguments,void 0,function*(n={}){return e.listBuckets.call(this,n)})}deleteBucket(e){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return _n(this,void 0,void 0,function*(){return n.deleteBucket.call(this,e)})}}class yae extends pae{constructor(e,n,r,i){super(e,n,i),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return _n(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return _n(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return _n(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return _n(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new vae(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class vae extends gae{constructor(e,n,r,i,s){super(e,n,s),this.vectorBucketName=r,this.indexName=i}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return _n(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return _n(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return _n(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return _n(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return _n(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class pDe extends tDe{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new eDe(this.url,this.headers,e,this.fetch)}get vectors(){return new Aae(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new dae(this.url+"/iceberg",this.headers,this.fetch)}}const gDe=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:dae,StorageApiError:oae,StorageClient:pDe,StorageError:PI,StorageUnknownError:GT,StorageVectorsApiError:Z3,StorageVectorsClient:Aae,StorageVectorsError:qF,get StorageVectorsErrorCode(){return BL},StorageVectorsUnknownError:hae,VectorBucketApi:mae,VectorBucketScope:yae,VectorDataApi:gae,VectorIndexApi:pae,VectorIndexScope:vae,isPlainObject:fae,isStorageError:aa,isStorageVectorsError:id,normalizeToFloat32:cDe,resolveFetch:p4,resolveResponse:lDe,validateVectorDimension:uDe},Symbol.toStringTag,{value:"Module"})),mDe=aI(gDe);var qR={},YS={},K7;function ADe(){return K7||(K7=1,Object.defineProperty(YS,"__esModule",{value:!0}),YS.version=void 0,YS.version="2.87.1"),YS}var q7;function yDe(){return q7||(q7=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=ADe();let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(qR)),qR}var YR={},Y7;function vDe(){return Y7||(Y7=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=i=>i?(...s)=>i(...s):(...s)=>fetch(...s);t.resolveFetch=e;const n=()=>Headers;t.resolveHeadersConstructor=n;const r=(i,s,a)=>{const o=(0,t.resolveFetch)(a),l=(0,t.resolveHeadersConstructor)();return async(c,u)=>{var h;const f=(h=await s())!==null&&h!==void 0?h:i;let p=new l(u?.headers);return p.has("apikey")||p.set("apikey",i),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),o(c,Object.assign(Object.assign({},u),{headers:p}))}};t.fetchWithAuth=r})(YR)),YR}var Vm={},X7;function xDe(){if(X7)return Vm;X7=1,Object.defineProperty(Vm,"__esModule",{value:!0}),Vm.isBrowser=void 0,Vm.uuid=t,Vm.ensureTrailingSlash=e,Vm.applySettingDefaults=r,Vm.validateSupabaseUrl=i;function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var a=Math.random()*16|0,o=s=="x"?a:a&3|8;return o.toString(16)})}function e(s){return s.endsWith("/")?s:s+"/"}const n=()=>typeof window<"u";Vm.isBrowser=n;function r(s,a){var o,l;const{db:c,auth:u,realtime:h,global:f}=s,{db:p,auth:m,realtime:v,global:A}=a,x={db:Object.assign(Object.assign({},p),c),auth:Object.assign(Object.assign({},m),u),realtime:Object.assign(Object.assign({},v),h),storage:{},global:Object.assign(Object.assign(Object.assign({},A),f),{headers:Object.assign(Object.assign({},(o=A?.headers)!==null&&o!==void 0?o:{}),(l=f?.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return s.accessToken?x.accessToken=s.accessToken:delete x.accessToken,x}function i(s){const a=s?.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(e(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return Vm}var XS={};const xae="2.87.1",v1=30*1e3,TL=3,XR=TL*v1,bDe="http://localhost:9999",CDe="supabase.auth.token",EDe={"X-Client-Info":`gotrue-js/${xae}`},ML="X-Supabase-Api-Version",bae={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},SDe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wDe=600*1e3;let dE=class extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function jn(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let Cae=class extends dE{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function Eae(t){return jn(t)&&t.name==="AuthApiError"}let gy=class extends dE{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}},Q0=class extends dE{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}},Xu=class extends Q0{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function Sae(t){return jn(t)&&t.name==="AuthSessionMissingError"}let Bx=class extends Q0{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Dw=class extends Q0{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},Rw=class extends Q0{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function wae(t){return jn(t)&&t.name==="AuthImplicitGrantRedirectError"}let DL=class extends Q0{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},VT=class extends Q0{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}};function eT(t){return jn(t)&&t.name==="AuthRetryableFetchError"}let RL=class extends Q0{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};function _De(t){return jn(t)&&t.name==="AuthWeakPasswordError"}let WT=class extends Q0{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const KT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),J7=` 	
\r=`.split(""),IDe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<J7.length;e+=1)t[J7[e].charCodeAt(0)]=-2;for(let e=0;e<KT.length;e+=1)t[KT[e].charCodeAt(0)]=e;return t})();function Z7(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(KT[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(KT[r]),e.queuedBits-=6}}function _ae(t,e,n){const r=IDe[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function eQ(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{MDe(a,r,n)};for(let a=0;a<t.length;a+=1)_ae(t.charCodeAt(a),i,s);return e.join("")}function BDe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function TDe(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}BDe(r,e)}}function MDe(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function G1(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)_ae(t.charCodeAt(i),n,r);return new Uint8Array(e)}function DDe(t){const e=[];return TDe(t,n=>e.push(n)),new Uint8Array(e)}function Zx(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>Z7(i,n,r)),Z7(null,n,r),e.join("")}function RDe(t){return Math.round(Date.now()/1e3)+t}function PDe(){return Symbol("auth-callback")}const ql=()=>typeof window<"u"&&typeof document<"u",Ax={tested:!1,writable:!1},Iae=()=>{if(!ql())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ax.tested)return Ax.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ax.tested=!0,Ax.writable=!0}catch{Ax.tested=!0,Ax.writable=!1}return Ax.writable};function kDe(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const Bae=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),NDe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",x1=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},yx=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Wl=async(t,e)=>{await t.removeItem(e)};class g4{constructor(){this.promise=new g4.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}g4.promiseConstructor=Promise;function JR(t){const e=t.split(".");if(e.length!==3)throw new WT("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!SDe.test(e[r]))throw new WT("JWT not in base64url format");return{header:JSON.parse(eQ(e[0])),payload:JSON.parse(eQ(e[1])),signature:G1(e[2]),raw:{header:e[0],payload:e[1]}}}async function LDe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function FDe(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await t(s);if(!e(s,null,a)){r(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function jDe(t){return("0"+t.toString(16)).substr(-2)}function ODe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,jDe).join("")}async function zDe(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function $De(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await zDe(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function t1(t,e,n=!1){const r=ODe();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await x1(t,`${e}-code-verifier`,i);const s=await $De(r);return[s,r===s?"plain":"s256"]}const QDe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function UDe(t){const e=t.headers.get(ML);if(!e||!e.match(QDe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function HDe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function GDe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const VDe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function n1(t){if(!VDe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ZR(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function WDe(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function tQ(t){return JSON.parse(JSON.stringify(t))}const Tx=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),KDe=[502,503,504];async function nQ(t){var e;if(!NDe(t))throw new VT(Tx(t),0);if(KDe.includes(t.status))throw new VT(Tx(t),t.status);let n;try{n=await t.json()}catch(s){throw new gy(Tx(s),s)}let r;const i=UDe(t);if(i&&i.getTime()>=bae["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new RL(Tx(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Xu}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new RL(Tx(n),t.status,n.weak_password.reasons);throw new Cae(Tx(n),t.status||500,r)}const qDe=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function cr(t,e,n,r){var i;const s=Object.assign({},r?.headers);s[ML]||(s[ML]=bae["2024-01-01"].name),r?.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await YDe(t,e,n+o,{headers:s,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}async function YDe(t,e,n,r,i,s){const a=qDe(e,r,i,s);let o;try{o=await t(n,Object.assign({},a))}catch(l){throw console.error(l),new VT(Tx(l),0)}if(o.ok||await nQ(o),r?.noResolveJson)return o;try{return await o.json()}catch(l){await nQ(l)}}function up(t){var e;let n=null;ZDe(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=RDe(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function rQ(t){const e=up(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function my(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function XDe(t){return{data:t,error:null}}function JDe(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,a=$E(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function iQ(t){return t}function ZDe(t){return t.access_token&&t.refresh_token&&t.expires_in}const tT=["global","local","others"];let YF=class{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Bae(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=tT[0]){if(tT.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${tT.join(", ")}`);try{return await cr(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(jn(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await cr(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:my})}catch(r){if(jn(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=$E(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await cr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:JDe,redirectTo:n?.redirectTo})}catch(n){if(jn(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await cr(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:my})}catch(n){if(jn(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await cr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:iQ});if(u.error)throw u.error;const h=await u.json(),f=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(m.split(";")[1].split("=")[1]);c[`${A}Page`]=v}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(jn(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){n1(e);try{return await cr(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:my})}catch(n){if(jn(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){n1(e);try{return await cr(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:my})}catch(r){if(jn(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){n1(e);try{return await cr(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:my})}catch(r){if(jn(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){n1(e.userId);try{const{data:n,error:r}=await cr(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(jn(n))return{data:null,error:n};throw n}}async _deleteFactor(e){n1(e.userId),n1(e.id);try{return{data:await cr(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(jn(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await cr(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:iQ});if(u.error)throw u.error;const h=await u.json(),f=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(m.split(";")[1].split("=")[1]);c[`${A}Page`]=v}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(jn(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await cr(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(jn(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await cr(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(jn(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await cr(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(jn(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await cr(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(jn(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await cr(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(jn(n))return{data:null,error:n};throw n}}};function sQ(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Mx={debug:!!(globalThis&&Iae()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class XF extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let Tae=class extends XF{};class eRe extends XF{}async function Mae(t,e,n){Mx.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Mx.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Mx.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Mx.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Mx.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Tae(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Mx.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const aQ={};async function tRe(t,e,n){var r;const i=(r=aQ[t])!==null&&r!==void 0?r:Promise.resolve(),s=Promise.race([i.catch(()=>null),e>=0?new Promise((a,o)=>{setTimeout(()=>{o(new eRe(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(a=>a)).catch(a=>{if(a&&a.isAcquireTimeout)throw a;return null}).then(async()=>await n());return aQ[t]=s.catch(async a=>{if(a&&a.isAcquireTimeout)return await i,null;throw a}),await s}function nRe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Dae(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function rRe(t){return parseInt(t,16)}function iRe(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function sRe(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:o,requestId:l,resources:c,scheme:u,uri:h,version:f}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=Dae(t.address),m=u?`${u}://${r}`:r,v=t.statement?`${t.statement}
`:"",A=`${m} wants you to sign in with your Ethereum account:
${p}

${v}`;let x=`URI: ${h}
Version: ${f}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(i&&(x+=`
Expiration Time: ${i.toISOString()}`),o&&(x+=`
Not Before: ${o.toISOString()}`),l&&(x+=`
Request ID: ${l}`),c){let E=`
Resources:`;for(const w of c){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);E+=`
- ${w}`}x+=E}return`${A}
${x}`}class To extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class qT extends To{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function aRe({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new To({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new To({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new To({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new To({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new To({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new To({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new To({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new To({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(Rae(a)){if(s.rp.id!==a)return new To({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new To({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new To({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new To({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new To({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function oRe({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new To({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new To({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(Rae(r)){if(n.rpId!==r)return new To({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new To({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new To({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new To({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class lRe{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const cRe=new lRe;function uRe(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=$E(t,["challenge","user","excludeCredentials"]),s=G1(e).buffer,a=Object.assign(Object.assign({},n),{id:G1(n.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:s,user:a});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];o.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:G1(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function dRe(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=$E(t,["challenge","allowCredentials"]),i=G1(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const o=n[a];s.allowCredentials[a]=Object.assign(Object.assign({},o),{id:G1(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return s}function hRe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Zx(new Uint8Array(t.response.attestationObject)),clientDataJSON:Zx(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function fRe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Zx(new Uint8Array(i.authenticatorData)),clientDataJSON:Zx(new Uint8Array(i.clientDataJSON)),signature:Zx(new Uint8Array(i.signature)),userHandle:i.userHandle?Zx(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Rae(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function oQ(){var t,e;return!!(ql()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function pRe(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new qT("Browser returned unexpected credential type",e)}:{data:null,error:new qT("Empty credential response",e)}}catch(e){return{data:null,error:aRe({error:e,options:t})}}}async function gRe(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new qT("Browser returned unexpected credential type",e)}:{data:null,error:new qT("Empty credential response",e)}}catch(e){return{data:null,error:oRe({error:e,options:t})}}}const mRe={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ARe={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function YT(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const a=i[s];if(a!==void 0)if(Array.isArray(a))r[s]=a;else if(n(a))r[s]=a;else if(e(a)){const o=r[s];e(o)?r[s]=YT(o,a):r[s]=YT(a)}else r[s]=a}return r}function yRe(t,e){return YT(mRe,t,e||{})}function vRe(t,e){return YT(ARe,t,e||{})}class xRe{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:o};const l=i??cRe.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:c}=a.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(a.webauthn.type){case"create":{const c=yRe(a.webauthn.credential_options.publicKey,s?.create),{data:u,error:h}=await pRe({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}case"request":{const c=vRe(a.webauthn.credential_options.publicKey,s?.request),{data:u,error:h}=await gRe(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}}}catch(a){return jn(a)?{data:null,error:a}:{data:null,error:new gy("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new dE("rpId is required for WebAuthn authentication")};try{if(!oQ())return{data:null,error:new gy("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!a)return{data:null,error:o};const{webauthn:l}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(a){return jn(a)?{data:null,error:a}:{data:null,error:new gy("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new dE("rpId is required for WebAuthn registration")};try{if(!oQ())return{data:null,error:new gy("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:o};const{data:l,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(a){return jn(a)?{data:null,error:a}:{data:null,error:new gy("Unexpected error in register",a)}}}}nRe();const bRe={url:bDe,storageKey:CDe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:EDe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function lQ(t,e,n){return await n()}const r1={};let JF=class PL{get jwks(){var e,n;return(n=(e=r1[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){r1[this.storageKey]=Object.assign(Object.assign({},r1[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=r1[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){r1[this.storageKey]=Object.assign(Object.assign({},r1[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},bRe),e);if(this.storageKey=s.storageKey,this.instanceID=(n=PL.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,PL.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&ql()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new YF({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Bae(s.fetch),this.lock=s.lock||lQ,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:this.persistSession&&ql()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=Mae:this.lock=lQ,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new xRe(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Iae()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=sQ(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=sQ(this.memoryStorage)),ql()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${xae}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(ql()&&(n=kDe(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),ql()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),wae(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return jn(n)?this._returnResult({error:n}):this._returnResult({error:new gy("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await cr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:up}),{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(jn(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:u,password:h,options:f}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await t1(this.storage,this.storageKey)),s=await cr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:u,password:h,data:(n=f?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:m},xform:up})}else if("phone"in e){const{phone:u,password:h,options:f}=e;s=await cr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},channel:(i=f?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:up})}else throw new Dw("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return await Wl(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(await Wl(this.storage,`${this.storageKey}-code-verifier`),jn(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:a,options:o}=e;n=await cr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:rQ})}else if("phone"in e){const{phone:s,password:a,options:o}=e;n=await cr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:rQ})}else throw new Dw("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new Bx;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(jn(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,a,o,l,c,u,h,f;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:v,wallet:A,statement:x,options:E}=e;let w;if(ql())if(typeof A=="object")w=A;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")w=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=A}const B=new URL((n=E?.url)!==null&&n!==void 0?n:window.location.href),D=await w.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=Dae(D[0]);let M=(r=E?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!M){const k=await w.request({method:"eth_chainId"});M=rRe(k)}const R={domain:B.host,address:T,statement:x,uri:B.href,version:"1",chainId:M,nonce:(i=E?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=E?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=E?.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=E?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=E?.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=E?.signInWithEthereum)===null||u===void 0?void 0:u.resources};p=sRe(R),m=await w.request({method:"personal_sign",params:[iRe(p),T]})}try{const{data:v,error:A}=await cr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:up});if(A)throw A;if(!v||!v.session||!v.user){const x=new Bx;return this._returnResult({data:{user:null,session:null},error:x})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:A})}catch(v){if(jn(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(e){var n,r,i,s,a,o,l,c,u,h,f,p;let m,v;if("message"in e)m=e.message,v=e.signature;else{const{chain:A,wallet:x,statement:E,options:w}=e;let B;if(ql())if(typeof x=="object")B=x;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))B=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=x}const D=new URL((n=w?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in B&&B.signIn){const T=await B.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),E?{statement:E}:null));let M;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")M=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)M=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)m=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),v=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in B)||typeof B.signMessage!="function"||!("publicKey"in B)||typeof B!="object"||!B.publicKey||!("toBase58"in B.publicKey)||typeof B.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${D.host} wants you to sign in with your Solana account:`,B.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(i=(r=w?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=w?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((o=w?.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(u=w?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const T=await B.signMessage(new TextEncoder().encode(m),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=T}}try{const{data:A,error:x}=await cr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Zx(v)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:up});if(x)throw x;if(!A||!A.session||!A.user){const E=new Bx;return this._returnResult({data:{user:null,session:null},error:E})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:x})}catch(A){if(jn(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(e){const n=await yx(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:a}=await cr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:up});if(await Wl(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){const o=new Bx;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(await Wl(this.storage,`${this.storageKey}-code-verifier`),jn(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=e,o=await cr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:up}),{data:l,error:c}=o;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new Bx;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(jn(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,s,a;try{if("email"in e){const{email:o,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await t1(this.storage,this.storageKey));const{error:h}=await cr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l?.data)!==null&&n!==void 0?n:{},create_user:(r=l?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:u}=await cr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:u})}throw new Dw("You must provide either an email or phone number.")}catch(o){if(await Wl(this.storage,`${this.storageKey}-code-verifier`),jn(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await cr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:up});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(jn(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,s,a;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await t1(this.storage,this.storageKey));const c=await cr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:XDe});return!((s=c.data)===null||s===void 0)&&s.url&&ql()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(o){if(await Wl(this.storage,`${this.storageKey}-code-verifier`),jn(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Xu;const{error:i}=await cr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(jn(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:a}=await cr(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:a,error:o}=await cr(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:o})}throw new Dw("You must provide either an email or phone number and a type")}catch(n){if(jn(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await yx(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<XR:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await yx(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=ZR()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=WDe(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await cr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:my}):await this._useSession(async n=>{var r,i,s;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xu}:await cr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:my})})}catch(n){if(jn(n))return Sae(n)&&(await this._removeSession(),await Wl(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Xu;const a=i.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await t1(this.storage,this.storageKey));const{data:c,error:u}=await cr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:my});if(u)throw u;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await Wl(this.storage,`${this.storageKey}-code-verifier`),jn(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Xu;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:a}=JR(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(jn(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:o}=n;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Xu;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(jn(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!ql())throw new Rw("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Rw(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new DL("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Rw("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new DL("No code detected.");const{data:E,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=e;if(!s||!o||!a||!c)throw new Rw("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(o);let f=u+h;l&&(f=parseInt(l));const p=f-u;p*1e3<=v1&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const m=f-h;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,u);const{data:v,error:A}=await this._getUser(s);if(A)throw A;const x={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:f,refresh_token:a,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:e.type},error:null})}catch(r){if(jn(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await yx(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(Eae(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await Wl(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=PDe(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await t1(this.storage,this.storageKey,!0));try{return await cr(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(await Wl(this.storage,`${this.storageKey}-code-verifier`),jn(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(jn(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,o,l,c,u;const{data:h,error:f}=s;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await cr(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return ql()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:e.provider,url:r?.url},error:null})}catch(r){if(jn(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:a,provider:o,token:l,access_token:c,nonce:u}=e,h=await cr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:o,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:up}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Bx}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(i){if(await Wl(this.storage,`${this.storageKey}-code-verifier`),jn(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await cr(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(jn(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await FDe(async i=>(i>0&&await LDe(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await cr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:up})),(i,s)=>{const a=200*Math.pow(2,i);return s&&eT(s)&&Date.now()+a-r<v1})}catch(r){if(this._debug(n,"error",r),jn(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),ql()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await yx(this.storage,this.storageKey);if(i&&this.userStorage){let a=await yx(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await x1(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a?.user)!==null&&e!==void 0?e:ZR()}else if(i&&!i.user&&!i.user){const a=await yx(this.storage,this.storageKey+"-user");a&&a?.user?(i.user=a.user,await Wl(this.storage,this.storageKey+"-user"),await x1(this.storage,this.storageKey,i)):i.user=ZR()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<XR;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${XR}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),eT(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(i.access_token);!o&&a?.user?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Xu;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new g4;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Xu;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={data:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),jn(s)){const a={data:null,error:s};return eT(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Wl(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await x1(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=tQ(i);await x1(this.storage,this.storageKey,s)}else{const i=tQ(n);await x1(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Wl(this.storage,this.storageKey),await Wl(this.storage,this.storageKey+"-code-verifier"),await Wl(this.storage,this.storageKey+"-user"),this.userStorage&&await Wl(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ql()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),v1);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/v1);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${v1}ms, refresh threshold is ${TL} ticks`),i<=TL&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof XF)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ql()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await t1(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(r?.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await cr(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(jn(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await cr(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l?.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(jn(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?hRe(e.webauthn.credential_response):fRe(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:l}=await cr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(n){if(jn(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=await cr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:uRe(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:dRe(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(jn(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n?.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=JR(r.access_token);let a=null;s.aal&&(a=s.aal);let o=a;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(o="aal2");const c=s.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await cr(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Xu})})}catch(n){if(jn(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Xu});const a=await cr(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&ql()&&!n?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(r){if(jn(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Xu});const a=await cr(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&ql()&&!n?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(r){if(jn(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await cr(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Xu})})}catch(e){if(jn(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await cr(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Xu})})}catch(n){if(jn(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+wDe>i)return r;const{data:s,error:a}=await cr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});r=p.session.access_token}const{header:i,payload:s,signature:a,raw:{header:o,payload:l}}=JR(r);n?.allowExpired||HDe(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!c){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:s,header:i,signature:a},error:null}}const u=GDe(i.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,a,DDe(`${o}.${l}`)))throw new WT("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(jn(r))return this._returnResult({data:null,error:r});throw r}}};JF.nextInstanceID={};const CRe=YF,ERe=JF,SRe=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:CRe,AuthApiError:Cae,AuthClient:ERe,AuthError:dE,AuthImplicitGrantRedirectError:Rw,AuthInvalidCredentialsError:Dw,AuthInvalidJwtError:WT,AuthInvalidTokenResponseError:Bx,AuthPKCEGrantCodeExchangeError:DL,AuthRetryableFetchError:VT,AuthSessionMissingError:Xu,AuthUnknownError:gy,AuthWeakPasswordError:RL,CustomAuthError:Q0,GoTrueAdminApi:YF,GoTrueClient:JF,NavigatorLockAcquireTimeoutError:Tae,SIGN_OUT_SCOPES:tT,isAuthApiError:Eae,isAuthError:jn,isAuthImplicitGrantRedirectError:wae,isAuthRetryableFetchError:eT,isAuthSessionMissingError:Sae,isAuthWeakPasswordError:_De,lockInternals:Mx,navigatorLock:Mae,processLock:tRe},Symbol.toStringTag,{value:"Module"})),Pae=aI(SRe);var cQ;function wRe(){if(cQ)return XS;cQ=1,Object.defineProperty(XS,"__esModule",{value:!0}),XS.SupabaseAuthClient=void 0;const t=Pae;let e=class extends t.AuthClient{constructor(r){super(r)}};return XS.SupabaseAuthClient=e,XS}var uQ;function dQ(){if(uQ)return MB;uQ=1,Object.defineProperty(MB,"__esModule",{value:!0});const t=Vse,e=Jse(),n=aae,r=mDe,i=yDe(),s=vDe(),a=xDe(),o=wRe();class l{constructor(u,h,f){var p,m,v;this.supabaseUrl=u,this.supabaseKey=h;const A=(0,a.validateSupabaseUrl)(u);if(!h)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",A),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",A),this.storageUrl=new URL("storage/v1",A),this.functionsUrl=new URL("functions/v1",A);const x=`sb-${A.hostname.split(".")[0]}-auth-token`,E={db:i.DEFAULT_DB_OPTIONS,realtime:i.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},i.DEFAULT_AUTH_OPTIONS),{storageKey:x}),global:i.DEFAULT_GLOBAL_OPTIONS},w=(0,a.applySettingDefaults)(f??{},E);this.storageKey=(p=w.auth.storageKey)!==null&&p!==void 0?p:"",this.headers=(m=w.global.headers)!==null&&m!==void 0?m:{},w.accessToken?(this.accessToken=w.accessToken,this.auth=new Proxy({},{get:(B,D)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(D)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((v=w.auth)!==null&&v!==void 0?v:{},this.headers,w.global.fetch),this.fetch=(0,s.fetchWithAuth)(h,this._getAccessToken.bind(this),w.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},w.realtime)),this.accessToken&&this.accessToken().then(B=>this.realtime.setAuth(B)).catch(B=>console.warn("Failed to set initial Realtime auth token:",B)),this.rest=new e.PostgrestClient(new URL("rest/v1",A).href,{headers:this.headers,schema:w.db.schema,fetch:this.fetch}),this.storage=new r.StorageClient(this.storageUrl.href,this.headers,this.fetch,f?.storage),w.accessToken||this._listenForAuthEvents()}get functions(){return new t.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(u){return this.rest.from(u)}schema(u){return this.rest.schema(u)}rpc(u,h={},f={head:!1,get:!1,count:void 0}){return this.rest.rpc(u,h,f)}channel(u,h={config:{}}){return this.realtime.channel(u,h)}getChannels(){return this.realtime.getChannels()}removeChannel(u){return this.realtime.removeChannel(u)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var u,h;if(this.accessToken)return await this.accessToken();const{data:f}=await this.auth.getSession();return(h=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:u,persistSession:h,detectSessionInUrl:f,storage:p,userStorage:m,storageKey:v,flowType:A,lock:x,debug:E,throwOnError:w},B,D){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new o.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),B),storageKey:v,autoRefreshToken:u,persistSession:h,detectSessionInUrl:f,storage:p,userStorage:m,flowType:A,lock:x,debug:E,throwOnError:w,fetch:D,hasCustomAuthorizationHeader:Object.keys(this.headers).some(M=>M.toLowerCase()==="authorization")})}_initRealtimeClient(u){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},u),{params:Object.assign({apikey:this.supabaseKey},u?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((h,f)=>{this._handleTokenChanged(h,"CLIENT",f?.access_token)})}_handleTokenChanged(u,h,f){(u==="TOKEN_REFRESHED"||u==="SIGNED_IN")&&this.changedAccessToken!==f?(this.changedAccessToken=f,this.realtime.setAuth(f)):u==="SIGNED_OUT"&&(this.realtime.setAuth(),h=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return MB.default=l,MB}var hQ;function _Re(){return hQ||(hQ=1,(function(t){var e=Gm&&Gm.__createBinding||(Object.create?(function(u,h,f,p){p===void 0&&(p=f);var m=Object.getOwnPropertyDescriptor(h,f);(!m||("get"in m?!h.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return h[f]}}),Object.defineProperty(u,p,m)}):(function(u,h,f,p){p===void 0&&(p=f),u[p]=h[f]})),n=Gm&&Gm.__exportStar||function(u,h){for(var f in u)f!=="default"&&!Object.prototype.hasOwnProperty.call(h,f)&&e(h,u,f)},r=Gm&&Gm.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const i=r(dQ());n(Pae,t);var s=Jse();Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return s.PostgrestError}});var a=Vse;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return a.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return a.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return a.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return a.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return a.FunctionRegion}}),n(aae,t);var o=dQ();Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return r(o).default}});const l=(u,h,f)=>new i.default(u,h,f);t.createClient=l;function c(){if(typeof window<"u"||typeof process>"u")return!1;const u=process.version;if(u==null)return!1;const h=u.match(/^v(\d+)\./);return h?parseInt(h[1],10)<=18:!1}c()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Gm)),Gm}var kae=_Re();const Nae=qg(kae),IRe=afe({__proto__:null,default:Nae},[kae]),{PostgrestError:wpt,FunctionsHttpError:_pt,FunctionsFetchError:Ipt,FunctionsRelayError:Bpt,FunctionsError:Tpt,FunctionRegion:Mpt,SupabaseClient:Dpt,createClient:BRe,GoTrueAdminApi:Rpt,GoTrueClient:Ppt,AuthAdminApi:kpt,AuthClient:Npt,navigatorLock:Lpt,NavigatorLockAcquireTimeoutError:Fpt,lockInternals:jpt,processLock:Opt,SIGN_OUT_SCOPES:zpt,AuthError:$pt,AuthApiError:Qpt,AuthUnknownError:Upt,CustomAuthError:Hpt,AuthSessionMissingError:Gpt,AuthInvalidTokenResponseError:Vpt,AuthInvalidCredentialsError:Wpt,AuthImplicitGrantRedirectError:Kpt,AuthPKCEGrantCodeExchangeError:qpt,AuthRetryableFetchError:Ypt,AuthWeakPasswordError:Xpt,AuthInvalidJwtError:Jpt,isAuthError:Zpt,isAuthApiError:egt,isAuthSessionMissingError:tgt,isAuthImplicitGrantRedirectError:ngt,isAuthRetryableFetchError:rgt,isAuthWeakPasswordError:igt,RealtimePresence:sgt,RealtimeChannel:agt,RealtimeClient:ogt,REALTIME_LISTEN_TYPES:lgt,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:cgt,REALTIME_PRESENCE_LISTEN_EVENTS:ugt,REALTIME_SUBSCRIBE_STATES:dgt,REALTIME_CHANNEL_STATES:hgt}=Nae||IRe,TRe="https://lilxpscwiqggxmdroshn.supabase.co",MRe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxpbHhwc2N3aXFnZ3htZHJvc2huIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU0NzI1NjYsImV4cCI6MjA3MTA0ODU2Nn0.XhCb-gSV9IM8w355prG4ebgKFHU4yasR3eXg3dr7_60",DRe="xstudio-auth-prod",ss=BRe(TRe,MRe,{auth:{persistSession:!0,storageKey:DRe}}),RRe=Object.freeze(Object.defineProperty({__proto__:null,supabase:ss},Symbol.toStringTag,{value:"Module"}));var Pw=(t=>(t.NETWORK_ERROR="NETWORK_ERROR",t.VALIDATION_ERROR="VALIDATION_ERROR",t.AUTHENTICATION_ERROR="AUTHENTICATION_ERROR",t.AUTHORIZATION_ERROR="AUTHORIZATION_ERROR",t.NOT_FOUND_ERROR="NOT_FOUND_ERROR",t.RATE_LIMIT_ERROR="RATE_LIMIT_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.UNKNOWN_ERROR="UNKNOWN_ERROR",t))(Pw||{});const i1=(t,e)=>{const n=new Date().toISOString();if(t&&typeof t=="object"&&"code"in t){const i=t;return i.code==="23505"?{type:"VALIDATION_ERROR",message:"  .",code:i.code,details:i.details||i.message,operation:e,timestamp:n}:i.code==="23503"?{type:"VALIDATION_ERROR",message:"   .",code:i.code,details:i.details||i.message,operation:e,timestamp:n}:i.code==="23514"?{type:"VALIDATION_ERROR",message:"   .",code:i.code,details:i.details||i.message,operation:e,timestamp:n}:{type:"SERVER_ERROR",message:i.message||"  .",code:i.code,details:i.details,operation:e,timestamp:n}}if(t instanceof Error){const i=t.message.toLowerCase();if(i.includes("network")||i.includes("fetch"))return{type:"NETWORK_ERROR",message:"   .   .",operation:e,timestamp:n};if(i.includes("auth")||i.includes("unauthorized"))return{type:"AUTHENTICATION_ERROR",message:" .  .",operation:e,timestamp:n};if(i.includes("forbidden")||i.includes("permission"))return{type:"AUTHORIZATION_ERROR",message:"    .",operation:e,timestamp:n};if(i.includes("not found")||i.includes("404"))return{type:"NOT_FOUND_ERROR",message:"    .",operation:e,timestamp:n};if(i.includes("rate limit"))return{type:"RATE_LIMIT_ERROR",message:"  .    .",operation:e,timestamp:n};if(i.includes("500")||i.includes("server"))return{type:"SERVER_ERROR",message:"  .    .",operation:e,timestamp:n};if(i.includes("invalid")||i.includes("validation"))return{type:"VALIDATION_ERROR",message:t.message,operation:e,timestamp:n}}let r;if(t instanceof Error)r={name:t.name,message:t.message,stack:t.stack};else if(typeof t=="object"&&t!==null)try{r=JSON.parse(JSON.stringify(t))}catch{r=String(t)}else r=String(t);return{type:"UNKNOWN_ERROR",message:"    .",details:r,operation:e,timestamp:n}},Ig=t=>{console.error(`[${t.operation}] ${t.type}:`,t.message)};class PRe{cache;maxSize;ttl;constructor(e={}){this.cache=new Map,this.maxSize=e.max??100,this.ttl=e.ttl??0}get(e){const n=this.cache.get(e);if(n){if(this.ttl>0&&Date.now()-n.timestamp>this.ttl){this.cache.delete(e);return}return this.cache.delete(e),this.cache.set(e,n),n.value}}set(e,n){if(this.cache.has(e)&&this.cache.delete(e),this.cache.size>=this.maxSize){const r=this.cache.keys().next().value;r!==void 0&&this.cache.delete(r)}this.cache.set(e,{value:n,timestamp:Date.now()})}delete(e){return this.cache.delete(e)}clear(){this.cache.clear()}has(e){if(!this.cache.has(e))return!1;if(this.ttl>0){const n=this.cache.get(e);if(Date.now()-n.timestamp>this.ttl)return this.cache.delete(e),!1}return!0}get size(){return this.cache.size}keys(){return this.cache.keys()}values(){return this.cache.values()}cleanup(){if(this.ttl===0)return 0;let e=0;const n=Date.now();for(const[r,i]of this.cache.entries())n-i.timestamp>this.ttl&&(this.cache.delete(r),e++);return e}getStats(){let e=null;if(this.cache.size>0){const n=this.cache.values().next().value;n&&(e=Date.now()-n.timestamp)}return{size:this.cache.size,maxSize:this.maxSize,ttl:this.ttl,oldestItemAge:e}}}const OB=new PRe({max:100,ttl:300*1e3});class kRe{pendingRequests;constructor(){this.pendingRequests=new Map}async deduplicate(e,n){if(this.pendingRequests.has(e))return this.pendingRequests.get(e);const r=n().then(i=>(this.pendingRequests.delete(e),i)).catch(i=>{throw this.pendingRequests.delete(e),console.error(` [Dedup] Request failed: ${e}`,i),i});return this.pendingRequests.set(e,r),r}cancel(e){return this.pendingRequests.has(e)?(this.pendingRequests.delete(e),console.log(` [Dedup] Request cancelled: ${e}`),!0):!1}cancelAll(){const e=this.pendingRequests.size;this.pendingRequests.clear(),console.log(` [Dedup] All requests cancelled (${e})`)}get pendingCount(){return this.pendingRequests.size}isPending(e){return this.pendingRequests.has(e)}getPendingKeys(){return Array.from(this.pendingRequests.keys())}getStats(){return{pendingCount:this.pendingCount,pendingKeys:this.getPendingKeys()}}}const fQ=new kRe;let NRe=class{cacheMetrics;deduplicationMetrics;batcherMetrics;queryMetrics;startTime;queryStates;constructor(){this.cacheMetrics={totalRequests:0,hits:0,misses:0,hitRate:0,avgResponseTime:0,totalResponseTime:0},this.deduplicationMetrics={totalRequests:0,deduplicated:0,executed:0,deduplicationRate:0},this.batcherMetrics={totalEvents:0,filtered:0,batched:0,batchCount:0,avgBatchSize:0,filterEfficiency:0},this.queryMetrics={activeQueries:0,loadingQueries:0,errorQueries:0,successQueries:0,avgFetchTime:0,totalFetchTime:0,totalFetches:0},this.startTime=performance.now(),this.queryStates=new Map}recordCacheHit(e,n=0){this.cacheMetrics.totalRequests++,this.cacheMetrics.hits++,this.cacheMetrics.totalResponseTime+=n,this.cacheMetrics.hitRate=this.cacheMetrics.hits/this.cacheMetrics.totalRequests*100,this.cacheMetrics.avgResponseTime=this.cacheMetrics.totalResponseTime/this.cacheMetrics.totalRequests}recordCacheMiss(e,n=0){this.cacheMetrics.totalRequests++,this.cacheMetrics.misses++,this.cacheMetrics.totalResponseTime+=n,this.cacheMetrics.hitRate=this.cacheMetrics.hits/this.cacheMetrics.totalRequests*100,this.cacheMetrics.avgResponseTime=this.cacheMetrics.totalResponseTime/this.cacheMetrics.totalRequests}recordDeduplication(e,n){this.deduplicationMetrics.totalRequests++,n?(this.deduplicationMetrics.deduplicated++,console.log(` [Monitor] Request DEDUPLICATED: ${e}`)):(this.deduplicationMetrics.executed++,console.log(` [Monitor] Request EXECUTED: ${e}`)),this.deduplicationMetrics.deduplicationRate=this.deduplicationMetrics.deduplicated/this.deduplicationMetrics.totalRequests*100}recordBatcherEvents(e,n,r){this.batcherMetrics.totalEvents+=e,this.batcherMetrics.filtered+=n,this.batcherMetrics.batched+=r,r>0&&this.batcherMetrics.batchCount++,this.batcherMetrics.batchCount>0&&(this.batcherMetrics.avgBatchSize=this.batcherMetrics.batched/this.batcherMetrics.batchCount),this.batcherMetrics.totalEvents>0&&(this.batcherMetrics.filterEfficiency=this.batcherMetrics.filtered/this.batcherMetrics.totalEvents*100),console.log(` [Monitor] Batcher: Received ${e}, Filtered ${n}, Batched ${r} (Avg: ${this.batcherMetrics.avgBatchSize.toFixed(1)})`)}recordQueryState(e,n){this.queryStates.set(e,n),this.updateQueryCounts()}recordFetchComplete(e,n,r){this.queryMetrics.totalFetches++,this.queryMetrics.totalFetchTime+=n,this.queryMetrics.avgFetchTime=this.queryMetrics.totalFetchTime/this.queryMetrics.totalFetches,r?this.recordQueryState(e,"success"):this.recordQueryState(e,"error")}updateQueryCounts(){let e=0,n=0,r=0,i=0;for(const s of this.queryStates.values())s!=="idle"&&e++,s==="loading"&&n++,s==="error"&&r++,s==="success"&&i++;this.queryMetrics.activeQueries=e,this.queryMetrics.loadingQueries=n,this.queryMetrics.errorQueries=r,this.queryMetrics.successQueries=i}getStats(){const e=performance.now()-this.startTime;return{cache:{...this.cacheMetrics},deduplication:{...this.deduplicationMetrics},batcher:{...this.batcherMetrics},query:{...this.queryMetrics},startTime:this.startTime,elapsedTime:e}}reset(){this.cacheMetrics={totalRequests:0,hits:0,misses:0,hitRate:0,avgResponseTime:0,totalResponseTime:0},this.deduplicationMetrics={totalRequests:0,deduplicated:0,executed:0,deduplicationRate:0},this.batcherMetrics={totalEvents:0,filtered:0,batched:0,batchCount:0,avgBatchSize:0,filterEfficiency:0},this.queryMetrics={activeQueries:0,loadingQueries:0,errorQueries:0,successQueries:0,avgFetchTime:0,totalFetchTime:0,totalFetches:0},this.queryStates.clear(),this.startTime=performance.now(),console.log(" [Monitor] Performance stats reset")}printStats(){const e=this.getStats();console.log(" Performance Monitor Stats:"),console.log(""),console.log(`
 Cache Metrics:`),console.log(`  Total Requests: ${e.cache.totalRequests}`),console.log(`  Hits: ${e.cache.hits}`),console.log(`  Misses: ${e.cache.misses}`),console.log(`  Hit Rate: ${e.cache.hitRate.toFixed(1)}%`),console.log(`  Avg Response Time: ${e.cache.avgResponseTime.toFixed(2)}ms`),console.log(`
 Deduplication Metrics:`),console.log(`  Total Requests: ${e.deduplication.totalRequests}`),console.log(`  Deduplicated: ${e.deduplication.deduplicated}`),console.log(`  Executed: ${e.deduplication.executed}`),console.log(`  Deduplication Rate: ${e.deduplication.deduplicationRate.toFixed(1)}%`),console.log(`
 Batcher Metrics:`),console.log(`  Total Events: ${e.batcher.totalEvents}`),console.log(`  Filtered: ${e.batcher.filtered}`),console.log(`  Batched: ${e.batcher.batched}`),console.log(`  Batch Count: ${e.batcher.batchCount}`),console.log(`  Avg Batch Size: ${e.batcher.avgBatchSize.toFixed(1)}`),console.log(`  Filter Efficiency: ${e.batcher.filterEfficiency.toFixed(1)}%`),console.log(`
 Query Metrics:`),console.log(`  Active Queries: ${e.query.activeQueries}`),console.log(`  Loading: ${e.query.loadingQueries}`),console.log(`  Success: ${e.query.successQueries}`),console.log(`  Error: ${e.query.errorQueries}`),console.log(`  Avg Fetch Time: ${e.query.avgFetchTime.toFixed(2)}ms`),console.log(`  Total Fetches: ${e.query.totalFetches}`),console.log(`
  Elapsed Time: ${e.elapsedTime.toFixed(2)}ms`),console.log(`
`)}};const b1=new NRe;class qE{supabase;rateLimiter=new Map;maxRequestsPerMinute=60;constructor(){this.supabase=ss}async rateLimitCheck(e){const n=Date.now(),r=`${e}-${Math.floor(n/6e4)}`,i=this.rateLimiter.get(r)||0;if(i>=this.maxRequestsPerMinute){const s={type:Pw.RATE_LIMIT_ERROR,message:"Rate limit exceeded. Please try again later.",operation:e,timestamp:new Date().toISOString()};throw Ig(s),new Error(s.message)}return this.rateLimiter.set(r,i+1),!0}validateInput(e,n,r){if(!n(e)){const i={type:Pw.VALIDATION_ERROR,message:"Invalid input provided",operation:r,timestamp:new Date().toISOString()};throw Ig(i),new Error(i.message)}return e}async handleApiCall(e,n){await this.rateLimitCheck(e);try{const{data:r,error:i}=await n();if(i){const s=i1(i,e);throw Ig(s),new Error(s.message)}if(!r){const s={type:Pw.NOT_FOUND_ERROR,message:`No data returned from ${e}`,operation:e,timestamp:new Date().toISOString()};throw Ig(s),new Error(s.message)}return r}catch(r){const i=i1(r,e);throw Ig(i),r}}async handleDeleteCall(e,n){await this.rateLimitCheck(e);try{const{error:r}=await n();if(r){const i=i1(r,e);throw Ig(i),new Error(i.message)}}catch(r){const i=i1(r,e);throw Ig(i),r}}async handleCachedApiCall(e,n,r,i={}){const s=OB.get(e);if(s){const l=Date.now()-s.timestamp,c=i.staleTime??300*1e3;if(l<c)return b1.recordCacheHit(e,0),console.log(` [Cache HIT] ${n} (${e})`),s.data}const a=fQ.isPending(e),o=performance.now();a||await this.rateLimitCheck(n);try{const l=await fQ.deduplicate(e,async()=>{const{data:u,error:h}=await r();if(h){const f=i1(h,n);throw Ig(f),new Error(f.message)}if(!u&&!i.allowNull){const f={type:Pw.NOT_FOUND_ERROR,message:`No data returned from ${n}`,operation:n,timestamp:new Date().toISOString()};throw Ig(f),new Error(f.message)}return u}),c=performance.now()-o;return a||(b1.recordCacheMiss(e,c),b1.recordFetchComplete(e,c,!0),OB.set(e,{data:l,timestamp:Date.now()})),b1.recordDeduplication(e,a),l}catch(l){const c=performance.now()-o;b1.recordFetchComplete(e,c,!1);const u=i1(l,n);throw Ig(u),l}}invalidateCache(e){for(const n of OB.keys())String(n).startsWith(e)&&(OB.delete(n),console.log(` [Cache INVALIDATE] ${n}`))}}class Lae extends qE{async fetchElements(e){return this.validateInput(e,r=>typeof r=="string"&&r.length>0,"fetchElements"),(await this.handleApiCall("fetchElements",async()=>await this.supabase.from("elements").select("*").eq("page_id",e).order("order_num",{ascending:!0}))).map(r=>({...r,customId:r.custom_id,dataBinding:r.data_binding}))}async createElement(e){this.validateInput(e,s=>s&&typeof s=="object","createElement");const n={...e,custom_id:e.customId,data_binding:e.dataBinding};delete n.customId,delete n.dataBinding;const r=await this.handleApiCall("createElement",async()=>await this.supabase.from("elements").insert([n]).select("*").single());if(!r)throw new Error("createElement returned null");const i=r;return{...i,customId:i.custom_id,dataBinding:i.data_binding}}async createMultipleElements(e){this.validateInput(e,i=>Array.isArray(i)&&i.length>0,"createMultipleElements");const n=e.map(i=>{const s={...i,custom_id:i.customId,data_binding:i.dataBinding};return delete s.customId,delete s.dataBinding,s}),r=await this.handleApiCall("createMultipleElements",async()=>await this.supabase.from("elements").insert(n).select("*"));return Array.isArray(r)?r.map(i=>({...i,customId:i.custom_id,dataBinding:i.data_binding})):[]}async updateElement(e,n){this.validateInput(e,a=>typeof a=="string"&&a.length>0,"updateElement"),this.validateInput(n,a=>a&&typeof a=="object","updateElement");const r={...n};n.customId!==void 0&&(r.custom_id=n.customId,delete r.customId),n.dataBinding!==void 0&&(r.data_binding=n.dataBinding,delete r.dataBinding);const i=await this.handleApiCall("updateElement",async()=>await this.supabase.from("elements").update(r).eq("id",e).select("*").single());if(!i)throw new Error("updateElement returned null");const s=i;return{...s,customId:s.custom_id,dataBinding:s.data_binding}}async updateElementProps(e,n){return this.validateInput(e,r=>typeof r=="string"&&r.length>0,"updateElementProps"),this.validateInput(n,r=>r&&typeof r=="object","updateElementProps"),this.handleApiCall("updateElementProps",async()=>await this.supabase.from("elements").update({props:n}).eq("id",e).select("*").single())}async deleteElement(e){this.validateInput(e,n=>typeof n=="string"&&n.length>0,"deleteElement"),await this.handleDeleteCall("deleteElement",async()=>await this.supabase.from("elements").delete().eq("id",e))}async deleteMultipleElements(e){this.validateInput(e,n=>Array.isArray(n)&&n.length>0,"deleteMultipleElements"),await this.handleDeleteCall("deleteMultipleElements",async()=>await this.supabase.from("elements").delete().in("id",e))}getElementsByPageId=this.fetchElements}const ud=new Lae;class Fae extends qE{async fetchProjects(){return this.handleCachedApiCall("projects:all","fetchProjects",async()=>await this.supabase.from("projects").select("*").order("created_at",{ascending:!1}),{staleTime:300*1e3})}async getProjectById(e){this.validateInput(e,r=>typeof r=="string"&&r.length>0,"getProjectById");const n=`project:id:${e}`;return this.handleCachedApiCall(n,"getProjectById",async()=>{const r=await this.supabase.from("projects").select("*").eq("id",e).single();return r.error?(console.warn("[ProjectsApi]    :",e),{data:null,error:null}):r},{staleTime:300*1e3})}async createProject(e){this.validateInput(e,r=>r&&typeof r.name=="string"&&r.name.trim().length>0&&typeof r.created_by=="string","createProject");const n=await this.handleApiCall("createProject",async()=>await this.supabase.from("projects").insert([e]).select("*").single());return this.invalidateCache("projects:all"),n}async updateProject(e,n){this.validateInput(e,i=>typeof i=="string"&&i.length>0,"updateProject"),this.validateInput(n,i=>i&&typeof i=="object","updateProject");const r=await this.handleApiCall("updateProject",async()=>await this.supabase.from("projects").update(n).eq("id",e).select("*").single());return this.invalidateCache("projects:all"),this.invalidateCache(`project:id:${e}`),r}async deleteProject(e){this.validateInput(e,n=>typeof n=="string"&&n.length>0,"deleteProject"),await this.handleDeleteCall("deleteProject",async()=>await this.supabase.from("projects").delete().eq("id",e)),this.invalidateCache("projects:all"),this.invalidateCache(`project:id:${e}`)}async getCurrentUser(){return this.handleCachedApiCall("user:current","getCurrentUser",async()=>{const{data:{session:n},error:r}=await this.supabase.auth.getSession();if(r)throw new Error(`Session error: ${r.message}`);if(!n?.user)throw new Error("No authenticated user found");return{data:{id:n.user.id},error:null}},{staleTime:300*1e3})}}const d0=new Fae;class jae extends qE{async getPagesByProjectId(e){this.validateInput(e,r=>typeof r=="string"&&r.length>0,"getPagesByProjectId");const n=`pages:project:${e}`;return this.handleCachedApiCall(n,"getPagesByProjectId",async()=>await this.supabase.from("pages").select("*").eq("project_id",e).order("order_num",{ascending:!0}),{staleTime:300*1e3})}async createPage(e){this.validateInput(e,r=>typeof r=="object"&&r!==null,"createPage");const n=await this.handleApiCall("createPage",async()=>await this.supabase.from("pages").insert([e]).select().single());return e.project_id&&this.invalidateCache(`pages:project:${e.project_id}`),n}async fetchPages(e){this.validateInput(e,r=>typeof r=="string"&&r.length>0,"fetchPages");const n=`pages:project:${e}`;return this.handleCachedApiCall(n,"fetchPages",async()=>await this.supabase.from("pages").select("*").eq("project_id",e).order("created_at",{ascending:!0}),{staleTime:300*1e3})}async updatePage(e,n){this.validateInput(e,i=>typeof i=="string"&&i.length>0,"updatePage"),this.validateInput(n,i=>i&&typeof i=="object","updatePage");const r=await this.handleApiCall("updatePage",async()=>await this.supabase.from("pages").update(n).eq("id",e).select("*").single());return r.project_id&&this.invalidateCache(`pages:project:${r.project_id}`),r}async deletePage(e){this.validateInput(e,r=>typeof r=="string"&&r.length>0,"deletePage");const{data:n}=await this.supabase.from("pages").select("project_id").eq("id",e).single();await this.handleDeleteCall("deletePage",async()=>await this.supabase.from("pages").delete().eq("id",e)),n?.project_id&&this.invalidateCache(`pages:project:${n.project_id}`)}}const wb=new jae,kn=t=>t[Math.floor(Math.random()*t.length)],Ur=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,pQ=()=>String(Math.floor(Math.random()*1e4)).padStart(4,"0"),rh=(t="")=>{const e=Ur(8,16),n="abcdefghijklmnopqrstuvwxyz0123456789";let r=t;for(let i=t.length;i<e;i++)r+=n.charAt(Math.floor(Math.random()*n.length));return r},YE=t=>{const e=new Date,n=new Date;n.setFullYear(e.getFullYear()-t);const r=Ur(n.getTime(),e.getTime());return new Date(r)},kL=(t,e)=>{const n=new Date(t.getTime());return n.setDate(n.getDate()+e),n},Rc=t=>t.toISOString(),Oae=["","","","","","","","","","","","","","",""],LRe=[" "," "," "," "," ","DevOps ","UI/UX "," "," ","QA "," "," "," "," "," "],FRe=["","","","","","","","","","","","","","","","","","","",""],jRe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ORe=[" "," "," "," "," "," "," ","V6 ","V8 "," 4"],zRe=["","LG","SDI","","","LS","","Bosch","Continental","Denso"],$Re=[{name:"  ",parts:["",""," "," "," "]},{name:" ",parts:[""," "," ",""," "]},{name:" ",parts:[" ",""," "," "," "]},{name:" ",parts:["",""," "," "," "]},{name:" ",parts:[" "," "," ","",""]},{name:" ",parts:[" "," ",""," ",""]},{name:" ",parts:[" "," "," "," "," "]},{name:" ",parts:["ECU"," ","","CAN  "," "]}],gQ=["","","","","","","","","",""],QRe=[" ","","","","","","",""],URe=["","","","","","",""],mQ=["","","",""],HRe=["IT ","","","","","",""],GRe=["","","","","","","","","",""],VRe=["","","",""],WRe=["private","internal","public"],KRe=["","","",""],qRe=["","","","",""],YRe=["Asia/Seoul","America/Los_Angeles","Europe/Berlin","Asia/Tokyo","Asia/Singapore"],XRe=["ko-KR","en-US","ja-JP","zh-CN","de-DE"],JRe=["","",""," "," "," "],ZRe=["pending","accepted","expired","revoked"],ePe=()=>[{name:" ",description:"    .",category:"user"},{name:" ",description:" , ,   .",category:"user"},{name:" ",description:"   .",category:"project"},{name:" ",description:"     .",category:"project"},{name:"  ",description:"     .",category:"organization"},{name:"  ",description:"    .",category:"billing"},{name:"  ",description:"    .",category:"security"},{name:"  ",description:"    .",category:"security"}].map(e=>({...e,id:rh("perm_")})),tPe=t=>{const e={viewUsers:t.find(r=>r.name===" ")?.id??"",manageUsers:t.find(r=>r.name===" ")?.id??"",viewProjects:t.find(r=>r.name===" ")?.id??"",editProjects:t.find(r=>r.name===" ")?.id??"",manageOrg:t.find(r=>r.name==="  ")?.id??"",viewBilling:t.find(r=>r.name==="  ")?.id??"",manageSecurity:t.find(r=>r.name==="  ")?.id??"",manageTemplates:t.find(r=>r.name==="  ")?.id??""};return[{name:" ",description:"    .",scope:"global",permissionKeys:["viewUsers","manageUsers","viewProjects","editProjects","manageOrg","viewBilling","manageSecurity","manageTemplates"]},{name:" ",description:"   .",scope:"global",permissionKeys:["viewUsers","manageUsers","viewProjects","editProjects","manageOrg"]},{name:" ",description:"    .",scope:"global",permissionKeys:["viewUsers","viewProjects","viewBilling"]},{name:" ",description:"     .",scope:"global",permissionKeys:["viewUsers","manageSecurity","manageTemplates"]},{name:" ",description:"    .",scope:"project",permissionKeys:["viewProjects","editProjects","viewUsers"]},{name:" ",description:"    .",scope:"project",permissionKeys:["viewProjects","viewUsers"]}].map(r=>({id:rh("role_"),name:r.name,description:r.description,scope:r.scope,permissionIds:r.permissionKeys.map(i=>e[i]).filter(Boolean)}))},nPe=t=>Array.from({length:t},(e,n)=>{const r=`${kn(Oae)} ${n+1}`,i=YE(5),s=["","",""],a=`org${String(n+1).padStart(2,"0")}.${kn(["example.com","workspace.kr","teamhub.io"])}`;return{id:rh("org_"),name:r,industry:kn(HRe),domain:a,plan:kn(s),createdAt:Rc(i)}}),rPe=(t,e=2,n=5)=>{const r=[];return t.forEach(i=>{const s=Ur(e,n);for(let a=0;a<s;a++){const o=kn(GRe);r.push({id:rh("dept_"),organizationId:i.id,name:o,description:`${i.name} ${o} `})}}),r},iPe=(t,e,n)=>{const r=[];for(let i=0;i<n;i++){const s=kn(t),a=e.filter(u=>u.organizationId===s.id),o=kn(a),l=YE(2),c=new Date(l.getTime());c.setMonth(c.getMonth()+Ur(1,12)),r.push({id:rh("proj_"),organizationId:s.id,departmentId:o.id,name:`${s.name}  ${i+1}`,status:kn(VRe),startDate:Rc(l),endDate:Rc(c),budget:Ur(2e4,2e5),clientName:`${kn(Oae)} `,visibility:kn(WRe)})}return r},sPe=()=>{const t=kn(FRe),e=kn(jRe);return`${t}${e}`},aPe=({count:t,organizations:e,departments:n,roles:r})=>{const i=r.filter(a=>a.scope==="global"),s=[];for(let a=1;a<=t;a++){const o=kn(e),l=n.filter(p=>p.organizationId===o.id),c=l.length>0?kn(l):kn(n),u=kn(i),h=YE(3),f=new Date(h.getTime());f.setMonth(f.getMonth()+Ur(0,18)),s.push({num:a,id:rh("user_"),name:sPe(),email:`datauser${a}@example.com`,address:`   ${a}`,phone:`010-${pQ()}-${pQ()}`,company:o.name,role:kn(LRe),organizationId:o.id,departmentId:c.id,roleId:u.id,status:kn(KRe),jobLevel:kn(qRe),timezone:kn(YRe),locale:kn(XRe),createdAt:Rc(h),lastLoginAt:Rc(f),projectMembershipIds:[]})}return s},oPe=({users:t,projects:e,roles:n})=>{const r=n.filter(a=>a.scope==="project"),i=[],s=new Map(t.map(a=>[a.id,a]));return e.forEach(a=>{const o=t.filter(p=>p.organizationId===a.organizationId),l=o.length>=3?o:t,c=l.length>1?Math.min(3,l.length):1,u=Math.max(c,Math.min(12,l.length)),h=Ur(c,u),f=new Set;for(;f.size<h;)f.add(kn(l));f.forEach(p=>{const m=YE(2),v=new Date(m.getTime());v.setMonth(v.getMonth()+Ur(0,12));const A={id:rh("mbr_"),projectId:a.id,userId:p.id,roleId:kn(r).id,allocation:Ur(20,100),billable:Math.random()>.3,joinedAt:Rc(m),lastActiveAt:Rc(v)};i.push(A),s.get(p.id)?.projectMembershipIds.push(A.id)})}),i},lPe=({users:t,projects:e,organizations:n},r=500)=>{const i=[];for(let s=0;s<r;s++){const a=kn(t),o=n.find(h=>h.id===a.organizationId)??kn(n),l=kn(["user","project","organization","department","permission","role"]),c=(()=>{switch(l){case"user":return kn(t).id;case"project":return kn(e).id;case"organization":return o.id;case"department":return kn(e).departmentId;case"permission":return`perm_ref_${Ur(100,999)}`;case"role":return`role_ref_${Ur(100,999)}`;default:return rh("entity_")}})(),u=YE(1);i.push({id:rh("log_"),actorUserId:a.id,organizationId:o.id,entityType:l,entityId:c,action:kn(JRe),description:`${a.name} ${l}   .`,timestamp:Rc(u),ipAddress:`192.168.${Ur(0,255)}.${Ur(0,255)}`})}return i},cPe=({organizations:t,roles:e,users:n},r=200)=>{const i=e.filter(a=>a.scope==="global"),s=[];for(let a=0;a<r;a++){const o=kn(t),l=n.find(h=>h.organizationId===o.id)??kn(n),c=YE(1),u=new Date(c.getTime());u.setDate(u.getDate()+Ur(7,30)),s.push({id:rh("invite_"),organizationId:o.id,email:`invitee${a}@example.com`,roleId:kn(i).id,inviterUserId:l.id,status:kn(ZRe),createdAt:Rc(c),expiresAt:Rc(u)})}return s},uPe=(t,e)=>{const n=[];return t.forEach(r=>{const i=Ur(1,3);for(let s=0;s<i;s++){const a=kn(ORe),o=new Date(r.startDate),l=kL(o,Ur(1,100));let c;r.status===""?c=Math.random()>.3?"":"":r.status===""?c=kn(["","",""]):c="";const u=e.filter(f=>f.projectMembershipIds.length>0&&f.organizationId===r.organizationId),h=u.length>0?kn(u):kn(e);n.push({id:rh("eng_"),projectId:r.id,name:`${a} ${String.fromCharCode(65+s)}`,code:`ENG-${Ur(1e3,9999)}-${String.fromCharCode(65+s)}`,version:`v${Ur(1,3)}.${Ur(0,9)}.${Ur(0,9)}`,status:c,manufacturer:kn(zRe),specifications:{power:`${Ur(100,500)}kW`,weight:`${Ur(50,300)}kg`,dimensions:`${Ur(400,800)}x${Ur(300,600)}x${Ur(400,700)}mm`},createdAt:Rc(o),updatedAt:Rc(l),createdBy:h.id})}}),n},zae=(t,e,n,r,i,s)=>{const a=[],{engineId:o,parentId:l,parentName:c,level:u,orderIndex:h,createdAt:f,availableParts:p}=t;if(e>=n||Math.random()>s){const D=p.length>0?kn(p):`${c}  ${h+1}`,T={id:rh("comp_"),engineId:o,parentId:l,name:D,code:`PRT-${Ur(1e4,99999)}`,type:"part",level:u,orderIndex:h,quantity:Ur(1,10),unit:kn(["EA","SET","M","KG","L"]),supplier:kn(gQ),cost:Ur(5e3,5e5),leadTime:Ur(7,30),status:kn(mQ),specifications:{material:kn(QRe),color:kn(URe)},notes:Math.random()>.7?"  ":void 0,createdAt:Rc(f),updatedAt:Rc(kL(f,Ur(1,60)))};return a.push(T),a}const v=l===null?c:`${c}  ${h+1}`,A={id:rh("comp_"),engineId:o,parentId:l,name:v,code:u===0?`ASM-${Ur(100,999)}-${h+1}`:`SUB-${Ur(100,999)}-${u}-${h+1}`,type:"assembly",level:u,orderIndex:h,quantity:l===null?1:Ur(1,2),unit:"SET",supplier:kn(gQ),cost:Ur(1e5,5e6)*(1/(u+1)),leadTime:Ur(20,90)-u*5,status:kn(mQ),createdAt:Rc(f),updatedAt:Rc(kL(f,Ur(1,60)))};a.push(A);const x=Math.max(.3,1-e*.15),E=Math.max(1,Math.floor(r*x)),w=Math.max(E,Math.floor(i*x)),B=Ur(E,w);for(let D=0;D<B;D++){const T=zae({engineId:o,parentId:A.id,parentName:v,level:u+1,orderIndex:D,createdAt:f,availableParts:p},e+1,n,r,i,s*.7);a.push(...T)}return a},dPe=(t,e={})=>{const{maxDepth:n=5,minChildrenPerNode:r=2,maxChildrenPerNode:i=4,topLevelAssemblies:s=[4,7],assemblyProbability:a=.8}=e,o=[];return t.forEach(l=>{const c=new Date(l.createdAt),u=Ur(s[0],s[1]),h=[],f=[...$Re];for(let p=0;p<u&&f.length>0;p++){const m=Ur(0,f.length-1);h.push(f.splice(m,1)[0])}h.forEach((p,m)=>{const v=zae({engineId:l.id,parentId:null,parentName:p.name,level:0,orderIndex:m,createdAt:c,availableParts:p.parts},0,n,r,i,a);o.push(...v)})}),o},hPe=(t,e,n)=>{const r=new Map;t.forEach(i=>{r.set(i.id,n.filter(s=>s.departmentId===i.id))}),t.forEach(i=>{const s=r.get(i.id)??[];i.managerUserId=s.length>0?kn(s).id:void 0}),e.forEach(i=>{const s=n.filter(a=>a.organizationId===i.id);i.primaryContactUserId=s.length>0?kn(s).id:void 0})},fPe=t=>{console.time(" Mock  ");const e={organizationCount:10,projectCount:60,userCount:1e4,bomMaxDepth:5,bomMinChildrenPerNode:2,bomMaxChildrenPerNode:4,bomTopLevelAssemblies:[4,7],bomAssemblyProbability:.8,...t};try{const n=ePe(),r=tPe(n),i=nPe(e.organizationCount),s=rPe(i,3,6),a=iPe(i,s,e.projectCount),o=aPe({count:e.userCount,organizations:i,departments:s,roles:r}),l=oPe({users:o,projects:a,roles:r}),c=lPe({users:o,projects:a,organizations:i}),u=cPe({organizations:i,roles:r,users:o}),h=uPe(a,o),f=dPe(h,{maxDepth:e.bomMaxDepth,minChildrenPerNode:e.bomMinChildrenPerNode,maxChildrenPerNode:e.bomMaxChildrenPerNode,topLevelAssemblies:e.bomTopLevelAssemblies,assemblyProbability:e.bomAssemblyProbability});return hPe(s,i,o),{permissions:n,roles:r,organizations:i,departments:s,projects:a,users:o,projectMemberships:l,auditLogs:c,invitations:u,engines:h,components:f}}catch(n){throw console.error(" Mock   :",n),console.timeEnd(" Mock  "),n instanceof Error&&(console.error(" :",n.message),console.error(" :",n.stack)),new Error(`Mock     : ${n}`)}},bf=fPe(),Kh=bf.users,NL=bf.organizations,LL=bf.departments,XT=bf.projects,FL=bf.permissions,jL=bf.roles,OL=bf.projectMemberships,zL=bf.auditLogs,$L=bf.invitations,hE=bf.engines,_b=bf.components,pPe=()=>Kh.slice(0,100).map((t,e)=>({id:e+1,name:t.name,username:t.name.replace(/\s+/g,"").toLowerCase()+(e+1),email:t.email,address:{street:t.address.split(" ")[0]+" "+(t.address.split(" ")[1]||""),suite:`Apt. ${Ur(100,999)}`,city:t.address.includes("")?t.address.split(" ")[0]:"",zipcode:`${Ur(1e4,99999)}`,geo:{lat:(37.5+Math.random()*.5).toFixed(4),lng:(126.9+Math.random()*.5).toFixed(4)}},phone:t.phone,website:`${t.name.toLowerCase().replace(/\s+/g,"")}.${kn(["com","net","org","io"])}`,company:{name:t.company,catchPhrase:`${kn(["","","",""])} ${kn(["","","",""])}`,bs:`${kn(["e-commerce","cloud computing","AI-driven","blockchain"])} ${kn(["solutions","platforms","services","infrastructure"])}`}})),gPe=()=>{const t=["  ","  ","  ","  ","  ","  "," ","  "];return Array.from({length:100},(e,n)=>({id:n+1,userId:n%10+1,title:`${kn(t)} - ${n+1}`,body:` ${n+1} . Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
    Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
    Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.`}))},mPe=()=>{const t=[" ",""," "," "," "];return Array.from({length:500},(e,n)=>({id:n+1,postId:n%100+1,name:`${kn(t)} -  ${n+1}`,email:`commenter${n+1}@example.com`,body:`${kn(t)}.  ${n+1} . 
    Lorem ipsum dolor sit amet, consectetur adipiscing elit.`}))},APe=()=>{const t=[" "," "," "," "," "];return Array.from({length:100},(e,n)=>({id:n+1,userId:n%10+1,title:`${kn(t)} ${Math.floor(n/10)+1}`}))},yPe=()=>{const t=["92c952","771796","d32776","f66b97","24f355","e8a838"];return Array.from({length:300},(e,n)=>({id:n+1,albumId:n%100+1,title:` ${n+1}`,url:`https://via.placeholder.com/600/${kn(t)}`,thumbnailUrl:`https://via.placeholder.com/150/${kn(t)}`}))},vPe=()=>{const t=[" "," "," "," "," "," "," "];return Array.from({length:200},(e,n)=>({id:n+1,userId:n%10+1,title:`${kn(t)} - ${n+1}`,completed:Math.random()>.5}))},QL=pPe(),UL=gPe(),HL=mPe(),GL=APe(),VL=yPe(),WL=vPe(),KL=(t,e)=>{const n=e.filter(a=>a.engineId===t),r=new Map(n.map(a=>[a.id,{...a,children:[]}])),i=[];n.forEach(a=>{const o=r.get(a.id);if(a.parentId===null)i.push(o);else{const l=r.get(a.parentId);l&&l.children.push(o)}});const s=a=>{a.sort((o,l)=>o.orderIndex-l.orderIndex),a.forEach(o=>{o.children.length>0&&s(o.children)})};return s(i),i},qL=(t,e,n)=>e.filter(i=>i.projectId===t).map(i=>{const s=n.filter(u=>u.engineId===i.id),a=s.filter(u=>u.type==="assembly"&&u.level===0),o=s.filter(u=>u.type==="part"),l=s.reduce((u,h)=>u+h.cost*h.quantity,0),c=Math.max(...s.map(u=>u.level),0);return{engine:i,assembliesCount:a.length,totalPartsCount:o.length,totalComponentsCount:s.length,estimatedTotalCost:l,maxTreeDepth:c+1}}),xPe=async(t,e)=>(console.log(" Fetching mock data from path:",t,"with params:",e),await new Promise(n=>setTimeout(n,300)),t==="/countries"||t==="/api/countries"?bPe(e):t==="/cities"||t==="/api/cities"?CPe(e):t==="/categories"||t==="/api/categories"?EPe(e):t==="/products"||t==="/api/products"?SPe(e):t==="/status"||t==="/api/status"?wPe(e):t==="/priorities"||t==="/api/priorities"?_Pe(e):t==="/tags"||t==="/api/tags"?IPe(e):t==="/languages"||t==="/api/languages"?BPe(e):t==="/currencies"||t==="/api/currencies"?TPe(e):t==="/timezones"||t==="/api/timezones"?MPe(e):t==="/permissions"||t==="/api/permissions"?DPe(e):t==="/roles"||t==="/api/roles"?RPe(e):t==="/departments"||t==="/api/departments"?PPe(e):t==="/organizations"||t==="/api/organizations"?kPe(e):t==="/projects"||t==="/api/projects"?NPe(e):t==="/project-memberships"||t==="/api/project-memberships"?LPe(e):t==="/audit-logs"||t==="/api/audit-logs"?FPe(e):t==="/invitations"||t==="/api/invitations"?jPe(e):t==="/engines"||t==="/api/engines"?OPe(e):t==="/components"||t==="/api/components"?zPe(e):t==="/component-tree"||t==="/api/component-tree"?$Pe(e):t==="/engine-summary"||t==="/api/engine-summary"?QPe(e):UPe(t,e)),bPe=t=>{const e=[{id:"kr",name:"",code:"KR",continent:""},{id:"us",name:"",code:"US",continent:""},{id:"jp",name:"",code:"JP",continent:""},{id:"cn",name:"",code:"CN",continent:""},{id:"uk",name:"",code:"GB",continent:""},{id:"fr",name:"",code:"FR",continent:""},{id:"de",name:"",code:"DE",continent:""},{id:"ca",name:"",code:"CA",continent:""},{id:"au",name:"",code:"AU",continent:""},{id:"sg",name:"",code:"SG",continent:""}];return console.log(` /countries : ${e.length}  `),Is(e,t)},CPe=t=>{const e=[{id:"seoul",name:"",country:"",population:9720846},{id:"busan",name:"",country:"",population:3413841},{id:"tokyo",name:"",country:"",population:1396e4},{id:"newyork",name:"",country:"",population:8336817},{id:"london",name:"",country:"",population:8982e3},{id:"paris",name:"",country:"",population:2165423},{id:"beijing",name:"",country:"",population:2154e4},{id:"shanghai",name:"",country:"",population:2428e4},{id:"singapore",name:"",country:"",population:5685807},{id:"sydney",name:"",country:"",population:5312163}];return console.log(` /cities : ${e.length}  `),Is(e,t)},EPe=t=>{const e=[{id:"electronics",name:"",icon:"",description:",  "},{id:"fashion",name:"",icon:"",description:", "},{id:"food",name:"",icon:"",description:", "},{id:"books",name:"",icon:"",description:", "},{id:"sports",name:"",icon:"",description:""},{id:"beauty",name:"",icon:"",description:", "},{id:"home",name:"/",icon:"",description:", "},{id:"toy",name:"",icon:"",description:", "}];return console.log(` /categories : ${e.length}  `),Is(e,t)},SPe=t=>{const e=[{id:"p1",name:'MacBook Pro 16"',price:329e4,category:"",stock:15},{id:"p2",name:"iPhone 15 Pro",price:155e4,category:"",stock:42},{id:"p3",name:"AirPods Pro",price:329e3,category:"",stock:78},{id:"p4",name:"Nike Air Max",price:159e3,category:"",stock:24},{id:"p5",name:"Adidas Ultraboost",price:189e3,category:"",stock:31},{id:"p6",name:"Sony WH-1000XM5",price:449e3,category:"",stock:19},{id:"p7",name:"iPad Air",price:929e3,category:"",stock:28},{id:"p8",name:"Samsung Galaxy S24",price:119e4,category:"",stock:35}];return console.log(` /products : ${e.length}  `),Is(e,t)},wPe=t=>{const e=[{id:"todo",name:" ",label:" ",color:"#9CA3AF"},{id:"in-progress",name:" ",label:" ",color:"#3B82F6"},{id:"review",name:"",label:"",color:"#F59E0B"},{id:"done",name:"",label:"",color:"#10B981"},{id:"blocked",name:"",label:"",color:"#EF4444"}];return console.log(` /status : ${e.length}  `),Is(e,t)},_Pe=t=>{const e=[{id:"low",name:"",label:"",icon:"",level:1},{id:"medium",name:"",label:"",icon:"",level:2},{id:"high",name:"",label:"",icon:"",level:3},{id:"urgent",name:"",label:"",icon:"",level:4}];return console.log(` /priorities : ${e.length}  `),Is(e,t)},IPe=t=>{const e=[{id:"frontend",name:"",label:"",color:"#3B82F6"},{id:"backend",name:"",label:"",color:"#10B981"},{id:"design",name:"",label:"",color:"#F59E0B"},{id:"documentation",name:"",label:"",color:"#8B5CF6"},{id:"bug",name:"",label:"",color:"#EF4444"},{id:"feature",name:"",label:"",color:"#06B6D4"},{id:"enhancement",name:"",label:"",color:"#84CC16"},{id:"testing",name:"",label:"",color:"#EC4899"}];return console.log(` /tags : ${e.length}  `),Is(e,t)},BPe=t=>{const e=[{id:"ko",name:"",label:"",nativeName:"",code:"ko-KR"},{id:"en",name:"",label:"",nativeName:"English",code:"en-US"},{id:"ja",name:"",label:"",nativeName:"",code:"ja-JP"},{id:"zh",name:"",label:"",nativeName:"",code:"zh-CN"},{id:"es",name:"",label:"",nativeName:"Espaol",code:"es-ES"},{id:"fr",name:"",label:"",nativeName:"Franais",code:"fr-FR"},{id:"de",name:"",label:"",nativeName:"Deutsch",code:"de-DE"},{id:"ru",name:"",label:"",nativeName:"",code:"ru-RU"}];return console.log(` /languages : ${e.length}  `),Is(e,t)},TPe=t=>{const e=[{id:"krw",name:" ",label:" ()",code:"KRW",symbol:""},{id:"usd",name:" ",label:" ($)",code:"USD",symbol:"$"},{id:"jpy",name:" ",label:" ()",code:"JPY",symbol:""},{id:"eur",name:"",label:" ()",code:"EUR",symbol:""},{id:"gbp",name:" ",label:" ()",code:"GBP",symbol:""},{id:"cny",name:" ",label:" ()",code:"CNY",symbol:""},{id:"aud",name:" ",label:"  (A$)",code:"AUD",symbol:"A$"},{id:"cad",name:" ",label:"  (C$)",code:"CAD",symbol:"C$"}];return console.log(` /currencies : ${e.length}  `),Is(e,t)},MPe=t=>{const e=[{id:"asia-seoul",name:"",label:" (UTC+9)",timezone:"Asia/Seoul",offset:"+09:00"},{id:"asia-tokyo",name:"",label:" (UTC+9)",timezone:"Asia/Tokyo",offset:"+09:00"},{id:"america-newyork",name:"",label:" (UTC-5)",timezone:"America/New_York",offset:"-05:00"},{id:"america-losangeles",name:"",label:" (UTC-8)",timezone:"America/Los_Angeles",offset:"-08:00"},{id:"europe-london",name:"",label:" (UTC+0)",timezone:"Europe/London",offset:"+00:00"},{id:"europe-paris",name:"",label:" (UTC+1)",timezone:"Europe/Paris",offset:"+01:00"},{id:"australia-sydney",name:"",label:" (UTC+10)",timezone:"Australia/Sydney",offset:"+10:00"},{id:"asia-dubai",name:"",label:" (UTC+4)",timezone:"Asia/Dubai",offset:"+04:00"}];return console.log(` /timezones : ${e.length}  `),Is(e,t)},DPe=t=>(console.log(` /permissions : ${FL.length} `),Is(FL,t)),RPe=t=>(console.log(` /roles : ${jL.length} `),Is(jL,t)),PPe=t=>(console.log(` /departments : ${LL.length} `),Is(LL,t)),kPe=t=>(console.log(` /organizations : ${NL.length} `),Is(NL,t)),NPe=t=>(console.log(` /projects : ${XT.length} `),Is(XT,t)),LPe=t=>(console.log(` /project-memberships : ${OL.length} `),Is(OL,t)),FPe=t=>(console.log(` /audit-logs : ${zL.length} `),Is(zL,t)),jPe=t=>(console.log(` /invitations : ${$L.length} `),Is($L,t)),OPe=t=>(console.log(` /engines : ${hE.length} `),Is(hE,t)),zPe=t=>(console.log(` /components : ${_b.length} `),Is(_b,t)),$Pe=t=>{const e=t?.engineId;if(e){const r=KL(e,_b);return console.log(` /component-tree : Engine ${e}   `),r}const n=hE[0];if(n){const r=KL(n.id,_b);return console.log(` /component-tree :  Engine ${n.id}   `),r}return[]},QPe=t=>{const e=t?.projectId;if(e){const r=qL(e,hE,_b);return console.log(` /engine-summary : Project ${e}   `),r}const n=XT[0];if(n){const r=qL(n.id,hE,_b);return console.log(` /engine-summary :  Project ${n.id}   `),r}return[]},UPe=(t,e)=>{let n=Kh;if(t==="/users"||t==="/api/users")return console.log(` /users : JSONPlaceholder   ${QL.length} `),Is(QL,e);if(t==="/cms-users"||t==="/api/cms-users")n=Kh.filter(r=>r.role.includes("")||r.role.includes("")||r.role.includes("")),console.log(` /cms-users : CMS   ${n.length} `);else if(t==="/admins"||t==="/api/admins"||t==="/api/users/admins")n=Kh.filter(r=>r.role.includes("")||r.role.includes("")||r.role.includes("")),console.log(` /admins :   ${n.length} `);else if(t==="/companies"||t==="/api/companies")n=[...new Set(Kh.map(i=>i.company))].map((i,s)=>({id:s+1,name:i,company:i,employeeCount:Kh.filter(a=>a.company===i).length})),console.log(` /companies :   ${n.length} `);else if(t==="/company-employees"||t==="/api/company-employees"){const r=["","",""];n=Kh.filter(i=>r.includes(i.company)),console.log(` /company-employees :    ${n.length} `)}else if(t==="/developers"||t==="/api/developers"||t==="/api/users/developers")n=Kh.filter(r=>r.role.includes("")),console.log(` /developers :   ${n.length} `);else if(t==="/managers"||t==="/api/managers"||t==="/api/users/managers")n=Kh.filter(r=>r.role.includes("")),console.log(` /managers :   ${n.length} `);else if(t==="/products"||t==="/api/products")n=Kh.filter(r=>r.role.includes("")||r.role.includes("")||r.role.includes("")),console.log(` /products :    ${n.length} `);else{if(t==="/posts"||t==="/api/posts")return console.log(` /posts :   ${UL.length} `),Is(UL,e);if(t==="/comments"||t==="/api/comments")return console.log(` /comments :   ${HL.length} `),Is(HL,e);if(t==="/albums"||t==="/api/albums")return console.log(` /albums :   ${GL.length} `),Is(GL,e);if(t==="/photos"||t==="/api/photos")return console.log(` /photos :   ${VL.length} `),Is(VL,e);if(t==="/todos"||t==="/api/todos")return console.log(` /todos :   ${WL.length} `),Is(WL,e);console.log(`       :   ${n.length} `)}if(e&&typeof e.search=="string"){const r=e.search.toLowerCase();n=Kh.filter(i=>i.name.toLowerCase().includes(r)||i.email.toLowerCase().includes(r)||i.company.toLowerCase().includes(r)||i.role.toLowerCase().includes(r))}return Is(n,e)},Is=(t,e)=>{if(e&&e.getAll===!0)return console.log(` Returning all data: ${t.length} items`),t;if(e&&typeof e.page=="number"&&typeof e.limit=="number"){const n=e.page,r=e.limit,i=(n-1)*r,s=i+r,a=t.length,o=Math.min(s,a)-i;console.log(` Pagination: page ${n}, limit ${r}, startIndex ${i}, endIndex ${s}`),console.log(` Total data: ${a}, returning: ${o} items`);const l=t.slice(i,s);return Object.assign(l,{__meta:{totalItems:a,currentPage:n,itemsPerPage:r,hasNextPage:s<a,startIndex:i,endIndex:s}}),l}return console.log(` Returning all data (default): ${t.length} items`),t},kw={MOCK_DATA:xPe},$ae=Object.freeze(Object.defineProperty({__proto__:null,BaseApiService:qE,ElementsApiService:Lae,PagesApiService:jae,ProjectsApiService:Fae,apiConfig:kw,buildComponentTree:KL,cmsMockData:bf,elementsApi:ud,getProjectEnginesSummary:qL,largeMockData:Kh,mockAlbums:GL,mockAuditLogs:zL,mockComments:HL,mockComponents:_b,mockDepartments:LL,mockEngines:hE,mockInvitations:$L,mockJsonPlaceholderUsers:QL,mockOrganizations:NL,mockPermissions:FL,mockPhotos:VL,mockPosts:UL,mockProjectMemberships:OL,mockProjects:XT,mockRoles:jL,mockTodos:WL,pagesApi:wb,projectsApi:d0},Symbol.toStringTag,{value:"Module"}));class js{static generateId(){return crypto.randomUUID()}static async delay(e=0){return new Promise(n=>setTimeout(n,e))}static findBodyElement(e,n){return e.find(i=>i.page_id===n&&i.tag==="body")?.id||null}static findLayoutBodyElement(e,n){return e.find(i=>i.layout_id===n&&i.tag==="body")?.id||null}static findBodyByContext(e,n,r){return r?this.findLayoutBodyElement(e,r):n?this.findBodyElement(e,n):null}static migrateOrphanElementsToBody(e,n){const r=e.find(o=>o.page_id===n&&o.tag==="body");if(!r)return console.warn(` Body    : pageId=${n}`),{elements:e,updatedElements:[]};const i=e.filter(o=>o.page_id===n&&o.parent_id===null&&o.tag!=="body");if(i.length===0)return{elements:e,updatedElements:[]};console.log(` ${i.length}   body :`,{pageId:n,bodyId:r.id,orphanIds:i.map(o=>o.id)});const s=i.map(o=>({...o,parent_id:r.id}));return{elements:e.map(o=>s.find(c=>c.id===o.id)||o),updatedElements:s}}static getDescendants(e,n){const r=e.filter(s=>s.parent_id===n),i=[...r];return r.forEach(s=>{i.push(...this.getDescendants(e,s.id))}),i}static isAncestor(e,n,r){let i=e.find(s=>s.id===r);for(;i;){if(i.parent_id===n)return!0;i=e.find(s=>s.id===i.parent_id)}return!1}static getElementPath(e,n){const r=[];let i=e.find(s=>s.id===n);for(;i;)r.unshift(i),i=e.find(s=>s.id===i.parent_id);return r}}const HPe=Object.freeze(Object.defineProperty({__proto__:null,ElementUtils:js},Symbol.toStringTag,{value:"Module"}));function GPe(t,e={}){const{enabled:n=!0,initialData:r=[],retryCount:i=0,retryDelay:s=1e3}=e,a=Eie({initialSelectedKeys:[],async load({signal:o}){if(!n)return{items:r};let l=null,c=0;for(;c<=i;)try{const u=await t({signal:o}),h=Array.isArray(u)?u:[u];return console.log(" useAsyncQuery   :",h.length,"items"),{items:h}}catch(u){if(l=u,l.name==="AbortError")return console.log(" useAsyncQuery  "),{items:r};c++,c<=i&&(console.warn(` useAsyncQuery   (${c}/${i+1}), ${s}ms  ...`),await new Promise(h=>setTimeout(h,s)))}throw console.error(` useAsyncQuery   (${c} ):`,l),l},getKey:o=>String(o.id||Math.random())});return{data:a.items,isLoading:a.isLoading,error:a.error||null,reload:a.reload}}function rf(t,e={}){const{onSuccess:n,onError:r,onSettled:i}=e,[s,a]=C.useState(null),[o,l]=C.useState(!1),[c,u]=C.useState(null),h=C.useCallback(async p=>{l(!0),u(null);try{const m=await t(p);return a(m),console.log(" useAsyncMutation "),n&&await n(m,p),i&&await i(m,null,p),m}catch(m){const v=m;throw u(v),console.error(" useAsyncMutation :",v),r&&await r(v,p),i&&await i(void 0,v,p),v}finally{l(!1)}},[t,n,r,i]),f=C.useCallback(()=>{a(null),u(null),l(!1)},[]);return{data:s,isLoading:o,isSuccess:s!==null&&c===null,isError:c!==null,error:c,execute:h,reset:f}}function VPe(t,e){const n=new Map;console.log("[ProjectMerger]  :",{localCount:t.length,cloudCount:e.length});for(const i of t){const s={id:i.id,name:i.name,storage:{local:!0,cloud:!1},sync:{status:"local-only",localUpdatedAt:new Date(i.updated_at)},createdAt:new Date(i.created_at),lastModified:new Date(i.updated_at),localProject:i};n.set(i.id,s)}for(const i of e){const s=n.get(i.id);if(s){s.storage.cloud=!0,s.sync.cloudUpdatedAt=new Date(i.updated_at),s.cloudProject=i;const a=s.sync.localUpdatedAt.getTime(),o=s.sync.cloudUpdatedAt.getTime();Math.abs(a-o)<1e3?s.sync.status="synced":a>o?(s.sync.status="conflict",console.log("[ProjectMerger]   ( ):",{projectId:i.id,localTime:s.sync.localUpdatedAt,cloudTime:s.sync.cloudUpdatedAt})):(s.sync.status="conflict",console.log("[ProjectMerger]   ( ):",{projectId:i.id,localTime:s.sync.localUpdatedAt,cloudTime:s.sync.cloudUpdatedAt})),s.lastModified=new Date(Math.max(a,o))}else{const a={id:i.id,name:i.name,storage:{local:!1,cloud:!0},sync:{status:"cloud-only",cloudUpdatedAt:new Date(i.updated_at)},createdAt:new Date(i.created_at),lastModified:new Date(i.updated_at),cloudProject:i};n.set(i.id,a)}}const r=Array.from(n.values());return console.log("[ProjectMerger]  :",{totalCount:r.length,localOnly:r.filter(i=>i.sync.status==="local-only").length,cloudOnly:r.filter(i=>i.sync.status==="cloud-only").length,synced:r.filter(i=>i.sync.status==="synced").length,conflict:r.filter(i=>i.sync.status==="conflict").length}),r.sort((i,s)=>s.lastModified.getTime()-i.lastModified.getTime())}function WPe(t){const{local:e,cloud:n}=t.storage;return e&&n?t.sync.status==="conflict"?{icon:"",label:"Needs Sync",className:"badge-conflict"}:{icon:"",label:"Synced",className:"badge-synced"}:e&&!n?{icon:"",label:"Local Only",className:"badge-local"}:!e&&n?{icon:"",label:"Cloud Only",className:"badge-cloud"}:{icon:"",label:"Unknown",className:"badge-unknown"}}function KPe(t){const{local:e,cloud:n}=t.storage;return{canSync:e&&(!n||t.sync.status==="conflict"),canDownload:n&&!e,canOpen:e||n,canExport:e}}function AQ(t){const n=Date.now()-t.getTime(),r=Math.floor(n/1e3),i=Math.floor(r/60),s=Math.floor(i/60),a=Math.floor(s/24),o=Math.floor(a/30),l=Math.floor(a/365);return r<60?" ":i<60?`${i} `:s<24?`${s} `:a<30?`${a} `:o<12?`${o} `:`${l} `}async function qPe(t){console.log("[ProjectSync]  :",t);try{const e=await On(),n=await e.projects.getById(t);if(!n)throw new Error(`   : ${t}`);console.log("[ProjectSync]   :",n.name);try{await d0.updateProject(n.id,{name:n.name,updated_at:new Date().toISOString()}),console.log("[ProjectSync]    ")}catch{console.log("[ProjectSync]   ,  "),await d0.createProject({id:n.id,name:n.name,created_by:n.created_by||""})}const r=await e.pages.getByProject(t);console.log("[ProjectSync]  :",r.length);for(const i of r){const s={id:i.id,project_id:i.project_id,title:i.title,slug:i.slug,parent_id:i.parent_id,order_num:i.order_num,created_at:i.created_at,updated_at:new Date().toISOString()};try{await wb.updatePage(i.id,s)}catch{await wb.createPage(s)}const a=await e.elements.getByPage(i.id);if(console.log(`[ProjectSync]  "${i.title}" :`,a.length),a.length>0){const o=await ud.getElementsByPageId(i.id);o.length>0&&await ud.deleteMultipleElements(o.map(l=>l.id)),await ud.createMultipleElements(a.map(l=>({...l,updated_at:new Date().toISOString()})))}}await e.projects.update(t,{updated_at:new Date().toISOString()}),console.log(" [ProjectSync]  :",t)}catch(e){throw console.error(" [ProjectSync]  :",e),e}}async function YPe(t){console.log("[ProjectSync]  :",t);try{const e=await On(),n=await d0.getProjectById(t);if(!n)throw new Error(`   : ${t}`);console.log("[ProjectSync]   :",n.name),await e.projects.insert(n),console.log("[ProjectSync]    ");const r=await wb.getPagesByProjectId(t);console.log("[ProjectSync]  :",r.length);for(const i of r){const s={id:i.id,project_id:i.project_id,title:i.title,slug:i.slug,order_num:i.order_num,created_at:i.created_at,updated_at:i.updated_at};await e.pages.insert(s);const a=await ud.getElementsByPageId(i.id);console.log(`[ProjectSync]  "${i.title}" :`,a.length),a.length>0&&await e.elements.insertMany(a)}console.log(" [ProjectSync]  :",t)}catch(e){throw console.error(" [ProjectSync]  :",e),e}}const XPe="xstudio-history",JPe=1,Al="history-entries",Hu="page-meta",ZPe=90;class eke{db=null;dbPromise=null;async init(){if(!this.db){if(this.dbPromise){await this.dbPromise;return}this.dbPromise=this.openDatabase(),this.db=await this.dbPromise,this.cleanupOldEntries().catch(console.error)}}openDatabase(){return new Promise((e,n)=>{const r=globalThis.indexedDB;if(!r){n(new Error("IndexedDB is not available in this environment"));return}const i=r.open(XPe,JPe);i.onerror=()=>{console.error(" [HistoryIDB] Failed to open database:",i.error),n(i.error)},i.onsuccess=()=>{e(i.result)},i.onupgradeneeded=s=>{const a=s.target.result;if(!a.objectStoreNames.contains(Al)){const o=a.createObjectStore(Al,{keyPath:"id"});o.createIndex("pageId","pageId",{unique:!1}),o.createIndex("createdAt","createdAt",{unique:!1}),o.createIndex("pageId_createdAt",["pageId","createdAt"],{unique:!1})}a.objectStoreNames.contains(Hu)||a.createObjectStore(Hu,{keyPath:"pageId"})}})}async getDB(){return this.db||await this.init(),this.db}async saveEntry(e,n){try{const r=await this.getDB();return new Promise((i,s)=>{const o=r.transaction([Al],"readwrite").objectStore(Al),l={id:n.id,pageId:e,entry:n,createdAt:n.timestamp},c=o.put(l);c.onsuccess=()=>i(),c.onerror=()=>{console.error(" [HistoryIDB] Failed to save entry:",c.error),s(c.error)}})}catch(r){console.error(" [HistoryIDB] saveEntry error:",r)}}async saveEntries(e,n){if(n.length!==0)try{const r=await this.getDB();return new Promise((i,s)=>{const o=r.transaction([Al],"readwrite").objectStore(Al);let l=0,c=!1;for(const u of n){const h={id:u.id,pageId:e,entry:u,createdAt:u.timestamp},f=o.put(h);f.onsuccess=()=>{l++,l===n.length&&!c&&i()},f.onerror=()=>{c||(c=!0,console.error(" [HistoryIDB] Failed to save entries:",f.error),s(f.error))}}})}catch(r){console.error(" [HistoryIDB] saveEntries error:",r)}}async getEntriesByPage(e){try{const n=await this.getDB();return new Promise((r,i)=>{const l=n.transaction([Al],"readonly").objectStore(Al).index("pageId").getAll(e);l.onsuccess=()=>{const c=l.result;c.sort((h,f)=>h.createdAt-f.createdAt);const u=c.map(h=>h.entry);r(u)},l.onerror=()=>{console.error(" [HistoryIDB] Failed to get entries:",l.error),i(l.error)}})}catch(n){return console.error(" [HistoryIDB] getEntriesByPage error:",n),[]}}async deleteEntry(e){try{const n=await this.getDB();return new Promise((r,i)=>{const o=n.transaction([Al],"readwrite").objectStore(Al).delete(e);o.onsuccess=()=>r(),o.onerror=()=>{console.error(" [HistoryIDB] Failed to delete entry:",o.error),i(o.error)}})}catch(n){console.error(" [HistoryIDB] deleteEntry error:",n)}}async clearPageHistory(e){try{const n=await this.getDB();return new Promise((r,i)=>{const s=n.transaction([Al,Hu],"readwrite"),a=s.objectStore(Al),o=s.objectStore(Hu),c=a.index("pageId").openCursor(e);c.onsuccess=u=>{const h=u.target.result;h&&(h.delete(),h.continue())},o.delete(e),s.oncomplete=()=>{r()},s.onerror=()=>{console.error(" [HistoryIDB] Failed to clear page history:",s.error),i(s.error)}})}catch(n){console.error(" [HistoryIDB] clearPageHistory error:",n)}}async savePageMeta(e,n,r){try{const i=await this.getDB();return new Promise((s,a)=>{const l=i.transaction([Hu],"readwrite").objectStore(Hu),c={pageId:e,currentIndex:n,totalEntries:r,lastUpdated:Date.now()},u=l.put(c);u.onsuccess=()=>s(),u.onerror=()=>{console.error(" [HistoryIDB] Failed to save meta:",u.error),a(u.error)}})}catch(i){console.error(" [HistoryIDB] savePageMeta error:",i)}}async getPageMeta(e){try{const n=await this.getDB();return new Promise((r,i)=>{const o=n.transaction([Hu],"readonly").objectStore(Hu).get(e);o.onsuccess=()=>{r(o.result||null)},o.onerror=()=>{console.error(" [HistoryIDB] Failed to get meta:",o.error),i(o.error)}})}catch(n){return console.error(" [HistoryIDB] getPageMeta error:",n),null}}async getAllPageIds(){try{const e=await this.getDB();return new Promise((n,r)=>{const a=e.transaction([Hu],"readonly").objectStore(Hu).getAllKeys();a.onsuccess=()=>{n(a.result)},a.onerror=()=>{console.error(" [HistoryIDB] Failed to get page IDs:",a.error),r(a.error)}})}catch(e){return console.error(" [HistoryIDB] getAllPageIds error:",e),[]}}async cleanupOldEntries(){try{const e=await this.getDB(),n=Date.now()-ZPe*24*60*60*1e3;let r=0;return new Promise((i,s)=>{const a=e.transaction([Al],"readwrite"),l=a.objectStore(Al).index("createdAt"),c=IDBKeyRange.upperBound(n),u=l.openCursor(c);u.onsuccess=h=>{const f=h.target.result;f&&(f.delete(),r++,f.continue())},a.oncomplete=()=>{i(r)},a.onerror=()=>{console.error(" [HistoryIDB] Cleanup failed:",a.error),s(a.error)}})}catch(e){return console.error(" [HistoryIDB] cleanupOldEntries error:",e),0}}async clearAll(){try{const e=await this.getDB();return new Promise((n,r)=>{const i=e.transaction([Al,Hu],"readwrite");i.objectStore(Al).clear(),i.objectStore(Hu).clear(),i.oncomplete=()=>{n()},i.onerror=()=>{console.error(" [HistoryIDB] Failed to clear all:",i.error),r(i.error)}})}catch(e){console.error(" [HistoryIDB] clearAll error:",e)}}async getStats(){try{const e=await this.getDB();return new Promise((n,r)=>{const i=e.transaction([Al,Hu],"readonly");let s=0,a=0;const o=i.objectStore(Al).count(),l=i.objectStore(Hu).count();o.onsuccess=()=>{s=o.result},l.onsuccess=()=>{a=l.result},i.oncomplete=()=>{const c=s*500;n({totalEntries:s,totalPages:a,estimatedSize:c})},i.onerror=()=>{r(i.error)}})}catch(e){return console.error(" [HistoryIDB] getStats error:",e),{totalEntries:0,totalPages:0,estimatedSize:0}}}close(){this.db&&(this.db.close(),this.db=null,this.dbPromise=null)}}const Qae=new eke,yQ={syncMode:"manual",projectCreation:"local",autoSyncInterval:5,autoDownloadOnOpen:!1},Uae=Jl()(UM(t=>({...yQ,setSyncMode:e=>t({syncMode:e}),setProjectCreation:e=>t({projectCreation:e}),setAutoSyncInterval:e=>t({autoSyncInterval:e}),setAutoDownloadOnOpen:e=>t({autoDownloadOnOpen:e}),resetSettings:()=>t(yQ)}),{name:"xstudio-settings",version:1}));fr({base:"react-aria-TextField",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fr({base:"react-aria-NumberField",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fr({base:"react-aria-Radio",variants:{isFocusVisible:{true:"focus-visible",false:""}}});fr({base:"react-aria-RadioGroup",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"default",size:"md"}});const tke=fr({base:"react-aria-Select",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});function JT({label:t,description:e,errorMessage:n,children:r,items:i,placeholder:s,dataBinding:a,columnMapping:o,variant:l="primary",size:c="md",selectionMode:u="single",multipleDisplayMode:h="count",renderMultipleValue:f,isLoading:p,...m}){const{data:v,loading:A,error:x}=HF({dataBinding:a,componentName:"Select",fallbackData:[{id:1,name:"Option 1",value:"option-1"},{id:2,name:"Option 2",value:"option-2"}]}),E=t&&String(t).trim(),w=E?void 0:m["aria-label"]||s||"Select an option",B=a&&"source"in a&&"name"in a&&!("type"in a),D=!B&&a&&"type"in a&&a.type==="collection"||B,T=we.useMemo(()=>{if(!D||A||x)return i;if(o&&v.length>0)return v.map((k,L)=>({id:String(k.id||L),...k}));if(v.length>0){const k=a?.config,L=k?.columnMapping?.id||k?.dataMapping?.idField||"id",F=k?.columnMapping?.label||k?.dataMapping?.labelField||"label";return v.map((z,G)=>({id:String(z[L]||z.id||G),label:String(z[F]||z.label||z.name||`Item ${G+1}`),...z}))}return i},[D,A,x,v,o,a,i]),M=we.useCallback((k,L)=>{if(u!=="multiple"||!k||k==="all"||Array.isArray(k)&&k.length===0)return null;const F=L?Array.from(L):[],z=Array.isArray(k)?k.length:0;if(z===0)return null;switch(h){case"count":return`${z} `;case"list":{const G=F.map(V=>{const q=V;return String(q.label||q.name||q.id||"")}).filter(Boolean);return G.length>0?G.join(", "):`${z} `}case"custom":return f?f(F):`${z} `;default:return`${z} `}},[u,h,f]),R=we.useMemo(()=>D&&A?d.jsx(Sr,{textValue:"Loading",className:"react-aria-ListBoxItem",children:"   ..."},"loading"):D&&x?d.jsxs(Sr,{textValue:"Error",className:"react-aria-ListBoxItem",children:[" : ",x]},"error"):D&&o&&v.length>0?r:D&&!o&&v.length>0?(k=>{const L=k.id!==void 0&&k.id!==null?String(k.id):void 0,F=k.label!==void 0&&k.label!==null?String(k.label):void 0;return d.jsx(Sr,{id:L,textValue:F,className:"react-aria-ListBoxItem",children:F},L)}):r,[D,A,x,o,v,r]);return p?d.jsx(Pp,{componentVariant:"input",size:c,className:m.className,"aria-label":"Loading select..."}):d.jsx(da,{...m,className:Vy(m.className,(k,L)=>tke({...L,variant:l,size:c,className:k})),"aria-label":w,placeholder:s,isDisabled:D&&(A||!!x),"data-selection-mode":u,selectionMode:u,children:k=>d.jsxs(d.Fragment,{children:[E&&d.jsx(xn,{className:"react-aria-Label",children:String(t)}),d.jsxs(en,{className:"react-aria-Button",children:[u==="multiple"?(()=>{const L=M(k.selectedKeys,k.selectedItems);return L?d.jsx($s,{children:L}):d.jsx($s,{})})():d.jsx($s,{}),d.jsx("span",{"aria-hidden":"true",className:"select-chevron",children:d.jsx(zs,{size:16})})]}),e&&String(e).trim()&&d.jsx(lE,{slot:"description",className:"react-aria-Description",children:String(e)}),D&&A&&d.jsx(lE,{slot:"description",className:"react-aria-Description",children:"   ..."}),D&&x&&d.jsxs(zT,{className:"react-aria-FieldError",children:[" : ",x]}),n&&!x&&d.jsx(zT,{className:"react-aria-FieldError",children:typeof n=="function"?n({isInvalid:!0}):String(n)}),d.jsx(gs,{className:"react-aria-Popover",placement:"bottom start",offset:4,children:d.jsx($i,{items:T,className:"react-aria-ListBox",selectionMode:u,children:R})})]})})}function Ux(t){return d.jsx(Sr,{...t,className:"react-aria-ListBoxItem"})}fr({base:"react-aria-ComboBox",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fr({base:"react-aria-Checkbox",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"},isFocusVisible:{true:"focus-visible",false:""}},defaultVariants:{variant:"default",size:"md"}});fr({base:"react-aria-CheckboxGroup",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"default",size:"md"}});function s1(t,e,n){let r=n.initialDeps??[],i,s=!0;function a(){var o,l,c;let u;n.key&&((o=n.debug)!=null&&o.call(n))&&(u=Date.now());const h=t();if(!(h.length!==r.length||h.some((m,v)=>r[v]!==m)))return i;r=h;let p;if(n.key&&((l=n.debug)!=null&&l.call(n))&&(p=Date.now()),i=e(...h),n.key&&((c=n.debug)!=null&&c.call(n))){const m=Math.round((Date.now()-u)*100)/100,v=Math.round((Date.now()-p)*100)/100,A=v/16,x=(E,w)=>{for(E=String(E);E.length<w;)E=" "+E;return E};console.info(`%c ${x(v,5)} /${x(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*A,120))}deg 100% 31%);`,n?.key)}return n?.onChange&&!(s&&n.skipInitialOnChange)&&n.onChange(i),s=!1,i}return a.updateDeps=o=>{r=o},a}function vQ(t,e){if(t===void 0)throw new Error("Unexpected undefined");return t}const nke=(t,e)=>Math.abs(t-e)<1.01,rke=(t,e,n)=>{let r;return function(...i){t.clearTimeout(r),r=t.setTimeout(()=>e.apply(this,i),n)}},xQ=t=>{const{offsetWidth:e,offsetHeight:n}=t;return{width:e,height:n}},ike=t=>t,ske=t=>{const e=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let i=e;i<=n;i++)r.push(i);return r},ake=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;const i=a=>{const{width:o,height:l}=a;e({width:Math.round(o),height:Math.round(l)})};if(i(xQ(n)),!r.ResizeObserver)return()=>{};const s=new r.ResizeObserver(a=>{const o=()=>{const l=a[0];if(l?.borderBoxSize){const c=l.borderBoxSize[0];if(c){i({width:c.inlineSize,height:c.blockSize});return}}i(xQ(n))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},bQ={passive:!0},CQ=typeof window>"u"?!0:"onscrollend"in window,oke=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;let i=0;const s=t.options.useScrollendEvent&&CQ?()=>{}:rke(r,()=>{e(i,!1)},t.options.isScrollingResetDelay),a=u=>()=>{const{horizontal:h,isRtl:f}=t.options;i=h?n.scrollLeft*(f&&-1||1):n.scrollTop,s(),e(i,u)},o=a(!0),l=a(!1);l(),n.addEventListener("scroll",o,bQ);const c=t.options.useScrollendEvent&&CQ;return c&&n.addEventListener("scrollend",l,bQ),()=>{n.removeEventListener("scroll",o),c&&n.removeEventListener("scrollend",l)}},lke=(t,e,n)=>{if(e?.borderBoxSize){const r=e.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return t[n.options.horizontal?"offsetWidth":"offsetHeight"]},cke=(t,{adjustments:e=0,behavior:n},r)=>{var i,s;const a=t+e;(s=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||s.call(i,{[r.options.horizontal?"left":"top"]:a,behavior:n})};class uke{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(s=>{const a=()=>{this._measureElement(s.target,s)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var s;return(s=r())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:i=>{var s;return(s=r())==null?void 0:s.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:ike,rangeExtractor:ske,onChange:()=>{},measureElement:lke,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=s1(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,s=new Map;for(let a=r-1;a>=0;a--){const o=n[a];if(i.has(o.lane))continue;const l=s.get(o.lane);if(l==null||o.end>l.end?s.set(o.lane,o):o.end<l.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((a,o)=>a.end===o.end?a.index-o.index:a.end-o.end)[0]:void 0},this.getMeasurementOptions=s1(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,r,i,s,a,o)=>(this.prevLanes!==void 0&&this.prevLanes!==o&&(this.lanesChangedFlag=!0),this.prevLanes=o,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a,lanes:o}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=s1(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a,lanes:o},l)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const f of this.laneAssignments.keys())f>=n&&this.laneAssignments.delete(f);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(f=>{this.itemSizeCache.set(f.key,f.size)}));const c=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const u=this.measurementsCache.slice(0,c),h=new Array(o).fill(void 0);for(let f=0;f<c;f++){const p=u[f];p&&(h[p.lane]=f)}for(let f=c;f<n;f++){const p=s(f),m=this.laneAssignments.get(f);let v,A;if(m!==void 0&&this.options.lanes>1){v=m;const B=h[v],D=B!==void 0?u[B]:void 0;A=D?D.end+this.options.gap:r+i}else{const B=this.options.lanes===1?u[f-1]:this.getFurthestMeasurement(u,f);A=B?B.end+this.options.gap:r+i,v=B?B.lane:f%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(f,v)}const x=l.get(p),E=typeof x=="number"?x:this.options.estimateSize(f),w=A+E;u[f]={index:f,start:A,size:E,end:w,key:p,lane:v},h[v]=f}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=s1(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,s)=>this.range=n.length>0&&r>0?dke({measurements:n,outerSize:r,scrollOffset:i,lanes:s}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=s1(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,s,a)=>s===null||a===null?[]:n({startIndex:s,endIndex:a,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),s=this.measurementsCache[i];if(!s)return;const a=s.key,o=this.elementsCache.get(a);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(a,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const s=this.itemSizeCache.get(i.key)??i.size,a=r-s;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,a,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=s1(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let s=0,a=n.length;s<a;s++){const o=n[s],l=r[o];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return vQ(r[Hae(0,r.length-1,i=>vQ(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const s=this.getSize(),a=this.getScrollOffset();r==="auto"&&(r=n>=a+s?"end":"start"),r==="center"?n+=(i-s)/2:r==="end"&&(n-=s);const o=this.getTotalSize()+this.options.scrollMargin-s;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const s=this.getSize(),a=this.getScrollOffset();if(r==="auto")if(i.end>=a+s-this.options.scrollPaddingEnd)r="end";else if(i.start<=a+this.options.scrollPaddingStart)r="start";else return[a,r];const o=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let s=0;const a=10,o=c=>{if(!this.targetWindow)return;const u=this.getOffsetForIndex(n,c);if(!u){console.warn("Failed to get offset for index:",n);return}const[h,f]=u;this._scrollToOffset(h,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const p=this.getScrollOffset(),m=this.getOffsetForIndex(n,f);if(!m){console.warn("Failed to get offset for index:",n);return}nke(m[0],p)||l(f)})},l=c=>{this.targetWindow&&(s++,s<a?this.targetWindow.requestAnimationFrame(()=>o(c)):console.warn(`Failed to scroll to index ${n} after ${a} attempts.`))};o(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=r[r.length-1])==null?void 0:n.end)??0;else{const s=Array(this.options.lanes).fill(null);let a=r.length-1;for(;a>=0&&s.some(o=>o===null);){const o=r[a];s[o.lane]===null&&(s[o.lane]=o.end),a--}i=Math.max(...s.filter(o=>o!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(e)}}const Hae=(t,e,n,r)=>{for(;t<=e;){const i=(t+e)/2|0,s=n(i);if(s<r)t=i+1;else if(s>r)e=i-1;else return i}return t>0?t-1:0};function dke({measurements:t,outerSize:e,scrollOffset:n,lanes:r}){const i=t.length-1,s=l=>t[l].start;if(t.length<=r)return{startIndex:0,endIndex:i};let a=Hae(0,i,s,n),o=a;if(r===1)for(;o<i&&t[o].end<n+e;)o++;else if(r>1){const l=Array(r).fill(0);for(;o<i&&l.some(u=>u<n+e);){const u=t[o];l[u.lane]=u.end,o++}const c=Array(r).fill(n+e);for(;a>=0&&c.some(u=>u>=n);){const u=t[a];c[u.lane]=u.start,a--}a=Math.max(0,a-a%r),o=Math.min(i,o+(r-1-o%r))}return{startIndex:a,endIndex:o}}const EQ=typeof document<"u"?C.useLayoutEffect:C.useEffect;function hke(t){const e=C.useReducer(()=>({}),{})[1],n={...t,onChange:(i,s)=>{var a;s?gb.flushSync(e):e(),(a=t.onChange)==null||a.call(t,i,s)}},[r]=C.useState(()=>new uke(n));return r.setOptions(n),EQ(()=>r._didMount(),[]),EQ(()=>r._willUpdate()),r}function Gae(t){return hke({observeElementRect:ake,observeElementOffset:oke,scrollToFn:cke,...t})}fr({base:"react-aria-ListBox",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fr({base:"react-aria-GridList",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fr({base:"react-aria-Tabs",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fr({base:"react-aria-TabList",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});C.createContext(!1);fr({base:"react-aria-Tree",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fr({base:"react-aria-Panel",variants:{variant:{default:"panel-default",tab:"panel-tab",sidebar:"panel-sidebar",card:"panel-card",modal:"panel-modal"}},defaultVariants:{variant:"default"}});fr({base:"react-aria-Calendar",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fr({base:"react-aria-DatePicker",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fr({base:"react-aria-DateRangePicker",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fr({base:"react-aria-DateField",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fr({base:"react-aria-TimeField",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fr({base:"react-aria-Switch",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"},isFocusVisible:{true:"focus-visible",false:""}},defaultVariants:{variant:"default",size:"md"}});function fke(){return{accessor:(t,e)=>typeof t=="function"?{...e,accessorFn:t}:{...e,accessorKey:t},display:t=>t,group:t=>t}}function Cy(t,e){return typeof t=="function"?t(e):t}function ih(t,e){return n=>{e.setState(r=>({...r,[t]:Cy(n,r[t])}))}}function m4(t){return t instanceof Function}function pke(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function gke(t,e){const n=[],r=i=>{i.forEach(s=>{n.push(s);const a=e(s);a!=null&&a.length&&r(a)})};return r(t),n}function yr(t,e,n){let r=[],i;return s=>{let a;n.key&&n.debug&&(a=Date.now());const o=t(s);if(!(o.length!==r.length||o.some((u,h)=>r[h]!==u)))return i;r=o;let c;if(n.key&&n.debug&&(c=Date.now()),i=e(...o),n==null||n.onChange==null||n.onChange(i),n.key&&n.debug&&n!=null&&n.debug()){const u=Math.round((Date.now()-a)*100)/100,h=Math.round((Date.now()-c)*100)/100,f=h/16,p=(m,v)=>{for(m=String(m);m.length<v;)m=" "+m;return m};console.info(`%c ${p(h,5)} /${p(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*f,120))}deg 100% 31%);`,n?.key)}return i}}function vr(t,e,n,r){return{debug:()=>{var i;return(i=t?.debugAll)!=null?i:t[e]},key:!1,onChange:r}}function mke(t,e,n,r){const i=()=>{var a;return(a=s.getValue())!=null?a:t.options.renderFallbackValue},s={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(r),renderValue:i,getContext:yr(()=>[t,n,e,s],(a,o,l,c)=>({table:a,column:o,row:l,cell:c,getValue:c.getValue,renderValue:c.renderValue}),vr(t.options,"debugCells"))};return t._features.forEach(a=>{a.createCell==null||a.createCell(s,n,e,t)},{}),s}function Ake(t,e,n,r){var i,s;const o={...t._getDefaultColumnDef(),...e},l=o.accessorKey;let c=(i=(s=o.id)!=null?s:l?typeof String.prototype.replaceAll=="function"?l.replaceAll(".","_"):l.replace(/\./g,"_"):void 0)!=null?i:typeof o.header=="string"?o.header:void 0,u;if(o.accessorFn?u=o.accessorFn:l&&(l.includes(".")?u=f=>{let p=f;for(const v of l.split(".")){var m;p=(m=p)==null?void 0:m[v]}return p}:u=f=>f[o.accessorKey]),!c)throw new Error;let h={id:`${String(c)}`,accessorFn:u,parent:r,depth:n,columnDef:o,columns:[],getFlatColumns:yr(()=>[!0],()=>{var f;return[h,...(f=h.columns)==null?void 0:f.flatMap(p=>p.getFlatColumns())]},vr(t.options,"debugColumns")),getLeafColumns:yr(()=>[t._getOrderColumnsFn()],f=>{var p;if((p=h.columns)!=null&&p.length){let m=h.columns.flatMap(v=>v.getLeafColumns());return f(m)}return[h]},vr(t.options,"debugColumns"))};for(const f of t._features)f.createColumn==null||f.createColumn(h,t);return h}const Bc="debugHeaders";function SQ(t,e,n){var r;let s={id:(r=n.id)!=null?r:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const a=[],o=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(o),a.push(l)};return o(s),a},getContext:()=>({table:t,header:s,column:e})};return t._features.forEach(a=>{a.createHeader==null||a.createHeader(s,t)}),s}const yke={createTable:t=>{t.getHeaderGroups=yr(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,i)=>{var s,a;const o=(s=r?.map(h=>n.find(f=>f.id===h)).filter(Boolean))!=null?s:[],l=(a=i?.map(h=>n.find(f=>f.id===h)).filter(Boolean))!=null?a:[],c=n.filter(h=>!(r!=null&&r.includes(h.id))&&!(i!=null&&i.includes(h.id)));return zB(e,[...o,...c,...l],t)},vr(t.options,Bc)),t.getCenterHeaderGroups=yr(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,i)=>(n=n.filter(s=>!(r!=null&&r.includes(s.id))&&!(i!=null&&i.includes(s.id))),zB(e,n,t,"center")),vr(t.options,Bc)),t.getLeftHeaderGroups=yr(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,r)=>{var i;const s=(i=r?.map(a=>n.find(o=>o.id===a)).filter(Boolean))!=null?i:[];return zB(e,s,t,"left")},vr(t.options,Bc)),t.getRightHeaderGroups=yr(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,r)=>{var i;const s=(i=r?.map(a=>n.find(o=>o.id===a)).filter(Boolean))!=null?i:[];return zB(e,s,t,"right")},vr(t.options,Bc)),t.getFooterGroups=yr(()=>[t.getHeaderGroups()],e=>[...e].reverse(),vr(t.options,Bc)),t.getLeftFooterGroups=yr(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),vr(t.options,Bc)),t.getCenterFooterGroups=yr(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),vr(t.options,Bc)),t.getRightFooterGroups=yr(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),vr(t.options,Bc)),t.getFlatHeaders=yr(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),vr(t.options,Bc)),t.getLeftFlatHeaders=yr(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),vr(t.options,Bc)),t.getCenterFlatHeaders=yr(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),vr(t.options,Bc)),t.getRightFlatHeaders=yr(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),vr(t.options,Bc)),t.getCenterLeafHeaders=yr(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),vr(t.options,Bc)),t.getLeftLeafHeaders=yr(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),vr(t.options,Bc)),t.getRightLeafHeaders=yr(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),vr(t.options,Bc)),t.getLeafHeaders=yr(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,r)=>{var i,s,a,o,l,c;return[...(i=(s=e[0])==null?void 0:s.headers)!=null?i:[],...(a=(o=n[0])==null?void 0:o.headers)!=null?a:[],...(l=(c=r[0])==null?void 0:c.headers)!=null?l:[]].map(u=>u.getLeafHeaders()).flat()},vr(t.options,Bc))}};function zB(t,e,n,r){var i,s;let a=0;const o=function(f,p){p===void 0&&(p=1),a=Math.max(a,p),f.filter(m=>m.getIsVisible()).forEach(m=>{var v;(v=m.columns)!=null&&v.length&&o(m.columns,p+1)},0)};o(t);let l=[];const c=(f,p)=>{const m={depth:p,id:[r,`${p}`].filter(Boolean).join("_"),headers:[]},v=[];f.forEach(A=>{const x=[...v].reverse()[0],E=A.column.depth===m.depth;let w,B=!1;if(E&&A.column.parent?w=A.column.parent:(w=A.column,B=!0),x&&x?.column===w)x.subHeaders.push(A);else{const D=SQ(n,w,{id:[r,p,w.id,A?.id].filter(Boolean).join("_"),isPlaceholder:B,placeholderId:B?`${v.filter(T=>T.column===w).length}`:void 0,depth:p,index:v.length});D.subHeaders.push(A),v.push(D)}m.headers.push(A),A.headerGroup=m}),l.push(m),p>0&&c(v,p-1)},u=e.map((f,p)=>SQ(n,f,{depth:a,index:p}));c(u,a-1),l.reverse();const h=f=>f.filter(m=>m.column.getIsVisible()).map(m=>{let v=0,A=0,x=[0];m.subHeaders&&m.subHeaders.length?(x=[],h(m.subHeaders).forEach(w=>{let{colSpan:B,rowSpan:D}=w;v+=B,x.push(D)})):v=1;const E=Math.min(...x);return A=A+E,m.colSpan=v,m.rowSpan=A,{colSpan:v,rowSpan:A}});return h((i=(s=l[0])==null?void 0:s.headers)!=null?i:[]),l}const vke=(t,e,n,r,i,s,a)=>{let o={id:e,index:r,original:n,depth:i,parentId:a,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(o._valuesCache.hasOwnProperty(l))return o._valuesCache[l];const c=t.getColumn(l);if(c!=null&&c.accessorFn)return o._valuesCache[l]=c.accessorFn(o.original,r),o._valuesCache[l]},getUniqueValues:l=>{if(o._uniqueValuesCache.hasOwnProperty(l))return o._uniqueValuesCache[l];const c=t.getColumn(l);if(c!=null&&c.accessorFn)return c.columnDef.getUniqueValues?(o._uniqueValuesCache[l]=c.columnDef.getUniqueValues(o.original,r),o._uniqueValuesCache[l]):(o._uniqueValuesCache[l]=[o.getValue(l)],o._uniqueValuesCache[l])},renderValue:l=>{var c;return(c=o.getValue(l))!=null?c:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>gke(o.subRows,l=>l.subRows),getParentRow:()=>o.parentId?t.getRow(o.parentId,!0):void 0,getParentRows:()=>{let l=[],c=o;for(;;){const u=c.getParentRow();if(!u)break;l.push(u),c=u}return l.reverse()},getAllCells:yr(()=>[t.getAllLeafColumns()],l=>l.map(c=>mke(t,o,c,c.id)),vr(t.options,"debugRows")),_getAllCellsByColumnId:yr(()=>[o.getAllCells()],l=>l.reduce((c,u)=>(c[u.column.id]=u,c),{}),vr(t.options,"debugRows"))};for(let l=0;l<t._features.length;l++){const c=t._features[l];c==null||c.createRow==null||c.createRow(o,t)}return o},xke={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},Vae=(t,e,n)=>{var r,i;const s=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((i=t.getValue(e))==null||(i=i.toString())==null||(i=i.toLowerCase())==null)&&i.includes(s))};Vae.autoRemove=t=>Bp(t);const Wae=(t,e,n)=>{var r;return!!(!((r=t.getValue(e))==null||(r=r.toString())==null)&&r.includes(n))};Wae.autoRemove=t=>Bp(t);const Kae=(t,e,n)=>{var r;return((r=t.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===n?.toLowerCase()};Kae.autoRemove=t=>Bp(t);const qae=(t,e,n)=>{var r;return(r=t.getValue(e))==null?void 0:r.includes(n)};qae.autoRemove=t=>Bp(t);const Yae=(t,e,n)=>!n.some(r=>{var i;return!((i=t.getValue(e))!=null&&i.includes(r))});Yae.autoRemove=t=>Bp(t)||!(t!=null&&t.length);const Xae=(t,e,n)=>n.some(r=>{var i;return(i=t.getValue(e))==null?void 0:i.includes(r)});Xae.autoRemove=t=>Bp(t)||!(t!=null&&t.length);const Jae=(t,e,n)=>t.getValue(e)===n;Jae.autoRemove=t=>Bp(t);const Zae=(t,e,n)=>t.getValue(e)==n;Zae.autoRemove=t=>Bp(t);const ZF=(t,e,n)=>{let[r,i]=n;const s=t.getValue(e);return s>=r&&s<=i};ZF.resolveFilterValue=t=>{let[e,n]=t,r=typeof e!="number"?parseFloat(e):e,i=typeof n!="number"?parseFloat(n):n,s=e===null||Number.isNaN(r)?-1/0:r,a=n===null||Number.isNaN(i)?1/0:i;if(s>a){const o=s;s=a,a=o}return[s,a]};ZF.autoRemove=t=>Bp(t)||Bp(t[0])&&Bp(t[1]);const i0={includesString:Vae,includesStringSensitive:Wae,equalsString:Kae,arrIncludes:qae,arrIncludesAll:Yae,arrIncludesSome:Xae,equals:Jae,weakEquals:Zae,inNumberRange:ZF};function Bp(t){return t==null||t===""}const bke={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:ih("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n?.getValue(t.id);return typeof r=="string"?i0.includesString:typeof r=="number"?i0.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?i0.equals:Array.isArray(r)?i0.arrIncludes:i0.weakEquals},t.getFilterFn=()=>{var n,r;return m4(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(r=e.options.filterFns)==null?void 0:r[t.columnDef.filterFn])!=null?n:i0[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,r,i;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(r=>r.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,r;return(n=(r=e.getState().columnFilters)==null?void 0:r.findIndex(i=>i.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(r=>{const i=t.getFilterFn(),s=r?.find(u=>u.id===t.id),a=Cy(n,s?s.value:void 0);if(wQ(i,a,t)){var o;return(o=r?.filter(u=>u.id!==t.id))!=null?o:[]}const l={id:t.id,value:a};if(s){var c;return(c=r?.map(u=>u.id===t.id?l:u))!=null?c:[]}return r!=null&&r.length?[...r,l]:[l]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),r=i=>{var s;return(s=Cy(e,i))==null?void 0:s.filter(a=>{const o=n.find(l=>l.id===a.id);if(o){const l=o.getFilterFn();if(wQ(l,a.value,o))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(r)},t.resetColumnFilters=e=>{var n,r;t.setColumnFilters(e?[]:(n=(r=t.initialState)==null?void 0:r.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function wQ(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const Cke=(t,e,n)=>n.reduce((r,i)=>{const s=i.getValue(t);return r+(typeof s=="number"?s:0)},0),Eke=(t,e,n)=>{let r;return n.forEach(i=>{const s=i.getValue(t);s!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}),r},Ske=(t,e,n)=>{let r;return n.forEach(i=>{const s=i.getValue(t);s!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}),r},wke=(t,e,n)=>{let r,i;return n.forEach(s=>{const a=s.getValue(t);a!=null&&(r===void 0?a>=a&&(r=i=a):(r>a&&(r=a),i<a&&(i=a)))}),[r,i]},_ke=(t,e)=>{let n=0,r=0;if(e.forEach(i=>{let s=i.getValue(t);s!=null&&(s=+s)>=s&&(++n,r+=s)}),n)return r/n},Ike=(t,e)=>{if(!e.length)return;const n=e.map(s=>s.getValue(t));if(!pke(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),i=n.sort((s,a)=>s-a);return n.length%2!==0?i[r]:(i[r-1]+i[r])/2},Bke=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),Tke=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,Mke=(t,e)=>e.length,eP={sum:Cke,min:Eke,max:Ske,extent:wke,mean:_ke,median:Ike,unique:Bke,uniqueCount:Tke,count:Mke},Dke={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:ih("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(r=>r!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,r;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n?.getValue(t.id);if(typeof r=="number")return eP.sum;if(Object.prototype.toString.call(r)==="[object Date]")return eP.extent},t.getAggregationFn=()=>{var n,r;if(!t)throw new Error;return m4(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(r=e.options.aggregationFns)==null?void 0:r[t.columnDef.aggregationFn])!=null?n:eP[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,r;t.setGrouping(e?[]:(n=(r=t.initialState)==null?void 0:r.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const r=e.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(t._groupingValuesCache[n]=r.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,r)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var i;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((i=n.subRows)!=null&&i.length)}}};function Rke(t,e,n){if(!(e!=null&&e.length)||!n)return t;const r=t.filter(s=>!e.includes(s.id));return n==="remove"?r:[...e.map(s=>t.find(a=>a.id===s)).filter(Boolean),...r]}const Pke={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:ih("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=yr(n=>[Jw(e,n)],n=>n.findIndex(r=>r.id===t.id),vr(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var r;return((r=Jw(e,n)[0])==null?void 0:r.id)===t.id},t.getIsLastColumn=n=>{var r;const i=Jw(e,n);return((r=i[i.length-1])==null?void 0:r.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=yr(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,r)=>i=>{let s=[];if(!(e!=null&&e.length))s=i;else{const a=[...e],o=[...i];for(;o.length&&a.length;){const l=a.shift(),c=o.findIndex(u=>u.id===l);c>-1&&s.push(o.splice(c,1)[0])}s=[...s,...o]}return Rke(s,n,r)},vr(t.options,"debugTable"))}},tP=()=>({left:[],right:[]}),kke={getInitialState:t=>({columnPinning:tP(),...t}),getDefaultOptions:t=>({onColumnPinningChange:ih("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const r=t.getLeafColumns().map(i=>i.id).filter(Boolean);e.setColumnPinning(i=>{var s,a;if(n==="right"){var o,l;return{left:((o=i?.left)!=null?o:[]).filter(h=>!(r!=null&&r.includes(h))),right:[...((l=i?.right)!=null?l:[]).filter(h=>!(r!=null&&r.includes(h))),...r]}}if(n==="left"){var c,u;return{left:[...((c=i?.left)!=null?c:[]).filter(h=>!(r!=null&&r.includes(h))),...r],right:((u=i?.right)!=null?u:[]).filter(h=>!(r!=null&&r.includes(h)))}}return{left:((s=i?.left)!=null?s:[]).filter(h=>!(r!=null&&r.includes(h))),right:((a=i?.right)!=null?a:[]).filter(h=>!(r!=null&&r.includes(h)))}})},t.getCanPin=()=>t.getLeafColumns().some(r=>{var i,s,a;return((i=r.columnDef.enablePinning)!=null?i:!0)&&((s=(a=e.options.enableColumnPinning)!=null?a:e.options.enablePinning)!=null?s:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(o=>o.id),{left:r,right:i}=e.getState().columnPinning,s=n.some(o=>r?.includes(o)),a=n.some(o=>i?.includes(o));return s?"left":a?"right":!1},t.getPinnedIndex=()=>{var n,r;const i=t.getIsPinned();return i?(n=(r=e.getState().columnPinning)==null||(r=r[i])==null?void 0:r.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=yr(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,r,i)=>{const s=[...r??[],...i??[]];return n.filter(a=>!s.includes(a.column.id))},vr(e.options,"debugRows")),t.getLeftVisibleCells=yr(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,r)=>(r??[]).map(s=>n.find(a=>a.column.id===s)).filter(Boolean).map(s=>({...s,position:"left"})),vr(e.options,"debugRows")),t.getRightVisibleCells=yr(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,r)=>(r??[]).map(s=>n.find(a=>a.column.id===s)).filter(Boolean).map(s=>({...s,position:"right"})),vr(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,r;return t.setColumnPinning(e?tP():(n=(r=t.initialState)==null?void 0:r.columnPinning)!=null?n:tP())},t.getIsSomeColumnsPinned=e=>{var n;const r=t.getState().columnPinning;if(!e){var i,s;return!!((i=r.left)!=null&&i.length||(s=r.right)!=null&&s.length)}return!!((n=r[e])!=null&&n.length)},t.getLeftLeafColumns=yr(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(r=>e.find(i=>i.id===r)).filter(Boolean),vr(t.options,"debugColumns")),t.getRightLeafColumns=yr(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(r=>e.find(i=>i.id===r)).filter(Boolean),vr(t.options,"debugColumns")),t.getCenterLeafColumns=yr(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r)=>{const i=[...n??[],...r??[]];return e.filter(s=>!i.includes(s.id))},vr(t.options,"debugColumns"))}};function Nke(t){return t||(typeof document<"u"?document:null)}const $B={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},nP=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Lke={getDefaultColumnDef:()=>$B,getInitialState:t=>({columnSizing:{},columnSizingInfo:nP(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:ih("columnSizing",t),onColumnSizingInfoChange:ih("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,r,i;const s=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:$B.minSize,(r=s??t.columnDef.size)!=null?r:$B.size),(i=t.columnDef.maxSize)!=null?i:$B.maxSize)},t.getStart=yr(n=>[n,Jw(e,n),e.getState().columnSizing],(n,r)=>r.slice(0,t.getIndex(n)).reduce((i,s)=>i+s.getSize(),0),vr(e.options,"debugColumns")),t.getAfter=yr(n=>[n,Jw(e,n),e.getState().columnSizing],(n,r)=>r.slice(t.getIndex(n)+1).reduce((i,s)=>i+s.getSize(),0),vr(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:r,...i}=n;return i})},t.getCanResize=()=>{var n,r;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const r=i=>{if(i.subHeaders.length)i.subHeaders.forEach(r);else{var s;n+=(s=i.column.getSize())!=null?s:0}};return r(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const r=e.getColumn(t.column.id),i=r?.getCanResize();return s=>{if(!r||!i||(s.persist==null||s.persist(),rP(s)&&s.touches&&s.touches.length>1))return;const a=t.getSize(),o=t?t.getLeafHeaders().map(x=>[x.column.id,x.column.getSize()]):[[r.id,r.getSize()]],l=rP(s)?Math.round(s.touches[0].clientX):s.clientX,c={},u=(x,E)=>{typeof E=="number"&&(e.setColumnSizingInfo(w=>{var B,D;const T=e.options.columnResizeDirection==="rtl"?-1:1,M=(E-((B=w?.startOffset)!=null?B:0))*T,R=Math.max(M/((D=w?.startSize)!=null?D:0),-.999999);return w.columnSizingStart.forEach(k=>{let[L,F]=k;c[L]=Math.round(Math.max(F+F*R,0)*100)/100}),{...w,deltaOffset:M,deltaPercentage:R}}),(e.options.columnResizeMode==="onChange"||x==="end")&&e.setColumnSizing(w=>({...w,...c})))},h=x=>u("move",x),f=x=>{u("end",x),e.setColumnSizingInfo(E=>({...E,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},p=Nke(n),m={moveHandler:x=>h(x.clientX),upHandler:x=>{p?.removeEventListener("mousemove",m.moveHandler),p?.removeEventListener("mouseup",m.upHandler),f(x.clientX)}},v={moveHandler:x=>(x.cancelable&&(x.preventDefault(),x.stopPropagation()),h(x.touches[0].clientX),!1),upHandler:x=>{var E;p?.removeEventListener("touchmove",v.moveHandler),p?.removeEventListener("touchend",v.upHandler),x.cancelable&&(x.preventDefault(),x.stopPropagation()),f((E=x.touches[0])==null?void 0:E.clientX)}},A=Fke()?{passive:!1}:!1;rP(s)?(p?.addEventListener("touchmove",v.moveHandler,A),p?.addEventListener("touchend",v.upHandler,A)):(p?.addEventListener("mousemove",m.moveHandler,A),p?.addEventListener("mouseup",m.upHandler,A)),e.setColumnSizingInfo(x=>({...x,startOffset:l,startSize:a,deltaOffset:0,deltaPercentage:0,columnSizingStart:o,isResizingColumn:r.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?nP():(n=t.initialState.columnSizingInfo)!=null?n:nP())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0}}};let QB=null;function Fke(){if(typeof QB=="boolean")return QB;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return QB=t,QB}function rP(t){return t.type==="touchstart"}const jke={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:ih("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(r=>({...r,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,r;const i=t.columns;return(n=i.length?i.some(s=>s.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[t.id])!=null?n:!0},t.getCanHide=()=>{var n,r;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((r=e.options.enableHiding)!=null?r:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=yr(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),vr(e.options,"debugRows")),t.getVisibleCells=yr(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,r,i)=>[...n,...r,...i],vr(e.options,"debugRows"))},createTable:t=>{const e=(n,r)=>yr(()=>[r(),r().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(s=>s.getIsVisible==null?void 0:s.getIsVisible()),vr(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var r;t.setColumnVisibility(n?{}:(r=t.initialState.columnVisibility)!=null?r:{})},t.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((i,s)=>({...i,[s.id]:n||!(s.getCanHide!=null&&s.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;t.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function Jw(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const Oke={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},zke={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:ih("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const r=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,r,i,s;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&((s=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?s:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>i0.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:r}=t.options;return m4(r)?r:r==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[r])!=null?e:i0[r]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},$ke={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:ih("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var r,i;if(!e){t._queue(()=>{e=!0});return}if((r=(i=t.options.autoResetAll)!=null?i:t.options.autoResetExpanded)!=null?r:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=r=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(r),t.toggleAllRowsExpanded=r=>{r??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=r=>{var i,s;t.setExpanded(r?{}:(i=(s=t.initialState)==null?void 0:s.expanded)!=null?i:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const r=t.getState().expanded;return r===!0||Object.values(r).some(Boolean)},t.getIsAllRowsExpanded=()=>{const r=t.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||t.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},t.getExpandedDepth=()=>{let r=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(s=>{const a=s.split(".");r=Math.max(r,a.length)}),r},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(r=>{var i;const s=r===!0?!0:!!(r!=null&&r[t.id]);let a={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(o=>{a[o]=!0}):a=r,n=(i=n)!=null?i:!s,!s&&n)return{...a,[t.id]:!0};if(s&&!n){const{[t.id]:o,...l}=a;return l}return r})},t.getIsExpanded=()=>{var n;const r=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:r===!0||r?.[t.id])},t.getCanExpand=()=>{var n,r,i;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((r=e.options.enableExpanding)!=null?r:!0)&&!!((i=t.subRows)!=null&&i.length)},t.getIsAllParentsExpanded=()=>{let n=!0,r=t;for(;n&&r.parentId;)r=e.getRow(r.parentId,!0),n=r.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},YL=0,XL=10,iP=()=>({pageIndex:YL,pageSize:XL}),Qke={getInitialState:t=>({...t,pagination:{...iP(),...t?.pagination}}),getDefaultOptions:t=>({onPaginationChange:ih("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var r,i;if(!e){t._queue(()=>{e=!0});return}if((r=(i=t.options.autoResetAll)!=null?i:t.options.autoResetPageIndex)!=null?r:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=r=>{const i=s=>Cy(r,s);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(i)},t.resetPagination=r=>{var i;t.setPagination(r?iP():(i=t.initialState.pagination)!=null?i:iP())},t.setPageIndex=r=>{t.setPagination(i=>{let s=Cy(r,i.pageIndex);const a=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return s=Math.max(0,Math.min(s,a)),{...i,pageIndex:s}})},t.resetPageIndex=r=>{var i,s;t.setPageIndex(r?YL:(i=(s=t.initialState)==null||(s=s.pagination)==null?void 0:s.pageIndex)!=null?i:YL)},t.resetPageSize=r=>{var i,s;t.setPageSize(r?XL:(i=(s=t.initialState)==null||(s=s.pagination)==null?void 0:s.pageSize)!=null?i:XL)},t.setPageSize=r=>{t.setPagination(i=>{const s=Math.max(1,Cy(r,i.pageSize)),a=i.pageSize*i.pageIndex,o=Math.floor(a/s);return{...i,pageIndex:o,pageSize:s}})},t.setPageCount=r=>t.setPagination(i=>{var s;let a=Cy(r,(s=t.options.pageCount)!=null?s:-1);return typeof a=="number"&&(a=Math.max(-1,a)),{...i,pageCount:a}}),t.getPageOptions=yr(()=>[t.getPageCount()],r=>{let i=[];return r&&r>0&&(i=[...new Array(r)].fill(null).map((s,a)=>a)),i},vr(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:r}=t.getState().pagination,i=t.getPageCount();return i===-1?!0:i===0?!1:r<i-1},t.previousPage=()=>t.setPageIndex(r=>r-1),t.nextPage=()=>t.setPageIndex(r=>r+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var r;return(r=t.options.pageCount)!=null?r:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var r;return(r=t.options.rowCount)!=null?r:t.getPrePaginationRowModel().rows.length}}},sP=()=>({top:[],bottom:[]}),Uke={getInitialState:t=>({rowPinning:sP(),...t}),getDefaultOptions:t=>({onRowPinningChange:ih("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,r,i)=>{const s=r?t.getLeafRows().map(l=>{let{id:c}=l;return c}):[],a=i?t.getParentRows().map(l=>{let{id:c}=l;return c}):[],o=new Set([...a,t.id,...s]);e.setRowPinning(l=>{var c,u;if(n==="bottom"){var h,f;return{top:((h=l?.top)!=null?h:[]).filter(v=>!(o!=null&&o.has(v))),bottom:[...((f=l?.bottom)!=null?f:[]).filter(v=>!(o!=null&&o.has(v))),...Array.from(o)]}}if(n==="top"){var p,m;return{top:[...((p=l?.top)!=null?p:[]).filter(v=>!(o!=null&&o.has(v))),...Array.from(o)],bottom:((m=l?.bottom)!=null?m:[]).filter(v=>!(o!=null&&o.has(v)))}}return{top:((c=l?.top)!=null?c:[]).filter(v=>!(o!=null&&o.has(v))),bottom:((u=l?.bottom)!=null?u:[]).filter(v=>!(o!=null&&o.has(v)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:i}=e.options;return typeof r=="function"?r(t):(n=r??i)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:r,bottom:i}=e.getState().rowPinning,s=n.some(o=>r?.includes(o)),a=n.some(o=>i?.includes(o));return s?"top":a?"bottom":!1},t.getPinnedIndex=()=>{var n,r;const i=t.getIsPinned();if(!i)return-1;const s=(n=i==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(a=>{let{id:o}=a;return o});return(r=s?.indexOf(t.id))!=null?r:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,r;return t.setRowPinning(e?sP():(n=(r=t.initialState)==null?void 0:r.rowPinning)!=null?n:sP())},t.getIsSomeRowsPinned=e=>{var n;const r=t.getState().rowPinning;if(!e){var i,s;return!!((i=r.top)!=null&&i.length||(s=r.bottom)!=null&&s.length)}return!!((n=r[e])!=null&&n.length)},t._getPinnedRows=(e,n,r)=>{var i;return((i=t.options.keepPinnedRows)==null||i?(n??[]).map(a=>{const o=t.getRow(a,!0);return o.getIsAllParentsExpanded()?o:null}):(n??[]).map(a=>e.find(o=>o.id===a))).filter(Boolean).map(a=>({...a,position:r}))},t.getTopRows=yr(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),vr(t.options,"debugRows")),t.getBottomRows=yr(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),vr(t.options,"debugRows")),t.getCenterRows=yr(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,r)=>{const i=new Set([...n??[],...r??[]]);return e.filter(s=>!i.has(s.id))},vr(t.options,"debugRows"))}},Hke={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:ih("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const r={...n},i=t.getPreGroupedRowModel().flatRows;return e?i.forEach(s=>{s.getCanSelect()&&(r[s.id]=!0)}):i.forEach(s=>{delete r[s.id]}),r})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const r=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),i={...n};return t.getRowModel().rows.forEach(s=>{JL(i,s.id,r,!0,t)}),i}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=yr(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?aP(t,n):{rows:[],flatRows:[],rowsById:{}},vr(t.options,"debugTable")),t.getFilteredSelectedRowModel=yr(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?aP(t,n):{rows:[],flatRows:[],rowsById:{}},vr(t.options,"debugTable")),t.getGroupedSelectedRowModel=yr(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?aP(t,n):{rows:[],flatRows:[],rowsById:{}},vr(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let r=!!(e.length&&Object.keys(n).length);return r&&e.some(i=>i.getCanSelect()&&!n[i.id])&&(r=!1),r},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:n}=t.getState();let r=!!e.length;return r&&e.some(i=>!n[i.id])&&(r=!1),r},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,r)=>{const i=t.getIsSelected();e.setRowSelection(s=>{var a;if(n=typeof n<"u"?n:!i,t.getCanSelect()&&i===n)return s;const o={...s};return JL(o,t.id,n,(a=r?.selectChildren)!=null?a:!0,e),o})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return ej(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return ZL(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return ZL(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return r=>{var i;n&&t.toggleSelected((i=r.target)==null?void 0:i.checked)}}}},JL=(t,e,n,r,i)=>{var s;const a=i.getRow(e,!0);n?(a.getCanMultiSelect()||Object.keys(t).forEach(o=>delete t[o]),a.getCanSelect()&&(t[e]=!0)):delete t[e],r&&(s=a.subRows)!=null&&s.length&&a.getCanSelectSubRows()&&a.subRows.forEach(o=>JL(t,o.id,n,r,i))};function aP(t,e){const n=t.getState().rowSelection,r=[],i={},s=function(a,o){return a.map(l=>{var c;const u=ej(l,n);if(u&&(r.push(l),i[l.id]=l),(c=l.subRows)!=null&&c.length&&(l={...l,subRows:s(l.subRows)}),u)return l}).filter(Boolean)};return{rows:s(e.rows),flatRows:r,rowsById:i}}function ej(t,e){var n;return(n=e[t.id])!=null?n:!1}function ZL(t,e,n){var r;if(!((r=t.subRows)!=null&&r.length))return!1;let i=!0,s=!1;return t.subRows.forEach(a=>{if(!(s&&!i)&&(a.getCanSelect()&&(ej(a,e)?s=!0:i=!1),a.subRows&&a.subRows.length)){const o=ZL(a,e);o==="all"?s=!0:(o==="some"&&(s=!0),i=!1)}}),i?"all":s?"some":!1}const e6=/([0-9]+)/gm,Gke=(t,e,n)=>eoe($y(t.getValue(n)).toLowerCase(),$y(e.getValue(n)).toLowerCase()),Vke=(t,e,n)=>eoe($y(t.getValue(n)),$y(e.getValue(n))),Wke=(t,e,n)=>tj($y(t.getValue(n)).toLowerCase(),$y(e.getValue(n)).toLowerCase()),Kke=(t,e,n)=>tj($y(t.getValue(n)),$y(e.getValue(n))),qke=(t,e,n)=>{const r=t.getValue(n),i=e.getValue(n);return r>i?1:r<i?-1:0},Yke=(t,e,n)=>tj(t.getValue(n),e.getValue(n));function tj(t,e){return t===e?0:t>e?1:-1}function $y(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function eoe(t,e){const n=t.split(e6).filter(Boolean),r=e.split(e6).filter(Boolean);for(;n.length&&r.length;){const i=n.shift(),s=r.shift(),a=parseInt(i,10),o=parseInt(s,10),l=[a,o].sort();if(isNaN(l[0])){if(i>s)return 1;if(s>i)return-1;continue}if(isNaN(l[1]))return isNaN(a)?-1:1;if(a>o)return 1;if(o>a)return-1}return n.length-r.length}const JS={alphanumeric:Gke,alphanumericCaseSensitive:Vke,text:Wke,textCaseSensitive:Kke,datetime:qke,basic:Yke},Xke={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:ih("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const i of n){const s=i?.getValue(t.id);if(Object.prototype.toString.call(s)==="[object Date]")return JS.datetime;if(typeof s=="string"&&(r=!0,s.split(e6).length>1))return JS.alphanumeric}return r?JS.text:JS.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof n?.getValue(t.id)=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,r;if(!t)throw new Error;return m4(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(r=e.options.sortingFns)==null?void 0:r[t.columnDef.sortingFn])!=null?n:JS[t.columnDef.sortingFn]},t.toggleSorting=(n,r)=>{const i=t.getNextSortingOrder(),s=typeof n<"u"&&n!==null;e.setSorting(a=>{const o=a?.find(p=>p.id===t.id),l=a?.findIndex(p=>p.id===t.id);let c=[],u,h=s?n:i==="desc";if(a!=null&&a.length&&t.getCanMultiSort()&&r?o?u="toggle":u="add":a!=null&&a.length&&l!==a.length-1?u="replace":o?u="toggle":u="replace",u==="toggle"&&(s||i||(u="remove")),u==="add"){var f;c=[...a,{id:t.id,desc:h}],c.splice(0,c.length-((f=e.options.maxMultiSortColCount)!=null?f:Number.MAX_SAFE_INTEGER))}else u==="toggle"?c=a.map(p=>p.id===t.id?{...p,desc:h}:p):u==="remove"?c=a.filter(p=>p.id!==t.id):c=[{id:t.id,desc:h}];return c})},t.getFirstSortDir=()=>{var n,r;return((n=(r=t.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var r,i;const s=t.getFirstSortDir(),a=t.getIsSorted();return a?a!==s&&((r=e.options.enableSortingRemoval)==null||r)&&(!(n&&(i=e.options.enableMultiRemove)!=null)||i)?!1:a==="desc"?"asc":"desc":s},t.getCanSort=()=>{var n,r;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,r;return(n=(r=t.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const r=(n=e.getState().sorting)==null?void 0:n.find(i=>i.id===t.id);return r?r.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,r;return(n=(r=e.getState().sorting)==null?void 0:r.findIndex(i=>i.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return r=>{n&&(r.persist==null||r.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,r;t.setSorting(e?[]:(n=(r=t.initialState)==null?void 0:r.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},Jke=[yke,jke,Pke,kke,xke,bke,Oke,zke,Xke,Dke,$ke,Qke,Uke,Hke,Lke];function Zke(t){var e,n;const r=[...Jke,...(e=t._features)!=null?e:[]];let i={_features:r};const s=i._features.reduce((f,p)=>Object.assign(f,p.getDefaultOptions==null?void 0:p.getDefaultOptions(i)),{}),a=f=>i.options.mergeOptions?i.options.mergeOptions(s,f):{...s,...f};let l={...{},...(n=t.initialState)!=null?n:{}};i._features.forEach(f=>{var p;l=(p=f.getInitialState==null?void 0:f.getInitialState(l))!=null?p:l});const c=[];let u=!1;const h={_features:r,options:{...s,...t},initialState:l,_queue:f=>{c.push(f),u||(u=!0,Promise.resolve().then(()=>{for(;c.length;)c.shift()();u=!1}).catch(p=>setTimeout(()=>{throw p})))},reset:()=>{i.setState(i.initialState)},setOptions:f=>{const p=Cy(f,i.options);i.options=a(p)},getState:()=>i.options.state,setState:f=>{i.options.onStateChange==null||i.options.onStateChange(f)},_getRowId:(f,p,m)=>{var v;return(v=i.options.getRowId==null?void 0:i.options.getRowId(f,p,m))!=null?v:`${m?[m.id,p].join("."):p}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(f,p)=>{let m=(p?i.getPrePaginationRowModel():i.getRowModel()).rowsById[f];if(!m&&(m=i.getCoreRowModel().rowsById[f],!m))throw new Error;return m},_getDefaultColumnDef:yr(()=>[i.options.defaultColumn],f=>{var p;return f=(p=f)!=null?p:{},{header:m=>{const v=m.header.column.columnDef;return v.accessorKey?v.accessorKey:v.accessorFn?v.id:null},cell:m=>{var v,A;return(v=(A=m.renderValue())==null||A.toString==null?void 0:A.toString())!=null?v:null},...i._features.reduce((m,v)=>Object.assign(m,v.getDefaultColumnDef==null?void 0:v.getDefaultColumnDef()),{}),...f}},vr(t,"debugColumns")),_getColumnDefs:()=>i.options.columns,getAllColumns:yr(()=>[i._getColumnDefs()],f=>{const p=function(m,v,A){return A===void 0&&(A=0),m.map(x=>{const E=Ake(i,x,A,v),w=x;return E.columns=w.columns?p(w.columns,E,A+1):[],E})};return p(f)},vr(t,"debugColumns")),getAllFlatColumns:yr(()=>[i.getAllColumns()],f=>f.flatMap(p=>p.getFlatColumns()),vr(t,"debugColumns")),_getAllFlatColumnsById:yr(()=>[i.getAllFlatColumns()],f=>f.reduce((p,m)=>(p[m.id]=m,p),{}),vr(t,"debugColumns")),getAllLeafColumns:yr(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(f,p)=>{let m=f.flatMap(v=>v.getLeafColumns());return p(m)},vr(t,"debugColumns")),getColumn:f=>i._getAllFlatColumnsById()[f]};Object.assign(i,h);for(let f=0;f<i._features.length;f++){const p=i._features[f];p==null||p.createTable==null||p.createTable(i)}return i}function eNe(){return t=>yr(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(i,s,a){s===void 0&&(s=0);const o=[];for(let c=0;c<i.length;c++){const u=vke(t,t._getRowId(i[c],c,a),i[c],c,s,void 0,a?.id);if(n.flatRows.push(u),n.rowsById[u.id]=u,o.push(u),t.options.getSubRows){var l;u.originalSubRows=t.options.getSubRows(i[c],c),(l=u.originalSubRows)!=null&&l.length&&(u.subRows=r(u.originalSubRows,s+1,u))}}return o};return n.rows=r(e),n},vr(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function tNe(){return t=>yr(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const r=t.getState().sorting,i=[],s=r.filter(l=>{var c;return(c=t.getColumn(l.id))==null?void 0:c.getCanSort()}),a={};s.forEach(l=>{const c=t.getColumn(l.id);c&&(a[l.id]={sortUndefined:c.columnDef.sortUndefined,invertSorting:c.columnDef.invertSorting,sortingFn:c.getSortingFn()})});const o=l=>{const c=l.map(u=>({...u}));return c.sort((u,h)=>{for(let p=0;p<s.length;p+=1){var f;const m=s[p],v=a[m.id],A=v.sortUndefined,x=(f=m?.desc)!=null?f:!1;let E=0;if(A){const w=u.getValue(m.id),B=h.getValue(m.id),D=w===void 0,T=B===void 0;if(D||T){if(A==="first")return D?-1:1;if(A==="last")return D?1:-1;E=D&&T?0:D?A:-A}}if(E===0&&(E=v.sortingFn(u,h,m.id)),E!==0)return x&&(E*=-1),v.invertSorting&&(E*=-1),E}return u.index-h.index}),c.forEach(u=>{var h;i.push(u),(h=u.subRows)!=null&&h.length&&(u.subRows=o(u.subRows))}),c};return{rows:o(n.rows),flatRows:i,rowsById:n.rowsById}},vr(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}function oP(t,e){return t?nNe(t)?C.createElement(t,e):t:null}function nNe(t){return rNe(t)||typeof t=="function"||iNe(t)}function rNe(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function iNe(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function sNe(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=C.useState(()=>({current:Zke(e)})),[r,i]=C.useState(()=>n.current.initialState);return n.current.setOptions(s=>({...s,...t,state:{...r,...t.state},onStateChange:a=>{i(a),t.onStateChange==null||t.onStateChange(a)}})),n.current}const _Q=fr({base:"react-aria-Table",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});we.memo(function(e){const{className:n,tableHeaderElementId:r,variant:i="primary",size:s="md",dataBinding:a,data:o,apiUrlKey:l,customApiUrl:c,endpointPath:u,enableAsyncLoading:h=!1,dataMapping:f,apiParams:p,columns:m,columnGroups:v=[],paginationMode:A="pagination",itemsPerPage:x=500,height:E=400,heightMode:w="fixed",heightUnit:B="px",viewportHeight:D=50,rowHeight:T=38,overscan:M=10,sortColumn:R,sortDirection:k="ascending",enableResize:L=!0,onColumnsDetected:F,onItemsPerPageChange:z,isLoading:G,skeletonRowCount:V=5}=e,{data:q}=HF({dataBinding:a,componentName:"Table",fallbackData:[]}),O=a&&"source"in a&&"name"in a&&!("type"in a),H=!O&&a&&"type"in a&&a.type==="collection"||O,K=we.useMemo(()=>H&&q.length>0?(console.log(" Table: DataBinding  ",q.length,"items"),q):o,[H,q,o]),X=A||"pagination",re=K&&Array.isArray(K)&&K.length>0,J=h===!0&&!re&&!!l&&!!u&&(u?.trim().length??0)>0;we.useEffect(()=>{console.log(" Table isAsync :",{enableAsyncLoading:h,staticData:o&&`Array(${o.length})`,hasValidStaticData:re,apiUrlKey:l,endpointPath:u,isAsync:J})},[h,o,re,l,u,J]);const Z=X==="pagination",ee=we.useCallback((lt,_t)=>{if(!_t){const Pt=Array.isArray(lt)?lt:[];return{items:Pt,total:Pt.length}}try{const Pt=lt;let zt;if(_t.resultPath){const tn=Pt[_t.resultPath];Array.isArray(tn)?zt=tn:zt=Array.isArray(lt)?lt:[]}else zt=Array.isArray(lt)?lt:[];const Wn=zt.map((tn,cn)=>{const Zn=tn;return{...Zn,id:_t.idKey?Zn[_t.idKey]:Zn.id||cn}}),In=_t.totalKey&&Pt[_t.totalKey]||zt.length;return{items:Wn,total:In}}catch(Pt){console.error(" Data mapping error:",Pt);const zt=Array.isArray(lt)?lt:[];return{items:zt,total:zt.length}}},[]),te=we.useMemo(()=>{switch(w){case"auto":return"auto";case"fixed":return`${E}${B}`;case"viewport":return`${D}vh`;case"full":return"100vh";default:return`${E}px`}},[w,E,B,D]),oe=we.useMemo(()=>!R||R===""?[]:[{id:String(R),desc:k==="descending"}],[R,k]),[ae,se]=we.useState(oe),[fe,Ee]=we.useState([]),Be=we.useCallback(lt=>{if(!lt||lt.length===0)return[];const _t=lt[0];return Object.keys(_t).map(zt=>({key:zt,label:zt.charAt(0).toUpperCase()+zt.slice(1).replace(/_/g," "),allowsSorting:!0,enableResizing:!0,width:150,align:"left",elementId:js.generateId()}))},[]);we.useEffect(()=>{if(!J&&m.length===0&&K&&K.length>0&&fe.length===0){const lt=Be(K);Ee(lt),console.log(" Static    :",lt),F&&F(lt)}},[K,m.length,J,Be,F,fe.length]);const _e=we.useMemo(()=>{const lt=m.length>0?m:fe;if(lt.length===0)return[];const _t=fke();if(v.length===0)return lt.map(cn=>_t.accessor(String(cn.key),{id:String(cn.key),header:()=>d.jsx("span",{style:{fontWeight:"500",fontSize:"13px",color:"#374151"},children:cn.label}),size:cn.width??150,minSize:cn.minWidth,maxSize:cn.maxWidth,enableSorting:cn.allowsSorting??!0,enableResizing:cn.enableResizing??!0,cell:Zn=>{const pr=Zn.getValue();return pr&&typeof pr=="object"&&!we.isValidElement(pr)?JSON.stringify(pr):pr}}));const Pt=[];let zt=0;const Wn=[...v].sort((tn,cn)=>tn.order_num!==void 0&&cn.order_num!==void 0?tn.order_num-cn.order_num:tn.span-cn.span),In=[...lt].sort((tn,cn)=>tn.order_num!==void 0&&cn.order_num!==void 0?tn.order_num-cn.order_num:0);for(const tn of Wn){const cn=In.slice(zt,zt+tn.span);if(cn.length>0){const Zn=cn.map(zr=>_t.accessor(String(zr.key),{id:String(zr.key),header:()=>d.jsx("span",{style:{},children:zr.label}),size:zr.width??150,minSize:zr.minWidth,maxSize:zr.maxWidth,enableSorting:zr.allowsSorting??!0,enableResizing:zr.enableResizing??!0,cell:qi=>{const Nr=qi.getValue();return Nr&&typeof Nr=="object"&&!we.isValidElement(Nr)?JSON.stringify(Nr):Nr}})),pr=_t.group({id:`group-${tn.id}`,header:()=>d.jsx("span",{style:{color:tn.variant==="primary"?"#ffffff":"#374151",backgroundColor:tn.variant==="primary"?"#3b82f6":tn.variant==="secondary"?"#6b7280":"#f8fafc",textAlign:tn.align||"center"},children:tn.label}),columns:Zn,meta:{isGroupHeader:!0,align:tn.align||"center",variant:tn.variant||"default",sticky:tn.sticky||!1,elementId:tn.id}});Pt.push(pr)}zt+=tn.span}if(zt<In.length){const tn=In.slice(zt);for(const cn of tn)Pt.push(_t.accessor(String(cn.key),{id:String(cn.key),header:()=>d.jsx("span",{style:{fontWeight:"500",fontSize:"13px",color:"#374151"},children:cn.label}),size:cn.width??150,minSize:cn.minWidth,maxSize:cn.maxWidth,enableSorting:cn.allowsSorting??!0,enableResizing:cn.enableResizing??!0,cell:Zn=>{const pr=Zn.getValue();return pr&&typeof pr=="object"&&!we.isValidElement(pr)?JSON.stringify(pr):pr}}))}return Pt},[m,v,fe]),Ce=we.useMemo(()=>m.length>0?m:fe,[m,fe]),[Se,Me]=we.useState(0),[ce,$e]=we.useState(null),[qe,ft]=we.useState([]),[Ie,ht]=we.useState(x),[Ue,xt]=we.useState([]),[ve,ue]=we.useState(void 0),[ke,He]=we.useState(!0),[Qe,Ke]=we.useState(!1),[jt,St]=we.useState(0),Zt=we.useMemo(()=>{if(J||!K)return K||[];if(X!=="pagination")return K;const lt=jt*Ie,_t=lt+Ie;return K.slice(lt,_t)},[J,K,X,jt,Ie]),Bt=we.useMemo(()=>J||!K?0:Math.ceil(K.length/Ie),[J,K,Ie]);we.useEffect(()=>{ht(x)},[x]),we.useEffect(()=>{if(J&&m.length===0&&qe&&qe.length>0&&fe.length===0){const lt=Be(qe);Ee(lt),console.log(" API    :",lt),F&&F(lt)}},[qe,m.length,J,Be,F,fe.length]);const at=we.useRef(!1),pt=we.useCallback(async(lt,_t)=>{if(!J||!l||!u)return console.log(" fetchPage :",{isAsync:J,apiUrlKey:l,endpointPath:u}),{items:[],total:0};if(console.log(" fetchPage :",{apiUrlKey:l,endpointPath:u,nextIndex:lt,pageSize:_t,availableKeys:Object.keys(kw)}),at.current)return console.log(" Fetch already in progress, skipping..."),{items:[],total:0};const Pt=l==="CUSTOM",zt=Pt?null:kw[l];if(!Pt&&!zt)return console.error(" API    :",{apiUrlKey:l,availableKeys:Object.keys(kw)}),{items:[],total:0};if(Pt&&!c)return console.error(" Custom URL  "),{items:[],total:0};at.current=!0,Ke(!0);try{const Wn=ae[0]?{sortBy:ae[0].id,desc:ae[0].desc}:void 0,In=_t??Ie,tn={...p||{},...Wn,page:lt+1,limit:In};console.log(" API  :",tn,"nextIndex:",lt);let cn;if(Pt&&c){const Nr=`${c}${u}`,Yn=new URLSearchParams(Object.entries(tn).reduce((oo,[Nc,Ad])=>(oo[Nc]=String(Ad),oo),{})).toString(),Ii=Yn?`${Nr}?${Yn}`:Nr;console.log(" Custom API :",Ii);const bs=await fetch(Ii);if(!bs.ok)throw new Error(`HTTP ${bs.status}: ${bs.statusText}`);cn=await bs.json()}else if(zt)cn=await zt(u,tn);else throw new Error("API   ");console.log(" API :",{responseType:Array.isArray(cn)?"Array":typeof cn,responseLength:Array.isArray(cn)?cn.length:"N/A",dataMapping:f});const{items:Zn,total:pr}=ee(cn,f);if(console.log(" processApiResponse :",{itemsLength:Zn.length,total:pr,firstItem:Zn[0]}),m.length===0&&Zn.length>0){const Nr=Be(Zn);Ee(Nr),console.log("   :",Nr),F&&F(Nr)}else console.log("    :",{columnsLength:m.length,itemsLength:Zn.length});const zr=cn.__meta;let qi=pr;return zr&&typeof zr.totalItems=="number"&&(qi=zr.totalItems,console.log(" API   (Pagination):",{totalItems:zr.totalItems,currentPage:zr.currentPage,itemsPerPage:zr.itemsPerPage})),{items:Zn,total:qi}}finally{Ke(!1),at.current=!1}},[J,l,c,u,Ie,ae,ee,f,p,m.length,Be,Ee,F]),Vt=we.useCallback(async lt=>{if(!J||!l||!u)return{items:[],nextCursor:void 0};if(at.current)return console.log(" Fetch already in progress, skipping..."),{items:[],nextCursor:void 0};const _t=l==="CUSTOM",Pt=_t?null:kw[l];at.current=!0,Ke(!0);try{const zt=lt?parseInt(lt,10):1,Wn=ae[0]?{sortBy:ae[0].id,desc:ae[0].desc}:void 0,In={page:zt,limit:Ie,...Wn};let tn;if(_t&&c){const pr=`${c}${u}`,zr=new URLSearchParams(Object.entries(In).reduce((Yn,[Ii,bs])=>(Yn[Ii]=String(bs),Yn),{})).toString(),qi=zr?`${pr}?${zr}`:pr;console.log(" Custom API  (fetchMore):",qi);const Nr=await fetch(qi);if(!Nr.ok)throw new Error(`HTTP ${Nr.status}: ${Nr.statusText}`);tn=await Nr.json()}else if(Pt)tn=await Pt(u,In);else throw new Error("API   ");console.log(" API  (fetchMore):",{responseType:Array.isArray(tn)?"Array":typeof tn,responseLength:Array.isArray(tn)?tn.length:"N/A",dataMapping:f});const{items:cn}=ee(tn,f);if(console.log(" processApiResponse  (fetchMore):",{itemsLength:cn.length,firstItem:cn[0]}),m.length===0&&cn.length>0){const pr=Be(cn);Ee(pr),console.log("    (fetchMore):",pr),F&&F(pr)}else console.log("     (fetchMore):",{columnsLength:m.length,itemsLength:cn.length});if(!cn||cn.length===0)return{items:[],nextCursor:void 0};const Zn=cn.length===Ie?String(zt+1):void 0;return{items:cn,nextCursor:Zn}}finally{Ke(!1),at.current=!1}},[J,l,c,u,Ie,ae,ee,f,m.length,Be,Ee,F]),qt=we.useRef(null),Wt=we.useRef(!1),gn=we.useRef(X),Ne=we.useRef({apiUrlKey:l,customApiUrl:c,endpointPath:u,isAsync:J}),Ht=we.useRef(K);we.useEffect(()=>{Ht.current!==K&&(Ht.current=K,Ee([]),console.log(" Static    -    "))},[K]),we.useEffect(()=>{const lt=gn.current!==X,_t=Ne.current.apiUrlKey!==l||Ne.current.customApiUrl!==c||Ne.current.endpointPath!==u||Ne.current.isAsync!==J;if((lt||_t)&&(Wt.current=!1,gn.current=X,Ne.current={apiUrlKey:l,customApiUrl:c,endpointPath:u,isAsync:J},ft([]),xt([]),Me(0),$e(null),ue(void 0),He(!0),Ee([]),console.log("     -    ")),!J){console.log(" isAsync=false, API  ");return}if(!l||!u||u.trim().length===0){console.log(" API  , API  :",{apiUrlKey:l,endpointPath:u});return}if(Wt.current){console.log(" Initial load already in progress, skipping duplicate effect");return}Wt.current=!0,X==="pagination"?(async()=>{const{items:Pt,total:zt}=await pt(0);ft(Pt),Me(0),$e(Math.max(1,Math.ceil((zt||0)/Ie))),Wt.current=!1})():(async()=>{xt([]),ue(void 0),He(!0);const{items:Pt,nextCursor:zt}=await Vt("1");xt(Pt),ue(zt),He(!!zt),qt.current&&zt&&setTimeout(()=>{if(!qt.current)return;const Wn=qt.current;Wn.scrollHeight<=Wn.clientHeight+10&&(console.log(" Loading more to fill viewport: page 2"),Vt(zt).then(In=>{xt(tn=>[...tn,...In.items]),ue(In.nextCursor),He(!!In.nextCursor)}))},100),Wt.current=!1})()},[J,X,Ie,l,c,u,h]);const Qt=we.useMemo(()=>{if(K){if(ae.length===0)return K;const lt=ae[0],_t=lt?.id;return[...K].sort((zt,Wn)=>{const In=zt[_t],tn=Wn[_t];return In==null&&tn==null?0:In==null?-1:tn==null?1:In<tn?lt.desc?1:-1:In>tn?lt.desc?-1:1:0})}return!J&&X==="pagination"?Zt:X==="pagination"?qe:Ue},[K,ae,X,qe,Ue,J,Zt]),$t=sNe({data:Qt,columns:_e,state:{sorting:ae},onSortingChange:se,getCoreRowModel:eNe(),getSortedRowModel:tNe(),enableColumnResizing:L,columnResizeMode:"onChange",debugTable:!1,manualSorting:!1}),It=$t.getRowModel().rows,Ct=Gae({count:It.length,estimateSize:()=>T,getScrollElement:()=>qt.current,measureElement:typeof window<"u"&&navigator.userAgent.indexOf("Firefox")===-1?lt=>lt?.getBoundingClientRect().height:void 0,overscan:Math.max(M,5)}),ln=we.useCallback(lt=>{if(!J||X!=="infinite"||!lt||!ke||Qe)return;const{scrollHeight:_t,scrollTop:Pt,clientHeight:zt}=lt;_t-Pt-zt<500&&(console.log(" Scroll triggered load"),(async()=>{const Wn=ve??"1",{items:In,nextCursor:tn}=await Vt(Wn);xt(cn=>[...cn,...In]),ue(tn),He(!!tn)})())},[J,X,ke,ve,Qe,Vt]);if(G){const lt=Math.max(m.length,3);return d.jsx("div",{className:_Q({variant:i,size:s,className:n}),role:"grid","aria-busy":"true","aria-label":"Loading table...",children:d.jsx("div",{className:"react-aria-TableVirtualizer",style:{height:te,overflow:"hidden"},children:d.jsxs("table",{style:{display:"grid",width:"100%"},children:[d.jsx("thead",{className:"react-aria-TableHeader",style:{display:"grid"},children:d.jsx("tr",{className:"react-aria-Row",style:{display:"flex",width:"100%"},children:Array.from({length:lt}).map((_t,Pt)=>d.jsx("th",{className:"react-aria-Column",style:{flex:1,padding:"8px 12px"},children:d.jsx(Pp,{variant:"text",width:"60%",height:16})},Pt))})}),d.jsx("tbody",{className:"react-aria-TableBody",style:{display:"grid"},children:Array.from({length:V}).map((_t,Pt)=>d.jsx("tr",{className:"react-aria-Row",style:{display:"flex",width:"100%"},children:Array.from({length:lt}).map((zt,Wn)=>d.jsx("td",{className:"react-aria-Cell",style:{flex:1,padding:"8px 12px"},children:d.jsx(Pp,{componentVariant:"table-cell",size:s,index:Pt})},Wn))},Pt))})]})})})}return d.jsxs(d.Fragment,{children:[d.jsx("div",{"data-element-id":e["data-element-id"],className:_Q({variant:i,size:s,className:n}),role:"grid","aria-rowcount":It.length,"aria-colcount":$t.getAllLeafColumns().length,children:d.jsx("div",{ref:qt,className:"react-aria-TableVirtualizer",onScroll:lt=>ln(lt.currentTarget),style:{height:te,overflow:"auto",position:"relative"},children:d.jsxs("table",{style:{display:"grid"},children:[d.jsx("thead",{className:"react-aria-TableHeader react-aria-Resizable",role:"rowgroup","data-element-id":r,style:{display:"grid",position:"sticky",top:0,zIndex:1},children:$t.getHeaderGroups().map(lt=>{const _t=lt.headers.filter(zt=>zt.column.columnDef.meta?.isGroupHeader===!0),Pt=lt.headers.filter(zt=>zt.column.columnDef.meta?.isGroupHeader!==!0);return d.jsxs(we.Fragment,{children:[_t.length>0&&d.jsx("tr",{className:"react-aria-Row column-group-row",role:"row",style:{display:"flex",width:"100%"},children:_t.map((zt,Wn)=>{const In=zt.column.columnDef.meta,tn=In?.align||"center",cn=In?.variant||"default",Zn=In?.elementId;return d.jsx("th",{className:"react-aria-Column column-group-header",role:"columnheader","data-element-id":Zn,"aria-colindex":Wn+1,colSpan:zt.colSpan,style:{justifyContent:tn==="center"?"center":tn==="right"?"flex-end":"flex-start",textAlign:tn,width:zt.getSize(),minWidth:zt.getSize(),backgroundColor:cn==="primary"?"#3b82f6":cn==="secondary"?"#6b7280":"#f8fafc",color:cn!=="default"?"#ffffff":"#374151"},children:oP(zt.column.columnDef.header,zt.getContext())},zt.id)})}),Pt.length>0&&d.jsx("tr",{className:"react-aria-Row individual-column-row",role:"row",style:{display:"flex",width:"100%"},children:Pt.map((zt,Wn)=>{const In=Ce.find(pr=>String(pr.key)===zt.column.id),tn=In?.align??"left",cn=zt.column.getIsSorted(),Zn=In?.elementId;return d.jsxs("th",{className:"react-aria-Column individual-column",role:"columnheader","data-element-id":Zn,"aria-colindex":Wn+1,"aria-sort":cn==="asc"?"ascending":cn==="desc"?"descending":"none",colSpan:zt.colSpan,style:{justifyContent:tn==="center"?"center":tn==="right"?"flex-end":"flex-start",textAlign:tn,width:zt.getSize(),minWidth:zt.getSize()},children:[d.jsxs("div",{className:`flex items-center gap-2 ${zt.column.getCanSort()?"cursor-pointer select-none hover:text-blue-600":""}`,onClick:zt.column.getToggleSortingHandler(),onKeyDown:pr=>{(pr.key==="Enter"||pr.key===" ")&&(pr.preventDefault(),zt.column.toggleSorting())},tabIndex:0,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"inherit",gap:"8px"},children:[d.jsx("span",{style:{fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit"},children:oP(zt.column.columnDef.header,zt.getContext())}),zt.column.getIsSorted()==="asc"?d.jsx(y_,{size:16,style:{color:"#3b82f6"}}):zt.column.getIsSorted()==="desc"?d.jsx(zs,{size:16,style:{color:"#3b82f6"}}):null]}),L&&zt.column.getCanResize()&&d.jsx("div",{role:"separator","aria-orientation":"vertical","aria-label":"Resize column",onMouseDown:zt.getResizeHandler(),onTouchStart:zt.getResizeHandler(),className:"react-aria-ColumnResizer"})]},zt.id)})})]},lt.id)})}),d.jsx("tbody",{className:"react-aria-TableBody",role:"rowgroup",style:{display:"grid",height:`${Ct.getTotalSize()}px`,position:"relative"},children:Ct.getVirtualItems().map(lt=>{const _t=It[lt.index];return _t?d.jsx("tr",{className:"react-aria-Row",role:"row","aria-rowindex":lt.index+1,ref:Pt=>Ct.measureElement?.(Pt),style:{display:"flex",position:"absolute",transform:`translateY(${lt.start}px)`,width:"100%"},tabIndex:0,children:_t.getVisibleCells().map((Pt,zt)=>{const Wn=Ce.find(In=>String(In.key)===Pt.column.id)?.align??"left";return d.jsx("td",{className:"react-aria-Cell",role:"gridcell","aria-colindex":zt+1,style:{textAlign:Wn,width:Pt.column.getSize()},children:oP(Pt.column.columnDef.cell,Pt.getContext())},Pt.id)})},_t.id):null})})]})})}),Z&&(J&&ce!==null||K&&K.length>0)&&d.jsx("div",{className:"react-aria-Pagination",children:J&&ce!==null?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"react-aria-PageInfo",children:[Se*Ie+1," to"," ",Math.min((Se+1)*Ie,qe.length+Se*Ie)," ","of ",ce*Ie," entries"]}),d.jsxs("div",{className:"react-aria-PageNavigation",children:[d.jsx(Xn,{onClick:async()=>{const{items:lt,total:_t}=await pt(0,Ie);ft(lt),Me(0),$e(Math.max(1,Math.ceil((_t||0)/Ie)))},isDisabled:Se===0||Qe,className:"react-aria-PageButton","aria-label":"First page",size:"sm",children:d.jsx(VO,{size:16})}),d.jsx(Xn,{onClick:async()=>{const lt=Math.max(0,Se-1),{items:_t}=await pt(lt,Ie);ft(_t),Me(lt)},isDisabled:Se===0||Qe,className:"react-aria-PageButton","aria-label":"Previous page",size:"sm",children:d.jsx(A_,{size:16})}),d.jsx("div",{className:"react-aria-PageNumbers",children:(()=>{const lt=ce,_t=Se+1,Pt=5;let zt=Math.max(1,_t-Math.floor(Pt/2));const Wn=Math.min(lt,zt+Pt-1);Wn-zt<Pt-1&&(zt=Math.max(1,Wn-Pt+1));const In=[];for(let tn=zt;tn<=Wn;tn++)In.push(d.jsx(Xn,{onClick:async()=>{const cn=tn-1,{items:Zn}=await pt(cn,Ie);ft(Zn),Me(cn)},isDisabled:Qe,className:`react-aria-PageButton ${tn===_t?"active":""}`,size:"sm",children:tn},tn));return In})()}),d.jsx(Xn,{onClick:async()=>{const lt=Math.min((ce??1)-1,Se+1),{items:_t}=await pt(lt,Ie);ft(_t),Me(lt)},isDisabled:ce===0||Se>=ce-1||Qe,className:"react-aria-PageButton","aria-label":"Next page",size:"sm",children:d.jsx(Sl,{size:16})}),d.jsx(Xn,{onClick:async()=>{const lt=(ce??1)-1,{items:_t}=await pt(lt,Ie);ft(_t),Me(lt)},isDisabled:ce===0||Se>=ce-1||Qe,className:"react-aria-PageButton","aria-label":"Last page",size:"sm",children:d.jsx(LD,{size:16})})]}),d.jsxs("div",{className:"react-aria-GoToPage",children:[d.jsx("label",{htmlFor:"go-to-page-input",className:"react-aria-GoToPageLabel",children:"Go to:"}),d.jsx("input",{id:"go-to-page-input",type:"number",min:"1",max:ce,value:Se+1,onChange:lt=>{const _t=Math.max(1,Math.min(ce,Number(lt.target.value)));Me(_t-1)},onKeyDown:async lt=>{if(lt.key==="Enter"){const _t=Math.max(1,Math.min(ce,Number(lt.currentTarget.value))),{items:Pt}=await pt(_t-1,Ie);ft(Pt),Me(_t-1)}},disabled:Qe,className:"react-aria-GoToPageInput"}),d.jsx(Xn,{onClick:async()=>{const lt=Math.max(1,Math.min(ce,Se+1)),{items:_t}=await pt(lt-1,Ie);ft(_t),Me(lt-1)},isDisabled:Qe,className:"react-aria-GoToPageButton",size:"sm",children:d.jsx(LD,{size:16})})]}),d.jsx("div",{className:"react-aria-PageSizeSelector",children:d.jsx(JT,{id:"page-size-select",selectedKey:Ie.toString(),onSelectionChange:async lt=>{const _t=Number(lt);ht(_t);const{items:Pt,total:zt}=await pt(0,_t);ft(Pt),Me(0),$e(Math.max(1,Math.ceil((zt||0)/_t))),z&&z(_t)},isDisabled:Qe,className:"react-aria-PageSizeSelect",items:[{value:5,label:"5"},{value:10,label:"10"},{value:20,label:"20"},{value:50,label:"50"},{value:100,label:"100"}],children:lt=>d.jsx(Ux,{id:lt.value.toString(),children:lt.label},lt.value)})}),Qe&&d.jsx("span",{className:"react-aria-LoadingText",children:"Loading"})]}):K?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"react-aria-PageInfo",children:[jt*Ie+1," to"," ",Math.min((jt+1)*Ie,K.length)," ","of ",K.length," entries"]}),d.jsxs("div",{className:"react-aria-PageNavigation",children:[d.jsx(Xn,{onClick:()=>St(0),isDisabled:jt===0,className:"react-aria-PageButton","aria-label":"First page",size:"sm",children:d.jsx(VO,{size:16})}),d.jsx(Xn,{onClick:()=>St(Math.max(0,jt-1)),isDisabled:jt===0,className:"react-aria-PageButton","aria-label":"Previous page",size:"sm",children:d.jsx(A_,{size:16})}),d.jsx("div",{className:"react-aria-PageNumbers",children:(()=>{const lt=Bt,_t=jt+1,Pt=5;let zt=Math.max(1,_t-Math.floor(Pt/2));const Wn=Math.min(lt,zt+Pt-1);Wn-zt<Pt-1&&(zt=Math.max(1,Wn-Pt+1));const In=[];for(let tn=zt;tn<=Wn;tn++)In.push(d.jsx(Xn,{onClick:()=>St(tn-1),className:`react-aria-PageButton ${tn===_t?"active":""}`,size:"sm",children:tn},tn));return In})()}),d.jsx(Xn,{onClick:()=>St(Math.min(Bt-1,jt+1)),isDisabled:jt>=Bt-1,className:"react-aria-PageButton","aria-label":"Next page",size:"sm",children:d.jsx(Sl,{size:16})}),d.jsx(Xn,{onClick:()=>St(Bt-1),isDisabled:jt>=Bt-1,className:"react-aria-PageButton","aria-label":"Last page",size:"sm",children:d.jsx(LD,{size:16})})]}),d.jsxs("div",{className:"react-aria-GoToPage",children:[d.jsx("label",{htmlFor:"go-to-page-input",className:"react-aria-GoToPageLabel",children:"Go to:"}),d.jsx("input",{id:"go-to-page-input",type:"number",min:"1",max:Bt,value:jt+1,onChange:lt=>{const _t=Math.max(1,Math.min(Bt,Number(lt.target.value)));St(_t-1)},className:"react-aria-GoToPageInput"})]}),d.jsx("div",{className:"react-aria-PageSizeSelector",children:d.jsx(JT,{id:"page-size-select",selectedKey:Ie.toString(),onSelectionChange:lt=>{const _t=Number(lt);ht(_t),St(0),z&&z(_t)},className:"react-aria-PageSizeSelect",items:[{value:5,label:"5"},{value:10,label:"10"},{value:20,label:"20"},{value:50,label:"50"},{value:100,label:"100"}],children:lt=>d.jsx(Ux,{id:lt.value.toString(),children:lt.label},lt.value)})})]}):null})]})});fr({base:"react-aria-Card",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface",elevated:"elevated",outlined:"outlined",gallery:"gallery",quiet:"quiet"},size:{sm:"sm",md:"md",lg:"lg"},orientation:{horizontal:"horizontal",vertical:"vertical"},isQuiet:{true:"quiet"},isDisabled:{true:"disabled"},isSelectable:{true:"selectable"},isSelected:{true:"selected"},isFocused:{true:"focused"}},defaultVariants:{variant:"default",size:"md",orientation:"vertical"}});fr({base:"react-aria-Menu",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fr({base:"react-aria-Tooltip",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fr({base:"react-aria-ProgressBar",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"default",size:"md"}});fr({base:"react-aria-Meter",variants:{variant:{default:"",primary:"primary",secondary:"secondary",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"default",size:"md"}});fr({base:"react-aria-Separator",variants:{variant:{default:"",dashed:"dashed",dotted:"dotted"},size:{sm:"sm",md:"md",lg:"lg"},orientation:{horizontal:"horizontal",vertical:"vertical"}},defaultVariants:{variant:"default",size:"md",orientation:"horizontal"}});fr({base:"react-aria-Breadcrumbs",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fr({base:"react-aria-Link",variants:{variant:{primary:"primary",secondary:"secondary"},size:{sm:"sm",md:"md",lg:"lg"},isFocusVisible:{true:"focus-visible",false:""},isExternal:{true:"external",false:""}},defaultVariants:{variant:"primary",size:"md"}});fr({base:"react-aria-Dialog",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});fr({base:"react-aria-Modal",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});const aNe=fr({base:"react-aria-Popover",variants:{variant:{primary:"primary",secondary:"secondary",tertiary:"tertiary",error:"error",filled:"filled",surface:"surface"},size:{sm:"sm",md:"md",lg:"lg"}},defaultVariants:{variant:"primary",size:"md"}});function j_({children:t,variant:e="primary",size:n="md",showArrow:r=!0,containFocus:i=!1,autoFocus:s=!0,restoreFocus:a=!0,...o}){const l=Vy(o.className,(c,u)=>aNe({...u,variant:e,size:n,className:c}));return d.jsxs(gs,{...o,className:l,children:[r&&d.jsx(I3e,{children:d.jsx("svg",{width:12,height:12,viewBox:"0 0 12 12",children:d.jsx("path",{d:"M0 0 L6 6 L12 0"})})}),d.jsx(gse,{children:d.jsx(AF,{contain:i,autoFocus:s,restoreFocus:a,children:t})})]})}const toe=[{type:"Button",label:"Button",category:"Actions",icon:"",inspector:{hasCustomEditor:!0,editorName:"ButtonEditor",dataBindingType:null,supportedEvents:["onPress","onClick","onMouseEnter","onMouseLeave","onFocus","onBlur","onKeyDown","onKeyUp"]}},{type:"ToggleButton",label:"Toggle Button",category:"Actions",icon:"",inspector:{hasCustomEditor:!0,editorName:"ToggleButtonEditor",dataBindingType:null,supportedEvents:["onChange","onPress","onClick","onMouseEnter","onMouseLeave","onFocus","onBlur","onKeyDown","onKeyUp"]}},{type:"ToggleButtonGroup",label:"Toggle Button Group",category:"Actions",icon:"",inspector:{hasCustomEditor:!0,editorName:"ToggleButtonGroupEditor",dataBindingType:"collection",supportedEvents:["onChange","onFocus","onBlur"]}},{type:"Menu",label:"Menu",category:"Actions",icon:"",inspector:{hasCustomEditor:!0,editorName:"MenuEditor",dataBindingType:"collection",supportedEvents:["onAction","onSelectionChange","onOpenChange","onFocus","onBlur"]}},{type:"Toolbar",label:"Toolbar",category:"Actions",icon:"",inspector:{hasCustomEditor:!0,editorName:"ToolbarEditor",dataBindingType:null,supportedEvents:["onFocus","onBlur"]}},{type:"Link",label:"Link",category:"Actions",icon:"",inspector:{hasCustomEditor:!0,editorName:"LinkEditor",dataBindingType:null,supportedEvents:["onPress","onClick","onMouseEnter","onMouseLeave","onFocus","onBlur","onKeyDown","onKeyUp"]}},{type:"TextField",label:"Text Field",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"TextFieldEditor",dataBindingType:"value",supportedEvents:["onChange","onFocus","onBlur","onKeyDown","onKeyUp"]}},{type:"NumberField",label:"Number Field",category:"Inputs",icon:"#",inspector:{hasCustomEditor:!0,editorName:"NumberFieldEditor",dataBindingType:"value",supportedEvents:["onChange","onFocus","onBlur","onKeyDown","onKeyUp"]}},{type:"SearchField",label:"Search Field",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"SearchFieldEditor",dataBindingType:"value",supportedEvents:["onChange","onSubmit","onFocus","onBlur","onKeyDown","onKeyUp"]}},{type:"Checkbox",label:"Checkbox",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"CheckboxEditor",dataBindingType:"value",supportedEvents:["onChange","onFocus","onBlur","onKeyDown","onKeyUp","onMouseEnter","onMouseLeave"]}},{type:"CheckboxGroup",label:"Checkbox Group",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"CheckboxGroupEditor",dataBindingType:"collection",supportedEvents:["onChange","onFocus","onBlur"]}},{type:"Radio",label:"Radio",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"RadioEditor",dataBindingType:"value",supportedEvents:["onFocus","onBlur","onKeyDown","onKeyUp","onMouseEnter","onMouseLeave"]}},{type:"RadioGroup",label:"Radio Group",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"RadioGroupEditor",dataBindingType:"collection",supportedEvents:["onChange","onFocus","onBlur"]}},{type:"Select",label:"Select",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"SelectEditor",dataBindingType:"collection",supportedEvents:["onSelectionChange","onOpenChange","onFocus","onBlur","onKeyDown","onKeyUp"]}},{type:"ComboBox",label:"Combo Box",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"ComboBoxEditor",dataBindingType:"collection",supportedEvents:["onSelectionChange","onOpenChange","onFocus","onBlur","onKeyDown","onKeyUp"]}},{type:"Switch",label:"Switch",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"SwitchEditor",dataBindingType:"value",supportedEvents:["onChange","onFocus","onBlur","onKeyDown","onKeyUp","onMouseEnter","onMouseLeave"]}},{type:"Slider",label:"Slider",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"SliderEditor",dataBindingType:"value",supportedEvents:["onChange","onFocus","onBlur","onKeyDown","onKeyUp","onMouseEnter","onMouseLeave"]}},{type:"TailSwatch",label:"Color Picker",category:"Inputs",icon:"",inspector:{hasCustomEditor:!0,editorName:"TailSwatchEditor",dataBindingType:"value",supportedEvents:["onChange","onFocus","onBlur"]}},{type:"Table",label:"Table",category:"Data Display",icon:"",inspector:{hasCustomEditor:!0,editorName:"TableEditor",dataBindingType:"collection",supportedEvents:["onSelectionChange","onAction","onFocus","onBlur"]}},{type:"ListBox",label:"List Box",category:"Data Display",icon:"",inspector:{hasCustomEditor:!0,editorName:"ListBoxEditor",dataBindingType:"collection",supportedEvents:["onSelectionChange","onAction","onFocus","onBlur"]}},{type:"GridList",label:"Grid List",category:"Data Display",icon:"",inspector:{hasCustomEditor:!0,editorName:"GridListEditor",dataBindingType:"collection",supportedEvents:["onSelectionChange","onAction","onFocus","onBlur"]}},{type:"Tree",label:"Tree",category:"Data Display",icon:"",inspector:{hasCustomEditor:!0,editorName:"TreeEditor",dataBindingType:"collection",supportedEvents:["onSelectionChange","onFocus","onBlur"]}},{type:"TagGroup",label:"Tag Group",category:"Data Display",icon:"",inspector:{hasCustomEditor:!0,editorName:"TagGroupEditor",dataBindingType:"collection",supportedEvents:["onSelectionChange","onFocus","onBlur"]}},{type:"Tooltip",label:"Tooltip",category:"Feedback",icon:"",inspector:{hasCustomEditor:!0,editorName:"TooltipEditor",dataBindingType:null,supportedEvents:["onOpenChange","onMouseEnter","onMouseLeave"]}},{type:"ProgressBar",label:"Progress Bar",category:"Feedback",icon:"",inspector:{hasCustomEditor:!0,editorName:"ProgressBarEditor",dataBindingType:"value",supportedEvents:[]}},{type:"Meter",label:"Meter",category:"Feedback",icon:"",inspector:{hasCustomEditor:!0,editorName:"MeterEditor",dataBindingType:"value",supportedEvents:[]}},{type:"Badge",label:"Badge",category:"Feedback",icon:"",inspector:{hasCustomEditor:!0,editorName:"BadgeEditor",dataBindingType:null,supportedEvents:[]}},{type:"Panel",label:"Panel",category:"Layout",icon:"",inspector:{hasCustomEditor:!0,editorName:"PanelEditor",dataBindingType:null,supportedEvents:["onClick","onMouseEnter","onMouseLeave","onFocus","onBlur"]}},{type:"Card",label:"Card",category:"Layout",icon:"",inspector:{hasCustomEditor:!0,editorName:"CardEditor",dataBindingType:null,supportedEvents:["onClick","onMouseEnter","onMouseLeave","onFocus","onBlur"]}},{type:"Tabs",label:"Tabs",category:"Layout",icon:"",inspector:{hasCustomEditor:!0,editorName:"TabsEditor",dataBindingType:null,supportedEvents:["onSelectionChange","onFocus","onBlur"]}},{type:"Breadcrumbs",label:"Breadcrumbs",category:"Layout",icon:"",inspector:{hasCustomEditor:!0,editorName:"BreadcrumbsEditor",dataBindingType:null,supportedEvents:["onAction","onFocus","onBlur"]}},{type:"Separator",label:"Separator",category:"Layout",icon:"",inspector:{hasCustomEditor:!0,editorName:"SeparatorEditor",dataBindingType:null,supportedEvents:[]}},{type:"Group",label:"Group",category:"Layout",icon:"",inspector:{hasCustomEditor:!0,editorName:"GroupEditor",dataBindingType:null,supportedEvents:["onFocus","onBlur"]}},{type:"body",label:"Body",category:"Layout",icon:"",inspector:{hasCustomEditor:!0,editorName:void 0,dataBindingType:null,supportedEvents:[]}},{type:"Slot",label:"Slot",category:"Layout",icon:"",inspector:{hasCustomEditor:!0,editorName:"SlotEditor",dataBindingType:null,supportedEvents:[]}},{type:"Dialog",label:"Dialog",category:"Overlays",icon:"",inspector:{hasCustomEditor:!0,editorName:"DialogEditor",dataBindingType:null,supportedEvents:["onOpenChange","onFocus","onBlur"]}},{type:"Modal",label:"Modal",category:"Overlays",icon:"",inspector:{hasCustomEditor:!0,editorName:"ModalEditor",dataBindingType:null,supportedEvents:["onOpenChange"]}},{type:"Popover",label:"Popover",category:"Overlays",icon:"",inspector:{hasCustomEditor:!0,editorName:"PopoverEditor",dataBindingType:null,supportedEvents:["onOpenChange"]}},{type:"Calendar",label:"Calendar",category:"Date & Time",icon:"",inspector:{hasCustomEditor:!0,editorName:"CalendarEditor",dataBindingType:"value",supportedEvents:["onChange","onFocus","onBlur"]}},{type:"DatePicker",label:"Date Picker",category:"Date & Time",icon:"",inspector:{hasCustomEditor:!0,editorName:"DatePickerEditor",dataBindingType:"value",supportedEvents:["onChange","onOpenChange","onFocus","onBlur"]}},{type:"DateRangePicker",label:"Date Range Picker",category:"Date & Time",icon:"",inspector:{hasCustomEditor:!0,editorName:"DateRangePickerEditor",dataBindingType:"value",supportedEvents:["onChange","onOpenChange","onFocus","onBlur"]}},{type:"TimeField",label:"Time Field",category:"Date & Time",icon:"",inspector:{hasCustomEditor:!0,editorName:"TimeFieldEditor",dataBindingType:"value",supportedEvents:["onChange","onFocus","onBlur"]}},{type:"MenuItem",label:"Menu Item",category:"Items",icon:"",inspector:{hasCustomEditor:!0,editorName:"MenuItemEditor",dataBindingType:null,supportedEvents:["onAction","onMouseEnter","onMouseLeave"]}},{type:"SelectItem",label:"Select Item",category:"Items",icon:"",inspector:{hasCustomEditor:!0,editorName:"SelectItemEditor",dataBindingType:null,supportedEvents:["onMouseEnter","onMouseLeave"]}},{type:"ComboBoxItem",label:"ComboBox Item",category:"Items",icon:"",inspector:{hasCustomEditor:!0,editorName:"ComboBoxItemEditor",dataBindingType:null,supportedEvents:["onMouseEnter","onMouseLeave"]}},{type:"ListBoxItem",label:"ListBox Item",category:"Items",icon:"",inspector:{hasCustomEditor:!0,editorName:"ListBoxItemEditor",dataBindingType:null,supportedEvents:["onAction","onMouseEnter","onMouseLeave"]}},{type:"GridListItem",label:"GridList Item",category:"Items",icon:"",inspector:{hasCustomEditor:!0,editorName:"GridListItemEditor",dataBindingType:null,supportedEvents:["onAction","onMouseEnter","onMouseLeave"]}},{type:"TreeItem",label:"Tree Item",category:"Items",icon:"",inspector:{hasCustomEditor:!0,editorName:"TreeItemEditor",dataBindingType:null,supportedEvents:["onAction","onMouseEnter","onMouseLeave"]}},{type:"Tag",label:"Tag",category:"Items",icon:"",inspector:{hasCustomEditor:!0,editorName:"TagEditor",dataBindingType:null,supportedEvents:["onMouseEnter","onMouseLeave"]}},{type:"Tab",label:"Tab",category:"Items",icon:"",inspector:{hasCustomEditor:!0,editorName:"TabEditor",dataBindingType:null,supportedEvents:["onMouseEnter","onMouseLeave"]}},{type:"Breadcrumb",label:"Breadcrumb",category:"Items",icon:"",inspector:{hasCustomEditor:!0,editorName:"BreadcrumbEditor",dataBindingType:null,supportedEvents:["onClick","onMouseEnter","onMouseLeave"]}},{type:"TableHeader",label:"Table Header",category:"Table Parts",icon:"",inspector:{hasCustomEditor:!0,editorName:"TableHeaderEditor",dataBindingType:null,supportedEvents:[]}},{type:"TableBody",label:"Table Body",category:"Table Parts",icon:"",inspector:{hasCustomEditor:!0,editorName:"TableBodyEditor",dataBindingType:null,supportedEvents:[]}},{type:"Column",label:"Column",category:"Table Parts",icon:"",inspector:{hasCustomEditor:!0,editorName:"ColumnEditor",dataBindingType:null,supportedEvents:[]}},{type:"ColumnGroup",label:"Column Group",category:"Table Parts",icon:"",inspector:{hasCustomEditor:!0,editorName:"ColumnGroupEditor",dataBindingType:null,supportedEvents:[]}},{type:"Row",label:"Row",category:"Table Parts",icon:"",inspector:{hasCustomEditor:!0,editorName:"RowEditor",dataBindingType:null,supportedEvents:["onAction","onMouseEnter","onMouseLeave"]}},{type:"Cell",label:"Cell",category:"Table Parts",icon:"",inspector:{hasCustomEditor:!0,editorName:"CellEditor",dataBindingType:null,supportedEvents:[]}},{type:"Field",label:"Field",category:"Data Display",icon:"",inspector:{hasCustomEditor:!0,editorName:"FieldEditor",dataBindingType:null,supportedEvents:[]}},{type:"DataTable",label:"DataTable",category:"Data",icon:"",inspector:{hasCustomEditor:!0,editorName:"DataTableEditor",dataBindingType:"collection",supportedEvents:["onLoad","onError","onRefresh"]}}];function oNe(t){return toe.find(e=>e.type===t)}function lNe({isOpen:t,onClose:e}){const{projectCreation:n,syncMode:r,setProjectCreation:i,setSyncMode:s,resetSettings:a}=Uae();return t?d.jsx("div",{className:"settings-overlay",onClick:e,children:d.jsxs("div",{className:"settings-panel",onClick:o=>o.stopPropagation(),children:[d.jsxs("div",{className:"settings-header",children:[d.jsxs("div",{className:"settings-title",children:[d.jsx(gf,{size:20}),d.jsx("h2",{children:"Settings"})]}),d.jsx(Xn,{variant:"ghost",size:"sm",onPress:e,"aria-label":"Close settings",children:d.jsx(eh,{size:20})})]}),d.jsxs("div",{className:"settings-content",children:[d.jsxs("div",{className:"setting-item",children:[d.jsxs("label",{htmlFor:"project-creation",children:[d.jsx("strong",{children:"  "}),d.jsx("p",{className:"setting-description",children:"    ."})]}),d.jsxs(JT,{id:"project-creation",selectedKey:n,onSelectionChange:o=>i(o),children:[d.jsx(Ux,{id:"local",textValue:"Local Only",children:d.jsxs("div",{className:"select-option",children:[d.jsx("strong",{children:" Local Only"}),d.jsx("p",{children:"(IndexedDB)  ()"})]})}),d.jsx(Ux,{id:"cloud",textValue:"Cloud Only",children:d.jsxs("div",{className:"select-option",children:[d.jsx("strong",{children:" Cloud Only"}),d.jsx("p",{children:"(Supabase) "})]})}),d.jsx(Ux,{id:"both",textValue:"Local + Cloud",children:d.jsxs("div",{className:"select-option",children:[d.jsx("strong",{children:" Local + Cloud"}),d.jsx("p",{children:"   ()"})]})})]})]}),d.jsxs("div",{className:"setting-item",children:[d.jsxs("label",{htmlFor:"sync-mode",children:[d.jsx("strong",{children:" "}),d.jsx("p",{className:"setting-description",children:"    ."})]}),d.jsxs(JT,{id:"sync-mode",selectedKey:r,onSelectionChange:o=>s(o),children:[d.jsx(Ux,{id:"manual",textValue:"Manual Sync",children:d.jsxs("div",{className:"select-option",children:[d.jsx("strong",{children:" Manual Sync"}),d.jsx("p",{children:"Sync     ()"})]})}),d.jsx(Ux,{id:"auto",textValue:"Auto Sync",children:d.jsxs("div",{className:"select-option",children:[d.jsx("strong",{children:" Auto Sync"}),d.jsx("p",{children:"   ()"})]})})]})]}),d.jsxs("div",{className:"settings-info",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"  :"})," Local Only + Manual Sync"]}),d.jsx("p",{children:"  ,   Sync   ."})]})]}),d.jsxs("div",{className:"settings-footer",children:[d.jsx(Xn,{variant:"ghost",size:"sm",onPress:a,children:"Reset to Defaults"}),d.jsx(Xn,{variant:"primary",size:"sm",onPress:e,children:"Done"})]})]})}):null}function cNe(){const t=lI(),[e,n]=C.useState(""),[r,i]=C.useState("all"),[s,a]=C.useState([]),[o,l]=C.useState(!1),c=Uae(D=>D.projectCreation),u=GPe(async()=>await d0.fetchProjects());C.useEffect(()=>{const D=async()=>{try{const R=(await(await On()).projects.getAll()).map(F=>({id:F.id,name:F.name,created_by:F.created_by||"",created_at:F.created_at||new Date().toISOString(),updated_at:F.updated_at||new Date().toISOString()}));console.log("[Dashboard]   :",R.length);const k=u.data||[];console.log("[Dashboard]  :",k.length);const L=VPe(R,k);a(L),console.log("[Dashboard]  :",L.length)}catch(T){console.error("[Dashboard]   :",T)}};u.isLoading||D()},[u.data,u.isLoading]);const h=rf(async({name:D})=>{const T=await On(),M=await d0.getCurrentUser();let R;c==="local"?(R={id:js.generateId(),name:D.trim(),created_by:M.id,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},await T.projects.insert(R),console.log("[Dashboard]   :",R.id)):c==="cloud"?(R=await d0.createProject({name:D.trim(),created_by:M.id}),console.log("[Dashboard]   :",R.id)):(R=await d0.createProject({name:D.trim(),created_by:M.id}),await T.projects.insert(R),console.log("[Dashboard] +  :",R.id));const k=js.generateId(),L={id:k,project_id:R.id,title:"Home",slug:"/",parent_id:null,order_num:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},F={id:js.generateId(),tag:"body",props:{},parent_id:null,page_id:k,order_num:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return c==="local"?(await T.pages.insert(L),await T.elements.insert(F)):c==="cloud"?(await wb.createPage({id:k,project_id:R.id,title:"Home",slug:"/",order_num:0}),await ud.createElement(F)):(await T.pages.insert(L),await T.elements.insert(F),await wb.createPage({id:k,project_id:R.id,title:"Home",slug:"/",order_num:0}),await ud.createElement(F)),R},{onSuccess:D=>{u.reload(),n(""),t(`/builder/${D.id}`)}}),f=rf(async D=>{let T;if(r==="local"?(T="local",console.log("[Dashboard]   :",D)):r==="cloud"?(T="cloud",console.log("[Dashboard]   :",D)):(T="both",console.log("[Dashboard]  +   :",D)),T==="local"||T==="both"){const M=await On(),R=await M.pages.getByProject(D);console.log("[Dashboard]  :",R.length);for(const O of R){const H=await M.elements.getByPage(O.id);console.log("[Dashboard] ",O.title," :",H.length);for(const K of H)await M.elements.delete(K.id);await M.history.clear(O.id),await Qae.clearPageHistory(O.id)}for(const O of R)await M.pages.delete(O.id);console.log("[Dashboard]     ");const k=await M.designTokens.getByProject(D);console.log("[Dashboard]   :",k.length);for(const O of k)await M.designTokens.delete(O.id);const L=await M.themes.getByProject(D);console.log("[Dashboard]   :",L.length);for(const O of L)await M.themes.delete(O.id);const F=await M.layouts.getByProject(D);console.log("[Dashboard]  :",F.length);for(const O of F){const H=await M.elements.getByLayout(O.id);console.log("[Dashboard] ",O.name," :",H.length);for(const K of H)await M.elements.delete(K.id);await M.layouts.delete(O.id)}const z=await M.data_tables.getByProject(D);for(const O of z)await M.data_tables.delete(O.id);console.log(`[Dashboard] DataTables ${z.length}  `);const G=await M.api_endpoints.getByProject(D);for(const O of G)await M.api_endpoints.delete(O.id);console.log(`[Dashboard] API Endpoints ${G.length}  `);const V=await M.variables.getByProject(D);for(const O of V)await M.variables.delete(O.id);console.log(`[Dashboard] Variables ${V.length}  `);const q=await M.transformers.getByProject(D);for(const O of q)await M.transformers.delete(O.id);console.log(`[Dashboard] Transformers ${q.length}  `),await M.projects.delete(D),console.log(" [Dashboard]    ")}if(T==="cloud"||T==="both")try{await d0.deleteProject(D),console.log(" [Dashboard]    ")}catch(M){console.warn("[Dashboard] Supabase   (    ):",M)}console.log(` [Dashboard]    (${T}):`,D)},{onSuccess:()=>{u.reload()}}),p=rf(async D=>{await qPe(D),console.log("[Dashboard]   :",D)},{onSuccess:()=>{u.reload()}}),m=rf(async D=>{await YPe(D),console.log("[Dashboard]   :",D)},{onSuccess:()=>{u.reload()}}),v=async D=>{if(D.preventDefault(),!e.trim()){alert("  .");return}try{await h.execute({name:e})}catch(T){console.error("  :",T)}},A=async D=>{if(confirm("   ?"))try{await f.execute(D)}catch(T){console.error("  :",T)}},x=s.filter(D=>r==="local"?D.storage.local:r==="cloud"?D.storage.cloud:!0),E=u.isLoading||h.isLoading||f.isLoading||p.isLoading||m.isLoading,w=u.error||h.error||f.error||p.error||m.error;if(u.isLoading&&s.length===0)return d.jsx("div",{className:"dashboard",children:d.jsx("div",{className:"loading",children:"  ..."})});const B={all:s.length,local:s.filter(D=>D.storage.local).length,cloud:s.filter(D=>D.storage.cloud).length};return d.jsxs("div",{className:"dashboard",children:[d.jsxs("header",{className:"header",children:[d.jsx("h1",{children:"XStudio Dashboard"}),d.jsxs("div",{className:"filter",children:[d.jsxs(en,{className:`react-aria-Button ${r==="all"?"primary":"default"}`,onPress:()=>i("all"),children:["All (",B.all,")"]}),d.jsxs(en,{className:`react-aria-Button ${r==="local"?"primary":"default"}`,onPress:()=>i("local"),children:[d.jsx(_0e,{size:14})," Local (",B.local,")"]}),d.jsxs(en,{className:`react-aria-Button ${r==="cloud"?"primary":"default"}`,onPress:()=>i("cloud"),children:[d.jsx(aY,{size:14})," Cloud (",B.cloud,")"]}),d.jsx(en,{className:"react-aria-Button ghost",onPress:()=>l(!0),"aria-label":"Open settings",children:d.jsx(gf,{size:16})})]})]}),w&&d.jsx("div",{className:"error-message",children:w.message}),d.jsxs("main",{className:"main",children:[d.jsxs("form",{onSubmit:v,className:"add-project-form",children:[d.jsx(dr,{value:e,onChange:D=>n(D),isDisabled:E,children:d.jsx(br,{type:"text",placeholder:"New Project"})}),d.jsx(en,{type:"submit",className:"react-aria-Button primary add-project-button",isDisabled:E||!e.trim(),children:h.isLoading?"Creating...":d.jsx(Pc,{size:16})})]}),d.jsx("div",{className:"projects-grid",children:x.map(D=>{const T=WPe(D),M=KPe(D);return d.jsxs("div",{className:"project-card",children:[d.jsx("div",{className:"icon",children:d.jsx(uye,{size:16,color:"var(--color-primary-600)"})}),d.jsxs("div",{className:"content",children:[d.jsx("h3",{className:"title",children:D.name}),d.jsx("div",{className:"badges",children:d.jsxs("span",{className:`badge ${T.className}`,children:[T.icon," ",T.label]})}),d.jsx("p",{className:"description",children:AQ(D.lastModified)}),D.sync.lastSyncAt&&d.jsxs("p",{className:"sync-info",children:["Last sync: ",AQ(D.sync.lastSyncAt)]})]}),d.jsxs("div",{className:"project-actions",children:[M.canOpen&&d.jsx(en,{className:"react-aria-Button primary",onPress:()=>t(`/builder/${D.id}`),isDisabled:E,children:d.jsx(mY,{size:16})}),M.canSync&&d.jsx(en,{className:"react-aria-Button default",onPress:async()=>{try{await p.execute(D.id),alert("  !   .")}catch(R){console.error("[Dashboard] Sync :",R),alert("  : "+R.message)}},isDisabled:E,children:p.isLoading?d.jsx(Ume,{size:16}):d.jsx(sY,{size:16})}),M.canDownload&&d.jsxs(en,{className:"react-aria-Button secondary",onPress:async()=>{try{await m.execute(D.id),alert("  !   .")}catch(R){console.error("[Dashboard] Download :",R),alert("  : "+R.message)}},isDisabled:E,children:[d.jsx(LM,{size:14})," ",m.isLoading?"Downloading...":"Download"]}),d.jsx(en,{className:"react-aria-Button default",onPress:()=>t(`/theme/${D.id}`),isDisabled:E,children:d.jsx(b_,{size:16})}),d.jsx(en,{className:"react-aria-Button default",onPress:()=>A(D.id),isDisabled:E,children:d.jsx(Gd,{size:16})})]})]},D.id)})}),x.length===0&&!E&&d.jsxs("div",{className:"empty-state",children:[d.jsx("p",{children:" ."}),d.jsx("p",{children:"   !"})]})]}),d.jsx("footer",{className:"footer",children:d.jsx("p",{children:"XStudio - Local-first Web Builder"})}),d.jsx(lNe,{isOpen:o,onClose:()=>l(!1)})]})}const uNe=(t,e)=>({multiSelectMode:!1,selectedElementIds:[],selectionBounds:null,setMultiSelectMode:n=>{const{selectedElementIds:r}=e();t({multiSelectMode:n,selectedElementIds:n?r:r.slice(0,1)})},addToSelection:n=>{const{multiSelectMode:r,selectedElementIds:i}=e();r?i.includes(n)||t({selectedElementIds:[...i,n]}):t({selectedElementIds:[n]})},removeFromSelection:n=>{const{selectedElementIds:r}=e();t({selectedElementIds:r.filter(i=>i!==n)})},clearSelection:()=>t({selectedElementIds:[],selectionBounds:null}),setSelectionBounds:n=>t({selectionBounds:n}),selectAll:n=>t({selectedElementIds:n.map(r=>r.id)}),selectByParent:(n,r)=>{const i=r.filter(s=>s.parent_id===n);t({selectedElementIds:i.map(s=>s.id)})}});class dNe{commands=new Map;elementCache=new Map;maxCommands=100;maxCacheSize=500;compressionEnabled=!0;constructor(e){this.maxCommands=e?.maxCommands??100,this.maxCacheSize=e?.maxCacheSize??500,this.compressionEnabled=e?.compressionEnabled??!0}addCommand(e){const n=this.generateCommandId(),r=Date.now(),i={...e,id:n,timestamp:r},s=this.getCommandByElementId(e.elementId);return s&&this.canMergeCommands(s,i)?this.mergeCommands(s.id,i):this.commands.set(n,i),this.manageCache(),n}getCommand(e){return this.commands.get(e)}getCommandByElementId(e){for(const n of this.commands.values())if(n.elementId===e)return n}getAllCommands(){return Array.from(this.commands.values()).sort((e,n)=>n.timestamp-e.timestamp)}removeCommand(e){return this.commands.delete(e)}cacheElement(e){this.elementCache.size>=this.maxCacheSize&&this.cleanOldCache();const n={id:e.id,tag:e.tag,props:this.compressionEnabled?this.compressProps(e.props):JSON.stringify(e.props),parent_id:e.parent_id||null,page_id:e.page_id||"",order_num:e.order_num||0};this.elementCache.set(e.id,n)}restoreElement(e){const n=this.elementCache.get(e);if(n)return{id:n.id,tag:n.tag,props:this.compressionEnabled?this.decompressProps(n.props):JSON.parse(n.props),parent_id:n.parent_id,page_id:n.page_id,order_num:n.order_num}}getMemoryStats(){const e=this.commands.size,n=this.elementCache.size;let r=0;for(const s of this.commands.values())try{r+=JSON.stringify(s).length*2}catch{r+=1e3}for(const s of this.elementCache.values())try{r+=JSON.stringify(s).length*2}catch{r+=500}const i=this.compressionEnabled?.3:1;return{commandCount:e,cacheSize:n,estimatedMemoryUsage:r,compressionRatio:i}}cleanOldCache(){const n=Array.from(this.elementCache.entries()).slice(0,Math.floor(this.maxCacheSize*.2));for(const[r]of n)this.elementCache.delete(r)}canMergeCommands(e,n){return e.elementId===n.elementId&&e.type==="update"&&n.type==="update"}mergeCommands(e,n){const r=this.commands.get(e);r&&r.type==="update"&&n.type==="update"&&(r.changes.updated={prevProps:r.changes.updated?.prevProps||{},newProps:n.changes.updated?.newProps||{}},r.timestamp=n.timestamp)}manageCache(){if(this.commands.size>this.maxCommands){const n=Array.from(this.commands.entries()).sort(([,r],[,i])=>r.timestamp-i.timestamp).slice(0,this.commands.size-this.maxCommands);for(const[r]of n)this.commands.delete(r)}}compressProps(e){try{const n=JSON.stringify(e);return btoa(n)}catch{return JSON.stringify(e)}}decompressProps(e){try{const n=atob(e);return JSON.parse(n)}catch{return JSON.parse(e)}}generateCommandId(){return`cmd_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}clear(){this.commands.clear(),this.elementCache.clear()}getCommandsByPage(e){return Array.from(this.commands.values()).filter(n=>n.metadata.pageId===e).sort((n,r)=>r.timestamp-n.timestamp)}optimizeMemory(){const e=Date.now()-864e5;for(const[n,r]of this.commands.entries())r.timestamp<e&&this.commands.delete(n);this.cleanOldCache()}}const hNe=new dNe({maxCommands:100,maxCacheSize:500,compressionEnabled:!0});function fNe(){return{changed:new Map,added:new Map,removed:new Map}}function ZT(t,e){if(t===e)return!0;if(t===null||e===null)return t===e;if(typeof t!=typeof e)return!1;if(typeof t=="object"){const n=t,r=e,i=Object.keys(n),s=Object.keys(r);if(i.length!==s.length)return!1;for(const a of i)if(!ZT(n[a],r[a]))return!1;return!0}return!1}function pNe(t,e){const n=fNe(),r=t,i=e;for(const s of Object.keys(r)){const a=r[s],o=i[s];s in i?ZT(a,o)||n.changed.set(s,{prev:a,next:o}):n.removed.set(s,a)}for(const s of Object.keys(i))s in r||n.added.set(s,i[s]);return n}function IQ(t,e){const n={elementId:t.id},r=pNe(t.props,e.props);(r.changed.size>0||r.added.size>0||r.removed.size>0)&&(n.props=r),t.parent_id!==e.parent_id&&(n.parentId={prev:t.parent_id||null,next:e.parent_id||null}),t.order_num!==e.order_num&&(n.orderNum={prev:t.order_num??0,next:e.order_num??0});const i={};return t.customId!==e.customId&&(i.customId={prev:t.customId,next:e.customId}),ZT(t.events,e.events)||(i.events={prev:t.events,next:e.events}),ZT(t.dataBinding,e.dataBinding)||(i.dataBinding={prev:t.dataBinding,next:e.dataBinding}),Object.keys(i).length>0&&(n.metadata=i),n}function BQ(t){return!(t.props&&(t.props.changed.size>0||t.props.added.size>0||t.props.removed.size>0))&&!t.parentId&&!t.orderNum&&!t.metadata}function TQ(t){const e={elementId:t.elementId};return t.props&&(e.props={changed:Array.from(t.props.changed.entries()),added:Array.from(t.props.added.entries()),removed:Array.from(t.props.removed.entries())}),t.parentId&&(e.parentId=t.parentId),t.orderNum&&(e.orderNum=t.orderNum),t.metadata&&(e.metadata=t.metadata),e}function MQ(t){let e=0;if(e+=t.elementId.length*2,t.props){for(const[n,{prev:r,next:i}]of t.props.changed)e+=n.length*2,e+=UB(r),e+=UB(i);for(const[n,r]of t.props.added)e+=n.length*2,e+=UB(r);for(const[n,r]of t.props.removed)e+=n.length*2,e+=UB(r)}return t.parentId&&(e+=100),t.orderNum&&(e+=50),t.metadata&&(e+=500),e}function UB(t){if(t==null)return 8;if(typeof t=="string")return t.length*2;if(typeof t=="number")return 8;if(typeof t=="boolean")return 4;if(typeof t=="object")try{return JSON.stringify(t).length*2}catch{return 1e3}return 100}class gNe{pageHistories=new Map;currentPageId=null;defaultMaxSize=50;commandDataStore=hNe;indexedDB=Qae;idbAvailable=typeof globalThis.indexedDB<"u";isInitialized=!1;initPromise=null;constructor(){this.idbAvailable?this.initPromise=this.initialize():(this.isInitialized=!0,this.initPromise=Promise.resolve())}async initialize(){if(!this.idbAvailable){this.isInitialized=!0;return}try{await this.indexedDB.init(),this.isInitialized=!0}catch(e){console.error(" [History] IndexedDB initialization failed:",e),this.isInitialized=!0}}async ensureInitialized(){this.initPromise&&await this.initPromise}setCurrentPage(e){this.currentPageId=e,this.pageHistories.has(e)||(this.pageHistories.set(e,{entries:[],currentIndex:-1,maxSize:this.defaultMaxSize}),this.idbAvailable&&this.restoreFromIndexedDB(e).catch(console.error))}async restoreFromIndexedDB(e){if(!this.idbAvailable)return!1;try{await this.ensureInitialized();const n=await this.indexedDB.getPageMeta(e);if(!n||n.totalEntries===0)return!1;const r=await this.indexedDB.getEntriesByPage(e);if(r.length===0)return!1;const i=this.pageHistories.get(e);if(i&&i.entries.length===0){const s=r.slice(-this.defaultMaxSize);return i.entries=s,i.currentIndex=Math.min(n.currentIndex,s.length-1),!0}return!1}catch(n){return console.error(" [History] Failed to restore from IndexedDB:",n),!1}}addEntry(e){if(!this.currentPageId)return;const n=this.pageHistories.get(this.currentPageId);if(!n)return;const r=["batch","group","ungroup"].includes(e.type)?"update":e.type,i=this.commandDataStore.addCommand({type:r,elementId:e.elementId,changes:this.convertToCommandChanges(e),metadata:{pageId:this.currentPageId,sessionId:this.getSessionId()}});e.data.element&&this.commandDataStore.cacheElement(e.data.element),e.data.prevElement&&this.commandDataStore.cacheElement(e.data.prevElement);const s={...e,id:i,timestamp:Date.now()};if(n.entries=n.entries.slice(0,n.currentIndex+1),n.entries.push(s),n.currentIndex=n.entries.length-1,n.entries.length>n.maxSize){const a=n.entries.shift();a&&this.commandDataStore.removeCommand(a.id),n.currentIndex--}this.saveToIndexedDB(this.currentPageId,s,n.currentIndex)}saveToIndexedDB(e,n,r){this.idbAvailable&&(async()=>{try{await this.ensureInitialized(),await this.indexedDB.saveEntry(e,n);const i=this.pageHistories.get(e);i&&await this.indexedDB.savePageMeta(e,r,i.entries.length)}catch(i){console.error(" [History] Failed to save to IndexedDB:",i)}})()}addDiffEntry(e,n,r,i){if(!this.currentPageId)return;const s=this.pageHistories.get(this.currentPageId);if(!s)return;const a=IQ(n,r);if(e==="update"&&BQ(a))return;const o=TQ(a),l=MQ(a),u={id:this.commandDataStore.addCommand({type:e,elementId:n.id,changes:{updated:{prevProps:n.props,newProps:r.props}},metadata:{pageId:this.currentPageId,sessionId:this.getSessionId()}}),type:e,elementId:n.id,data:{diff:o,...e==="add"&&{element:r,childElements:i},...e==="remove"&&{element:n,childElements:i}},timestamp:Date.now(),estimatedSize:l};if(s.entries=s.entries.slice(0,s.currentIndex+1),s.entries.push(u),s.currentIndex=s.entries.length-1,s.entries.length>s.maxSize){const h=s.entries.shift();h&&this.commandDataStore.removeCommand(h.id),s.currentIndex--}this.saveToIndexedDB(this.currentPageId,u,s.currentIndex)}addBatchDiffEntry(e,n){if(!this.currentPageId||e.length!==n.length)return;const r=this.pageHistories.get(this.currentPageId);if(!r)return;const i=[];let s=0;for(let l=0;l<e.length;l++){const c=IQ(e[l],n[l]);BQ(c)||(i.push(TQ(c)),s+=MQ(c))}if(i.length===0)return;const o={id:this.commandDataStore.addCommand({type:"update",elementId:"batch_diff",changes:{},metadata:{pageId:this.currentPageId,sessionId:this.getSessionId()}}),type:"batch",elementId:"batch_diff",elementIds:e.map(l=>l.id),data:{diffs:i},timestamp:Date.now(),estimatedSize:s};if(r.entries=r.entries.slice(0,r.currentIndex+1),r.entries.push(o),r.currentIndex=r.entries.length-1,r.entries.length>r.maxSize){const l=r.entries.shift();l&&this.commandDataStore.removeCommand(l.id),r.currentIndex--}this.saveToIndexedDB(this.currentPageId,o,r.currentIndex)}undo(){if(!this.currentPageId)return null;const e=this.pageHistories.get(this.currentPageId);if(!e||e.currentIndex<0)return null;const n=e.entries[e.currentIndex];return e.currentIndex--,this.updateIndexedDBMeta(this.currentPageId,e),n}redo(){if(!this.currentPageId)return null;const e=this.pageHistories.get(this.currentPageId);if(!e||e.currentIndex>=e.entries.length-1)return null;e.currentIndex++;const n=e.entries[e.currentIndex];return this.updateIndexedDBMeta(this.currentPageId,e),n}updateIndexedDBMeta(e,n){this.idbAvailable&&(async()=>{try{await this.ensureInitialized(),await this.indexedDB.savePageMeta(e,n.currentIndex,n.entries.length)}catch(r){console.error(" [History] Failed to update IndexedDB meta:",r)}})()}canUndo(){if(!this.currentPageId)return!1;const e=this.pageHistories.get(this.currentPageId);return e?e.currentIndex>=0:!1}canRedo(){if(!this.currentPageId)return!1;const e=this.pageHistories.get(this.currentPageId);return e?e.currentIndex<e.entries.length-1:!1}getCurrentPageHistory(){if(!this.currentPageId)return{canUndo:!1,canRedo:!1,totalEntries:0,currentIndex:-1};const e=this.pageHistories.get(this.currentPageId);return e?{canUndo:this.canUndo(),canRedo:this.canRedo(),totalEntries:e.entries.length,currentIndex:e.currentIndex}:{canUndo:!1,canRedo:!1,totalEntries:0,currentIndex:-1}}clearPageHistory(e){this.pageHistories.delete(e),this.idbAvailable&&(async()=>{try{await this.ensureInitialized(),await this.indexedDB.clearPageHistory(e)}catch(n){console.error(" [History] Failed to clear IndexedDB page history:",n)}})(),this.currentPageId===e&&this.setCurrentPage(e)}clearAllHistory(){this.pageHistories.clear(),this.commandDataStore.clear(),this.idbAvailable&&(async()=>{try{await this.ensureInitialized(),await this.indexedDB.clearAll()}catch(e){console.error(" [History] Failed to clear all IndexedDB history:",e)}})()}convertToCommandChanges(e){switch(e.type){case"add":return{added:e.data.element};case"remove":return{removed:e.data.element};case"update":return{updated:{prevProps:e.data.prevProps||{},newProps:e.data.props||{}}};case"move":return{moved:{prevParentId:e.data.prevParentId||null,newParentId:e.data.parentId||null,prevOrderNum:e.data.prevOrderNum||0,newOrderNum:e.data.orderNum||0}};case"batch":return{batch:{updates:(e.data.batchUpdates||[]).map(n=>({elementId:n.elementId,prevProps:n.prevProps,newProps:n.newProps}))}};case"group":return{group:{groupId:e.data.groupData?.groupId||"",childIds:e.data.groupData?.childIds||[],elements:e.data.elements||[]}};case"ungroup":return{ungroup:{groupId:e.data.groupData?.groupId||"",childIds:e.data.groupData?.childIds||[],prevElements:e.data.prevElements||[]}};default:return{}}}getSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getMemoryStats(){const e=this.pageHistories.size,n=Array.from(this.pageHistories.values()).flatMap(l=>l.entries),r=n.length;let i=0,s=0,a=0;for(const l of n)l.data.diff||l.data.diffs?(i++,a+=l.estimatedSize||0):s++;const o=i>0?Math.round(a/i):0;return{pageCount:e,totalEntries:r,commandStoreStats:this.commandDataStore.getMemoryStats(),diffStats:{diffBasedEntries:i,snapshotBasedEntries:s,totalDiffSize:a,avgDiffSize:o}}}async getIndexedDBStats(){if(!this.idbAvailable)return{totalEntries:0,totalPages:0,estimatedSize:0};try{return await this.ensureInitialized(),await this.indexedDB.getStats()}catch(e){return console.error(" [History] Failed to get IndexedDB stats:",e),{totalEntries:0,totalPages:0,estimatedSize:0}}}optimizeMemory(){this.commandDataStore.optimizeMemory();const e=Date.now()-10080*60*1e3;for(const[n,r]of this.pageHistories.entries())!r.entries.some(s=>s.timestamp>e)&&r.entries.length===0&&this.pageHistories.delete(n);this.idbAvailable&&(async()=>{try{await this.ensureInitialized(),await this.indexedDB.cleanupOldEntries()}catch(n){console.error(" [History] Failed to cleanup IndexedDB:",n)}})()}}const Da=new gNe;function Yl(t,e){const n=t[e];return typeof n=="string"?n:typeof n=="number"||n!=null&&typeof n=="object"&&"toString"in n?String(n):""}function HB(t){return Yl(t,"children")||Yl(t,"title")||Yl(t,"label")}const fE=async(t,e,n)=>{const r=t.filter(s=>s.page_id===e).reduce((s,a)=>{const o=a.parent_id||"root";return s[o]||(s[o]=[]),s[o].push(a),s},{}),i=[];if(Object.entries(r).forEach(([s,a])=>{let o;const l=t.find(w=>w.id===(s==="root"?null:s)),c=l?.tag,u=c==="Tabs",h=c==="ListBox",f=c==="GridList",p=c==="Menu",m=c==="ComboBox",v=c==="Select",A=c==="Tree",x=c==="ToggleButtonGroup",E=c==="TableHeader";if((u||h||f||p||m||v||A||x||E)&&console.log("    :",{parentKey:s,parentElement:l?{id:l.id,tag:l.tag}:null,parentTag:c,childrenCount:a.length,childTags:a.map(w=>w.tag)}),u){const w=a.filter(T=>T.tag==="Tab").sort((T,M)=>{const R=(T.order_num||0)-(M.order_num||0);if(R===0){const k=Yl(T.props,"title"),L=Yl(M.props,"title");return k.localeCompare(L)}return R}),B=a.filter(T=>T.tag==="Panel").sort((T,M)=>{const R=(T.order_num||0)-(M.order_num||0);if(R===0){const k=Yl(T.props,"title"),L=Yl(M.props,"title");return k.localeCompare(L)}return R});o=[];const D=new Set;w.forEach(T=>{o.push(T);const M=Yl(T.props,"tabId");if(M){const R=B.find(k=>Yl(k.props,"tabId")===M&&!D.has(k.id));R&&(o.push(R),D.add(R.id))}}),B.forEach(T=>{D.has(T.id)||o.push(T)}),console.log(` Tabs   : ${w.length} Tab, ${B.length} Panel`),console.log(" Tab  :"),w.forEach((T,M)=>{const R=Yl(T.props,"title"),k=Yl(T.props,"tabId");console.log(`  ${M+1}. ${R} (order: ${T.order_num}, tabId: ${k.slice(0,8)}...)`)}),console.log("   :"),o.forEach((T,M)=>{const R=Yl(T.props,"title");console.log(`  ${M+1}. ${T.tag}: ${R} (new order: ${M+1})`)})}else E?(console.log(` ${c}  ColumnGroup : ${a.length} `),o=a.sort((w,B)=>{const D=(w.order_num||0)-(B.order_num||0);if(D===0){const T=Yl(w.props,"label"),M=Yl(B.props,"label"),R=T.localeCompare(M);return R===0?w.id.localeCompare(B.id):R}return D}),console.log(` ${c}  ColumnGroup :`),o.forEach((w,B)=>{const D=Yl(w.props,"label")||"Untitled",T=Yl(w.props,"span")||"1";console.log(`  ${B+1}. ColumnGroup: ${D} (span: ${T}, order: ${w.order_num}  ${B+1})`)})):h||f||p||m||v||A||x?(console.log(` ${c}   : ${a.length} `),o=a.sort((w,B)=>{const D=(w.order_num||0)-(B.order_num||0);if(D===0){const T=HB(w.props),M=HB(B.props),R=T.localeCompare(M);return R===0?w.id.localeCompare(B.id):R}return D}),console.log(` ${c}  :`),o.forEach((w,B)=>{const D=HB(w.props)||"Untitled";console.log(`  ${B+1}. ${w.tag}: ${D} (order: ${w.order_num}  ${B+1})`)})):o=a.sort((w,B)=>{const D=(w.order_num||0)-(B.order_num||0);return D===0?w.id.localeCompare(B.id):D});o.forEach((w,B)=>{const D=B;w.order_num!==D&&(i.push({id:w.id,order_num:D}),n(w.id,D))})}),i.length>0)try{const s=i.map(l=>ss.from("elements").update({order_num:l.order_num}).eq("id",l.id)),o=(await Promise.all(s)).filter(l=>l.error);if(o.length>0)console.error("order_num  :",o.map(l=>l.error));else{console.log(` order_num  : ${i.length} `);const l=t.filter(c=>c.page_id===e&&(c.tag==="Tab"||c.tag==="Panel"||c.tag==="ListBoxItem"||c.tag==="GridListItem"||c.tag==="MenuItem"||c.tag==="ComboBoxItem"||c.tag==="SelectItem"||c.tag==="TreeItem"||c.tag==="ToggleButton"));l.length>0&&(console.log("     :"),l.sort((c,u)=>(c.order_num||0)-(u.order_num||0)).forEach(c=>{const u=HB(c.props)||"Untitled",h=c.tag==="Tab"||c.tag==="Panel"?`, tabId: ${Yl(c.props,"tabId")}`:"";console.log(`  ${c.tag}: ${u} (order: ${c.order_num}${h})`)}))}}catch(s){console.error("order_num   :",s)}},lP=(t,e)=>{for(const n of t)if(n.id===e)return n;return null},P0=(t,e)=>t.get(e)||null,Hg=(t,e)=>({...t.props,...e,tag:t.tag}),C0=t=>{try{return typeof structuredClone<"u"?{id:t.id,custom_id:t.customId,tag:t.tag,props:structuredClone(t.props||{}),parent_id:t.parent_id,page_id:t.page_id,layout_id:t.layout_id,order_num:t.order_num,data_binding:t.dataBinding}:{id:t.id,custom_id:t.customId,tag:t.tag,props:JSON.parse(JSON.stringify(t.props||{})),parent_id:t.parent_id,page_id:t.page_id,layout_id:t.layout_id,order_num:t.order_num,data_binding:t.dataBinding}}catch(e){return console.error("Element sanitization error:",e),{id:t.id||"",custom_id:t.customId,tag:t.tag||"",props:{},parent_id:t.parent_id,page_id:t.page_id||"",layout_id:t.layout_id||null,order_num:t.order_num||0,data_binding:t.dataBinding}}};function h0(t){try{if(typeof structuredClone=="function")return structuredClone(t)}catch{}try{const e=JSON.stringify(t);return e===void 0?t:JSON.parse(e)}catch{return t}}const mNe=(t,e)=>async()=>{try{console.log(" Undo  ");const n=e(),{currentPageId:r}=n;if(console.log(" currentPageId:",r),!r){console.log(" currentPageId , return");return}t({historyOperationInProgress:!0}),console.log(" Undo ");const i=Da.undo();if(!i){console.log(" Undo :   "),t({historyOperationInProgress:!1});return}console.log(" Undo  :",{type:i.type,elementId:i.elementId,hasData:!!i.data,dataKeys:i.data?Object.keys(i.data):[]});let s=[];const a=[];let o=null,l=null;try{switch(i.type){case"add":{s=[i.elementId],i.data.childElements&&i.data.childElements.length>0&&s.push(...i.data.childElements.map(A=>A.id));break}case"update":{console.log(" Update   :",{hasPrevProps:!!i.data.prevProps,hasPrevElement:!!i.data.prevElement,prevProps:i.data.prevProps,prevElement:i.data.prevElement}),i.data.prevProps&&(o=h0(i.data.prevProps),console.log(" prevProps  :",o)),i.data.prevElement&&(l=h0(i.data.prevElement),console.log(" prevElement  :",l));break}case"remove":{i.data.element&&a.push(h0(i.data.element)),i.data.childElements&&i.data.childElements.length>0&&(a.push(...i.data.childElements.map(A=>h0(A))),console.log(` Undo:   ${i.data.childElements.length} `,{parent:i.data.element?.tag,children:i.data.childElements.map(A=>({id:A.id,tag:A.tag}))}));break}case"batch":{console.log(" Undo: Batch update  ");break}case"group":{console.log(" Undo: Group   "),s=[i.elementId];break}case"ungroup":{console.log(" Undo: Ungroup  "),i.data.element&&a.push(h0(i.data.element));break}}console.log("    , try  ")}catch(A){console.error("     :",A),console.error("  :",{message:A instanceof Error?A.message:String(A),stack:A instanceof Error?A.stack:void 0,entryType:i.type,elementId:i.elementId}),t({historyOperationInProgress:!1});return}console.log("    , entry.type:",i.type);const c=e();console.log(" Undo   , entry.type:",i.type);let u=c.elements,h=c.selectedElementId,f=c.selectedElementProps;switch(i.type){case"add":{u=c.elements.filter(A=>!s.includes(A.id)),s.includes(c.selectedElementId||"")&&(h=null,f={});break}case"update":{console.log(" Update  :",{elementId:i.elementId,hasPrevProps:!!o,hasPrevElement:!!l});const A=c.elements.findIndex(x=>x.id===i.elementId);if(A>=0&&o){const x=c.elements[A];if(console.log(" Undo: Props ",{elementId:i.elementId,elementTag:x.tag,currentProps:{...x.props},restoringTo:o}),u=c.elements.map((E,w)=>w===A?{...E,props:o}:E),c.selectedElementId===i.elementId){console.log(" Undo:   props ");const E={...x,props:o};f=Hg(E,o)}}else A>=0&&l?(console.log(" Undo:   ",{elementId:i.elementId,prevElement:l}),u=c.elements.map((x,E)=>E===A?{...x,...l}:x)):console.warn(" Undo :       ",{elementId:i.elementId,elementFound:A>=0,prevPropsFound:!!o,prevElementFound:!!l});break}case"remove":{console.log(" Undo:   :",{restoringCount:a.length}),a.forEach((A,x)=>{console.log(`   ${x+1}:`,{id:A.id,tag:A.tag,tabId:A.props.tabId,title:A.props.title,order_num:A.order_num})}),u=[...c.elements,...a];break}case"batch":{if(i.data.batchUpdates){console.log(" Undo: Batch update  :",{updateCount:i.data.batchUpdates.length});const A=new Map;i.data.batchUpdates.forEach(E=>{A.set(E.elementId,E.prevProps)}),u=c.elements.map(E=>{const w=A.get(E.id);return w?(console.log("   props:",{elementId:E.id,tag:E.tag}),{...E,props:w}):E});const x=A.get(c.selectedElementId||"");if(x){const E=u.find(w=>w.id===c.selectedElementId);E&&(f=Hg(E,x))}}break}case"group":{console.log(" Undo: Group   ");let A=c.elements.filter(x=>!s.includes(x.id));if(i.data.elements){const x=new Map;i.data.elements.forEach(E=>{x.set(E.id,{parent_id:E.parent_id,order_num:E.order_num||0})}),A=A.map(E=>{const w=x.get(E.id);return w?(console.log("    parent :",{childId:E.id,newParentId:w.parent_id}),{...E,parent_id:w.parent_id,order_num:w.order_num}):E})}u=A,s.includes(c.selectedElementId||"")&&(h=null,f={});break}case"ungroup":{console.log(" Undo: Ungroup  ");let A=[...c.elements,...a];if(console.log("   :",{groupId:a[0]?.id,tag:a[0]?.tag}),i.data.elements){const x=new Map;i.data.elements.forEach(E=>{x.set(E.id,{order_num:E.order_num||0})}),A=A.map(E=>{const w=x.get(E.id);return w?(console.log("     :",{childId:E.id,groupId:i.elementId}),{...E,parent_id:i.elementId,order_num:w.order_num}):E})}u=A;break}}if(t({elements:u,selectedElementId:h,selectedElementProps:f}),!(nh()&&!xf())&&typeof window<"u"&&window.parent)try{const A=e().elements;window.parent.postMessage({type:"ELEMENTS_UPDATED",payload:{elements:A.map(C0)}},"*")}catch(A){console.warn("postMessage  :",A)}try{switch(i.type){case"add":{const A=[i.elementId];i.data.childElements&&i.data.childElements.length>0&&A.push(...i.data.childElements.map(x=>x.id)),await ss.from("elements").delete().in("id",A),console.log(` Undo:     ( 1 +  ${i.data.childElements?.length||0})`);break}case"update":{if(i.elementId==="bulk_update"){console.log(" bulk_update  ID   ");break}i.data.prevElement&&(await ss.from("elements").update({props:i.data.prevProps||i.data.prevElement.props,parent_id:i.data.prevElement.parent_id,order_num:i.data.prevElement.order_num}).eq("id",i.elementId),console.log(" Undo:    "));break}case"remove":{if(i.data.element){const A=[i.data.element];i.data.childElements&&i.data.childElements.length>0&&A.push(...i.data.childElements),await ss.from("elements").insert(A.map(x=>C0(x))),console.log(` Undo:     ( 1 +  ${i.data.childElements?.length||0})`)}break}case"batch":{if(i.data.batchUpdates){console.log(` Undo: Batch update DB   (${i.data.batchUpdates.length})`);for(const A of i.data.batchUpdates)await ss.from("elements").update({props:A.prevProps}).eq("id",A.elementId);console.log(` Undo: Batch update DB   (${i.data.batchUpdates.length})`)}break}case"group":{if(console.log(" Undo: Group   DB "),await ss.from("elements").delete().eq("id",i.elementId),i.data.elements){for(const A of i.data.elements)await ss.from("elements").update({parent_id:A.parent_id,order_num:A.order_num}).eq("id",A.id);console.log(` Undo: Group   DB   ( ${i.data.elements.length})`)}break}case"ungroup":{if(console.log(" Undo: Ungroup  DB "),i.data.element&&await ss.from("elements").insert(C0(i.data.element)),i.data.elements){for(const A of i.data.elements)await ss.from("elements").update({parent_id:i.elementId,order_num:A.order_num}).eq("id",A.id);console.log(` Undo: Ungroup  DB   ( ${i.data.elements.length})`)}break}}}catch(A){console.warn("    ( ):",A)}console.log(" Undo ");const{elements:m,updateElementOrder:v}=e();r&&setTimeout(()=>{fE(m,r,v),console.log(" Undo  order_num  ")},100)}catch(n){console.error("Undo  :",n)}finally{t({historyOperationInProgress:!1})}},ANe=(t,e)=>async()=>{try{const n=e();if(!n.currentPageId)return;t({historyOperationInProgress:!0}),console.log(" Redo ");const r=Da.redo();if(!r){console.log(" Redo :   "),t({historyOperationInProgress:!1});return}const i=[];let s=[],a=null;try{switch(r.type){case"add":{r.data.element&&i.push(h0(r.data.element)),r.data.childElements&&r.data.childElements.length>0&&(i.push(...r.data.childElements.map(v=>h0(v))),console.log(` Redo:   ${r.data.childElements.length} `,{parent:r.data.element?.tag,children:r.data.childElements.map(v=>({id:v.id,tag:v.tag}))}));break}case"update":{r.data.props&&(a=h0(r.data.props));break}case"remove":{s=[r.elementId],r.data.childElements&&r.data.childElements.length>0&&s.push(...r.data.childElements.map(v=>v.id));break}case"batch":{console.log(" Redo: Batch update  ");break}case"group":{console.log(" Redo: Group   "),r.data.element&&i.push(h0(r.data.element));break}case"ungroup":{console.log(" Redo: Ungroup  "),s=[r.elementId];break}}}catch(v){console.warn("     :",v),t({historyOperationInProgress:!1});return}const o=e();let l=o.elements,c=o.selectedElementId,u=o.selectedElementProps;switch(r.type){case"add":{l=[...o.elements,...i];break}case"update":{const v=o.elements.findIndex(A=>A.id===r.elementId);v>=0&&a&&(l=o.elements.map((A,x)=>x===v?{...A,props:{...A.props,...a}}:A));break}case"remove":{l=o.elements.filter(v=>!s.includes(v.id)),s.includes(o.selectedElementId||"")&&(c=null,u={});break}case"batch":{if(r.data.batchUpdates){console.log(" Redo: Batch update  :",{updateCount:r.data.batchUpdates.length});const v=new Map;r.data.batchUpdates.forEach(x=>{v.set(x.elementId,x.newProps)}),l=o.elements.map(x=>{const E=v.get(x.id);return E?(console.log("   props:",{elementId:x.id,tag:x.tag}),{...x,props:{...x.props,...E}}):x});const A=v.get(o.selectedElementId||"");if(A){const x=l.find(E=>E.id===o.selectedElementId);x&&(u=Hg(x,{...x.props,...A}))}}break}case"group":{console.log(" Redo: Group  ");let v=[...o.elements,...i];if(console.log("   :",{groupId:i[0]?.id,tag:i[0]?.tag}),r.data.elements){const A=new Map;r.data.elements.forEach(x=>{A.set(x.id,{order_num:x.order_num||0})}),v=v.map(x=>{const E=A.get(x.id);return E?(console.log("     :",{childId:x.id,groupId:r.elementId}),{...x,parent_id:r.elementId,order_num:E.order_num}):x})}l=v;break}case"ungroup":{console.log(" Redo: Ungroup  ");let v=o.elements.filter(A=>!s.includes(A.id));if(r.data.elements){const A=new Map;r.data.elements.forEach(x=>{A.set(x.id,{parent_id:x.parent_id,order_num:x.order_num||0})}),v=v.map(x=>{const E=A.get(x.id);return E?(console.log("    parent :",{childId:x.id,newParentId:E.parent_id}),{...x,parent_id:E.parent_id,order_num:E.order_num}):x})}l=v,s.includes(o.selectedElementId||"")&&(c=null,u={});break}}if(t({elements:l,selectedElementId:c,selectedElementProps:u}),!(nh()&&!xf())&&typeof window<"u"&&window.parent)try{const v=e().elements;window.parent.postMessage({type:"ELEMENTS_UPDATED",payload:{elements:v.map(C0)}},"*")}catch(v){console.warn("postMessage  :",v)}try{switch(r.type){case"add":{if(r.data.element){const v=[r.data.element];r.data.childElements&&r.data.childElements.length>0&&v.push(...r.data.childElements),await ss.from("elements").insert(v.map(A=>C0(A))),console.log(` Redo:     ( 1 +  ${r.data.childElements?.length||0})`)}break}case"update":{if(r.elementId==="bulk_update"){console.log(" bulk_update  ID   ");break}if(r.data.props){const v=P0(e().elementsMap,r.elementId);v&&(await ss.from("elements").update({props:{...v.props,...r.data.props}}).eq("id",r.elementId),console.log(" Redo:    "))}break}case"remove":{const v=[r.elementId];r.data.childElements&&r.data.childElements.length>0&&v.push(...r.data.childElements.map(A=>A.id)),await ss.from("elements").delete().in("id",v),console.log(` Redo:     ( 1 +  ${r.data.childElements?.length||0})`);break}case"batch":{if(r.data.batchUpdates){console.log(` Redo: Batch update DB   (${r.data.batchUpdates.length})`);for(const v of r.data.batchUpdates){const A=P0(e().elementsMap,v.elementId);A&&await ss.from("elements").update({props:{...A.props,...v.newProps}}).eq("id",v.elementId)}console.log(` Redo: Batch update DB   (${r.data.batchUpdates.length})`)}break}case"group":{if(console.log(" Redo: Group  DB "),r.data.element&&await ss.from("elements").insert(C0(r.data.element)),r.data.elements){for(const v of r.data.elements)await ss.from("elements").update({parent_id:r.elementId,order_num:v.order_num}).eq("id",v.id);console.log(` Redo: Group  DB   ( ${r.data.elements.length})`)}break}case"ungroup":{if(console.log(" Redo: Ungroup DB "),await ss.from("elements").delete().eq("id",r.elementId),r.data.elements){for(const v of r.data.elements)await ss.from("elements").update({parent_id:v.parent_id,order_num:v.order_num}).eq("id",v.id);console.log(` Redo: Ungroup DB   ( ${r.data.elements.length})`)}break}}}catch(v){console.warn("    ( ):",v)}console.log(" Redo ");const{elements:f,updateElementOrder:p}=e(),m=n.currentPageId;m&&setTimeout(()=>{fE(f,m,p),console.log(" Redo  order_num  ")},100)}catch(n){console.error("Redo  :",n)}finally{t({historyOperationInProgress:!1})}},yNe=(t,e)=>async n=>{console.log(" removeElement :",{elementId:n});const r=e(),i=P0(r.elementsMap,n);if(!i){console.log(" removeElement:    ",{elementId:n});return}console.log("  :",{id:i.id,tag:i.tag,props:i.props});const s=A=>{const x=r.elements.filter(w=>w.parent_id===A),E=[...x];return x.forEach(w=>{E.push(...s(w.id))}),E};let a=s(n);if(i.tag==="Column"){const A=r.elements.find(x=>{const E=r.elements.find(w=>w.id===i.parent_id);return E&&x.id===E.parent_id&&x.tag==="Table"});if(A){const x=r.elements.find(E=>E.parent_id===A.id&&E.tag==="TableBody");if(x){const w=r.elements.filter(B=>B.parent_id===x.id&&B.tag==="Row").flatMap(B=>r.elements.filter(D=>D.parent_id===B.id&&D.tag==="Cell"&&D.order_num===i.order_num));a=[...a,...w],console.log(` Column    Cell : ${w.length}`,{columnOrder:i.order_num,cellIds:w.map(B=>B.id)})}}}if(i.tag==="Cell"){const A=r.elements.find(x=>x.id===i.parent_id);if(A&&A.tag==="Row"){const x=r.elements.find(E=>E.id===A.parent_id);if(x&&x.tag==="TableBody"){const E=r.elements.find(w=>w.id===x.parent_id&&w.tag==="Table");if(E){const w=r.elements.find(B=>B.parent_id===E.id&&B.tag==="TableHeader");if(w){const B=r.elements.find(D=>D.parent_id===w.id&&D.tag==="Column"&&D.order_num===i.order_num);if(B){const T=r.elements.filter(M=>M.parent_id===x.id&&M.tag==="Row").flatMap(M=>r.elements.filter(R=>R.parent_id===M.id&&R.tag==="Cell"&&R.order_num===i.order_num&&R.id!==i.id));a=[...a,B,...T],console.log(` Cell    Column   Cell : Column 1, Cell ${T.length}`,{cellOrder:i.order_num,columnId:B.id,otherCellIds:T.map(M=>M.id)})}}}}}}if(i.tag==="Tab"||i.tag==="Panel"){const A=i.props.tabId;if(console.log(` ${i.tag}   - tabId:`,A,"element.props:",i.props),A){const x=r.elements.find(E=>E.id===i.parent_id);if(console.log("  :",x?.tag,x?.id),x&&x.tag==="Tabs"){const E=r.elements.filter(B=>B.parent_id===x.id);console.log("  :",E.map(B=>({id:B.id,tag:B.tag,tabId:B.props.tabId})));const w=r.elements.find(B=>B.parent_id===x.id&&B.tag!==i.tag&&B.props.tabId===A);if(console.log("    :",w?{id:w.id,tag:w.tag,tabId:w.props.tabId}:"null"),w)a=[...a,w],console.log(` ${i.tag}    ${w.tag} :`,{tabId:A,deletedElementId:i.id,relatedElementId:w.id});else{console.log(" tabId      . order_num  fallback ");const B=r.elements.find(D=>D.parent_id===x.id&&D.tag!==i.tag&&Math.abs((D.order_num||0)-(i.order_num||0))===1);B&&(a=[...a,B],console.log(` ${i.tag}    ${B.tag}  (order_num ):`,{deletedElementOrder:i.order_num,relatedElementOrder:B.order_num,deletedElementId:i.id,relatedElementId:B.id}))}}}else{console.log(` ${i.tag} tabId . order_num     `);const x=r.elements.find(E=>E.id===i.parent_id);if(x&&x.tag==="Tabs"){const E=r.elements.find(w=>w.parent_id===x.id&&w.tag!==i.tag&&Math.abs((w.order_num||0)-(i.order_num||0))===1);E&&(a=[...a,E],console.log(` ${i.tag}    ${E.tag}  (order_num , tabId ):`,{deletedElementOrder:i.order_num,relatedElementOrder:E.order_num,deletedElementId:i.id,relatedElementId:E.id}))}}}const l=[i,...a].filter((A,x,E)=>E.findIndex(w=>w.id===A.id)===x),c=l.map(A=>A.id);console.log(`  : ${n}   ${l.length-1}`,{parent:i.tag,relatedElements:l.slice(1).map(A=>({id:A.id,tag:A.tag}))});try{await(await On()).elements.deleteMany(c),console.log(" [IndexedDB]   :",c)}catch(A){console.error(" [IndexedDB]    :",A)}const u=e();u.currentPageId&&Da.addEntry({type:"remove",elementId:n,data:{element:{...i},childElements:l.slice(1).map(A=>({...A}))}});const h=u.elements.length;console.log("    :",h),console.log("   ID:",c),c.forEach(A=>{const x=u.elements.find(E=>E.id===A);x&&(x.tag==="Tab"||x.tag==="Panel")&&console.log(`  ${x.tag}:`,{id:x.id,tag:x.tag,tabId:x.props.tabId,title:x.props.title,order_num:x.order_num})});const f=u.elements.filter(A=>!c.includes(A.id)),p=f.length;console.log("    :",p,"( :",h-p,")");const m=c.includes(u.selectedElementId||"");t({elements:f,...m&&{selectedElementId:null,selectedElementProps:{}}}),typeof window<"u"&&window.parent&&window.parent.postMessage({type:"ELEMENT_REMOVED",payload:{elementId:c}},"*"),e()._rebuildIndexes();const v=e().currentPageId;v&&(i.tag==="Tab"||i.tag==="Panel"||i.tag==="ListBoxItem"||i.tag==="GridListItem"||i.tag==="MenuItem"||i.tag==="ComboBoxItem"||i.tag==="SelectItem"||i.tag==="TreeItem"||i.tag==="ToggleButton"?console.log(` ${i.tag}  - Undo   `):setTimeout(()=>{const{elements:x,updateElementOrder:E}=e();fE(x,v,E)},100))},vNe=(t,e)=>async n=>{const r=e();(r.currentPageId||n.layout_id)&&Da.addEntry({type:"add",elementId:n.id,data:{element:{...n}}}),t({elements:[...r.elements,n]}),e()._rebuildIndexes();try{const s=await On(),a=C0(n);console.log(` [IndexedDB]  : ${n.tag} layout_id=${n.layout_id} page_id=${n.page_id}`),console.log(` [IndexedDB] sanitized: layout_id=${a.layout_id} page_id=${a.page_id}`),await s.elements.insert(a),console.log(" [IndexedDB]   :",n.id)}catch(s){console.warn(" [IndexedDB]    ( ):",s)}const i=e().currentPageId;i&&n.page_id===i?setTimeout(()=>{const{elements:s,updateElementOrder:a}=e();fE(s,i,a)},100):n.layout_id&&setTimeout(()=>{const{elements:s,updateElementOrder:a}=e();s.filter(l=>l.layout_id===n.layout_id).length>0&&fE(s,n.layout_id,a)},100)},xNe=(t,e)=>async(n,r)=>{const i=e(),s=[n,...r];(i.currentPageId||n.layout_id)&&Da.addEntry({type:"add",elementId:n.id,data:{element:{...n},childElements:r.map(a=>({...a}))}}),t({elements:[...i.elements,...s]}),e()._rebuildIndexes();try{await(await On()).elements.insertMany(s.map(o=>C0(o))),console.log(` [IndexedDB]    : ${n.tag} +  ${r.length}`)}catch(a){console.warn(" [IndexedDB]    ( ):",a)}};function of(t){try{if(typeof structuredClone=="function")return structuredClone(t)}catch{}try{const e=JSON.stringify(t);return e===void 0?t:JSON.parse(e)}catch{return t}}function bNe(t,e){for(const n of Object.keys(e))if(t[n]!==e[n])return!0;return!1}const CNe=(t,e)=>async(n,r)=>{const i=e(),s=P0(i.elementsMap,n);if(!s)return;const a=r??{};if(Object.keys(a).length===0||!bNe(s.props,a))return;const o=!!i.currentPageId,l=o?of(s.props):null,c=o?of(r):null,u=o?of(s):null;i.currentPageId&&l&&c&&u&&Da.addEntry({type:"update",elementId:n,data:{props:c,prevProps:l,prevElement:u}});const h=i.elements.map(m=>m.id===n?{...m,props:{...m.props,...r}}:m),f=h.find(m=>m.id===n),p=i.selectedElementId===n&&f?Hg(f,r):i.selectedElementProps;t({elements:h,selectedElementProps:p}),e()._rebuildIndexes();try{await(await On()).elements.update(n,{props:r})}catch(m){console.warn(" [IndexedDB]     ( ):",m)}},ENe=(t,e)=>async(n,r)=>{if(Object.keys(r).length===0)return;const i=e(),s=P0(i.elementsMap,n);if(!s)return;const a=!!i.currentPageId&&!!r.props,o=a?of(s.props):null,l=a?of(r.props):null,c=a?of(s):null;i.currentPageId&&r.props&&o&&l&&c&&Da.addEntry({type:"update",elementId:n,data:{props:l,prevProps:o,prevElement:c}});const u=i.elements.map(p=>p.id===n?{...p,...r}:p),h=u.find(p=>p.id===n),f=i.selectedElementId===n&&r.props&&h?Hg(h,r.props):i.selectedElementProps;t({elements:u,selectedElementProps:f}),e()._rebuildIndexes();try{await(await On()).elements.update(n,r)}catch(p){console.warn(" [IndexedDB]     ( ):",p)}},SNe=(t,e)=>async n=>{if(n.length===0)return;const r=e(),i=n.filter(h=>P0(r.elementsMap,h.elementId)!==void 0);if(i.length===0)return;const s=[],a=new Map;for(const{elementId:h,props:f}of i){const p=P0(r.elementsMap,h);p&&(s.push({elementId:h,prevProps:of(p.props),prevElement:of(p)}),a.set(h,f))}const o=r.elements.map(h=>{const f=a.get(h.id);return f?{...h,props:{...h.props,...f}}:h}),l=r.selectedElementId,c=l&&a.has(l)?(()=>{const h=o.find(f=>f.id===l);return h?Hg(h,a.get(l)):r.selectedElementProps})():r.selectedElementProps;t({elements:o,selectedElementProps:c}),e().currentPageId&&s.length>0&&Da.addEntry({type:"batch",elementId:s[0].elementId,data:{batchUpdates:i.map((h,f)=>({elementId:h.elementId,props:of(h.props),prevProps:s[f]?.prevProps,prevElement:s[f]?.prevElement}))}}),e()._rebuildIndexes();try{const h=await On();await Promise.all(i.map(({elementId:f,props:p})=>h.elements.update(f,{props:p})))}catch(h){console.warn(" [IndexedDB]     ( ):",h)}},wNe=(t,e)=>async n=>{if(n.length===0)return;const r=e(),i=n.filter(f=>P0(r.elementsMap,f.elementId)!==void 0);if(i.length===0)return;const s=[],a=new Map;for(const{elementId:f,updates:p}of i){const m=P0(r.elementsMap,f);m&&(p.props&&s.push({elementId:f,prevProps:of(m.props),prevElement:of(m)}),a.set(f,p))}const o=r.elements.map(f=>{const p=a.get(f.id);return p?{...f,...p}:f}),l=r.selectedElementId,c=l?a.get(l):void 0,u=l&&c?.props?(()=>{const f=o.find(p=>p.id===l);return f?Hg(f,c.props):r.selectedElementProps})():r.selectedElementProps;t({elements:o,selectedElementProps:u}),e().currentPageId&&s.length>0&&Da.addEntry({type:"batch",elementId:s[0].elementId,data:{batchUpdates:s.map((f,p)=>({elementId:f.elementId,props:i[p]?.updates.props?of(i[p].updates.props):void 0,prevProps:f.prevProps,prevElement:f.prevElement}))}}),e()._rebuildIndexes();try{const f=await On();await Promise.all(i.map(({elementId:p,updates:m})=>f.elements.update(p,m)))}catch(f){console.warn(" [IndexedDB]     ( ):",f)}};function noe(){return{elementsByPage:new Map,rootsByPage:new Map}}function _Ne(t,e){const n=noe();for(const r of t)INe(n,r,e);return n}function INe(t,e,n){const{page_id:r,id:i,parent_id:s}=e;if(t.elementsByPage.has(r)||t.elementsByPage.set(r,new Set),t.elementsByPage.get(r).add(i),!s||BNe(s,n)){t.rootsByPage.has(r)||t.rootsByPage.set(r,[]);const o=t.rootsByPage.get(r);o.includes(i)||o.push(i)}}function roe(t,e,n){const r=t.elementsByPage.get(e);if(!r||r.size===0)return[];const i=[];for(const s of r){const a=n.get(s);a&&i.push(a)}return i.sort((s,a)=>(s.order_num??0)-(a.order_num??0)),i}function BNe(t,e){return e.get(t)?.tag==="Body"}const ioe=(t,e)=>{const n=mNe(t,e),r=ANe(t,e),i=yNe(t,e),s=vNe(t,e),a=xNe(t,e),o=CNe(t,e),l=ENe(t,e),c=SNe(t,e),u=wNe(t,e),h=()=>{const{elements:p}=e(),m=new Map,v=new Map;p.forEach(x=>{m.set(x.id,x);const E=x.parent_id||"root";v.has(E)||v.set(E,[]),v.get(E).push(x)});const A=_Ne(p,m);t({elementsMap:m,childrenMap:v,pageIndex:A})},f=p=>{const{pageIndex:m,elementsMap:v}=e();return roe(m,p,v)};return{elements:[],elementsMap:new Map,childrenMap:new Map,pageIndex:noe(),selectedElementId:null,selectedElementProps:{},selectedTab:null,pages:[],currentPageId:null,historyOperationInProgress:!1,selectedElementIds:[],multiSelectMode:!1,_rebuildIndexes:h,getPageElements:f,setElements:p=>{t({elements:p}),e()._rebuildIndexes()},loadPageElements:(p,m)=>{const{elements:v,updatedElements:A}=js.migrateOrphanElementsToBody(p,m);Da.setCurrentPage(m),t({elements:v,currentPageId:m}),e()._rebuildIndexes(),A.length>0&&Promise.all(A.map(x=>ud.updateElement(x.id,x))).then(()=>{console.log(` ${A.length} orphan  DB  `)}).catch(x=>{console.warn(" Orphan  DB  :",x)}),setTimeout(()=>{const{updateElementOrder:x}=e();fE(v,m,x)},50)},addElement:s,updateElementProps:o,updateElement:l,setSelectedElement:(p,m,v,A)=>{let x=m;if(p&&!x){const{elementsMap:B,elements:D}=e(),T=B.get(p)??lP(D,p);T&&(x=Hg(T))}const E=p&&x?{...x,...v?{style:v}:{},...A?{computedStyle:A}:{}}:{};t({selectedElementId:p,selectedElementProps:E,selectedElementIds:p?[p]:[],multiSelectMode:!1})},selectTabElement:(p,m,v)=>t({selectedElementId:p,selectedElementProps:m,selectedTab:{parentId:p,tabIndex:v}}),setPages:p=>t({pages:p}),setCurrentPageId:p=>{Da.setCurrentPage(p),t({currentPageId:p})},undo:n,redo:r,removeElement:i,removeTabPair:p=>{const m=e(),v=m.elements.filter(x=>x.parent_id!==p&&x.id!==p),A=m.selectedElementId===p;t({elements:v,...A&&{selectedElementId:null,selectedElementProps:{}}})},addComplexElement:a,updateElementOrder:(p,m)=>{const{elements:v}=e(),A=v.map(x=>x.id===p?{...x,order_num:m}:x);t({elements:A})},toggleElementInSelection:p=>{const m=e(),{selectedElementIds:v,elementsMap:A,elements:x}=m,E=B=>{const D=A.get(B)??lP(x,B);return D?Hg(D):null};if(v.includes(p)){const B=v.filter(D=>D!==p);if(B.length===0)t({selectedElementIds:[],multiSelectMode:!1,selectedElementId:null,selectedElementProps:{}});else{const D=E(B[0]);t({selectedElementIds:B,selectedElementId:B[0],selectedElementProps:D||{}})}}else{const B=[...v,p];if(B.length===1){const D=E(p);t({selectedElementIds:B,multiSelectMode:!0,selectedElementId:p,selectedElementProps:D||{}})}else t({selectedElementIds:B,multiSelectMode:!0})}},setSelectedElements:p=>{const{elementsMap:m,elements:v}=e(),A=x=>{const E=m.get(x)??lP(v,x);return E?Hg(E):null};if(p.length>0){const x=A(p[0]);t({selectedElementIds:p,multiSelectMode:p.length>1,selectedElementId:p[0],selectedElementProps:x||{}})}else t({selectedElementIds:[],multiSelectMode:!1,selectedElementId:null,selectedElementProps:{}})},batchUpdateElementProps:c,batchUpdateElements:u}},eM=Jl(ioe),TNe=(t,e)=>({isRealtimeMode:!0,pendingChanges:new Map,setRealtimeMode:n=>{t({isRealtimeMode:n})},addPendingChange:(n,r)=>{const i=e().pendingChanges,s=new Map(i),a=s.get(n)||{};s.set(n,{...a,...r}),t({pendingChanges:s})},clearPendingChanges:()=>{t({pendingChanges:new Map})},getPendingChanges:()=>e().pendingChanges}),MNe=(t,e)=>({viewMode:"canvas",showOverlay:!0,showGrid:!1,snapToGrid:!1,gridSize:8,showElementBorders:!1,showElementLabels:!1,overlayOpacity:100,themeMode:"auto",uiScale:100,historyInfo:{canUndo:!1,canRedo:!1,totalEntries:0,currentIndex:-1},setShowOverlay:n=>{t({showOverlay:n})},setShowGrid:n=>{t({showGrid:n})},setSnapToGrid:n=>{t({snapToGrid:n})},setGridSize:n=>{t({gridSize:n})},setShowElementBorders:n=>{t({showElementBorders:n})},setShowElementLabels:n=>{t({showElementLabels:n})},setOverlayOpacity:n=>{t({overlayOpacity:n})},setThemeMode:n=>{t({themeMode:n})},setUiScale:n=>{t({uiScale:n})},setHistoryInfo:n=>{t({historyInfo:n})},setViewMode:n=>{t({viewMode:n})},toggleViewMode:()=>{const n=e().viewMode;t({viewMode:n==="canvas"?"workflow":"canvas"})}}),qh={leftPanels:["nodes","components","datatable","datatableEditor","theme","ai","settings"],rightPanels:["properties","styles","events"],activeLeftPanels:["nodes"],activeRightPanels:["properties"],showLeft:!0,showRight:!0,bottomPanels:["monitor"],activeBottomPanels:[],showBottom:!1,bottomHeight:200},soe="xstudio-panel-layout";function DQ(){try{const t=localStorage.getItem(soe);if(t){const e=JSON.parse(t),n={...e};"activeLeftPanel"in e&&!Array.isArray(e.activeLeftPanels)&&(n.activeLeftPanels=e.activeLeftPanel?[e.activeLeftPanel]:[],delete n.activeLeftPanel),"activeRightPanel"in e&&!Array.isArray(e.activeRightPanels)&&(n.activeRightPanels=e.activeRightPanel?[e.activeRightPanel]:[],delete n.activeRightPanel);const r={...qh,...n};if(Array.isArray(r.activeLeftPanels)||(r.activeLeftPanels=qh.activeLeftPanels),Array.isArray(r.activeRightPanels)||(r.activeRightPanels=qh.activeRightPanels),Array.isArray(r.bottomPanels)||(r.bottomPanels=qh.bottomPanels),Array.isArray(r.activeBottomPanels)||(r.activeBottomPanels=qh.activeBottomPanels),typeof r.showBottom!="boolean"&&(r.showBottom=qh.showBottom),typeof r.bottomHeight!="number"&&(r.bottomHeight=qh.bottomHeight),Array.isArray(r.leftPanels)&&!r.leftPanels.includes("datatableEditor")){const i=r.leftPanels.indexOf("datatable");i>=0?r.leftPanels.splice(i+1,0,"datatableEditor"):r.leftPanels.push("datatableEditor")}return Array.isArray(r.rightPanels)&&(r.rightPanels=r.rightPanels.filter(i=>i!=="data")),Array.isArray(r.activeRightPanels)&&(r.activeRightPanels=r.activeRightPanels.filter(i=>i!=="data")),Array.isArray(r.leftPanels)&&(r.leftPanels=r.leftPanels.filter(i=>i!=="data")),Array.isArray(r.activeLeftPanels)&&(r.activeLeftPanels=r.activeLeftPanels.filter(i=>i!=="data")),Array.isArray(r.bottomPanels)&&(r.bottomPanels=r.bottomPanels.filter(i=>i!=="data")),Array.isArray(r.activeBottomPanels)&&(r.activeBottomPanels=r.activeBottomPanels.filter(i=>i!=="data")),(r.activeLeftPanels.length>2||r.activeRightPanels.length>2)&&(console.warn("[PanelLayout]     .  ."),r.activeLeftPanels=qh.activeLeftPanels,r.activeRightPanels=qh.activeRightPanels,nT(r)),r}}catch(t){console.error("[PanelLayout] Failed to load from localStorage:",t)}return null}function nT(t){try{localStorage.setItem(soe,JSON.stringify(t))}catch(e){console.error("[PanelLayout] Failed to save to localStorage:",e)}}const DNe=(t,e)=>({panelLayout:DQ()||qh,setPanelLayout:n=>{t({panelLayout:n}),nT(n)},resetPanelLayout:()=>{t({panelLayout:qh}),nT(qh)},savePanelLayoutToStorage:()=>{const{panelLayout:n}=e();nT(n)},loadPanelLayoutFromStorage:()=>{const n=DQ();n&&t({panelLayout:n})}});class RNe{maxPages;accessOrder=[];_hits=0;_misses=0;_evictions=0;constructor(e=5){this.maxPages=Math.max(1,e)}access(e){const n=this.accessOrder.indexOf(e);if(n!==-1?(this._hits++,this.accessOrder.splice(n,1)):this._misses++,this.accessOrder.unshift(e),this.accessOrder.length>this.maxPages){const i=this.accessOrder.pop()??null;return i&&this._evictions++,i}return null}has(e){return this.accessOrder.includes(e)}remove(e){const n=this.accessOrder.indexOf(e);return n!==-1?(this.accessOrder.splice(n,1),!0):!1}clear(){this.accessOrder=[],this._hits=0,this._misses=0,this._evictions=0}getPageIds(){return[...this.accessOrder]}get size(){return this.accessOrder.length}get capacity(){return this.maxPages}setMaxPages(e){this.maxPages=Math.max(1,e);const n=[];for(;this.accessOrder.length>this.maxPages;){const r=this.accessOrder.pop();r&&(n.push(r),this._evictions++)}return n}getStats(){const e=this._hits+this._misses;return{size:this.size,maxPages:this.maxPages,hits:this._hits,misses:this._misses,evictions:this._evictions,hitRate:e>0?this._hits/e*100:0}}getMostRecent(){return this.accessOrder[0]??null}getLeastRecent(){return this.accessOrder[this.accessOrder.length-1]??null}touch(e){const n=this.accessOrder.indexOf(e);return n===-1?!1:(this.accessOrder.splice(n,1),this.accessOrder.unshift(e),!0)}dump(){console.log(" [LRU] Cache state:"),console.log(`  Size: ${this.size}/${this.maxPages}`),console.log(`  Order: [${this.accessOrder.join("  ")}]`),console.log("  Stats:",this.getStats())}}const a0=new RNe(5);function PNe(t,e){const n=async p=>{try{const v=await(await On()).elements.getByPage(p);return v&&v.length>0?v.sort((A,x)=>(A.order_num||0)-(x.order_num||0)):null}catch(m){return console.warn("[Loader] IndexedDB load failed:",m),null}},r=async p=>{try{const{data:m,error:v}=await ss.from("elements").select("*").eq("page_id",p).order("order_num");if(v)throw v;return m??[]}catch(m){return console.error("[Loader] Supabase load failed:",m),[]}},i=async p=>{try{await(await On()).elements.bulkPut(p)}catch(m){console.warn("[Loader] IndexedDB cache failed:",m)}},s=async p=>{const m=e();if(!m.lazyLoadingEnabled){const v=[];return m.elementsMap.forEach(A=>{A.page_id===p&&v.push(A)}),v}if(m.loadedPages.has(p)){a0.access(p);const v=[];return m.elementsMap.forEach(A=>{A.page_id===p&&v.push(A)}),v}if(m.loadingPages.has(p))return new Promise(v=>{const A=setInterval(()=>{if(e().loadedPages.has(p)){clearInterval(A);const x=[];e().elementsMap.forEach(E=>{E.page_id===p&&x.push(E)}),v(x)}},50);setTimeout(()=>{clearInterval(A),v([])},1e4)});t(v=>({loadingPages:new Set([...v.loadingPages,p])}));try{let v=await n(p);(!v||v.length===0)&&(v=await r(p),v.length>0&&i(v)),v.length>0&&(t(x=>{const E=new Map(x.elementsMap),w=[...x.elements];return v.forEach(B=>{E.has(B.id)||(E.set(B.id,B),w.push(B))}),{elements:w,elementsMap:E}}),e()._rebuildIndexes());const A=a0.access(p);return A&&A!==e().currentPageId&&e().unloadPage(A),t(x=>({loadedPages:new Set([...x.loadedPages,p]),loadingPages:new Set([...x.loadingPages].filter(E=>E!==p))})),v}catch(v){return console.error("[Loader] Failed to load page:",v),t(A=>({loadingPages:new Set([...A.loadingPages].filter(x=>x!==p))})),[]}},a=p=>{const m=e();if(p===m.currentPageId){console.warn(`[Loader] Cannot unload current page: ${p}`);return}m.loadedPages.has(p)&&(t(v=>{const A=new Map(v.elementsMap),x=[];return A.forEach((w,B)=>{w.page_id===p&&x.push(B)}),x.forEach(w=>A.delete(w)),{elements:v.elements.filter(w=>w.page_id!==p),elementsMap:A,loadedPages:new Set([...v.loadedPages].filter(w=>w!==p))}}),a0.remove(p),e()._rebuildIndexes())};return{loadedPages:new Set,loadingPages:new Set,lazyLoadingEnabled:!0,lazyLoadPageElements:s,unloadPage:a,isPageLoaded:p=>e().loadedPages.has(p),isPageLoading:p=>e().loadingPages.has(p),setLazyLoadingEnabled:p=>{t({lazyLoadingEnabled:p})},getLRUStats:()=>a0.getStats(),clearAllPages:()=>{const p=e(),m=p.currentPageId;p.loadedPages.forEach(v=>{v!==m&&a(v)}),a0.clear(),m&&a0.access(m)},preloadPage:p=>{const m=e();m.loadedPages.has(p)||m.loadingPages.has(p)||("requestIdleCallback"in window?window.requestIdleCallback(()=>{s(p)}):setTimeout(()=>{s(p)},100))}}}const kNe=(t,e)=>async n=>{t({isLoading:!0,error:null});try{const s=(await(await On()).layouts.getByProject(n)||[]).sort((h,f)=>{const p=(h.order_num||0)-(f.order_num||0);return p!==0?p:h.name.localeCompare(f.name)}),{currentLayoutId:a}=e(),o=a&&s.some(h=>h.id===a),l=s.length>0&&!o,c=s.find(h=>h.order_num===0)||s[0],u=l?c?.id:o?a:null;t({layouts:s,isLoading:!1,currentLayoutId:u})}catch(r){console.error(" Layout   :",r),t({error:r,isLoading:!1})}},NNe=(t,e)=>async n=>{t({isLoading:!0,error:null});try{const r=await On(),i={id:crypto.randomUUID(),name:n.name,project_id:n.project_id,description:n.description,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await r.layouts.insert(i);const s={id:crypto.randomUUID(),tag:"body",props:{},parent_id:null,page_id:null,layout_id:i.id,order_num:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await r.elements.insert(s);const{elements:a,setElements:o}=eM.getState();o([...a,s],{skipHistory:!0});const{layouts:l}=e();return t({layouts:[...l,i],isLoading:!1}),i}catch(r){throw console.error(" Layout  :",r),t({error:r,isLoading:!1}),r}},LNe=(t,e)=>async(n,r)=>{t({isLoading:!0,error:null});try{await(await On()).layouts.update(n,r);const{layouts:s}=e();t({layouts:s.map(a=>a.id===n?{...a,...r,updated_at:new Date().toISOString()}:a),isLoading:!1})}catch(i){throw console.error(" Layout  :",i),t({error:i,isLoading:!1}),i}},FNe=(t,e)=>async n=>{t({isLoading:!0,error:null});try{const r=await On(),s=(await r.pages.getAll()).filter(u=>u.layout_id===n);if(s.length>0){await Promise.all(s.map(p=>r.pages.update(p.id,{layout_id:null})));const{pages:u,setPages:h}=eM.getState(),f=u.map(p=>s.some(m=>m.id===p.id)?{...p,layout_id:null}:p);h(f)}const o=(await r.elements.getAll()).filter(u=>u.layout_id===n);if(o.length>0){await Promise.all(o.map(p=>r.elements.delete(p.id)));const{elements:u,setElements:h}=eM.getState(),f=u.filter(p=>p.layout_id!==n);h(f,{skipHistory:!0})}await r.layouts.delete(n);const{layouts:l,currentLayoutId:c}=e();t({layouts:l.filter(u=>u.id!==n),currentLayoutId:c===n?null:c,isLoading:!1})}catch(r){throw console.error(" Layout  :",r),t({error:r,isLoading:!1}),r}},jNe=(t,e)=>async n=>{t({isLoading:!0,error:null});try{const r=await On(),{layouts:i}=e(),s=i.find(c=>c.id===n);if(!s)throw new Error(`Layout not found: ${n}`);const a={id:crypto.randomUUID(),name:`${s.name} (Copy)`,project_id:s.project_id,description:s.description,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await r.layouts.insert(a);const l=(await r.elements.getAll()).filter(c=>c.layout_id===n);if(l&&l.length>0){const c=new Map;l.forEach(h=>{c.set(h.id,crypto.randomUUID())});const u=l.map(h=>({...h,id:c.get(h.id),layout_id:a.id,parent_id:h.parent_id&&c.get(h.parent_id)||null,page_id:null}));await r.elements.insertMany(u)}return t({layouts:[...e().layouts,a],isLoading:!1}),a}catch(r){throw console.error(" Layout  :",r),t({error:r,isLoading:!1}),r}},ONe=t=>e=>{t({currentLayoutId:e})},zNe=t=>e=>{const{layouts:n}=t();return n.find(r=>r.id===e)},$Ne=(t,e)=>n=>e().filter(s=>s.layout_id===n&&s.tag==="Slot").map(s=>{const a=s.props.name;return{name:a||`slot_${s.id.slice(0,8)}`,displayName:a||"unnamed",required:s.props.required||!1,description:s.props.description,elementId:s.id}}),QNe=()=>async t=>{try{const i=(await(await On()).pages.getAll()).filter(s=>s.layout_id===t).map(s=>s.id);return{canDelete:i.length===0,usedByPages:i}}catch(e){return console.error(" Layout    :",e),{canDelete:!1,usedByPages:[]}}},UNe=(t,e)=>{const n=kNe(t,e),r=NNe(t,e),i=LNe(t,e),s=FNe(t,e),a=jNe(t,e),o=ONe(t),l=zNe(e),c=h=>$Ne(e,()=>eM.getState().elements)(h),u=QNe();return{layouts:[],currentLayoutId:null,isLoading:!1,error:null,fetchLayouts:n,createLayout:r,updateLayout:i,deleteLayout:s,duplicateLayout:a,setCurrentLayout:o,getLayoutById:l,getLayoutSlots:c,validateLayoutDelete:u}},Cl=Jl()(UM(UNe,{name:"xstudio-layouts",partialize:t=>({currentLayoutId:t.currentLayoutId})}));let je;const HNe=typeof window<"u"&&window.__XSTUDIO_STORE__;HNe?je=window.__XSTUDIO_STORE__:(je=Jl((...t)=>({...ioe(...t),...uNe(...t),...TNe(...t),...MNe(...t),...DNe(...t),...PNe(...t)})),typeof window<"u"&&(window.__XSTUDIO_STORE__=je,window.__XSTUDIO_STORE_ID__=Math.random().toString(36).substring(7)));const t6=()=>typeof window<"u"&&window!==window.top&&window.parent&&window.parent.__XSTUDIO_STORE__?window.parent.__XSTUDIO_STORE__.getState():typeof window<"u"&&window.__XSTUDIO_STORE__?window.__XSTUDIO_STORE__.getState():je.getState();je.subscribe;const GNe=[],VNe=()=>{const t=je(r=>r.currentPageId),e=je(r=>r.pageIndex),n=je(r=>r.elementsMap);return C.useMemo(()=>t?roe(e,t,n):GNe,[e,n,t])};class WNe{panels=new Map;initialized=!1;register(e){this.panels.has(e.id)&&console.warn(`[PanelRegistry] Panel "${e.id}" is already registered. Overwriting.`),this.panels.set(e.id,e)}registerMany(e){e.forEach(n=>this.register(n))}unregister(e){this.panels.delete(e)}getPanel(e){return this.panels.get(e)}getAllPanels(){return Array.from(this.panels.values())}getPanelsByCategory(e){return this.getAllPanels().filter(n=>n.category===e)}getPanelsByDefaultPosition(e){return this.getAllPanels().filter(n=>n.defaultPosition===e)}filterPanels(e){let n=this.getAllPanels();if(e.category&&(n=n.filter(r=>r.category===e.category)),e.search){const r=e.search.toLowerCase();n=n.filter(i=>i.name.toLowerCase().includes(r)||i.nameEn?.toLowerCase().includes(r)||i.description?.toLowerCase().includes(r))}return n}hasPanel(e){return this.panels.has(e)}get count(){return this.panels.size}get isInitialized(){return this.initialized}markInitialized(){this.initialized=!0}clear(){this.panels.clear(),this.initialized=!1}debug(){console.group("[PanelRegistry] Debug Info"),console.log("Total panels:",this.count),console.log("Initialized:",this.initialized),console.log("Panels by category:"),["navigation","editor","tool","system"].forEach(n=>{const r=this.getPanelsByCategory(n);console.log(`  ${n}:`,r.map(i=>i.id).join(", "))}),console.log("Panels by default position:"),console.log("  left:",this.getPanelsByDefaultPosition("left").map(n=>n.id).join(", ")),console.log("  right:",this.getPanelsByDefaultPosition("right").map(n=>n.id).join(", ")),console.groupEnd()}}const O_=new WNe;function cP(t){return t.trim()?/^[a-z0-9\-/]+$/i.test(t)?/\/\/+/.test(t)?{valid:!1,error:"Slug cannot contain consecutive slashes"}:t.endsWith("/")&&t!=="/"?{valid:!1,error:"Slug cannot end with a slash"}:{valid:!0}:{valid:!1,error:"Slug can only contain letters, numbers, hyphens, and slashes"}:{valid:!1,error:"Slug cannot be empty"}}function KNe(t){return t.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}function qNe(t){return t.startsWith("/")}function pgt(t){return qNe(t)?t:`/${t}`}function YNe({page:t,layout:e,allPages:n}){if(t.slug.startsWith("/"))return t.slug;if(e?.slug)return uP(`${e.slug}/${t.slug}`);if(t.parent_id&&n){const r=aoe(t.parent_id,n);return uP(`${r}/${t.slug}`)}return uP(`/${t.slug}`)}function aoe(t,e){const n=e.find(r=>r.id===t);return n?n.slug.startsWith("/")?n.slug:n.parent_id?`${aoe(n.parent_id,e)}/${n.slug}`:`/${n.slug}`:""}function uP(t){return t.replace(/\/+/g,"/")}function ggt(t,e,n){if(!e)return!1;let r=e;const i=new Set;for(;r;){if(r===t||i.has(r))return!0;i.add(r),r=n.find(a=>a.id===r)?.parent_id||null}return!1}function mgt(t,e){let n=0,r=t;for(;r;){const i=e.find(s=>s.id===r);if(!i?.parent_id)break;n++,r=i.parent_id}return n}function XNe({onSubmit:t,existingPagesCount:e}){const[n,r]=C.useState(!1),[i,s]=C.useState(""),[a,o]=C.useState(""),[l,c]=C.useState(null),[u,h]=C.useState(null),[f,p]=C.useState(null),[m,v]=C.useState(!1),A=je(F=>F.pages),x=Cl(F=>F.layouts),E=`Page ${e+1}`,w=`/page-${e+1}`;C.useEffect(()=>{n&&(s(E),o(w),c(null),h(null),p(null),v(!1))},[n,E,w]);const B=C.useCallback(F=>{s(F);const z=`/${KNe(F)}`;o(z);const G=cP(z);p(G.valid?null:G.error||null)},[]),D=C.useCallback(F=>{o(F);const z=cP(F);p(z.valid?null:z.error||null)},[]),T=C.useCallback(F=>{h(F||null)},[]),M=C.useMemo(()=>{const F=l?x.find(G=>G.id===l):null;return YNe({page:{slug:a,parent_id:u},layout:F?{id:F.id,name:F.name,project_id:F.project_id,slug:F.slug||void 0}:null,allPages:A.map(G=>({id:G.id,title:G.name,slug:G.slug||"",project_id:G.project_id||"",parent_id:G.parent_id,layout_id:G.layout_id,order_num:G.order_num}))})},[i,a,l,u,x,A]),R=C.useCallback(async()=>{const F=cP(a);if(!F.valid){p(F.error||"Invalid slug");return}if(i.trim()){v(!0);try{await t({title:i.trim(),slug:a,layoutId:l,parentId:u}),r(!1)}catch(z){console.error("Failed to create page:",z)}finally{v(!1)}}},[i,a,l,u,t]),k=C.useMemo(()=>A.map(F=>({value:F.id,label:F.name})),[A]),L=C.useMemo(()=>x.map(F=>({value:F.id,label:F.slug?`${F.name} (${F.slug})`:F.name})),[x]);return d.jsxs(cE,{isOpen:n,onOpenChange:r,children:[d.jsx(en,{className:"iconButton","aria-label":"Add Page",children:d.jsx(eE,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})}),d.jsx(F3e,{className:"add-page-modal",children:d.jsxs(gse,{className:"add-page-dialog",children:[d.jsxs(N3e,{slot:"title",className:"add-page-title",children:[d.jsx(eE,{size:20}),"Add New Page"]}),d.jsxs("div",{className:"add-page-form",children:[d.jsxs(dr,{className:"add-page-field",children:[d.jsx(xn,{children:"Title"}),d.jsx(br,{value:i,onChange:F=>B(F.target.value),placeholder:E})]}),d.jsxs(dr,{className:"add-page-field",isInvalid:!!f,children:[d.jsxs(xn,{children:[d.jsx(hI,{size:14}),"URL Slug"]}),d.jsx(br,{value:a,onChange:F=>D(F.target.value),placeholder:w}),f&&d.jsxs("div",{className:"add-page-error",children:[d.jsx(I8,{size:12}),d.jsx("span",{children:f})]}),d.jsx("div",{className:"add-page-hint",children:"Auto-generated from title. Edit if needed."})]}),d.jsxs("div",{className:"add-page-field",children:[d.jsxs(xn,{children:[d.jsx(fI,{size:14}),"Layout (Optional)"]}),d.jsxs("select",{value:l||"",onChange:F=>c(F.target.value||null),className:"add-page-select",children:[d.jsx("option",{value:"",children:"None"}),L.map(F=>d.jsx("option",{value:F.value,children:F.label},F.value))]})]}),d.jsxs("div",{className:"add-page-field",children:[d.jsxs(xn,{children:[d.jsx(u0e,{size:14}),"Parent Page (Optional)"]}),d.jsxs("select",{value:u||"",onChange:F=>T(F.target.value),className:"add-page-select",children:[d.jsx("option",{value:"",children:"None (Root Level)"}),k.map(F=>d.jsx("option",{value:F.value,children:F.label},F.value))]})]}),d.jsxs("div",{className:"add-page-preview",children:[d.jsx("span",{className:"add-page-preview-label",children:"Preview URL:"}),d.jsx("code",{className:"add-page-preview-url",children:M})]})]}),d.jsxs("div",{className:"add-page-actions",children:[d.jsx(en,{className:"add-page-cancel",onPress:()=>r(!1),children:"Cancel"}),d.jsx(en,{className:"add-page-submit",onPress:R,isDisabled:m||!i.trim()||!!f,children:m?"Creating...":"Create Page"})]})]})})]})}function JNe({pages:t,pageList:e,handleAddPage:n,addPageWithParams:r,projectId:i,renderTree:s,fetchElements:a}){const o=je(u=>u.setPages),l=async u=>{if(!r||!i){n();return}const h={projectId:i,title:u.title,slug:u.slug,layoutId:u.layoutId,parentId:u.parentId},f=await r(h);if(!f.success)throw f.error||new Error("Failed to create page")},c=async u=>{try{const p=await On(),v=(await p.elements.getByPage(u.id)).map(A=>A.id);console.log(` Page "${u.title}"  : ${v.length}  `),v.length>0&&(await p.elements.deleteMany(v),console.log(` [IndexedDB] ${v.length}   `)),await p.pages.delete(u.id),console.log(` [IndexedDB] Page "${u.title}"  `),await wb.deletePage(u.id),console.log(` [Supabase] Page "${u.title}"  `)}catch(p){console.error("  :",p);return}e.remove(u.id);const h=t.filter(p=>p.id!==u.id),f=h.map(p=>({id:p.id,name:p.title,slug:p.slug,parent_id:p.parent_id,order_num:p.order_num}));if(o(f),console.log("   :",u.title),h.length>0){const m=h.find(v=>v.order_num===0)||h[0];await a(m.id)}};return d.jsxs("div",{className:"sidebar_pages",children:[d.jsxs("div",{className:"panel-header",children:[d.jsx("h3",{className:"panel-title",children:"Pages"}),d.jsx("div",{className:"header-actions",children:d.jsx(XNe,{onSubmit:l,existingPagesCount:t.length})})]}),d.jsx("div",{className:"elements",children:t.length===0?d.jsx("p",{className:"no_element",children:"No pages available"}):s(t,u=>u.title,u=>a(u.id),c)})]})}class Ja{static iframe=null;static getIframe(){return this.iframe&&!this.iframe.contentWindow&&(this.iframe=null),this.iframe||(this.iframe=document.getElementById("previewFrame")),this.iframe}static clearIframeCache(){this.iframe=null}static sendToIframe(e,n){const r=this.getIframe();r?.contentWindow&&r.contentWindow.postMessage({type:e,payload:n},window.location.origin)}static sendToWindow(e,n){window.postMessage({type:e,payload:n},window.location.origin)}static clearOverlay(){this.sendToWindow("CLEAR_OVERLAY",{})}static handleMessage(e,n){try{const{type:r,payload:i}=e.data;switch(r){case"ELEMENT_SELECTED":i?.elementId&&n.setSelectedElement(i.elementId,i.props);break;case"ELEMENT_ADDED":i?.element&&n.addElement(i.element);break;case"ELEMENT_UPDATED":i?.elementId&&i?.props&&n.updateElementProps(i.elementId,i.props);break;case"ELEMENT_REMOVED":i?.elementId&&n.removeElement(i.elementId);break;case"ELEMENTS_LOADED":i?.elements&&n.setElements(i.elements);break;case"ERROR":i?.message&&n.setError(i.message);break;case"LOADING":typeof i?.loading=="boolean"&&n.setIsLoading(i.loading);break;default:break}}catch(r){console.error("Message handling error:",r)}}}function ooe(t,e=null){if(e===null){const r=new Map,i=new Map;t.forEach(a=>{if(a.deleted===!0)return;i.set(a.id,a);const o=a.parent_id||"root";r.has(o)||r.set(o,[]),r.get(o).push(a)});const s=a=>{let o=r.get(a)||[];if(a!=="root"){const l=i.get(a);l&&l.tag==="Tabs"?o=ZNe(o):l&&l.tag==="Table"?o=[...o].sort((c,u)=>(c.order_num||0)-(u.order_num||0)):o=[...o].sort((c,u)=>(c.order_num||0)-(u.order_num||0))}else o=[...o].sort((l,c)=>(l.order_num||0)-(c.order_num||0));return o.map(l=>({id:l.id,tag:l.tag,parent_id:l.parent_id,order_num:l.order_num,props:l.props,deleted:l.deleted,dataBinding:l.dataBinding,children:s(l.id)}))};return s("root")}return console.warn("buildTreeFromElements:    (parentId )"),[]}function ZNe(t){const e=t.filter(s=>s.tag==="Tab").sort((s,a)=>(s.order_num||0)-(a.order_num||0)),n=t.filter(s=>s.tag==="Panel").sort((s,a)=>(s.order_num||0)-(a.order_num||0)),r=[],i=new Set;return e.forEach(s=>{r.push(s);const o=s.props?.tabId;if(o){const l=n.find(c=>c.props?.tabId===o);l&&!i.has(l.id)&&(r.push(l),i.add(l.id))}else{console.warn(" Tab tabId , order_num  fallback :",s.id);const l=n.find(c=>!i.has(c.id)&&Math.abs((c.order_num||0)-(s.order_num||0))<=1);l&&(r.push(l),i.add(l.id))}}),n.forEach(s=>{i.has(s.id)||(console.warn("   Panel:",s.id),r.push(s))}),r}const yt={color:"#171717",stroke:1,size:16},e5e=(t,e)=>t.some(n=>n.parent_id===e),ys=t=>typeof t=="object"&&t!==null&&"tag"in t&&typeof t.tag=="string",Gu=t=>{if(typeof t!="object"||t===null||!("props"in t))return!1;const e=t.props;return typeof e=="object"&&e!==null},Tc=t=>Array.isArray(t)?t:[];function loe(t,e,n=0){const r=[];for(const i of t){const s=i.children&&i.children.length>0,a=e.has(i.id),o=i.tag==="ToggleButtonGroup"&&i.props?.children&&Array.isArray(i.props.children)&&i.props.children.length>0,l=i.tag==="CheckboxGroup"&&i.props?.children&&Array.isArray(i.props.children)&&i.props.children.length>0,c=i.tag==="RadioGroup"&&i.props?.children&&Array.isArray(i.props.children)&&i.props.children.length>0,u=i.tag==="ListBox"&&i.props?.children&&Array.isArray(i.props.children)&&i.props.children.length>0,h=i.tag==="GridList"&&i.props?.children&&Array.isArray(i.props.children)&&i.props.children.length>0,f=i.tag==="Select"&&i.props?.children&&Array.isArray(i.props.children)&&i.props.children.length>0,p=i.tag==="ComboBox"&&i.props?.children&&Array.isArray(i.props.children)&&i.props.children.length>0,m=i.tag==="Tree"&&i.props?.children&&Array.isArray(i.props.children)&&i.props.children.length>0,v=s||o||l||c||u||h||f||p||m;if(r.push({item:i,depth:n,hasChildren:v,isExpanded:a}),a){if(s&&i.children){const A=loe(i.children,e,n+1);r.push(...A)}if(o&&(i.props?.children).forEach((x,E)=>{r.push({item:i,depth:n+1,hasChildren:!1,isExpanded:!1,virtualChildType:"toggle",virtualChildIndex:E,virtualChildData:x})}),l&&(i.props?.children).forEach((x,E)=>{r.push({item:i,depth:n+1,hasChildren:!1,isExpanded:!1,virtualChildType:"checkbox",virtualChildIndex:E,virtualChildData:x})}),c&&(i.props?.children).forEach((x,E)=>{r.push({item:i,depth:n+1,hasChildren:!1,isExpanded:!1,virtualChildType:"radio",virtualChildIndex:E,virtualChildData:x})}),u||h||f||p){const A=i.props?.children,x=u?"listbox":h?"gridlist":f?"select":"combobox";A.forEach((E,w)=>{r.push({item:i,depth:n+1,hasChildren:!1,isExpanded:!1,virtualChildType:x,virtualChildIndex:w,virtualChildData:E})})}m&&(i.props?.children).forEach((x,E)=>{r.push({item:i,depth:n+1,hasChildren:x.children&&x.children.length>0,isExpanded:!1,virtualChildType:"tree",virtualChildIndex:E,virtualChildData:x})})}}return r}const RQ=we.memo(function({flatItem:e,selectedElementId:n,selectedTab:r,onItemClick:i,onItemDelete:s,onToggleExpand:a,onSelectTabElement:o}){const{item:l,depth:c,hasChildren:u,isExpanded:h,virtualChildType:f,virtualChildIndex:p,virtualChildData:m}=e;if(f&&p!==void 0){const B=r?.parentId===l.id&&r?.tabIndex===p,D=R=>{R.stopPropagation(),o?.(l.id,l.props,p)};let T="",M=d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}});switch(f){case"toggle":T=m.title||`Button ${p+1}`;break;case"checkbox":T=m.label||`Checkbox ${p+1}`;break;case"radio":T=m.label||`Radio ${p+1}`;break;case"listbox":case"gridlist":T=m.label||`Item ${p+1}`;break;case"select":case"combobox":T=m.label||`Option ${p+1}`;break;case"tree":{const R=m;T=R.title,M=R.children&&R.children.length>0?d.jsx(bT,{color:yt.color,strokeWidth:yt.stroke,size:yt.size}):d.jsx(S1,{color:yt.color,strokeWidth:yt.stroke,size:yt.size});break}}return d.jsx("div",{"data-depth":c,"data-has-children":!1,onClick:D,className:"element",children:d.jsxs("div",{className:`elementItem ${B?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:c>0?`${c*8}px`:"0px"}}),d.jsx("div",{className:"elementItemIcon",children:M}),d.jsx("div",{className:"elementItemLabel",children:T}),d.jsx("div",{className:"elementItemActions"})]})})}const v={id:l.id,tag:l.tag,parent_id:l.parent_id||null,order_num:l.order_num,props:l.props,deleted:l.deleted,dataBinding:l.dataBinding,page_id:"",created_at:"",updated_at:""},A=B=>{B.stopPropagation(),i(v)},x=B=>{B.stopPropagation(),u&&a(l.id)},E=async B=>{B.stopPropagation(),await s(v)};let w=l.tag;return l.tag==="Tab"&&l.props?w=`Tab: ${l.props.title||"Untitled"}`:l.tag==="Panel"&&l.props?w=`Panel: ${l.props.title||"Untitled"}`:l.tag==="TableHeader"?w="thead":l.tag==="TableBody"?w="tbody":l.tag==="Column"&&l.props?w=`th: ${l.props.children||"Column"}`:l.tag==="Row"?w="tr":l.tag==="Cell"&&l.props&&(w=`td: ${l.props.children||"Cell"}`),d.jsx("div",{"data-depth":c,"data-has-children":u,onClick:A,className:"element",children:d.jsxs("div",{className:`elementItem ${n===l.id?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:c>0?`${c*8}px`:"0px"}}),d.jsx("div",{className:"elementItemIcon",onClick:x,children:u?d.jsx(Sl,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{transform:h?"rotate(90deg)":"rotate(0deg)"}}):d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:w}),d.jsxs("div",{className:"elementItemActions",children:[d.jsx("button",{className:"iconButton","aria-label":"Settings",children:d.jsx(Fg,{color:yt.color,strokeWidth:yt.stroke,size:yt.size})}),l.tag!=="body"&&d.jsx("button",{className:"iconButton","aria-label":`Delete ${l.tag}`,onClick:E,children:d.jsx(Gd,{color:yt.color,strokeWidth:yt.stroke,size:yt.size})})]})]})})}),t5e=we.memo(function({tree:e,expandedKeys:n,selectedElementId:r,selectedTab:i,onItemClick:s,onItemDelete:a,onToggleExpand:o,onSelectTabElement:l,containerHeight:c=400}){const u=C.useRef(null),h=C.useMemo(()=>loe(e,n),[e,n]),f=Gae({count:h.length,getScrollElement:()=>u.current,estimateSize:()=>28,overscan:5}),p=f.getVirtualItems();return h.length<50?d.jsx(d.Fragment,{children:h.map(m=>d.jsx(RQ,{flatItem:m,selectedElementId:r,selectedTab:i,onItemClick:s,onItemDelete:a,onToggleExpand:o,onSelectTabElement:l},m.virtualChildType?`${m.item.id}-${m.virtualChildType}-${m.virtualChildIndex}`:m.item.id))}):d.jsx("div",{ref:u,className:"virtualized-tree-container",style:{height:c,overflow:"auto"},children:d.jsx("div",{style:{height:`${f.getTotalSize()}px`,width:"100%",position:"relative"},children:p.map(m=>{const v=h[m.index];return d.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${m.size}px`,transform:`translateY(${m.start}px)`},children:d.jsx(RQ,{flatItem:v,selectedElementId:r,selectedTab:i,onItemClick:s,onItemDelete:a,onToggleExpand:o,onSelectTabElement:l})},m.key)})})})}),n5e=50;function r5e({elements:t,selectedElementId:e,setSelectedElement:n,renderElementTree:r,sendElementSelectedMessage:i,collapseAllTreeItems:s,expandedKeys:a,onToggleExpand:o,selectedTab:l,onSelectTabElement:c,forceVirtualization:u=!1}){const{removeElement:h}=je(),f=we.useMemo(()=>ooe(t),[t]),p=u||t.length>=n5e,m=a&&o,v=C.useCallback(E=>{n(E.id,E.props),requestAnimationFrame(()=>i(E.id,E.props))},[n,i]),A=nh()&&!xf(),x=C.useCallback(async E=>{await h(E.id),E.id===e&&(n(null),A||Ja.clearOverlay())},[h,e,n,A]);return d.jsxs("div",{className:"sidebar_elements",children:[d.jsxs("div",{className:"panel-header",children:[d.jsx("h3",{className:"panel-title",children:"Layers"}),d.jsx("div",{className:"header-actions",children:d.jsx("button",{className:"iconButton","aria-label":"collapseAll",onClick:()=>{s&&s()},children:d.jsx(oY,{color:"#666",strokeWidth:1.5,size:16})})})]}),d.jsx("div",{className:"elements",children:t.length===0?d.jsx("p",{className:"no_element",children:"No element available"}):p&&m?d.jsx(t5e,{tree:f,expandedKeys:a,selectedElementId:e,selectedTab:l,onItemClick:v,onItemDelete:x,onToggleExpand:o,onSelectTabElement:c,elements:t,containerHeight:400}):r(f,v,x)})]})}function i5e({activeTab:t,onTabChange:e}){const n=[{id:"pages",label:"Page",icon:d.jsx(D8,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})},{id:"layouts",label:"Layout",icon:d.jsx(fI,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})}];return d.jsx("div",{className:"nodes-panel-tabs",role:"tablist","aria-label":"Nodes Panel Tabs",children:n.map(r=>d.jsxs("button",{role:"tab","aria-selected":t===r.id,"aria-controls":`tabpanel-${r.id}`,className:`nodes-panel-tab ${t===r.id?"active":""}`,onClick:()=>e(r.id),children:[r.icon,d.jsx("span",{className:"nodes-panel-tab-label",children:r.label})]},r.id))})}function s5e({pages:t,pageList:e,handleAddPage:n,addPageWithParams:r,projectId:i,renderTree:s,renderElementTree:a,fetchElements:o,elements:l,selectedElementId:c,setSelectedElement:u,sendElementSelectedMessage:h,requestAutoSelectAfterUpdate:f,collapseAllTreeItems:p,expandedKeys:m,onToggleExpand:v,selectedTab:A,onSelectTabElement:x}){const E=je(B=>B.currentPageId),w=C.useRef(null);return C.useEffect(()=>{if(E!==w.current&&E&&(w.current=E,l.length>0)){const D=l.find(T=>T.order_num===0)||l.find(T=>T.tag==="body");D&&(u(D.id,D.props),f(D.id))}},[E,l,u,f]),d.jsxs("div",{className:"pages-tab",role:"tabpanel",id:"tabpanel-pages","aria-label":"Pages",children:[d.jsx(JNe,{pages:t,pageList:e,handleAddPage:n,addPageWithParams:r,projectId:i,renderTree:s,fetchElements:o}),d.jsx(r5e,{elements:l,selectedElementId:c,setSelectedElement:u,renderElementTree:a,sendElementSelectedMessage:h,collapseAllTreeItems:p,expandedKeys:m,onToggleExpand:v,selectedTab:A,onSelectTabElement:x})]})}function coe(t={}){const{initialExpandedKeys:e,selectedElementId:n,elements:r=[]}=t,i=je(f=>f.elementsMap),[s,a]=C.useState(e||new Set),o=C.useCallback(f=>{a(p=>{const m=new Set(p);return m.has(f)?m.delete(f):m.add(f),m})},[]),l=C.useCallback(f=>{a(p=>{if(p.has(f))return p;const m=new Set(p);return m.add(f),m})},[]),c=C.useCallback(f=>{a(p=>{if(!p.has(f))return p;const m=new Set(p);return m.delete(f),m})},[]),u=C.useCallback(()=>{a(new Set)},[]),h=C.useCallback(f=>{const p=new Set;let m=i.get(f);for(;m?.parent_id;)p.add(m.parent_id),m=i.get(m.parent_id);p.size>0&&a(v=>{const A=new Set(v);return p.forEach(x=>A.add(x)),A})},[i]);return C.useEffect(()=>{if(!n||r.length===0)return;const f=new Set;let p=i.get(n);for(;p?.parent_id;)f.add(p.parent_id),p=i.get(p.parent_id);f.size>0&&a(m=>{const v=new Set(m);let A=!1;return f.forEach(x=>{v.has(x)||(v.add(x),A=!0)}),A?v:m})},[n,r.length,i]),{expandedKeys:s,toggleKey:o,expandKey:l,collapseKey:c,collapseAll:u,expandParents:h}}function a5e({selectedElementId:t,setSelectedElement:e,sendElementSelectedMessage:n,requestAutoSelectAfterUpdate:r,projectId:i}){const{projectId:s}=Fb(),a=i||s,o=Cl(H=>H.layouts),l=Cl(H=>H.currentLayoutId),c=Cl(H=>H.setCurrentLayout),u=Cl(H=>H.createLayout),h=Cl(H=>H.deleteLayout),f=Cl(H=>H.fetchLayouts),p=C.useMemo(()=>{const H=o.find(K=>K.id===l)||null;return console.log(` [currentLayout] : currentLayoutId=${l?.slice(0,8)}, found=${H?.name}`),H},[o,l]),m=sd(H=>H.setCurrentLayoutId),v=je(H=>H.elements),A=je(H=>H.removeElement),x=je(H=>H.setElements),E=nh()&&!xf();C.useEffect(()=>{console.log(" [LayoutsTab] projectId:",a),a?(console.log(" [LayoutsTab] fetchLayouts :",a),f(a)):console.warn(" [LayoutsTab] projectId !")},[a,f]);const w=we.useRef(new Set);C.useEffect(()=>{if(!l){console.log(" [LayoutsTab] currentLayoutId  -   ");return}if(w.current.has(l)){console.log(` [LayoutsTab] Layout ${l.slice(0,8)}   - `);return}(async()=>{try{console.log(` [LayoutsTab] Layout ${l}   ... (fallback)`);const X=await(await On()).elements.getByLayout(l);console.log(` [LayoutsTab] IndexedDB ${X.length}  `);const re=je.getState().elements,J=je.getState().setElements,ee=[...re.filter(te=>te.layout_id!==l),...X];J(ee,{skipHistory:!0}),w.current.add(l),console.log(` [LayoutsTab] Layout ${l}  ${X.length}   (: ${ee.length})`)}catch(K){console.error("[LayoutsTab] Layout   :",K)}})()},[l]);const B=C.useMemo(()=>{if(console.log(` [layoutElements] : currentLayout=${p?.id?.slice(0,8)}, allElements=${v.length}`),!p)return[];const H=v.filter(K=>K.layout_id===p.id);return console.log(` [layoutElements]  : ${H.length} (${H.map(K=>K.tag).join(", ")})`),H},[v,p]),D=C.useMemo(()=>(console.log(` [layoutElementTree]  : ${B.length} `),ooe(B)),[B]),{expandedKeys:T,toggleKey:M,collapseAll:R,expandKey:k}=coe({selectedElementId:t,elements:B}),L=we.useRef(null),F=we.useRef(!1);C.useEffect(()=>{if(p?.id!==L.current&&p?.id&&(R(),console.log(` [LayoutsTab] Layout : ${L.current?.slice(0,8)}  ${p.id.slice(0,8)}`),L.current=p.id,F.current=!1),p&&B.length>0&&!F.current){const K=B.find(X=>X.order_num===0)||B.find(X=>X.tag==="body");K&&(console.log(` [LayoutsTab] body   + : ${K.id.slice(0,8)}`),k(K.id),e(K.id,K.props),r(K.id),F.current=!0)}},[p?.id,B,k,R,e,r]);const z=C.useCallback((H,K,X,re=0)=>{const J=(Z,ee)=>Z.length===0?null:d.jsx(d.Fragment,{children:Z.map(te=>{const oe=te.children&&te.children.length>0,ae=T.has(te.id),se={id:te.id,tag:te.tag,parent_id:te.parent_id||null,order_num:te.order_num,props:te.props,deleted:te.deleted,layout_id:p?.id||null,page_id:null,created_at:"",updated_at:""};return d.jsxs("div",{"data-depth":ee,"data-has-children":oe,onClick:fe=>{fe.stopPropagation(),K(se)},className:"element",children:[d.jsxs("div",{className:`elementItem ${t===te.id?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:ee>0?`${ee*8}px`:"0px"}}),d.jsx("div",{className:"elementItemIcon",onClick:fe=>{fe.stopPropagation(),oe&&M(te.id)},children:oe?d.jsx(Sl,{color:ge.color,strokeWidth:ge.stroke,size:ge.size,style:{transform:ae?"rotate(90deg)":"rotate(0deg)"}}):d.jsx(Zi,{color:ge.color,strokeWidth:ge.stroke,size:ge.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:te.tag==="Slot"&&te.props?`Slot: ${te.props.name||"unnamed"}`:te.tag}),d.jsxs("div",{className:"elementItemActions",children:[d.jsx("button",{className:"iconButton","aria-label":"Settings",children:d.jsx(Fg,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})}),te.tag!=="body"&&d.jsx("button",{className:"iconButton","aria-label":`Delete ${te.tag}`,onClick:async fe=>{fe.stopPropagation(),await X(se)},children:d.jsx(Gd,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})})]})]}),ae&&oe&&te.children&&J(te.children,ee+1)]},te.id)})});return J(H,re)},[T,M,t,p?.id]),G=C.useCallback(async H=>{console.log(` [LayoutsTab] Layout : ${H.name} (${H.id})`),console.log(` [LayoutsTab]  currentLayoutId: ${l}`);try{const X=await(await On()).elements.getByLayout(H.id);console.log(` [LayoutsTab] Layout ${H.id.slice(0,8)}  ${X.length}  `);const Z=[...je.getState().elements.filter(ee=>ee.layout_id!==H.id),...X];x(Z,{skipHistory:!0}),w.current.add(H.id),c(H.id),m(H.id),console.log(" [LayoutsTab] Layout  ")}catch(K){console.error("Layout  :",K),c(H.id),m(H.id)}},[c,m,l,x]),V=C.useCallback(async H=>{try{await h(H.id);const K=o.filter(X=>X.id!==H.id);K.length>0?G(K[0]):(c(null),m(null))}catch(K){console.error("Layout  :",K)}},[h,o,G,c,m]),q=C.useCallback(async()=>{if(!a){console.error(" ID ");return}try{const H=await u({name:`Layout ${o.length+1}`,description:"",project_id:a});H&&G(H)}catch(H){console.error("Layout  :",H)}},[a,u,o.length,G]),O=C.useCallback(async H=>{await A(H.id),H.id===t&&(e(null),E||Ja.clearOverlay())},[A,t,e,E]);return d.jsxs("div",{className:"layouts-tab",role:"tabpanel",id:"tabpanel-layouts","aria-label":"Layouts",children:[d.jsxs("div",{className:"sidebar_layouts",children:[d.jsxs("div",{className:"panel-header",children:[d.jsx("h3",{className:"panel-title",children:"Layouts"}),d.jsx("div",{className:"header-actions",children:d.jsx("button",{className:"iconButton","aria-label":"Add Layout",onClick:q,children:d.jsx(eE,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})})})]}),d.jsx("div",{className:"elements",children:o.length===0?d.jsx("p",{className:"no_element",children:"No layouts available"}):o.map(H=>d.jsx("div",{className:"element",onClick:()=>G(H),children:d.jsxs("div",{className:`elementItem ${p?.id===H.id?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:"0px"}}),d.jsx("div",{className:"elementItemIcon",children:d.jsx(Zi,{color:ge.color,strokeWidth:ge.stroke,size:ge.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:H.name}),d.jsx("div",{className:"elementItemActions",children:d.jsx("button",{className:"iconButton","aria-label":`Delete ${H.name}`,onClick:K=>{K.stopPropagation(),V(H)},children:d.jsx(Gd,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})})})]})},H.id))})]}),d.jsxs("div",{className:"sidebar_elements",children:[d.jsxs("div",{className:"panel-header",children:[d.jsx("h3",{className:"panel-title",children:"Layers"}),d.jsx("div",{className:"header-actions",children:d.jsx("button",{className:"iconButton","aria-label":"Collapse All",onClick:()=>R(),children:d.jsx(oY,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})})})]}),d.jsx("div",{className:"elements",children:p?B.length===0?d.jsx("p",{className:"no_element",children:"No elements in this layout"}):z(D,H=>{e(H.id,H.props),requestAnimationFrame(()=>n(H.id,H.props))},O):d.jsx("p",{className:"no_element",children:"Select a layout to view elements"})})]})]})}function o5e({pages:t,pageList:e,handleAddPage:n,addPageWithParams:r,renderTree:i,renderElementTree:s,fetchElements:a,elements:o,selectedElementId:l,setSelectedElement:c,sendElementSelectedMessage:u,requestAutoSelectAfterUpdate:h,collapseAllTreeItems:f,projectId:p,expandedKeys:m,onToggleExpand:v,selectedTab:A,onSelectTabElement:x}){const E=sd(k=>k.mode),w=sd(k=>k.setMode),B=sd(k=>k.setCurrentPageId),D=sd(k=>k.setCurrentLayoutId),T=E==="layout"?"layouts":"pages",M=C.useCallback(k=>{k==="pages"?(w("page"),D(null)):(w("layout"),B(null))},[w,B,D]),R=C.useMemo(()=>T==="pages"?d.jsx(s5e,{pages:t,pageList:e,handleAddPage:n,addPageWithParams:r,projectId:p,renderTree:i,renderElementTree:s,fetchElements:a,elements:o,selectedElementId:l,setSelectedElement:c,sendElementSelectedMessage:u,requestAutoSelectAfterUpdate:h,collapseAllTreeItems:f,expandedKeys:m,onToggleExpand:v,selectedTab:A,onSelectTabElement:x}):d.jsx(a5e,{selectedElementId:l,setSelectedElement:c,sendElementSelectedMessage:u,requestAutoSelectAfterUpdate:h,projectId:p}),[T,t,e,n,r,p,i,s,a,o,l,c,u,h,f,m,v,A,x]);return d.jsxs("div",{className:"nodes-panel",children:[d.jsx(i5e,{activeTab:T,onTabChange:M}),d.jsx("div",{className:"nodes-panel-content",children:R})]})}var uoe=Symbol.for("immer-nothing"),PQ=Symbol.for("immer-draftable"),gu=Symbol.for("immer-state");function vp(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Kd=Object,pE=Kd.getPrototypeOf,tM="constructor",A4="prototype",n6="configurable",nM="enumerable",rT="writable",z_="value",Qy=t=>!!t&&!!t[gu];function k0(t){return t?doe(t)||y4(t)||!!t[PQ]||!!t[tM]?.[PQ]||v4(t)||x4(t):!1}var l5e=Kd[A4][tM].toString(),kQ=new WeakMap;function doe(t){if(!t||!nj(t))return!1;const e=pE(t);if(e===null||e===Kd[A4])return!0;const n=Kd.hasOwnProperty.call(e,tM)&&e[tM];if(n===Object)return!0;if(!C1(n))return!1;let r=kQ.get(n);return r===void 0&&(r=Function.toString.call(n),kQ.set(n,r)),r===l5e}function NI(t,e,n=!0){LI(t)===0?(n?Reflect.ownKeys(t):Kd.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function LI(t){const e=t[gu];return e?e.type_:y4(t)?1:v4(t)?2:x4(t)?3:0}var NQ=(t,e,n=LI(t))=>n===2?t.has(e):Kd[A4].hasOwnProperty.call(t,e),r6=(t,e,n=LI(t))=>n===2?t.get(e):t[e],rM=(t,e,n,r=LI(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function c5e(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var y4=Array.isArray,v4=t=>t instanceof Map,x4=t=>t instanceof Set,nj=t=>typeof t=="object",C1=t=>typeof t=="function",dP=t=>typeof t=="boolean",o0=t=>t.copy_||t.base_,rj=t=>t.modified_?t.copy_:t.base_;function i6(t,e){if(v4(t))return new Map(t);if(x4(t))return new Set(t);if(y4(t))return Array[A4].slice.call(t);const n=doe(t);if(e===!0||e==="class_only"&&!n){const r=Kd.getOwnPropertyDescriptors(t);delete r[gu];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o[rT]===!1&&(o[rT]=!0,o[n6]=!0),(o.get||o.set)&&(r[a]={[n6]:!0,[rT]:!0,[nM]:o[nM],[z_]:t[a]})}return Kd.create(pE(t),r)}else{const r=pE(t);if(r!==null&&n)return{...t};const i=Kd.create(r);return Kd.assign(i,t)}}function ij(t,e=!1){return b4(t)||Qy(t)||!k0(t)||(LI(t)>1&&Kd.defineProperties(t,{set:GB,add:GB,clear:GB,delete:GB}),Kd.freeze(t),e&&NI(t,(n,r)=>{ij(r,!0)},!1)),t}function u5e(){vp(2)}var GB={[z_]:u5e};function b4(t){return t===null||!nj(t)?!0:Kd.isFrozen(t)}var iM="MapSet",s6="Patches",hoe={};function gE(t){const e=hoe[t];return e||vp(0,t),e}var d5e=t=>!!hoe[t],$_,foe=()=>$_,h5e=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:d5e(iM)?gE(iM):void 0});function LQ(t,e){e&&(t.patchPlugin_=gE(s6),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function a6(t){o6(t),t.drafts_.forEach(f5e),t.drafts_=null}function o6(t){t===$_&&($_=t.parent_)}var FQ=t=>$_=h5e($_,t);function f5e(t){const e=t[gu];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function jQ(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[gu].modified_&&(a6(e),vp(4)),k0(t)&&(t=OQ(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[gu].base_,t,e)}else t=OQ(e,n);return p5e(e,t,!0),a6(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==uoe?t:void 0}function OQ(t,e){if(b4(e))return e;const n=e[gu];if(!n)return sj(e,t.handledSet_,t);if(!C4(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);moe(n,t)}return n.copy_}function p5e(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&ij(e,n)}function poe(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var C4=(t,e)=>t.scope_===e,g5e=[];function goe(t,e,n,r){const i=o0(t),s=t.type_;if(r!==void 0&&r6(i,r,s)===e){rM(i,r,n,s);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;NI(i,(l,c)=>{if(Qy(c)){const u=o.get(c)||[];u.push(l),o.set(c,u)}})}const a=t.draftLocations_.get(e)??g5e;for(const o of a)rM(i,o,n,s)}function m5e(t,e,n){t.callbacks_.push(function(i){const s=e;if(!s||!C4(s,i))return;i.mapSetPlugin_?.fixSetContents(s);const a=rj(s);goe(t,s.draft_??s,a,n),moe(s,i)})}function moe(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}poe(t)}}function A5e(t,e,n){const{scope_:r}=t;if(Qy(n)){const i=n[gu];C4(i,r)&&i.callbacks_.push(function(){iT(t);const a=rj(i);goe(t,n,a,e)})}else k0(n)&&t.callbacks_.push(function(){const s=o0(t);r6(s,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&sj(r6(t.copy_,e,t.type_),r.handledSet_,r)})}function sj(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Qy(t)||e.has(t)||!k0(t)||b4(t)||(e.add(t),NI(t,(r,i)=>{if(Qy(i)){const s=i[gu];if(C4(s,n)){const a=rj(s);rM(t,r,a,t.type_),poe(s)}}else k0(i)&&sj(i,e,n)})),t}function y5e(t,e){const n=y4(t),r={type_:n?1:0,scope_:e?e.scope_:foe(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=aj;n&&(i=[r],s=Q_);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,[o,r]}var aj={get(t,e){if(e===gu)return t;const n=o0(t);if(!NQ(n,e,t.type_))return v5e(t,n,e);const r=n[e];if(t.finalized_||!k0(r))return r;if(r===hP(t.base_,e)){iT(t);const i=t.type_===1?+e:e,s=c6(t.scope_,r,t,i);return t.copy_[i]=s}return r},has(t,e){return e in o0(t)},ownKeys(t){return Reflect.ownKeys(o0(t))},set(t,e,n){const r=Aoe(o0(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=hP(o0(t),e),s=i?.[gu];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(c5e(n,i)&&(n!==void 0||NQ(t.base_,e,t.type_)))return!0;iT(t),l6(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),A5e(t,e,n)),!0},deleteProperty(t,e){return iT(t),hP(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),l6(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=o0(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[rT]:!0,[n6]:t.type_!==1||e!=="length",[nM]:r[nM],[z_]:n[e]}},defineProperty(){vp(11)},getPrototypeOf(t){return pE(t.base_)},setPrototypeOf(){vp(12)}},Q_={};NI(aj,(t,e)=>{Q_[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}});Q_.deleteProperty=function(t,e){return Q_.set.call(this,t,e,void 0)};Q_.set=function(t,e,n){return aj.set.call(this,t[0],e,n,t[0])};function hP(t,e){const n=t[gu];return(n?o0(n):t)[e]}function v5e(t,e,n){const r=Aoe(e,n);return r?z_ in r?r[z_]:r.get?.call(t.draft_):void 0}function Aoe(t,e){if(!(e in t))return;let n=pE(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=pE(n)}}function l6(t){t.modified_||(t.modified_=!0,t.parent_&&l6(t.parent_))}function iT(t){t.copy_||(t.assigned_=new Map,t.copy_=i6(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var x5e=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,n,r)=>{if(C1(e)&&!C1(n)){const s=n;n=e;const a=this;return function(l=s,...c){return a.produce(l,u=>n.call(this,u,...c))}}C1(n)||vp(6),r!==void 0&&!C1(r)&&vp(7);let i;if(k0(e)){const s=FQ(this),a=c6(s,e,void 0);let o=!0;try{i=n(a),o=!1}finally{o?a6(s):o6(s)}return LQ(s,r),jQ(i,s)}else if(!e||!nj(e)){if(i=n(e),i===void 0&&(i=e),i===uoe&&(i=void 0),this.autoFreeze_&&ij(i,!0),r){const s=[],a=[];gE(s6).generateReplacementPatches_(e,i,{patches_:s,inversePatches_:a}),r(s,a)}return i}else vp(1,e)},this.produceWithPatches=(e,n)=>{if(C1(e))return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let r,i;return[this.produce(e,n,(a,o)=>{r=a,i=o}),r,i]},dP(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),dP(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),dP(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){k0(t)||vp(8),Qy(t)&&(t=b5e(t));const e=FQ(this),n=c6(e,t,void 0);return n[gu].isManual_=!0,o6(e),n}finishDraft(t,e){const n=t&&t[gu];(!n||!n.isManual_)&&vp(9);const{scope_:r}=n;return LQ(r,e),jQ(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=gE(s6).applyPatches_;return Qy(t)?r(t,e):this.produce(t,i=>r(i,e))}};function c6(t,e,n,r){const[i,s]=v4(e)?gE(iM).proxyMap_(e,n):x4(e)?gE(iM).proxySet_(e,n):y5e(e,n);return(n?.scope_??foe()).drafts_.push(i),s.callbacks_=n?.callbacks_??[],s.key_=r,n&&r!==void 0?m5e(n,s,r):s.callbacks_.push(function(l){l.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:c}=l;s.modified_&&c&&c.generatePatches_(s,[],l)}),i}function b5e(t){return Qy(t)||vp(10,t),yoe(t)}function yoe(t){if(!k0(t)||b4(t))return t;const e=t[gu];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=i6(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=i6(t,!0);return NI(n,(i,s)=>{rM(n,i,yoe(s))},r),e&&(e.finalized_=!1),n}var C5e=new x5e,fP=C5e.produce;const Kl=[];for(let t=0;t<256;++t)Kl.push((t+256).toString(16).slice(1));function E5e(t,e=0){return(Kl[t[e+0]]+Kl[t[e+1]]+Kl[t[e+2]]+Kl[t[e+3]]+"-"+Kl[t[e+4]]+Kl[t[e+5]]+"-"+Kl[t[e+6]]+Kl[t[e+7]]+"-"+Kl[t[e+8]]+Kl[t[e+9]]+"-"+Kl[t[e+10]]+Kl[t[e+11]]+Kl[t[e+12]]+Kl[t[e+13]]+Kl[t[e+14]]+Kl[t[e+15]]).toLowerCase()}let pP;const S5e=new Uint8Array(16);function w5e(){if(!pP){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");pP=crypto.getRandomValues.bind(crypto)}return pP(S5e)}const _5e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),zQ={randomUUID:_5e};function I5e(t,e,n){t=t||{};const r=t.random??t.rng?.()??w5e();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,E5e(r)}function B5e(t,e,n){return zQ.randomUUID&&!t?zQ.randomUUID():I5e(t)}class sM{batchDelay;onBatch;filter;deduplication;eventBuffer=[];timerId=null;startTime;stats={totalReceived:0,totalFiltered:0,totalBatched:0,batchCount:0};lastReportedStats={totalReceived:0,totalFiltered:0,totalBatched:0};constructor(e){this.batchDelay=e.batchDelay??100,this.onBatch=e.onBatch,this.filter=e.filter,this.deduplication=e.deduplication??!0,this.startTime=performance.now()}addEvent(e){this.stats.totalReceived++;const n={eventType:e.eventType||"*",table:e.table||"unknown",new:e.new,old:e.old,id:this.extractId(e),timestamp:performance.now(),raw:e};if(this.filter&&!this.filter(n)){this.stats.totalFiltered++,console.log(" [RealtimeBatcher] Event filtered:",n.table,n.id);return}if(this.deduplication&&this.isDuplicate(n)){this.stats.totalFiltered++,console.log(" [RealtimeBatcher] Duplicate event ignored:",n.table,n.id);return}this.eventBuffer.push(n),console.log(" [RealtimeBatcher] Event buffered:",n.table,n.id,`(${this.eventBuffer.length} in buffer)`),this.startTimer()}startTimer(){this.timerId===null&&(this.timerId=globalThis.setTimeout(()=>{this.flush()},this.batchDelay))}flush(){if(this.eventBuffer.length===0){this.timerId=null;return}const e=[...this.eventBuffer];this.eventBuffer=[],this.timerId=null,this.stats.totalBatched+=e.length,this.stats.batchCount++;const n=performance.now()-this.startTime;console.log(` [RealtimeBatcher] Flushing ${e.length} events (batch #${this.stats.batchCount}, elapsed: ${n.toFixed(2)}ms)`);const r=this.stats.totalReceived-this.lastReportedStats.totalReceived,i=this.stats.totalFiltered-this.lastReportedStats.totalFiltered,s=this.stats.totalBatched-this.lastReportedStats.totalBatched;b1.recordBatcherEvents(r,i,s),this.lastReportedStats.totalReceived=this.stats.totalReceived,this.lastReportedStats.totalFiltered=this.stats.totalFiltered,this.lastReportedStats.totalBatched=this.stats.totalBatched,this.onBatch(e)}extractId(e){const n=e.new,r=e.old;return n?.id||r?.id}isDuplicate(e){return e.id?this.eventBuffer.some(n=>n.table===e.table&&n.id===e.id&&n.eventType===e.eventType):!1}forceFlush(){this.timerId!==null&&(globalThis.clearTimeout(this.timerId),this.timerId=null),this.flush()}getStats(){const e=performance.now()-this.startTime;return{...this.stats,averageBatchSize:this.stats.batchCount>0?this.stats.totalBatched/this.stats.batchCount:0,bufferSize:this.eventBuffer.length,elapsedTime:e}}resetStats(){this.stats={totalReceived:0,totalFiltered:0,totalBatched:0,batchCount:0},this.startTime=performance.now()}destroy(){this.timerId!==null&&(globalThis.clearTimeout(this.timerId),this.timerId=null),this.eventBuffer=[]}}const Zh={tableFilter(t){return e=>t.includes(e.table)},eventTypeFilter(t){return e=>t.includes(e.eventType)},hasIdFilter(){return t=>t.id!==void 0},combineFilters(...t){return e=>t.every(n=>n(e))}};class Dc extends qE{static async getThemesByProject(e){try{return await(await On()).themes.getByProject(e)}catch(n){return console.error("[ThemeService] getThemesByProject failed:",n),[]}}static async getThemeById(e){try{return await(await On()).themes.getById(e)}catch(n){return console.error("[ThemeService] getThemeById failed:",n),null}}static async getActiveTheme(e){try{return await(await On()).themes.getActiveTheme(e)}catch(n){return console.error("[ThemeService] getActiveTheme failed:",n),null}}static async createTheme(e){const n=await On();let r=await n.projects.getById(e.project_id);if(!r){console.warn("[ThemeService] Project not found, creating temp project:",e.project_id);const s={id:e.project_id,name:"Temp Project",domain:"localhost",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};r=await n.projects.insert(s),console.log(" [IndexedDB] Temp project created:",r)}const i={id:js.generateId(),project_id:e.project_id,name:e.name,parent_theme_id:e.parent_theme_id||null,status:e.status||"draft",version:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return await n.themes.insert(i),console.log(" [IndexedDB] Theme created:",i),i}static async updateTheme(e,n){try{const i=await(await On()).themes.update(e,n);return console.log("[ThemeService] Theme updated:",i),i}catch(r){throw console.error("[ThemeService] updateTheme failed:",r),r}}static async deleteTheme(e){try{const n=await On(),r=await this.getThemeById(e);if(!r)throw new Error("   ");if((await this.getThemesByProject(r.project_id)).length===1)throw new Error("    ");await n.themes.delete(e),console.log("[ThemeService] Theme deleted:",e)}catch(n){throw console.error("[ThemeService] deleteTheme failed:",n),n}}static async duplicateTheme(e,n,r=!1){const i=new Dc,s=await this.getThemeById(e);if(!s)throw new Error("    ");const{data:a,error:o}=await i.supabase.rpc("duplicate_theme",{p_source_theme_id:e,p_new_name:n,p_inherit:r});if(o)throw console.error("[ThemeService] duplicateTheme failed:",o),new Error(`  : ${o.message}`);return i.invalidateCache(`themes:project:${s.project_id}`),console.log("[ThemeService] Theme duplicated:",a),a}static async activateTheme(e){try{const n=await On(),r=await this.getThemeById(e);if(!r)throw new Error("   ");const s=(await n.themes.getByProject(r.project_id)).filter(a=>a.status==="active");for(const a of s)await n.themes.update(a.id,{status:"draft"});await this.updateTheme(e,{status:"active"}),console.log("[ThemeService] Theme activated:",e)}catch(n){throw console.error("[ThemeService] activateTheme failed:",n),n}}static async createSnapshot(e){const n=new Dc,r=await this.getThemeById(e);if(!r)throw new Error("   ");const{data:i,error:s}=await n.supabase.rpc("increment_design_theme_version",{p_theme_id:e});if(s)throw console.error("[ThemeService] createSnapshot failed:",s),new Error(`   : ${s.message}`);return n.invalidateCache(`theme:id:${e}`),n.invalidateCache(`themes:project:${r.project_id}`),console.log("[ThemeService] Snapshot created, new version:",i),i}static async getThemeHierarchy(e){const n=await this.getThemesByProject(e),r=new Map;for(const i of n){const s=i.parent_theme_id||"root";r.has(s)||r.set(s,[]),r.get(s).push(i)}return r}static subscribeToTheme(e,n){const r=new Dc,i=new sM({batchDelay:100,onBatch:a=>{const o=a[a.length-1];n(o.raw),console.log(` [ThemeService] Batched ${a.length} theme events  processed 1`)},filter:Zh.combineFilters(Zh.tableFilter(["design_themes"]),Zh.hasIdFilter()),deduplication:!0}),s=r.supabase.channel(`theme:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"design_themes",filter:`id=eq.${e}`},a=>{i.addEvent(a)}).subscribe();return()=>{i.destroy(),r.supabase.removeChannel(s)}}static subscribeToProjectThemes(e,n){const r=new Dc,i=new sM({batchDelay:100,onBatch:a=>{a.forEach(o=>{n(o.raw)}),console.log(` [ThemeService] Batched ${a.length} project theme events`)},filter:Zh.combineFilters(Zh.tableFilter(["design_themes"]),Zh.hasIdFilter()),deduplication:!0}),s=r.supabase.channel(`themes:project:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"design_themes",filter:`project_id=eq.${e}`},a=>{i.addEvent(a)}).subscribe();return()=>{i.destroy(),r.supabase.removeChannel(s)}}}class is extends qE{static async getResolvedTokens(e){try{const{getDB:n}=await fn(async()=>{const{getDB:a}=await Promise.resolve().then(()=>yL);return{getDB:a}},void 0);return(await(await n()).designTokens.getByTheme(e)).map(a=>({...a,resolved_value:a.value,source_theme_id:e,is_inherited:!1}))}catch(n){return console.error("[TokenService] getResolvedTokens failed:",n),[]}}static async searchTokens(e,n,r=!0){const i=new is,s=`tokens:search:${e}:${n}:${r}`;return i.handleCachedApiCall(s,"searchTokens",async()=>{const{data:a,error:o}=await i.supabase.rpc("search_tokens",{p_theme_id:e,p_query:n,p_include_inherited:r});if(o)throw new Error(`  : ${o.message}`);return{data:a||[],error:null}},{staleTime:300*1e3})}static async getTokenById(e){const n=new is,r=`token:id:${e}`;try{return await n.handleCachedApiCall(r,"getTokenById",async()=>await n.supabase.from("design_tokens").select("*").eq("id",e).single(),{staleTime:300*1e3})}catch(i){return console.error("[TokenService] getTokenById failed:",i),null}}static async createToken(e){const n=new is,r=await n.handleApiCall("createToken",async()=>await n.supabase.from("design_tokens").insert({project_id:e.project_id,theme_id:e.theme_id,name:e.name,type:e.type,value:e.value,scope:e.scope,alias_of:e.alias_of||null,css_variable:e.css_variable}).select().single());return n.invalidateCache(`tokens:resolved:${e.theme_id}`),n.invalidateCache(`tokens:search:${e.theme_id}`),n.invalidateCache(`tokens:${e.scope}:${e.theme_id}`),n.invalidateCache(`tokens:type:${e.theme_id}:${e.type}`),r}static async updateToken(e,n){const r=new is,i=await r.handleApiCall("updateToken",async()=>await r.supabase.from("design_tokens").update({...n,updated_at:new Date().toISOString()}).eq("id",e).select().single());return r.invalidateCache(`token:id:${e}`),r.invalidateCache(`tokens:resolved:${i.theme_id}`),r.invalidateCache(`tokens:search:${i.theme_id}`),r.invalidateCache(`tokens:${i.scope}:${i.theme_id}`),r.invalidateCache(`tokens:type:${i.theme_id}:${i.type}`),i}static async deleteToken(e){const n=new is,r=await this.getTokenById(e);if(!r)throw new Error("   ");await n.handleDeleteCall("deleteToken",async()=>await n.supabase.from("design_tokens").delete().eq("id",e)),n.invalidateCache(`token:id:${e}`),n.invalidateCache(`tokens:resolved:${r.theme_id}`),n.invalidateCache(`tokens:search:${r.theme_id}`),n.invalidateCache(`tokens:${r.scope}:${r.theme_id}`),n.invalidateCache(`tokens:type:${r.theme_id}:${r.type}`)}static async bulkUpsertTokens(e){const{getDB:n}=await fn(async()=>{const{getDB:a}=await Promise.resolve().then(()=>yL);return{getDB:a}},void 0),{ElementUtils:r}=await fn(async()=>{const{ElementUtils:a}=await Promise.resolve().then(()=>HPe);return{ElementUtils:a}},void 0),i=await n();let s=0;for(const a of e){const o=a.id||r.generateId(),l={id:o,project_id:a.project_id,theme_id:a.theme_id,name:a.name,type:a.type,value:a.value,scope:a.scope||"semantic",created_at:a.created_at||new Date().toISOString(),updated_at:new Date().toISOString()};await i.designTokens.getById(o)?await i.designTokens.update(o,l):await i.designTokens.insert(l),s++}return s}static async getRawTokens(e){const n=new is,r=`tokens:raw:${e}`;return n.handleCachedApiCall(r,"getRawTokens",async()=>await n.supabase.from("design_tokens").select("*").eq("theme_id",e).eq("scope","raw").order("name",{ascending:!0}),{staleTime:300*1e3})}static async getSemanticTokens(e){const n=new is,r=`tokens:semantic:${e}`;return n.handleCachedApiCall(r,"getSemanticTokens",async()=>await n.supabase.from("design_tokens").select("*").eq("theme_id",e).eq("scope","semantic").order("name",{ascending:!0}),{staleTime:300*1e3})}static async getTokensByType(e,n){const r=new is,i=`tokens:type:${e}:${n}`;return r.handleCachedApiCall(i,"getTokensByType",async()=>await r.supabase.from("design_tokens").select("*").eq("theme_id",e).eq("type",n).order("name",{ascending:!0}),{staleTime:300*1e3})}static async resolveAlias(e,n=new Set){if(n.has(e))return console.error("[TokenService] Circular alias detected:",e),null;n.add(e);const r=await this.getTokenById(e);return r?r.alias_of?this.resolveAlias(r.alias_of,n):r:null}static generateCSSVariable(e){return`--${e.replace(/\./g,"-")}`}static async isTokenNameUnique(e,n,r){let s=new is().supabase.from("design_tokens").select("id").eq("theme_id",e).eq("name",n);r&&(s=s.neq("id",r));const{data:a,error:o}=await s;return o?(console.error("[TokenService] isTokenNameUnique failed:",o),!1):a.length===0}static subscribeToTokenChanges(e,n){const r=new is,i=new sM({batchDelay:100,onBatch:a=>{const o=a[a.length-1];n(o.raw)},filter:Zh.combineFilters(Zh.tableFilter(["design_tokens"]),Zh.hasIdFilter()),deduplication:!0}),s=r.supabase.channel(`tokens:theme:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"design_tokens",filter:`theme_id=eq.${e}`},a=>{i.addEvent(a)}).subscribe();return()=>{i.destroy(),r.supabase.removeChannel(s)}}static subscribeToProjectTokens(e,n){const r=new is,i=new sM({batchDelay:100,onBatch:a=>{a.forEach(o=>{n(o.raw)})},filter:Zh.combineFilters(Zh.tableFilter(["design_tokens"]),Zh.hasIdFilter()),deduplication:!0}),s=r.supabase.channel(`tokens:project:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"design_tokens",filter:`project_id=eq.${e}`},a=>{i.addEvent(a)}).subscribe();return()=>{i.destroy(),r.supabase.removeChannel(s)}}static async getTokenStats(e){const n=await this.getResolvedTokens(e),r={total:n.length,raw:n.filter(i=>i.scope==="raw").length,semantic:n.filter(i=>i.scope==="semantic").length,byType:{},inherited:n.filter(i=>i.is_inherited).length};for(const i of n)r.byType[i.type]=(r.byType[i.type]||0)+1;return r}static async exportTokensW3C(e){const n=await this.getResolvedTokens(e),r={};for(const i of n){const s=i.name.split(".");let a=r;for(let l=0;l<s.length-1;l++)a[s[l]]||(a[s[l]]={}),a=a[s[l]];const o=s[s.length-1];a[o]={$type:i.type,$value:i.value},i.alias_of&&(a[o].$description=`Alias of ${i.alias_of}`)}return r}static async importTokensW3C(e,n,r){const i=[],s=(a,o=[])=>{for(const[l,c]of Object.entries(a))if(c&&typeof c=="object")if("$type"in c&&"$value"in c){const u=c;i.push({project_id:e,theme_id:n,name:[...o,l].join("."),type:u.$type,value:u.$value,scope:"raw",css_variable:this.generateCSSVariable([...o,l].join("."))})}else s(c,[...o,l])};return s(r),this.bulkUpsertTokens(i)}}function voe(t){const{h:e,s:n,l:r,a:i}=t,s=e/360,a=n/100,o=r/100;let l,c,u;if(a===0)l=c=u=o;else{const h=(m,v,A)=>(A<0&&(A+=1),A>1&&(A-=1),A<.16666666666666666?m+(v-m)*6*A:A<.5?v:A<.6666666666666666?m+(v-m)*(.6666666666666666-A)*6:m),f=o<.5?o*(1+a):o+a-o*a,p=2*o-f;l=h(p,f,s+1/3),c=h(p,f,s),u=h(p,f,s-1/3)}return{r:Math.round(l*255),g:Math.round(c*255),b:Math.round(u*255),a:i}}function u6(t){const{r:e,g:n,b:r,a:i}=t,s=e/255,a=n/255,o=r/255,l=Math.max(s,a,o),c=Math.min(s,a,o);let u=0,h=0;const f=(l+c)/2;if(l!==c){const p=l-c;switch(h=f>.5?p/(2-l-c):p/(l+c),l){case s:u=((a-o)/p+(a<o?6:0))/6;break;case a:u=((o-s)/p+2)/6;break;case o:u=((s-a)/p+4)/6;break}}return{h:Math.round(u*360),s:Math.round(h*100),l:Math.round(f*100),a:i}}function T5e(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),a:1}:null}function M5e(t){const e=n=>{const r=Math.round(n).toString(16);return r.length===1?"0"+r:r};return`#${e(t.r)}${e(t.g)}${e(t.b)}`}function D5e(t){const e=voe(t);return M5e(e)}function sT(t){const e=T5e(t);return e?u6(e):null}function aT(t){return`hsla(${t.h}, ${t.s}%, ${t.l}%, ${t.a})`}function gP(t){return`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`}function R5e(t){const e=100-t.l,n=Math.max(0,t.s-15);return{h:t.h,s:n,l:e,a:t.a}}function Ot(t,e,n){function r(o,l){if(o._zod||Object.defineProperty(o,"_zod",{value:{def:l,constr:a,traits:new Set},enumerable:!1}),o._zod.traits.has(t))return;o._zod.traits.add(t),e(o,l);const c=a.prototype,u=Object.keys(c);for(let h=0;h<u.length;h++){const f=u[h];f in o||(o[f]=c[f].bind(o))}}const i=n?.Parent??Object;class s extends i{}Object.defineProperty(s,"name",{value:t});function a(o){var l;const c=n?.Parent?new s:this;r(c,o),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(a,"init",{value:r}),Object.defineProperty(a,Symbol.hasInstance,{value:o=>n?.Parent&&o instanceof n.Parent?!0:o?._zod?.traits?.has(t)}),Object.defineProperty(a,"name",{value:t}),a}class V1 extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class xoe extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const boe={};function Ib(t){return boe}function P5e(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,i])=>e.indexOf(+r)===-1).map(([r,i])=>i)}function d6(t,e){return typeof e=="bigint"?e.toString():e}function oj(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function lj(t){return t==null}function cj(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function k5e(t,e){const n=(t.toString().split(".")[1]||"").length,r=e.toString();let i=(r.split(".")[1]||"").length;if(i===0&&/\d?e-\d?/.test(r)){const l=r.match(/\d?e-(\d?)/);l?.[1]&&(i=Number.parseInt(l[1]))}const s=n>i?n:i,a=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return a%o/10**s}const $Q=Symbol("evaluating");function Os(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==$Q)return r===void 0&&(r=$Q,r=n()),r},set(i){Object.defineProperty(t,e,{value:i})},configurable:!0})}function Wb(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Kb(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function QQ(t){return JSON.stringify(t)}function N5e(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Coe="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function aM(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const L5e=oj(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function U_(t){if(aM(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(aM(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function Eoe(t){return U_(t)?{...t}:Array.isArray(t)?[...t]:t}const F5e=new Set(["string","number","symbol"]);function E4(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Xy(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(r._zod.parent=t),r}function Jn(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function j5e(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const O5e={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function z5e(t,e){const n=t._zod.def,r=Kb(t._zod.def,{get shape(){const i={};for(const s in e){if(!(s in n.shape))throw new Error(`Unrecognized key: "${s}"`);e[s]&&(i[s]=n.shape[s])}return Wb(this,"shape",i),i},checks:[]});return Xy(t,r)}function $5e(t,e){const n=t._zod.def,r=Kb(t._zod.def,{get shape(){const i={...t._zod.def.shape};for(const s in e){if(!(s in n.shape))throw new Error(`Unrecognized key: "${s}"`);e[s]&&delete i[s]}return Wb(this,"shape",i),i},checks:[]});return Xy(t,r)}function Q5e(t,e){if(!U_(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const i=Kb(t._zod.def,{get shape(){const s={...t._zod.def.shape,...e};return Wb(this,"shape",s),s},checks:[]});return Xy(t,i)}function U5e(t,e){if(!U_(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...t._zod.def,get shape(){const r={...t._zod.def.shape,...e};return Wb(this,"shape",r),r},checks:t._zod.def.checks};return Xy(t,n)}function H5e(t,e){const n=Kb(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return Wb(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return Xy(t,n)}function G5e(t,e,n){const r=Kb(e._zod.def,{get shape(){const i=e._zod.def.shape,s={...i};if(n)for(const a in n){if(!(a in i))throw new Error(`Unrecognized key: "${a}"`);n[a]&&(s[a]=t?new t({type:"optional",innerType:i[a]}):i[a])}else for(const a in i)s[a]=t?new t({type:"optional",innerType:i[a]}):i[a];return Wb(this,"shape",s),s},checks:[]});return Xy(e,r)}function V5e(t,e,n){const r=Kb(e._zod.def,{get shape(){const i=e._zod.def.shape,s={...i};if(n)for(const a in n){if(!(a in s))throw new Error(`Unrecognized key: "${a}"`);n[a]&&(s[a]=new t({type:"nonoptional",innerType:i[a]}))}else for(const a in i)s[a]=new t({type:"nonoptional",innerType:i[a]});return Wb(this,"shape",s),s},checks:[]});return Xy(e,r)}function M1(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function Soe(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function VB(t){return typeof t=="string"?t:t?.message}function Bb(t,e,n){const r={...t,path:t.path??[]};if(!t.message){const i=VB(t.inst?._zod.def?.error?.(t))??VB(e?.error?.(t))??VB(n.customError?.(t))??VB(n.localeError?.(t))??"Invalid input";r.message=i}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function uj(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function H_(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const woe=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,d6,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},_oe=Ot("$ZodError",woe),Ioe=Ot("$ZodError",woe,{Parent:Error});function W5e(t,e=n=>n.message){const n={},r=[];for(const i of t.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}function K5e(t,e=n=>n.message){const n={_errors:[]},r=i=>{for(const s of i.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(a=>r({issues:a}));else if(s.code==="invalid_key")r({issues:s.issues});else if(s.code==="invalid_element")r({issues:s.issues});else if(s.path.length===0)n._errors.push(e(s));else{let a=n,o=0;for(;o<s.path.length;){const l=s.path[o];o===s.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(e(s))):a[l]=a[l]||{_errors:[]},a=a[l],o++}}};return r(t),n}const dj=t=>(e,n,r,i)=>{const s=r?Object.assign(r,{async:!1}):{async:!1},a=e._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new V1;if(a.issues.length){const o=new(i?.Err??t)(a.issues.map(l=>Bb(l,s,Ib())));throw Coe(o,i?.callee),o}return a.value},hj=t=>async(e,n,r,i)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},s);if(a instanceof Promise&&(a=await a),a.issues.length){const o=new(i?.Err??t)(a.issues.map(l=>Bb(l,s,Ib())));throw Coe(o,i?.callee),o}return a.value},S4=t=>(e,n,r)=>{const i=r?{...r,async:!1}:{async:!1},s=e._zod.run({value:n,issues:[]},i);if(s instanceof Promise)throw new V1;return s.issues.length?{success:!1,error:new(t??_oe)(s.issues.map(a=>Bb(a,i,Ib())))}:{success:!0,data:s.value}},q5e=S4(Ioe),w4=t=>async(e,n,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let s=e._zod.run({value:n,issues:[]},i);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new t(s.issues.map(a=>Bb(a,i,Ib())))}:{success:!0,data:s.value}},Y5e=w4(Ioe),X5e=t=>(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return dj(t)(e,n,i)},J5e=t=>(e,n,r)=>dj(t)(e,n,r),Z5e=t=>async(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return hj(t)(e,n,i)},eLe=t=>async(e,n,r)=>hj(t)(e,n,r),tLe=t=>(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return S4(t)(e,n,i)},nLe=t=>(e,n,r)=>S4(t)(e,n,r),rLe=t=>async(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return w4(t)(e,n,i)},iLe=t=>async(e,n,r)=>w4(t)(e,n,r),sLe=/^[cC][^\s-]{8,}$/,aLe=/^[0-9a-z]+$/,oLe=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,lLe=/^[0-9a-vA-V]{20}$/,cLe=/^[A-Za-z0-9]{27}$/,uLe=/^[a-zA-Z0-9_-]{21}$/,dLe=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,hLe=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,UQ=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,fLe=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,pLe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function gLe(){return new RegExp(pLe,"u")}const mLe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ALe=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,yLe=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,vLe=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,xLe=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Boe=/^[A-Za-z0-9_-]*$/,bLe=/^\+(?:[0-9]){6,14}[0-9]$/,Toe="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",CLe=new RegExp(`^${Toe}$`);function Moe(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function ELe(t){return new RegExp(`^${Moe(t)}$`)}function SLe(t){const e=Moe({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${Toe}T(?:${r})$`)}const wLe=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},_Le=/^-?\d+$/,ILe=/^-?\d+(?:\.\d+)?/,BLe=/^(?:true|false)$/i,TLe=/^[^A-Z]*$/,MLe=/^[^a-z]*$/,gd=Ot("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),Doe={number:"number",bigint:"bigint",object:"date"},Roe=Ot("$ZodCheckLessThan",(t,e)=>{gd.init(t,e);const n=Doe[typeof e.value];t._zod.onattach.push(r=>{const i=r._zod.bag,s=(e.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<s&&(e.inclusive?i.maximum=e.value:i.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),Poe=Ot("$ZodCheckGreaterThan",(t,e)=>{gd.init(t,e);const n=Doe[typeof e.value];t._zod.onattach.push(r=>{const i=r._zod.bag,s=(e.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>s&&(e.inclusive?i.minimum=e.value:i.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),DLe=Ot("$ZodCheckMultipleOf",(t,e)=>{gd.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):k5e(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),RLe=Ot("$ZodCheckNumberFormat",(t,e)=>{gd.init(t,e),e.format=e.format||"float64";const n=e.format?.includes("int"),r=n?"int":"number",[i,s]=O5e[e.format];t._zod.onattach.push(a=>{const o=a._zod.bag;o.format=e.format,o.minimum=i,o.maximum=s,n&&(o.pattern=_Le)}),t._zod.check=a=>{const o=a.value;if(n){if(!Number.isInteger(o)){a.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:o,inst:t});return}if(!Number.isSafeInteger(o)){o>0?a.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):a.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}o<i&&a.issues.push({origin:"number",input:o,code:"too_small",minimum:i,inclusive:!0,inst:t,continue:!e.abort}),o>s&&a.issues.push({origin:"number",input:o,code:"too_big",maximum:s,inst:t})}}),PLe=Ot("$ZodCheckMaxLength",(t,e)=>{var n;gd.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!lj(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<i&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const i=r.value;if(i.length<=e.maximum)return;const a=uj(i);r.issues.push({origin:a,code:"too_big",maximum:e.maximum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),kLe=Ot("$ZodCheckMinLength",(t,e)=>{var n;gd.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!lj(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>i&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const i=r.value;if(i.length>=e.minimum)return;const a=uj(i);r.issues.push({origin:a,code:"too_small",minimum:e.minimum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),NLe=Ot("$ZodCheckLengthEquals",(t,e)=>{var n;gd.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!lj(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag;i.minimum=e.length,i.maximum=e.length,i.length=e.length}),t._zod.check=r=>{const i=r.value,s=i.length;if(s===e.length)return;const a=uj(i),o=s>e.length;r.issues.push({origin:a,...o?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),_4=Ot("$ZodCheckStringFormat",(t,e)=>{var n,r;gd.init(t,e),t._zod.onattach.push(i=>{const s=i._zod.bag;s.format=e.format,e.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=i=>{e.pattern.lastIndex=0,!e.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:e.format,input:i.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),LLe=Ot("$ZodCheckRegex",(t,e)=>{_4.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),FLe=Ot("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=TLe),_4.init(t,e)}),jLe=Ot("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=MLe),_4.init(t,e)}),OLe=Ot("$ZodCheckIncludes",(t,e)=>{gd.init(t,e);const n=E4(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(i=>{const s=i._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),t._zod.check=i=>{i.value.includes(e.includes,e.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:i.value,inst:t,continue:!e.abort})}}),zLe=Ot("$ZodCheckStartsWith",(t,e)=>{gd.init(t,e);const n=new RegExp(`^${E4(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),$Le=Ot("$ZodCheckEndsWith",(t,e)=>{gd.init(t,e);const n=new RegExp(`.*${E4(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),QLe=Ot("$ZodCheckOverwrite",(t,e)=>{gd.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class ULe{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(a=>a),i=Math.min(...r.map(a=>a.length-a.trimStart().length)),s=r.map(a=>a.slice(i)).map(a=>" ".repeat(this.indent*2)+a);for(const a of s)this.content.push(a)}compile(){const e=Function,n=this?.args,i=[...(this?.content??[""]).map(s=>`  ${s}`)];return new e(...n,i.join(`
`))}}const HLe={major:4,minor:1,patch:13},ao=Ot("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=HLe;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const i of r)for(const s of i._zod.onattach)s(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const i=(a,o,l)=>{let c=M1(a),u;for(const h of o){if(h._zod.def.when){if(!h._zod.def.when(a))continue}else if(c)continue;const f=a.issues.length,p=h._zod.check(a);if(p instanceof Promise&&l?.async===!1)throw new V1;if(u||p instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await p,a.issues.length!==f&&(c||(c=M1(a,f)))});else{if(a.issues.length===f)continue;c||(c=M1(a,f))}}return u?u.then(()=>a):a},s=(a,o,l)=>{if(M1(a))return a.aborted=!0,a;const c=i(o,r,l);if(c instanceof Promise){if(l.async===!1)throw new V1;return c.then(u=>t._zod.parse(u,l))}return t._zod.parse(c,l)};t._zod.run=(a,o)=>{if(o.skipChecks)return t._zod.parse(a,o);if(o.direction==="backward"){const c=t._zod.parse({value:a.value,issues:[]},{...o,skipChecks:!0});return c instanceof Promise?c.then(u=>s(u,a,o)):s(c,a,o)}const l=t._zod.parse(a,o);if(l instanceof Promise){if(o.async===!1)throw new V1;return l.then(c=>i(c,r,o))}return i(l,r,o)}}t["~standard"]={validate:i=>{try{const s=q5e(t,i);return s.success?{value:s.data}:{issues:s.error?.issues}}catch{return Y5e(t,i).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),fj=Ot("$ZodString",(t,e)=>{ao.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??wLe(t._zod.bag),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),pa=Ot("$ZodStringFormat",(t,e)=>{_4.init(t,e),fj.init(t,e)}),GLe=Ot("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=hLe),pa.init(t,e)}),VLe=Ot("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=UQ(r))}else e.pattern??(e.pattern=UQ());pa.init(t,e)}),WLe=Ot("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=fLe),pa.init(t,e)}),KLe=Ot("$ZodURL",(t,e)=>{pa.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),i=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(i.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=i.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),qLe=Ot("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=gLe()),pa.init(t,e)}),YLe=Ot("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=uLe),pa.init(t,e)}),XLe=Ot("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=sLe),pa.init(t,e)}),JLe=Ot("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=aLe),pa.init(t,e)}),ZLe=Ot("$ZodULID",(t,e)=>{e.pattern??(e.pattern=oLe),pa.init(t,e)}),e6e=Ot("$ZodXID",(t,e)=>{e.pattern??(e.pattern=lLe),pa.init(t,e)}),t6e=Ot("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=cLe),pa.init(t,e)}),n6e=Ot("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=SLe(e)),pa.init(t,e)}),r6e=Ot("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=CLe),pa.init(t,e)}),i6e=Ot("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=ELe(e)),pa.init(t,e)}),s6e=Ot("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=dLe),pa.init(t,e)}),a6e=Ot("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=mLe),pa.init(t,e),t._zod.bag.format="ipv4"}),o6e=Ot("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=ALe),pa.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),l6e=Ot("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=yLe),pa.init(t,e)}),c6e=Ot("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=vLe),pa.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[i,s]=r;if(!s)throw new Error;const a=Number(s);if(`${a}`!==s)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${i}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function koe(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const u6e=Ot("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=xLe),pa.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{koe(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function d6e(t){if(!Boe.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return koe(n)}const h6e=Ot("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=Boe),pa.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{d6e(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),f6e=Ot("$ZodE164",(t,e)=>{e.pattern??(e.pattern=bLe),pa.init(t,e)});function p6e(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const i=JSON.parse(atob(r));return!("typ"in i&&i?.typ!=="JWT"||!i.alg||e&&(!("alg"in i)||i.alg!==e))}catch{return!1}}const g6e=Ot("$ZodJWT",(t,e)=>{pa.init(t,e),t._zod.check=n=>{p6e(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),Noe=Ot("$ZodNumber",(t,e)=>{ao.init(t,e),t._zod.pattern=t._zod.bag.pattern??ILe,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const i=n.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return n;const s=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:i,inst:t,...s?{received:s}:{}}),n}}),m6e=Ot("$ZodNumberFormat",(t,e)=>{RLe.init(t,e),Noe.init(t,e)}),A6e=Ot("$ZodBoolean",(t,e)=>{ao.init(t,e),t._zod.pattern=BLe,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=!!n.value}catch{}const i=n.value;return typeof i=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:t}),n}}),y6e=Ot("$ZodUnknown",(t,e)=>{ao.init(t,e),t._zod.parse=n=>n}),v6e=Ot("$ZodNever",(t,e)=>{ao.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function HQ(t,e,n){t.issues.length&&e.issues.push(...Soe(n,t.issues)),e.value[n]=t.value}const x6e=Ot("$ZodArray",(t,e)=>{ao.init(t,e),t._zod.parse=(n,r)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:t}),n;n.value=Array(i.length);const s=[];for(let a=0;a<i.length;a++){const o=i[a],l=e.element._zod.run({value:o,issues:[]},r);l instanceof Promise?s.push(l.then(c=>HQ(c,n,a))):HQ(l,n,a)}return s.length?Promise.all(s).then(()=>n):n}});function oM(t,e,n,r){t.issues.length&&e.issues.push(...Soe(n,t.issues)),t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function Loe(t){const e=Object.keys(t.shape);for(const r of e)if(!t.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=j5e(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function Foe(t,e,n,r,i,s){const a=[],o=i.keySet,l=i.catchall._zod,c=l.def.type;for(const u in e){if(o.has(u))continue;if(c==="never"){a.push(u);continue}const h=l.run({value:e[u],issues:[]},r);h instanceof Promise?t.push(h.then(f=>oM(f,n,u,e))):oM(h,n,u,e)}return a.length&&n.issues.push({code:"unrecognized_keys",keys:a,input:e,inst:s}),t.length?Promise.all(t).then(()=>n):n}const b6e=Ot("$ZodObject",(t,e)=>{if(ao.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const o=e.shape;Object.defineProperty(e,"shape",{get:()=>{const l={...o};return Object.defineProperty(e,"shape",{value:l}),l}})}const r=oj(()=>Loe(e));Os(t._zod,"propValues",()=>{const o=e.shape,l={};for(const c in o){const u=o[c]._zod;if(u.values){l[c]??(l[c]=new Set);for(const h of u.values)l[c].add(h)}}return l});const i=aM,s=e.catchall;let a;t._zod.parse=(o,l)=>{a??(a=r.value);const c=o.value;if(!i(c))return o.issues.push({expected:"object",code:"invalid_type",input:c,inst:t}),o;o.value={};const u=[],h=a.shape;for(const f of a.keys){const m=h[f]._zod.run({value:c[f],issues:[]},l);m instanceof Promise?u.push(m.then(v=>oM(v,o,f,c))):oM(m,o,f,c)}return s?Foe(u,c,o,l,r.value,t):u.length?Promise.all(u).then(()=>o):o}}),C6e=Ot("$ZodObjectJIT",(t,e)=>{b6e.init(t,e);const n=t._zod.parse,r=oj(()=>Loe(e)),i=f=>{const p=new ULe(["shape","payload","ctx"]),m=r.value,v=w=>{const B=QQ(w);return`shape[${B}]._zod.run({ value: input[${B}], issues: [] }, ctx)`};p.write("const input = payload.value;");const A=Object.create(null);let x=0;for(const w of m.keys)A[w]=`key_${x++}`;p.write("const newResult = {};");for(const w of m.keys){const B=A[w],D=QQ(w);p.write(`const ${B} = ${v(w)};`),p.write(`
        if (${B}.issues.length) {
          payload.issues = payload.issues.concat(${B}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${D}, ...iss.path] : [${D}]
          })));
        }
        
        
        if (${B}.value === undefined) {
          if (${D} in input) {
            newResult[${D}] = undefined;
          }
        } else {
          newResult[${D}] = ${B}.value;
        }
        
      `)}p.write("payload.value = newResult;"),p.write("return payload;");const E=p.compile();return(w,B)=>E(f,w,B)};let s;const a=aM,o=!boe.jitless,c=o&&L5e.value,u=e.catchall;let h;t._zod.parse=(f,p)=>{h??(h=r.value);const m=f.value;return a(m)?o&&c&&p?.async===!1&&p.jitless!==!0?(s||(s=i(e.shape)),f=s(f,p),u?Foe([],m,f,p,h,t):f):n(f,p):(f.issues.push({expected:"object",code:"invalid_type",input:m,inst:t}),f)}});function GQ(t,e,n,r){for(const s of t)if(s.issues.length===0)return e.value=s.value,e;const i=t.filter(s=>!M1(s));return i.length===1?(e.value=i[0].value,i[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(s=>s.issues.map(a=>Bb(a,r,Ib())))}),e)}const E6e=Ot("$ZodUnion",(t,e)=>{ao.init(t,e),Os(t._zod,"optin",()=>e.options.some(i=>i._zod.optin==="optional")?"optional":void 0),Os(t._zod,"optout",()=>e.options.some(i=>i._zod.optout==="optional")?"optional":void 0),Os(t._zod,"values",()=>{if(e.options.every(i=>i._zod.values))return new Set(e.options.flatMap(i=>Array.from(i._zod.values)))}),Os(t._zod,"pattern",()=>{if(e.options.every(i=>i._zod.pattern)){const i=e.options.map(s=>s._zod.pattern);return new RegExp(`^(${i.map(s=>cj(s.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(i,s)=>{if(n)return r(i,s);let a=!1;const o=[];for(const l of e.options){const c=l._zod.run({value:i.value,issues:[]},s);if(c instanceof Promise)o.push(c),a=!0;else{if(c.issues.length===0)return c;o.push(c)}}return a?Promise.all(o).then(l=>GQ(l,i,t,s)):GQ(o,i,t,s)}}),S6e=Ot("$ZodIntersection",(t,e)=>{ao.init(t,e),t._zod.parse=(n,r)=>{const i=n.value,s=e.left._zod.run({value:i,issues:[]},r),a=e.right._zod.run({value:i,issues:[]},r);return s instanceof Promise||a instanceof Promise?Promise.all([s,a]).then(([l,c])=>VQ(n,l,c)):VQ(n,s,a)}});function h6(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(U_(t)&&U_(e)){const n=Object.keys(e),r=Object.keys(t).filter(s=>n.indexOf(s)!==-1),i={...t,...e};for(const s of r){const a=h6(t[s],e[s]);if(!a.valid)return{valid:!1,mergeErrorPath:[s,...a.mergeErrorPath]};i[s]=a.data}return{valid:!0,data:i}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const i=t[r],s=e[r],a=h6(i,s);if(!a.valid)return{valid:!1,mergeErrorPath:[r,...a.mergeErrorPath]};n.push(a.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function VQ(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),M1(t))return t;const r=h6(e.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const w6e=Ot("$ZodEnum",(t,e)=>{ao.init(t,e);const n=P5e(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(i=>F5e.has(typeof i)).map(i=>typeof i=="string"?E4(i):i.toString()).join("|")})$`),t._zod.parse=(i,s)=>{const a=i.value;return r.has(a)||i.issues.push({code:"invalid_value",values:n,input:a,inst:t}),i}}),_6e=Ot("$ZodTransform",(t,e)=>{ao.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new xoe(t.constructor.name);const i=e.transform(n.value,n);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(a=>(n.value=a,n));if(i instanceof Promise)throw new V1;return n.value=i,n}});function WQ(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const I6e=Ot("$ZodOptional",(t,e)=>{ao.init(t,e),t._zod.optin="optional",t._zod.optout="optional",Os(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),Os(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${cj(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(s=>WQ(s,n.value)):WQ(i,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),B6e=Ot("$ZodNullable",(t,e)=>{ao.init(t,e),Os(t._zod,"optin",()=>e.innerType._zod.optin),Os(t._zod,"optout",()=>e.innerType._zod.optout),Os(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${cj(n.source)}|null)$`):void 0}),Os(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),T6e=Ot("$ZodDefault",(t,e)=>{ao.init(t,e),t._zod.optin="optional",Os(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(s=>KQ(s,e)):KQ(i,e)}});function KQ(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const M6e=Ot("$ZodPrefault",(t,e)=>{ao.init(t,e),t._zod.optin="optional",Os(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),D6e=Ot("$ZodNonOptional",(t,e)=>{ao.init(t,e),Os(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(s=>qQ(s,t)):qQ(i,t)}});function qQ(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const R6e=Ot("$ZodCatch",(t,e)=>{ao.init(t,e),Os(t._zod,"optin",()=>e.innerType._zod.optin),Os(t._zod,"optout",()=>e.innerType._zod.optout),Os(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(s=>(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(a=>Bb(a,r,Ib()))},input:n.value}),n.issues=[]),n)):(n.value=i.value,i.issues.length&&(n.value=e.catchValue({...n,error:{issues:i.issues.map(s=>Bb(s,r,Ib()))},input:n.value}),n.issues=[]),n)}}),P6e=Ot("$ZodPipe",(t,e)=>{ao.init(t,e),Os(t._zod,"values",()=>e.in._zod.values),Os(t._zod,"optin",()=>e.in._zod.optin),Os(t._zod,"optout",()=>e.out._zod.optout),Os(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const s=e.out._zod.run(n,r);return s instanceof Promise?s.then(a=>WB(a,e.in,r)):WB(s,e.in,r)}const i=e.in._zod.run(n,r);return i instanceof Promise?i.then(s=>WB(s,e.out,r)):WB(i,e.out,r)}});function WB(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const k6e=Ot("$ZodReadonly",(t,e)=>{ao.init(t,e),Os(t._zod,"propValues",()=>e.innerType._zod.propValues),Os(t._zod,"values",()=>e.innerType._zod.values),Os(t._zod,"optin",()=>e.innerType?._zod?.optin),Os(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(YQ):YQ(i)}});function YQ(t){return t.value=Object.freeze(t.value),t}const N6e=Ot("$ZodCustom",(t,e)=>{gd.init(t,e),ao.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,i=e.fn(r);if(i instanceof Promise)return i.then(s=>XQ(s,n,r,t));XQ(i,n,r,t)}});function XQ(t,e,n,r){if(!t){const i={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(i.params=r._zod.def.params),e.issues.push(H_(i))}}var JQ;class L6e{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const i={...r,...this._map.get(e)};return Object.keys(i).length?i:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function F6e(){return new L6e}(JQ=globalThis).__zod_globalRegistry??(JQ.__zod_globalRegistry=F6e());const KB=globalThis.__zod_globalRegistry;function j6e(t,e){return new t({type:"string",...Jn(e)})}function O6e(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Jn(e)})}function ZQ(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Jn(e)})}function z6e(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Jn(e)})}function $6e(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Jn(e)})}function Q6e(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Jn(e)})}function U6e(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Jn(e)})}function H6e(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Jn(e)})}function G6e(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Jn(e)})}function V6e(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Jn(e)})}function W6e(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Jn(e)})}function K6e(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Jn(e)})}function q6e(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Jn(e)})}function Y6e(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Jn(e)})}function X6e(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Jn(e)})}function J6e(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Jn(e)})}function Z6e(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Jn(e)})}function e8e(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Jn(e)})}function t8e(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Jn(e)})}function n8e(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Jn(e)})}function r8e(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Jn(e)})}function i8e(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Jn(e)})}function s8e(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Jn(e)})}function a8e(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Jn(e)})}function o8e(t,e){return new t({type:"string",format:"date",check:"string_format",...Jn(e)})}function l8e(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Jn(e)})}function c8e(t,e){return new t({type:"string",format:"duration",check:"string_format",...Jn(e)})}function u8e(t,e){return new t({type:"number",checks:[],...Jn(e)})}function d8e(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...Jn(e)})}function h8e(t,e){return new t({type:"boolean",...Jn(e)})}function f8e(t){return new t({type:"unknown"})}function p8e(t,e){return new t({type:"never",...Jn(e)})}function e9(t,e){return new Roe({check:"less_than",...Jn(e),value:t,inclusive:!1})}function mP(t,e){return new Roe({check:"less_than",...Jn(e),value:t,inclusive:!0})}function t9(t,e){return new Poe({check:"greater_than",...Jn(e),value:t,inclusive:!1})}function AP(t,e){return new Poe({check:"greater_than",...Jn(e),value:t,inclusive:!0})}function n9(t,e){return new DLe({check:"multiple_of",...Jn(e),value:t})}function joe(t,e){return new PLe({check:"max_length",...Jn(e),maximum:t})}function lM(t,e){return new kLe({check:"min_length",...Jn(e),minimum:t})}function Ooe(t,e){return new NLe({check:"length_equals",...Jn(e),length:t})}function g8e(t,e){return new LLe({check:"string_format",format:"regex",...Jn(e),pattern:t})}function m8e(t){return new FLe({check:"string_format",format:"lowercase",...Jn(t)})}function A8e(t){return new jLe({check:"string_format",format:"uppercase",...Jn(t)})}function y8e(t,e){return new OLe({check:"string_format",format:"includes",...Jn(e),includes:t})}function v8e(t,e){return new zLe({check:"string_format",format:"starts_with",...Jn(e),prefix:t})}function x8e(t,e){return new $Le({check:"string_format",format:"ends_with",...Jn(e),suffix:t})}function XE(t){return new QLe({check:"overwrite",tx:t})}function b8e(t){return XE(e=>e.normalize(t))}function C8e(){return XE(t=>t.trim())}function E8e(){return XE(t=>t.toLowerCase())}function S8e(){return XE(t=>t.toUpperCase())}function w8e(){return XE(t=>N5e(t))}function _8e(t,e,n){return new t({type:"array",element:e,...Jn(n)})}function I8e(t,e,n){return new t({type:"custom",check:"custom",fn:e,...Jn(n)})}function B8e(t){const e=T8e(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(H_(r,n.value,e._zod.def));else{const i=r;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),i.continue??(i.continue=!e._zod.def.abort),n.issues.push(H_(i))}},t(n.value,n)));return e}function T8e(t,e){const n=new gd({check:"custom",...Jn(e)});return n._zod.check=t,n}const M8e=Ot("ZodISODateTime",(t,e)=>{n6e.init(t,e),Ra.init(t,e)});function D8e(t){return a8e(M8e,t)}const R8e=Ot("ZodISODate",(t,e)=>{r6e.init(t,e),Ra.init(t,e)});function P8e(t){return o8e(R8e,t)}const k8e=Ot("ZodISOTime",(t,e)=>{i6e.init(t,e),Ra.init(t,e)});function N8e(t){return l8e(k8e,t)}const L8e=Ot("ZodISODuration",(t,e)=>{s6e.init(t,e),Ra.init(t,e)});function F8e(t){return c8e(L8e,t)}const j8e=(t,e)=>{_oe.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>K5e(t,n)},flatten:{value:n=>W5e(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,d6,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,d6,2)}},isEmpty:{get(){return t.issues.length===0}}})},Cf=Ot("ZodError",j8e,{Parent:Error}),O8e=dj(Cf),z8e=hj(Cf),$8e=S4(Cf),Q8e=w4(Cf),U8e=X5e(Cf),H8e=J5e(Cf),G8e=Z5e(Cf),V8e=eLe(Cf),W8e=tLe(Cf),K8e=nLe(Cf),q8e=rLe(Cf),Y8e=iLe(Cf),Lo=Ot("ZodType",(t,e)=>(ao.init(t,e),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(Kb(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),t.clone=(n,r)=>Xy(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>O8e(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>$8e(t,n,r),t.parseAsync=async(n,r)=>z8e(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>Q8e(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>U8e(t,n,r),t.decode=(n,r)=>H8e(t,n,r),t.encodeAsync=async(n,r)=>G8e(t,n,r),t.decodeAsync=async(n,r)=>V8e(t,n,r),t.safeEncode=(n,r)=>W8e(t,n,r),t.safeDecode=(n,r)=>K8e(t,n,r),t.safeEncodeAsync=async(n,r)=>q8e(t,n,r),t.safeDecodeAsync=async(n,r)=>Y8e(t,n,r),t.refine=(n,r)=>t.check($Fe(n,r)),t.superRefine=n=>t.check(QFe(n)),t.overwrite=n=>t.check(XE(n)),t.optional=()=>a9(t),t.nullable=()=>o9(t),t.nullish=()=>a9(o9(t)),t.nonoptional=n=>kFe(t,n),t.array=()=>CFe(t),t.or=n=>Qoe([t,n]),t.and=n=>_Fe(t,n),t.transform=n=>l9(t,BFe(n)),t.default=n=>DFe(t,n),t.prefault=n=>PFe(t,n),t.catch=n=>LFe(t,n),t.pipe=n=>l9(t,n),t.readonly=()=>OFe(t),t.describe=n=>{const r=t.clone();return KB.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){return KB.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return KB.get(t);const r=t.clone();return KB.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),zoe=Ot("_ZodString",(t,e)=>{fj.init(t,e),Lo.init(t,e);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(g8e(...r)),t.includes=(...r)=>t.check(y8e(...r)),t.startsWith=(...r)=>t.check(v8e(...r)),t.endsWith=(...r)=>t.check(x8e(...r)),t.min=(...r)=>t.check(lM(...r)),t.max=(...r)=>t.check(joe(...r)),t.length=(...r)=>t.check(Ooe(...r)),t.nonempty=(...r)=>t.check(lM(1,...r)),t.lowercase=r=>t.check(m8e(r)),t.uppercase=r=>t.check(A8e(r)),t.trim=()=>t.check(C8e()),t.normalize=(...r)=>t.check(b8e(...r)),t.toLowerCase=()=>t.check(E8e()),t.toUpperCase=()=>t.check(S8e()),t.slugify=()=>t.check(w8e())}),X8e=Ot("ZodString",(t,e)=>{fj.init(t,e),zoe.init(t,e),t.email=n=>t.check(O6e(J8e,n)),t.url=n=>t.check(H6e(Z8e,n)),t.jwt=n=>t.check(s8e(pFe,n)),t.emoji=n=>t.check(G6e(eFe,n)),t.guid=n=>t.check(ZQ(r9,n)),t.uuid=n=>t.check(z6e(qB,n)),t.uuidv4=n=>t.check($6e(qB,n)),t.uuidv6=n=>t.check(Q6e(qB,n)),t.uuidv7=n=>t.check(U6e(qB,n)),t.nanoid=n=>t.check(V6e(tFe,n)),t.guid=n=>t.check(ZQ(r9,n)),t.cuid=n=>t.check(W6e(nFe,n)),t.cuid2=n=>t.check(K6e(rFe,n)),t.ulid=n=>t.check(q6e(iFe,n)),t.base64=n=>t.check(n8e(dFe,n)),t.base64url=n=>t.check(r8e(hFe,n)),t.xid=n=>t.check(Y6e(sFe,n)),t.ksuid=n=>t.check(X6e(aFe,n)),t.ipv4=n=>t.check(J6e(oFe,n)),t.ipv6=n=>t.check(Z6e(lFe,n)),t.cidrv4=n=>t.check(e8e(cFe,n)),t.cidrv6=n=>t.check(t8e(uFe,n)),t.e164=n=>t.check(i8e(fFe,n)),t.datetime=n=>t.check(D8e(n)),t.date=n=>t.check(P8e(n)),t.time=n=>t.check(N8e(n)),t.duration=n=>t.check(F8e(n))});function ob(t){return j6e(X8e,t)}const Ra=Ot("ZodStringFormat",(t,e)=>{pa.init(t,e),zoe.init(t,e)}),J8e=Ot("ZodEmail",(t,e)=>{WLe.init(t,e),Ra.init(t,e)}),r9=Ot("ZodGUID",(t,e)=>{GLe.init(t,e),Ra.init(t,e)}),qB=Ot("ZodUUID",(t,e)=>{VLe.init(t,e),Ra.init(t,e)}),Z8e=Ot("ZodURL",(t,e)=>{KLe.init(t,e),Ra.init(t,e)}),eFe=Ot("ZodEmoji",(t,e)=>{qLe.init(t,e),Ra.init(t,e)}),tFe=Ot("ZodNanoID",(t,e)=>{YLe.init(t,e),Ra.init(t,e)}),nFe=Ot("ZodCUID",(t,e)=>{XLe.init(t,e),Ra.init(t,e)}),rFe=Ot("ZodCUID2",(t,e)=>{JLe.init(t,e),Ra.init(t,e)}),iFe=Ot("ZodULID",(t,e)=>{ZLe.init(t,e),Ra.init(t,e)}),sFe=Ot("ZodXID",(t,e)=>{e6e.init(t,e),Ra.init(t,e)}),aFe=Ot("ZodKSUID",(t,e)=>{t6e.init(t,e),Ra.init(t,e)}),oFe=Ot("ZodIPv4",(t,e)=>{a6e.init(t,e),Ra.init(t,e)}),lFe=Ot("ZodIPv6",(t,e)=>{o6e.init(t,e),Ra.init(t,e)}),cFe=Ot("ZodCIDRv4",(t,e)=>{l6e.init(t,e),Ra.init(t,e)}),uFe=Ot("ZodCIDRv6",(t,e)=>{c6e.init(t,e),Ra.init(t,e)}),dFe=Ot("ZodBase64",(t,e)=>{u6e.init(t,e),Ra.init(t,e)}),hFe=Ot("ZodBase64URL",(t,e)=>{h6e.init(t,e),Ra.init(t,e)}),fFe=Ot("ZodE164",(t,e)=>{f6e.init(t,e),Ra.init(t,e)}),pFe=Ot("ZodJWT",(t,e)=>{g6e.init(t,e),Ra.init(t,e)}),$oe=Ot("ZodNumber",(t,e)=>{Noe.init(t,e),Lo.init(t,e),t.gt=(r,i)=>t.check(t9(r,i)),t.gte=(r,i)=>t.check(AP(r,i)),t.min=(r,i)=>t.check(AP(r,i)),t.lt=(r,i)=>t.check(e9(r,i)),t.lte=(r,i)=>t.check(mP(r,i)),t.max=(r,i)=>t.check(mP(r,i)),t.int=r=>t.check(i9(r)),t.safe=r=>t.check(i9(r)),t.positive=r=>t.check(t9(0,r)),t.nonnegative=r=>t.check(AP(0,r)),t.negative=r=>t.check(e9(0,r)),t.nonpositive=r=>t.check(mP(0,r)),t.multipleOf=(r,i)=>t.check(n9(r,i)),t.step=(r,i)=>t.check(n9(r,i)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function Dg(t){return u8e($oe,t)}const gFe=Ot("ZodNumberFormat",(t,e)=>{m6e.init(t,e),$oe.init(t,e)});function i9(t){return d8e(gFe,t)}const mFe=Ot("ZodBoolean",(t,e)=>{A6e.init(t,e),Lo.init(t,e)});function AFe(t){return h8e(mFe,t)}const yFe=Ot("ZodUnknown",(t,e)=>{y6e.init(t,e),Lo.init(t,e)});function s9(){return f8e(yFe)}const vFe=Ot("ZodNever",(t,e)=>{v6e.init(t,e),Lo.init(t,e)});function xFe(t){return p8e(vFe,t)}const bFe=Ot("ZodArray",(t,e)=>{x6e.init(t,e),Lo.init(t,e),t.element=e.element,t.min=(n,r)=>t.check(lM(n,r)),t.nonempty=n=>t.check(lM(1,n)),t.max=(n,r)=>t.check(joe(n,r)),t.length=(n,r)=>t.check(Ooe(n,r)),t.unwrap=()=>t.element});function CFe(t,e){return _8e(bFe,t,e)}const EFe=Ot("ZodObject",(t,e)=>{C6e.init(t,e),Lo.init(t,e),Os(t,"shape",()=>e.shape),t.keyof=()=>Uoe(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:s9()}),t.loose=()=>t.clone({...t._zod.def,catchall:s9()}),t.strict=()=>t.clone({...t._zod.def,catchall:xFe()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>Q5e(t,n),t.safeExtend=n=>U5e(t,n),t.merge=n=>H5e(t,n),t.pick=n=>z5e(t,n),t.omit=n=>$5e(t,n),t.partial=(...n)=>G5e(Hoe,t,n[0]),t.required=(...n)=>V5e(Goe,t,n[0])});function cM(t,e){const n={type:"object",shape:t??{},...Jn(e)};return new EFe(n)}const SFe=Ot("ZodUnion",(t,e)=>{E6e.init(t,e),Lo.init(t,e),t.options=e.options});function Qoe(t,e){return new SFe({type:"union",options:t,...Jn(e)})}const wFe=Ot("ZodIntersection",(t,e)=>{S6e.init(t,e),Lo.init(t,e)});function _Fe(t,e){return new wFe({type:"intersection",left:t,right:e})}const f6=Ot("ZodEnum",(t,e)=>{w6e.init(t,e),Lo.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,i)=>{const s={};for(const a of r)if(n.has(a))s[a]=e.entries[a];else throw new Error(`Key ${a} not found in enum`);return new f6({...e,checks:[],...Jn(i),entries:s})},t.exclude=(r,i)=>{const s={...e.entries};for(const a of r)if(n.has(a))delete s[a];else throw new Error(`Key ${a} not found in enum`);return new f6({...e,checks:[],...Jn(i),entries:s})}});function Uoe(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new f6({type:"enum",entries:n,...Jn(e)})}const IFe=Ot("ZodTransform",(t,e)=>{_6e.init(t,e),Lo.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new xoe(t.constructor.name);n.addIssue=s=>{if(typeof s=="string")n.issues.push(H_(s,n.value,e));else{const a=s;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=n.value),a.inst??(a.inst=t),n.issues.push(H_(a))}};const i=e.transform(n.value,n);return i instanceof Promise?i.then(s=>(n.value=s,n)):(n.value=i,n)}});function BFe(t){return new IFe({type:"transform",transform:t})}const Hoe=Ot("ZodOptional",(t,e)=>{I6e.init(t,e),Lo.init(t,e),t.unwrap=()=>t._zod.def.innerType});function a9(t){return new Hoe({type:"optional",innerType:t})}const TFe=Ot("ZodNullable",(t,e)=>{B6e.init(t,e),Lo.init(t,e),t.unwrap=()=>t._zod.def.innerType});function o9(t){return new TFe({type:"nullable",innerType:t})}const MFe=Ot("ZodDefault",(t,e)=>{T6e.init(t,e),Lo.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function DFe(t,e){return new MFe({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():Eoe(e)}})}const RFe=Ot("ZodPrefault",(t,e)=>{M6e.init(t,e),Lo.init(t,e),t.unwrap=()=>t._zod.def.innerType});function PFe(t,e){return new RFe({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():Eoe(e)}})}const Goe=Ot("ZodNonOptional",(t,e)=>{D6e.init(t,e),Lo.init(t,e),t.unwrap=()=>t._zod.def.innerType});function kFe(t,e){return new Goe({type:"nonoptional",innerType:t,...Jn(e)})}const NFe=Ot("ZodCatch",(t,e)=>{R6e.init(t,e),Lo.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function LFe(t,e){return new NFe({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const FFe=Ot("ZodPipe",(t,e)=>{P6e.init(t,e),Lo.init(t,e),t.in=e.in,t.out=e.out});function l9(t,e){return new FFe({type:"pipe",in:t,out:e})}const jFe=Ot("ZodReadonly",(t,e)=>{k6e.init(t,e),Lo.init(t,e),t.unwrap=()=>t._zod.def.innerType});function OFe(t){return new jFe({type:"readonly",innerType:t})}const zFe=Ot("ZodCustom",(t,e)=>{N6e.init(t,e),Lo.init(t,e)});function $Fe(t,e={}){return I8e(zFe,t,e)}function QFe(t){return B8e(t)}Qoe([cM({h:Dg().min(0).max(360),s:Dg().min(0).max(100),l:Dg().min(0).max(100),a:Dg().min(0).max(1)}),cM({r:Dg().min(0).max(255),g:Dg().min(0).max(255),b:Dg().min(0).max(255),a:Dg().min(0).max(1)}),ob().regex(/^#[0-9A-Fa-f]{6}$/)]);cM({fontFamily:ob(),fontSize:ob(),fontWeight:Dg().min(100).max(900),lineHeight:Dg().positive(),letterSpacing:ob().optional()});cM({category:ob().optional(),group:ob().optional(),scope:Uoe(["raw","semantic"]).optional(),search:ob().optional(),showInherited:AFe().optional()});function l0(t){return t!=null&&typeof t=="object"&&"h"in t&&"s"in t&&"l"in t}function yP(t){return t!=null&&typeof t=="object"&&"r"in t&&"g"in t&&"b"in t}function UFe(t){return t!=null&&typeof t=="object"&&"fontFamily"in t&&"fontSize"in t}function Voe(t){return t!=null&&typeof t=="object"&&"offsetX"in t&&"offsetY"in t&&"blur"in t}function HFe(t){return t!=null&&typeof t=="object"&&"width"in t&&"style"in t&&"color"in t}function GFe(t){const e=t.css_variable||`--${t.name.replace(/\./g,"-")}`,n={};switch(t.type){case"color":{l0(t.value)?n[e]=aT(t.value):yP(t.value)?n[e]=gP(t.value):typeof t.value=="string"?n[e]=t.value:n[e]=JSON.stringify(t.value);break}case"typography":{if(UFe(t.value)){const r=t.value;n[`${e}-font-family`]=r.fontFamily,n[`${e}-font-size`]=r.fontSize,n[`${e}-font-weight`]=String(r.fontWeight),n[`${e}-line-height`]=String(r.lineHeight),r.letterSpacing&&(n[`${e}-letter-spacing`]=r.letterSpacing)}else n[e]=String(t.value);break}case"shadow":{if(Voe(t.value)){const r=t.value,i=r.offsetX,s=r.offsetY,a=r.blur,o=r.spread;let l="rgba(0,0,0,0.1)";l0(r.color)?l=aT(r.color):yP(r.color)?l=gP(r.color):typeof r.color=="string"&&(l=r.color),n[e]=`${i} ${s} ${a} ${o} ${l}`}else n[e]=String(t.value);break}case"border":{if(HFe(t.value)){const r=t.value,i=r.width,s=r.style;let a="#e5e7eb";l0(r.color)?a=aT(r.color):yP(r.color)?a=gP(r.color):typeof r.color=="string"&&(a=r.color),n[e]=`${i} ${s} ${a}`}else n[e]=String(t.value);break}case"spacing":case"radius":case"motion":default:{typeof t.value=="string"?n[e]=t.value:typeof t.value=="number"?n[e]=`${t.value}px`:typeof t.value=="object"&&t.value!==null?n[e]=JSON.stringify(t.value):n[e]=String(t.value);break}}return n}function Woe(t){const e={};return t.forEach(n=>{const r=GFe(n);Object.assign(e,r)}),e}function VFe(t){const e=Object.entries(t);return e.length===0?":root {}":`:root {
${e.map(([r,i])=>`  ${r}: ${i};`).join(`
`)}
}`}let vP=null,xP=null,bP=0,vx=null,xx=null;const _s=Jl()(Cwe((t,e)=>({themes:[],activeTheme:null,activeThemeId:null,projectId:null,tokens:[],_tokensVersion:0,loading:!1,error:null,dirty:!1,get rawTokens(){const n=e()._tokensVersion;return(bP!==n||!vP)&&(vP=e().tokens.filter(r=>r.scope==="raw"),bP=n),vP},get semanticTokens(){const n=e()._tokensVersion;return(bP!==n||!xP)&&(xP=e().tokens.filter(r=>r.scope==="semantic")),xP},setProjectId:n=>{t({projectId:n})},loadThemes:async n=>{t({loading:!0,error:null});try{const r=await Dc.getThemesByProject(n);t({themes:r,loading:!1,projectId:n})}catch(r){const i=r instanceof Error?r.message:"  ";t({error:i,loading:!1}),console.error("[UnifiedThemeStore] loadThemes failed:",r)}},loadActiveTheme:async n=>{t({loading:!0,error:null});try{const r=await Dc.getActiveTheme(n);if(!r){t({loading:!1});return}t({activeTheme:r,activeThemeId:r.id,projectId:n,loading:!1}),await e().loadTokens(r.id),e().injectThemeCSS()}catch(r){const i=r instanceof Error?r.message:"   ";t({error:i,loading:!1}),console.error("[UnifiedThemeStore] loadActiveTheme failed:",r)}},setActiveTheme:async n=>{t({loading:!0,error:null});try{const r=e().themes.find(i=>i.id===n);if(!r)throw new Error("Theme not found");t({activeTheme:r,activeThemeId:n}),await e().loadTokens(n),e().injectThemeCSS(),t({loading:!1})}catch(r){const i=r instanceof Error?r.message:"  ";t({error:i,loading:!1}),console.error("[UnifiedThemeStore] setActiveTheme failed:",r)}},createTheme:async(n,r,i="draft",s)=>{const a=s||e().projectId;if(!a)return console.error("[UnifiedThemeStore] createTheme: projectId is null"),null;try{const o=await Dc.createTheme({project_id:a,name:n,parent_theme_id:r,status:i});return e()._addTheme(o),o}catch(o){const l=o instanceof Error?o.message:"  ";return t({error:l}),console.error("[UnifiedThemeStore] createTheme failed:",o),null}},updateTheme:async(n,r)=>{try{const i=await Dc.updateTheme(n,r);return e()._updateTheme(i),i}catch(i){const s=i instanceof Error?i.message:"  ";return t({error:s}),console.error("[UnifiedThemeStore] updateTheme failed:",i),null}},deleteTheme:async n=>{try{return await Dc.deleteTheme(n),e()._removeTheme(n),!0}catch(r){const i=r instanceof Error?r.message:"  ";return t({error:i}),console.error("[UnifiedThemeStore] deleteTheme failed:",r),!1}},duplicateTheme:async(n,r,i=!1,s)=>{try{const a=await Dc.duplicateTheme(n,r,i),o=s||e().projectId;return o&&await e().loadThemes(o),a}catch(a){const o=a instanceof Error?a.message:"  ";return t({error:o}),console.error("[UnifiedThemeStore] duplicateTheme failed:",a),null}},activateTheme:async n=>{try{return await Dc.activateTheme(n),!0}catch(r){const i=r instanceof Error?r.message:"  ";return t({error:i}),console.error("[UnifiedThemeStore] activateTheme failed:",r),!1}},snapshotVersion:async()=>{const{activeTheme:n}=e();if(n)try{const r=await Dc.createSnapshot(n.id);t(fP(i=>{i.activeTheme&&(i.activeTheme={...i.activeTheme,version:r,updated_at:new Date().toISOString()})}))}catch(r){const i=r instanceof Error?r.message:"   ";t({error:i}),console.error("[UnifiedThemeStore] snapshotVersion failed:",r)}},loadTokens:async n=>{t({loading:!0,error:null});try{const r=await is.getResolvedTokens(n);t(i=>({tokens:r,_tokensVersion:i._tokensVersion+1,loading:!1}))}catch(r){const i=r instanceof Error?r.message:"  ";t({error:i,loading:!1}),console.error("[UnifiedThemeStore] loadTokens failed:",r)}},createToken:async n=>{t({loading:!0,error:null});try{const r=await is.createToken(n);return t(i=>({tokens:[...i.tokens,r],_tokensVersion:i._tokensVersion+1,dirty:!1,loading:!1})),e().injectThemeCSS(),r}catch(r){const i=r instanceof Error?r.message:"  ";throw t({error:i,loading:!1}),console.error("[UnifiedThemeStore] createToken failed:",r),r}},updateToken:async(n,r)=>{t({loading:!0,error:null});try{await is.updateToken(n,r),t(i=>({tokens:i.tokens.map(s=>s.id===n?{...s,...r}:s),_tokensVersion:i._tokensVersion+1,loading:!1})),e().injectThemeCSS()}catch(i){const s=i instanceof Error?i.message:"  ";t({error:s,loading:!1}),console.error("[UnifiedThemeStore] updateToken failed:",i)}},updateTokenValue:(n,r,i)=>{t(fP(s=>{const a=s.tokens.find(o=>o.name===n&&o.scope===r);a&&(a.value=i,a.updated_at=new Date().toISOString(),s.dirty=!0,s._tokensVersion+=1)})),e().injectThemeCSS()},addToken:n=>{t(fP(r=>{const i={id:B5e(),project_id:r.activeTheme?.project_id||r.projectId||"",theme_id:r.activeTheme?.id||"",name:n.name,type:n.type,value:n.value,scope:n.scope,alias_of:n.alias_of,css_variable:n.css_variable,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};r.tokens.push(i),r.dirty=!0,r._tokensVersion+=1})),e().injectThemeCSS()},deleteToken:async n=>{t({loading:!0,error:null});try{await is.deleteToken(n),t(r=>({tokens:r.tokens.filter(i=>i.id!==n),_tokensVersion:r._tokensVersion+1,loading:!1})),e().injectThemeCSS()}catch(r){const i=r instanceof Error?r.message:"  ";t({error:i,loading:!1}),console.error("[UnifiedThemeStore] deleteToken failed:",r)}},bulkUpsertTokens:async n=>{t({loading:!0,error:null});try{await is.bulkUpsertTokens(n);const{activeThemeId:r}=e();r&&await e().loadTokens(r),e().injectThemeCSS(),t({loading:!1,dirty:!1})}catch(r){const i=r instanceof Error?r.message:"   ";t({error:i,loading:!1}),console.error("[UnifiedThemeStore] bulkUpsertTokens failed:",r)}},saveAllTokens:async()=>{const{tokens:n,dirty:r,activeTheme:i}=e();if(!(!i||!r))try{await is.bulkUpsertTokens(n),t({dirty:!1})}catch(s){const a=s instanceof Error?s.message:" ";t({error:a}),console.error("[UnifiedThemeStore] saveAllTokens failed:",s)}},injectThemeCSS:()=>{const{tokens:n}=e();if(n.length!==0)try{const r=Woe(n),i=VFe(r),s="xstudio-theme-vars";let a=document.getElementById(s);a||(a=document.createElement("style"),a.id=s,document.head.appendChild(a)),a.textContent=i}catch(r){console.error("[UnifiedThemeStore] injectThemeCSS failed:",r)}},subscribeToThemes:()=>{const{projectId:n}=e();return n?(vx&&vx(),vx=Dc.subscribeToProjectThemes(n,r=>{if(r.eventType==="INSERT"){e()._addTheme(r.new);const i=r.new;i.status==="active"&&e()._setActiveTheme(i)}else if(r.eventType==="UPDATE"){e()._updateTheme(r.new);const i=r.new,{activeTheme:s}=e();s&&i.id===s.id&&e()._setActiveTheme(i),i.status==="active"&&s?.id!==i.id&&(e()._setActiveTheme(i),e().loadTokens(i.id)),s&&i.id===s.id&&i.status!=="active"&&e()._setActiveTheme(null)}else if(r.eventType==="DELETE"){const i=r.old;e()._removeTheme(i.id);const{activeTheme:s}=e();s&&i.id===s.id&&e()._setActiveTheme(null)}}),vx):(console.error("[UnifiedThemeStore] subscribeToThemes: projectId is null"),null)},subscribeToTokens:()=>{const{activeThemeId:n}=e();return n?(xx&&xx(),xx=is.subscribeToTokenChanges(n,async r=>{try{await e().loadTokens(n),e().injectThemeCSS()}catch(i){console.error("[UnifiedThemeStore] Failed to reload tokens:",i)}}),xx):(console.error("[UnifiedThemeStore] subscribeToTokens: activeThemeId is null"),null)},_addTheme:n=>{t(r=>({themes:[...r.themes,n]}))},_updateTheme:n=>{t(r=>({themes:r.themes.map(i=>i.id===n.id?n:i)}))},_removeTheme:n=>{t(r=>({themes:r.themes.filter(i=>i.id!==n)}))},_setActiveTheme:n=>{t({activeTheme:n,activeThemeId:n?.id||null})},clearError:()=>t({error:null}),cleanup:()=>{vx&&(vx(),vx=null),xx&&(xx(),xx=null)},reset:()=>{e().cleanup(),t({themes:[],activeTheme:null,activeThemeId:null,projectId:null,tokens:[],_tokensVersion:0,loading:!1,error:null,dirty:!1})}}),{name:"UnifiedThemeStore"}));function FI({legend:t,icon:e,children:n,className:r=""}){return d.jsxs("fieldset",{className:`properties-aria ${r}`,children:[t&&d.jsx("legend",{className:"fieldset-legend",children:t}),d.jsxs("div",{className:"react-aria-control react-aria-Group",children:[e&&d.jsx("label",{className:"control-label",children:d.jsx(e,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),n]})]})}const Koe=Jl()(UM((t,e)=>({collapsedSections:new Set,focusMode:!1,activeFocusSection:null,toggleSection:n=>t(r=>{if(r.focusMode)return{activeFocusSection:n};{const i=new Set(r.collapsedSections);return i.has(n)?i.delete(n):i.add(n),{collapsedSections:i}}}),isCollapsed:n=>{const r=e();return r.focusMode?r.activeFocusSection!==n:r.collapsedSections.has(n)},expandAll:()=>t({collapsedSections:new Set}),collapseAll:()=>t({collapsedSections:new Set(["transform","layout","appearance","typography"])}),toggleFocusMode:()=>t(n=>{const r=!n.focusMode;return{focusMode:r,activeFocusSection:r?"transform":null}}),setFocusSection:n=>t(r=>r.focusMode?{activeFocusSection:n}:r)}),{name:"styles-panel-collapse",partialize:t=>({collapsedSections:Array.from(t.collapsedSections),focusMode:t.focusMode,activeFocusSection:t.activeFocusSection}),merge:(t,e)=>{const n=t;return{...e,collapsedSections:new Set(n?.collapsedSections||[]),focusMode:n?.focusMode||!1,activeFocusSection:n?.activeFocusSection||null}}})),wl=C.memo(function({title:e,children:n,id:r,defaultExpanded:i=!0,onReset:s}){const{isCollapsed:a,toggleSection:o}=Koe(),[l,c]=we.useState(i),u=r!==void 0,h=u?!a(r):l,f=()=>{u&&r?o(r):c(!l)};return d.jsxs("div",{className:"section","data-section-id":r,children:[d.jsxs("div",{className:"section-header",children:[d.jsx("div",{className:"section-title",children:e}),d.jsxs("div",{className:"section-actions",children:[s&&d.jsx("button",{className:"iconButton",type:"button",onClick:s,"aria-label":"Reset section styles",title:"Reset section styles",children:d.jsx(k8,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})}),d.jsx("button",{className:"iconButton",type:"button",onClick:f,"aria-label":h?"Collapse section":"Expand section",children:d.jsx(y_,{color:ge.color,strokeWidth:ge.stroke,size:ge.size,style:{transform:h?"rotate(0deg)":"rotate(180deg)",transition:"transform 0.2s ease"}})})]})]}),h&&d.jsx("div",{className:"section-content",children:n})]})},(t,e)=>t.title===e.title&&t.id===e.id&&t.defaultExpanded===e.defaultExpanded&&t.children===e.children),Za=C.memo(function({label:e,value:n,onChange:r,type:i="text",icon:s,placeholder:a,className:o,multiline:l,min:c,max:u,disabled:h}){const[f,p]=C.useState(String(n||"")),m=C.useRef(!1);C.useEffect(()=>{p(String(n||"")),m.current=!1},[n]);const v=w=>{w.target.select(),m.current=!1},A=w=>{p(w)},x=()=>{if(m.current){m.current=!1;return}f!==String(n||"")&&r(f)},E=w=>{w.key==="Enter"&&!l&&(w.preventDefault(),f!==String(n||"")&&(r(f),m.current=!0),w.target.blur())};return d.jsx(FI,{legend:e,icon:s,className:o,children:l?d.jsx("textarea",{className:"react-aria-TextArea resize-y",value:f,onChange:w=>A(w.target.value),onFocus:v,onBlur:x,onKeyDown:E,placeholder:a,rows:4,disabled:h}):d.jsx("input",{className:"react-aria-Input",type:i,value:f,onChange:w=>A(w.target.value),onFocus:v,onBlur:x,onKeyDown:E,placeholder:a,min:c,max:u,disabled:h})})},(t,e)=>t.label===e.label&&t.value===e.value&&t.type===e.type&&t.placeholder===e.placeholder&&t.className===e.className&&t.multiline===e.multiline&&t.min===e.min&&t.max===e.max&&t.disabled===e.disabled&&t.icon===e.icon),Il=C.memo(function({label:e,value:n,onChange:r,options:i,icon:s,className:a}){const o=l=>{const c=l;r(c==="reset"?"":c)};return d.jsxs("fieldset",{className:`properties-aria ${a||""}`,children:[d.jsx("legend",{className:"fieldset-legend",children:e}),d.jsx("div",{className:"react-aria-control react-aria-Group",children:d.jsxs(da,{className:"react-aria-Select",selectedKey:n,onSelectionChange:o,"aria-label":e,children:[d.jsxs(en,{className:"react-aria-Button",children:[s&&d.jsx("label",{className:"control-label",children:d.jsx(s,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx($s,{}),d.jsx("span",{"aria-hidden":"true",className:"select-chevron",children:d.jsx(zs,{size:16})})]}),d.jsx(gs,{className:"react-aria-Popover",children:d.jsx($i,{className:"react-aria-ListBox",children:i.map(l=>d.jsx(Sr,{id:l.value,className:"react-aria-ListBoxItem",children:l.label},l.value))})})]})})]})}),Hd=C.memo(function({label:e,isSelected:n,onChange:r,icon:i,className:s}){return d.jsx(FI,{legend:e,icon:i,className:s,children:d.jsxs(u4,{className:"react-aria-Switch",isSelected:n,onChange:a=>r(a),children:[d.jsx("div",{className:"indicator"}),e]})})},(t,e)=>t.label===e.label&&t.isSelected===e.isSelected&&t.icon===e.icon&&t.className===e.className);function WFe({label:t,value:e,onChange:n,min:r=0,max:i=100,step:s=1,icon:a,className:o}){const l=c=>{const u=Array.isArray(c)?c[0]:c;n(u)};return d.jsxs("fieldset",{className:`properties-aria ${o||""}`,children:[d.jsx("legend",{className:"fieldset-legend",children:t}),d.jsxs("div",{className:"react-aria-control react-aria-Group",children:[a&&d.jsx("label",{className:"control-label",children:d.jsx(a,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx(E3e,{className:"react-aria-Slider",value:e,onChange:l,minValue:r,maxValue:i,step:s,"aria-label":t,children:d.jsxs("div",{className:"slider-container",children:[d.jsx(kF,{className:"slider-track",children:d.jsx(w3e,{className:"slider-thumb"})}),d.jsxs(S3e,{className:"slider-output",children:[e,"%"]})]})})]})]})}const KFe=["px","%","rem","em","vh","vw","reset"],oT=["reset","auto","inherit","initial","unset","normal"];function CP(t){const e=t.trim();if(oT.includes(e))return{numericValue:null,unit:e};const r=e.split(/\s+/)[0].match(/^(-?\d+\.?\d*)([a-z%]+)?$/i);if(r){const i=parseFloat(r[1]),s=r[2]||"";return{numericValue:i,unit:s}}return{numericValue:0,unit:"px"}}const qd=C.memo(function({label:e,value:n,onChange:r,icon:i,className:s,units:a=KFe,allowKeywords:o=!0,min:l=0,max:c=9999}){const[u,h]=C.useState(null),[f,p]=C.useState("px"),[m,v]=C.useState(!1),[A,x]=C.useState(""),E=C.useRef(!1),w=C.useRef(n);C.useEffect(()=>{const L=CP(n);h(L.numericValue),p(L.unit),v(L.numericValue===null),x(L.numericValue!==null?String(L.numericValue):L.unit),E.current=!1,w.current=n},[n]);const B=L=>{x(L)},D=C.useRef(null),T=L=>{if(E.current){E.current=!1;return}const F=L.relatedTarget;if(F&&D.current?.contains(F))return;const z=A.trim();if(o&&oT.includes(z.toLowerCase())){const H=z.toLowerCase(),K=H==="reset"?"":H;K!==n&&K!==w.current&&(w.current=K,r(K));return}const G=parseFloat(z);if(isNaN(G)){x(u!==null?String(u):"");return}if(G<l||G>c){x(u!==null?String(u):"");return}const V=CP(n),q=V.numericValue!==G||V.unit!==f,O=`${G}${f}`;q&&O!==w.current&&(w.current=O,r(O))},M=L=>{if(oT.includes(L)){const G=L==="reset"?"":L;G!==n&&G!==w.current&&(w.current=G,r(G));return}const F=parseFloat(A);let z;!isNaN(F)&&F!==0?z=`${F}${L}`:u!==null&&u!==0?z=`${u}${L}`:z=`${["%","vh","vw"].includes(L)?100:0}${L}`,z!==n&&z!==w.current&&(w.current=z,r(z))},R=L=>{L.target.select(),E.current=!1},k=L=>{if(L.key==="Enter"){L.preventDefault();const G=A.trim();let V=!1;if(o&&oT.includes(G.toLowerCase())){const q=G.toLowerCase(),O=q==="reset"?"":q;O!==n&&(r(O),V=!0)}else{const q=parseFloat(G);if(!isNaN(q)&&q>=l&&q<=c){const O=CP(n);if(O.numericValue!==q||O.unit!==f){const K=`${q}${f}`;r(K),V=!0}}}V&&(E.current=!0),L.target.blur();return}if(m)return;const F=L.shiftKey?10:1;let z=u||0;L.key==="ArrowUp"?(L.preventDefault(),z=Math.min(z+F,c),r(`${z}${f}`)):L.key==="ArrowDown"&&(L.preventDefault(),z=Math.max(z-F,l),r(`${z}${f}`))};return d.jsxs("fieldset",{className:`properties-aria property-unit-input ${s||""}`,children:[e&&d.jsx("legend",{className:"fieldset-legend",children:e}),d.jsxs("div",{className:"react-aria-control react-aria-Group",children:[i&&d.jsx("label",{className:"control-label",children:d.jsx(i,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsxs($T,{className:"react-aria-ComboBox react-aria-UnitComboBox",inputValue:f===""?"":f,onSelectionChange:L=>{L!==null&&M(L===""?"":L)},selectedKey:f===""?"":f,"aria-label":"Unit",children:[d.jsxs("div",{className:"combobox-container",ref:D,children:[d.jsx(br,{className:"react-aria-Input",type:"text",value:A,onChange:L=>B(L.target.value),onFocus:R,onBlur:T,onKeyDown:k,"aria-label":e||"Value",placeholder:"reset"}),d.jsx(en,{className:"react-aria-Button",children:d.jsx(zs,{size:16})})]}),d.jsx(gs,{className:"react-aria-Popover",children:d.jsx($i,{className:"react-aria-ListBox",children:a.map(L=>d.jsx(Sr,{id:L===""?"":L,className:"react-aria-ListBoxItem",children:L===""?"":L},L===""?"":L))})})]})]})]})},(t,e)=>t.label===e.label&&t.value===e.value&&t.className===e.className&&t.icon===e.icon&&t.min===e.min&&t.max===e.max&&t.allowKeywords===e.allowKeywords&&JSON.stringify(t.units)===JSON.stringify(e.units));function qoe(t){return d.jsx(r3e,{...t,className:"react-aria-ColorSwatch"})}function qFe(t){return d.jsx(Sie,{...t,className:"react-aria-ColorArea",children:d.jsx(s4,{className:"react-aria-ColorThumb"})})}function YFe(t){return d.jsx(hse,{...t,className:"react-aria-ColorSlider",children:d.jsx(kF,{className:"react-aria-SliderTrack",children:d.jsx(s4,{className:"react-aria-ColorThumb"})})})}function XFe({initialValue:t,onChange:e,label:n}){const[r,i]=we.useState(t),[s,a]=we.useState(t),o=C.useRef(t),l=C.useCallback(p=>{if(!p)return;const m=p.toString("hex");i(m),a(m)},[]),c=C.useCallback(p=>{const m=p.toString("hex");m!==o.current&&(o.current=m,e(m))},[e]),u=C.useCallback(p=>{a(p.target.value)},[]),h=C.useCallback(()=>{s!==o.current&&(o.current=s,i(s),e(s))},[s,e]),f=C.useCallback(p=>{p.key==="Enter"&&(p.preventDefault(),s!==o.current&&(o.current=s,i(s),e(s)),p.target.blur())},[s,e]);return d.jsx(b3e,{value:r,onChange:l,children:d.jsxs(cE,{children:[d.jsx(en,{className:"react-aria-Group color-swatch-button",children:d.jsx(qoe,{})}),d.jsx(j_,{placement:"bottom start",className:"color-picker-popover",children:d.jsxs("div",{className:"color-picker-content",children:[d.jsx(qFe,{colorSpace:"hsb",xChannel:"saturation",yChannel:"brightness",onChangeEnd:c}),d.jsx(YFe,{colorSpace:"hsb",channel:"hue",onChangeEnd:c}),d.jsx(e3e,{className:"react-aria-ColorField","aria-label":n||"Color",children:d.jsx(br,{className:"react-aria-Input",value:s,onChange:u,onBlur:h,onKeyDown:f})})]})})]})})}function uM({label:t,value:e,onChange:n,className:r}){return d.jsxs("fieldset",{className:`properties-aria property-color-input ${r||""}`,children:[t&&d.jsx("legend",{className:"fieldset-legend",children:t}),d.jsx(XFe,{initialValue:e,onChange:n,label:t},e)]})}function JFe({children:t,...e}){return d.jsx(A3e,{...e,children:t})}function ZFe(t){return d.jsx(y3e,{...t,children:d.jsx(qoe,{})})}fr({base:"outline outline-sky-600 dark:outline-sky-500 forced-colors:outline-[Highlight] outline-offset-2",variants:{isFocusVisible:{false:"outline-0",true:"outline-2"}}});function Yoe(t,e){return Vy(t,n=>Fse(e,n))}const eje=["red","orange","amber","yellow","lime","green","emerald","teal","cyan","sky","blue","indigo","violet","purple","fuchsia","pink","rose","slate","stone"],tje={red:"#ef4444",orange:"#f97316",amber:"#f59e0b",yellow:"#eab308",lime:"#84cc16",green:"#22c55e",emerald:"#10b981",teal:"#14b8a6",cyan:"#06b6d4",sky:"#0ea5e9",blue:"#3b82f6",indigo:"#6366f1",violet:"#8b5cf6",purple:"#a855f7",fuchsia:"#d946ef",pink:"#ec4899",rose:"#f43f5e",slate:"#64748b",stone:"#78716c"};function nje(t){return tje[t]}const Xoe=eje.map(t=>({name:t,value:nje(t)})),rje=`linear-gradient(to right, ${Xoe.map(t=>t.value).join(", ")})`,Joe="absolute box-border h-5 w-5 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-white bg-white/0 shadow-[0_0_0_1px_rgba(0,0,0,0.45),inset_0_0_0_1px_rgba(0,0,0,0.45)] data-[focus-visible=true]:h-6 data-[focus-visible=true]:w-6 group-data-[orientation=horizontal]:top-1/2 group-data-[orientation=vertical]:left-1/2";function ije({className:t,...e}){return d.jsx(Sie,{...e,className:Yoe(t,"relative aspect-square w-full min-w-[12rem] max-w-[18rem] rounded-xl border border-slate-200 bg-transparent shadow-sm data-[disabled=true]:opacity-40"),children:d.jsx(s4,{className:Joe})})}function sje({className:t,...e}){return d.jsx(hse,{...e,className:Yoe(t,"group grid gap-2 text-sm data-[orientation=vertical]:grid-rows-[auto_1fr]"),children:d.jsx(kF,{className:"relative flex h-4 w-full items-center overflow-hidden rounded-full border border-slate-200 bg-slate-200/60 group-data-[orientation=vertical]:h-full group-data-[orientation=vertical]:w-4",style:{backgroundImage:rje},children:d.jsx(s4,{className:Joe})})})}function aje(t){return`${t.charAt(0).toUpperCase()}${t.slice(1)} 500`}function Agt({areaProps:t,sliderProps:e,swatchPickerProps:n,swatches:r=Xoe,className:i}){return d.jsxs("div",{className:`flex flex-col gap-4 ${i??""}`,children:[d.jsx(ije,{colorSpace:"hsb",xChannel:"saturation",yChannel:"brightness",...t}),d.jsx(sje,{colorSpace:"hsb",channel:"hue",...e}),d.jsx(JFe,{...n,children:n?.children??r.map(s=>d.jsx(ZFe,{color:s.value,"aria-label":aje(s.name)},s.name))})]})}const Di=Jl((t,e)=>({selectedElement:null,isSyncingToBuilder:!1,syncVersion:0,setSelectedElement:n=>t({selectedElement:n}),setSyncingToBuilder:n=>t({isSyncingToBuilder:n}),incrementSyncVersion:()=>{const n=e().syncVersion+1;return t({syncVersion:n,isSyncingToBuilder:!0}),n},confirmSync:n=>{const r=e().syncVersion;n===r&&t({isSyncingToBuilder:!1})},updateCustomId:n=>{const r=e().incrementSyncVersion();console.log(" updateCustomId  (v"+r+"):",{elementId:e().selectedElement?.id,customId:n}),t(i=>i.selectedElement?{selectedElement:{...i.selectedElement,customId:n}}:i)},updateProperty:(n,r)=>t(i=>i.selectedElement?{selectedElement:{...i.selectedElement,properties:{...i.selectedElement.properties,[n]:r}}}:i),updateProperties:n=>{const r=e().incrementSyncVersion();console.log(" updateProperties  (v"+r+")"),t(i=>i.selectedElement?{selectedElement:{...i.selectedElement,properties:{...i.selectedElement.properties,...n}}}:i)},updateSemanticClasses:n=>t(r=>r.selectedElement?{selectedElement:{...r.selectedElement,semanticClasses:n}}:r),addSemanticClass:n=>t(r=>{if(!r.selectedElement)return r;const i=r.selectedElement.semanticClasses||[];return i.includes(n)?r:{selectedElement:{...r.selectedElement,semanticClasses:[...i,n]}}}),removeSemanticClass:n=>t(r=>{if(!r.selectedElement)return r;const i=r.selectedElement.semanticClasses||[];return{selectedElement:{...r.selectedElement,semanticClasses:i.filter(s=>s!==n)}}}),updateCSSVariables:n=>t(r=>r.selectedElement?{selectedElement:{...r.selectedElement,cssVariables:n}}:r),updateCSSVariable:(n,r)=>t(i=>i.selectedElement?{selectedElement:{...i.selectedElement,cssVariables:{...i.selectedElement.cssVariables||{},[n]:r}}}:i),updateInlineStyle:(n,r)=>{const i=e().incrementSyncVersion();console.log(" updateInlineStyle  (v"+i+"):",{property:n,value:r}),t(s=>{if(!s.selectedElement)return s;const a={...s.selectedElement.style||{}};return r===""||r===null||r===void 0?delete a[n]:a[n]=r,{selectedElement:{...s.selectedElement,style:a}}})},updateInlineStyles:n=>{const r=e().incrementSyncVersion();console.log(" updateInlineStyles  (v"+r+"):",n),t(i=>{if(!i.selectedElement)return i;const s={...i.selectedElement.style||{}};return Object.entries(n).forEach(([a,o])=>{o===""||o===null||o===void 0?delete s[a]:s[a]=o}),{selectedElement:{...i.selectedElement,style:s}}})},updateDataBinding:n=>{const r=e().incrementSyncVersion();console.log(" updateDataBinding  (v"+r+"):",{elementId:e().selectedElement?.id,elementType:e().selectedElement?.type,newBinding:n}),t(i=>i.selectedElement?{selectedElement:{...i.selectedElement,dataBinding:n}}:i)},updateEvents:n=>{const r=e().incrementSyncVersion();console.log(" updateEvents  (v"+r+"):",{elementId:e().selectedElement?.id,eventCount:n.length}),t(i=>i.selectedElement?{selectedElement:{...i.selectedElement,events:n}}:i)},addEvent:n=>{const r=e().incrementSyncVersion();console.log(" addEvent  (v"+r+"):",{elementId:e().selectedElement?.id,eventId:n.id,eventType:n.event}),t(i=>{if(!i.selectedElement)return i;const s=i.selectedElement.events||[];return{selectedElement:{...i.selectedElement,events:[...s,n]}}})},updateEvent:(n,r)=>{const i=e().incrementSyncVersion();console.log(" updateEvent  (v"+i+"):",{elementId:e().selectedElement?.id,eventId:n,eventType:r.event,actionCount:r.actions.length}),t(s=>{if(!s.selectedElement)return s;const a=s.selectedElement.events||[];return{selectedElement:{...s.selectedElement,events:a.map(o=>o.id===n?r:o)}}})},removeEvent:n=>{const r=e().incrementSyncVersion();console.log(" removeEvent  (v"+r+"):",{elementId:e().selectedElement?.id,eventId:n}),t(i=>{if(!i.selectedElement)return i;const s=i.selectedElement.events||[];return{selectedElement:{...i.selectedElement,events:s.filter(a=>a.id!==n)}}})},updateSelectedElementComputedStyle:n=>{t(r=>r.selectedElement?{selectedElement:{...r.selectedElement,computedStyle:n}}:r)}}));function oje(t){return!t||t.trim()===""?!1:/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(t)}function lje(t,e,n){return!t||t.trim()===""?!0:!n.some(r=>r.customId===t&&r.id!==e)}function c9(t,e,n){return!t||t.trim()===""?{isValid:!0}:oje(t)?lje(t,e,n)?{isValid:!0}:{isValid:!1,error:`ID "${t}" is already in use. Please choose a unique ID.`}:{isValid:!1,error:"Invalid ID format. Must start with a letter and contain only letters, numbers, hyphens, and underscores."}}const ygt=C.memo(function({label:e="ID",value:n,elementId:r,placeholder:i="button_1",className:s}){const[a,o]=C.useState(n||""),[l,c]=C.useState(void 0),u=Di(v=>v.updateCustomId);C.useEffect(()=>{o(n||""),c(void 0)},[n]);const h=v=>{v.target.select()},f=v=>{o(v),c(void 0)},p=()=>{const v=je.getState().elementsMap,A=Array.from(v.values()),x=c9(a,r,A);if(!x.isValid){c(x.error),o(n||"");return}a!==(n||"")&&(u(a),c(void 0))},m=v=>{if(v.key==="Enter"){v.preventDefault();const A=je.getState().elementsMap,x=c9(a,r,Array.from(A.values()));if(!x.isValid){c(x.error),o(n||"");return}a!==(n||"")&&(u(a),c(void 0)),v.target.blur()}else v.key==="Escape"&&(v.preventDefault(),o(n||""),c(void 0),v.target.blur())};return d.jsxs(d.Fragment,{children:[d.jsx(FI,{legend:e,icon:R8,className:s,children:d.jsx("input",{className:"react-aria-Input",type:"text",value:a,onChange:v=>f(v.target.value),onFocus:h,onBlur:p,onKeyDown:m,placeholder:i,"aria-invalid":l?"true":"false","aria-describedby":l?"customid-error":void 0})}),l&&d.jsx("div",{id:"customid-error",className:"react-aria-FieldError",role:"alert",children:l})]})});function jI({title:t,icon:e,actions:n,collapsible:r=!1,isCollapsed:i=!1,onToggle:s,className:a=""}){return d.jsxs("div",{className:`section-header ${r?"collapsible":""} ${i?"collapsed":""} ${a}`.trim(),onClick:r&&s?s:void 0,style:{cursor:r?"pointer":"default"},children:[d.jsxs("div",{className:"section-title",children:[r&&d.jsx("span",{className:"collapse-icon",style:{marginRight:"8px"},children:i?"":""}),e&&d.jsx("span",{className:"section-icon",children:e}),t]}),n&&d.jsx("div",{className:"header-actions",children:n})]})}function Ko({icon:t,message:e,description:n,className:r=""}){return d.jsx("div",{className:`inspector empty ${r}`.trim(),children:d.jsxs("div",{className:"empty-state",children:[t&&d.jsx("div",{className:"empty-icon",children:t}),d.jsx("p",{className:"empty-message",children:e}),n&&d.jsx("p",{className:"empty-description",children:n})]})})}function Zoe({icon:t,message:e=" ...",description:n,size:r="md",className:i=""}){return d.jsx("div",{className:`inspector loading ${i}`.trim(),children:d.jsxs("div",{className:"loading-state",children:[t||d.jsx("div",{className:`spinner spinner-${r}`,"aria-label":"Loading",children:d.jsx("svg",{className:"spinner-svg",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("circle",{className:"spinner-circle",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"4"})})}),d.jsx("p",{className:"loading-message",children:e}),n&&d.jsx("p",{className:"loading-description",children:n})]})})}function cje({count:t,primaryElementType:e,onCopyAll:n,onPasteAll:r,onDeleteAll:i,onClearSelection:s,onGroupSelection:a,onAlign:o,onDistribute:l,className:c=""}){return d.jsxs("div",{className:`multi-select-status ${c}`.trim(),children:[d.jsxs("div",{className:"status-header",children:[d.jsxs("div",{className:"status-count",children:[d.jsx("span",{className:"count-number",children:t}),d.jsx("span",{className:"count-label",children:"  "})]}),e&&d.jsxs("div",{className:"primary-element-badge",children:[d.jsx("span",{className:"badge-label",children:"Primary:"}),d.jsx("span",{className:"badge-type",children:e})]})]}),d.jsxs("div",{className:"status-actions",children:[d.jsxs("div",{className:"action-group",children:[d.jsx("span",{className:"group-label",children:""}),d.jsxs(Xn,{variant:"ghost",size:"sm",onPress:n,"aria-label":"Copy all selected elements (Cmd+Shift+C)",isDisabled:t===0,children:[d.jsx(T8,{color:ge.color,size:ge.size,strokeWidth:ge.stroke}),d.jsx("span",{children:" "}),d.jsx("span",{className:"shortcut-hint",children:"C"})]}),d.jsxs(Xn,{variant:"ghost",size:"sm",onPress:r,"aria-label":"Paste copied elements (Cmd+Shift+V)",children:[d.jsx(B8,{color:ge.color,size:ge.size,strokeWidth:ge.stroke}),d.jsx("span",{children:""}),d.jsx("span",{className:"shortcut-hint",children:"V"})]})]}),d.jsxs("div",{className:"action-group",children:[d.jsx("span",{className:"group-label",children:""}),d.jsxs(Xn,{variant:"ghost",size:"sm",onPress:a,"aria-label":"Group selected elements (Cmd+G)",isDisabled:t<2,children:[d.jsx(tE,{color:ge.color,size:ge.size,strokeWidth:ge.stroke}),d.jsx("span",{children:""}),d.jsx("span",{className:"shortcut-hint",children:"G"})]})]}),o&&d.jsxs("div",{className:"action-group",children:[d.jsx("span",{className:"group-label",children:""}),d.jsxs("div",{className:"button-row",children:[d.jsx(Xn,{variant:"ghost",size:"sm",onPress:()=>o("left"),"aria-label":"Align left (Cmd+Shift+L)",isDisabled:t<2,children:d.jsx(L8,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx(Xn,{variant:"ghost",size:"sm",onPress:()=>o("center"),"aria-label":"Align horizontal center (Cmd+Shift+H)",isDisabled:t<2,children:d.jsx(vY,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx(Xn,{variant:"ghost",size:"sm",onPress:()=>o("right"),"aria-label":"Align right (Cmd+Shift+R)",isDisabled:t<2,children:d.jsx(xY,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx(Xn,{variant:"ghost",size:"sm",onPress:()=>o("top"),"aria-label":"Align top (Cmd+Shift+T)",isDisabled:t<2,children:d.jsx(Jq,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx(Xn,{variant:"ghost",size:"sm",onPress:()=>o("middle"),"aria-label":"Align vertical middle (Cmd+Shift+M)",isDisabled:t<2,children:d.jsx(Yq,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx(Xn,{variant:"ghost",size:"sm",onPress:()=>o("bottom"),"aria-label":"Align bottom (Cmd+Shift+B)",isDisabled:t<2,children:d.jsx(Xq,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})]})]}),l&&d.jsxs("div",{className:"action-group",children:[d.jsx("span",{className:"group-label",children:""}),d.jsxs("div",{className:"button-row",children:[d.jsx(Xn,{variant:"ghost",size:"sm",onPress:()=>l("horizontal"),"aria-label":"Distribute horizontally (Cmd+Shift+D)",isDisabled:t<3,children:d.jsx(Nge,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx(Xn,{variant:"ghost",size:"sm",onPress:()=>l("vertical"),"aria-label":"Distribute vertically (Cmd+Alt+Shift+V)",isDisabled:t<3,children:d.jsx(jge,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})]})]}),d.jsxs("div",{className:"action-group",children:[d.jsx("span",{className:"group-label",children:""}),d.jsxs(Xn,{variant:"ghost",size:"sm",onPress:i,"aria-label":"Delete all selected elements (Delete)",isDisabled:t===0,children:[d.jsx(pu,{color:ge.color,size:ge.size,strokeWidth:ge.stroke}),d.jsx("span",{children:" "}),d.jsx("span",{className:"shortcut-hint",children:""})]}),d.jsxs(Xn,{variant:"ghost",size:"sm",onPress:s,"aria-label":"Clear selection (Esc)",isDisabled:t===0,children:[d.jsx(eh,{color:ge.color,size:ge.size,strokeWidth:ge.stroke}),d.jsx("span",{children:" "}),d.jsx("span",{className:"shortcut-hint",children:"Esc"})]})]})]}),d.jsxs("div",{className:"status-info",children:[d.jsx("p",{className:"info-text",children:"  .     Inspector ."}),d.jsx("p",{className:"info-hint",children:"        ."})]})]})}function uje(t){if(t.length===0)return{commonProps:[],elementCount:0,elementTypes:[]};const e=Array.from(new Set(t.map(o=>o.tag))),r=t[0].props||{};return{commonProps:Object.keys(r).filter(o=>t.every(l=>o in(l.props||{}))).map(o=>{const l=t.map(h=>(h.props||{})[o]),c=l[0];if(l.every(h=>JSON.stringify(h)===JSON.stringify(c)))return{key:o,value:c,isMixed:!1};{const h=Array.from(new Set(l.map(f=>JSON.stringify(f)))).map(f=>JSON.parse(f));return{key:o,value:c,isMixed:!0,uniqueValues:h}}}),elementCount:t.length,elementTypes:e}}function dje(t,e){if(e==="all")return t;const a={layout:["display","flexDirection","justifyContent","alignItems","gap","width","height","padding","margin"],style:["backgroundColor","color","border","borderRadius","boxShadow","opacity"],content:["children","label","placeholder","value","defaultValue"]}[e];return t.filter(o=>a.includes(o.key))}function hje(t){return!["id","customId","key","data-element-id"].includes(t)}function fje(t){return["color","backgroundColor","borderColor","fill","stroke"].some(a=>t.toLowerCase().includes(a.toLowerCase()))?"color":["width","height","padding","margin","gap","top","left","right","bottom","borderRadius","borderWidth"].some(a=>t.toLowerCase().includes(a.toLowerCase()))?"dimension":["disabled","isDisabled","readonly","isReadonly","required","isRequired","selected","isSelected","checked","isChecked","open","isOpen"].includes(t)?"boolean":["variant","size","display","flexDirection","justifyContent","alignItems","textAlign","fontWeight","position"].includes(t)?"select":["opacity","zIndex","order","tabIndex","step"].includes(t)?"number":"string"}function pje({selectedElements:t,onBatchUpdate:e,className:n=""}){const[r,i]=C.useState("all"),[s,a]=C.useState({}),[o,l]=C.useState(!1),c=C.useMemo(()=>uje(t),[t]),u=C.useMemo(()=>{const w=dje(c.commonProps,r);return o?w.filter(B=>B.isMixed):w},[c.commonProps,r,o]),h=C.useMemo(()=>u.filter(w=>hje(w.key)),[u]),f=C.useMemo(()=>c.commonProps.filter(w=>w.isMixed).length,[c.commonProps]),p=C.useCallback((w,B)=>{a(D=>({...D,[w]:B}))},[]),m=C.useCallback(()=>{Object.keys(s).length>0&&(e(s),a({}))},[s,e]),v=C.useCallback(()=>{a({})},[]),A=C.useCallback((w,B)=>w in s?s[w]:B,[s]),x=w=>{const{key:B,value:D,isMixed:T}=w,M=A(B,D),R=B in s,k=fje(B),L=d.jsxs("span",{className:"batch-property-label",children:[B,T&&d.jsx("span",{className:"mixed-badge",children:"Mixed"}),R&&d.jsx("span",{className:"pending-badge",children:"Pending"})]});return k==="boolean"||typeof D=="boolean"?d.jsx(Hd,{label:L,isSelected:M,onChange:F=>p(B,F)},B):k==="number"||typeof D=="number"?d.jsx(Za,{label:L,value:T&&!R?"":String(M),onChange:F=>{if(F==="")return;const z=Number(F);isNaN(z)||p(B,z)},placeholder:T&&!R?`Mixed (${w.uniqueValues?.length} values)`:void 0},B):k==="color"?d.jsx(Za,{label:L,value:T&&!R?"":String(M),onChange:F=>p(B,F),placeholder:T&&!R?"Mixed colors":void 0,type:"color"},B):k==="select"?d.jsx(Il,{label:L,value:String(M),onChange:F=>p(B,F),options:[{value:String(M),label:String(M)}]},B):d.jsx(Za,{label:L,value:T&&!R?"":String(M),onChange:F=>p(B,F),placeholder:T&&!R?`Mixed (${w.uniqueValues?.length} values)`:void 0},B)};if(c.elementCount===0)return null;const E=Object.keys(s).length>0;return d.jsxs("div",{className:`batch-property-editor ${n}`.trim(),children:[d.jsxs("div",{className:"batch-header",children:[d.jsxs("div",{className:"batch-info",children:[d.jsxs("p",{className:"batch-count",children:[c.elementCount,"   "]}),d.jsxs("p",{className:"batch-types",children:[": ",c.elementTypes.join(", ")]}),f>0&&d.jsxs("p",{className:"batch-mixed",children:[d.jsx("span",{className:"mixed-indicator",children:""}),f,"     "]})]}),d.jsxs("div",{className:"batch-controls",children:[d.jsx(Il,{label:"",value:r,onChange:w=>i(w),options:[{value:"all",label:""},{value:"layout",label:""},{value:"style",label:""},{value:"content",label:""}]}),f>0&&d.jsx(Hd,{label:"Mixed ",isSelected:o,onChange:l})]})]}),d.jsx(FI,{legend:" ",children:h.length===0?d.jsx("p",{className:"batch-empty",children:o?"Mixed    .":"    ."}):h.map(w=>x(w))}),E&&d.jsxs("div",{className:"batch-actions",children:[d.jsxs(Xn,{variant:"ghost",size:"sm",onPress:m,"aria-label":"Apply all pending changes",children:[d.jsx(nY,{color:ge.color,size:ge.size,strokeWidth:ge.stroke}),d.jsxs("span",{children:["  (",Object.keys(s).length,")"]})]}),d.jsxs(Xn,{variant:"ghost",size:"sm",onPress:v,"aria-label":"Reset all pending changes",children:[d.jsx(mb,{color:ge.color,size:ge.size,strokeWidth:ge.stroke}),d.jsx("span",{children:""})]})]}),d.jsxs("div",{className:"batch-footer",children:[d.jsx("p",{className:"batch-hint",children:'  " "   .'}),E&&d.jsxs("p",{className:"batch-warning",children:[" ",Object.keys(s).length,"   ."]})]})]})}function gje({allElements:t,onFilteredElements:e,className:n=""}){const[r,i]=C.useState("all"),[s,a]=C.useState(""),[o,l]=C.useState(""),[c,u]=C.useState(""),[h,f]=C.useState(!1),p=C.useMemo(()=>{const A=new Set;return t.forEach(x=>{A.add(x.tag)}),Array.from(A).sort()},[t]),m=()=>{let A=[];switch(r){case"all":A=t;break;case"type":case"tag":s&&(A=t.filter(E=>E.tag===s));break;case"property":o&&(A=t.filter(E=>{const w=E.props||{};return o in w?c?String(w[o]||"").toLowerCase().includes(c.toLowerCase()):o in w:!1}));break}const x=A.map(E=>E.id);e(x),console.log(` [Filter] Applied ${r} filter, found ${x.length} elements`)},v=()=>{i("all"),setSelectedType(""),a(""),l(""),u(""),e(t.map(A=>A.id)),console.log(" [Filter] Cleared filter")};return h?d.jsxs("div",{className:`selection-filter ${n}`.trim(),children:[d.jsxs("div",{className:"filter-header",children:[d.jsxs("div",{className:"filter-title",children:[d.jsx(KO,{size:16}),d.jsx("span",{children:" "})]}),d.jsx(Xn,{variant:"ghost",size:"sm",onPress:()=>f(!1),"aria-label":"Hide filter options",children:d.jsx(eh,{size:16})})]}),d.jsxs("div",{className:"filter-content",children:[d.jsx(Il,{label:" ",value:r,onChange:A=>i(A),options:[{value:"all",label:""},{value:"type",label:""},{value:"tag",label:""},{value:"property",label:""}]}),(r==="type"||r==="tag")&&d.jsx(Il,{label:"",value:s,onChange:a,options:[{value:"",label:""},...p.map(A=>({value:A,label:A}))]}),r==="property"&&d.jsxs(d.Fragment,{children:[d.jsx(Za,{label:" ",value:o,onChange:l,placeholder:": className, id, style"}),d.jsx(Za,{label:"  ()",value:c,onChange:u,placeholder:"  (   )"})]}),d.jsxs("div",{className:"filter-actions",children:[d.jsx(Xn,{variant:"primary",size:"sm",onPress:m,isDisabled:(r==="type"||r==="tag")&&!s||r==="property"&&!o,children:" "}),d.jsx(Xn,{variant:"ghost",size:"sm",onPress:v,children:""})]})]})]}):d.jsx("div",{className:`selection-filter collapsed ${n}`.trim(),children:d.jsxs(Xn,{variant:"ghost",size:"sm",onPress:()=>f(!0),"aria-label":"Show filter options",children:[d.jsx(KO,{color:ge.color,size:ge.size,strokeWidth:ge.stroke}),d.jsx("span",{children:""})]})})}const mje=[{key:"C",modifier:"cmdShift",description:"Copy Properties",category:"Properties"},{key:"V",modifier:"cmdShift",description:"Paste Properties",category:"Properties"},{key:"C",modifier:"cmd",description:"Copy All Elements",category:"Editing"},{key:"V",modifier:"cmd",description:"Paste Elements",category:"Editing"},{key:"D",modifier:"cmd",description:"Duplicate Selection",category:"Editing"},{key:"Backspace",modifier:"none",description:"Delete Selected",category:"Editing"},{key:"A",modifier:"cmd",description:"Select All",category:"Selection"},{key:"Esc",modifier:"none",description:"Clear Selection",category:"Selection"},{key:"Tab",modifier:"none",description:"Next Element",category:"Selection"},{key:"Tab",modifier:"shift",description:"Previous Element",category:"Selection"},{key:"G",modifier:"cmd",description:"Group Selection",category:"Grouping"},{key:"G",modifier:"cmdShift",description:"Ungroup Selection",category:"Grouping"},{key:"L",modifier:"cmdShift",description:"Align Left",category:"Alignment"},{key:"H",modifier:"cmdShift",description:"Align Horizontal Center",category:"Alignment"},{key:"R",modifier:"cmdShift",description:"Align Right",category:"Alignment"},{key:"T",modifier:"cmdShift",description:"Align Top",category:"Alignment"},{key:"M",modifier:"cmdShift",description:"Align Vertical Middle",category:"Alignment"},{key:"B",modifier:"cmdShift",description:"Align Bottom",category:"Alignment"},{key:"D",modifier:"cmdShift",description:"Distribute Horizontally",category:"Distribution"},{key:"V",modifier:"cmdAltShift",description:"Distribute Vertically",category:"Distribution"},{key:"Z",modifier:"cmd",description:"Undo",category:"General"},{key:"Z",modifier:"cmdShift",description:"Redo",category:"General"},{key:"S",modifier:"cmd",description:"Save",category:"General"},{key:"?",modifier:"cmd",description:"Show This Help",category:"General"}];function u9(t){if(!t||t==="none")return"";const e=navigator.platform.toLowerCase().includes("mac"),n=e?"":"Ctrl",r=e?"":"Alt",i="";switch(t){case"cmd":return n;case"cmdShift":return`${n}${i}`;case"cmdAlt":return`${n}${r}`;case"cmdAltShift":return`${n}${r}${i}`;case"shift":return i;default:return""}}function Aje({isOpen:t,onClose:e,className:n=""}){const[r,i]=C.useState(new Set);if(!t)return null;const s=mje.reduce((l,c)=>(l[c.category]||(l[c.category]=[]),l[c.category].push(c),l),{}),a=["General","Selection","Editing","Properties","Grouping","Alignment","Distribution"],o=l=>{i(c=>{const u=new Set(c);return u.has(l)?u.delete(l):u.add(l),u})};return d.jsxs("div",{className:`keyboard-shortcuts-help ${n}`.trim(),children:[d.jsx("div",{className:"shortcuts-overlay",onClick:e}),d.jsxs("div",{className:"shortcuts-panel",children:[d.jsxs("div",{className:"shortcuts-header",children:[d.jsxs("div",{className:"shortcuts-title",children:[d.jsx(F0e,{color:ge.color,size:ge.size,strokeWidth:ge.stroke}),d.jsx("h2",{children:"Keyboard Shortcuts"})]}),d.jsx(Xn,{variant:"ghost",size:"sm",onPress:e,"aria-label":"Close keyboard shortcuts help",children:d.jsx(eh,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})]}),d.jsx("div",{className:"shortcuts-content",children:a.map(l=>{const c=s[l];if(!c)return null;const u=r.has(l);return d.jsxs("div",{className:"shortcuts-category",children:[d.jsxs("button",{className:"category-header",onClick:()=>o(l),"aria-expanded":!u,children:[u?d.jsx(Sl,{size:16,strokeWidth:2}):d.jsx(zs,{size:16,strokeWidth:2}),d.jsx("h3",{children:l}),d.jsxs("span",{className:"category-count",children:["(",c.length,")"]})]}),!u&&d.jsx("div",{className:"shortcuts-list",children:c.map((h,f)=>d.jsxs("div",{className:"shortcut-item",children:[d.jsx("span",{className:"shortcut-description",children:h.description}),d.jsxs("kbd",{className:"shortcut-keys",children:[u9(h.modifier),u9(h.modifier)&&d.jsx("span",{className:"key-separator",children:"+"}),h.key]})]},`${l}-${f}`))})]},l)})}),d.jsx("div",{className:"shortcuts-footer",children:d.jsxs("p",{className:"shortcuts-hint",children:[" Press ",d.jsx("kbd",{children:"?"})," anytime to toggle this help panel"]})})]})]})}function yje(t,e){const n=e.find(i=>i.id===t);if(!n)return[];const r=n.props.className||"";return e.filter(i=>i.id!==t&&i.tag===n.tag&&(i.props.className||"")===r).map(i=>i.id)}function vje(t,e){const n=e.find(r=>r.id===t);return n?e.filter(r=>r.id!==t&&r.parent_id===n.parent_id).map(r=>r.id):[]}function xje(t,e){const n=[],r=[t],i=new Set([t]);for(;r.length>0;){const s=r.shift();e.filter(o=>o.parent_id===s&&!i.has(o.id)).forEach(o=>{n.push(o.id),i.add(o.id),r.push(o.id)})}return n}function bje(t,e){const n=e.find(r=>r.id===t);return!n||!n.parent_id?null:n.parent_id}function Cje(t,e){const n=e.find(r=>r.id===t);return n?e.filter(r=>r.id!==t&&r.tag===n.tag).map(r=>r.id):[]}function Eje(t,e){const n=e.find(i=>i.id===t);if(!n)return[];const r=n.props.className||"";return r?e.filter(i=>i.id!==t&&(i.props.className||"")===r).map(i=>i.id):[]}function Sje(t,e,n=.7){const r=e.find(a=>a.id===t);if(!r)return[];const i=r.props.style||{},s=Object.keys(i);return s.length===0?[]:e.filter(a=>{if(a.id===t)return!1;const o=a.props.style||{},l=Object.keys(o);return l.length===0?!1:s.filter(h=>i[h]===o[h]).length/Math.max(s.length,l.length)>=n}).map(a=>a.id)}function wje(t,e){const n=e.find(h=>h.id===t);if(!n)return[];const r=[],i=yje(t,e);i.length>0&&r.push({type:"similar",elementIds:i,count:i.length,description:"Similar elements (same tag and className)"});const s=vje(t,e);s.length>0&&r.push({type:"siblings",elementIds:s,count:s.length,description:"Siblings (same parent)"});const a=xje(t,e);a.length>0&&r.push({type:"children",elementIds:a,count:a.length,description:"All children (descendants)"});const o=bje(t,e);o&&r.push({type:"parent",elementIds:[o],count:1,description:"Parent element"});const l=Cje(t,e);l.length>0&&r.push({type:"sameType",elementIds:l,count:l.length,description:`Same type (${n.tag})`});const c=Eje(t,e);if(c.length>0){const h=n.props.className||"";r.push({type:"sameClass",elementIds:c,count:c.length,description:`Same className (${h})`})}const u=Sje(t,e,.7);return u.length>0&&r.push({type:"sameStyle",elementIds:u,count:u.length,description:"Similar styles (70%+ match)"}),r}const _je={similar:GN,siblings:F8,children:uY,parent:Zi,sameType:jM,sameClass:w1,sameStyle:Rg};function Ije({referenceElement:t,allElements:e,onSelect:n,className:r=""}){const i=C.useMemo(()=>wje(t.id,e),[t.id,e]),s=a=>{console.log(`[SmartSelection] Applying suggestion: ${a.type}, count: ${a.count}`),n(a.elementIds)};return i.length===0?d.jsx("div",{className:`smart-selection empty ${r}`.trim(),children:d.jsxs("div",{className:"empty-state",children:[d.jsx(GN,{size:24,color:"var(--color-text-tertiary)"}),d.jsx("p",{className:"empty-text",children:"No smart selection suggestions available"}),d.jsx("p",{className:"empty-hint",children:"Select an element with siblings, children, or similar elements to see suggestions"})]})}):d.jsxs("div",{className:`smart-selection ${r}`.trim(),children:[d.jsxs("div",{className:"smart-selection-header",children:[d.jsx(GN,{color:ge.color,size:ge.size,strokeWidth:ge.stroke}),d.jsx("h3",{children:"Smart Select"}),d.jsxs("span",{className:"suggestion-count",children:[i.length," suggestions"]})]}),d.jsx("div",{className:"suggestions-list",children:i.map(a=>{const o=_je[a.type];return d.jsxs(Xn,{variant:"ghost",size:"sm",onPress:()=>s(a),className:"suggestion-item",children:[d.jsx(o,{color:ge.color,size:ge.size,strokeWidth:ge.stroke}),d.jsxs("div",{className:"suggestion-info",children:[d.jsx("span",{className:"suggestion-description",children:a.description}),d.jsxs("span",{className:"suggestion-count-badge",children:[a.count," found"]})]})]},a.type)})}),d.jsx("div",{className:"smart-selection-footer",children:d.jsx("p",{className:"footer-hint",children:" Click a suggestion to select matching elements"})})]})}const d9=5;class Bje{history=[];listeners=new Set;addSelection(e,n,r){if(e.length===0)return null;const i=this.createLabel(e,n),s={id:`selection-${Date.now()}`,elementIds:[...e],timestamp:Date.now(),label:i,pageId:r};return this.history.unshift(s),this.history.length>d9&&(this.history=this.history.slice(0,d9)),this.notifyListeners(),console.log(`[SelectionMemory] Added to history: ${i} (${e.length} elements)`),s}getHistory(){return[...this.history]}getEntry(e){return this.history.find(n=>n.id===e)||null}clearHistory(){this.history=[],this.notifyListeners(),console.log("[SelectionMemory] History cleared")}removeEntry(e){this.history=this.history.filter(n=>n.id!==e),this.notifyListeners(),console.log(`[SelectionMemory] Removed entry: ${e}`)}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>e())}createLabel(e,n){if(e.length===1){const s=n.find(a=>a.id===e[0]);return s?s.tag:"1 element"}const r=new Map;e.forEach(s=>{const a=n.find(o=>o.id===s);if(a){const o=r.get(a.tag)||0;r.set(a.tag,o+1)}});const i=Array.from(r.entries()).sort((s,a)=>a[1]-s[1]).slice(0,2);if(i.length===1){const[s,a]=i[0];return`${a} ${s}${a>1?"s":""}`}else if(i.length===2){const[s,a]=i[0],[o,l]=i[1];return`${a} ${s}${a>1?"s":""}, ${l} ${o}${l>1?"s":""}`}return`${e.length} elements`}}const Nw=new Bje;function Tje(t){const n=Date.now()-t,r=Math.floor(n/1e3),i=Math.floor(r/60),s=Math.floor(i/60),a=Math.floor(s/24);return r<60?"just now":i<60?`${i} min${i>1?"s":""} ago`:s<24?`${s} hour${s>1?"s":""} ago`:a<7?`${a} day${a>1?"s":""} ago`:new Date(t).toLocaleDateString()}function Mje({currentPageId:t,onRestore:e,className:n=""}){const[r,i]=C.useState([]);C.useEffect(()=>{const c=()=>{i(Nw.getHistory())};return c(),Nw.subscribe(c)},[]);const s=r.filter(c=>!t||c.pageId===t),a=c=>{console.log(`[SelectionMemory] Restoring selection: ${c.label}`),e(c.elementIds)},o=(c,u)=>{u.stopPropagation(),Nw.removeEntry(c)},l=()=>{confirm("Clear all selection history?")&&Nw.clearHistory()};return s.length===0?d.jsx("div",{className:`selection-memory empty ${n}`.trim(),children:d.jsxs("div",{className:"empty-state",children:[d.jsx(qO,{size:24,color:"var(--color-text-tertiary)"}),d.jsx("p",{className:"empty-text",children:"No selection history"}),d.jsx("p",{className:"empty-hint",children:"Previous selections will appear here for quick access"})]})}):d.jsxs("div",{className:`selection-memory ${n}`.trim(),children:[d.jsxs("div",{className:"memory-header",children:[d.jsx(qO,{color:ge.color,size:ge.size,strokeWidth:ge.stroke}),d.jsx("h3",{children:"Selection History"}),d.jsx("span",{className:"history-count",children:s.length}),s.length>0&&d.jsx(Xn,{variant:"ghost",size:"sm",onPress:l,"aria-label":"Clear all history",className:"clear-all-btn",children:d.jsx(pu,{size:14})})]}),d.jsx("div",{className:"history-list",children:s.map(c=>d.jsxs("div",{className:"history-item",children:[d.jsxs(Xn,{variant:"ghost",size:"sm",onPress:()=>a(c),className:"history-item-btn",children:[d.jsx(k8,{color:ge.color,size:ge.size,strokeWidth:ge.stroke}),d.jsxs("div",{className:"history-info",children:[d.jsx("span",{className:"history-label",children:c.label}),d.jsxs("span",{className:"history-time",children:[d.jsx(iY,{size:12}),Tje(c.timestamp)]})]})]}),d.jsx(Xn,{variant:"ghost",size:"sm",onPress:u=>o(c.id,u),"aria-label":"Delete history entry",className:"delete-btn",children:d.jsx(pu,{size:14})})]},c.id))}),d.jsx("div",{className:"memory-footer",children:d.jsxs("p",{className:"footer-hint",children:[" Last ",Math.min(s.length,5)," selections saved"]})})]})}const Dje=[{value:"manual",label:" ",description:"    "},{value:"onMount",label:" ",description:"   1 "},{value:"interval",label:"",description:"   "}],Rje=[{value:"dataTable",label:"DataTable",icon:qo},{value:"api",label:"API",icon:v_},{value:"variable",label:"Variable",icon:CT},{value:"route",label:"Route Param",icon:pY}],vgt=C.memo(function({label:e=" ",value:n,onChange:r,className:i,disabled:s}){const a=QF(),o=h4(),l=UF(),c=n?.source||"",u=n?.name||"",h=n?.path||"",f=n?.refreshMode||"manual",p=n?.refreshInterval||5e3,m=C.useCallback(()=>{switch(c){case"dataTable":return a.map(M=>({value:M.name,label:M.name,description:M.description}));case"api":return o.map(M=>({value:M.name,label:M.name,description:M.description}));case"variable":return l.map(M=>({value:M.name,label:M.name,description:`${M.scope} - ${M.type}`}));case"route":return[];default:return[]}},[c,a,o,l]),v=C.useCallback(M=>{const R=M;r(R?{source:R,name:"",path:""}:null)},[r]),A=C.useCallback(M=>{const R=M;c&&(console.log(` PropertyDataBinding: ${c}  "${R}" `),r({source:c,name:R,path:h,refreshMode:n?.refreshMode,refreshInterval:n?.refreshInterval}))},[c,h,n?.refreshMode,n?.refreshInterval,r]),x=C.useCallback(M=>{const R=M.target.value;c&&u&&r({source:c,name:u,path:R||void 0,refreshMode:n?.refreshMode,refreshInterval:n?.refreshInterval})},[c,u,n?.refreshMode,n?.refreshInterval,r]),E=C.useCallback(M=>{const R=M;c&&u&&r({source:c,name:u,path:n?.path,refreshMode:R,refreshInterval:R==="interval"?n?.refreshInterval||5e3:void 0})},[c,u,n?.path,n?.refreshInterval,r]),w=C.useCallback(M=>{const R=parseInt(M.target.value,10);c&&u&&!isNaN(R)&&R>0&&r({source:c,name:u,path:n?.path,refreshMode:"interval",refreshInterval:R})},[c,u,n?.path,r]),B=C.useCallback(()=>{r(null)},[r]),D=n?`{{${n.source}.${n.name}${n.path?"."+n.path:""}}}`:"",T=m();return d.jsx(FI,{legend:e,icon:pY,className:i,children:d.jsxs("div",{className:"property-data-binding",children:[D&&d.jsxs("div",{className:"binding-preview",children:[d.jsx("code",{className:"binding-expression",children:D}),d.jsx("button",{className:"binding-clear",onClick:B,type:"button","aria-label":" ",children:d.jsx(eh,{size:14})})]}),d.jsx("div",{className:"binding-row",children:d.jsxs(da,{className:"react-aria-Select binding-source-select",selectedKey:c||null,onSelectionChange:v,"aria-label":" ",isDisabled:s,children:[d.jsxs(en,{className:"react-aria-Button",children:[d.jsx($s,{placeholder:" ..."}),d.jsx("span",{"aria-hidden":"true",className:"select-chevron",children:d.jsx(zs,{size:16})})]}),d.jsx(gs,{className:"react-aria-Popover",children:d.jsx($i,{className:"react-aria-ListBox",children:Rje.map(M=>d.jsxs(Sr,{id:M.value,className:"react-aria-ListBoxItem",children:[d.jsx(M.icon,{size:14}),d.jsx("span",{children:M.label})]},M.value))})})]})}),c&&c!=="route"&&d.jsx("div",{className:"binding-row",children:T.length>0?d.jsxs(da,{className:"react-aria-Select binding-name-select",selectedKey:u||null,onSelectionChange:A,"aria-label":" ",isDisabled:s,children:[d.jsxs(en,{className:"react-aria-Button",children:[d.jsx($s,{placeholder:" ..."}),d.jsx("span",{"aria-hidden":"true",className:"select-chevron",children:d.jsx(zs,{size:16})})]}),d.jsx(gs,{className:"react-aria-Popover",children:d.jsx($i,{className:"react-aria-ListBox",children:T.map(M=>d.jsx(Sr,{id:M.value,className:"react-aria-ListBoxItem",textValue:M.label,children:d.jsxs("div",{className:"binding-option",children:[d.jsx("span",{className:"binding-option-label",children:M.label}),M.description&&d.jsx("span",{className:"binding-option-desc",children:M.description})]})},M.value))})})]}):d.jsxs("div",{className:"binding-empty",children:[" ",c==="dataTable"?"DataTable":c==="api"?"API":"Variable"," ."]})}),c==="route"&&d.jsx("div",{className:"binding-row",children:d.jsx("input",{className:"react-aria-Input",type:"text",defaultValue:u,onBlur:M=>{const R=M.target.value;R&&r({source:"route",name:R,path:h})},placeholder:"  (: productId)",disabled:s},`route-${n?.name||""}`)}),c&&u&&d.jsx("div",{className:"binding-row",children:d.jsx("input",{className:"react-aria-Input binding-path-input",type:"text",defaultValue:h,onBlur:x,placeholder:"  (: items[0].name)",disabled:s},`path-${n?.source||""}-${n?.name||""}`)}),c&&u&&(c==="api"||c==="dataTable")&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"binding-row binding-refresh-row",children:[d.jsxs("label",{className:"binding-row-label",children:[d.jsx(mb,{size:14}),d.jsx("span",{children:" "})]}),d.jsxs(da,{className:"react-aria-Select binding-refresh-select",selectedKey:f,onSelectionChange:E,"aria-label":" ",isDisabled:s,children:[d.jsxs(en,{className:"react-aria-Button",children:[d.jsx($s,{}),d.jsx("span",{"aria-hidden":"true",className:"select-chevron",children:d.jsx(zs,{size:16})})]}),d.jsx(gs,{className:"react-aria-Popover",children:d.jsx($i,{className:"react-aria-ListBox",children:Dje.map(M=>d.jsx(Sr,{id:M.value,className:"react-aria-ListBoxItem",textValue:M.label,children:d.jsxs("div",{className:"binding-option",children:[d.jsx("span",{className:"binding-option-label",children:M.label}),d.jsx("span",{className:"binding-option-desc",children:M.description})]})},M.value))})})]})]}),f==="interval"&&d.jsxs("div",{className:"binding-row binding-interval-row",children:[d.jsx("label",{className:"binding-row-label",children:d.jsx("span",{children:" "})}),d.jsxs("div",{className:"binding-interval-input",children:[d.jsx("input",{className:"react-aria-Input",type:"number",min:"1000",step:"1000",defaultValue:p,onBlur:w,placeholder:"5000",disabled:s},`interval-${n?.source||""}-${n?.name||""}`),d.jsx("span",{className:"binding-interval-unit",children:"ms"})]})]})]})]})})});function Pje(){const{projectId:t}=Fb(),e=_s(o=>o.activeTheme),n=_s(o=>o.tokens),r=o=>o==null?"":typeof o=="object"?JSON.stringify(o,null,2):String(o),i=C.useMemo(()=>{const o={};return n.forEach(l=>{const c=l.type||"other";o[c]||(o[c]=[]),o[c].push({name:l.name,value:r(l.value)})}),o},[n]),s=o=>({color:"Colors",spacing:"Spacing",borderRadius:"Border Radius",fontSize:"Font Size",fontWeight:"Font Weight",lineHeight:"Line Height",shadow:"Shadows",other:"Other"})[o]||o.charAt(0).toUpperCase()+o.slice(1),a=()=>{t&&window.open(`/theme/${t}`,"_blank")};return t?e?d.jsxs("div",{className:"themes-panel",children:[d.jsx(uf,{icon:d.jsx(b_,{size:16}),title:"Themes",actions:d.jsx(en,{onPress:a,className:"iconButton",children:d.jsx(w1,{size:16})})}),d.jsxs(wl,{title:"Active Theme",children:[d.jsx(Za,{label:"Theme Name",value:e.name||"",onChange:()=>{},disabled:!0,placeholder:"Theme name"}),d.jsx(Za,{label:"Version",value:e.version||"1.0",onChange:()=>{},disabled:!0,placeholder:"Version"}),d.jsx(Za,{label:"Status",value:e.status||"active",onChange:()=>{},disabled:!0,placeholder:"Status"})]}),Object.keys(i).length===0?d.jsxs(wl,{title:"Theme Tokens",children:[d.jsx(Ko,{message:"No custom tokens defined",description:"Create tokens in Theme Studio to customize your theme"}),d.jsx(en,{onPress:a,children:d.jsx(w1,{size:16})})]}):d.jsxs(d.Fragment,{children:[Object.entries(i).map(([o,l])=>d.jsx(wl,{title:s(o),children:l.map(c=>d.jsx(Za,{label:c.name,value:c.value,onChange:()=>{},disabled:!0,placeholder:"Not set"},c.name))},o)),d.jsx(wl,{title:"Advanced Editing",children:d.jsxs(en,{onPress:a,className:"iconButton",children:[d.jsx(w1,{size:16}),"Manage All Tokens in Theme Studio"]})})]})]}):d.jsxs("div",{className:"themes-panel",children:[d.jsx(uf,{icon:d.jsx(b_,{size:16}),title:"Themes",actions:d.jsx(en,{onPress:a,className:"iconButton",children:d.jsx(w1,{size:16})})}),d.jsx(Ko,{message:"No active theme",description:"Select a theme in Settings or create one in Theme Studio"})]}):d.jsx(Ko,{message:"Project ID is required"})}function ele({isActive:t}){return t?d.jsx(Pje,{}):null}const h9=Jl(t=>({messages:[],isStreaming:!1,currentContext:null,addUserMessage:e=>{const n={id:crypto.randomUUID(),role:"user",content:e,status:"complete",timestamp:Date.now()};t(r=>({messages:[...r.messages,n]}))},addAssistantMessage:(e,n)=>{const r={id:crypto.randomUUID(),role:"assistant",content:e,status:"complete",timestamp:Date.now(),metadata:n?{componentIntent:n}:void 0};t(i=>({messages:[...i.messages,r],isStreaming:!1}))},updateLastMessage:e=>{t(n=>{const r=[...n.messages],i=r[r.length-1];return i&&i.role==="assistant"&&(i.content=e,i.status="streaming"),{messages:r}})},setStreamingStatus:e=>{t({isStreaming:e}),e||t(n=>{const r=[...n.messages],i=r[r.length-1];return i&&i.role==="assistant"&&(i.status="complete"),{messages:r}})},updateContext:e=>{t({currentContext:e})},clearConversation:()=>{t({messages:[],isStreaming:!1})}}));function kje(){throw new Error("Groq API   . .env  VITE_GROQ_API_KEY .")}class Nje{parse(e,n){const r=e.toLowerCase(),i=[this.parseButtonCreation,this.parseTableCreation,this.parseFormCreation,this.parseSelectCreation,this.parseStyleChange,this.parseLayoutChange,this.parseColorChange,this.parseDeleteAction];for(const s of i){const a=s.call(this,r,e,n);if(a)return a}return null}parseButtonCreation(e,n){const r=["","button",""," "],i=["","","","create","add"],s=r.some(o=>e.includes(o)),a=i.some(o=>e.includes(o));return s&&a?{action:"create",componentType:"Button",props:{children:this.extractText(n,["","button"])||""},styles:this.extractStyles(e),description:"  ."}:null}parseTableCreation(e){if(["","table","",""].some(i=>e.includes(i))){const i=this.guessDataEndpoint(e);return{action:"create",componentType:"Table",dataBinding:i?{baseUrl:"MOCK_DATA",endpoint:i}:void 0,description:"  ."}}return null}parseFormCreation(e){return["","form","",""].some(i=>e.includes(i))?{action:"create",componentType:"Form",description:"  ."}:null}parseSelectCreation(e){if(["","select","","dropdown"].some(i=>e.includes(i))){const i=this.guessDataEndpoint(e);return{action:"create",componentType:"Select",dataBinding:i?{baseUrl:"MOCK_DATA",endpoint:i}:void 0,description:"Select  ."}}return null}parseStyleChange(e,n,r){const i=["","color","","size",""],s=["","","","change"],a=i.some(l=>e.includes(l)),o=s.some(l=>e.includes(l));return a&&o&&r?.selectedElementId?{action:"style",targetElementId:r.selectedElementId,styles:this.extractStyles(e),description:"   ."}:null}parseLayoutChange(e,n,r){if(["","align","layout",""].some(a=>e.includes(a))&&r?.selectedElementId){const a={};if(e.includes("")||e.includes("left")?(a.justifyContent="flex-start",a.textAlign="left"):e.includes("")||e.includes("right")?(a.justifyContent="flex-end",a.textAlign="right"):(e.includes("")||e.includes("")||e.includes("center"))&&(a.justifyContent="center",a.textAlign="center"),Object.keys(a).length>0)return{action:"style",targetElementId:r.selectedElementId,styles:a,description:"   ."}}return null}parseColorChange(e,n,r){const i=this.extractColor(e);return i&&r?.selectedElementId?{action:"style",targetElementId:r.selectedElementId,styles:{backgroundColor:i},description:` ${i} .`}:null}parseDeleteAction(e,n,r){return["","","","delete","remove"].some(a=>e.includes(a))&&r?.selectedElementId?{action:"delete",targetElementId:r.selectedElementId,description:"  ."}:null}extractText(e,n){for(const r of n){const i=e.toLowerCase().indexOf(r);if(i!==-1){const s=e.slice(i+r.length).trim(),a=s.match(/["'](.+?)["']/);if(a)return a[1];const o=s.split(/\s+/).slice(0,3).join(" ");if(o)return o}}return null}extractColor(e){const n={:"red",:"red",:"blue",:"blue",:"green",:"green",:"yellow",:"yellow",:"black",:"black",:"white",:"white",:"gray",red:"red",blue:"blue",green:"green",yellow:"yellow",black:"black",white:"white",gray:"gray"};for(const[r,i]of Object.entries(n))if(e.includes(r))return i;return null}extractStyles(e){const n={},r=this.extractColor(e);return r&&(n.backgroundColor=r),n}guessDataEndpoint(e){const n={:"/countries",:"/countries",country:"/countries",countries:"/countries",:"/cities",city:"/cities",cities:"/cities",:"/products",product:"/products",products:"/products",:"/status",status:"/status",:"/users",:"/users",user:"/users",users:"/users",:"/departments",department:"/departments",departments:"/departments",:"/languages",language:"/languages",languages:"/languages",:"/currencies",currency:"/currencies",currencies:"/currencies"};for(const[r,i]of Object.entries(n))if(e.includes(r))return i;return null}}const Lje=new Nje;function Fje({message:t}){const{role:e,content:n,status:r,timestamp:i}=t,s=o=>new Date(o).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),a=()=>e==="user"?"U":e==="assistant"?"AI":"?";return d.jsxs("div",{className:"chat-message","data-role":e,"data-status":r,children:[d.jsx("div",{className:"avatar",children:a()}),d.jsxs("div",{className:"content",children:[d.jsx("div",{className:"bubble",children:n}),d.jsx("div",{className:"timestamp",children:s(i)})]})]})}function jje({onSend:t,disabled:e=!1,placeholder:n=" ... (Shift+Enter )"}){const[r,i]=C.useState(""),s=C.useRef(null),a=()=>{const c=r.trim();c&&!e&&(t(c),i(""),s.current&&(s.current.style.height="auto"))},o=c=>{c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),a())},l=c=>{i(c.target.value);const u=c.target;u.style.height="auto",u.style.height=`${Math.min(u.scrollHeight,120)}px`};return d.jsxs("div",{className:"chat-input",children:[d.jsx("textarea",{ref:s,className:"textarea",value:r,onChange:l,onKeyDown:o,placeholder:n,disabled:e,rows:1}),d.jsx(Xn,{onPress:a,isDisabled:e||!r.trim(),type:"button",variant:"primary",size:"sm",children:""})]})}function Oje({messages:t,onSendMessage:e,isStreaming:n=!1,suggestions:r=["  ","   Select ","    ","    "]}){const i=C.useRef(null);C.useEffect(()=>{i.current?.scrollIntoView({behavior:"smooth"})},[t]);const s=a=>{e(a)};return d.jsxs("div",{className:"chatPanel",children:[d.jsx("div",{className:"chat-content messages",children:t.length===0?d.jsxs("div",{className:"chat-content-empty",children:[d.jsx(tAe,{className:"chat-content-empty-icon"}),d.jsx("div",{className:"chat-content-empty-title",children:" "}),d.jsx("div",{className:"chat-content-empty-description",children:"     "}),d.jsx("div",{className:"chat-content-suggestions",children:r.map((a,o)=>d.jsx("button",{className:"chat-content-suggestion",onClick:()=>s(a),type:"button",children:a},o))})]}):d.jsxs(d.Fragment,{children:[t.map(a=>d.jsx(Fje,{message:a},a.id)),d.jsx("div",{ref:i})]})}),d.jsx(jje,{onSend:e,disabled:n})]})}function zje(){const{messages:t,isStreaming:e,currentContext:n,addUserMessage:r,addAssistantMessage:i,updateLastMessage:s,setStreamingStatus:a,updateContext:o,clearConversation:l}=h9(),c=je(E=>E.elements),u=je(E=>E.selectedElementId),h=je(E=>E.currentPageId),f=je(E=>E.addElement),p=je(E=>E.updateElementProps),m=je(E=>E.removeElement),v=C.useMemo(()=>{try{return kje()}catch{return null}},[]);C.useEffect(()=>{const E={currentPageId:h||"default",selectedElementId:u||void 0,elements:c.map(w=>({id:w.id,tag:w.tag,props:w.props,parent_id:w.parent_id??null})),recentChanges:[]};o(E)},[c,u,h,o]);const A=C.useCallback(async E=>{try{switch(E.action){case"create":{if(!E.componentType)return;let w=null;if(u)w=u;else{const D=c.find(T=>T.tag==="body");D&&(w=D.id)}const B={id:crypto.randomUUID(),tag:E.componentType,props:E.props||{},parent_id:w,page_id:h||"default",order_num:c.length,dataBinding:void 0};E.styles&&Object.keys(E.styles).length>0&&(B.props={...B.props,style:E.styles}),E.dataBinding&&(B.dataBinding={type:"collection",source:"api",config:{baseUrl:E.dataBinding.baseUrl,endpoint:E.dataBinding.endpoint,params:E.dataBinding.params||{},dataMapping:{idField:"id",labelField:"name"}}}),await f(B);break}case"modify":case"style":{if(!E.targetElementId)return;const w=E.targetElementId==="current"?u:E.targetElementId;if(!w)return;const B={};E.props&&Object.assign(B,E.props),E.styles&&(B.style={...c.find(D=>D.id===w)?.props.style||{},...E.styles}),await p(w,B);break}case"delete":{if(!E.targetElementId)return;const w=E.targetElementId==="current"?u:E.targetElementId;if(!w)return;await m(w);break}case"query":break;default:}}catch(w){throw w}},[h,c,u,f,p,m]),x=C.useCallback(async E=>{if(n){r(E);try{if(v){a(!0),i("");let w="";try{for await(const D of v.chatStream(E,n))w+=D,s(w);a(!1);const B=v.parseIntent(w);if(B){await A(B);const D=h9.getState().messages,T=D[D.length-1];T&&(T.metadata={componentIntent:B})}}catch(B){throw a(!1),B}}else throw new Error("Groq service not available")}catch{const B=Lje.parse(E,n);if(B){const D=B.description||" .";i(D,B),await A(B)}else i(".   .  .")}}},[n,r,i,s,a,A,v]);return d.jsxs("div",{className:"ai-panel",children:[d.jsx(uf,{icon:d.jsx(Zq,{size:16}),title:"AI Assistant",actions:t.length>0&&d.jsx("button",{className:"iconButton",onClick:l,type:"button","aria-label":"Clear conversation",title:" ",children:d.jsx(pu,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})})}),d.jsx(Oje,{messages:t,onSendMessage:x,isStreaming:e})]})}function tle({isActive:t}){return t?d.jsx(zje,{}):null}class D1{static instance;validationErrors=[];statusMessage="";metrics={saveOperations:0,averageSaveTime:0,skipCounts:{preview:0,validation:0}};constructor(){}static getInstance(){return D1.instance||(D1.instance=new D1),D1.instance}getValidationErrors(){return this.validationErrors}clearValidationErrors(){this.validationErrors=[]}getStatusMessage(){return this.statusMessage}getPerformanceMetrics(){return this.metrics}validateSerializable(e){const n={};for(const[r,i]of Object.entries(e))try{JSON.stringify(i),n[r]=i}catch{this.validationErrors.push({elementId:"unknown",field:r,message:"  .",timestamp:new Date}),this.metrics.skipCounts.validation++,this.statusMessage=`     - : ${r}`}return n}async saveToIndexedDB(e){const{table:n,id:r,data:i}=e;try{await(await On())[n].update(r,i),this.statusMessage=` [IndexedDB] ${n}  : ${r}`}catch(s){throw this.statusMessage=` [IndexedDB]  : ${s instanceof Error?s.message:"   "}`,console.warn(` [IndexedDB] ${n}   :`,s),s}}async savePropertyChange(e,n={}){const r=performance.now();if(n.source==="preview"&&!n.allowPreviewSaves){this.metrics.skipCounts.preview++;return}if(n.validateSerialization)try{this.validateSerializable(e.data)}catch(o){this.validationErrors.push({elementId:e.id,field:Object.keys(e.data)[0]||"unknown",message:o instanceof Error?o.message:"    ",timestamp:new Date});return}const{isRealtimeMode:i,addPendingChange:s}=t6();if(i)await this.saveToIndexedDB(e);else{const o=`${e.table}:${e.id}`;s(o,e.data)}const a=performance.now();this.metrics.saveOperations++,this.metrics.averageSaveTime=(this.metrics.averageSaveTime*(this.metrics.saveOperations-1)+(a-r))/this.metrics.saveOperations}async saveAllPendingChanges(){const{getPendingChanges:e,clearPendingChanges:n}=t6(),r=e();if(r.size===0){this.statusMessage="   .";return}this.statusMessage=` ${r.size}    ...`;const i=[];r.forEach((s,a)=>{const[o,l]=a.split(":");if(!o||!l){this.statusMessage=`   : ${a}`;return}i.push(this.syncToCloud({table:o,id:l,data:s}))});try{await Promise.all(i),n(),this.statusMessage=` ${r.size}    `}catch(s){throw this.statusMessage=`   : ${s instanceof Error?s.message:"   "}`,s}}async syncToCloud(e){const{table:n,id:r,data:i}=e,{error:s}=await ss.from(n).update(i).eq("id",r);if(s)throw this.statusMessage=`   : ${s.message}`,s}resetMetrics(){this.metrics={saveOperations:0,averageSaveTime:0,skipCounts:{preview:0,validation:0}},this.statusMessage=" SaveService   ."}getDetailedReport(){const e=this.metrics.skipCounts.preview+this.metrics.skipCounts.validation,n=this.metrics.saveOperations>0?((this.metrics.saveOperations-this.validationErrors.length)/this.metrics.saveOperations*100).toFixed(2):"100.00";return{metrics:this.metrics,validationErrors:this.validationErrors,summary:` : ${this.metrics.saveOperations},  : ${this.metrics.averageSaveTime.toFixed(2)}ms, : ${e}, : ${n}%`}}}const Hx=D1.getInstance();typeof window<"u"&&(window.saveServiceUtils={getReport:()=>Hx.getDetailedReport(),getMetrics:()=>Hx.getPerformanceMetrics(),getValidationErrors:()=>Hx.getValidationErrors(),resetMetrics:()=>Hx.resetMetrics(),clearValidationErrors:()=>Hx.clearValidationErrors()});function pj(t){const{projectId:e,enableRealtime:n=!0}=t,r=_s(m=>m.themes),i=_s(m=>m.loading),s=_s(m=>m.error),a=_s(m=>m.setProjectId),o=_s(m=>m.loadThemes),l=_s(m=>m.createTheme),c=_s(m=>m.updateTheme),u=_s(m=>m.deleteTheme),h=_s(m=>m.duplicateTheme),f=_s(m=>m.activateTheme),p=_s(m=>m.subscribeToThemes);return C.useEffect(()=>{a(e),o(e)},[e]),C.useEffect(()=>{if(!n)return;const m=p();return()=>{m&&m()}},[n]),{themes:r,loading:i,error:s,refetch:async()=>{await o(e)},createTheme:(m,v,A)=>l(m,v,A,e),updateTheme:c,deleteTheme:m=>u(m,e),duplicateTheme:(m,v,A)=>h(m,v,A,e),activateTheme:m=>f(m,e)}}function $je(){throw new Error("Groq API   . .env  VITE_GROQ_API_KEY .")}const f9="https://api.figma.com/v1";class Qje{accessToken;constructor(e){this.accessToken=e}async getFile(e){const n=await fetch(`${f9}/files/${e}`,{headers:{"X-Figma-Token":this.accessToken}});if(!n.ok)throw new Error(`Figma API : ${n.status} ${n.statusText}`);return n.json()}async getStyles(e){const n=await this.getFile(e),r=[],i=[],s=[];return n.styles&&Object.values(n.styles).forEach(a=>{a.styleType==="FILL"?r.push(a):a.styleType==="TEXT"?i.push(a):a.styleType==="EFFECT"&&s.push(a)}),{colors:r,textStyles:i,effects:s}}async getVariables(e){const n=await fetch(`${f9}/files/${e}/variables/local`,{headers:{"X-Figma-Token":this.accessToken}});if(!n.ok)throw new Error(`Figma Variables API : ${n.status} ${n.statusText}`);return(await n.json()).meta?.variables||[]}async importStyles(e){const n={success:!0,imported:{colors:0,textStyles:0,effects:0,variables:0,total:0},skipped:0,errors:[],tokens:[]};try{const r=await is.getResolvedTokens(e.themeId);if(e.importColors!==!1){const{colors:i}=await this.getStyles(e.fileKey),s=await this.importColorStyles(i,e,r,n.errors);n.tokens.push(...s),n.imported.colors=s.length}if(e.importTextStyles!==!1){const{textStyles:i}=await this.getStyles(e.fileKey),s=await this.importTextStyles(i,e,r,n.errors);n.tokens.push(...s),n.imported.textStyles=s.length}if(e.importEffects!==!1){const{effects:i}=await this.getStyles(e.fileKey),s=await this.importEffectStyles(i,e,r,n.errors);n.tokens.push(...s),n.imported.effects=s.length}if(e.importVariables!==!1){const i=await this.getVariables(e.fileKey),s=await this.importVariables(i,e,r,n.errors);n.tokens.push(...s),n.imported.variables=s.length}n.imported.total=n.tokens.length,n.tokens.length>0&&await is.bulkUpsertTokens(n.tokens),n.success=n.errors.length===0}catch(r){n.success=!1,n.errors.push({styleName:"ALL",styleType:"color",reason:" Import ",details:r instanceof Error?r.message:"   "})}return n}async importColorStyles(e,n,r,i){const s=[];for(const a of e)try{const o=this.convertFigmaNameToTokenName(a.name);if(r.find(c=>c.name===o)){if(n.conflictResolution==="skip")continue;if(n.conflictResolution==="rename"){const c=`${o}.figma`;s.push(this.createColorToken(n,a,c));continue}}s.push(this.createColorToken(n,a,o))}catch(o){i.push({styleName:a.name,styleType:"color",reason:"  ",details:o instanceof Error?o.message:"   "})}return s}createColorToken(e,n,r){let i;if(n.color){const s={r:Math.round(n.color.r*255),g:Math.round(n.color.g*255),b:Math.round(n.color.b*255),a:n.color.a};i=u6(s)}else i={h:0,s:0,l:50,a:1};return{project_id:e.projectId,theme_id:e.themeId,name:r,type:"color",value:i,scope:"raw",css_variable:`--${r.replace(/\./g,"-")}`}}async importTextStyles(e,n,r,i){const s=[];for(const a of e)try{const o=this.convertFigmaNameToTokenName(a.name);if(r.find(c=>c.name===o)&&n.conflictResolution==="skip")continue;s.push({project_id:n.projectId,theme_id:n.themeId,name:`${o}.fontFamily`,type:"typography",value:a.fontFamily,scope:"raw",css_variable:`--${o.replace(/\./g,"-")}-font`},{project_id:n.projectId,theme_id:n.themeId,name:`${o}.fontSize`,type:"typography",value:`${a.fontSize}px`,scope:"raw",css_variable:`--${o.replace(/\./g,"-")}-size`},{project_id:n.projectId,theme_id:n.themeId,name:`${o}.fontWeight`,type:"typography",value:a.fontWeight,scope:"raw",css_variable:`--${o.replace(/\./g,"-")}-weight`})}catch(o){i.push({styleName:a.name,styleType:"text",reason:"   ",details:o instanceof Error?o.message:"   "})}return s}async importEffectStyles(e,n,r,i){const s=[];for(const a of e)try{const o=this.convertFigmaNameToTokenName(a.name),l=a.effects.find(c=>c.type==="DROP_SHADOW");if(!l)continue;s.push({project_id:n.projectId,theme_id:n.themeId,name:o,type:"shadow",value:{offsetX:`${l.offset?.x||0}px`,offsetY:`${l.offset?.y||0}px`,blur:`${l.radius}px`,spread:`${l.spread||0}px`,color:l.color?`rgba(${Math.round(l.color.r*255)}, ${Math.round(l.color.g*255)}, ${Math.round(l.color.b*255)}, ${l.color.a})`:"rgba(0, 0, 0, 0.1)"},scope:"raw",css_variable:`--${o.replace(/\./g,"-")}`})}catch(o){i.push({styleName:a.name,styleType:"effect",reason:"  ",details:o instanceof Error?o.message:"   "})}return s}async importVariables(e,n,r,i){const s=[];for(const a of e)try{const o=this.convertFigmaNameToTokenName(a.name),l=Object.keys(a.valuesByMode)[0],c=a.valuesByMode[l];if(c.type==="COLOR"&&c.color){const u={r:Math.round(c.color.r*255),g:Math.round(c.color.g*255),b:Math.round(c.color.b*255),a:c.color.a},h=u6(u);s.push({project_id:n.projectId,theme_id:n.themeId,name:o,type:"color",value:h,scope:"raw",css_variable:`--${o.replace(/\./g,"-")}`})}else c.type==="FLOAT"&&s.push({project_id:n.projectId,theme_id:n.themeId,name:o,type:"spacing",value:`${c.value}px`,scope:"raw",css_variable:`--${o.replace(/\./g,"-")}`})}catch(o){i.push({styleName:a.name,styleType:"variable",reason:"Variable  ",details:o instanceof Error?o.message:"   "})}return s}convertFigmaNameToTokenName(e){return e.toLowerCase().replace(/\//g,".").replace(/\s+/g,"-").replace(/[^a-z0-9.-]/g,"").replace(/^\.+|\.+$/g,"")}async exportStyles(e){return{success:!1,exported:{colors:0,textStyles:0,effects:0,variables:0,total:0},errors:[{tokenName:"ALL",tokenType:"all",reason:"Export Figma Plugin   ",details:"Figma REST API    . Figma Plugin   ."}],figmaFileUrl:`https://www.figma.com/file/${e.fileKey}`}}}function Uje(t){const e=t||void 0;if(!e)throw new Error("Figma Access Token  . .env  VITE_FIGMA_ACCESS_TOKEN .");return new Qje(e)}class p9{static async exportTokens(e,n){switch(n.format){case"css":return this.exportToCSS(e,n);case"tailwind":return this.exportToTailwind(e,n);case"scss":return this.exportToSCSS(e,n);case"json":return this.exportToJSON(e,n);default:throw new Error(`Unsupported export format: ${n.format}`)}}static exportToCSS(e,n){const r=[];if(n.includeComments!==!1&&(r.push("/**"),r.push(" * Design Tokens - CSS Variables"),r.push(` * Generated: ${new Date().toISOString()}`),r.push(` * Total tokens: ${e.length}`),r.push(" */"),r.push("")),r.push(":root {"),n.groupByCategory){const s=this.groupTokensByCategory(e);Object.entries(s).forEach(([a,o])=>{n.includeComments!==!1&&r.push(`  /* ${a} */`),o.forEach(l=>{const c=this.tokenValueToCSS(l);r.push(`  ${l.css_variable||`--${l.name.replace(/\./g,"-")}`}: ${c};`)}),r.push("")})}else e.forEach(s=>{const a=this.tokenValueToCSS(s);r.push(`  ${s.css_variable||`--${s.name.replace(/\./g,"-")}`}: ${a};`)});return r.push("}"),{format:"css",content:n.minify?r.join("").replace(/\s+/g," "):r.join(`
`),filename:"tokens.css",mimeType:"text/css"}}static exportToTailwind(e,n){const r={theme:{extend:{}}},i=this.groupTokensByCategory(e);Object.entries(i).forEach(([o,l])=>{const c=this.getTailwindSection(o);c&&(r.theme.extend[c]={},l.forEach(u=>{const h=this.extractTailwindKey(u.name),f=this.tokenValueToTailwind(u);h&&f&&(r.theme.extend[c][h]=f)}))});const s=n.minify?JSON.stringify(r):JSON.stringify(r,null,2),a=[];return n.includeComments!==!1&&(a.push("/**"),a.push(" * Design Tokens - Tailwind Config"),a.push(` * Generated: ${new Date().toISOString()}`),a.push(" */"),a.push("")),a.push("module.exports = "+s),{format:"tailwind",content:a.join(`
`),filename:"tailwind.config.js",mimeType:"application/javascript"}}static exportToSCSS(e,n){const r=[];if(n.includeComments!==!1&&(r.push("//"),r.push("// Design Tokens - SCSS Variables"),r.push(`// Generated: ${new Date().toISOString()}`),r.push(`// Total tokens: ${e.length}`),r.push("//"),r.push("")),n.groupByCategory){const s=this.groupTokensByCategory(e);Object.entries(s).forEach(([a,o])=>{n.includeComments!==!1&&r.push(`// ${a}`),o.forEach(l=>{const c=this.tokenValueToSCSS(l);r.push(`$${l.name.replace(/\./g,"-")}: ${c};`)}),r.push("")})}else e.forEach(s=>{const a=this.tokenValueToSCSS(s);r.push(`$${s.name.replace(/\./g,"-")}: ${a};`)});return{format:"scss",content:n.minify?r.join("").replace(/\s+/g," "):r.join(`
`),filename:"tokens.scss",mimeType:"text/x-scss"}}static exportToJSON(e,n){const r=e.map(s=>({name:s.name,type:s.type,value:s.value,scope:s.scope,css_variable:s.css_variable}));return{format:"json",content:n.minify?JSON.stringify(r):JSON.stringify(r,null,2),filename:"tokens.json",mimeType:"application/json"}}static tokenValueToCSS(e){switch(e.type){case"color":return e.value&&typeof e.value=="object"?aT(e.value):String(e.value);case"spacing":case"typography":return String(e.value);case"shadow":if(Voe(e.value)){const n=e.value;return`${n.offsetX} ${n.offsetY} ${n.blur} ${n.spread} ${n.color}`}return String(e.value);default:return JSON.stringify(e.value)}}static tokenValueToTailwind(e){switch(e.type){case"color":return e.value&&typeof e.value=="object"?D5e(e.value):String(e.value);default:return String(e.value)}}static tokenValueToSCSS(e){return this.tokenValueToCSS(e)}static groupTokensByCategory(e){return e.reduce((n,r)=>{const i=r.name.split(".")[0]||"other";return n[i]||(n[i]=[]),n[i].push(r),n},{})}static getTailwindSection(e){return{color:"colors",spacing:"spacing",typography:"fontSize",shadow:"boxShadow",radius:"borderRadius"}[e]||null}static extractTailwindKey(e){return e.split(".").slice(1).join("-")}static downloadFile(e){const n=new Blob([e.content],{type:e.mimeType}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=e.filename,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}}class YB{static DEFAULT_OPTIONS={inversionStrength:1,saturationAdjustment:-10,lightnessOffset:0,adjustTextColors:!0,ensureContrast:!0};static async convertToDarkMode(e,n={}){const r={...this.DEFAULT_OPTIONS,...n};return e.map(i=>{if(i.type==="color"&&i.value&&typeof i.value=="object"){const s=i.value,a=this.convertColorToDark(s,i,r);return{...i,value:a}}return i})}static convertColorToDark(e,n,r){const{h:i,s,l:a,a:o=1}=e,l=n.name.toLowerCase(),c=l.includes("background")||l.includes("bg"),u=l.includes("text")||l.includes("foreground"),h=l.includes("border"),f=l.includes("primary");let p=a,m=s;return c?(p=this.invertLightness(a,r.inversionStrength||1),m=Math.max(0,s+(r.saturationAdjustment||-10)-5)):u&&r.adjustTextColors?(p=this.invertLightness(a,r.inversionStrength||1),m=Math.max(0,s+(r.saturationAdjustment||-10)*.5)):h?(p=Math.max(20,Math.min(80,100-a)),m=Math.max(0,s+(r.saturationAdjustment||-10))):f?(p=this.adjustPrimaryLightness(a),m=s):(p=this.invertLightness(a,r.inversionStrength||1),m=Math.max(0,s+(r.saturationAdjustment||-10))),p=Math.max(0,Math.min(100,p+(r.lightnessOffset||0))),r.ensureContrast&&(p=this.ensureContrast(p,c,u)),{h:i,s:Math.round(m),l:Math.round(p),a:o}}static invertLightness(e,n){const r=100-e;return e+(r-e)*n}static adjustPrimaryLightness(e){return e<50?e+20:e>70?e-10:e}static ensureContrast(e,n,r){return n&&e>30?Math.min(30,e):r&&e<70?Math.max(70,e):e}static async generateDarkTheme(e,n,r,i={}){const a=(await this.convertToDarkMode(n,i)).map(o=>({...o,name:o.name.includes("-dark")?o.name:`${o.name}-dark`,css_variable:o.css_variable?o.css_variable.replace("--","--dark-"):void 0}));return{darkTokens:a,metadata:{sourceThemeId:e,darkThemeId:`${e}-dark`,generatedAt:new Date().toISOString(),tokenCount:a.length,options:i}}}static PRESETS={default:{inversionStrength:1,saturationAdjustment:-10,lightnessOffset:0,adjustTextColors:!0,ensureContrast:!0},oled:{inversionStrength:1,saturationAdjustment:-15,lightnessOffset:-10,adjustTextColors:!0,ensureContrast:!0},soft:{inversionStrength:.8,saturationAdjustment:-5,lightnessOffset:5,adjustTextColors:!0,ensureContrast:!0},highContrast:{inversionStrength:1,saturationAdjustment:-20,lightnessOffset:0,adjustTextColors:!0,ensureContrast:!0}}}class g9{static async exportToFigmaPlugin(e,n){const r={};return n.includeFiles.manifest!==!1&&(r["manifest.json"]=this.generateManifest(n)),n.includeFiles.code!==!1&&(r["code.ts"]=this.generateCode(e,n)),n.includeFiles.ui!==!1&&(r["ui.html"]=this.generateUI(e,n)),{files:r,metadata:{pluginName:n.pluginName,tokenCount:e.length,generatedAt:new Date().toISOString()}}}static generateManifest(e){const n={name:e.pluginName,id:this.generatePluginId(e.pluginName),api:"1.0.0",main:"code.js",ui:"ui.html",editorType:["figma"],capabilities:["write"],description:e.description||"Import design tokens from XStudio"};return JSON.stringify(n,null,2)}static generateCode(e,n){const r=e.filter(o=>o.type==="color"),i=e.filter(o=>o.type==="typography"),s=e.filter(o=>o.type==="shadow"),a=[];return a.push("/**"),a.push(` * ${n.pluginName}`),a.push(` * Generated by XStudio - ${new Date().toISOString()}`),a.push(" */"),a.push(""),a.push("figma.showUI(__html__, { width: 400, height: 600 });"),a.push(""),a.push("figma.ui.onmessage = async (msg) => {"),a.push('  if (msg.type === "import-tokens") {'),a.push("    try {"),a.push("      let imported = 0;"),a.push(""),n.exportTargets.colors&&r.length>0&&(a.push("      // Import Color Styles"),a.push('      const colorTokens = msg.tokens.filter((t: { type: string }) => t.type === "color");'),a.push("      for (const token of colorTokens) {"),a.push("        const style = figma.createPaintStyle();"),a.push("        style.name = token.name;"),a.push("        style.paints = [{"),a.push('          type: "SOLID",'),a.push("          color: {"),a.push("            r: token.value.r / 255,"),a.push("            g: token.value.g / 255,"),a.push("            b: token.value.b / 255,"),a.push("          },"),a.push("          opacity: token.value.a || 1,"),a.push("        }];"),a.push("        imported++;"),a.push("      }"),a.push("")),n.exportTargets.textStyles&&i.length>0&&(a.push("      // Import Text Styles"),a.push('      const textTokens = msg.tokens.filter((t: { type: string }) => t.type === "typography");'),a.push("      for (const token of textTokens) {"),a.push("        const style = figma.createTextStyle();"),a.push("        style.name = token.name;"),a.push("        if (token.value.fontSize) {"),a.push("          style.fontSize = parseFloat(token.value.fontSize);"),a.push("        }"),a.push("        if (token.value.fontWeight) {"),a.push("          style.fontName = {"),a.push('            family: token.value.fontFamily || "Inter",'),a.push("            style: token.value.fontWeight,"),a.push("          };"),a.push("        }"),a.push("        if (token.value.lineHeight) {"),a.push('          style.lineHeight = { value: parseFloat(token.value.lineHeight), unit: "PIXELS" };'),a.push("        }"),a.push("        imported++;"),a.push("      }"),a.push("")),n.exportTargets.effects&&s.length>0&&(a.push("      // Import Effect Styles (Shadows)"),a.push('      const shadowTokens = msg.tokens.filter((t: { type: string }) => t.type === "shadow");'),a.push("      for (const token of shadowTokens) {"),a.push("        const style = figma.createEffectStyle();"),a.push("        style.name = token.name;"),a.push("        style.effects = [{"),a.push('          type: "DROP_SHADOW",'),a.push("          color: token.value.color,"),a.push("          offset: { x: token.value.offsetX || 0, y: token.value.offsetY || 0 },"),a.push("          radius: token.value.blur || 0,"),a.push("          spread: token.value.spread || 0,"),a.push("          visible: true,"),a.push('          blendMode: "NORMAL",'),a.push("        }];"),a.push("        imported++;"),a.push("      }"),a.push("")),a.push("      figma.ui.postMessage({"),a.push('        type: "import-complete",'),a.push("        imported,"),a.push("      });"),a.push("    } catch (error) {"),a.push("      figma.ui.postMessage({"),a.push('        type: "import-error",'),a.push("        message: error.message,"),a.push("      });"),a.push("    }"),a.push("  }"),a.push(""),a.push('  if (msg.type === "close-plugin") {'),a.push("    figma.closePlugin();"),a.push("  }"),a.push("};"),a.join(`
`)}static generateUI(e,n){return`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>${n.pluginName}</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Inter, sans-serif;
      font-size: 14px;
      padding: 16px;
      background: #ffffff;
    }

    h1 {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 12px;
    }

    p {
      color: #666;
      margin-bottom: 20px;
      line-height: 1.5;
    }

    .token-list {
      max-height: 400px;
      overflow-y: auto;
      margin-bottom: 20px;
      padding: 12px;
      background: #f5f5f5;
      border-radius: 8px;
    }

    .token-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px;
      background: white;
      border-radius: 4px;
      margin-bottom: 4px;
    }

    .token-color {
      width: 24px;
      height: 24px;
      border-radius: 4px;
      border: 1px solid #ddd;
    }

    .token-name {
      font-family: monospace;
      font-size: 12px;
    }

    .button-group {
      display: flex;
      gap: 8px;
    }

    button {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 200ms;
    }

    .primary-btn {
      background: #0d99ff;
      color: white;
    }

    .primary-btn:hover {
      background: #0b7fdd;
    }

    .secondary-btn {
      background: #f0f0f0;
      color: #333;
    }

    .secondary-btn:hover {
      background: #e0e0e0;
    }

    .status {
      margin-top: 12px;
      padding: 12px;
      border-radius: 6px;
      font-size: 13px;
    }

    .success {
      background: #e7f7ed;
      color: #0f7b3f;
    }

    .error {
      background: #ffe7e7;
      color: #c92a2a;
    }
  </style>
</head>
<body>
  <h1>${n.pluginName}</h1>
  <p>${n.description||"Import design tokens from XStudio to Figma"}</p>

  <div id="token-list" class="token-list">
    <p>Loading tokens...</p>
  </div>

  <div class="button-group">
    <button class="primary-btn" onclick="importTokens()">Import to Figma</button>
    <button class="secondary-btn" onclick="closePlugin()">Cancel</button>
  </div>

  <div id="status"></div>

  <script>
    // Token data (will be replaced by actual tokens)
    const TOKENS = ${JSON.stringify(e.map(i=>{if(i.type==="color"&&typeof i.value=="object"){const s=voe(i.value);return{...i,value:s}}return i}),null,2)};

    // Render token list
    function renderTokens() {
      const list = document.getElementById('token-list');
      list.innerHTML = TOKENS.map(token => {
        if (token.type === 'color') {
          return \`
            <div class="token-item">
              <div class="token-color" style="background: rgb(\${token.value.r}, \${token.value.g}, \${token.value.b})"></div>
              <span class="token-name">\${token.name}</span>
            </div>
          \`;
        }
        return \`
          <div class="token-item">
            <span class="token-name">\${token.name}</span>
          </div>
        \`;
      }).join('');
    }

    // Import tokens
    function importTokens() {
      parent.postMessage({
        pluginMessage: {
          type: 'import-tokens',
          tokens: TOKENS,
        }
      }, '*');
    }

    // Close plugin
    function closePlugin() {
      parent.postMessage({
        pluginMessage: { type: 'close-plugin' }
      }, '*');
    }

    // Listen for messages from plugin
    window.onmessage = (event) => {
      const msg = event.data.pluginMessage;
      const status = document.getElementById('status');

      if (msg.type === 'import-complete') {
        status.className = 'status success';
        status.textContent = \` Successfully imported \${msg.imported} styles!\`;
        setTimeout(() => {
          closePlugin();
        }, 2000);
      }

      if (msg.type === 'import-error') {
        status.className = 'status error';
        status.textContent = \` Error: \${msg.message}\`;
      }
    };

    // Initialize
    renderTokens();
  <\/script>
</body>
</html>`}static generatePluginId(e){let n=0;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return Math.abs(n).toString()}static async downloadPluginFiles(e){for(const[n,r]of Object.entries(e.files)){if(!r)continue;const i=new Blob([r],{type:n.endsWith(".html")?"text/html":"text/plain"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=n,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),await new Promise(o=>setTimeout(o,100))}}}function Ju(t){return t<0?-1:t===0?0:1}function Zw(t,e,n){return(1-n)*t+n*e}function Hje(t,e,n){return n<t?t:n>e?e:n}function dM(t,e,n){return n<t?t:n>e?e:n}function m9(t){return t=t%360,t<0&&(t=t+360),t}function Ry(t){return t=t%360,t<0&&(t=t+360),t}function p6(t,e){const n=t[0]*e[0][0]+t[1]*e[0][1]+t[2]*e[0][2],r=t[0]*e[1][0]+t[1]*e[1][1]+t[2]*e[1][2],i=t[0]*e[2][0]+t[1]*e[2][1]+t[2]*e[2][2];return[n,r,i]}const nle=[[.41233895,.35762064,.18051042],[.2126,.7152,.0722],[.01932141,.11916382,.95034478]],Gje=[[3.2413774792388685,-1.5376652402851851,-.49885366846268053],[-.9691452513005321,1.8758853451067872,.04156585616912061],[.05562093689691305,-.20395524564742123,1.0571799111220335]],rle=[95.047,100,108.883];function gj(t,e,n){return(255<<24|(t&255)<<16|(e&255)<<8|n&255)>>>0}function A9(t){const e=lb(t[0]),n=lb(t[1]),r=lb(t[2]);return gj(e,n,r)}function mj(t){return t>>16&255}function Aj(t){return t>>8&255}function yj(t){return t&255}function Vje(t,e,n){const r=Gje,i=r[0][0]*t+r[0][1]*e+r[0][2]*n,s=r[1][0]*t+r[1][1]*e+r[1][2]*n,a=r[2][0]*t+r[2][1]*e+r[2][2]*n,o=lb(i),l=lb(s),c=lb(a);return gj(o,l,c)}function Wje(t){const e=E0(mj(t)),n=E0(Aj(t)),r=E0(yj(t));return p6([e,n,r],nle)}function Kje(t){const e=E0(mj(t)),n=E0(Aj(t)),r=E0(yj(t)),i=nle,s=i[0][0]*e+i[0][1]*n+i[0][2]*r,a=i[1][0]*e+i[1][1]*n+i[1][2]*r,o=i[2][0]*e+i[2][1]*n+i[2][2]*r,l=rle,c=s/l[0],u=a/l[1],h=o/l[2],f=e_(c),p=e_(u),m=e_(h),v=116*p-16,A=500*(f-p),x=200*(p-m);return[v,A,x]}function qje(t){const e=Ey(t),n=lb(e);return gj(n,n,n)}function y9(t){const e=Wje(t)[1];return 116*e_(e/100)-16}function Ey(t){return 100*Xje((t+16)/116)}function g6(t){return e_(t/100)*116-16}function E0(t){const e=t/255;return e<=.040449936?e/12.92*100:Math.pow((e+.055)/1.055,2.4)*100}function lb(t){const e=t/100;let n=0;return e<=.0031308?n=e*12.92:n=1.055*Math.pow(e,1/2.4)-.055,Hje(0,255,Math.round(n*255))}function Yje(){return rle}function e_(t){const e=.008856451679035631,n=24389/27;return t>e?Math.pow(t,1/3):(n*t+16)/116}function Xje(t){const e=.008856451679035631,n=24389/27,r=t*t*t;return r>e?r:(116*t-16)/n}class $g{static make(e=Yje(),n=200/Math.PI*Ey(50)/100,r=50,i=2,s=!1){const a=e,o=a[0]*.401288+a[1]*.650173+a[2]*-.051461,l=a[0]*-.250268+a[1]*1.204414+a[2]*.045854,c=a[0]*-.002079+a[1]*.048952+a[2]*.953127,u=.8+i/10,h=u>=.9?Zw(.59,.69,(u-.9)*10):Zw(.525,.59,(u-.8)*10);let f=s?1:u*(1-1/3.6*Math.exp((-n-42)/92));f=f>1?1:f<0?0:f;const p=u,m=[f*(100/o)+1-f,f*(100/l)+1-f,f*(100/c)+1-f],v=1/(5*n+1),A=v*v*v*v,x=1-A,E=A*n+.1*x*x*Math.cbrt(5*n),w=Ey(r)/e[1],B=1.48+Math.sqrt(w),D=.725/Math.pow(w,.2),T=D,M=[Math.pow(E*m[0]*o/100,.42),Math.pow(E*m[1]*l/100,.42),Math.pow(E*m[2]*c/100,.42)],R=[400*M[0]/(M[0]+27.13),400*M[1]/(M[1]+27.13),400*M[2]/(M[2]+27.13)],k=(2*R[0]+R[1]+.05*R[2])*D;return new $g(w,k,D,T,h,p,m,E,Math.pow(E,.25),B)}constructor(e,n,r,i,s,a,o,l,c,u){this.n=e,this.aw=n,this.nbb=r,this.ncb=i,this.c=s,this.nc=a,this.rgbD=o,this.fl=l,this.fLRoot=c,this.z=u}}$g.DEFAULT=$g.make();class Ud{constructor(e,n,r,i,s,a,o,l,c){this.hue=e,this.chroma=n,this.j=r,this.q=i,this.m=s,this.s=a,this.jstar=o,this.astar=l,this.bstar=c}distance(e){const n=this.jstar-e.jstar,r=this.astar-e.astar,i=this.bstar-e.bstar,s=Math.sqrt(n*n+r*r+i*i);return 1.41*Math.pow(s,.63)}static fromInt(e){return Ud.fromIntInViewingConditions(e,$g.DEFAULT)}static fromIntInViewingConditions(e,n){const r=(e&16711680)>>16,i=(e&65280)>>8,s=e&255,a=E0(r),o=E0(i),l=E0(s),c=.41233895*a+.35762064*o+.18051042*l,u=.2126*a+.7152*o+.0722*l,h=.01932141*a+.11916382*o+.95034478*l,f=.401288*c+.650173*u-.051461*h,p=-.250268*c+1.204414*u+.045854*h,m=-.002079*c+.048952*u+.953127*h,v=n.rgbD[0]*f,A=n.rgbD[1]*p,x=n.rgbD[2]*m,E=Math.pow(n.fl*Math.abs(v)/100,.42),w=Math.pow(n.fl*Math.abs(A)/100,.42),B=Math.pow(n.fl*Math.abs(x)/100,.42),D=Ju(v)*400*E/(E+27.13),T=Ju(A)*400*w/(w+27.13),M=Ju(x)*400*B/(B+27.13),R=(11*D+-12*T+M)/11,k=(D+T-2*M)/9,L=(20*D+20*T+21*M)/20,F=(40*D+20*T+M)/20,G=Math.atan2(k,R)*180/Math.PI,V=G<0?G+360:G>=360?G-360:G,q=V*Math.PI/180,O=F*n.nbb,H=100*Math.pow(O/n.aw,n.c*n.z),K=4/n.c*Math.sqrt(H/100)*(n.aw+4)*n.fLRoot,X=V<20.14?V+360:V,re=.25*(Math.cos(X*Math.PI/180+2)+3.8),Z=5e4/13*re*n.nc*n.ncb*Math.sqrt(R*R+k*k)/(L+.305),ee=Math.pow(Z,.9)*Math.pow(1.64-Math.pow(.29,n.n),.73),te=ee*Math.sqrt(H/100),oe=te*n.fLRoot,ae=50*Math.sqrt(ee*n.c/(n.aw+4)),se=(1+100*.007)*H/(1+.007*H),fe=1/.0228*Math.log(1+.0228*oe),Ee=fe*Math.cos(q),Be=fe*Math.sin(q);return new Ud(V,te,H,K,oe,ae,se,Ee,Be)}static fromJch(e,n,r){return Ud.fromJchInViewingConditions(e,n,r,$g.DEFAULT)}static fromJchInViewingConditions(e,n,r,i){const s=4/i.c*Math.sqrt(e/100)*(i.aw+4)*i.fLRoot,a=n*i.fLRoot,o=n/Math.sqrt(e/100),l=50*Math.sqrt(o*i.c/(i.aw+4)),c=r*Math.PI/180,u=(1+100*.007)*e/(1+.007*e),h=1/.0228*Math.log(1+.0228*a),f=h*Math.cos(c),p=h*Math.sin(c);return new Ud(r,n,e,s,a,l,u,f,p)}static fromUcs(e,n,r){return Ud.fromUcsInViewingConditions(e,n,r,$g.DEFAULT)}static fromUcsInViewingConditions(e,n,r,i){const s=n,a=r,o=Math.sqrt(s*s+a*a),c=(Math.exp(o*.0228)-1)/.0228/i.fLRoot;let u=Math.atan2(a,s)*(180/Math.PI);u<0&&(u+=360);const h=e/(1-(e-100)*.007);return Ud.fromJchInViewingConditions(h,c,u,i)}toInt(){return this.viewed($g.DEFAULT)}viewed(e){const n=this.chroma===0||this.j===0?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(n/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),i=this.hue*Math.PI/180,s=.25*(Math.cos(i+2)+3.8),a=e.aw*Math.pow(this.j/100,1/e.c/e.z),o=s*(5e4/13)*e.nc*e.ncb,l=a/e.nbb,c=Math.sin(i),u=Math.cos(i),h=23*(l+.305)*r/(23*o+11*r*u+108*r*c),f=h*u,p=h*c,m=(460*l+451*f+288*p)/1403,v=(460*l-891*f-261*p)/1403,A=(460*l-220*f-6300*p)/1403,x=Math.max(0,27.13*Math.abs(m)/(400-Math.abs(m))),E=Ju(m)*(100/e.fl)*Math.pow(x,1/.42),w=Math.max(0,27.13*Math.abs(v)/(400-Math.abs(v))),B=Ju(v)*(100/e.fl)*Math.pow(w,1/.42),D=Math.max(0,27.13*Math.abs(A)/(400-Math.abs(A))),T=Ju(A)*(100/e.fl)*Math.pow(D,1/.42),M=E/e.rgbD[0],R=B/e.rgbD[1],k=T/e.rgbD[2],L=1.86206786*M-1.01125463*R+.14918677*k,F=.38752654*M+.62144744*R-.00897398*k,z=-.0158415*M-.03412294*R+1.04996444*k;return Vje(L,F,z)}static fromXyzInViewingConditions(e,n,r,i){const s=.401288*e+.650173*n-.051461*r,a=-.250268*e+1.204414*n+.045854*r,o=-.002079*e+.048952*n+.953127*r,l=i.rgbD[0]*s,c=i.rgbD[1]*a,u=i.rgbD[2]*o,h=Math.pow(i.fl*Math.abs(l)/100,.42),f=Math.pow(i.fl*Math.abs(c)/100,.42),p=Math.pow(i.fl*Math.abs(u)/100,.42),m=Ju(l)*400*h/(h+27.13),v=Ju(c)*400*f/(f+27.13),A=Ju(u)*400*p/(p+27.13),x=(11*m+-12*v+A)/11,E=(m+v-2*A)/9,w=(20*m+20*v+21*A)/20,B=(40*m+20*v+A)/20,T=Math.atan2(E,x)*180/Math.PI,M=T<0?T+360:T>=360?T-360:T,R=M*Math.PI/180,k=B*i.nbb,L=100*Math.pow(k/i.aw,i.c*i.z),F=4/i.c*Math.sqrt(L/100)*(i.aw+4)*i.fLRoot,z=M<20.14?M+360:M,G=1/4*(Math.cos(z*Math.PI/180+2)+3.8),q=5e4/13*G*i.nc*i.ncb*Math.sqrt(x*x+E*E)/(w+.305),O=Math.pow(q,.9)*Math.pow(1.64-Math.pow(.29,i.n),.73),H=O*Math.sqrt(L/100),K=H*i.fLRoot,X=50*Math.sqrt(O*i.c/(i.aw+4)),re=(1+100*.007)*L/(1+.007*L),J=Math.log(1+.0228*K)/.0228,Z=J*Math.cos(R),ee=J*Math.sin(R);return new Ud(M,H,L,F,K,X,re,Z,ee)}xyzInViewingConditions(e){const n=this.chroma===0||this.j===0?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(n/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),i=this.hue*Math.PI/180,s=.25*(Math.cos(i+2)+3.8),a=e.aw*Math.pow(this.j/100,1/e.c/e.z),o=s*(5e4/13)*e.nc*e.ncb,l=a/e.nbb,c=Math.sin(i),u=Math.cos(i),h=23*(l+.305)*r/(23*o+11*r*u+108*r*c),f=h*u,p=h*c,m=(460*l+451*f+288*p)/1403,v=(460*l-891*f-261*p)/1403,A=(460*l-220*f-6300*p)/1403,x=Math.max(0,27.13*Math.abs(m)/(400-Math.abs(m))),E=Ju(m)*(100/e.fl)*Math.pow(x,1/.42),w=Math.max(0,27.13*Math.abs(v)/(400-Math.abs(v))),B=Ju(v)*(100/e.fl)*Math.pow(w,1/.42),D=Math.max(0,27.13*Math.abs(A)/(400-Math.abs(A))),T=Ju(A)*(100/e.fl)*Math.pow(D,1/.42),M=E/e.rgbD[0],R=B/e.rgbD[1],k=T/e.rgbD[2],L=1.86206786*M-1.01125463*R+.14918677*k,F=.38752654*M+.62144744*R-.00897398*k,z=-.0158415*M-.03412294*R+1.04996444*k;return[L,F,z]}}class rr{static sanitizeRadians(e){return(e+Math.PI*8)%(Math.PI*2)}static trueDelinearized(e){const n=e/100;let r=0;return n<=.0031308?r=n*12.92:r=1.055*Math.pow(n,1/2.4)-.055,r*255}static chromaticAdaptation(e){const n=Math.pow(Math.abs(e),.42);return Ju(e)*400*n/(n+27.13)}static hueOf(e){const n=p6(e,rr.SCALED_DISCOUNT_FROM_LINRGB),r=rr.chromaticAdaptation(n[0]),i=rr.chromaticAdaptation(n[1]),s=rr.chromaticAdaptation(n[2]),a=(11*r+-12*i+s)/11,o=(r+i-2*s)/9;return Math.atan2(o,a)}static areInCyclicOrder(e,n,r){const i=rr.sanitizeRadians(n-e),s=rr.sanitizeRadians(r-e);return i<s}static intercept(e,n,r){return(n-e)/(r-e)}static lerpPoint(e,n,r){return[e[0]+(r[0]-e[0])*n,e[1]+(r[1]-e[1])*n,e[2]+(r[2]-e[2])*n]}static setCoordinate(e,n,r,i){const s=rr.intercept(e[i],n,r[i]);return rr.lerpPoint(e,s,r)}static isBounded(e){return 0<=e&&e<=100}static nthVertex(e,n){const r=rr.Y_FROM_LINRGB[0],i=rr.Y_FROM_LINRGB[1],s=rr.Y_FROM_LINRGB[2],a=n%4<=1?0:100,o=n%2===0?0:100;if(n<4){const l=a,c=o,u=(e-l*i-c*s)/r;return rr.isBounded(u)?[u,l,c]:[-1,-1,-1]}else if(n<8){const l=a,c=o,u=(e-c*r-l*s)/i;return rr.isBounded(u)?[c,u,l]:[-1,-1,-1]}else{const l=a,c=o,u=(e-l*r-c*i)/s;return rr.isBounded(u)?[l,c,u]:[-1,-1,-1]}}static bisectToSegment(e,n){let r=[-1,-1,-1],i=r,s=0,a=0,o=!1,l=!0;for(let c=0;c<12;c++){const u=rr.nthVertex(e,c);if(u[0]<0)continue;const h=rr.hueOf(u);if(!o){r=u,i=u,s=h,a=h,o=!0;continue}(l||rr.areInCyclicOrder(s,h,a))&&(l=!1,rr.areInCyclicOrder(s,n,h)?(i=u,a=h):(r=u,s=h))}return[r,i]}static midpoint(e,n){return[(e[0]+n[0])/2,(e[1]+n[1])/2,(e[2]+n[2])/2]}static criticalPlaneBelow(e){return Math.floor(e-.5)}static criticalPlaneAbove(e){return Math.ceil(e-.5)}static bisectToLimit(e,n){const r=rr.bisectToSegment(e,n);let i=r[0],s=rr.hueOf(i),a=r[1];for(let o=0;o<3;o++)if(i[o]!==a[o]){let l=-1,c=255;i[o]<a[o]?(l=rr.criticalPlaneBelow(rr.trueDelinearized(i[o])),c=rr.criticalPlaneAbove(rr.trueDelinearized(a[o]))):(l=rr.criticalPlaneAbove(rr.trueDelinearized(i[o])),c=rr.criticalPlaneBelow(rr.trueDelinearized(a[o])));for(let u=0;u<8&&!(Math.abs(c-l)<=1);u++){const h=Math.floor((l+c)/2),f=rr.CRITICAL_PLANES[h],p=rr.setCoordinate(i,f,a,o),m=rr.hueOf(p);rr.areInCyclicOrder(s,n,m)?(a=p,c=h):(i=p,s=m,l=h)}}return rr.midpoint(i,a)}static inverseChromaticAdaptation(e){const n=Math.abs(e),r=Math.max(0,27.13*n/(400-n));return Ju(e)*Math.pow(r,1/.42)}static findResultByJ(e,n,r){let i=Math.sqrt(r)*11;const s=$g.DEFAULT,a=1/Math.pow(1.64-Math.pow(.29,s.n),.73),l=.25*(Math.cos(e+2)+3.8)*(5e4/13)*s.nc*s.ncb,c=Math.sin(e),u=Math.cos(e);for(let h=0;h<5;h++){const f=i/100,p=n===0||i===0?0:n/Math.sqrt(f),m=Math.pow(p*a,1/.9),A=s.aw*Math.pow(f,1/s.c/s.z)/s.nbb,x=23*(A+.305)*m/(23*l+11*m*u+108*m*c),E=x*u,w=x*c,B=(460*A+451*E+288*w)/1403,D=(460*A-891*E-261*w)/1403,T=(460*A-220*E-6300*w)/1403,M=rr.inverseChromaticAdaptation(B),R=rr.inverseChromaticAdaptation(D),k=rr.inverseChromaticAdaptation(T),L=p6([M,R,k],rr.LINRGB_FROM_SCALED_DISCOUNT);if(L[0]<0||L[1]<0||L[2]<0)return 0;const F=rr.Y_FROM_LINRGB[0],z=rr.Y_FROM_LINRGB[1],G=rr.Y_FROM_LINRGB[2],V=F*L[0]+z*L[1]+G*L[2];if(V<=0)return 0;if(h===4||Math.abs(V-r)<.002)return L[0]>100.01||L[1]>100.01||L[2]>100.01?0:A9(L);i=i-(V-r)*i/(2*V)}return 0}static solveToInt(e,n,r){if(n<1e-4||r<1e-4||r>99.9999)return qje(r);e=Ry(e);const i=e/180*Math.PI,s=Ey(r),a=rr.findResultByJ(i,n,s);if(a!==0)return a;const o=rr.bisectToLimit(s,i);return A9(o)}static solveToCam(e,n,r){return Ud.fromInt(rr.solveToInt(e,n,r))}}rr.SCALED_DISCOUNT_FROM_LINRGB=[[.001200833568784504,.002389694492170889,.0002795742885861124],[.0005891086651375999,.0029785502573438758,.0003270666104008398],[.00010146692491640572,.0005364214359186694,.0032979401770712076]];rr.LINRGB_FROM_SCALED_DISCOUNT=[[1373.2198709594231,-1100.4251190754821,-7.278681089101213],[-271.815969077903,559.6580465940733,-32.46047482791194],[1.9622899599665666,-57.173814538844006,308.7233197812385]];rr.Y_FROM_LINRGB=[.2126,.7152,.0722];rr.CRITICAL_PLANES=[.015176349177441876,.045529047532325624,.07588174588720938,.10623444424209313,.13658714259697685,.16693984095186062,.19729253930674434,.2276452376616281,.2579979360165119,.28835063437139563,.3188300904430532,.350925934958123,.3848314933096426,.42057480301049466,.458183274052838,.4976837250274023,.5391024159806381,.5824650784040898,.6277969426914107,.6751227633498623,.7244668422128921,.775853049866786,.829304845476233,.8848452951698498,.942497089126609,1.0022825574869039,1.0642236851973577,1.1283421258858297,1.1946592148522128,1.2631959812511864,1.3339731595349034,1.407011200216447,1.4823302800086415,1.5599503113873272,1.6398909516233677,1.7221716113234105,1.8068114625156377,1.8938294463134073,1.9832442801866852,2.075074464868551,2.1693382909216234,2.2660538449872063,2.36523901573795,2.4669114995532007,2.5710888059345764,2.6777882626779785,2.7870270208169257,2.898822059350997,3.0131901897720907,3.1301480604002863,3.2497121605402226,3.3718988244681087,3.4967242352587946,3.624204428461639,3.754355295633311,3.887192587735158,4.022731918402185,4.160988767090289,4.301978482107941,4.445716283538092,4.592217266055746,4.741496401646282,4.893568542229298,5.048448422192488,5.20615066083972,5.3666897647573375,5.5300801301023865,5.696336044816294,5.865471690767354,6.037501145825082,6.212438385869475,6.390297286737924,6.571091626112461,6.7548350853498045,6.941541251256611,7.131223617812143,7.323895587840543,7.5195704746346665,7.7182615035334345,7.919981813454504,8.124744458384042,8.332562408825165,8.543448553206703,8.757415699253682,8.974476575321063,9.194643831691977,9.417930041841839,9.644347703669503,9.873909240696694,10.106627003236781,10.342513269534024,10.58158024687427,10.8238400726681,11.069304815507364,11.317986476196008,11.569896988756009,11.825048221409341,12.083451977536606,12.345119996613247,12.610063955123938,12.878295467455942,13.149826086772048,13.42466730586372,13.702830557985108,13.984327217668513,14.269168601521828,14.55736596900856,14.848930523210871,15.143873411576273,15.44220572664832,15.743938506781891,16.04908273684337,16.35764934889634,16.66964922287304,16.985093187232053,17.30399201960269,17.62635644741625,17.95219714852476,18.281524751807332,18.614349837764564,18.95068293910138,19.290534541298456,19.633915083172692,19.98083495742689,20.331304511189067,20.685334046541502,21.042933821039977,21.404114048223256,21.76888489811322,22.137256497705877,22.50923893145328,22.884842241736916,23.264076429332462,23.6469514538663,24.033477234264016,24.42366364919083,24.817520537484558,25.21505769858089,25.61628489293138,26.021211842414342,26.429848230738664,26.842203703840827,27.258287870275353,27.678110301598522,28.10168053274597,28.529008062403893,28.96010235337422,29.39497283293396,29.83362889318845,30.276079891419332,30.722335150426627,31.172403958865512,31.62629557157785,32.08401920991837,32.54558406207592,33.010999283389665,33.4802739966603,33.953417292456834,34.430438229418264,34.911345834551085,35.39614910352207,35.88485700094671,36.37747846067349,36.87402238606382,37.37449765026789,37.87891309649659,38.38727753828926,38.89959975977785,39.41588851594697,39.93615253289054,40.460400508064545,40.98864111053629,41.520882981230194,42.05713473317016,42.597404951718396,43.141702194811224,43.6900349931913,44.24241185063697,44.798841244188324,45.35933162437017,45.92389141541209,46.49252901546552,47.065252796817916,47.64207110610409,48.22299226451468,48.808024568002054,49.3971762874833,49.9904556690408,50.587870934119984,51.189430279724725,51.79514187861014,52.40501387947288,53.0190544071392,53.637271562750364,54.259673423945976,54.88626804504493,55.517063457223934,56.15206766869424,56.79128866487574,57.43473440856916,58.08241284012621,58.734331877617365,59.39049941699807,60.05092333227251,60.715611475655585,61.38457167773311,62.057811747619894,62.7353394731159,63.417162620860914,64.10328893648692,64.79372614476921,65.48848194977529,66.18756403501224,66.89098006357258,67.59873767827808,68.31084450182222,69.02730813691093,69.74813616640164,70.47333615344107,71.20291564160104,71.93688215501312,72.67524319850172,73.41800625771542,74.16517879925733,74.9167682708136,75.67278210128072,76.43322770089146,77.1981124613393,77.96744375590167,78.74122893956174,79.51947534912904,80.30219030335869,81.08938110306934,81.88105503125999,82.67721935322541,83.4778813166706,84.28304815182372,85.09272707154808,85.90692527145302,86.72564993000343,87.54890820862819,88.3767072518277,89.2090541872801,90.04595612594655,90.88742016217518,91.73345337380438,92.58406282226491,93.43925555268066,94.29903859396902,95.16341895893969,96.03240364439274,96.9059996312159,97.78421388448044,98.6670533535366,99.55452497210776];class Xs{static from(e,n,r){return new Xs(rr.solveToInt(e,n,r))}static fromInt(e){return new Xs(e)}toInt(){return this.argb}get hue(){return this.internalHue}set hue(e){this.setInternalState(rr.solveToInt(e,this.internalChroma,this.internalTone))}get chroma(){return this.internalChroma}set chroma(e){this.setInternalState(rr.solveToInt(this.internalHue,e,this.internalTone))}get tone(){return this.internalTone}set tone(e){this.setInternalState(rr.solveToInt(this.internalHue,this.internalChroma,e))}constructor(e){this.argb=e;const n=Ud.fromInt(e);this.internalHue=n.hue,this.internalChroma=n.chroma,this.internalTone=y9(e),this.argb=e}setInternalState(e){const n=Ud.fromInt(e);this.internalHue=n.hue,this.internalChroma=n.chroma,this.internalTone=y9(e),this.argb=e}inViewingConditions(e){const r=Ud.fromInt(this.toInt()).xyzInViewingConditions(e),i=Ud.fromXyzInViewingConditions(r[0],r[1],r[2],$g.make());return Xs.from(i.hue,i.chroma,g6(r[1]))}}class xl{static ratioOfTones(e,n){return e=dM(0,100,e),n=dM(0,100,n),xl.ratioOfYs(Ey(e),Ey(n))}static ratioOfYs(e,n){const r=e>n?e:n,i=r===n?e:n;return(r+5)/(i+5)}static lighter(e,n){if(e<0||e>100)return-1;const r=Ey(e),i=n*(r+5)-5,s=xl.ratioOfYs(i,r),a=Math.abs(s-n);if(s<n&&a>.04)return-1;const o=g6(i)+.4;return o<0||o>100?-1:o}static darker(e,n){if(e<0||e>100)return-1;const r=Ey(e),i=(r+5)/n-5,s=xl.ratioOfYs(r,i),a=Math.abs(s-n);if(s<n&&a>.04)return-1;const o=g6(i)-.4;return o<0||o>100?-1:o}static lighterUnsafe(e,n){const r=xl.lighter(e,n);return r<0?100:r}static darkerUnsafe(e,n){const r=xl.darker(e,n);return r<0?0:r}}class OI{static isDisliked(e){const n=Math.round(e.hue)>=90&&Math.round(e.hue)<=111,r=Math.round(e.chroma)>16,i=Math.round(e.tone)<65;return n&&r&&i}static fixIfDisliked(e){return OI.isDisliked(e)?Xs.from(e.hue,e.chroma,70):e}}class Cn{static fromPalette(e){return new Cn(e.name??"",e.palette,e.tone,e.isBackground??!1,e.background,e.secondBackground,e.contrastCurve,e.toneDeltaPair)}constructor(e,n,r,i,s,a,o,l){if(this.name=e,this.palette=n,this.tone=r,this.isBackground=i,this.background=s,this.secondBackground=a,this.contrastCurve=o,this.toneDeltaPair=l,this.hctCache=new Map,!s&&a)throw new Error(`Color ${e} has secondBackgrounddefined, but background is not defined.`);if(!s&&o)throw new Error(`Color ${e} has contrastCurvedefined, but background is not defined.`);if(s&&!o)throw new Error(`Color ${e} has backgrounddefined, but contrastCurve is not defined.`)}getArgb(e){return this.getHct(e).toInt()}getHct(e){const n=this.hctCache.get(e);if(n!=null)return n;const r=this.getTone(e),i=this.palette(e).getHct(r);return this.hctCache.size>4&&this.hctCache.clear(),this.hctCache.set(e,i),i}getTone(e){const n=e.contrastLevel<0;if(this.toneDeltaPair){const r=this.toneDeltaPair(e),i=r.roleA,s=r.roleB,a=r.delta,o=r.polarity,l=r.stayTogether,u=this.background(e).getTone(e),h=o==="nearer"||o==="lighter"&&!e.isDark||o==="darker"&&e.isDark,f=h?i:s,p=h?s:i,m=this.name===f.name,v=e.isDark?1:-1,A=f.contrastCurve.get(e.contrastLevel),x=p.contrastCurve.get(e.contrastLevel),E=f.tone(e);let w=xl.ratioOfTones(u,E)>=A?E:Cn.foregroundTone(u,A);const B=p.tone(e);let D=xl.ratioOfTones(u,B)>=x?B:Cn.foregroundTone(u,x);return n&&(w=Cn.foregroundTone(u,A),D=Cn.foregroundTone(u,x)),(D-w)*v>=a||(D=dM(0,100,w+a*v),(D-w)*v>=a||(w=dM(0,100,D-a*v))),50<=w&&w<60?v>0?(w=60,D=Math.max(D,w+a*v)):(w=49,D=Math.min(D,w+a*v)):50<=D&&D<60&&(l?v>0?(w=60,D=Math.max(D,w+a*v)):(w=49,D=Math.min(D,w+a*v)):v>0?D=60:D=49),m?w:D}else{let r=this.tone(e);if(this.background==null)return r;const i=this.background(e).getTone(e),s=this.contrastCurve.get(e.contrastLevel);if(xl.ratioOfTones(i,r)>=s||(r=Cn.foregroundTone(i,s)),n&&(r=Cn.foregroundTone(i,s)),this.isBackground&&50<=r&&r<60&&(xl.ratioOfTones(49,i)>=s?r=49:r=60),this.secondBackground){const[a,o]=[this.background,this.secondBackground],[l,c]=[a(e).getTone(e),o(e).getTone(e)],[u,h]=[Math.max(l,c),Math.min(l,c)];if(xl.ratioOfTones(u,r)>=s&&xl.ratioOfTones(h,r)>=s)return r;const f=xl.lighter(u,s),p=xl.darker(h,s),m=[];return f!==-1&&m.push(f),p!==-1&&m.push(p),Cn.tonePrefersLightForeground(l)||Cn.tonePrefersLightForeground(c)?f<0?100:f:m.length===1?m[0]:p<0?0:p}return r}}static foregroundTone(e,n){const r=xl.lighterUnsafe(e,n),i=xl.darkerUnsafe(e,n),s=xl.ratioOfTones(r,e),a=xl.ratioOfTones(i,e);if(Cn.tonePrefersLightForeground(e)){const l=Math.abs(s-a)<.1&&s<n&&a<n;return s>=n||s>=a||l?r:i}else return a>=n||a>=s?i:r}static tonePrefersLightForeground(e){return Math.round(e)<60}static toneAllowsLightForeground(e){return Math.round(e)<=49}static enableLightForeground(e){return Cn.tonePrefersLightForeground(e)&&!Cn.toneAllowsLightForeground(e)?49:e}}class Vr{static fromInt(e){const n=Xs.fromInt(e);return Vr.fromHct(n)}static fromHct(e){return new Vr(e.hue,e.chroma,e)}static fromHueAndChroma(e,n){const r=new Jje(e,n).create();return new Vr(e,n,r)}constructor(e,n,r){this.hue=e,this.chroma=n,this.keyColor=r,this.cache=new Map}tone(e){let n=this.cache.get(e);return n===void 0&&(n=Xs.from(this.hue,this.chroma,e).toInt(),this.cache.set(e,n)),n}getHct(e){return Xs.fromInt(this.tone(e))}}class Jje{constructor(e,n){this.hue=e,this.requestedChroma=n,this.chromaCache=new Map,this.maxChromaValue=200}create(){let i=0,s=100;for(;i<s;){const a=Math.floor((i+s)/2),o=this.maxChroma(a)<this.maxChroma(a+1);if(this.maxChroma(a)>=this.requestedChroma-.01)if(Math.abs(i-50)<Math.abs(s-50))s=a;else{if(i===a)return Xs.from(this.hue,this.requestedChroma,i);i=a}else o?i=a+1:s=a}return Xs.from(this.hue,this.requestedChroma,i)}maxChroma(e){if(this.chromaCache.has(e))return this.chromaCache.get(e);const n=Xs.from(this.hue,this.maxChromaValue,e).chroma;return this.chromaCache.set(e,n),n}}class Br{constructor(e,n,r,i){this.low=e,this.normal=n,this.medium=r,this.high=i}get(e){return e<=-1?this.low:e<0?Zw(this.low,this.normal,(e- -1)/1):e<.5?Zw(this.normal,this.medium,(e-0)/.5):e<1?Zw(this.medium,this.high,(e-.5)/.5):this.high}}class md{constructor(e,n,r,i,s){this.roleA=e,this.roleB=n,this.delta=r,this.polarity=i,this.stayTogether=s}}var hf;(function(t){t[t.MONOCHROME=0]="MONOCHROME",t[t.NEUTRAL=1]="NEUTRAL",t[t.TONAL_SPOT=2]="TONAL_SPOT",t[t.VIBRANT=3]="VIBRANT",t[t.EXPRESSIVE=4]="EXPRESSIVE",t[t.FIDELITY=5]="FIDELITY",t[t.CONTENT=6]="CONTENT",t[t.RAINBOW=7]="RAINBOW",t[t.FRUIT_SALAD=8]="FRUIT_SALAD"})(hf||(hf={}));function JE(t){return t.variant===hf.FIDELITY||t.variant===hf.CONTENT}function Pa(t){return t.variant===hf.MONOCHROME}function Zje(t,e,n,r){let i=n,s=Xs.from(t,e,n);if(s.chroma<e){let a=s.chroma;for(;s.chroma<e;){i+=r?-1:1;const o=Xs.from(t,e,i);if(a>o.chroma||Math.abs(o.chroma-e)<.4)break;const l=Math.abs(o.chroma-e),c=Math.abs(s.chroma-e);l<c&&(s=o),a=Math.max(a,o.chroma)}}return i}class Ye{static highestSurface(e){return e.isDark?Ye.surfaceBright:Ye.surfaceDim}}Ye.contentAccentToneDelta=15;Ye.primaryPaletteKeyColor=Cn.fromPalette({name:"primary_palette_key_color",palette:t=>t.primaryPalette,tone:t=>t.primaryPalette.keyColor.tone});Ye.secondaryPaletteKeyColor=Cn.fromPalette({name:"secondary_palette_key_color",palette:t=>t.secondaryPalette,tone:t=>t.secondaryPalette.keyColor.tone});Ye.tertiaryPaletteKeyColor=Cn.fromPalette({name:"tertiary_palette_key_color",palette:t=>t.tertiaryPalette,tone:t=>t.tertiaryPalette.keyColor.tone});Ye.neutralPaletteKeyColor=Cn.fromPalette({name:"neutral_palette_key_color",palette:t=>t.neutralPalette,tone:t=>t.neutralPalette.keyColor.tone});Ye.neutralVariantPaletteKeyColor=Cn.fromPalette({name:"neutral_variant_palette_key_color",palette:t=>t.neutralVariantPalette,tone:t=>t.neutralVariantPalette.keyColor.tone});Ye.background=Cn.fromPalette({name:"background",palette:t=>t.neutralPalette,tone:t=>t.isDark?6:98,isBackground:!0});Ye.onBackground=Cn.fromPalette({name:"on_background",palette:t=>t.neutralPalette,tone:t=>t.isDark?90:10,background:t=>Ye.background,contrastCurve:new Br(3,3,4.5,7)});Ye.surface=Cn.fromPalette({name:"surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?6:98,isBackground:!0});Ye.surfaceDim=Cn.fromPalette({name:"surface_dim",palette:t=>t.neutralPalette,tone:t=>t.isDark?6:new Br(87,87,80,75).get(t.contrastLevel),isBackground:!0});Ye.surfaceBright=Cn.fromPalette({name:"surface_bright",palette:t=>t.neutralPalette,tone:t=>t.isDark?new Br(24,24,29,34).get(t.contrastLevel):98,isBackground:!0});Ye.surfaceContainerLowest=Cn.fromPalette({name:"surface_container_lowest",palette:t=>t.neutralPalette,tone:t=>t.isDark?new Br(4,4,2,0).get(t.contrastLevel):100,isBackground:!0});Ye.surfaceContainerLow=Cn.fromPalette({name:"surface_container_low",palette:t=>t.neutralPalette,tone:t=>t.isDark?new Br(10,10,11,12).get(t.contrastLevel):new Br(96,96,96,95).get(t.contrastLevel),isBackground:!0});Ye.surfaceContainer=Cn.fromPalette({name:"surface_container",palette:t=>t.neutralPalette,tone:t=>t.isDark?new Br(12,12,16,20).get(t.contrastLevel):new Br(94,94,92,90).get(t.contrastLevel),isBackground:!0});Ye.surfaceContainerHigh=Cn.fromPalette({name:"surface_container_high",palette:t=>t.neutralPalette,tone:t=>t.isDark?new Br(17,17,21,25).get(t.contrastLevel):new Br(92,92,88,85).get(t.contrastLevel),isBackground:!0});Ye.surfaceContainerHighest=Cn.fromPalette({name:"surface_container_highest",palette:t=>t.neutralPalette,tone:t=>t.isDark?new Br(22,22,26,30).get(t.contrastLevel):new Br(90,90,84,80).get(t.contrastLevel),isBackground:!0});Ye.onSurface=Cn.fromPalette({name:"on_surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?90:10,background:t=>Ye.highestSurface(t),contrastCurve:new Br(4.5,7,11,21)});Ye.surfaceVariant=Cn.fromPalette({name:"surface_variant",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?30:90,isBackground:!0});Ye.onSurfaceVariant=Cn.fromPalette({name:"on_surface_variant",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?80:30,background:t=>Ye.highestSurface(t),contrastCurve:new Br(3,4.5,7,11)});Ye.inverseSurface=Cn.fromPalette({name:"inverse_surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?90:20});Ye.inverseOnSurface=Cn.fromPalette({name:"inverse_on_surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?20:95,background:t=>Ye.inverseSurface,contrastCurve:new Br(4.5,7,11,21)});Ye.outline=Cn.fromPalette({name:"outline",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?60:50,background:t=>Ye.highestSurface(t),contrastCurve:new Br(1.5,3,4.5,7)});Ye.outlineVariant=Cn.fromPalette({name:"outline_variant",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?30:80,background:t=>Ye.highestSurface(t),contrastCurve:new Br(1,1,3,4.5)});Ye.shadow=Cn.fromPalette({name:"shadow",palette:t=>t.neutralPalette,tone:t=>0});Ye.scrim=Cn.fromPalette({name:"scrim",palette:t=>t.neutralPalette,tone:t=>0});Ye.surfaceTint=Cn.fromPalette({name:"surface_tint",palette:t=>t.primaryPalette,tone:t=>t.isDark?80:40,isBackground:!0});Ye.primary=Cn.fromPalette({name:"primary",palette:t=>t.primaryPalette,tone:t=>Pa(t)?t.isDark?100:0:t.isDark?80:40,isBackground:!0,background:t=>Ye.highestSurface(t),contrastCurve:new Br(3,4.5,7,7),toneDeltaPair:t=>new md(Ye.primaryContainer,Ye.primary,10,"nearer",!1)});Ye.onPrimary=Cn.fromPalette({name:"on_primary",palette:t=>t.primaryPalette,tone:t=>Pa(t)?t.isDark?10:90:t.isDark?20:100,background:t=>Ye.primary,contrastCurve:new Br(4.5,7,11,21)});Ye.primaryContainer=Cn.fromPalette({name:"primary_container",palette:t=>t.primaryPalette,tone:t=>JE(t)?t.sourceColorHct.tone:Pa(t)?t.isDark?85:25:t.isDark?30:90,isBackground:!0,background:t=>Ye.highestSurface(t),contrastCurve:new Br(1,1,3,4.5),toneDeltaPair:t=>new md(Ye.primaryContainer,Ye.primary,10,"nearer",!1)});Ye.onPrimaryContainer=Cn.fromPalette({name:"on_primary_container",palette:t=>t.primaryPalette,tone:t=>JE(t)?Cn.foregroundTone(Ye.primaryContainer.tone(t),4.5):Pa(t)?t.isDark?0:100:t.isDark?90:30,background:t=>Ye.primaryContainer,contrastCurve:new Br(3,4.5,7,11)});Ye.inversePrimary=Cn.fromPalette({name:"inverse_primary",palette:t=>t.primaryPalette,tone:t=>t.isDark?40:80,background:t=>Ye.inverseSurface,contrastCurve:new Br(3,4.5,7,7)});Ye.secondary=Cn.fromPalette({name:"secondary",palette:t=>t.secondaryPalette,tone:t=>t.isDark?80:40,isBackground:!0,background:t=>Ye.highestSurface(t),contrastCurve:new Br(3,4.5,7,7),toneDeltaPair:t=>new md(Ye.secondaryContainer,Ye.secondary,10,"nearer",!1)});Ye.onSecondary=Cn.fromPalette({name:"on_secondary",palette:t=>t.secondaryPalette,tone:t=>Pa(t)?t.isDark?10:100:t.isDark?20:100,background:t=>Ye.secondary,contrastCurve:new Br(4.5,7,11,21)});Ye.secondaryContainer=Cn.fromPalette({name:"secondary_container",palette:t=>t.secondaryPalette,tone:t=>{const e=t.isDark?30:90;return Pa(t)?t.isDark?30:85:JE(t)?Zje(t.secondaryPalette.hue,t.secondaryPalette.chroma,e,!t.isDark):e},isBackground:!0,background:t=>Ye.highestSurface(t),contrastCurve:new Br(1,1,3,4.5),toneDeltaPair:t=>new md(Ye.secondaryContainer,Ye.secondary,10,"nearer",!1)});Ye.onSecondaryContainer=Cn.fromPalette({name:"on_secondary_container",palette:t=>t.secondaryPalette,tone:t=>Pa(t)?t.isDark?90:10:JE(t)?Cn.foregroundTone(Ye.secondaryContainer.tone(t),4.5):t.isDark?90:30,background:t=>Ye.secondaryContainer,contrastCurve:new Br(3,4.5,7,11)});Ye.tertiary=Cn.fromPalette({name:"tertiary",palette:t=>t.tertiaryPalette,tone:t=>Pa(t)?t.isDark?90:25:t.isDark?80:40,isBackground:!0,background:t=>Ye.highestSurface(t),contrastCurve:new Br(3,4.5,7,7),toneDeltaPair:t=>new md(Ye.tertiaryContainer,Ye.tertiary,10,"nearer",!1)});Ye.onTertiary=Cn.fromPalette({name:"on_tertiary",palette:t=>t.tertiaryPalette,tone:t=>Pa(t)?t.isDark?10:90:t.isDark?20:100,background:t=>Ye.tertiary,contrastCurve:new Br(4.5,7,11,21)});Ye.tertiaryContainer=Cn.fromPalette({name:"tertiary_container",palette:t=>t.tertiaryPalette,tone:t=>{if(Pa(t))return t.isDark?60:49;if(!JE(t))return t.isDark?30:90;const e=t.tertiaryPalette.getHct(t.sourceColorHct.tone);return OI.fixIfDisliked(e).tone},isBackground:!0,background:t=>Ye.highestSurface(t),contrastCurve:new Br(1,1,3,4.5),toneDeltaPair:t=>new md(Ye.tertiaryContainer,Ye.tertiary,10,"nearer",!1)});Ye.onTertiaryContainer=Cn.fromPalette({name:"on_tertiary_container",palette:t=>t.tertiaryPalette,tone:t=>Pa(t)?t.isDark?0:100:JE(t)?Cn.foregroundTone(Ye.tertiaryContainer.tone(t),4.5):t.isDark?90:30,background:t=>Ye.tertiaryContainer,contrastCurve:new Br(3,4.5,7,11)});Ye.error=Cn.fromPalette({name:"error",palette:t=>t.errorPalette,tone:t=>t.isDark?80:40,isBackground:!0,background:t=>Ye.highestSurface(t),contrastCurve:new Br(3,4.5,7,7),toneDeltaPair:t=>new md(Ye.errorContainer,Ye.error,10,"nearer",!1)});Ye.onError=Cn.fromPalette({name:"on_error",palette:t=>t.errorPalette,tone:t=>t.isDark?20:100,background:t=>Ye.error,contrastCurve:new Br(4.5,7,11,21)});Ye.errorContainer=Cn.fromPalette({name:"error_container",palette:t=>t.errorPalette,tone:t=>t.isDark?30:90,isBackground:!0,background:t=>Ye.highestSurface(t),contrastCurve:new Br(1,1,3,4.5),toneDeltaPair:t=>new md(Ye.errorContainer,Ye.error,10,"nearer",!1)});Ye.onErrorContainer=Cn.fromPalette({name:"on_error_container",palette:t=>t.errorPalette,tone:t=>Pa(t)?t.isDark?90:10:t.isDark?90:30,background:t=>Ye.errorContainer,contrastCurve:new Br(3,4.5,7,11)});Ye.primaryFixed=Cn.fromPalette({name:"primary_fixed",palette:t=>t.primaryPalette,tone:t=>Pa(t)?40:90,isBackground:!0,background:t=>Ye.highestSurface(t),contrastCurve:new Br(1,1,3,4.5),toneDeltaPair:t=>new md(Ye.primaryFixed,Ye.primaryFixedDim,10,"lighter",!0)});Ye.primaryFixedDim=Cn.fromPalette({name:"primary_fixed_dim",palette:t=>t.primaryPalette,tone:t=>Pa(t)?30:80,isBackground:!0,background:t=>Ye.highestSurface(t),contrastCurve:new Br(1,1,3,4.5),toneDeltaPair:t=>new md(Ye.primaryFixed,Ye.primaryFixedDim,10,"lighter",!0)});Ye.onPrimaryFixed=Cn.fromPalette({name:"on_primary_fixed",palette:t=>t.primaryPalette,tone:t=>Pa(t)?100:10,background:t=>Ye.primaryFixedDim,secondBackground:t=>Ye.primaryFixed,contrastCurve:new Br(4.5,7,11,21)});Ye.onPrimaryFixedVariant=Cn.fromPalette({name:"on_primary_fixed_variant",palette:t=>t.primaryPalette,tone:t=>Pa(t)?90:30,background:t=>Ye.primaryFixedDim,secondBackground:t=>Ye.primaryFixed,contrastCurve:new Br(3,4.5,7,11)});Ye.secondaryFixed=Cn.fromPalette({name:"secondary_fixed",palette:t=>t.secondaryPalette,tone:t=>Pa(t)?80:90,isBackground:!0,background:t=>Ye.highestSurface(t),contrastCurve:new Br(1,1,3,4.5),toneDeltaPair:t=>new md(Ye.secondaryFixed,Ye.secondaryFixedDim,10,"lighter",!0)});Ye.secondaryFixedDim=Cn.fromPalette({name:"secondary_fixed_dim",palette:t=>t.secondaryPalette,tone:t=>Pa(t)?70:80,isBackground:!0,background:t=>Ye.highestSurface(t),contrastCurve:new Br(1,1,3,4.5),toneDeltaPair:t=>new md(Ye.secondaryFixed,Ye.secondaryFixedDim,10,"lighter",!0)});Ye.onSecondaryFixed=Cn.fromPalette({name:"on_secondary_fixed",palette:t=>t.secondaryPalette,tone:t=>10,background:t=>Ye.secondaryFixedDim,secondBackground:t=>Ye.secondaryFixed,contrastCurve:new Br(4.5,7,11,21)});Ye.onSecondaryFixedVariant=Cn.fromPalette({name:"on_secondary_fixed_variant",palette:t=>t.secondaryPalette,tone:t=>Pa(t)?25:30,background:t=>Ye.secondaryFixedDim,secondBackground:t=>Ye.secondaryFixed,contrastCurve:new Br(3,4.5,7,11)});Ye.tertiaryFixed=Cn.fromPalette({name:"tertiary_fixed",palette:t=>t.tertiaryPalette,tone:t=>Pa(t)?40:90,isBackground:!0,background:t=>Ye.highestSurface(t),contrastCurve:new Br(1,1,3,4.5),toneDeltaPair:t=>new md(Ye.tertiaryFixed,Ye.tertiaryFixedDim,10,"lighter",!0)});Ye.tertiaryFixedDim=Cn.fromPalette({name:"tertiary_fixed_dim",palette:t=>t.tertiaryPalette,tone:t=>Pa(t)?30:80,isBackground:!0,background:t=>Ye.highestSurface(t),contrastCurve:new Br(1,1,3,4.5),toneDeltaPair:t=>new md(Ye.tertiaryFixed,Ye.tertiaryFixedDim,10,"lighter",!0)});Ye.onTertiaryFixed=Cn.fromPalette({name:"on_tertiary_fixed",palette:t=>t.tertiaryPalette,tone:t=>Pa(t)?100:10,background:t=>Ye.tertiaryFixedDim,secondBackground:t=>Ye.tertiaryFixed,contrastCurve:new Br(4.5,7,11,21)});Ye.onTertiaryFixedVariant=Cn.fromPalette({name:"on_tertiary_fixed_variant",palette:t=>t.tertiaryPalette,tone:t=>Pa(t)?90:30,background:t=>Ye.tertiaryFixedDim,secondBackground:t=>Ye.tertiaryFixed,contrastCurve:new Br(3,4.5,7,11)});class Tp{constructor(e){this.sourceColorArgb=e.sourceColorArgb,this.variant=e.variant,this.contrastLevel=e.contrastLevel,this.isDark=e.isDark,this.sourceColorHct=Xs.fromInt(e.sourceColorArgb),this.primaryPalette=e.primaryPalette,this.secondaryPalette=e.secondaryPalette,this.tertiaryPalette=e.tertiaryPalette,this.neutralPalette=e.neutralPalette,this.neutralVariantPalette=e.neutralVariantPalette,this.errorPalette=Vr.fromHueAndChroma(25,84)}static getRotatedHue(e,n,r){const i=e.hue;if(n.length!==r.length)throw new Error(`mismatch between hue length ${n.length} & rotations ${r.length}`);if(r.length===1)return Ry(e.hue+r[0]);const s=n.length;for(let a=0;a<=s-2;a++){const o=n[a],l=n[a+1];if(o<i&&i<l)return Ry(i+r[a])}return i}getArgb(e){return e.getArgb(this)}getHct(e){return e.getHct(this)}get primaryPaletteKeyColor(){return this.getArgb(Ye.primaryPaletteKeyColor)}get secondaryPaletteKeyColor(){return this.getArgb(Ye.secondaryPaletteKeyColor)}get tertiaryPaletteKeyColor(){return this.getArgb(Ye.tertiaryPaletteKeyColor)}get neutralPaletteKeyColor(){return this.getArgb(Ye.neutralPaletteKeyColor)}get neutralVariantPaletteKeyColor(){return this.getArgb(Ye.neutralVariantPaletteKeyColor)}get background(){return this.getArgb(Ye.background)}get onBackground(){return this.getArgb(Ye.onBackground)}get surface(){return this.getArgb(Ye.surface)}get surfaceDim(){return this.getArgb(Ye.surfaceDim)}get surfaceBright(){return this.getArgb(Ye.surfaceBright)}get surfaceContainerLowest(){return this.getArgb(Ye.surfaceContainerLowest)}get surfaceContainerLow(){return this.getArgb(Ye.surfaceContainerLow)}get surfaceContainer(){return this.getArgb(Ye.surfaceContainer)}get surfaceContainerHigh(){return this.getArgb(Ye.surfaceContainerHigh)}get surfaceContainerHighest(){return this.getArgb(Ye.surfaceContainerHighest)}get onSurface(){return this.getArgb(Ye.onSurface)}get surfaceVariant(){return this.getArgb(Ye.surfaceVariant)}get onSurfaceVariant(){return this.getArgb(Ye.onSurfaceVariant)}get inverseSurface(){return this.getArgb(Ye.inverseSurface)}get inverseOnSurface(){return this.getArgb(Ye.inverseOnSurface)}get outline(){return this.getArgb(Ye.outline)}get outlineVariant(){return this.getArgb(Ye.outlineVariant)}get shadow(){return this.getArgb(Ye.shadow)}get scrim(){return this.getArgb(Ye.scrim)}get surfaceTint(){return this.getArgb(Ye.surfaceTint)}get primary(){return this.getArgb(Ye.primary)}get onPrimary(){return this.getArgb(Ye.onPrimary)}get primaryContainer(){return this.getArgb(Ye.primaryContainer)}get onPrimaryContainer(){return this.getArgb(Ye.onPrimaryContainer)}get inversePrimary(){return this.getArgb(Ye.inversePrimary)}get secondary(){return this.getArgb(Ye.secondary)}get onSecondary(){return this.getArgb(Ye.onSecondary)}get secondaryContainer(){return this.getArgb(Ye.secondaryContainer)}get onSecondaryContainer(){return this.getArgb(Ye.onSecondaryContainer)}get tertiary(){return this.getArgb(Ye.tertiary)}get onTertiary(){return this.getArgb(Ye.onTertiary)}get tertiaryContainer(){return this.getArgb(Ye.tertiaryContainer)}get onTertiaryContainer(){return this.getArgb(Ye.onTertiaryContainer)}get error(){return this.getArgb(Ye.error)}get onError(){return this.getArgb(Ye.onError)}get errorContainer(){return this.getArgb(Ye.errorContainer)}get onErrorContainer(){return this.getArgb(Ye.onErrorContainer)}get primaryFixed(){return this.getArgb(Ye.primaryFixed)}get primaryFixedDim(){return this.getArgb(Ye.primaryFixedDim)}get onPrimaryFixed(){return this.getArgb(Ye.onPrimaryFixed)}get onPrimaryFixedVariant(){return this.getArgb(Ye.onPrimaryFixedVariant)}get secondaryFixed(){return this.getArgb(Ye.secondaryFixed)}get secondaryFixedDim(){return this.getArgb(Ye.secondaryFixedDim)}get onSecondaryFixed(){return this.getArgb(Ye.onSecondaryFixed)}get onSecondaryFixedVariant(){return this.getArgb(Ye.onSecondaryFixedVariant)}get tertiaryFixed(){return this.getArgb(Ye.tertiaryFixed)}get tertiaryFixedDim(){return this.getArgb(Ye.tertiaryFixedDim)}get onTertiaryFixed(){return this.getArgb(Ye.onTertiaryFixed)}get onTertiaryFixedVariant(){return this.getArgb(Ye.onTertiaryFixedVariant)}}class W1{constructor(e){this.input=e,this.hctsByTempCache=[],this.hctsByHueCache=[],this.tempsByHctCache=new Map,this.inputRelativeTemperatureCache=-1,this.complementCache=null}get hctsByTemp(){if(this.hctsByTempCache.length>0)return this.hctsByTempCache;const e=this.hctsByHue.concat([this.input]),n=this.tempsByHct;return e.sort((r,i)=>n.get(r)-n.get(i)),this.hctsByTempCache=e,e}get warmest(){return this.hctsByTemp[this.hctsByTemp.length-1]}get coldest(){return this.hctsByTemp[0]}analogous(e=5,n=12){const r=Math.round(this.input.hue),i=this.hctsByHue[r];let s=this.relativeTemperature(i);const a=[i];let o=0;for(let m=0;m<360;m++){const v=m9(r+m),A=this.hctsByHue[v],x=this.relativeTemperature(A),E=Math.abs(x-s);s=x,o+=E}let l=1;const c=o/n;let u=0;for(s=this.relativeTemperature(i);a.length<n;){const m=m9(r+l),v=this.hctsByHue[m],A=this.relativeTemperature(v),x=Math.abs(A-s);u+=x;const E=a.length*c;let w=u>=E,B=1;for(;w&&a.length<n;){a.push(v);const D=(a.length+B)*c;w=u>=D,B++}if(s=A,l++,l>360){for(;a.length<n;)a.push(v);break}}const h=[this.input],f=Math.floor((e-1)/2);for(let m=1;m<f+1;m++){let v=0-m;for(;v<0;)v=a.length+v;v>=a.length&&(v=v%a.length),h.splice(0,0,a[v])}const p=e-f-1;for(let m=1;m<p+1;m++){let v=m;for(;v<0;)v=a.length+v;v>=a.length&&(v=v%a.length),h.push(a[v])}return h}get complement(){if(this.complementCache!=null)return this.complementCache;const e=this.coldest.hue,n=this.tempsByHct.get(this.coldest),r=this.warmest.hue,s=this.tempsByHct.get(this.warmest)-n,a=W1.isBetween(this.input.hue,e,r),o=a?r:e,l=a?e:r,c=1;let u=1e3,h=this.hctsByHue[Math.round(this.input.hue)];const f=1-this.inputRelativeTemperature;for(let p=0;p<=360;p+=1){const m=Ry(o+c*p);if(!W1.isBetween(m,o,l))continue;const v=this.hctsByHue[Math.round(m)],A=(this.tempsByHct.get(v)-n)/s,x=Math.abs(f-A);x<u&&(u=x,h=v)}return this.complementCache=h,this.complementCache}relativeTemperature(e){const n=this.tempsByHct.get(this.warmest)-this.tempsByHct.get(this.coldest),r=this.tempsByHct.get(e)-this.tempsByHct.get(this.coldest);return n===0?.5:r/n}get inputRelativeTemperature(){return this.inputRelativeTemperatureCache>=0?this.inputRelativeTemperatureCache:(this.inputRelativeTemperatureCache=this.relativeTemperature(this.input),this.inputRelativeTemperatureCache)}get tempsByHct(){if(this.tempsByHctCache.size>0)return this.tempsByHctCache;const e=this.hctsByHue.concat([this.input]),n=new Map;for(const r of e)n.set(r,W1.rawTemperature(r));return this.tempsByHctCache=n,n}get hctsByHue(){if(this.hctsByHueCache.length>0)return this.hctsByHueCache;const e=[];for(let n=0;n<=360;n+=1){const r=Xs.from(n,this.input.chroma,this.input.tone);e.push(r)}return this.hctsByHueCache=e,this.hctsByHueCache}static isBetween(e,n,r){return n<r?n<=e&&e<=r:n<=e||e<=r}static rawTemperature(e){const n=Kje(e.toInt()),r=Ry(Math.atan2(n[2],n[1])*180/Math.PI),i=Math.sqrt(n[1]*n[1]+n[2]*n[2]);return-.5+.02*Math.pow(i,1.07)*Math.cos(Ry(r-50)*Math.PI/180)}}class eOe extends Tp{constructor(e,n,r){super({sourceColorArgb:e.toInt(),variant:hf.CONTENT,contrastLevel:r,isDark:n,primaryPalette:Vr.fromHueAndChroma(e.hue,e.chroma),secondaryPalette:Vr.fromHueAndChroma(e.hue,Math.max(e.chroma-32,e.chroma*.5)),tertiaryPalette:Vr.fromInt(OI.fixIfDisliked(new W1(e).analogous(3,6)[2]).toInt()),neutralPalette:Vr.fromHueAndChroma(e.hue,e.chroma/8),neutralVariantPalette:Vr.fromHueAndChroma(e.hue,e.chroma/8+4)})}}class p0 extends Tp{constructor(e,n,r){super({sourceColorArgb:e.toInt(),variant:hf.EXPRESSIVE,contrastLevel:r,isDark:n,primaryPalette:Vr.fromHueAndChroma(Ry(e.hue+240),40),secondaryPalette:Vr.fromHueAndChroma(Tp.getRotatedHue(e,p0.hues,p0.secondaryRotations),24),tertiaryPalette:Vr.fromHueAndChroma(Tp.getRotatedHue(e,p0.hues,p0.tertiaryRotations),32),neutralPalette:Vr.fromHueAndChroma(e.hue+15,8),neutralVariantPalette:Vr.fromHueAndChroma(e.hue+15,12)})}}p0.hues=[0,21,51,121,151,191,271,321,360];p0.secondaryRotations=[45,95,45,20,45,90,45,45,45];p0.tertiaryRotations=[120,120,20,45,20,15,20,120,120];class tOe extends Tp{constructor(e,n,r){super({sourceColorArgb:e.toInt(),variant:hf.FIDELITY,contrastLevel:r,isDark:n,primaryPalette:Vr.fromHueAndChroma(e.hue,e.chroma),secondaryPalette:Vr.fromHueAndChroma(e.hue,Math.max(e.chroma-32,e.chroma*.5)),tertiaryPalette:Vr.fromInt(OI.fixIfDisliked(new W1(e).complement).toInt()),neutralPalette:Vr.fromHueAndChroma(e.hue,e.chroma/8),neutralVariantPalette:Vr.fromHueAndChroma(e.hue,e.chroma/8+4)})}}class nOe extends Tp{constructor(e,n,r){super({sourceColorArgb:e.toInt(),variant:hf.MONOCHROME,contrastLevel:r,isDark:n,primaryPalette:Vr.fromHueAndChroma(e.hue,0),secondaryPalette:Vr.fromHueAndChroma(e.hue,0),tertiaryPalette:Vr.fromHueAndChroma(e.hue,0),neutralPalette:Vr.fromHueAndChroma(e.hue,0),neutralVariantPalette:Vr.fromHueAndChroma(e.hue,0)})}}class rOe extends Tp{constructor(e,n,r){super({sourceColorArgb:e.toInt(),variant:hf.NEUTRAL,contrastLevel:r,isDark:n,primaryPalette:Vr.fromHueAndChroma(e.hue,12),secondaryPalette:Vr.fromHueAndChroma(e.hue,8),tertiaryPalette:Vr.fromHueAndChroma(e.hue,16),neutralPalette:Vr.fromHueAndChroma(e.hue,2),neutralVariantPalette:Vr.fromHueAndChroma(e.hue,2)})}}class v9 extends Tp{constructor(e,n,r){super({sourceColorArgb:e.toInt(),variant:hf.TONAL_SPOT,contrastLevel:r,isDark:n,primaryPalette:Vr.fromHueAndChroma(e.hue,36),secondaryPalette:Vr.fromHueAndChroma(e.hue,16),tertiaryPalette:Vr.fromHueAndChroma(Ry(e.hue+60),24),neutralPalette:Vr.fromHueAndChroma(e.hue,6),neutralVariantPalette:Vr.fromHueAndChroma(e.hue,8)})}}class g0 extends Tp{constructor(e,n,r){super({sourceColorArgb:e.toInt(),variant:hf.VIBRANT,contrastLevel:r,isDark:n,primaryPalette:Vr.fromHueAndChroma(e.hue,200),secondaryPalette:Vr.fromHueAndChroma(Tp.getRotatedHue(e,g0.hues,g0.secondaryRotations),24),tertiaryPalette:Vr.fromHueAndChroma(Tp.getRotatedHue(e,g0.hues,g0.tertiaryRotations),32),neutralPalette:Vr.fromHueAndChroma(e.hue,10),neutralVariantPalette:Vr.fromHueAndChroma(e.hue,12)})}}g0.hues=[0,41,61,101,131,181,251,301,360];g0.secondaryRotations=[18,15,10,12,15,18,15,12,12];g0.tertiaryRotations=[35,30,20,25,30,35,30,25,25];function mi(t){const e=mj(t),n=Aj(t),r=yj(t),i=[e.toString(16),n.toString(16),r.toString(16)];for(const[s,a]of i.entries())a.length===1&&(i[s]="0"+a);return"#"+i.join("")}function vj(t){t=t.replace("#","");const e=t.length===3,n=t.length===6,r=t.length===8;if(!e&&!n&&!r)throw new Error("unexpected hex "+t);let i=0,s=0,a=0;return e?(i=Wm(t.slice(0,1).repeat(2)),s=Wm(t.slice(1,2).repeat(2)),a=Wm(t.slice(2,3).repeat(2))):n?(i=Wm(t.slice(0,2)),s=Wm(t.slice(2,4)),a=Wm(t.slice(4,6))):r&&(i=Wm(t.slice(2,4)),s=Wm(t.slice(4,6)),a=Wm(t.slice(6,8))),(255<<24|(i&255)<<16|(s&255)<<8|a&255)>>>0}function Wm(t){return parseInt(t,16)}function ile(t){const e=vj(t),n=Xs.fromInt(e);return{hue:n.hue,chroma:n.chroma,tone:n.tone}}const iOe=[0,4,6,10,12,17,20,22,24,30,40,50,60,70,80,87,90,92,94,95,96,98,99,100],sOe=[50,100,200,300,400,500,600,700,800,900,950],aOe={50:98,100:94,200:87,300:80,400:70,500:60,600:50,700:40,800:30,900:20,950:10};function oOe(t){const e=ile(t),n=Vr.fromHueAndChroma(e.hue,e.chroma),r={};for(const i of sOe){const s=aOe[i],a=mi(n.tone(s)),o=sT(a);o&&(r[i]=o)}return r}function sle(t,e,n,r=0){switch(e){case"tonalSpot":return new v9(Xs.fromInt(t),n,r);case"vibrant":return new g0(Xs.fromInt(t),n,r);case"expressive":return new p0(Xs.fromInt(t),n,r);case"neutral":return new rOe(Xs.fromInt(t),n,r);case"monochrome":return new nOe(Xs.fromInt(t),n,r);case"fidelity":return new tOe(Xs.fromInt(t),n,r);case"content":return new eOe(Xs.fromInt(t),n,r);default:return new v9(Xs.fromInt(t),n,r)}}function m6(t,e="tonalSpot",n=!1,r=0){const i=vj(t),s=sle(i,e,n,r);return{primary:mi(s.primary),onPrimary:mi(s.onPrimary),primaryContainer:mi(s.primaryContainer),onPrimaryContainer:mi(s.onPrimaryContainer),secondary:mi(s.secondary),onSecondary:mi(s.onSecondary),secondaryContainer:mi(s.secondaryContainer),onSecondaryContainer:mi(s.onSecondaryContainer),tertiary:mi(s.tertiary),onTertiary:mi(s.onTertiary),tertiaryContainer:mi(s.tertiaryContainer),onTertiaryContainer:mi(s.onTertiaryContainer),error:mi(s.error),onError:mi(s.onError),errorContainer:mi(s.errorContainer),onErrorContainer:mi(s.onErrorContainer),surface:mi(s.surface),onSurface:mi(s.onSurface),surfaceVariant:mi(s.surfaceVariant),onSurfaceVariant:mi(s.onSurfaceVariant),surfaceContainerLowest:mi(s.surfaceContainerLowest),surfaceContainerLow:mi(s.surfaceContainerLow),surfaceContainer:mi(s.surfaceContainer),surfaceContainerHigh:mi(s.surfaceContainerHigh),surfaceContainerHighest:mi(s.surfaceContainerHighest),outline:mi(s.outline),outlineVariant:mi(s.outlineVariant),inverseSurface:mi(s.inverseSurface),inverseOnSurface:mi(s.inverseOnSurface),inversePrimary:mi(s.inversePrimary),scrim:mi(s.scrim),shadow:mi(s.shadow),background:mi(s.background),onBackground:mi(s.onBackground)}}function ale(t,e="tonalSpot"){const n=vj(t),r=sle(n,e,!1,0),i=s=>{const a={};for(const l of iOe)a[l]=mi(s.tone(l));const o=Xs.fromInt(s.tone(50));return{hue:o.hue,chroma:o.chroma,tones:a}};return{primary:i(r.primaryPalette),secondary:i(r.secondaryPalette),tertiary:i(r.tertiaryPalette),neutral:i(r.neutralPalette),neutralVariant:i(r.neutralVariantPalette),error:i(r.errorPalette)}}class lOe{async*generateTheme(e){const n=e.variant||"tonalSpot",r=e.contrastLevel||0,i=e.includeDarkMode??!0;try{yield{stage:"analyzing",progress:10,message:"Analyzing source color..."};const s=ile(e.sourceColor);console.log("[HctThemeService] Source HCT:",s),yield{stage:"palettes",progress:25,message:"Generating tonal palettes..."};const a=ale(e.sourceColor,n);yield{stage:"palettes",progress:40,message:"Tonal palettes generated",data:{tonalPalettes:a}},yield{stage:"schemes",progress:50,message:"Generating color schemes..."};const o=m6(e.sourceColor,n,!1,r);let l;i&&(l=m6(e.sourceColor,n,!0,r)),yield{stage:"schemes",progress:65,message:"Color schemes generated",data:{lightScheme:o,darkScheme:l}},yield{stage:"tokens",progress:75,message:"Converting to design tokens..."};const c=await Dc.createTheme({project_id:e.projectId,name:e.themeName,status:"draft",supports_dark_mode:i}),u=this.convertToDesignTokens(e.projectId,c.id,e.sourceColor,a,o,l);yield{stage:"tokens",progress:85,message:`Generated ${u.length} design tokens`},yield{stage:"saving",progress:90,message:"Saving theme to database..."},await is.bulkUpsertTokens(u),yield{stage:"complete",progress:100,message:"Theme generation complete!",data:{themeId:c.id,themeName:e.themeName,sourceColor:e.sourceColor,variant:n,lightScheme:o,darkScheme:l,tonalPalettes:a,tokens:u,metadata:{generatedAt:new Date().toISOString(),algorithm:"hct",tokenCount:u.length,variant:n,contrastLevel:r}}}}catch(s){throw console.error("[HctThemeService] Generation failed:",s),s}}convertToDesignTokens(e,n,r,i,s,a){const o=[],l=["primary","secondary","tertiary","neutral","neutralVariant","error"];for(const h of l){const f=i[h],p=oOe(`#${f.tones[50].slice(1)}`),m=h==="neutralVariant"?"surface":h;for(const[v,A]of Object.entries(p))o.push({project_id:e,theme_id:n,name:`color.${m}.${v}`,type:"color",value:A,scope:"raw",css_variable:`--color-${m}-${v}`})}const c=Object.entries(s);for(const[h,f]of c){const p=sT(f);if(p){const m=h.replace(/([A-Z])/g,"-$1").toLowerCase();o.push({project_id:e,theme_id:n,name:`color.m3.${h}`,type:"color",value:p,scope:"semantic",css_variable:`--color-m3${m}`})}}if(a){const h=Object.entries(a);for(const[f,p]of h){const m=sT(p);if(m){const v=f.replace(/([A-Z])/g,"-$1").toLowerCase();o.push({project_id:e,theme_id:n,name:`color.m3.dark.${f}`,type:"color",value:m,scope:"semantic",css_variable:`--color-m3-dark${v}`})}}}const u=sT(r);return u&&o.push({project_id:e,theme_id:n,name:"color.source",type:"color",value:u,scope:"raw",css_variable:"--color-source"}),o}}function cOe(t,e="tonalSpot",n=!1,r=0){return m6(t,e,n,r)}function uOe(t,e="tonalSpot"){return ale(t,e)}const ole=()=>{const t=nh()&&!xf(),e=C.useRef(""),n=C.useRef(null),r=C.useCallback(s=>{if(t)return;const a=JSON.stringify(s.map(l=>({name:l.name,value:l.value,scope:l.scope})));if(e.current===a)return;const o=Ja.getIframe();if(!o?.contentWindow){console.warn(" [ThemeMessenger] iframe not ready, cannot send theme tokens");return}try{const l=Woe(s);o.contentWindow.postMessage({type:"UPDATE_THEME_TOKENS",styles:l},window.location.origin),e.current=a}catch(l){console.error(" [ThemeMessenger] Failed to send theme tokens:",l)}},[t]),i=C.useCallback(s=>{if(t)return;if(n.current===s){console.log(" [ThemeMessenger] Duplicate dark mode, skipping send");return}const a=Ja.getIframe();if(!a?.contentWindow){console.warn(" [ThemeMessenger] iframe not ready, cannot send dark mode");return}try{a.contentWindow.postMessage({type:"SET_DARK_MODE",isDark:s},window.location.origin),n.current=s,console.log(" [ThemeMessenger] Sent dark mode to Preview:",s)}catch(o){console.error(" [ThemeMessenger] Failed to send dark mode:",o)}},[t]);return{sendThemeTokens:r,sendDarkMode:i}};function dOe(){const{projectId:t}=Fb(),{sendThemeTokens:e,sendDarkMode:n}=ole(),r=je(te=>te.showOverlay),i=je(te=>te.setShowOverlay),s=je(te=>te.showGrid),a=je(te=>te.setShowGrid),o=je(te=>te.snapToGrid),l=je(te=>te.setSnapToGrid),c=je(te=>te.gridSize),u=je(te=>te.setGridSize),h=je(te=>te.showElementBorders),f=je(te=>te.setShowElementBorders),p=je(te=>te.showElementLabels),m=je(te=>te.setShowElementLabels),v=je(te=>te.overlayOpacity),A=je(te=>te.setOverlayOpacity),x=je(te=>te.themeMode),E=je(te=>te.setThemeMode),w=je(te=>te.uiScale),B=je(te=>te.setUiScale),D=je(te=>te.isRealtimeMode),T=je(te=>te.pendingChanges),M=je(te=>te.setRealtimeMode),R=T.size,k=_s(te=>te.activeTheme),L=_s(te=>te.loadActiveTheme),{themes:F}=pj({projectId:t||"",enableRealtime:!1}),[z,G]=we.useState(!1),V=async te=>{if(t)try{await Dc.activateTheme(te),await L(t);const{tokens:oe}=_s.getState();oe.length>0&&e(oe)}catch{}},q=()=>x==="dark"?Ww:x==="light"?VN:window.matchMedia("(prefers-color-scheme: dark)").matches?Ww:VN,O=[{value:"light",label:"Light"},{value:"dark",label:"Dark"},{value:"auto",label:"Auto (System)"}],H=[{value:"80",label:"80%"},{value:"100",label:"100%"},{value:"120",label:"120%"}],K=[{value:"8",label:"8px"},{value:"16",label:"16px"},{value:"24",label:"24px"}],X=te=>{const oe=parseInt(te);u(oe)},re=te=>{const oe=te;E(oe);const ae=oe==="dark"||oe==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches;n(ae)},J=te=>{const oe=parseInt(te);B(oe)},Z=()=>{G(!0),Hx.saveAllPendingChanges().then(()=>{}).catch(te=>{}).finally(()=>{G(!1)})},ee=te=>{M(te),te&&T.size>0&&Z()};return d.jsxs("div",{className:"settings-panel",children:[d.jsx(uf,{icon:d.jsx(gf,{size:16}),title:"Settings"}),d.jsxs("div",{className:"panel-settings",children:[d.jsxs(wl,{title:"Save Mode",children:[d.jsx(Hd,{label:"Auto Save",isSelected:D,onChange:ee,icon:LAe}),!D&&d.jsx(en,{onPress:Z,isDisabled:R===0||z,className:"react-aria-Button primary",children:z?"Saving...":`Save${R>0?` (${R})`:""}`})]}),d.jsx(wl,{title:"Preview & Overlay",children:d.jsx(Hd,{label:"Show Selection Overlay",isSelected:r,onChange:i,icon:Vw})}),d.jsxs(wl,{title:"Grid & Guides",children:[d.jsx(Hd,{label:"Show Grid",isSelected:s,onChange:a,icon:dY}),d.jsx(Hd,{label:"Snap to Grid",isSelected:o,onChange:l,icon:q0e}),d.jsx(Il,{label:"Grid Size",value:String(c),onChange:X,options:K,icon:kAe})]}),d.jsxs(wl,{title:"Element Visualization",children:[d.jsx(Hd,{label:"Show Element Borders",isSelected:h,onChange:f,icon:Ny}),d.jsx(Hd,{label:"Show Element Labels",isSelected:p,onChange:m,icon:jM}),d.jsx(WFe,{label:"Overlay Opacity",value:v,onChange:A,min:0,max:100,step:5,icon:bAe})]}),d.jsxs(wl,{title:"Theme & Appearance",children:[t&&F.length>0&&d.jsx(Il,{label:"Theme Select",value:k?.id||"",onChange:V,options:F.map(te=>({value:te.id,label:te.name})),icon:w1}),d.jsx(Il,{label:"Theme Mode",value:x,onChange:re,options:O,icon:q()}),d.jsx(Il,{label:"UI Scale",value:String(w),onChange:J,options:H,icon:cve})]})]})]})}function lle({isActive:t}){return t?d.jsx(dOe,{}):null}var Lw={exports:{}};var hOe=Lw.exports,x9;function fOe(){return x9||(x9=1,(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,u="__lodash_placeholder__",h=1,f=2,p=4,m=1,v=2,A=1,x=2,E=4,w=8,B=16,D=32,T=64,M=128,R=256,k=512,L=30,F="...",z=800,G=16,V=1,q=2,O=3,H=1/0,K=9007199254740991,X=17976931348623157e292,re=NaN,J=4294967295,Z=J-1,ee=J>>>1,te=[["ary",M],["bind",A],["bindKey",x],["curry",w],["curryRight",B],["flip",k],["partial",D],["partialRight",T],["rearg",R]],oe="[object Arguments]",ae="[object Array]",se="[object AsyncFunction]",fe="[object Boolean]",Ee="[object Date]",Be="[object DOMException]",_e="[object Error]",Ce="[object Function]",Se="[object GeneratorFunction]",Me="[object Map]",ce="[object Number]",$e="[object Null]",qe="[object Object]",ft="[object Promise]",Ie="[object Proxy]",ht="[object RegExp]",Ue="[object Set]",xt="[object String]",ve="[object Symbol]",ue="[object Undefined]",ke="[object WeakMap]",He="[object WeakSet]",Qe="[object ArrayBuffer]",Ke="[object DataView]",jt="[object Float32Array]",St="[object Float64Array]",Zt="[object Int8Array]",Bt="[object Int16Array]",at="[object Int32Array]",pt="[object Uint8Array]",Vt="[object Uint8ClampedArray]",qt="[object Uint16Array]",Wt="[object Uint32Array]",gn=/\b__p \+= '';/g,Ne=/\b(__p \+=) '' \+/g,Ht=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Qt=/&(?:amp|lt|gt|quot|#39);/g,$t=/[&<>"']/g,It=RegExp(Qt.source),Ct=RegExp($t.source),ln=/<%-([\s\S]+?)%>/g,lt=/<%([\s\S]+?)%>/g,_t=/<%=([\s\S]+?)%>/g,Pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zt=/^\w*$/,Wn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,In=/[\\^$.*+?()[\]{}|]/g,tn=RegExp(In.source),cn=/^\s+/,Zn=/\s/,pr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,zr=/\{\n\/\* \[wrapped with (.+)\] \*/,qi=/,? & /,Nr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Yn=/[()=,{}\[\]\/\s]/,Ii=/\\(\\)?/g,bs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,oo=/\w*$/,Nc=/^[-+]0x[0-9a-f]+$/i,Ad=/^0b[01]+$/i,Au=/^\[object .+?Constructor\]$/,Tl=/^0o[0-7]+$/i,ec=/^(?:0|[1-9]\d*)$/,Qi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,me=/($^)/,Ge=/['\n\r\u2028\u2029\\]/g,rt="\\ud800-\\udfff",nt="\\u0300-\\u036f",We="\\ufe20-\\ufe2f",Kt="\\u20d0-\\u20ff",nn=nt+We+Kt,un="\\u2700-\\u27bf",dn="a-z\\xdf-\\xf6\\xf8-\\xff",Bn="\\xac\\xb1\\xd7\\xf7",En="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Sn="\\u2000-\\u206f",ir=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",he="A-Z\\xc0-\\xd6\\xd8-\\xde",pe="\\ufe0e\\ufe0f",Te=Bn+En+Sn+ir,Le="[']",Fe="["+rt+"]",ct="["+Te+"]",vt="["+nn+"]",Tt="\\d+",Xt="["+un+"]",Dt="["+dn+"]",rn="[^"+rt+Te+Tt+un+dn+he+"]",sn="\\ud83c[\\udffb-\\udfff]",Un="(?:"+vt+"|"+sn+")",gr="[^"+rt+"]",qn="(?:\\ud83c[\\udde6-\\uddff]){2}",Lr="[\\ud800-\\udbff][\\udc00-\\udfff]",Ui="["+he+"]",ma="\\u200d",lo="(?:"+Dt+"|"+rn+")",Qp="(?:"+Ui+"|"+rn+")",yd="(?:"+Le+"(?:d|ll|m|re|s|t|ve))?",Zy="(?:"+Le+"(?:D|LL|M|RE|S|T|VE))?",ev=Un+"?",Up="["+pe+"]?",yu="(?:"+ma+"(?:"+[gr,qn,Lr].join("|")+")"+Up+ev+")*",Jg="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",G0="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ch=Up+ev+yu,uh="(?:"+[Xt,qn,Lr].join("|")+")"+ch,tv="(?:"+[gr+vt+"?",vt,qn,Lr,Fe].join("|")+")",V0=RegExp(Le,"g"),nv=RegExp(vt,"g"),vd=RegExp(sn+"(?="+sn+")|"+tv+ch,"g"),vu=RegExp([Ui+"?"+Dt+"+"+yd+"(?="+[ct,Ui,"$"].join("|")+")",Qp+"+"+Zy+"(?="+[ct,Ui+lo,"$"].join("|")+")",Ui+"?"+lo+"+"+yd,Ui+"+"+Zy,G0,Jg,Tt,uh].join("|"),"g"),W0=RegExp("["+ma+rt+nn+pe+"]"),Zg=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,dh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],K0=-1,pi={};pi[jt]=pi[St]=pi[Zt]=pi[Bt]=pi[at]=pi[pt]=pi[Vt]=pi[qt]=pi[Wt]=!0,pi[oe]=pi[ae]=pi[Qe]=pi[fe]=pi[Ke]=pi[Ee]=pi[_e]=pi[Ce]=pi[Me]=pi[ce]=pi[qe]=pi[ht]=pi[Ue]=pi[xt]=pi[ke]=!1;var ki={};ki[oe]=ki[ae]=ki[Qe]=ki[Ke]=ki[fe]=ki[Ee]=ki[jt]=ki[St]=ki[Zt]=ki[Bt]=ki[at]=ki[Me]=ki[ce]=ki[qe]=ki[ht]=ki[Ue]=ki[xt]=ki[ve]=ki[pt]=ki[Vt]=ki[qt]=ki[Wt]=!0,ki[_e]=ki[Ce]=ki[ke]=!1;var Sf={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},em={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rv={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},co={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},hh=parseFloat,tm=parseInt,tc=typeof N2=="object"&&N2&&N2.Object===Object&&N2,q0=typeof self=="object"&&self&&self.Object===Object&&self,ea=tc||q0||Function("return this")(),wf=e&&!e.nodeType&&e,nc=wf&&!0&&t&&!t.nodeType&&t,Hp=nc&&nc.exports===wf,Y0=Hp&&tc.process,Hi=(function(){try{var Ve=nc&&nc.require&&nc.require("util").types;return Ve||Y0&&Y0.binding&&Y0.binding("util")}catch{}})(),iv=Hi&&Hi.isArrayBuffer,sv=Hi&&Hi.isDate,nm=Hi&&Hi.isMap,av=Hi&&Hi.isRegExp,ov=Hi&&Hi.isSet,Gp=Hi&&Hi.isTypedArray;function jo(Ve,Et,gt){switch(gt.length){case 0:return Ve.call(Et);case 1:return Ve.call(Et,gt[0]);case 2:return Ve.call(Et,gt[0],gt[1]);case 3:return Ve.call(Et,gt[0],gt[1],gt[2])}return Ve.apply(Et,gt)}function Xb(Ve,Et,gt,on){for(var sr=-1,Fr=Ve==null?0:Ve.length;++sr<Fr;){var ms=Ve[sr];Et(on,ms,gt(ms),Ve)}return on}function el(Ve,Et){for(var gt=-1,on=Ve==null?0:Ve.length;++gt<on&&Et(Ve[gt],gt,Ve)!==!1;);return Ve}function Jb(Ve,Et){for(var gt=Ve==null?0:Ve.length;gt--&&Et(Ve[gt],gt,Ve)!==!1;);return Ve}function X0(Ve,Et){for(var gt=-1,on=Ve==null?0:Ve.length;++gt<on;)if(!Et(Ve[gt],gt,Ve))return!1;return!0}function xu(Ve,Et){for(var gt=-1,on=Ve==null?0:Ve.length,sr=0,Fr=[];++gt<on;){var ms=Ve[gt];Et(ms,gt,Ve)&&(Fr[sr++]=ms)}return Fr}function rm(Ve,Et){var gt=Ve==null?0:Ve.length;return!!gt&&tl(Ve,Et,0)>-1}function _f(Ve,Et,gt){for(var on=-1,sr=Ve==null?0:Ve.length;++on<sr;)if(gt(Et,Ve[on]))return!0;return!1}function ts(Ve,Et){for(var gt=-1,on=Ve==null?0:Ve.length,sr=Array(on);++gt<on;)sr[gt]=Et(Ve[gt],gt,Ve);return sr}function bu(Ve,Et){for(var gt=-1,on=Et.length,sr=Ve.length;++gt<on;)Ve[sr+gt]=Et[gt];return Ve}function J0(Ve,Et,gt,on){var sr=-1,Fr=Ve==null?0:Ve.length;for(on&&Fr&&(gt=Ve[++sr]);++sr<Fr;)gt=Et(gt,Ve[sr],sr,Ve);return gt}function Z0(Ve,Et,gt,on){var sr=Ve==null?0:Ve.length;for(on&&sr&&(gt=Ve[--sr]);sr--;)gt=Et(gt,Ve[sr],sr,Ve);return gt}function eA(Ve,Et){for(var gt=-1,on=Ve==null?0:Ve.length;++gt<on;)if(Et(Ve[gt],gt,Ve))return!0;return!1}var xd=Cu("length");function lv(Ve){return Ve.split("")}function rS(Ve){return Ve.match(Nr)||[]}function cv(Ve,Et,gt){var on;return gt(Ve,function(sr,Fr,ms){if(Et(sr,Fr,ms))return on=Fr,!1}),on}function Lc(Ve,Et,gt,on){for(var sr=Ve.length,Fr=gt+(on?1:-1);on?Fr--:++Fr<sr;)if(Et(Ve[Fr],Fr,Ve))return Fr;return-1}function tl(Ve,Et,gt){return Et===Et?Zb(Ve,Et,gt):Lc(Ve,tA,gt)}function uv(Ve,Et,gt,on){for(var sr=gt-1,Fr=Ve.length;++sr<Fr;)if(on(Ve[sr],Et))return sr;return-1}function tA(Ve){return Ve!==Ve}function fh(Ve,Et){var gt=Ve==null?0:Ve.length;return gt?sm(Ve,Et)/gt:re}function Cu(Ve){return function(Et){return Et==null?n:Et[Ve]}}function bd(Ve){return function(Et){return Ve==null?n:Ve[Et]}}function ka(Ve,Et,gt,on,sr){return sr(Ve,function(Fr,ms,yi){gt=on?(on=!1,Fr):Et(gt,Fr,ms,yi)}),gt}function im(Ve,Et){var gt=Ve.length;for(Ve.sort(Et);gt--;)Ve[gt]=Ve[gt].value;return Ve}function sm(Ve,Et){for(var gt,on=-1,sr=Ve.length;++on<sr;){var Fr=Et(Ve[on]);Fr!==n&&(gt=gt===n?Fr:gt+Fr)}return gt}function Vp(Ve,Et){for(var gt=-1,on=Array(Ve);++gt<Ve;)on[gt]=Et(gt);return on}function Wp(Ve,Et){return ts(Et,function(gt){return[gt,Ve[gt]]})}function Cd(Ve){return Ve&&Ve.slice(0,Bf(Ve)+1).replace(cn,"")}function uo(Ve){return function(Et){return Ve(Et)}}function nA(Ve,Et){return ts(Et,function(gt){return Ve[gt]})}function Ha(Ve,Et){return Ve.has(Et)}function rA(Ve,Et){for(var gt=-1,on=Ve.length;++gt<on&&tl(Et,Ve[gt],0)>-1;);return gt}function am(Ve,Et){for(var gt=Ve.length;gt--&&tl(Et,Ve[gt],0)>-1;);return gt}function Kp(Ve,Et){for(var gt=Ve.length,on=0;gt--;)Ve[gt]===Et&&++on;return on}var qp=bd(Sf),dv=bd(em);function Yp(Ve){return"\\"+co[Ve]}function hv(Ve,Et){return Ve==null?n:Ve[Et]}function Eu(Ve){return W0.test(Ve)}function If(Ve){return Zg.test(Ve)}function us(Ve){for(var Et,gt=[];!(Et=Ve.next()).done;)gt.push(Et.value);return gt}function iA(Ve){var Et=-1,gt=Array(Ve.size);return Ve.forEach(function(on,sr){gt[++Et]=[sr,on]}),gt}function fv(Ve,Et){return function(gt){return Ve(Et(gt))}}function Su(Ve,Et){for(var gt=-1,on=Ve.length,sr=0,Fr=[];++gt<on;){var ms=Ve[gt];(ms===Et||ms===u)&&(Ve[gt]=u,Fr[sr++]=gt)}return Fr}function ph(Ve){var Et=-1,gt=Array(Ve.size);return Ve.forEach(function(on){gt[++Et]=on}),gt}function gh(Ve){var Et=-1,gt=Array(Ve.size);return Ve.forEach(function(on){gt[++Et]=[on,on]}),gt}function Zb(Ve,Et,gt){for(var on=gt-1,sr=Ve.length;++on<sr;)if(Ve[on]===Et)return on;return-1}function eC(Ve,Et,gt){for(var on=gt+1;on--;)if(Ve[on]===Et)return on;return on}function rc(Ve){return Eu(Ve)?gv(Ve):xd(Ve)}function Zr(Ve){return Eu(Ve)?sA(Ve):lv(Ve)}function Bf(Ve){for(var Et=Ve.length;Et--&&Zn.test(Ve.charAt(Et)););return Et}var pv=bd(rv);function gv(Ve){for(var Et=vd.lastIndex=0;vd.test(Ve);)++Et;return Et}function sA(Ve){return Ve.match(vd)||[]}function aA(Ve){return Ve.match(vu)||[]}var Xp=(function Ve(Et){Et=Et==null?ea:Tf.defaults(ea.Object(),Et,Tf.pick(ea,dh));var gt=Et.Array,on=Et.Date,sr=Et.Error,Fr=Et.Function,ms=Et.Math,yi=Et.Object,Ga=Et.RegExp,mh=Et.String,ds=Et.TypeError,Jp=gt.prototype,wu=Fr.prototype,Fc=yi.prototype,jc=Et["__core-js_shared__"],Zp=wu.toString,gi=Fc.hasOwnProperty,Ed=0,om=(function(){var I=/[^.]+$/.exec(jc&&jc.keys&&jc.keys.IE_PROTO||"");return I?"Symbol(src)_1."+I:""})(),Aa=Fc.toString,Ah=Zp.call(yi),Na=ea._,Mf=Ga("^"+Zp.call(gi).replace(In,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Df=Hp?Et.Buffer:n,Oo=Et.Symbol,yh=Et.Uint8Array,Rf=Df?Df.allocUnsafe:n,Oc=fv(yi.getPrototypeOf,yi),lm=yi.create,Pf=Fc.propertyIsEnumerable,zc=Jp.splice,mv=Oo?Oo.isConcatSpreadable:n,ya=Oo?Oo.iterator:n,Qs=Oo?Oo.toStringTag:n,Ml=(function(){try{var I=Ea(yi,"defineProperty");return I({},"",{}),I}catch{}})(),ho=Et.clearTimeout!==ea.clearTimeout&&Et.clearTimeout,cm=on&&on.now!==ea.Date.now&&on.now,Sd=Et.setTimeout!==ea.setTimeout&&Et.setTimeout,kf=ms.ceil,um=ms.floor,Dl=yi.getOwnPropertySymbols,Av=Df?Df.isBuffer:n,zo=Et.isFinite,$c=Jp.join,Nf=fv(yi.keys,yi),Cs=ms.max,Us=ms.min,Rl=on.now,nl=Et.parseInt,Qc=ms.random,_u=Jp.reverse,ic=Ea(Et,"DataView"),Pl=Ea(Et,"Map"),dm=Ea(Et,"Promise"),wd=Ea(Et,"Set"),sc=Ea(Et,"WeakMap"),_d=Ea(yi,"create"),Hs=sc&&new sc,vi={},ei=wa(ic),Id=wa(Pl),La=wa(dm),oA=wa(wd),Kr=wa(sc),Lf=Oo?Oo.prototype:n,eg=Lf?Lf.valueOf:n,vh=Lf?Lf.toString:n;function Ae(I){if(ia(I)&&!Er(I)&&!(I instanceof mr)){if(I instanceof rl)return I;if(gi.call(I,"__wrapped__"))return Ql(I)}return new rl(I)}var xh=(function(){function I(){}return function(N){if(!Ps(N))return{};if(lm)return lm(N);I.prototype=N;var U=new I;return I.prototype=n,U}})();function bh(){}function rl(I,N){this.__wrapped__=I,this.__actions__=[],this.__chain__=!!N,this.__index__=0,this.__values__=n}Ae.templateSettings={escape:ln,evaluate:lt,interpolate:_t,variable:"",imports:{_:Ae}},Ae.prototype=bh.prototype,Ae.prototype.constructor=Ae,rl.prototype=xh(bh.prototype),rl.prototype.constructor=rl;function mr(I){this.__wrapped__=I,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=J,this.__views__=[]}function fo(){var I=new mr(this.__wrapped__);return I.__actions__=yo(this.__actions__),I.__dir__=this.__dir__,I.__filtered__=this.__filtered__,I.__iteratees__=yo(this.__iteratees__),I.__takeCount__=this.__takeCount__,I.__views__=yo(this.__views__),I}function Bd(){if(this.__filtered__){var I=new mr(this);I.__dir__=-1,I.__filtered__=!0}else I=this.clone(),I.__dir__*=-1;return I}function ac(){var I=this.__wrapped__.value(),N=this.__dir__,U=Er(I),ne=N<0,de=U?I.length:0,be=Sm(0,de,this.__views__),De=be.start,Oe=be.end,et=Oe-De,Nt=ne?Oe:De-1,Lt=this.__iteratees__,Ut=Lt.length,yn=0,Fn=Us(et,this.__takeCount__);if(!U||!ne&&de==et&&Fn==et)return Pv(I,this.__actions__);var or=[];e:for(;et--&&yn<Fn;){Nt+=N;for(var Yr=-1,lr=I[Nt];++Yr<Ut;){var hi=Lt[Yr],Si=hi.iteratee,jd=hi.type,su=Si(lr);if(jd==q)lr=su;else if(!su){if(jd==V)continue e;break e}}or[yn++]=lr}return or}mr.prototype=xh(bh.prototype),mr.prototype.constructor=mr;function $o(I){var N=-1,U=I==null?0:I.length;for(this.clear();++N<U;){var ne=I[N];this.set(ne[0],ne[1])}}function lA(){this.__data__=_d?_d(null):{},this.size=0}function Ch(I){var N=this.has(I)&&delete this.__data__[I];return this.size-=N?1:0,N}function tg(I){var N=this.__data__;if(_d){var U=N[I];return U===l?n:U}return gi.call(N,I)?N[I]:n}function Ff(I){var N=this.__data__;return _d?N[I]!==n:gi.call(N,I)}function Fa(I,N){var U=this.__data__;return this.size+=this.has(I)?0:1,U[I]=_d&&N===n?l:N,this}$o.prototype.clear=lA,$o.prototype.delete=Ch,$o.prototype.get=tg,$o.prototype.has=Ff,$o.prototype.set=Fa;function kl(I){var N=-1,U=I==null?0:I.length;for(this.clear();++N<U;){var ne=I[N];this.set(ne[0],ne[1])}}function yv(){this.__data__=[],this.size=0}function tC(I){var N=this.__data__,U=Hn(N,I);if(U<0)return!1;var ne=N.length-1;return U==ne?N.pop():zc.call(N,U,1),--this.size,!0}function nC(I){var N=this.__data__,U=Hn(N,I);return U<0?n:N[U][1]}function vv(I){return Hn(this.__data__,I)>-1}function Nn(I,N){var U=this.__data__,ne=Hn(U,I);return ne<0?(++this.size,U.push([I,N])):U[ne][1]=N,this}kl.prototype.clear=yv,kl.prototype.delete=tC,kl.prototype.get=nC,kl.prototype.has=vv,kl.prototype.set=Nn;function Uc(I){var N=-1,U=I==null?0:I.length;for(this.clear();++N<U;){var ne=I[N];this.set(ne[0],ne[1])}}function Va(){this.size=0,this.__data__={hash:new $o,map:new(Pl||kl),string:new $o}}function jf(I){var N=Lh(this,I).delete(I);return this.size-=N?1:0,N}function xv(I){return Lh(this,I).get(I)}function Td(I){return Lh(this,I).has(I)}function Hc(I,N){var U=Lh(this,I),ne=U.size;return U.set(I,N),this.size+=U.size==ne?0:1,this}Uc.prototype.clear=Va,Uc.prototype.delete=jf,Uc.prototype.get=xv,Uc.prototype.has=Td,Uc.prototype.set=Hc;function oc(I){var N=-1,U=I==null?0:I.length;for(this.__data__=new Uc;++N<U;)this.add(I[N])}function bv(I){return this.__data__.set(I,l),this}function Cv(I){return this.__data__.has(I)}oc.prototype.add=oc.prototype.push=bv,oc.prototype.has=Cv;function lc(I){var N=this.__data__=new kl(I);this.size=N.size}function Eh(){this.__data__=new kl,this.size=0}function Iu(I){var N=this.__data__,U=N.delete(I);return this.size=N.size,U}function ng(I){return this.__data__.get(I)}function cA(I){return this.__data__.has(I)}function Sh(I,N){var U=this.__data__;if(U instanceof kl){var ne=U.__data__;if(!Pl||ne.length<i-1)return ne.push([I,N]),this.size=++U.size,this;U=this.__data__=new Uc(ne)}return U.set(I,N),this.size=U.size,this}lc.prototype.clear=Eh,lc.prototype.delete=Iu,lc.prototype.get=ng,lc.prototype.has=cA,lc.prototype.set=Sh;function rg(I,N){var U=Er(I),ne=!U&&Nm(I),de=!U&&!ne&&Ag(I),be=!U&&!ne&&!de&&yg(I),De=U||ne||de||be,Oe=De?Vp(I.length,mh):[],et=Oe.length;for(var Nt in I)(N||gi.call(I,Nt))&&!(De&&(Nt=="length"||de&&(Nt=="offset"||Nt=="parent")||be&&(Nt=="buffer"||Nt=="byteLength"||Nt=="byteOffset")||Ol(Nt,et)))&&Oe.push(Nt);return Oe}function cc(I){var N=I.length;return N?I[lg(0,N-1)]:n}function hm(I,N){return Jc(yo(I),Vc(N,0,I.length))}function rC(I){return Jc(yo(I))}function fm(I,N,U){(U!==n&&!nu(I[N],U)||U===n&&!(N in I))&&po(I,N,U)}function Gc(I,N,U){var ne=I[N];(!(gi.call(I,N)&&nu(ne,U))||U===n&&!(N in I))&&po(I,N,U)}function Hn(I,N){for(var U=I.length;U--;)if(nu(I[U][0],N))return U;return-1}function uA(I,N,U,ne){return Bu(I,function(de,be,De){N(ne,de,U(de),De)}),ne}function dA(I,N){return I&&pc(N,_o(N),I)}function wh(I,N){return I&&pc(N,Cc(N),I)}function po(I,N,U){N=="__proto__"&&Ml?Ml(I,N,{configurable:!0,enumerable:!0,value:U,writable:!0}):I[N]=U}function ig(I,N){for(var U=-1,ne=N.length,de=gt(ne),be=I==null;++U<ne;)de[U]=be?n:vg(I,N[U]);return de}function Vc(I,N,U){return I===I&&(U!==n&&(I=I<=U?I:U),N!==n&&(I=I>=N?I:N)),I}function go(I,N,U,ne,de,be){var De,Oe=N&h,et=N&f,Nt=N&p;if(U&&(De=de?U(I,ne,de,be):U(I)),De!==n)return De;if(!Ps(I))return I;var Lt=Er(I);if(Lt){if(De=bo(I),!Oe)return yo(I,De)}else{var Ut=ci(I),yn=Ut==Ce||Ut==Se;if(Ag(I))return Lv(I,Oe);if(Ut==qe||Ut==oe||yn&&!de){if(De=et||yn?{}:$a(I),!Oe)return et?jv(I,wh(De,I)):Fv(I,dA(De,I))}else{if(!ki[Ut])return de?I:{};De=ui(I,Ut,Oe)}}be||(be=new lc);var Fn=be.get(I);if(Fn)return Fn;be.set(I,De),Zv(I)?I.forEach(function(lr){De.add(go(lr,N,U,lr,I,be))}):i2(I)&&I.forEach(function(lr,hi){De.set(hi,go(lr,N,U,hi,I,be))});var or=Nt?et?Qo:xo:et?Cc:_o,Yr=Lt?n:or(I);return el(Yr||I,function(lr,hi){Yr&&(hi=lr,lr=I[hi]),Gc(De,hi,go(lr,N,U,hi,I,be))}),De}function sg(I){var N=_o(I);return function(U){return _h(U,I,N)}}function _h(I,N,U){var ne=U.length;if(I==null)return!ne;for(I=yi(I);ne--;){var de=U[ne],be=N[de],De=I[de];if(De===n&&!(de in I)||!be(De))return!1}return!0}function Ev(I,N,U){if(typeof I!="function")throw new ds(a);return Oh(function(){I.apply(n,U)},N)}function uc(I,N,U,ne){var de=-1,be=rm,De=!0,Oe=I.length,et=[],Nt=N.length;if(!Oe)return et;U&&(N=ts(N,uo(U))),ne?(be=_f,De=!1):N.length>=i&&(be=Ha,De=!1,N=new oc(N));e:for(;++de<Oe;){var Lt=I[de],Ut=U==null?Lt:U(Lt);if(Lt=ne||Lt!==0?Lt:0,De&&Ut===Ut){for(var yn=Nt;yn--;)if(N[yn]===Ut)continue e;et.push(Lt)}else be(N,Ut,ne)||et.push(Lt)}return et}var Bu=Ov(xa),hA=Ov(ba,!0);function Tu(I,N){var U=!0;return Bu(I,function(ne,de,be){return U=!!N(ne,de,be),U}),U}function dc(I,N,U){for(var ne=-1,de=I.length;++ne<de;){var be=I[ne],De=N(be);if(De!=null&&(Oe===n?De===De&&!bc(De):U(De,Oe)))var Oe=De,et=be}return et}function Ih(I,N,U,ne){var de=I.length;for(U=ar(U),U<0&&(U=-U>de?0:de+U),ne=ne===n||ne>de?de:ar(ne),ne<0&&(ne+=de),ne=U>ne?0:xS(ne);U<ne;)I[U++]=N;return I}function pm(I,N){var U=[];return Bu(I,function(ne,de,be){N(ne,de,be)&&U.push(ne)}),U}function va(I,N,U,ne,de){var be=-1,De=I.length;for(U||(U=mc),de||(de=[]);++be<De;){var Oe=I[be];N>0&&U(Oe)?N>1?va(Oe,N-1,U,ne,de):bu(de,Oe):ne||(de[de.length]=Oe)}return de}var Of=TA(),Bh=TA(!0);function xa(I,N){return I&&Of(I,N,_o)}function ba(I,N){return I&&Bh(I,N,_o)}function mo(I,N){return xu(N,function(U){return ru(I[U])})}function Gs(I,N){N=Ll(N,I);for(var U=0,ne=N.length;I!=null&&U<ne;)I=I[Sa(N[U++])];return U&&U==ne?I:n}function fA(I,N,U){var ne=N(I);return Er(I)?ne:bu(ne,U(I))}function Wa(I){return I==null?I===n?ue:$e:Qs&&Qs in yi(I)?qc(I):jh(I)}function ja(I,N){return I>N}function Ca(I,N){return I!=null&&gi.call(I,N)}function hc(I,N){return I!=null&&N in yi(I)}function Th(I,N,U){return I>=Us(N,U)&&I<Cs(N,U)}function gm(I,N,U){for(var ne=U?_f:rm,de=I[0].length,be=I.length,De=be,Oe=gt(be),et=1/0,Nt=[];De--;){var Lt=I[De];De&&N&&(Lt=ts(Lt,uo(N))),et=Us(Lt.length,et),Oe[De]=!U&&(N||de>=120&&Lt.length>=120)?new oc(De&&Lt):n}Lt=I[0];var Ut=-1,yn=Oe[0];e:for(;++Ut<de&&Nt.length<et;){var Fn=Lt[Ut],or=N?N(Fn):Fn;if(Fn=U||Fn!==0?Fn:0,!(yn?Ha(yn,or):ne(Nt,or,U))){for(De=be;--De;){var Yr=Oe[De];if(!(Yr?Ha(Yr,or):ne(I[De],or,U)))continue e}yn&&yn.push(or),Nt.push(Fn)}}return Nt}function iC(I,N,U,ne){return xa(I,function(de,be,De){N(ne,U(de),be,De)}),ne}function Nl(I,N,U){N=Ll(N,I),I=qf(I,N);var ne=I==null?I:I[Sa(di(N))];return ne==null?n:jo(ne,I,U)}function il(I){return ia(I)&&Wa(I)==oe}function Ts(I){return ia(I)&&Wa(I)==Qe}function pA(I){return ia(I)&&Wa(I)==Ee}function Oa(I,N,U,ne,de){return I===N?!0:I==null||N==null||!ia(I)&&!ia(N)?I!==I&&N!==N:tr(I,N,U,ne,Oa,de)}function tr(I,N,U,ne,de,be){var De=Er(I),Oe=Er(N),et=De?ae:ci(I),Nt=Oe?ae:ci(N);et=et==oe?qe:et,Nt=Nt==oe?qe:Nt;var Lt=et==qe,Ut=Nt==qe,yn=et==Nt;if(yn&&Ag(I)){if(!Ag(N))return!1;De=!0,Lt=!1}if(yn&&!Lt)return be||(be=new lc),De||yg(I)?Em(I,N,U,ne,de,be):hC(I,N,et,U,ne,de,be);if(!(U&m)){var Fn=Lt&&gi.call(I,"__wrapped__"),or=Ut&&gi.call(N,"__wrapped__");if(Fn||or){var Yr=Fn?I.value():I,lr=or?N.value():N;return be||(be=new lc),de(Yr,lr,U,ne,be)}}return yn?(be||(be=new lc),Hv(I,N,U,ne,de,be)):!1}function Gi(I){return ia(I)&&ci(I)==Me}function Ms(I,N,U,ne){var de=U.length,be=de,De=!ne;if(I==null)return!be;for(I=yi(I);de--;){var Oe=U[de];if(De&&Oe[2]?Oe[1]!==I[Oe[0]]:!(Oe[0]in I))return!1}for(;++de<be;){Oe=U[de];var et=Oe[0],Nt=I[et],Lt=Oe[1];if(De&&Oe[2]){if(Nt===n&&!(et in I))return!1}else{var Ut=new lc;if(ne)var yn=ne(Nt,Lt,et,I,N,Ut);if(!(yn===n?Oa(Lt,Nt,m|v,ne,Ut):yn))return!1}}return!0}function mm(I){if(!Ps(I)||Kf(I))return!1;var N=ru(I)?Mf:Au;return N.test(wa(I))}function Mu(I){return ia(I)&&Wa(I)==ht}function zf(I){return ia(I)&&ci(I)==Ue}function gA(I){return ia(I)&&vC(I.length)&&!!pi[Wa(I)]}function ag(I){return typeof I=="function"?I:I==null?Vl:typeof I=="object"?Er(I)?Sv(I[0],I[1]):AA(I):ye(I)}function fc(I){if(!Md(I))return Nf(I);var N=[];for(var U in yi(I))gi.call(I,U)&&U!="constructor"&&N.push(U);return N}function iS(I){if(!Ps(I))return cl(I);var N=Md(I),U=[];for(var ne in I)ne=="constructor"&&(N||!gi.call(I,ne))||U.push(ne);return U}function As(I,N){return I<N}function mA(I,N){var U=-1,ne=xc(I)?gt(I.length):[];return Bu(I,function(de,be,De){ne[++U]=N(de,be,De)}),ne}function AA(I){var N=Uo(I);return N.length==1&&N[0][2]?Dd(N[0][0],N[0][1]):function(U){return U===I||Ms(U,I,N)}}function Sv(I,N){return ku(I)&&Ac(N)?Dd(Sa(I),N):function(U){var ne=vg(U,I);return ne===n&&ne===N?CS(U,I):Oa(N,ne,m|v)}}function Am(I,N,U,ne,de){I!==N&&Of(N,function(be,De){if(de||(de=new lc),Ps(be))sS(I,N,De,U,Am,ne,de);else{var Oe=ne?ne(xi(I,De),be,De+"",I,N,de):n;Oe===n&&(Oe=be),fm(I,De,Oe)}},Cc)}function sS(I,N,U,ne,de,be,De){var Oe=xi(I,U),et=xi(N,U),Nt=De.get(et);if(Nt){fm(I,U,Nt);return}var Lt=be?be(Oe,et,U+"",I,N,De):n,Ut=Lt===n;if(Ut){var yn=Er(et),Fn=!yn&&Ag(et),or=!yn&&!Fn&&yg(et);Lt=et,yn||Fn||or?Er(Oe)?Lt=Oe:Ia(Oe)?Lt=yo(Oe):Fn?(Ut=!1,Lt=Lv(et,!0)):or?(Ut=!1,Lt=ol(et,!0)):Lt=[]:Xv(et)||Nm(et)?(Lt=Oe,Nm(Oe)?Lt=xC(Oe):(!Ps(Oe)||ru(Oe))&&(Lt=$a(et))):Ut=!1}Ut&&(De.set(et,Lt),de(Lt,et,ne,be,De),De.delete(et)),fm(I,U,Lt)}function yA(I,N){var U=I.length;if(U)return N+=N<0?U:0,Ol(N,U)?I[N]:n}function vA(I,N,U){N.length?N=ts(N,function(be){return Er(be)?function(De){return Gs(De,be.length===1?be[0]:be)}:be}):N=[Vl];var ne=-1;N=ts(N,uo(zn()));var de=mA(I,function(be,De,Oe){var et=ts(N,function(Nt){return Nt(be)});return{criteria:et,index:++ne,value:be}});return im(de,function(be,De){return _A(be,De,U)})}function wv(I,N){return Ao(I,N,function(U,ne){return CS(I,ne)})}function Ao(I,N,U){for(var ne=-1,de=N.length,be={};++ne<de;){var De=N[ne],Oe=Gs(I,De);U(Oe,De)&&Qf(be,Ll(De,I),Oe)}return be}function Vs(I){return function(N){return Gs(N,I)}}function $f(I,N,U,ne){var de=ne?uv:tl,be=-1,De=N.length,Oe=I;for(I===N&&(N=yo(N)),U&&(Oe=ts(I,uo(U)));++be<De;)for(var et=0,Nt=N[be],Lt=U?U(Nt):Nt;(et=de(Oe,Lt,et,ne))>-1;)Oe!==I&&zc.call(Oe,et,1),zc.call(I,et,1);return I}function og(I,N){for(var U=I?N.length:0,ne=U-1;U--;){var de=N[U];if(U==ne||de!==be){var be=de;Ol(de)?zc.call(I,de,1):cg(I,de)}}return I}function lg(I,N){return I+um(Qc()*(N-I+1))}function _v(I,N,U,ne){for(var de=-1,be=Cs(kf((N-I)/(U||1)),0),De=gt(be);be--;)De[ne?be:++de]=I,I+=U;return De}function Wc(I,N){var U="";if(!I||N<1||N>K)return U;do N%2&&(U+=I),N=um(N/2),N&&(I+=I);while(N);return U}function _r(I,N){return Rd(Nu(I,N,Vl),I+"")}function Iv(I){return cc(VA(I))}function xA(I,N){var U=VA(I);return Jc(U,Vc(N,0,U.length))}function Qf(I,N,U,ne){if(!Ps(I))return I;N=Ll(N,I);for(var de=-1,be=N.length,De=be-1,Oe=I;Oe!=null&&++de<be;){var et=Sa(N[de]),Nt=U;if(et==="__proto__"||et==="constructor"||et==="prototype")return I;if(de!=De){var Lt=Oe[et];Nt=ne?ne(Lt,et,Oe):n,Nt===n&&(Nt=Ps(Lt)?Lt:Ol(N[de+1])?[]:{})}Gc(Oe,et,Nt),Oe=Oe[et]}return I}var Bv=Hs?function(I,N){return Hs.set(I,N),I}:Vl,Tv=Ml?function(I,N){return Ml(I,"toString",{configurable:!0,enumerable:!1,value:KA(N),writable:!0})}:Vl;function Mv(I){return Jc(VA(I))}function sl(I,N,U){var ne=-1,de=I.length;N<0&&(N=-N>de?0:de+N),U=U>de?de:U,U<0&&(U+=de),de=N>U?0:U-N>>>0,N>>>=0;for(var be=gt(de);++ne<de;)be[ne]=I[ne+N];return be}function bA(I,N){var U;return Bu(I,function(ne,de,be){return U=N(ne,de,be),!U}),!!U}function Mh(I,N,U){var ne=0,de=I==null?ne:I.length;if(typeof N=="number"&&N===N&&de<=ee){for(;ne<de;){var be=ne+de>>>1,De=I[be];De!==null&&!bc(De)&&(U?De<=N:De<N)?ne=be+1:de=be}return de}return CA(I,N,Vl,U)}function CA(I,N,U,ne){var de=0,be=I==null?0:I.length;if(be===0)return 0;N=U(N);for(var De=N!==N,Oe=N===null,et=bc(N),Nt=N===n;de<be;){var Lt=um((de+be)/2),Ut=U(I[Lt]),yn=Ut!==n,Fn=Ut===null,or=Ut===Ut,Yr=bc(Ut);if(De)var lr=ne||or;else Nt?lr=or&&(ne||yn):Oe?lr=or&&yn&&(ne||!Fn):et?lr=or&&yn&&!Fn&&(ne||!Yr):Fn||Yr?lr=!1:lr=ne?Ut<=N:Ut<N;lr?de=Lt+1:be=Lt}return Us(be,Z)}function sC(I,N){for(var U=-1,ne=I.length,de=0,be=[];++U<ne;){var De=I[U],Oe=N?N(De):De;if(!U||!nu(Oe,et)){var et=Oe;be[de++]=De===0?0:De}}return be}function Dv(I){return typeof I=="number"?I:bc(I)?re:+I}function al(I){if(typeof I=="string")return I;if(Er(I))return ts(I,al)+"";if(bc(I))return vh?vh.call(I):"";var N=I+"";return N=="0"&&1/I==-H?"-0":N}function Du(I,N,U){var ne=-1,de=rm,be=I.length,De=!0,Oe=[],et=Oe;if(U)De=!1,de=_f;else if(be>=i){var Nt=N?null:dC(I);if(Nt)return ph(Nt);De=!1,de=Ha,et=new oc}else et=N?[]:Oe;e:for(;++ne<be;){var Lt=I[ne],Ut=N?N(Lt):Lt;if(Lt=U||Lt!==0?Lt:0,De&&Ut===Ut){for(var yn=et.length;yn--;)if(et[yn]===Ut)continue e;N&&et.push(Ut),Oe.push(Lt)}else de(et,Ut,U)||(et!==Oe&&et.push(Ut),Oe.push(Lt))}return Oe}function cg(I,N){return N=Ll(N,I),I=qf(I,N),I==null||delete I[Sa(di(N))]}function Rv(I,N,U,ne){return Qf(I,N,U(Gs(I,N)),ne)}function ym(I,N,U,ne){for(var de=I.length,be=ne?de:-1;(ne?be--:++be<de)&&N(I[be],be,I););return U?sl(I,ne?0:be,ne?be+1:de):sl(I,ne?be+1:0,ne?de:be)}function Pv(I,N){var U=I;return U instanceof mr&&(U=U.value()),J0(N,function(ne,de){return de.func.apply(de.thisArg,bu([ne],de.args))},U)}function EA(I,N,U){var ne=I.length;if(ne<2)return ne?Du(I[0]):[];for(var de=-1,be=gt(ne);++de<ne;)for(var De=I[de],Oe=-1;++Oe<ne;)Oe!=de&&(be[de]=uc(be[de]||De,I[Oe],N,U));return Du(va(be,1),N,U)}function kv(I,N,U){for(var ne=-1,de=I.length,be=N.length,De={};++ne<de;){var Oe=ne<be?N[ne]:n;U(De,I[ne],Oe)}return De}function Nv(I){return Ia(I)?I:[]}function SA(I){return typeof I=="function"?I:Vl}function Ll(I,N){return Er(I)?I:ku(I,N)?[I]:kA(Ki(I))}var aC=_r;function Kc(I,N,U){var ne=I.length;return U=U===n?ne:U,!N&&U>=ne?I:sl(I,N,U)}var vm=ho||function(I){return ea.clearTimeout(I)};function Lv(I,N){if(N)return I.slice();var U=I.length,ne=Rf?Rf(U):new I.constructor(U);return I.copy(ne),ne}function xm(I){var N=new I.constructor(I.byteLength);return new yh(N).set(new yh(I)),N}function oC(I,N){var U=N?xm(I.buffer):I.buffer;return new I.constructor(U,I.byteOffset,I.byteLength)}function lC(I){var N=new I.constructor(I.source,oo.exec(I));return N.lastIndex=I.lastIndex,N}function cC(I){return eg?yi(eg.call(I)):{}}function ol(I,N){var U=N?xm(I.buffer):I.buffer;return new I.constructor(U,I.byteOffset,I.length)}function wA(I,N){if(I!==N){var U=I!==n,ne=I===null,de=I===I,be=bc(I),De=N!==n,Oe=N===null,et=N===N,Nt=bc(N);if(!Oe&&!Nt&&!be&&I>N||be&&De&&et&&!Oe&&!Nt||ne&&De&&et||!U&&et||!de)return 1;if(!ne&&!be&&!Nt&&I<N||Nt&&U&&de&&!ne&&!be||Oe&&U&&de||!De&&de||!et)return-1}return 0}function _A(I,N,U){for(var ne=-1,de=I.criteria,be=N.criteria,De=de.length,Oe=U.length;++ne<De;){var et=wA(de[ne],be[ne]);if(et){if(ne>=Oe)return et;var Nt=U[ne];return et*(Nt=="desc"?-1:1)}}return I.index-N.index}function bm(I,N,U,ne){for(var de=-1,be=I.length,De=U.length,Oe=-1,et=N.length,Nt=Cs(be-De,0),Lt=gt(et+Nt),Ut=!ne;++Oe<et;)Lt[Oe]=N[Oe];for(;++de<De;)(Ut||de<be)&&(Lt[U[de]]=I[de]);for(;Nt--;)Lt[Oe++]=I[de++];return Lt}function IA(I,N,U,ne){for(var de=-1,be=I.length,De=-1,Oe=U.length,et=-1,Nt=N.length,Lt=Cs(be-Oe,0),Ut=gt(Lt+Nt),yn=!ne;++de<Lt;)Ut[de]=I[de];for(var Fn=de;++et<Nt;)Ut[Fn+et]=N[et];for(;++De<Oe;)(yn||de<be)&&(Ut[Fn+U[De]]=I[de++]);return Ut}function yo(I,N){var U=-1,ne=I.length;for(N||(N=gt(ne));++U<ne;)N[U]=I[U];return N}function pc(I,N,U,ne){var de=!U;U||(U={});for(var be=-1,De=N.length;++be<De;){var Oe=N[be],et=ne?ne(U[Oe],I[Oe],Oe,U,I):n;et===n&&(et=I[Oe]),de?po(U,Oe,et):Gc(U,Oe,et)}return U}function Fv(I,N){return pc(I,gc(I),N)}function jv(I,N){return pc(I,Fl(I),N)}function BA(I,N){return function(U,ne){var de=Er(U)?Xb:uA,be=N?N():{};return de(U,I,zn(ne,2),be)}}function Dh(I){return _r(function(N,U){var ne=-1,de=U.length,be=de>1?U[de-1]:n,De=de>2?U[2]:n;for(be=I.length>3&&typeof be=="function"?(de--,be):n,De&&Xi(U[0],U[1],De)&&(be=de<3?n:be,de=1),N=yi(N);++ne<de;){var Oe=U[ne];Oe&&I(N,Oe,ne,be)}return N})}function Ov(I,N){return function(U,ne){if(U==null)return U;if(!xc(U))return I(U,ne);for(var de=U.length,be=N?de:-1,De=yi(U);(N?be--:++be<de)&&ne(De[be],be,De)!==!1;);return U}}function TA(I){return function(N,U,ne){for(var de=-1,be=yi(N),De=ne(N),Oe=De.length;Oe--;){var et=De[I?Oe:++de];if(U(be[et],et,be)===!1)break}return N}}function zv(I,N,U){var ne=N&A,de=Cm(I);function be(){var De=this&&this!==ea&&this instanceof be?de:I;return De.apply(ne?U:this,arguments)}return be}function za(I){return function(N){N=Ki(N);var U=Eu(N)?Zr(N):n,ne=U?U[0]:N.charAt(0),de=U?Kc(U,1).join(""):N.slice(1);return ne[I]()+de}}function Rh(I){return function(N){return J0(D2(WA(N).replace(V0,"")),I,"")}}function Cm(I){return function(){var N=arguments;switch(N.length){case 0:return new I;case 1:return new I(N[0]);case 2:return new I(N[0],N[1]);case 3:return new I(N[0],N[1],N[2]);case 4:return new I(N[0],N[1],N[2],N[3]);case 5:return new I(N[0],N[1],N[2],N[3],N[4]);case 6:return new I(N[0],N[1],N[2],N[3],N[4],N[5]);case 7:return new I(N[0],N[1],N[2],N[3],N[4],N[5],N[6])}var U=xh(I.prototype),ne=I.apply(U,N);return Ps(ne)?ne:U}}function aS(I,N,U){var ne=Cm(I);function de(){for(var be=arguments.length,De=gt(be),Oe=be,et=Yi(de);Oe--;)De[Oe]=arguments[Oe];var Nt=be<3&&De[0]!==et&&De[be-1]!==et?[]:Su(De,et);if(be-=Nt.length,be<U)return Gf(I,N,Ph,de.placeholder,n,De,Nt,n,n,U-be);var Lt=this&&this!==ea&&this instanceof de?ne:I;return jo(Lt,this,De)}return de}function $v(I){return function(N,U,ne){var de=yi(N);if(!xc(N)){var be=zn(U,3);N=_o(N),U=function(Oe){return be(de[Oe],Oe,de)}}var De=I(N,U,ne);return De>-1?de[be?N[De]:De]:n}}function Uf(I){return ll(function(N){var U=N.length,ne=U,de=rl.prototype.thru;for(I&&N.reverse();ne--;){var be=N[ne];if(typeof be!="function")throw new ds(a);if(de&&!De&&Vi(be)=="wrapper")var De=new rl([],!0)}for(ne=De?ne:U;++ne<U;){be=N[ne];var Oe=Vi(be),et=Oe=="wrapper"?ug(be):n;et&&Fh(et[0])&&et[1]==(M|w|D|R)&&!et[4].length&&et[9]==1?De=De[Vi(et[0])].apply(De,et[3]):De=be.length==1&&Fh(be)?De[Oe]():De.thru(be)}return function(){var Nt=arguments,Lt=Nt[0];if(De&&Nt.length==1&&Er(Lt))return De.plant(Lt).value();for(var Ut=0,yn=U?N[Ut].apply(this,Nt):Lt;++Ut<U;)yn=N[Ut].call(this,yn);return yn}})}function Ph(I,N,U,ne,de,be,De,Oe,et,Nt){var Lt=N&M,Ut=N&A,yn=N&x,Fn=N&(w|B),or=N&k,Yr=yn?n:Cm(I);function lr(){for(var hi=arguments.length,Si=gt(hi),jd=hi;jd--;)Si[jd]=arguments[jd];if(Fn)var su=Yi(lr),Od=Kp(Si,su);if(ne&&(Si=bm(Si,ne,de,Fn)),be&&(Si=IA(Si,be,De,Fn)),hi-=Od,Fn&&hi<Nt){var Ka=Su(Si,su);return Gf(I,N,Ph,lr.placeholder,U,Si,Ka,Oe,et,Nt-hi)}var sp=Ut?U:this,Fm=yn?sp[I]:I;return hi=Si.length,Oe?Si=Im(Si,Oe):or&&hi>1&&Si.reverse(),Lt&&et<hi&&(Si.length=et),this&&this!==ea&&this instanceof lr&&(Fm=Yr||Cm(Fm)),Fm.apply(sp,Si)}return lr}function Ru(I,N){return function(U,ne){return iC(U,I,N(ne),{})}}function Pu(I,N){return function(U,ne){var de;if(U===n&&ne===n)return N;if(U!==n&&(de=U),ne!==n){if(de===n)return ne;typeof U=="string"||typeof ne=="string"?(U=al(U),ne=al(ne)):(U=Dv(U),ne=Dv(ne)),de=I(U,ne)}return de}}function vo(I){return ll(function(N){return N=ts(N,uo(zn())),_r(function(U){var ne=this;return I(N,function(de){return jo(de,ne,U)})})})}function kh(I,N){N=N===n?" ":al(N);var U=N.length;if(U<2)return U?Wc(N,I):N;var ne=Wc(N,kf(I/rc(N)));return Eu(N)?Kc(Zr(ne),0,I).join(""):ne.slice(0,I)}function uC(I,N,U,ne){var de=N&A,be=Cm(I);function De(){for(var Oe=-1,et=arguments.length,Nt=-1,Lt=ne.length,Ut=gt(Lt+et),yn=this&&this!==ea&&this instanceof De?be:I;++Nt<Lt;)Ut[Nt]=ne[Nt];for(;et--;)Ut[Nt++]=arguments[++Oe];return jo(yn,de?U:this,Ut)}return De}function Hf(I){return function(N,U,ne){return ne&&typeof ne!="number"&&Xi(N,U,ne)&&(U=ne=n),N=rp(N),U===n?(U=N,N=0):U=rp(U),ne=ne===n?N<U?1:-1:rp(ne),_v(N,U,ne,I)}}function Nh(I){return function(N,U){return typeof N=="string"&&typeof U=="string"||(N=iu(N),U=iu(U)),I(N,U)}}function Gf(I,N,U,ne,de,be,De,Oe,et,Nt){var Lt=N&w,Ut=Lt?De:n,yn=Lt?n:De,Fn=Lt?be:n,or=Lt?n:be;N|=Lt?D:T,N&=~(Lt?T:D),N&E||(N&=-4);var Yr=[I,N,de,Fn,Ut,or,yn,Oe,et,Nt],lr=U.apply(n,Yr);return Fh(I)&&PA(lr,Yr),lr.placeholder=ne,Xc(lr,I,N)}function Vf(I){var N=ms[I];return function(U,ne){if(U=iu(U),ne=ne==null?0:Us(ar(ne),292),ne&&zo(U)){var de=(Ki(U)+"e").split("e"),be=N(de[0]+"e"+(+de[1]+ne));return de=(Ki(be)+"e").split("e"),+(de[0]+"e"+(+de[1]-ne))}return N(U)}}var dC=wd&&1/ph(new wd([,-0]))[1]==H?function(I){return new wd(I)}:_;function Qv(I){return function(N){var U=ci(N);return U==Me?iA(N):U==Ue?gh(N):Wp(N,I(N))}}function hs(I,N,U,ne,de,be,De,Oe){var et=N&x;if(!et&&typeof I!="function")throw new ds(a);var Nt=ne?ne.length:0;if(Nt||(N&=-97,ne=de=n),De=De===n?De:Cs(ar(De),0),Oe=Oe===n?Oe:ar(Oe),Nt-=de?de.length:0,N&T){var Lt=ne,Ut=de;ne=de=n}var yn=et?n:ug(I),Fn=[I,N,U,ne,de,Lt,Ut,be,De,Oe];if(yn&&RA(Fn,yn),I=Fn[0],N=Fn[1],U=Fn[2],ne=Fn[3],de=Fn[4],Oe=Fn[9]=Fn[9]===n?et?0:I.length:Cs(Fn[9]-Nt,0),!Oe&&N&(w|B)&&(N&=-25),!N||N==A)var or=zv(I,N,U);else N==w||N==B?or=aS(I,N,Oe):(N==D||N==(A|D))&&!de.length?or=uC(I,N,U,ne):or=Ph.apply(n,Fn);var Yr=yn?Bv:PA;return Xc(Yr(or,Fn),I,N)}function MA(I,N,U,ne){return I===n||nu(I,Fc[U])&&!gi.call(ne,U)?N:I}function Uv(I,N,U,ne,de,be){return Ps(I)&&Ps(N)&&(be.set(N,I),Am(I,N,n,Uv,be),be.delete(N)),I}function DA(I){return Xv(I)?n:I}function Em(I,N,U,ne,de,be){var De=U&m,Oe=I.length,et=N.length;if(Oe!=et&&!(De&&et>Oe))return!1;var Nt=be.get(I),Lt=be.get(N);if(Nt&&Lt)return Nt==N&&Lt==I;var Ut=-1,yn=!0,Fn=U&v?new oc:n;for(be.set(I,N),be.set(N,I);++Ut<Oe;){var or=I[Ut],Yr=N[Ut];if(ne)var lr=De?ne(Yr,or,Ut,N,I,be):ne(or,Yr,Ut,I,N,be);if(lr!==n){if(lr)continue;yn=!1;break}if(Fn){if(!eA(N,function(hi,Si){if(!Ha(Fn,Si)&&(or===hi||de(or,hi,U,ne,be)))return Fn.push(Si)})){yn=!1;break}}else if(!(or===Yr||de(or,Yr,U,ne,be))){yn=!1;break}}return be.delete(I),be.delete(N),yn}function hC(I,N,U,ne,de,be,De){switch(U){case Ke:if(I.byteLength!=N.byteLength||I.byteOffset!=N.byteOffset)return!1;I=I.buffer,N=N.buffer;case Qe:return!(I.byteLength!=N.byteLength||!be(new yh(I),new yh(N)));case fe:case Ee:case ce:return nu(+I,+N);case _e:return I.name==N.name&&I.message==N.message;case ht:case xt:return I==N+"";case Me:var Oe=iA;case Ue:var et=ne&m;if(Oe||(Oe=ph),I.size!=N.size&&!et)return!1;var Nt=De.get(I);if(Nt)return Nt==N;ne|=v,De.set(I,N);var Lt=Em(Oe(I),Oe(N),ne,de,be,De);return De.delete(I),Lt;case ve:if(eg)return eg.call(I)==eg.call(N)}return!1}function Hv(I,N,U,ne,de,be){var De=U&m,Oe=xo(I),et=Oe.length,Nt=xo(N),Lt=Nt.length;if(et!=Lt&&!De)return!1;for(var Ut=et;Ut--;){var yn=Oe[Ut];if(!(De?yn in N:gi.call(N,yn)))return!1}var Fn=be.get(I),or=be.get(N);if(Fn&&or)return Fn==N&&or==I;var Yr=!0;be.set(I,N),be.set(N,I);for(var lr=De;++Ut<et;){yn=Oe[Ut];var hi=I[yn],Si=N[yn];if(ne)var jd=De?ne(Si,hi,yn,N,I,be):ne(hi,Si,yn,I,N,be);if(!(jd===n?hi===Si||de(hi,Si,U,ne,be):jd)){Yr=!1;break}lr||(lr=yn=="constructor")}if(Yr&&!lr){var su=I.constructor,Od=N.constructor;su!=Od&&"constructor"in I&&"constructor"in N&&!(typeof su=="function"&&su instanceof su&&typeof Od=="function"&&Od instanceof Od)&&(Yr=!1)}return be.delete(I),be.delete(N),Yr}function ll(I){return Rd(Nu(I,n,ii),I+"")}function xo(I){return fA(I,_o,gc)}function Qo(I){return fA(I,Cc,Fl)}var ug=Hs?function(I){return Hs.get(I)}:_;function Vi(I){for(var N=I.name+"",U=vi[N],ne=gi.call(vi,N)?U.length:0;ne--;){var de=U[ne],be=de.func;if(be==null||be==I)return de.name}return N}function Yi(I){var N=gi.call(Ae,"placeholder")?Ae:I;return N.placeholder}function zn(){var I=Ae.iteratee||sx;return I=I===sx?ag:I,arguments.length?I(arguments[0],arguments[1]):I}function Lh(I,N){var U=I.__data__;return dg(N)?U[typeof N=="string"?"string":"hash"]:U.map}function Uo(I){for(var N=_o(I),U=N.length;U--;){var ne=N[U],de=I[ne];N[U]=[ne,de,Ac(de)]}return N}function Ea(I,N){var U=hv(I,N);return mm(U)?U:n}function qc(I){var N=gi.call(I,Qs),U=I[Qs];try{I[Qs]=n;var ne=!0}catch{}var de=Aa.call(I);return ne&&(N?I[Qs]=U:delete I[Qs]),de}var gc=Dl?function(I){return I==null?[]:(I=yi(I),xu(Dl(I),function(N){return Pf.call(I,N)}))}:kt,Fl=Dl?function(I){for(var N=[];I;)bu(N,gc(I)),I=Oc(I);return N}:kt,ci=Wa;(ic&&ci(new ic(new ArrayBuffer(1)))!=Ke||Pl&&ci(new Pl)!=Me||dm&&ci(dm.resolve())!=ft||wd&&ci(new wd)!=Ue||sc&&ci(new sc)!=ke)&&(ci=function(I){var N=Wa(I),U=N==qe?I.constructor:n,ne=U?wa(U):"";if(ne)switch(ne){case ei:return Ke;case Id:return Me;case La:return ft;case oA:return Ue;case Kr:return ke}return N});function Sm(I,N,U){for(var ne=-1,de=U.length;++ne<de;){var be=U[ne],De=be.size;switch(be.type){case"drop":I+=De;break;case"dropRight":N-=De;break;case"take":N=Us(N,I+De);break;case"takeRight":I=Cs(I,N-De);break}}return{start:I,end:N}}function Yc(I){var N=I.match(zr);return N?N[1].split(qi):[]}function Wf(I,N,U){N=Ll(N,I);for(var ne=-1,de=N.length,be=!1;++ne<de;){var De=Sa(N[ne]);if(!(be=I!=null&&U(I,De)))break;I=I[De]}return be||++ne!=de?be:(de=I==null?0:I.length,!!de&&vC(de)&&Ol(De,de)&&(Er(I)||Nm(I)))}function bo(I){var N=I.length,U=new I.constructor(N);return N&&typeof I[0]=="string"&&gi.call(I,"index")&&(U.index=I.index,U.input=I.input),U}function $a(I){return typeof I.constructor=="function"&&!Md(I)?xh(Oc(I)):{}}function ui(I,N,U){var ne=I.constructor;switch(N){case Qe:return xm(I);case fe:case Ee:return new ne(+I);case Ke:return oC(I,U);case jt:case St:case Zt:case Bt:case at:case pt:case Vt:case qt:case Wt:return ol(I,U);case Me:return new ne;case ce:case xt:return new ne(I);case ht:return lC(I);case Ue:return new ne;case ve:return cC(I)}}function jl(I,N){var U=N.length;if(!U)return I;var ne=U-1;return N[ne]=(U>1?"& ":"")+N[ne],N=N.join(U>2?", ":" "),I.replace(pr,`{
/* [wrapped with `+N+`] */
`)}function mc(I){return Er(I)||Nm(I)||!!(mv&&I&&I[mv])}function Ol(I,N){var U=typeof I;return N=N??K,!!N&&(U=="number"||U!="symbol"&&ec.test(I))&&I>-1&&I%1==0&&I<N}function Xi(I,N,U){if(!Ps(U))return!1;var ne=typeof N;return(ne=="number"?xc(U)&&Ol(N,U.length):ne=="string"&&N in U)?nu(U[N],I):!1}function ku(I,N){if(Er(I))return!1;var U=typeof I;return U=="number"||U=="symbol"||U=="boolean"||I==null||bc(I)?!0:zt.test(I)||!Pt.test(I)||N!=null&&I in yi(N)}function dg(I){var N=typeof I;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?I!=="__proto__":I===null}function Fh(I){var N=Vi(I),U=Ae[N];if(typeof U!="function"||!(N in mr.prototype))return!1;if(I===U)return!0;var ne=ug(U);return!!ne&&I===ne[0]}function Kf(I){return!!om&&om in I}var wm=jc?ru:dt;function Md(I){var N=I&&I.constructor,U=typeof N=="function"&&N.prototype||Fc;return I===U}function Ac(I){return I===I&&!Ps(I)}function Dd(I,N){return function(U){return U==null?!1:U[I]===N&&(N!==n||I in yi(U))}}function _m(I){var N=Wv(I,function(ne){return U.size===c&&U.clear(),ne}),U=N.cache;return N}function RA(I,N){var U=I[1],ne=N[1],de=U|ne,be=de<(A|x|M),De=ne==M&&U==w||ne==M&&U==R&&I[7].length<=N[8]||ne==(M|R)&&N[7].length<=N[8]&&U==w;if(!(be||De))return I;ne&A&&(I[2]=N[2],de|=U&A?0:E);var Oe=N[3];if(Oe){var et=I[3];I[3]=et?bm(et,Oe,N[4]):Oe,I[4]=et?Su(I[3],u):N[4]}return Oe=N[5],Oe&&(et=I[5],I[5]=et?IA(et,Oe,N[6]):Oe,I[6]=et?Su(I[5],u):N[6]),Oe=N[7],Oe&&(I[7]=Oe),ne&M&&(I[8]=I[8]==null?N[8]:Us(I[8],N[8])),I[9]==null&&(I[9]=N[9]),I[0]=N[0],I[1]=de,I}function cl(I){var N=[];if(I!=null)for(var U in yi(I))N.push(U);return N}function jh(I){return Aa.call(I)}function Nu(I,N,U){return N=Cs(N===n?I.length-1:N,0),function(){for(var ne=arguments,de=-1,be=Cs(ne.length-N,0),De=gt(be);++de<be;)De[de]=ne[N+de];de=-1;for(var Oe=gt(N+1);++de<N;)Oe[de]=ne[de];return Oe[N]=U(De),jo(I,this,Oe)}}function qf(I,N){return N.length<2?I:Gs(I,sl(N,0,-1))}function Im(I,N){for(var U=I.length,ne=Us(N.length,U),de=yo(I);ne--;){var be=N[ne];I[ne]=Ol(be,U)?de[be]:n}return I}function xi(I,N){if(!(N==="constructor"&&typeof I[N]=="function")&&N!="__proto__")return I[N]}var PA=zl(Bv),Oh=Sd||function(I,N){return ea.setTimeout(I,N)},Rd=zl(Tv);function Xc(I,N,U){var ne=N+"";return Rd(I,jl(ne,$l(Yc(ne),U)))}function zl(I){var N=0,U=0;return function(){var ne=Rl(),de=G-(ne-U);if(U=ne,de>0){if(++N>=z)return arguments[0]}else N=0;return I.apply(n,arguments)}}function Jc(I,N){var U=-1,ne=I.length,de=ne-1;for(N=N===n?ne:N;++U<N;){var be=lg(U,de),De=I[be];I[be]=I[U],I[U]=De}return I.length=N,I}var kA=_m(function(I){var N=[];return I.charCodeAt(0)===46&&N.push(""),I.replace(Wn,function(U,ne,de,be){N.push(de?be.replace(Ii,"$1"):ne||U)}),N});function Sa(I){if(typeof I=="string"||bc(I))return I;var N=I+"";return N=="0"&&1/I==-H?"-0":N}function wa(I){if(I!=null){try{return Zp.call(I)}catch{}try{return I+""}catch{}}return""}function $l(I,N){return el(te,function(U){var ne="_."+U[0];N&U[1]&&!rm(I,ne)&&I.push(ne)}),I.sort()}function Ql(I){if(I instanceof mr)return I.clone();var N=new rl(I.__wrapped__,I.__chain__);return N.__actions__=yo(I.__actions__),N.__index__=I.__index__,N.__values__=I.__values__,N}function ta(I,N,U){(U?Xi(I,N,U):N===n)?N=1:N=Cs(ar(N),0);var ne=I==null?0:I.length;if(!ne||N<1)return[];for(var de=0,be=0,De=gt(kf(ne/N));de<ne;)De[be++]=sl(I,de,de+=N);return De}function Lu(I){for(var N=-1,U=I==null?0:I.length,ne=0,de=[];++N<U;){var be=I[N];be&&(de[ne++]=be)}return de}function Tr(){var I=arguments.length;if(!I)return[];for(var N=gt(I-1),U=arguments[0],ne=I;ne--;)N[ne-1]=arguments[ne];return bu(Er(U)?yo(U):[U],va(N,1))}var bi=_r(function(I,N){return Ia(I)?uc(I,va(N,1,Ia,!0)):[]}),Ws=_r(function(I,N){var U=di(N);return Ia(U)&&(U=n),Ia(I)?uc(I,va(N,1,Ia,!0),zn(U,2)):[]}),yc=_r(function(I,N){var U=di(N);return Ia(U)&&(U=n),Ia(I)?uc(I,va(N,1,Ia,!0),n,U):[]});function fs(I,N,U){var ne=I==null?0:I.length;return ne?(N=U||N===n?1:ar(N),sl(I,N<0?0:N,ne)):[]}function Pd(I,N,U){var ne=I==null?0:I.length;return ne?(N=U||N===n?1:ar(N),N=ne-N,sl(I,0,N<0?0:N)):[]}function Bm(I,N){return I&&I.length?ym(I,zn(N,3),!0,!0):[]}function Ds(I,N){return I&&I.length?ym(I,zn(N,3),!0):[]}function hg(I,N,U,ne){var de=I==null?0:I.length;return de?(U&&typeof U!="number"&&Xi(I,N,U)&&(U=0,ne=de),Ih(I,N,U,ne)):[]}function Gv(I,N,U){var ne=I==null?0:I.length;if(!ne)return-1;var de=U==null?0:ar(U);return de<0&&(de=Cs(ne+de,0)),Lc(I,zn(N,3),de)}function Tm(I,N,U){var ne=I==null?0:I.length;if(!ne)return-1;var de=ne-1;return U!==n&&(de=ar(U),de=U<0?Cs(ne+de,0):Us(de,ne-1)),Lc(I,zn(N,3),de,!0)}function ii(I){var N=I==null?0:I.length;return N?va(I,1):[]}function na(I){var N=I==null?0:I.length;return N?va(I,H):[]}function Co(I,N){var U=I==null?0:I.length;return U?(N=N===n?1:ar(N),va(I,N)):[]}function zh(I){for(var N=-1,U=I==null?0:I.length,ne={};++N<U;){var de=I[N];ne[de[0]]=de[1]}return ne}function Mm(I){return I&&I.length?I[0]:n}function Vv(I,N,U){var ne=I==null?0:I.length;if(!ne)return-1;var de=U==null?0:ar(U);return de<0&&(de=Cs(ne+de,0)),tl(I,N,de)}function fC(I){var N=I==null?0:I.length;return N?sl(I,0,-1):[]}var Ks=_r(function(I){var N=ts(I,Nv);return N.length&&N[0]===I[0]?gm(N):[]}),Eo=_r(function(I){var N=di(I),U=ts(I,Nv);return N===di(U)?N=n:U.pop(),U.length&&U[0]===I[0]?gm(U,zn(N,2)):[]}),ul=_r(function(I){var N=di(I),U=ts(I,Nv);return N=typeof N=="function"?N:n,N&&U.pop(),U.length&&U[0]===I[0]?gm(U,n,N):[]});function $h(I,N){return I==null?"":$c.call(I,N)}function di(I){var N=I==null?0:I.length;return N?I[N-1]:n}function pC(I,N,U){var ne=I==null?0:I.length;if(!ne)return-1;var de=ne;return U!==n&&(de=ar(U),de=de<0?Cs(ne+de,0):Us(de,ne-1)),N===N?eC(I,N,de):Lc(I,tA,de,!0)}function kd(I,N){return I&&I.length?yA(I,ar(N)):n}var Yf=_r(Ci);function Ci(I,N){return I&&I.length&&N&&N.length?$f(I,N):I}function NA(I,N,U){return I&&I.length&&N&&N.length?$f(I,N,zn(U,2)):I}function Nd(I,N,U){return I&&I.length&&N&&N.length?$f(I,N,n,U):I}var _a=ll(function(I,N){var U=I==null?0:I.length,ne=ig(I,N);return og(I,ts(N,function(de){return Ol(de,U)?+de:de}).sort(wA)),ne});function Es(I,N){var U=[];if(!(I&&I.length))return U;var ne=-1,de=[],be=I.length;for(N=zn(N,3);++ne<be;){var De=I[ne];N(De,ne,I)&&(U.push(De),de.push(ne))}return og(I,de),U}function Fu(I){return I==null?I:_u.call(I)}function fg(I,N,U){var ne=I==null?0:I.length;return ne?(U&&typeof U!="number"&&Xi(I,N,U)?(N=0,U=ne):(N=N==null?0:ar(N),U=U===n?ne:ar(U)),sl(I,N,U)):[]}function Rs(I,N){return Mh(I,N)}function Xf(I,N,U){return CA(I,N,zn(U,2))}function qs(I,N){var U=I==null?0:I.length;if(U){var ne=Mh(I,N);if(ne<U&&nu(I[ne],N))return ne}return-1}function dl(I,N){return Mh(I,N,!0)}function Ho(I,N,U){return CA(I,N,zn(U,2),!0)}function Jf(I,N){var U=I==null?0:I.length;if(U){var ne=Mh(I,N,!0)-1;if(nu(I[ne],N))return ne}return-1}function LA(I){return I&&I.length?sC(I):[]}function Dm(I,N){return I&&I.length?sC(I,zn(N,2)):[]}function FA(I){var N=I==null?0:I.length;return N?sl(I,1,N):[]}function jA(I,N,U){return I&&I.length?(N=U||N===n?1:ar(N),sl(I,0,N<0?0:N)):[]}function si(I,N,U){var ne=I==null?0:I.length;return ne?(N=U||N===n?1:ar(N),N=ne-N,sl(I,N<0?0:N,ne)):[]}function Bi(I,N){return I&&I.length?ym(I,zn(N,3),!1,!0):[]}function Mr(I,N){return I&&I.length?ym(I,zn(N,3)):[]}var qr=_r(function(I){return Du(va(I,1,Ia,!0))}),Ln=_r(function(I){var N=di(I);return Ia(N)&&(N=n),Du(va(I,1,Ia,!0),zn(N,2))}),jr=_r(function(I){var N=di(I);return N=typeof N=="function"?N:n,Du(va(I,1,Ia,!0),n,N)});function Ar(I){return I&&I.length?Du(I):[]}function Rr(I,N){return I&&I.length?Du(I,zn(N,2)):[]}function Wi(I,N){return N=typeof N=="function"?N:n,I&&I.length?Du(I,n,N):[]}function Ss(I){if(!(I&&I.length))return[];var N=0;return I=xu(I,function(U){if(Ia(U))return N=Cs(U.length,N),!0}),Vp(N,function(U){return ts(I,Cu(U))})}function Ei(I,N){if(!(I&&I.length))return[];var U=Ss(I);return N==null?U:ts(U,function(ne){return jo(N,n,ne)})}var Ul=_r(function(I,N){return Ia(I)?uc(I,N):[]}),Ld=_r(function(I){return EA(xu(I,Ia))}),Zc=_r(function(I){var N=di(I);return Ia(N)&&(N=n),EA(xu(I,Ia),zn(N,2))}),ai=_r(function(I){var N=di(I);return N=typeof N=="function"?N:n,EA(xu(I,Ia),n,N)}),Hl=_r(Ss);function eu(I,N){return kv(I||[],N||[],Gc)}function So(I,N){return kv(I||[],N||[],Qf)}var hl=_r(function(I){var N=I.length,U=N>1?I[N-1]:n;return U=typeof U=="function"?(I.pop(),U):n,Ei(I,U)});function ju(I){var N=Ae(I);return N.__chain__=!0,N}function pg(I,N){return N(I),I}function wo(I,N){return N(I)}var gg=ll(function(I){var N=I.length,U=N?I[0]:0,ne=this.__wrapped__,de=function(be){return ig(be,I)};return N>1||this.__actions__.length||!(ne instanceof mr)||!Ol(U)?this.thru(de):(ne=ne.slice(U,+U+(N?1:0)),ne.__actions__.push({func:wo,args:[de],thisArg:n}),new rl(ne,this.__chain__).thru(function(be){return N&&!be.length&&be.push(n),be}))});function Ou(){return ju(this)}function ws(){return new rl(this.value(),this.__chain__)}function tu(){this.__values__===n&&(this.__values__=c2(this.value()));var I=this.__index__>=this.__values__.length,N=I?n:this.__values__[this.__index__++];return{done:I,value:N}}function Gl(){return this}function vc(I){for(var N,U=this;U instanceof bh;){var ne=Ql(U);ne.__index__=0,ne.__values__=n,N?de.__wrapped__=ne:N=ne;var de=ne;U=U.__wrapped__}return de.__wrapped__=I,N}function Fd(){var I=this.__wrapped__;if(I instanceof mr){var N=I;return this.__actions__.length&&(N=new mr(this)),N=N.reverse(),N.__actions__.push({func:wo,args:[Fu],thisArg:n}),new rl(N,this.__chain__)}return this.thru(Fu)}function Zf(){return Pv(this.__wrapped__,this.__actions__)}var OA=BA(function(I,N,U){gi.call(I,U)?++I[U]:po(I,U,1)});function ep(I,N,U){var ne=Er(I)?X0:Tu;return U&&Xi(I,N,U)&&(N=n),ne(I,zn(N,3))}function tp(I,N){var U=Er(I)?xu:pm;return U(I,zn(N,3))}var Go=$v(Gv),b=$v(Tm);function S(I,N){return va(Jt(I,N),1)}function j(I,N){return va(Jt(I,N),H)}function Q(I,N,U){return U=U===n?1:ar(U),va(Jt(I,N),U)}function Y(I,N){var U=Er(I)?el:Bu;return U(I,zn(N,3))}function ie(I,N){var U=Er(I)?Jb:hA;return U(I,zn(N,3))}var xe=BA(function(I,N,U){gi.call(I,U)?I[U].push(N):po(I,U,[N])});function Re(I,N,U,ne){I=xc(I)?I:VA(I),U=U&&!ne?ar(U):0;var de=I.length;return U<0&&(U=Cs(de+U,0)),ex(I)?U<=de&&I.indexOf(N,U)>-1:!!de&&tl(I,N,U)>-1}var Ze=_r(function(I,N,U){var ne=-1,de=typeof N=="function",be=xc(I)?gt(I.length):[];return Bu(I,function(De){be[++ne]=de?jo(N,De,U):Nl(De,N,U)}),be}),Mt=BA(function(I,N,U){po(I,U,N)});function Jt(I,N){var U=Er(I)?ts:mA;return U(I,zn(N,3))}function hn(I,N,U,ne){return I==null?[]:(Er(N)||(N=N==null?[]:[N]),U=ne?n:U,Er(U)||(U=U==null?[]:[U]),vA(I,N,U))}var An=BA(function(I,N,U){I[U?0:1].push(N)},function(){return[[],[]]});function ur(I,N,U){var ne=Er(I)?J0:ka,de=arguments.length<3;return ne(I,zn(N,4),U,de,Bu)}function fl(I,N,U){var ne=Er(I)?Z0:ka,de=arguments.length<3;return ne(I,zn(N,4),U,de,hA)}function Rm(I,N){var U=Er(I)?xu:pm;return U(I,gC(zn(N,3)))}function np(I){var N=Er(I)?cc:Iv;return N(I)}function ut(I,N,U){(U?Xi(I,N,U):N===n)?N=1:N=ar(N);var ne=Er(I)?hm:xA;return ne(I,N)}function Xe(I){var N=Er(I)?rC:Mv;return N(I)}function At(I){if(I==null)return 0;if(xc(I))return ex(I)?rc(I):I.length;var N=ci(I);return N==Me||N==Ue?I.size:fc(I).length}function Gt(I,N,U){var ne=Er(I)?eA:bA;return U&&Xi(I,N,U)&&(N=n),ne(I,zn(N,3))}var Pn=_r(function(I,N){if(I==null)return[];var U=N.length;return U>1&&Xi(I,N[0],N[1])?N=[]:U>2&&Xi(N[0],N[1],N[2])&&(N=[N[0]]),vA(I,va(N,1),[])}),Ni=cm||function(){return ea.Date.now()};function nr(I,N){if(typeof N!="function")throw new ds(a);return I=ar(I),function(){if(--I<1)return N.apply(this,arguments)}}function oi(I,N,U){return N=U?n:N,N=I&&N==null?I.length:N,hs(I,M,n,n,n,n,N)}function ra(I,N){var U;if(typeof N!="function")throw new ds(a);return I=ar(I),function(){return--I>0&&(U=N.apply(this,arguments)),I<=1&&(N=n),U}}var ti=_r(function(I,N,U){var ne=A;if(U.length){var de=Su(U,Yi(ti));ne|=D}return hs(I,ne,N,U,de)}),zu=_r(function(I,N,U){var ne=A|x;if(U.length){var de=Su(U,Yi(zu));ne|=D}return hs(N,ne,I,U,de)});function Pm(I,N,U){N=U?n:N;var ne=hs(I,w,n,n,n,n,n,N);return ne.placeholder=Pm.placeholder,ne}function oS(I,N,U){N=U?n:N;var ne=hs(I,B,n,n,n,n,n,N);return ne.placeholder=oS.placeholder,ne}function lS(I,N,U){var ne,de,be,De,Oe,et,Nt=0,Lt=!1,Ut=!1,yn=!0;if(typeof I!="function")throw new ds(a);N=iu(N)||0,Ps(U)&&(Lt=!!U.leading,Ut="maxWait"in U,be=Ut?Cs(iu(U.maxWait)||0,N):be,yn="trailing"in U?!!U.trailing:yn);function Fn(Ka){var sp=ne,Fm=de;return ne=de=n,Nt=Ka,De=I.apply(Fm,sp),De}function or(Ka){return Nt=Ka,Oe=Oh(hi,N),Lt?Fn(Ka):De}function Yr(Ka){var sp=Ka-et,Fm=Ka-Nt,pO=N-sp;return Ut?Us(pO,be-Fm):pO}function lr(Ka){var sp=Ka-et,Fm=Ka-Nt;return et===n||sp>=N||sp<0||Ut&&Fm>=be}function hi(){var Ka=Ni();if(lr(Ka))return Si(Ka);Oe=Oh(hi,Yr(Ka))}function Si(Ka){return Oe=n,yn&&ne?Fn(Ka):(ne=de=n,De)}function jd(){Oe!==n&&vm(Oe),Nt=0,ne=et=de=Oe=n}function su(){return Oe===n?De:Si(Ni())}function Od(){var Ka=Ni(),sp=lr(Ka);if(ne=arguments,de=this,et=Ka,sp){if(Oe===n)return or(et);if(Ut)return vm(Oe),Oe=Oh(hi,N),Fn(et)}return Oe===n&&(Oe=Oh(hi,N)),De}return Od.cancel=jd,Od.flush=su,Od}var Ji=_r(function(I,N){return Ev(I,1,N)}),cS=_r(function(I,N,U){return Ev(I,iu(N)||0,U)});function nD(I){return hs(I,k)}function Wv(I,N){if(typeof I!="function"||N!=null&&typeof N!="function")throw new ds(a);var U=function(){var ne=arguments,de=N?N.apply(this,ne):ne[0],be=U.cache;if(be.has(de))return be.get(de);var De=I.apply(this,ne);return U.cache=be.set(de,De)||be,De};return U.cache=new(Wv.Cache||Uc),U}Wv.Cache=Uc;function gC(I){if(typeof I!="function")throw new ds(a);return function(){var N=arguments;switch(N.length){case 0:return!I.call(this);case 1:return!I.call(this,N[0]);case 2:return!I.call(this,N[0],N[1]);case 3:return!I.call(this,N[0],N[1],N[2])}return!I.apply(this,N)}}function rD(I){return ra(2,I)}var iD=aC(function(I,N){N=N.length==1&&Er(N[0])?ts(N[0],uo(zn())):ts(va(N,1),uo(zn()));var U=N.length;return _r(function(ne){for(var de=-1,be=Us(ne.length,U);++de<be;)ne[de]=N[de].call(this,ne[de]);return jo(I,this,ne)})}),zA=_r(function(I,N){var U=Su(N,Yi(zA));return hs(I,D,n,N,U)}),km=_r(function(I,N){var U=Su(N,Yi(km));return hs(I,T,n,N,U)}),uS=ll(function(I,N){return hs(I,R,n,n,n,N)});function mC(I,N){if(typeof I!="function")throw new ds(a);return N=N===n?N:ar(N),_r(I,N)}function dS(I,N){if(typeof I!="function")throw new ds(a);return N=N==null?0:Cs(ar(N),0),_r(function(U){var ne=U[N],de=Kc(U,0,N);return ne&&bu(de,ne),jo(I,this,de)})}function mg(I,N,U){var ne=!0,de=!0;if(typeof I!="function")throw new ds(a);return Ps(U)&&(ne="leading"in U?!!U.leading:ne,de="trailing"in U?!!U.trailing:de),lS(I,N,{leading:ne,maxWait:N,trailing:de})}function Qh(I){return oi(I,1)}function Kv(I,N){return zA(SA(N),I)}function sD(){if(!arguments.length)return[];var I=arguments[0];return Er(I)?I:[I]}function XI(I){return go(I,p)}function JI(I,N){return N=typeof N=="function"?N:n,go(I,p,N)}function ZI(I){return go(I,h|p)}function e2(I,N){return N=typeof N=="function"?N:n,go(I,h|p,N)}function aD(I,N){return N==null||_h(I,N,_o(N))}function nu(I,N){return I===N||I!==I&&N!==N}var t2=Nh(ja),n2=Nh(function(I,N){return I>=N}),Nm=il((function(){return arguments})())?il:function(I){return ia(I)&&gi.call(I,"callee")&&!Pf.call(I,"callee")},Er=gt.isArray,hS=iv?uo(iv):Ts;function xc(I){return I!=null&&vC(I.length)&&!ru(I)}function Ia(I){return ia(I)&&xc(I)}function qv(I){return I===!0||I===!1||ia(I)&&Wa(I)==fe}var Ag=Av||dt,r2=sv?uo(sv):pA;function ni(I){return ia(I)&&I.nodeType===1&&!Xv(I)}function fS(I){if(I==null)return!0;if(xc(I)&&(Er(I)||typeof I=="string"||typeof I.splice=="function"||Ag(I)||yg(I)||Nm(I)))return!I.length;var N=ci(I);if(N==Me||N==Ue)return!I.size;if(Md(I))return!fc(I).length;for(var U in I)if(gi.call(I,U))return!1;return!0}function AC(I,N){return Oa(I,N)}function pS(I,N,U){U=typeof U=="function"?U:n;var ne=U?U(I,N):n;return ne===n?Oa(I,N,n,U):!!ne}function yC(I){if(!ia(I))return!1;var N=Wa(I);return N==_e||N==Be||typeof I.message=="string"&&typeof I.name=="string"&&!Xv(I)}function gS(I){return typeof I=="number"&&zo(I)}function ru(I){if(!Ps(I))return!1;var N=Wa(I);return N==Ce||N==Se||N==se||N==Ie}function Yv(I){return typeof I=="number"&&I==ar(I)}function vC(I){return typeof I=="number"&&I>-1&&I%1==0&&I<=K}function Ps(I){var N=typeof I;return I!=null&&(N=="object"||N=="function")}function ia(I){return I!=null&&typeof I=="object"}var i2=nm?uo(nm):Gi;function s2(I,N){return I===N||Ms(I,N,Uo(N))}function a2(I,N,U){return U=typeof U=="function"?U:n,Ms(I,N,Uo(N),U)}function ns(I){return AS(I)&&I!=+I}function mS(I){if(wm(I))throw new sr(s);return mm(I)}function Vo(I){return I===null}function oD(I){return I==null}function AS(I){return typeof I=="number"||ia(I)&&Wa(I)==ce}function Xv(I){if(!ia(I)||Wa(I)!=qe)return!1;var N=Oc(I);if(N===null)return!0;var U=gi.call(N,"constructor")&&N.constructor;return typeof U=="function"&&U instanceof U&&Zp.call(U)==Ah}var Jv=av?uo(av):Mu;function yS(I){return Yv(I)&&I>=-K&&I<=K}var Zv=ov?uo(ov):zf;function ex(I){return typeof I=="string"||!Er(I)&&ia(I)&&Wa(I)==xt}function bc(I){return typeof I=="symbol"||ia(I)&&Wa(I)==ve}var yg=Gp?uo(Gp):gA;function vS(I){return I===n}function lD(I){return ia(I)&&ci(I)==ke}function o2(I){return ia(I)&&Wa(I)==He}var cD=Nh(As),l2=Nh(function(I,N){return I<=N});function c2(I){if(!I)return[];if(xc(I))return ex(I)?Zr(I):yo(I);if(ya&&I[ya])return us(I[ya]());var N=ci(I),U=N==Me?iA:N==Ue?ph:VA;return U(I)}function rp(I){if(!I)return I===0?I:0;if(I=iu(I),I===H||I===-H){var N=I<0?-1:1;return N*X}return I===I?I:0}function ar(I){var N=rp(I),U=N%1;return N===N?U?N-U:N:0}function xS(I){return I?Vc(ar(I),0,J):0}function iu(I){if(typeof I=="number")return I;if(bc(I))return re;if(Ps(I)){var N=typeof I.valueOf=="function"?I.valueOf():I;I=Ps(N)?N+"":N}if(typeof I!="string")return I===0?I:+I;I=Cd(I);var U=Ad.test(I);return U||Tl.test(I)?tm(I.slice(2),U?2:8):Nc.test(I)?re:+I}function xC(I){return pc(I,Cc(I))}function uD(I){return I?Vc(ar(I),-K,K):I===0?I:0}function Ki(I){return I==null?"":al(I)}var u2=Dh(function(I,N){if(Md(N)||xc(N)){pc(N,_o(N),I);return}for(var U in N)gi.call(N,U)&&Gc(I,U,N[U])}),bC=Dh(function(I,N){pc(N,Cc(N),I)}),$A=Dh(function(I,N,U,ne){pc(N,Cc(N),I,ne)}),dD=Dh(function(I,N,U,ne){pc(N,_o(N),I,ne)}),$u=ll(ig);function bS(I,N){var U=xh(I);return N==null?U:dA(U,N)}var d2=_r(function(I,N){I=yi(I);var U=-1,ne=N.length,de=ne>2?N[2]:n;for(de&&Xi(N[0],N[1],de)&&(ne=1);++U<ne;)for(var be=N[U],De=Cc(be),Oe=-1,et=De.length;++Oe<et;){var Nt=De[Oe],Lt=I[Nt];(Lt===n||nu(Lt,Fc[Nt])&&!gi.call(I,Nt))&&(I[Nt]=be[Nt])}return I}),h2=_r(function(I){return I.push(n,Uv),jo(UA,n,I)});function f2(I,N){return cv(I,zn(N,3),xa)}function tx(I,N){return cv(I,zn(N,3),ba)}function Qu(I,N){return I==null?I:Of(I,zn(N,3),Cc)}function p2(I,N){return I==null?I:Bh(I,zn(N,3),Cc)}function CC(I,N){return I&&xa(I,zn(N,3))}function ip(I,N){return I&&ba(I,zn(N,3))}function hD(I){return I==null?[]:mo(I,_o(I))}function fD(I){return I==null?[]:mo(I,Cc(I))}function vg(I,N,U){var ne=I==null?n:Gs(I,N);return ne===n?U:ne}function g2(I,N){return I!=null&&Wf(I,N,Ca)}function CS(I,N){return I!=null&&Wf(I,N,hc)}var pD=Ru(function(I,N,U){N!=null&&typeof N.toString!="function"&&(N=Aa.call(N)),I[N]=U},KA(Vl)),gD=Ru(function(I,N,U){N!=null&&typeof N.toString!="function"&&(N=Aa.call(N)),gi.call(I,N)?I[N].push(U):I[N]=[U]},zn),mD=_r(Nl);function _o(I){return xc(I)?rg(I):fc(I)}function Cc(I){return xc(I)?rg(I,!0):iS(I)}function AD(I,N){var U={};return N=zn(N,3),xa(I,function(ne,de,be){po(U,N(ne,de,be),ne)}),U}function m2(I,N){var U={};return N=zn(N,3),xa(I,function(ne,de,be){po(U,de,N(ne,de,be))}),U}var QA=Dh(function(I,N,U){Am(I,N,U)}),UA=Dh(function(I,N,U,ne){Am(I,N,U,ne)}),A2=ll(function(I,N){var U={};if(I==null)return U;var ne=!1;N=ts(N,function(be){return be=Ll(be,I),ne||(ne=be.length>1),be}),pc(I,Qo(I),U),ne&&(U=go(U,h|f|p,DA));for(var de=N.length;de--;)cg(U,N[de]);return U});function yD(I,N){return GA(I,gC(zn(N)))}var HA=ll(function(I,N){return I==null?{}:wv(I,N)});function GA(I,N){if(I==null)return{};var U=ts(Qo(I),function(ne){return[ne]});return N=zn(N),Ao(I,U,function(ne,de){return N(ne,de[0])})}function y2(I,N,U){N=Ll(N,I);var ne=-1,de=N.length;for(de||(de=1,I=n);++ne<de;){var be=I==null?n:I[Sa(N[ne])];be===n&&(ne=de,be=U),I=ru(be)?be.call(I):be}return I}function EC(I,N,U){return I==null?I:Qf(I,N,U)}function ES(I,N,U,ne){return ne=typeof ne=="function"?ne:n,I==null?I:Qf(I,N,U,ne)}var SC=Qv(_o),nx=Qv(Cc);function v2(I,N,U){var ne=Er(I),de=ne||Ag(I)||yg(I);if(N=zn(N,4),U==null){var be=I&&I.constructor;de?U=ne?new be:[]:Ps(I)?U=ru(be)?xh(Oc(I)):{}:U={}}return(de?el:xa)(I,function(De,Oe,et){return N(U,De,Oe,et)}),U}function x2(I,N){return I==null?!0:cg(I,N)}function vD(I,N,U){return I==null?I:Rv(I,N,SA(U))}function b2(I,N,U,ne){return ne=typeof ne=="function"?ne:n,I==null?I:Rv(I,N,SA(U),ne)}function VA(I){return I==null?[]:nA(I,_o(I))}function SS(I){return I==null?[]:nA(I,Cc(I))}function xD(I,N,U){return U===n&&(U=N,N=n),U!==n&&(U=iu(U),U=U===U?U:0),N!==n&&(N=iu(N),N=N===N?N:0),Vc(iu(I),N,U)}function wC(I,N,U){return N=rp(N),U===n?(U=N,N=0):U=rp(U),I=iu(I),Th(I,N,U)}function _C(I,N,U){if(U&&typeof U!="boolean"&&Xi(I,N,U)&&(N=U=n),U===n&&(typeof N=="boolean"?(U=N,N=n):typeof I=="boolean"&&(U=I,I=n)),I===n&&N===n?(I=0,N=1):(I=rp(I),N===n?(N=I,I=0):N=rp(N)),I>N){var ne=I;I=N,N=ne}if(U||I%1||N%1){var de=Qc();return Us(I+de*(N-I+hh("1e-"+((de+"").length-1))),N)}return lg(I,N)}var IC=Rh(function(I,N,U){return N=N.toLowerCase(),I+(U?C2(N):N)});function C2(I){return Lm(Ki(I).toLowerCase())}function WA(I){return I=Ki(I),I&&I.replace(Qi,qp).replace(nv,"")}function bD(I,N,U){I=Ki(I),N=al(N);var ne=I.length;U=U===n?ne:Vc(ar(U),0,ne);var de=U;return U-=N.length,U>=0&&I.slice(U,de)==N}function E2(I){return I=Ki(I),I&&Ct.test(I)?I.replace($t,dv):I}function S2(I){return I=Ki(I),I&&tn.test(I)?I.replace(In,"\\$&"):I}var w2=Rh(function(I,N,U){return I+(U?"-":"")+N.toLowerCase()}),_2=Rh(function(I,N,U){return I+(U?" ":"")+N.toLowerCase()}),wS=za("toLowerCase");function I2(I,N,U){I=Ki(I),N=ar(N);var ne=N?rc(I):0;if(!N||ne>=N)return I;var de=(N-ne)/2;return kh(um(de),U)+I+kh(kf(de),U)}function B2(I,N,U){I=Ki(I),N=ar(N);var ne=N?rc(I):0;return N&&ne<N?I+kh(N-ne,U):I}function BC(I,N,U){I=Ki(I),N=ar(N);var ne=N?rc(I):0;return N&&ne<N?kh(N-ne,U)+I:I}function CD(I,N,U){return U||N==null?N=0:N&&(N=+N),nl(Ki(I).replace(cn,""),N||0)}function ED(I,N,U){return(U?Xi(I,N,U):N===n)?N=1:N=ar(N),Wc(Ki(I),N)}function _S(){var I=arguments,N=Ki(I[0]);return I.length<3?N:N.replace(I[1],I[2])}var IS=Rh(function(I,N,U){return I+(U?"_":"")+N.toLowerCase()});function TC(I,N,U){return U&&typeof U!="number"&&Xi(I,N,U)&&(N=U=n),U=U===n?J:U>>>0,U?(I=Ki(I),I&&(typeof N=="string"||N!=null&&!Jv(N))&&(N=al(N),!N&&Eu(I))?Kc(Zr(I),0,U):I.split(N,U)):[]}var BS=Rh(function(I,N,U){return I+(U?" ":"")+Lm(N)});function T2(I,N,U){return I=Ki(I),U=U==null?0:Vc(ar(U),0,I.length),N=al(N),I.slice(U,U+N.length)==N}function TS(I,N,U){var ne=Ae.templateSettings;U&&Xi(I,N,U)&&(N=n),I=Ki(I),N=$A({},N,ne,MA);var de=$A({},N.imports,ne.imports,MA),be=_o(de),De=nA(de,be),Oe,et,Nt=0,Lt=N.interpolate||me,Ut="__p += '",yn=Ga((N.escape||me).source+"|"+Lt.source+"|"+(Lt===_t?bs:me).source+"|"+(N.evaluate||me).source+"|$","g"),Fn="//# sourceURL="+(gi.call(N,"sourceURL")?(N.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++K0+"]")+`
`;I.replace(yn,function(lr,hi,Si,jd,su,Od){return Si||(Si=jd),Ut+=I.slice(Nt,Od).replace(Ge,Yp),hi&&(Oe=!0,Ut+=`' +
__e(`+hi+`) +
'`),su&&(et=!0,Ut+=`';
`+su+`;
__p += '`),Si&&(Ut+=`' +
((__t = (`+Si+`)) == null ? '' : __t) +
'`),Nt=Od+lr.length,lr}),Ut+=`';
`;var or=gi.call(N,"variable")&&N.variable;if(!or)Ut=`with (obj) {
`+Ut+`
}
`;else if(Yn.test(or))throw new sr(o);Ut=(et?Ut.replace(gn,""):Ut).replace(Ne,"$1").replace(Ht,"$1;"),Ut="function("+(or||"obj")+`) {
`+(or?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Oe?", __e = _.escape":"")+(et?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ut+`return __p
}`;var Yr=MS(function(){return Fr(be,Fn+"return "+Ut).apply(n,De)});if(Yr.source=Ut,yC(Yr))throw Yr;return Yr}function xg(I){return Ki(I).toLowerCase()}function bg(I){return Ki(I).toUpperCase()}function Cg(I,N,U){if(I=Ki(I),I&&(U||N===n))return Cd(I);if(!I||!(N=al(N)))return I;var ne=Zr(I),de=Zr(N),be=rA(ne,de),De=am(ne,de)+1;return Kc(ne,be,De).join("")}function rx(I,N,U){if(I=Ki(I),I&&(U||N===n))return I.slice(0,Bf(I)+1);if(!I||!(N=al(N)))return I;var ne=Zr(I),de=am(ne,Zr(N))+1;return Kc(ne,0,de).join("")}function ix(I,N,U){if(I=Ki(I),I&&(U||N===n))return I.replace(cn,"");if(!I||!(N=al(N)))return I;var ne=Zr(I),de=rA(ne,Zr(N));return Kc(ne,de).join("")}function Eg(I,N){var U=L,ne=F;if(Ps(N)){var de="separator"in N?N.separator:de;U="length"in N?ar(N.length):U,ne="omission"in N?al(N.omission):ne}I=Ki(I);var be=I.length;if(Eu(I)){var De=Zr(I);be=De.length}if(U>=be)return I;var Oe=U-rc(ne);if(Oe<1)return ne;var et=De?Kc(De,0,Oe).join(""):I.slice(0,Oe);if(de===n)return et+ne;if(De&&(Oe+=et.length-Oe),Jv(de)){if(I.slice(Oe).search(de)){var Nt,Lt=et;for(de.global||(de=Ga(de.source,Ki(oo.exec(de))+"g")),de.lastIndex=0;Nt=de.exec(Lt);)var Ut=Nt.index;et=et.slice(0,Ut===n?Oe:Ut)}}else if(I.indexOf(al(de),Oe)!=Oe){var yn=et.lastIndexOf(de);yn>-1&&(et=et.slice(0,yn))}return et+ne}function SD(I){return I=Ki(I),I&&It.test(I)?I.replace(Qt,pv):I}var M2=Rh(function(I,N,U){return I+(U?" ":"")+N.toUpperCase()}),Lm=za("toUpperCase");function D2(I,N,U){return I=Ki(I),N=U?n:N,N===n?If(I)?aA(I):rS(I):I.match(N)||[]}var MS=_r(function(I,N){try{return jo(I,n,N)}catch(U){return yC(U)?U:new sr(U)}}),MC=ll(function(I,N){return el(N,function(U){U=Sa(U),po(I,U,ti(I[U],I))}),I});function R2(I){var N=I==null?0:I.length,U=zn();return I=N?ts(I,function(ne){if(typeof ne[1]!="function")throw new ds(a);return[U(ne[0]),ne[1]]}):[],_r(function(ne){for(var de=-1;++de<N;){var be=I[de];if(jo(be[0],this,ne))return jo(be[1],this,ne)}})}function wD(I){return sg(go(I,h))}function KA(I){return function(){return I}}function DC(I,N){return I==null||I!==I?N:I}var P2=Uf(),qA=Uf(!0);function Vl(I){return I}function sx(I){return ag(typeof I=="function"?I:go(I,h))}function RC(I){return AA(go(I,h))}function k2(I,N){return Sv(I,go(N,h))}var _D=_r(function(I,N){return function(U){return Nl(U,I,N)}}),PC=_r(function(I,N){return function(U){return Nl(I,U,N)}});function g(I,N,U){var ne=_o(N),de=mo(N,ne);U==null&&!(Ps(N)&&(de.length||!ne.length))&&(U=N,N=I,I=this,de=mo(N,_o(N)));var be=!(Ps(U)&&"chain"in U)||!!U.chain,De=ru(I);return el(de,function(Oe){var et=N[Oe];I[Oe]=et,De&&(I.prototype[Oe]=function(){var Nt=this.__chain__;if(be||Nt){var Lt=I(this.__wrapped__),Ut=Lt.__actions__=yo(this.__actions__);return Ut.push({func:et,args:arguments,thisArg:I}),Lt.__chain__=Nt,Lt}return et.apply(I,bu([this.value()],arguments))})}),I}function y(){return ea._===this&&(ea._=Na),this}function _(){}function P(I){return I=ar(I),_r(function(N){return yA(N,I)})}var $=vo(ts),W=vo(X0),le=vo(eA);function ye(I){return ku(I)?Cu(Sa(I)):Vs(I)}function Pe(I){return function(N){return I==null?n:Gs(I,N)}}var st=Hf(),wt=Hf(!0);function kt(){return[]}function dt(){return!1}function bt(){return{}}function wn(){return""}function er(){return!0}function rs(I,N){if(I=ar(I),I<1||I>K)return[];var U=J,ne=Us(I,J);N=zn(N),I-=J;for(var de=Vp(ne,N);++U<I;)N(U);return de}function Je(I){return Er(I)?ts(I,Sa):bc(I)?[I]:yo(kA(Ki(I)))}function ze(I){var N=++Ed;return Ki(I)+N}var it=Pu(function(I,N){return I+N},0),Rt=Vf("ceil"),Kn=Pu(function(I,N){return I/N},1),Ti=Vf("floor");function Rn(I){return I&&I.length?dc(I,Vl,ja):n}function Pr(I,N){return I&&I.length?dc(I,zn(N,2),ja):n}function li(I){return fh(I,Vl)}function Mi(I,N){return fh(I,zn(N,2))}function Sg(I){return I&&I.length?dc(I,Vl,As):n}function ID(I,N){return I&&I.length?dc(I,zn(N,2),As):n}var tfe=Pu(function(I,N){return I*N},1),nfe=Vf("round"),rfe=Pu(function(I,N){return I-N},0);function ife(I){return I&&I.length?sm(I,Vl):0}function sfe(I,N){return I&&I.length?sm(I,zn(N,2)):0}return Ae.after=nr,Ae.ary=oi,Ae.assign=u2,Ae.assignIn=bC,Ae.assignInWith=$A,Ae.assignWith=dD,Ae.at=$u,Ae.before=ra,Ae.bind=ti,Ae.bindAll=MC,Ae.bindKey=zu,Ae.castArray=sD,Ae.chain=ju,Ae.chunk=ta,Ae.compact=Lu,Ae.concat=Tr,Ae.cond=R2,Ae.conforms=wD,Ae.constant=KA,Ae.countBy=OA,Ae.create=bS,Ae.curry=Pm,Ae.curryRight=oS,Ae.debounce=lS,Ae.defaults=d2,Ae.defaultsDeep=h2,Ae.defer=Ji,Ae.delay=cS,Ae.difference=bi,Ae.differenceBy=Ws,Ae.differenceWith=yc,Ae.drop=fs,Ae.dropRight=Pd,Ae.dropRightWhile=Bm,Ae.dropWhile=Ds,Ae.fill=hg,Ae.filter=tp,Ae.flatMap=S,Ae.flatMapDeep=j,Ae.flatMapDepth=Q,Ae.flatten=ii,Ae.flattenDeep=na,Ae.flattenDepth=Co,Ae.flip=nD,Ae.flow=P2,Ae.flowRight=qA,Ae.fromPairs=zh,Ae.functions=hD,Ae.functionsIn=fD,Ae.groupBy=xe,Ae.initial=fC,Ae.intersection=Ks,Ae.intersectionBy=Eo,Ae.intersectionWith=ul,Ae.invert=pD,Ae.invertBy=gD,Ae.invokeMap=Ze,Ae.iteratee=sx,Ae.keyBy=Mt,Ae.keys=_o,Ae.keysIn=Cc,Ae.map=Jt,Ae.mapKeys=AD,Ae.mapValues=m2,Ae.matches=RC,Ae.matchesProperty=k2,Ae.memoize=Wv,Ae.merge=QA,Ae.mergeWith=UA,Ae.method=_D,Ae.methodOf=PC,Ae.mixin=g,Ae.negate=gC,Ae.nthArg=P,Ae.omit=A2,Ae.omitBy=yD,Ae.once=rD,Ae.orderBy=hn,Ae.over=$,Ae.overArgs=iD,Ae.overEvery=W,Ae.overSome=le,Ae.partial=zA,Ae.partialRight=km,Ae.partition=An,Ae.pick=HA,Ae.pickBy=GA,Ae.property=ye,Ae.propertyOf=Pe,Ae.pull=Yf,Ae.pullAll=Ci,Ae.pullAllBy=NA,Ae.pullAllWith=Nd,Ae.pullAt=_a,Ae.range=st,Ae.rangeRight=wt,Ae.rearg=uS,Ae.reject=Rm,Ae.remove=Es,Ae.rest=mC,Ae.reverse=Fu,Ae.sampleSize=ut,Ae.set=EC,Ae.setWith=ES,Ae.shuffle=Xe,Ae.slice=fg,Ae.sortBy=Pn,Ae.sortedUniq=LA,Ae.sortedUniqBy=Dm,Ae.split=TC,Ae.spread=dS,Ae.tail=FA,Ae.take=jA,Ae.takeRight=si,Ae.takeRightWhile=Bi,Ae.takeWhile=Mr,Ae.tap=pg,Ae.throttle=mg,Ae.thru=wo,Ae.toArray=c2,Ae.toPairs=SC,Ae.toPairsIn=nx,Ae.toPath=Je,Ae.toPlainObject=xC,Ae.transform=v2,Ae.unary=Qh,Ae.union=qr,Ae.unionBy=Ln,Ae.unionWith=jr,Ae.uniq=Ar,Ae.uniqBy=Rr,Ae.uniqWith=Wi,Ae.unset=x2,Ae.unzip=Ss,Ae.unzipWith=Ei,Ae.update=vD,Ae.updateWith=b2,Ae.values=VA,Ae.valuesIn=SS,Ae.without=Ul,Ae.words=D2,Ae.wrap=Kv,Ae.xor=Ld,Ae.xorBy=Zc,Ae.xorWith=ai,Ae.zip=Hl,Ae.zipObject=eu,Ae.zipObjectDeep=So,Ae.zipWith=hl,Ae.entries=SC,Ae.entriesIn=nx,Ae.extend=bC,Ae.extendWith=$A,g(Ae,Ae),Ae.add=it,Ae.attempt=MS,Ae.camelCase=IC,Ae.capitalize=C2,Ae.ceil=Rt,Ae.clamp=xD,Ae.clone=XI,Ae.cloneDeep=ZI,Ae.cloneDeepWith=e2,Ae.cloneWith=JI,Ae.conformsTo=aD,Ae.deburr=WA,Ae.defaultTo=DC,Ae.divide=Kn,Ae.endsWith=bD,Ae.eq=nu,Ae.escape=E2,Ae.escapeRegExp=S2,Ae.every=ep,Ae.find=Go,Ae.findIndex=Gv,Ae.findKey=f2,Ae.findLast=b,Ae.findLastIndex=Tm,Ae.findLastKey=tx,Ae.floor=Ti,Ae.forEach=Y,Ae.forEachRight=ie,Ae.forIn=Qu,Ae.forInRight=p2,Ae.forOwn=CC,Ae.forOwnRight=ip,Ae.get=vg,Ae.gt=t2,Ae.gte=n2,Ae.has=g2,Ae.hasIn=CS,Ae.head=Mm,Ae.identity=Vl,Ae.includes=Re,Ae.indexOf=Vv,Ae.inRange=wC,Ae.invoke=mD,Ae.isArguments=Nm,Ae.isArray=Er,Ae.isArrayBuffer=hS,Ae.isArrayLike=xc,Ae.isArrayLikeObject=Ia,Ae.isBoolean=qv,Ae.isBuffer=Ag,Ae.isDate=r2,Ae.isElement=ni,Ae.isEmpty=fS,Ae.isEqual=AC,Ae.isEqualWith=pS,Ae.isError=yC,Ae.isFinite=gS,Ae.isFunction=ru,Ae.isInteger=Yv,Ae.isLength=vC,Ae.isMap=i2,Ae.isMatch=s2,Ae.isMatchWith=a2,Ae.isNaN=ns,Ae.isNative=mS,Ae.isNil=oD,Ae.isNull=Vo,Ae.isNumber=AS,Ae.isObject=Ps,Ae.isObjectLike=ia,Ae.isPlainObject=Xv,Ae.isRegExp=Jv,Ae.isSafeInteger=yS,Ae.isSet=Zv,Ae.isString=ex,Ae.isSymbol=bc,Ae.isTypedArray=yg,Ae.isUndefined=vS,Ae.isWeakMap=lD,Ae.isWeakSet=o2,Ae.join=$h,Ae.kebabCase=w2,Ae.last=di,Ae.lastIndexOf=pC,Ae.lowerCase=_2,Ae.lowerFirst=wS,Ae.lt=cD,Ae.lte=l2,Ae.max=Rn,Ae.maxBy=Pr,Ae.mean=li,Ae.meanBy=Mi,Ae.min=Sg,Ae.minBy=ID,Ae.stubArray=kt,Ae.stubFalse=dt,Ae.stubObject=bt,Ae.stubString=wn,Ae.stubTrue=er,Ae.multiply=tfe,Ae.nth=kd,Ae.noConflict=y,Ae.noop=_,Ae.now=Ni,Ae.pad=I2,Ae.padEnd=B2,Ae.padStart=BC,Ae.parseInt=CD,Ae.random=_C,Ae.reduce=ur,Ae.reduceRight=fl,Ae.repeat=ED,Ae.replace=_S,Ae.result=y2,Ae.round=nfe,Ae.runInContext=Ve,Ae.sample=np,Ae.size=At,Ae.snakeCase=IS,Ae.some=Gt,Ae.sortedIndex=Rs,Ae.sortedIndexBy=Xf,Ae.sortedIndexOf=qs,Ae.sortedLastIndex=dl,Ae.sortedLastIndexBy=Ho,Ae.sortedLastIndexOf=Jf,Ae.startCase=BS,Ae.startsWith=T2,Ae.subtract=rfe,Ae.sum=ife,Ae.sumBy=sfe,Ae.template=TS,Ae.times=rs,Ae.toFinite=rp,Ae.toInteger=ar,Ae.toLength=xS,Ae.toLower=xg,Ae.toNumber=iu,Ae.toSafeInteger=uD,Ae.toString=Ki,Ae.toUpper=bg,Ae.trim=Cg,Ae.trimEnd=rx,Ae.trimStart=ix,Ae.truncate=Eg,Ae.unescape=SD,Ae.uniqueId=ze,Ae.upperCase=M2,Ae.upperFirst=Lm,Ae.each=Y,Ae.eachRight=ie,Ae.first=Mm,g(Ae,(function(){var I={};return xa(Ae,function(N,U){gi.call(Ae.prototype,U)||(I[U]=N)}),I})(),{chain:!1}),Ae.VERSION=r,el(["bind","bindKey","curry","curryRight","partial","partialRight"],function(I){Ae[I].placeholder=Ae}),el(["drop","take"],function(I,N){mr.prototype[I]=function(U){U=U===n?1:Cs(ar(U),0);var ne=this.__filtered__&&!N?new mr(this):this.clone();return ne.__filtered__?ne.__takeCount__=Us(U,ne.__takeCount__):ne.__views__.push({size:Us(U,J),type:I+(ne.__dir__<0?"Right":"")}),ne},mr.prototype[I+"Right"]=function(U){return this.reverse()[I](U).reverse()}}),el(["filter","map","takeWhile"],function(I,N){var U=N+1,ne=U==V||U==O;mr.prototype[I]=function(de){var be=this.clone();return be.__iteratees__.push({iteratee:zn(de,3),type:U}),be.__filtered__=be.__filtered__||ne,be}}),el(["head","last"],function(I,N){var U="take"+(N?"Right":"");mr.prototype[I]=function(){return this[U](1).value()[0]}}),el(["initial","tail"],function(I,N){var U="drop"+(N?"":"Right");mr.prototype[I]=function(){return this.__filtered__?new mr(this):this[U](1)}}),mr.prototype.compact=function(){return this.filter(Vl)},mr.prototype.find=function(I){return this.filter(I).head()},mr.prototype.findLast=function(I){return this.reverse().find(I)},mr.prototype.invokeMap=_r(function(I,N){return typeof I=="function"?new mr(this):this.map(function(U){return Nl(U,I,N)})}),mr.prototype.reject=function(I){return this.filter(gC(zn(I)))},mr.prototype.slice=function(I,N){I=ar(I);var U=this;return U.__filtered__&&(I>0||N<0)?new mr(U):(I<0?U=U.takeRight(-I):I&&(U=U.drop(I)),N!==n&&(N=ar(N),U=N<0?U.dropRight(-N):U.take(N-I)),U)},mr.prototype.takeRightWhile=function(I){return this.reverse().takeWhile(I).reverse()},mr.prototype.toArray=function(){return this.take(J)},xa(mr.prototype,function(I,N){var U=/^(?:filter|find|map|reject)|While$/.test(N),ne=/^(?:head|last)$/.test(N),de=Ae[ne?"take"+(N=="last"?"Right":""):N],be=ne||/^find/.test(N);de&&(Ae.prototype[N]=function(){var De=this.__wrapped__,Oe=ne?[1]:arguments,et=De instanceof mr,Nt=Oe[0],Lt=et||Er(De),Ut=function(hi){var Si=de.apply(Ae,bu([hi],Oe));return ne&&yn?Si[0]:Si};Lt&&U&&typeof Nt=="function"&&Nt.length!=1&&(et=Lt=!1);var yn=this.__chain__,Fn=!!this.__actions__.length,or=be&&!yn,Yr=et&&!Fn;if(!be&&Lt){De=Yr?De:new mr(this);var lr=I.apply(De,Oe);return lr.__actions__.push({func:wo,args:[Ut],thisArg:n}),new rl(lr,yn)}return or&&Yr?I.apply(this,Oe):(lr=this.thru(Ut),or?ne?lr.value()[0]:lr.value():lr)})}),el(["pop","push","shift","sort","splice","unshift"],function(I){var N=Jp[I],U=/^(?:push|sort|unshift)$/.test(I)?"tap":"thru",ne=/^(?:pop|shift)$/.test(I);Ae.prototype[I]=function(){var de=arguments;if(ne&&!this.__chain__){var be=this.value();return N.apply(Er(be)?be:[],de)}return this[U](function(De){return N.apply(Er(De)?De:[],de)})}}),xa(mr.prototype,function(I,N){var U=Ae[N];if(U){var ne=U.name+"";gi.call(vi,ne)||(vi[ne]=[]),vi[ne].push({name:N,func:U})}}),vi[Ph(n,x).name]=[{name:"wrapper",func:n}],mr.prototype.clone=fo,mr.prototype.reverse=Bd,mr.prototype.value=ac,Ae.prototype.at=gg,Ae.prototype.chain=Ou,Ae.prototype.commit=ws,Ae.prototype.next=tu,Ae.prototype.plant=vc,Ae.prototype.reverse=Fd,Ae.prototype.toJSON=Ae.prototype.valueOf=Ae.prototype.value=Zf,Ae.prototype.first=Ae.prototype.head,ya&&(Ae.prototype[ya]=Gl),Ae}),Tf=Xp();nc?((nc.exports=Tf)._=Tf,wf._=Tf):ea._=Tf}).call(hOe)})(Lw,Lw.exports)),Lw.exports}var A6=fOe();class pOe{iframe=null;targetOrigin="*";enabled=!0;constructor(e){this.targetOrigin=e?.targetOrigin||"*",this.enabled=e?.enabled!==!1}setIframe(e){this.iframe=e}setEnabled(e){this.enabled=e}isReady(){return nh()&&!xf()?!1:this.enabled&&!!this.iframe?.contentWindow}sendElementAdded(e,n){if(!this.isReady())return!1;const r={type:"DELTA_ELEMENT_ADDED",element:this.sanitizeElement(e),childElements:n?.map(i=>this.sanitizeElement(i))};return this.send(r)}sendElementUpdated(e,n,r){if(!this.isReady())return!1;const i={type:"DELTA_ELEMENT_UPDATED",elementId:e,propsChanges:this.sanitizeProps(n),...r?.parentId!==void 0&&{parentId:r.parentId},...r?.orderNum!==void 0&&{orderNum:r.orderNum}};return this.send(i)}sendElementRemoved(e,n){if(!this.isReady())return!1;const r={type:"DELTA_ELEMENT_REMOVED",elementId:e,childElementIds:n};return this.send(r)}sendBatchUpdate(e){if(!this.isReady())return!1;const n={type:"DELTA_BATCH_UPDATE",updates:e.map(r=>({...r,propsChanges:r.propsChanges?this.sanitizeProps(r.propsChanges):void 0}))};return this.send(n)}sendFullElements(e,n){if(!this.isReady())return!1;const r={type:"UPDATE_ELEMENTS",elements:e.map(i=>this.sanitizeElement(i)),pageInfo:n};return this.send(r)}send(e){try{return this.iframe?.contentWindow?(this.iframe.contentWindow.postMessage(e,this.targetOrigin),!0):!1}catch{return!1}}sanitizeElement(e){try{return JSON.parse(JSON.stringify(e))}catch{return{id:e.id,tag:e.tag,props:this.sanitizeProps(e.props),parent_id:e.parent_id,page_id:e.page_id,order_num:e.order_num,customId:e.customId,events:e.events,dataBinding:e.dataBinding,layout_id:e.layout_id,slot_id:e.slot_id}}}sanitizeProps(e){try{return JSON.parse(JSON.stringify(e))}catch{return{...e}}}}const gOe=new pOe;let XB=null;const b9=A6.debounce(()=>Promise.resolve(),0),I4=()=>{if(nh()&&!xf())return{iframeReadyState:"not_initialized",handleIframeLoad:()=>{},handleMessage:()=>{},handleUndo:b9,handleRedo:b9,sendElementsToIframe:()=>{},sendElementSelectedMessage:()=>{},requestElementSelection:()=>{},requestAutoSelectAfterUpdate:()=>{},sendLayoutsToIframe:()=>{},sendDataTablesToIframe:()=>{},sendApiEndpointsToIframe:()=>{},sendVariablesToIframe:()=>{},isIframeReady:!1};const[e,n]=C.useState("not_initialized"),r=C.useRef("not_initialized"),i=C.useRef(!1),s=C.useRef([]),a=C.useRef(0),o=C.useRef(!1),l=C.useRef(null),c=je(Z=>Z.elementsMap),u=je(Z=>Z.setSelectedElement),h=Di(Z=>Z.isSyncingToBuilder),f=je(Z=>Z.currentPageId),p=je(Z=>Z.pages),m=Cl(Z=>Z.layouts),v=QF(),A=h4(),x=UF(),E=e==="ready",w=C.useCallback(Z=>{const ee=Ja.getIframe(),te=r.current,oe=sd.getState().mode,ae=Cl.getState().currentLayoutId,{currentPageId:se,pages:fe}=je.getState(),Ee=fe.find(Ce=>Ce.id===se),Be=oe==="layout"?{pageId:null,layoutId:ae}:{pageId:se,layoutId:Ee?.layout_id||null};if(te!=="ready"||!ee?.contentWindow){s.current.push({type:"UPDATE_ELEMENTS",payload:{elements:Z,pageInfo:Be}});return}const _e={type:"UPDATE_ELEMENTS",elements:Z,pageInfo:Be};ee.contentWindow.postMessage(_e,window.location.origin)},[]),B=C.useCallback((Z,ee)=>{const te=Ja.getIframe(),oe=r.current,ae={type:"UPDATE_PAGE_INFO",pageId:Z,layoutId:ee};if(oe!=="ready"||!te?.contentWindow){s.current.push({type:"UPDATE_PAGE_INFO",payload:ae});return}te.contentWindow.postMessage(ae,window.location.origin)},[]),D=C.useCallback(()=>{const Z=Ja.getIframe(),ee=r.current,ae={type:"UPDATE_LAYOUTS",layouts:Cl.getState().layouts.map(se=>({id:se.id,name:se.name,slug:se.slug||null}))};if(ee!=="ready"||!Z?.contentWindow){s.current.push({type:"UPDATE_LAYOUTS",payload:ae});return}Z.contentWindow.postMessage(ae,window.location.origin)},[]),T=C.useCallback(()=>{const Z=Ja.getIframe(),ee=r.current,ae={type:"UPDATE_DATA_TABLES",dataTables:v.map(se=>({id:se.id,name:se.name,schema:se.schema,mockData:se.mockData||[],runtimeData:se.runtimeData||[],useMockData:se.useMockData}))};if(ee!=="ready"||!Z?.contentWindow){s.current.push({type:"UPDATE_DATA_TABLES",payload:ae});return}Z.contentWindow.postMessage(ae,window.location.origin)},[v]),M=C.useCallback(()=>{const Z=Ja.getIframe(),ee=r.current,ae={type:"UPDATE_API_ENDPOINTS",apiEndpoints:A.map(se=>({id:se.id,name:se.name,method:se.method,baseUrl:se.baseUrl,path:se.path,headers:se.headers,params:se.params,body:se.body}))};if(ee!=="ready"||!Z?.contentWindow){s.current.push({type:"UPDATE_API_ENDPOINTS",payload:ae});return}Z.contentWindow.postMessage(ae,window.location.origin)},[A]),R=C.useCallback(()=>{const Z=Ja.getIframe(),ee=r.current,oe={type:"UPDATE_VARIABLES",variables:d4e()};if(ee!=="ready"||!Z?.contentWindow){s.current.push({type:"UPDATE_VARIABLES",payload:oe});return}Z.contentWindow.postMessage(oe,window.location.origin)},[]),k=C.useCallback((Z,ee)=>{const te=Ja.getIframe(),oe=c.get(Z);if(!oe)return;const ae={type:"ELEMENT_SELECTED",elementId:Z,payload:{tag:oe.tag,props:ee||oe.props,source:"builder"},source:"builder"};if(r.current!=="ready"||!te?.contentWindow){s.current.push({type:"ELEMENT_SELECTED",payload:ae});return}te.contentWindow.postMessage(ae,window.location.origin)},[c]),L=C.useCallback(()=>{if(r.current!=="ready")return;const Z=Ja.getIframe();if(!Z?.contentWindow)return;const ee=[...s.current];s.current=[],ee.forEach(te=>{if(te.type==="UPDATE_ELEMENTS"){const oe=te.payload;Z.contentWindow.postMessage({type:"UPDATE_ELEMENTS",elements:oe.elements,pageInfo:oe.pageInfo},window.location.origin)}else(te.type==="ELEMENT_SELECTED"||te.type==="REQUEST_ELEMENT_SELECTION"||te.type==="UPDATE_PAGE_INFO"||te.type==="UPDATE_LAYOUTS"||te.type==="UPDATE_DATA_TABLES"||te.type==="UPDATE_API_ENDPOINTS"||te.type==="UPDATE_VARIABLES")&&Z.contentWindow.postMessage(te.payload,window.location.origin)})},[]),F=C.useCallback(()=>{r.current="loading",n("loading")},[]),z=C.useCallback(Z=>{if(Z.origin!==window.location.origin){console.warn("Received message from untrusted origin:",Z.origin);return}if(Z.data.type==="PREVIEW_READY"){r.current="ready",n("ready");const ee=Ja.getIframe();ee&&gOe.setIframe(ee),L();const te=()=>{D(),T(),M(),R();const se=je.getState().elements;se.length>0&&(l.current=se,w(se))},oe=sd.persist?.hasHydrated?.()??!0,ae=Cl.persist?.hasHydrated?.()??!0;if(oe&&ae)te();else{const se=()=>{const fe=sd.persist?.hasHydrated?.()??!0,Ee=Cl.persist?.hasHydrated?.()??!0;fe&&Ee?te():requestAnimationFrame(se)};requestAnimationFrame(se)}return}if(Z.data.type==="ELEMENTS_UPDATED_ACK"){if(a.current=Z.data.timestamp||Date.now(),o.current=!1,XB){const ee=XB;XB=null;const te=Ja.getIframe();te?.contentWindow&&te.contentWindow.postMessage({type:"REQUEST_ELEMENT_SELECTION",elementId:ee},"*")}return}if(Z.data.type==="ADD_COLUMN_ELEMENTS"&&Z.data.payload?.columns){const{elements:ee}=je.getState(),te=Z.data.payload.columns,oe=new Set(ee.map(se=>se.id)),ae=te.filter(se=>!oe.has(se.id));if(ae.length===0)return;je.setState(se=>({elements:[...se.elements,...ae]})),(async()=>{try{await ud.createMultipleElements(ae)}catch(se){console.error(" Column Elements DB  :",se)}})();return}if(Z.data.type==="ADD_FIELD_ELEMENTS"&&Z.data.payload?.fields){const{elements:ee}=je.getState(),te=Z.data.payload.fields,oe=new Set(ee.map(se=>se.id)),ae=te.filter(se=>!oe.has(se.id));if(ae.length===0)return;je.setState(se=>({elements:[...se.elements,...ae]})),(async()=>{try{await ud.createMultipleElements(ae)}catch(se){console.error(" Field Elements DB  :",se)}})();return}if(Z.data.type==="UPDATE_ELEMENTS"&&Z.data.elements){const{setElements:ee}=je.getState();ee(Z.data.elements)}if(Z.data.type==="UPDATE_THEME_TOKENS"){const ee=Ja.getIframe();if(!ee?.contentDocument)return;let te=document.getElementById("theme-tokens");te||(te=document.createElement("style"),te.id="theme-tokens",document.head.appendChild(te));const oe=`:root {
${Object.entries(Z.data.styles).map(([se,fe])=>`  ${se}: ${fe};`).join(`
`)}
}`;te.textContent=oe;let ae=ee.contentDocument.getElementById("theme-tokens");ae||(ae=ee.contentDocument.createElement("style"),ae.id="theme-tokens",ee.contentDocument.head.appendChild(ae)),ae.textContent=oe}if(Z.data.type==="ELEMENT_SELECTED"&&Z.data.source!=="builder"){const ee=je.getState().selectedElementId,te=Z.data.elementId;if(h&&te===ee)return;const{isMultiSelect:oe}=Z.data;oe?je.getState().toggleElementInSelection(te):u(te,Z.data.payload?.props,Z.data.payload?.style,void 0)}if(Z.data.type==="ELEMENT_COMPUTED_STYLE"&&Z.data.elementId){const{updateSelectedElementComputedStyle:ee}=Di.getState();je.getState().selectedElementId===Z.data.elementId&&Z.data.payload?.computedStyle&&ee(Z.data.payload.computedStyle)}if(Z.data.type==="ELEMENTS_DRAG_SELECTED"&&je.getState().setSelectedElements(Z.data.elementIds),Z.data.type==="UPDATE_ELEMENT_PROPS"&&Z.data.elementId){const{updateElementProps:ee}=je.getState();ee(Z.data.elementId,Z.data.props||Z.data.payload?.props)}if(Z.data.type==="element-props-update"&&Z.data.elementId){const{updateElementProps:ee}=je.getState();ee(Z.data.elementId,Z.data.props)}if(Z.data.type==="element-click"&&Z.data.elementId){u(Z.data.elementId,Z.data.payload?.props);const ee=c.get(Z.data.elementId);if(ee){const te=Ja.getIframe();if(te?.contentWindow){const oe={type:"ELEMENT_SELECTED",elementId:Z.data.elementId,payload:{tag:ee.tag,props:ee.props,source:"builder"},source:"builder"};te.contentWindow.postMessage(oe,window.location.origin)}}}Z.data.type==="element-hover"&&Z.data.elementId},[u,c,h,L,w,D,T,M,R]),G=A6.debounce(async()=>{if(!i.current){i.current=!0;try{const{undo:Z}=je.getState();Z()}catch(Z){console.error("  Undo error:",Z)}finally{i.current=!1}}},300),V=A6.debounce(async()=>{if(!i.current){i.current=!0;try{const{redo:Z}=je.getState();Z()}catch(Z){console.error("  Redo error:",Z)}finally{i.current=!1}}},300),q=C.useRef({pageId:null,layoutId:null});C.useEffect(()=>{if(r.current!=="ready")return;const ee=p.find(te=>te.id===f)?.layout_id||null;q.current.pageId===f&&q.current.layoutId===ee||(q.current={pageId:f,layoutId:ee},B(f,ee))},[f,p,B]);const O=C.useRef("");C.useEffect(()=>{if(r.current!=="ready")return;const Z=JSON.stringify(m.map(ee=>({id:ee.id,name:ee.name,slug:ee.slug})));O.current!==Z&&(O.current=Z,D())},[m,D]);const H=C.useRef("");C.useEffect(()=>{const Z=JSON.stringify(v.map(ee=>({id:ee.id,name:ee.name,mockData:ee.mockData,useMockData:ee.useMockData})));H.current!==Z&&(H.current=Z,T())},[v,T]);const K=C.useRef("");C.useEffect(()=>{const Z=JSON.stringify(A.map(ee=>({id:ee.id,name:ee.name,method:ee.method,baseUrl:ee.baseUrl,path:ee.path})));K.current!==Z&&(K.current=Z,M())},[A,M]);const X=C.useRef("");C.useEffect(()=>{const Z=JSON.stringify(x.map(ee=>({id:ee.id,name:ee.name,type:ee.type,defaultValue:ee.defaultValue,persist:ee.persist,scope:ee.scope})));X.current!==Z&&(X.current=Z,R())},[x,R]);const re=C.useCallback(Z=>{const ee=Ja.getIframe(),te={type:"REQUEST_ELEMENT_SELECTION",elementId:Z};if(r.current!=="ready"||!ee?.contentWindow){s.current.push({type:"REQUEST_ELEMENT_SELECTION",payload:te});return}ee.contentWindow.postMessage(te,window.location.origin)},[]),J=C.useCallback(Z=>{XB=Z},[]);return{iframeReadyState:e,handleIframeLoad:F,handleMessage:z,handleUndo:G,handleRedo:V,sendElementsToIframe:w,sendElementSelectedMessage:k,requestElementSelection:re,requestAutoSelectAfterUpdate:J,sendLayoutsToIframe:D,sendDataTablesToIframe:T,sendApiEndpointsToIframe:M,sendVariablesToIframe:R,isIframeReady:E}},xj="xstudio_sidebar_tabs";function C9(){try{const t=localStorage.getItem(xj);if(t){const e=JSON.parse(t);if(Array.isArray(e))return new Set(e)}}catch(t){console.error("Failed to load sidebar tabs:",t)}return new Set}function mOe(t){try{const e=Array.from(t);localStorage.setItem(xj,JSON.stringify(e))}catch(e){console.error("Failed to save sidebar tabs:",e)}}function AOe(){const[t,e]=C.useState(()=>C9());return C.useEffect(()=>{mOe(t)},[t]),C.useEffect(()=>{const i=s=>{if("key"in s&&s.key!==xj)return;const a=C9();e(a)};return window.addEventListener("storage",i),()=>window.removeEventListener("storage",i)},[]),{activeTabs:t,toggleTab:i=>{e(s=>{const a=new Set(s);return a.has(i)?a.delete(i):a.add(i),a})},closeAll:()=>{e(new Set)}}}function yOe({pages:t,pageList:e,handleAddPage:n,addPageWithParams:r,handleAddElement:i,fetchElements:s,selectedPageId:a,children:o,forcedActiveTabs:l,projectId:c}){const u=VNe(),h=je(z=>z.selectedElementId),f=je(z=>z.selectedTab),p=je(z=>z.setSelectedElement),m=je(z=>z.selectTabElement),{activeTabs:v}=AOe(),A=l||v,{expandedKeys:x,toggleKey:E,collapseAll:w}=coe({selectedElementId:h,elements:u}),B=E,D=(z,G,V,q,O,H,K,X,re)=>{const J=z.reduce((oe,ae)=>(ae.parent_id===O&&ae.tag==="TableHeader"?oe.tableHeader=ae:oe.tableHeader&&ae.parent_id===oe.tableHeader.id&&(ae.tag==="ColumnGroup"?oe.columnGroups.push(ae):ae.tag==="Column"&&oe.columns.push(ae)),oe),{tableHeader:null,columnGroups:[],columns:[]}),Z=J.tableHeader;if(!Z)return null;const ee=J.columnGroups.sort((oe,ae)=>(oe.order_num||0)-(ae.order_num||0)),te=J.columns.sort((oe,ae)=>(oe.order_num||0)-(ae.order_num||0));return d.jsxs(d.Fragment,{children:[d.jsx("div",{"data-depth":H+1,"data-has-children":ee.length>0||te.length>0,className:"element",onClick:oe=>{oe.stopPropagation(),V(Z)},children:d.jsxs("div",{className:`elementItem ${h===Z.id?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(H+1)*8}px`}}),d.jsx("div",{className:"elementItemIcon",onClick:oe=>{oe.stopPropagation(),(ee.length>0||te.length>0)&&X(Z.id)},children:ee.length>0||te.length>0?d.jsx(Sl,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{transform:re.has(Z.id)?"rotate(90deg)":"rotate(0deg)"}}):d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:"thead"}),d.jsxs("div",{className:"elementItemActions",children:[d.jsx("button",{className:"iconButton","aria-label":"Settings",children:d.jsx(Fg,{color:yt.color,strokeWidth:yt.stroke,size:yt.size})}),d.jsx("button",{className:"iconButton","aria-label":"Delete thead",onClick:async oe=>{oe.stopPropagation(),await q(Z)},children:d.jsx(Gd,{color:yt.color,strokeWidth:yt.stroke,size:yt.size})})]})]})},Z.id),ee.length>0&&re.has(Z.id)&&d.jsx("div",{"data-depth":H+2,"data-has-children":!0,className:"element",children:d.jsxs("div",{className:"elementItem",children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(H+2)*8}px`}}),d.jsx("div",{className:"elementItemIcon",onClick:oe=>{if(oe.stopPropagation(),ee.length>0){const ae=`column-groups-${Z.id}`;X(ae)}},children:ee.length>0?d.jsx(Sl,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{transform:re.has(`column-groups-${Z.id}`)?"rotate(90deg)":"rotate(0deg)"}}):d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:"tr (Column Groups)"})]})}),re.has(`column-groups-${Z.id}`)&&ee.map(oe=>d.jsx("div",{"data-depth":H+3,"data-has-children":!1,className:"element",onClick:ae=>{ae.stopPropagation(),V(oe)},children:d.jsxs("div",{className:`elementItem ${h===oe.id?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(H+3)*8}px`}}),d.jsx("div",{className:"elementItemIcon",children:d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsxs("div",{className:"elementItemLabel",children:["ColumnGroup:"," ",oe.props?.label||"Untitled"]}),d.jsxs("div",{className:"elementItemActions",children:[d.jsx("button",{className:"iconButton","aria-label":"Settings",children:d.jsx(Fg,{color:yt.color,strokeWidth:yt.stroke,size:yt.size})}),d.jsx("button",{className:"iconButton","aria-label":"Delete ColumnGroup",onClick:async ae=>{ae.stopPropagation(),await q(oe)},children:d.jsx(Gd,{color:yt.color,strokeWidth:yt.stroke,size:yt.size})})]})]})},oe.id)),te.length>0&&re.has(Z.id)&&d.jsx("div",{"data-depth":H+2,"data-has-children":!0,className:"element",children:d.jsxs("div",{className:"elementItem",children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(H+2)*8}px`}}),d.jsx("div",{className:"elementItemIcon",onClick:oe=>{if(oe.stopPropagation(),te.length>0){const ae=`individual-columns-${Z.id}`;X(ae)}},children:te.length>0?d.jsx(Sl,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{transform:re.has(`individual-columns-${Z.id}`)?"rotate(90deg)":"rotate(0deg)"}}):d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:"tr (Individual Columns)"})]})}),re.has(`individual-columns-${Z.id}`)&&te.map(oe=>d.jsx("div",{"data-depth":H+3,"data-has-children":!1,className:"element",onClick:ae=>{ae.stopPropagation(),V(oe)},children:d.jsxs("div",{className:`elementItem ${h===oe.id?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(H+3)*8}px`}}),d.jsx("div",{className:"elementItemIcon",children:d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsxs("div",{className:"elementItemLabel",children:["th:"," ",oe.props?.children||"Column"]}),d.jsxs("div",{className:"elementItemActions",children:[d.jsx("button",{className:"iconButton","aria-label":"Settings",children:d.jsx(Fg,{color:yt.color,strokeWidth:yt.stroke,size:yt.size})}),d.jsx("button",{className:"iconButton","aria-label":"Delete Column",onClick:async ae=>{ae.stopPropagation(),await q(oe)},children:d.jsx(Gd,{color:yt.color,strokeWidth:yt.stroke,size:yt.size})})]})]})},oe.id))]})},T=(z,G,V,q,O=null,H=0)=>{let K=z.filter(X=>!(X.deleted===!0||!(X.parent_id===O||O===null&&X.parent_id===void 0)));if(O){const X=z.find(re=>re.id===O);if(X&&ys(X)&&X.tag==="Tabs"){const re=K.filter(te=>ys(te)&&te.tag==="Tab").sort((te,oe)=>(te.order_num||0)-(oe.order_num||0)),J=K.filter(te=>ys(te)&&te.tag==="Panel").sort((te,oe)=>(te.order_num||0)-(oe.order_num||0)),Z=[],ee=new Set;re.forEach(te=>{Z.push(te);const ae=(Gu(te)?te.props:{})?.tabId;if(ae){const se=J.find(fe=>(Gu(fe)?fe.props:{})?.tabId===ae);se&&!ee.has(se.id)&&(Z.push(se),ee.add(se.id))}else{console.warn(" Tab tabId , order_num  fallback :",te.id);const se=J.find(fe=>!ee.has(fe.id)&&Math.abs((fe.order_num||0)-(te.order_num||0))<=1);se&&(Z.push(se),ee.add(se.id))}}),J.forEach(te=>{ee.has(te.id)||(console.warn("   Panel:",te.id),Z.push(te))}),K=Z}else if(X&&ys(X)&&X.tag==="Table"){const re=K.filter(se=>ys(se)&&se.tag==="TableHeader"),J=K.filter(se=>ys(se)&&se.tag==="TableBody"),Z=K.filter(se=>ys(se)&&se.tag==="Column"),ee=K.filter(se=>ys(se)&&se.tag==="ColumnGroup"),te=K.filter(se=>ys(se)&&se.tag==="Row"),oe=K.filter(se=>ys(se)&&se.tag==="Cell");K=[...re.sort((se,fe)=>(se.order_num||0)-(fe.order_num||0)),...J.sort((se,fe)=>(se.order_num||0)-(fe.order_num||0)),...ee.sort((se,fe)=>(se.order_num||0)-(fe.order_num||0)),...Z.sort((se,fe)=>(se.order_num||0)-(fe.order_num||0)),...te.sort((se,fe)=>(se.order_num||0)-(fe.order_num||0)),...oe.sort((se,fe)=>(se.order_num||0)-(fe.order_num||0))]}else K=K.sort((re,J)=>(re.order_num||0)-(J.order_num||0))}else K=K.sort((X,re)=>(X.order_num||0)-(re.order_num||0));return K.length===0?null:d.jsx(d.Fragment,{children:K.map(X=>{const re=e5e(z,X.id),J=x.has(X.id),Z=ys(X)&&X.tag==="Tabs"&&re,ee=ys(X)&&X.tag==="ToggleButtonGroup"&&Gu(X)&&Array.isArray(X.props.children)&&X.props.children.length>0,te=ys(X)&&X.tag==="CheckboxGroup"&&Gu(X)&&Array.isArray(X.props.children)&&X.props.children.length>0,oe=ys(X)&&X.tag==="RadioGroup"&&Gu(X)&&Array.isArray(X.props.children)&&X.props.children.length>0,ae=ys(X)&&X.tag==="ListBox"&&Gu(X)&&Array.isArray(X.props.children)&&X.props.children.length>0,se=ys(X)&&X.tag==="GridList"&&Gu(X)&&Array.isArray(X.props.children)&&X.props.children.length>0,fe=ys(X)&&X.tag==="Select"&&Gu(X)&&Array.isArray(X.props.children)&&X.props.children.length>0,Ee=ys(X)&&X.tag==="ComboBox"&&Gu(X)&&Array.isArray(X.props.children)&&X.props.children.length>0,Be=ys(X)&&X.tag==="Tree"&&Gu(X)&&Array.isArray(X.props.children)&&X.props.children.length>0,_e=ys(X)&&X.tag==="Table"&&re,Ce=re||Z||ee||te||oe||ae||se||fe||Ee||Be||_e;return d.jsxs("div",{"data-depth":H,"data-has-children":Ce,onClick:Se=>{Se.stopPropagation(),V(X)},className:"element",children:[d.jsxs("div",{className:`elementItem ${"title"in X&&a===X.id||"tag"in X&&h===X.id?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:H>0?`${H*8+0}px`:"0px"}}),d.jsx("div",{className:"elementItemIcon",onClick:Se=>{Se.stopPropagation(),Ce&&B(X.id)},children:Ce?d.jsx(Sl,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{transform:J?"rotate(90deg)":"rotate(0deg)"}}):d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:ys(X)&&X.tag==="Tab"&&Gu(X)?`Tab: ${X.props.title||"Untitled"}`:ys(X)&&X.tag==="Panel"&&Gu(X)?`Panel: ${X.props.title||"Untitled"}`:ys(X)&&X.tag==="TableHeader"?"thead":ys(X)&&X.tag==="TableBody"?"tbody":ys(X)&&X.tag==="Column"&&Gu(X)?`th: ${X.props.children||"Column"}`:ys(X)&&X.tag==="Row"?"tr":ys(X)&&X.tag==="Cell"&&Gu(X)?`td: ${X.props.children||"Cell"}`:G(X)}),d.jsxs("div",{className:"elementItemActions",children:[d.jsx("button",{className:"iconButton","aria-label":"Settings",children:d.jsx(Fg,{color:yt.color,strokeWidth:yt.stroke,size:yt.size})}),!(ys(X)&&X.tag==="body"||X.order_num===0&&X.parent_id===null)&&d.jsx("button",{className:"iconButton","aria-label":`Delete ${G(X)}`,onClick:async Se=>{Se.stopPropagation(),await q(X)},children:d.jsx(Gd,{color:yt.color,strokeWidth:yt.stroke,size:yt.size})})]})]}),J&&d.jsxs(d.Fragment,{children:[_e?D(z,G,V,q,X.id,H,J,B,x):re&&T(z,G,V,q,X.id,H+1),ee&&d.jsx(d.Fragment,{children:Tc(X.props?.children).map((Se,Me)=>d.jsx("div",{"data-depth":H+1,"data-has-children":!1,onClick:ce=>{ce.stopPropagation(),m(X.id,X.props,Me)},className:"element",children:d.jsxs("div",{className:`elementItem ${f?.parentId===X.id&&f?.tabIndex===Me?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(H+1)*8+0}px`}}),d.jsx("div",{className:"elementItemIcon",children:d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:Se.title||`Button ${Me+1}`}),d.jsx("div",{className:"elementItemActions"})]})},`${X.id}-toggle-${Me}`))}),te&&d.jsx(d.Fragment,{children:Tc(X.props?.children).map((Se,Me)=>d.jsx("div",{"data-depth":H+1,"data-has-children":!1,onClick:ce=>{ce.stopPropagation(),m(X.id,X.props,Me)},className:"element",children:d.jsxs("div",{className:`elementItem ${f?.parentId===X.id&&f?.tabIndex===Me?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(H+1)*8+0}px`}}),d.jsx("div",{className:"elementItemIcon",children:d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:Se.label||`Checkbox ${Me+1}`}),d.jsx("div",{className:"elementItemActions"})]})},`${X.id}-checkbox-${Me}`))}),oe&&d.jsx(d.Fragment,{children:Tc(X.props?.children).map((Se,Me)=>d.jsx("div",{"data-depth":H+1,"data-has-children":!1,onClick:ce=>{ce.stopPropagation(),m(X.id,X.props,Me)},className:"element",children:d.jsxs("div",{className:`elementItem ${f?.parentId===X.id&&f?.tabIndex===Me?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(H+1)*8+0}px`}}),d.jsx("div",{className:"elementItemIcon",children:d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:Se.label||`Radio ${Me+1}`}),d.jsx("div",{className:"elementItemActions"})]})},`${X.id}-radio-${Me}`))}),ae&&d.jsx(d.Fragment,{children:Tc(X.props?.children).map((Se,Me)=>d.jsx("div",{"data-depth":H+1,"data-has-children":!1,onClick:ce=>{ce.stopPropagation(),m(X.id,X.props,Me)},className:"element",children:d.jsxs("div",{className:`elementItem ${f?.parentId===X.id&&f?.tabIndex===Me?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(H+1)*8+0}px`}}),d.jsx("div",{className:"elementItemIcon",children:d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:Se.label||`Item ${Me+1}`}),d.jsx("div",{className:"elementItemActions"})]})},`${X.id}-listitem-${Me}`))}),se&&d.jsx(d.Fragment,{children:Tc(X.props?.children).map((Se,Me)=>d.jsx("div",{"data-depth":H+1,"data-has-children":!1,onClick:ce=>{ce.stopPropagation(),m(X.id,X.props,Me)},className:"element",children:d.jsxs("div",{className:`elementItem ${f?.parentId===X.id&&f?.tabIndex===Me?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(H+1)*8+0}px`}}),d.jsx("div",{className:"elementItemIcon",children:d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:Se.label||`Item ${Me+1}`}),d.jsx("div",{className:"elementItemActions"})]})},`${X.id}-griditem-${Me}`))}),fe&&d.jsx(d.Fragment,{children:Tc(X.props?.children).map((Se,Me)=>d.jsx("div",{"data-depth":H+1,"data-has-children":!1,onClick:ce=>{ce.stopPropagation(),m(X.id,X.props,Me)},className:"element",children:d.jsxs("div",{className:`elementItem ${f?.parentId===X.id&&f?.tabIndex===Me?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(H+1)*8+0}px`}}),d.jsx("div",{className:"elementItemIcon",children:d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:Se.label||`Option ${Me+1}`}),d.jsx("div",{className:"elementItemActions"})]})},`${X.id}-selectitem-${Me}`))}),Ee&&d.jsx(d.Fragment,{children:Tc(X.props?.children).map((Se,Me)=>d.jsx("div",{"data-depth":H+1,"data-has-children":!1,onClick:ce=>{ce.stopPropagation(),m(X.id,X.props,Me)},className:"element",children:d.jsxs("div",{className:`elementItem ${f?.parentId===X.id&&f?.tabIndex===Me?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(H+1)*8+0}px`}}),d.jsx("div",{className:"elementItemIcon",children:d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:Se.label||`Option ${Me+1}`}),d.jsx("div",{className:"elementItemActions"})]})},`${X.id}-comboitem-${Me}`))}),Be&&d.jsx(d.Fragment,{children:Tc(X.props?.children).map((Se,Me)=>d.jsxs("div",{"data-depth":H+1,"data-has-children":Se.children&&Se.children.length>0,onClick:ce=>{ce.stopPropagation(),m(X.id,X.props,Me)},className:"element",children:[d.jsxs("div",{className:`elementItem ${f?.parentId===X.id&&f?.tabIndex===Me?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(H+1)*8+0}px`}}),d.jsx("div",{className:"elementItemIcon",children:Se.children&&Se.children.length>0?d.jsx(bT,{color:yt.color,strokeWidth:yt.stroke,size:yt.size}):d.jsx(S1,{color:yt.color,strokeWidth:yt.stroke,size:yt.size})}),d.jsx("div",{className:"elementItemLabel",children:Se.title}),d.jsx("div",{className:"elementItemActions"})]}),Se.children&&Se.children.length>0&&d.jsx(d.Fragment,{children:Se.children.map((ce,$e)=>d.jsx("div",{"data-depth":H+2,"data-has-children":!1,onClick:qe=>{qe.stopPropagation(),m(X.id,X.props,Me)},className:"element",children:d.jsxs("div",{className:"elementItem",children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(H+2)*8+0}px`}}),d.jsx("div",{className:"elementItemIcon",children:d.jsx(S1,{color:yt.color,strokeWidth:yt.stroke,size:yt.size})}),d.jsx("div",{className:"elementItemLabel",children:ce.title}),d.jsx("div",{className:"elementItemActions"})]})},`${X.id}-treeitem-${Me}-child-${$e}`))})]},`${X.id}-treeitem-${Me}`))})]})]},X.id)})})},M=(z,G,V,q=0)=>z.length===0?null:d.jsx(d.Fragment,{children:z.map(O=>{const H=O.children&&O.children.length>0,K=x.has(O.id),X=O.tag==="ToggleButtonGroup"&&O.props?.children&&Array.isArray(O.props.children)&&O.props.children.length>0,re=O.tag==="CheckboxGroup"&&O.props?.children&&Array.isArray(O.props.children)&&O.props.children.length>0,J=O.tag==="RadioGroup"&&O.props?.children&&Array.isArray(O.props.children)&&O.props.children.length>0,Z=O.tag==="ListBox"&&O.props?.children&&Array.isArray(O.props.children)&&O.props.children.length>0,ee=O.tag==="GridList"&&O.props?.children&&Array.isArray(O.props.children)&&O.props.children.length>0,te=O.tag==="Select"&&O.props?.children&&Array.isArray(O.props.children)&&O.props.children.length>0,oe=O.tag==="ComboBox"&&O.props?.children&&Array.isArray(O.props.children)&&O.props.children.length>0,ae=O.tag==="Tree"&&O.props?.children&&Array.isArray(O.props.children)&&O.props.children.length>0,se=O.tag==="Table"&&H,fe=H||X||re||J||Z||ee||te||oe||ae||se,Ee={id:O.id,tag:O.tag,parent_id:O.parent_id||null,order_num:O.order_num,props:O.props,deleted:O.deleted,dataBinding:O.dataBinding,page_id:"",created_at:"",updated_at:""};return d.jsxs("div",{"data-depth":q,"data-has-children":fe,onClick:Be=>{Be.stopPropagation(),G(Ee)},className:"element",children:[d.jsxs("div",{className:`elementItem ${h===O.id?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:q>0?`${q*8+0}px`:"0px"}}),d.jsx("div",{className:"elementItemIcon",onClick:Be=>{Be.stopPropagation(),fe&&B(O.id)},children:fe?d.jsx(Sl,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{transform:K?"rotate(90deg)":"rotate(0deg)"}}):d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:O.tag==="Tab"&&O.props?`Tab: ${O.props.title||"Untitled"}`:O.tag==="Panel"&&O.props?`Panel: ${O.props.title||"Untitled"}`:O.tag==="TableHeader"?"thead":O.tag==="TableBody"?"tbody":O.tag==="Column"&&O.props?`th: ${O.props.children||"Column"}`:O.tag==="Row"?"tr":O.tag==="Cell"&&O.props?`td: ${O.props.children||"Cell"}`:O.tag}),d.jsxs("div",{className:"elementItemActions",children:[d.jsx("button",{className:"iconButton","aria-label":"Settings",children:d.jsx(Fg,{color:yt.color,strokeWidth:yt.stroke,size:yt.size})}),O.tag!=="body"&&d.jsx("button",{className:"iconButton","aria-label":`Delete ${O.tag}`,onClick:async Be=>{Be.stopPropagation(),await V(Ee)},children:d.jsx(Gd,{color:yt.color,strokeWidth:yt.stroke,size:yt.size})})]})]}),K&&d.jsxs(d.Fragment,{children:[se?D(u,Be=>Be.tag||"",(Be=>{const _e=u.find(Ce=>Ce.id===Be.id);_e&&G(_e)}),(Be=>{const _e=u.find(Ce=>Ce.id===Be.id);return _e?V(_e):Promise.resolve()}),O.id,q,K,B,x):H&&O.children&&M(O.children,G,V,q+1),X&&d.jsx(d.Fragment,{children:Tc(O.props?.children).map((Be,_e)=>d.jsx("div",{"data-depth":q+1,"data-has-children":!1,onClick:Ce=>{Ce.stopPropagation(),m(O.id,O.props,_e)},className:"element",children:d.jsxs("div",{className:`elementItem ${f?.parentId===O.id&&f?.tabIndex===_e?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(q+1)*8+0}px`}}),d.jsx("div",{className:"elementItemIcon",children:d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:Be.title||`Button ${_e+1}`}),d.jsx("div",{className:"elementItemActions"})]})},`${O.id}-toggle-${_e}`))}),re&&d.jsx(d.Fragment,{children:Tc(O.props?.children).map((Be,_e)=>d.jsx("div",{"data-depth":q+1,"data-has-children":!1,onClick:Ce=>{Ce.stopPropagation(),m(O.id,O.props,_e)},className:"element",children:d.jsxs("div",{className:`elementItem ${f?.parentId===O.id&&f?.tabIndex===_e?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(q+1)*8+0}px`}}),d.jsx("div",{className:"elementItemIcon",children:d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:Be.label||`Checkbox ${_e+1}`}),d.jsx("div",{className:"elementItemActions"})]})},`${O.id}-checkbox-${_e}`))}),J&&d.jsx(d.Fragment,{children:Tc(O.props?.children).map((Be,_e)=>d.jsx("div",{"data-depth":q+1,"data-has-children":!1,onClick:Ce=>{Ce.stopPropagation(),m(O.id,O.props,_e)},className:"element",children:d.jsxs("div",{className:`elementItem ${f?.parentId===O.id&&f?.tabIndex===_e?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(q+1)*8+0}px`}}),d.jsx("div",{className:"elementItemIcon",children:d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:Be.label||`Radio ${_e+1}`}),d.jsx("div",{className:"elementItemActions"})]})},`${O.id}-radio-${_e}`))}),Z&&d.jsx(d.Fragment,{children:Tc(O.props?.children).map((Be,_e)=>d.jsx("div",{"data-depth":q+1,"data-has-children":!1,onClick:Ce=>{Ce.stopPropagation(),m(O.id,O.props,_e)},className:"element",children:d.jsxs("div",{className:`elementItem ${f?.parentId===O.id&&f?.tabIndex===_e?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(q+1)*8+0}px`}}),d.jsx("div",{className:"elementItemIcon",children:d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:Be.label||`Item ${_e+1}`}),d.jsx("div",{className:"elementItemActions"})]})},`${O.id}-listitem-${_e}`))}),ee&&d.jsx(d.Fragment,{children:Tc(O.props?.children).map((Be,_e)=>d.jsx("div",{"data-depth":q+1,"data-has-children":!1,onClick:Ce=>{Ce.stopPropagation(),m(O.id,O.props,_e)},className:"element",children:d.jsxs("div",{className:`elementItem ${f?.parentId===O.id&&f?.tabIndex===_e?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(q+1)*8+0}px`}}),d.jsx("div",{className:"elementItemIcon",children:d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:Be.label||`Item ${_e+1}`}),d.jsx("div",{className:"elementItemActions"})]})},`${O.id}-griditem-${_e}`))}),te&&d.jsx(d.Fragment,{children:Tc(O.props?.children).map((Be,_e)=>d.jsx("div",{"data-depth":q+1,"data-has-children":!1,onClick:Ce=>{Ce.stopPropagation(),m(O.id,O.props,_e)},className:"element",children:d.jsxs("div",{className:`elementItem ${f?.parentId===O.id&&f?.tabIndex===_e?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(q+1)*8+0}px`}}),d.jsx("div",{className:"elementItemIcon",children:d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:Be.label||`Option ${_e+1}`}),d.jsx("div",{className:"elementItemActions"})]})},`${O.id}-selectitem-${_e}`))}),oe&&d.jsx(d.Fragment,{children:Tc(O.props?.children).map((Be,_e)=>d.jsx("div",{"data-depth":q+1,"data-has-children":!1,onClick:Ce=>{Ce.stopPropagation(),m(O.id,O.props,_e)},className:"element",children:d.jsxs("div",{className:`elementItem ${f?.parentId===O.id&&f?.tabIndex===_e?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(q+1)*8+0}px`}}),d.jsx("div",{className:"elementItemIcon",children:d.jsx(Zi,{color:yt.color,strokeWidth:yt.stroke,size:yt.size,style:{padding:"2px"}})}),d.jsx("div",{className:"elementItemLabel",children:Be.label||`Option ${_e+1}`}),d.jsx("div",{className:"elementItemActions"})]})},`${O.id}-comboitem-${_e}`))}),ae&&d.jsx(d.Fragment,{children:Tc(O.props?.children).map((Be,_e)=>d.jsxs("div",{"data-depth":q+1,"data-has-children":Be.children&&Be.children.length>0,onClick:Ce=>{Ce.stopPropagation(),m(O.id,O.props,_e)},className:"element",children:[d.jsxs("div",{className:`elementItem ${f?.parentId===O.id&&f?.tabIndex===_e?"active":""}`,children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(q+1)*8+0}px`}}),d.jsx("div",{className:"elementItemIcon",children:Be.children&&Be.children.length>0?d.jsx(bT,{color:yt.color,strokeWidth:yt.stroke,size:yt.size}):d.jsx(S1,{color:yt.color,strokeWidth:yt.stroke,size:yt.size})}),d.jsx("div",{className:"elementItemLabel",children:Be.title}),d.jsx("div",{className:"elementItemActions"})]}),Be.children&&Be.children.length>0&&d.jsx(d.Fragment,{children:Be.children.map((Ce,Se)=>d.jsx("div",{"data-depth":q+2,"data-has-children":!1,onClick:Me=>{Me.stopPropagation(),m(O.id,O.props,_e)},className:"element",children:d.jsxs("div",{className:"elementItem",children:[d.jsx("div",{className:"elementItemIndent",style:{width:`${(q+2)*8+0}px`}}),d.jsx("div",{className:"elementItemIcon",children:d.jsx(S1,{color:yt.color,strokeWidth:yt.stroke,size:yt.size})}),d.jsx("div",{className:"elementItemLabel",children:Ce.title}),d.jsx("div",{className:"elementItemActions"})]})},`${O.id}-treeitem-${_e}-child-${Se}`))})]},`${O.id}-treeitem-${_e}`))})]})]},O.id)})}),{sendElementSelectedMessage:R,requestAutoSelectAfterUpdate:k}=I4(),L=w,F=()=>{const z=[];return A.has("nodes")&&z.push(d.jsx("div",{className:"panel-section nodes",children:d.jsx(o5e,{pages:t,pageList:e,handleAddPage:n,addPageWithParams:r,renderTree:T,renderElementTree:M,fetchElements:s,elements:u,selectedElementId:h,setSelectedElement:p,sendElementSelectedMessage:R,requestAutoSelectAfterUpdate:k,collapseAllTreeItems:L,projectId:c,expandedKeys:x,onToggleExpand:B,selectedTab:f,onSelectTabElement:m})},"nodes")),A.has("components")&&z.push(d.jsx("div",{className:"panel-section components",children:d.jsx(Hse,{handleAddElement:i,selectedElementId:h})},"components")),A.has("theme")&&z.push(d.jsx("div",{className:"panel-section theme",children:d.jsx(ele,{isActive:!0})},"theme")),A.has("ai")&&z.push(d.jsx("div",{className:"panel-section ai",children:d.jsx(tle,{isActive:!0})},"ai")),A.has("settings")&&z.push(d.jsx("div",{className:"panel-section settings",children:d.jsx(lle,{isActive:!0})},"settings")),z.length>0?z:d.jsx("div",{className:"panel-empty-state"})};return d.jsxs("aside",{className:"sidebar",children:[d.jsx("div",{className:"panel-content",children:F()}),o]})}const cle=({requestAutoSelectAfterUpdate:t}={})=>{const e=UE({initialItems:[],getKey:m=>m.id}),[n,r]=C.useState(null),i=C.useRef(null),s=je(m=>m.setCurrentPageId),a=je(m=>m.setPages),o=je(m=>m.lazyLoadPageElements),l=je(m=>m.isPageLoaded),c=C.useCallback(async m=>{if(!m)return{success:!1,error:new Error("pageId is required")};try{const v=await On(),A=await v.elements.getByPage(m),{pages:x}=je.getState(),E=x.find(M=>M.id===m),w=[...A];if(E?.layout_id){const M=await v.elements.getByLayout(E.layout_id);console.log(` [fetchElements] Layout ${E.layout_id.slice(0,8)}  ${M.length}  `);const R=new Set(w.map(k=>k.id));M.forEach(k=>{R.has(k.id)||w.push(k)})}const{setElements:B,setSelectedElement:D}=je.getState(),T=A.find(M=>M.order_num===0);return T&&t&&t(T.id),B(w,{skipHistory:!0}),s(m),r(m),T&&D(T.id),{success:!0,data:w}}catch(v){return console.error("  :",v),{success:!1,error:v}}},[t]),u=async m=>{try{const v=je.getState().pages,x=v.reduce((M,R)=>Math.max(M,R.order_num||0),-1)+1,E=await On(),w={id:js.generateId(),project_id:m,name:`Page ${x+1}`,slug:`/page-${x+1}`,parent_id:null,order_num:x,layout_id:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},B=await E.pages.insert(w),D={id:B.id,project_id:B.project_id,title:B.name,slug:B.slug,parent_id:B.parent_id,order_num:B.order_num,created_at:B.created_at,updated_at:B.updated_at};e.append(D),r(B.id),s(B.id),a([...v,B]);const T={id:js.generateId(),tag:"body",props:{},parent_id:null,page_id:B.id,order_num:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return await E.elements.insert(T),console.log(" [IndexedDB] body  :",T.id),await c(B.id),console.log("   :",B.title),{success:!0,data:B}}catch(v){return console.error("  :",v),{success:!1,error:v}}},h=async m=>{const{projectId:v,title:A,slug:x,layoutId:E=null,parentId:w=null}=m;try{const B=je.getState().pages,T=B.reduce((z,G)=>Math.max(z,G.order_num||0),-1)+1,M=await On(),R={id:js.generateId(),project_id:v,name:A,slug:x,parent_id:w,order_num:T,layout_id:E,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},k=await M.pages.insert(R),L={id:k.id,project_id:k.project_id,title:k.name,slug:k.slug,parent_id:k.parent_id,order_num:k.order_num,created_at:k.created_at,updated_at:k.updated_at};e.append(L),r(k.id),s(k.id),a([...B,k]);const F={id:js.generateId(),tag:"body",props:{},parent_id:null,page_id:k.id,order_num:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return await M.elements.insert(F),console.log(" [IndexedDB] body  :",F.id),await c(k.id),console.log("    (with params):",k.name,"slug:",k.slug),{success:!0,data:L}}catch(B){return console.error("   (with params):",B),{success:!1,error:B}}},f=C.useCallback(async m=>{if(i.current===m)return{success:!1,error:new Error("   ")};try{i.current=m;const x=(await(await On()).pages.getAll()).filter(D=>D.project_id===m),E=e.items.map(D=>D.id);E.length>0&&e.remove(...E);const w=x.map(D=>({id:D.id,project_id:D.project_id,title:D.title||D.name||"Untitled",slug:D.slug,parent_id:D.parent_id,order_num:D.order_num,created_at:D.created_at||new Date().toISOString(),updated_at:D.updated_at||new Date().toISOString()}));w.forEach(D=>e.append(D));const B=w.map(D=>{const T=x.find(M=>M.id===D.id);return{id:D.id,name:D.title,slug:D.slug,parent_id:D.parent_id,order_num:D.order_num,layout_id:T?.layout_id||null}});if(a(B),w.length>0){const T=w.find(R=>R.order_num===0)||w[0];s(T.id);const M=await c(T.id);if(!M.success)return i.current=null,{success:!1,error:M.error}}return i.current=null,{success:!0,data:w}}catch(v){return console.error("  :",v),i.current=null,{success:!1,error:v}}},[c]),p=C.useCallback(async m=>{if(m){if(l(m)){console.log(` [loadPageIfNeeded] Page already loaded: ${m.slice(0,8)}`);return}console.log(` [loadPageIfNeeded] Loading page: ${m.slice(0,8)}`),await o(m)}},[l,o]);return{pages:e.items,selectedPageId:n,setSelectedPageId:r,fetchElements:c,addPage:u,addPageWithParams:h,initializeProject:f,loadPageIfNeeded:p,pageList:e}};class ca{static elementMap=new Map;static treeCache=new Map;static childrenCache=new Map;static config={maxCacheSize:1e3,enableIncrementalUpdate:!0,enableBatchProcessing:!0,batchSize:100};static updateConfig(e){this.config={...this.config,...e}}static buildElementTree(e){const n=this.generateCacheKey(e);if(this.treeCache.has(n))return this.treeCache.get(n);this.treeCache.size>=this.config.maxCacheSize&&this.clearOldestCache();const r=new Map,i=[];this.config.enableBatchProcessing?this.createNodesInBatches(e,r):this.createNodesSequentially(e,r),this.buildHierarchy(e,r,i),this.sortNodesByOrder(i);const s={roots:i,elementMap:r,flatList:e};return this.treeCache.set(n,s),s}static createNodesInBatches(e,n){const r=this.config.batchSize;for(let i=0;i<e.length;i+=r)e.slice(i,i+r).forEach(a=>{n.set(a.id,{element:a,children:[],depth:0})})}static createNodesSequentially(e,n){e.forEach(r=>{n.set(r.id,{element:r,children:[],depth:0})})}static buildHierarchy(e,n,r){const i=new Map;e.forEach(a=>{const o=a.parent_id??"root";i.has(o)||i.set(o,[]),i.get(o).push(a)}),(i.get("root")||[]).forEach(a=>{const o=n.get(a.id);r.push(o)}),i.forEach((a,o)=>{if(o==="root")return;const l=n.get(o);l&&a.forEach(c=>{const u=n.get(c.id);l.children.push(u),u.depth=l.depth+1})})}static getOrderedChildren(e,n){const r=`children:${e||"null"}:${this.generateCacheKey(n)}`;if(this.childrenCache.has(r))return this.childrenCache.get(r);const i=n.filter(s=>s.parent_id===e).sort((s,a)=>(s.order_num||0)-(a.order_num||0));return this.childrenCache.set(r,i),i}static calculateNextOrderNum(e,n){const r=n.filter(s=>s.parent_id===e);return r.length>0?Math.max(...r.map(s=>s.order_num||0))+1:1}static incrementalUpdate(e,n){if(!this.config.enableIncrementalUpdate){this.clearCache();return}const r=new Set;if(n){const i=e.find(s=>s.id===n);i&&r.add(i.parent_id??null)}this.clearRelatedCache(r)}static clearRelatedCache(e){const n=[];this.childrenCache.forEach((r,i)=>{const s=i.split(":")[1];e.has(s==="null"?null:s)&&n.push(i)}),n.forEach(r=>{this.childrenCache.delete(r)})}static clearOldestCache(){Array.from(this.treeCache.entries()).slice(0,Math.floor(this.config.maxCacheSize*.2)).forEach(([r])=>{this.treeCache.delete(r)})}static processLargeElementSet(e,n){const r=this.config.batchSize;for(let i=0;i<e.length;i+=r){const s=e.slice(i,i+r);n(s)}}static getPerformanceStats(){return{cacheSize:this.treeCache.size,childrenCacheSize:this.childrenCache.size,hitRate:0}}static calculateOrderNumsForInsertion(e,n,r){const i=this.getOrderedChildren(e,r),s={};return i.forEach((a,o)=>{o>=n&&(s[a.id]=(a.order_num||0)+1)}),s}static calculateMoveOrderNums(e,n,r,i){const s=i.find(u=>u.id===e);if(!s)return{};const a={},o=this.getOrderedChildren(s.parent_id??null,i),l=o.findIndex(u=>u.id===e);return l!==-1&&o.slice(l+1).forEach(u=>{a[u.id]=(u.order_num||0)-1}),this.getOrderedChildren(n??null,i).slice(r).forEach(u=>{a[u.id]=(u.order_num||0)+1}),a}static getSpecialComponentChildren(e,n){const r=n.find(s=>s.id===e);if(!r)return[];const i=this.getOrderedChildren(e,n);switch(r.tag){case"Tabs":{const s=n.filter(l=>l.parent_id===e&&l.tag==="Tab").sort((l,c)=>(l.order_num||0)-(c.order_num||0)),a=n.filter(l=>l.parent_id===e&&l.tag==="Panel").sort((l,c)=>(l.order_num||0)-(c.order_num||0)),o=[];for(let l=0;l<Math.max(s.length,a.length);l++)s[l]&&o.push(s[l]),a[l]&&o.push(a[l]);return o}case"Tree":return i.filter(s=>s.tag==="TreeItem");case"ToggleButtonGroup":return i.filter(s=>s.tag==="ToggleButton");case"CheckboxGroup":return i.filter(s=>s.tag==="Checkbox");case"RadioGroup":return i.filter(s=>s.tag==="Radio");case"Select":return i.filter(s=>s.tag==="SelectItem");case"ComboBox":return i.filter(s=>s.tag==="ComboBoxItem");case"ListBox":return i.filter(s=>s.tag==="ListBoxItem");case"GridList":return i.filter(s=>s.tag==="GridListItem");case"TagGroup":return i.filter(s=>s.tag==="Tag");default:return i}}static getHierarchyStats(e){const n=this.buildElementTree(e),r=[];let i=0;const s=[],a=(l,c)=>{l.depth=c,r.push(c),i=Math.max(i,c),l.children.forEach(u=>{a(u,c+1)})};n.roots.forEach(l=>{a(l,0)}),e.forEach(l=>{l.parent_id&&!n.elementMap.has(l.parent_id)&&s.push(l)});const o=r.length>0?r.reduce((l,c)=>l+c,0)/r.length:0;return{totalElements:e.length,maxDepth:i,averageDepth:Math.round(o*100)/100,orphanedElements:s}}static validateHierarchy(e){const n=[],r=[],i=new Set(e.map(u=>u.id)),s=new Map;e.forEach(u=>{u.parent_id&&(s.has(u.parent_id)||s.set(u.parent_id,[]),s.get(u.parent_id).push(u.id))});const a=new Set,o=new Set,l=u=>{if(o.has(u))return!0;if(a.has(u))return!1;a.add(u),o.add(u);const h=s.get(u)||[];for(const f of h)if(l(f))return!0;return o.delete(u),!1};e.forEach(u=>{l(u.id)&&n.push(`Circular reference detected involving element: ${u.id}`)}),e.forEach(u=>{u.parent_id&&!i.has(u.parent_id)&&n.push(`Orphaned element found: ${u.id} (parent: ${u.parent_id} not found)`)});const c=new Map;return e.forEach(u=>{const h=u.parent_id||"root";c.has(h)||c.set(h,new Set);const f=u.order_num||0;c.get(h).has(f)&&r.push(`Duplicate order_num found: ${f} for parent ${h}`),c.get(h).add(f)}),{isValid:n.length===0,errors:n,warnings:r}}static generateCacheKey(e){return e.length>100?`hash:${e.map(r=>`${r.id}:${r.parent_id}:${r.order_num}`).join("|").split("").reduce((r,i)=>(r=(r<<5)-r+i.charCodeAt(0),r&r),0)}:${e.length}`:e.map(n=>`${n.id}:${n.parent_id}:${n.order_num}`).sort().join("|")}static sortNodesByOrder(e){e.sort((n,r)=>(n.element.order_num||0)-(r.element.order_num||0)),e.forEach(n=>this.sortNodesByOrder(n.children))}static clearCache(){this.treeCache.clear(),this.elementMap.clear(),this.childrenCache.clear()}static clearSpecificCache(e){switch(e){case"tree":this.treeCache.clear(),this.elementMap.clear();break;case"children":this.childrenCache.clear();break;case"all":this.clearCache();break}}}function mE(t,e){const n=t.toLowerCase(),r=e.filter(o=>o.tag===t),i=[],s=new RegExp(`^${n}_(\\d+)$`);r.forEach(o=>{if(o.customId){const l=o.customId.match(s);l&&i.push(Number.parseInt(l[1],10))}});let a=1;if(i.length>0){i.sort((o,l)=>o-l);for(let o=0;o<i.length;o++)if(i[o]!==o+1){a=o+1;break}a===1&&i.length>0&&(a=Math.max(...i)+1)}return`${n}_${a}`}function vOe(t){const n=je.getState().elements,r={...t.parent,id:js.generateId(),customId:mE(t.parent.tag,n),created_at:new Date().toISOString(),updated_at:new Date().toISOString()},i=[...n,r],s=t.children.map((a,o)=>{const l={...a,id:js.generateId(),customId:mE(a.tag,i),parent_id:r.id,order_num:o+1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return i.push(l),l});return{parent:r,children:s}}function ule(t,e){const n=je.getState(),i=[...n.elements,t,...e];n.setElements(i);const{saveSnapshot:s}=n;s&&s(i,"  ");const a=[t,...e];return setTimeout(async()=>{try{await(await On()).elements.insertMany(a.map(l=>C0(l))),console.log(` [IndexedDB]    : ${t.tag} +  ${e.length}`)}catch(o){console.warn(" [IndexedDB]    ( ):",o)}},0),i}function E9(t,e){const n=je.getState(),r=n.elements.map(i=>i.id===t?{...i,id:e}:i);n.setElements(r)}async function xOe(t,e,n){try{if(n){const{data:r,error:i}=await ss.from("layouts").select("id").eq("id",n).maybeSingle();if(i)return console.warn(`[dbPersistence] Error checking layout ${n}:`,i),!1;if(!r)return console.log(`[dbPersistence]  Layout ${n} not in Supabase - skipping cloud save (local-only mode)`),!1}else if(t){const{data:r,error:i}=await ss.from("pages").select("id").eq("id",t).maybeSingle();if(i)return console.warn(`[dbPersistence] Error checking page ${t}:`,i),!1;if(!r)return console.log(`[dbPersistence]  Page ${t} not in Supabase - skipping cloud save (local-only mode)`),!1}else return console.warn("[dbPersistence] Neither pageId nor layoutId provided - skipping save"),!1;if(e){const{data:r,error:i}=await ss.from("elements").select("id").eq("id",e).maybeSingle();if(i&&console.warn(`[dbPersistence] Error checking parent element ${e}:`,i),!r)try{if(await(await On()).elements.getById(e))console.log(`[dbPersistence] Parent element ${e} found in IndexedDB (not in Supabase yet) - allowing save`);else return console.warn(`[dbPersistence] Parent element ${e} not found in DB or IndexedDB - skipping save`),!1}catch(s){return console.warn(`[dbPersistence] Error checking IndexedDB for parent element ${e}:`,s),!1}}return!0}catch(r){return console.error("[dbPersistence] Reference validation failed:",r),!1}}async function dle(t,e,n,r,i){try{if(!await xOe(r,n,i)){console.log("[dbPersistence]  Skipping Supabase save (local-only mode) - element saved in IndexedDB only");return}const a=i?[]:await ud.getElementsByPageId(r),o={...t,parent_id:n,order_num:ca.calculateNextOrderNum(n,a)},l=await ud.createElement(o);E9(t.id,l.id);for(let c=0;c<e.length;c++){const u={...e[c],parent_id:l.id},h=await ud.createElement(u);E9(e[c].id,h.id)}console.log(`[dbPersistence] Successfully saved parent ${l.id} and ${e.length} children${i?` (Layout: ${i})`:""}`)}catch(s){console.error("Background save failed:",s)}}function bOe(t,e,n,r,i){setTimeout(async()=>{await dle(t,e,n,r,i)},0)}function COe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,s=e?.id||null,a=ca.calculateNextOrderNum(s,r);return{tag:"TextField",parent:{tag:"TextField",props:{label:"Text Field",description:"",errorMessage:"",placeholder:"Enter text...",value:"",type:"text",isRequired:!1,isDisabled:!1,isReadOnly:!1},...i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null},parent_id:s,order_num:a},children:[]}}function EOe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,s=e?.id||null,a=ca.calculateNextOrderNum(s,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"Select",parent:{tag:"Select",props:{label:"Select",placeholder:"Choose an option...",selectedKey:void 0},...o,parent_id:s,order_num:a},children:[{tag:"SelectItem",props:{label:"Option 1",value:"option1",isDisabled:!1},...o,order_num:1}]}}function SOe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,s=e?.id||null,a=ca.calculateNextOrderNum(s,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"ComboBox",parent:{tag:"ComboBox",props:{label:"Combo Box",placeholder:"Type or select...",inputValue:"",allowsCustomValue:!0,selectedKey:void 0},...o,parent_id:s,order_num:a},children:[{tag:"ComboBoxItem",props:{label:"Option 1",value:"option1",isDisabled:!1},...o,order_num:1}]}}function wOe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,s=e?.id||null,a=ca.calculateNextOrderNum(s,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"ListBox",parent:{tag:"ListBox",props:{orientation:"vertical",selectionMode:"single"},...o,parent_id:s,order_num:a},children:[{tag:"ListBoxItem",props:{label:"Item 1",value:"item1",isDisabled:!1},...o,order_num:1}]}}function _Oe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,s=e?.id||null,a=ca.calculateNextOrderNum(s,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"GridList",parent:{tag:"GridList",props:{selectionMode:"none"},...o,parent_id:s,order_num:a},children:[{tag:"GridListItem",props:{label:"Item 1",value:"item1",isDisabled:!1},...o,order_num:1}]}}function IOe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,s=e?.id||null,a=ca.calculateNextOrderNum(s,r);return{tag:"Group",parent:{tag:"Group",props:{label:"Element Group",style:{display:"block",position:"relative"}},...i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null},parent_id:s,order_num:a},children:[]}}function BOe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,s=e?.id||null,a=ca.calculateNextOrderNum(s,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"ToggleButtonGroup",parent:{tag:"ToggleButtonGroup",props:{tag:"ToggleButtonGroup",variant:"default",size:"sm",orientation:"horizontal",selectionMode:"single",value:[]},...o,parent_id:s,order_num:a},children:[{tag:"ToggleButton",props:{children:"Toggle 1",variant:"default",size:"sm",isSelected:!1,isDisabled:!1},...o,order_num:1},{tag:"ToggleButton",props:{children:"Toggle 2",variant:"default",size:"sm",isSelected:!1,isDisabled:!1},...o,order_num:2}]}}function TOe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,s=e?.id||null,a=ca.calculateNextOrderNum(s,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"CheckboxGroup",parent:{tag:"CheckboxGroup",props:{tag:"CheckboxGroup",label:"Checkbox Group",orientation:"vertical",value:[]},...o,parent_id:s,order_num:a},children:[{tag:"Checkbox",props:{children:"Option 1",isSelected:!1,isDisabled:!1},...o,order_num:1},{tag:"Checkbox",props:{children:"Option 2",isSelected:!1,isDisabled:!1},...o,order_num:2}]}}function MOe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,s=e?.id||null,a=ca.calculateNextOrderNum(s,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"RadioGroup",parent:{tag:"RadioGroup",props:{label:"Radio Group",orientation:"vertical",value:""},...o,parent_id:s,order_num:a},children:[{tag:"Radio",props:{children:"Option 1",value:"option1",isDisabled:!1},...o,order_num:1},{tag:"Radio",props:{children:"Option 2",value:"option2",isDisabled:!1},...o,order_num:2}]}}function DOe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,s=e?.id||null,a=ca.calculateNextOrderNum(s,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"TagGroup",parent:{tag:"TagGroup",props:{label:"Tag Group",allowsRemoving:!1,selectionMode:"multiple"},...o,parent_id:s,order_num:a},children:[{tag:"Tag",props:{children:"Tag 1",isDisabled:!1},...o,order_num:1},{tag:"Tag",props:{children:"Tag 2",isDisabled:!1},...o,order_num:2}]}}function ROe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,s=e?.id||null,a=ca.calculateNextOrderNum(s,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"Breadcrumbs",parent:{tag:"Breadcrumbs",props:{"aria-label":"Breadcrumbs",isDisabled:!1},...o,parent_id:s,order_num:a},children:[{tag:"Breadcrumb",props:{children:"Home",href:"/"},...o,order_num:1},{tag:"Breadcrumb",props:{children:"Category",href:"/category"},...o,order_num:2},{tag:"Breadcrumb",props:{children:"Page",href:"/category/page"},...o,order_num:3}]}}function POe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,s=e?.id||null,a=ca.calculateNextOrderNum(s,r),o=js.generateId(),l=js.generateId(),c=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"Tabs",parent:{tag:"Tabs",props:{defaultSelectedKey:o,orientation:"horizontal"},...c,parent_id:s,order_num:a},children:[{tag:"Tab",props:{title:"Tab 1",tabId:o},...c,order_num:1},{tag:"Panel",props:{title:"Panel 1",variant:"tab",tabId:o},...c,order_num:2},{tag:"Tab",props:{title:"Tab 2",tabId:l},...c,order_num:3},{tag:"Panel",props:{title:"Panel 2",variant:"tab",tabId:l},...c,order_num:4}]}}function kOe(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,s=e?.id||null,a=ca.calculateNextOrderNum(s,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"Tree",parent:{tag:"Tree",props:{"aria-label":"Tree",selectionMode:"single",selectionBehavior:"replace"},...o,parent_id:s,order_num:a},children:[{tag:"TreeItem",props:{title:"Node 1",hasChildren:!0},...o,order_num:1},{tag:"TreeItem",props:{title:"Node 2",hasChildren:!1},...o,order_num:2}]}}function NOe(){return{children:"Button",variant:"default",size:"sm",isDisabled:!1}}function LOe(){return{children:"Link",href:"#",variant:"default",size:"md",isDisabled:!1,isExternal:!1,showExternalIcon:!0}}function FOe(){return{type:"text",isRequired:!1,isDisabled:!1,isReadOnly:!1}}function jOe(){return{children:"Checkbox",isSelected:!1,isDisabled:!1}}function OOe(){return{isSelected:!1,isDisabled:!1}}function zOe(){return{children:"Toggle Button",variant:"default",size:"sm",isSelected:!1,isDisabled:!1}}function $Oe(){return{variant:"default",size:"sm",value:[],isDisabled:!1,selectionMode:"single",orientation:"horizontal"}}function QOe(){return{value:[],isDisabled:!1,orientation:"horizontal"}}function UOe(){return{value:"",isDisabled:!1,orientation:"horizontal"}}function HOe(){return{isDisabled:!1}}function GOe(){return{isDisabled:!1,allowsCustomValue:!1}}function VOe(){return{label:"Slider",value:0,minValue:0,maxValue:100,step:1,isDisabled:!1,orientation:"horizontal"}}function WOe(){return{orientation:"horizontal"}}function KOe(){return{isDisabled:!1}}function qOe(){return{variant:"default"}}function YOe(){return{items:[],selectedKeys:[],isDisabled:!1}}function XOe(){return{isDisabled:!1}}function JOe(){return{isDisabled:!1,isReadOnly:!1}}function ZOe(){return{isDisabled:!1,isReadOnly:!1}}function eze(){return{isDisabled:!1,isReadOnly:!1}}function tze(){return{children:"Switch",isSelected:!1,isDisabled:!1}}function hle(){return{items:[],selectionMode:"none",selectedKeys:[],variant:"default",size:"sm",headerVariant:"default",cellVariant:"default",paginationMode:"infinite",itemsPerPage:10,height:400,itemHeight:38,overscan:10,stickyHeader:!1,stickyHeaderOffset:0,sortColumn:void 0,sortDirection:"ascending"}}function nze(){return{variant:"default",sticky:!1}}function rze(){return{children:"Column Group",label:"Group",span:2,align:"center",variant:"default",sticky:!1}}function ize(){return{variant:"default",size:"md",orientation:"vertical",title:"Title",description:"Description"}}function sze(){return{children:"Badge",variant:"default",size:"sm",isDot:!1,isPulsing:!1}}function aze(){return{items:[],selectedKeys:[],isDisabled:!1,allowsRemoving:!1}}function oze(){return{isDisabled:!1}}function lze(){return{items:[],selectedKeys:[],isDisabled:!1,selectionMode:"single"}}function cze(){return{isDisabled:!1}}function uze(){return{items:[],selectedKeys:[],isDisabled:!1,selectionMode:"single"}}function dze(){return{isDisabled:!1}}function hze(){return{children:"Text"}}function fze(){return{}}function pze(){return{}}function gze(){return{}}async function mze(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t;let s=e?.id||null;s||(s=js.findBodyElement(r,n));const a=ca.calculateNextOrderNum(s,r),o=hle(),l=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null},c={id:js.generateId(),customId:mE("Table",r),tag:"Table",props:o,...l,parent_id:s,order_num:a,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},h=[{id:js.generateId(),customId:mE("TableHeader",[...r,c]),tag:"TableHeader",props:nze(),parent_id:c.id,...l,order_num:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];return ule(c,h),await dle(c,h,s,n),{parent:c,children:h,allElements:[c,...h]}}async function Aze(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,s=r.filter(u=>u.parent_id===e?.id&&u.tag==="ColumnGroup"),a=s.length>0?Math.max(...s.map(u=>u.order_num||0)):-1,o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null},l={id:js.generateId(),customId:mE("ColumnGroup",r),tag:"ColumnGroup",props:rze(),parent_id:e?.id||null,...o,order_num:a+1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},c=[];return{parent:l,children:c,allElements:[l,...c]}}function yze(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,s=e?.id||null,a=ca.calculateNextOrderNum(s,r),o=i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null};return{tag:"DataTable",parent:{tag:"DataTable",props:{id:`datatable-${Date.now()}`,name:"New DataTable",autoLoad:!0,dataBinding:{type:"collection",source:"api",config:{baseUrl:"MOCK_DATA",endpoint:"/users",dataMapping:{resultPath:"data",idField:"id",labelField:"name"}}}},...o,parent_id:s,order_num:a},children:[]}}function vze(t){const{parentElement:e,pageId:n,elements:r,layoutId:i}=t,s=e?.id||null,a=ca.calculateNextOrderNum(s,r);return i||console.warn(" Slot can only be created in Layout mode"),{tag:"Slot",parent:{tag:"Slot",props:{name:"content",required:!1,description:"Main content area"},...i?{page_id:null,layout_id:i}:{page_id:n,layout_id:null},parent_id:s,order_num:a},children:[]}}class yl{static creators={TextField:yl.createTextField,Group:yl.createGroup,ToggleButtonGroup:yl.createToggleButtonGroup,CheckboxGroup:yl.createCheckboxGroup,RadioGroup:yl.createRadioGroup,Select:yl.createSelect,ComboBox:yl.createComboBox,Tabs:yl.createTabs,Tree:yl.createTree,TagGroup:yl.createTagGroup,Breadcrumbs:yl.createBreadcrumbs,ListBox:yl.createListBox,GridList:yl.createGridList,Table:yl.createTable,DataTable:yl.createDataTable,Slot:yl.createSlot};static async createComplexComponent(e,n,r,i,s){const a=this.creators[e];if(!a)throw new Error(`No creator found for component type: ${e}`);const o={parentElement:n,pageId:r,elements:i,layoutId:s};return await a.call(this,o)}static async createComponent(e,n){const{parentElement:r,pageId:i,elements:s,layoutId:a}=n;let o=r?.id||null;if(!o){o=js.findBodyByContext(s,i||null,a||null);const h=s.find(f=>f.id===o);h&&(n={...n,parentElement:h})}const l=e(n),{parent:c,children:u}=vOe(l);return ule(c,u),bOe(c,u,o,i,a),{parent:c,children:u,allElements:[c,...u]}}static async createTextField(e){return this.createComponent(COe,e)}static async createGroup(e){return this.createComponent(IOe,e)}static async createToggleButtonGroup(e){return this.createComponent(BOe,e)}static async createCheckboxGroup(e){return this.createComponent(TOe,e)}static async createRadioGroup(e){return this.createComponent(MOe,e)}static async createSelect(e){return this.createComponent(EOe,e)}static async createComboBox(e){return this.createComponent(SOe,e)}static async createTabs(e){return this.createComponent(POe,e)}static async createTree(e){return this.createComponent(kOe,e)}static async createTagGroup(e){return this.createComponent(DOe,e)}static async createBreadcrumbs(e){return this.createComponent(ROe,e)}static async createListBox(e){return this.createComponent(wOe,e)}static async createGridList(e){return this.createComponent(_Oe,e)}static async createDataTable(e){return this.createComponent(yze,e)}static async createSlot(e){return this.createComponent(vze,e)}static async createTable(e){return await mze(e)}static async createColumnGroup(e,n,r=[]){return await Aze({parentElement:e,pageId:n,elements:r})}}const fle=()=>{const[t,e]=C.useState(null),[n,r]=C.useState(!1),[i,s]=C.useState([]),[a,o]=C.useState([]),l=C.useRef(new Map),c=C.useCallback((x,E,w)=>{const B=js.generateId(),D=new Date;let T="   ",M;x instanceof Error?(T=x.message,M=x.stack):typeof x=="string"?T=x:x&&typeof x=="object"&&"message"in x&&(T=String(x.message));const R=E?`${E}   : ${T}`:T,k={id:B,timestamp:D,type:w?.type||"validation",severity:w?.severity||"medium",message:T,context:E,elementId:w?.elementId,operation:w?.operation,stack:M,recoverable:w?.recoverable??!0};s(L=>[...L,k].slice(-100)),console.error(`[${k.severity.toUpperCase()}] ${R}`,{errorInfo:k,error:x}),e(R),w?.severity==="critical"&&console.error("Critical error detected:",k)},[]),u=C.useCallback(()=>{e(null)},[]),h=C.useCallback(()=>{s([]),l.current.clear()},[]),f=C.useCallback(x=>{o(E=>[...E,x].slice(-50))},[]),p=C.useCallback(async(x=1)=>{try{const E=a;if(E.length===0)return c("  .","Rollback",{type:"validation",severity:"low"}),!1;const w=E.slice(-x);for(const B of w.reverse())try{switch(B.operation){case"create":B.elementId&&console.log(`Rolling back element creation: ${B.elementId}`);break;case"update":B.previousState&&console.log(`Rolling back element update: ${B.elementId}`,B.previousState);break;case"delete":B.previousState&&console.log(`Rolling back element deletion: ${B.elementId}`,B.previousState);break;case"move":B.previousState&&console.log(`Rolling back element move: ${B.elementId}`,B.previousState);break}}catch(D){c(D,` : ${B.operation}`,{type:"validation",severity:"high",elementId:B.elementId,operation:B.operation})}return o(B=>B.slice(0,-x)),!0}catch(E){return c(E,"   ",{type:"validation",severity:"high"}),!1}},[a,c]),m=C.useCallback(async(x,E=3)=>{const w=js.generateId();let B=l.current.get(w)||0;for(;B<E;)try{await x(),l.current.delete(w);return}catch(D){if(B++,l.current.set(w,B),B>=E)throw c(D,`   (${E} )`,{type:"network",severity:"high",recoverable:!1}),D;{const T=Math.pow(2,B)*1e3;await js.delay(T),c(D,`   (${B}/${E})`,{type:"network",severity:"low",recoverable:!0})}}},[c]),v=C.useCallback(x=>{const E=[];if(!Array.isArray(x))return E.push("   ."),{isValid:!1,errors:E};const w=new Set;x.forEach((M,R)=>{M.id?w.has(M.id)?E.push(` ${R}:  ID (${M.id})`):w.add(M.id):E.push(` ${R}: ID .`),M.tag||E.push(` ${M.id}:  .`),!M.page_id&&!M.layout_id&&E.push(` ${M.id}:  ID   ID .`)});const B=new Set,D=new Set,T=M=>{if(D.has(M))return!0;if(B.has(M))return!1;B.add(M),D.add(M);const R=x.find(k=>k.id===M);return R?.parent_id&&T(R.parent_id)?!0:(D.delete(M),!1)};return x.forEach(M=>{T(M.id)&&E.push(` ${M.id}:   .`)}),{isValid:E.length===0,errors:E}},[]),A=C.useCallback(()=>{const x={},E={};i.forEach(B=>{x[B.type]=(x[B.type]||0)+1,E[B.severity]=(E[B.severity]||0)+1});const w=i.slice(-10);return{totalErrors:i.length,errorsByType:x,errorsBySeverity:E,recentErrors:w}},[i]);return{error:t,isLoading:n,errorHistory:i,rollbackStack:a,setError:e,setIsLoading:r,handleError:c,clearError:u,clearErrorHistory:h,addRollbackPoint:f,rollback:p,retryOperation:m,validateElements:v,getErrorStats:A}},ple=()=>{const t=C.useRef(!1),e=C.useRef([]),n=C.useRef(null),r=C.useRef(!1),{handleError:i,addRollbackPoint:s,rollback:a,retryOperation:o,validateElements:l,getErrorStats:c}=fle();C.useEffect(()=>{r.current||(ca.updateConfig({maxCacheSize:500,enableIncrementalUpdate:!0,enableBatchProcessing:!0,batchSize:50}),r.current=!0)},[]);const u=C.useCallback(A=>{switch(console.log(" getDefaultProps called for tag:",A),A){case"Button":{const x=NOe();return console.log(" Button props created:",x),x}case"Link":return LOe();case"TextField":return FOe();case"Checkbox":return jOe();case"Radio":return OOe();case"ToggleButton":return zOe();case"ToggleButtonGroup":return $Oe();case"CheckboxGroup":return QOe();case"RadioGroup":return UOe();case"Select":return HOe();case"ComboBox":return GOe();case"Slider":return VOe();case"Switch":return tze();case"Tabs":return WOe();case"Tab":return KOe();case"Panel":return qOe();case"Tree":return YOe();case"TreeItem":return XOe();case"Calendar":return JOe();case"DatePicker":return ZOe();case"DateRangePicker":return eze();case"Table":return hle();case"Card":return ize();case"Badge":return sze();case"TagGroup":return aze();case"Tag":return oze();case"ListBox":return lze();case"ListBoxItem":return cze();case"GridList":return uze();case"GridListItem":return dze();case"Text":return hze();case"Div":return fze();case"Section":return pze();case"Nav":return gze();default:return{children:A==="Text"?"Text":""}}},[]),h=C.useCallback(async(A,x,E,w,B,D,T)=>{if(t.current)return;t.current=!0;const M=l(w);if(!M.isValid){i(M.errors.join(", "),"   ",{type:"validation",severity:"high"}),t.current=!1;return}try{if(x||T){e.current=w;const R=E?w.find(F=>F.id===E):null;s({operation:"create",elementId:"pending",previousElements:[...w],timestamp:new Date});const k=["TextField","ToggleButtonGroup","CheckboxGroup","RadioGroup","Select","ComboBox","Tabs","Tree","TagGroup","ListBox","GridList","Table"],L=async()=>{if(k.includes(A)){console.log(`    : ${A}`,T?`(Layout: ${T})`:"");const F=await yl.createComplexComponent(A,R??null,x,w,T);console.log(`    : ${A},  ${F.allElements.length}  `);const z=[...w,...F.allElements];ca.incrementalUpdate(z,F.parent.id),D(z)}else{console.log(`   : ${A}`,T?`(Layout: ${T})`:"");let F=E||null;F||(F=js.findBodyByContext(w,x||null,T||null));const z=ca.calculateNextOrderNum(F,w),G={id:crypto.randomUUID(),tag:A,customId:mE(A,w),props:u(A),page_id:T?null:x,layout_id:T||null,parent_id:F,order_num:z,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};B(G);const V=[...w,G];ca.incrementalUpdate(V,G.id),D(V)}};n.current=L,await o(L,3)}}catch(R){i(R,`  : ${A}`,{type:"creation",severity:"high",elementId:E||void 0,operation:"create",recoverable:!0})}finally{t.current=!1}},[u,i,s,o,l]),f=C.useCallback(()=>ca.getPerformanceStats(),[]),p=C.useCallback(()=>{ca.clearCache()},[]),m=C.useCallback(A=>{ca.updateConfig(A)},[]),v=C.useCallback(async()=>{n.current&&await o(n.current,3)},[o]);return{getDefaultProps:u,handleAddElement:h,getPerformanceStats:f,clearCache:p,updateCacheConfig:m,getErrorStats:c,rollback:a,retryLastOperation:v}},{addElement:S9}=je.getState();function xze({isActive:t}){const{projectId:e}=Fb(),n=je(E=>E.currentPageId),r=je(E=>E.pages),i=sd(E=>E.mode),s=Cl(E=>E.currentLayoutId),{requestAutoSelectAfterUpdate:a}=I4(),{pageList:o,addPage:l,addPageWithParams:c,fetchElements:u,initializeProject:h}=cle({requestAutoSelectAfterUpdate:a}),{handleAddElement:f}=ple();C.useEffect(()=>{e&&r.length===0&&t&&h(e)},[e,r.length,t,h]);const p=C.useMemo(()=>r.map(E=>({id:E.id,title:E.name||"Untitled",project_id:"",slug:E.slug||"",parent_id:E.parent_id,order_num:E.order_num||0})),[r]),m=C.useCallback(async()=>{if(!e){console.error(" ID ");return}await l(e)},[e,l]),v=C.useCallback(async E=>{await u(E)},[u]),A=C.useCallback(async E=>{const w=je.getState().elements,B=je.getState().getPageElements;if(i==="layout"&&s){console.log(` Layout : ${E} Layout ${s} `),await f(E,"",null,w.filter(T=>T.layout_id===s),S9,()=>{},s);return}if(!n)return;const D=B(n);await f(E,n,null,D,S9,()=>{})},[n,s,i,f]),x=C.useMemo(()=>new Set(["nodes"]),[]);return t?i==="page"&&!n?d.jsx("div",{className:"panel-empty-state",children:d.jsx("p",{className:"empty-message",children:" "})}):d.jsx("div",{className:"nodes-panel",children:d.jsx(yOe,{pages:p,pageList:o,handleAddPage:m,addPageWithParams:c,handleAddElement:A,fetchElements:v,selectedPageId:n,forcedActiveTabs:x,projectId:e})}):null}function bze({isActive:t}){return t?d.jsx(Cze,{}):null}function Cze(){const t=je(l=>l.selectedElementId),e=je(l=>l.currentPageId),n=je(l=>l.addElement),r=sd(l=>l.mode),i=Cl(l=>l.currentLayoutId),{handleAddElement:s}=ple(),{sendElementsToIframe:a}=I4(),o=C.useCallback(async(l,c)=>{const u=je.getState().elements,h=je.getState().getPageElements;if(r==="layout"&&i){const p=u.filter(v=>v.layout_id===i);let m=null;t&&(p.some(A=>A.id===t)?m=t:console.log(` [ComponentsPanel] selectedElementId(${t?.slice(0,8)})  Layout   - `)),console.log(` [ComponentsPanel] Layout : ${l} Layout ${i?.slice(0,8)}  (parent: ${(c||m)?.slice(0,8)||"auto"})`),await s(l,"",c||m,p,n,a,i);return}if(!e){console.error("  ");return}const f=h(e);await s(l,e,c||t,f,n,a)},[e,i,r,t,n,s,a]);return d.jsx(Hse,{handleAddElement:o,selectedElementId:t})}function iy(){const{panelLayout:t,setPanelLayout:e}=je.getState();t.activeLeftPanels.includes("datatableEditor")||e({...t,activeLeftPanels:[...t.activeLeftPanels,"datatableEditor"]})}function Eze(){const{panelLayout:t,setPanelLayout:e}=je.getState();t.activeLeftPanels.includes("datatableEditor")&&e({...t,activeLeftPanels:t.activeLeftPanels.filter(n=>n!=="datatableEditor")})}const Qg=Jl(t=>({mode:null,openTableCreator:e=>{t({mode:{type:"table-create",projectId:e}}),iy()},openTableEditor:e=>{t({mode:{type:"table-edit",tableId:e}}),iy()},openApiCreator:e=>{t({mode:{type:"api-create",projectId:e}}),iy()},openApiEditor:(e,n)=>{t({mode:{type:"api-edit",endpointId:e,initialTab:n}}),iy()},openVariableCreator:e=>{t({mode:{type:"variable-create",projectId:e}}),iy()},openVariableEditor:e=>{t({mode:{type:"variable-edit",variableId:e}}),iy()},openTransformerCreator:e=>{t({mode:{type:"transformer-create",projectId:e}}),iy()},openTransformerEditor:e=>{t({mode:{type:"transformer-edit",transformerId:e}}),iy()},close:()=>{t({mode:null}),Eze()}})),Yh={all:["data"],dataTables:t=>[...Yh.all,"dataTables",t],dataTable:(t,e)=>[...Yh.dataTables(t),e],apiEndpoints:t=>[...Yh.all,"apiEndpoints",t],apiEndpoint:(t,e)=>[...Yh.apiEndpoints(t),e],variables:t=>[...Yh.all,"variables",t],variable:(t,e)=>[...Yh.variables(t),e],transformers:t=>[...Yh.all,"transformers",t],transformer:(t,e)=>[...Yh.transformers(t),e]};async function Sze(t){return await(await On()).data_tables?.getByProject(t)||[]}async function wze(t){return await(await On()).api_endpoints?.getByProject(t)||[]}async function _ze(t){return await(await On()).variables?.getByProject(t)||[]}async function Ize(t){return await(await On()).transformers?.getByProject(t)||[]}function Bze(t,e){return NM({queryKey:Yh.dataTables(t||""),queryFn:()=>Sze(t),enabled:!!t&&e?.enabled!==!1,staleTime:300*1e3})}function Tze(t,e){return NM({queryKey:Yh.apiEndpoints(t||""),queryFn:()=>wze(t),enabled:!!t&&e?.enabled!==!1,staleTime:300*1e3})}function Mze(t,e){return NM({queryKey:Yh.variables(t||""),queryFn:()=>_ze(t),enabled:!!t&&e?.enabled!==!1,staleTime:300*1e3})}function Dze(t,e){return NM({queryKey:Yh.transformers(t||""),queryFn:()=>Ize(t),enabled:!!t&&e?.enabled!==!1,staleTime:300*1e3})}function Rze(t,e){const n=!!t&&e?.enabled!==!1,r=Bze(t,{enabled:n}),i=Tze(t,{enabled:n}),s=Mze(t,{enabled:n}),a=Dze(t,{enabled:n}),o=r.isLoading||i.isLoading||s.isLoading||a.isLoading,l=r.isError||i.isError||s.isError||a.isError,c=r.error||i.error||s.error||a.error;return{data:r.data&&i.data&&s.data&&a.data?{dataTables:r.data,apiEndpoints:i.data,variables:s.data,transformers:a.data}:void 0,isLoading:o,isError:l,error:c,refetch:()=>{r.refetch(),i.refetch(),s.refetch(),a.refetch()}}}function Pze({projectId:t,editingId:e,onEditingChange:n,onCreateClick:r}){const i=Oi(f=>f.dataTables),s=Oi(f=>f.apiEndpoints),a=Oi(f=>f.deleteDataTable),o=C.useMemo(()=>Array.from(i.values()),[i]),l=C.useMemo(()=>Array.from(s.values()),[s]),c=C.useMemo(()=>f=>l.find(p=>p.targetDataTable===f),[l]),u=async(f,p)=>{if(p.stopPropagation(),!!confirm(" ?"))try{await a(f),e===f&&n(null)}catch(m){console.error("DataTable  :",m)}},h=(f,p)=>{p.stopPropagation(),n(f)};return d.jsxs("div",{className:"section",children:[d.jsx(jI,{title:"Table List",actions:d.jsxs("span",{className:"datatable-list-count",children:[o.length,""]})}),d.jsxs("div",{className:"section-content",children:[o.length===0?d.jsxs("div",{className:"datatable-empty",children:[d.jsx(C_,{size:32,className:"datatable-empty-icon"}),d.jsxs("p",{className:"datatable-empty-text",children:["  .",d.jsx("br",{}),"  ."]})]}):d.jsx("div",{className:"list-group",role:"list",children:o.map(f=>{const p=c(f.name);return d.jsxs("div",{role:"listitem",className:`list-item ${e===f.id?"selected":""}`,onClick:()=>n(f.id),children:[d.jsx("div",{className:"list-item-icon",children:d.jsx(C_,{size:16})}),d.jsxs("div",{className:"list-item-content",children:[d.jsx("div",{className:"list-item-name",children:f.name}),d.jsxs("div",{className:"list-item-meta",children:[f.schema.length,"  "," ",f.mockData?.length||0," ",p&&d.jsxs(d.Fragment,{children:[" "," ",d.jsx(hI,{size:10,className:"linked-api-icon"})," ",p.name]})]})]}),d.jsx("span",{className:`list-item-badge ${p?"api":"local"}`,children:p?"API":"Local"}),d.jsxs("div",{className:"list-item-actions",children:[d.jsx("button",{type:"button",className:"iconButton",onClick:m=>h(f.id,m),title:"",children:d.jsx(FM,{size:14})}),d.jsx("button",{type:"button",className:"iconButton",onClick:m=>u(f.id,m),title:"",children:d.jsx(pu,{size:14})})]})]},f.id)})}),d.jsxs(en,{className:"datatable-add-btn",onPress:r,children:[d.jsx(Pc,{size:16}),d.jsx("span",{children:"Table "})]})]})]})}function kze({projectId:t}){const e=h4(),n=Oi(p=>p.createApiEndpoint),r=Oi(p=>p.deleteApiEndpoint),[i,s]=C.useState(null),a=Qg(p=>p.mode),o=Qg(p=>p.openApiEditor),l=a?.type==="api-edit"?a.endpointId:null,c=async()=>{const p=prompt("API URL  (: https://pokeapi.co/api/v2/pokemon):");if(!p)return;let m="",v="";try{const A=new URL(p);m=`${A.protocol}//${A.host}`,v=A.pathname||"/"}catch{m="https://api.example.com",v=p.startsWith("/")?p:`/${p}`}try{await n({name:p,project_id:t,method:"GET",baseUrl:m,path:v})}catch(A){console.error("API Endpoint  :",A)}},u=async(p,m)=>{if(m.stopPropagation(),!!confirm(" ?"))try{await r(p),i===p&&s(null)}catch(v){console.error("API Endpoint  :",v)}},h=(p,m)=>{m.stopPropagation(),o(p,"run")},f=(p,m)=>{m.stopPropagation(),o(p)};return d.jsxs("div",{className:"section",children:[d.jsx(jI,{title:"API List",actions:d.jsxs("span",{className:"datatable-list-count",children:[e.length,""]})}),d.jsxs("div",{className:"section-content",children:[e.length===0?d.jsxs("div",{className:"datatable-empty",children:[d.jsx(v_,{size:32,className:"datatable-empty-icon"}),d.jsxs("p",{className:"datatable-empty-text",children:["API Endpoint .",d.jsx("br",{})," API ."]})]}):d.jsx("div",{className:"list-group",role:"list",children:e.map(p=>d.jsxs("div",{role:"listitem",className:`list-item ${i===p.id?"selected":""} ${l===p.id?"editing":""}`,onClick:()=>s(p.id),children:[d.jsx("div",{className:"list-item-icon",children:d.jsx(v_,{size:16})}),d.jsxs("div",{className:"list-item-content",children:[d.jsx("div",{className:"list-item-name",children:p.name}),d.jsxs("div",{className:"list-item-meta",children:[p.baseUrl,p.path]})]}),d.jsx("span",{className:`list-item-badge method ${p.method}`,children:p.method}),d.jsxs("div",{className:"list-item-actions",children:[d.jsx("button",{type:"button",className:"iconButton",onClick:m=>h(p.id,m),title:"",children:d.jsx(NE,{size:14})}),d.jsx("button",{type:"button",className:"iconButton",onClick:m=>f(p.id,m),title:"",children:d.jsx(FM,{size:14})}),d.jsx("button",{type:"button",className:"iconButton",onClick:m=>u(p.id,m),title:"",children:d.jsx(pu,{size:14})})]})]},p.id))}),d.jsxs("button",{type:"button",className:"datatable-add-btn",onClick:c,children:[d.jsx(Pc,{size:16}),d.jsx("span",{children:"API "})]})]})]})}function Nze({projectId:t}){const e=UF(),n=Oi(p=>p.createVariable),r=Oi(p=>p.deleteVariable),i=Qg(p=>p.mode),s=Qg(p=>p.openVariableEditor),a=i?.type==="variable-edit"?i.variableId:null,o=e.filter(p=>p.scope==="global"),l=e.filter(p=>p.scope==="page"),c=async()=>{const p=prompt("Variable  :");if(p)try{await n({name:p,project_id:t,type:"string",defaultValue:"",persist:!1,scope:"global"})}catch(m){console.error("Variable  :",m)}},u=async(p,m)=>{if(m.stopPropagation(),!!confirm(" ?"))try{await r(p)}catch(v){console.error("Variable  :",v)}},h=(p,m)=>{m.stopPropagation(),s(p)},f=p=>d.jsxs("div",{role:"listitem",className:`list-item ${a===p.id?"editing":""}`,onClick:()=>s(p.id),children:[d.jsx("div",{className:"list-item-icon",children:d.jsx(CT,{size:16})}),d.jsxs("div",{className:"list-item-content",children:[d.jsx("div",{className:"list-item-name",children:p.name}),d.jsxs("div",{className:"list-item-meta",children:[p.type,p.persist&&"  localStorage"]})]}),d.jsx("span",{className:`list-item-badge ${p.scope}`,children:p.scope}),d.jsxs("div",{className:"list-item-actions",children:[d.jsx("button",{type:"button",className:"iconButton",onClick:m=>h(p.id,m),title:"",children:d.jsx(FM,{size:14})}),d.jsx("button",{type:"button",className:"iconButton",onClick:m=>u(p.id,m),title:"",children:d.jsx(pu,{size:14})})]})]},p.id);return d.jsxs("div",{className:"section",children:[d.jsx(jI,{title:"Variable List",actions:d.jsxs("span",{className:"datatable-list-count",children:[e.length,""]})}),d.jsxs("div",{className:"section-content",children:[e.length===0?d.jsxs("div",{className:"datatable-empty",children:[d.jsx(CT,{size:32,className:"datatable-empty-icon"}),d.jsxs("p",{className:"datatable-empty-text",children:[" .",d.jsx("br",{}),"  ."]})]}):d.jsxs(d.Fragment,{children:[o.length>0&&d.jsxs("div",{className:"list-subgroup",children:[d.jsxs("div",{className:"list-subgroup-header",children:[d.jsx("span",{className:"list-subgroup-title",children:"Global"}),d.jsxs("span",{className:"list-subgroup-count",children:[o.length,""]})]}),d.jsx("div",{className:"list-group",role:"list",children:o.map(f)})]}),l.length>0&&d.jsxs("div",{className:"list-subgroup",children:[d.jsxs("div",{className:"list-subgroup-header",children:[d.jsx("span",{className:"list-subgroup-title",children:"Page"}),d.jsxs("span",{className:"list-subgroup-count",children:[l.length,""]})]}),d.jsx("div",{className:"list-group",role:"list",children:l.map(f)})]})]}),d.jsxs("button",{type:"button",className:"datatable-add-btn",onClick:c,children:[d.jsx(Pc,{size:16}),d.jsx("span",{children:"Variable "})]})]})]})}const Lze={level1_mapping:"Mapping",level2_transformer:"JS",level3_custom:"Custom"},Fze={level1_mapping:"level1",level2_transformer:"level2",level3_custom:"level3"};function jze({projectId:t}){const e=u4e(),n=Oi(u=>u.createTransformer),r=Oi(u=>u.deleteTransformer),i=Oi(u=>u.executeTransformer),[s,a]=C.useState(null),o=async()=>{const u=prompt("Transformer  :");if(u)try{await n({name:u,project_id:t,level:"level1_mapping",enabled:!0})}catch(h){console.error("Transformer  :",h)}},l=async(u,h)=>{if(h.stopPropagation(),!!confirm(" ?"))try{await r(u),s===u&&a(null)}catch(f){console.error("Transformer  :",f)}},c=async(u,h)=>{h.stopPropagation();try{const f=await i(u,[{test:"data"}]);console.log("Transformer  :",f),alert("Transformer  !  .")}catch(f){console.error("Transformer  :",f),alert(`Transformer  : ${f.message}`)}};return d.jsxs("div",{className:"section",children:[d.jsx(jI,{title:"Transformer List",actions:d.jsxs("span",{className:"datatable-list-count",children:[e.length,""]})}),d.jsxs("div",{className:"section-content",children:[e.length===0?d.jsxs("div",{className:"datatable-empty",children:[d.jsx(WN,{size:32,className:"datatable-empty-icon"}),d.jsxs("p",{className:"datatable-empty-text",children:["Transformer .",d.jsx("br",{})," Transformer ."]})]}):d.jsx("div",{className:"datatable-list",children:e.map(u=>d.jsxs("div",{className:`datatable-item ${s===u.id?"selected":""}`,onClick:()=>a(u.id),children:[d.jsx("div",{className:"datatable-item-icon",children:d.jsx(WN,{size:16})}),d.jsxs("div",{className:"datatable-item-info",children:[d.jsx("div",{className:"datatable-item-name",children:u.name}),d.jsxs("div",{className:"datatable-item-meta",children:[u.inputDataTable&&`${u.inputDataTable}  `,u.outputDataTable||"output",!u.enabled&&"  "]})]}),d.jsx("span",{className:`level-badge ${Fze[u.level]}`,children:Lze[u.level]}),d.jsxs("div",{className:"datatable-item-actions",children:[d.jsx("button",{type:"button",className:"iconButton",onClick:h=>c(u.id,h),disabled:!u.enabled,title:"",children:d.jsx(NE,{size:14})}),d.jsx("button",{type:"button",className:"iconButton",onClick:h=>{h.stopPropagation()},title:"",children:d.jsx(FM,{size:14})}),d.jsx("button",{type:"button",className:"iconButton",onClick:h=>l(u.id,h),title:"",children:d.jsx(pu,{size:14})})]})]},u.id))}),d.jsxs("button",{type:"button",className:"datatable-add-btn",onClick:o,children:[d.jsx(Pc,{size:16}),d.jsx("span",{children:"Transformer "})]})]})]})}const Oze=[{id:"tables",label:"Tables",icon:C_},{id:"endpoints",label:"APIs",icon:v_},{id:"variables",label:"Variables",icon:CT},{id:"transformers",label:"Transformers",icon:WN}];function zze({isActive:t}){const[e,n]=C.useState("tables"),{projectId:r}=Fb(),i=C.useRef(null),{isLoading:s,refetch:a}=Rze(r,{enabled:t}),o=Oi(w=>w.fetchDataTables),l=Oi(w=>w.fetchApiEndpoints),c=Oi(w=>w.fetchVariables),u=Oi(w=>w.fetchTransformers);C.useEffect(()=>{t&&r&&i.current!==r&&(i.current=r,Promise.all([o(r),l(r),c(r),u(r)]).then(()=>{}).catch(w=>{console.error(" [DataTablePanel]  :",w)}))},[t,r,o,l,c,u]);const h=Qg(w=>w.mode),f=Qg(w=>w.openTableCreator),p=Qg(w=>w.openTableEditor),m=Qg(w=>w.close),v=h?.type==="table-edit"?h.tableId:null;if(!t)return null;if(!r)return d.jsxs("div",{className:"datatable-panel",children:[d.jsx(uf,{icon:d.jsx(qo,{size:16}),title:"DataTable"}),d.jsx(Ko,{message:" "})]});const A=()=>{r&&(a(),o(r),l(r),c(r),u(r))},x=()=>{f(r)},E=w=>{w&&p(w)};return d.jsxs("div",{className:"datatable-panel",children:[d.jsx(uf,{icon:d.jsx(qo,{size:16}),title:"DataTable",actions:d.jsx("button",{className:"iconButton",type:"button",onClick:A,title:"",children:d.jsx(mb,{size:16})})}),d.jsx("div",{className:"panel-tabs",children:Oze.map(w=>d.jsxs("button",{className:`panel-tab ${e===w.id?"active":""}`,onClick:()=>{e!==w.id&&(h&&m(),n(w.id))},type:"button",children:[d.jsx(w.icon,{size:14}),d.jsx("span",{children:w.label})]},w.id))}),d.jsxs("div",{className:"panel-contents",children:[s&&d.jsx("div",{className:"datatable-loading-overlay",children:d.jsx(Zoe,{})}),e==="tables"&&d.jsx(Pze,{projectId:r,editingId:v,onEditingChange:E,onCreateClick:x}),e==="endpoints"&&d.jsx(kze,{projectId:r}),e==="variables"&&d.jsx(Nze,{projectId:r}),e==="transformers"&&d.jsx(jze,{projectId:r})]})]})}var lT={exports:{}};var $ze=lT.exports,w9;function Qze(){return w9||(w9=1,(function(t,e){((n,r)=>{t.exports=r()})($ze,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,s=!r.document&&!!r.postMessage,a=r.IS_PAPA_WORKER||!1,o={},l=0,c={};function u(R){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(k){var L=D(k);L.chunkSize=parseInt(L.chunkSize),k.step||k.chunk||(L.chunkSize=null),this._handle=new v(L),(this._handle.streamer=this)._config=L}).call(this,R),this.parseChunk=function(k,L){var F=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<F){let G=this._config.newline;G||(z=this._config.quoteChar||'"',G=this._handle.guessLineEndings(k,z)),k=[...k.split(G).slice(F)].join(G)}this.isFirstChunk&&M(this._config.beforeFirstChunk)&&(z=this._config.beforeFirstChunk(k))!==void 0&&(k=z),this.isFirstChunk=!1,this._halted=!1;var F=this._partialLine+k,z=(this._partialLine="",this._handle.parse(F,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(k=z.meta.cursor,F=(this._finished||(this._partialLine=F.substring(k-this._baseIndex),this._baseIndex=k),z&&z.data&&(this._rowCount+=z.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)r.postMessage({results:z,workerId:c.WORKER_ID,finished:F});else if(M(this._config.chunk)&&!L){if(this._config.chunk(z,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=z=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(z.data),this._completeResults.errors=this._completeResults.errors.concat(z.errors),this._completeResults.meta=z.meta),this._completed||!F||!M(this._config.complete)||z&&z.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),F||z&&z.meta.paused||this._nextChunk(),z}this._halted=!0},this._sendError=function(k){M(this._config.error)?this._config.error(k):a&&this._config.error&&r.postMessage({workerId:c.WORKER_ID,error:k,finished:!1})}}function h(R){var k;(R=R||{}).chunkSize||(R.chunkSize=c.RemoteChunkSize),u.call(this,R),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(L){this._input=L,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(k=new XMLHttpRequest,this._config.withCredentials&&(k.withCredentials=this._config.withCredentials),s||(k.onload=T(this._chunkLoaded,this),k.onerror=T(this._chunkError,this)),k.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var L,F=this._config.downloadRequestHeaders;for(L in F)k.setRequestHeader(L,F[L])}var z;this._config.chunkSize&&(z=this._start+this._config.chunkSize-1,k.setRequestHeader("Range","bytes="+this._start+"-"+z));try{k.send(this._config.downloadRequestBody)}catch(G){this._chunkError(G.message)}s&&k.status===0&&this._chunkError()}},this._chunkLoaded=function(){k.readyState===4&&(k.status<200||400<=k.status?this._chunkError():(this._start+=this._config.chunkSize||k.responseText.length,this._finished=!this._config.chunkSize||this._start>=(L=>(L=L.getResponseHeader("Content-Range"))!==null?parseInt(L.substring(L.lastIndexOf("/")+1)):-1)(k),this.parseChunk(k.responseText)))},this._chunkError=function(L){L=k.statusText||L,this._sendError(new Error(L))}}function f(R){(R=R||{}).chunkSize||(R.chunkSize=c.LocalChunkSize),u.call(this,R);var k,L,F=typeof FileReader<"u";this.stream=function(z){this._input=z,L=z.slice||z.webkitSlice||z.mozSlice,F?((k=new FileReader).onload=T(this._chunkLoaded,this),k.onerror=T(this._chunkError,this)):k=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var z=this._input,G=(this._config.chunkSize&&(G=Math.min(this._start+this._config.chunkSize,this._input.size),z=L.call(z,this._start,G)),k.readAsText(z,this._config.encoding));F||this._chunkLoaded({target:{result:G}})},this._chunkLoaded=function(z){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(z.target.result)},this._chunkError=function(){this._sendError(k.error)}}function p(R){var k;u.call(this,R=R||{}),this.stream=function(L){return k=L,this._nextChunk()},this._nextChunk=function(){var L,F;if(!this._finished)return L=this._config.chunkSize,k=L?(F=k.substring(0,L),k.substring(L)):(F=k,""),this._finished=!k,this.parseChunk(F)}}function m(R){u.call(this,R=R||{});var k=[],L=!0,F=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(z){this._input=z,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){F&&k.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),k.length?this.parseChunk(k.shift()):L=!0},this._streamData=T(function(z){try{k.push(typeof z=="string"?z:z.toString(this._config.encoding)),L&&(L=!1,this._checkIsFinished(),this.parseChunk(k.shift()))}catch(G){this._streamError(G)}},this),this._streamError=T(function(z){this._streamCleanUp(),this._sendError(z)},this),this._streamEnd=T(function(){this._streamCleanUp(),F=!0,this._streamData("")},this),this._streamCleanUp=T(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function v(R){var k,L,F,z,G=Math.pow(2,53),V=-G,q=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,O=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,H=this,K=0,X=0,re=!1,J=!1,Z=[],ee={data:[],errors:[],meta:{}};function te(fe){return R.skipEmptyLines==="greedy"?fe.join("").trim()==="":fe.length===1&&fe[0].length===0}function oe(){if(ee&&F&&(se("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),F=!1),R.skipEmptyLines&&(ee.data=ee.data.filter(function(_e){return!te(_e)})),ae()){let _e=function(Ce,Se){M(R.transformHeader)&&(Ce=R.transformHeader(Ce,Se)),Z.push(Ce)};if(ee)if(Array.isArray(ee.data[0])){for(var fe=0;ae()&&fe<ee.data.length;fe++)ee.data[fe].forEach(_e);ee.data.splice(0,1)}else ee.data.forEach(_e)}function Ee(_e,Ce){for(var Se=R.header?{}:[],Me=0;Me<_e.length;Me++){var ce=Me,$e=_e[Me],$e=((qe,ft)=>(Ie=>(R.dynamicTypingFunction&&R.dynamicTyping[Ie]===void 0&&(R.dynamicTyping[Ie]=R.dynamicTypingFunction(Ie)),(R.dynamicTyping[Ie]||R.dynamicTyping)===!0))(qe)?ft==="true"||ft==="TRUE"||ft!=="false"&&ft!=="FALSE"&&((Ie=>{if(q.test(Ie)&&(Ie=parseFloat(Ie),V<Ie&&Ie<G))return 1})(ft)?parseFloat(ft):O.test(ft)?new Date(ft):ft===""?null:ft):ft)(ce=R.header?Me>=Z.length?"__parsed_extra":Z[Me]:ce,$e=R.transform?R.transform($e,ce):$e);ce==="__parsed_extra"?(Se[ce]=Se[ce]||[],Se[ce].push($e)):Se[ce]=$e}return R.header&&(Me>Z.length?se("FieldMismatch","TooManyFields","Too many fields: expected "+Z.length+" fields but parsed "+Me,X+Ce):Me<Z.length&&se("FieldMismatch","TooFewFields","Too few fields: expected "+Z.length+" fields but parsed "+Me,X+Ce)),Se}var Be;ee&&(R.header||R.dynamicTyping||R.transform)&&(Be=1,!ee.data.length||Array.isArray(ee.data[0])?(ee.data=ee.data.map(Ee),Be=ee.data.length):ee.data=Ee(ee.data,0),R.header&&ee.meta&&(ee.meta.fields=Z),X+=Be)}function ae(){return R.header&&Z.length===0}function se(fe,Ee,Be,_e){fe={type:fe,code:Ee,message:Be},_e!==void 0&&(fe.row=_e),ee.errors.push(fe)}M(R.step)&&(z=R.step,R.step=function(fe){ee=fe,ae()?oe():(oe(),ee.data.length!==0&&(K+=fe.data.length,R.preview&&K>R.preview?L.abort():(ee.data=ee.data[0],z(ee,H))))}),this.parse=function(fe,Ee,Be){var _e=R.quoteChar||'"',_e=(R.newline||(R.newline=this.guessLineEndings(fe,_e)),F=!1,R.delimiter?M(R.delimiter)&&(R.delimiter=R.delimiter(fe),ee.meta.delimiter=R.delimiter):((_e=((Ce,Se,Me,ce,$e)=>{var qe,ft,Ie,ht;$e=$e||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var Ue=0;Ue<$e.length;Ue++){for(var xt,ve=$e[Ue],ue=0,ke=0,He=0,Qe=(Ie=void 0,new x({comments:ce,delimiter:ve,newline:Se,preview:10}).parse(Ce)),Ke=0;Ke<Qe.data.length;Ke++)Me&&te(Qe.data[Ke])?He++:(xt=Qe.data[Ke].length,ke+=xt,Ie===void 0?Ie=xt:0<xt&&(ue+=Math.abs(xt-Ie),Ie=xt));0<Qe.data.length&&(ke/=Qe.data.length-He),(ft===void 0||ue<=ft)&&(ht===void 0||ht<ke)&&1.99<ke&&(ft=ue,qe=ve,ht=ke)}return{successful:!!(R.delimiter=qe),bestDelimiter:qe}})(fe,R.newline,R.skipEmptyLines,R.comments,R.delimitersToGuess)).successful?R.delimiter=_e.bestDelimiter:(F=!0,R.delimiter=c.DefaultDelimiter),ee.meta.delimiter=R.delimiter),D(R));return R.preview&&R.header&&_e.preview++,k=fe,L=new x(_e),ee=L.parse(k,Ee,Be),oe(),re?{meta:{paused:!0}}:ee||{meta:{paused:!1}}},this.paused=function(){return re},this.pause=function(){re=!0,L.abort(),k=M(R.chunk)?"":k.substring(L.getCharIndex())},this.resume=function(){H.streamer._halted?(re=!1,H.streamer.parseChunk(k,!0)):setTimeout(H.resume,3)},this.aborted=function(){return J},this.abort=function(){J=!0,L.abort(),ee.meta.aborted=!0,M(R.complete)&&R.complete(ee),k=""},this.guessLineEndings=function(Ce,_e){Ce=Ce.substring(0,1048576);var _e=new RegExp(A(_e)+"([^]*?)"+A(_e),"gm"),Be=(Ce=Ce.replace(_e,"")).split("\r"),_e=Ce.split(`
`),Ce=1<_e.length&&_e[0].length<Be[0].length;if(Be.length===1||Ce)return`
`;for(var Se=0,Me=0;Me<Be.length;Me++)Be[Me][0]===`
`&&Se++;return Se>=Be.length/2?`\r
`:"\r"}}function A(R){return R.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function x(R){var k=(R=R||{}).delimiter,L=R.newline,F=R.comments,z=R.step,G=R.preview,V=R.fastMode,q=null,O=!1,H=R.quoteChar==null?'"':R.quoteChar,K=H;if(R.escapeChar!==void 0&&(K=R.escapeChar),(typeof k!="string"||-1<c.BAD_DELIMITERS.indexOf(k))&&(k=","),F===k)throw new Error("Comment character same as delimiter");F===!0?F="#":(typeof F!="string"||-1<c.BAD_DELIMITERS.indexOf(F))&&(F=!1),L!==`
`&&L!=="\r"&&L!==`\r
`&&(L=`
`);var X=0,re=!1;this.parse=function(J,Z,ee){if(typeof J!="string")throw new Error("Input must be a string");var te=J.length,oe=k.length,ae=L.length,se=F.length,fe=M(z),Ee=[],Be=[],_e=[],Ce=X=0;if(!J)return ue();if(V||V!==!1&&J.indexOf(H)===-1){for(var Se=J.split(L),Me=0;Me<Se.length;Me++){if(_e=Se[Me],X+=_e.length,Me!==Se.length-1)X+=L.length;else if(ee)return ue();if(!F||_e.substring(0,se)!==F){if(fe){if(Ee=[],ht(_e.split(k)),ke(),re)return ue()}else ht(_e.split(k));if(G&&G<=Me)return Ee=Ee.slice(0,G),ue(!0)}}return ue()}for(var ce=J.indexOf(k,X),$e=J.indexOf(L,X),qe=new RegExp(A(K)+A(H),"g"),ft=J.indexOf(H,X);;)if(J[X]===H)for(ft=X,X++;;){if((ft=J.indexOf(H,ft+1))===-1)return ee||Be.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Ee.length,index:X}),xt();if(ft===te-1)return xt(J.substring(X,ft).replace(qe,H));if(H===K&&J[ft+1]===K)ft++;else if(H===K||ft===0||J[ft-1]!==K){ce!==-1&&ce<ft+1&&(ce=J.indexOf(k,ft+1));var Ie=Ue(($e=$e!==-1&&$e<ft+1?J.indexOf(L,ft+1):$e)===-1?ce:Math.min(ce,$e));if(J.substr(ft+1+Ie,oe)===k){_e.push(J.substring(X,ft).replace(qe,H)),J[X=ft+1+Ie+oe]!==H&&(ft=J.indexOf(H,X)),ce=J.indexOf(k,X),$e=J.indexOf(L,X);break}if(Ie=Ue($e),J.substring(ft+1+Ie,ft+1+Ie+ae)===L){if(_e.push(J.substring(X,ft).replace(qe,H)),ve(ft+1+Ie+ae),ce=J.indexOf(k,X),ft=J.indexOf(H,X),fe&&(ke(),re))return ue();if(G&&Ee.length>=G)return ue(!0);break}Be.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Ee.length,index:X}),ft++}}else if(F&&_e.length===0&&J.substring(X,X+se)===F){if($e===-1)return ue();X=$e+ae,$e=J.indexOf(L,X),ce=J.indexOf(k,X)}else if(ce!==-1&&(ce<$e||$e===-1))_e.push(J.substring(X,ce)),X=ce+oe,ce=J.indexOf(k,X);else{if($e===-1)break;if(_e.push(J.substring(X,$e)),ve($e+ae),fe&&(ke(),re))return ue();if(G&&Ee.length>=G)return ue(!0)}return xt();function ht(He){Ee.push(He),Ce=X}function Ue(He){var Qe=0;return Qe=He!==-1&&(He=J.substring(ft+1,He))&&He.trim()===""?He.length:Qe}function xt(He){return ee||(He===void 0&&(He=J.substring(X)),_e.push(He),X=te,ht(_e),fe&&ke()),ue()}function ve(He){X=He,ht(_e),_e=[],$e=J.indexOf(L,X)}function ue(He){if(R.header&&!Z&&Ee.length&&!O){var Qe=Ee[0],Ke=Object.create(null),jt=new Set(Qe);let St=!1;for(let Zt=0;Zt<Qe.length;Zt++){let Bt=Qe[Zt];if(Ke[Bt=M(R.transformHeader)?R.transformHeader(Bt,Zt):Bt]){let at,pt=Ke[Bt];for(;at=Bt+"_"+pt,pt++,jt.has(at););jt.add(at),Qe[Zt]=at,Ke[Bt]++,St=!0,(q=q===null?{}:q)[at]=Bt}else Ke[Bt]=1,Qe[Zt]=Bt;jt.add(Bt)}St&&console.warn("Duplicate headers found and renamed."),O=!0}return{data:Ee,errors:Be,meta:{delimiter:k,linebreak:L,aborted:re,truncated:!!He,cursor:Ce+(Z||0),renamedHeaders:q}}}function ke(){z(ue()),Ee=[],Be=[]}},this.abort=function(){re=!0},this.getCharIndex=function(){return X}}function E(R){var k=R.data,L=o[k.workerId],F=!1;if(k.error)L.userError(k.error,k.file);else if(k.results&&k.results.data){var z={abort:function(){F=!0,w(k.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:B,resume:B};if(M(L.userStep)){for(var G=0;G<k.results.data.length&&(L.userStep({data:k.results.data[G],errors:k.results.errors,meta:k.results.meta},z),!F);G++);delete k.results}else M(L.userChunk)&&(L.userChunk(k.results,z,k.file),delete k.results)}k.finished&&!F&&w(k.workerId,k.results)}function w(R,k){var L=o[R];M(L.userComplete)&&L.userComplete(k),L.terminate(),delete o[R]}function B(){throw new Error("Not implemented.")}function D(R){if(typeof R!="object"||R===null)return R;var k,L=Array.isArray(R)?[]:{};for(k in R)L[k]=D(R[k]);return L}function T(R,k){return function(){R.apply(k,arguments)}}function M(R){return typeof R=="function"}return c.parse=function(R,k){var L=(k=k||{}).dynamicTyping||!1;if(M(L)&&(k.dynamicTypingFunction=L,L={}),k.dynamicTyping=L,k.transform=!!M(k.transform)&&k.transform,!k.worker||!c.WORKERS_SUPPORTED)return L=null,c.NODE_STREAM_INPUT,typeof R=="string"?(R=(F=>F.charCodeAt(0)!==65279?F:F.slice(1))(R),L=new(k.download?h:p)(k)):R.readable===!0&&M(R.read)&&M(R.on)?L=new m(k):(r.File&&R instanceof File||R instanceof Object)&&(L=new f(k)),L.stream(R);(L=(()=>{var F;return!!c.WORKERS_SUPPORTED&&(F=(()=>{var z=r.URL||r.webkitURL||null,G=n.toString();return c.BLOB_URL||(c.BLOB_URL=z.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",G,")();"],{type:"text/javascript"})))})(),(F=new r.Worker(F)).onmessage=E,F.id=l++,o[F.id]=F)})()).userStep=k.step,L.userChunk=k.chunk,L.userComplete=k.complete,L.userError=k.error,k.step=M(k.step),k.chunk=M(k.chunk),k.complete=M(k.complete),k.error=M(k.error),delete k.worker,L.postMessage({input:R,config:k,workerId:L.id})},c.unparse=function(R,k){var L=!1,F=!0,z=",",G=`\r
`,V='"',q=V+V,O=!1,H=null,K=!1,X=((()=>{if(typeof k=="object"){if(typeof k.delimiter!="string"||c.BAD_DELIMITERS.filter(function(Z){return k.delimiter.indexOf(Z)!==-1}).length||(z=k.delimiter),typeof k.quotes!="boolean"&&typeof k.quotes!="function"&&!Array.isArray(k.quotes)||(L=k.quotes),typeof k.skipEmptyLines!="boolean"&&typeof k.skipEmptyLines!="string"||(O=k.skipEmptyLines),typeof k.newline=="string"&&(G=k.newline),typeof k.quoteChar=="string"&&(V=k.quoteChar),typeof k.header=="boolean"&&(F=k.header),Array.isArray(k.columns)){if(k.columns.length===0)throw new Error("Option columns is empty");H=k.columns}k.escapeChar!==void 0&&(q=k.escapeChar+V),k.escapeFormulae instanceof RegExp?K=k.escapeFormulae:typeof k.escapeFormulae=="boolean"&&k.escapeFormulae&&(K=/^[=+\-@\t\r].*$/)}})(),new RegExp(A(V),"g"));if(typeof R=="string"&&(R=JSON.parse(R)),Array.isArray(R)){if(!R.length||Array.isArray(R[0]))return re(null,R,O);if(typeof R[0]=="object")return re(H||Object.keys(R[0]),R,O)}else if(typeof R=="object")return typeof R.data=="string"&&(R.data=JSON.parse(R.data)),Array.isArray(R.data)&&(R.fields||(R.fields=R.meta&&R.meta.fields||H),R.fields||(R.fields=Array.isArray(R.data[0])?R.fields:typeof R.data[0]=="object"?Object.keys(R.data[0]):[]),Array.isArray(R.data[0])||typeof R.data[0]=="object"||(R.data=[R.data])),re(R.fields||[],R.data||[],O);throw new Error("Unable to serialize unrecognized input");function re(Z,ee,te){var oe="",ae=(typeof Z=="string"&&(Z=JSON.parse(Z)),typeof ee=="string"&&(ee=JSON.parse(ee)),Array.isArray(Z)&&0<Z.length),se=!Array.isArray(ee[0]);if(ae&&F){for(var fe=0;fe<Z.length;fe++)0<fe&&(oe+=z),oe+=J(Z[fe],fe);0<ee.length&&(oe+=G)}for(var Ee=0;Ee<ee.length;Ee++){var Be=(ae?Z:ee[Ee]).length,_e=!1,Ce=ae?Object.keys(ee[Ee]).length===0:ee[Ee].length===0;if(te&&!ae&&(_e=te==="greedy"?ee[Ee].join("").trim()==="":ee[Ee].length===1&&ee[Ee][0].length===0),te==="greedy"&&ae){for(var Se=[],Me=0;Me<Be;Me++){var ce=se?Z[Me]:Me;Se.push(ee[Ee][ce])}_e=Se.join("").trim()===""}if(!_e){for(var $e=0;$e<Be;$e++){0<$e&&!Ce&&(oe+=z);var qe=ae&&se?Z[$e]:$e;oe+=J(ee[Ee][qe],$e)}Ee<ee.length-1&&(!te||0<Be&&!Ce)&&(oe+=G)}}return oe}function J(Z,ee){var te,oe;return Z==null?"":Z.constructor===Date?JSON.stringify(Z).slice(1,25):(oe=!1,K&&typeof Z=="string"&&K.test(Z)&&(Z="'"+Z,oe=!0),te=Z.toString().replace(X,q),(oe=oe||L===!0||typeof L=="function"&&L(Z,ee)||Array.isArray(L)&&L[ee]||((ae,se)=>{for(var fe=0;fe<se.length;fe++)if(-1<ae.indexOf(se[fe]))return!0;return!1})(te,c.BAD_DELIMITERS)||-1<te.indexOf(z)||te.charAt(0)===" "||te.charAt(te.length-1)===" ")?V+te+V:te)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!s&&!!r.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=x,c.ParserHandle=v,c.NetworkStreamer=h,c.FileStreamer=f,c.StringStreamer=p,c.ReadableStreamStreamer=m,r.jQuery&&((i=r.jQuery).fn.parse=function(R){var k=R.config||{},L=[];return this.each(function(G){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var V=0;V<this.files.length;V++)L.push({file:this.files[V],inputElem:this,instanceConfig:i.extend({},k)})}),F(),this;function F(){if(L.length===0)M(R.complete)&&R.complete();else{var G,V,q,O,H=L[0];if(M(R.before)){var K=R.before(H.file,H.inputElem);if(typeof K=="object"){if(K.action==="abort")return G="AbortError",V=H.file,q=H.inputElem,O=K.reason,void(M(R.error)&&R.error({name:G},V,q,O));if(K.action==="skip")return void z();typeof K.config=="object"&&(H.instanceConfig=i.extend(H.instanceConfig,K.config))}else if(K==="skip")return void z()}var X=H.instanceConfig.complete;H.instanceConfig.complete=function(re){M(X)&&X(re,H.file,H.inputElem),z()},c.parse(H.file,H.instanceConfig)}}function z(){L.splice(0,1),F()}}),a&&(r.onmessage=function(R){R=R.data,c.WORKER_ID===void 0&&R&&(c.WORKER_ID=R.workerId),typeof R.input=="string"?r.postMessage({workerId:c.WORKER_ID,results:c.parse(R.input,R.config),finished:!0}):(r.File&&R.input instanceof File||R.input instanceof Object)&&(R=c.parse(R.input,R.config))&&r.postMessage({workerId:c.WORKER_ID,results:R,finished:!0})}),(h.prototype=Object.create(u.prototype)).constructor=h,(f.prototype=Object.create(u.prototype)).constructor=f,(p.prototype=Object.create(p.prototype)).constructor=p,(m.prototype=Object.create(u.prototype)).constructor=m,c})})(lT)),lT.exports}var Uze=Qze();const _9=qg(Uze),Hze=[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"boolean",label:"Boolean"},{value:"date",label:"Date"},{value:"datetime",label:"DateTime"},{value:"email",label:"Email"},{value:"url",label:"URL"},{value:"image",label:"Image"},{value:"array",label:"Array"},{value:"object",label:"Object"}];function Gze({dataTable:t,onClose:e,activeTab:n}){const r=Oi(x=>x.updateDataTable),[i,s]=C.useState(new Set),a=C.useCallback(async x=>{try{await r(t.id,{schema:x})}catch(E){console.error("  :",E)}},[t.id,r]),o=C.useCallback(()=>{const x={key:`field_${Date.now()}`,type:"string",label:"New Field",required:!1};a([...t.schema,x])},[t.schema,a]),l=C.useCallback(x=>{const E=t.schema.filter(w=>w.key!==x);a(E)},[t.schema,a]),c=C.useCallback((x,E)=>{const w=t.schema.map(B=>B.key===x?{...B,...E}:B);a(w)},[t.schema,a]),u=C.useCallback(async x=>{try{await r(t.id,{mockData:x})}catch(E){console.error("Mock   :",E)}},[t.id,r]),h=C.useCallback(()=>{const x={},E=t.mockData.length+1;t.schema.forEach(w=>{w.key==="id"?w.type==="number"?x[w.key]=E:x[w.key]=`row_${E}`:x[w.key]=w.defaultValue??gle(w.type)}),u([...t.mockData,x])},[t.schema,t.mockData,u]),f=C.useCallback(x=>{const E=t.mockData.filter((w,B)=>B!==x);u(E)},[t.mockData,u]),p=C.useCallback((x,E,w)=>{const B=t.mockData.map((D,T)=>T===x?{...D,[E]:w}:D);u(B)},[t.mockData,u]),m=C.useCallback(x=>{u(x)},[u]),v=C.useCallback(async x=>{try{await r(t.id,{useMockData:x})}catch(E){console.error("useMockData  :",E)}},[t.id,r]),A=C.useCallback(async x=>{try{await r(t.id,{name:x})}catch(E){console.error("  :",E)}},[t.id,r]);return d.jsxs(d.Fragment,{children:[n==="schema"&&d.jsx(Wze,{schema:t.schema,expandedFields:i,setExpandedFields:s,onAddField:o,onDeleteField:l,onUpdateField:c}),n==="data"&&d.jsx(Kze,{schema:t.schema,mockData:t.mockData,onAddRow:h,onDeleteRow:f,onUpdateCell:p,onImportCSV:m}),n==="settings"&&d.jsx(Xze,{name:t.name,useMockData:t.useMockData,onNameChange:A,onUseMockDataChange:v})]})}function Vze({field:t,onUpdateField:e,onDeleteField:n}){const[r,i]=C.useState(t.key),[s,a]=C.useState(t.label||"");return d.jsxs("tr",{children:[d.jsx("td",{children:d.jsx("input",{type:"text",className:"cell-input",value:r,onChange:o=>i(o.target.value),onBlur:()=>{r!==t.key&&e(t.key,{key:r})}})}),d.jsx("td",{children:d.jsx("select",{className:"cell-select",value:t.type,onChange:o=>e(t.key,{type:o.target.value}),children:Hze.map(o=>d.jsx("option",{value:o.value,children:o.label},o.value))})}),d.jsx("td",{children:d.jsx("input",{type:"text",className:"cell-input",value:s,onChange:o=>a(o.target.value),onBlur:()=>e(t.key,{label:s}),placeholder:"Label"})}),d.jsx("td",{className:"cell-center",children:d.jsx("input",{type:"checkbox",checked:t.required||!1,onChange:o=>e(t.key,{required:o.target.checked})})}),d.jsx("td",{children:d.jsx("button",{type:"button",className:"delete-row-btn",onClick:()=>n(t.key),children:d.jsx(pu,{size:12})})})]})}function Wze({schema:t,onAddField:e,onDeleteField:n,onUpdateField:r}){return d.jsxs("div",{className:"section",children:[d.jsx("div",{className:"section-content",children:d.jsx("div",{className:"data-table-wrapper",children:d.jsxs("table",{className:"data-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Key"}),d.jsx("th",{children:"Type"}),d.jsx("th",{children:"Label"}),d.jsx("th",{children:"Req"}),d.jsx("th",{})]})}),d.jsx("tbody",{children:t.map(i=>d.jsx(Vze,{field:i,onUpdateField:r,onDeleteField:n},i.key))})]})})}),d.jsxs("button",{type:"button",className:"add-field-btn",onClick:e,children:[d.jsx(Pc,{size:14}),"Add Column"]})]})}function Kze({schema:t,mockData:e,onAddRow:n,onDeleteRow:r,onUpdateCell:i,onImportCSV:s}){const[a,o]=C.useState(""),l=C.useRef(null),c=C.useMemo(()=>{if(!a.trim())return e.map((p,m)=>({row:p,originalIndex:m}));const f=a.toLowerCase();return e.map((p,m)=>({row:p,originalIndex:m})).filter(({row:p})=>t.some(m=>{const v=p[m.key];return v==null?!1:String(v).toLowerCase().includes(f)}))},[e,t,a]),u=C.useCallback(f=>{const p=f.target.files?.[0];p&&_9.parse(p,{header:!0,skipEmptyLines:!0,complete:m=>{const A=m.data.map((x,E)=>{const w={};return t.forEach(B=>{const D=x[B.key];w[B.key]=qze(D,B.type,E+1)}),w});s(A),l.current&&(l.current.value="")},error:m=>{console.error("CSV  :",m)}})},[t,s]),h=C.useCallback(()=>{if(e.length===0)return;const f=_9.unparse(e,{columns:t.map(A=>A.key)}),p=new Blob([f],{type:"text/csv;charset=utf-8;"}),m=URL.createObjectURL(p),v=document.createElement("a");v.href=m,v.download="data.csv",v.click(),URL.revokeObjectURL(m)},[e,t]);return t.length===0?d.jsx("div",{className:"data-empty",children:"  ."}):d.jsxs("div",{className:"section",children:[d.jsxs("div",{className:"section-content",children:[d.jsxs("div",{className:"data-toolbar",children:[d.jsxs("div",{className:"filter-input-wrapper",children:[d.jsx(Xd,{size:14,className:"filter-icon"}),d.jsx("input",{type:"text",className:"filter-input",placeholder:"Filter rows...",value:a,onChange:f=>o(f.target.value)}),a&&d.jsx("button",{type:"button",className:"filter-clear-btn",onClick:()=>o(""),children:d.jsx(eh,{size:12})})]}),d.jsxs("div",{className:"toolbar-actions",children:[d.jsx("input",{ref:l,type:"file",accept:".csv",onChange:u,style:{display:"none"}}),d.jsxs("button",{type:"button",className:"toolbar-btn",onClick:()=>l.current?.click(),title:"Import CSV",children:[d.jsx(Xye,{size:14}),"Import"]}),d.jsxs("button",{type:"button",className:"toolbar-btn",onClick:h,disabled:e.length===0,title:"Export CSV",children:[d.jsx(LM,{size:14}),"Export"]})]})]}),a&&d.jsxs("div",{className:"filter-result-info",children:[c.length," / ",e.length," rows"]}),d.jsx("div",{className:"data-table-wrapper",children:d.jsxs("table",{className:"data-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{className:"row-index",children:"#"}),t.map(f=>d.jsx("th",{children:f.key},f.key)),d.jsx("th",{})]})}),d.jsx("tbody",{children:c.map(({row:f,originalIndex:p})=>d.jsxs("tr",{children:[d.jsx("td",{className:"row-index",children:p+1}),t.map(m=>d.jsx("td",{children:d.jsx(Yze,{fieldType:m.type,value:f[m.key],onChange:v=>i(p,m.key,v)},`${p}-${m.key}-${JSON.stringify(f[m.key])}`)},m.key)),d.jsx("td",{children:d.jsx("button",{type:"button",className:"delete-row-btn",onClick:()=>r(p),children:d.jsx(pu,{size:12})})})]},p))})]})})]}),d.jsxs("button",{type:"button",className:"add-row-btn",onClick:n,children:[d.jsx(Pc,{size:14}),"Add Row"]})]})}function qze(t,e,n){if(t==null||t==="")return gle(e);const r=String(t);switch(e){case"number":{const i=Number(r);return isNaN(i)?0:i}case"boolean":return r.toLowerCase()==="true"||r==="1";case"date":try{const i=new Date(r);return isNaN(i.getTime())?new Date().toISOString().split("T")[0]:i.toISOString().split("T")[0]}catch{return new Date().toISOString().split("T")[0]}case"datetime":try{const i=new Date(r);return isNaN(i.getTime())?new Date().toISOString():i.toISOString()}catch{return new Date().toISOString()}case"array":try{const i=JSON.parse(r);return Array.isArray(i)?i:[r]}catch{return r.split(",").map(i=>i.trim())}case"object":try{return JSON.parse(r)}catch{return{}}default:return r===""||r==="undefined"?`row_${n}`:r}}function Yze({fieldType:t,value:e,onChange:n}){const[r,i]=C.useState(String(e||"")),s=()=>{n(t==="number"?r===""?0:Number(r):r)};switch(t){case"boolean":return d.jsx("input",{type:"checkbox",checked:!!e,onChange:a=>n(a.target.checked)});case"number":return d.jsx("input",{type:"number",className:"cell-input",value:r,onChange:a=>i(a.target.value),onBlur:s});case"date":return d.jsx("input",{type:"date",className:"cell-input",value:r,onChange:a=>i(a.target.value),onBlur:s});case"datetime":return d.jsx("input",{type:"datetime-local",className:"cell-input",value:r,onChange:a=>i(a.target.value),onBlur:s});default:return d.jsx("input",{type:"text",className:"cell-input",value:r,onChange:a=>i(a.target.value),onBlur:s})}}function Xze({name:t,useMockData:e,onNameChange:n,onUseMockDataChange:r}){const[i,s]=C.useState(t);return d.jsxs("div",{className:"settings-editor",children:[d.jsxs("div",{className:"settings-field",children:[d.jsx("label",{className:"settings-label",children:" "}),d.jsx("input",{type:"text",className:"settings-input",value:i,onChange:a=>s(a.target.value),onBlur:()=>{i!==t&&n(i)}})]}),d.jsx(Hd,{label:"Use Table Data",isSelected:e,onChange:r}),d.jsx("p",{className:"settings-description",children:e?"Table  . API    Table  .":" API   ."})]})}function gle(t){switch(t){case"string":case"email":case"url":case"image":return"";case"number":return 0;case"boolean":return!1;case"date":case"datetime":return new Date().toISOString().split("T")[0];case"array":return[];case"object":return{};default:return""}}const Jze=[{id:"users-auth",name:"Users & Auth",icon:"Users",description:", ,  "},{id:"organization",name:"Organization",icon:"Building2",description:", ,  "},{id:"ecommerce",name:"E-commerce",icon:"ShoppingCart",description:", ,  "},{id:"manufacturing",name:"Manufacturing",icon:"Factory",description:", , BOM "},{id:"system",name:"System",icon:"Settings",description:" ,  "}],Bs=t=>t[Math.floor(Math.random()*t.length)],as=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,zi=(t="")=>{const e=as(8,16),n="abcdefghijklmnopqrstuvwxyz0123456789";let r=t;for(let i=t.length;i<e;i++)r+=n.charAt(Math.floor(Math.random()*n.length));return r},Wg=t=>{const e=new Date,n=new Date;n.setFullYear(e.getFullYear()-t);const r=as(n.getTime(),e.getTime());return new Date(r)},ff=t=>t.toISOString(),bj=["","","","","","","","","",""],Zze=[" "," "," "," ","DevOps ","UI/UX "," "," ","QA "," "],e$e=["","","","","","","","","",""],t$e=["","","","","","","","","",""],n$e=["IT ","","","","","",""],JB=["","","","","","","",""],r$e=["","","",""],i$e=["","","","",""],s$e=["","","",""],Fw=["","","","","","",""],a$e=["","","","",""],o$e=t=>Array.from({length:t},(e,n)=>({id:zi("usr_"),num:n+1,name:`${Bs(e$e)}${Bs(t$e)}`,email:`user${n+1}@${Bs(["company.com","example.org","mail.co.kr"])}`,phone:`010-${as(1e3,9999)}-${as(1e3,9999)}`,company:Bs(bj),role:Bs(Zze),status:Bs(r$e),jobLevel:Bs(i$e),createdAt:ff(Wg(2))})),l$e=t=>Array.from({length:t},(e,n)=>({id:zi("role_"),name:["","","","",""][n%5],description:["  ","  "," "," "," "][n%5],scope:Bs(["global","project"]),permissionIds:Array.from({length:as(2,5)},()=>zi("perm_"))})),c$e=t=>Array.from({length:t},(e,n)=>({id:zi("perm_"),name:[" "," "," "," "," "][n%5],description:["  "," //"," "," ","  "][n%5],category:Bs(["user","project","organization","security","billing"])})),u$e=t=>Array.from({length:t},(e,n)=>({id:zi("inv_"),email:`invited${n+1}@example.com`,roleId:zi("role_"),inviterUserId:zi("usr_"),status:Bs(["pending","accepted","expired","revoked"]),expiresAt:ff(new Date(Date.now()+as(1,30)*24*60*60*1e3)),createdAt:ff(Wg(1))})),d$e=t=>Array.from({length:t},(e,n)=>({id:zi("org_"),name:Bs(bj),industry:Bs(n$e),domain:`company${n+1}.com`,plan:Bs(["","",""]),createdAt:ff(Wg(3))})),h$e=t=>Array.from({length:t},(e,n)=>({id:zi("dept_"),organizationId:zi("org_"),name:JB[n%JB.length],description:`${JB[n%JB.length]} .`,managerUserId:zi("usr_")})),f$e=t=>Array.from({length:t},(e,n)=>({id:zi("proj_"),organizationId:zi("org_"),departmentId:zi("dept_"),name:` ${n+1}`,status:Bs(s$e),startDate:ff(Wg(1)),endDate:ff(new Date(Date.now()+as(30,365)*24*60*60*1e3)),budget:as(1e3,5e4)*1e4,clientName:Bs(bj),visibility:Bs(["private","internal","public"])})),p$e=t=>Array.from({length:t},(e,n)=>({id:zi("prod_"),name:` ${n+1}`,price:as(1e3,1e5),stock:as(0,500),category:Bs(Fw),description:` ${n+1}  .`,imageUrl:`https://picsum.photos/200/200?random=${n}`,isActive:Math.random()>.2,createdAt:ff(Wg(2))})),g$e=t=>Array.from({length:t},(e,n)=>({id:zi("cat_"),name:Fw[n%Fw.length],parentId:n>3?zi("cat_"):null,description:`${Fw[n%Fw.length]} `,order:n+1,isActive:!0})),m$e=t=>Array.from({length:t},()=>({id:zi("ord_"),userId:zi("usr_"),items:Array.from({length:as(1,5)},()=>({productId:zi("prod_"),quantity:as(1,10),price:as(1e3,5e4)})),total:as(1e4,5e5),status:Bs(a$e),shippingAddress:` ${Bs(["","","",""])}`,createdAt:ff(Wg(1))})),A$e=t=>Array.from({length:t},(e,n)=>({id:zi("eng_"),projectId:zi("proj_"),name:` ${n+1}`,code:`ENG-${String(n+1).padStart(4,"0")}`,version:`v${as(1,5)}.${as(0,9)}`,status:Bs(["","","","",""]),manufacturer:Bs(["","LG","SDI","",""]),specifications:{power:`${as(50,500)}kW`,weight:`${as(100,1e3)}kg`,dimensions:`${as(50,200)}x${as(50,200)}x${as(50,200)}cm`},createdAt:ff(Wg(2))})),y$e=t=>Array.from({length:t},(e,n)=>({id:zi("comp_"),engineId:zi("eng_"),parentId:n>5?zi("comp_"):null,name:` ${n+1}`,code:`COMP-${String(n+1).padStart(4,"0")}`,type:Bs(["assembly","part"]),level:as(0,5),orderIndex:n+1,quantity:as(1,100),unit:Bs(["EA","SET","M","KG","L"]),supplier:Bs(["","","","",""]),cost:as(100,1e4),leadTime:as(1,30),status:Bs(["","","",""])})),v$e=t=>Array.from({length:t},(e,n)=>({id:zi("log_"),actorUserId:zi("usr_"),organizationId:zi("org_"),entityType:Bs(["user","project","organization","department"]),entityId:zi(),action:Bs(["","",""," ",""]),description:` ${n+1}  `,timestamp:ff(Wg(1)),ipAddress:`${as(1,255)}.${as(1,255)}.${as(1,255)}.${as(1,255)}`})),x$e=t=>Array.from({length:t},()=>({id:zi("mem_"),projectId:zi("proj_"),userId:zi("usr_"),roleId:zi("role_"),allocation:as(10,100),billable:Math.random()>.3,joinedAt:ff(Wg(2)),lastActiveAt:ff(Wg(.5))})),b$e={users:{id:"users",name:"Users",description:"  ",category:"users-auth",icon:"User",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"num",type:"number",label:""},{key:"name",type:"string",label:"",required:!0},{key:"email",type:"email",label:"",required:!0},{key:"phone",type:"string",label:""},{key:"company",type:"string",label:""},{key:"role",type:"string",label:""},{key:"status",type:"string",label:""},{key:"jobLevel",type:"string",label:""},{key:"createdAt",type:"datetime",label:""}],generateSampleData:o$e,defaultSampleCount:10},roles:{id:"roles",name:"Roles",description:"    ",category:"users-auth",icon:"Key",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"name",type:"string",label:"",required:!0},{key:"description",type:"string",label:""},{key:"scope",type:"string",label:""},{key:"permissionIds",type:"array",label:" "}],generateSampleData:l$e,defaultSampleCount:5},permissions:{id:"permissions",name:"Permissions",description:"  ",category:"users-auth",icon:"Lock",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"name",type:"string",label:"",required:!0},{key:"description",type:"string",label:""},{key:"category",type:"string",label:""}],generateSampleData:c$e,defaultSampleCount:10},invitations:{id:"invitations",name:"Invitations",description:"  ",category:"users-auth",icon:"Mail",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"email",type:"email",label:"",required:!0},{key:"roleId",type:"string",label:" ID"},{key:"inviterUserId",type:"string",label:" ID"},{key:"status",type:"string",label:""},{key:"expiresAt",type:"datetime",label:""},{key:"createdAt",type:"datetime",label:""}],generateSampleData:u$e,defaultSampleCount:5},organizations:{id:"organizations",name:"Organizations",description:"/ ",category:"organization",icon:"Building2",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"name",type:"string",label:"",required:!0},{key:"industry",type:"string",label:""},{key:"domain",type:"string",label:""},{key:"plan",type:"string",label:""},{key:"createdAt",type:"datetime",label:""}],generateSampleData:d$e,defaultSampleCount:5},departments:{id:"departments",name:"Departments",description:" ",category:"organization",icon:"Layers",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"organizationId",type:"string",label:" ID"},{key:"name",type:"string",label:"",required:!0},{key:"description",type:"string",label:""},{key:"managerUserId",type:"string",label:" ID"}],generateSampleData:h$e,defaultSampleCount:8},projects:{id:"projects",name:"Projects",description:" ",category:"organization",icon:"Folder",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"organizationId",type:"string",label:" ID"},{key:"departmentId",type:"string",label:" ID"},{key:"name",type:"string",label:"",required:!0},{key:"status",type:"string",label:""},{key:"startDate",type:"date",label:""},{key:"endDate",type:"date",label:""},{key:"budget",type:"number",label:""},{key:"clientName",type:"string",label:""},{key:"visibility",type:"string",label:""}],generateSampleData:f$e,defaultSampleCount:10},products:{id:"products",name:"Products",description:" ",category:"ecommerce",icon:"Package",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"name",type:"string",label:"",required:!0},{key:"price",type:"number",label:""},{key:"stock",type:"number",label:""},{key:"category",type:"string",label:""},{key:"description",type:"string",label:""},{key:"imageUrl",type:"url",label:""},{key:"isActive",type:"boolean",label:""},{key:"createdAt",type:"datetime",label:""}],generateSampleData:p$e,defaultSampleCount:20},categories:{id:"categories",name:"Categories",description:" ",category:"ecommerce",icon:"Tag",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"name",type:"string",label:"",required:!0},{key:"parentId",type:"string",label:"  ID"},{key:"description",type:"string",label:""},{key:"order",type:"number",label:""},{key:"isActive",type:"boolean",label:""}],generateSampleData:g$e,defaultSampleCount:10},orders:{id:"orders",name:"Orders",description:" ",category:"ecommerce",icon:"ShoppingCart",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"userId",type:"string",label:" ID"},{key:"items",type:"array",label:" "},{key:"total",type:"number",label:""},{key:"status",type:"string",label:""},{key:"shippingAddress",type:"string",label:""},{key:"createdAt",type:"datetime",label:""}],generateSampleData:m$e,defaultSampleCount:15},engines:{id:"engines",name:"Engines",description:"/ ",category:"manufacturing",icon:"Cpu",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"projectId",type:"string",label:" ID"},{key:"name",type:"string",label:"",required:!0},{key:"code",type:"string",label:""},{key:"version",type:"string",label:""},{key:"status",type:"string",label:""},{key:"manufacturer",type:"string",label:""},{key:"specifications",type:"object",label:""},{key:"createdAt",type:"datetime",label:""}],generateSampleData:A$e,defaultSampleCount:5},components:{id:"components",name:"Components",description:" (BOM) ",category:"manufacturing",icon:"Wrench",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"engineId",type:"string",label:" ID"},{key:"parentId",type:"string",label:"  ID"},{key:"name",type:"string",label:"",required:!0},{key:"code",type:"string",label:" "},{key:"type",type:"string",label:""},{key:"level",type:"number",label:""},{key:"quantity",type:"number",label:""},{key:"unit",type:"string",label:""},{key:"supplier",type:"string",label:""},{key:"cost",type:"number",label:""},{key:"leadTime",type:"number",label:" ()"},{key:"status",type:"string",label:""}],generateSampleData:y$e,defaultSampleCount:20},auditLogs:{id:"auditLogs",name:"Audit Logs",description:"  ",category:"system",icon:"FileText",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"actorUserId",type:"string",label:" ID"},{key:"organizationId",type:"string",label:" ID"},{key:"entityType",type:"string",label:" "},{key:"entityId",type:"string",label:" ID"},{key:"action",type:"string",label:""},{key:"description",type:"string",label:""},{key:"timestamp",type:"datetime",label:""},{key:"ipAddress",type:"string",label:"IP "}],generateSampleData:v$e,defaultSampleCount:20},projectMemberships:{id:"projectMemberships",name:"Project Memberships",description:"  ",category:"system",icon:"Users",schema:[{key:"id",type:"string",label:"ID",required:!0},{key:"projectId",type:"string",label:" ID"},{key:"userId",type:"string",label:" ID"},{key:"roleId",type:"string",label:" ID"},{key:"allocation",type:"number",label:" (%)"},{key:"billable",type:"boolean",label:" "},{key:"joinedAt",type:"datetime",label:""},{key:"lastActiveAt",type:"datetime",label:" "}],generateSampleData:x$e,defaultSampleCount:15}};function C$e(t){return Object.values(b$e).filter(e=>e.category===t)}const E$e={User:Zye,Key:N0e,Lock:W0e,Mail:X0e,Building2:eY,Layers:x_,Folder:bT,Package:mY,Tag:jM,ShoppingCart:AY,Cpu:wx,Wrench:ave,FileText:D8,Users:F8,Database:qo,Settings:gf,Factory:lY},S$e={"users-auth":F8,organization:eY,ecommerce:AY,manufacturing:lY,system:gf};function w$e({projectId:t,onClose:e,mode:n}){const r=Oi(E=>E.createDataTable),[i,s]=C.useState("users-auth"),[a,o]=C.useState(null),[l,c]=C.useState(10),[u,h]=C.useState(""),f=C.useMemo(()=>C$e(i),[i]),p=C.useCallback(E=>{s(E),o(null)},[]),m=C.useCallback(E=>{o(E),c(E.defaultSampleCount)},[]),v=C.useCallback(async()=>{try{if(n==="empty"){const E=u.trim()||"New Table";await r({name:E,project_id:t,schema:[],mockData:[],useMockData:!0})}else if(a){const E=a.generateSampleData(l);await r({name:a.name,project_id:t,schema:a.schema,mockData:E,useMockData:!0})}e()}catch(E){console.error("DataTable  :",E)}},[n,u,a,l,t,r,e]),A=(E,w=20)=>{const B=E$e[E];return B?d.jsx(B,{size:w}):d.jsx(qo,{size:w})},x=(E,w=16)=>{const B=S$e[E];return B?d.jsx(B,{size:w}):d.jsx(qo,{size:w})};return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"section","data-section-id":"table-creator",children:n==="empty"?d.jsxs("div",{className:"creator-empty-form",children:[d.jsxs("label",{className:"creator-form-label",children:[" ",d.jsx("input",{type:"text",className:"creator-form-input",value:u,onChange:E=>h(E.target.value),placeholder:"New Table"})]}),d.jsx("p",{className:"creator-form-hint",children:"    Schema     ."})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"section-tabs",children:Jze.map(E=>d.jsxs("button",{type:"button",className:`section-tab ${i===E.id?"active":""}`,onClick:()=>p(E.id),title:E.description,children:[x(E.id),d.jsx("span",{children:E.name})]},E.id))}),d.jsx("div",{className:"section-content",children:d.jsx("div",{className:"list-group",role:"list",children:f.map(E=>d.jsxs("button",{type:"button",role:"listitem",className:`list-item preset-card ${a?.id===E.id?"selected":""}`,onClick:()=>m(E),children:[d.jsx("div",{className:"list-item-icon",children:A(E.icon,16)}),d.jsx("div",{className:"list-item-name",children:E.name}),d.jsx("div",{className:"list-item-desc",children:E.description}),d.jsxs("div",{className:"list-item-meta",children:[E.schema.length," fields"]})]},E.id))})})]})}),n==="preset"&&a&&d.jsxs("div",{className:"section","data-section-id":"schema-preview",children:[d.jsx(jI,{icon:A(a.icon,16),title:`${a.name} Schema`,actions:d.jsxs("div",{className:"creator-sample-count",children:[d.jsx("label",{htmlFor:"sample-count",children:"row count"}),d.jsx("input",{id:"sample-count","aria-label":"row count","aria-required":"true","aria-invalid":"false",type:"number",min:"0",max:"100",value:l,onChange:E=>c(Math.max(0,Math.min(100,parseInt(E.target.value)||0)))})]})}),d.jsx("div",{className:"section-content",children:a.schema.map(E=>d.jsxs("div",{className:"creator-schema-field",children:[d.jsxs("span",{className:"schema-field-name",children:[E.key,E.required&&d.jsx("span",{className:"schema-field-required",children:"*"})]}),d.jsx("span",{className:"schema-field-type",children:E.type}),d.jsx("span",{className:"schema-field-label",children:E.label})]},E.key))})]}),d.jsxs("div",{className:"creator-footer",children:[d.jsx(en,{className:"react-aria-Button secondary",onPress:e,children:""}),d.jsx(en,{className:"react-aria-Button primary",onPress:v,isDisabled:n==="preset"&&!a,children:n==="empty"?"  ":""})]})]})}function _$e({columns:t,onColumnsChange:e,onImport:n,isImporting:r=!1,defaultTableName:i=""}){const[s,a]=C.useState(i),o=t.filter(v=>v.selected).length,l=o===t.length,c=o===0,u=C.useCallback(v=>{const A=t.map(x=>x.key===v?{...x,selected:!x.selected}:x);e(A)},[t,e]),h=C.useCallback(()=>{const v=!l,A=t.map(x=>({...x,selected:v}));e(A)},[t,l,e]),f=C.useCallback(()=>{c||!s.trim()||n(t,s.trim())},[t,s,c,n]),p=v=>v==null?"null":typeof v=="string"?v.length>30?`"${v.slice(0,30)}..."`:`"${v}"`:typeof v=="object"?JSON.stringify(v).slice(0,30)+"...":String(v),m=v=>{switch(v){case"string":return"type-string";case"number":return"type-number";case"boolean":return"type-boolean";case"date":case"datetime":return"type-date";case"email":return"type-email";case"url":case"image":return"type-url";case"array":case"object":return"type-complex";default:return""}};return d.jsxs("div",{className:"column-selector",children:[d.jsxs("div",{className:"column-selector-header",children:[d.jsxs("h4",{className:"column-selector-title",children:[d.jsx(C_,{size:16}),"Detected Columns"]}),d.jsxs("span",{className:"column-selector-count",children:[o," / ",t.length," selected"]})]}),d.jsx("div",{className:"column-selector-actions",children:d.jsxs(en,{className:"toggle-all-btn",onPress:h,children:[l?d.jsx(tye,{size:16}):d.jsx(Ny,{size:16}),l?"Deselect All":"Select All"]})}),d.jsx("div",{className:"column-list",children:t.map(v=>d.jsxs("div",{className:`column-item ${v.selected?"selected":""}`,onClick:()=>u(v.key),children:[d.jsx("div",{className:"column-checkbox",children:v.selected?d.jsx(nY,{size:14,className:"check-icon"}):d.jsx("div",{className:"empty-checkbox"})}),d.jsxs("div",{className:"column-info",children:[d.jsx("div",{className:"column-key",children:v.key}),d.jsxs("div",{className:"column-meta",children:[d.jsx("span",{className:`type-badge ${m(v.type)}`,children:v.type}),d.jsx("span",{className:"sample-value",children:p(v.sampleValue)})]})]})]},v.key))}),d.jsxs("div",{className:"import-section",children:[d.jsxs("div",{className:"import-input-row",children:[d.jsx("label",{className:"import-label",children:"DataTable Name"}),d.jsx("input",{type:"text",className:"import-input",value:s,onChange:v=>a(v.target.value),placeholder:"e.g., users_api"})]}),d.jsxs(en,{className:"import-btn",onPress:f,isDisabled:c||!s.trim()||r,children:[d.jsx(LM,{size:14}),r?"Importing...":`Import ${o} Columns`]})]})]})}function I$e(t){return t==null?"string":typeof t=="boolean"?"boolean":typeof t=="number"?"number":Array.isArray(t)?"array":typeof t=="object"?"object":typeof t=="string"?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?"email":/^https?:\/\/.+/.test(t)?"url":/\.(jpg|jpeg|png|gif|webp|svg|bmp)(\?.*)?$/i.test(t)?"image":/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}/.test(t)?"datetime":/^\d{4}-\d{2}-\d{2}$/.test(t)?"date":"string":"string"}function B$e(t){return t.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b\w/g,e=>e.toUpperCase())}function T$e(t){if(!Array.isArray(t)||t.length===0)return[];const e=t[0];if(typeof e!="object"||e===null)return[];const n=[],r=Object.keys(e);for(const i of r){let s="string",a=null;for(let o=0;o<Math.min(t.length,5);o++){const c=t[o][i];if(c!=null&&(a=c,s=I$e(c),s!=="string"))break}n.push({key:i,label:B$e(i),type:s,sampleValue:a,selected:!0})}return n}function M$e(t){return t.filter(e=>e.selected).map(e=>({key:e.key,type:e.type,label:e.label,required:!1}))}function D$e(t,e){return Array.isArray(t)?t.map(n=>{const r={},i=n;for(const s of e)s in i&&(r[s]=i[s]);return r}):[]}const R$e=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"PATCH",label:"PATCH"},{value:"DELETE",label:"DELETE"}];function P$e({endpoint:t,onClose:e,activeTab:n}){const r=Oi(R=>R.updateApiEndpoint),i=Oi(R=>R.executeApiEndpoint),s=Oi(R=>R.createDataTable),[a,o]=C.useState(new Set(["headers","queryParams"])),[l,c]=C.useState(null),[u,h]=C.useState(!1),[f,p]=C.useState([]),[m,v]=C.useState(!1),A=C.useRef(!1),x=C.useCallback(async R=>{try{await r(t.id,R)}catch(k){console.error("API Endpoint  :",k)}},[t.id,r]),E=C.useCallback(()=>{const R={...t.headers,"":""};x({headers:R})},[t.headers,x]),w=C.useCallback((R,k,L)=>{const F={...t.headers};R!==k&&delete F[R],F[k]=L,x({headers:F})},[t.headers,x]),B=C.useCallback(R=>{const k={...t.headers};delete k[R],x({headers:k})},[t.headers,x]);C.useCallback(()=>{const R={...t.queryParams,"":""};x({queryParams:R})},[t.queryParams,x]),C.useCallback((R,k,L)=>{const F={...t.queryParams};R!==k&&delete F[R],F[k]=L,x({queryParams:F})},[t.queryParams,x]),C.useCallback(R=>{const k={...t.queryParams};delete k[R],x({queryParams:k})},[t.queryParams,x]);const D=C.useCallback(async()=>{const R=t.responseMapping;h(!0),c(null),p([]);try{const k=await i(t.id);console.log(" API result:",{result:k,resultType:typeof k,dataPath:t.responseMapping?.dataPath}),c({success:!0,data:k});let L=k;if(!Array.isArray(L)&&typeof L=="object"&&L!==null){const z=["results","data","items","records","list","rows","entries"];for(const G of z){const V=L[G];if(Array.isArray(V)&&V.length>0){console.log(` Auto-detected array field: "${G}" with ${V.length} items`),L=V,R?.dataPath||(console.log(` Auto-setting dataPath to "${G}"`),x({responseMapping:{...R,dataPath:G}}));break}}}console.log(" Column detection - dataToAnalyze:",{isArray:Array.isArray(L),type:typeof L,length:Array.isArray(L)?L.length:"N/A"});const F=T$e(L);console.log(" Detected columns:",F),p(F)}catch(k){c({success:!1,data:k.message})}finally{h(!1)}},[t.id,t.responseMapping,i,x]);C.useEffect(()=>{n==="run"&&!A.current&&!u&&(A.current=!0,D())},[n,D,u]);const T=C.useCallback(async(R,k)=>{v(!0);try{const L=M$e(R),F=R.filter(V=>V.selected).map(V=>V.key);let z=l?.data;if(!Array.isArray(z)&&typeof z=="object"&&z!==null){const V=["results","data","items","records","list","rows","entries"];for(const q of V){const O=z[q];if(Array.isArray(O)&&O.length>0){console.log(` handleImport: Auto-detected array field "${q}"`),z=O;break}}}console.log(" handleImport: dataToImport",{isArray:Array.isArray(z),length:Array.isArray(z)?z.length:0,selectedKeys:F});const G=D$e(z,F);console.log(" handleImport: mockData extracted",{mockDataLength:G.length,firstItem:G[0]}),await s({name:k,project_id:t.project_id,schema:L,mockData:G,useMockData:!1}),console.log(` DataTable "${k}"   (${L.length} , ${G.length} )`),alert(`DataTable "${k}"() .
${L.length} , ${G.length} `),p([])}catch(L){console.error(" DataTable Import :",L),alert(`Import : ${L.message}`)}finally{v(!1)}},[l?.data,t.project_id,s]),M=R=>{o(k=>{const L=new Set(k);return L.has(R)?L.delete(R):L.add(R),L})};return d.jsxs(d.Fragment,{children:[n==="basic"&&d.jsx(k$e,{endpoint:t,onUpdate:x}),n==="headers"&&d.jsx(L$e,{title:"Headers",description:"HTTP  . {{}}     .",items:t.headers||{},expandedSections:a,onToggleSection:M,onAdd:E,onUpdate:w,onDelete:B,sectionKey:"headers"}),n==="body"&&d.jsx(F$e,{endpoint:t,onUpdate:x}),n==="response"&&d.jsx(j$e,{endpoint:t,onUpdate:x}),n==="run"&&d.jsx(z$e,{endpoint:t,testResult:l,isExecuting:u,onTest:D,detectedColumns:f,onColumnsChange:p,onImport:T,isImporting:m})]})}function k$e({endpoint:t,onUpdate:e}){return d.jsxs("div",{className:"basic-editor",children:[d.jsx(Il,{label:"Method",value:t.method,onChange:n=>e({method:n}),options:R$e}),d.jsx(Za,{label:"Base URL",value:t.baseUrl||"",onChange:n=>e({baseUrl:n}),placeholder:"https://api.example.com"}),d.jsx(Za,{label:"Endpoint",value:t.endpoint,onChange:n=>e({endpoint:n}),placeholder:"/users/{{userId}}"}),d.jsx(Hd,{label:"Authentication Required",isSelected:t.authRequired||!1,onChange:n=>e({authRequired:n})}),t.authRequired&&d.jsx(Za,{label:"Auth Header",value:t.authHeader||"",onChange:n=>e({authHeader:n}),placeholder:"Bearer {{accessToken}}"}),d.jsx("div",{className:"section-divider"}),d.jsx("h4",{className:"section-title",children:"Query Parameters"}),d.jsx(N$e,{endpoint:t,onUpdate:e})]})}function N$e({endpoint:t,onUpdate:e}){const n=t.queryParams||{},r=Object.entries(n),i=()=>{const l={...n,"":""};e({queryParams:l})},s=(l,c)=>{const u={...n},h=u[l];delete u[l],u[c]=h,e({queryParams:u})},a=(l,c)=>{const u={...n,[l]:c};e({queryParams:u})},o=l=>{const c={...n};delete c[l],e({queryParams:c})};return d.jsxs("div",{className:"query-params-editor",children:[r.map(([l,c],u)=>d.jsxs("div",{className:"kv-row",children:[d.jsx("input",{type:"text",className:"kv-input key",value:l,onChange:h=>s(l,h.target.value),placeholder:"key"}),d.jsx("input",{type:"text",className:"kv-input value",value:c,onChange:h=>a(l,h.target.value),placeholder:"value or {{variable}}"}),d.jsx("button",{type:"button",className:"kv-delete",onClick:()=>o(l),children:d.jsx(pu,{size:12})})]},u)),d.jsxs("button",{type:"button",className:"add-kv-btn",onClick:i,children:[d.jsx(Pc,{size:14}),"Add Parameter"]})]})}function L$e({title:t,description:e,items:n,expandedSections:r,onToggleSection:i,onAdd:s,onUpdate:a,onDelete:o,sectionKey:l}){const c=Object.entries(n),u=r.has(l);return d.jsxs("div",{className:"kv-editor",children:[d.jsxs("div",{className:"kv-section-header",onClick:()=>i(l),children:[u?d.jsx(zs,{size:14}):d.jsx(Sl,{size:14}),d.jsx("span",{className:"kv-section-title",children:t}),d.jsx("span",{className:"kv-section-count",children:c.length})]}),u&&d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"kv-description",children:e}),d.jsx("div",{className:"kv-list",children:c.map(([h,f],p)=>d.jsxs("div",{className:"kv-row",children:[d.jsx("input",{type:"text",className:"kv-input key",value:h,onChange:m=>a(h,m.target.value,f),placeholder:"Header Name"}),d.jsx("input",{type:"text",className:"kv-input value",value:f,onChange:m=>a(h,h,m.target.value),placeholder:"Value or {{variable}}"}),d.jsx("button",{type:"button",className:"kv-delete",onClick:()=>o(h),children:d.jsx(pu,{size:12})})]},p))}),d.jsxs("button",{type:"button",className:"add-kv-btn",onClick:s,children:[d.jsx(Pc,{size:14}),"Add ",t.slice(0,-1)]})]})]})}function F$e({endpoint:t,onUpdate:e}){const n=t.body?JSON.stringify(t.body,null,2):"",r=i=>{try{const s=i?JSON.parse(i):void 0;e({body:s})}catch{}};return d.jsxs("div",{className:"body-editor",children:[d.jsxs("p",{className:"editor-description",children:["POST/PUT/PATCH   JSON  .",d.jsx("br",{}),"{{}}     ."]}),d.jsx("textarea",{className:"body-textarea",value:n,onChange:i=>r(i.target.value),placeholder:'{"key": "value", "userId": "{{userId}}"}',rows:10})]})}function j$e({endpoint:t,onUpdate:e}){const n=Oi(l=>l.executeApiEndpoint),[r,i]=C.useState(!1),[s,a]=C.useState(null),o=async()=>{i(!0),a(null);try{const l=await n(t.id);if(l&&typeof l=="object"&&!Array.isArray(l)){const c=["results","data","items","records","list","rows","entries","content","hits"];for(const u of c){const h=l[u];if(Array.isArray(h)&&h.length>0){e({responseMapping:{...t.responseMapping,dataPath:u}}),a(` "${u}"  (${h.length} )`);return}}a("     ")}else Array.isArray(l)?a("    (dataPath )"):a("     ")}catch(l){a(` API  : ${l.message}`)}finally{i(!1)}};return d.jsxs("div",{className:"response-editor",children:[d.jsxs("div",{className:"field-with-action",children:[d.jsx(Za,{label:"Data Path",value:t.responseMapping?.dataPath||"",onChange:l=>e({responseMapping:{...t.responseMapping,dataPath:l}}),placeholder:"results, data.items"}),d.jsxs("button",{type:"button",className:"auto-detect-btn",onClick:o,disabled:r,title:"API     ",children:[d.jsx(rve,{size:14}),r?" ...":" "]})]}),s&&d.jsx("p",{className:`detect-result ${s.startsWith("")?"success":s.startsWith("")?"warning":"error"}`,children:s}),d.jsx("p",{className:"field-description",children:" JSON    . (: results, data.items)"}),d.jsx(Za,{label:"Target DataTable",value:t.targetDataTable||"",onChange:l=>e({targetDataTable:l}),placeholder:"pokemon_list"}),d.jsx("p",{className:"field-description",children:"API    DataTable . Test  Import   ."}),d.jsx("div",{className:"section-divider"}),d.jsx("h4",{className:"section-title",children:"Field Mapping"}),d.jsx("p",{className:"field-description",children:"API   DataTable  ."}),d.jsx(O$e,{endpoint:t,onUpdate:e})]})}function O$e({endpoint:t,onUpdate:e}){const n=t.responseMapping?.fieldMapping||{},r=Object.entries(n),i=()=>{const o={...n,"":""};e({responseMapping:{...t.responseMapping,fieldMapping:o}})},s=(o,l,c)=>{const u={...n};o!==l&&delete u[o],u[l]=c,e({responseMapping:{...t.responseMapping,fieldMapping:u}})},a=o=>{const l={...n};delete l[o],e({responseMapping:{...t.responseMapping,fieldMapping:l}})};return d.jsxs("div",{className:"field-mapping-editor",children:[d.jsx("div",{className:"kv-list",children:r.map(([o,l],c)=>d.jsxs("div",{className:"kv-row",children:[d.jsx("input",{type:"text",className:"kv-input key",value:o,onChange:u=>s(o,u.target.value,l),placeholder:"API Field"}),d.jsx("span",{className:"kv-arrow",children:""}),d.jsx("input",{type:"text",className:"kv-input value",value:l,onChange:u=>s(o,o,u.target.value),placeholder:"DataTable Field"}),d.jsx("button",{type:"button",className:"kv-delete",onClick:()=>a(o),children:d.jsx(pu,{size:12})})]},c))}),d.jsxs("button",{type:"button",className:"add-kv-btn",onClick:i,children:[d.jsx(Pc,{size:14}),"Add Mapping"]})]})}function z$e({endpoint:t,testResult:e,isExecuting:n,onTest:r,detectedColumns:i,onColumnsChange:s,onImport:a,isImporting:o}){return d.jsxs("div",{className:"test-editor",children:[d.jsxs("div",{className:"test-info",children:[d.jsx("span",{className:`method-badge ${t.method.toLowerCase()}`,children:t.method}),d.jsxs("span",{className:"test-url",children:[t.baseUrl,t.endpoint]})]}),d.jsxs("button",{type:"button",className:"test-btn",onClick:r,disabled:n,children:[d.jsx(NE,{size:14}),n?"Executing...":"Execute Request"]}),e&&d.jsxs("div",{className:`test-result ${e.success?"success":"error"}`,children:[d.jsx("div",{className:"result-header",children:e.success?" Success":" Error"}),d.jsx("pre",{className:"result-data",children:typeof e.data=="string"?e.data:JSON.stringify(e.data,null,2)})]}),e?.success&&i.length>0&&d.jsx(_$e,{columns:i,onColumnsChange:s,onImport:a,isImporting:o,defaultTableName:t.targetDataTable||""})]})}const $$e=[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"boolean",label:"Boolean"},{value:"object",label:"Object"},{value:"array",label:"Array"}],Q$e=[{value:"global",label:"Global"},{value:"page",label:"Page"},{value:"component",label:"Component"}];function U$e({variable:t,onClose:e,activeTab:n}){const r=Oi(l=>l.updateVariable),[i,s]=C.useState(new Set(["validation"])),a=C.useCallback(async l=>{try{await r(t.id,l)}catch(c){console.error("Variable  :",c)}},[t.id,r]),o=l=>{s(c=>{const u=new Set(c);return u.has(l)?u.delete(l):u.add(l),u})};return d.jsxs(d.Fragment,{children:[n==="basic"&&d.jsx(H$e,{variable:t,onUpdate:a}),n==="validation"&&d.jsx(G$e,{variable:t,onUpdate:a,expandedSections:i,onToggleSection:o}),n==="transform"&&d.jsx(V$e,{variable:t,onUpdate:a})]})}function H$e({variable:t,onUpdate:e}){const n=W$e(t.defaultValue,t.type),r=i=>{const s=K$e(i,t.type);e({defaultValue:s})};return d.jsxs("div",{className:"basic-editor",children:[d.jsx(Il,{label:"Type",value:t.type,onChange:i=>e({type:i}),options:$$e}),d.jsx(Il,{label:"Scope",value:t.scope,onChange:i=>e({scope:i}),options:Q$e}),d.jsxs("p",{className:"field-description",children:[t.scope==="global"&&"   .",t.scope==="page"&&"   .",t.scope==="component"&&"    ."]}),d.jsx("div",{className:"section-divider"}),d.jsx("h4",{className:"section-title",children:"Default Value"}),t.type==="boolean"?d.jsx(Hd,{label:"Default Value",isSelected:!!t.defaultValue,onChange:i=>e({defaultValue:i})}):t.type==="object"||t.type==="array"?d.jsx("div",{className:"json-editor-wrapper",children:d.jsx("textarea",{className:"json-textarea",value:n,onChange:i=>r(i.target.value),placeholder:t.type==="array"?"[]":"{}",rows:6})}):d.jsx(Za,{label:"Default Value",value:n,onChange:r,placeholder:t.type==="number"?"0":""}),d.jsx("div",{className:"section-divider"}),d.jsx(Hd,{label:"Persist to localStorage",isSelected:t.persist||!1,onChange:i=>e({persist:i})}),d.jsx("p",{className:"field-description",children:"    ."})]})}function G$e({variable:t,onUpdate:e,expandedSections:n,onToggleSection:r}){const i=t.validation||{},s=n.has("validation"),a=o=>{e({validation:{...i,...o}})};return d.jsxs("div",{className:"validation-editor",children:[d.jsxs("div",{className:"section-header",onClick:()=>r("validation"),children:[s?d.jsx(zs,{size:14}):d.jsx(Sl,{size:14}),d.jsx("span",{className:"section-header-title",children:"Validation Rules"})]}),s&&d.jsxs("div",{className:"validation-content",children:[d.jsx(Hd,{label:"Required",isSelected:i.required||!1,onChange:o=>a({required:o})}),t.type==="string"&&d.jsxs(d.Fragment,{children:[d.jsx(Za,{label:"Min Length",value:String(i.minLength??""),onChange:o=>a({minLength:o?Number(o):void 0}),placeholder:"0"}),d.jsx(Za,{label:"Max Length",value:String(i.maxLength??""),onChange:o=>a({maxLength:o?Number(o):void 0}),placeholder:"255"}),d.jsx(Za,{label:"Pattern (Regex)",value:i.pattern||"",onChange:o=>a({pattern:o||void 0}),placeholder:"^[a-zA-Z]+$"})]}),t.type==="number"&&d.jsxs(d.Fragment,{children:[d.jsx(Za,{label:"Min Value",value:String(i.min??""),onChange:o=>a({min:o?Number(o):void 0}),placeholder:"0"}),d.jsx(Za,{label:"Max Value",value:String(i.max??""),onChange:o=>a({max:o?Number(o):void 0}),placeholder:"100"})]}),(t.type==="array"||t.type==="object")&&d.jsx(Za,{label:"JSON Schema",value:i.schema||"",onChange:o=>a({schema:o||void 0}),placeholder:"JSON Schema URL or inline schema"})]})]})}function V$e({variable:t,onUpdate:e}){return d.jsxs("div",{className:"transform-editor",children:[d.jsxs("p",{className:"editor-description",children:["     .",d.jsx("br",{})," (value, context) => transformedValue ."]}),d.jsxs("div",{className:"transform-input-wrapper",children:[d.jsx("span",{className:"transform-prefix",children:"(value, context) => {"}),d.jsx("textarea",{className:"transform-textarea",value:t.transform||"",onChange:n=>e({transform:n.target.value||void 0}),placeholder:"return value.trim().toUpperCase();",rows:8}),d.jsx("span",{className:"transform-suffix",children:"}"})]}),d.jsxs("div",{className:"transform-examples",children:[d.jsx("h5",{className:"examples-title",children:"Examples"}),d.jsxs("div",{className:"example-list",children:[d.jsxs("div",{className:"example-item",children:[d.jsx("code",{className:"example-code",children:"return value.trim();"}),d.jsx("span",{className:"example-desc",children:"   "})]}),d.jsxs("div",{className:"example-item",children:[d.jsx("code",{className:"example-code",children:"return Math.max(0, Math.min(100, value));"}),d.jsx("span",{className:"example-desc",children:"0-100  "})]}),d.jsxs("div",{className:"example-item",children:[d.jsxs("code",{className:"example-code",children:["return value.filter(x =",">"," x !== null);"]}),d.jsx("span",{className:"example-desc",children:" null "})]})]})]})]})}function W$e(t,e){if(t==null)return"";switch(e){case"object":case"array":return JSON.stringify(t,null,2);default:return String(t)}}function K$e(t,e){if(t)switch(e){case"number":return Number(t)||0;case"boolean":return t==="true";case"object":case"array":try{return JSON.parse(t)}catch{return e==="array"?[]:{}}default:return t}}const q$e=[{id:"schema",label:"Schema",icon:qo},{id:"data",label:"Table",icon:C_},{id:"settings",label:"Settings",icon:gf}],Y$e=[{id:"basic",label:"Basic",icon:gf},{id:"headers",label:"Headers",icon:dI},{id:"body",label:"Body",icon:WO},{id:"response",label:"Response",icon:WO},{id:"run",label:"Run",icon:NE}],X$e=[{id:"basic",label:"Basic",icon:gf},{id:"validation",label:"Validation",icon:GAe},{id:"transform",label:"Transform",icon:dI}];function J$e({mode:t,close:e}){const[n,r]=C.useState("schema"),[i,s]=C.useState(t.type==="api-edit"&&t.initialTab?t.initialTab:"basic"),[a,o]=C.useState("basic"),[l,c]=C.useState("preset"),u=Oi(D=>D.dataTables),h=Oi(D=>D.apiEndpoints),f=Oi(D=>D.variables),p=Oi(D=>D.transformers),m=C.useMemo(()=>Array.from(u.values()),[u]),v=C.useMemo(()=>Array.from(h.values()),[h]),A=C.useMemo(()=>Array.from(f.values()),[f]),x=C.useMemo(()=>Array.from(p.values()),[p]),E=()=>{switch(t.type){case"table-create":return"Data Table Creator";case"table-edit":return m.find(T=>T.id===t.tableId)?.name||"Table Editor";case"api-create":return"New API";case"api-edit":return v.find(T=>T.id===t.endpointId)?.name||"API Editor";case"variable-create":return"New Variable";case"variable-edit":return A.find(T=>T.id===t.variableId)?.name||"Variable Editor";case"transformer-create":return"New Transformer";case"transformer-edit":return x.find(T=>T.id===t.transformerId)?.name||"Transformer Editor";default:return"Editor"}},w=()=>{switch(t.type){case"table-edit":return d.jsx("div",{className:"panel-tabs",children:q$e.map(D=>d.jsxs("button",{type:"button",className:`panel-tab ${n===D.id?"active":""}`,onClick:()=>r(D.id),children:[d.jsx(D.icon,{size:14}),d.jsx("span",{children:D.label})]},D.id))});case"api-edit":return d.jsx("div",{className:"panel-tabs",children:Y$e.map(D=>d.jsxs("button",{type:"button",className:`panel-tab ${i===D.id?"active":""}`,onClick:()=>s(D.id),children:[d.jsx(D.icon,{size:14}),d.jsx("span",{children:D.label})]},D.id))});case"variable-edit":return d.jsx("div",{className:"panel-tabs",children:X$e.map(D=>d.jsxs("button",{type:"button",className:`panel-tab ${a===D.id?"active":""}`,onClick:()=>o(D.id),children:[d.jsx(D.icon,{size:14}),d.jsx("span",{children:D.label})]},D.id))});case"table-create":return d.jsxs("div",{className:"panel-selection",children:[d.jsxs("label",{className:"panel-option",children:[d.jsx("input",{type:"radio",name:"creatorMode",checked:l==="empty",onChange:()=>c("empty")}),"  "]}),d.jsxs("label",{className:"panel-option",children:[d.jsx("input",{type:"radio",name:"creatorMode",checked:l==="preset",onChange:()=>c("preset")}),"Preset "]})]});case"api-create":case"variable-create":case"transformer-create":case"transformer-edit":default:return null}},B=()=>{switch(t.type){case"table-create":return d.jsx(w$e,{projectId:t.projectId,onClose:e,mode:l});case"table-edit":{const D=m.find(T=>T.id===t.tableId);return D?d.jsx(Gze,{dataTable:D,onClose:e,activeTab:n}):d.jsx(Ko,{message:"   "})}case"api-create":return d.jsx(Ko,{message:"API    "});case"api-edit":{const D=v.find(T=>T.id===t.endpointId);return D?d.jsx(P$e,{endpoint:D,onClose:e,activeTab:i}):d.jsx(Ko,{message:"API   "})}case"variable-create":return d.jsx(Ko,{message:"    "});case"variable-edit":{const D=A.find(T=>T.id===t.variableId);return D?d.jsx(U$e,{variable:D,onClose:e,activeTab:a}):d.jsx(Ko,{message:"   "})}case"transformer-create":return d.jsx(Ko,{message:"Transformer    "});case"transformer-edit":return x.find(T=>T.id===t.transformerId)?d.jsx(Ko,{message:"Transformer    "}):d.jsx(Ko,{message:"Transformer   "});default:return d.jsx(Ko,{message:"  "})}};return d.jsxs("div",{className:"datatable-editor-panel",children:[d.jsx(uf,{icon:d.jsx(M8,{size:16}),title:E(),actions:d.jsx("button",{type:"button",className:"iconButton",onClick:e,title:"",children:d.jsx(eh,{size:16})})}),w(),d.jsx("div",{className:"panel-contents",children:B()})]})}function Z$e(t){switch(t.type){case"table-create":return`table-create-${t.projectId}`;case"table-edit":return`table-edit-${t.tableId}`;case"api-create":return`api-create-${t.projectId}`;case"api-edit":return`api-edit-${t.endpointId}`;case"variable-create":return`variable-create-${t.projectId}`;case"variable-edit":return`variable-edit-${t.variableId}`;case"transformer-create":return`transformer-create-${t.projectId}`;case"transformer-edit":return`transformer-edit-${t.transformerId}`;default:return`unknown-${Date.now()}`}}function e7e({isActive:t}){const e=Qg(r=>r.mode),n=Qg(r=>r.close);return t?e?d.jsx(J$e,{mode:e,close:n},Z$e(e)):d.jsxs("div",{className:"datatable-editor-panel",children:[d.jsx(uf,{icon:d.jsx(M8,{size:16}),title:"Editor"}),d.jsx("div",{className:"panel-contents",children:d.jsx(Ko,{message:"  "})})]}):null}const a1=new Map,EP=Object.assign({"../../panels/properties/editors/BadgeEditor.tsx":()=>fn(()=>import("./BadgeEditor-CvcgDbic.js"),__vite__mapDeps([0,1,2])),"../../panels/properties/editors/BreadcrumbEditor.tsx":()=>fn(()=>import("./BreadcrumbEditor-lEA0o56l.js"),__vite__mapDeps([3,1,4])),"../../panels/properties/editors/BreadcrumbsEditor.tsx":()=>fn(()=>import("./BreadcrumbsEditor-BBLWY4Ws.js"),__vite__mapDeps([5,1,4])),"../../panels/properties/editors/ButtonEditor.tsx":()=>fn(()=>import("./ButtonEditor-BN3QK1px.js"),__vite__mapDeps([6,1,2,7,4])),"../../panels/properties/editors/CalendarEditor.tsx":()=>fn(()=>import("./CalendarEditor-jemlkso8.js"),__vite__mapDeps([8,1,4,9,7])),"../../panels/properties/editors/CardEditor.tsx":()=>fn(()=>import("./CardEditor-C0RLU3wJ.js"),__vite__mapDeps([10,1,11,12,13,4])),"../../panels/properties/editors/CellEditor.tsx":()=>fn(()=>import("./CellEditor-kTRoLcTi.js"),__vite__mapDeps([14,1])),"../../panels/properties/editors/CheckboxEditor.tsx":()=>fn(()=>import("./CheckboxEditor-CZRpKdma.js"),__vite__mapDeps([15,1,11,7,4,9])),"../../panels/properties/editors/CheckboxGroupEditor.tsx":()=>fn(()=>import("./CheckboxGroupEditor-CHaJA4S2.js"),__vite__mapDeps([16,1,4,17,9])),"../../panels/properties/editors/ColumnEditor.tsx":()=>fn(()=>import("./ColumnEditor-Du_Gtwgn.js"),__vite__mapDeps([18,1,12,19])),"../../panels/properties/editors/ColumnGroupEditor.tsx":()=>fn(()=>import("./ColumnGroupEditor-4e90txdY.js"),__vite__mapDeps([20,1])),"../../panels/properties/editors/ComboBoxEditor.tsx":()=>fn(()=>import("./ComboBoxEditor-Cph-h5Cd.js"),__vite__mapDeps([21,1,22,23,4,9,7])),"../../panels/properties/editors/ComboBoxItemEditor.tsx":()=>fn(()=>import("./ComboBoxItemEditor-VbTQOTTW.js"),__vite__mapDeps([24,1,23,4])),"../../panels/properties/editors/DataTableEditor.tsx":()=>fn(()=>import("./DataTableEditor-oaPMExYc.js"),[]),"../../panels/properties/editors/DatePickerEditor.tsx":()=>fn(()=>import("./DatePickerEditor-tHbg55YQ.js"),__vite__mapDeps([25,1,4,9,7])),"../../panels/properties/editors/DateRangePickerEditor.tsx":()=>fn(()=>import("./DateRangePickerEditor-C6lLsEQ4.js"),__vite__mapDeps([26,1,4,9,7])),"../../panels/properties/editors/DialogEditor.tsx":()=>fn(()=>import("./DialogEditor-C6kSfk4W.js"),__vite__mapDeps([27,1])),"../../panels/properties/editors/ElementSlotSelector.tsx":()=>fn(()=>Promise.resolve().then(()=>n7e),void 0),"../../panels/properties/editors/FieldEditor.tsx":()=>fn(()=>import("./FieldEditor-CsYuentL.js"),__vite__mapDeps([28,1,13])),"../../panels/properties/editors/GridListEditor.tsx":()=>fn(()=>import("./GridListEditor-C61BB0KV.js"),__vite__mapDeps([29,1,22,23,4,30,7])),"../../panels/properties/editors/GridListItemEditor.tsx":()=>fn(()=>import("./GridListItemEditor-BoJWSY69.js"),__vite__mapDeps([31,1,23,4])),"../../panels/properties/editors/GroupEditor.tsx":()=>fn(()=>import("./GroupEditor-DnJqi71H.js"),__vite__mapDeps([32,1])),"../../panels/properties/editors/LayoutBodyEditor.tsx":()=>fn(()=>import("./LayoutBodyEditor-BI2k9_Yc.js"),__vite__mapDeps([33,1,34,35])),"../../panels/properties/editors/LayoutSlugEditor.tsx":()=>fn(()=>import("./LayoutSlugEditor-B9ObXAH0.js"),[]),"../../panels/properties/editors/LinkEditor.tsx":()=>fn(()=>import("./LinkEditor-BlIBbc3k.js"),__vite__mapDeps([36,1,2,4])),"../../panels/properties/editors/ListBoxEditor.tsx":()=>fn(()=>import("./ListBoxEditor-Dzy2I0fH.js"),__vite__mapDeps([37,1,22,30,4,7,23])),"../../panels/properties/editors/ListBoxItemEditor.tsx":()=>fn(()=>import("./ListBoxItemEditor-CBTRst2C.js"),__vite__mapDeps([38,1,23,4])),"../../panels/properties/editors/MenuEditor.tsx":()=>fn(()=>import("./MenuEditor-CCxyDXrU.js"),__vite__mapDeps([39,1,30,4,7])),"../../panels/properties/editors/MenuItemEditor.tsx":()=>fn(()=>import("./MenuItemEditor-CSBqZ3bW.js"),__vite__mapDeps([40,1,23,4])),"../../panels/properties/editors/MeterEditor.tsx":()=>fn(()=>import("./MeterEditor-CKBxzrWM.js"),__vite__mapDeps([41,1,42,11])),"../../panels/properties/editors/ModalEditor.tsx":()=>fn(()=>import("./ModalEditor-D0P0Qn_H.js"),__vite__mapDeps([43,1])),"../../panels/properties/editors/NumberFieldEditor.tsx":()=>fn(()=>import("./NumberFieldEditor-BOfsvaQM.js"),__vite__mapDeps([44,1,45,42,19,7,4,9])),"../../panels/properties/editors/PageBodyEditor.tsx":()=>fn(()=>import("./PageBodyEditor-zfsHnKJs.js"),__vite__mapDeps([46,1,47,48])),"../../panels/properties/editors/PageLayoutSelector.tsx":()=>fn(()=>import("./PageLayoutSelector-pF1SasE1.js"),[]),"../../panels/properties/editors/PageParentSelector.tsx":()=>fn(()=>import("./PageParentSelector-DnFPjxyq.js"),[]),"../../panels/properties/editors/PanelEditor.tsx":()=>fn(()=>import("./PanelEditor-CSgCXgEq.js"),__vite__mapDeps([49,1])),"../../panels/properties/editors/PopoverEditor.tsx":()=>fn(()=>import("./PopoverEditor-g-ZsQyTr.js"),__vite__mapDeps([50,1,51])),"../../panels/properties/editors/ProgressBarEditor.tsx":()=>fn(()=>import("./ProgressBarEditor-B855WRRR.js"),__vite__mapDeps([52,1,42,11])),"../../panels/properties/editors/RadioEditor.tsx":()=>fn(()=>import("./RadioEditor-pLclYvy_.js"),__vite__mapDeps([53,1,23,54,7,4,9])),"../../panels/properties/editors/RadioGroupEditor.tsx":()=>fn(()=>import("./RadioGroupEditor-BmMsJ-ps.js"),__vite__mapDeps([55,1,17,23,54,4,9])),"../../panels/properties/editors/ResponsiveVisibilityEditor.tsx":()=>fn(()=>import("./ResponsiveVisibilityEditor-BSzC4SRO.js"),__vite__mapDeps([56,13])),"../../panels/properties/editors/RowEditor.tsx":()=>fn(()=>import("./RowEditor-CiYF5S82.js"),__vite__mapDeps([57,1])),"../../panels/properties/editors/SearchFieldEditor.tsx":()=>fn(()=>import("./SearchFieldEditor-CotP3xng.js"),__vite__mapDeps([58,1,45,7,4,9])),"../../panels/properties/editors/SelectEditor.tsx":()=>fn(()=>import("./SelectEditor-DzyHsluL.js"),__vite__mapDeps([59,1,22,45,30,4,9,7,23])),"../../panels/properties/editors/SelectItemEditor.tsx":()=>fn(()=>import("./SelectItemEditor-CBnfWDvK.js"),__vite__mapDeps([60,1,23,4])),"../../panels/properties/editors/SeparatorEditor.tsx":()=>fn(()=>import("./SeparatorEditor-YLDOZONY.js"),__vite__mapDeps([61,1,11])),"../../panels/properties/editors/SliderEditor.tsx":()=>fn(()=>import("./SliderEditor-CGFcJb3S.js"),__vite__mapDeps([62,1,42,17,19,4])),"../../panels/properties/editors/SlotEditor.tsx":()=>fn(()=>import("./SlotEditor-B5At4GRB.js"),[]),"../../panels/properties/editors/SwitchEditor.tsx":()=>fn(()=>import("./SwitchEditor-CqzzCysM.js"),__vite__mapDeps([63,1,11,7,4,9])),"../../panels/properties/editors/TabEditor.tsx":()=>fn(()=>import("./TabEditor-Df8EyBO5.js"),__vite__mapDeps([64,1,4])),"../../panels/properties/editors/TableBodyEditor.tsx":()=>fn(()=>import("./TableBodyEditor-BxpRP8c2.js"),__vite__mapDeps([65,1,66])),"../../panels/properties/editors/TableEditor.tsx":()=>fn(()=>import("./TableEditor-CgiqTGBu.js"),__vite__mapDeps([67,1,66,68])),"../../panels/properties/editors/TableHeaderEditor.tsx":()=>fn(()=>import("./TableHeaderEditor-BShJvPvM.js"),__vite__mapDeps([69,1,66])),"../../panels/properties/editors/TabsEditor.tsx":()=>fn(()=>import("./TabsEditor-DE3k1zwJ.js"),__vite__mapDeps([70,1,4,17])),"../../panels/properties/editors/TagEditor.tsx":()=>fn(()=>import("./TagEditor-C_5UXfyk.js"),__vite__mapDeps([71,1,4])),"../../panels/properties/editors/TagGroupEditor.tsx":()=>fn(()=>import("./TagGroupEditor-BQ3CeaJf.js"),__vite__mapDeps([72,1,4,11,9])),"../../panels/properties/editors/TailSwatchEditor.tsx":()=>fn(()=>import("./TailSwatchEditor-v7hi4C8Y.js"),__vite__mapDeps([73,1,4])),"../../panels/properties/editors/TextFieldEditor.tsx":()=>fn(()=>import("./TextFieldEditor-DVgU3nyq.js"),__vite__mapDeps([74,1,23,45,7,4,9])),"../../panels/properties/editors/TimeFieldEditor.tsx":()=>fn(()=>import("./TimeFieldEditor-CQCK2q2a.js"),__vite__mapDeps([75,1,4,9,7])),"../../panels/properties/editors/ToggleButtonEditor.tsx":()=>fn(()=>import("./ToggleButtonEditor-DWFKqOYs.js"),__vite__mapDeps([76,1,7,4,9])),"../../panels/properties/editors/ToggleButtonGroupEditor.tsx":()=>fn(()=>import("./ToggleButtonGroupEditor-YPe5JlsO.js"),__vite__mapDeps([77,1,4,23,7])),"../../panels/properties/editors/ToolbarEditor.tsx":()=>fn(()=>import("./ToolbarEditor-DR6UKuSV.js"),__vite__mapDeps([78,1])),"../../panels/properties/editors/TooltipEditor.tsx":()=>fn(()=>import("./TooltipEditor-v0Qzgl1v.js"),__vite__mapDeps([79,1,51,19])),"../../panels/properties/editors/TreeEditor.tsx":()=>fn(()=>import("./TreeEditor-UOz1qGcf.js"),__vite__mapDeps([80,1,30,4,7])),"../../panels/properties/editors/TreeItemEditor.tsx":()=>fn(()=>import("./TreeItemEditor-jQZr_W3D.js"),__vite__mapDeps([81,1,23,4]))});async function I9(t){try{const e=`../../panels/properties/editors/${t}.tsx`,n=EP[e];if(!n)return console.warn(`[importEditor] Editor not found in glob: ${t}`,{requestedPath:e,availablePaths:Object.keys(EP).slice(0,5),totalCount:Object.keys(EP).length}),null;const r=await n();return r.default||r[t]||null}catch(e){return console.warn(`[importEditor] Failed to load editor: ${t}`,e),null}}async function t7e(t,e){if(t==="body"){const i=e?.editMode==="layout",s=i?"LayoutBodyEditor":"PageBodyEditor",a=`body:${i?"layout":"page"}`;if(a1.has(a))return a1.get(a);const o=await I9(s);return o?a1.set(a,o):console.warn("[getEditor] Failed to import body editor:",s),o}if(a1.has(t))return a1.get(t);const n=toe.find(i=>i.type===t);if(!n?.inspector.hasCustomEditor||!n.inspector.editorName)return null;const r=await I9(n.inspector.editorName);return r?a1.set(t,r):console.warn("[getEditor] Failed to import editor:",n.inspector.editorName),r}const y6=C.memo(function({elementId:e,currentSlotName:n,onSlotChange:r}){const i=je(h=>h.elements.find(f=>f.id===e)),s=je(h=>h.elements),a=je(h=>h.pages),o=C.useMemo(()=>{if(!i?.page_id)return[];const h=a.find(p=>p.id===i.page_id);return h?.layout_id?s.filter(p=>p.layout_id===h.layout_id&&p.tag==="Slot").map(p=>{const m=p.props?.name;return{name:m||`slot_${p.id.slice(0,8)}`,displayName:m||"unnamed",required:p.props?.required||!1,description:p.props?.description,elementId:p.id}}):[]},[i,s,a]),l=C.useMemo(()=>i?.parent_id?!s.some(f=>f.id===i.parent_id&&f.page_id===i.page_id):!0,[i,s]);if(o.length===0||!l)return null;const c=o.find(h=>h.required)||o[0],u=o.map(h=>({value:h.name,label:`${h.displayName}${h.required?" *":""}`}));return d.jsxs(wl,{title:"Slot Assignment",icon:x_,children:[d.jsx(Il,{label:"Target Slot",value:n||c?.name||"content",onChange:r,options:u,icon:x_,description:"Choose which slot this element fills in the layout"}),n&&d.jsx("div",{className:"slot-selector-info",children:o.find(h=>h.name===n)?.description&&d.jsx("p",{className:"slot-selector-description",children:o.find(h=>h.name===n)?.description})})]})}),n7e=Object.freeze(Object.defineProperty({__proto__:null,ElementSlotSelector:y6,default:y6},Symbol.toStringTag,{value:"Module"}));function r7e(t,e){if(e.disabled||e.code&&t.code!==e.code||!e.code&&t.key.toLowerCase()!==e.key.toLowerCase())return!1;switch(e.modifier){case"cmd":return(t.metaKey||t.ctrlKey)&&!t.shiftKey&&!t.altKey;case"cmdShift":return(t.metaKey||t.ctrlKey)&&t.shiftKey&&!t.altKey;case"alt":return(t.altKey||t.metaKey)&&!t.shiftKey&&!t.ctrlKey;case"altShift":return(t.altKey||t.metaKey)&&t.shiftKey;case"none":return!t.metaKey&&!t.ctrlKey&&!t.altKey&&!t.shiftKey;default:return!1}}function G_(t,e=[],n="keydown"){C.useEffect(()=>{const r=i=>{const s=i.target;if(!(s.tagName==="INPUT"||s.tagName==="TEXTAREA"||s.isContentEditable)){for(const a of t)if(r7e(i,a)){a.preventDefault!==!1&&i.preventDefault(),a.handler();break}}};return window.addEventListener(n,r),()=>window.removeEventListener(n,r)},[...e])}function mle({onPaste:t,validate:e,name:n="data",transform:r}){const i=C.useCallback(async l=>{try{const c=JSON.stringify(l,null,2);return await navigator.clipboard.writeText(c),!0}catch{return!1}},[n]),s=C.useCallback(async l=>{try{return await navigator.clipboard.writeText(l),!0}catch{return!1}},[n]),a=C.useCallback(async()=>{try{const l=await navigator.clipboard.readText(),c=JSON.parse(l);if(typeof c!="object"||c===null)throw new Error(`Invalid ${n} format: expected object, got ${typeof c}`);if(e&&!e(c))throw new Error(`Invalid ${n} format: failed validation`);const u=r?r(c):c;return t(u),!0}catch{return!1}},[n,t,e,r]),o=C.useCallback(async()=>{try{return await navigator.clipboard.readText()}catch{return null}},[n]);return{copy:i,copyText:s,paste:a,pasteText:o}}function v6(t,e){const n=t.map(l=>e.get(l)).filter(l=>l!==void 0);if(n.length===0)return{elements:[],rootIds:[],externalParents:new Map,timestamp:Date.now()};const r=new Set(t),i=[],s=new Map;n.forEach(l=>{l.parent_id?r.has(l.parent_id)||(s.set(l.id,l.parent_id),i.push(l.id)):i.push(l.id)});const a=new Set(n),o=[...n];for(;o.length>0;){const l=o.shift();for(const c of e.values())c.parent_id===l.id&&!a.has(c)&&(a.add(c),o.push(c))}return{elements:Array.from(a),rootIds:i,externalParents:s,timestamp:Date.now()}}function x6(t,e,n={x:10,y:10}){if(t.elements.length===0)return[];const r=new Map;return t.elements.forEach(s=>{r.set(s.id,js.generateId())}),t.elements.map(s=>{const a=r.get(s.id);let o=null;s.parent_id&&(r.has(s.parent_id)?o=r.get(s.parent_id):o=s.parent_id);let l={...s.props};if(t.rootIds.includes(s.id)){const c=s.props.style||{},u=p=>{if(typeof p=="string"){const m=p.match(/^(-?\d+(?:\.\d+)?)px$/);if(m)return parseFloat(m[1])}return typeof p=="number"?p:0},h=u(c.left),f=u(c.top);l={...l,style:{...c,left:`${h+n.x}px`,top:`${f+n.y}px`}}}return{...s,id:a,parent_id:o,page_id:e,props:l,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}})}function Ale(t){const e={__xstudio_elements__:!0,version:1,elements:t.elements,rootIds:t.rootIds,externalParents:Array.from(t.externalParents.entries()),timestamp:t.timestamp};return JSON.stringify(e)}function yle(t){if(!t||typeof t!="string"||!t.trim().startsWith("{"))return null;try{const e=JSON.parse(t);return e.__xstudio_elements__?!e.elements||!Array.isArray(e.elements)?(console.warn("[Paste] Invalid clipboard data structure - missing elements array"),null):e.elements.length===0?(console.warn("[Paste] Clipboard data contains no elements"),null):{elements:e.elements,rootIds:e.rootIds||[],externalParents:new Map(e.externalParents||[]),timestamp:e.timestamp||Date.now()}:null}catch{return null}}function vle(t,e,n){if(t.length===0)throw new Error("[Group] No elements selected to group");const r=t.map(E=>e.get(E)).filter(E=>E!==void 0);if(r.length===0)throw new Error("[Group] Selected elements not found");const i=r[0].parent_id,a=r.every(E=>E.parent_id===i)?i:null,o=Array.from(e.values()).filter(E=>E.parent_id===a&&E.page_id===n),c=(o.length>0?Math.max(...o.map(E=>E.order_num||0)):-1)+1,u=r.map(E=>{const w=E.props.style||{},B=B9(w.left),D=B9(w.top);return{left:B,top:D}}).filter(E=>E.left!==null&&E.top!==null),h=u.length>0?u.reduce((E,w)=>E+(w.left||0),0)/u.length:0,f=u.length>0?u.reduce((E,w)=>E+(w.top||0),0)/u.length:0,p=Array.from(e.values()).filter(E=>E.tag==="Group"&&E.customId?.startsWith("group_")),v=`group_${(p.length>0?Math.max(...p.map(E=>{const w=E.customId?.match(/^group_(\d+)$/);return w?parseInt(w[1],10):0})):0)+1}`,A={id:js.generateId(),customId:v,tag:"Group",props:{label:`Group (${r.length} elements)`,style:{display:"block",position:"relative",left:`${h}px`,top:`${f}px`}},parent_id:a,page_id:n,order_num:c,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},x=r.map((E,w)=>({...E,parent_id:A.id,order_num:w,updated_at:new Date().toISOString()}));return console.log(` [Group] Created group with ${x.length} elements`),{groupElement:A,updatedChildren:x}}function B9(t){if(typeof t=="string"){const e=t.match(/^(-?\d+(?:\.\d+)?)px$/);if(e)return parseFloat(e[1])}return typeof t=="number"?t:null}function i7e(t,e){const n=e.get(t);if(!n)throw new Error(`[Ungroup] Group element not found: ${t}`);if(n.tag!=="Group")throw new Error(`[Ungroup] Element is not a Group: ${t} (tag: ${n.tag})`);const r=Array.from(e.values()).filter(l=>l.parent_id===t);if(r.length===0)return console.warn("[Ungroup] Group has no children, will just delete group"),{updatedChildren:[],groupIdToDelete:t};const i=n.parent_id,s=Array.from(e.values()).filter(l=>l.parent_id===i&&l.page_id===n.page_id&&l.id!==t);let a=s.length>0?Math.max(...s.map(l=>l.order_num||0))+1:0;const o=r.map(l=>({...l,parent_id:i,order_num:a++,updated_at:new Date().toISOString()}));return console.log(` [Ungroup] Ungrouped ${r.length} elements from group ${t}`),{updatedChildren:o,groupIdToDelete:t}}function ZB(t){if(typeof t=="string"){const e=t.match(/^(-?\d+(?:\.\d+)?)px$/);if(e)return parseFloat(e[1])}return typeof t=="number"?t:null}function s7e(t,e){switch(e){case"left":return Math.min(...t.map(n=>n.left));case"right":return Math.max(...t.map(n=>n.left+n.width));case"center":{const n=t.map(r=>r.left+r.width/2);return n.reduce((r,i)=>r+i,0)/n.length}case"top":return Math.min(...t.map(n=>n.top));case"bottom":return Math.max(...t.map(n=>n.top+n.height));case"middle":{const n=t.map(r=>r.top+r.height/2);return n.reduce((r,i)=>r+i,0)/n.length}}}function a7e(t){return t.map(e=>{const n=e.props.style||{},r=ZB(n.left),i=ZB(n.top),s=ZB(n.width),a=ZB(n.height);return r===null||i===null||s===null||a===null?null:{id:e.id,left:r,top:i,width:s,height:a}}).filter(e=>e!==null)}function xle(t,e,n){if(t.length<2)return console.warn("[Alignment] Need at least 2 elements to align"),[];const r=t.map(o=>e.get(o)).filter(o=>o!==void 0);if(r.length<2)return console.warn("[Alignment] Not enough valid elements to align"),[];const i=a7e(r);if(i.length<2)return console.warn("[Alignment] Elements missing position/size properties, cannot align"),[];const s=s7e(i,n),a=i.map(o=>{let l=o.left,c=o.top;switch(n){case"left":l=s;break;case"right":l=s-o.width;break;case"center":l=s-o.width/2;break;case"top":c=s;break;case"bottom":c=s-o.height;break;case"middle":c=s-o.height/2;break}return{id:o.id,style:{...n==="left"||n==="center"||n==="right"?{left:`${l}px`}:{},...n==="top"||n==="middle"||n==="bottom"?{top:`${c}px`}:{}}}});return console.log(` [Alignment] Aligned ${a.length} elements to ${n}`),a}function e3(t){if(typeof t=="string"){const e=t.match(/^(-?\d+(?:\.\d+)?)px$/);if(e)return parseFloat(e[1])}return typeof t=="number"?t:null}function o7e(t){return t.map(e=>{const n=e.props.style||{},r=e3(n.left),i=e3(n.top),s=e3(n.width),a=e3(n.height);return r===null||i===null||s===null||a===null?null:{id:e.id,left:r,top:i,width:s,height:a}}).filter(e=>e!==null)}function l7e(t){if(t.length<3)return console.warn("[Distribution] Need at least 3 elements to distribute"),[];const e=[...t].sort((h,f)=>h.left-f.left),n=e[0],r=e[e.length-1],i=e.reduce((h,f)=>h+f.width,0),s=n.left,l=(r.left+r.width-s-i)/(e.length-1),c=[];let u=s;return e.forEach((h,f)=>{if(f===0){u+=h.width;return}f!==e.length-1&&(u+=l,c.push({id:h.id,style:{left:`${u}px`}}),u+=h.width)}),c}function c7e(t){if(t.length<3)return console.warn("[Distribution] Need at least 3 elements to distribute"),[];const e=[...t].sort((h,f)=>h.top-f.top),n=e[0],r=e[e.length-1],i=e.reduce((h,f)=>h+f.height,0),s=n.top,l=(r.top+r.height-s-i)/(e.length-1),c=[];let u=s;return e.forEach((h,f)=>{if(f===0){u+=h.height;return}f!==e.length-1&&(u+=l,c.push({id:h.id,style:{top:`${u}px`}}),u+=h.height)}),c}function ble(t,e,n){if(t.length<3)return console.warn("[Distribution] Need at least 3 elements to distribute"),[];const r=t.map(a=>e.get(a)).filter(a=>a!==void 0);if(r.length<3)return console.warn("[Distribution] Not enough valid elements to distribute"),[];const i=o7e(r);if(i.length<3)return console.warn("[Distribution] Elements missing position/size properties, cannot distribute"),[];const s=n==="horizontal"?l7e(i):c7e(i);return console.log(` [Distribution] Distributed ${s.length} elements ${n}ly`),s}function t_(t,e,n){if(t.length===0)return;const r=t.map(i=>{const s=n.get(i);return s?{elementId:i,prevProps:s.props,newProps:{...s.props,...e}}:null}).filter(i=>i!==null);r.length!==0&&(Da.addEntry({type:"batch",elementId:t[0],elementIds:t,data:{batchUpdates:r}}),console.log(` [History] Tracked batch update for ${r.length} elements`))}function Cle(t,e){e.length!==0&&(Da.addEntry({type:"group",elementId:t.id,elementIds:e.map(n=>n.id),data:{element:t,elements:e,groupData:{groupId:t.id,childIds:e.map(n=>n.id)}}}),console.log(` [History] Tracked group creation: ${t.id} with ${e.length} children`))}function u7e(t,e,n){e.length!==0&&(Da.addEntry({type:"ungroup",elementId:t,elementIds:e.map(r=>r.id),data:{element:n,prevElements:e,groupData:{groupId:t,childIds:e.map(r=>r.id)}}}),console.log(` [History] Tracked ungroup: ${t} with ${e.length} children`))}function d7e(t){t.length!==0&&(t.forEach(e=>{Da.addEntry({type:"remove",elementId:e.id,data:{element:e,childElements:e.children}})}),console.log(` [History] Tracked multi-delete for ${t.length} elements`))}function b6(t){if(t.length===0)return;const[e,...n]=t;Da.addEntry({type:"add",elementId:e.id,elementIds:t.map(r=>r.id),data:{element:e,childElements:n,elements:t}}),console.log(` [History] Tracked multi-paste: single batch entry for ${t.length} elements`)}const h7e=C.memo(function({selectedElement:e}){const[n,r]=C.useState(null),[i,s]=C.useState(!0),a=sd(c=>c.mode),o=C.useMemo(()=>{const c=je.getState().elementsMap.get(e.id);return{layoutId:c?.layout_id||null,pageId:c?.page_id||null,editMode:a}},[e.id,a]);C.useEffect(()=>{let c=!0;if(!e){Promise.resolve().then(()=>{c&&(r(null),s(!1))});return}return Promise.resolve().then(()=>{c&&(s(!0),t7e(e.type,o).then(u=>{c&&(r(()=>u),s(!1))}).catch(u=>{c&&(r(null),s(!1))}))}),()=>{c=!1}},[e.type,o.editMode]);const l=C.useCallback(c=>{Di.getState().updateProperties(c)},[]);return i?d.jsx(Zoe,{message:"  ...",description:`${e.type}   `}):n?d.jsx(n,{elementId:e.id,currentProps:e.properties,onUpdate:l}):d.jsx(Ko,{message:"    ",description:`'${e.type}'     .`})},(t,e)=>{const n=t.selectedElement,r=e.selectedElement;return!(n.id!==r.id||n.type!==r.type||n.customId!==r.customId||JSON.stringify(n.properties)!==JSON.stringify(r.properties)||JSON.stringify(n.style)!==JSON.stringify(r.style)||JSON.stringify(n.dataBinding)!==JSON.stringify(r.dataBinding)||JSON.stringify(n.events)!==JSON.stringify(r.events))});function f7e({isActive:t}){return t?d.jsx(g7e,{}):null}const p7e=C.memo(function({selectedElement:e,onSetSelectedElement:n,onSetSelectedElements:r}){const i=je(F=>F.multiSelectMode)||!1,s=je(F=>F.selectedElementIds),a=C.useMemo(()=>s||[],[s]),o=je(F=>F.currentPageId),l=i&&a.length>1,c=je.getState().removeElement,u=je.getState().updateElementProps,h=je.getState().addElement,f=je.getState().updateElement,p=()=>je.getState().elementsMap,m=je.getState().getPageElements,v=o?m(o):[],A=C.useMemo(()=>{if(!l||!o||a.length===0)return[];const F=p(),z=[];for(const G of a){const V=F.get(G);V&&V.page_id===o&&z.push(V)}return z},[l,a,o]);if(!l)return null;const x=async()=>{if(a.length!==0)try{const F=p(),z=v6(a,F),G=Ale(z);await navigator.clipboard.writeText(G),console.log(` [Copy] Copied ${a.length} elements`)}catch(F){console.error(" [Copy] Failed:",F)}},E=async()=>{if(o)try{const F=await navigator.clipboard.readText(),z=yle(F);if(!z)return;const G=x6(z,o,{x:10,y:10});if(G.length===0)return;await Promise.all(G.map(V=>h(V))),b6(G),console.log(` [Paste] Pasted ${G.length} elements`)}catch(F){console.error(" [Paste] Failed:",F)}},w=async()=>{if(confirm(`${a.length}   ?`))try{const F=p(),z=a.map(G=>F.get(G)).filter(G=>G!==void 0);if(z.length===0)return;d7e(z),await Promise.all(a.map(G=>c(G))),console.log(` [DeleteAll] Deleted ${z.length} elements`)}catch(F){console.error(" [DeleteAll] Failed:",F)}},B=()=>{n(null)},D=async F=>{try{const z=p();t_(a,F,z),await Promise.all(a.map(G=>u(G,F))),console.log("Batch update applied to",a.length,"elements")}catch(z){console.error("Failed to batch update:",z)}},T=F=>{F.length>0?r(F):n(null)},M=async()=>{if(!(a.length<2||!o))try{const F=p(),{groupElement:z,updatedChildren:G}=vle(a,F,o);await h(z),await Promise.all(G.map(async V=>{await f(V.id,{parent_id:V.parent_id,order_num:V.order_num}),await ss.from("elements").update({parent_id:V.parent_id,order_num:V.order_num,updated_at:new Date().toISOString()}).eq("id",V.id)})),Cle(z,G),n(z.id,z.props),console.log(` [Group] Created group with ${G.length} children`)}catch(F){console.error(" [Group] Failed:",F)}},R=async F=>{if(!(a.length<2))try{const z=p(),G=xle(a,z,F);if(G.length===0)return;const V={};G.forEach(q=>{V[q.id]=q.style}),t_(a,V,z),await Promise.all(G.map(q=>{const O=z.get(q.id);if(O){const H={...O.props.style||{},...q.style};return u(q.id,{style:H})}return Promise.resolve()})),console.log(` [Alignment] Aligned ${G.length} elements to ${F}`)}catch(z){console.error(" [Alignment] Failed:",z)}},k=async F=>{if(!(a.length<3))try{const z=p(),G=ble(a,z,F);if(G.length===0)return;const V={};G.forEach(q=>{V[q.id]=q.style}),t_(a,V,z),await Promise.all(G.map(q=>{const O=z.get(q.id);if(O){const H={...O.props.style||{},...q.style};return u(q.id,{style:H})}return Promise.resolve()})),console.log(` [Distribution] Distributed ${G.length} elements ${F}ly`)}catch(z){console.error(" [Distribution] Failed:",z)}},L=v.find(F=>F.id===e.id);return d.jsxs(d.Fragment,{children:[d.jsx(cje,{count:a.length,primaryElementId:a[0],primaryElementType:e?.type,onCopyAll:x,onPasteAll:E,onDeleteAll:w,onClearSelection:B,onGroupSelection:M,onAlign:R,onDistribute:k}),d.jsx(pje,{selectedElements:A,onBatchUpdate:D}),d.jsx(gje,{allElements:v,onFilteredElements:T}),L&&d.jsx(Ije,{referenceElement:L,allElements:v,onSelect:F=>{r(F),o&&Nw.addSelection(F,v,o)}}),d.jsx(Mje,{currentPageId:o,onRestore:F=>r(F)})]})});function g7e(){const t=Di(z=>z.selectedElement),e=je.getState().removeElement,n=je.getState().setSelectedElement,r=je.getState().updateElementProps,i=je.getState().addElement,s=je.getState().updateElement,a=je.getState().setSelectedElements,o=C.useCallback(()=>je.getState().elementsMap,[]),l=C.useCallback(()=>je.getState().currentPageId,[]),c=C.useCallback(()=>je.getState().selectedElementIds||[],[]),u=C.useCallback(()=>je.getState().multiSelectMode||!1,[]),[h,f]=C.useState(!1),{copy:p,paste:m}=mle({onPaste:z=>{Di.getState().updateProperties(z)},name:"properties"}),v=C.useCallback(async()=>{t?.properties&&await p(t.properties)},[t,p]),A=C.useCallback(async()=>{await m()},[m]),x=C.useCallback(async()=>{const z=c();if(console.log("[Copy] Starting copy operation...",{selectedElementIds:z}),z.length===0){console.warn("[Copy] No elements selected");return}try{console.log("[Copy] Calling copyMultipleElements...");const G=o(),V=v6(z,G);console.log("[Copy] Copied data:",{elementCount:V.elements.length,rootIds:V.rootIds,externalParents:V.externalParents.size}),console.log("[Copy] Serializing to JSON...");const q=Ale(V);console.log("[Copy] JSON length:",q.length,"bytes"),console.log("[Copy] Writing to clipboard..."),await navigator.clipboard.writeText(q),console.log(` [Copy] Successfully copied ${z.length} elements to clipboard`)}catch(G){console.error(" [Copy] Failed to copy elements:",G)}},[c,o]),E=C.useCallback(async()=>{const z=l();if(console.log("[Paste] Starting paste operation...",{currentPageId:z}),!z){console.warn("[Paste] No current page selected");return}try{console.log("[Paste] Reading from clipboard...");const G=await navigator.clipboard.readText();console.log("[Paste] Clipboard text length:",G.length,"bytes"),console.log("[Paste] First 100 chars:",G.substring(0,100)),console.log("[Paste] Deserializing clipboard data...");const V=yle(G);if(!V){console.warn("[Paste] Clipboard does not contain valid XStudio element data");return}console.log("[Paste] Deserialized data:",{elementCount:V.elements.length,rootIds:V.rootIds,externalParents:V.externalParents.size}),console.log("[Paste] Creating new elements with offset...");const q=x6(V,z,{x:10,y:10});if(console.log("[Paste] New elements created:",q.length),q.length===0){console.warn("[Paste] No elements to paste");return}console.log("[Paste] Adding elements to store..."),await Promise.all(q.map(O=>(console.log("[Paste] Adding element:",O.id,O.tag),i(O)))),b6(q),console.log(` [Paste] Successfully pasted ${q.length} elements`)}catch(G){console.error(" [Paste] Failed to paste elements:",G)}},[l,i]),w=C.useCallback(async()=>{const z=u(),G=c(),V=l();if(!z||G.length===0||!V){console.warn("[Duplicate] No elements selected or no page active");return}try{console.log(`[Duplicate] Duplicating ${G.length} elements`);const q=o(),O=v6(G,q),H=x6(O,V,{x:10,y:10});if(H.length===0){console.warn("[Duplicate] No elements to duplicate");return}await Promise.all(H.map(X=>i(X))),b6(H);const K=H.map(X=>X.id);a(K),console.log(` [Duplicate] Duplicated and selected ${H.length} elements`)}catch(q){console.error(" [Duplicate] Failed to duplicate elements:",q)}},[u,c,l,o,i,a]),B=C.useCallback(()=>{const z=l();if(!z){console.warn("[SelectAll] No page selected");return}const G=je.getState().getPageElements,V=G(z);if(V.length===0){console.warn("[SelectAll] No elements on current page");return}const q=V.map(O=>O.id);a(q),console.log(` [SelectAll] Selected ${q.length} elements`)},[l,a]),D=C.useCallback(()=>{n(null),console.log(" [Esc] Selection cleared")},[n]),T=C.useCallback(z=>{const G=u(),V=c();if(!G||V.length===0)return;z.preventDefault();const q=V.indexOf(t?.id||"");let O;z.shiftKey?O=q<=0?V.length-1:q-1:O=q>=V.length-1?0:q+1;const H=V[O],X=o().get(H);X&&(n(H,X.props),console.log(` [Tab] Navigated to element ${O+1}/${V.length}:`,X.tag))},[u,c,t,o,n]),M=C.useCallback(async()=>{const z=u(),G=c(),V=l();if(!z||G.length<2||!V){console.warn("[Group] Need at least 2 elements selected");return}try{console.log("[Group] Grouping",G.length,"elements");const q=o(),{groupElement:O,updatedChildren:H}=vle(G,q,V);await i(O),await Promise.all(H.map(async K=>{await s(K.id,{parent_id:K.parent_id,order_num:K.order_num});const{error:X}=await ss.from("elements").update({parent_id:K.parent_id,order_num:K.order_num,updated_at:new Date().toISOString()}).eq("id",K.id);X?console.error(` [Group] Failed to save child ${K.id} to DB:`,X):console.log(` [Group] Saved child ${K.id} to DB: parent_id=${K.parent_id}`)})),Cle(O,H),n(O.id,O.props),console.log(` [Group] Created group ${O.id} with ${H.length} children`)}catch(q){console.error(" [Group] Failed to create group:",q)}},[u,c,l,o,i,s,n]),R=C.useCallback(async()=>{if(!t||t.type!=="Group"){console.warn("[Ungroup] Selected element is not a Group");return}try{console.log("[Ungroup] Ungrouping element",t.id);const z=o(),G=z.get(t.id),{updatedChildren:V,groupIdToDelete:q}=i7e(t.id,z);G&&u7e(q,V,G),await Promise.all(V.map(async O=>{await s(O.id,{parent_id:O.parent_id,order_num:O.order_num});const{error:H}=await ss.from("elements").update({parent_id:O.parent_id,order_num:O.order_num,updated_at:new Date().toISOString()}).eq("id",O.id);H?console.error(` [Ungroup] Failed to save child ${O.id} to DB:`,H):console.log(` [Ungroup] Saved child ${O.id} to DB: parent_id=${O.parent_id}`)})),await e(q),V.length>0?n(V[0].id,V[0].props):n(null),console.log(` [Ungroup] Ungrouped ${V.length} elements`)}catch(z){console.error(" [Ungroup] Failed to ungroup:",z)}},[t,o,s,e,n]),k=C.useCallback(async z=>{const G=u(),V=c();if(!G||V.length<2){console.warn("[Alignment] Need at least 2 elements selected");return}try{console.log(`[Alignment] Aligning ${V.length} elements to ${z}`);const q=o(),O=xle(V,q,z);if(O.length===0){console.warn("[Alignment] No updates generated");return}const H={};O.forEach(K=>{H[K.id]=K.style}),t_(V,H,q),await Promise.all(O.map(K=>{const X=q.get(K.id);if(X){const re={...X.props.style||{},...K.style};return r(K.id,{style:re})}return Promise.resolve()})),console.log(` [Alignment] Aligned ${O.length} elements to ${z}`)}catch(q){console.error(" [Alignment] Failed to align:",q)}},[u,c,o,r]),L=C.useCallback(async z=>{const G=u(),V=c();if(!G||V.length<3){console.warn("[Distribution] Need at least 3 elements selected");return}try{console.log(`[Distribution] Distributing ${V.length} elements ${z}ly`);const q=o(),O=ble(V,q,z);if(O.length===0){console.warn("[Distribution] No updates generated");return}const H={};O.forEach(K=>{H[K.id]=K.style}),t_(V,H,q),await Promise.all(O.map(K=>{const X=q.get(K.id);if(X){const re={...X.props.style||{},...K.style};return r(K.id,{style:re})}return Promise.resolve()})),console.log(` [Distribution] Distributed ${O.length} elements ${z}ly`)}catch(q){console.error(" [Distribution] Failed to distribute:",q)}},[u,c,o,r]),F=C.useMemo(()=>[{key:"c",modifier:"cmdShift",handler:v,description:"Copy Properties"},{key:"v",modifier:"cmdShift",handler:A,description:"Paste Properties"},{key:"c",modifier:"cmd",handler:x,description:"Copy All Elements"},{key:"v",modifier:"cmd",handler:E,description:"Paste Elements"},{key:"d",modifier:"cmd",handler:w,description:"Duplicate Selection"},{key:"a",modifier:"cmd",handler:B,description:"Select All"},{key:"Escape",modifier:"none",handler:D,description:"Clear Selection"},{key:"g",modifier:"cmd",handler:M,description:"Group Selection"},{key:"g",modifier:"cmdShift",handler:R,description:"Ungroup Selection"},{key:"l",modifier:"cmdShift",handler:()=>k("left"),description:"Align Left"},{key:"h",modifier:"cmdShift",handler:()=>k("center"),description:"Align Horizontal Center"},{key:"r",modifier:"cmdShift",handler:()=>k("right"),description:"Align Right"},{key:"t",modifier:"cmdShift",handler:()=>k("top"),description:"Align Top"},{key:"m",modifier:"cmdShift",handler:()=>k("middle"),description:"Align Vertical Middle"},{key:"b",modifier:"cmdShift",handler:()=>k("bottom"),description:"Align Bottom"},{key:"d",modifier:"cmdShift",handler:()=>L("horizontal"),description:"Distribute Horizontally"},{key:"v",modifier:"altShift",handler:()=>L("vertical"),description:"Distribute Vertically"},{key:"?",modifier:"cmd",handler:()=>f(z=>!z),description:"Toggle Keyboard Shortcuts Help"}],[v,A,x,E,w,B,D,M,R,k,L]);return G_(F,[v,A,x,E,w,B,D,M,R,k,L]),C.useEffect(()=>{const z=G=>{const V=je.getState().multiSelectMode||!1,q=je.getState().selectedElementIds||[];G.key==="Tab"&&V&&q.length>0&&T(G)};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[T]),t?d.jsxs("div",{className:"panel",children:[d.jsx(uf,{icon:d.jsx(Fg,{size:16}),title:t.type,actions:d.jsxs(d.Fragment,{children:[d.jsx(Xn,{variant:"ghost",className:"iconButton",onPress:v,"aria-label":"Copy properties",isDisabled:!t?.properties||Object.keys(t.properties).length===0,children:d.jsx(T8,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx(Xn,{variant:"ghost",className:"iconButton",onPress:A,"aria-label":"Paste properties",children:d.jsx(B8,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})]})}),d.jsxs("div",{className:"panel-contents",children:[d.jsx(p7e,{selectedElement:t,onSetSelectedElement:n,onSetSelectedElements:a}),d.jsx(h7e,{selectedElement:t}),d.jsx(y6,{elementId:t.id,currentSlotName:t.properties?.slot_name,onSlotChange:z=>{Di.getState().updateProperties({slot_name:z})}}),d.jsx(Aje,{isOpen:h,onClose:()=>f(!1)})]})]}):d.jsx(Ko,{message:" "})}function ZE(){const{copy:t,paste:e}=mle({onPaste:p=>{const m={};Object.entries(p).forEach(([v,A])=>{A!=null&&(m[v]=String(A))}),Di.getState().updateInlineStyles(m)},name:"styles"}),n=C.useCallback((p,m)=>{Di.getState().updateInlineStyle(p,m)},[]),r=C.useCallback(p=>{Di.getState().updateInlineStyles(p)},[]),i=C.useCallback(p=>{const m={"align-vertical-start":"flex-start","align-vertical-center":"center","align-vertical-end":"flex-end"};Di.getState().updateInlineStyles({display:"flex",alignItems:m[p]||"flex-start"})},[]),s=C.useCallback(p=>{const m={"align-horizontal-start":"flex-start","align-horizontal-center":"center","align-horizontal-end":"flex-end"};Di.getState().updateInlineStyles({display:"flex",justifyContent:m[p]||"flex-start"})},[]),a=C.useCallback(p=>{p==="block"?Di.getState().updateInlineStyles({display:"block",flexDirection:"",justifyContent:"",alignItems:"",flexWrap:"",gap:""}):p==="row"?Di.getState().updateInlineStyles({display:"flex",flexDirection:"row"}):p==="column"&&Di.getState().updateInlineStyles({display:"flex",flexDirection:"column"})},[]),o=C.useCallback((p,m)=>{const A={leftTop:{horizontal:"flex-start",vertical:"flex-start"},centerTop:{horizontal:"center",vertical:"flex-start"},rightTop:{horizontal:"flex-end",vertical:"flex-start"},leftCenter:{horizontal:"flex-start",vertical:"center"},centerCenter:{horizontal:"center",vertical:"center"},rightCenter:{horizontal:"flex-end",vertical:"center"},leftBottom:{horizontal:"flex-start",vertical:"flex-end"},centerBottom:{horizontal:"center",vertical:"flex-end"},rightBottom:{horizontal:"flex-end",vertical:"flex-end"}}[p];A&&(m==="column"?Di.getState().updateInlineStyles({display:"flex",justifyContent:A.vertical,alignItems:A.horizontal}):Di.getState().updateInlineStyles({display:"flex",justifyContent:A.horizontal,alignItems:A.vertical}))},[]),l=C.useCallback(p=>{Di.getState().updateInlineStyles({display:"flex",justifyContent:p})},[]),c=C.useCallback(p=>{Di.getState().updateInlineStyles({display:"flex",flexWrap:p})},[]),u=C.useCallback(p=>{const m={};p.forEach(v=>m[v]=""),Di.getState().updateInlineStyles(m)},[]),h=C.useCallback(async p=>t(p),[t]),f=C.useCallback(async()=>e(),[e]);return{updateStyle:n,updateStyles:r,resetStyles:u,copyStyles:h,pasteStyles:f,handleVerticalAlignment:i,handleHorizontalAlignment:s,handleFlexDirection:a,handleFlexAlignment:o,handleJustifyContentSpacing:l,handleFlexWrap:c}}const m7e=["width","height","top","left","right","bottom"];function Jr(t,e,n){return t?t.style&&t.style[e]!==void 0?String(t.style[e]):!m7e.includes(e)&&t.computedStyle&&t.computedStyle[e]!==void 0?String(t.computedStyle[e]):n:n}function A7e(t){if(!t)return[];const e=Jr(t,"display",""),n=Jr(t,"justifyContent",""),r=Jr(t,"alignItems",""),i=Jr(t,"flexDirection","row");if(e!=="flex")return[];if(["space-around","space-between","space-evenly"].includes(n))return[];let a,o;i==="column"?(a=r,o=n):(a=n,o=r);const l=["flex-start","center","flex-end"];if(!l.includes(a)||!l.includes(o))return[];const c={"flex-start:flex-start":"leftTop","center:flex-start":"centerTop","flex-end:flex-start":"rightTop","flex-start:center":"leftCenter","center:center":"centerCenter","flex-end:center":"rightCenter","flex-start:flex-end":"leftBottom","center:flex-end":"centerBottom","flex-end:flex-end":"rightBottom"},u=`${a}:${o}`;return c[u]?[c[u]]:[]}function y7e(t){if(!t)return["block"];const e=Jr(t,"display",""),n=Jr(t,"flexDirection","");return e!=="flex"?["block"]:n==="column"?["column"]:["row"]}function v7e(t){if(!t)return[];const e=Jr(t,"display",""),n=Jr(t,"justifyContent","");return e!=="flex"?[]:n==="space-around"?["space-around"]:n==="space-between"?["space-between"]:n==="space-evenly"?["space-evenly"]:[]}function x7e(t){if(!t)return[];const e=Jr(t,"display",""),n=Jr(t,"flexWrap","");return e!=="flex"?[]:n==="wrap"?["wrap"]:n==="wrap-reverse"?["wrap-reverse"]:["nowrap"]}function b7e({selectedElement:t}){const{updateStyle:e,resetStyles:n}=ZE(),r=()=>{n(["width","height","top","left"])};return d.jsxs(wl,{id:"transform",title:"Transform",onReset:r,children:[d.jsx(qd,{icon:HN,label:"Width",className:"width",value:Jr(t,"width","auto"),units:["reset","px","%","rem","em","vh","vw"],onChange:i=>e("width",i),min:0,max:9999}),d.jsx(qd,{icon:HN,label:"Height",className:"height",value:Jr(t,"height","auto"),units:["reset","px","%","rem","em","vh","vw"],onChange:i=>e("height",i),min:0,max:9999}),d.jsx("div",{className:"fieldset-actions actions-size",children:d.jsx(Xn,{children:d.jsx(yy,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})}),d.jsx(qd,{icon:Jge,label:"Left",className:"left",value:Jr(t,"left","auto"),units:["reset","px","%","rem","em","vh","vw"],onChange:i=>e("left",i),min:-9999,max:9999}),d.jsx(qd,{icon:Kge,label:"Top",className:"top",value:Jr(t,"top","auto"),units:["reset","px","%","rem","em","vh","vw"],onChange:i=>e("top",i),min:-9999,max:9999}),d.jsx("div",{className:"fieldset-actions actions-position",children:d.jsx(Xn,{children:d.jsx(yy,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})})]})}function T9(t,e){return{top:Jr(t,`${e}Top`,""),right:Jr(t,`${e}Right`,""),bottom:Jr(t,`${e}Bottom`,""),left:Jr(t,`${e}Left`,"")}}function M9({values:t,onChange:e}){const n=(i,s)=>{const a=s.replace(/[^0-9.-]/g,"");a===""||a==="-"?e(i,""):e(i,`${a}px`)},r=i=>i.replace("px","");return d.jsxs("div",{className:"four-way-grid",children:[d.jsx(br,{className:"react-aria-Input four-way-top",value:r(t.top),onChange:i=>n("Top",i.target.value),placeholder:"T","aria-label":"Top"}),d.jsx(br,{className:"react-aria-Input four-way-left",value:r(t.left),onChange:i=>n("Left",i.target.value),placeholder:"L","aria-label":"Left"}),d.jsx(br,{className:"react-aria-Input four-way-right",value:r(t.right),onChange:i=>n("Right",i.target.value),placeholder:"R","aria-label":"Right"}),d.jsx(br,{className:"react-aria-Input four-way-bottom",value:r(t.bottom),onChange:i=>n("Bottom",i.target.value),placeholder:"B","aria-label":"Bottom"})]})}function C7e({selectedElement:t}){const[e,n]=C.useState(!1),{updateStyle:r,resetStyles:i,handleFlexDirection:s,handleFlexAlignment:a,handleJustifyContentSpacing:o,handleFlexWrap:l}=ZE(),c=C.useMemo(()=>T9(t,"padding"),[t]),u=C.useMemo(()=>T9(t,"margin"),[t]),h=()=>{i(["display","flexDirection","flexWrap","alignItems","justifyContent","gap","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft"])},f=(m,v)=>{r(`padding${m}`,v)},p=(m,v)=>{r(`margin${m}`,v)};return d.jsxs(wl,{id:"layout",title:"Layout",onReset:h,children:[d.jsxs("div",{className:"layout-direction",children:[d.jsxs("div",{className:"direction-controls flex-direction",children:[d.jsx("legend",{className:"fieldset-legend",children:"Direction"}),d.jsxs(tf,{"aria-label":"Flex direction",indicator:!0,selectedKeys:y7e(t),onSelectionChange:m=>{const v=Array.from(m)[0];s(v)},children:[d.jsx($r,{id:"block",children:d.jsx(Ny,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx($r,{id:"row",children:d.jsx(xye,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx($r,{id:"column",children:d.jsx(yye,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})]})]}),d.jsxs("div",{className:"direction-alignment-grid flex-alignment",children:[d.jsx("legend",{className:"fieldset-legend",children:"Alignment"}),d.jsxs(tf,{"aria-label":"Flex alignment",indicator:!0,selectionMode:"single",selectedKeys:A7e(t),onSelectionChange:m=>{const v=Array.from(m)[0];if(v){const A=Jr(t,"flexDirection","row");a(v,A)}},children:[d.jsx($r,{id:"leftTop",children:d.jsx("span",{className:"alignment-dot"})}),d.jsx($r,{id:"centerTop",children:d.jsx("span",{className:"alignment-dot"})}),d.jsx($r,{id:"rightTop",children:d.jsx("span",{className:"alignment-dot"})}),d.jsx($r,{id:"leftCenter",children:d.jsx("span",{className:"alignment-dot"})}),d.jsx($r,{id:"centerCenter",children:d.jsx("span",{className:"alignment-dot"})}),d.jsx($r,{id:"rightCenter",children:d.jsx("span",{className:"alignment-dot"})}),d.jsx($r,{id:"leftBottom",children:d.jsx("span",{className:"alignment-dot"})}),d.jsx($r,{id:"centerBottom",children:d.jsx("span",{className:"alignment-dot"})}),d.jsx($r,{id:"rightBottom",children:d.jsx("span",{className:"alignment-dot"})})]})]}),d.jsx("div",{className:"fieldset-actions",children:d.jsx(Xn,{children:d.jsx(QN,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})}),d.jsxs("div",{className:"justify-control justify-content",children:[d.jsx("legend",{className:"fieldset-legend",children:"Justify"}),d.jsxs(tf,{"aria-label":"Justify content alignment",indicator:!0,selectionMode:"single",selectedKeys:v7e(t),onSelectionChange:m=>{const v=Array.from(m)[0];v&&o(v)},children:[d.jsx($r,{id:"space-around",children:d.jsx(HO,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx($r,{id:"space-between",children:d.jsx(m0e,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx($r,{id:"space-evenly",children:d.jsx(HO,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})]})]}),d.jsxs("div",{className:"justify-control flex-wrap",children:[d.jsx("legend",{className:"fieldset-legend",children:"Wrap"}),d.jsxs(tf,{"aria-label":"Flex wrap",indicator:!0,selectionMode:"single",selectedKeys:x7e(t),onSelectionChange:m=>{const v=Array.from(m)[0];v&&l(v)},children:[d.jsx($r,{id:"wrap",children:d.jsx(Fye,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx($r,{id:"wrap-reverse",children:d.jsx(Yme,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx($r,{id:"nowrap",children:d.jsx(nme,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})]})]}),d.jsx(qd,{icon:QN,label:"Gap",className:"displayGap",value:Jr(t,"gap","0px"),units:["reset","px","rem","em"],onChange:m=>r("gap",m),min:0,max:500})]}),e?d.jsxs("div",{className:"layout-container layout-container-expanded",children:[d.jsxs("fieldset",{className:"properties-aria property-unit-input layout-padding",children:[d.jsx("legend",{className:"fieldset-legend",children:"Padding"}),d.jsx("div",{className:"react-aria-Group layout-spacing",children:d.jsx(M9,{values:c,onChange:f})})]}),d.jsxs("fieldset",{className:"properties-aria property-unit-input layout-margin",children:[d.jsx("legend",{className:"fieldset-legend",children:"Margin"}),d.jsx("div",{className:"react-aria-Group layout-spacing",children:d.jsx(M9,{values:u,onChange:p,allowNegative:!0})})]}),d.jsx("div",{className:"fieldset-actions actions-spacing",children:d.jsx(Xn,{onPress:()=>n(!1),"aria-label":"Collapse spacing to single input",children:d.jsx(iAe,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})})]}):d.jsxs("div",{className:"layout-container",children:[d.jsx(qd,{icon:pye,label:"Padding",className:"padding",value:Jr(t,"padding","0px"),units:["reset","px","rem","em"],onChange:m=>r("padding",m),min:0,max:500}),d.jsx(qd,{icon:f0e,label:"Margin",className:"margin",value:Jr(t,"margin","0px"),units:["reset","px","rem","em"],onChange:m=>r("margin",m),min:0,max:500}),d.jsx("div",{className:"fieldset-actions actions-spacing",children:d.jsx(Xn,{onPress:()=>n(!0),"aria-label":"Expand spacing to 4-way input",children:d.jsx(UN,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})})]})]})}function E7e({selectedElement:t}){const{updateStyle:e,resetStyles:n}=ZE(),r=()=>{n(["backgroundColor","borderColor","borderWidth","borderRadius","borderStyle"])};return d.jsxs(wl,{id:"appearance",title:"Appearance",onReset:r,children:[d.jsxs("div",{className:"style-background",children:[d.jsx(uM,{icon:Ny,label:"Background Color",className:"background-color",value:Jr(t,"backgroundColor","#FFFFFF"),onChange:i=>e("backgroundColor",i),placeholder:"#FFFFFF"}),d.jsx("div",{className:"fieldset-actions actions-icon",children:d.jsx(Xn,{children:d.jsx(yy,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})})]}),d.jsxs("div",{className:"style-border",children:[d.jsx(uM,{icon:Ny,label:"Color",className:"border-color",value:Jr(t,"borderColor","#000000"),onChange:i=>e("borderColor",i),placeholder:"#000000"}),d.jsx(qd,{icon:sye,label:"Border Width",className:"border-width",value:Jr(t,"borderWidth","0px"),units:["reset","px"],onChange:i=>e("borderWidth",i),min:0,max:100}),d.jsx(qd,{icon:hye,label:"Border Radius",className:"border-radius",value:Jr(t,"borderRadius","0px"),units:["reset","px","%","rem","em"],onChange:i=>e("borderRadius",i),min:0,max:500}),d.jsx(Il,{icon:rye,label:"Border Style",className:"border-style",value:Jr(t,"borderStyle","solid"),options:[{value:"reset",label:"Reset"},{value:"none",label:"none"},{value:"solid",label:"solid"},{value:"dashed",label:"dashed"},{value:"dotted",label:"dotted"},{value:"double",label:"double"},{value:"groove",label:"groove"},{value:"ridge",label:"ridge"},{value:"inset",label:"inset"},{value:"outset",label:"outset"}],onChange:i=>e("borderStyle",i)}),d.jsx("div",{className:"fieldset-actions actions-icon",children:d.jsx(Xn,{children:d.jsx(yy,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})})]})]})}function S7e({selectedElement:t}){const{updateStyle:e,resetStyles:n}=ZE(),r=()=>{n(["fontFamily","fontSize","fontWeight","fontStyle","lineHeight","letterSpacing","color","textAlign","textDecoration","textTransform","verticalAlign"])};return d.jsxs(wl,{id:"typography",title:"Typography",onReset:r,children:[d.jsx(Il,{icon:Rg,label:"Font Family",className:"font-family",value:Jr(t,"fontFamily","Arial"),options:[{value:"reset",label:"Reset"},{value:"Arial",label:"Arial"},{value:"Helvetica",label:"Helvetica"},{value:"Times New Roman",label:"Times New Roman"},{value:"Georgia",label:"Georgia"},{value:"Courier New",label:"Courier New"},{value:"Verdana",label:"Verdana"}],onChange:i=>e("fontFamily",i)}),d.jsx(uM,{icon:Rg,label:"Color",className:"color",value:Jr(t,"color","#000000"),onChange:i=>e("color",i),placeholder:"#000000"}),d.jsx("div",{className:"fieldset-actions actions-font",children:d.jsx(Xn,{children:d.jsx(yy,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})}),d.jsx(qd,{icon:Rg,label:"Font Size",className:"font-size",value:Jr(t,"fontSize","16px"),units:["reset","px","rem","em","pt"],onChange:i=>e("fontSize",i),min:8,max:200}),d.jsx(qd,{icon:Rg,label:"Line Height",className:"line-height",value:Jr(t,"lineHeight","normal"),units:["reset","px","rem","em",""],onChange:i=>e("lineHeight",i),min:0,max:10,allowKeywords:!0}),d.jsx(Il,{icon:Rg,label:"Font Weight",className:"font-weight",value:Jr(t,"fontWeight","normal"),options:[{value:"reset",label:"Reset"},{value:"100",label:"100 - Thin"},{value:"200",label:"200 - Extra Light"},{value:"300",label:"300 - Light"},{value:"400",label:"400 - Normal"},{value:"500",label:"500 - Medium"},{value:"600",label:"600 - Semi Bold"},{value:"700",label:"700 - Bold"},{value:"800",label:"800 - Extra Bold"},{value:"900",label:"900 - Black"},{value:"normal",label:"Normal"},{value:"bold",label:"Bold"}],onChange:i=>e("fontWeight",i)}),d.jsx(qd,{icon:Rg,label:"Letter Spacing",className:"letter-spacing",value:Jr(t,"letterSpacing","normal"),units:["reset","px","rem","em"],onChange:i=>e("letterSpacing",i),min:-10,max:10,allowKeywords:!0}),d.jsx("div",{className:"fieldset-actions",children:d.jsx(Xn,{children:d.jsx(yy,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})}),d.jsxs("fieldset",{className:"properties-aria text-align",children:[d.jsx("legend",{className:"fieldset-legend",children:"Text Align"}),d.jsxs(tf,{"aria-label":"Text alignment",indicator:!0,selectedKeys:[Jr(t,"textAlign","left")],onSelectionChange:i=>{const s=Array.from(i)[0];s&&e("textAlign",s)},children:[d.jsx($r,{id:"left",children:d.jsx(L8,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx($r,{id:"center",children:d.jsx(vY,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx($r,{id:"right",children:d.jsx(xY,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})]})]}),d.jsxs("fieldset",{className:"properties-aria vertical-align",children:[d.jsx("legend",{className:"fieldset-legend",children:"Vertical Align"}),d.jsxs(tf,{"aria-label":"Vertical alignment",indicator:!0,selectedKeys:[Jr(t,"verticalAlign","baseline")],onSelectionChange:i=>{const s=Array.from(i)[0];s&&e("verticalAlign",s)},children:[d.jsx($r,{id:"top",children:d.jsx(Jq,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx($r,{id:"middle",children:d.jsx(Yq,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx($r,{id:"bottom",children:d.jsx(Xq,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})]})]}),d.jsx("div",{className:"fieldset-actions",children:d.jsx(Xn,{children:d.jsx(yy,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})}),d.jsxs("fieldset",{className:"properties-aria text-decoration",children:[d.jsx("legend",{className:"fieldset-legend",children:"Text Decoration"}),d.jsxs(tf,{"aria-label":"Text decoration",indicator:!0,selectedKeys:Jr(t,"textDecoration","none")==="none"?[]:[Jr(t,"textDecoration","none")],onSelectionChange:i=>{const s=Array.from(i)[0];e("textDecoration",s||"none")},children:[d.jsx($r,{id:"overline",children:d.jsx(ame,{color:ge.color,size:ge.size,strokeWidth:ge.stroke,style:{transform:"rotate(180deg)"}})}),d.jsx($r,{id:"underline",children:d.jsx(Wye,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx($r,{id:"line-through",children:d.jsx(Cye,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})]})]}),d.jsxs("fieldset",{className:"properties-aria font-style",children:[d.jsx("legend",{className:"fieldset-legend",children:"Font Style"}),d.jsxs(tf,{"aria-label":"Font style",indicator:!0,selectedKeys:[Jr(t,"fontStyle","normal")],onSelectionChange:i=>{const s=Array.from(i)[0];s&&e("fontStyle",s)},children:[d.jsx($r,{id:"normal",children:d.jsx(MAe,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx($r,{id:"italic",children:d.jsx(P0e,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx($r,{id:"oblique",children:d.jsx(Rg,{color:ge.color,size:ge.size,strokeWidth:ge.stroke,style:{fontStyle:"oblique",transform:"skewX(-10deg)"}})})]})]}),d.jsx("div",{className:"fieldset-actions",children:d.jsx(Xn,{children:d.jsx(yy,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})}),d.jsxs("fieldset",{className:"properties-aria text-transform",children:[d.jsx("legend",{className:"fieldset-legend",children:"Text Transform"}),d.jsxs(tf,{"aria-label":"Text transform",indicator:!0,selectedKeys:Jr(t,"textTransform","none")==="none"?[]:[Jr(t,"textTransform","none")],onSelectionChange:i=>{const s=Array.from(i)[0];e("textTransform",s||"none")},children:[d.jsx($r,{id:"uppercase",children:d.jsx(Sme,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx($r,{id:"lowercase",children:d.jsx(xme,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx($r,{id:"capitalize",children:d.jsx(Cme,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})]})]})]})}function Ele(t){return!t||!t.style?[]:Object.keys(t.style).filter(e=>t.style[e]!==void 0)}const w7e=[{value:"auto",label:"auto"},{value:"Arial",label:"Arial"},{value:"Helvetica",label:"Helvetica"},{value:"Times New Roman",label:"Times New Roman"},{value:"Georgia",label:"Georgia"},{value:"Courier New",label:"Courier New"},{value:"Verdana",label:"Verdana"}],_7e=[{value:"auto",label:"auto"},{value:"100",label:"100 - Thin"},{value:"200",label:"200 - Extra Light"},{value:"300",label:"300 - Light"},{value:"400",label:"400 - Normal"},{value:"500",label:"500 - Medium"},{value:"600",label:"600 - Semi Bold"},{value:"700",label:"700 - Bold"},{value:"800",label:"800 - Extra Bold"},{value:"900",label:"900 - Black"},{value:"normal",label:"Normal"},{value:"bold",label:"Bold"}],I7e=[{value:"auto",label:"auto"},{value:"none",label:"none"},{value:"solid",label:"solid"},{value:"dashed",label:"dashed"},{value:"dotted",label:"dotted"},{value:"double",label:"double"},{value:"groove",label:"groove"},{value:"ridge",label:"ridge"},{value:"inset",label:"inset"},{value:"outset",label:"outset"}];function B7e({selectedElement:t}){const e=Ele(t),{updateStyle:n}=ZE();if(e.length===0)return d.jsx(wl,{title:"Modified Styles",children:d.jsxs("div",{className:"empty-state",children:[d.jsx("p",{className:"empty-message",children:"No modified styles"}),d.jsx("p",{className:"empty-hint",children:"Edit any style property to see it here"})]})});const r={layout:e.filter(s=>["display","flexDirection","alignItems","justifyContent","gap"].includes(s)),spacing:e.filter(s=>["padding","margin","width","height","top","left","right","bottom"].includes(s)),appearance:e.filter(s=>["backgroundColor","borderColor","borderWidth","borderRadius","borderStyle"].includes(s)),typography:e.filter(s=>["fontFamily","fontSize","fontWeight","fontStyle","lineHeight","letterSpacing","color","textAlign","textDecoration","textTransform","verticalAlign"].includes(s))},i=s=>{const a=t.style?.[s];return a?["backgroundColor","borderColor","color"].includes(s)?d.jsx(uM,{icon:Ny,label:ZS(s),value:String(a),onChange:o=>n(s,o)},s):s==="fontFamily"?d.jsx(Il,{icon:Rg,label:ZS(s),value:String(a),options:w7e,onChange:o=>n(s,o)},s):s==="fontWeight"?d.jsx(Il,{icon:Rg,label:ZS(s),value:String(a),options:_7e,onChange:o=>n(s,o)},s):s==="borderStyle"?d.jsx(Il,{icon:Ny,label:ZS(s),value:String(a),options:I7e,onChange:o=>n(s,o)},s):d.jsx(qd,{icon:HN,label:ZS(s),value:String(a),units:T7e(s),onChange:o=>n(s,o),min:M7e(s),max:D7e(s)},s):null};return d.jsxs(wl,{title:`Modified Styles (${e.length})`,children:[r.layout.length>0&&d.jsxs("div",{className:"modified-category",children:[d.jsx("h4",{className:"category-title",children:"Layout"}),r.layout.map(i)]}),r.spacing.length>0&&d.jsxs("div",{className:"modified-category",children:[d.jsx("h4",{className:"category-title",children:"Spacing"}),r.spacing.map(i)]}),r.appearance.length>0&&d.jsxs("div",{className:"modified-category",children:[d.jsx("h4",{className:"category-title",children:"Appearance"}),r.appearance.map(i)]}),r.typography.length>0&&d.jsxs("div",{className:"modified-category",children:[d.jsx("h4",{className:"category-title",children:"Typography"}),r.typography.map(i)]})]})}function ZS(t){return t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim()}function T7e(t){return["width","height","top","left","right","bottom"].includes(t)?["reset","px","%","rem","em","vh","vw"]:["padding","margin","gap"].includes(t)?["reset","px","rem","em"]:["fontSize","lineHeight","letterSpacing"].includes(t)?["reset","px","rem","em","pt"]:["borderWidth"].includes(t)?["reset","px"]:["borderRadius"].includes(t)?["reset","px","%","rem","em"]:["px"]}function M7e(t){return["top","left","right","bottom","letterSpacing"].includes(t)?-9999:0}function D7e(t){return["width","height","top","left","right","bottom"].includes(t)?9999:["padding","margin","gap","borderRadius"].includes(t)?500:["fontSize"].includes(t)?200:["borderWidth"].includes(t)?100:["lineHeight","letterSpacing"].includes(t)?10:9999}function R7e({isActive:t}){return t?d.jsx(P7e,{}):null}function P7e(){const t=Di(m=>m.selectedElement),[e,n]=C.useState("all"),{expandAll:r,collapseAll:i,collapsedSections:s,focusMode:a,toggleFocusMode:o}=Koe(),{copyStyles:l,pasteStyles:c}=ZE(),u=C.useMemo(()=>t?Ele(t).length:0,[t]),h=C.useCallback(async()=>{t?.style&&await l(t.style)},[t,l]),f=C.useCallback(async()=>{await c()},[c]),p=C.useMemo(()=>[{key:"c",modifier:"cmdShift",handler:h,description:"Copy Styles"},{key:"v",modifier:"cmdShift",handler:f,description:"Paste Styles"},{key:"s",modifier:"altShift",handler:o,description:"Toggle Focus Mode"},{key:"s",modifier:"alt",handler:()=>{s.size===4?r():i()},description:"Expand/Collapse All Sections"}],[h,f,o,s,r,i]);return G_(p,[h,f,o,s,r,i]),t?d.jsxs("div",{className:"panel",children:[d.jsxs("div",{className:"panel-header",children:[d.jsxs(tf,{indicator:!0,"aria-label":"Style filter",selectionMode:"single",selectedKeys:[e],onSelectionChange:m=>{const v=Array.from(m)[0];n(v)},children:[d.jsx($r,{id:"all",children:"Style"}),d.jsxs($r,{id:"modified",children:["modify ",u>0&&`(${u})`]})]}),d.jsxs("div",{className:"panel-actions",children:[d.jsx(Xn,{variant:"ghost",className:"iconButton",onPress:h,"aria-label":"Copy styles",isDisabled:!t?.style||Object.keys(t.style).length===0,children:d.jsx(T8,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})}),d.jsx(Xn,{variant:"ghost",className:"iconButton",onPress:f,"aria-label":"Paste styles",children:d.jsx(B8,{color:ge.color,size:ge.size,strokeWidth:ge.stroke})})]}),a&&d.jsx("div",{className:"focus-mode-indicator",children:"Focus Mode"})]}),d.jsx("div",{className:"panel-contents",children:e==="all"?d.jsxs(d.Fragment,{children:[d.jsx(b7e,{selectedElement:t}),d.jsx(C7e,{selectedElement:t}),d.jsx(E7e,{selectedElement:t}),d.jsx(S7e,{selectedElement:t})]}):d.jsx(B7e,{selectedElement:t})},t.id)]}):d.jsx(Ko,{message:" "})}const k7e=["onClick","onMouseEnter","onMouseLeave","onChange","onSubmit","onFocus","onBlur","onKeyDown","onKeyUp"];function D9(t){return k7e.includes(t)}const SP={mouse:{label:"Mouse Events",events:["onClick","onMouseEnter","onMouseLeave"]},form:{label:"Form Events",events:["onChange","onSubmit","onFocus","onBlur"]},keyboard:{label:"Keyboard Events",events:["onKeyDown","onKeyUp"]}},C6={navigation:{label:"Navigation",actions:["navigate","scrollTo"]},ui:{label:"UI Control",actions:["toggleVisibility","showModal","hideModal","showToast"]},data:{label:"Data Management",actions:["setState","updateState","copyToClipboard"]},form:{label:"Form Operations",actions:["validateForm","resetForm","submitForm","updateFormField"]},component:{label:"Component Interaction",actions:["setComponentState","triggerComponentAction"]},collection:{label:"Collection Operations",actions:["filterCollection","selectItem","clearSelection"]},dataPanel:{label:"Data Panel",actions:["fetchDataTable","refreshDataTable","executeApi","setVariable","getVariable","loadDataTable","syncComponent","saveToDataTable"]},custom:{label:"Custom",actions:["customFunction","apiCall"]}},sy={onClick:"",onMouseEnter:" ",onMouseLeave:" ",onFocus:"",onBlur:" ",onChange:" ",onSubmit:"",onKeyDown:" ",onKeyUp:" "},kg={navigate:" ",toggle_visibility:"/ ",toggleVisibility:"/ ",update_state:" ",updateState:" ",setState:" ",show_modal:" ",showModal:" ",hide_modal:" ",hideModal:" ",showToast:" ",custom_function:" ",customFunction:" ",scroll_to:" ",scrollTo:" ",copy_to_clipboard:" ",copyToClipboard:" ",validate_form:" ",validateForm:" ",reset_form:" ",resetForm:" ",submitForm:" ",updateFormField:"  ",apiCall:"API ",setComponentState:"  ",triggerComponentAction:"  ",filterCollection:" ",selectItem:" ",clearSelection:" ",fetchDataTable:"DataTable ",refreshDataTable:"DataTable ",executeApi:"API ",setVariable:" ",getVariable:" ",loadDataTable:"DataTable ",syncComponent:" ",saveToDataTable:"DataTable "},N7e={scroll_to:"scrollTo",toggle_visibility:"toggleVisibility",update_state:"updateState",show_modal:"showModal",hide_modal:"hideModal",copy_to_clipboard:"copyToClipboard",validate_form:"validateForm",reset_form:"resetForm",submit_form:"submitForm",update_form_field:"updateFormField",set_state:"setState",set_component_state:"setComponentState",trigger_component_action:"triggerComponentAction",filter_collection:"filterCollection",select_item:"selectItem",clear_selection:"clearSelection",custom_function:"customFunction",api_call:"apiCall",show_toast:"showToast"};function L7e(t){return N7e[t]??t}const F7e=["onClick","onChange","onSubmit","onKeyDown","onKeyUp","onMouseEnter","onMouseLeave","onFocus","onBlur"];function Sle({onSelect:t,registeredTypes:e=[],selectedType:n,allowedTypes:r,isDisabled:i=!1,inline:s=!1}){const[a,o]=C.useState(""),[l,c]=C.useState(!1),u=C.useMemo(()=>{const E=r&&r.length>0?r:Object.keys(sy);return n&&!E.includes(n)?Array.from(new Set([...E,n])):E},[r,n]),h=C.useMemo(()=>u.filter(E=>!e.includes(E)||E===n),[u,e,n]),f=C.useMemo(()=>{const E=[];for(const w of F7e)if(h.includes(w)&&w!==n&&(E.push(w),E.length>=3))break;return E},[h,n]),p=C.useMemo(()=>{if(!a)return h;const E=a.toLowerCase();return h.filter(w=>{const B=sy[w]?.toLowerCase()||"";return w.toLowerCase().includes(E)||B.includes(E)})},[h,a]),m=C.useMemo(()=>{const E=[],w=new Set;typeof SP<"u"?Object.entries(SP).forEach(([,D])=>{const T=D,M=T.events.filter(R=>p.includes(R));M.length>0&&(E.push({category:T.label,events:M}),M.forEach(R=>w.add(R)))}):E.push({category:"Events",events:p});const B=p.filter(D=>!w.has(D));return B.length>0&&typeof SP<"u"&&E.push({category:"Events",events:B}),E},[p]),v=E=>{t(E),o(""),c(!1)},A=C.useRef(null),x=E=>{c(E),E?setTimeout(()=>{A.current?.focus()},50):o("")};return s?d.jsxs(cE,{isOpen:l,onOpenChange:x,children:[d.jsxs(en,{className:"event-picker-inline-trigger",isDisabled:i,"aria-label":"  ",children:[d.jsx("span",{className:"event-picker-value",children:n?sy[n]||n:"Select event..."}),d.jsx(zs,{size:14})]}),d.jsxs(j_,{placement:"bottom start",offset:4,className:"event-picker-popover",showArrow:!1,children:[d.jsxs("div",{className:"event-picker-search",children:[d.jsx(Xd,{size:14,color:ge.color}),d.jsx("input",{ref:A,className:"event-picker-search-input",placeholder:"Search events...",value:a,onChange:E=>o(E.target.value)})]}),d.jsx($i,{className:"event-picker-list","aria-label":"  ",selectionMode:"single",onSelectionChange:E=>{const w=Array.from(E)[0];w&&v(w)},children:p.length===0?d.jsx(Sr,{id:"empty",textValue:"No events found",children:d.jsxs("div",{className:"event-picker-empty",children:[d.jsx(Xd,{size:16,color:ge.color}),d.jsx("span",{children:"No events found"})]})}):m.flatMap(E=>[d.jsx(Sr,{id:`label-${E.category}`,textValue:E.category,className:"event-group-label-item",children:d.jsx("div",{className:"event-group-label",children:E.category})},`label-${E.category}`),...E.events.map(w=>d.jsxs(Sr,{id:w,className:"event-item",textValue:sy[w]||w,children:[d.jsx("span",{className:"event-name",children:sy[w]||w}),d.jsx("span",{className:"event-type-code",children:w})]},w))])})]})]}):d.jsxs(cE,{isOpen:l,onOpenChange:x,children:[d.jsx(en,{className:"iconButton",isDisabled:i||h.length===0,"aria-label":" ",children:d.jsx(eE,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})}),d.jsxs(j_,{placement:"bottom end",offset:4,className:"event-picker-popover",showArrow:!1,children:[!a&&f.length>0&&d.jsxs("div",{className:"event-picker-recommended",children:[d.jsxs("div",{className:"event-picker-recommended-header",children:[d.jsx(ib,{size:12,color:ge.color}),d.jsx("span",{children:"Recommended"})]}),d.jsx("div",{className:"event-picker-recommended-list",children:f.map(E=>d.jsx("button",{type:"button",className:"event-picker-recommended-item",onClick:()=>v(E),children:d.jsx("span",{className:"event-name",children:sy[E]||E})},E))})]}),d.jsxs("div",{className:"event-picker-search",children:[d.jsx(Xd,{size:14,color:ge.color}),d.jsx("input",{ref:A,className:"event-picker-search-input",placeholder:"Search events...",value:a,onChange:E=>o(E.target.value)})]}),d.jsx($i,{className:"event-picker-list","aria-label":"  ",selectionMode:"single",onSelectionChange:E=>{const w=Array.from(E)[0];w&&v(w)},children:p.length===0?d.jsx(Sr,{id:"empty",textValue:"No events found",children:d.jsx("div",{className:"event-picker-empty",children:d.jsx("span",{children:"No events found"})})}):m.flatMap(E=>[d.jsx(Sr,{id:`label-${E.category}`,textValue:E.category,className:"event-group-label-item",children:d.jsx("div",{className:"event-group-label",children:E.category})},`label-${E.category}`),...E.events.map(w=>d.jsxs(Sr,{id:w,className:"event-item",textValue:sy[w]||w,children:[d.jsx("span",{className:"event-name",children:sy[w]||w}),d.jsx("span",{className:"event-type-code",children:w})]},w))])})]})]})}function j7e(t,e){if(t.length!==e.length)return!1;const n=new Set(t.map(i=>i.id)),r=new Set(e.map(i=>i.id));if(n.size!==r.size)return!1;for(const i of n)if(!r.has(i))return!1;return!0}function O7e(t){const e=t.map(u=>({...u,actions:u.actions||[]})),n=C.useRef(e),r=UE({initialItems:e,getKey:u=>u.id});C.useEffect(()=>{j7e(n.current,e)||(r.items.forEach(u=>{r.remove(u.id)}),e.forEach(u=>{r.append(u)}),n.current=e)},[e,r]);const i=u=>{const h={id:`event-${u}-${Date.now()}`,event:u,actions:[],enabled:!0};return r.append(h),h},s=(u,h)=>{if("id"in h&&"event"in h)r.update(u,h);else{const f=r.getItem(u);f&&r.update(u,{...f,...h})}},a=u=>{const h=r.getItem(u);if(!h)return;const f={...h,id:`${u}-copy-${Date.now()}`,actions:(h.actions||[]).map(p=>({...p,id:`${p.id}-copy-${Date.now()}`}))};return r.append(f),f},o=u=>{const h=r.getItem(u);h&&r.update(u,{...h,enabled:!h.enabled})},l=()=>{r.items.forEach(u=>{r.update(u.id,{...u,enabled:!0})})},c=()=>{r.items.forEach(u=>{r.update(u.id,{...u,enabled:!1})})};return{handlers:r.items,addHandler:i,updateHandler:s,removeHandler:r.remove,duplicateHandler:a,getHandler:r.getItem,toggleHandler:o,enableAll:l,disableAll:c,selectedKeys:r.selectedKeys,setSelectedKeys:r.setSelectedKeys}}function z7e(t,e){if(t.length!==e.length)return!1;const n=new Set(t.map(i=>i.id)),r=new Set(e.map(i=>i.id));if(n.size!==r.size)return!1;for(const i of n)if(!r.has(i))return!1;return!0}function R9(t){const e=C.useRef(t),n=UE({initialItems:t,getKey:p=>p.id||""});C.useEffect(()=>{z7e(e.current,t)||(n.items.forEach(p=>{p.id&&n.remove(p.id)}),t.forEach(p=>{n.append(p)}),e.current=t)},[t,n]);const r=(p,m={})=>{const v={id:`action-${p}-${Date.now()}`,type:p,config:m,enabled:!0};return n.append(v),v},i=(p,m)=>{const v=n.getItem(p);v&&n.update(p,{...v,...m})},s=(p,m)=>{n.move(p,m)},a=(p,m)=>{[...p].reverse().forEach((A,x)=>{n.move(A,m+x)})},o=p=>{const m=n.getItem(p);if(!m)return;const v=n.items.findIndex(x=>x.id===p),A={...m,id:`${p}-copy-${Date.now()}`};return n.insert(v+1,A),A},l=p=>{const m=n.getItem(p);m&&n.update(p,{...m,enabled:!m.enabled})},c=()=>{n.items.forEach(p=>{p.id&&n.update(p.id,{...p,enabled:!0})})},u=()=>{n.items.forEach(p=>{p.id&&n.update(p.id,{...p,enabled:!1})})},h=()=>{Array.from(n.selectedKeys).forEach(m=>n.remove(m))},f=()=>{n.items.forEach(p=>{p.id&&n.remove(p.id)})};return{actions:n.items,addAction:r,updateAction:i,removeAction:n.remove,moveAction:s,moveActions:a,duplicateAction:o,getAction:n.getItem,toggleAction:l,enableAll:c,disableAll:u,removeSelectedActions:h,removeAll:f,selectedKeys:n.selectedKeys,setSelectedKeys:n.setSelectedKeys}}function $7e(t){const[e,n]=C.useState(null),r=C.useMemo(()=>e&&t.find(f=>f.id===e)||null,[e,t]),i=f=>{n(f)},s=f=>e===f,a=()=>{n(null)};return{selectedHandlerId:e,selectedHandler:r,selectHandler:i,isSelected:s,clearSelection:a,selectNext:()=>{if(t.length===0)return;if(!e){n(t[0].id);return}const f=t.findIndex(p=>p.id===e);f===-1||f===t.length-1||n(t[f+1].id)},selectPrevious:()=>{if(t.length===0)return;if(!e){n(t[t.length-1].id);return}const f=t.findIndex(p=>p.id===e);f===-1||f===0||n(t[f-1].id)},selectFirst:()=>{t.length>0&&n(t[0].id)},selectLast:()=>{t.length>0&&n(t[t.length-1].id)},selectAfterDelete:f=>{if(e!==f)return;const p=t.findIndex(m=>m.id===f);if(p===-1){a();return}p<t.length-1?n(t[p+1].id):p>0?n(t[p-1].id):a()}}}function Q7e({debounce:t,throttle:e,onChange:n}){const r=t?"debounce":e?"throttle":"none",i=t||e||300,s=l=>{l==="none"?n({debounce:void 0,throttle:void 0}):l==="debounce"?n({debounce:i,throttle:void 0}):l==="throttle"&&n({debounce:void 0,throttle:i})},a=l=>{r==="debounce"?n({debounce:l,throttle:void 0}):r==="throttle"&&n({debounce:void 0,throttle:l})},o=[{label:"Fast",value:100},{label:"Normal",value:300},{label:"Slow",value:1e3}];return d.jsxs("div",{className:"debounce-throttle-editor",children:[d.jsxs(V3e,{value:r,onChange:l=>s(l),className:"timing-mode-group",children:[d.jsx(xn,{className:"field-label",children:"Event Timing"}),d.jsxs("div",{className:"radio-options",children:[d.jsx(jR,{value:"none",className:"react-aria-Radio",children:"None (immediate)"}),d.jsx(jR,{value:"debounce",className:"react-aria-Radio",children:"Debounce (wait for pause)"}),d.jsx(jR,{value:"throttle",className:"react-aria-Radio",children:"Throttle (limit frequency)"})]})]}),r!=="none"&&d.jsxs(d.Fragment,{children:[d.jsxs(dr,{className:"field",children:[d.jsxs(xn,{className:"field-label",children:[r==="debounce"?"Debounce":"Throttle"," Time (ms)"]}),d.jsx(br,{className:"field-input",type:"number",value:String(i),onChange:l=>a(Number(l.target.value)||300),min:0,step:50})]}),d.jsxs("div",{className:"presets-group",children:[d.jsx(xn,{className:"field-label",children:"Presets:"}),d.jsx("div",{className:"preset-buttons",children:o.map(l=>d.jsxs(en,{className:"react-aria-Button sm",onPress:()=>a(l.value),children:[l.label," (",l.value,"ms)"]},l.label))})]}),d.jsx("div",{className:"field-hint",children:r==="debounce"?d.jsxs("p",{children:[d.jsx("strong",{children:"Debounce:"})," Waits for user to stop typing/clicking before executing. Good for search inputs."]}):d.jsxs("p",{children:[d.jsx("strong",{children:"Throttle:"})," Limits execution frequency. Good for scroll/resize events."]})})]})]})}function Cj({direction:t,className:e=""}){return d.jsx("div",{className:`block-connector ${t} ${e}`.trim(),role:"presentation","aria-hidden":"true"})}function U7e({trigger:t,onChange:e,registeredEventTypes:n=[],allowedEventTypes:r=[],onOptionsClick:i,showConnector:s=!0}){const a=o=>{e({...t,event:o})};return d.jsxs("div",{className:"event-block when-block",role:"group","aria-label":"When trigger",children:[d.jsxs("div",{className:"block-header",children:[d.jsx(ib,{className:"block-icon",size:ge.size,strokeWidth:ge.stroke}),d.jsx("span",{className:"block-label",children:"WHEN"})]}),d.jsx("div",{className:"block-content",children:d.jsxs("div",{className:"trigger-row",children:[d.jsx(Sle,{onSelect:a,registeredTypes:n,selectedType:t.event,allowedTypes:r}),d.jsx("span",{className:"trigger-target",children:t.target==="self"?"on this element":`on ${t.target}`}),i&&d.jsx(en,{className:"iconButton",onPress:i,"aria-label":"Trigger options",children:d.jsx(gf,{size:14,color:ge.color,strokeWidth:ge.stroke})})]})}),s&&d.jsx(Cj,{direction:"down"})]})}const E6={equals:{label:"=",unary:!1,description:""},not_equals:{label:"!=",unary:!1,description:" "},contains:{label:"contains",unary:!1,description:""},not_contains:{label:"not contains",unary:!1,description:" "},starts_with:{label:"starts with",unary:!1,description:"~ "},ends_with:{label:"ends with",unary:!1,description:"~ "},matches_regex:{label:"matches",unary:!1,description:" "},greater_than:{label:">",unary:!1,description:" "},less_than:{label:"<",unary:!1,description:" "},greater_or_equal:{label:">=",unary:!1,description:""},less_or_equal:{label:"<=",unary:!1,description:""},is_empty:{label:"is empty",unary:!0,description:" "},is_not_empty:{label:"is not empty",unary:!0,description:"  "},is_true:{label:"is true",unary:!0,description:""},is_false:{label:"is false",unary:!0,description:""},is_null:{label:"is null",unary:!0,description:"null"},is_not_null:{label:"is not null",unary:!0,description:"null "}};function P9(t){return E6[t].unary}function k9(){return{id:`cond-${Date.now()}`,left:{type:"element",value:""},operator:"is_not_empty"}}const H7e=[{label:"Comparison",operators:["equals","not_equals","greater_than","less_than","greater_or_equal","less_or_equal"]},{label:"String",operators:["contains","not_contains","starts_with","ends_with","matches_regex"]},{label:"Check",operators:["is_empty","is_not_empty","is_true","is_false","is_null","is_not_null"]}];function G7e({value:t,onChange:e}){const n=E6[t];return d.jsxs(da,{className:"operator-picker",selectedKey:t,onSelectionChange:r=>e(r),"aria-label":"Condition operator",children:[d.jsxs(en,{className:"operator-picker-button",children:[d.jsx($s,{children:n.label}),d.jsx(zs,{size:12})]}),d.jsx(gs,{className:"operator-picker-popover",children:d.jsx($i,{className:"operator-picker-list",children:H7e.map(r=>d.jsxs("div",{className:"operator-group",children:[d.jsx("div",{className:"operator-group-label",children:r.label}),r.operators.map(i=>{const s=E6[i];return d.jsxs(Sr,{id:i,className:"operator-item",textValue:s.label,children:[d.jsx("span",{className:"operator-symbol",children:s.label}),d.jsx("span",{className:"operator-description",children:s.description})]},i)})]},r.label))})})]})}function V7e({condition:t,onChange:e,onRemove:n,dragHandleProps:r={}}){const i=P9(t.operator),s=c=>c.startsWith("#")||c.startsWith(".")?"element":c.startsWith("state.")?"state":c.startsWith("event.")?"event":"literal",a=c=>{const u=s(c);e({...t,left:{type:u,value:c}})},o=c=>{const u={...t,operator:c};P9(c)?delete u.right:u.right||(u.right={type:"literal",value:""}),e(u)},l=c=>{if(!t.right)return;const u={...t.right,value:c};e({...t,right:u})};return d.jsxs("div",{className:"condition-row",role:"group","aria-label":"Condition",children:[d.jsx("div",{className:"condition-drag-handle",...r,children:d.jsx(hY,{size:14,color:ge.color,strokeWidth:ge.stroke})}),d.jsx(dr,{className:"condition-operand condition-left","aria-label":"Left operand",children:d.jsx(br,{value:String(t.left.value),onChange:c=>a(c.target.value),placeholder:"#element.value"})}),d.jsx(G7e,{value:t.operator,onChange:o}),!i&&d.jsx(dr,{className:"condition-operand condition-right","aria-label":"Right operand",children:d.jsx(br,{value:String(t.right?.value??""),onChange:c=>l(c.target.value),placeholder:"value"})}),d.jsx(en,{className:"iconButton condition-remove",onPress:n,"aria-label":"Remove condition",children:d.jsx(Gd,{size:14,color:ge.color,strokeWidth:ge.stroke})})]})}function W7e({value:t,onChange:e}){const n=()=>{e(t==="AND"?"OR":"AND")};return d.jsx("div",{className:"operator-toggle",children:d.jsx(en,{className:"toggle-button",onPress:n,"aria-label":`Change to ${t==="AND"?"OR":"AND"}`,children:t})})}function K7e({conditions:t,onChange:e,onRemove:n,showSplitConnector:r=!1}){const[i,s]=C.useState(!0);if(!t)return d.jsxs(en,{className:"add-condition-button",onPress:()=>e({operator:"AND",conditions:[k9()]}),children:[d.jsx(Pc,{size:14}),"Add Condition (optional)"]});const a=()=>{e({...t,conditions:[...t.conditions,k9()]})},o=(u,h)=>{const f=[...t.conditions];f[u]=h,e({...t,conditions:f})},l=u=>{const h=t.conditions.filter((f,p)=>p!==u);h.length===0?n():e({...t,conditions:h})},c=u=>{e({...t,operator:u})};return d.jsxs("div",{className:"event-block if-block",role:"group","aria-label":"Condition block",children:[d.jsxs("div",{className:"block-header",children:[d.jsx(Xd,{className:"block-icon",size:ge.size,strokeWidth:ge.stroke}),d.jsx("span",{className:"block-label",children:"IF"}),d.jsx("span",{className:"block-sublabel",children:"(optional)"}),d.jsxs("div",{className:"block-actions",children:[d.jsx(en,{className:"iconButton",onPress:()=>s(!i),"aria-label":i?"Collapse conditions":"Expand conditions","aria-expanded":i,children:i?d.jsx(zs,{size:14,color:ge.color,strokeWidth:ge.stroke}):d.jsx(Sl,{size:14,color:ge.color,strokeWidth:ge.stroke})}),d.jsx(en,{className:"iconButton",onPress:n,"aria-label":"Remove condition block",children:d.jsx(Gd,{size:14,color:ge.color,strokeWidth:ge.stroke})})]})]}),i&&d.jsxs("div",{className:"block-content",children:[t.conditions.map((u,h)=>d.jsxs(C.Fragment,{children:[h>0&&d.jsx(W7e,{value:t.operator,onChange:c}),d.jsx(V7e,{condition:u,onChange:f=>o(h,f),onRemove:()=>l(h)})]},u.id)),d.jsxs(en,{className:"add-row-button",onPress:a,children:[d.jsx(Pc,{size:14}),"Add Condition"]})]}),d.jsx(Cj,{direction:r?"split":"down"})]})}const q7e={navigate:" ",scrollTo:" ",setState:" ",updateState:" ",apiCall:"API ",showModal:" ",hideModal:" ",showToast:" ",toggleVisibility:"/ ",validateForm:" ",resetForm:" ",submitForm:" ",setComponentState:"  ",triggerComponentAction:"  ",updateFormField:"  ",filterCollection:" ",selectItem:" ",clearSelection:" ",loadDataTable:"DataTable ",syncComponent:" ",saveToDataTable:"DataTable ",copyToClipboard:" ",customFunction:" "},Y7e={navigate:dAe,scrollTo:Yge,setState:qo,updateState:mb,apiCall:FD,showModal:Vw,hideModal:Vw,showToast:lme,toggleVisibility:Vw,validateForm:FD,resetForm:mb,submitForm:FD,setComponentState:qo,triggerComponentAction:Kw,updateFormField:qo,filterCollection:qo,selectItem:Kw,clearSelection:Kw,copyToClipboard:Ome,customFunction:dI};function X7e(t){const e=t.config;switch(t.type){case"navigate":return e.path||"";case"apiCall":return`${e.method||"GET"} ${e.endpoint||""}`;case"showToast":return e.message||"";case"setState":case"updateState":return e.storePath||"";case"showModal":case"hideModal":return e.modalId||"";case"toggleVisibility":return e.elementId||"";case"customFunction":return e.code?"(custom code)":"";default:return""}}function J7e({action:t,index:e,onClick:n,onRemove:r,isExpanded:i=!1,onToggleExpand:s,dragHandleProps:a={}}){const o=Y7e[t.type]||dI,l=q7e[t.type]||t.type,c=X7e(t);return d.jsxs("div",{className:`action-item ${t.enabled===!1?"disabled":""}`,role:"listitem","aria-label":`Action ${e}: ${l}`,"data-action-id":t.id,children:[d.jsx("div",{className:"action-drag-handle",...a,children:d.jsx(hY,{size:14,color:ge.color,strokeWidth:ge.stroke})}),d.jsxs("div",{className:"list-item-icon",children:[d.jsx(o,{size:16}),d.jsx("span",{className:"list-item-index",children:e})]}),d.jsxs("button",{type:"button",className:"action-info-button",onClick:n,"aria-label":`Edit ${l}`,children:[d.jsx("span",{className:"action-type",children:l}),c&&d.jsx("span",{className:"action-summary",children:c})]}),d.jsxs("div",{className:"action-controls",children:[s&&d.jsx(en,{className:"iconButton",onPress:s,"aria-label":i?"Collapse":"Expand","aria-expanded":i,children:i?d.jsx(zs,{size:14,color:ge.color,strokeWidth:ge.stroke}):d.jsx(Sl,{size:14,color:ge.color,strokeWidth:ge.stroke})}),r&&d.jsx(en,{className:"iconButton",onPress:r,"aria-label":"Delete action",children:d.jsx(Gd,{size:14,color:ge.color,strokeWidth:ge.stroke})})]})]})}function N9({type:t,actions:e,onAddAction:n,onActionClick:r,onRemoveAction:i,showConnector:s=!0,isDisabled:a=!1,defaultCollapsed:o=!1}){const[l,c]=C.useState(o),[u,h]=C.useState(null),f=t==="then",p=f?"then-block":"else-block",m=f?"THEN":"ELSE",v=f?"Actions when condition is true":"Actions when condition is false",A=x=>{h(E=>E===x?null:x)};return d.jsxs("div",{className:`branch-block ${p}`,children:[s&&d.jsx(Cj,{direction:"down",className:f?"success":"fallback"}),d.jsxs("div",{className:"block-container",role:"region","aria-label":v,"data-block-type":t,children:[d.jsxs("div",{className:"block-header",children:[d.jsx(en,{className:"iconButton block-collapse-btn",onPress:()=>c(!l),"aria-expanded":!l,"aria-label":l?`Expand ${m} block`:`Collapse ${m} block`,children:l?d.jsx(Sl,{size:16,color:ge.color,strokeWidth:ge.stroke}):d.jsx(zs,{size:16,color:ge.color,strokeWidth:ge.stroke})}),d.jsx("span",{className:"block-label",children:m}),d.jsxs("span",{className:"block-count",children:[e.length," action",e.length!==1?"s":""]}),d.jsx("div",{className:"block-header-spacer"}),d.jsx(en,{className:"iconButton block-collapse-btn",onPress:n,isDisabled:a,"aria-label":`Add action to ${m}`,children:d.jsx(Pc,{size:16,color:ge.color,strokeWidth:ge.stroke})})]}),!l&&d.jsx("div",{className:"block-content",role:"list","aria-label":`${m} actions`,children:e.length===0?d.jsxs("div",{className:"block-empty",children:[d.jsx("span",{children:"No actions"}),d.jsxs(en,{className:"add-action-btn",onPress:n,isDisabled:a,children:[d.jsx(Pc,{size:12}),d.jsx("span",{children:"Add action"})]})]}):e.map((x,E)=>d.jsx(J7e,{action:x,index:E+1,onClick:()=>r?.(x),onRemove:()=>i?.(x.id),isExpanded:u===x.id,onToggleExpand:()=>A(x.id)},x.id))})]})]})}function Z7e(t){if(!t)return"/";const e=t.trim();return e.startsWith("/")?e:`/${e}`}function eQe({config:t,onChange:e}){const n=(r,i)=>{e(r==="path"&&typeof i=="string"?{...t,[r]:Z7e(i)}:{...t,[r]:i})};return d.jsxs("div",{className:"navigate-action-editor",children:[d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Path"}),d.jsx(br,{className:"field-input",value:t.path,onChange:r=>n("path",r.target.value),placeholder:"/page-name"})]}),d.jsx(N_,{className:"checkbox-field",isSelected:t.openInNewTab||!1,onChange:r=>n("openInNewTab",r),children:"Open in new tab"}),d.jsx(N_,{className:"checkbox-field",isSelected:t.replace||!1,onChange:r=>n("replace",r),children:"Replace history"})]})}function tQe({config:t,onChange:e}){const[n,r]=C.useState(()=>JSON.stringify(t.value,null,2)),[i,s]=C.useState(""),a=l=>{e({...t,storePath:l})},o=l=>{r(l);try{const c=JSON.parse(l);e({...t,value:c}),s("")}catch{s(" JSON ")}};return d.jsxs("div",{className:"setstate-action-editor",children:[d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Store Path"}),d.jsx(br,{className:"field-input",value:t.storePath,onChange:l=>a(l.target.value),placeholder:"app.user.name"})]}),d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Value (JSON)"}),d.jsx(fd,{className:"field-textarea",value:n,onChange:l=>o(l.target.value),rows:4}),i&&d.jsxs("div",{className:"error-message",children:[" ",i]})]})]})}function nQe({config:t,onChange:e}){const[n,r]=C.useState(()=>JSON.stringify(t.headers||{},null,2)),[i,s]=C.useState(()=>JSON.stringify(t.body||{},null,2)),a=h=>{e({...t,endpoint:h})},o=h=>{e({...t,method:h})},l=h=>{r(h);try{const f=JSON.parse(h);e({...t,headers:f})}catch{}},c=h=>{s(h);try{const f=JSON.parse(h);e({...t,body:f})}catch{}},u=["GET","POST","PUT","DELETE","PATCH"];return d.jsxs("div",{className:"apicall-action-editor",children:[d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Endpoint"}),d.jsx(br,{className:"field-input",value:t.endpoint,onChange:h=>a(h.target.value),placeholder:"/api/users"})]}),d.jsxs("div",{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Method"}),d.jsxs(da,{selectedKey:t.method,onSelectionChange:h=>o(h),children:[d.jsx(en,{className:"select-trigger",children:d.jsx($s,{})}),d.jsx(gs,{className:"select-popover",children:d.jsx($i,{className:"select-listbox",children:u.map(h=>d.jsx(Sr,{id:h,children:h},h))})})]})]}),d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Headers (JSON)"}),d.jsx(fd,{className:"field-textarea",value:n,onChange:h=>l(h.target.value),rows:3})]}),d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Body (JSON)"}),d.jsx(fd,{className:"field-textarea",value:i,onChange:h=>c(h.target.value),rows:4})]})]})}function U0({value:t,onChange:e,label:n,placeholder:r="#element or ID",filter:i}){const[s,a]=C.useState(t),o=je(p=>p.currentPageId),l=je(p=>p.getPageElements),c=C.useMemo(()=>{if(!o)return[];const p=l(o);let m=p;return i&&(m=p.filter(v=>i({id:v.id,tag:v.tag,customId:v.customId}))),m.map(v=>({id:v.id,tag:v.tag,customId:v.customId,displayName:v.customId?`#${v.customId}`:`${v.tag} (${v.id.slice(0,8)})`}))},[o,l,i]),u=C.useMemo(()=>{if(!s)return c;const p=s.toLowerCase();return c.filter(m=>m.displayName.toLowerCase().includes(p)||m.tag.toLowerCase().includes(p)||m.id.toLowerCase().includes(p))},[c,s]),h=p=>{if(!p)return;const m=c.find(v=>v.id===p);if(m){const v=m.customId?`#${m.customId}`:m.id;a(v),e(v)}},f=p=>{a(p),e(p)};return d.jsxs($T,{className:"element-picker",inputValue:s,onInputChange:f,onSelectionChange:h,allowsCustomValue:!0,"aria-label":n||"Element selector",children:[n&&d.jsx(xn,{className:"element-picker-label",children:n}),d.jsxs("div",{className:"element-picker-input-wrapper",children:[d.jsx(R8,{size:14,className:"element-picker-icon"}),d.jsx(br,{className:"element-picker-input",placeholder:r}),d.jsx(en,{className:"element-picker-button",children:d.jsx(zs,{size:14})})]}),d.jsx(gs,{className:"element-picker-popover",children:d.jsx($i,{className:"element-picker-list",children:u.length===0?d.jsxs("div",{className:"element-picker-empty",children:[d.jsx(Xd,{size:16,color:ge.color}),d.jsx("span",{children:"No elements found"})]}):u.map(p=>d.jsxs(Sr,{id:p.id,className:"element-picker-item",textValue:p.displayName,children:[d.jsx("span",{className:"element-tag",children:p.tag}),d.jsx("span",{className:"element-name",children:p.displayName})]},p.id))})})]})}function rQe({config:t,onChange:e}){const[n,r]=C.useState(()=>JSON.stringify(t.props||{},null,2)),i=a=>{e({...t,modalId:a})},s=a=>{r(a);try{const o=JSON.parse(a);e({...t,props:o})}catch{}};return d.jsxs("div",{className:"showmodal-action-editor",children:[d.jsx(U0,{label:"Modal ID",value:t.modalId||"",onChange:i,placeholder:"Select modal...",filter:a=>a.tag==="Modal"}),d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Props (JSON)"}),d.jsx(fd,{className:"field-textarea",value:n,onChange:a=>s(a.target.value),rows:4})]})]})}function iQe({config:t,onChange:e}){const n=["info","success","warning","error"],r=a=>{e({...t,message:a})},i=a=>{e({...t,type:a})},s=a=>{e({...t,duration:a})};return d.jsxs("div",{className:"showtoast-action-editor",children:[d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Message"}),d.jsx(br,{className:"field-input",value:t.message,onChange:a=>r(a.target.value),placeholder:"Operation successful!"})]}),d.jsxs("div",{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Type"}),d.jsxs(da,{selectedKey:t.type||"info",onSelectionChange:a=>i(a),children:[d.jsx(en,{className:"select-trigger",children:d.jsx($s,{})}),d.jsx(gs,{className:"select-popover",children:d.jsx($i,{className:"select-listbox",children:n.map(a=>d.jsx(Sr,{id:a,children:a},a))})})]})]}),d.jsxs(U3e,{className:"field",value:t.duration||3e3,onChange:a=>s(a),children:[d.jsx(xn,{className:"field-label",children:"Duration (ms)"}),d.jsx(br,{className:"field-input"})]})]})}function sQe({config:t,onChange:e}){const n=r=>{e({...t,formId:r})};return d.jsxs("div",{className:"validateform-action-editor",children:[d.jsx(U0,{label:"Form ID",value:t.formId||"",onChange:n,placeholder:"Select form...",filter:r=>r.tag==="Form"}),d.jsx("div",{className:"helper-text",children:d.jsx("p",{children:"onValid  onInvalid      ."})})]})}function aQe({config:t,onChange:e}){const n=(i,s)=>{e({...t,[i]:s})},r=[{value:"top",label:"Top"},{value:"center",label:"Center"},{value:"bottom",label:"Bottom"}];return d.jsxs("div",{className:"scrollto-action-editor",children:[d.jsx(U0,{label:"Element ID",value:t.elementId||"",onChange:i=>n("elementId",i||void 0),placeholder:"Select element..."}),d.jsxs("div",{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Position"}),d.jsxs(da,{selectedKey:t.position||"top",onSelectionChange:i=>n("position",i),children:[d.jsx(en,{className:"select-trigger",children:d.jsx($s,{})}),d.jsx(gs,{className:"select-popover",children:d.jsx($i,{className:"select-listbox",children:r.map(i=>d.jsx(Sr,{id:i.value,children:i.label},i.value))})})]})]}),d.jsx(N_,{className:"checkbox-field",isSelected:t.smooth!==!1,onChange:i=>n("smooth",i),children:"Smooth scroll"}),d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Offset (px)"}),d.jsx(br,{className:"field-input",type:"number",value:String(t.offset||0),onChange:i=>n("offset",Number(i.target.value)||void 0),placeholder:"0"})]})]})}function oQe({config:t,onChange:e}){const[n,r]=C.useState(()=>JSON.stringify(t.value,null,2)),[i,s]=C.useState(""),a=c=>{e({...t,storePath:c})},o=c=>{r(c);try{const u=JSON.parse(c);e({...t,value:u}),s("")}catch{s(" JSON ")}},l=c=>{e({...t,merge:c})};return d.jsxs("div",{className:"updatestate-action-editor",children:[d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Store Path"}),d.jsx(br,{className:"field-input",value:t.storePath,onChange:c=>a(c.target.value),placeholder:"cart.items"})]}),d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Value (JSON or Template)"}),d.jsx(fd,{className:"field-textarea",value:n,onChange:c=>o(c.target.value),rows:4,placeholder:'{"id": 123} or {{response.data}}'}),i&&d.jsxs("div",{className:"error-message",children:[" ",i]})]}),d.jsx(N_,{className:"checkbox-field",isSelected:t.merge||!1,onChange:c=>l(c),children:"Merge with existing state"})]})}function lQe({config:t,onChange:e}){const n=r=>{e({...t,modalId:r||void 0})};return d.jsxs("div",{className:"hidemodal-action-editor",children:[d.jsx(U0,{label:"Modal ID (empty = close all)",value:t.modalId||"",onChange:n,placeholder:"Select modal...",filter:r=>r.tag==="Modal"}),d.jsx("p",{className:"field-hint",children:"Leave empty to close all open modals"})]})}function cQe({config:t,onChange:e}){const n=(s,a)=>{e({...t,[s]:a})},r=[{value:"",label:"Toggle"},{value:"true",label:"Show"},{value:"false",label:"Hide"}],i=[{value:"ease",label:"Ease"},{value:"ease-in",label:"Ease In"},{value:"ease-out",label:"Ease Out"},{value:"ease-in-out",label:"Ease In Out"},{value:"linear",label:"Linear"}];return d.jsxs("div",{className:"togglevisibility-action-editor",children:[d.jsx(U0,{label:"Element ID",value:t.elementId||"",onChange:s=>n("elementId",s),placeholder:"Select element..."}),d.jsxs("div",{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Action"}),d.jsxs(da,{selectedKey:t.show===void 0?"":t.show===!0?"true":"false",onSelectionChange:s=>{n("show",s===""?void 0:s==="true")},children:[d.jsx(en,{className:"select-trigger",children:d.jsx($s,{})}),d.jsx(gs,{className:"select-popover",children:d.jsx($i,{className:"select-listbox",children:r.map(s=>d.jsx(Sr,{id:s.value,children:s.label},s.value))})})]})]}),d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Duration (ms)"}),d.jsx(br,{className:"field-input",type:"number",value:String(t.duration||300),onChange:s=>n("duration",Number(s.target.value)||void 0),placeholder:"300"})]}),d.jsxs("div",{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Easing"}),d.jsxs(da,{selectedKey:t.easing||"ease",onSelectionChange:s=>n("easing",s),children:[d.jsx(en,{className:"select-trigger",children:d.jsx($s,{})}),d.jsx(gs,{className:"select-popover",children:d.jsx($i,{className:"select-listbox",children:i.map(s=>d.jsx(Sr,{id:s.value,children:s.label},s.value))})})]})]})]})}function uQe({config:t,onChange:e}){const n=r=>{e({...t,formId:r})};return d.jsxs("div",{className:"resetform-action-editor",children:[d.jsx(U0,{label:"Form ID",value:t.formId||"",onChange:n,placeholder:"Select form...",filter:r=>r.tag==="Form"}),d.jsx("p",{className:"field-hint",children:"Resets all form fields to their initial values"})]})}function dQe({config:t,onChange:e}){const n=r=>{e({...t,formId:r})};return d.jsxs("div",{className:"submitform-action-editor",children:[d.jsx(U0,{label:"Form ID",value:t.formId||"",onChange:n,placeholder:"Select form...",filter:r=>r.tag==="Form"}),d.jsx("p",{className:"field-hint",children:"Triggers form submission (typically used with API call actions)"})]})}function hQe({config:t,onChange:e}){const n=(s,a)=>{e({...t,[s]:a})},r=[{value:"static",label:"Static text"},{value:"element",label:"Element content"},{value:"state",label:"From state"}],i=t.source||"static";return d.jsxs("div",{className:"copytoclipboard-action-editor",children:[d.jsxs("div",{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Source"}),d.jsxs(da,{selectedKey:i,onSelectionChange:s=>n("source",s),children:[d.jsx(en,{className:"select-trigger",children:d.jsx($s,{})}),d.jsx(gs,{className:"select-popover",children:d.jsx($i,{className:"select-listbox",children:r.map(s=>d.jsx(Sr,{id:s.value,children:s.label},s.value))})})]})]}),i==="static"&&d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Text"}),d.jsx(br,{className:"field-input",value:t.text,onChange:s=>n("text",s.target.value),placeholder:"Text to copy"})]}),i==="element"&&d.jsx(U0,{label:"Element ID",value:t.elementId||"",onChange:s=>n("elementId",s),placeholder:"Select element..."}),i==="state"&&d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"State Key"}),d.jsx(br,{className:"field-input",value:t.stateKey||"",onChange:s=>n("stateKey",s.target.value),placeholder:"user.email"})]})]})}function fQe({config:t,onChange:e}){const[n,r]=C.useState(()=>JSON.stringify(t.params||{},null,2)),[i,s]=C.useState(""),a=l=>{e({...t,code:l})},o=l=>{r(l);try{const c=JSON.parse(l);e({...t,params:c}),s("")}catch{s(" JSON ")}};return d.jsxs("div",{className:"customfunction-action-editor",children:[d.jsxs("div",{className:"field",children:[d.jsx(xn,{className:"field-label",children:"JavaScript Code"}),d.jsx(fd,{className:"field-textarea code-editor",value:t.code,onChange:l=>a(l.target.value),rows:10,placeholder:`// Available context:
// - event: Event object
// - element: DOM element
// - state: App state
// - console: Console methods

console.log('Hello from custom function!');
return { success: true };`})]}),d.jsxs("div",{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Parameters (JSON)"}),d.jsx(fd,{className:"field-textarea",value:n,onChange:l=>o(l.target.value),rows:4,placeholder:'{"key": "value"}'}),i&&d.jsxs("div",{className:"error-message",children:[" ",i]})]}),d.jsxs("div",{className:"field-hint",children:[d.jsx("p",{children:d.jsx("strong",{children:" Security Note:"})}),d.jsxs("ul",{children:[d.jsx("li",{children:"Dangerous operations (eval, fetch, DOM manipulation) are restricted"}),d.jsx("li",{children:"Only safe console methods and limited DOM access allowed"}),d.jsx("li",{children:"Code execution is sandboxed for security"})]})]})]})}const pQe={ListBox:["select","clear","selectAll","focus"],GridList:["select","clear","selectAll","focus"],Select:["select","clear","open","close","focus"],ComboBox:["select","clear","open","close","focus","filter"],RadioGroup:["select","clear","focus"],CheckboxGroup:["select","clear","selectAll","focus"],TagGroup:["add","remove","clear","focus"],TextField:["setValue","clear","focus","blur"],SearchField:["setValue","clear","focus","blur"],NumberField:["setValue","increment","decrement","focus","blur"],TextArea:["setValue","clear","focus","blur"],Slider:["setValue","focus"],DatePicker:["setValue","clear","open","close","focus"],TimeField:["setValue","clear","focus"],Modal:["open","close"],Dialog:["open","close"],Popover:["open","close"],Tooltip:["show","hide"],Tabs:["selectTab","focus"],Menu:["open","close","focus"],ProgressBar:["setValue"],Meter:["setValue"],Panel:["show","hide","toggle"],Card:["show","hide","toggle"]},S6=Jl((t,e)=>({components:[],registerComponent:n=>{t(r=>r.components.some(s=>s.id===n.id)?{components:r.components.map(s=>s.id===n.id?n:s)}:{components:[...r.components,n]})},unregisterComponent:n=>{t(r=>({components:r.components.filter(i=>i.id!==n)}))},updateComponentState:(n,r)=>{t(i=>({components:i.components.map(s=>s.id===n?{...s,state:{...s.state,...r}}:s)}))},getComponent:n=>e().components.find(r=>r.id===n),getComponentByCustomId:n=>e().components.find(r=>r.customId===n),getComponentsByType:n=>e().components.filter(r=>r.tag===n),clearRegistry:()=>{t({components:[]})}}));function gQe(t){return pQe[t]||[]}function zI({value:t,onChange:e,filterByType:n,label:r="Target Component",placeholder:i="Select a component"}){const s=S6(l=>l.components),a=n?s.filter(l=>n.includes(l.tag)):s,o=a.reduce((l,c)=>(l[c.tag]||(l[c.tag]=[]),l[c.tag].push(c),l),{});return d.jsxs("div",{className:"component-selector",children:[d.jsxs("div",{className:"field",children:[d.jsx(xn,{className:"field-label",children:r}),d.jsxs(da,{selectedKey:t||"",onSelectionChange:l=>e(l),children:[d.jsx(en,{className:"select-trigger",children:d.jsx($s,{})}),d.jsx(gs,{className:"select-popover",children:d.jsxs($i,{className:"select-listbox",children:[d.jsx(Sr,{id:"",children:i},""),Object.entries(o).map(([l,c])=>d.jsxs("div",{className:"component-group",children:[d.jsx("div",{className:"group-header",children:l}),c.map(u=>d.jsx(Sr,{id:u.customId||u.id,children:u.customId||`${u.tag} (${u.id.slice(0,8)})`},u.customId||u.id))]},l)),a.length===0&&d.jsxs(Sr,{id:"empty",isDisabled:!0,children:["No components available",n&&` (filtered by: ${n.join(", ")})`]},"empty")]})})]})]}),t&&d.jsxs("p",{className:"field-hint",children:["Selected:"," ",a.find(l=>l.customId===t||l.id===t)?.customId||t]})]})}function mQe({config:t,onChange:e}){const[n,r]=C.useState(()=>JSON.stringify(t.value,null,2)),[i,s]=C.useState(""),a=(u,h)=>{e({...t,[u]:h})},o=u=>{r(u);try{const h=JSON.parse(u);e({...t,value:h}),s("")}catch{s(" JSON ")}},l=[{value:"static",label:"Static value"},{value:"state",label:"From app state"},{value:"event",label:"From event data"}],c=t.source||"static";return d.jsxs("div",{className:"setcomponentstate-action-editor",children:[d.jsx(zI,{value:t.targetId,onChange:u=>a("targetId",u),label:"Target Component",placeholder:"Select component to control"}),d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"State Path"}),d.jsx(br,{className:"field-input",value:t.statePath,onChange:u=>a("statePath",u.target.value),placeholder:"selectedKeys, isOpen, value"})]}),d.jsxs("div",{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Value Source"}),d.jsxs(da,{selectedKey:c,onSelectionChange:u=>a("source",u),children:[d.jsx(en,{className:"select-trigger",children:d.jsx($s,{})}),d.jsx(gs,{className:"select-popover",children:d.jsx($i,{className:"select-listbox",children:l.map(u=>d.jsx(Sr,{id:u.value,children:u.label},u.value))})})]})]}),d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Value (JSON)"}),d.jsx(fd,{className:"field-textarea",value:n,onChange:u=>o(u.target.value),rows:4,placeholder:c==="static"?'["item-1", "item-2"] or true':c==="state"?"{{state.selectedItems}}":"{{event.target.value}}"}),i&&d.jsxs("div",{className:"error-message",children:[" ",i]})]}),d.jsxs("div",{className:"field-hint",children:[d.jsx("p",{children:d.jsx("strong",{children:"Common state paths:"})}),d.jsxs("ul",{children:[d.jsxs("li",{children:[d.jsx("code",{children:"selectedKeys"})," - Selection state (ListBox, GridList, Select)"]}),d.jsxs("li",{children:[d.jsx("code",{children:"isOpen"})," - Open/close state (Modal, Popover, Select)"]}),d.jsxs("li",{children:[d.jsx("code",{children:"value"})," - Input value (TextField, NumberField, Slider)"]}),d.jsxs("li",{children:[d.jsx("code",{children:"isDisabled"})," - Disabled state (any component)"]})]})]})]})}function AQe({config:t,onChange:e}){const[n,r]=C.useState(()=>JSON.stringify(t.params||{},null,2)),[i,s]=C.useState(""),a=(f,p)=>{e({...t,[f]:p})},o=f=>{r(f);try{const p=JSON.parse(f);e({...t,params:p}),s("")}catch{s(" JSON ")}},l=S6(f=>f.getComponent),c=S6(f=>f.getComponentByCustomId),u=l(t.targetId)||c(t.targetId),h=u?gQe(u.tag):[];return d.jsxs("div",{className:"triggercomponentaction-action-editor",children:[d.jsx(zI,{value:t.targetId,onChange:f=>a("targetId",f),label:"Target Component",placeholder:"Select component to trigger"}),h.length>0?d.jsxs("div",{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Action"}),d.jsxs(da,{selectedKey:t.action||"",onSelectionChange:f=>a("action",f),children:[d.jsx(en,{className:"select-trigger",children:d.jsx($s,{})}),d.jsx(gs,{className:"select-popover",children:d.jsxs($i,{className:"select-listbox",children:[d.jsx(Sr,{id:"",children:"Select an action"},""),h.map(f=>d.jsx(Sr,{id:f,children:f},f))]})})]})]}):d.jsx("p",{className:"field-hint warning",children:" Select a target component first to see available actions"}),t.action&&d.jsxs(d.Fragment,{children:[d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Parameters (JSON)"}),d.jsx(fd,{className:"field-textarea",value:n,onChange:f=>o(f.target.value),rows:4,placeholder:'{"itemId": "item-1", "behavior": "replace"}'}),i&&d.jsxs("div",{className:"error-message",children:[" ",i]})]}),d.jsxs("div",{className:"field-hint",children:[d.jsx("p",{children:d.jsxs("strong",{children:["Action: ",t.action]})}),d.jsx("p",{children:"Common parameters vary by action type:"}),d.jsxs("ul",{children:[d.jsxs("li",{children:[d.jsx("code",{children:"select"})," - itemId, behavior (replace/add/toggle)"]}),d.jsxs("li",{children:[d.jsx("code",{children:"filter"})," - query, mode (include/exclude)"]}),d.jsxs("li",{children:[d.jsx("code",{children:"setValue"})," - value"]}),d.jsxs("li",{children:[d.jsx("code",{children:"focus/blur"})," - no params needed"]})]})]})]}),u&&d.jsxs("div",{className:"field-hint",children:[d.jsxs("p",{children:["Target: ",d.jsx("strong",{children:u.customId||u.id})," (",u.tag,")"]}),d.jsxs("p",{children:["Available actions: ",h.join(", ")||"None"]})]})]})}function yQe({config:t,onChange:e}){const[n,r]=C.useState(()=>JSON.stringify(t.value,null,2)),[i,s]=C.useState(""),a=(u,h)=>{e({...t,[u]:h})},o=u=>{r(u);try{const h=JSON.parse(u);e({...t,value:h}),s("")}catch{s(" JSON ")}},l=[{value:"static",label:"Static value"},{value:"state",label:"From app state"},{value:"event",label:"From event data"}],c=t.source||"static";return d.jsxs("div",{className:"updateformfield-action-editor",children:[d.jsx(U0,{label:"Form ID (optional)",value:t.formId||"",onChange:u=>a("formId",u||void 0),placeholder:"Select form...",filter:u=>u.tag==="Form"}),d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Field Name"}),d.jsx(br,{className:"field-input",value:t.fieldName,onChange:u=>a("fieldName",u.target.value),placeholder:"email, password, username"})]}),d.jsxs("div",{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Value Source"}),d.jsxs(da,{selectedKey:c,onSelectionChange:u=>a("source",u),children:[d.jsx(en,{className:"select-trigger",children:d.jsx($s,{})}),d.jsx(gs,{className:"select-popover",children:d.jsx($i,{className:"select-listbox",children:l.map(u=>d.jsx(Sr,{id:u.value,children:u.label},u.value))})})]})]}),d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Value (JSON)"}),d.jsx(fd,{className:"field-textarea",value:n,onChange:u=>o(u.target.value),rows:4,placeholder:c==="static"?'"user@example.com" or 123':c==="state"?"{{state.user.email}}":"{{event.target.value}}"}),i&&d.jsxs("div",{className:"error-message",children:[" ",i]})]}),d.jsxs("div",{className:"field-hint",children:[d.jsx("p",{children:d.jsx("strong",{children:"Usage:"})}),d.jsxs("ul",{children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Field Name:"})," Must match the ",d.jsx("code",{children:"name"})," attribute of the form field"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Form ID:"})," Optional. If provided, will only update fields within that form"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Value Source:"}),d.jsxs("ul",{children:[d.jsxs("li",{children:[d.jsx("code",{children:"static"})," - Hardcoded value"]}),d.jsxs("li",{children:[d.jsx("code",{children:"state"})," - From app state (e.g., ",d.jsx("code",{children:"state.user.email"}),")"]}),d.jsxs("li",{children:[d.jsx("code",{children:"event"})," - From event data (e.g., ",d.jsx("code",{children:"event.target.value"}),")"]})]})]})]})]})]})}function vQe({config:t,onChange:e}){const[n,r]=C.useState(()=>JSON.stringify(t.fieldValue,null,2)),[i,s]=C.useState(""),a=(u,h)=>{e({...t,[u]:h})},o=u=>{r(u);try{const h=JSON.parse(u);e({...t,fieldValue:h}),s("")}catch{s(" JSON ")}},l=[{value:"text",label:"Text Search"},{value:"function",label:"Custom Function"},{value:"field",label:"Field Match"}],c=["ListBox","GridList","Select","ComboBox","TagGroup"];return d.jsxs("div",{className:"filtercollection-action-editor",children:[d.jsx(zI,{value:t.targetId,onChange:u=>a("targetId",u),filterByType:c,label:"Target Collection",placeholder:"Select ListBox, GridList, or other collection"}),d.jsxs("div",{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Filter Mode"}),d.jsxs(da,{selectedKey:t.filterMode,onSelectionChange:u=>a("filterMode",u),children:[d.jsx(en,{className:"select-trigger",children:d.jsx($s,{})}),d.jsx(gs,{className:"select-popover",children:d.jsx($i,{className:"select-listbox",children:l.map(u=>d.jsx(Sr,{id:u.value,children:u.label},u.value))})})]})]}),t.filterMode==="text"&&d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Search Query"}),d.jsx(br,{className:"field-input",value:t.query||"",onChange:u=>a("query",u.target.value),placeholder:"Enter search text"})]}),t.filterMode==="function"&&d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Filter Function"}),d.jsx(fd,{className:"field-textarea code-editor",value:t.filterFn||"",onChange:u=>a("filterFn",u.target.value),rows:4,placeholder:"item => item.category === 'premium' && item.price > 100"}),d.jsx("p",{className:"field-hint",children:"Write a JavaScript arrow function that returns true for items to keep."})]}),t.filterMode==="field"&&d.jsxs(d.Fragment,{children:[d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Field Name"}),d.jsx(br,{className:"field-input",value:t.fieldName||"",onChange:u=>a("fieldName",u.target.value),placeholder:"category, status, type"})]}),d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Field Value (JSON)"}),d.jsx(fd,{className:"field-textarea",value:n,onChange:u=>o(u.target.value),rows:2,placeholder:'"premium" or ["active", "pending"]'}),i&&d.jsxs("div",{className:"error-message",children:[" ",i]})]})]}),d.jsxs("div",{className:"field-hint",children:[d.jsx("p",{children:d.jsx("strong",{children:"Filter Modes:"})}),d.jsxs("ul",{children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Text Search:"})," Simple text matching across all fields"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Custom Function:"})," Advanced filtering with JavaScript"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Field Match:"})," Filter by specific field value"]})]}),d.jsxs("p",{children:["Examples:",d.jsx("br",{}),' Text: "premium user" searches all text fields',d.jsx("br",{})," Function: item => item.price > 100",d.jsx("br",{}),' Field: category = "electronics"']})]})]})}function xQe({config:t,onChange:e}){const n=(o,l)=>{e({...t,[o]:l})},r=[{value:"replace",label:"Replace (clear others)"},{value:"add",label:"Add (keep existing)"},{value:"toggle",label:"Toggle (flip state)"}],i=[{value:"static",label:"Static ID"},{value:"state",label:"From app state"},{value:"event",label:"From event data"}],s=["ListBox","GridList","Select","ComboBox","RadioGroup","CheckboxGroup"],a=t.source||"static";return d.jsxs("div",{className:"selectitem-action-editor",children:[d.jsx(zI,{value:t.targetId,onChange:o=>n("targetId",o),filterByType:s,label:"Target Collection",placeholder:"Select collection component"}),d.jsxs("div",{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Selection Behavior"}),d.jsxs(da,{selectedKey:t.behavior,onSelectionChange:o=>n("behavior",o),children:[d.jsx(en,{className:"select-trigger",children:d.jsx($s,{})}),d.jsx(gs,{className:"select-popover",children:d.jsx($i,{className:"select-listbox",children:r.map(o=>d.jsx(Sr,{id:o.value,children:o.label},o.value))})})]})]}),d.jsxs("div",{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Item ID Source"}),d.jsxs(da,{selectedKey:a,onSelectionChange:o=>n("source",o),children:[d.jsx(en,{className:"select-trigger",children:d.jsx($s,{})}),d.jsx(gs,{className:"select-popover",children:d.jsx($i,{className:"select-listbox",children:i.map(o=>d.jsx(Sr,{id:o.value,children:o.label},o.value))})})]})]}),a==="static"&&d.jsxs(d.Fragment,{children:[d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Item ID"}),d.jsx(br,{className:"field-input",value:t.itemId||"",onChange:o=>n("itemId",o.target.value),placeholder:"user-123, product-456"})]}),d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Or Item Index (optional)"}),d.jsx(br,{className:"field-input",type:"number",value:String(t.itemIndex??""),onChange:o=>n("itemIndex",o.target.value?Number(o.target.value):void 0),placeholder:"0, 1, 2, ..."})]})]}),a==="state"&&d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"State Path"}),d.jsx(br,{className:"field-input",value:t.itemId||"",onChange:o=>n("itemId",o.target.value),placeholder:"state.selectedUserId or {{state.cart.selectedProduct}}"})]}),a==="event"&&d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Event Path"}),d.jsx(br,{className:"field-input",value:t.itemId||"",onChange:o=>n("itemId",o.target.value),placeholder:"event.target.value or {{event.detail.itemId}}"})]}),d.jsxs("div",{className:"field-hint",children:[d.jsx("p",{children:d.jsx("strong",{children:"Selection Behaviors:"})}),d.jsxs("ul",{children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Replace:"})," Clear all existing selections and select this item only"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Add:"})," Add this item to existing selections (multi-select)"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Toggle:"})," If selected, deselect it; if not, select it"]})]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Priority:"})," If both itemId and itemIndex are provided, itemId takes precedence."]})]})]})}function bQe({config:t,onChange:e}){const n=i=>{e({...t,targetId:i})},r=["ListBox","GridList","Select","ComboBox","RadioGroup","CheckboxGroup","TagGroup"];return d.jsxs("div",{className:"clearselection-action-editor",children:[d.jsx(zI,{value:t.targetId,onChange:n,filterByType:r,label:"Target Collection",placeholder:"Select collection to clear"}),d.jsxs("div",{className:"field-hint",children:[d.jsx("p",{children:"This action will clear all selected items in the target collection component."}),d.jsxs("p",{children:[d.jsx("strong",{children:"Compatible with:"})," ListBox, GridList, Select, ComboBox, RadioGroup, CheckboxGroup, TagGroup"]})]})]})}function CQe({config:t,onChange:e}){return d.jsxs("div",{className:"action-editor-fields",children:[d.jsxs(dr,{value:t.dataTableName,onChange:n=>e({...t,dataTableName:n}),children:[d.jsx(xn,{className:"field-label",children:"DataTable Name"}),d.jsx(br,{className:"field-input",placeholder:"e.g., users, products"})]}),d.jsxs("div",{className:"field-row",children:[d.jsx(u4,{isSelected:t.forceRefresh??!1,onChange:n=>e({...t,forceRefresh:n}),children:d.jsx("span",{className:"switch-label",children:"Force Refresh"})}),d.jsx("span",{className:"field-hint",children:"Bypass cache and fetch fresh data"})]}),d.jsxs(dr,{value:String(t.cacheTTL??""),onChange:n=>e({...t,cacheTTL:n?parseInt(n,10):void 0}),children:[d.jsx(xn,{className:"field-label",children:"Cache TTL (seconds)"}),d.jsx(br,{className:"field-input",type:"number",min:0,placeholder:"e.g., 300 (5 minutes)"})]}),d.jsxs(dr,{value:t.targetVariable??"",onChange:n=>e({...t,targetVariable:n||void 0}),children:[d.jsx(xn,{className:"field-label",children:"Store Result In (optional)"}),d.jsx(br,{className:"field-input",placeholder:"e.g., loadedUsers"})]})]})}function EQe({config:t,onChange:e}){const n=[{value:"replace",label:"Replace ()"},{value:"merge",label:"Merge ()"},{value:"append",label:"Append ()"}];return d.jsxs("div",{className:"action-editor-fields",children:[d.jsxs(dr,{value:t.sourceId,onChange:r=>e({...t,sourceId:r}),children:[d.jsx(xn,{className:"field-label",children:"Source Component ID"}),d.jsx(br,{className:"field-input",placeholder:"e.g., #userList, component_123"})]}),d.jsxs(dr,{value:t.targetId,onChange:r=>e({...t,targetId:r}),children:[d.jsx(xn,{className:"field-label",children:"Target Component ID"}),d.jsx(br,{className:"field-input",placeholder:"e.g., #userDetails, component_456"})]}),d.jsxs("div",{className:"field-group",children:[d.jsx(xn,{className:"field-label",children:"Sync Mode"}),d.jsxs(da,{selectedKey:t.syncMode,onSelectionChange:r=>e({...t,syncMode:r}),children:[d.jsx(en,{className:"select-trigger",children:d.jsx($s,{})}),d.jsx(gs,{className:"select-popover",children:d.jsx($i,{className:"select-listbox",children:n.map(r=>d.jsx(Sr,{id:r.value,children:r.label},r.value))})})]})]}),d.jsxs(dr,{value:t.dataPath??"",onChange:r=>e({...t,dataPath:r||void 0}),children:[d.jsx(xn,{className:"field-label",children:"Data Path (optional)"}),d.jsx(br,{className:"field-input",placeholder:"e.g., selectedItem, data.items[0]"})]})]})}function SQe({config:t,onChange:e}){const n=[{value:"response",label:"API Response"},{value:"variable",label:"Variable"},{value:"static",label:"Static Value"}],r=[{value:"replace",label:"Replace ( )"},{value:"merge",label:"Merge ()"},{value:"append",label:"Append ()"},{value:"upsert",label:"Upsert ( ,  )"}];return d.jsxs("div",{className:"action-editor-fields",children:[d.jsxs(dr,{value:t.dataTableName,onChange:i=>e({...t,dataTableName:i}),children:[d.jsx(xn,{className:"field-label",children:"DataTable Name"}),d.jsx(br,{className:"field-input",placeholder:"e.g., users, orders"})]}),d.jsxs("div",{className:"field-group",children:[d.jsx(xn,{className:"field-label",children:"Data Source"}),d.jsxs(da,{selectedKey:t.source,onSelectionChange:i=>e({...t,source:i}),children:[d.jsx(en,{className:"select-trigger",children:d.jsx($s,{})}),d.jsx(gs,{className:"select-popover",children:d.jsx($i,{className:"select-listbox",children:n.map(i=>d.jsx(Sr,{id:i.value,children:i.label},i.value))})})]})]}),d.jsxs(dr,{value:t.sourcePath??"",onChange:i=>e({...t,sourcePath:i||void 0}),children:[d.jsx(xn,{className:"field-label",children:t.source==="response"?"Response Path":t.source==="variable"?"Variable Name":"Static Value"}),d.jsx(br,{className:"field-input",placeholder:t.source==="response"?"e.g., data.items, result":t.source==="variable"?"e.g., apiResult, formData":'e.g., { "status": "active" }'})]}),d.jsxs("div",{className:"field-group",children:[d.jsx(xn,{className:"field-label",children:"Save Mode"}),d.jsxs(da,{selectedKey:t.saveMode,onSelectionChange:i=>e({...t,saveMode:i}),children:[d.jsx(en,{className:"select-trigger",children:d.jsx($s,{})}),d.jsx(gs,{className:"select-popover",children:d.jsx($i,{className:"select-listbox",children:r.map(i=>d.jsx(Sr,{id:i.value,children:i.label},i.value))})})]})]}),t.saveMode==="upsert"&&d.jsxs(dr,{value:t.keyField??"",onChange:i=>e({...t,keyField:i||void 0}),children:[d.jsx(xn,{className:"field-label",children:"Key Field (for Upsert)"}),d.jsx(br,{className:"field-input",placeholder:"e.g., id, email"})]}),d.jsxs(dr,{value:t.transform??"",onChange:i=>e({...t,transform:i||void 0}),children:[d.jsx(xn,{className:"field-label",children:"Transform Expression (optional)"}),d.jsx(br,{className:"field-input",placeholder:"e.g., items.map(i => ({ ...i, status: 'saved' }))"})]})]})}function wQe({config:t,onChange:e}){const[n,r]=C.useState(()=>JSON.stringify(t.value??"",null,2)),[i,s]=C.useState(""),a=Oi(f=>f.variables),o=C.useMemo(()=>Array.from(a.values()),[a]),l=C.useMemo(()=>o.find(f=>f.name===t.variableName),[o,t.variableName]),c=f=>{const m=o.find(v=>v.name===f)?.defaultValue??"";r(JSON.stringify(m,null,2)),e({...t,variableName:f,value:m})},u=f=>{r(f);try{const p=JSON.parse(f);e({...t,value:p}),s("")}catch{e({...t,value:f}),s("")}},h=l?.type==="boolean";return d.jsxs("div",{className:"setvariable-action-editor",children:[d.jsxs("div",{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Variable"}),o.length>0?d.jsxs(da,{selectedKey:t.variableName||"",onSelectionChange:f=>c(f),children:[d.jsx(en,{className:"select-trigger",children:d.jsx($s,{placeholder:"Select variable..."})}),d.jsx(gs,{className:"select-popover",children:d.jsx($i,{className:"select-listbox",children:o.map(f=>d.jsxs(Sr,{id:f.name,children:[d.jsx("span",{children:f.name}),d.jsxs("span",{className:"variable-type-badge",children:[f.type,"  ",f.scope]})]},f.name))})})]}):d.jsx(dr,{className:"field",children:d.jsx(br,{className:"field-input",value:t.variableName||"",onChange:f=>e({...t,variableName:f.target.value}),placeholder:"variableName"})})]}),h?d.jsxs("div",{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Value"}),d.jsx("div",{className:"boolean-toggle",children:d.jsx(u4,{isSelected:t.value===!0,onChange:f=>e({...t,value:f}),children:d.jsx("span",{className:"switch-label",children:t.value===!0?"true":"false"})})})]}):d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Value (JSON)"}),d.jsx(fd,{className:"field-textarea",value:n,onChange:f=>u(f.target.value),rows:3,placeholder:l?.type==="string"?'"your text here"':l?.type==="number"?"0":l?.type==="array"?"[]":l?.type==="object"?"{}":"value"}),i&&d.jsx("div",{className:"error-message",children:i})]}),l&&d.jsxs("div",{className:"variable-info",children:[d.jsx("span",{className:"info-label",children:"Type:"}),d.jsx("span",{className:"info-value",children:l.type}),d.jsx("span",{className:"info-label",children:"Scope:"}),d.jsx("span",{className:"info-value",children:l.scope})]})]})}function _Qe({condition:t,onChange:e,label:n="Condition (optional)",placeholder:r="event.value > 10 && state.isLoggedIn === true"}){const[i,s]=C.useState(!1),a=c=>{e(c.trim()===""?void 0:c)},o=[{name:"event",description:"Event object (e.g., event.target.value)"},{name:"state",description:"Application state (e.g., state.user.name)"},{name:"element",description:"Target DOM element (e.g., element.id)"}],l=["state.isLoggedIn === true","event.value > 100","state.cart.items.length > 0","element.dataset.type === 'premium'"];return d.jsxs("div",{className:"condition-editor",children:[d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:n}),d.jsx(fd,{className:"field-textarea code-editor",value:t||"",onChange:c=>a(c.target.value),onFocus:()=>s(!0),onBlur:()=>s(!1),rows:3,placeholder:r})]}),i&&d.jsxs("div",{className:"condition-hints",children:[d.jsxs("div",{className:"hints-section",children:[d.jsx("strong",{children:"Available context:"}),d.jsx("ul",{children:o.map(c=>d.jsxs("li",{children:[d.jsx("code",{children:c.name})," - ",c.description]},c.name))})]}),d.jsxs("div",{className:"hints-section",children:[d.jsx("strong",{children:"Examples:"}),d.jsx("ul",{children:l.map((c,u)=>d.jsx("li",{children:d.jsx("code",{children:c})},u))})]})]}),t&&d.jsx("p",{className:"field-hint",children:" Action will only execute if this condition is true"})]})}function IQe({delay:t,onChange:e}){const n=t!==void 0&&t>0,r=t||1e3,i=o=>{e(o?r:void 0)},s=o=>{e(o>0?o:void 0)},a=[{label:"0.5s",value:500},{label:"1s",value:1e3},{label:"2s",value:2e3},{label:"5s",value:5e3}];return d.jsxs("div",{className:"action-delay-editor",children:[d.jsx(N_,{className:"checkbox-field",isSelected:n,onChange:i,children:"Add delay before executing"}),n&&d.jsxs(d.Fragment,{children:[d.jsxs(dr,{className:"field",children:[d.jsx(xn,{className:"field-label",children:"Delay (ms)"}),d.jsx(br,{className:"field-input",type:"number",value:String(r),onChange:o=>s(Number(o.target.value)||0),min:0,step:100})]}),d.jsxs("div",{className:"presets-group",children:[d.jsx(xn,{className:"field-label",children:"Presets:"}),d.jsx("div",{className:"preset-buttons",children:a.map(o=>d.jsx(en,{className:"react-aria-Button sm",onPress:()=>s(o.value),children:o.label},o.label))})]}),d.jsxs("p",{className:"field-hint",children:[" This action will wait ",d.jsxs("strong",{children:[r,"ms"]})," before executing. Useful for creating sequences or animations."]})]})]})}function BQe({action:t,onChange:e}){const n=[{value:"navigate",label:"Navigate"},{value:"scrollTo",label:"Scroll To"},{value:"setState",label:"Set State"},{value:"updateState",label:"Update State"},{value:"apiCall",label:"API Call"},{value:"showModal",label:"Show Modal"},{value:"hideModal",label:"Hide Modal"},{value:"showToast",label:"Show Toast"},{value:"toggleVisibility",label:"Toggle Visibility"},{value:"validateForm",label:"Validate Form"},{value:"resetForm",label:"Reset Form"},{value:"submitForm",label:"Submit Form"},{value:"setComponentState",label:"Set Component State"},{value:"triggerComponentAction",label:"Trigger Component Action"},{value:"updateFormField",label:"Update Form Field"},{value:"filterCollection",label:"Filter Collection"},{value:"selectItem",label:"Select Item"},{value:"clearSelection",label:"Clear Selection"},{value:"copyToClipboard",label:"Copy to Clipboard"},{value:"customFunction",label:"Custom Function"},{value:"loadDataTable",label:"Load DataTable"},{value:"syncComponent",label:"Sync Component"},{value:"saveToDataTable",label:"Save to DataTable"},{value:"setVariable",label:"Set Variable"}],r=i=>{e({type:i,config:{navigate:{path:"/"},scrollTo:{elementId:"",position:"top",smooth:!0},setState:{storePath:"",value:""},updateState:{storePath:"",value:"",merge:!1},apiCall:{endpoint:"",method:"GET"},showModal:{modalId:""},hideModal:{modalId:""},showToast:{message:"",variant:"info",duration:3e3},toggleVisibility:{elementId:"",show:void 0},validateForm:{formId:""},resetForm:{formId:""},submitForm:{formId:""},setComponentState:{targetId:"",statePath:"",value:"",source:"static"},triggerComponentAction:{targetId:"",action:""},updateFormField:{fieldName:"",value:"",source:"static"},filterCollection:{targetId:"",filterMode:"text",query:""},selectItem:{targetId:"",itemId:"",behavior:"replace",source:"static"},clearSelection:{targetId:""},copyToClipboard:{text:"",source:"static"},customFunction:{code:"",params:{}},loadDataTable:{dataTableName:"",forceRefresh:!1},syncComponent:{sourceId:"",targetId:"",syncMode:"replace"},saveToDataTable:{dataTableName:"",source:"response",saveMode:"replace"},setVariable:{variableName:"",value:"",persist:!1}}[i]})};return d.jsxs("div",{className:"action-editor",children:[d.jsxs("div",{className:"action-type-selector",children:[d.jsx(xn,{className:"field-label",children:"Action Type"}),d.jsxs(da,{selectedKey:t.type,onSelectionChange:i=>r(i),children:[d.jsx(en,{className:"select-trigger",children:d.jsx($s,{})}),d.jsx(gs,{className:"select-popover",children:d.jsx($i,{className:"select-listbox",children:n.map(i=>d.jsx(Sr,{id:i.value,children:i.label},i.value))})})]})]}),d.jsxs("div",{className:"action-config",children:[t.type==="navigate"&&d.jsx(eQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="scrollTo"&&d.jsx(aQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="setState"&&d.jsx(tQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="updateState"&&d.jsx(oQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="apiCall"&&d.jsx(nQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="showModal"&&d.jsx(rQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="hideModal"&&d.jsx(lQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="showToast"&&d.jsx(iQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="toggleVisibility"&&d.jsx(cQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="validateForm"&&d.jsx(sQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="resetForm"&&d.jsx(uQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="submitForm"&&d.jsx(dQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="copyToClipboard"&&d.jsx(hQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="customFunction"&&d.jsx(fQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="setComponentState"&&d.jsx(mQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="triggerComponentAction"&&d.jsx(AQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="updateFormField"&&d.jsx(yQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="filterCollection"&&d.jsx(vQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="selectItem"&&d.jsx(xQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="clearSelection"&&d.jsx(bQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="loadDataTable"&&d.jsx(CQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="syncComponent"&&d.jsx(EQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="saveToDataTable"&&d.jsx(SQe,{config:t.config,onChange:i=>e({...t,config:i})}),t.type==="setVariable"&&d.jsx(wQe,{config:t.config,onChange:i=>e({...t,config:i})})]}),d.jsxs("div",{className:"action-advanced-settings",children:[d.jsx("div",{className:"section-divider",children:"Advanced Settings"}),d.jsx(IQe,{delay:t.delay,onChange:i=>e({...t,delay:i})}),d.jsx(_Qe,{condition:t.condition,onChange:i=>e({...t,condition:i}),label:"Execute only when (condition)",placeholder:"state.isEnabled === true && event.value > 0"})]})]})}function TQe({onSelect:t,selectedType:e,isDisabled:n=!1,inline:r=!1,placeholder:i="Search actions...",showCategories:s=!0}){const[a,o]=C.useState(""),[l,c]=C.useState(!1),u=C.useMemo(()=>Object.keys(kg),[]),h=C.useMemo(()=>{if(!a)return u;const A=a.toLowerCase();return u.filter(x=>{const E=kg[x]?.toLowerCase()||"";return x.toLowerCase().includes(A)||E.includes(A)})},[u,a]),f=C.useMemo(()=>{if(!s)return[{category:"Actions",actions:h}];const A=[];return typeof C6<"u"?Object.entries(C6).forEach(([,x])=>{const E=x,w=E.actions.filter(B=>h.includes(B));w.length>0&&A.push({category:E.label,actions:w})}):A.push({category:"Actions",actions:h}),A},[h,s]),p=A=>{t(A),o(""),c(!1)},m=C.useRef(null),v=A=>{c(A),A?setTimeout(()=>{m.current?.focus()},50):o("")};return r?d.jsxs(cE,{isOpen:l,onOpenChange:v,children:[d.jsxs(en,{className:"action-picker-inline-trigger",isDisabled:n,"aria-label":"  ",children:[d.jsx("span",{className:"action-picker-value",children:e?kg[e]||e:i}),d.jsx(zs,{size:14})]}),d.jsxs(j_,{placement:"bottom start",offset:4,className:"action-picker-popover",showArrow:!1,children:[d.jsxs("div",{className:"action-picker-search",children:[d.jsx(Xd,{size:14,color:ge.color}),d.jsx("input",{ref:m,className:"action-picker-search-input",placeholder:i,value:a,onChange:A=>o(A.target.value)})]}),d.jsx($i,{className:"action-picker-list","aria-label":"  ",selectionMode:"single",onSelectionChange:A=>{const x=Array.from(A)[0];x&&p(x)},children:h.length===0?d.jsx(Sr,{id:"empty",textValue:"No actions found",children:d.jsxs("div",{className:"action-picker-empty",children:[d.jsx(Xd,{size:16,color:ge.color}),d.jsx("span",{children:"No actions found"})]})}):f.flatMap(A=>[d.jsx(Sr,{id:`label-${A.category}`,textValue:A.category,className:"action-group-label-item",children:d.jsx("div",{className:"action-group-label",children:A.category})},`label-${A.category}`),...A.actions.map(x=>d.jsxs(Sr,{id:x,className:"action-item",textValue:kg[x]||x,children:[d.jsx("span",{className:"action-name",children:kg[x]||x}),d.jsx("span",{className:"action-type-code",children:x})]},x))])})]})]}):d.jsxs(cE,{isOpen:l,onOpenChange:v,children:[d.jsx(en,{className:"iconButton",isDisabled:n||u.length===0,"aria-label":" ",children:d.jsx(eE,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})}),d.jsxs(j_,{placement:"bottom end",offset:4,className:"action-picker-popover",showArrow:!1,children:[d.jsxs("div",{className:"action-picker-search",children:[d.jsx(Xd,{size:14,color:ge.color}),d.jsx("input",{ref:m,className:"action-picker-search-input",placeholder:i,value:a,onChange:A=>o(A.target.value)})]}),d.jsx($i,{className:"action-picker-list","aria-label":"  ",selectionMode:"single",onSelectionChange:A=>{const x=Array.from(A)[0];x&&p(x)},children:h.length===0?d.jsx(Sr,{id:"empty",textValue:"No actions found",children:d.jsx("div",{className:"action-picker-empty",children:d.jsx("span",{children:"No actions found"})})}):f.flatMap(A=>[d.jsx(Sr,{id:`label-${A.category}`,textValue:A.category,className:"action-group-label-item",children:d.jsx("div",{className:"action-group-label",children:A.category})},`label-${A.category}`),...A.actions.map(x=>d.jsxs(Sr,{id:x,className:"action-item",textValue:kg[x]||x,children:[d.jsx("span",{className:"action-name",children:kg[x]||x}),d.jsx("span",{className:"action-type-code",children:x})]},x))])})]})]})}function MQe(t){return{type:t.type,config:t.config,delay:t.delay,condition:t.condition}}function DQe(t,e){return{...e,type:t.type,config:t.config,delay:t.delay,condition:t.condition}}function RQe({action:t,onChange:e,onClose:n,onRemove:r,showTitle:i=!0}){const[s,a]=C.useState(!1),o=MQe(t),l=u=>{e(DQe(u,t))},c=u=>{e({...t,enabled:u})};return d.jsxs("div",{className:"block-action-editor","data-action-id":t.id,children:[i&&d.jsxs("div",{className:"block-action-editor-header",children:[d.jsx("span",{className:"block-action-editor-title",children:"Edit Action"}),d.jsx("div",{className:"block-action-enabled-toggle",children:d.jsx(u4,{isSelected:t.enabled!==!1,onChange:c,"aria-label":"Enable action",children:d.jsx("span",{className:"switch-label",children:"Enabled"})})}),d.jsx("div",{className:"block-action-editor-spacer"}),r&&d.jsx(en,{className:"iconButton",onPress:r,"aria-label":"Remove action",children:d.jsx(eh,{size:16,color:ge.color,strokeWidth:ge.stroke})}),n&&d.jsx(en,{className:"iconButton",onPress:n,"aria-label":"Close editor",children:d.jsx(eh,{size:16,color:ge.color,strokeWidth:ge.stroke})})]}),d.jsxs("div",{className:"block-action-type-row",children:[d.jsx("span",{className:"block-action-type-label",children:"Type"}),d.jsx(TQe,{selectedType:t.type,onSelect:u=>{const h=PQe(u);e({...t,type:u,config:h})},inline:!0,placeholder:"Select action type..."})]}),d.jsx("div",{className:"block-action-config",children:d.jsx(BQe,{action:o,onChange:l})}),d.jsxs(en,{className:"block-action-advanced-toggle",onPress:()=>a(!s),"aria-expanded":s,children:[s?d.jsx(zs,{size:14,color:ge.color}):d.jsx(Sl,{size:14,color:ge.color}),d.jsx("span",{children:"Advanced Settings"})]}),s&&d.jsx("div",{className:"block-action-advanced"})]})}function PQe(t){return{navigate:{path:"/"},scrollTo:{elementId:"",position:"top",smooth:!0},setState:{storePath:"",value:""},updateState:{storePath:"",value:"",merge:!1},apiCall:{endpoint:"",method:"GET"},showModal:{modalId:""},hideModal:{modalId:""},showToast:{message:"",variant:"info",duration:3e3},toggleVisibility:{elementId:"",show:void 0},validateForm:{formId:""},resetForm:{formId:""},submitForm:{formId:""},setComponentState:{targetId:"",statePath:"",value:"",source:"static"},triggerComponentAction:{targetId:"",action:""},updateFormField:{fieldName:"",value:"",source:"static"},filterCollection:{targetId:"",filterMode:"text",query:""},selectItem:{targetId:"",itemId:"",behavior:"replace",source:"static"},clearSelection:{targetId:""},copyToClipboard:{text:"",source:"static"},customFunction:{code:"",params:{}},loadDataTable:{dataTableName:"",forceRefresh:!1},syncComponent:{sourceId:"",targetId:"",syncMode:"replace"},saveToDataTable:{dataTableName:"",source:"response",saveMode:"replace"}}[t]||{}}function wP({data:t,onUpdate:e,dependencies:n=[],resetKey:r}){const i=C.useRef(""),s=C.useRef(!0),a=C.useRef(r??null);C.useEffect(()=>{const o=r??null;o!==a.current&&(a.current=o,s.current=!0,i.current=JSON.stringify(t))},[r,t]),C.useEffect(()=>{const o=JSON.stringify(t);if(s.current){s.current=!1,i.current=o;return}o!==i.current&&(i.current=o,e(t))},[t,e,...n])}function kQe(t){return C.useMemo(()=>t?oNe(t):null,[t])}function NQe(t){return{event:t.event,target:"self"}}function L9(t){return t?t.map((e,n)=>({id:e.id||`action-${n}-${Date.now()}`,type:e.type,config:e.config||{},delay:e.delay,condition:e.condition,enabled:e.enabled!==!1})):[]}function LQe(t){if(!t||t.trim()==="")return;const e=t.includes(" || "),n=t.includes(" && "),r=e&&!n?"OR":"AND",i=r==="OR"?" || ":" && ",a=t.split(i).map((o,l)=>{const c=o.trim(),u=c.split(/\s+/);return{id:`cond-parsed-${l}-${Date.now()}`,left:{type:"literal",value:u[0]||c},operator:u[1]||"is_not_empty",right:u[2]?{type:"literal",value:u[2]}:void 0}});return{operator:r,conditions:a}}function FQe({branch:t,onSelect:e,onClose:n}){const[r,i]=C.useState(""),s=C.useMemo(()=>Object.keys(kg),[]),a=C.useMemo(()=>{if(!r)return s;const l=r.toLowerCase();return s.filter(c=>{const u=kg[c]?.toLowerCase()||"";return c.toLowerCase().includes(l)||u.includes(l)})},[s,r]),o=C.useMemo(()=>{const l=[];return Object.entries(C6).forEach(([,c])=>{const u=c,h=u.actions.filter(f=>a.includes(f));h.length>0&&l.push({category:u.label,actions:h})}),l},[a]);return d.jsxs("div",{className:"action-picker-overlay",children:[d.jsxs("div",{className:"action-picker-header",children:[d.jsxs("span",{children:["Add Action to ",t.toUpperCase()]}),d.jsx(en,{className:"iconButton",onPress:n,"aria-label":"Close",children:d.jsx(eh,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})})]}),d.jsxs("div",{className:"action-picker-search",children:[d.jsx(Xd,{size:14,color:ge.color}),d.jsx("input",{className:"action-picker-search-input",placeholder:"Search actions...",value:r,onChange:l=>i(l.target.value),autoFocus:!0})]}),d.jsx("div",{className:"action-picker-list",role:"listbox","aria-label":"  ",children:a.length===0?d.jsxs("div",{className:"action-picker-empty",children:[d.jsx(Xd,{size:16,color:ge.color}),d.jsx("span",{children:"No actions found"})]}):o.map(l=>d.jsxs("div",{className:"action-group",children:[d.jsx("div",{className:"action-group-label",children:l.category}),l.actions.map(c=>d.jsxs("button",{type:"button",className:"action-item",onClick:()=>e(c),children:[d.jsx("span",{className:"action-name",children:kg[c]||c}),d.jsx("span",{className:"action-type-code",children:c})]},c))]},l.category))})]})}function jQe({isActive:t}){const e=Di(r=>r.selectedElement),n=Di(r=>r.updateEvents);return t?e?d.jsx(OQe,{selectedElement:e,updateEvents:n},e.id):d.jsxs("div",{className:"events-panel",children:[d.jsx(uf,{icon:d.jsx(N8,{size:16}),title:"Events"}),d.jsx("div",{className:"panel-contents",children:d.jsx(Ko,{message:" "})})]}):null}function OQe({selectedElement:t,updateEvents:e}){const i=(kQe(t?.type)?.inspector.supportedEvents||[]).filter(te=>D9(te)),[s,a]=C.useState(!1),[o,l]=C.useState(null),[c,u]=C.useState("then"),h=t?.events||[],{handlers:f,addHandler:p,updateHandler:m,removeHandler:v}=O7e(h),{selectedHandler:A,selectHandler:x,selectAfterDelete:E}=$7e(f),{actions:w,addAction:B}=R9(A?.actions||[]),{actions:D,addAction:T}=R9(A?.elseActions||[]),M=f.map(te=>te.event).filter(te=>D9(te)),R=i.filter(te=>!M.includes(te));wP({data:w,onUpdate:te=>{if(A){const oe={...A,actions:te};m(A.id,oe)}},resetKey:A?.id}),wP({data:D,onUpdate:te=>{if(A){const oe={...A,elseActions:te};m(A.id,oe)}},resetKey:A?.id});const k=C.useCallback(te=>{e(te)},[e]);wP({data:f,onUpdate:k,resetKey:t?.id});const L=te=>{if(M.includes(te))return;const oe=p(te);x(oe.id)},F=te=>{v(te),E(te)},z=(te,oe="then")=>{const ae=L7e(te);oe==="else"?T(ae,{}):B(ae,{}),a(!1)},G=C.useCallback(te=>{const oe=w.filter(se=>se.id!==te),ae={...A,actions:oe};m(A.id,ae)},[w,A,m]),V=C.useCallback(te=>{const oe=D.filter(se=>se.id!==te),ae={...A,elseActions:oe};m(A.id,ae)},[D,A,m]),q=C.useCallback((te,oe)=>{const ae=w.find(se=>se.id===te);if(ae){const se={...ae,...oe,enabled:oe.enabled!==void 0?oe.enabled:ae.enabled??!0},fe=w.map(Be=>Be.id===te?se:Be),Ee={...A,actions:fe};m(A.id,Ee)}},[w,A,m]),O=C.useCallback((te,oe)=>{const ae=D.find(se=>se.id===te);if(ae){const se={...ae,...oe,enabled:oe.enabled!==void 0?oe.enabled:ae.enabled??!0},fe=D.map(Be=>Be.id===te?se:Be),Ee={...A,elseActions:fe};m(A.id,Ee)}},[D,A,m]),H=C.useCallback(te=>{if(!A)return;const oe={...A,event:te.event};m(A.id,oe)},[A,m]),K=C.useCallback(te=>{if(!A)return;const oe=te?te.conditions.map(se=>`${se.left.value} ${se.operator} ${se.right?.value||""}`).join(te.operator==="AND"?" && ":" || "):void 0,ae={...A,condition:oe};m(A.id,ae)},[A,m]),X=C.useCallback(()=>{if(!A)return;const te={...A,condition:void 0};m(A.id,te)},[A,m]),re=L9(A?.actions||[]),J=L9(A?.elseActions||[]),Z=LQe(A?.condition),ee=!!A?.condition;return d.jsxs("div",{className:"events-panel",children:[d.jsx(uf,{icon:d.jsx(N8,{size:16}),title:"Events",actions:R.length===1?d.jsx(en,{className:"iconButton",onPress:()=>L(R[0]),"aria-label":`Add ${R[0]}`,title:`Add ${R[0]}`,children:d.jsx(ib,{size:ge.size,color:ge.color,strokeWidth:ge.stroke})}):d.jsx(Sle,{onSelect:L,registeredTypes:M,allowedTypes:i,isDisabled:R.length===0&&i.length===0})}),d.jsx("div",{className:"panel-contents",children:f.length===0?d.jsx(Ko,{icon:d.jsx(ib,{size:32,color:ge.color,strokeWidth:ge.stroke}),message:"  ",description:" +    "}):A?d.jsxs("div",{className:"section block-view","data-section-id":"handler-detail",children:[d.jsxs("div",{className:"section-header",children:[d.jsx(en,{className:"iconButton",onPress:()=>x(null),"aria-label":"Back to list",children:d.jsx(A_,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})}),d.jsx("span",{className:"section-title",children:A.event}),d.jsx("div",{className:"section-actions",children:d.jsx(en,{className:"iconButton",onPress:()=>F(A.id),"aria-label":"Delete handler",children:d.jsx(Gd,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})})})]}),d.jsxs("div",{className:"block-editor",children:[d.jsx(U7e,{trigger:NQe(A),onChange:H,registeredEventTypes:M.filter(te=>te!==A.event),allowedEventTypes:i,showConnector:!0}),d.jsx(K7e,{conditions:Z,onChange:K,onRemove:X,showSplitConnector:ee}),d.jsx(N9,{type:"then",actions:re,onAddAction:()=>a("then"),onActionClick:te=>{l(te),u("then")},onRemoveAction:G,onUpdateAction:q,showConnector:!0}),ee&&d.jsx(N9,{type:"else",actions:J,onAddAction:()=>a("else"),onActionClick:te=>{l(te),u("else")},onRemoveAction:V,onUpdateAction:O,showConnector:!0}),s&&d.jsx(FQe,{branch:s,onSelect:te=>z(te,s),onClose:()=>a(!1)}),o&&d.jsxs("div",{className:"action-editor-overlay",children:[d.jsxs("div",{className:"action-editor-header",children:[d.jsx(en,{className:"iconButton",onPress:()=>l(null),"aria-label":"Close editor",children:d.jsx(A_,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})}),d.jsxs("span",{className:"action-editor-title",children:[o.type," (",c.toUpperCase(),")"]})]}),d.jsx(RQe,{action:o,onChange:te=>{c==="else"?O(o.id,te):q(o.id,te),l({...o,...te})}})]})]}),d.jsx(wl,{id:"handler-settings",title:"Settings",children:d.jsx(Q7e,{debounce:A.debounce,throttle:A.throttle,onChange:({debounce:te,throttle:oe})=>{const ae={...A,debounce:te,throttle:oe};m(A.id,ae)}})})]}):d.jsx(wl,{id:"handlers-list",title:"Event Handlers",children:d.jsx("div",{className:"handlers-list",children:f.map(te=>d.jsxs("button",{type:"button",className:"handler-item",onClick:()=>x(te.id),children:[d.jsxs("div",{className:"handler-info",children:[d.jsx(ib,{size:14,color:ge.color,strokeWidth:ge.stroke}),d.jsx("span",{className:"handler-type",children:te.event})]}),d.jsxs("span",{className:"handler-action-count",children:[te.actions?.length||0," action",(te.actions?.length||0)!==1?"s":""]})]},te.id))})})})]})}class zQe{metrics=null;renderTimes=[];frameTimes=[];maxSamples=60;listeners=new Set;autoCollectInterval=null;rafId=null;lastFrameTime=0;enableLogs=!1;thresholds={memoryWarning:60,memoryCritical:80,renderWarning:50,renderCritical:100,fpsWarning:50,fpsCritical:30,elementCountWarning:5e3};constructor(e){e&&(this.thresholds={...this.thresholds,...e})}collect(){const e=t6(),n=performance.memory,r=n?.usedJSHeapSize??0,i=n?.jsHeapSizeLimit??1,s=r/i*100,a=this.estimateStoreMemory(e),o=this.getHistoryMemory(),l=this.estimateCacheMemory(),c=this.renderTimes[this.renderTimes.length-1]??0,u=this.calculateAverage(this.renderTimes),h=Math.max(...this.renderTimes,0),f=this.calculateFPS(),p=this.calculateHealthScore({heapUsagePercent:s,avgRenderTime:u,fps:f,elementCount:e.elementsMap?.size??0}),m=this.getStatus(p),v=this.generateWarnings({heapUsagePercent:s,avgRenderTime:u,fps:f,elementCount:e.elementsMap?.size??0});return this.metrics={elementCount:e.elementsMap?.size??0,pageCount:e.pages?.length??0,loadedPages:e.loadedPages?.size??0,storeMemory:a,historyMemory:o,cacheMemory:l,browserHeapUsed:r,browserHeapLimit:i,heapUsagePercent:s,lastRenderTime:c,avgRenderTime:u,maxRenderTime:h,fps:f,healthScore:p,status:m,warnings:v,timestamp:Date.now()},this.notifyListeners(this.metrics),this.metrics}recordRenderTime(e){this.renderTimes.push(e),this.renderTimes.length>this.maxSamples&&this.renderTimes.shift()}startAutoCollect(e=5e3){this.autoCollectInterval&&this.stopAutoCollect(),this.startFPSMeasurement(),this.autoCollectInterval=setInterval(()=>{this.collect()},e),this.enableLogs&&console.log(` [Monitor] Auto-collect started (${e}ms interval)`)}stopAutoCollect(){this.autoCollectInterval&&(clearInterval(this.autoCollectInterval),this.autoCollectInterval=null),this.stopFPSMeasurement(),this.enableLogs&&console.log(" [Monitor] Auto-collect stopped")}addListener(e){return this.listeners.add(e),()=>this.listeners.delete(e)}removeListener(e){this.listeners.delete(e)}getLastMetrics(){return this.metrics}setThresholds(e){this.thresholds={...this.thresholds,...e}}getThresholds(){return{...this.thresholds}}setLogsEnabled(e){this.enableLogs=e}isLogsEnabled(){return this.enableLogs}reset(){this.renderTimes=[],this.frameTimes=[],this.metrics=null}dump(){const e=this.collect();console.log(" [Monitor] Performance Metrics:"),console.log(`  Health: ${e.healthScore}% (${e.status})`),console.log(`  Memory: ${this.formatBytes(e.browserHeapUsed)} / ${this.formatBytes(e.browserHeapLimit)} (${e.heapUsagePercent.toFixed(1)}%)`),console.log(`  Elements: ${e.elementCount}`),console.log(`  FPS: ${e.fps.toFixed(1)}`),console.log(`  Avg Render: ${e.avgRenderTime.toFixed(2)}ms`),e.warnings.length>0&&console.log(`  Warnings: ${e.warnings.join(", ")}`)}startFPSMeasurement(){const e=n=>{if(this.lastFrameTime>0){const r=n-this.lastFrameTime;this.frameTimes.push(r),this.frameTimes.length>this.maxSamples&&this.frameTimes.shift()}this.lastFrameTime=n,this.rafId=requestAnimationFrame(e)};this.rafId=requestAnimationFrame(e)}stopFPSMeasurement(){this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null),this.lastFrameTime=0}calculateFPS(){if(this.frameTimes.length===0)return 60;const e=this.calculateAverage(this.frameTimes);return e>0?Math.min(60,1e3/e):60}calculateAverage(e){return e.length===0?0:e.reduce((n,r)=>n+r,0)/e.length}estimateStoreMemory(e){try{return(e.elementsMap?.size??0)*500}catch{return 0}}getHistoryMemory(){try{return Da.getMemoryStats().commandStoreStats?.estimatedMemoryUsage??0}catch{return 0}}estimateCacheMemory(){try{return a0.getStats().size*5e4}catch{return 0}}calculateHealthScore(e){let n=100;return e.heapUsagePercent>this.thresholds.memoryCritical?n-=40:e.heapUsagePercent>this.thresholds.memoryWarning&&(n-=20),e.avgRenderTime>this.thresholds.renderCritical?n-=30:e.avgRenderTime>this.thresholds.renderWarning&&(n-=15),e.fps<this.thresholds.fpsCritical?n-=20:e.fps<this.thresholds.fpsWarning&&(n-=10),e.elementCount>this.thresholds.elementCountWarning&&(n-=10),Math.max(0,Math.min(100,n))}getStatus(e){return e>=70?"healthy":e>=40?"warning":"critical"}generateWarnings(e){const n=[];return e.heapUsagePercent>this.thresholds.memoryCritical?n.push(` : ${e.heapUsagePercent.toFixed(1)}%`):e.heapUsagePercent>this.thresholds.memoryWarning&&n.push(` : ${e.heapUsagePercent.toFixed(1)}%`),e.avgRenderTime>this.thresholds.renderCritical?n.push(` : ${e.avgRenderTime.toFixed(0)}ms`):e.avgRenderTime>this.thresholds.renderWarning&&n.push(` : ${e.avgRenderTime.toFixed(0)}ms`),e.fps<this.thresholds.fpsCritical?n.push(`FPS : ${e.fps.toFixed(0)}`):e.fps<this.thresholds.fpsWarning&&n.push(`FPS : ${e.fps.toFixed(0)}`),e.elementCount>this.thresholds.elementCountWarning&&n.push(`  : ${e.elementCount}`),n}notifyListeners(e){this.listeners.forEach(n=>{try{n(e)}catch(r){console.error("[Monitor] Listener error:",r)}})}formatBytes(e){if(e===0)return"0 B";const n=1024,r=["B","KB","MB","GB"],i=Math.floor(Math.log(e)/Math.log(n));return`${(e/Math.pow(n,i)).toFixed(1)} ${r[i]}`}}const Gx=new zQe;function $Qe(t={}){const{enabled:e=!0,interval:n=1e4}=t,[r,i]=C.useState(null),[s,a]=C.useState(""),[o,l]=C.useState(!1),c=C.useRef(null),u=C.useCallback(()=>{try{const f=Da.getMemoryStats(),p=performance,m=p.memory?{usedJSHeapSize:p.memory.usedJSHeapSize,totalJSHeapSize:p.memory.totalJSHeapSize,jsHeapSizeLimit:p.memory.jsHeapSizeLimit,usagePercent:p.memory.usedJSHeapSize/p.memory.jsHeapSizeLimit*100}:null,v=QQe(f.totalEntries,f.commandStoreStats.estimatedMemoryUsage,m?.usagePercent);i({pageCount:f.pageCount,totalEntries:f.totalEntries,commandStoreStats:f.commandStoreStats,browserMemory:m,recommendation:v,isBrowserMemorySupported:!!p.memory})}catch{}},[]);C.useEffect(()=>{if(!e){c.current&&(clearInterval(c.current),c.current=null);return}return"requestIdleCallback"in window?window.requestIdleCallback(()=>{u()}):setTimeout(u,0),c.current=window.setInterval(()=>{"requestIdleCallback"in window?window.requestIdleCallback(()=>{u()}):u()},n),()=>{c.current&&(clearInterval(c.current),c.current=null)}},[e,n,u]);const h=C.useCallback(async()=>{l(!0),a("  ...");try{Da.optimizeMemory(),"gc"in window&&window.gc?.(),await new Promise(f=>setTimeout(f,100)),u(),a("  ")}catch{a("   ")}finally{l(!1),setTimeout(()=>a(""),3e3)}},[u]);return{stats:r,statusMessage:s,optimize:h,isOptimizing:o}}function QQe(t,e,n){const r=e/1048576;return n&&n>75?"   .     .":r>50?"  50MB .  .":t>200?"  .   .":r>20?"   .":"  ."}function Sy(t){if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(2))+" "+n[r]}function UQe(t,e={}){const{maxPoints:n=60,intervalMs:r=1e3,enabled:i=!0}=e,[s,a]=C.useState([]),o=C.useRef(null),l=C.useCallback(()=>{const u=t();if(!u)return;const h={timestamp:Date.now(),memoryUsage:u.memoryUsage,memoryPercent:u.memoryPercent,historyEntries:u.historyEntries,cacheSize:u.cacheSize};a(f=>[...f,h].slice(-n))},[t,n]);C.useEffect(()=>{if(!i){o.current&&(clearInterval(o.current),o.current=null);return}const u=setTimeout(l,0);return o.current=window.setInterval(l,r),()=>{clearTimeout(u),o.current&&clearInterval(o.current)}},[i,r,l]);const c=C.useCallback(()=>{a([])},[]);return{data:s,clearData:c}}function HQe(t={}){const{enabled:e=!0,historySize:n=60}=t,[r,i]=C.useState({current:0,average:0,min:60,max:0,history:[]}),s=C.useRef(0),a=C.useRef(0),o=C.useRef(null),l=C.useRef([]),c=C.useRef(e),u=C.useRef(n);C.useEffect(()=>{c.current=e,u.current=n},[e,n]),C.useEffect(()=>{if(!e){o.current&&(cancelAnimationFrame(o.current),o.current=null);return}a.current=performance.now();function f(){const p=performance.now();s.current++;const m=p-a.current;if(m>=1e3){const v=Math.round(s.current*1e3/m);l.current=[...l.current.slice(-(u.current-1)),v];const A=l.current,x=Math.round(A.reduce((B,D)=>B+D,0)/A.length),E=Math.min(...A),w=Math.max(...A);i({current:v,average:x,min:E,max:w,history:[...A]}),s.current=0,a.current=p}c.current&&(o.current=requestAnimationFrame(f))}return o.current=requestAnimationFrame(f),()=>{o.current&&(cancelAnimationFrame(o.current),o.current=null)}},[e]);const h=C.useCallback(()=>{l.current=[],i({current:0,average:0,min:60,max:0,history:[]})},[]);return{fps:r,reset:h}}function GQe(t={}){const{enabled:e=!0}=t,[n,r]=C.useState({lcp:null,fid:null,cls:null,ttfb:null});C.useEffect(()=>{if(!e)return;const o=l=>{l.data.type==="WEB_VITALS_UPDATE"&&r(l.data.vitals)};return window.addEventListener("message",o),()=>window.removeEventListener("message",o)},[e]);const i=nh()&&!xf(),s=C.useCallback(()=>{if(i)return;const o=document.querySelector(".canvas-iframe");o?.contentWindow&&o.contentWindow.postMessage({type:"REQUEST_WEB_VITALS"},"*")},[i]),a=C.useCallback(()=>{const o={lcp:null,fid:null,cls:null,ttfb:null};if("PerformanceObserver"in window){const l=performance.getEntriesByType("largest-contentful-paint");l.length>0&&(o.lcp=Math.round(l[l.length-1].startTime));const c=performance.getEntriesByType("navigation");if(c.length>0){const h=c[0];o.ttfb=Math.round(h.responseStart-h.requestStart)}const u=performance.getEntriesByType("layout-shift");o.cls=u.reduce((h,f)=>h+(f.value||0),0)}return r(o),o},[]);return{vitals:n,requestVitals:s,collectLocalVitals:a}}function VQe({data:t,width:e=400,height:n=120,threshold:r}){const i={top:10,right:10,bottom:20,left:50},s=e-i.left-i.right,a=n-i.top-i.bottom,{minValue:o,maxValue:l,yScale:c,xScale:u,pathD:h}=C.useMemo(()=>{if(t.length===0)return{minValue:0,maxValue:1,yScale:()=>0,xScale:()=>0,pathD:""};const v=Math.min(...t),A=Math.max(...t),x=A-v||A*.1||1,E=Math.max(0,v-x*.1),w=A+x*.1,B=R=>a-(R-E)/(w-E)*a,D=R=>R/(t.length-1||1)*s,M=t.map((R,k)=>({x:D(k),y:B(R)})).map((R,k)=>`${k===0?"M":"L"} ${R.x} ${R.y}`).join(" ");return{minValue:E,maxValue:w,yScale:B,xScale:D,pathD:M}},[t,s,a]),f=t[t.length-1]||0,p=r&&f>r,m=C.useMemo(()=>{const x=(l-o)/2;return Array.from({length:3},(E,w)=>o+x*w)},[o,l]);return d.jsxs("div",{className:"memory-chart",children:[d.jsx("svg",{width:e,height:n,"aria-label":"Memory usage chart",children:d.jsxs("g",{transform:`translate(${i.left}, ${i.top})`,children:[m.map((v,A)=>d.jsxs("g",{children:[d.jsx("line",{x1:0,y1:c(v),x2:s,y2:c(v),className:"chart-grid-line"}),d.jsx("text",{x:-8,y:c(v),className:"chart-axis-label",textAnchor:"end",dominantBaseline:"middle",children:Sy(v)})]},A)),r&&d.jsx("line",{x1:0,y1:c(r),x2:s,y2:c(r),className:"chart-threshold-line"}),t.length>1&&d.jsx("path",{d:h,className:`chart-line ${p?"chart-line-danger":""}`,fill:"none"}),t.length>0&&d.jsx("circle",{cx:u(t.length-1),cy:c(f),r:4,className:`chart-dot ${p?"chart-dot-danger":""}`}),d.jsxs("text",{x:s/2,y:a+15,className:"chart-axis-label",textAnchor:"middle",children:["Last ",Math.min(t.length,60)*10,"s"]})]})}),d.jsxs("div",{className:`chart-current-value ${p?"danger":""}`,children:[d.jsx("span",{className:"label",children:"Current:"}),d.jsx("span",{className:"value",children:Sy(f)})]})]})}function WQe({onOptimize:t,recommendation:e,isOptimizing:n=!1}){return d.jsxs("div",{className:"memory-actions",children:[d.jsx("div",{className:"recommendation",children:d.jsx("span",{className:"recommendation-text",children:e})}),d.jsx(en,{className:"optimize-button",onPress:t,isDisabled:n,"aria-label":"Optimize memory",children:n?d.jsxs(d.Fragment,{children:[d.jsx(mb,{size:14,className:"spinning"}),d.jsx("span",{children:"Optimizing..."})]}):d.jsxs(d.Fragment,{children:[d.jsx(pu,{size:14}),d.jsx("span",{children:"Optimize"})]})})]})}function KQe({value:t,warningThreshold:e=60,dangerThreshold:n=75,label:r="Memory Usage"}){const i=t>=n?"danger":t>=e?"warning":"safe",s=i==="danger"?I8:i==="warning"?bY:rY,a=i==="danger"?"":i==="warning"?"":"";return d.jsxs("div",{className:"threshold-indicator","data-threshold":i,children:[d.jsx(s,{size:16,"aria-hidden":"true"}),d.jsxs("span",{className:"sr-only",children:[a,": "]}),d.jsxs("span",{children:[r,": ",t.toFixed(1),"%"]})]})}function F9({stats:t,format:e="json"}){const n=()=>{if(!t)return;const r=new Date().toISOString().replace(/[:.]/g,"-");let i,s,a;if(e==="csv"){const h=["Metric","Value","Timestamp"],f=[["Page Count",t.pageCount,r],["Total Entries",t.totalEntries,r],["Command Count",t.commandStoreStats.commandCount,r],["Cache Size",t.commandStoreStats.cacheSize,r],["Memory Usage (bytes)",t.commandStoreStats.estimatedMemoryUsage,r],["Compression Ratio",t.commandStoreStats.compressionRatio.toFixed(4),r]];i="\uFEFF"+[h,...f].map(p=>p.join(",")).join(`
`),s="text/csv;charset=utf-8",a="csv"}else i=JSON.stringify({...t,exportedAt:r},null,2),s="application/json",a="json";const o=new Blob([i],{type:s}),l=URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`monitor-stats-${r}.${a}`,c.click(),URL.revokeObjectURL(l)};return d.jsxs(en,{className:"export-button",onPress:n,isDisabled:!t,"aria-label":`Export stats as ${e.toUpperCase()}`,children:[d.jsx(LM,{size:14,"aria-hidden":"true"}),d.jsxs("span",{children:["Export ",e.toUpperCase()]})]})}function qQe({data:t,width:e=400,height:n=120,metric:r="memoryPercent",showThresholds:i=!0}){const s={top:10,right:10,bottom:20,left:40},a=e-s.left-s.right,o=n-s.top-s.bottom,{minValue:l,maxValue:c,pathD:u,points:h}=C.useMemo(()=>{if(t.length===0)return{minValue:0,maxValue:100,pathD:"",points:[]};const m=t.map(B=>B[r]),v=r==="memoryPercent"?0:Math.min(...m),A=r==="memoryPercent"?100:Math.max(...m)*1.1,x=A-v||1,E=t.map((B,D)=>({x:s.left+D/(t.length-1||1)*a,y:s.top+o-(B[r]-v)/x*o,value:B[r],time:B.timestamp})),w=E.map((B,D)=>`${D===0?"M":"L"} ${B.x} ${B.y}`).join(" ");return{minValue:v,maxValue:A,pathD:w,points:E}},[t,r,a,o,s.left,s.top]),f=C.useMemo(()=>{if(t.length<2)return[];const m=[],v=t[t.length-1].timestamp;for(let A=0;A<t.length;A+=10){const x=t[A],E=s.left+A/(t.length-1||1)*a,w=Math.round((v-x.timestamp)/1e3);m.push({x:E,label:`-${w}s`})}return m},[t,a,s.left]),p=C.useMemo(()=>{const m=[];for(let A=0;A<=4;A++){const x=l+(c-l)*A/4,E=s.top+o-A/4*o;m.push({y:E,label:r==="memoryPercent"?`${Math.round(x)}%`:Math.round(x).toString()})}return m},[l,c,o,s.top,r]);return d.jsxs("svg",{width:e,height:n,className:"realtime-chart","aria-label":`Real-time ${r} chart showing last ${t.length} seconds`,role:"img",children:[d.jsx("g",{className:"chart-grid","aria-hidden":"true",children:p.map((m,v)=>d.jsx("line",{x1:s.left,y1:m.y,x2:e-s.right,y2:m.y,className:"chart-grid-line"},v))}),i&&r==="memoryPercent"&&d.jsxs("g",{className:"threshold-lines","aria-hidden":"true",children:[d.jsx("line",{x1:s.left,y1:s.top+o*.4,x2:e-s.right,y2:s.top+o*.4,className:"chart-threshold-warning"}),d.jsx("line",{x1:s.left,y1:s.top+o*.25,x2:e-s.right,y2:s.top+o*.25,className:"chart-threshold-danger"})]}),u&&h.length>0&&d.jsxs("g",{className:"chart-area",children:[d.jsx("defs",{children:d.jsxs("linearGradient",{id:"realtimeAreaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"0%",stopColor:"var(--primary)",stopOpacity:"0.3"}),d.jsx("stop",{offset:"100%",stopColor:"var(--primary)",stopOpacity:"0.05"})]})}),d.jsx("path",{d:`${u} L ${h[h.length-1]?.x??0} ${s.top+o} L ${s.left} ${s.top+o} Z`,fill:"url(#realtimeAreaGradient)"}),d.jsx("path",{d:u,fill:"none",className:"chart-line"})]}),h.length>0&&d.jsx("circle",{cx:h[h.length-1].x,cy:h[h.length-1].y,r:"4",className:"chart-dot"}),d.jsx("g",{className:"y-axis","aria-hidden":"true",children:p.map((m,v)=>d.jsx("text",{x:s.left-5,y:m.y+4,textAnchor:"end",className:"chart-axis-label",children:m.label},v))}),d.jsx("g",{className:"x-axis","aria-hidden":"true",children:f.map((m,v)=>d.jsx("text",{x:m.x,y:n-5,textAnchor:"middle",className:"chart-axis-label",children:m.label},v))}),d.jsxs("text",{className:"sr-only",children:["Current ",r,": ",h[h.length-1]?.value.toFixed(1)??"N/A"]})]})}function j9(t){return t>=55?"good":t>=30?"warning":"poor"}function YQe({fps:t}){const e=j9(t.current);return d.jsxs("div",{className:"fps-meter","data-status":e,children:[d.jsxs("div",{className:"fps-meter-header",children:[d.jsx(hy,{size:14,"aria-hidden":"true"}),d.jsx("span",{className:"fps-meter-title",children:"FPS"})]}),d.jsxs("div",{className:"fps-meter-value",children:[d.jsx("span",{className:"fps-current",children:t.current}),d.jsx("span",{className:"fps-unit",children:"fps"})]}),d.jsxs("div",{className:"fps-meter-stats",children:[d.jsxs("div",{className:"fps-stat",children:[d.jsx("span",{className:"fps-stat-label",children:"Avg"}),d.jsx("span",{className:"fps-stat-value",children:t.average})]}),d.jsxs("div",{className:"fps-stat",children:[d.jsx("span",{className:"fps-stat-label",children:"Min"}),d.jsx("span",{className:"fps-stat-value",children:t.min})]}),d.jsxs("div",{className:"fps-stat",children:[d.jsx("span",{className:"fps-stat-label",children:"Max"}),d.jsx("span",{className:"fps-stat-value",children:t.max})]})]}),d.jsx("div",{className:"fps-mini-chart","aria-hidden":"true",children:t.history.slice(-30).map((n,r)=>d.jsx("div",{className:"fps-bar",style:{height:`${Math.min(100,n/60*100)}%`},"data-status":j9(n)},r))}),d.jsxs("span",{className:"sr-only",children:["Current FPS: ",t.current,", Average: ",t.average,", Status: ",e]})]})}const XQe={lcp:{good:2500,poor:4e3},fid:{good:100,poor:300},cls:{good:.1,poor:.25},ttfb:{good:800,poor:1800}};function JQe(t,e){if(e===null)return"unknown";const{good:n,poor:r}=XQe[t];return e<=n?"good":e<=r?"needs-improvement":"poor"}function ZQe(t,e){return e===null?"":t==="cls"?e.toFixed(3):Math.round(e).toString()}function e9e({vitals:t,onRefresh:e}){const n=[{key:"lcp",label:"LCP",description:"Largest Contentful Paint",value:t.lcp,unit:"ms",icon:cY},{key:"fid",label:"FID",description:"First Input Delay",value:t.fid,unit:"ms",icon:Kw},{key:"cls",label:"CLS",description:"Cumulative Layout Shift",value:t.cls,unit:"",icon:fI},{key:"ttfb",label:"TTFB",description:"Time to First Byte",value:t.ttfb,unit:"ms",icon:iY}];return d.jsxs("div",{className:"web-vitals-card",children:[d.jsxs("div",{className:"web-vitals-header",children:[d.jsx("h4",{className:"web-vitals-title",children:"Core Web Vitals"}),e&&d.jsx("button",{type:"button",className:"web-vitals-refresh",onClick:e,"aria-label":"Refresh Web Vitals",children:""})]}),d.jsx("div",{className:"web-vitals-grid",children:n.map(({key:r,label:i,description:s,value:a,unit:o,icon:l})=>d.jsxs("div",{className:"web-vital-item","data-status":JQe(r,a),title:s,children:[d.jsx(l,{size:14,"aria-hidden":"true"}),d.jsx("span",{className:"web-vital-label",children:i}),d.jsxs("span",{className:"web-vital-value",children:[ZQe(r,a),a!==null&&o&&d.jsx("span",{className:"web-vital-unit",children:o})]})]},r))})]})}function w6(t){return t==null?0:typeof t=="boolean"?4:typeof t=="number"?8:typeof t=="string"?t.length*2:Array.isArray(t)?t.reduce((e,n)=>e+w6(n),0):typeof t=="object"?Object.entries(t).reduce((e,[n,r])=>e+n.length*2+w6(r),0):0}function t9e(t,e){let n=0,r=e.find(i=>i.id===t);for(;r?.parent_id&&(n++,r=e.find(i=>i.id===r.parent_id),!(n>100)););return n}function wle(t,e){return e.filter(r=>r.parent_id===t).reduce((r,i)=>r+1+wle(i.id,e),0)}function n9e(t={}){const{enabled:e=!0,sortBy:n="memory",limit:r=20}=t,i=je(u=>u.elements),[s,a]=C.useState([]),[o,l]=C.useState(0),c=C.useCallback(()=>{if(!e||i.length===0){a([]),l(0);return}const u=i.map(f=>{const p=w6(f.props),m=100,v=(f.id?.length??0)*2,A=(f.customId?.length??0)*2,x=(f.tag?.length??0)*2,E=m+v+A+x+p,w=wle(f.id,i),B=t9e(f.id,i);return{elementId:f.id,customId:f.customId,tag:f.tag,depth:B,memoryBytes:E,childCount:w,propsSize:p,percentage:0}}),h=u.reduce((f,p)=>f+p.memoryBytes,0);l(h),u.forEach(f=>{f.percentage=h>0?f.memoryBytes/h*100:0}),u.sort((f,p)=>{switch(n){case"memory":return p.memoryBytes-f.memoryBytes;case"children":return p.childCount-f.childCount;case"depth":return f.depth-p.depth;default:return 0}}),a(u.slice(0,r))},[e,i,n,r]);return C.useEffect(()=>{const u=setTimeout(c,0);return()=>clearTimeout(u)},[c]),{componentMemory:s,totalMemory:o,refresh:c}}function r9e(t){return t>=15?"high":t>=5?"medium":"low"}function i9e({enabled:t=!0}){const[e,n]=C.useState("memory"),[r,i]=C.useState(!0),{componentMemory:s,totalMemory:a,refresh:o}=n9e({enabled:t,sortBy:e,limit:15});return d.jsxs("div",{className:"component-memory-list",children:[d.jsxs("div",{className:"component-memory-header",children:[d.jsxs("button",{type:"button",className:"component-memory-toggle",onClick:()=>i(!r),"aria-expanded":r,children:[r?d.jsx(y_,{size:14}):d.jsx(zs,{size:14}),d.jsx("span",{children:"Component Memory"})]}),d.jsxs("div",{className:"component-memory-controls",children:[d.jsxs("select",{className:"component-memory-sort",value:e,onChange:l=>n(l.target.value),"aria-label":"Sort by",children:[d.jsx("option",{value:"memory",children:"Memory"}),d.jsx("option",{value:"children",children:"Children"}),d.jsx("option",{value:"depth",children:"Depth"})]}),d.jsx(en,{className:"component-memory-refresh",onPress:o,"aria-label":"Refresh",children:d.jsx(mb,{size:12})})]})]}),d.jsxs("div",{className:"component-memory-total",children:[d.jsx("span",{className:"total-label",children:"Total Elements Memory:"}),d.jsx("span",{className:"total-value",children:Sy(a)})]}),r&&d.jsxs("div",{className:"component-memory-items",role:"list",children:[s.map(l=>d.jsx(s9e,{info:l},l.elementId)),s.length===0&&d.jsxs("div",{className:"component-memory-empty",children:[d.jsx(Zi,{size:24}),d.jsx("p",{children:"No components to analyze"})]})]})]})}function s9e({info:t}){const e=r9e(t.percentage);return d.jsxs("div",{className:"component-memory-item","data-level":e,role:"listitem",children:[d.jsxs("div",{className:"component-memory-item-header",children:[d.jsx("span",{className:"component-tag",children:t.tag}),t.customId&&d.jsxs("span",{className:"component-customid",children:["#",t.customId]})]}),d.jsxs("div",{className:"component-memory-item-stats",children:[d.jsxs("div",{className:"component-stat",children:[d.jsx("span",{className:"stat-value",children:Sy(t.memoryBytes)}),d.jsx("span",{className:"stat-label",children:"Memory"})]}),d.jsxs("div",{className:"component-stat",children:[d.jsx("span",{className:"stat-value",children:t.childCount}),d.jsx("span",{className:"stat-label",children:"Children"})]}),d.jsxs("div",{className:"component-stat",children:[d.jsx("span",{className:"stat-value",children:t.depth}),d.jsx("span",{className:"stat-label",children:"Depth"})]}),d.jsxs("div",{className:"component-stat",children:[d.jsxs("span",{className:"stat-value",children:[t.percentage.toFixed(1),"%"]}),d.jsx("span",{className:"stat-label",children:"Share"})]})]}),d.jsx("div",{className:"component-memory-bar",children:d.jsx("div",{className:"component-memory-bar-fill",style:{width:`${Math.min(100,t.percentage)}%`}})})]})}const _le="xstudio-monitor-thresholds";function a9e(){try{const t=localStorage.getItem(_le);if(t)return JSON.parse(t)}catch{}return{warning:60,danger:75}}function o9e(t){try{localStorage.setItem(_le,JSON.stringify(t))}catch{}}function l9e({config:t,onChange:e}){const[n,r]=C.useState(!1),[i,s]=C.useState(t);C.useEffect(()=>{s(t)},[t]);const a=()=>{const l={warning:Math.min(i.warning,i.danger-5),danger:i.danger};o9e(l),e(l),r(!1)},o=()=>{s({warning:60,danger:75})};return d.jsxs("div",{className:"threshold-settings",children:[d.jsx(en,{className:"threshold-settings-btn","aria-label":"Threshold settings",onPress:()=>r(!n),children:d.jsx(gf,{size:14})}),n&&d.jsxs("div",{className:"threshold-settings-popup",children:[d.jsxs("div",{className:"popup-header",children:[d.jsx("h4",{children:"Threshold Settings"}),d.jsx(en,{className:"popup-close",onPress:()=>r(!1),children:d.jsx(eh,{size:14})})]}),d.jsxs("div",{className:"popup-content",children:[d.jsxs("div",{className:"threshold-slider-group",children:[d.jsxs("label",{className:"threshold-label",children:["Warning Threshold: ",i.warning,"%"]}),d.jsx("input",{type:"range",min:30,max:90,step:5,value:i.warning,onChange:l=>s(c=>({...c,warning:Number(l.target.value)})),className:"threshold-range warning","aria-label":"Warning threshold"}),d.jsx("p",{className:"threshold-hint",children:"    "})]}),d.jsxs("div",{className:"threshold-slider-group",children:[d.jsxs("label",{className:"threshold-label",children:["Danger Threshold: ",i.danger,"%"]}),d.jsx("input",{type:"range",min:40,max:95,step:5,value:i.danger,onChange:l=>s(c=>({...c,danger:Number(l.target.value)})),className:"threshold-range danger","aria-label":"Danger threshold"}),d.jsx("p",{className:"threshold-hint",children:"     "})]}),d.jsx("div",{className:"threshold-preview",children:d.jsxs("div",{className:"threshold-preview-bar",children:[d.jsx("div",{className:"threshold-zone safe",style:{width:`${i.warning}%`},children:"Safe"}),d.jsx("div",{className:"threshold-zone warning",style:{width:`${i.danger-i.warning}%`},children:"Warn"}),d.jsx("div",{className:"threshold-zone danger",style:{width:`${100-i.danger}%`},children:"Danger"})]})})]}),d.jsxs("div",{className:"popup-footer",children:[d.jsxs(en,{className:"btn-secondary",onPress:o,children:[d.jsx(k8,{size:12}),"Reset"]}),d.jsx(en,{className:"btn-primary",onPress:a,children:"Save"})]})]})]})}const c9e=300*1e3;function Ile(){const[t,e]=C.useState([]),n=C.useRef(new Map),r=C.useCallback((a,o,l=5e3)=>{const c=`${a}:${o}`,u=n.current.get(c),h=Date.now();if(u&&h-u<c9e)return null;n.current.set(c,h);const f=`toast-${h}-${Math.random().toString(36).slice(2,9)}`,p={id:f,type:a,message:o,duration:l};return e(m=>[...m,p]),l>0&&setTimeout(()=>{e(m=>m.filter(v=>v.id!==f))},l),f},[]),i=C.useCallback(a=>{e(o=>o.filter(l=>l.id!==a))},[]),s=C.useCallback(()=>{e([])},[]);return{toasts:t,showToast:r,dismissToast:i,dismissAll:s}}const u9e={success:rY,warning:bY,error:I8,info:M0e};function d9e({id:t,type:e,message:n,onDismiss:r}){const i=u9e[e];return d.jsxs("div",{className:"toast","data-type":e,role:"alert","aria-live":"polite",children:[d.jsx(i,{size:16,className:"toast-icon","aria-hidden":"true"}),d.jsx("span",{className:"toast-message",children:n}),d.jsx(en,{className:"toast-dismiss",onPress:()=>r(t),"aria-label":"Dismiss notification",children:d.jsx(eh,{size:14,"aria-hidden":"true"})})]})}function Ble({toasts:t,onDismiss:e}){return t.length===0?null:d.jsx("div",{className:"toast-container",role:"region","aria-label":"Notifications",children:t.map(n=>d.jsx(d9e,{id:n.id,type:n.type,message:n.message,onDismiss:e},n.id))})}const O9=60;function h9e({isActive:t}){return t?d.jsx(f9e,{}):null}function f9e(){const[t,e]=C.useState("memory"),[n,r]=C.useState([]),[i,s]=C.useState(a9e),a=C.useRef(null),{toasts:o,showToast:l,dismissToast:c}=Ile();C.useEffect(()=>(Gx.setLogsEnabled(!0),()=>{Gx.setLogsEnabled(!1)}),[]);const{stats:u,statusMessage:h,optimize:f,isOptimizing:p}=$Qe({enabled:!0}),{fps:m}=HQe({enabled:t==="realtime"}),{vitals:v,collectLocalVitals:A}=GQe({enabled:t==="realtime"}),x=C.useCallback(()=>u?{memoryUsage:u.commandStoreStats.estimatedMemoryUsage,memoryPercent:u.browserMemory?.usagePercent??0,historyEntries:u.totalEntries,cacheSize:u.commandStoreStats.cacheSize}:null,[u]),{data:E}=UQe(x,{enabled:t==="realtime",maxPoints:60,intervalMs:1e3}),w=u?.browserMemory?.usagePercent??0,B=u?.browserMemory?.usagePercent;C.useEffect(()=>{if(B===void 0||t!=="memory")return;const T=B;T>=75?l("error",`    (${T.toFixed(1)}%)`):T>=60&&l("warning",`   (${T.toFixed(1)}%)`)},[B,t,l]),C.useEffect(()=>{if(!u||t!=="memory")return;const T=a.current?.commandStoreStats?.estimatedMemoryUsage,M=u.commandStoreStats.estimatedMemoryUsage;T!==M&&(a.current=u,requestAnimationFrame(()=>{r(R=>{const k=[...R,M];return k.length>O9?k.slice(-O9):k})}))},[u,t]);const D=C.useCallback(()=>{f(),r([])},[f]);return d.jsxs("div",{className:"monitor-panel",children:[d.jsx(Ble,{toasts:o,onDismiss:c}),h&&d.jsx("div",{className:"monitor-status-message",children:h}),d.jsxs(Z3e,{className:"monitor-tabs",selectedKey:t,onSelectionChange:T=>e(T),children:[d.jsxs(tTe,{className:"monitor-tab-list","aria-label":"Monitor tabs",children:[d.jsxs(GS,{id:"memory",className:"monitor-tab",children:[d.jsx(hy,{size:14}),d.jsx("span",{children:"Memory"})]}),d.jsxs(GS,{id:"realtime",className:"monitor-tab",children:[d.jsx(ib,{size:14}),d.jsx("span",{children:"Realtime"})]}),d.jsxs(GS,{id:"stats",className:"monitor-tab",children:[d.jsx(qo,{size:14}),d.jsx("span",{children:"Stats"})]}),d.jsxs(GS,{id:"browser",className:"monitor-tab",children:[d.jsx(wx,{size:14}),d.jsx("span",{children:"Browser"})]}),d.jsxs(GS,{id:"analysis",className:"monitor-tab",children:[d.jsx(tY,{size:14}),d.jsx("span",{children:"Analysis"})]})]}),d.jsx(VS,{id:"memory",className:"monitor-tab-panel",children:d.jsxs("div",{className:"memory-tab-content",children:[u?.browserMemory&&d.jsx(KQe,{value:w,label:"Browser Memory"}),d.jsx("div",{className:"memory-chart-section",children:d.jsx(VQe,{data:n,width:380,height:100,threshold:50*1024*1024})}),d.jsxs("div",{className:"memory-actions-row",children:[u&&d.jsx(WQe,{onOptimize:D,recommendation:u.recommendation,isOptimizing:p}),d.jsx(F9,{stats:u,format:"json"})]})]})}),d.jsx(VS,{id:"realtime",className:"monitor-tab-panel",children:d.jsxs("div",{className:"realtime-tab-content",children:[d.jsxs("div",{className:"realtime-metrics-row",children:[d.jsx(YQe,{fps:m}),d.jsx(e9e,{vitals:v,onRefresh:A})]}),d.jsxs("div",{className:"realtime-chart-section",children:[d.jsx("div",{className:"realtime-chart-header",children:d.jsx("span",{className:"realtime-chart-title",children:"Memory Usage (Real-time)"})}),d.jsx(qQe,{data:E,width:380,height:100,metric:"memoryPercent",showThresholds:!0})]})]})}),d.jsx(VS,{id:"stats",className:"monitor-tab-panel",children:d.jsx("div",{className:"stats-grid",children:u&&d.jsxs(d.Fragment,{children:[d.jsx(Bg,{label:"Pages",value:u.pageCount.toString(),icon:d.jsx(qo,{size:16})}),d.jsx(Bg,{label:"History Entries",value:u.totalEntries.toString(),icon:d.jsx(hy,{size:16})}),d.jsx(Bg,{label:"Commands",value:u.commandStoreStats.commandCount.toString(),icon:d.jsx(hy,{size:16})}),d.jsx(Bg,{label:"Cache Size",value:u.commandStoreStats.cacheSize.toString(),icon:d.jsx(qo,{size:16})}),d.jsx(Bg,{label:"Memory Usage",value:Sy(u.commandStoreStats.estimatedMemoryUsage),icon:d.jsx(wx,{size:16}),highlight:u.commandStoreStats.estimatedMemoryUsage>50*1024*1024}),d.jsx(Bg,{label:"Compression",value:`${(u.commandStoreStats.compressionRatio*100).toFixed(1)}%`,icon:d.jsx(hy,{size:16})})]})})}),d.jsx(VS,{id:"browser",className:"monitor-tab-panel",children:u?.browserMemory?d.jsxs("div",{className:"stats-grid",children:[d.jsx(Bg,{label:"Used Heap",value:Sy(u.browserMemory.usedJSHeapSize),icon:d.jsx(wx,{size:16})}),d.jsx(Bg,{label:"Total Heap",value:Sy(u.browserMemory.totalJSHeapSize),icon:d.jsx(wx,{size:16})}),d.jsx(Bg,{label:"Heap Limit",value:Sy(u.browserMemory.jsHeapSizeLimit),icon:d.jsx(wx,{size:16})}),d.jsx(Bg,{label:"Usage",value:`${u.browserMemory.usagePercent.toFixed(1)}%`,icon:d.jsx(hy,{size:16}),highlight:u.browserMemory.usagePercent>75})]}):d.jsxs("div",{className:"browser-memory-fallback",children:[d.jsx(wx,{size:24}),d.jsx("p",{children:"Browser memory information is only available in Chrome/Edge."})]})}),d.jsx(VS,{id:"analysis",className:"monitor-tab-panel",children:d.jsxs("div",{className:"analysis-tab-content",children:[d.jsxs("div",{className:"analysis-actions-row",children:[d.jsx(F9,{stats:u,format:"csv"}),d.jsx(l9e,{config:i,onChange:s})]}),d.jsx(i9e,{enabled:t==="analysis"})]})})]})]})}function Bg({label:t,value:e,icon:n,highlight:r}){return d.jsxs("div",{className:`stat-card ${r?"highlight":""}`,children:[d.jsx("div",{className:"stat-icon",children:n}),d.jsxs("div",{className:"stat-content",children:[d.jsx("div",{className:"stat-value",children:e}),d.jsx("div",{className:"stat-label",children:t})]})]})}const p9e=[{id:"nodes",name:"",nameEn:"Nodes",icon:S1,component:xze,category:"navigation",defaultPosition:"left",minWidth:233,maxWidth:400,description:"   ",shortcut:"Ctrl+Shift+N"},{id:"components",name:"",nameEn:"Components",icon:Zi,component:bze,category:"navigation",defaultPosition:"left",minWidth:249,maxWidth:249,description:" ",shortcut:"Ctrl+Shift+C"},{id:"datatable",name:"",nameEn:"DataTable",icon:qo,component:zze,category:"navigation",defaultPosition:"left",minWidth:337,maxWidth:337,description:"DataTables, APIs, Variables, Transformers ",shortcut:"Ctrl+Shift+T"},{id:"datatableEditor",name:" ",nameEn:"DataTable Editor",icon:M8,component:e7e,category:"editor",defaultPosition:"left",minWidth:490,maxWidth:490,description:"DataTable, API, Variable, Transformer "},{id:"theme",name:"",nameEn:"Theme",icon:b_,component:ele,category:"tool",defaultPosition:"left",minWidth:490,maxWidth:490,description:"   "},{id:"ai",name:"AI",nameEn:"AI",icon:Zq,component:tle,category:"tool",defaultPosition:"left",minWidth:490,maxWidth:490,description:"AI   "},{id:"settings",name:"",nameEn:"Settings",icon:gf,component:lle,category:"system",defaultPosition:"left",minWidth:233,maxWidth:400,description:"   ",shortcut:"Ctrl+,"},{id:"properties",name:"",nameEn:"Properties",icon:Fg,component:f7e,category:"editor",defaultPosition:"right",minWidth:233,maxWidth:240,description:"  ",shortcut:"Ctrl+Shift+P"},{id:"styles",name:"",nameEn:"Styles",icon:pAe,component:R7e,category:"editor",defaultPosition:"right",minWidth:233,maxWidth:233,description:"CSS  ",shortcut:"Ctrl+Shift+S"},{id:"events",name:"",nameEn:"Events",icon:N8,component:jQe,category:"editor",defaultPosition:"right",minWidth:233,maxWidth:500,description:"  ",shortcut:"Ctrl+Shift+E"},{id:"monitor",name:"",nameEn:"Monitor",icon:hy,component:h9e,category:"system",defaultPosition:"bottom",minWidth:600,description:"    "}];function g9e(){p9e.forEach(t=>{O_.register(t)})}g9e();function Ej(){const t=je(u=>u.panelLayout),e=je(u=>u.setPanelLayout),n=C.useCallback((u,h,f)=>{if(h===f)return;const p=h==="left"?"leftPanels":"rightPanels",m=f==="left"?"leftPanels":"rightPanels",v=h==="left"?"activeLeftPanels":"activeRightPanels",A=t[p],x=t[m];if(!A.includes(u)){console.warn(`[usePanelLayout] Panel "${u}" not found in ${h} side`);return}const E={...t,[p]:A.filter(w=>w!==u),[m]:[...x,u],[v]:t[v].filter(w=>w!==u)};e(E)},[t,e]),r=C.useCallback((u,h)=>{const f=u==="left"?"leftPanels":"rightPanels",p=u==="left"?"activeLeftPanels":"activeRightPanels",m=u==="left"?"showLeft":"showRight";if(!t[f].includes(h)){console.warn(`[usePanelLayout] Panel "${h}" not available on ${u} side`);return}const v=t[p],A=v.includes(h),x=A?v.filter(w=>w!==h):[...v,h],E=A?t[m]:!0;e({...t,[p]:x,[m]:E})},[t,e]),i=C.useCallback(u=>{const h=u==="left"?"showLeft":"showRight";e({...t,[h]:!t[h]})},[t,e]),s=C.useCallback(()=>{const u=je.getState().resetPanelLayout;u&&u()},[]),a=C.useCallback(u=>{e(u)},[e]),o=C.useCallback(u=>{if(!t.bottomPanels.includes(u)){console.warn(`[usePanelLayout] Panel "${u}" not available on bottom`);return}const h=t.activeBottomPanels.includes(u);e({...t,activeBottomPanels:h?[]:[u],showBottom:!h})},[t,e]),l=C.useCallback(u=>{const h=Math.max(150,Math.min(600,u));e({...t,bottomHeight:h})},[t,e]),c=C.useCallback(()=>{e({...t,activeBottomPanels:[],showBottom:!1})},[t,e]);return{layout:t,isLoading:!1,isLoaded:!0,movePanel:n,togglePanel:r,toggleSide:i,resetLayout:s,setLayout:a,toggleBottomPanel:o,setBottomHeight:l,closeBottomPanel:c}}function z9({side:t,panelIds:e,activePanels:n,onPanelClick:r,onClose:i}){return d.jsxs("nav",{className:"panel-nav",children:[d.jsx("ul",{className:"nav-list",children:e.map(s=>{const a=O_.getPanel(s);if(!a)return null;const o=a.icon,l=n.includes(s);return d.jsx("li",{children:d.jsx("button",{className:`nav-button ${l?"active":""}`,onClick:()=>r(s),"aria-pressed":l,"aria-label":a.name,title:a.name,children:d.jsx(o,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})})},s)})}),i&&e.length>0&&d.jsx("button",{className:"nav-button close-all-button active",onClick:i,"aria-label":`Close ${t} panels`,title:t==="left"?" ":" ",children:t==="left"?d.jsx(A_,{color:ge.color,strokeWidth:ge.stroke,size:ge.size}):d.jsx(Sl,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})})]})}function $9({side:t,panelIds:e,activePanels:n,show:r}){return n.length===0&&!r?d.jsx("div",{className:"panel-container","data-show":!1,"data-side":t,"aria-hidden":!0,children:d.jsx("div",{className:"panel-empty-state",children:d.jsx("p",{className:"empty-message",children:" "})})}):d.jsx("div",{className:"panel-container","data-show":r,"data-side":t,"aria-hidden":!r,children:d.jsx("div",{className:"panel-content",children:e.map(i=>{const s=O_.getPanel(i);if(!s)return console.warn(`[PanelContainer] Panel "${i}" not found in registry`),null;const a=s.component,o=n.includes(i),l=s.minWidth||233;return d.jsx("div",{className:"panel-wrapper","data-panel":i,"data-active":o,style:{"--panel-width":`${l}px`,width:`${l}px`,minWidth:`${l}px`},children:d.jsx(a,{isActive:!0,side:t,onClose:void 0})},i)})})})}const Q9=C.memo(function({side:e}){const{layout:n,togglePanel:r,toggleSide:i}=Ej(),s=C.useMemo(()=>({panelIds:e==="left"?n.leftPanels:n.rightPanels,activePanels:e==="left"?n.activeLeftPanels:n.activeRightPanels,show:e==="left"?n.showLeft:n.showRight}),[e,n.leftPanels,n.rightPanels,n.activeLeftPanels,n.activeRightPanels,n.showLeft,n.showRight]),a=C.useCallback(l=>{r(e,l)},[e,r]),o=C.useCallback(()=>{i(e)},[e,i]);return d.jsx("div",{className:`panel-slot panel-slot-${e}`,children:e==="left"?d.jsxs(d.Fragment,{children:[d.jsx(z9,{side:e,panelIds:s.panelIds,activePanels:s.activePanels,onPanelClick:a,onClose:o}),d.jsx($9,{side:e,panelIds:s.panelIds,activePanels:s.activePanels,show:s.show})]}):d.jsxs(d.Fragment,{children:[d.jsx($9,{side:e,panelIds:s.panelIds,activePanels:s.activePanels,show:s.show}),d.jsx(z9,{side:e,panelIds:s.panelIds,activePanels:s.activePanels,onPanelClick:a,onClose:o})]})})}),_P=150,IP=600,m9e=C.memo(function(){const{layout:e,closeBottomPanel:n,setBottomHeight:r}=Ej(),{showBottom:i,bottomHeight:s,activeBottomPanels:a,bottomPanels:o}=e,[l,c]=C.useState(!1),u=C.useRef(0),h=C.useRef(s);G_([{key:"Escape",modifier:"none",preventDefault:!1,disabled:!i,handler:n,description:"Close bottom panel"}],[i,n]);const f=C.useCallback(p=>{p.preventDefault(),c(!0),u.current=p.clientY,h.current=s},[s]);return C.useEffect(()=>{if(!l)return;const p=v=>{const A=u.current-v.clientY,x=Math.max(_P,Math.min(IP,h.current+A));r(x)},m=()=>{c(!1)};return document.addEventListener("mousemove",p),document.addEventListener("mouseup",m),()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",m)}},[l,r]),!i||a.length===0?null:d.jsxs("div",{className:"bottom-panel-slot",style:{height:s},"data-dragging":l,role:"region","aria-label":"Bottom panel",children:[d.jsx("div",{className:"bottom-panel-resize-handle",onMouseDown:f,role:"separator","aria-orientation":"horizontal","aria-valuenow":s,"aria-valuemin":_P,"aria-valuemax":IP,tabIndex:0,onKeyDown:p=>{p.key==="ArrowUp"?(p.preventDefault(),r(Math.min(IP,s+20))):p.key==="ArrowDown"&&(p.preventDefault(),r(Math.max(_P,s-20)))},children:d.jsx(C0e,{size:16})}),d.jsxs("div",{className:"bottom-panel-header",children:[d.jsx("div",{className:"bottom-panel-tabs",children:a.map(p=>{const m=O_.getPanel(p);if(!m)return null;const v=m.icon;return d.jsxs("span",{className:"bottom-panel-tab active",children:[d.jsx(v,{size:14}),m.name]},p)})}),d.jsx("button",{className:"bottom-panel-close",onClick:n,"aria-label":"Close panel",type:"button",children:d.jsx(eh,{size:16})})]}),d.jsx("div",{className:"bottom-panel-content",children:o.map(p=>{const m=O_.getPanel(p);if(!m)return null;const v=m.component,A=a.includes(p);return d.jsx("div",{className:"bottom-panel-wrapper","data-panel":p,"data-active":A,children:d.jsx(v,{isActive:A,side:"bottom",onClose:n})},p)})})]})}),A9e=({projectId:t,projectName:e,breakpoint:n,breakpoints:r,onBreakpointChange:i,historyInfo:s,canUndo:a,canRedo:o,onUndo:l,onRedo:c,onPreview:u,onPlay:h,onPublish:f,viewMode:p,onViewModeToggle:m})=>{const{layout:v,toggleBottomPanel:A}=Ej(),x=v.showBottom&&v.activeBottomPanels.includes("monitor");return d.jsxs("nav",{className:"header",children:[d.jsxs("div",{className:"header_contents header_left",children:[d.jsx("button",{"aria-label":"Menu",children:d.jsx(P8,{strokeWidth:ge.stroke,size:ge.size})}),d.jsxs("div",{className:"project-info",children:[e&&d.jsx("span",{className:"project-name",children:e}),!t&&!e&&"No project loaded"]})]}),d.jsxs("div",{className:"header_contents screen",children:[d.jsxs("code",{className:"code sizeInfo",children:[r.find(E=>E.id===Array.from(n)[0])?.max_width,"x",r.find(E=>E.id===Array.from(n)[0])?.max_height]}),d.jsx(tf,{selectionMode:"single",selectedKeys:n,onSelectionChange:E=>{const w=Array.from(E)[0];w&&i(w)},indicator:!0,children:r.map(E=>d.jsxs($r,{id:E.id,"aria-label":E.label,children:[E.id==="screen"&&d.jsx(ime,{color:ge.color,strokeWidth:ge.stroke,size:ge.size}),E.id==="desktop"&&d.jsx(oAe,{color:ge.color,strokeWidth:ge.stroke,size:ge.size}),E.id==="tablet"&&d.jsx(Tye,{color:ge.color,strokeWidth:ge.stroke,size:ge.size}),E.id==="mobile"&&d.jsx(YAe,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})]},E.id))})]}),d.jsxs("div",{className:"header_contents header_right",children:[d.jsx("span",{className:"history-info",children:s?`${s.current}/${s.total}`:"0/0"}),d.jsx("button",{"aria-label":"Undo",onClick:l,disabled:!a,className:a?"":"disabled",children:d.jsx(qye,{color:a?ge.color:"#999",strokeWidth:ge.stroke,size:ge.size})}),d.jsx("button",{"aria-label":"Redo",onClick:c,disabled:!o,className:o?"":"disabled",children:d.jsx(IAe,{color:o?ge.color:"#999",strokeWidth:ge.stroke,size:ge.size})}),d.jsxs(tf,{selectionMode:"multiple",selectedKeys:new Set([...x?["monitor"]:[],...p==="workflow"?["workflow"]:[]]),indicator:!0,onSelectionChange:E=>{const w=new Set(E),B=x,D=w.has("monitor"),T=p==="workflow",M=w.has("workflow");B!==D&&A("monitor"),T!==M&&m()},"aria-label":"View options",children:[d.jsx($r,{id:"monitor","aria-label":"Toggle Monitor Panel",children:d.jsx(hy,{color:x?"var(--color-white)":ge.color,strokeWidth:ge.stroke,size:ge.size})}),d.jsx($r,{id:"workflow","aria-label":p==="canvas"?"Switch to Workflow":"Switch to Canvas",children:p==="canvas"?d.jsx(uY,{color:ge.color,strokeWidth:ge.stroke,size:ge.size}):d.jsx(QN,{color:"var(--color-white)",strokeWidth:ge.stroke,size:ge.size})}),d.jsx($r,{id:"preview","aria-label":"Preview",onPress:u,children:d.jsx(Vw,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})})]}),d.jsx("button",{"aria-label":"Play",onClick:h,children:d.jsx(NE,{color:ge.color,strokeWidth:ge.stroke,size:ge.size})}),d.jsx("button",{"aria-label":"Publish",className:"publish",onClick:f,children:"Publish"})]})]})},y9e=`
  * { box-sizing: border-box; }
  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
  }
  /*  body React  body element  (DOM/  ) */
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    line-height: 1.5;
  }
  .preview-empty, .preview-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: #666;
    font-size: 14px;
  }
`;function v9e(t){return`
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>XStudio Preview</title>
  <style>${y9e}</style>
</head>
<body data-preview="true" data-project-id="${t}">
  <div class="preview-loading">Loading Preview Runtime...</div>
  <script>
    // React Refresh preamble    (   )
    // @vitejs/plugin-react-swc   
    window.$RefreshReg$ = () => {};
    window.$RefreshSig$ = () => (type) => type;
    window.__vite_plugin_react_preamble_installed__ = true;
  <\/script>
  <script type="module">
    //  : Vite client preview 
    async function loadPreviewRuntime() {
      try {
        // 1. Vite client  (HMR )
        await import('/@vite/client');

        // 2. React Refresh   ( HMR )
        try {
          await import('/@react-refresh');
        } catch (e) {
          console.warn('[Preview] React Refresh not available:', e.message);
        }

        // 3. canvas runtime  (React body  )
        await import('/src/canvas/index.tsx');

        console.log('[Preview] Runtime loaded successfully');
      } catch (err) {
        console.error('[Preview] Failed to load preview:', err);
        document.body.innerHTML =
          '<div class="preview-loading">Failed to load Preview Runtime: ' + err.message + '</div>';
      }
    }

    loadPreviewRuntime();
  <\/script>
</body>
</html>
`}function x9e(t){return console.warn("[Preview] Production bundle not available, falling back to dev mode"),v9e(t)}function b9e(t){return x9e(t)}function C9e(){if(typeof window>"u")return!1;if(new URLSearchParams(window.location.search).get("srcdoc")==="true")return!0;try{if(localStorage.getItem("USE_SRCDOC")==="true")return!0}catch{}return window.__USE_SRCDOC__,!0}const U9=({projectId:t,breakpoint:e,breakpoints:n,onIframeLoad:r,onMessage:i,children:s})=>{const a=n.find(f=>f.id===Array.from(e)[0]),o=je(f=>f.showElementBorders),l=je(f=>f.showElementLabels),c=C9e(),u=C.useMemo(()=>!c||!t?null:b9e(t),[c,t]),h=we.useRef(i);return we.useEffect(()=>{h.current=i},[i]),we.useEffect(()=>{const f=p=>{h.current(p)};return window.addEventListener("message",f),()=>{window.removeEventListener("message",f)}},[]),C.useEffect(()=>{const f=document.getElementById("previewFrame");if(!f||!f.contentDocument)return;const p=f.contentDocument;let m=p.getElementById("element-visualization-styles");m||(m=p.createElement("style"),m.id="element-visualization-styles",p.head.appendChild(m));let v="";o&&(v+=`
                [data-element-id] {
                    outline: 1px dashed rgba(59, 130, 246, 0.5) !important;
                    outline-offset: -1px !important;
                }
            `),l&&(v+=`
                [data-element-id]::before {
                    content: attr(data-element-id);
                    position: absolute;
                    top: 0;
                    left: 0;
                    background: rgba(59, 130, 246, 0.9);
                    color: white;
                    font-size: 10px;
                    padding: 2px 4px;
                    border-radius: 2px;
                    z-index: 10000;
                    pointer-events: none;
                    font-family: monospace;
                }
            `),m.textContent=v},[o,l]),d.jsx("main",{className:"workSpace",children:d.jsxs("div",{className:"canvas","data-max-width":a?.max_width?.toString()||"100%","data-max-height":a?.max_height?.toString()||"100%",style:{width:a?.max_width||"100%",height:a?.max_height||"100%",borderWidth:a?.id==="screen"?"0px":"1px"},children:[c&&u?d.jsx("iframe",{id:"previewFrame",srcDoc:u,style:{width:"100%",height:"100%",border:"none"},sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",title:"XStudio Preview",onLoad:r}):d.jsx("iframe",{id:"previewFrame",src:t?`/preview/${t}?isIframe=true`:"/preview?isIframe=true",style:{width:"100%",height:"100%",border:"none"},sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",title:"XStudio Preview",onLoad:r}),s]})})};function Fo(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Fo(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var E9e={value:()=>{}};function B4(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new cT(n)}function cT(t){this._=t}function S9e(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}cT.prototype=B4.prototype={constructor:cT,on:function(t,e){var n=this._,r=S9e(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=w9e(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=H9(n[i],t.name,e);else if(e==null)for(i in n)n[i]=H9(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new cT(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function w9e(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function H9(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=E9e,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var _6="http://www.w3.org/1999/xhtml";const G9={svg:"http://www.w3.org/2000/svg",xhtml:_6,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function T4(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),G9.hasOwnProperty(e)?{space:G9[e],local:t}:t}function _9e(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===_6&&e.documentElement.namespaceURI===_6?e.createElement(t):e.createElementNS(n,t)}}function I9e(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Tle(t){var e=T4(t);return(e.local?I9e:_9e)(e)}function B9e(){}function Sj(t){return t==null?B9e:function(){return this.querySelector(t)}}function T9e(t){typeof t!="function"&&(t=Sj(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=new Array(a),l,c,u=0;u<a;++u)(l=s[u])&&(c=t.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),o[u]=c);return new sh(r,this._parents)}function M9e(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function D9e(){return[]}function Mle(t){return t==null?D9e:function(){return this.querySelectorAll(t)}}function R9e(t){return function(){return M9e(t.apply(this,arguments))}}function P9e(t){typeof t=="function"?t=R9e(t):t=Mle(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&(r.push(t.call(l,l.__data__,c,a)),i.push(l));return new sh(r,i)}function Dle(t){return function(){return this.matches(t)}}function Rle(t){return function(e){return e.matches(t)}}var k9e=Array.prototype.find;function N9e(t){return function(){return k9e.call(this.children,t)}}function L9e(){return this.firstElementChild}function F9e(t){return this.select(t==null?L9e:N9e(typeof t=="function"?t:Rle(t)))}var j9e=Array.prototype.filter;function O9e(){return Array.from(this.children)}function z9e(t){return function(){return j9e.call(this.children,t)}}function $9e(t){return this.selectAll(t==null?O9e:z9e(typeof t=="function"?t:Rle(t)))}function Q9e(t){typeof t!="function"&&(t=Dle(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&o.push(l);return new sh(r,this._parents)}function Ple(t){return new Array(t.length)}function U9e(){return new sh(this._enter||this._groups.map(Ple),this._parents)}function hM(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}hM.prototype={constructor:hM,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function H9e(t){return function(){return t}}function G9e(t,e,n,r,i,s){for(var a=0,o,l=e.length,c=s.length;a<c;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new hM(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function V9e(t,e,n,r,i,s,a){var o,l,c=new Map,u=e.length,h=s.length,f=new Array(u),p;for(o=0;o<u;++o)(l=e[o])&&(f[o]=p=a.call(l,l.__data__,o,e)+"",c.has(p)?i[o]=l:c.set(p,l));for(o=0;o<h;++o)p=a.call(t,s[o],o,s)+"",(l=c.get(p))?(r[o]=l,l.__data__=s[o],c.delete(p)):n[o]=new hM(t,s[o]);for(o=0;o<u;++o)(l=e[o])&&c.get(f[o])===l&&(i[o]=l)}function W9e(t){return t.__data__}function K9e(t,e){if(!arguments.length)return Array.from(this,W9e);var n=e?V9e:G9e,r=this._parents,i=this._groups;typeof t!="function"&&(t=H9e(t));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],h=i[c],f=h.length,p=q9e(t.call(u,u&&u.__data__,c,r)),m=p.length,v=o[c]=new Array(m),A=a[c]=new Array(m),x=l[c]=new Array(f);n(u,h,v,A,x,p,e);for(var E=0,w=0,B,D;E<m;++E)if(B=v[E]){for(E>=w&&(w=E+1);!(D=A[w])&&++w<m;);B._next=D||null}}return a=new sh(a,r),a._enter=o,a._exit=l,a}function q9e(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Y9e(){return new sh(this._exit||this._groups.map(Ple),this._parents)}function X9e(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function J9e(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var c=n[l],u=r[l],h=c.length,f=o[l]=new Array(h),p,m=0;m<h;++m)(p=c[m]||u[m])&&(f[m]=p);for(;l<i;++l)o[l]=n[l];return new sh(o,this._parents)}function Z9e(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function eUe(t){t||(t=tUe);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),c,u=0;u<o;++u)(c=a[u])&&(l[u]=c);l.sort(e)}return new sh(i,this._parents).order()}function tUe(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function nUe(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function rUe(){return Array.from(this)}function iUe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function sUe(){let t=0;for(const e of this)++t;return t}function aUe(){return!this.node()}function oUe(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this}function lUe(t){return function(){this.removeAttribute(t)}}function cUe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function uUe(t,e){return function(){this.setAttribute(t,e)}}function dUe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function hUe(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function fUe(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function pUe(t,e){var n=T4(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?cUe:lUe:typeof e=="function"?n.local?fUe:hUe:n.local?dUe:uUe)(n,e))}function kle(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function gUe(t){return function(){this.style.removeProperty(t)}}function mUe(t,e,n){return function(){this.style.setProperty(t,e,n)}}function AUe(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function yUe(t,e,n){return arguments.length>1?this.each((e==null?gUe:typeof e=="function"?AUe:mUe)(t,e,n??"")):AE(this.node(),t)}function AE(t,e){return t.style.getPropertyValue(e)||kle(t).getComputedStyle(t,null).getPropertyValue(e)}function vUe(t){return function(){delete this[t]}}function xUe(t,e){return function(){this[t]=e}}function bUe(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function CUe(t,e){return arguments.length>1?this.each((e==null?vUe:typeof e=="function"?bUe:xUe)(t,e)):this.node()[t]}function Nle(t){return t.trim().split(/^|\s+/)}function wj(t){return t.classList||new Lle(t)}function Lle(t){this._node=t,this._names=Nle(t.getAttribute("class")||"")}Lle.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Fle(t,e){for(var n=wj(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function jle(t,e){for(var n=wj(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function EUe(t){return function(){Fle(this,t)}}function SUe(t){return function(){jle(this,t)}}function wUe(t,e){return function(){(e.apply(this,arguments)?Fle:jle)(this,t)}}function _Ue(t,e){var n=Nle(t+"");if(arguments.length<2){for(var r=wj(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?wUe:e?EUe:SUe)(n,e))}function IUe(){this.textContent=""}function BUe(t){return function(){this.textContent=t}}function TUe(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function MUe(t){return arguments.length?this.each(t==null?IUe:(typeof t=="function"?TUe:BUe)(t)):this.node().textContent}function DUe(){this.innerHTML=""}function RUe(t){return function(){this.innerHTML=t}}function PUe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function kUe(t){return arguments.length?this.each(t==null?DUe:(typeof t=="function"?PUe:RUe)(t)):this.node().innerHTML}function NUe(){this.nextSibling&&this.parentNode.appendChild(this)}function LUe(){return this.each(NUe)}function FUe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jUe(){return this.each(FUe)}function OUe(t){var e=typeof t=="function"?t:Tle(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function zUe(){return null}function $Ue(t,e){var n=typeof t=="function"?t:Tle(t),r=e==null?zUe:typeof e=="function"?e:Sj(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function QUe(){var t=this.parentNode;t&&t.removeChild(this)}function UUe(){return this.each(QUe)}function HUe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function GUe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function VUe(t){return this.select(t?GUe:HUe)}function WUe(t){return arguments.length?this.property("__data__",t):this.node().__data__}function KUe(t){return function(e){t.call(this,e,this.__data__)}}function qUe(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function YUe(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function XUe(t,e,n){return function(){var r=this.__on,i,s=KUe(e);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function JUe(t,e,n){var r=qUe(t+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,u;l<c;++l)for(i=0,u=o[l];i<s;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(o=e?XUe:YUe,i=0;i<s;++i)this.each(o(r[i],e,n));return this}function Ole(t,e,n){var r=kle(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ZUe(t,e){return function(){return Ole(this,t,e)}}function eHe(t,e){return function(){return Ole(this,t,e.apply(this,arguments))}}function tHe(t,e){return this.each((typeof e=="function"?eHe:ZUe)(t,e))}function*nHe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var zle=[null];function sh(t,e){this._groups=t,this._parents=e}function $I(){return new sh([[document.documentElement]],zle)}function rHe(){return this}sh.prototype=$I.prototype={constructor:sh,select:T9e,selectAll:P9e,selectChild:F9e,selectChildren:$9e,filter:Q9e,data:K9e,enter:U9e,exit:Y9e,join:X9e,merge:J9e,selection:rHe,order:Z9e,sort:eUe,call:nUe,nodes:rUe,node:iUe,size:sUe,empty:aUe,each:oUe,attr:pUe,style:yUe,property:CUe,classed:_Ue,text:MUe,html:kUe,raise:LUe,lower:jUe,append:OUe,insert:$Ue,remove:UUe,clone:VUe,datum:WUe,on:JUe,dispatch:tHe,[Symbol.iterator]:nHe};function Wd(t){return typeof t=="string"?new sh([[document.querySelector(t)]],[document.documentElement]):new sh([[t]],zle)}function iHe(t){let e;for(;e=t.sourceEvent;)t=e;return t}function gp(t,e){if(t=iHe(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const sHe={passive:!1},V_={capture:!0,passive:!1};function BP(t){t.stopImmediatePropagation()}function K1(t){t.preventDefault(),t.stopImmediatePropagation()}function $le(t){var e=t.document.documentElement,n=Wd(t).on("dragstart.drag",K1,V_);"onselectstart"in e?n.on("selectstart.drag",K1,V_):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Qle(t,e){var n=t.document.documentElement,r=Wd(t).on("dragstart.drag",null);e&&(r.on("click.drag",K1,V_),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const t3=t=>()=>t;function I6(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:a,y:o,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}I6.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function aHe(t){return!t.ctrlKey&&!t.button}function oHe(){return this.parentNode}function lHe(t,e){return e??{x:t.x,y:t.y}}function cHe(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ule(){var t=aHe,e=oHe,n=lHe,r=cHe,i={},s=B4("start","drag","end"),a=0,o,l,c,u,h=0;function f(B){B.on("mousedown.drag",p).filter(r).on("touchstart.drag",A).on("touchmove.drag",x,sHe).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(B,D){if(!(u||!t.call(this,B,D))){var T=w(this,e.call(this,B,D),B,D,"mouse");T&&(Wd(B.view).on("mousemove.drag",m,V_).on("mouseup.drag",v,V_),$le(B.view),BP(B),c=!1,o=B.clientX,l=B.clientY,T("start",B))}}function m(B){if(K1(B),!c){var D=B.clientX-o,T=B.clientY-l;c=D*D+T*T>h}i.mouse("drag",B)}function v(B){Wd(B.view).on("mousemove.drag mouseup.drag",null),Qle(B.view,c),K1(B),i.mouse("end",B)}function A(B,D){if(t.call(this,B,D)){var T=B.changedTouches,M=e.call(this,B,D),R=T.length,k,L;for(k=0;k<R;++k)(L=w(this,M,B,D,T[k].identifier,T[k]))&&(BP(B),L("start",B,T[k]))}}function x(B){var D=B.changedTouches,T=D.length,M,R;for(M=0;M<T;++M)(R=i[D[M].identifier])&&(K1(B),R("drag",B,D[M]))}function E(B){var D=B.changedTouches,T=D.length,M,R;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),M=0;M<T;++M)(R=i[D[M].identifier])&&(BP(B),R("end",B,D[M]))}function w(B,D,T,M,R,k){var L=s.copy(),F=gp(k||T,D),z,G,V;if((V=n.call(B,new I6("beforestart",{sourceEvent:T,target:f,identifier:R,active:a,x:F[0],y:F[1],dx:0,dy:0,dispatch:L}),M))!=null)return z=V.x-F[0]||0,G=V.y-F[1]||0,function q(O,H,K){var X=F,re;switch(O){case"start":i[R]=q,re=a++;break;case"end":delete i[R],--a;case"drag":F=gp(K||H,D),re=a;break}L.call(O,B,new I6(O,{sourceEvent:H,subject:V,target:f,identifier:R,active:re,x:F[0]+z,y:F[1]+G,dx:F[0]-X[0],dy:F[1]-X[1],dispatch:L}),M)}}return f.filter=function(B){return arguments.length?(t=typeof B=="function"?B:t3(!!B),f):t},f.container=function(B){return arguments.length?(e=typeof B=="function"?B:t3(B),f):e},f.subject=function(B){return arguments.length?(n=typeof B=="function"?B:t3(B),f):n},f.touchable=function(B){return arguments.length?(r=typeof B=="function"?B:t3(!!B),f):r},f.on=function(){var B=s.on.apply(s,arguments);return B===s?f:B},f.clickDistance=function(B){return arguments.length?(h=(B=+B)*B,f):Math.sqrt(h)},f}function _j(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Hle(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function QI(){}var W_=.7,fM=1/W_,q1="\\s*([+-]?\\d+)\\s*",K_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",uHe=/^#([0-9a-f]{3,8})$/,dHe=new RegExp(`^rgb\\(${q1},${q1},${q1}\\)$`),hHe=new RegExp(`^rgb\\(${Gg},${Gg},${Gg}\\)$`),fHe=new RegExp(`^rgba\\(${q1},${q1},${q1},${K_}\\)$`),pHe=new RegExp(`^rgba\\(${Gg},${Gg},${Gg},${K_}\\)$`),gHe=new RegExp(`^hsl\\(${K_},${Gg},${Gg}\\)$`),mHe=new RegExp(`^hsla\\(${K_},${Gg},${Gg},${K_}\\)$`),V9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_j(QI,Tb,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:W9,formatHex:W9,formatHex8:AHe,formatHsl:yHe,formatRgb:K9,toString:K9});function W9(){return this.rgb().formatHex()}function AHe(){return this.rgb().formatHex8()}function yHe(){return Gle(this).formatHsl()}function K9(){return this.rgb().formatRgb()}function Tb(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=uHe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?q9(e):n===3?new od(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?n3(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?n3(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=dHe.exec(t))?new od(e[1],e[2],e[3],1):(e=hHe.exec(t))?new od(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=fHe.exec(t))?n3(e[1],e[2],e[3],e[4]):(e=pHe.exec(t))?n3(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=gHe.exec(t))?J9(e[1],e[2]/100,e[3]/100,1):(e=mHe.exec(t))?J9(e[1],e[2]/100,e[3]/100,e[4]):V9.hasOwnProperty(t)?q9(V9[t]):t==="transparent"?new od(NaN,NaN,NaN,0):null}function q9(t){return new od(t>>16&255,t>>8&255,t&255,1)}function n3(t,e,n,r){return r<=0&&(t=e=n=NaN),new od(t,e,n,r)}function vHe(t){return t instanceof QI||(t=Tb(t)),t?(t=t.rgb(),new od(t.r,t.g,t.b,t.opacity)):new od}function B6(t,e,n,r){return arguments.length===1?vHe(t):new od(t,e,n,r??1)}function od(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}_j(od,B6,Hle(QI,{brighter(t){return t=t==null?fM:Math.pow(fM,t),new od(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?W_:Math.pow(W_,t),new od(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new od(cb(this.r),cb(this.g),cb(this.b),pM(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Y9,formatHex:Y9,formatHex8:xHe,formatRgb:X9,toString:X9}));function Y9(){return`#${eb(this.r)}${eb(this.g)}${eb(this.b)}`}function xHe(){return`#${eb(this.r)}${eb(this.g)}${eb(this.b)}${eb((isNaN(this.opacity)?1:this.opacity)*255)}`}function X9(){const t=pM(this.opacity);return`${t===1?"rgb(":"rgba("}${cb(this.r)}, ${cb(this.g)}, ${cb(this.b)}${t===1?")":`, ${t})`}`}function pM(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function cb(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function eb(t){return t=cb(t),(t<16?"0":"")+t.toString(16)}function J9(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new xp(t,e,n,r)}function Gle(t){if(t instanceof xp)return new xp(t.h,t.s,t.l,t.opacity);if(t instanceof QI||(t=Tb(t)),!t)return new xp;if(t instanceof xp)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new xp(a,o,l,t.opacity)}function bHe(t,e,n,r){return arguments.length===1?Gle(t):new xp(t,e,n,r??1)}function xp(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}_j(xp,bHe,Hle(QI,{brighter(t){return t=t==null?fM:Math.pow(fM,t),new xp(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?W_:Math.pow(W_,t),new xp(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new od(TP(t>=240?t-240:t+120,i,r),TP(t,i,r),TP(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new xp(Z9(this.h),r3(this.s),r3(this.l),pM(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=pM(this.opacity);return`${t===1?"hsl(":"hsla("}${Z9(this.h)}, ${r3(this.s)*100}%, ${r3(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Z9(t){return t=(t||0)%360,t<0?t+360:t}function r3(t){return Math.max(0,Math.min(1,t||0))}function TP(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ij=t=>()=>t;function CHe(t,e){return function(n){return t+n*e}}function EHe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function SHe(t){return(t=+t)==1?Vle:function(e,n){return n-e?EHe(e,n,t):Ij(isNaN(e)?n:e)}}function Vle(t,e){var n=e-t;return n?CHe(t,n):Ij(isNaN(t)?e:t)}const gM=(function t(e){var n=SHe(e);function r(i,s){var a=n((i=B6(i)).r,(s=B6(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),c=Vle(i.opacity,s.opacity);return function(u){return i.r=a(u),i.g=o(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r})(1);function wHe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function _He(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function IHe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=n_(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function BHe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Lg(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function THe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=n_(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var T6=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,MP=new RegExp(T6.source,"g");function MHe(t){return function(){return t}}function DHe(t){return function(e){return t(e)+""}}function Wle(t,e){var n=T6.lastIndex=MP.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=T6.exec(t))&&(i=MP.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:Lg(r,i)})),n=MP.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?DHe(l[0].x):MHe(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)o[(h=l[u]).i]=h.x(c);return o.join("")})}function n_(t,e){var n=typeof e,r;return e==null||n==="boolean"?Ij(e):(n==="number"?Lg:n==="string"?(r=Tb(e))?(e=r,gM):Wle:e instanceof Tb?gM:e instanceof Date?BHe:_He(e)?wHe:Array.isArray(e)?IHe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?THe:Lg)(t,e)}var eU=180/Math.PI,M6={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Kle(t,e,n,r,i,s){var a,o,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*eU,skewX:Math.atan(l)*eU,scaleX:a,scaleY:o}}var i3;function RHe(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?M6:Kle(e.a,e.b,e.c,e.d,e.e,e.f)}function PHe(t){return t==null||(i3||(i3=document.createElementNS("http://www.w3.org/2000/svg","g")),i3.setAttribute("transform",t),!(t=i3.transform.baseVal.consolidate()))?M6:(t=t.matrix,Kle(t.a,t.b,t.c,t.d,t.e,t.f))}function qle(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,h,f,p,m){if(c!==h||u!==f){var v=p.push("translate(",null,e,null,n);m.push({i:v-4,x:Lg(c,h)},{i:v-2,x:Lg(u,f)})}else(h||f)&&p.push("translate("+h+e+f+n)}function a(c,u,h,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Lg(c,u)})):u&&h.push(i(h)+"rotate("+u+r)}function o(c,u,h,f){c!==u?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Lg(c,u)}):u&&h.push(i(h)+"skewX("+u+r)}function l(c,u,h,f,p,m){if(c!==h||u!==f){var v=p.push(i(p)+"scale(",null,",",null,")");m.push({i:v-4,x:Lg(c,h)},{i:v-2,x:Lg(u,f)})}else(h!==1||f!==1)&&p.push(i(p)+"scale("+h+","+f+")")}return function(c,u){var h=[],f=[];return c=t(c),u=t(u),s(c.translateX,c.translateY,u.translateX,u.translateY,h,f),a(c.rotate,u.rotate,h,f),o(c.skewX,u.skewX,h,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,f),c=u=null,function(p){for(var m=-1,v=f.length,A;++m<v;)h[(A=f[m]).i]=A.x(p);return h.join("")}}}var kHe=qle(RHe,"px, ","px)","deg)"),NHe=qle(PHe,", ",")",")"),LHe=1e-12;function tU(t){return((t=Math.exp(t))+1/t)/2}function FHe(t){return((t=Math.exp(t))-1/t)/2}function jHe(t){return((t=Math.exp(2*t))-1)/(t+1)}const uT=(function t(e,n,r){function i(s,a){var o=s[0],l=s[1],c=s[2],u=a[0],h=a[1],f=a[2],p=u-o,m=h-l,v=p*p+m*m,A,x;if(v<LHe)x=Math.log(f/c)/e,A=function(M){return[o+M*p,l+M*m,c*Math.exp(e*M*x)]};else{var E=Math.sqrt(v),w=(f*f-c*c+r*v)/(2*c*n*E),B=(f*f-c*c-r*v)/(2*f*n*E),D=Math.log(Math.sqrt(w*w+1)-w),T=Math.log(Math.sqrt(B*B+1)-B);x=(T-D)/e,A=function(M){var R=M*x,k=tU(D),L=c/(n*E)*(k*jHe(e*R+D)-FHe(D));return[o+L*p,l+L*m,c*k/tU(e*R+D)]}}return A.duration=x*1e3*e/Math.SQRT2,A}return i.rho=function(s){var a=Math.max(.001,+s),o=a*a,l=o*o;return t(a,o,l)},i})(Math.SQRT2,2,4);var yE=0,jw=0,ew=0,Yle=1e3,mM,Ow,AM=0,Mb=0,M4=0,q_=typeof performance=="object"&&performance.now?performance:Date,Xle=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Bj(){return Mb||(Xle(OHe),Mb=q_.now()+M4)}function OHe(){Mb=0}function yM(){this._call=this._time=this._next=null}yM.prototype=Jle.prototype={constructor:yM,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Bj():+n)+(e==null?0:+e),!this._next&&Ow!==this&&(Ow?Ow._next=this:mM=this,Ow=this),this._call=t,this._time=n,D6()},stop:function(){this._call&&(this._call=null,this._time=1/0,D6())}};function Jle(t,e,n){var r=new yM;return r.restart(t,e,n),r}function zHe(){Bj(),++yE;for(var t=mM,e;t;)(e=Mb-t._time)>=0&&t._call.call(void 0,e),t=t._next;--yE}function nU(){Mb=(AM=q_.now())+M4,yE=jw=0;try{zHe()}finally{yE=0,QHe(),Mb=0}}function $He(){var t=q_.now(),e=t-AM;e>Yle&&(M4-=e,AM=t)}function QHe(){for(var t,e=mM,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:mM=n);Ow=t,D6(r)}function D6(t){if(!yE){jw&&(jw=clearTimeout(jw));var e=t-Mb;e>24?(t<1/0&&(jw=setTimeout(nU,t-q_.now()-M4)),ew&&(ew=clearInterval(ew))):(ew||(AM=q_.now(),ew=setInterval($He,Yle)),yE=1,Xle(nU))}}function rU(t,e,n){var r=new yM;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var UHe=B4("start","end","cancel","interrupt"),HHe=[],Zle=0,iU=1,R6=2,dT=3,sU=4,P6=5,hT=6;function D4(t,e,n,r,i,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;GHe(t,n,{name:e,index:r,group:i,on:UHe,tween:HHe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Zle})}function Tj(t,e){var n=jp(t,e);if(n.state>Zle)throw new Error("too late; already scheduled");return n}function Xg(t,e){var n=jp(t,e);if(n.state>dT)throw new Error("too late; already running");return n}function jp(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function GHe(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Jle(s,0,n.time);function s(c){n.state=iU,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var u,h,f,p;if(n.state!==iU)return l();for(u in r)if(p=r[u],p.name===n.name){if(p.state===dT)return rU(a);p.state===sU?(p.state=hT,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[u]):+u<e&&(p.state=hT,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[u])}if(rU(function(){n.state===dT&&(n.state=sU,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=R6,n.on.call("start",t,t.__data__,n.index,n.group),n.state===R6){for(n.state=dT,i=new Array(f=n.tween.length),u=0,h=-1;u<f;++u)(p=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=p);i.length=h+1}}function o(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=P6,1),h=-1,f=i.length;++h<f;)i[h].call(t,u);n.state===P6&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=hT,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function fT(t,e){var n=t.__transition,r,i,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){s=!1;continue}i=r.state>R6&&r.state<P6,r.state=hT,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}s&&delete t.__transition}}function VHe(t){return this.each(function(){fT(this,t)})}function WHe(t,e){var n,r;return function(){var i=Xg(this,t),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function KHe(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Xg(this,t),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=o;break}l===c&&i.push(o)}s.tween=i}}function qHe(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=jp(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?WHe:KHe)(n,t,e))}function Mj(t,e,n){var r=t._id;return t.each(function(){var i=Xg(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return jp(i,r).value[e]}}function ece(t,e){var n;return(typeof e=="number"?Lg:e instanceof Tb?gM:(n=Tb(e))?(e=n,gM):Wle)(t,e)}function YHe(t){return function(){this.removeAttribute(t)}}function XHe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function JHe(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===r?s:s=e(r=a,n)}}function ZHe(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?s:s=e(r=a,n)}}function eGe(t,e,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o)))}}function tGe(t,e,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o)))}}function nGe(t,e){var n=T4(t),r=n==="transform"?NHe:ece;return this.attrTween(t,typeof e=="function"?(n.local?tGe:eGe)(n,r,Mj(this,"attr."+t,e)):e==null?(n.local?XHe:YHe)(n):(n.local?ZHe:JHe)(n,r,e))}function rGe(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function iGe(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function sGe(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&iGe(t,s)),n}return i._value=e,i}function aGe(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&rGe(t,s)),n}return i._value=e,i}function oGe(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=T4(t);return this.tween(n,(r.local?sGe:aGe)(r,e))}function lGe(t,e){return function(){Tj(this,t).delay=+e.apply(this,arguments)}}function cGe(t,e){return e=+e,function(){Tj(this,t).delay=e}}function uGe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?lGe:cGe)(e,t)):jp(this.node(),e).delay}function dGe(t,e){return function(){Xg(this,t).duration=+e.apply(this,arguments)}}function hGe(t,e){return e=+e,function(){Xg(this,t).duration=e}}function fGe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?dGe:hGe)(e,t)):jp(this.node(),e).duration}function pGe(t,e){if(typeof e!="function")throw new Error;return function(){Xg(this,t).ease=e}}function gGe(t){var e=this._id;return arguments.length?this.each(pGe(e,t)):jp(this.node(),e).ease}function mGe(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Xg(this,t).ease=n}}function AGe(t){if(typeof t!="function")throw new Error;return this.each(mGe(this._id,t))}function yGe(t){typeof t!="function"&&(t=Dle(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&o.push(l);return new N0(r,this._parents,this._name,this._id)}function vGe(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=e[o],c=n[o],u=l.length,h=a[o]=new Array(u),f,p=0;p<u;++p)(f=l[p]||c[p])&&(h[p]=f);for(;o<r;++o)a[o]=e[o];return new N0(a,this._parents,this._name,this._id)}function xGe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function bGe(t,e,n){var r,i,s=xGe(e)?Tj:Xg;return function(){var a=s(this,t),o=a.on;o!==r&&(i=(r=o).copy()).on(e,n),a.on=i}}function CGe(t,e){var n=this._id;return arguments.length<2?jp(this.node(),n).on.on(t):this.each(bGe(n,t,e))}function EGe(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function SGe(){return this.on("end.remove",EGe(this._id))}function wGe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Sj(t));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],l=o.length,c=s[a]=new Array(l),u,h,f=0;f<l;++f)(u=o[f])&&(h=t.call(u,u.__data__,f,o))&&("__data__"in u&&(h.__data__=u.__data__),c[f]=h,D4(c[f],e,n,f,c,jp(u,n)));return new N0(s,this._parents,e,n)}function _Ge(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Mle(t));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var l=r[o],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var f=t.call(u,u.__data__,h,l),p,m=jp(u,n),v=0,A=f.length;v<A;++v)(p=f[v])&&D4(p,e,n,v,f,m);s.push(f),a.push(u)}return new N0(s,a,e,n)}var IGe=$I.prototype.constructor;function BGe(){return new IGe(this._groups,this._parents)}function TGe(t,e){var n,r,i;return function(){var s=AE(this,t),a=(this.style.removeProperty(t),AE(this,t));return s===a?null:s===n&&a===r?i:i=e(n=s,r=a)}}function tce(t){return function(){this.style.removeProperty(t)}}function MGe(t,e,n){var r,i=n+"",s;return function(){var a=AE(this,t);return a===i?null:a===r?s:s=e(r=a,n)}}function DGe(t,e,n){var r,i,s;return function(){var a=AE(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),AE(this,t))),a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o))}}function RGe(t,e){var n,r,i,s="style."+e,a="end."+s,o;return function(){var l=Xg(this,t),c=l.on,u=l.value[s]==null?o||(o=tce(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(a,i=u),l.on=r}}function PGe(t,e,n){var r=(t+="")=="transform"?kHe:ece;return e==null?this.styleTween(t,TGe(t,r)).on("end.style."+t,tce(t)):typeof e=="function"?this.styleTween(t,DGe(t,r,Mj(this,"style."+t,e))).each(RGe(this._id,t)):this.styleTween(t,MGe(t,r,e),n).on("end.style."+t,null)}function kGe(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function NGe(t,e,n){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&kGe(t,a,n)),r}return s._value=e,s}function LGe(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,NGe(t,e,n??""))}function FGe(t){return function(){this.textContent=t}}function jGe(t){return function(){var e=t(this);this.textContent=e??""}}function OGe(t){return this.tween("text",typeof t=="function"?jGe(Mj(this,"text",t)):FGe(t==null?"":t+""))}function zGe(t){return function(e){this.textContent=t.call(this,e)}}function $Ge(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&zGe(i)),e}return r._value=t,r}function QGe(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,$Ge(t))}function UGe(){for(var t=this._name,e=this._id,n=nce(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)if(l=a[c]){var u=jp(l,e);D4(l,t,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new N0(r,this._parents,t,n)}function HGe(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--i===0&&s()}};n.each(function(){var c=Xg(this,r),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),c.on=e}),i===0&&s()})}var GGe=0;function N0(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function nce(){return++GGe}var Km=$I.prototype;N0.prototype={constructor:N0,select:wGe,selectAll:_Ge,selectChild:Km.selectChild,selectChildren:Km.selectChildren,filter:yGe,merge:vGe,selection:BGe,transition:UGe,call:Km.call,nodes:Km.nodes,node:Km.node,size:Km.size,empty:Km.empty,each:Km.each,on:CGe,attr:nGe,attrTween:oGe,style:PGe,styleTween:LGe,text:OGe,textTween:QGe,remove:SGe,tween:qHe,delay:uGe,duration:fGe,ease:gGe,easeVarying:AGe,end:HGe,[Symbol.iterator]:Km[Symbol.iterator]};function VGe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var WGe={time:null,delay:0,duration:250,ease:VGe};function KGe(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function qGe(t){var e,n;t instanceof N0?(e=t._id,t=t._name):(e=nce(),(n=WGe).time=Bj(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&D4(l,t,e,c,a,n||KGe(l,e));return new N0(r,this._parents,t,e)}$I.prototype.interrupt=VHe;$I.prototype.transition=qGe;const s3=t=>()=>t;function YGe(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function m0(t,e,n){this.k=t,this.x=e,this.y=n}m0.prototype={constructor:m0,scale:function(t){return t===1?this:new m0(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new m0(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var R4=new m0(1,0,0);rce.prototype=m0.prototype;function rce(t){for(;!t.__zoom;)if(!(t=t.parentNode))return R4;return t.__zoom}function DP(t){t.stopImmediatePropagation()}function tw(t){t.preventDefault(),t.stopImmediatePropagation()}function XGe(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function JGe(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function aU(){return this.__zoom||R4}function ZGe(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function eVe(){return navigator.maxTouchPoints||"ontouchstart"in this}function tVe(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function ice(){var t=XGe,e=JGe,n=tVe,r=ZGe,i=eVe,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],o=250,l=uT,c=B4("start","zoom","end"),u,h,f,p=500,m=150,v=0,A=10;function x(V){V.property("__zoom",aU).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",L).filter(i).on("touchstart.zoom",F).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(V,q,O,H){var K=V.selection?V.selection():V;K.property("__zoom",aU),V!==K?D(V,q,O,H):K.interrupt().each(function(){T(this,arguments).event(H).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},x.scaleBy=function(V,q,O,H){x.scaleTo(V,function(){var K=this.__zoom.k,X=typeof q=="function"?q.apply(this,arguments):q;return K*X},O,H)},x.scaleTo=function(V,q,O,H){x.transform(V,function(){var K=e.apply(this,arguments),X=this.__zoom,re=O==null?B(K):typeof O=="function"?O.apply(this,arguments):O,J=X.invert(re),Z=typeof q=="function"?q.apply(this,arguments):q;return n(w(E(X,Z),re,J),K,a)},O,H)},x.translateBy=function(V,q,O,H){x.transform(V,function(){return n(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof O=="function"?O.apply(this,arguments):O),e.apply(this,arguments),a)},null,H)},x.translateTo=function(V,q,O,H,K){x.transform(V,function(){var X=e.apply(this,arguments),re=this.__zoom,J=H==null?B(X):typeof H=="function"?H.apply(this,arguments):H;return n(R4.translate(J[0],J[1]).scale(re.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof O=="function"?-O.apply(this,arguments):-O),X,a)},H,K)};function E(V,q){return q=Math.max(s[0],Math.min(s[1],q)),q===V.k?V:new m0(q,V.x,V.y)}function w(V,q,O){var H=q[0]-O[0]*V.k,K=q[1]-O[1]*V.k;return H===V.x&&K===V.y?V:new m0(V.k,H,K)}function B(V){return[(+V[0][0]+ +V[1][0])/2,(+V[0][1]+ +V[1][1])/2]}function D(V,q,O,H){V.on("start.zoom",function(){T(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(H).end()}).tween("zoom",function(){var K=this,X=arguments,re=T(K,X).event(H),J=e.apply(K,X),Z=O==null?B(J):typeof O=="function"?O.apply(K,X):O,ee=Math.max(J[1][0]-J[0][0],J[1][1]-J[0][1]),te=K.__zoom,oe=typeof q=="function"?q.apply(K,X):q,ae=l(te.invert(Z).concat(ee/te.k),oe.invert(Z).concat(ee/oe.k));return function(se){if(se===1)se=oe;else{var fe=ae(se),Ee=ee/fe[2];se=new m0(Ee,Z[0]-fe[0]*Ee,Z[1]-fe[1]*Ee)}re.zoom(null,se)}})}function T(V,q,O){return!O&&V.__zooming||new M(V,q)}function M(V,q){this.that=V,this.args=q,this.active=0,this.sourceEvent=null,this.extent=e.apply(V,q),this.taps=0}M.prototype={event:function(V){return V&&(this.sourceEvent=V),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(V,q){return this.mouse&&V!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&V!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&V!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(V){var q=Wd(this.that).datum();c.call(V,this.that,new YGe(V,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:c}),q)}};function R(V,...q){if(!t.apply(this,arguments))return;var O=T(this,q).event(V),H=this.__zoom,K=Math.max(s[0],Math.min(s[1],H.k*Math.pow(2,r.apply(this,arguments)))),X=gp(V);if(O.wheel)(O.mouse[0][0]!==X[0]||O.mouse[0][1]!==X[1])&&(O.mouse[1]=H.invert(O.mouse[0]=X)),clearTimeout(O.wheel);else{if(H.k===K)return;O.mouse=[X,H.invert(X)],fT(this),O.start()}tw(V),O.wheel=setTimeout(re,m),O.zoom("mouse",n(w(E(H,K),O.mouse[0],O.mouse[1]),O.extent,a));function re(){O.wheel=null,O.end()}}function k(V,...q){if(f||!t.apply(this,arguments))return;var O=V.currentTarget,H=T(this,q,!0).event(V),K=Wd(V.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",ee,!0),X=gp(V,O),re=V.clientX,J=V.clientY;$le(V.view),DP(V),H.mouse=[X,this.__zoom.invert(X)],fT(this),H.start();function Z(te){if(tw(te),!H.moved){var oe=te.clientX-re,ae=te.clientY-J;H.moved=oe*oe+ae*ae>v}H.event(te).zoom("mouse",n(w(H.that.__zoom,H.mouse[0]=gp(te,O),H.mouse[1]),H.extent,a))}function ee(te){K.on("mousemove.zoom mouseup.zoom",null),Qle(te.view,H.moved),tw(te),H.event(te).end()}}function L(V,...q){if(t.apply(this,arguments)){var O=this.__zoom,H=gp(V.changedTouches?V.changedTouches[0]:V,this),K=O.invert(H),X=O.k*(V.shiftKey?.5:2),re=n(w(E(O,X),H,K),e.apply(this,q),a);tw(V),o>0?Wd(this).transition().duration(o).call(D,re,H,V):Wd(this).call(x.transform,re,H,V)}}function F(V,...q){if(t.apply(this,arguments)){var O=V.touches,H=O.length,K=T(this,q,V.changedTouches.length===H).event(V),X,re,J,Z;for(DP(V),re=0;re<H;++re)J=O[re],Z=gp(J,this),Z=[Z,this.__zoom.invert(Z),J.identifier],K.touch0?!K.touch1&&K.touch0[2]!==Z[2]&&(K.touch1=Z,K.taps=0):(K.touch0=Z,X=!0,K.taps=1+!!u);u&&(u=clearTimeout(u)),X&&(K.taps<2&&(h=Z[0],u=setTimeout(function(){u=null},p)),fT(this),K.start())}}function z(V,...q){if(this.__zooming){var O=T(this,q).event(V),H=V.changedTouches,K=H.length,X,re,J,Z;for(tw(V),X=0;X<K;++X)re=H[X],J=gp(re,this),O.touch0&&O.touch0[2]===re.identifier?O.touch0[0]=J:O.touch1&&O.touch1[2]===re.identifier&&(O.touch1[0]=J);if(re=O.that.__zoom,O.touch1){var ee=O.touch0[0],te=O.touch0[1],oe=O.touch1[0],ae=O.touch1[1],se=(se=oe[0]-ee[0])*se+(se=oe[1]-ee[1])*se,fe=(fe=ae[0]-te[0])*fe+(fe=ae[1]-te[1])*fe;re=E(re,Math.sqrt(se/fe)),J=[(ee[0]+oe[0])/2,(ee[1]+oe[1])/2],Z=[(te[0]+ae[0])/2,(te[1]+ae[1])/2]}else if(O.touch0)J=O.touch0[0],Z=O.touch0[1];else return;O.zoom("touch",n(w(re,J,Z),O.extent,a))}}function G(V,...q){if(this.__zooming){var O=T(this,q).event(V),H=V.changedTouches,K=H.length,X,re;for(DP(V),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),X=0;X<K;++X)re=H[X],O.touch0&&O.touch0[2]===re.identifier?delete O.touch0:O.touch1&&O.touch1[2]===re.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(re=gp(re,this),Math.hypot(h[0]-re[0],h[1]-re[1])<A)){var J=Wd(this).on("dblclick.zoom");J&&J.apply(this,arguments)}}}return x.wheelDelta=function(V){return arguments.length?(r=typeof V=="function"?V:s3(+V),x):r},x.filter=function(V){return arguments.length?(t=typeof V=="function"?V:s3(!!V),x):t},x.touchable=function(V){return arguments.length?(i=typeof V=="function"?V:s3(!!V),x):i},x.extent=function(V){return arguments.length?(e=typeof V=="function"?V:s3([[+V[0][0],+V[0][1]],[+V[1][0],+V[1][1]]]),x):e},x.scaleExtent=function(V){return arguments.length?(s[0]=+V[0],s[1]=+V[1],x):[s[0],s[1]]},x.translateExtent=function(V){return arguments.length?(a[0][0]=+V[0][0],a[1][0]=+V[1][0],a[0][1]=+V[0][1],a[1][1]=+V[1][1],x):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},x.constrain=function(V){return arguments.length?(n=V,x):n},x.duration=function(V){return arguments.length?(o=+V,x):o},x.interpolate=function(V){return arguments.length?(l=V,x):l},x.on=function(){var V=c.on.apply(c,arguments);return V===c?x:V},x.clickDistance=function(V){return arguments.length?(v=(V=+V)*V,x):Math.sqrt(v)},x.tapDistance=function(V){return arguments.length?(A=+V,x):A},x}const Kg={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:r}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Y_=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],sce=["Enter"," ","Escape"],ace={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:e,y:n})=>`Moved selected node ${t}. New position, x: ${e}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var vE;(function(t){t.Strict="strict",t.Loose="loose"})(vE||(vE={}));var ub;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(ub||(ub={}));var X_;(function(t){t.Partial="partial",t.Full="full"})(X_||(X_={}));const oce={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Ay;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ay||(Ay={}));var xE;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(xE||(xE={}));var Qn;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Qn||(Qn={}));const oU={[Qn.Left]:Qn.Right,[Qn.Right]:Qn.Left,[Qn.Top]:Qn.Bottom,[Qn.Bottom]:Qn.Top};function lce(t){return t===null?null:t?"valid":"invalid"}const cce=t=>"id"in t&&"source"in t&&"target"in t,nVe=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Dj=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),UI=(t,e=[0,0])=>{const{width:n,height:r}=H0(t),i=t.origin??e,s=n*i[0],a=r*i[1];return{x:t.position.x-s,y:t.position.y-a}},rVe=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const s=typeof i=="string";let a=!e.nodeLookup&&!s?i:void 0;e.nodeLookup&&(a=s?e.nodeLookup.get(i):Dj(i)?i:e.nodeLookup.get(i.id));const o=a?vM(a,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return P4(r,o)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return k4(n)},HI=(t,e={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return t.forEach(i=>{(e.filter===void 0||e.filter(i))&&(n=P4(n,vM(i)),r=!0)}),r?k4(n):{x:0,y:0,width:0,height:0}},Rj=(t,e,[n,r,i]=[0,0,1],s=!1,a=!1)=>{const o={...VI(e,[n,r,i]),width:e.width/i,height:e.height/i},l=[];for(const c of t.values()){const{measured:u,selectable:h=!0,hidden:f=!1}=c;if(a&&!h||f)continue;const p=u.width??c.width??c.initialWidth??null,m=u.height??c.height??c.initialHeight??null,v=J_(o,CE(c)),A=(p??0)*(m??0),x=s&&v>0;(!c.internals.handleBounds||x||v>=A||c.dragging)&&l.push(c)}return l},iVe=(t,e)=>{const n=new Set;return t.forEach(r=>{n.add(r.id)}),e.filter(r=>n.has(r.source)||n.has(r.target))};function sVe(t,e){const n=new Map,r=e?.nodes?new Set(e.nodes.map(i=>i.id)):null;return t.forEach(i=>{i.measured.width&&i.measured.height&&(e?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function aVe({nodes:t,width:e,height:n,panZoom:r,minZoom:i,maxZoom:s},a){if(t.size===0)return Promise.resolve(!0);const o=sVe(t,a),l=HI(o),c=Pj(l,e,n,a?.minZoom??i,a?.maxZoom??s,a?.padding??.1);return await r.setViewport(c,{duration:a?.duration,ease:a?.ease,interpolate:a?.interpolate}),Promise.resolve(!0)}function uce({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const a=n.get(t),o=a.parentId?n.get(a.parentId):void 0,{x:l,y:c}=o?o.internals.positionAbsolute:{x:0,y:0},u=a.origin??r;let h=a.extent||i;if(a.extent==="parent"&&!a.expandParent)if(!o)s?.("005",Kg.error005());else{const p=o.measured.width,m=o.measured.height;p&&m&&(h=[[l,c],[l+p,c+m]])}else o&&EE(a.extent)&&(h=[[a.extent[0][0]+l,a.extent[0][1]+c],[a.extent[1][0]+l,a.extent[1][1]+c]]);const f=EE(h)?Db(e,h,a.measured):e;return(a.measured.width===void 0||a.measured.height===void 0)&&s?.("015",Kg.error015()),{position:{x:f.x-l+(a.measured.width??0)*u[0],y:f.y-c+(a.measured.height??0)*u[1]},positionAbsolute:f}}async function oVe({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(t.map(f=>f.id)),a=[];for(const f of n){if(f.deletable===!1)continue;const p=s.has(f.id),m=!p&&f.parentId&&a.find(v=>v.id===f.parentId);(p||m)&&a.push(f)}const o=new Set(e.map(f=>f.id)),l=r.filter(f=>f.deletable!==!1),u=iVe(a,l);for(const f of l)o.has(f.id)&&!u.find(m=>m.id===f.id)&&u.push(f);if(!i)return{edges:u,nodes:a};const h=await i({nodes:a,edges:u});return typeof h=="boolean"?h?{edges:u,nodes:a}:{edges:[],nodes:[]}:h}const bE=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Db=(t={x:0,y:0},e,n)=>({x:bE(t.x,e[0][0],e[1][0]-(n?.width??0)),y:bE(t.y,e[0][1],e[1][1]-(n?.height??0))});function dce(t,e,n){const{width:r,height:i}=H0(n),{x:s,y:a}=n.internals.positionAbsolute;return Db(t,[[s,a],[s+r,a+i]],e)}const lU=(t,e,n)=>t<e?bE(Math.abs(t-e),1,e)/e:t>n?-bE(Math.abs(t-n),1,e)/e:0,hce=(t,e,n=15,r=40)=>{const i=lU(t.x,r,e.width-r)*n,s=lU(t.y,r,e.height-r)*n;return[i,s]},P4=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),k6=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),k4=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),CE=(t,e=[0,0])=>{const{x:n,y:r}=Dj(t)?t.internals.positionAbsolute:UI(t,e);return{x:n,y:r,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},vM=(t,e=[0,0])=>{const{x:n,y:r}=Dj(t)?t.internals.positionAbsolute:UI(t,e);return{x:n,y:r,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:r+(t.measured?.height??t.height??t.initialHeight??0)}},fce=(t,e)=>k4(P4(k6(t),k6(e))),J_=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},cU=t=>Ep(t.width)&&Ep(t.height)&&Ep(t.x)&&Ep(t.y),Ep=t=>!isNaN(t)&&isFinite(t),lVe=(t,e)=>{},GI=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),VI=({x:t,y:e},[n,r,i],s=!1,a=[1,1])=>{const o={x:(t-n)/i,y:(e-r)/i};return s?GI(o,a):o},xM=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r});function o1(t,e){if(typeof t=="number")return Math.floor((e-e/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(e*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function cVe(t,e,n){if(typeof t=="string"||typeof t=="number"){const r=o1(t,n),i=o1(t,e);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof t=="object"){const r=o1(t.top??t.y??0,n),i=o1(t.bottom??t.y??0,n),s=o1(t.left??t.x??0,e),a=o1(t.right??t.x??0,e);return{top:r,right:a,bottom:i,left:s,x:s+a,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function uVe(t,e,n,r,i,s){const{x:a,y:o}=xM(t,[e,n,r]),{x:l,y:c}=xM({x:t.x+t.width,y:t.y+t.height},[e,n,r]),u=i-l,h=s-c;return{left:Math.floor(a),top:Math.floor(o),right:Math.floor(u),bottom:Math.floor(h)}}const Pj=(t,e,n,r,i,s)=>{const a=cVe(s,e,n),o=(e-a.x)/t.width,l=(n-a.y)/t.height,c=Math.min(o,l),u=bE(c,r,i),h=t.x+t.width/2,f=t.y+t.height/2,p=e/2-h*u,m=n/2-f*u,v=uVe(t,p,m,u,e,n),A={left:Math.min(v.left-a.left,0),top:Math.min(v.top-a.top,0),right:Math.min(v.right-a.right,0),bottom:Math.min(v.bottom-a.bottom,0)};return{x:p-A.left+A.right,y:m-A.top+A.bottom,zoom:u}},Z_=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function EE(t){return t!=null&&t!=="parent"}function H0(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function pce(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function gce(t,e={width:0,height:0},n,r,i){const s={...t},a=r.get(n);if(a){const o=a.origin||i;s.x+=a.internals.positionAbsolute.x-(e.width??0)*o[0],s.y+=a.internals.positionAbsolute.y-(e.height??0)*o[1]}return s}function uU(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function dVe(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}function hVe(t){return{...ace,...t||{}}}function r_(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:a}=Sp(t),o=VI({x:s-(i?.left??0),y:a-(i?.top??0)},r),{x:l,y:c}=n?GI(o,e):o;return{xSnapped:l,ySnapped:c,...o}}const kj=t=>({width:t.offsetWidth,height:t.offsetHeight}),mce=t=>t?.getRootNode?.()||window?.document,fVe=["INPUT","SELECT","TEXTAREA"];function Ace(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:fVe.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const yce=t=>"clientX"in t,Sp=(t,e)=>{const n=yce(t),r=n?t.clientX:t.touches?.[0].clientX,i=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:i-(e?.top??0)}},dU=(t,e,n,r,i)=>{const s=e.querySelectorAll(`.${t}`);return!s||!s.length?null:Array.from(s).map(a=>{const o=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),type:t,nodeId:i,position:a.getAttribute("data-handlepos"),x:(o.left-n.left)/r,y:(o.top-n.top)/r,...kj(a)}})};function vce({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:a,targetControlY:o}){const l=t*.125+i*.375+a*.375+n*.125,c=e*.125+s*.375+o*.375+r*.125,u=Math.abs(l-t),h=Math.abs(c-e);return[l,c,u,h]}function a3(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function hU({pos:t,x1:e,y1:n,x2:r,y2:i,c:s}){switch(t){case Qn.Left:return[e-a3(e-r,s),n];case Qn.Right:return[e+a3(r-e,s),n];case Qn.Top:return[e,n-a3(n-i,s)];case Qn.Bottom:return[e,n+a3(i-n,s)]}}function xce({sourceX:t,sourceY:e,sourcePosition:n=Qn.Bottom,targetX:r,targetY:i,targetPosition:s=Qn.Top,curvature:a=.25}){const[o,l]=hU({pos:n,x1:t,y1:e,x2:r,y2:i,c:a}),[c,u]=hU({pos:s,x1:r,y1:i,x2:t,y2:e,c:a}),[h,f,p,m]=vce({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${t},${e} C${o},${l} ${c},${u} ${r},${i}`,h,f,p,m]}function bce({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,s=n<t?n+i:n-i,a=Math.abs(r-e)/2,o=r<e?r+a:r-a;return[s,o,i,a]}function pVe({sourceNode:t,targetNode:e,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1,zIndexMode:s="basic"}){if(s==="manual")return r;const a=i&&n?r+1e3:r,o=Math.max(t.parentId||i&&t.selected?t.internals.z:0,e.parentId||i&&e.selected?e.internals.z:0);return a+o}function gVe({sourceNode:t,targetNode:e,width:n,height:r,transform:i}){const s=P4(vM(t),vM(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const a={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return J_(a,k4(s))>0}const mVe=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`xy-edge__${t}${e||""}-${n}${r||""}`,AVe=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),yVe=(t,e,n={})=>{if(!t.source||!t.target)return e;const r=n.getEdgeId||mVe;let i;return cce(t)?i={...t}:i={...t,id:r(t)},AVe(i,e)?e:(i.sourceHandle===null&&delete i.sourceHandle,i.targetHandle===null&&delete i.targetHandle,e.concat(i))};function Cce({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,s,a,o]=bce({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,s,a,o]}const fU={[Qn.Left]:{x:-1,y:0},[Qn.Right]:{x:1,y:0},[Qn.Top]:{x:0,y:-1},[Qn.Bottom]:{x:0,y:1}},vVe=({source:t,sourcePosition:e=Qn.Bottom,target:n})=>e===Qn.Left||e===Qn.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},pU=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function xVe({source:t,sourcePosition:e=Qn.Bottom,target:n,targetPosition:r=Qn.Top,center:i,offset:s,stepPosition:a}){const o=fU[e],l=fU[r],c={x:t.x+o.x*s,y:t.y+o.y*s},u={x:n.x+l.x*s,y:n.y+l.y*s},h=vVe({source:c,sourcePosition:e,target:u}),f=h.x!==0?"x":"y",p=h[f];let m=[],v,A;const x={x:0,y:0},E={x:0,y:0},[,,w,B]=bce({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(o[f]*l[f]===-1){f==="x"?(v=i.x??c.x+(u.x-c.x)*a,A=i.y??(c.y+u.y)/2):(v=i.x??(c.x+u.x)/2,A=i.y??c.y+(u.y-c.y)*a);const T=[{x:v,y:c.y},{x:v,y:u.y}],M=[{x:c.x,y:A},{x:u.x,y:A}];o[f]===p?m=f==="x"?T:M:m=f==="x"?M:T}else{const T=[{x:c.x,y:u.y}],M=[{x:u.x,y:c.y}];if(f==="x"?m=o.x===p?M:T:m=o.y===p?T:M,e===r){const z=Math.abs(t[f]-n[f]);if(z<=s){const G=Math.min(s-1,s-z);o[f]===p?x[f]=(c[f]>t[f]?-1:1)*G:E[f]=(u[f]>n[f]?-1:1)*G}}if(e!==r){const z=f==="x"?"y":"x",G=o[f]===l[z],V=c[z]>u[z],q=c[z]<u[z];(o[f]===1&&(!G&&V||G&&q)||o[f]!==1&&(!G&&q||G&&V))&&(m=f==="x"?T:M)}const R={x:c.x+x.x,y:c.y+x.y},k={x:u.x+E.x,y:u.y+E.y},L=Math.max(Math.abs(R.x-m[0].x),Math.abs(k.x-m[0].x)),F=Math.max(Math.abs(R.y-m[0].y),Math.abs(k.y-m[0].y));L>=F?(v=(R.x+k.x)/2,A=m[0].y):(v=m[0].x,A=(R.y+k.y)/2)}return[[t,{x:c.x+x.x,y:c.y+x.y},...m,{x:u.x+E.x,y:u.y+E.y},n],v,A,w,B]}function bVe(t,e,n,r){const i=Math.min(pU(t,e)/2,pU(e,n)/2,r),{x:s,y:a}=e;if(t.x===s&&s===n.x||t.y===a&&a===n.y)return`L${s} ${a}`;if(t.y===a){const c=t.x<n.x?-1:1,u=t.y<n.y?1:-1;return`L ${s+i*c},${a}Q ${s},${a} ${s},${a+i*u}`}const o=t.x<n.x?1:-1,l=t.y<n.y?-1:1;return`L ${s},${a+i*l}Q ${s},${a} ${s+i*o},${a}`}function N6({sourceX:t,sourceY:e,sourcePosition:n=Qn.Bottom,targetX:r,targetY:i,targetPosition:s=Qn.Top,borderRadius:a=5,centerX:o,centerY:l,offset:c=20,stepPosition:u=.5}){const[h,f,p,m,v]=xVe({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:o,y:l},offset:c,stepPosition:u});return[h.reduce((x,E,w)=>{let B="";return w>0&&w<h.length-1?B=bVe(h[w-1],E,h[w+1],a):B=`${w===0?"M":"L"}${E.x} ${E.y}`,x+=B,x},""),f,p,m,v]}function gU(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function CVe(t){const{sourceNode:e,targetNode:n}=t;if(!gU(e)||!gU(n))return null;const r=e.internals.handleBounds||mU(e.handles),i=n.internals.handleBounds||mU(n.handles),s=AU(r?.source??[],t.sourceHandle),a=AU(t.connectionMode===vE.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),t.targetHandle);if(!s||!a)return t.onError?.("008",Kg.error008(s?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const o=s?.position||Qn.Bottom,l=a?.position||Qn.Top,c=Rb(e,s,o),u=Rb(n,a,l);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y,sourcePosition:o,targetPosition:l}}function mU(t){if(!t)return null;const e=[],n=[];for(const r of t)r.width=r.width??1,r.height=r.height??1,r.type==="source"?e.push(r):r.type==="target"&&n.push(r);return{source:e,target:n}}function Rb(t,e,n=Qn.Left,r=!1){const i=(e?.x??0)+t.internals.positionAbsolute.x,s=(e?.y??0)+t.internals.positionAbsolute.y,{width:a,height:o}=e??H0(t);if(r)return{x:i+a/2,y:s+o/2};switch(e?.position??n){case Qn.Top:return{x:i+a/2,y:s};case Qn.Right:return{x:i+a,y:s+o/2};case Qn.Bottom:return{x:i+a/2,y:s+o};case Qn.Left:return{x:i,y:s+o/2}}}function AU(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function L6(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`:""}function EVe(t,{id:e,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return t.reduce((a,o)=>([o.markerStart||r,o.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const c=L6(l,e);s.has(c)||(a.push({id:c,color:l.color||n,...l}),s.add(c))}}),a),[]).sort((a,o)=>a.id.localeCompare(o.id))}const Ece=1e3,SVe=10,Nj={nodeOrigin:[0,0],nodeExtent:Y_,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},wVe={...Nj,checkEquality:!0};function Lj(t,e){const n={...t};for(const r in e)e[r]!==void 0&&(n[r]=e[r]);return n}function _Ve(t,e,n){const r=Lj(Nj,n);for(const i of t.values())if(i.parentId)jj(i,t,e,r);else{const s=UI(i,r.nodeOrigin),a=EE(i.extent)?i.extent:r.nodeExtent,o=Db(s,a,H0(i));i.internals.positionAbsolute=o}}function IVe(t,e){if(!t.handles)return t.measured?e?.internals.handleBounds:void 0;const n=[],r=[];for(const i of t.handles){const s={id:i.id,width:i.width??1,height:i.height??1,nodeId:t.id,x:i.x,y:i.y,position:i.position,type:i.type};i.type==="source"?n.push(s):i.type==="target"&&r.push(s)}return{source:n,target:r}}function Fj(t){return t==="manual"}function F6(t,e,n,r={}){const i=Lj(wVe,r),s={i:0},a=new Map(e),o=i?.elevateNodesOnSelect&&!Fj(i.zIndexMode)?Ece:0;let l=t.length>0;e.clear(),n.clear();for(const c of t){let u=a.get(c.id);if(i.checkEquality&&c===u?.internals.userNode)e.set(c.id,u);else{const h=UI(c,i.nodeOrigin),f=EE(c.extent)?c.extent:i.nodeExtent,p=Db(h,f,H0(c));u={...i.defaults,...c,measured:{width:c.measured?.width,height:c.measured?.height},internals:{positionAbsolute:p,handleBounds:IVe(c,u),z:Sce(c,o,i.zIndexMode),userNode:c}},e.set(c.id,u)}(u.measured===void 0||u.measured.width===void 0||u.measured.height===void 0)&&!u.hidden&&(l=!1),c.parentId&&jj(u,e,n,r,s)}return l}function BVe(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function jj(t,e,n,r,i){const{elevateNodesOnSelect:s,nodeOrigin:a,nodeExtent:o,zIndexMode:l}=Lj(Nj,r),c=t.parentId,u=e.get(c);if(!u){console.warn(`Parent node ${c} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}BVe(t,n),i&&!u.parentId&&u.internals.rootParentIndex===void 0&&l==="auto"&&(u.internals.rootParentIndex=++i.i,u.internals.z=u.internals.z+i.i*SVe),i&&u.internals.rootParentIndex!==void 0&&(i.i=u.internals.rootParentIndex);const h=s&&!Fj(l)?Ece:0,{x:f,y:p,z:m}=TVe(t,u,a,o,h,l),{positionAbsolute:v}=t.internals,A=f!==v.x||p!==v.y;(A||m!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:A?{x:f,y:p}:v,z:m}})}function Sce(t,e,n){const r=Ep(t.zIndex)?t.zIndex:0;return Fj(n)?r:r+(t.selected?e:0)}function TVe(t,e,n,r,i,s){const{x:a,y:o}=e.internals.positionAbsolute,l=H0(t),c=UI(t,n),u=EE(t.extent)?Db(c,t.extent,l):c;let h=Db({x:a+u.x,y:o+u.y},r,l);t.extent==="parent"&&(h=dce(h,l,e));const f=Sce(t,i,s),p=e.internals.z??0;return{x:h.x,y:h.y,z:p>=f?p+1:f}}function Oj(t,e,n,r=[0,0]){const i=[],s=new Map;for(const a of t){const o=e.get(a.parentId);if(!o)continue;const l=s.get(a.parentId)?.expandedRect??CE(o),c=fce(l,a.rect);s.set(a.parentId,{expandedRect:c,parent:o})}return s.size>0&&s.forEach(({expandedRect:a,parent:o},l)=>{const c=o.internals.positionAbsolute,u=H0(o),h=o.origin??r,f=a.x<c.x?Math.round(Math.abs(c.x-a.x)):0,p=a.y<c.y?Math.round(Math.abs(c.y-a.y)):0,m=Math.max(u.width,Math.round(a.width)),v=Math.max(u.height,Math.round(a.height)),A=(m-u.width)*h[0],x=(v-u.height)*h[1];(f>0||p>0||A||x)&&(i.push({id:l,type:"position",position:{x:o.position.x-f+A,y:o.position.y-p+x}}),n.get(l)?.forEach(E=>{t.some(w=>w.id===E.id)||i.push({id:E.id,type:"position",position:{x:E.position.x+f,y:E.position.y+p}})})),(u.width<a.width||u.height<a.height||f||p)&&i.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:m+(f?h[0]*f-A:0),height:v+(p?h[1]*p-x:0)}})}),i}function MVe(t,e,n,r,i,s,a){const o=r?.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const c=[],u=window.getComputedStyle(o),{m22:h}=new window.DOMMatrixReadOnly(u.transform),f=[];for(const p of t.values()){const m=e.get(p.id);if(!m)continue;if(m.hidden){e.set(m.id,{...m,internals:{...m.internals,handleBounds:void 0}}),l=!0;continue}const v=kj(p.nodeElement),A=m.measured.width!==v.width||m.measured.height!==v.height;if(!!(v.width&&v.height&&(A||!m.internals.handleBounds||p.force))){const E=p.nodeElement.getBoundingClientRect(),w=EE(m.extent)?m.extent:s;let{positionAbsolute:B}=m.internals;m.parentId&&m.extent==="parent"?B=dce(B,v,e.get(m.parentId)):w&&(B=Db(B,w,v));const D={...m,measured:v,internals:{...m.internals,positionAbsolute:B,handleBounds:{source:dU("source",p.nodeElement,E,h,m.id),target:dU("target",p.nodeElement,E,h,m.id)}}};e.set(m.id,D),m.parentId&&jj(D,e,n,{nodeOrigin:i,zIndexMode:a}),l=!0,A&&(c.push({id:m.id,type:"dimensions",dimensions:v}),m.expandParent&&m.parentId&&f.push({id:m.id,parentId:m.parentId,rect:CE(D,i)}))}}if(f.length>0){const p=Oj(f,e,n,i);c.push(...p)}return{changes:c,updatedInternals:l}}async function DVe({delta:t,panZoom:e,transform:n,translateExtent:r,width:i,height:s}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const a=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[i,s]],r),o=!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]);return Promise.resolve(o)}function yU(t,e,n,r,i,s){let a=i;const o=r.get(a)||new Map;r.set(a,o.set(n,e)),a=`${i}-${t}`;const l=r.get(a)||new Map;if(r.set(a,l.set(n,e)),s){a=`${i}-${t}-${s}`;const c=r.get(a)||new Map;r.set(a,c.set(n,e))}}function wce(t,e,n){t.clear(),e.clear();for(const r of n){const{source:i,target:s,sourceHandle:a=null,targetHandle:o=null}=r,l={edgeId:r.id,source:i,target:s,sourceHandle:a,targetHandle:o},c=`${i}-${a}--${s}-${o}`,u=`${s}-${o}--${i}-${a}`;yU("source",l,u,t,i,a),yU("target",l,c,t,s,o),e.set(r.id,r)}}function _ce(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:_ce(n,e):!1}function vU(t,e,n){let r=t;do{if(r?.matches?.(e))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function RVe(t,e,n,r){const i=new Map;for(const[s,a]of t)if((a.selected||a.id===r)&&(!a.parentId||!_ce(a,t))&&(a.draggable||e&&typeof a.draggable>"u")){const o=t.get(s);o&&i.set(s,{id:s,position:o.position||{x:0,y:0},distance:{x:n.x-o.internals.positionAbsolute.x,y:n.y-o.internals.positionAbsolute.y},extent:o.extent,parentId:o.parentId,origin:o.origin,expandParent:o.expandParent,internals:{positionAbsolute:o.internals.positionAbsolute||{x:0,y:0}},measured:{width:o.measured.width??0,height:o.measured.height??0}})}return i}function RP({nodeId:t,dragItems:e,nodeLookup:n,dragging:r=!0}){const i=[];for(const[a,o]of e){const l=n.get(a)?.internals.userNode;l&&i.push({...l,position:o.position,dragging:r})}if(!t)return[i[0],i];const s=n.get(t)?.internals.userNode;return[s?{...s,position:e.get(t)?.position||s.position,dragging:r}:i[0],i]}function PVe({dragItems:t,snapGrid:e,x:n,y:r}){const i=t.values().next().value;if(!i)return null;const s={x:n-i.distance.x,y:r-i.distance.y},a=GI(s,e);return{x:a.x-s.x,y:a.y-s.y}}function kVe({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},a=0,o=new Map,l=!1,c={x:0,y:0},u=null,h=!1,f=null,p=!1,m=!1,v=null;function A({noDragClassName:E,handleSelector:w,domNode:B,isSelectable:D,nodeId:T,nodeClickDistance:M=0}){f=Wd(B);function R({x:z,y:G}){const{nodeLookup:V,nodeExtent:q,snapGrid:O,snapToGrid:H,nodeOrigin:K,onNodeDrag:X,onSelectionDrag:re,onError:J,updateNodePositions:Z}=e();s={x:z,y:G};let ee=!1;const te=o.size>1,oe=te&&q?k6(HI(o)):null,ae=te&&H?PVe({dragItems:o,snapGrid:O,x:z,y:G}):null;for(const[se,fe]of o){if(!V.has(se))continue;let Ee={x:z-fe.distance.x,y:G-fe.distance.y};H&&(Ee=ae?{x:Math.round(Ee.x+ae.x),y:Math.round(Ee.y+ae.y)}:GI(Ee,O));let Be=null;if(te&&q&&!fe.extent&&oe){const{positionAbsolute:Se}=fe.internals,Me=Se.x-oe.x+q[0][0],ce=Se.x+fe.measured.width-oe.x2+q[1][0],$e=Se.y-oe.y+q[0][1],qe=Se.y+fe.measured.height-oe.y2+q[1][1];Be=[[Me,$e],[ce,qe]]}const{position:_e,positionAbsolute:Ce}=uce({nodeId:se,nextPosition:Ee,nodeLookup:V,nodeExtent:Be||q,nodeOrigin:K,onError:J});ee=ee||fe.position.x!==_e.x||fe.position.y!==_e.y,fe.position=_e,fe.internals.positionAbsolute=Ce}if(m=m||ee,!!ee&&(Z(o,!0),v&&(r||X||!T&&re))){const[se,fe]=RP({nodeId:T,dragItems:o,nodeLookup:V});r?.(v,o,se,fe),X?.(v,se,fe),T||re?.(v,fe)}}async function k(){if(!u)return;const{transform:z,panBy:G,autoPanSpeed:V,autoPanOnNodeDrag:q}=e();if(!q){l=!1,cancelAnimationFrame(a);return}const[O,H]=hce(c,u,V);(O!==0||H!==0)&&(s.x=(s.x??0)-O/z[2],s.y=(s.y??0)-H/z[2],await G({x:O,y:H})&&R(s)),a=requestAnimationFrame(k)}function L(z){const{nodeLookup:G,multiSelectionActive:V,nodesDraggable:q,transform:O,snapGrid:H,snapToGrid:K,selectNodesOnDrag:X,onNodeDragStart:re,onSelectionDragStart:J,unselectNodesAndEdges:Z}=e();h=!0,(!X||!D)&&!V&&T&&(G.get(T)?.selected||Z()),D&&X&&T&&t?.(T);const ee=r_(z.sourceEvent,{transform:O,snapGrid:H,snapToGrid:K,containerBounds:u});if(s=ee,o=RVe(G,q,ee,T),o.size>0&&(n||re||!T&&J)){const[te,oe]=RP({nodeId:T,dragItems:o,nodeLookup:G});n?.(z.sourceEvent,o,te,oe),re?.(z.sourceEvent,te,oe),T||J?.(z.sourceEvent,oe)}}const F=Ule().clickDistance(M).on("start",z=>{const{domNode:G,nodeDragThreshold:V,transform:q,snapGrid:O,snapToGrid:H}=e();u=G?.getBoundingClientRect()||null,p=!1,m=!1,v=z.sourceEvent,V===0&&L(z),s=r_(z.sourceEvent,{transform:q,snapGrid:O,snapToGrid:H,containerBounds:u}),c=Sp(z.sourceEvent,u)}).on("drag",z=>{const{autoPanOnNodeDrag:G,transform:V,snapGrid:q,snapToGrid:O,nodeDragThreshold:H,nodeLookup:K}=e(),X=r_(z.sourceEvent,{transform:V,snapGrid:q,snapToGrid:O,containerBounds:u});if(v=z.sourceEvent,(z.sourceEvent.type==="touchmove"&&z.sourceEvent.touches.length>1||T&&!K.has(T))&&(p=!0),!p){if(!l&&G&&h&&(l=!0,k()),!h){const re=Sp(z.sourceEvent,u),J=re.x-c.x,Z=re.y-c.y;Math.sqrt(J*J+Z*Z)>H&&L(z)}(s.x!==X.xSnapped||s.y!==X.ySnapped)&&o&&h&&(c=Sp(z.sourceEvent,u),R(X))}}).on("end",z=>{if(!(!h||p)&&(l=!1,h=!1,cancelAnimationFrame(a),o.size>0)){const{nodeLookup:G,updateNodePositions:V,onNodeDragStop:q,onSelectionDragStop:O}=e();if(m&&(V(o,!1),m=!1),i||q||!T&&O){const[H,K]=RP({nodeId:T,dragItems:o,nodeLookup:G,dragging:!1});i?.(z.sourceEvent,o,H,K),q?.(z.sourceEvent,H,K),T||O?.(z.sourceEvent,K)}}}).filter(z=>{const G=z.target;return!z.button&&(!E||!vU(G,`.${E}`,B))&&(!w||vU(G,w,B))});f.call(F)}function x(){f?.on(".drag",null)}return{update:A,destroy:x}}function NVe(t,e,n){const r=[],i={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const s of e.values())J_(i,CE(s))>0&&r.push(s);return r}const LVe=250;function FVe(t,e,n,r){let i=[],s=1/0;const a=NVe(t,n,e+LVe);for(const o of a){const l=[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]];for(const c of l){if(r.nodeId===c.nodeId&&r.type===c.type&&r.id===c.id)continue;const{x:u,y:h}=Rb(o,c,c.position,!0),f=Math.sqrt(Math.pow(u-t.x,2)+Math.pow(h-t.y,2));f>e||(f<s?(i=[{...c,x:u,y:h}],s=f):f===s&&i.push({...c,x:u,y:h}))}}if(!i.length)return null;if(i.length>1){const o=r.type==="source"?"target":"source";return i.find(l=>l.type===o)??i[0]}return i[0]}function Ice(t,e,n,r,i,s=!1){const a=r.get(t);if(!a)return null;const o=i==="strict"?a.internals.handleBounds?.[e]:[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]],l=(n?o?.find(c=>c.id===n):o?.[0])??null;return l&&s?{...l,...Rb(a,l,l.position,!0)}:l}function Bce(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function jVe(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const Tce=()=>!0;function OVe(t,{connectionMode:e,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:a,domNode:o,nodeLookup:l,lib:c,autoPanOnConnect:u,flowId:h,panBy:f,cancelConnection:p,onConnectStart:m,onConnect:v,onConnectEnd:A,isValidConnection:x=Tce,onReconnectEnd:E,updateConnection:w,getTransform:B,getFromHandle:D,autoPanSpeed:T,dragThreshold:M=1,handleDomNode:R}){const k=mce(t.target);let L=0,F;const{x:z,y:G}=Sp(t),V=Bce(s,R),q=o?.getBoundingClientRect();let O=!1;if(!q||!V)return;const H=Ice(i,V,r,l,e);if(!H)return;let K=Sp(t,q),X=!1,re=null,J=!1,Z=null;function ee(){if(!u||!q)return;const[_e,Ce]=hce(K,q,T);f({x:_e,y:Ce}),L=requestAnimationFrame(ee)}const te={...H,nodeId:i,type:V,position:H.position},oe=l.get(i);let se={inProgress:!0,isValid:null,from:Rb(oe,te,Qn.Left,!0),fromHandle:te,fromPosition:te.position,fromNode:oe,to:K,toHandle:null,toPosition:oU[te.position],toNode:null,pointer:K};function fe(){O=!0,w(se),m?.(t,{nodeId:i,handleId:r,handleType:V})}M===0&&fe();function Ee(_e){if(!O){const{x:qe,y:ft}=Sp(_e),Ie=qe-z,ht=ft-G;if(!(Ie*Ie+ht*ht>M*M))return;fe()}if(!D()||!te){Be(_e);return}const Ce=B();K=Sp(_e,q),F=FVe(VI(K,Ce,!1,[1,1]),n,l,te),X||(ee(),X=!0);const Se=Mce(_e,{handle:F,connectionMode:e,fromNodeId:i,fromHandleId:r,fromType:a?"target":"source",isValidConnection:x,doc:k,lib:c,flowId:h,nodeLookup:l});Z=Se.handleDomNode,re=Se.connection,J=jVe(!!F,Se.isValid);const Me=l.get(i),ce=Me?Rb(Me,te,Qn.Left,!0):se.from,$e={...se,from:ce,isValid:J,to:Se.toHandle&&J?xM({x:Se.toHandle.x,y:Se.toHandle.y},Ce):K,toHandle:Se.toHandle,toPosition:J&&Se.toHandle?Se.toHandle.position:oU[te.position],toNode:Se.toHandle?l.get(Se.toHandle.nodeId):null,pointer:K};w($e),se=$e}function Be(_e){if(!("touches"in _e&&_e.touches.length>0)){if(O){(F||Z)&&re&&J&&v?.(re);const{inProgress:Ce,...Se}=se,Me={...Se,toPosition:se.toHandle?se.toPosition:null};A?.(_e,Me),s&&E?.(_e,Me)}p(),cancelAnimationFrame(L),X=!1,J=!1,re=null,Z=null,k.removeEventListener("mousemove",Ee),k.removeEventListener("mouseup",Be),k.removeEventListener("touchmove",Ee),k.removeEventListener("touchend",Be)}}k.addEventListener("mousemove",Ee),k.addEventListener("mouseup",Be),k.addEventListener("touchmove",Ee),k.addEventListener("touchend",Be)}function Mce(t,{handle:e,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:a,lib:o,flowId:l,isValidConnection:c=Tce,nodeLookup:u}){const h=s==="target",f=e?a.querySelector(`.${o}-flow__handle[data-id="${l}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x:p,y:m}=Sp(t),v=a.elementFromPoint(p,m),A=v?.classList.contains(`${o}-flow__handle`)?v:f,x={handleDomNode:A,isValid:!1,connection:null,toHandle:null};if(A){const E=Bce(void 0,A),w=A.getAttribute("data-nodeid"),B=A.getAttribute("data-handleid"),D=A.classList.contains("connectable"),T=A.classList.contains("connectableend");if(!w||!E)return x;const M={source:h?w:r,sourceHandle:h?B:i,target:h?r:w,targetHandle:h?i:B};x.connection=M;const k=D&&T&&(n===vE.Strict?h&&E==="source"||!h&&E==="target":w!==r||B!==i);x.isValid=k&&c(M),x.toHandle=Ice(w,E,B,u,n,!0)}return x}const j6={onPointerDown:OVe,isValid:Mce};function zVe({domNode:t,panZoom:e,getTransform:n,getViewScale:r}){const i=Wd(t);function s({translateExtent:o,width:l,height:c,zoomStep:u=1,pannable:h=!0,zoomable:f=!0,inversePan:p=!1}){const m=w=>{if(w.sourceEvent.type!=="wheel"||!e)return;const B=n(),D=w.sourceEvent.ctrlKey&&Z_()?10:1,T=-w.sourceEvent.deltaY*(w.sourceEvent.deltaMode===1?.05:w.sourceEvent.deltaMode?1:.002)*u,M=B[2]*Math.pow(2,T*D);e.scaleTo(M)};let v=[0,0];const A=w=>{(w.sourceEvent.type==="mousedown"||w.sourceEvent.type==="touchstart")&&(v=[w.sourceEvent.clientX??w.sourceEvent.touches[0].clientX,w.sourceEvent.clientY??w.sourceEvent.touches[0].clientY])},x=w=>{const B=n();if(w.sourceEvent.type!=="mousemove"&&w.sourceEvent.type!=="touchmove"||!e)return;const D=[w.sourceEvent.clientX??w.sourceEvent.touches[0].clientX,w.sourceEvent.clientY??w.sourceEvent.touches[0].clientY],T=[D[0]-v[0],D[1]-v[1]];v=D;const M=r()*Math.max(B[2],Math.log(B[2]))*(p?-1:1),R={x:B[0]-T[0]*M,y:B[1]-T[1]*M},k=[[0,0],[l,c]];e.setViewportConstrained({x:R.x,y:R.y,zoom:B[2]},k,o)},E=ice().on("start",A).on("zoom",h?x:null).on("zoom.wheel",f?m:null);i.call(E,{})}function a(){i.on("zoom",null)}return{update:s,destroy:a,pointer:gp}}const N4=t=>({x:t.x,y:t.y,zoom:t.k}),PP=({x:t,y:e,zoom:n})=>R4.translate(t,e).scale(n),R1=(t,e)=>t.target.closest(`.${e}`),Dce=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),$Ve=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,kP=(t,e=0,n=$Ve,r=()=>{})=>{const i=typeof e=="number"&&e>0;return i||r(),i?t.transition().duration(e).ease(n).on("end",r):t},Rce=t=>{const e=t.ctrlKey&&Z_()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function QVe({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:a,onPanZoomStart:o,onPanZoom:l,onPanZoomEnd:c}){return u=>{if(R1(u,e))return u.ctrlKey&&u.preventDefault(),!1;u.preventDefault(),u.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(u.ctrlKey&&a){const A=gp(u),x=Rce(u),E=h*Math.pow(2,x);r.scaleTo(n,E,A,u);return}const f=u.deltaMode===1?20:1;let p=i===ub.Vertical?0:u.deltaX*f,m=i===ub.Horizontal?0:u.deltaY*f;!Z_()&&u.shiftKey&&i!==ub.Vertical&&(p=u.deltaY*f,m=0),r.translateBy(n,-(p/h)*s,-(m/h)*s,{internal:!0});const v=N4(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(l?.(u,v),t.panScrollTimeout=setTimeout(()=>{c?.(u,v),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,o?.(u,v))}}function UVe({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",a=!e&&s&&!r.ctrlKey,o=R1(r,t);if(r.ctrlKey&&s&&o&&r.preventDefault(),a||o)return null;r.preventDefault(),n.call(this,r,i)}}function HVe({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=N4(r.transform);t.mouseButton=r.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=i,r.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(r.sourceEvent,i)}}function GVe({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{t.usedRightMouseButton=!!(n&&Dce(e,t.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,N4(s.transform))}}function VVe({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return a=>{if(!a.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,s&&Dce(e,t.mouseButton??0)&&!t.usedRightMouseButton&&a.sourceEvent&&s(a.sourceEvent),t.usedRightMouseButton=!1,r(!1),i)){const o=N4(a.transform);t.prevViewport=o,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{i?.(a.sourceEvent,o)},n?150:0)}}}function WVe({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:a,noWheelClassName:o,noPanClassName:l,lib:c,connectionInProgress:u}){return h=>{const f=t||e,p=n&&h.ctrlKey,m=h.type==="wheel";if(h.button===1&&h.type==="mousedown"&&(R1(h,`${c}-flow__node`)||R1(h,`${c}-flow__edge`)))return!0;if(!r&&!f&&!i&&!s&&!n||a||u&&!m||R1(h,o)&&m||R1(h,l)&&(!m||i&&m&&!t)||!n&&h.ctrlKey&&m)return!1;if(!n&&h.type==="touchstart"&&h.touches?.length>1)return h.preventDefault(),!1;if(!f&&!i&&!p&&m||!r&&(h.type==="mousedown"||h.type==="touchstart")||Array.isArray(r)&&!r.includes(h.button)&&h.type==="mousedown")return!1;const v=Array.isArray(r)&&r.includes(h.button)||!h.button||h.button<=1;return(!h.ctrlKey||m)&&v}}function KVe({domNode:t,minZoom:e,maxZoom:n,translateExtent:r,viewport:i,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:o,onDraggingChange:l}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},u=t.getBoundingClientRect(),h=ice().scaleExtent([e,n]).translateExtent(r),f=Wd(t).call(h);E({x:i.x,y:i.y,zoom:bE(i.zoom,e,n)},[[0,0],[u.width,u.height]],r);const p=f.on("wheel.zoom"),m=f.on("dblclick.zoom");h.wheelDelta(Rce);function v(F,z){return f?new Promise(G=>{h?.interpolate(z?.interpolate==="linear"?n_:uT).transform(kP(f,z?.duration,z?.ease,()=>G(!0)),F)}):Promise.resolve(!1)}function A({noWheelClassName:F,noPanClassName:z,onPaneContextMenu:G,userSelectionActive:V,panOnScroll:q,panOnDrag:O,panOnScrollMode:H,panOnScrollSpeed:K,preventScrolling:X,zoomOnPinch:re,zoomOnScroll:J,zoomOnDoubleClick:Z,zoomActivationKeyPressed:ee,lib:te,onTransformChange:oe,connectionInProgress:ae,paneClickDistance:se,selectionOnDrag:fe}){V&&!c.isZoomingOrPanning&&x();const Ee=q&&!ee&&!V;h.clickDistance(fe?1/0:!Ep(se)||se<0?0:se);const Be=Ee?QVe({zoomPanValues:c,noWheelClassName:F,d3Selection:f,d3Zoom:h,panOnScrollMode:H,panOnScrollSpeed:K,zoomOnPinch:re,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:o}):UVe({noWheelClassName:F,preventScrolling:X,d3ZoomHandler:p});if(f.on("wheel.zoom",Be,{passive:!1}),!V){const Ce=HVe({zoomPanValues:c,onDraggingChange:l,onPanZoomStart:a});h.on("start",Ce);const Se=GVe({zoomPanValues:c,panOnDrag:O,onPaneContextMenu:!!G,onPanZoom:s,onTransformChange:oe});h.on("zoom",Se);const Me=VVe({zoomPanValues:c,panOnDrag:O,panOnScroll:q,onPaneContextMenu:G,onPanZoomEnd:o,onDraggingChange:l});h.on("end",Me)}const _e=WVe({zoomActivationKeyPressed:ee,panOnDrag:O,zoomOnScroll:J,panOnScroll:q,zoomOnDoubleClick:Z,zoomOnPinch:re,userSelectionActive:V,noPanClassName:z,noWheelClassName:F,lib:te,connectionInProgress:ae});h.filter(_e),Z?f.on("dblclick.zoom",m):f.on("dblclick.zoom",null)}function x(){h.on("zoom",null)}async function E(F,z,G){const V=PP(F),q=h?.constrain()(V,z,G);return q&&await v(q),new Promise(O=>O(q))}async function w(F,z){const G=PP(F);return await v(G,z),new Promise(V=>V(G))}function B(F){if(f){const z=PP(F),G=f.property("__zoom");(G.k!==F.zoom||G.x!==F.x||G.y!==F.y)&&h?.transform(f,z,null,{sync:!0})}}function D(){const F=f?rce(f.node()):{x:0,y:0,k:1};return{x:F.x,y:F.y,zoom:F.k}}function T(F,z){return f?new Promise(G=>{h?.interpolate(z?.interpolate==="linear"?n_:uT).scaleTo(kP(f,z?.duration,z?.ease,()=>G(!0)),F)}):Promise.resolve(!1)}function M(F,z){return f?new Promise(G=>{h?.interpolate(z?.interpolate==="linear"?n_:uT).scaleBy(kP(f,z?.duration,z?.ease,()=>G(!0)),F)}):Promise.resolve(!1)}function R(F){h?.scaleExtent(F)}function k(F){h?.translateExtent(F)}function L(F){const z=!Ep(F)||F<0?0:F;h?.clickDistance(z)}return{update:A,destroy:x,setViewport:w,setViewportConstrained:E,getViewport:D,scaleTo:T,scaleBy:M,setScaleExtent:R,setTranslateExtent:k,syncViewport:B,setClickDistance:L}}var SE;(function(t){t.Line="line",t.Handle="handle"})(SE||(SE={}));function qVe({width:t,prevWidth:e,height:n,prevHeight:r,affectsX:i,affectsY:s}){const a=t-e,o=n-r,l=[a>0?1:a<0?-1:0,o>0?1:o<0?-1:0];return a&&i&&(l[0]=l[0]*-1),o&&s&&(l[1]=l[1]*-1),l}function xU(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),r=t.includes("left"),i=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:r,affectsY:i}}function ay(t,e){return Math.max(0,e-t)}function oy(t,e){return Math.max(0,t-e)}function o3(t,e,n){return Math.max(0,e-t,t-n)}function bU(t,e){return t?!e:e}function YVe(t,e,n,r,i,s,a,o){let{affectsX:l,affectsY:c}=e;const{isHorizontal:u,isVertical:h}=e,f=u&&h,{xSnapped:p,ySnapped:m}=n,{minWidth:v,maxWidth:A,minHeight:x,maxHeight:E}=r,{x:w,y:B,width:D,height:T,aspectRatio:M}=t;let R=Math.floor(u?p-t.pointerX:0),k=Math.floor(h?m-t.pointerY:0);const L=D+(l?-R:R),F=T+(c?-k:k),z=-s[0]*D,G=-s[1]*T;let V=o3(L,v,A),q=o3(F,x,E);if(a){let K=0,X=0;l&&R<0?K=ay(w+R+z,a[0][0]):!l&&R>0&&(K=oy(w+L+z,a[1][0])),c&&k<0?X=ay(B+k+G,a[0][1]):!c&&k>0&&(X=oy(B+F+G,a[1][1])),V=Math.max(V,K),q=Math.max(q,X)}if(o){let K=0,X=0;l&&R>0?K=oy(w+R,o[0][0]):!l&&R<0&&(K=ay(w+L,o[1][0])),c&&k>0?X=oy(B+k,o[0][1]):!c&&k<0&&(X=ay(B+F,o[1][1])),V=Math.max(V,K),q=Math.max(q,X)}if(i){if(u){const K=o3(L/M,x,E)*M;if(V=Math.max(V,K),a){let X=0;!l&&!c||l&&!c&&f?X=oy(B+G+L/M,a[1][1])*M:X=ay(B+G+(l?R:-R)/M,a[0][1])*M,V=Math.max(V,X)}if(o){let X=0;!l&&!c||l&&!c&&f?X=ay(B+L/M,o[1][1])*M:X=oy(B+(l?R:-R)/M,o[0][1])*M,V=Math.max(V,X)}}if(h){const K=o3(F*M,v,A)/M;if(q=Math.max(q,K),a){let X=0;!l&&!c||c&&!l&&f?X=oy(w+F*M+z,a[1][0])/M:X=ay(w+(c?k:-k)*M+z,a[0][0])/M,q=Math.max(q,X)}if(o){let X=0;!l&&!c||c&&!l&&f?X=ay(w+F*M,o[1][0])/M:X=oy(w+(c?k:-k)*M,o[0][0])/M,q=Math.max(q,X)}}}k=k+(k<0?q:-q),R=R+(R<0?V:-V),i&&(f?L>F*M?k=(bU(l,c)?-R:R)/M:R=(bU(l,c)?-k:k)*M:u?(k=R/M,c=l):(R=k*M,l=c));const O=l?w+R:w,H=c?B+k:B;return{width:D+(l?-R:R),height:T+(c?-k:k),x:s[0]*R*(l?-1:1)+O,y:s[1]*k*(c?-1:1)+H}}const Pce={width:0,height:0,x:0,y:0},XVe={...Pce,pointerX:0,pointerY:0,aspectRatio:1};function JVe(t){return[[0,0],[t.measured.width,t.measured.height]]}function ZVe(t,e,n){const r=e.position.x+t.position.x,i=e.position.y+t.position.y,s=t.measured.width??0,a=t.measured.height??0,o=n[0]*s,l=n[1]*a;return[[r-o,i-l],[r+s-o,i+a-l]]}function eWe({domNode:t,nodeId:e,getStoreItems:n,onChange:r,onEnd:i}){const s=Wd(t);let a={controlDirection:xU("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function o({controlPosition:c,boundaries:u,keepAspectRatio:h,resizeDirection:f,onResizeStart:p,onResize:m,onResizeEnd:v,shouldResize:A}){let x={...Pce},E={...XVe};a={boundaries:u,resizeDirection:f,keepAspectRatio:h,controlDirection:xU(c)};let w,B=null,D=[],T,M,R,k=!1;const L=Ule().on("start",F=>{const{nodeLookup:z,transform:G,snapGrid:V,snapToGrid:q,nodeOrigin:O,paneDomNode:H}=n();if(w=z.get(e),!w)return;B=H?.getBoundingClientRect()??null;const{xSnapped:K,ySnapped:X}=r_(F.sourceEvent,{transform:G,snapGrid:V,snapToGrid:q,containerBounds:B});x={width:w.measured.width??0,height:w.measured.height??0,x:w.position.x??0,y:w.position.y??0},E={...x,pointerX:K,pointerY:X,aspectRatio:x.width/x.height},T=void 0,w.parentId&&(w.extent==="parent"||w.expandParent)&&(T=z.get(w.parentId),M=T&&w.extent==="parent"?JVe(T):void 0),D=[],R=void 0;for(const[re,J]of z)if(J.parentId===e&&(D.push({id:re,position:{...J.position},extent:J.extent}),J.extent==="parent"||J.expandParent)){const Z=ZVe(J,w,J.origin??O);R?R=[[Math.min(Z[0][0],R[0][0]),Math.min(Z[0][1],R[0][1])],[Math.max(Z[1][0],R[1][0]),Math.max(Z[1][1],R[1][1])]]:R=Z}p?.(F,{...x})}).on("drag",F=>{const{transform:z,snapGrid:G,snapToGrid:V,nodeOrigin:q}=n(),O=r_(F.sourceEvent,{transform:z,snapGrid:G,snapToGrid:V,containerBounds:B}),H=[];if(!w)return;const{x:K,y:X,width:re,height:J}=x,Z={},ee=w.origin??q,{width:te,height:oe,x:ae,y:se}=YVe(E,a.controlDirection,O,a.boundaries,a.keepAspectRatio,ee,M,R),fe=te!==re,Ee=oe!==J,Be=ae!==K&&fe,_e=se!==X&&Ee;if(!Be&&!_e&&!fe&&!Ee)return;if((Be||_e||ee[0]===1||ee[1]===1)&&(Z.x=Be?ae:x.x,Z.y=_e?se:x.y,x.x=Z.x,x.y=Z.y,D.length>0)){const ce=ae-K,$e=se-X;for(const qe of D)qe.position={x:qe.position.x-ce+ee[0]*(te-re),y:qe.position.y-$e+ee[1]*(oe-J)},H.push(qe)}if((fe||Ee)&&(Z.width=fe&&(!a.resizeDirection||a.resizeDirection==="horizontal")?te:x.width,Z.height=Ee&&(!a.resizeDirection||a.resizeDirection==="vertical")?oe:x.height,x.width=Z.width,x.height=Z.height),T&&w.expandParent){const ce=ee[0]*(Z.width??0);Z.x&&Z.x<ce&&(x.x=ce,E.x=E.x-(Z.x-ce));const $e=ee[1]*(Z.height??0);Z.y&&Z.y<$e&&(x.y=$e,E.y=E.y-(Z.y-$e))}const Ce=qVe({width:x.width,prevWidth:re,height:x.height,prevHeight:J,affectsX:a.controlDirection.affectsX,affectsY:a.controlDirection.affectsY}),Se={...x,direction:Ce};A?.(F,Se)!==!1&&(k=!0,m?.(F,Se),r(Z,H))}).on("end",F=>{k&&(v?.(F,{...x}),i?.({...x}),k=!1)});s.call(L)}function l(){s.on(".drag",null)}return{update:o,destroy:l}}var NP={exports:{}},LP={};var CU;function tWe(){if(CU)return LP;CU=1;var t=DE(),e=bte();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,a=t.useEffect,o=t.useMemo,l=t.useDebugValue;return LP.useSyncExternalStoreWithSelector=function(c,u,h,f,p){var m=s(null);if(m.current===null){var v={hasValue:!1,value:null};m.current=v}else v=m.current;m=o(function(){function x(T){if(!E){if(E=!0,w=T,T=f(T),p!==void 0&&v.hasValue){var M=v.value;if(p(M,T))return B=M}return B=T}if(M=B,r(w,T))return M;var R=f(T);return p!==void 0&&p(M,R)?(w=T,M):(w=T,B=R)}var E=!1,w,B,D=h===void 0?null:h;return[function(){return x(u())},D===null?void 0:function(){return x(D())}]},[u,h,f,p]);var A=i(c,m[0],m[1]);return a(function(){v.hasValue=!0,v.value=A},[A]),l(A),A},LP}var EU;function nWe(){return EU||(EU=1,NP.exports=tWe()),NP.exports}var rWe=nWe();const iWe=qg(rWe),sWe={},SU=t=>{let e;const n=new Set,r=(u,h)=>{const f=typeof u=="function"?u(e):u;if(!Object.is(f,e)){const p=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(m=>m(e,p))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(sWe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},aWe=t=>t?SU(t):SU,{useDebugValue:oWe}=we,{useSyncExternalStoreWithSelector:lWe}=iWe,cWe=t=>t;function kce(t,e=cWe,n){const r=lWe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return oWe(r),r}const wU=(t,e)=>{const n=aWe(t),r=(i,s=e)=>kce(n,i,s);return Object.assign(r,n),r},uWe=(t,e)=>t?wU(t,e):wU;function fa(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}const L4=C.createContext(null),dWe=L4.Provider,Nce=Kg.error001();function Pi(t,e){const n=C.useContext(L4);if(n===null)throw new Error(Nce);return kce(n,t,e)}function ga(){const t=C.useContext(L4);if(t===null)throw new Error(Nce);return C.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const _U={display:"none"},hWe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Lce="react-flow__node-desc",Fce="react-flow__edge-desc",fWe="react-flow__aria-live",pWe=t=>t.ariaLiveMessage,gWe=t=>t.ariaLabelConfig;function mWe({rfId:t}){const e=Pi(pWe);return d.jsx("div",{id:`${fWe}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:hWe,children:e})}function AWe({rfId:t,disableKeyboardA11y:e}){const n=Pi(gWe);return d.jsxs(d.Fragment,{children:[d.jsx("div",{id:`${Lce}-${t}`,style:_U,children:e?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),d.jsx("div",{id:`${Fce}-${t}`,style:_U,children:n["edge.a11yDescription.default"]}),!e&&d.jsx(mWe,{rfId:t})]})}const F4=C.forwardRef(({position:t="top-left",children:e,className:n,style:r,...i},s)=>{const a=`${t}`.split("-");return d.jsx("div",{className:Fo(["react-flow__panel",n,...a]),style:r,ref:s,...i,children:e})});F4.displayName="Panel";function yWe({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:d.jsx(F4,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:d.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const vWe=t=>{const e=[],n=[];for(const[,r]of t.nodeLookup)r.selected&&e.push(r.internals.userNode);for(const[,r]of t.edgeLookup)r.selected&&n.push(r);return{selectedNodes:e,selectedEdges:n}},l3=t=>t.id;function xWe(t,e){return fa(t.selectedNodes.map(l3),e.selectedNodes.map(l3))&&fa(t.selectedEdges.map(l3),e.selectedEdges.map(l3))}function bWe({onSelectionChange:t}){const e=ga(),{selectedNodes:n,selectedEdges:r}=Pi(vWe,xWe);return C.useEffect(()=>{const i={nodes:n,edges:r};t?.(i),e.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,t]),null}const CWe=t=>!!t.onSelectionChangeHandlers;function EWe({onSelectionChange:t}){const e=Pi(CWe);return t||e?d.jsx(bWe,{onSelectionChange:t}):null}const jce=[0,0],SWe={x:0,y:0,zoom:1},wWe=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],IU=[...wWe,"rfId"],_We=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),BU={translateExtent:Y_,nodeOrigin:jce,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function IWe(t){const{setNodes:e,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:a,reset:o,setDefaultNodesAndEdges:l}=Pi(_We,fa),c=ga();C.useEffect(()=>(l(t.defaultNodes,t.defaultEdges),()=>{u.current=BU,o()}),[]);const u=C.useRef(BU);return C.useEffect(()=>{for(const h of IU){const f=t[h],p=u.current[h];f!==p&&(typeof t[h]>"u"||(h==="nodes"?e(f):h==="edges"?n(f):h==="minZoom"?r(f):h==="maxZoom"?i(f):h==="translateExtent"?s(f):h==="nodeExtent"?a(f):h==="ariaLabelConfig"?c.setState({ariaLabelConfig:hVe(f)}):h==="fitView"?c.setState({fitViewQueued:f}):h==="fitViewOptions"?c.setState({fitViewOptions:f}):c.setState({[h]:f})))}u.current=t},IU.map(h=>t[h])),null}function TU(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function BWe(t){const[e,n]=C.useState(t==="system"?null:t);return C.useEffect(()=>{if(t!=="system"){n(t);return}const r=TU(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[t]),e!==null?e:TU()?.matches?"dark":"light"}const MU=typeof document<"u"?document:null;function eI(t=null,e={target:MU,actInsideInputWithModifier:!0}){const[n,r]=C.useState(!1),i=C.useRef(!1),s=C.useRef(new Set([])),[a,o]=C.useMemo(()=>{if(t!==null){const c=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.replace("+",`
`).replace(`

`,`
+`).split(`
`)),u=c.reduce((h,f)=>h.concat(...f),[]);return[c,u]}return[[],[]]},[t]);return C.useEffect(()=>{const l=e?.target??MU,c=e?.actInsideInputWithModifier??!0;if(t!==null){const u=p=>{if(i.current=p.ctrlKey||p.metaKey||p.shiftKey||p.altKey,(!i.current||i.current&&!c)&&Ace(p))return!1;const v=RU(p.code,o);if(s.current.add(p[v]),DU(a,s.current,!1)){const A=p.composedPath?.()?.[0]||p.target,x=A?.nodeName==="BUTTON"||A?.nodeName==="A";e.preventDefault!==!1&&(i.current||!x)&&p.preventDefault(),r(!0)}},h=p=>{const m=RU(p.code,o);DU(a,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(p[m]),p.key==="Meta"&&s.current.clear(),i.current=!1},f=()=>{s.current.clear(),r(!1)};return l?.addEventListener("keydown",u),l?.addEventListener("keyup",h),window.addEventListener("blur",f),window.addEventListener("contextmenu",f),()=>{l?.removeEventListener("keydown",u),l?.removeEventListener("keyup",h),window.removeEventListener("blur",f),window.removeEventListener("contextmenu",f)}}},[t,r]),n}function DU(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function RU(t,e){return e.includes(t)?"code":"key"}const TWe=()=>{const t=ga();return C.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:r}=t.getState();return r?r.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[r,i,s],panZoom:a}=t.getState();return a?(await a.setViewport({x:e.x??r,y:e.y??i,zoom:e.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,r]=t.getState().transform;return{x:e,y:n,zoom:r}},setCenter:async(e,n,r)=>t.getState().setCenter(e,n,r),fitBounds:async(e,n)=>{const{width:r,height:i,minZoom:s,maxZoom:a,panZoom:o}=t.getState(),l=Pj(e,r,i,s,a,n?.padding??.1);return o?(await o.setViewport(l,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={})=>{const{transform:r,snapGrid:i,snapToGrid:s,domNode:a}=t.getState();if(!a)return e;const{x:o,y:l}=a.getBoundingClientRect(),c={x:e.x-o,y:e.y-l},u=n.snapGrid??i,h=n.snapToGrid??s;return VI(c,r,h,u)},flowToScreenPosition:e=>{const{transform:n,domNode:r}=t.getState();if(!r)return e;const{x:i,y:s}=r.getBoundingClientRect(),a=xM(e,n);return{x:a.x+i,y:a.y+s}}}),[])};function Oce(t,e){const n=[],r=new Map,i=[];for(const s of t)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const a=r.get(s.id);a?a.push(s):r.set(s.id,[s])}for(const s of e){const a=r.get(s.id);if(!a){n.push(s);continue}if(a[0].type==="remove")continue;if(a[0].type==="replace"){n.push({...a[0].item});continue}const o={...s};for(const l of a)MWe(l,o);n.push(o)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function MWe(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(e.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(e.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function zce(t,e){return Oce(t,e)}function $ce(t,e){return Oce(t,e)}function Dx(t,e){return{id:t,type:"select",selected:e}}function P1(t,e=new Set,n=!1){const r=[];for(const[i,s]of t){const a=e.has(i);!(s.selected===void 0&&!a)&&s.selected!==a&&(n&&(s.selected=a),r.push(Dx(s.id,a)))}return r}function PU({items:t=[],lookup:e}){const n=[],r=new Map(t.map(i=>[i.id,i]));for(const[i,s]of t.entries()){const a=e.get(s.id),o=a?.internals?.userNode??a;o!==void 0&&o!==s&&n.push({id:s.id,item:s,type:"replace"}),o===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of e)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function kU(t){return{id:t.id,type:"remove"}}const NU=t=>nVe(t),DWe=t=>cce(t);function Qce(t){return C.forwardRef(t)}const RWe=typeof window<"u"?C.useLayoutEffect:C.useEffect;function LU(t){const[e,n]=C.useState(BigInt(0)),[r]=C.useState(()=>PWe(()=>n(i=>i+BigInt(1))));return RWe(()=>{const i=r.get();i.length&&(t(i),r.reset())},[e]),r}function PWe(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const Uce=C.createContext(null);function kWe({children:t}){const e=ga(),n=C.useCallback(o=>{const{nodes:l=[],setNodes:c,hasDefaultNodes:u,onNodesChange:h,nodeLookup:f,fitViewQueued:p,onNodesChangeMiddlewareMap:m}=e.getState();let v=l;for(const x of o)v=typeof x=="function"?x(v):x;let A=PU({items:v,lookup:f});for(const x of m.values())A=x(A);u&&c(v),A.length>0?h?.(A):p&&window.requestAnimationFrame(()=>{const{fitViewQueued:x,nodes:E,setNodes:w}=e.getState();x&&w(E)})},[]),r=LU(n),i=C.useCallback(o=>{const{edges:l=[],setEdges:c,hasDefaultEdges:u,onEdgesChange:h,edgeLookup:f}=e.getState();let p=l;for(const m of o)p=typeof m=="function"?m(p):m;u?c(p):h&&h(PU({items:p,lookup:f}))},[]),s=LU(i),a=C.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return d.jsx(Uce.Provider,{value:a,children:t})}function NWe(){const t=C.useContext(Uce);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const LWe=t=>!!t.panZoom;function j4(){const t=TWe(),e=ga(),n=NWe(),r=Pi(LWe),i=C.useMemo(()=>{const s=h=>e.getState().nodeLookup.get(h),a=h=>{n.nodeQueue.push(h)},o=h=>{n.edgeQueue.push(h)},l=h=>{const{nodeLookup:f,nodeOrigin:p}=e.getState(),m=NU(h)?h:f.get(h.id),v=m.parentId?gce(m.position,m.measured,m.parentId,f,p):m.position,A={...m,position:v,width:m.measured?.width??m.width,height:m.measured?.height??m.height};return CE(A)},c=(h,f,p={replace:!1})=>{a(m=>m.map(v=>{if(v.id===h){const A=typeof f=="function"?f(v):f;return p.replace&&NU(A)?A:{...v,...A}}return v}))},u=(h,f,p={replace:!1})=>{o(m=>m.map(v=>{if(v.id===h){const A=typeof f=="function"?f(v):f;return p.replace&&DWe(A)?A:{...v,...A}}return v}))};return{getNodes:()=>e.getState().nodes.map(h=>({...h})),getNode:h=>s(h)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:h=[]}=e.getState();return h.map(f=>({...f}))},getEdge:h=>e.getState().edgeLookup.get(h),setNodes:a,setEdges:o,addNodes:h=>{const f=Array.isArray(h)?h:[h];n.nodeQueue.push(p=>[...p,...f])},addEdges:h=>{const f=Array.isArray(h)?h:[h];n.edgeQueue.push(p=>[...p,...f])},toObject:()=>{const{nodes:h=[],edges:f=[],transform:p}=e.getState(),[m,v,A]=p;return{nodes:h.map(x=>({...x})),edges:f.map(x=>({...x})),viewport:{x:m,y:v,zoom:A}}},deleteElements:async({nodes:h=[],edges:f=[]})=>{const{nodes:p,edges:m,onNodesDelete:v,onEdgesDelete:A,triggerNodeChanges:x,triggerEdgeChanges:E,onDelete:w,onBeforeDelete:B}=e.getState(),{nodes:D,edges:T}=await oVe({nodesToRemove:h,edgesToRemove:f,nodes:p,edges:m,onBeforeDelete:B}),M=T.length>0,R=D.length>0;if(M){const k=T.map(kU);A?.(T),E(k)}if(R){const k=D.map(kU);v?.(D),x(k)}return(R||M)&&w?.({nodes:D,edges:T}),{deletedNodes:D,deletedEdges:T}},getIntersectingNodes:(h,f=!0,p)=>{const m=cU(h),v=m?h:l(h),A=p!==void 0;return v?(p||e.getState().nodes).filter(x=>{const E=e.getState().nodeLookup.get(x.id);if(E&&!m&&(x.id===h.id||!E.internals.positionAbsolute))return!1;const w=CE(A?x:E),B=J_(w,v);return f&&B>0||B>=w.width*w.height||B>=v.width*v.height}):[]},isNodeIntersecting:(h,f,p=!0)=>{const v=cU(h)?h:l(h);if(!v)return!1;const A=J_(v,f);return p&&A>0||A>=f.width*f.height||A>=v.width*v.height},updateNode:c,updateNodeData:(h,f,p={replace:!1})=>{c(h,m=>{const v=typeof f=="function"?f(m):f;return p.replace?{...m,data:v}:{...m,data:{...m.data,...v}}},p)},updateEdge:u,updateEdgeData:(h,f,p={replace:!1})=>{u(h,m=>{const v=typeof f=="function"?f(m):f;return p.replace?{...m,data:v}:{...m,data:{...m.data,...v}}},p)},getNodesBounds:h=>{const{nodeLookup:f,nodeOrigin:p}=e.getState();return rVe(h,{nodeLookup:f,nodeOrigin:p})},getHandleConnections:({type:h,id:f,nodeId:p})=>Array.from(e.getState().connectionLookup.get(`${p}-${h}${f?`-${f}`:""}`)?.values()??[]),getNodeConnections:({type:h,handleId:f,nodeId:p})=>Array.from(e.getState().connectionLookup.get(`${p}${h?f?`-${h}-${f}`:`-${h}`:""}`)?.values()??[]),fitView:async h=>{const f=e.getState().fitViewResolver??dVe();return e.setState({fitViewQueued:!0,fitViewOptions:h,fitViewResolver:f}),n.nodeQueue.push(p=>[...p]),f.promise}}},[]);return C.useMemo(()=>({...i,...t,viewportInitialized:r}),[r])}const FU=t=>t.selected,FWe=typeof window<"u"?window:void 0;function jWe({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=ga(),{deleteElements:r}=j4(),i=eI(t,{actInsideInputWithModifier:!1}),s=eI(e,{target:FWe});C.useEffect(()=>{if(i){const{edges:a,nodes:o}=n.getState();r({nodes:o.filter(FU),edges:a.filter(FU)}),n.setState({nodesSelectionActive:!1})}},[i]),C.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function OWe(t){const e=ga();C.useEffect(()=>{const n=()=>{if(!t.current||!(t.current.checkVisibility?.()??!0))return!1;const r=kj(t.current);(r.height===0||r.width===0)&&e.getState().onError?.("004",Kg.error004()),e.setState({width:r.width||500,height:r.height||500})};if(t.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(t.current),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}}},[])}const O4={position:"absolute",width:"100%",height:"100%",top:0,left:0},zWe=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function $We({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=ub.Free,zoomOnDoubleClick:a=!0,panOnDrag:o=!0,defaultViewport:l,translateExtent:c,minZoom:u,maxZoom:h,zoomActivationKeyCode:f,preventScrolling:p=!0,children:m,noWheelClassName:v,noPanClassName:A,onViewportChange:x,isControlledViewport:E,paneClickDistance:w,selectionOnDrag:B}){const D=ga(),T=C.useRef(null),{userSelectionActive:M,lib:R,connectionInProgress:k}=Pi(zWe,fa),L=eI(f),F=C.useRef();OWe(T);const z=C.useCallback(G=>{x?.({x:G[0],y:G[1],zoom:G[2]}),E||D.setState({transform:G})},[x,E]);return C.useEffect(()=>{if(T.current){F.current=KVe({domNode:T.current,minZoom:u,maxZoom:h,translateExtent:c,viewport:l,onDraggingChange:O=>D.setState({paneDragging:O}),onPanZoomStart:(O,H)=>{const{onViewportChangeStart:K,onMoveStart:X}=D.getState();X?.(O,H),K?.(H)},onPanZoom:(O,H)=>{const{onViewportChange:K,onMove:X}=D.getState();X?.(O,H),K?.(H)},onPanZoomEnd:(O,H)=>{const{onViewportChangeEnd:K,onMoveEnd:X}=D.getState();X?.(O,H),K?.(H)}});const{x:G,y:V,zoom:q}=F.current.getViewport();return D.setState({panZoom:F.current,transform:[G,V,q],domNode:T.current.closest(".react-flow")}),()=>{F.current?.destroy()}}},[]),C.useEffect(()=>{F.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:a,panOnDrag:o,zoomActivationKeyPressed:L,preventScrolling:p,noPanClassName:A,userSelectionActive:M,noWheelClassName:v,lib:R,onTransformChange:z,connectionInProgress:k,selectionOnDrag:B,paneClickDistance:w})},[t,e,n,r,i,s,a,o,L,p,A,M,v,R,z,k,B,w]),d.jsx("div",{className:"react-flow__renderer",ref:T,style:O4,children:m})}const QWe=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function UWe(){const{userSelectionActive:t,userSelectionRect:e}=Pi(QWe,fa);return t&&e?d.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const FP=(t,e)=>n=>{n.target===e.current&&t?.(n)},HWe=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function GWe({isSelecting:t,selectionKeyPressed:e,selectionMode:n=X_.Full,panOnDrag:r,paneClickDistance:i,selectionOnDrag:s,onSelectionStart:a,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:u,onPaneMouseEnter:h,onPaneMouseMove:f,onPaneMouseLeave:p,children:m}){const v=ga(),{userSelectionActive:A,elementsSelectable:x,dragging:E,connectionInProgress:w}=Pi(HWe,fa),B=x&&(t||A),D=C.useRef(null),T=C.useRef(),M=C.useRef(new Set),R=C.useRef(new Set),k=C.useRef(!1),L=K=>{if(k.current||w){k.current=!1;return}l?.(K),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},F=K=>{if(Array.isArray(r)&&r?.includes(2)){K.preventDefault();return}c?.(K)},z=u?K=>u(K):void 0,G=K=>{k.current&&(K.stopPropagation(),k.current=!1)},V=K=>{const{domNode:X}=v.getState();if(T.current=X?.getBoundingClientRect(),!T.current)return;const re=K.target===D.current;if(!re&&!!K.target.closest(".nokey")||!t||!(s&&re||e)||K.button!==0||!K.isPrimary)return;K.target?.setPointerCapture?.(K.pointerId),k.current=!1;const{x:ee,y:te}=Sp(K.nativeEvent,T.current);v.setState({userSelectionRect:{width:0,height:0,startX:ee,startY:te,x:ee,y:te}}),re||(K.stopPropagation(),K.preventDefault())},q=K=>{const{userSelectionRect:X,transform:re,nodeLookup:J,edgeLookup:Z,connectionLookup:ee,triggerNodeChanges:te,triggerEdgeChanges:oe,defaultEdgeOptions:ae,resetSelectedElements:se}=v.getState();if(!T.current||!X)return;const{x:fe,y:Ee}=Sp(K.nativeEvent,T.current),{startX:Be,startY:_e}=X;if(!k.current){const $e=e?0:i;if(Math.hypot(fe-Be,Ee-_e)<=$e)return;se(),a?.(K)}k.current=!0;const Ce={startX:Be,startY:_e,x:fe<Be?fe:Be,y:Ee<_e?Ee:_e,width:Math.abs(fe-Be),height:Math.abs(Ee-_e)},Se=M.current,Me=R.current;M.current=new Set(Rj(J,Ce,re,n===X_.Partial,!0).map($e=>$e.id)),R.current=new Set;const ce=ae?.selectable??!0;for(const $e of M.current){const qe=ee.get($e);if(qe)for(const{edgeId:ft}of qe.values()){const Ie=Z.get(ft);Ie&&(Ie.selectable??ce)&&R.current.add(ft)}}if(!uU(Se,M.current)){const $e=P1(J,M.current,!0);te($e)}if(!uU(Me,R.current)){const $e=P1(Z,R.current);oe($e)}v.setState({userSelectionRect:Ce,userSelectionActive:!0,nodesSelectionActive:!1})},O=K=>{K.button===0&&(K.target?.releasePointerCapture?.(K.pointerId),!A&&K.target===D.current&&v.getState().userSelectionRect&&L?.(K),v.setState({userSelectionActive:!1,userSelectionRect:null}),k.current&&(o?.(K),v.setState({nodesSelectionActive:M.current.size>0})))},H=r===!0||Array.isArray(r)&&r.includes(0);return d.jsxs("div",{className:Fo(["react-flow__pane",{draggable:H,dragging:E,selection:t}]),onClick:B?void 0:FP(L,D),onContextMenu:FP(F,D),onWheel:FP(z,D),onPointerEnter:B?void 0:h,onPointerMove:B?q:f,onPointerUp:B?O:void 0,onPointerDownCapture:B?V:void 0,onClickCapture:B?G:void 0,onPointerLeave:p,ref:D,style:O4,children:[m,d.jsx(UWe,{})]})}function O6({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:a,nodeLookup:o,onError:l}=e.getState(),c=o.get(t);if(!c){l?.("012",Kg.error012(t));return}e.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&a)&&(s({nodes:[c],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([t])}function Hce({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:a}){const o=ga(),[l,c]=C.useState(!1),u=C.useRef();return C.useEffect(()=>{u.current=kVe({getStoreItems:()=>o.getState(),onNodeMouseDown:h=>{O6({id:h,store:o,nodeRef:t})},onDragStart:()=>{c(!0)},onDragStop:()=>{c(!1)}})},[]),C.useEffect(()=>{if(e)u.current?.destroy();else if(t.current)return u.current?.update({noDragClassName:n,handleSelector:r,domNode:t.current,isSelectable:s,nodeId:i,nodeClickDistance:a}),()=>{u.current?.destroy()}},[n,r,e,s,t,i]),l}const VWe=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function Gce(){const t=ga();return C.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:a,onError:o,updateNodePositions:l,nodeLookup:c,nodeOrigin:u}=t.getState(),h=new Map,f=VWe(a),p=i?s[0]:5,m=i?s[1]:5,v=n.direction.x*p*n.factor,A=n.direction.y*m*n.factor;for(const[,x]of c){if(!f(x))continue;let E={x:x.internals.positionAbsolute.x+v,y:x.internals.positionAbsolute.y+A};i&&(E=GI(E,s));const{position:w,positionAbsolute:B}=uce({nodeId:x.id,nextPosition:E,nodeLookup:c,nodeExtent:r,nodeOrigin:u,onError:o});x.position=w,x.internals.positionAbsolute=B,h.set(x.id,x)}l(h)},[])}const zj=C.createContext(null),WWe=zj.Provider;zj.Consumer;const Vce=()=>C.useContext(zj),KWe=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),qWe=(t,e,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:a}=r,{fromHandle:o,toHandle:l,isValid:c}=a,u=l?.nodeId===t&&l?.id===e&&l?.type===n;return{connectingFrom:o?.nodeId===t&&o?.id===e&&o?.type===n,connectingTo:u,clickConnecting:i?.nodeId===t&&i?.id===e&&i?.type===n,isPossibleEndHandle:s===vE.Strict?o?.type!==n:t!==o?.nodeId||e!==o?.id,connectionInProcess:!!o,clickConnectionInProcess:!!i,valid:u&&c}};function YWe({type:t="source",position:e=Qn.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:a,onConnect:o,children:l,className:c,onMouseDown:u,onTouchStart:h,...f},p){const m=a||null,v=t==="target",A=ga(),x=Vce(),{connectOnClick:E,noPanClassName:w,rfId:B}=Pi(KWe,fa),{connectingFrom:D,connectingTo:T,clickConnecting:M,isPossibleEndHandle:R,connectionInProcess:k,clickConnectionInProcess:L,valid:F}=Pi(qWe(x,m,t),fa);x||A.getState().onError?.("010",Kg.error010());const z=q=>{const{defaultEdgeOptions:O,onConnect:H,hasDefaultEdges:K}=A.getState(),X={...O,...q};if(K){const{edges:re,setEdges:J}=A.getState();J(yVe(X,re))}H?.(X),o?.(X)},G=q=>{if(!x)return;const O=yce(q.nativeEvent);if(i&&(O&&q.button===0||!O)){const H=A.getState();j6.onPointerDown(q.nativeEvent,{handleDomNode:q.currentTarget,autoPanOnConnect:H.autoPanOnConnect,connectionMode:H.connectionMode,connectionRadius:H.connectionRadius,domNode:H.domNode,nodeLookup:H.nodeLookup,lib:H.lib,isTarget:v,handleId:m,nodeId:x,flowId:H.rfId,panBy:H.panBy,cancelConnection:H.cancelConnection,onConnectStart:H.onConnectStart,onConnectEnd:H.onConnectEnd,updateConnection:H.updateConnection,onConnect:z,isValidConnection:n||H.isValidConnection,getTransform:()=>A.getState().transform,getFromHandle:()=>A.getState().connection.fromHandle,autoPanSpeed:H.autoPanSpeed,dragThreshold:H.connectionDragThreshold})}O?u?.(q):h?.(q)},V=q=>{const{onClickConnectStart:O,onClickConnectEnd:H,connectionClickStartHandle:K,connectionMode:X,isValidConnection:re,lib:J,rfId:Z,nodeLookup:ee,connection:te}=A.getState();if(!x||!K&&!i)return;if(!K){O?.(q.nativeEvent,{nodeId:x,handleId:m,handleType:t}),A.setState({connectionClickStartHandle:{nodeId:x,type:t,id:m}});return}const oe=mce(q.target),ae=n||re,{connection:se,isValid:fe}=j6.isValid(q.nativeEvent,{handle:{nodeId:x,id:m,type:t},connectionMode:X,fromNodeId:K.nodeId,fromHandleId:K.id||null,fromType:K.type,isValidConnection:ae,flowId:Z,doc:oe,lib:J,nodeLookup:ee});fe&&se&&z(se);const Ee=structuredClone(te);delete Ee.inProgress,Ee.toPosition=Ee.toHandle?Ee.toHandle.position:null,H?.(q,Ee),A.setState({connectionClickStartHandle:null})};return d.jsx("div",{"data-handleid":m,"data-nodeid":x,"data-handlepos":e,"data-id":`${B}-${x}-${m}-${t}`,className:Fo(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",w,c,{source:!v,target:v,connectable:r,connectablestart:i,connectableend:s,clickconnecting:M,connectingfrom:D,connectingto:T,valid:F,connectionindicator:r&&(!k||R)&&(k||L?s:i)}]),onMouseDown:G,onTouchStart:G,onClick:E?V:void 0,ref:p,...f,children:l})}const L0=C.memo(Qce(YWe));function XWe({data:t,isConnectable:e,sourcePosition:n=Qn.Bottom}){return d.jsxs(d.Fragment,{children:[t?.label,d.jsx(L0,{type:"source",position:n,isConnectable:e})]})}function JWe({data:t,isConnectable:e,targetPosition:n=Qn.Top,sourcePosition:r=Qn.Bottom}){return d.jsxs(d.Fragment,{children:[d.jsx(L0,{type:"target",position:n,isConnectable:e}),t?.label,d.jsx(L0,{type:"source",position:r,isConnectable:e})]})}function ZWe(){return null}function eKe({data:t,isConnectable:e,targetPosition:n=Qn.Top}){return d.jsxs(d.Fragment,{children:[d.jsx(L0,{type:"target",position:n,isConnectable:e}),t?.label]})}const bM={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},jU={input:XWe,default:JWe,output:eKe,group:ZWe};function tKe(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const nKe=t=>{const{width:e,height:n,x:r,y:i}=HI(t.nodeLookup,{filter:s=>!!s.selected});return{width:Ep(e)?e:null,height:Ep(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${r}px,${i}px)`}};function rKe({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=ga(),{width:i,height:s,transformString:a,userSelectionActive:o}=Pi(nKe,fa),l=Gce(),c=C.useRef(null);if(C.useEffect(()=>{n||c.current?.focus({preventScroll:!0})},[n]),Hce({nodeRef:c}),o||!i||!s)return null;const u=t?f=>{const p=r.getState().nodes.filter(m=>m.selected);t(f,p)}:void 0,h=f=>{Object.prototype.hasOwnProperty.call(bM,f.key)&&(f.preventDefault(),l({direction:bM[f.key],factor:f.shiftKey?4:1}))};return d.jsx("div",{className:Fo(["react-flow__nodesselection","react-flow__container",e]),style:{transform:a},children:d.jsx("div",{ref:c,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:i,height:s}})})}const OU=typeof window<"u"?window:void 0,iKe=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function Wce({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:a,paneClickDistance:o,deleteKeyCode:l,selectionKeyCode:c,selectionOnDrag:u,selectionMode:h,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:m,panActivationKeyCode:v,zoomActivationKeyCode:A,elementsSelectable:x,zoomOnScroll:E,zoomOnPinch:w,panOnScroll:B,panOnScrollSpeed:D,panOnScrollMode:T,zoomOnDoubleClick:M,panOnDrag:R,defaultViewport:k,translateExtent:L,minZoom:F,maxZoom:z,preventScrolling:G,onSelectionContextMenu:V,noWheelClassName:q,noPanClassName:O,disableKeyboardA11y:H,onViewportChange:K,isControlledViewport:X}){const{nodesSelectionActive:re,userSelectionActive:J}=Pi(iKe,fa),Z=eI(c,{target:OU}),ee=eI(v,{target:OU}),te=ee||R,oe=ee||B,ae=u&&te!==!0,se=Z||J||ae;return jWe({deleteKeyCode:l,multiSelectionKeyCode:m}),d.jsx($We,{onPaneContextMenu:s,elementsSelectable:x,zoomOnScroll:E,zoomOnPinch:w,panOnScroll:oe,panOnScrollSpeed:D,panOnScrollMode:T,zoomOnDoubleClick:M,panOnDrag:!Z&&te,defaultViewport:k,translateExtent:L,minZoom:F,maxZoom:z,zoomActivationKeyCode:A,preventScrolling:G,noWheelClassName:q,noPanClassName:O,onViewportChange:K,isControlledViewport:X,paneClickDistance:o,selectionOnDrag:ae,children:d.jsxs(GWe,{onSelectionStart:f,onSelectionEnd:p,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:a,panOnDrag:te,isSelecting:!!se,selectionMode:h,selectionKeyPressed:Z,paneClickDistance:o,selectionOnDrag:ae,children:[t,re&&d.jsx(rKe,{onSelectionContextMenu:V,noPanClassName:O,disableKeyboardA11y:H})]})})}Wce.displayName="FlowRenderer";const sKe=C.memo(Wce),aKe=t=>e=>t?Rj(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function oKe(t){return Pi(C.useCallback(aKe(t),[t]),fa)}const lKe=t=>t.updateNodeInternals;function cKe(){const t=Pi(lKe),[e]=C.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),t(r)}));return C.useEffect(()=>()=>{e?.disconnect()},[e]),e}function uKe({node:t,nodeType:e,hasDimensions:n,resizeObserver:r}){const i=ga(),s=C.useRef(null),a=C.useRef(null),o=C.useRef(t.sourcePosition),l=C.useRef(t.targetPosition),c=C.useRef(e),u=n&&!!t.internals.handleBounds;return C.useEffect(()=>{s.current&&!t.hidden&&(!u||a.current!==s.current)&&(a.current&&r?.unobserve(a.current),r?.observe(s.current),a.current=s.current)},[u,t.hidden]),C.useEffect(()=>()=>{a.current&&(r?.unobserve(a.current),a.current=null)},[]),C.useEffect(()=>{if(s.current){const h=c.current!==e,f=o.current!==t.sourcePosition,p=l.current!==t.targetPosition;(h||f||p)&&(c.current=e,o.current=t.sourcePosition,l.current=t.targetPosition,i.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:s.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),s}function dKe({id:t,onClick:e,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:a,nodesDraggable:o,elementsSelectable:l,nodesConnectable:c,nodesFocusable:u,resizeObserver:h,noDragClassName:f,noPanClassName:p,disableKeyboardA11y:m,rfId:v,nodeTypes:A,nodeClickDistance:x,onError:E}){const{node:w,internals:B,isParent:D}=Pi(fe=>{const Ee=fe.nodeLookup.get(t),Be=fe.parentLookup.has(t);return{node:Ee,internals:Ee.internals,isParent:Be}},fa);let T=w.type||"default",M=A?.[T]||jU[T];M===void 0&&(E?.("003",Kg.error003(T)),T="default",M=A?.default||jU.default);const R=!!(w.draggable||o&&typeof w.draggable>"u"),k=!!(w.selectable||l&&typeof w.selectable>"u"),L=!!(w.connectable||c&&typeof w.connectable>"u"),F=!!(w.focusable||u&&typeof w.focusable>"u"),z=ga(),G=pce(w),V=uKe({node:w,nodeType:T,hasDimensions:G,resizeObserver:h}),q=Hce({nodeRef:V,disabled:w.hidden||!R,noDragClassName:f,handleSelector:w.dragHandle,nodeId:t,isSelectable:k,nodeClickDistance:x}),O=Gce();if(w.hidden)return null;const H=H0(w),K=tKe(w),X=k||R||e||n||r||i,re=n?fe=>n(fe,{...B.userNode}):void 0,J=r?fe=>r(fe,{...B.userNode}):void 0,Z=i?fe=>i(fe,{...B.userNode}):void 0,ee=s?fe=>s(fe,{...B.userNode}):void 0,te=a?fe=>a(fe,{...B.userNode}):void 0,oe=fe=>{const{selectNodesOnDrag:Ee,nodeDragThreshold:Be}=z.getState();k&&(!Ee||!R||Be>0)&&O6({id:t,store:z,nodeRef:V}),e&&e(fe,{...B.userNode})},ae=fe=>{if(!(Ace(fe.nativeEvent)||m)){if(sce.includes(fe.key)&&k){const Ee=fe.key==="Escape";O6({id:t,store:z,unselect:Ee,nodeRef:V})}else if(R&&w.selected&&Object.prototype.hasOwnProperty.call(bM,fe.key)){fe.preventDefault();const{ariaLabelConfig:Ee}=z.getState();z.setState({ariaLiveMessage:Ee["node.a11yDescription.ariaLiveMessage"]({direction:fe.key.replace("Arrow","").toLowerCase(),x:~~B.positionAbsolute.x,y:~~B.positionAbsolute.y})}),O({direction:bM[fe.key],factor:fe.shiftKey?4:1})}}},se=()=>{if(m||!V.current?.matches(":focus-visible"))return;const{transform:fe,width:Ee,height:Be,autoPanOnNodeFocus:_e,setCenter:Ce}=z.getState();if(!_e)return;Rj(new Map([[t,w]]),{x:0,y:0,width:Ee,height:Be},fe,!0).length>0||Ce(w.position.x+H.width/2,w.position.y+H.height/2,{zoom:fe[2]})};return d.jsx("div",{className:Fo(["react-flow__node",`react-flow__node-${T}`,{[p]:R},w.className,{selected:w.selected,selectable:k,parent:D,draggable:R,dragging:q}]),ref:V,style:{zIndex:B.z,transform:`translate(${B.positionAbsolute.x}px,${B.positionAbsolute.y}px)`,pointerEvents:X?"all":"none",visibility:G?"visible":"hidden",...w.style,...K},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:re,onMouseMove:J,onMouseLeave:Z,onContextMenu:ee,onClick:oe,onDoubleClick:te,onKeyDown:F?ae:void 0,tabIndex:F?0:void 0,onFocus:F?se:void 0,role:w.ariaRole??(F?"group":void 0),"aria-roledescription":"node","aria-describedby":m?void 0:`${Lce}-${v}`,"aria-label":w.ariaLabel,...w.domAttributes,children:d.jsx(WWe,{value:t,children:d.jsx(M,{id:t,data:w.data,type:T,positionAbsoluteX:B.positionAbsolute.x,positionAbsoluteY:B.positionAbsolute.y,selected:w.selected??!1,selectable:k,draggable:R,deletable:w.deletable??!0,isConnectable:L,sourcePosition:w.sourcePosition,targetPosition:w.targetPosition,dragging:q,dragHandle:w.dragHandle,zIndex:B.z,parentId:w.parentId,...H})})})}var hKe=C.memo(dKe);const fKe=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function Kce(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=Pi(fKe,fa),a=oKe(t.onlyRenderVisibleElements),o=cKe();return d.jsx("div",{className:"react-flow__nodes",style:O4,children:a.map(l=>d.jsx(hKe,{id:l,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:o,nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:t.nodeClickDistance,onError:s},l))})}Kce.displayName="NodeRenderer";const pKe=C.memo(Kce);function gKe(t){return Pi(C.useCallback(n=>{if(!t)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),a=n.nodeLookup.get(i.target);s&&a&&gVe({sourceNode:s,targetNode:a,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[t]),fa)}const mKe=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t}};return d.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},AKe=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t,fill:t}};return d.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},zU={[xE.Arrow]:mKe,[xE.ArrowClosed]:AKe};function yKe(t){const e=ga();return C.useMemo(()=>Object.prototype.hasOwnProperty.call(zU,t)?zU[t]:(e.getState().onError?.("009",Kg.error009(t)),null),[t])}const vKe=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:a,orient:o="auto-start-reverse"})=>{const l=yKe(e);return l?d.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0",children:d.jsx(l,{color:n,strokeWidth:a})}):null},qce=({defaultColor:t,rfId:e})=>{const n=Pi(s=>s.edges),r=Pi(s=>s.defaultEdgeOptions),i=C.useMemo(()=>EVe(n,{id:e,defaultColor:t,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,e,t]);return i.length?d.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:d.jsx("defs",{children:i.map(s=>d.jsx(vKe,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};qce.displayName="MarkerDefinitions";var xKe=C.memo(qce);function Yce({x:t,y:e,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:s,labelBgPadding:a=[2,4],labelBgBorderRadius:o=2,children:l,className:c,...u}){const[h,f]=C.useState({x:1,y:0,width:0,height:0}),p=Fo(["react-flow__edge-textwrapper",c]),m=C.useRef(null);return C.useEffect(()=>{if(m.current){const v=m.current.getBBox();f({x:v.x,y:v.y,width:v.width,height:v.height})}},[n]),n?d.jsxs("g",{transform:`translate(${t-h.width/2} ${e-h.height/2})`,className:p,visibility:h.width?"visible":"hidden",...u,children:[i&&d.jsx("rect",{width:h.width+2*a[0],x:-a[0],y:-a[1],height:h.height+2*a[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),d.jsx("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:m,style:r,children:n}),l]}):null}Yce.displayName="EdgeText";const bKe=C.memo(Yce);function z4({path:t,labelX:e,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:o,labelBgBorderRadius:l,interactionWidth:c=20,...u}){return d.jsxs(d.Fragment,{children:[d.jsx("path",{...u,d:t,fill:"none",className:Fo(["react-flow__edge-path",u.className])}),c?d.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:c,className:"react-flow__edge-interaction"}):null,r&&Ep(e)&&Ep(n)?d.jsx(bKe,{x:e,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:o,labelBgBorderRadius:l}):null]})}function $U({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===Qn.Left||t===Qn.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function Xce({sourceX:t,sourceY:e,sourcePosition:n=Qn.Bottom,targetX:r,targetY:i,targetPosition:s=Qn.Top}){const[a,o]=$U({pos:n,x1:t,y1:e,x2:r,y2:i}),[l,c]=$U({pos:s,x1:r,y1:i,x2:t,y2:e}),[u,h,f,p]=vce({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:a,sourceControlY:o,targetControlX:l,targetControlY:c});return[`M${t},${e} C${a},${o} ${l},${c} ${r},${i}`,u,h,f,p]}function Jce(t){return C.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:a,targetPosition:o,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:v,markerStart:A,interactionWidth:x})=>{const[E,w,B]=Xce({sourceX:n,sourceY:r,sourcePosition:a,targetX:i,targetY:s,targetPosition:o}),D=t.isInternal?void 0:e;return d.jsx(z4,{id:D,path:E,labelX:w,labelY:B,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:v,markerStart:A,interactionWidth:x})})}const CKe=Jce({isInternal:!1}),Zce=Jce({isInternal:!0});CKe.displayName="SimpleBezierEdge";Zce.displayName="SimpleBezierEdgeInternal";function eue(t){return C.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:h,style:f,sourcePosition:p=Qn.Bottom,targetPosition:m=Qn.Top,markerEnd:v,markerStart:A,pathOptions:x,interactionWidth:E})=>{const[w,B,D]=N6({sourceX:n,sourceY:r,sourcePosition:p,targetX:i,targetY:s,targetPosition:m,borderRadius:x?.borderRadius,offset:x?.offset,stepPosition:x?.stepPosition}),T=t.isInternal?void 0:e;return d.jsx(z4,{id:T,path:w,labelX:B,labelY:D,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:h,style:f,markerEnd:v,markerStart:A,interactionWidth:E})})}const tue=eue({isInternal:!1}),nue=eue({isInternal:!0});tue.displayName="SmoothStepEdge";nue.displayName="SmoothStepEdgeInternal";function rue(t){return C.memo(({id:e,...n})=>{const r=t.isInternal?void 0:e;return d.jsx(tue,{...n,id:r,pathOptions:C.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const EKe=rue({isInternal:!1}),iue=rue({isInternal:!0});EKe.displayName="StepEdge";iue.displayName="StepEdgeInternal";function sue(t){return C.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:h,style:f,markerEnd:p,markerStart:m,interactionWidth:v})=>{const[A,x,E]=Cce({sourceX:n,sourceY:r,targetX:i,targetY:s}),w=t.isInternal?void 0:e;return d.jsx(z4,{id:w,path:A,labelX:x,labelY:E,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:h,style:f,markerEnd:p,markerStart:m,interactionWidth:v})})}const SKe=sue({isInternal:!1}),aue=sue({isInternal:!0});SKe.displayName="StraightEdge";aue.displayName="StraightEdgeInternal";function oue(t){return C.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:a=Qn.Bottom,targetPosition:o=Qn.Top,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:v,markerStart:A,pathOptions:x,interactionWidth:E})=>{const[w,B,D]=xce({sourceX:n,sourceY:r,sourcePosition:a,targetX:i,targetY:s,targetPosition:o,curvature:x?.curvature}),T=t.isInternal?void 0:e;return d.jsx(z4,{id:T,path:w,labelX:B,labelY:D,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:v,markerStart:A,interactionWidth:E})})}const wKe=oue({isInternal:!1}),lue=oue({isInternal:!0});wKe.displayName="BezierEdge";lue.displayName="BezierEdgeInternal";const QU={default:lue,straight:aue,step:iue,smoothstep:nue,simplebezier:Zce},UU={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},_Ke=(t,e,n)=>n===Qn.Left?t-e:n===Qn.Right?t+e:t,IKe=(t,e,n)=>n===Qn.Top?t-e:n===Qn.Bottom?t+e:t,HU="react-flow__edgeupdater";function GU({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:a,type:o}){return d.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:a,className:Fo([HU,`${HU}-${o}`]),cx:_Ke(e,r,t),cy:IKe(n,r,t),r,stroke:"transparent",fill:"transparent"})}function BKe({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:a,sourcePosition:o,targetPosition:l,onReconnect:c,onReconnectStart:u,onReconnectEnd:h,setReconnecting:f,setUpdateHover:p}){const m=ga(),v=(B,D)=>{if(B.button!==0)return;const{autoPanOnConnect:T,domNode:M,isValidConnection:R,connectionMode:k,connectionRadius:L,lib:F,onConnectStart:z,onConnectEnd:G,cancelConnection:V,nodeLookup:q,rfId:O,panBy:H,updateConnection:K}=m.getState(),X=D.type==="target",re=(ee,te)=>{f(!1),h?.(ee,n,D.type,te)},J=ee=>c?.(n,ee),Z=(ee,te)=>{f(!0),u?.(B,n,D.type),z?.(ee,te)};j6.onPointerDown(B.nativeEvent,{autoPanOnConnect:T,connectionMode:k,connectionRadius:L,domNode:M,handleId:D.id,nodeId:D.nodeId,nodeLookup:q,isTarget:X,edgeUpdaterType:D.type,lib:F,flowId:O,cancelConnection:V,panBy:H,isValidConnection:R,onConnect:J,onConnectStart:Z,onConnectEnd:G,onReconnectEnd:re,updateConnection:K,getTransform:()=>m.getState().transform,getFromHandle:()=>m.getState().connection.fromHandle,dragThreshold:m.getState().connectionDragThreshold,handleDomNode:B.currentTarget})},A=B=>v(B,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),x=B=>v(B,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),E=()=>p(!0),w=()=>p(!1);return d.jsxs(d.Fragment,{children:[(t===!0||t==="source")&&d.jsx(GU,{position:o,centerX:r,centerY:i,radius:e,onMouseDown:A,onMouseEnter:E,onMouseOut:w,type:"source"}),(t===!0||t==="target")&&d.jsx(GU,{position:l,centerX:s,centerY:a,radius:e,onMouseDown:x,onMouseEnter:E,onMouseOut:w,type:"target"})]})}function TKe({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:a,onMouseEnter:o,onMouseMove:l,onMouseLeave:c,reconnectRadius:u,onReconnect:h,onReconnectStart:f,onReconnectEnd:p,rfId:m,edgeTypes:v,noPanClassName:A,onError:x,disableKeyboardA11y:E}){let w=Pi(Ce=>Ce.edgeLookup.get(t));const B=Pi(Ce=>Ce.defaultEdgeOptions);w=B?{...B,...w}:w;let D=w.type||"default",T=v?.[D]||QU[D];T===void 0&&(x?.("011",Kg.error011(D)),D="default",T=v?.default||QU.default);const M=!!(w.focusable||e&&typeof w.focusable>"u"),R=typeof h<"u"&&(w.reconnectable||n&&typeof w.reconnectable>"u"),k=!!(w.selectable||r&&typeof w.selectable>"u"),L=C.useRef(null),[F,z]=C.useState(!1),[G,V]=C.useState(!1),q=ga(),{zIndex:O,sourceX:H,sourceY:K,targetX:X,targetY:re,sourcePosition:J,targetPosition:Z}=Pi(C.useCallback(Ce=>{const Se=Ce.nodeLookup.get(w.source),Me=Ce.nodeLookup.get(w.target);if(!Se||!Me)return{zIndex:w.zIndex,...UU};const ce=CVe({id:t,sourceNode:Se,targetNode:Me,sourceHandle:w.sourceHandle||null,targetHandle:w.targetHandle||null,connectionMode:Ce.connectionMode,onError:x});return{zIndex:pVe({selected:w.selected,zIndex:w.zIndex,sourceNode:Se,targetNode:Me,elevateOnSelect:Ce.elevateEdgesOnSelect,zIndexMode:Ce.zIndexMode}),...ce||UU}},[w.source,w.target,w.sourceHandle,w.targetHandle,w.selected,w.zIndex]),fa),ee=C.useMemo(()=>w.markerStart?`url('#${L6(w.markerStart,m)}')`:void 0,[w.markerStart,m]),te=C.useMemo(()=>w.markerEnd?`url('#${L6(w.markerEnd,m)}')`:void 0,[w.markerEnd,m]);if(w.hidden||H===null||K===null||X===null||re===null)return null;const oe=Ce=>{const{addSelectedEdges:Se,unselectNodesAndEdges:Me,multiSelectionActive:ce}=q.getState();k&&(q.setState({nodesSelectionActive:!1}),w.selected&&ce?(Me({nodes:[],edges:[w]}),L.current?.blur()):Se([t])),i&&i(Ce,w)},ae=s?Ce=>{s(Ce,{...w})}:void 0,se=a?Ce=>{a(Ce,{...w})}:void 0,fe=o?Ce=>{o(Ce,{...w})}:void 0,Ee=l?Ce=>{l(Ce,{...w})}:void 0,Be=c?Ce=>{c(Ce,{...w})}:void 0,_e=Ce=>{if(!E&&sce.includes(Ce.key)&&k){const{unselectNodesAndEdges:Se,addSelectedEdges:Me}=q.getState();Ce.key==="Escape"?(L.current?.blur(),Se({edges:[w]})):Me([t])}};return d.jsx("svg",{style:{zIndex:O},children:d.jsxs("g",{className:Fo(["react-flow__edge",`react-flow__edge-${D}`,w.className,A,{selected:w.selected,animated:w.animated,inactive:!k&&!i,updating:F,selectable:k}]),onClick:oe,onDoubleClick:ae,onContextMenu:se,onMouseEnter:fe,onMouseMove:Ee,onMouseLeave:Be,onKeyDown:M?_e:void 0,tabIndex:M?0:void 0,role:w.ariaRole??(M?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":w.ariaLabel===null?void 0:w.ariaLabel||`Edge from ${w.source} to ${w.target}`,"aria-describedby":M?`${Fce}-${m}`:void 0,ref:L,...w.domAttributes,children:[!G&&d.jsx(T,{id:t,source:w.source,target:w.target,type:w.type,selected:w.selected,animated:w.animated,selectable:k,deletable:w.deletable??!0,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,sourceX:H,sourceY:K,targetX:X,targetY:re,sourcePosition:J,targetPosition:Z,data:w.data,style:w.style,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerStart:ee,markerEnd:te,pathOptions:"pathOptions"in w?w.pathOptions:void 0,interactionWidth:w.interactionWidth}),R&&d.jsx(BKe,{edge:w,isReconnectable:R,reconnectRadius:u,onReconnect:h,onReconnectStart:f,onReconnectEnd:p,sourceX:H,sourceY:K,targetX:X,targetY:re,sourcePosition:J,targetPosition:Z,setUpdateHover:z,setReconnecting:V})]})})}var MKe=C.memo(TKe);const DKe=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function cue({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:a,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:u,reconnectRadius:h,onEdgeDoubleClick:f,onReconnectStart:p,onReconnectEnd:m,disableKeyboardA11y:v}){const{edgesFocusable:A,edgesReconnectable:x,elementsSelectable:E,onError:w}=Pi(DKe,fa),B=gKe(e);return d.jsxs("div",{className:"react-flow__edges",children:[d.jsx(xKe,{defaultColor:t,rfId:n}),B.map(D=>d.jsx(MKe,{id:D,edgesFocusable:A,edgesReconnectable:x,elementsSelectable:E,noPanClassName:i,onReconnect:s,onContextMenu:a,onMouseEnter:o,onMouseMove:l,onMouseLeave:c,onClick:u,reconnectRadius:h,onDoubleClick:f,onReconnectStart:p,onReconnectEnd:m,rfId:n,onError:w,edgeTypes:r,disableKeyboardA11y:v},D))]})}cue.displayName="EdgeRenderer";const RKe=C.memo(cue),PKe=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function kKe({children:t}){const e=Pi(PKe);return d.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function NKe(t){const e=j4(),n=C.useRef(!1);C.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const LKe=t=>t.panZoom?.syncViewport;function FKe(t){const e=Pi(LKe),n=ga();return C.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function jKe(t){return t.connection.inProgress?{...t.connection,to:VI(t.connection.to,t.transform)}:{...t.connection}}function OKe(t){return jKe}function zKe(t){const e=OKe();return Pi(e,fa)}const $Ke=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function QKe({containerStyle:t,style:e,type:n,component:r}){const{nodesConnectable:i,width:s,height:a,isValid:o,inProgress:l}=Pi($Ke,fa);return!(s&&i&&l)?null:d.jsx("svg",{style:t,width:s,height:a,className:"react-flow__connectionline react-flow__container",children:d.jsx("g",{className:Fo(["react-flow__connection",lce(o)]),children:d.jsx(uue,{style:e,type:n,CustomComponent:r,isValid:o})})})}const uue=({style:t,type:e=Ay.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:a,fromHandle:o,fromPosition:l,to:c,toNode:u,toHandle:h,toPosition:f,pointer:p}=zKe();if(!i)return;if(n)return d.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:a,fromHandle:o,fromX:s.x,fromY:s.y,toX:c.x,toY:c.y,fromPosition:l,toPosition:f,connectionStatus:lce(r),toNode:u,toHandle:h,pointer:p});let m="";const v={sourceX:s.x,sourceY:s.y,sourcePosition:l,targetX:c.x,targetY:c.y,targetPosition:f};switch(e){case Ay.Bezier:[m]=xce(v);break;case Ay.SimpleBezier:[m]=Xce(v);break;case Ay.Step:[m]=N6({...v,borderRadius:0});break;case Ay.SmoothStep:[m]=N6(v);break;default:[m]=Cce(v)}return d.jsx("path",{d:m,fill:"none",className:"react-flow__connection-path",style:t})};uue.displayName="ConnectionLine";const UKe={};function VU(t=UKe){C.useRef(t),ga(),C.useEffect(()=>{},[t])}function HKe(){ga(),C.useRef(!1),C.useEffect(()=>{},[])}function due({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:a,onNodeMouseEnter:o,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:u,onSelectionContextMenu:h,onSelectionStart:f,onSelectionEnd:p,connectionLineType:m,connectionLineStyle:v,connectionLineComponent:A,connectionLineContainerStyle:x,selectionKeyCode:E,selectionOnDrag:w,selectionMode:B,multiSelectionKeyCode:D,panActivationKeyCode:T,zoomActivationKeyCode:M,deleteKeyCode:R,onlyRenderVisibleElements:k,elementsSelectable:L,defaultViewport:F,translateExtent:z,minZoom:G,maxZoom:V,preventScrolling:q,defaultMarkerColor:O,zoomOnScroll:H,zoomOnPinch:K,panOnScroll:X,panOnScrollSpeed:re,panOnScrollMode:J,zoomOnDoubleClick:Z,panOnDrag:ee,onPaneClick:te,onPaneMouseEnter:oe,onPaneMouseMove:ae,onPaneMouseLeave:se,onPaneScroll:fe,onPaneContextMenu:Ee,paneClickDistance:Be,nodeClickDistance:_e,onEdgeContextMenu:Ce,onEdgeMouseEnter:Se,onEdgeMouseMove:Me,onEdgeMouseLeave:ce,reconnectRadius:$e,onReconnect:qe,onReconnectStart:ft,onReconnectEnd:Ie,noDragClassName:ht,noWheelClassName:Ue,noPanClassName:xt,disableKeyboardA11y:ve,nodeExtent:ue,rfId:ke,viewport:He,onViewportChange:Qe}){return VU(t),VU(e),HKe(),NKe(n),FKe(He),d.jsx(sKe,{onPaneClick:te,onPaneMouseEnter:oe,onPaneMouseMove:ae,onPaneMouseLeave:se,onPaneContextMenu:Ee,onPaneScroll:fe,paneClickDistance:Be,deleteKeyCode:R,selectionKeyCode:E,selectionOnDrag:w,selectionMode:B,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:D,panActivationKeyCode:T,zoomActivationKeyCode:M,elementsSelectable:L,zoomOnScroll:H,zoomOnPinch:K,zoomOnDoubleClick:Z,panOnScroll:X,panOnScrollSpeed:re,panOnScrollMode:J,panOnDrag:ee,defaultViewport:F,translateExtent:z,minZoom:G,maxZoom:V,onSelectionContextMenu:h,preventScrolling:q,noDragClassName:ht,noWheelClassName:Ue,noPanClassName:xt,disableKeyboardA11y:ve,onViewportChange:Qe,isControlledViewport:!!He,children:d.jsxs(kKe,{children:[d.jsx(RKe,{edgeTypes:e,onEdgeClick:i,onEdgeDoubleClick:a,onReconnect:qe,onReconnectStart:ft,onReconnectEnd:Ie,onlyRenderVisibleElements:k,onEdgeContextMenu:Ce,onEdgeMouseEnter:Se,onEdgeMouseMove:Me,onEdgeMouseLeave:ce,reconnectRadius:$e,defaultMarkerColor:O,noPanClassName:xt,disableKeyboardA11y:ve,rfId:ke}),d.jsx(QKe,{style:v,type:m,component:A,containerStyle:x}),d.jsx("div",{className:"react-flow__edgelabel-renderer"}),d.jsx(pKe,{nodeTypes:t,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:o,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:u,nodeClickDistance:_e,onlyRenderVisibleElements:k,noPanClassName:xt,noDragClassName:ht,disableKeyboardA11y:ve,nodeExtent:ue,rfId:ke}),d.jsx("div",{className:"react-flow__viewport-portal"})]})})}due.displayName="GraphView";const GKe=C.memo(due),WU=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:a,fitViewOptions:o,minZoom:l=.5,maxZoom:c=2,nodeOrigin:u,nodeExtent:h,zIndexMode:f="basic"}={})=>{const p=new Map,m=new Map,v=new Map,A=new Map,x=r??e??[],E=n??t??[],w=u??[0,0],B=h??Y_;wce(v,A,x);const D=F6(E,p,m,{nodeOrigin:w,nodeExtent:B,zIndexMode:f});let T=[0,0,1];if(a&&i&&s){const M=HI(p,{filter:F=>!!((F.width||F.initialWidth)&&(F.height||F.initialHeight))}),{x:R,y:k,zoom:L}=Pj(M,i,s,l,c,o?.padding??.1);T=[R,k,L]}return{rfId:"1",width:i??0,height:s??0,transform:T,nodes:E,nodesInitialized:D,nodeLookup:p,parentLookup:m,edges:x,edgeLookup:A,connectionLookup:v,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:l,maxZoom:c,translateExtent:Y_,nodeExtent:B,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:vE.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:w,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:a??!1,fitViewOptions:o,fitViewResolver:null,connection:{...oce},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:lVe,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:ace,zIndexMode:f,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},VKe=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:a,fitViewOptions:o,minZoom:l,maxZoom:c,nodeOrigin:u,nodeExtent:h,zIndexMode:f})=>uWe((p,m)=>{async function v(){const{nodeLookup:A,panZoom:x,fitViewOptions:E,fitViewResolver:w,width:B,height:D,minZoom:T,maxZoom:M}=m();x&&(await aVe({nodes:A,width:B,height:D,panZoom:x,minZoom:T,maxZoom:M},E),w?.resolve(!0),p({fitViewResolver:null}))}return{...WU({nodes:t,edges:e,width:i,height:s,fitView:a,fitViewOptions:o,minZoom:l,maxZoom:c,nodeOrigin:u,nodeExtent:h,defaultNodes:n,defaultEdges:r,zIndexMode:f}),setNodes:A=>{const{nodeLookup:x,parentLookup:E,nodeOrigin:w,elevateNodesOnSelect:B,fitViewQueued:D,zIndexMode:T}=m(),M=F6(A,x,E,{nodeOrigin:w,nodeExtent:h,elevateNodesOnSelect:B,checkEquality:!0,zIndexMode:T});D&&M?(v(),p({nodes:A,nodesInitialized:M,fitViewQueued:!1,fitViewOptions:void 0})):p({nodes:A,nodesInitialized:M})},setEdges:A=>{const{connectionLookup:x,edgeLookup:E}=m();wce(x,E,A),p({edges:A})},setDefaultNodesAndEdges:(A,x)=>{if(A){const{setNodes:E}=m();E(A),p({hasDefaultNodes:!0})}if(x){const{setEdges:E}=m();E(x),p({hasDefaultEdges:!0})}},updateNodeInternals:A=>{const{triggerNodeChanges:x,nodeLookup:E,parentLookup:w,domNode:B,nodeOrigin:D,nodeExtent:T,debug:M,fitViewQueued:R,zIndexMode:k}=m(),{changes:L,updatedInternals:F}=MVe(A,E,w,B,D,T,k);F&&(_Ve(E,w,{nodeOrigin:D,nodeExtent:T,zIndexMode:k}),R?(v(),p({fitViewQueued:!1,fitViewOptions:void 0})):p({}),L?.length>0&&(M&&console.log("React Flow: trigger node changes",L),x?.(L)))},updateNodePositions:(A,x=!1)=>{const E=[];let w=[];const{nodeLookup:B,triggerNodeChanges:D,connection:T,updateConnection:M,onNodesChangeMiddlewareMap:R}=m();for(const[k,L]of A){const F=B.get(k),z=!!(F?.expandParent&&F?.parentId&&L?.position),G={id:k,type:"position",position:z?{x:Math.max(0,L.position.x),y:Math.max(0,L.position.y)}:L.position,dragging:x};if(F&&T.inProgress&&T.fromNode.id===F.id){const V=Rb(F,T.fromHandle,Qn.Left,!0);M({...T,from:V})}z&&F.parentId&&E.push({id:k,parentId:F.parentId,rect:{...L.internals.positionAbsolute,width:L.measured.width??0,height:L.measured.height??0}}),w.push(G)}if(E.length>0){const{parentLookup:k,nodeOrigin:L}=m(),F=Oj(E,B,k,L);w.push(...F)}for(const k of R.values())w=k(w);D(w)},triggerNodeChanges:A=>{const{onNodesChange:x,setNodes:E,nodes:w,hasDefaultNodes:B,debug:D}=m();if(A?.length){if(B){const T=zce(A,w);E(T)}D&&console.log("React Flow: trigger node changes",A),x?.(A)}},triggerEdgeChanges:A=>{const{onEdgesChange:x,setEdges:E,edges:w,hasDefaultEdges:B,debug:D}=m();if(A?.length){if(B){const T=$ce(A,w);E(T)}D&&console.log("React Flow: trigger edge changes",A),x?.(A)}},addSelectedNodes:A=>{const{multiSelectionActive:x,edgeLookup:E,nodeLookup:w,triggerNodeChanges:B,triggerEdgeChanges:D}=m();if(x){const T=A.map(M=>Dx(M,!0));B(T);return}B(P1(w,new Set([...A]),!0)),D(P1(E))},addSelectedEdges:A=>{const{multiSelectionActive:x,edgeLookup:E,nodeLookup:w,triggerNodeChanges:B,triggerEdgeChanges:D}=m();if(x){const T=A.map(M=>Dx(M,!0));D(T);return}D(P1(E,new Set([...A]))),B(P1(w,new Set,!0))},unselectNodesAndEdges:({nodes:A,edges:x}={})=>{const{edges:E,nodes:w,nodeLookup:B,triggerNodeChanges:D,triggerEdgeChanges:T}=m(),M=A||w,R=x||E,k=M.map(F=>{const z=B.get(F.id);return z&&(z.selected=!1),Dx(F.id,!1)}),L=R.map(F=>Dx(F.id,!1));D(k),T(L)},setMinZoom:A=>{const{panZoom:x,maxZoom:E}=m();x?.setScaleExtent([A,E]),p({minZoom:A})},setMaxZoom:A=>{const{panZoom:x,minZoom:E}=m();x?.setScaleExtent([E,A]),p({maxZoom:A})},setTranslateExtent:A=>{m().panZoom?.setTranslateExtent(A),p({translateExtent:A})},resetSelectedElements:()=>{const{edges:A,nodes:x,triggerNodeChanges:E,triggerEdgeChanges:w,elementsSelectable:B}=m();if(!B)return;const D=x.reduce((M,R)=>R.selected?[...M,Dx(R.id,!1)]:M,[]),T=A.reduce((M,R)=>R.selected?[...M,Dx(R.id,!1)]:M,[]);E(D),w(T)},setNodeExtent:A=>{const{nodes:x,nodeLookup:E,parentLookup:w,nodeOrigin:B,elevateNodesOnSelect:D,nodeExtent:T,zIndexMode:M}=m();A[0][0]===T[0][0]&&A[0][1]===T[0][1]&&A[1][0]===T[1][0]&&A[1][1]===T[1][1]||(F6(x,E,w,{nodeOrigin:B,nodeExtent:A,elevateNodesOnSelect:D,checkEquality:!1,zIndexMode:M}),p({nodeExtent:A}))},panBy:A=>{const{transform:x,width:E,height:w,panZoom:B,translateExtent:D}=m();return DVe({delta:A,panZoom:B,transform:x,translateExtent:D,width:E,height:w})},setCenter:async(A,x,E)=>{const{width:w,height:B,maxZoom:D,panZoom:T}=m();if(!T)return Promise.resolve(!1);const M=typeof E?.zoom<"u"?E.zoom:D;return await T.setViewport({x:w/2-A*M,y:B/2-x*M,zoom:M},{duration:E?.duration,ease:E?.ease,interpolate:E?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{p({connection:{...oce}})},updateConnection:A=>{p({connection:A})},reset:()=>p({...WU()})}},Object.is);function hue({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,initialMinZoom:a,initialMaxZoom:o,initialFitViewOptions:l,fitView:c,nodeOrigin:u,nodeExtent:h,zIndexMode:f,children:p}){const[m]=C.useState(()=>VKe({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:c,minZoom:a,maxZoom:o,fitViewOptions:l,nodeOrigin:u,nodeExtent:h,zIndexMode:f}));return d.jsx(dWe,{value:m,children:d.jsx(kWe,{children:p})})}function WKe({children:t,nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:a,fitView:o,fitViewOptions:l,minZoom:c,maxZoom:u,nodeOrigin:h,nodeExtent:f,zIndexMode:p}){return C.useContext(L4)?d.jsx(d.Fragment,{children:t}):d.jsx(hue,{initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:a,fitView:o,initialFitViewOptions:l,initialMinZoom:c,initialMaxZoom:u,nodeOrigin:h,nodeExtent:f,zIndexMode:p,children:t})}const KKe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function qKe({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:a,onNodeClick:o,onEdgeClick:l,onInit:c,onMove:u,onMoveStart:h,onMoveEnd:f,onConnect:p,onConnectStart:m,onConnectEnd:v,onClickConnectStart:A,onClickConnectEnd:x,onNodeMouseEnter:E,onNodeMouseMove:w,onNodeMouseLeave:B,onNodeContextMenu:D,onNodeDoubleClick:T,onNodeDragStart:M,onNodeDrag:R,onNodeDragStop:k,onNodesDelete:L,onEdgesDelete:F,onDelete:z,onSelectionChange:G,onSelectionDragStart:V,onSelectionDrag:q,onSelectionDragStop:O,onSelectionContextMenu:H,onSelectionStart:K,onSelectionEnd:X,onBeforeDelete:re,connectionMode:J,connectionLineType:Z=Ay.Bezier,connectionLineStyle:ee,connectionLineComponent:te,connectionLineContainerStyle:oe,deleteKeyCode:ae="Backspace",selectionKeyCode:se="Shift",selectionOnDrag:fe=!1,selectionMode:Ee=X_.Full,panActivationKeyCode:Be="Space",multiSelectionKeyCode:_e=Z_()?"Meta":"Control",zoomActivationKeyCode:Ce=Z_()?"Meta":"Control",snapToGrid:Se,snapGrid:Me,onlyRenderVisibleElements:ce=!1,selectNodesOnDrag:$e,nodesDraggable:qe,autoPanOnNodeFocus:ft,nodesConnectable:Ie,nodesFocusable:ht,nodeOrigin:Ue=jce,edgesFocusable:xt,edgesReconnectable:ve,elementsSelectable:ue=!0,defaultViewport:ke=SWe,minZoom:He=.5,maxZoom:Qe=2,translateExtent:Ke=Y_,preventScrolling:jt=!0,nodeExtent:St,defaultMarkerColor:Zt="#b1b1b7",zoomOnScroll:Bt=!0,zoomOnPinch:at=!0,panOnScroll:pt=!1,panOnScrollSpeed:Vt=.5,panOnScrollMode:qt=ub.Free,zoomOnDoubleClick:Wt=!0,panOnDrag:gn=!0,onPaneClick:Ne,onPaneMouseEnter:Ht,onPaneMouseMove:Qt,onPaneMouseLeave:$t,onPaneScroll:It,onPaneContextMenu:Ct,paneClickDistance:ln=1,nodeClickDistance:lt=0,children:_t,onReconnect:Pt,onReconnectStart:zt,onReconnectEnd:Wn,onEdgeContextMenu:In,onEdgeDoubleClick:tn,onEdgeMouseEnter:cn,onEdgeMouseMove:Zn,onEdgeMouseLeave:pr,reconnectRadius:zr=10,onNodesChange:qi,onEdgesChange:Nr,noDragClassName:Yn="nodrag",noWheelClassName:Ii="nowheel",noPanClassName:bs="nopan",fitView:oo,fitViewOptions:Nc,connectOnClick:Ad,attributionPosition:Au,proOptions:Tl,defaultEdgeOptions:ec,elevateNodesOnSelect:Qi=!0,elevateEdgesOnSelect:me=!1,disableKeyboardA11y:Ge=!1,autoPanOnConnect:rt,autoPanOnNodeDrag:nt,autoPanSpeed:We,connectionRadius:Kt,isValidConnection:nn,onError:un,style:dn,id:Bn,nodeDragThreshold:En,connectionDragThreshold:Sn,viewport:ir,onViewportChange:he,width:pe,height:Te,colorMode:Le="light",debug:Fe,onScroll:ct,ariaLabelConfig:vt,zIndexMode:Tt="basic",...Xt},Dt){const rn=Bn||"1",sn=BWe(Le),Un=C.useCallback(gr=>{gr.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),ct?.(gr)},[ct]);return d.jsx("div",{"data-testid":"rf__wrapper",...Xt,onScroll:Un,style:{...dn,...KKe},ref:Dt,className:Fo(["react-flow",i,sn]),id:Bn,role:"application",children:d.jsxs(WKe,{nodes:t,edges:e,width:pe,height:Te,fitView:oo,fitViewOptions:Nc,minZoom:He,maxZoom:Qe,nodeOrigin:Ue,nodeExtent:St,zIndexMode:Tt,children:[d.jsx(GKe,{onInit:c,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:E,onNodeMouseMove:w,onNodeMouseLeave:B,onNodeContextMenu:D,onNodeDoubleClick:T,nodeTypes:s,edgeTypes:a,connectionLineType:Z,connectionLineStyle:ee,connectionLineComponent:te,connectionLineContainerStyle:oe,selectionKeyCode:se,selectionOnDrag:fe,selectionMode:Ee,deleteKeyCode:ae,multiSelectionKeyCode:_e,panActivationKeyCode:Be,zoomActivationKeyCode:Ce,onlyRenderVisibleElements:ce,defaultViewport:ke,translateExtent:Ke,minZoom:He,maxZoom:Qe,preventScrolling:jt,zoomOnScroll:Bt,zoomOnPinch:at,zoomOnDoubleClick:Wt,panOnScroll:pt,panOnScrollSpeed:Vt,panOnScrollMode:qt,panOnDrag:gn,onPaneClick:Ne,onPaneMouseEnter:Ht,onPaneMouseMove:Qt,onPaneMouseLeave:$t,onPaneScroll:It,onPaneContextMenu:Ct,paneClickDistance:ln,nodeClickDistance:lt,onSelectionContextMenu:H,onSelectionStart:K,onSelectionEnd:X,onReconnect:Pt,onReconnectStart:zt,onReconnectEnd:Wn,onEdgeContextMenu:In,onEdgeDoubleClick:tn,onEdgeMouseEnter:cn,onEdgeMouseMove:Zn,onEdgeMouseLeave:pr,reconnectRadius:zr,defaultMarkerColor:Zt,noDragClassName:Yn,noWheelClassName:Ii,noPanClassName:bs,rfId:rn,disableKeyboardA11y:Ge,nodeExtent:St,viewport:ir,onViewportChange:he}),d.jsx(IWe,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:m,onConnectEnd:v,onClickConnectStart:A,onClickConnectEnd:x,nodesDraggable:qe,autoPanOnNodeFocus:ft,nodesConnectable:Ie,nodesFocusable:ht,edgesFocusable:xt,edgesReconnectable:ve,elementsSelectable:ue,elevateNodesOnSelect:Qi,elevateEdgesOnSelect:me,minZoom:He,maxZoom:Qe,nodeExtent:St,onNodesChange:qi,onEdgesChange:Nr,snapToGrid:Se,snapGrid:Me,connectionMode:J,translateExtent:Ke,connectOnClick:Ad,defaultEdgeOptions:ec,fitView:oo,fitViewOptions:Nc,onNodesDelete:L,onEdgesDelete:F,onDelete:z,onNodeDragStart:M,onNodeDrag:R,onNodeDragStop:k,onSelectionDrag:q,onSelectionDragStart:V,onSelectionDragStop:O,onMove:u,onMoveStart:h,onMoveEnd:f,noPanClassName:bs,nodeOrigin:Ue,rfId:rn,autoPanOnConnect:rt,autoPanOnNodeDrag:nt,autoPanSpeed:We,onError:un,connectionRadius:Kt,isValidConnection:nn,selectNodesOnDrag:$e,nodeDragThreshold:En,connectionDragThreshold:Sn,onBeforeDelete:re,debug:Fe,ariaLabelConfig:vt,zIndexMode:Tt}),d.jsx(EWe,{onSelectionChange:G}),_t,d.jsx(yWe,{proOptions:Tl,position:Au}),d.jsx(AWe,{rfId:rn,disableKeyboardA11y:Ge})]})})}var YKe=Qce(qKe);function XKe({dimensions:t,lineWidth:e,variant:n,className:r}){return d.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Fo(["react-flow__background-pattern",n,r])})}function JKe({radius:t,className:e}){return d.jsx("circle",{cx:t,cy:t,r:t,className:Fo(["react-flow__background-pattern","dots",e])})}var S0;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(S0||(S0={}));const ZKe={[S0.Dots]:1,[S0.Lines]:1,[S0.Cross]:6},eqe=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function fue({id:t,variant:e=S0.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:a,bgColor:o,style:l,className:c,patternClassName:u}){const h=C.useRef(null),{transform:f,patternId:p}=Pi(eqe,fa),m=r||ZKe[e],v=e===S0.Dots,A=e===S0.Cross,x=Array.isArray(n)?n:[n,n],E=[x[0]*f[2]||1,x[1]*f[2]||1],w=m*f[2],B=Array.isArray(s)?s:[s,s],D=A?[w,w]:E,T=[B[0]*f[2]||1+D[0]/2,B[1]*f[2]||1+D[1]/2],M=`${p}${t||""}`;return d.jsxs("svg",{className:Fo(["react-flow__background",c]),style:{...l,...O4,"--xy-background-color-props":o,"--xy-background-pattern-color-props":a},ref:h,"data-testid":"rf__background",children:[d.jsx("pattern",{id:M,x:f[0]%E[0],y:f[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${T[0]},-${T[1]})`,children:v?d.jsx(JKe,{radius:w/2,className:u}):d.jsx(XKe,{dimensions:D,lineWidth:i,variant:e,className:u})}),d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${M})`})]})}fue.displayName="Background";const tqe=C.memo(fue);function nqe(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:d.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function rqe(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:d.jsx("path",{d:"M0 0h32v4.2H0z"})})}function iqe(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:d.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function sqe(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function aqe(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function c3({children:t,className:e,...n}){return d.jsx("button",{type:"button",className:Fo(["react-flow__controls-button",e]),...n,children:t})}const oqe=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function pue({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:a,onFitView:o,onInteractiveChange:l,className:c,children:u,position:h="bottom-left",orientation:f="vertical","aria-label":p}){const m=ga(),{isInteractive:v,minZoomReached:A,maxZoomReached:x,ariaLabelConfig:E}=Pi(oqe,fa),{zoomIn:w,zoomOut:B,fitView:D}=j4(),T=()=>{w(),s?.()},M=()=>{B(),a?.()},R=()=>{D(i),o?.()},k=()=>{m.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),l?.(!v)},L=f==="horizontal"?"horizontal":"vertical";return d.jsxs(F4,{className:Fo(["react-flow__controls",L,c]),position:h,style:t,"data-testid":"rf__controls","aria-label":p??E["controls.ariaLabel"],children:[e&&d.jsxs(d.Fragment,{children:[d.jsx(c3,{onClick:T,className:"react-flow__controls-zoomin",title:E["controls.zoomIn.ariaLabel"],"aria-label":E["controls.zoomIn.ariaLabel"],disabled:x,children:d.jsx(nqe,{})}),d.jsx(c3,{onClick:M,className:"react-flow__controls-zoomout",title:E["controls.zoomOut.ariaLabel"],"aria-label":E["controls.zoomOut.ariaLabel"],disabled:A,children:d.jsx(rqe,{})})]}),n&&d.jsx(c3,{className:"react-flow__controls-fitview",onClick:R,title:E["controls.fitView.ariaLabel"],"aria-label":E["controls.fitView.ariaLabel"],children:d.jsx(iqe,{})}),r&&d.jsx(c3,{className:"react-flow__controls-interactive",onClick:k,title:E["controls.interactive.ariaLabel"],"aria-label":E["controls.interactive.ariaLabel"],children:v?d.jsx(aqe,{}):d.jsx(sqe,{})}),u]})}pue.displayName="Controls";const lqe=C.memo(pue);function cqe({id:t,x:e,y:n,width:r,height:i,style:s,color:a,strokeColor:o,strokeWidth:l,className:c,borderRadius:u,shapeRendering:h,selected:f,onClick:p}){const{background:m,backgroundColor:v}=s||{},A=a||m||v;return d.jsx("rect",{className:Fo(["react-flow__minimap-node",{selected:f},c]),x:e,y:n,rx:u,ry:u,width:r,height:i,style:{fill:A,stroke:o,strokeWidth:l},shapeRendering:h,onClick:p?x=>p(x,t):void 0})}const uqe=C.memo(cqe),dqe=t=>t.nodes.map(e=>e.id),jP=t=>t instanceof Function?t:()=>t;function hqe({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=uqe,onClick:a}){const o=Pi(dqe,fa),l=jP(e),c=jP(t),u=jP(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return d.jsx(d.Fragment,{children:o.map(f=>d.jsx(pqe,{id:f,nodeColorFunc:l,nodeStrokeColorFunc:c,nodeClassNameFunc:u,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:a,shapeRendering:h},f))})}function fqe({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:a,NodeComponent:o,onClick:l}){const{node:c,x:u,y:h,width:f,height:p}=Pi(m=>{const{internals:v}=m.nodeLookup.get(t),A=v.userNode,{x,y:E}=v.positionAbsolute,{width:w,height:B}=H0(A);return{node:A,x,y:E,width:w,height:B}},fa);return!c||c.hidden||!pce(c)?null:d.jsx(o,{x:u,y:h,width:f,height:p,style:c.style,selected:!!c.selected,className:r(c),color:e(c),borderRadius:i,strokeColor:n(c),strokeWidth:s,shapeRendering:a,onClick:l,id:c.id})}const pqe=C.memo(fqe);var gqe=C.memo(hqe);const mqe=200,Aqe=150,yqe=t=>!t.hidden,vqe=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?fce(HI(t.nodeLookup,{filter:yqe}),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},xqe="react-flow__minimap-desc";function gue({style:t,className:e,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:a,nodeComponent:o,bgColor:l,maskColor:c,maskStrokeColor:u,maskStrokeWidth:h,position:f="bottom-right",onClick:p,onNodeClick:m,pannable:v=!1,zoomable:A=!1,ariaLabel:x,inversePan:E,zoomStep:w=1,offsetScale:B=5}){const D=ga(),T=C.useRef(null),{boundingRect:M,viewBB:R,rfId:k,panZoom:L,translateExtent:F,flowWidth:z,flowHeight:G,ariaLabelConfig:V}=Pi(vqe,fa),q=t?.width??mqe,O=t?.height??Aqe,H=M.width/q,K=M.height/O,X=Math.max(H,K),re=X*q,J=X*O,Z=B*X,ee=M.x-(re-M.width)/2-Z,te=M.y-(J-M.height)/2-Z,oe=re+Z*2,ae=J+Z*2,se=`${xqe}-${k}`,fe=C.useRef(0),Ee=C.useRef();fe.current=X,C.useEffect(()=>{if(T.current&&L)return Ee.current=zVe({domNode:T.current,panZoom:L,getTransform:()=>D.getState().transform,getViewScale:()=>fe.current}),()=>{Ee.current?.destroy()}},[L]),C.useEffect(()=>{Ee.current?.update({translateExtent:F,width:z,height:G,inversePan:E,pannable:v,zoomStep:w,zoomable:A})},[v,A,E,w,F,z,G]);const Be=p?Se=>{const[Me,ce]=Ee.current?.pointer(Se)||[0,0];p(Se,{x:Me,y:ce})}:void 0,_e=m?C.useCallback((Se,Me)=>{const ce=D.getState().nodeLookup.get(Me).internals.userNode;m(Se,ce)},[]):void 0,Ce=x??V["minimap.ariaLabel"];return d.jsx(F4,{position:f,style:{...t,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-width-props":typeof h=="number"?h*X:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof a=="number"?a:void 0},className:Fo(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:d.jsxs("svg",{width:q,height:O,viewBox:`${ee} ${te} ${oe} ${ae}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":se,ref:T,onClick:Be,children:[Ce&&d.jsx("title",{id:se,children:Ce}),d.jsx(gqe,{onClick:_e,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:a,nodeComponent:o}),d.jsx("path",{className:"react-flow__minimap-mask",d:`M${ee-Z},${te-Z}h${oe+Z*2}v${ae+Z*2}h${-oe-Z*2}z
        M${R.x},${R.y}h${R.width}v${R.height}h${-R.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}gue.displayName="MiniMap";const bqe=C.memo(gue),Cqe=t=>e=>t?`${Math.max(1/e.transform[2],1)}`:void 0,Eqe={[SE.Line]:"right",[SE.Handle]:"bottom-right"};function Sqe({nodeId:t,position:e,variant:n=SE.Handle,className:r,style:i=void 0,children:s,color:a,minWidth:o=10,minHeight:l=10,maxWidth:c=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:h=!1,resizeDirection:f,autoScale:p=!0,shouldResize:m,onResizeStart:v,onResize:A,onResizeEnd:x}){const E=Vce(),w=typeof t=="string"?t:E,B=ga(),D=C.useRef(null),T=n===SE.Handle,M=Pi(C.useCallback(Cqe(T&&p),[T,p]),fa),R=C.useRef(null),k=e??Eqe[n];C.useEffect(()=>{if(!(!D.current||!w))return R.current||(R.current=eWe({domNode:D.current,nodeId:w,getStoreItems:()=>{const{nodeLookup:F,transform:z,snapGrid:G,snapToGrid:V,nodeOrigin:q,domNode:O}=B.getState();return{nodeLookup:F,transform:z,snapGrid:G,snapToGrid:V,nodeOrigin:q,paneDomNode:O}},onChange:(F,z)=>{const{triggerNodeChanges:G,nodeLookup:V,parentLookup:q,nodeOrigin:O}=B.getState(),H=[],K={x:F.x,y:F.y},X=V.get(w);if(X&&X.expandParent&&X.parentId){const re=X.origin??O,J=F.width??X.measured.width??0,Z=F.height??X.measured.height??0,ee={id:X.id,parentId:X.parentId,rect:{width:J,height:Z,...gce({x:F.x??X.position.x,y:F.y??X.position.y},{width:J,height:Z},X.parentId,V,re)}},te=Oj([ee],V,q,O);H.push(...te),K.x=F.x?Math.max(re[0]*J,F.x):void 0,K.y=F.y?Math.max(re[1]*Z,F.y):void 0}if(K.x!==void 0&&K.y!==void 0){const re={id:w,type:"position",position:{...K}};H.push(re)}if(F.width!==void 0&&F.height!==void 0){const J={id:w,type:"dimensions",resizing:!0,setAttributes:f?f==="horizontal"?"width":"height":!0,dimensions:{width:F.width,height:F.height}};H.push(J)}for(const re of z){const J={...re,type:"position"};H.push(J)}G(H)},onEnd:({width:F,height:z})=>{const G={id:w,type:"dimensions",resizing:!1,dimensions:{width:F,height:z}};B.getState().triggerNodeChanges([G])}})),R.current.update({controlPosition:k,boundaries:{minWidth:o,minHeight:l,maxWidth:c,maxHeight:u},keepAspectRatio:h,resizeDirection:f,onResizeStart:v,onResize:A,onResizeEnd:x,shouldResize:m}),()=>{R.current?.destroy()}},[k,o,l,c,u,h,v,A,x,m]);const L=k.split("-");return d.jsx("div",{className:Fo(["react-flow__resize-control","nodrag",...L,n,r]),ref:D,style:{...i,scale:M,...a&&{[T?"backgroundColor":"borderColor"]:a}},children:s})}C.memo(Sqe);var OP,KU;function $j(){if(KU)return OP;KU=1;var t="\0",e="\0",n="";class r{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(u){u&&(this._isDirected=Object.hasOwn(u,"directed")?u.directed:!0,this._isMultigraph=Object.hasOwn(u,"multigraph")?u.multigraph:!1,this._isCompound=Object.hasOwn(u,"compound")?u.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[e]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(u){return this._label=u,this}graph(){return this._label}setDefaultNodeLabel(u){return this._defaultNodeLabelFn=u,typeof u!="function"&&(this._defaultNodeLabelFn=()=>u),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var u=this;return this.nodes().filter(h=>Object.keys(u._in[h]).length===0)}sinks(){var u=this;return this.nodes().filter(h=>Object.keys(u._out[h]).length===0)}setNodes(u,h){var f=arguments,p=this;return u.forEach(function(m){f.length>1?p.setNode(m,h):p.setNode(m)}),this}setNode(u,h){return Object.hasOwn(this._nodes,u)?(arguments.length>1&&(this._nodes[u]=h),this):(this._nodes[u]=arguments.length>1?h:this._defaultNodeLabelFn(u),this._isCompound&&(this._parent[u]=e,this._children[u]={},this._children[e][u]=!0),this._in[u]={},this._preds[u]={},this._out[u]={},this._sucs[u]={},++this._nodeCount,this)}node(u){return this._nodes[u]}hasNode(u){return Object.hasOwn(this._nodes,u)}removeNode(u){var h=this;if(Object.hasOwn(this._nodes,u)){var f=p=>h.removeEdge(h._edgeObjs[p]);delete this._nodes[u],this._isCompound&&(this._removeFromParentsChildList(u),delete this._parent[u],this.children(u).forEach(function(p){h.setParent(p)}),delete this._children[u]),Object.keys(this._in[u]).forEach(f),delete this._in[u],delete this._preds[u],Object.keys(this._out[u]).forEach(f),delete this._out[u],delete this._sucs[u],--this._nodeCount}return this}setParent(u,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(h===void 0)h=e;else{h+="";for(var f=h;f!==void 0;f=this.parent(f))if(f===u)throw new Error("Setting "+h+" as parent of "+u+" would create a cycle");this.setNode(h)}return this.setNode(u),this._removeFromParentsChildList(u),this._parent[u]=h,this._children[h][u]=!0,this}_removeFromParentsChildList(u){delete this._children[this._parent[u]][u]}parent(u){if(this._isCompound){var h=this._parent[u];if(h!==e)return h}}children(u=e){if(this._isCompound){var h=this._children[u];if(h)return Object.keys(h)}else{if(u===e)return this.nodes();if(this.hasNode(u))return[]}}predecessors(u){var h=this._preds[u];if(h)return Object.keys(h)}successors(u){var h=this._sucs[u];if(h)return Object.keys(h)}neighbors(u){var h=this.predecessors(u);if(h){const p=new Set(h);for(var f of this.successors(u))p.add(f);return Array.from(p.values())}}isLeaf(u){var h;return this.isDirected()?h=this.successors(u):h=this.neighbors(u),h.length===0}filterNodes(u){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var f=this;Object.entries(this._nodes).forEach(function([v,A]){u(v)&&h.setNode(v,A)}),Object.values(this._edgeObjs).forEach(function(v){h.hasNode(v.v)&&h.hasNode(v.w)&&h.setEdge(v,f.edge(v))});var p={};function m(v){var A=f.parent(v);return A===void 0||h.hasNode(A)?(p[v]=A,A):A in p?p[A]:m(A)}return this._isCompound&&h.nodes().forEach(v=>h.setParent(v,m(v))),h}setDefaultEdgeLabel(u){return this._defaultEdgeLabelFn=u,typeof u!="function"&&(this._defaultEdgeLabelFn=()=>u),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(u,h){var f=this,p=arguments;return u.reduce(function(m,v){return p.length>1?f.setEdge(m,v,h):f.setEdge(m,v),v}),this}setEdge(){var u,h,f,p,m=!1,v=arguments[0];typeof v=="object"&&v!==null&&"v"in v?(u=v.v,h=v.w,f=v.name,arguments.length===2&&(p=arguments[1],m=!0)):(u=v,h=arguments[1],f=arguments[3],arguments.length>2&&(p=arguments[2],m=!0)),u=""+u,h=""+h,f!==void 0&&(f=""+f);var A=a(this._isDirected,u,h,f);if(Object.hasOwn(this._edgeLabels,A))return m&&(this._edgeLabels[A]=p),this;if(f!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(h),this._edgeLabels[A]=m?p:this._defaultEdgeLabelFn(u,h,f);var x=o(this._isDirected,u,h,f);return u=x.v,h=x.w,Object.freeze(x),this._edgeObjs[A]=x,i(this._preds[h],u),i(this._sucs[u],h),this._in[h][A]=x,this._out[u][A]=x,this._edgeCount++,this}edge(u,h,f){var p=arguments.length===1?l(this._isDirected,arguments[0]):a(this._isDirected,u,h,f);return this._edgeLabels[p]}edgeAsObj(){const u=this.edge(...arguments);return typeof u!="object"?{label:u}:u}hasEdge(u,h,f){var p=arguments.length===1?l(this._isDirected,arguments[0]):a(this._isDirected,u,h,f);return Object.hasOwn(this._edgeLabels,p)}removeEdge(u,h,f){var p=arguments.length===1?l(this._isDirected,arguments[0]):a(this._isDirected,u,h,f),m=this._edgeObjs[p];return m&&(u=m.v,h=m.w,delete this._edgeLabels[p],delete this._edgeObjs[p],s(this._preds[h],u),s(this._sucs[u],h),delete this._in[h][p],delete this._out[u][p],this._edgeCount--),this}inEdges(u,h){var f=this._in[u];if(f){var p=Object.values(f);return h?p.filter(m=>m.v===h):p}}outEdges(u,h){var f=this._out[u];if(f){var p=Object.values(f);return h?p.filter(m=>m.w===h):p}}nodeEdges(u,h){var f=this.inEdges(u,h);if(f)return f.concat(this.outEdges(u,h))}}function i(c,u){c[u]?c[u]++:c[u]=1}function s(c,u){--c[u]||delete c[u]}function a(c,u,h,f){var p=""+u,m=""+h;if(!c&&p>m){var v=p;p=m,m=v}return p+n+m+n+(f===void 0?t:f)}function o(c,u,h,f){var p=""+u,m=""+h;if(!c&&p>m){var v=p;p=m,m=v}var A={v:p,w:m};return f&&(A.name=f),A}function l(c,u){return a(c,u.v,u.w,u.name)}return OP=r,OP}var zP,qU;function wqe(){return qU||(qU=1,zP="2.2.4"),zP}var $P,YU;function _qe(){return YU||(YU=1,$P={Graph:$j(),version:wqe()}),$P}var QP,XU;function Iqe(){if(XU)return QP;XU=1;var t=$j();QP={write:e,read:i};function e(s){var a={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:r(s)};return s.graph()!==void 0&&(a.value=structuredClone(s.graph())),a}function n(s){return s.nodes().map(function(a){var o=s.node(a),l=s.parent(a),c={v:a};return o!==void 0&&(c.value=o),l!==void 0&&(c.parent=l),c})}function r(s){return s.edges().map(function(a){var o=s.edge(a),l={v:a.v,w:a.w};return a.name!==void 0&&(l.name=a.name),o!==void 0&&(l.value=o),l})}function i(s){var a=new t(s.options).setGraph(s.value);return s.nodes.forEach(function(o){a.setNode(o.v,o.value),o.parent&&a.setParent(o.v,o.parent)}),s.edges.forEach(function(o){a.setEdge({v:o.v,w:o.w,name:o.name},o.value)}),a}return QP}var UP,JU;function Bqe(){if(JU)return UP;JU=1,UP=t;function t(e){var n={},r=[],i;function s(a){Object.hasOwn(n,a)||(n[a]=!0,i.push(a),e.successors(a).forEach(s),e.predecessors(a).forEach(s))}return e.nodes().forEach(function(a){i=[],s(a),i.length&&r.push(i)}),r}return UP}var HP,ZU;function mue(){if(ZU)return HP;ZU=1;class t{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(n){return n.key})}has(n){return Object.hasOwn(this._keyIndices,n)}priority(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(n,r){var i=this._keyIndices;if(n=String(n),!Object.hasOwn(i,n)){var s=this._arr,a=s.length;return i[n]=a,s.push({key:n,priority:r}),this._decrease(a),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key}decrease(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)}_heapify(n){var r=this._arr,i=2*n,s=i+1,a=n;i<r.length&&(a=r[i].priority<r[a].priority?i:a,s<r.length&&(a=r[s].priority<r[a].priority?s:a),a!==n&&(this._swap(n,a),this._heapify(a)))}_decrease(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s}_swap(n,r){var i=this._arr,s=this._keyIndices,a=i[n],o=i[r];i[n]=o,i[r]=a,s[o.key]=n,s[a.key]=r}}return HP=t,HP}var GP,eH;function Aue(){if(eH)return GP;eH=1;var t=mue();GP=n;var e=()=>1;function n(i,s,a,o){return r(i,String(s),a||e,o||function(l){return i.outEdges(l)})}function r(i,s,a,o){var l={},c=new t,u,h,f=function(p){var m=p.v!==u?p.v:p.w,v=l[m],A=a(p),x=h.distance+A;if(A<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+p+" Weight: "+A);x<v.distance&&(v.distance=x,v.predecessor=u,c.decrease(m,x))};for(i.nodes().forEach(function(p){var m=p===s?0:Number.POSITIVE_INFINITY;l[p]={distance:m},c.add(p,m)});c.size()>0&&(u=c.removeMin(),h=l[u],h.distance!==Number.POSITIVE_INFINITY);)o(u).forEach(f);return l}return GP}var VP,tH;function Tqe(){if(tH)return VP;tH=1;var t=Aue();VP=e;function e(n,r,i){return n.nodes().reduce(function(s,a){return s[a]=t(n,a,r,i),s},{})}return VP}var WP,nH;function yue(){if(nH)return WP;nH=1,WP=t;function t(e){var n=0,r=[],i={},s=[];function a(o){var l=i[o]={onStack:!0,lowlink:n,index:n++};if(r.push(o),e.successors(o).forEach(function(h){Object.hasOwn(i,h)?i[h].onStack&&(l.lowlink=Math.min(l.lowlink,i[h].index)):(a(h),l.lowlink=Math.min(l.lowlink,i[h].lowlink))}),l.lowlink===l.index){var c=[],u;do u=r.pop(),i[u].onStack=!1,c.push(u);while(o!==u);s.push(c)}}return e.nodes().forEach(function(o){Object.hasOwn(i,o)||a(o)}),s}return WP}var KP,rH;function Mqe(){if(rH)return KP;rH=1;var t=yue();KP=e;function e(n){return t(n).filter(function(r){return r.length>1||r.length===1&&n.hasEdge(r[0],r[0])})}return KP}var qP,iH;function Dqe(){if(iH)return qP;iH=1,qP=e;var t=()=>1;function e(r,i,s){return n(r,i||t,s||function(a){return r.outEdges(a)})}function n(r,i,s){var a={},o=r.nodes();return o.forEach(function(l){a[l]={},a[l][l]={distance:0},o.forEach(function(c){l!==c&&(a[l][c]={distance:Number.POSITIVE_INFINITY})}),s(l).forEach(function(c){var u=c.v===l?c.w:c.v,h=i(c);a[l][u]={distance:h,predecessor:l}})}),o.forEach(function(l){var c=a[l];o.forEach(function(u){var h=a[u];o.forEach(function(f){var p=h[l],m=c[f],v=h[f],A=p.distance+m.distance;A<v.distance&&(v.distance=A,v.predecessor=m.predecessor)})})}),a}return qP}var YP,sH;function vue(){if(sH)return YP;sH=1;function t(n){var r={},i={},s=[];function a(o){if(Object.hasOwn(i,o))throw new e;Object.hasOwn(r,o)||(i[o]=!0,r[o]=!0,n.predecessors(o).forEach(a),delete i[o],s.push(o))}if(n.sinks().forEach(a),Object.keys(r).length!==n.nodeCount())throw new e;return s}class e extends Error{constructor(){super(...arguments)}}return YP=t,t.CycleException=e,YP}var XP,aH;function Rqe(){if(aH)return XP;aH=1;var t=vue();XP=e;function e(n){try{t(n)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}return XP}var JP,oH;function xue(){if(oH)return JP;oH=1,JP=t;function t(i,s,a){Array.isArray(s)||(s=[s]);var o=i.isDirected()?h=>i.successors(h):h=>i.neighbors(h),l=a==="post"?e:n,c=[],u={};return s.forEach(h=>{if(!i.hasNode(h))throw new Error("Graph does not have node: "+h);l(h,o,u,c)}),c}function e(i,s,a,o){for(var l=[[i,!1]];l.length>0;){var c=l.pop();c[1]?o.push(c[0]):Object.hasOwn(a,c[0])||(a[c[0]]=!0,l.push([c[0],!0]),r(s(c[0]),u=>l.push([u,!1])))}}function n(i,s,a,o){for(var l=[i];l.length>0;){var c=l.pop();Object.hasOwn(a,c)||(a[c]=!0,o.push(c),r(s(c),u=>l.push(u)))}}function r(i,s){for(var a=i.length;a--;)s(i[a],a,i);return i}return JP}var ZP,lH;function Pqe(){if(lH)return ZP;lH=1;var t=xue();ZP=e;function e(n,r){return t(n,r,"post")}return ZP}var ek,cH;function kqe(){if(cH)return ek;cH=1;var t=xue();ek=e;function e(n,r){return t(n,r,"pre")}return ek}var tk,uH;function Nqe(){if(uH)return tk;uH=1;var t=$j(),e=mue();tk=n;function n(r,i){var s=new t,a={},o=new e,l;function c(h){var f=h.v===l?h.w:h.v,p=o.priority(f);if(p!==void 0){var m=i(h);m<p&&(a[f]=l,o.decrease(f,m))}}if(r.nodeCount()===0)return s;r.nodes().forEach(function(h){o.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),o.decrease(r.nodes()[0],0);for(var u=!1;o.size()>0;){if(l=o.removeMin(),Object.hasOwn(a,l))s.setEdge(l,a[l]);else{if(u)throw new Error("Input graph is not connected: "+r);u=!0}r.nodeEdges(l).forEach(c)}return s}return tk}var nk,dH;function Lqe(){return dH||(dH=1,nk={components:Bqe(),dijkstra:Aue(),dijkstraAll:Tqe(),findCycles:Mqe(),floydWarshall:Dqe(),isAcyclic:Rqe(),postorder:Pqe(),preorder:kqe(),prim:Nqe(),tarjan:yue(),topsort:vue()}),nk}var rk,hH;function kp(){if(hH)return rk;hH=1;var t=_qe();return rk={Graph:t.Graph,json:Iqe(),alg:Lqe(),version:t.version},rk}var ik,fH;function Fqe(){if(fH)return ik;fH=1;class t{constructor(){let i={};i._next=i._prev=i,this._sentinel=i}dequeue(){let i=this._sentinel,s=i._prev;if(s!==i)return e(s),s}enqueue(i){let s=this._sentinel;i._prev&&i._next&&e(i),i._next=s._next,s._next._prev=i,s._next=i,i._prev=s}toString(){let i=[],s=this._sentinel,a=s._prev;for(;a!==s;)i.push(JSON.stringify(a,n)),a=a._prev;return"["+i.join(", ")+"]"}}function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return ik=t,ik}var sk,pH;function jqe(){if(pH)return sk;pH=1;let t=kp().Graph,e=Fqe();sk=r;let n=()=>1;function r(c,u){if(c.nodeCount()<=1)return[];let h=a(c,u||n);return i(h.graph,h.buckets,h.zeroIdx).flatMap(p=>c.outEdges(p.v,p.w))}function i(c,u,h){let f=[],p=u[u.length-1],m=u[0],v;for(;c.nodeCount();){for(;v=m.dequeue();)s(c,u,h,v);for(;v=p.dequeue();)s(c,u,h,v);if(c.nodeCount()){for(let A=u.length-2;A>0;--A)if(v=u[A].dequeue(),v){f=f.concat(s(c,u,h,v,!0));break}}}return f}function s(c,u,h,f,p){let m=p?[]:void 0;return c.inEdges(f.v).forEach(v=>{let A=c.edge(v),x=c.node(v.v);p&&m.push({v:v.v,w:v.w}),x.out-=A,o(u,h,x)}),c.outEdges(f.v).forEach(v=>{let A=c.edge(v),x=v.w,E=c.node(x);E.in-=A,o(u,h,E)}),c.removeNode(f.v),m}function a(c,u){let h=new t,f=0,p=0;c.nodes().forEach(A=>{h.setNode(A,{v:A,in:0,out:0})}),c.edges().forEach(A=>{let x=h.edge(A.v,A.w)||0,E=u(A),w=x+E;h.setEdge(A.v,A.w,w),p=Math.max(p,h.node(A.v).out+=E),f=Math.max(f,h.node(A.w).in+=E)});let m=l(p+f+3).map(()=>new e),v=f+1;return h.nodes().forEach(A=>{o(m,v,h.node(A))}),{graph:h,buckets:m,zeroIdx:v}}function o(c,u,h){h.out?h.in?c[h.out-h.in+u].enqueue(h):c[c.length-1].enqueue(h):c[0].enqueue(h)}function l(c){const u=[];for(let h=0;h<c;h++)u.push(h);return u}return sk}var ak,gH;function No(){if(gH)return ak;gH=1;let t=kp().Graph;ak={addBorderNode:u,addDummyNode:e,applyWithChunking:p,asNonCompoundGraph:r,buildLayerMatrix:o,intersectRect:a,mapValues:T,maxRank:m,normalizeRanks:l,notime:x,partition:v,pick:D,predecessorWeights:s,range:B,removeEmptyRanks:c,simplify:n,successorWeights:i,time:A,uniqueId:w,zipObject:M};function e(R,k,L,F){for(var z=F;R.hasNode(z);)z=w(F);return L.dummy=k,R.setNode(z,L),z}function n(R){let k=new t().setGraph(R.graph());return R.nodes().forEach(L=>k.setNode(L,R.node(L))),R.edges().forEach(L=>{let F=k.edge(L.v,L.w)||{weight:0,minlen:1},z=R.edge(L);k.setEdge(L.v,L.w,{weight:F.weight+z.weight,minlen:Math.max(F.minlen,z.minlen)})}),k}function r(R){let k=new t({multigraph:R.isMultigraph()}).setGraph(R.graph());return R.nodes().forEach(L=>{R.children(L).length||k.setNode(L,R.node(L))}),R.edges().forEach(L=>{k.setEdge(L,R.edge(L))}),k}function i(R){let k=R.nodes().map(L=>{let F={};return R.outEdges(L).forEach(z=>{F[z.w]=(F[z.w]||0)+R.edge(z).weight}),F});return M(R.nodes(),k)}function s(R){let k=R.nodes().map(L=>{let F={};return R.inEdges(L).forEach(z=>{F[z.v]=(F[z.v]||0)+R.edge(z).weight}),F});return M(R.nodes(),k)}function a(R,k){let L=R.x,F=R.y,z=k.x-L,G=k.y-F,V=R.width/2,q=R.height/2;if(!z&&!G)throw new Error("Not possible to find intersection inside of the rectangle");let O,H;return Math.abs(G)*V>Math.abs(z)*q?(G<0&&(q=-q),O=q*z/G,H=q):(z<0&&(V=-V),O=V,H=V*G/z),{x:L+O,y:F+H}}function o(R){let k=B(m(R)+1).map(()=>[]);return R.nodes().forEach(L=>{let F=R.node(L),z=F.rank;z!==void 0&&(k[z][F.order]=L)}),k}function l(R){let k=R.nodes().map(F=>{let z=R.node(F).rank;return z===void 0?Number.MAX_VALUE:z}),L=p(Math.min,k);R.nodes().forEach(F=>{let z=R.node(F);Object.hasOwn(z,"rank")&&(z.rank-=L)})}function c(R){let k=R.nodes().map(V=>R.node(V).rank),L=p(Math.min,k),F=[];R.nodes().forEach(V=>{let q=R.node(V).rank-L;F[q]||(F[q]=[]),F[q].push(V)});let z=0,G=R.graph().nodeRankFactor;Array.from(F).forEach((V,q)=>{V===void 0&&q%G!==0?--z:V!==void 0&&z&&V.forEach(O=>R.node(O).rank+=z)})}function u(R,k,L,F){let z={width:0,height:0};return arguments.length>=4&&(z.rank=L,z.order=F),e(R,"border",z,k)}function h(R,k=f){const L=[];for(let F=0;F<R.length;F+=k){const z=R.slice(F,F+k);L.push(z)}return L}const f=65535;function p(R,k){if(k.length>f){const L=h(k);return R.apply(null,L.map(F=>R.apply(null,F)))}else return R.apply(null,k)}function m(R){const L=R.nodes().map(F=>{let z=R.node(F).rank;return z===void 0?Number.MIN_VALUE:z});return p(Math.max,L)}function v(R,k){let L={lhs:[],rhs:[]};return R.forEach(F=>{k(F)?L.lhs.push(F):L.rhs.push(F)}),L}function A(R,k){let L=Date.now();try{return k()}finally{console.log(R+" time: "+(Date.now()-L)+"ms")}}function x(R,k){return k()}let E=0;function w(R){var k=++E;return R+(""+k)}function B(R,k,L=1){k==null&&(k=R,R=0);let F=G=>G<k;L<0&&(F=G=>k<G);const z=[];for(let G=R;F(G);G+=L)z.push(G);return z}function D(R,k){const L={};for(const F of k)R[F]!==void 0&&(L[F]=R[F]);return L}function T(R,k){let L=k;return typeof k=="string"&&(L=F=>F[k]),Object.entries(R).reduce((F,[z,G])=>(F[z]=L(G,z),F),{})}function M(R,k){return R.reduce((L,F,z)=>(L[F]=k[z],L),{})}return ak}var ok,mH;function Oqe(){if(mH)return ok;mH=1;let t=jqe(),e=No().uniqueId;ok={run:n,undo:i};function n(s){(s.graph().acyclicer==="greedy"?t(s,o(s)):r(s)).forEach(l=>{let c=s.edge(l);s.removeEdge(l),c.forwardName=l.name,c.reversed=!0,s.setEdge(l.w,l.v,c,e("rev"))});function o(l){return c=>l.edge(c).weight}}function r(s){let a=[],o={},l={};function c(u){Object.hasOwn(l,u)||(l[u]=!0,o[u]=!0,s.outEdges(u).forEach(h=>{Object.hasOwn(o,h.w)?a.push(h):c(h.w)}),delete o[u])}return s.nodes().forEach(c),a}function i(s){s.edges().forEach(a=>{let o=s.edge(a);if(o.reversed){s.removeEdge(a);let l=o.forwardName;delete o.reversed,delete o.forwardName,s.setEdge(a.w,a.v,o,l)}})}return ok}var lk,AH;function zqe(){if(AH)return lk;AH=1;let t=No();lk={run:e,undo:r};function e(i){i.graph().dummyChains=[],i.edges().forEach(s=>n(i,s))}function n(i,s){let a=s.v,o=i.node(a).rank,l=s.w,c=i.node(l).rank,u=s.name,h=i.edge(s),f=h.labelRank;if(c===o+1)return;i.removeEdge(s);let p,m,v;for(v=0,++o;o<c;++v,++o)h.points=[],m={width:0,height:0,edgeLabel:h,edgeObj:s,rank:o},p=t.addDummyNode(i,"edge",m,"_d"),o===f&&(m.width=h.width,m.height=h.height,m.dummy="edge-label",m.labelpos=h.labelpos),i.setEdge(a,p,{weight:h.weight},u),v===0&&i.graph().dummyChains.push(p),a=p;i.setEdge(a,l,{weight:h.weight},u)}function r(i){i.graph().dummyChains.forEach(s=>{let a=i.node(s),o=a.edgeLabel,l;for(i.setEdge(a.edgeObj,o);a.dummy;)l=i.successors(s)[0],i.removeNode(s),o.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(o.x=a.x,o.y=a.y,o.width=a.width,o.height=a.height),s=l,a=i.node(s)})}return lk}var ck,yH;function CM(){if(yH)return ck;yH=1;const{applyWithChunking:t}=No();ck={longestPath:e,slack:n};function e(r){var i={};function s(a){var o=r.node(a);if(Object.hasOwn(i,a))return o.rank;i[a]=!0;let l=r.outEdges(a).map(u=>u==null?Number.POSITIVE_INFINITY:s(u.w)-r.edge(u).minlen);var c=t(Math.min,l);return c===Number.POSITIVE_INFINITY&&(c=0),o.rank=c}r.sources().forEach(s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return ck}var uk,vH;function bue(){if(vH)return uk;vH=1;var t=kp().Graph,e=CM().slack;uk=n;function n(a){var o=new t({directed:!1}),l=a.nodes()[0],c=a.nodeCount();o.setNode(l,{});for(var u,h;r(o,a)<c;)u=i(o,a),h=o.hasNode(u.v)?e(a,u):-e(a,u),s(o,a,h);return o}function r(a,o){function l(c){o.nodeEdges(c).forEach(u=>{var h=u.v,f=c===h?u.w:h;!a.hasNode(f)&&!e(o,u)&&(a.setNode(f,{}),a.setEdge(c,f,{}),l(f))})}return a.nodes().forEach(l),a.nodeCount()}function i(a,o){return o.edges().reduce((c,u)=>{let h=Number.POSITIVE_INFINITY;return a.hasNode(u.v)!==a.hasNode(u.w)&&(h=e(o,u)),h<c[0]?[h,u]:c},[Number.POSITIVE_INFINITY,null])[1]}function s(a,o,l){a.nodes().forEach(c=>o.node(c).rank+=l)}return uk}var dk,xH;function $qe(){if(xH)return dk;xH=1;var t=bue(),e=CM().slack,n=CM().longestPath,r=kp().alg.preorder,i=kp().alg.postorder,s=No().simplify;dk=a,a.initLowLimValues=u,a.initCutValues=o,a.calcCutValue=c,a.leaveEdge=f,a.enterEdge=p,a.exchangeEdges=m;function a(E){E=s(E),n(E);var w=t(E);u(w),o(w,E);for(var B,D;B=f(w);)D=p(w,E,B),m(w,E,B,D)}function o(E,w){var B=i(E,E.nodes());B=B.slice(0,B.length-1),B.forEach(D=>l(E,w,D))}function l(E,w,B){var D=E.node(B),T=D.parent;E.edge(B,T).cutvalue=c(E,w,B)}function c(E,w,B){var D=E.node(B),T=D.parent,M=!0,R=w.edge(B,T),k=0;return R||(M=!1,R=w.edge(T,B)),k=R.weight,w.nodeEdges(B).forEach(L=>{var F=L.v===B,z=F?L.w:L.v;if(z!==T){var G=F===M,V=w.edge(L).weight;if(k+=G?V:-V,A(E,B,z)){var q=E.edge(B,z).cutvalue;k+=G?-q:q}}}),k}function u(E,w){arguments.length<2&&(w=E.nodes()[0]),h(E,{},1,w)}function h(E,w,B,D,T){var M=B,R=E.node(D);return w[D]=!0,E.neighbors(D).forEach(k=>{Object.hasOwn(w,k)||(B=h(E,w,B,k,D))}),R.low=M,R.lim=B++,T?R.parent=T:delete R.parent,B}function f(E){return E.edges().find(w=>E.edge(w).cutvalue<0)}function p(E,w,B){var D=B.v,T=B.w;w.hasEdge(D,T)||(D=B.w,T=B.v);var M=E.node(D),R=E.node(T),k=M,L=!1;M.lim>R.lim&&(k=R,L=!0);var F=w.edges().filter(z=>L===x(E,E.node(z.v),k)&&L!==x(E,E.node(z.w),k));return F.reduce((z,G)=>e(w,G)<e(w,z)?G:z)}function m(E,w,B,D){var T=B.v,M=B.w;E.removeEdge(T,M),E.setEdge(D.v,D.w,{}),u(E),o(E,w),v(E,w)}function v(E,w){var B=E.nodes().find(T=>!w.node(T).parent),D=r(E,B);D=D.slice(1),D.forEach(T=>{var M=E.node(T).parent,R=w.edge(T,M),k=!1;R||(R=w.edge(M,T),k=!0),w.node(T).rank=w.node(M).rank+(k?R.minlen:-R.minlen)})}function A(E,w,B){return E.hasEdge(w,B)}function x(E,w,B){return B.low<=w.lim&&w.lim<=B.lim}return dk}var hk,bH;function Qqe(){if(bH)return hk;bH=1;var t=CM(),e=t.longestPath,n=bue(),r=$qe();hk=i;function i(l){var c=l.graph().ranker;if(c instanceof Function)return c(l);switch(l.graph().ranker){case"network-simplex":o(l);break;case"tight-tree":a(l);break;case"longest-path":s(l);break;case"none":break;default:o(l)}}var s=e;function a(l){e(l),n(l)}function o(l){r(l)}return hk}var fk,CH;function Uqe(){if(CH)return fk;CH=1,fk=t;function t(r){let i=n(r);r.graph().dummyChains.forEach(s=>{let a=r.node(s),o=a.edgeObj,l=e(r,i,o.v,o.w),c=l.path,u=l.lca,h=0,f=c[h],p=!0;for(;s!==o.w;){if(a=r.node(s),p){for(;(f=c[h])!==u&&r.node(f).maxRank<a.rank;)h++;f===u&&(p=!1)}if(!p){for(;h<c.length-1&&r.node(f=c[h+1]).minRank<=a.rank;)h++;f=c[h]}r.setParent(s,f),s=r.successors(s)[0]}})}function e(r,i,s,a){let o=[],l=[],c=Math.min(i[s].low,i[a].low),u=Math.max(i[s].lim,i[a].lim),h,f;h=s;do h=r.parent(h),o.push(h);while(h&&(i[h].low>c||u>i[h].lim));for(f=h,h=a;(h=r.parent(h))!==f;)l.push(h);return{path:o.concat(l.reverse()),lca:f}}function n(r){let i={},s=0;function a(o){let l=s;r.children(o).forEach(a),i[o]={low:l,lim:s++}}return r.children().forEach(a),i}return fk}var pk,EH;function Hqe(){if(EH)return pk;EH=1;let t=No();pk={run:e,cleanup:s};function e(a){let o=t.addDummyNode(a,"root",{},"_root"),l=r(a),c=Object.values(l),u=t.applyWithChunking(Math.max,c)-1,h=2*u+1;a.graph().nestingRoot=o,a.edges().forEach(p=>a.edge(p).minlen*=h);let f=i(a)+1;a.children().forEach(p=>n(a,o,h,f,u,l,p)),a.graph().nodeRankFactor=h}function n(a,o,l,c,u,h,f){let p=a.children(f);if(!p.length){f!==o&&a.setEdge(o,f,{weight:0,minlen:l});return}let m=t.addBorderNode(a,"_bt"),v=t.addBorderNode(a,"_bb"),A=a.node(f);a.setParent(m,f),A.borderTop=m,a.setParent(v,f),A.borderBottom=v,p.forEach(x=>{n(a,o,l,c,u,h,x);let E=a.node(x),w=E.borderTop?E.borderTop:x,B=E.borderBottom?E.borderBottom:x,D=E.borderTop?c:2*c,T=w!==B?1:u-h[f]+1;a.setEdge(m,w,{weight:D,minlen:T,nestingEdge:!0}),a.setEdge(B,v,{weight:D,minlen:T,nestingEdge:!0})}),a.parent(f)||a.setEdge(o,m,{weight:0,minlen:u+h[f]})}function r(a){var o={};function l(c,u){var h=a.children(c);h&&h.length&&h.forEach(f=>l(f,u+1)),o[c]=u}return a.children().forEach(c=>l(c,1)),o}function i(a){return a.edges().reduce((o,l)=>o+a.edge(l).weight,0)}function s(a){var o=a.graph();a.removeNode(o.nestingRoot),delete o.nestingRoot,a.edges().forEach(l=>{var c=a.edge(l);c.nestingEdge&&a.removeEdge(l)})}return pk}var gk,SH;function Gqe(){if(SH)return gk;SH=1;let t=No();gk=e;function e(r){function i(s){let a=r.children(s),o=r.node(s);if(a.length&&a.forEach(i),Object.hasOwn(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(let l=o.minRank,c=o.maxRank+1;l<c;++l)n(r,"borderLeft","_bl",s,o,l),n(r,"borderRight","_br",s,o,l)}}r.children().forEach(i)}function n(r,i,s,a,o,l){let c={width:0,height:0,rank:l,borderType:i},u=o[i][l-1],h=t.addDummyNode(r,"border",c,s);o[i][l]=h,r.setParent(h,a),u&&r.setEdge(u,h,{weight:1})}return gk}var mk,wH;function Vqe(){if(wH)return mk;wH=1,mk={adjust:t,undo:e};function t(l){let c=l.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&n(l)}function e(l){let c=l.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&i(l),(c==="lr"||c==="rl")&&(a(l),n(l))}function n(l){l.nodes().forEach(c=>r(l.node(c))),l.edges().forEach(c=>r(l.edge(c)))}function r(l){let c=l.width;l.width=l.height,l.height=c}function i(l){l.nodes().forEach(c=>s(l.node(c))),l.edges().forEach(c=>{let u=l.edge(c);u.points.forEach(s),Object.hasOwn(u,"y")&&s(u)})}function s(l){l.y=-l.y}function a(l){l.nodes().forEach(c=>o(l.node(c))),l.edges().forEach(c=>{let u=l.edge(c);u.points.forEach(o),Object.hasOwn(u,"x")&&o(u)})}function o(l){let c=l.x;l.x=l.y,l.y=c}return mk}var Ak,_H;function Wqe(){if(_H)return Ak;_H=1;let t=No();Ak=e;function e(n){let r={},i=n.nodes().filter(u=>!n.children(u).length),s=i.map(u=>n.node(u).rank),a=t.applyWithChunking(Math.max,s),o=t.range(a+1).map(()=>[]);function l(u){if(r[u])return;r[u]=!0;let h=n.node(u);o[h.rank].push(u),n.successors(u).forEach(l)}return i.sort((u,h)=>n.node(u).rank-n.node(h).rank).forEach(l),o}return Ak}var yk,IH;function Kqe(){if(IH)return yk;IH=1;let t=No().zipObject;yk=e;function e(r,i){let s=0;for(let a=1;a<i.length;++a)s+=n(r,i[a-1],i[a]);return s}function n(r,i,s){let a=t(s,s.map((f,p)=>p)),o=i.flatMap(f=>r.outEdges(f).map(p=>({pos:a[p.w],weight:r.edge(p).weight})).sort((p,m)=>p.pos-m.pos)),l=1;for(;l<s.length;)l<<=1;let c=2*l-1;l-=1;let u=new Array(c).fill(0),h=0;return o.forEach(f=>{let p=f.pos+l;u[p]+=f.weight;let m=0;for(;p>0;)p%2&&(m+=u[p+1]),p=p-1>>1,u[p]+=f.weight;h+=f.weight*m}),h}return yk}var vk,BH;function qqe(){if(BH)return vk;BH=1,vk=t;function t(e,n=[]){return n.map(r=>{let i=e.inEdges(r);if(i.length){let s=i.reduce((a,o)=>{let l=e.edge(o),c=e.node(o.v);return{sum:a.sum+l.weight*c.order,weight:a.weight+l.weight}},{sum:0,weight:0});return{v:r,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:r}})}return vk}var xk,TH;function Yqe(){if(TH)return xk;TH=1;let t=No();xk=e;function e(i,s){let a={};i.forEach((l,c)=>{let u=a[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:c};l.barycenter!==void 0&&(u.barycenter=l.barycenter,u.weight=l.weight)}),s.edges().forEach(l=>{let c=a[l.v],u=a[l.w];c!==void 0&&u!==void 0&&(u.indegree++,c.out.push(a[l.w]))});let o=Object.values(a).filter(l=>!l.indegree);return n(o)}function n(i){let s=[];function a(l){return c=>{c.merged||(c.barycenter===void 0||l.barycenter===void 0||c.barycenter>=l.barycenter)&&r(l,c)}}function o(l){return c=>{c.in.push(l),--c.indegree===0&&i.push(c)}}for(;i.length;){let l=i.pop();s.push(l),l.in.reverse().forEach(a(l)),l.out.forEach(o(l))}return s.filter(l=>!l.merged).map(l=>t.pick(l,["vs","i","barycenter","weight"]))}function r(i,s){let a=0,o=0;i.weight&&(a+=i.barycenter*i.weight,o+=i.weight),s.weight&&(a+=s.barycenter*s.weight,o+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=a/o,i.weight=o,i.i=Math.min(s.i,i.i),s.merged=!0}return xk}var bk,MH;function Xqe(){if(MH)return bk;MH=1;let t=No();bk=e;function e(i,s){let a=t.partition(i,m=>Object.hasOwn(m,"barycenter")),o=a.lhs,l=a.rhs.sort((m,v)=>v.i-m.i),c=[],u=0,h=0,f=0;o.sort(r(!!s)),f=n(c,l,f),o.forEach(m=>{f+=m.vs.length,c.push(m.vs),u+=m.barycenter*m.weight,h+=m.weight,f=n(c,l,f)});let p={vs:c.flat(!0)};return h&&(p.barycenter=u/h,p.weight=h),p}function n(i,s,a){let o;for(;s.length&&(o=s[s.length-1]).i<=a;)s.pop(),i.push(o.vs),a++;return a}function r(i){return(s,a)=>s.barycenter<a.barycenter?-1:s.barycenter>a.barycenter?1:i?a.i-s.i:s.i-a.i}return bk}var Ck,DH;function Jqe(){if(DH)return Ck;DH=1;let t=qqe(),e=Yqe(),n=Xqe();Ck=r;function r(a,o,l,c){let u=a.children(o),h=a.node(o),f=h?h.borderLeft:void 0,p=h?h.borderRight:void 0,m={};f&&(u=u.filter(E=>E!==f&&E!==p));let v=t(a,u);v.forEach(E=>{if(a.children(E.v).length){let w=r(a,E.v,l,c);m[E.v]=w,Object.hasOwn(w,"barycenter")&&s(E,w)}});let A=e(v,l);i(A,m);let x=n(A,c);if(f&&(x.vs=[f,x.vs,p].flat(!0),a.predecessors(f).length)){let E=a.node(a.predecessors(f)[0]),w=a.node(a.predecessors(p)[0]);Object.hasOwn(x,"barycenter")||(x.barycenter=0,x.weight=0),x.barycenter=(x.barycenter*x.weight+E.order+w.order)/(x.weight+2),x.weight+=2}return x}function i(a,o){a.forEach(l=>{l.vs=l.vs.flatMap(c=>o[c]?o[c].vs:c)})}function s(a,o){a.barycenter!==void 0?(a.barycenter=(a.barycenter*a.weight+o.barycenter*o.weight)/(a.weight+o.weight),a.weight+=o.weight):(a.barycenter=o.barycenter,a.weight=o.weight)}return Ck}var Ek,RH;function Zqe(){if(RH)return Ek;RH=1;let t=kp().Graph,e=No();Ek=n;function n(i,s,a,o){o||(o=i.nodes());let l=r(i),c=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(u=>i.node(u));return o.forEach(u=>{let h=i.node(u),f=i.parent(u);(h.rank===s||h.minRank<=s&&s<=h.maxRank)&&(c.setNode(u),c.setParent(u,f||l),i[a](u).forEach(p=>{let m=p.v===u?p.w:p.v,v=c.edge(m,u),A=v!==void 0?v.weight:0;c.setEdge(m,u,{weight:i.edge(p).weight+A})}),Object.hasOwn(h,"minRank")&&c.setNode(u,{borderLeft:h.borderLeft[s],borderRight:h.borderRight[s]}))}),c}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return Ek}var Sk,PH;function eYe(){if(PH)return Sk;PH=1,Sk=t;function t(e,n,r){let i={},s;r.forEach(a=>{let o=e.parent(a),l,c;for(;o;){if(l=e.parent(o),l?(c=i[l],i[l]=o):(c=s,s=o),c&&c!==o){n.setEdge(c,o);return}o=l}})}return Sk}var wk,kH;function tYe(){if(kH)return wk;kH=1;let t=Wqe(),e=Kqe(),n=Jqe(),r=Zqe(),i=eYe(),s=kp().Graph,a=No();wk=o;function o(h,f){if(f&&typeof f.customOrder=="function"){f.customOrder(h,o);return}let p=a.maxRank(h),m=l(h,a.range(1,p+1),"inEdges"),v=l(h,a.range(p-1,-1,-1),"outEdges"),A=t(h);if(u(h,A),f&&f.disableOptimalOrderHeuristic)return;let x=Number.POSITIVE_INFINITY,E;for(let w=0,B=0;B<4;++w,++B){c(w%2?m:v,w%4>=2),A=a.buildLayerMatrix(h);let D=e(h,A);D<x&&(B=0,E=Object.assign({},A),x=D)}u(h,E)}function l(h,f,p){const m=new Map,v=(A,x)=>{m.has(A)||m.set(A,[]),m.get(A).push(x)};for(const A of h.nodes()){const x=h.node(A);if(typeof x.rank=="number"&&v(x.rank,A),typeof x.minRank=="number"&&typeof x.maxRank=="number")for(let E=x.minRank;E<=x.maxRank;E++)E!==x.rank&&v(E,A)}return f.map(function(A){return r(h,A,p,m.get(A)||[])})}function c(h,f){let p=new s;h.forEach(function(m){let v=m.graph().root,A=n(m,v,p,f);A.vs.forEach((x,E)=>m.node(x).order=E),i(m,p,A.vs)})}function u(h,f){Object.values(f).forEach(p=>p.forEach((m,v)=>h.node(m).order=v))}return wk}var _k,NH;function nYe(){if(NH)return _k;NH=1;let t=kp().Graph,e=No();_k={positionX:p,findType1Conflicts:n,findType2Conflicts:r,addConflict:s,hasConflict:a,verticalAlignment:o,horizontalCompaction:l,alignCoordinates:h,findSmallestWidthAlignment:u,balance:f};function n(A,x){let E={};function w(B,D){let T=0,M=0,R=B.length,k=D[D.length-1];return D.forEach((L,F)=>{let z=i(A,L),G=z?A.node(z).order:R;(z||L===k)&&(D.slice(M,F+1).forEach(V=>{A.predecessors(V).forEach(q=>{let O=A.node(q),H=O.order;(H<T||G<H)&&!(O.dummy&&A.node(V).dummy)&&s(E,q,V)})}),M=F+1,T=G)}),D}return x.length&&x.reduce(w),E}function r(A,x){let E={};function w(D,T,M,R,k){let L;e.range(T,M).forEach(F=>{L=D[F],A.node(L).dummy&&A.predecessors(L).forEach(z=>{let G=A.node(z);G.dummy&&(G.order<R||G.order>k)&&s(E,z,L)})})}function B(D,T){let M=-1,R,k=0;return T.forEach((L,F)=>{if(A.node(L).dummy==="border"){let z=A.predecessors(L);z.length&&(R=A.node(z[0]).order,w(T,k,F,M,R),k=F,M=R)}w(T,k,T.length,R,D.length)}),T}return x.length&&x.reduce(B),E}function i(A,x){if(A.node(x).dummy)return A.predecessors(x).find(E=>A.node(E).dummy)}function s(A,x,E){if(x>E){let B=x;x=E,E=B}let w=A[x];w||(A[x]=w={}),w[E]=!0}function a(A,x,E){if(x>E){let w=x;x=E,E=w}return!!A[x]&&Object.hasOwn(A[x],E)}function o(A,x,E,w){let B={},D={},T={};return x.forEach(M=>{M.forEach((R,k)=>{B[R]=R,D[R]=R,T[R]=k})}),x.forEach(M=>{let R=-1;M.forEach(k=>{let L=w(k);if(L.length){L=L.sort((z,G)=>T[z]-T[G]);let F=(L.length-1)/2;for(let z=Math.floor(F),G=Math.ceil(F);z<=G;++z){let V=L[z];D[k]===k&&R<T[V]&&!a(E,k,V)&&(D[V]=k,D[k]=B[k]=B[V],R=T[V])}}})}),{root:B,align:D}}function l(A,x,E,w,B){let D={},T=c(A,x,E,B),M=B?"borderLeft":"borderRight";function R(F,z){let G=T.nodes(),V=G.pop(),q={};for(;V;)q[V]?F(V):(q[V]=!0,G.push(V),G=G.concat(z(V))),V=G.pop()}function k(F){D[F]=T.inEdges(F).reduce((z,G)=>Math.max(z,D[G.v]+T.edge(G)),0)}function L(F){let z=T.outEdges(F).reduce((V,q)=>Math.min(V,D[q.w]-T.edge(q)),Number.POSITIVE_INFINITY),G=A.node(F);z!==Number.POSITIVE_INFINITY&&G.borderType!==M&&(D[F]=Math.max(D[F],z))}return R(k,T.predecessors.bind(T)),R(L,T.successors.bind(T)),Object.keys(w).forEach(F=>D[F]=D[E[F]]),D}function c(A,x,E,w){let B=new t,D=A.graph(),T=m(D.nodesep,D.edgesep,w);return x.forEach(M=>{let R;M.forEach(k=>{let L=E[k];if(B.setNode(L),R){var F=E[R],z=B.edge(F,L);B.setEdge(F,L,Math.max(T(A,k,R),z||0))}R=k})}),B}function u(A,x){return Object.values(x).reduce((E,w)=>{let B=Number.NEGATIVE_INFINITY,D=Number.POSITIVE_INFINITY;Object.entries(w).forEach(([M,R])=>{let k=v(A,M)/2;B=Math.max(R+k,B),D=Math.min(R-k,D)});const T=B-D;return T<E[0]&&(E=[T,w]),E},[Number.POSITIVE_INFINITY,null])[1]}function h(A,x){let E=Object.values(x),w=e.applyWithChunking(Math.min,E),B=e.applyWithChunking(Math.max,E);["u","d"].forEach(D=>{["l","r"].forEach(T=>{let M=D+T,R=A[M];if(R===x)return;let k=Object.values(R),L=w-e.applyWithChunking(Math.min,k);T!=="l"&&(L=B-e.applyWithChunking(Math.max,k)),L&&(A[M]=e.mapValues(R,F=>F+L))})})}function f(A,x){return e.mapValues(A.ul,(E,w)=>{if(x)return A[x.toLowerCase()][w];{let B=Object.values(A).map(D=>D[w]).sort((D,T)=>D-T);return(B[1]+B[2])/2}})}function p(A){let x=e.buildLayerMatrix(A),E=Object.assign(n(A,x),r(A,x)),w={},B;["u","d"].forEach(T=>{B=T==="u"?x:Object.values(x).reverse(),["l","r"].forEach(M=>{M==="r"&&(B=B.map(F=>Object.values(F).reverse()));let R=(T==="u"?A.predecessors:A.successors).bind(A),k=o(A,B,E,R),L=l(A,B,k.root,k.align,M==="r");M==="r"&&(L=e.mapValues(L,F=>-F)),w[T+M]=L})});let D=u(A,w);return h(w,D),f(w,A.graph().align)}function m(A,x,E){return(w,B,D)=>{let T=w.node(B),M=w.node(D),R=0,k;if(R+=T.width/2,Object.hasOwn(T,"labelpos"))switch(T.labelpos.toLowerCase()){case"l":k=-T.width/2;break;case"r":k=T.width/2;break}if(k&&(R+=E?k:-k),k=0,R+=(T.dummy?x:A)/2,R+=(M.dummy?x:A)/2,R+=M.width/2,Object.hasOwn(M,"labelpos"))switch(M.labelpos.toLowerCase()){case"l":k=M.width/2;break;case"r":k=-M.width/2;break}return k&&(R+=E?k:-k),k=0,R}}function v(A,x){return A.node(x).width}return _k}var Ik,LH;function rYe(){if(LH)return Ik;LH=1;let t=No(),e=nYe().positionX;Ik=n;function n(i){i=t.asNonCompoundGraph(i),r(i),Object.entries(e(i)).forEach(([s,a])=>i.node(s).x=a)}function r(i){let s=t.buildLayerMatrix(i),a=i.graph().ranksep,o=0;s.forEach(l=>{const c=l.reduce((u,h)=>{const f=i.node(h).height;return u>f?u:f},0);l.forEach(u=>i.node(u).y=o+c/2),o+=c+a})}return Ik}var Bk,FH;function iYe(){if(FH)return Bk;FH=1;let t=Oqe(),e=zqe(),n=Qqe(),r=No().normalizeRanks,i=Uqe(),s=No().removeEmptyRanks,a=Hqe(),o=Gqe(),l=Vqe(),c=tYe(),u=rYe(),h=No(),f=kp().Graph;Bk=p;function p(ee,te){let oe=te&&te.debugTiming?h.time:h.notime;oe("layout",()=>{let ae=oe("  buildLayoutGraph",()=>R(ee));oe("  runLayout",()=>m(ae,oe,te)),oe("  updateInputGraph",()=>v(ee,ae))})}function m(ee,te,oe){te("    makeSpaceForEdgeLabels",()=>k(ee)),te("    removeSelfEdges",()=>K(ee)),te("    acyclic",()=>t.run(ee)),te("    nestingGraph.run",()=>a.run(ee)),te("    rank",()=>n(h.asNonCompoundGraph(ee))),te("    injectEdgeLabelProxies",()=>L(ee)),te("    removeEmptyRanks",()=>s(ee)),te("    nestingGraph.cleanup",()=>a.cleanup(ee)),te("    normalizeRanks",()=>r(ee)),te("    assignRankMinMax",()=>F(ee)),te("    removeEdgeLabelProxies",()=>z(ee)),te("    normalize.run",()=>e.run(ee)),te("    parentDummyChains",()=>i(ee)),te("    addBorderSegments",()=>o(ee)),te("    order",()=>c(ee,oe)),te("    insertSelfEdges",()=>X(ee)),te("    adjustCoordinateSystem",()=>l.adjust(ee)),te("    position",()=>u(ee)),te("    positionSelfEdges",()=>re(ee)),te("    removeBorderNodes",()=>H(ee)),te("    normalize.undo",()=>e.undo(ee)),te("    fixupEdgeLabelCoords",()=>q(ee)),te("    undoCoordinateSystem",()=>l.undo(ee)),te("    translateGraph",()=>G(ee)),te("    assignNodeIntersects",()=>V(ee)),te("    reversePoints",()=>O(ee)),te("    acyclic.undo",()=>t.undo(ee))}function v(ee,te){ee.nodes().forEach(oe=>{let ae=ee.node(oe),se=te.node(oe);ae&&(ae.x=se.x,ae.y=se.y,ae.rank=se.rank,te.children(oe).length&&(ae.width=se.width,ae.height=se.height))}),ee.edges().forEach(oe=>{let ae=ee.edge(oe),se=te.edge(oe);ae.points=se.points,Object.hasOwn(se,"x")&&(ae.x=se.x,ae.y=se.y)}),ee.graph().width=te.graph().width,ee.graph().height=te.graph().height}let A=["nodesep","edgesep","ranksep","marginx","marginy"],x={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},E=["acyclicer","ranker","rankdir","align"],w=["width","height","rank"],B={width:0,height:0},D=["minlen","weight","width","height","labeloffset"],T={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},M=["labelpos"];function R(ee){let te=new f({multigraph:!0,compound:!0}),oe=Z(ee.graph());return te.setGraph(Object.assign({},x,J(oe,A),h.pick(oe,E))),ee.nodes().forEach(ae=>{let se=Z(ee.node(ae));const fe=J(se,w);Object.keys(B).forEach(Ee=>{fe[Ee]===void 0&&(fe[Ee]=B[Ee])}),te.setNode(ae,fe),te.setParent(ae,ee.parent(ae))}),ee.edges().forEach(ae=>{let se=Z(ee.edge(ae));te.setEdge(ae,Object.assign({},T,J(se,D),h.pick(se,M)))}),te}function k(ee){let te=ee.graph();te.ranksep/=2,ee.edges().forEach(oe=>{let ae=ee.edge(oe);ae.minlen*=2,ae.labelpos.toLowerCase()!=="c"&&(te.rankdir==="TB"||te.rankdir==="BT"?ae.width+=ae.labeloffset:ae.height+=ae.labeloffset)})}function L(ee){ee.edges().forEach(te=>{let oe=ee.edge(te);if(oe.width&&oe.height){let ae=ee.node(te.v),fe={rank:(ee.node(te.w).rank-ae.rank)/2+ae.rank,e:te};h.addDummyNode(ee,"edge-proxy",fe,"_ep")}})}function F(ee){let te=0;ee.nodes().forEach(oe=>{let ae=ee.node(oe);ae.borderTop&&(ae.minRank=ee.node(ae.borderTop).rank,ae.maxRank=ee.node(ae.borderBottom).rank,te=Math.max(te,ae.maxRank))}),ee.graph().maxRank=te}function z(ee){ee.nodes().forEach(te=>{let oe=ee.node(te);oe.dummy==="edge-proxy"&&(ee.edge(oe.e).labelRank=oe.rank,ee.removeNode(te))})}function G(ee){let te=Number.POSITIVE_INFINITY,oe=0,ae=Number.POSITIVE_INFINITY,se=0,fe=ee.graph(),Ee=fe.marginx||0,Be=fe.marginy||0;function _e(Ce){let Se=Ce.x,Me=Ce.y,ce=Ce.width,$e=Ce.height;te=Math.min(te,Se-ce/2),oe=Math.max(oe,Se+ce/2),ae=Math.min(ae,Me-$e/2),se=Math.max(se,Me+$e/2)}ee.nodes().forEach(Ce=>_e(ee.node(Ce))),ee.edges().forEach(Ce=>{let Se=ee.edge(Ce);Object.hasOwn(Se,"x")&&_e(Se)}),te-=Ee,ae-=Be,ee.nodes().forEach(Ce=>{let Se=ee.node(Ce);Se.x-=te,Se.y-=ae}),ee.edges().forEach(Ce=>{let Se=ee.edge(Ce);Se.points.forEach(Me=>{Me.x-=te,Me.y-=ae}),Object.hasOwn(Se,"x")&&(Se.x-=te),Object.hasOwn(Se,"y")&&(Se.y-=ae)}),fe.width=oe-te+Ee,fe.height=se-ae+Be}function V(ee){ee.edges().forEach(te=>{let oe=ee.edge(te),ae=ee.node(te.v),se=ee.node(te.w),fe,Ee;oe.points?(fe=oe.points[0],Ee=oe.points[oe.points.length-1]):(oe.points=[],fe=se,Ee=ae),oe.points.unshift(h.intersectRect(ae,fe)),oe.points.push(h.intersectRect(se,Ee))})}function q(ee){ee.edges().forEach(te=>{let oe=ee.edge(te);if(Object.hasOwn(oe,"x"))switch((oe.labelpos==="l"||oe.labelpos==="r")&&(oe.width-=oe.labeloffset),oe.labelpos){case"l":oe.x-=oe.width/2+oe.labeloffset;break;case"r":oe.x+=oe.width/2+oe.labeloffset;break}})}function O(ee){ee.edges().forEach(te=>{let oe=ee.edge(te);oe.reversed&&oe.points.reverse()})}function H(ee){ee.nodes().forEach(te=>{if(ee.children(te).length){let oe=ee.node(te),ae=ee.node(oe.borderTop),se=ee.node(oe.borderBottom),fe=ee.node(oe.borderLeft[oe.borderLeft.length-1]),Ee=ee.node(oe.borderRight[oe.borderRight.length-1]);oe.width=Math.abs(Ee.x-fe.x),oe.height=Math.abs(se.y-ae.y),oe.x=fe.x+oe.width/2,oe.y=ae.y+oe.height/2}}),ee.nodes().forEach(te=>{ee.node(te).dummy==="border"&&ee.removeNode(te)})}function K(ee){ee.edges().forEach(te=>{if(te.v===te.w){var oe=ee.node(te.v);oe.selfEdges||(oe.selfEdges=[]),oe.selfEdges.push({e:te,label:ee.edge(te)}),ee.removeEdge(te)}})}function X(ee){var te=h.buildLayerMatrix(ee);te.forEach(oe=>{var ae=0;oe.forEach((se,fe)=>{var Ee=ee.node(se);Ee.order=fe+ae,(Ee.selfEdges||[]).forEach(Be=>{h.addDummyNode(ee,"selfedge",{width:Be.label.width,height:Be.label.height,rank:Ee.rank,order:fe+ ++ae,e:Be.e,label:Be.label},"_se")}),delete Ee.selfEdges})})}function re(ee){ee.nodes().forEach(te=>{var oe=ee.node(te);if(oe.dummy==="selfedge"){var ae=ee.node(oe.e.v),se=ae.x+ae.width/2,fe=ae.y,Ee=oe.x-se,Be=ae.height/2;ee.setEdge(oe.e,oe.label),ee.removeNode(te),oe.label.points=[{x:se+2*Ee/3,y:fe-Be},{x:se+5*Ee/6,y:fe-Be},{x:se+Ee,y:fe},{x:se+5*Ee/6,y:fe+Be},{x:se+2*Ee/3,y:fe+Be}],oe.label.x=oe.x,oe.label.y=oe.y}})}function J(ee,te){return h.mapValues(h.pick(ee,te),Number)}function Z(ee){var te={};return ee&&Object.entries(ee).forEach(([oe,ae])=>{typeof oe=="string"&&(oe=oe.toLowerCase()),te[oe]=ae}),te}return Bk}var Tk,jH;function sYe(){if(jH)return Tk;jH=1;let t=No(),e=kp().Graph;Tk={debugOrdering:n};function n(r){let i=t.buildLayerMatrix(r),s=new e({compound:!0,multigraph:!0}).setGraph({});return r.nodes().forEach(a=>{s.setNode(a,{label:a}),s.setParent(a,"layer"+r.node(a).rank)}),r.edges().forEach(a=>s.setEdge(a.v,a.w,{},a.name)),i.forEach((a,o)=>{let l="layer"+o;s.setNode(l,{rank:"same"}),a.reduce((c,u)=>(s.setEdge(c,u,{style:"invis"}),u))}),s}return Tk}var Mk,OH;function aYe(){return OH||(OH=1,Mk="1.1.8"),Mk}var Dk,zH;function oYe(){return zH||(zH=1,Dk={graphlib:kp(),layout:iYe(),debug:sYe(),util:{time:No().time,notime:No().notime},version:aYe()}),Dk}var lYe=oYe();const $H=qg(lYe),cYe={direction:"TB",nodeSpacing:100,rankSpacing:150},QH={page:{width:180,height:80},layout:{width:200,height:60},dataSource:{width:160,height:50}},UH={width:180,height:80};function uYe(t,e,n={}){const r={...cYe,...n};if(t.length===0)return{nodes:t,edges:e};const i=new $H.graphlib.Graph().setDefaultEdgeLabel(()=>({}));return i.setGraph({rankdir:r.direction,nodesep:r.nodeSpacing,ranksep:r.rankSpacing,marginx:50,marginy:50}),t.forEach(a=>{const o=QH[a.type||""]||UH;i.setNode(a.id,{width:o.width,height:o.height})}),e.forEach(a=>{i.setEdge(a.source,a.target)}),$H.layout(i),{nodes:t.map(a=>{const o=i.node(a.id),l=QH[a.type||""]||UH;return{...a,position:{x:o.x-l.width/2,y:o.y-l.height/2}}}),edges:e}}const dYe={pages:[],layouts:[],elements:[],projectId:null,nodes:[],edges:[],selectedNodeId:null,isLoading:!1,error:null,showLayouts:!0,showNavigationEdges:!0,showEventLinks:!0,showLayoutEdges:!0,showDataSources:!0};function Rk(t,e,n,r,i){const s=c=>c?c.split(/[?#]/)[0].replace(/^\/+/,"").replace(/\/+$/,""):"",a=e.filter(c=>c.page_id===t),o=[],l=r||new Map(n.map(c=>[(i||s)(c.slug),c.id]));return a.forEach(c=>{const u=c.props?.href||c.props?.to||c.props?.path||c.props?.url||c.props?.link?.href,h=(c.tag||"").toLowerCase();if((h==="link"||h==="a"||h==="button")&&u&&!u.startsWith("http")&&!u.startsWith("#")){const p=s(u),m=l.get(p);m&&m!==t&&o.push(m)}Array.isArray(c.events)&&c.events.forEach(p=>{if(!p||p.enabled===!1)return;(Array.isArray(p.actions)?p.actions:[]).forEach(v=>{if(!v||v.enabled===!1)return;const A=(v.type||"").toLowerCase(),x=v.config?.path||v.config?.href||v.config?.to||v.config?.url||v.value?.path||v.value?.href||v.value?.to||v.value?.url;if((A==="navigate"||A==="link"||A.includes("navigate"))&&x&&!x.startsWith("http")&&!x.startsWith("#")){const w=s(x),B=l.get(w);B&&B!==t&&o.push(B)}})})}),[...new Set(o)]}function hYe(t,e){return e.filter(n=>n.layout_id===t&&n.tag==="Slot").length}function Pk(t,e,n,r,i){const s=r||(u=>u?u.split(/[?#]/)[0].replace(/^\/+/,"").replace(/\/+$/,""):""),a=e.filter(u=>u.page_id===t),o=[],l=i??new Map(n.map(u=>[s(u.slug),u.id])),c=new Map;return n.forEach(u=>{const h=s(u.slug);c.set(h,u.id),c.set(`/${h}`,u.id),(h==="home"||h==="")&&c.set("/",u.id)}),a.forEach(u=>{!u.events||!Array.isArray(u.events)||u.events.forEach(h=>{if(!h.enabled)return;const f=(h.event_type||h.event||"").toString();(Array.isArray(h.actions)?h.actions:[]).forEach(m=>{if(m.type!=="navigate"||m.enabled===!1)return;const v=m.config?.path||m.config?.href||m.config?.to||m.config?.url||m.value?.path||m.value?.href||m.value?.to||m.value?.url;if(!v||v.startsWith("http")||v.startsWith("#"))return;const A=v.startsWith("/")?v:`/${v}`,x=A==="/"?"/":s(v),E=c.get(A)||l.get(x);!E||E===t||o.push({sourceElementId:u.id,sourceElementTag:u.tag,eventType:f,targetPageId:E,condition:m.condition})})})}),o}function fYe(t){const e=new Map;return t.forEach(n=>{if(!n.dataBinding)return;const r=n.dataBinding;let i=null,s="",a="";if("source"in r&&"name"in r&&r.name&&(r.source==="dataTable"?(i="dataTable",s=r.name,a=`dataTable-${s}`):r.source==="api"&&(i="api",s=r.name,a=`api-${s}`)),"type"in r&&r.config){const o=r.config;o.baseUrl==="MOCK_DATA"?(i="mock",s=o.endpoint||"Mock Data",a=`mock-${s}`):r.source==="supabase"&&o.tableName?(i="supabase",s=o.tableName,a=`supabase-${s}`):r.source==="api"&&o.endpoint&&(i="api",s=o.endpoint,a=`api-${s}`)}!i||!s||(e.has(a)?e.get(a).boundElements.push({elementId:n.id,elementTag:n.tag,pageId:n.page_id||""}):e.set(a,{id:a,sourceType:i,name:s,boundElements:[{elementId:n.id,elementTag:n.tag,pageId:n.page_id||""}]}))}),Array.from(e.values())}function pYe(t,e,n,r,i,s,a,o){const l=E=>E?E.split(/[?#]/)[0].replace(/^\/+/,"").replace(/\/+$/,""):"",c=[],u=[],h=fYe(n),f=o&&h.length>0?150:0;o&&h.length>0&&h.forEach((E,w)=>{const B=[...new Set(E.boundElements.map(T=>T.pageId).filter(Boolean))],D={id:`datasource-${E.id}`,type:"dataSource",position:{x:100+w*200,y:0},data:{type:"dataSource",dataSource:E,pageIds:B}};c.push(D)}),r&&e.forEach((E,w)=>{const B=t.filter(T=>T.layout_id===E.id).map(T=>T.id),D={id:`layout-${E.id}`,type:"layout",position:{x:100+w*300,y:50+f},data:{type:"layout",layout:E,pageIds:B,slotCount:hYe(E.id,n)}};c.push(D)});const p=new Map(t.map(E=>[l(E.slug),E.id])),m=t.filter(E=>!E.layout_id),v=t.filter(E=>E.layout_id);m.forEach((E,w)=>{const B=Rk(E.id,n,t,p,l),D=Pk(E.id,n,t,l),T=n.filter(R=>R.page_id===E.id).length,M={id:`page-${E.id}`,type:"page",position:{x:100+w*250,y:(r?250:100)+f},data:{type:"page",page:E,outgoingLinks:B,outgoingEventLinks:D,layoutId:null,elementCount:T}};c.push(M)});const A=new Map;v.forEach(E=>{const w=E.layout_id;A.has(w)||A.set(w,[]),A.get(w).push(E)});let x=0;if(A.forEach((E,w)=>{E.forEach((B,D)=>{const T=Rk(B.id,n,t,p,l),M=Pk(B.id,n,t,l),R=n.filter(L=>L.page_id===B.id).length,k={id:`page-${B.id}`,type:"page",position:{x:100+x*300+D*50,y:(r?400+D*150:250+D*150)+f},data:{type:"page",page:B,outgoingLinks:T,outgoingEventLinks:M,layoutId:w,elementCount:R}};c.push(k),r&&a&&u.push({id:`edge-layout-${w}-page-${B.id}`,source:`layout-${w}`,target:`page-${B.id}`,type:"smoothstep",animated:!1,style:{stroke:"var(--color-secondary-400)",strokeDasharray:"5,5"},data:{type:"layout-usage",label:"uses layout"}})}),x++}),i){const E=new Map(t.map(w=>[l(w.slug),w.id]));t.forEach(w=>{Rk(w.id,n,t,E,l).forEach(D=>{u.push({id:`edge-nav-${w.id}-${D}`,source:`page-${w.id}`,target:`page-${D}`,type:"smoothstep",animated:!0,style:{stroke:"var(--color-primary-500)"},markerEnd:{type:xE.ArrowClosed},data:{type:"navigation",label:"Link"}})})})}if(s){const E=new Map(t.map(w=>[l(w.slug),w.id]));t.forEach(w=>{Pk(w.id,n,t,l,E).forEach((D,T)=>{const M=u.some(R=>R.source===`page-${w.id}`&&R.target===`page-${D.targetPageId}`);u.push({id:`edge-event-${w.id}-${D.targetPageId}-${T}`,source:`page-${w.id}`,target:`page-${D.targetPageId}`,type:"smoothstep",animated:!0,style:{stroke:"var(--color-secondary-500)",strokeDasharray:"5,5"},markerEnd:{type:xE.ArrowClosed},data:{type:"event-navigation",label:`${D.eventType}${D.condition?" ()":""}`},...M&&{labelBgPadding:[8,4],style:{strokeDasharray:"2,2"}}})})})}return o&&h.length>0&&h.forEach(E=>{[...new Set(E.boundElements.map(B=>B.pageId).filter(Boolean))].forEach(B=>{u.push({id:`edge-data-${E.id}-page-${B}`,source:`datasource-${E.id}`,target:`page-${B}`,type:"smoothstep",animated:!1,style:{stroke:"var(--color-success-500)",strokeDasharray:"3,3"},data:{type:"data-binding",label:E.name}})})}),{nodes:c,edges:u}}const oa=Jl((t,e)=>({...dYe,setProjectId:n=>t({projectId:n}),setPages:n=>{t({pages:n}),e().buildWorkflowGraph()},setLayouts:n=>{t({layouts:n}),e().buildWorkflowGraph()},setElements:n=>{t({elements:n}),e().buildWorkflowGraph()},setNodes:n=>t({nodes:n}),setEdges:n=>t({edges:n}),onNodesChange:n=>{t({nodes:zce(n,e().nodes)})},onEdgesChange:n=>{t({edges:$ce(n,e().edges)})},setSelectedNodeId:n=>t({selectedNodeId:n}),setLoading:n=>t({isLoading:n}),setError:n=>t({error:n}),toggleShowLayouts:()=>{t({showLayouts:!e().showLayouts}),e().buildWorkflowGraph()},toggleShowNavigationEdges:()=>{t({showNavigationEdges:!e().showNavigationEdges}),e().buildWorkflowGraph()},toggleShowEventLinks:()=>{t({showEventLinks:!e().showEventLinks}),e().buildWorkflowGraph()},toggleShowLayoutEdges:()=>{t({showLayoutEdges:!e().showLayoutEdges}),e().buildWorkflowGraph()},toggleShowDataSources:()=>{t({showDataSources:!e().showDataSources}),e().buildWorkflowGraph()},autoLayout:(n="TB")=>{const{nodes:r,edges:i}=e();if(r.length===0)return;const{nodes:s}=uYe(r,i,{direction:n,nodeSpacing:80,rankSpacing:120});t({nodes:s})},buildWorkflowGraph:()=>{const{pages:n,layouts:r,elements:i,showLayouts:s,showNavigationEdges:a,showEventLinks:o,showLayoutEdges:l,showDataSources:c}=e();if(n.length===0){t({nodes:[],edges:[]});return}const{nodes:u,edges:h}=pYe(n,r,i,s,a,o,l,c);t({nodes:u,edges:h})}})),gYe=C.memo(function({data:e,selected:n}){const{page:r,outgoingLinks:i,layoutId:s,elementCount:a}=e;return d.jsxs("div",{className:`workflow-node workflow-page-node ${n?"selected":""}`,children:[d.jsx(L0,{type:"target",position:Qn.Top,className:"workflow-handle workflow-handle-target"}),d.jsxs("div",{className:"workflow-node-header",children:[d.jsx(D8,{size:14,className:"workflow-node-icon"}),d.jsx("span",{className:"workflow-node-title",children:r.title})]}),d.jsxs("div",{className:"workflow-node-content",children:[d.jsxs("div",{className:"workflow-node-slug",children:["/",r.slug]}),d.jsxs("div",{className:"workflow-node-stats",children:[d.jsxs("div",{className:"workflow-stat",title:"Elements",children:[d.jsx(x_,{size:12}),d.jsx("span",{children:a})]}),i.length>0&&d.jsxs("div",{className:"workflow-stat",title:"Links to other pages",children:[d.jsx(hI,{size:12}),d.jsx("span",{children:i.length})]})]}),s&&d.jsx("div",{className:"workflow-node-badge workflow-badge-layout",children:"Layout"})]}),d.jsx(L0,{type:"source",position:Qn.Bottom,className:"workflow-handle workflow-handle-source"})]})}),mYe=C.memo(function({data:e,selected:n}){const{layout:r,pageIds:i,slotCount:s}=e;return d.jsxs("div",{className:`workflow-node workflow-layout-node ${n?"selected":""}`,children:[d.jsx(L0,{type:"target",position:Qn.Top,className:"workflow-handle workflow-handle-target",style:{visibility:"hidden"}}),d.jsxs("div",{className:"workflow-node-header workflow-layout-header",children:[d.jsx(fI,{size:14,className:"workflow-node-icon"}),d.jsx("span",{className:"workflow-node-title",children:r.name})]}),d.jsxs("div",{className:"workflow-node-content",children:[r.description&&d.jsx("div",{className:"workflow-node-description",children:r.description}),d.jsxs("div",{className:"workflow-node-stats",children:[d.jsxs("div",{className:"workflow-stat",title:"Pages using this layout",children:[d.jsx(a0e,{size:12}),d.jsxs("span",{children:[i.length," pages"]})]}),d.jsxs("div",{className:"workflow-stat",title:"Slot count",children:[d.jsx(Zi,{size:12}),d.jsxs("span",{children:[s," slots"]})]})]})]}),d.jsx(L0,{type:"source",position:Qn.Bottom,className:"workflow-handle workflow-handle-source"})]})}),AYe={dataTable:qo,api:v_,supabase:aY,mock:Rye},yYe=t=>{switch(t){case"dataTable":return"DataTable";case"api":return"API";case"supabase":return"Supabase";case"mock":return"Mock";default:return"Data"}},vYe=C.memo(function({data:e,selected:n}){const{dataSource:r,pageIds:i}=e,s=C.useMemo(()=>AYe[r.sourceType]||qo,[r.sourceType]);return d.jsxs("div",{className:`workflow-node workflow-datasource-node workflow-datasource-${r.sourceType} ${n?"selected":""}`,children:[d.jsxs("div",{className:"workflow-node-header",children:[d.jsx(s,{size:14,className:"workflow-node-icon"}),d.jsx("span",{className:"workflow-node-title",children:r.name})]}),d.jsxs("div",{className:"workflow-node-content",children:[d.jsx("div",{className:"workflow-node-type",children:yYe(r.sourceType)}),d.jsxs("div",{className:"workflow-node-stats",children:[d.jsx("div",{className:"workflow-stat",title:"Bound elements",children:d.jsxs("span",{children:[r.boundElements.length," elements"]})}),d.jsx("div",{className:"workflow-stat",title:"Pages using this data",children:d.jsxs("span",{children:[i.length," pages"]})})]})]}),d.jsx(L0,{type:"source",position:Qn.Bottom,className:"workflow-handle workflow-handle-source"})]})}),xYe={page:gYe,layout:mYe,dataSource:vYe};function bYe(){const{fitView:t}=j4(),e=oa(f=>f.nodes),n=oa(f=>f.edges),r=oa(f=>f.onNodesChange),i=oa(f=>f.onEdgesChange),s=oa(f=>f.setSelectedNodeId),a=C.useRef("");C.useEffect(()=>{const f=JSON.stringify(e.map(p=>({id:p.id,x:p.position.x,y:p.position.y})));if(a.current&&a.current!==f){const p=setTimeout(()=>{t({padding:.2,duration:300})},50);return()=>clearTimeout(p)}a.current=f},[e,t]);const o=C.useCallback(f=>{r(f)},[r]),l=C.useCallback(f=>{i(f)},[i]),c=C.useCallback((f,p)=>{if(s(p.id),p.id.startsWith("page-")){const m=p.id.replace("page-","");window.parent.postMessage({type:"WORKFLOW_SELECT_PAGE",payload:{pageId:m}},"*")}},[s]),u=C.useCallback(f=>f.type==="layout"?"var(--color-secondary-500)":f.type==="dataSource"?"var(--color-success-500)":"var(--color-primary-500)",[]),h=C.useMemo(()=>({x:50,y:50,zoom:.8}),[]);return d.jsx("div",{className:"workflow-canvas",children:d.jsxs(YKe,{nodes:e,edges:n,nodeTypes:xYe,onNodesChange:o,onEdgesChange:l,onNodeClick:c,defaultViewport:h,fitView:!0,fitViewOptions:{padding:.2},minZoom:.1,maxZoom:2,children:[d.jsx(tqe,{variant:S0.Dots,gap:20,size:1,color:"var(--color-gray-300)"}),d.jsx(lqe,{showZoom:!0,showFitView:!0,showInteractive:!1,position:"bottom-right"}),d.jsx(bqe,{nodeColor:u,nodeStrokeWidth:2,zoomable:!0,pannable:!0,position:"top-right"})]})})}function CYe(){const t=oa(h=>h.showLayouts),e=oa(h=>h.showNavigationEdges),n=oa(h=>h.showEventLinks),r=oa(h=>h.showLayoutEdges),i=oa(h=>h.showDataSources),s=oa(h=>h.toggleShowLayouts),a=oa(h=>h.toggleShowNavigationEdges),o=oa(h=>h.toggleShowEventLinks),l=oa(h=>h.toggleShowLayoutEdges),c=oa(h=>h.toggleShowDataSources),u=oa(h=>h.autoLayout);return d.jsx("div",{className:"workflow-toolbar",children:d.jsxs("div",{className:"workflow-toolbar-actions",children:[d.jsxs("button",{className:"workflow-toolbar-btn",onClick:()=>u("TB"),title:"Auto Layout (Top to Bottom)",children:[d.jsx(Uge,{size:16}),d.jsx("span",{children:"Auto Layout"})]}),d.jsx("div",{className:"workflow-toolbar-separator"}),d.jsxs("button",{className:`workflow-toolbar-btn ${t?"active":""}`,onClick:s,title:"Show Layouts",children:[d.jsx(fI,{size:16}),d.jsx("span",{children:"Layouts"})]}),d.jsxs("button",{className:`workflow-toolbar-btn ${e?"active":""}`,onClick:a,title:"Show Link Navigation",children:[d.jsx(eme,{size:16}),d.jsx("span",{children:"Links"})]}),d.jsxs("button",{className:`workflow-toolbar-btn ${n?"active":""}`,onClick:o,title:"Show Event Navigation (onClick, onSubmit, etc.)",children:[d.jsx(ib,{size:16}),d.jsx("span",{children:"Events"})]}),d.jsxs("button",{className:`workflow-toolbar-btn ${r?"active":""}`,onClick:l,title:"Show Layout Usage",disabled:!t,children:[d.jsx(hI,{size:16}),d.jsx("span",{children:"Layout Links"})]}),d.jsxs("button",{className:`workflow-toolbar-btn ${i?"active":""}`,onClick:c,title:"Show Data Sources (DataTable, API, etc.)",children:[d.jsx(qo,{size:16}),d.jsx("span",{children:"Data"})]})]})})}function EYe(){const t=oa(u=>u.setPages),e=oa(u=>u.setLayouts),n=oa(u=>u.setElements),r=oa(u=>u.setProjectId),i=oa(u=>u.setLoading),s=je(u=>u.pages),a=je(u=>u.elements),o=je(u=>u.currentPageId),l=Cl(u=>u.layouts),c=C.useRef(!1);C.useEffect(()=>{const u=s.map(h=>({id:h.id,title:h.name,slug:h.slug?.replace(/^\/+/,"")||"",project_id:h.project_id||"",parent_id:h.parent_id,order_num:h.order_num,layout_id:h.layout_id}));t(u),c.current||(c.current=!0,i(!1))},[s,t,i]),C.useEffect(()=>{const u=l.map(h=>({id:h.id,name:h.name,project_id:h.project_id||"",description:h.description}));e(u)},[l,e]),C.useEffect(()=>{const u=a.map(h=>({id:h.id,tag:h.tag,props:h.props,parent_id:h.parent_id,page_id:h.page_id,layout_id:h.layout_id,order_num:h.order_num,events:h.props.events||h.events,dataBinding:h.props.dataBinding||h.dataBinding}));n(u)},[a,n]),C.useEffect(()=>{const u=s.find(h=>h.id===o);u?.project_id&&r(u.project_id)},[o,s,r])}function SYe(){EYe();const t=oa(r=>r.isLoading),e=oa(r=>r.error),n=oa(r=>r.nodes);return t?d.jsxs("div",{className:"workflow-loading",children:[d.jsx("div",{className:"workflow-loading-spinner"}),d.jsx("span",{children:"Loading workflow..."})]}):e?d.jsx("div",{className:"workflow-error",children:d.jsxs("span",{children:["Error: ",e]})}):n.length===0?d.jsxs("div",{className:"workflow-empty",children:[d.jsx("span",{children:"No pages to display"}),d.jsx("p",{children:"Add pages to your project to see the workflow"})]}):d.jsx(bYe,{})}const wYe=()=>d.jsx(hue,{children:d.jsxs("main",{className:"workflow-app",children:[d.jsx(CYe,{}),d.jsx(SYe,{})]})}),_Ye=({children:t,className:e="app"})=>d.jsx("div",{className:e,children:t});function IYe(t,e){const[n,r]=C.useState({left:0,top:0,right:0,bottom:0}),i=C.useRef(null);return C.useEffect(()=>{const a=e.current;if(!a?.contentWindow)return;const o=()=>{i.current===null&&(i.current=requestAnimationFrame(()=>{const l=a.contentDocument;if(!l){i.current=null;return}const c=l.documentElement.scrollLeft||l.body.scrollLeft,u=l.documentElement.scrollTop||l.body.scrollTop,h=a.clientWidth,f=a.clientHeight;r({left:c,top:u,right:c+h,bottom:u+f}),i.current=null}))};return o(),a.contentWindow.addEventListener("scroll",o,{passive:!0}),a.contentWindow.addEventListener("resize",o,{passive:!0}),()=>{a.contentWindow?.removeEventListener("scroll",o),a.contentWindow?.removeEventListener("resize",o),i.current!==null&&cancelAnimationFrame(i.current)}},[e]),C.useMemo(()=>n.right===0&&n.bottom===0?t:t.filter(a=>{const{rect:o}=a;return!(o.right<n.left||o.left>n.right||o.bottom<n.top||o.top>n.bottom)}),[t,n])}function BYe(t,e){C.useRef(0),C.useRef(0),C.useEffect(()=>{},[t,e])}let wp=!1,Yd=null,wE=0,$4=0,Q4=0,U4=0,i_=-1,Y1=null,tb=null;function TYe(t){if(!t||t==="reset"||t==="inherit"||t==="initial")return 0;const e=t.split(/\s+/)[0],n=parseFloat(e);return isNaN(n)?0:n}const Cue={topLeft:"borderTopLeftRadius",topRight:"borderTopRightRadius",bottomLeft:"borderBottomLeftRadius",bottomRight:"borderBottomRightRadius"};function Eue(t,e,n){switch(t){case"topLeft":return(e+n)/Math.SQRT2;case"topRight":return(-e+n)/Math.SQRT2;case"bottomLeft":return(e-n)/Math.SQRT2;case"bottomRight":return(-e-n)/Math.SQRT2;default:return 0}}function Qj(t,e){if(nh()&&!xf())return;const r=Ja.getIframe();r?.contentWindow&&r.contentWindow.postMessage({type:"UPDATE_ELEMENT_PROPS",elementId:t,props:{style:e},merge:!0},window.location.origin)}function MYe(t){switch(t){case"topLeft":case"bottomRight":return"nwse-resize";case"topRight":case"bottomLeft":return"nesw-resize";default:return"nwse-resize"}}function DYe(){if(tb)return;const t=Yd?MYe(Yd):"nwse-resize";tb=document.createElement("div"),tb.style.cssText=`
    position: fixed;
    inset: 0;
    z-index: 99999;
    cursor: ${t};
  `,document.body.appendChild(tb)}function RYe(){tb&&(tb.remove(),tb=null)}function EM(){wp=!1,Yd=null,wE=0,$4=0,Q4=0,U4=0,i_=-1,Y1!==null&&(cancelAnimationFrame(Y1),Y1=null),RYe()}function Uj(t,e,n){return n?{borderTopLeftRadius:`${t}px`,borderTopRightRadius:`${t}px`,borderBottomLeftRadius:`${t}px`,borderBottomRightRadius:`${t}px`,borderRadius:`${t}px`}:{[Cue[e]]:`${t}px`}}function Sue(){if(!wp)return;document.removeEventListener("mousemove",o_),document.removeEventListener("mouseup",l_),document.removeEventListener("keydown",s_),window.removeEventListener("blur",a_);const t=je.getState().selectedElementId;if(t&&Yd){const e=Uj(wE,Yd,!1);Qj(t,e)}EM()}function s_(t){t.key==="Escape"&&wp&&(t.preventDefault(),Sue())}function a_(){wp&&Sue()}function o_(t){if(!wp||!Yd)return;const e=t.clientX-$4,n=t.clientY-Q4,r=Eue(Yd,e,n);let i=Math.round(wE+r);if(i=Math.max(0,Math.min(U4,i)),i===i_)return;i_=i;const s=je.getState().selectedElementId;s&&Y1===null&&(Y1=requestAnimationFrame(()=>{if(Y1=null,!wp||!Yd)return;const a=Uj(i_,Yd,t.shiftKey);Qj(s,a)}))}function l_(t){if(!wp||!Yd)return;document.removeEventListener("mousemove",o_),document.removeEventListener("mouseup",l_),document.removeEventListener("keydown",s_),window.removeEventListener("blur",a_);const e=Yd,n=t.clientX-$4,r=t.clientY-Q4,i=Eue(e,n,r);let s=Math.round(wE+i);s=Math.max(0,Math.min(U4,s));const a=t.shiftKey;EM();const o=je.getState().selectedElementId;if(!o)return;const l=Uj(s,e,a);Qj(o,l);const c=Di.getState().updateInlineStyle,u=Di.getState().updateInlineStyles;if(a)u(l);else{const h=Cue[e];c(h,`${s}px`)}}function PYe(t,e,n={}){const{onDragStart:r}=n;return C.useEffect(()=>()=>{wp&&(document.removeEventListener("mousemove",o_),document.removeEventListener("mouseup",l_),document.removeEventListener("keydown",s_),window.removeEventListener("blur",a_),EM())},[]),{handleDragStart:C.useCallback((s,a)=>{a.preventDefault(),a.stopPropagation(),t&&(wp&&(document.removeEventListener("mousemove",o_),document.removeEventListener("mouseup",l_),document.removeEventListener("keydown",s_),window.removeEventListener("blur",a_),EM()),wp=!0,Yd=s,wE=TYe(e),$4=a.clientX,Q4=a.clientY,U4=Math.min(t.width,t.height)/2,i_=wE,DYe(),r?.(),document.addEventListener("mousemove",o_),document.addEventListener("mouseup",l_),document.addEventListener("keydown",s_),window.addEventListener("blur",a_))},[t,e,r]),isDragging:wp,activeCorner:Yd}}function nw(t){if(!t||t==="reset"||t==="inherit"||t==="initial")return 0;const e=t.split(/\s+/)[0],n=parseFloat(e);return isNaN(n)?0:n}const u3={topLeft:"nwse-resize",topRight:"nesw-resize",bottomLeft:"nesw-resize",bottomRight:"nwse-resize"};function kYe({rect:t,borderRadius:e,individualRadii:n,onDragStart:r,onDragEnd:i}){const{handleDragStart:s,activeCorner:a}=PYe({width:t.width,height:t.height},e,{onDragStart:r}),o=C.useMemo(()=>{const c=nw(e);return{topLeft:nw(n?.topLeft)||c,topRight:nw(n?.topRight)||c,bottomLeft:nw(n?.bottomLeft)||c,bottomRight:nw(n?.bottomRight)||c}},[e,n]),l=C.useMemo(()=>{const c=u=>4+u*.5;return{topLeft:{x:c(o.topLeft),y:c(o.topLeft)},topRight:{x:t.width-c(o.topRight),y:c(o.topRight)},bottomLeft:{x:c(o.bottomLeft),y:t.height-c(o.bottomLeft)},bottomRight:{x:t.width-c(o.bottomRight),y:t.height-c(o.bottomRight)}}},[t.width,t.height,o]);return d.jsxs("div",{className:"border-radius-handles",children:[d.jsx("div",{className:`border-radius-handle top-left ${a==="topLeft"?"active":""}`,style:{left:l.topLeft.x,top:l.topLeft.y,cursor:u3.topLeft},onMouseDown:c=>s("topLeft",c),title:`Border Radius: ${o.topLeft}px`,children:d.jsx("div",{className:"handle-inner"})}),d.jsx("div",{className:`border-radius-handle top-right ${a==="topRight"?"active":""}`,style:{left:l.topRight.x,top:l.topRight.y,cursor:u3.topRight},onMouseDown:c=>s("topRight",c),title:`Border Radius: ${o.topRight}px`,children:d.jsx("div",{className:"handle-inner"})}),d.jsx("div",{className:`border-radius-handle bottom-left ${a==="bottomLeft"?"active":""}`,style:{left:l.bottomLeft.x,top:l.bottomLeft.y,cursor:u3.bottomLeft},onMouseDown:c=>s("bottomLeft",c),title:`Border Radius: ${o.bottomLeft}px`,children:d.jsx("div",{className:"handle-inner"})}),d.jsx("div",{className:`border-radius-handle bottom-right ${a==="bottomRight"?"active":""}`,style:{left:l.bottomRight.x,top:l.bottomRight.y,cursor:u3.bottomRight},onMouseDown:c=>s("bottomRight",c),title:`Border Radius: ${o.bottomRight}px`,children:d.jsx("div",{className:"handle-inner"})}),a&&d.jsxs("div",{className:"border-radius-tooltip",children:[o[a],"px"]})]})}function HH(){const t=je(B=>B.selectedElementId),e=je(B=>B.selectedElementIds||[]),n=je(B=>B.multiSelectMode||!1);BYe("SelectionOverlay",t||"none");const r=je(B=>B.overlayOpacity),[i,s]=C.useState(null),[a,o]=C.useState(""),[l,c]=C.useState(new Map),u=C.useRef(null),h=C.useRef(null),f=C.useRef(null),p=Di(B=>{const D=B.selectedElement?.computedStyle?.borderRadius;return B.selectedElement?.style?.borderRadius||D}),m=C.useMemo(()=>{const B=je.getState().elementsMap;return(t?B.get(t):null)?.tag||a||""},[t,a]),v=C.useCallback((B=!1)=>{const D=()=>{const T=u.current;if(!T?.contentDocument||!t){s(null);return}let M=T.contentDocument.querySelector(`[data-element-id="${t}"]`);if(M||je.getState().elementsMap.get(t)?.tag==="body"&&T.contentDocument.body.getAttribute("data-element-id")&&(M=T.contentDocument.body),!M){s(null),o("");return}const R=M.getBoundingClientRect(),k={top:R.top,left:R.left,width:R.width,height:R.height};s(k),o(M.tagName.toLowerCase())};B?(h.current!==null&&(cancelAnimationFrame(h.current),h.current=null),D()):(h.current!==null&&cancelAnimationFrame(h.current),h.current=requestAnimationFrame(()=>{h.current=null,D()}))},[t]),A=C.useCallback(()=>{const B=u.current;if(!B?.contentDocument||e.length===0){c(new Map);return}const D=new Map;e.forEach(T=>{let M=B.contentDocument.querySelector(`[data-element-id="${T}"]`);if(M||je.getState().elementsMap.get(T)?.tag==="body"&&B.contentDocument.body.getAttribute("data-element-id")&&(M=B.contentDocument.body),M){const R=M.getBoundingClientRect();D.set(T,{rect:{top:R.top,left:R.left,width:R.width,height:R.height},tag:M.tagName.toLowerCase()})}}),c(D)},[e]),x=C.useCallback(()=>{f.current!==null&&cancelAnimationFrame(f.current),f.current=requestAnimationFrame(()=>{f.current=null,A()})},[A]),E=C.useMemo(()=>Array.from(l.entries()).map(([B,D])=>({id:B,rect:{left:D.rect.left,top:D.rect.top,right:D.rect.left+D.rect.width,bottom:D.rect.top+D.rect.height,width:D.rect.width,height:D.rect.height},isPrimary:B===t})),[l,t]),w=IYe(E,u);if(C.useEffect(()=>{n&&e.length>0&&x()},[n,e,x]),C.useEffect(()=>{if(!t||!u.current?.contentDocument)return;const B=u.current.contentDocument.querySelector(`[data-element-id="${t}"]`);if(!B)return;const D=new ResizeObserver(v);return D.observe(B),()=>{D.disconnect()}},[t,v]),C.useEffect(()=>{const B=Ja.getIframe();if(u.current=B,!B?.contentDocument){requestAnimationFrame(()=>{s(null),o("")});return}const D=M=>{if(M.origin===window.location.origin)if(M.data.type==="ELEMENT_SELECTED"&&M.data.payload?.rect){const{top:R,left:k,width:L,height:F}=M.data.payload.rect;s({top:R,left:k,width:L,height:F}),o(M.data.payload.tag||""),h.current!==null&&(cancelAnimationFrame(h.current),h.current=null)}else if(M.data.type==="ELEMENTS_DRAG_SELECTED")x();else if(M.data.type==="UPDATE_ELEMENT_PROPS"){if(M.data.payload?.rect){const{top:R,left:k,width:L,height:F}=M.data.payload.rect;s({top:R,left:k,width:L,height:F})}else n?x():v();M.data.payload?.tag&&o(M.data.payload.tag)}else M.data.type==="CLEAR_OVERLAY"&&(s(null),o(""),c(new Map))},T=()=>{n?x():v()};return window.addEventListener("message",D),t&&B?.contentWindow&&(n?x():v(),B.contentWindow.addEventListener("scroll",T),window.addEventListener("resize",T),window.addEventListener("scroll",T)),()=>{window.removeEventListener("message",D),B?.contentWindow&&B.contentWindow.removeEventListener("scroll",T),window.removeEventListener("resize",T),window.removeEventListener("scroll",T),h.current!==null&&(cancelAnimationFrame(h.current),h.current=null),f.current!==null&&(cancelAnimationFrame(f.current),f.current=null)}},[t,n,v,x]),n&&l.size>0){const B=E.length,D=w.length;return d.jsxs("div",{className:"overlay",children:[w.map(T=>{const M=T.id,R=T.isPrimary,k=je.getState().elementsMap.get(M),L=l.get(M),F=k?.tag||L?.tag||"";return d.jsxs("div",{className:`overlay-element multi-select ${R?"primary":"secondary"}`,style:{top:T.rect.top,left:T.rect.left,width:T.rect.width,height:T.rect.height,opacity:r/100},children:[R&&d.jsxs("div",{className:"overlay-info",children:[d.jsx("div",{className:"overlay-tag-parent",children:d.jsx(UN,{size:16})}),d.jsx("div",{className:"overlay-tag",children:F})]}),d.jsx("div",{className:"overlay-background"}),d.jsx("div",{className:"overlay-pattern",children:d.jsx("div",{className:"overlay-pattern-inner"})})]},`overlay-${M}-${R?"primary":"secondary"}`)}),D<B&&d.jsxs("div",{className:"overlay-stats",children:[D," / ",B," visible"]})]})}return i?d.jsx("div",{className:"overlay",children:d.jsxs("div",{className:"overlay-element",style:{top:i.top,left:i.left,width:i.width,height:i.height,opacity:r/100},children:[d.jsxs("div",{className:"overlay-info",children:[d.jsx("div",{className:"overlay-tag-parent",children:d.jsx(UN,{size:16})}),d.jsx("div",{className:"overlay-tag",children:m})]}),d.jsx("div",{title:"Drag to resize",className:"resize-handle"}),d.jsx("div",{className:"overlay-background"}),d.jsx("div",{className:"overlay-pattern",children:d.jsx("div",{className:"overlay-pattern-inner"})}),d.jsx(kYe,{rect:i,borderRadius:p})]})}):null}function GH(){const t=je(n=>n.showGrid),e=je(n=>n.gridSize);return t?d.jsx("div",{className:"grid-overlay",style:{backgroundSize:`${e}px ${e}px`}}):null}function wue(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=t.child;for(;r;){const i=wue(r,e,n);if(i)return i;r=r.sibling}}function _ue(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const Hj=_ue(C.createContext(null));let Iue=class extends C.Component{render(){return C.createElement(Hj.Provider,{value:this._reactInternals},this.props.children)}};function NYe(){const t=C.useContext(Hj);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=C.useId();return C.useMemo(()=>{for(const n of[t,t?.alternate]){if(!n)continue;const r=wue(n,!1,i=>{let s=i.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(r)return r}},[t,e])}const LYe=Symbol.for("react.context"),FYe=t=>t!==null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===LYe;function jYe(){const t=NYe(),[e]=C.useState(()=>new Map);e.clear();let n=t;for(;n;){const r=n.type;FYe(r)&&r!==Hj&&!e.has(r)&&e.set(r,C.use(_ue(r))),n=n.return}return e}function OYe(){const t=jYe();return C.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>C.createElement(e,null,C.createElement(n.Provider,{...r,value:t.get(n)})),e=>C.createElement(Iue,{...e})),[t])}var Vn=(t=>(t.Application="application",t.WebGLPipes="webgl-pipes",t.WebGLPipesAdaptor="webgl-pipes-adaptor",t.WebGLSystem="webgl-system",t.WebGPUPipes="webgpu-pipes",t.WebGPUPipesAdaptor="webgpu-pipes-adaptor",t.WebGPUSystem="webgpu-system",t.CanvasSystem="canvas-system",t.CanvasPipesAdaptor="canvas-pipes-adaptor",t.CanvasPipes="canvas-pipes",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t.MaskEffect="mask-effect",t.BlendMode="blend-mode",t.TextureSource="texture-source",t.Environment="environment",t.ShapeBuilder="shape-builder",t.Batcher="batcher",t))(Vn||{});const z6=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},d3=(t,e)=>z6(t).priority??e,ha={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(z6).forEach(e=>{e.type.forEach(n=>this._removeHandlers[n]?.(e))}),this},add(...t){return t.map(z6).forEach(e=>{e.type.forEach(n=>{const r=this._addHandlers,i=this._queue;r[n]?r[n]?.(e):(i[n]=i[n]||[],i[n]?.push(e))})}),this},handle(t,e,n){const r=this._addHandlers,i=this._removeHandlers;if(r[t]||i[t])throw new Error(`Extension type ${t} already has a handler`);r[t]=e,i[t]=n;const s=this._queue;return s[t]&&(s[t]?.forEach(a=>e(a)),delete s[t]),this},handleByMap(t,e){return this.handle(t,n=>{n.name&&(e[n.name]=n.ref)},n=>{n.name&&delete e[n.name]})},handleByNamedList(t,e,n=-1){return this.handle(t,r=>{e.findIndex(s=>s.name===r.name)>=0||(e.push({name:r.name,value:r.ref}),e.sort((s,a)=>d3(a.value,n)-d3(s.value,n)))},r=>{const i=e.findIndex(s=>s.name===r.name);i!==-1&&e.splice(i,1)})},handleByList(t,e,n=-1){return this.handle(t,r=>{e.includes(r.ref)||(e.push(r.ref),e.sort((i,s)=>d3(s,n)-d3(i,n)))},r=>{const i=e.indexOf(r.ref);i!==-1&&e.splice(i,1)})},mixin(t,...e){for(const n of e)Object.defineProperties(t.prototype,Object.getOwnPropertyDescriptors(n))}},zYe={extension:{type:Vn.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await fn(()=>import("./browserAll-SnQZ860Z.js"),__vite__mapDeps([82,83,84]))}},$Ye={extension:{type:Vn.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await fn(()=>import("./webworkerAll-BjL32ljG.js"),__vite__mapDeps([83,84]))}};class la{constructor(e,n,r){this._x=n||0,this._y=r||0,this._observer=e}clone(e){return new la(e??this._observer,this._x,this._y)}set(e=0,n=e){return(this._x!==e||this._y!==n)&&(this._x=e,this._y=n,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var kk={exports:{}},VH;function QYe(){return VH||(VH=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new i(u,h||l,f),m=n?n+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,h;if(this._eventsCount===0)return c;for(h in u=this._events)e.call(u,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=n?n+c:c,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,p=h.length,m=new Array(p);f<p;f++)m[f]=h[f].fn;return m},o.prototype.listenerCount=function(c){var u=n?n+c:c,h=this._events[u];return h?h.fn?1:h.length:0},o.prototype.emit=function(c,u,h,f,p,m){var v=n?n+c:c;if(!this._events[v])return!1;var A=this._events[v],x=arguments.length,E,w;if(A.fn){switch(A.once&&this.removeListener(c,A.fn,void 0,!0),x){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,u),!0;case 3:return A.fn.call(A.context,u,h),!0;case 4:return A.fn.call(A.context,u,h,f),!0;case 5:return A.fn.call(A.context,u,h,f,p),!0;case 6:return A.fn.call(A.context,u,h,f,p,m),!0}for(w=1,E=new Array(x-1);w<x;w++)E[w-1]=arguments[w];A.fn.apply(A.context,E)}else{var B=A.length,D;for(w=0;w<B;w++)switch(A[w].once&&this.removeListener(c,A[w].fn,void 0,!0),x){case 1:A[w].fn.call(A[w].context);break;case 2:A[w].fn.call(A[w].context,u);break;case 3:A[w].fn.call(A[w].context,u,h);break;case 4:A[w].fn.call(A[w].context,u,h,f);break;default:if(!E)for(D=1,E=new Array(x-1);D<x;D++)E[D-1]=arguments[D];A[w].fn.apply(A[w].context,E)}}return!0},o.prototype.on=function(c,u,h){return s(this,c,u,h,!1)},o.prototype.once=function(c,u,h){return s(this,c,u,h,!0)},o.prototype.removeListener=function(c,u,h,f){var p=n?n+c:c;if(!this._events[p])return this;if(!u)return a(this,p),this;var m=this._events[p];if(m.fn)m.fn===u&&(!f||m.once)&&(!h||m.context===h)&&a(this,p);else{for(var v=0,A=[],x=m.length;v<x;v++)(m[v].fn!==u||f&&!m[v].once||h&&m[v].context!==h)&&A.push(m[v]);A.length?this._events[p]=A.length===1?A[0]:A:a(this,p)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&a(this,u)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(kk)),kk.exports}var UYe=QYe();const Op=qg(UYe),HYe=Math.PI*2,GYe=180/Math.PI,VYe=Math.PI/180;class no{constructor(e=0,n=0){this.x=0,this.y=0,this.x=e,this.y=n}clone(){return new no(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,n=e){return this.x=e,this.y=n,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Nk.x=0,Nk.y=0,Nk}}const Nk=new no;class fi{constructor(e=1,n=0,r=0,i=1,s=0,a=0){this.array=null,this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=a}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,n,r,i,s,a){return this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=a,this}toArray(e,n){this.array||(this.array=new Float32Array(9));const r=n||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,n){n=n||new no;const r=e.x,i=e.y;return n.x=this.a*r+this.c*i+this.tx,n.y=this.b*r+this.d*i+this.ty,n}applyInverse(e,n){n=n||new no;const r=this.a,i=this.b,s=this.c,a=this.d,o=this.tx,l=this.ty,c=1/(r*a+s*-i),u=e.x,h=e.y;return n.x=a*c*u+-s*c*h+(l*s-o*a)*c,n.y=r*c*h+-i*c*u+(-l*r+o*i)*c,n}translate(e,n){return this.tx+=e,this.ty+=n,this}scale(e,n){return this.a*=e,this.d*=n,this.c*=e,this.b*=n,this.tx*=e,this.ty*=n,this}rotate(e){const n=Math.cos(e),r=Math.sin(e),i=this.a,s=this.c,a=this.tx;return this.a=i*n-this.b*r,this.b=i*r+this.b*n,this.c=s*n-this.d*r,this.d=s*r+this.d*n,this.tx=a*n-this.ty*r,this.ty=a*r+this.ty*n,this}append(e){const n=this.a,r=this.b,i=this.c,s=this.d;return this.a=e.a*n+e.b*i,this.b=e.a*r+e.b*s,this.c=e.c*n+e.d*i,this.d=e.c*r+e.d*s,this.tx=e.tx*n+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*s+this.ty,this}appendFrom(e,n){const r=e.a,i=e.b,s=e.c,a=e.d,o=e.tx,l=e.ty,c=n.a,u=n.b,h=n.c,f=n.d;return this.a=r*c+i*h,this.b=r*u+i*f,this.c=s*c+a*h,this.d=s*u+a*f,this.tx=o*c+l*h+n.tx,this.ty=o*u+l*f+n.ty,this}setTransform(e,n,r,i,s,a,o,l,c){return this.a=Math.cos(o+c)*s,this.b=Math.sin(o+c)*s,this.c=-Math.sin(o-l)*a,this.d=Math.cos(o-l)*a,this.tx=e-(r*this.a+i*this.c),this.ty=n-(r*this.b+i*this.d),this}prepend(e){const n=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const r=this.a,i=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this}decompose(e){const n=this.a,r=this.b,i=this.c,s=this.d,a=e.pivot,o=-Math.atan2(-i,s),l=Math.atan2(r,n),c=Math.abs(o+l);return c<1e-5||Math.abs(HYe-c)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=l),e.scale.x=Math.sqrt(n*n+r*r),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(a.x*n+a.y*i),e.position.y=this.ty+(a.x*r+a.y*s),e}invert(){const e=this.a,n=this.b,r=this.c,i=this.d,s=this.tx,a=e*i-n*r;return this.a=i/a,this.b=-n/a,this.c=-r/a,this.d=e/a,this.tx=(r*this.ty-i*s)/a,this.ty=-(e*this.ty-n*s)/a,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new fi;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return KYe.identity()}static get shared(){return WYe.identity()}}const WYe=new fi,KYe=new fi,Rx=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Px=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],kx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Nx=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],$6=[],Bue=[],h3=Math.sign;function qYe(){for(let t=0;t<16;t++){const e=[];$6.push(e);for(let n=0;n<16;n++){const r=h3(Rx[t]*Rx[n]+kx[t]*Px[n]),i=h3(Px[t]*Rx[n]+Nx[t]*Px[n]),s=h3(Rx[t]*kx[n]+kx[t]*Nx[n]),a=h3(Px[t]*kx[n]+Nx[t]*Nx[n]);for(let o=0;o<16;o++)if(Rx[o]===r&&Px[o]===i&&kx[o]===s&&Nx[o]===a){e.push(o);break}}}for(let t=0;t<16;t++){const e=new fi;e.set(Rx[t],Px[t],kx[t],Nx[t],0,0),Bue.push(e)}}qYe();const vs={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Rx[t],uY:t=>Px[t],vX:t=>kx[t],vY:t=>Nx[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>$6[t][e],sub:(t,e)=>$6[t][vs.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?vs.S:vs.N:Math.abs(e)*2<=Math.abs(t)?t>0?vs.E:vs.W:e>0?t>0?vs.SE:vs.SW:t>0?vs.NE:vs.NW,matrixAppendRotationInv:(t,e,n=0,r=0)=>{const i=Bue[vs.inv(e)];i.tx=n,i.ty=r,t.append(i)},transformRectCoords:(t,e,n,r)=>{const{x:i,y:s,width:a,height:o}=t,{x:l,y:c,width:u,height:h}=e;return n===vs.E?(r.set(i+l,s+c,a,o),r):n===vs.S?r.set(u-s-o+l,i+c,o,a):n===vs.W?r.set(u-i-a+l,h-s-o+c,a,o):n===vs.N?r.set(s+l,h-i-a+c,o,a):r.set(i+l,s+c,a,o)}},f3=[new no,new no,new no,new no];class es{constructor(e=0,n=0,r=0,i=0){this.type="rectangle",this.x=Number(e),this.y=Number(n),this.width=Number(r),this.height=Number(i)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new es(0,0,0,0)}clone(){return new es(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,n){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&n>=this.y&&n<this.y+this.height}strokeContains(e,n,r,i=.5){const{width:s,height:a}=this;if(s<=0||a<=0)return!1;const o=this.x,l=this.y,c=r*(1-i),u=r-c,h=o-c,f=o+s+c,p=l-c,m=l+a+c,v=o+u,A=o+s-u,x=l+u,E=l+a-u;return e>=h&&e<=f&&n>=p&&n<=m&&!(e>v&&e<A&&n>x&&n<E)}intersects(e,n){if(!n){const R=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=R)return!1;const L=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>L}const r=this.left,i=this.right,s=this.top,a=this.bottom;if(i<=r||a<=s)return!1;const o=f3[0].set(e.left,e.top),l=f3[1].set(e.left,e.bottom),c=f3[2].set(e.right,e.top),u=f3[3].set(e.right,e.bottom);if(c.x<=o.x||l.y<=o.y)return!1;const h=Math.sign(n.a*n.d-n.b*n.c);if(h===0||(n.apply(o,o),n.apply(l,l),n.apply(c,c),n.apply(u,u),Math.max(o.x,l.x,c.x,u.x)<=r||Math.min(o.x,l.x,c.x,u.x)>=i||Math.max(o.y,l.y,c.y,u.y)<=s||Math.min(o.y,l.y,c.y,u.y)>=a))return!1;const f=h*(l.y-o.y),p=h*(o.x-l.x),m=f*r+p*s,v=f*i+p*s,A=f*r+p*a,x=f*i+p*a;if(Math.max(m,v,A,x)<=f*o.x+p*o.y||Math.min(m,v,A,x)>=f*u.x+p*u.y)return!1;const E=h*(o.y-c.y),w=h*(c.x-o.x),B=E*r+w*s,D=E*i+w*s,T=E*r+w*a,M=E*i+w*a;return!(Math.max(B,D,T,M)<=E*o.x+w*o.y||Math.min(B,D,T,M)>=E*u.x+w*u.y)}pad(e=0,n=e){return this.x-=e,this.y-=n,this.width+=e*2,this.height+=n*2,this}fit(e){const n=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(r-n,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,n=.001){const r=Math.ceil((this.x+this.width-n)*e)/e,i=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=r-this.x,this.height=i-this.y,this}scale(e,n=e){return this.x*=e,this.y*=n,this.width*=e,this.height*=n,this}enlarge(e){const n=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=r-n,this.y=i,this.height=s-i,this}getBounds(e){return e||(e=new es),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const n=e.x,r=e.y,i=e.x+e.width,s=e.y+e.height;return n>=this.x&&n<this.x+this.width&&r>=this.y&&r<this.y+this.height&&i>=this.x&&i<this.x+this.width&&s>=this.y&&s<this.y+this.height}set(e,n,r,i){return this.x=e,this.y=n,this.width=r,this.height=i,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Lk={default:-1};function Ua(t="default"){return Lk[t]===void 0&&(Lk[t]=-1),++Lk[t]}const WH=new Set,Ri="8.0.0",YYe="8.3.4",k1={quiet:!1,noColor:!1},kr=(t,e,n=3)=>{if(k1.quiet||WH.has(e))return;let r=new Error().stack;const i=`${e}
Deprecated since v${t}`,s=typeof console.groupCollapsed=="function"&&!k1.noColor;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",i):(r=r.split(`
`).splice(n).join(`
`),s?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",i),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",i),console.warn(r))),WH.add(e)};Object.defineProperties(kr,{quiet:{get:()=>k1.quiet,set:t=>{k1.quiet=t},enumerable:!0,configurable:!1},noColor:{get:()=>k1.noColor,set:t=>{k1.noColor=t},enumerable:!0,configurable:!1}});const Tue=()=>{};function _E(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function KH(t){return!(t&t-1)&&!!t}function Mue(t){const e={};for(const n in t)t[n]!==void 0&&(e[n]=t[n]);return e}const qH=Object.create(null);function XYe(t){const e=qH[t];return e===void 0&&(qH[t]=Ua("resource")),e}const Due=class Rue extends Op{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...Rue.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){kr(Ri,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=XYe(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};Due.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let IE=Due;const Pue=class kue extends Op{constructor(e={}){super(),this.options=e,this.uid=Ua("textureSource"),this._resourceType="textureSource",this._resourceId=Ua("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...kue.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new IE(Mue(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){this.style!==e&&(this._style?.off("change",this._onStyleChange,this),this._style=e,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Ua("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,n,r){r||(r=this._resolution),e||(e=this.width),n||(n=this.height);const i=Math.round(e*r),s=Math.round(n*r);return this.width=i/r,this.height=s/r,this._resolution=r,this.pixelWidth===i&&this.pixelHeight===s?!1:(this._refreshPOT(),this.pixelWidth=i,this.pixelHeight=s,this.emit("resize",this),this._resourceId=Ua("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=KH(this.pixelWidth)&&KH(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};Pue.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let zp=Pue;class Gj extends zp{constructor(e){const n=e.resource||new Float32Array(e.width*e.height*4);let r=e.format;r||(n instanceof Float32Array?r="rgba32float":n instanceof Int32Array||n instanceof Uint32Array?r="rgba32uint":n instanceof Int16Array||n instanceof Uint16Array?r="rgba16uint":(n instanceof Int8Array,r="bgra8unorm")),super({...e,resource:n,format:r}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}Gj.extension=Vn.TextureSource;const YH=new fi;class JYe{constructor(e,n){this.mapCoord=new fi,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof n>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=n,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){this.texture!==e&&(this._texture?.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,n){n===void 0&&(n=e);const r=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],a=e[i+1];n[i]=s*r.a+a*r.c+r.tx,n[i+1]=s*r.b+a*r.d+r.ty}return n}update(){const e=this._texture;this._updateID++;const n=e.uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const r=e.orig,i=e.trim;i&&(YH.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(YH));const s=e.source,a=this.uClampFrame,o=this.clampMargin/s._resolution,l=this.clampOffset/s._resolution;return a[0]=(e.frame.x+o+l)/s.width,a[1]=(e.frame.y+o+l)/s.height,a[2]=(e.frame.x+e.frame.width-o+l)/s.width,a[3]=(e.frame.y+e.frame.height-o+l)/s.height,this.uClampOffset[0]=this.clampOffset/s.pixelWidth,this.uClampOffset[1]=this.clampOffset/s.pixelHeight,this.isSimple=e.frame.width===s.width&&e.frame.height===s.height&&e.rotate===0,!0}}class Gn extends Op{constructor({source:e,label:n,frame:r,orig:i,trim:s,defaultAnchor:a,defaultBorders:o,rotate:l,dynamic:c}={}){if(super(),this.uid=Ua("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new es,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=n,this.source=e?.source??new zp,this.noFrame=!r,r)this.frame.copyFrom(r);else{const{width:u,height:h}=this._source;this.frame.width=u,this.frame.height=h}this.orig=i||this.frame,this.trim=s,this.rotate=l??0,this.defaultAnchor=a,this.defaultBorders=o,this.destroyed=!1,this.dynamic=c||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new JYe(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:n}=this,{width:r,height:i}=this._source,s=n.x/r,a=n.y/i,o=n.width/r,l=n.height/i;let c=this.rotate;if(c){const u=o/2,h=l/2,f=s+u,p=a+h;c=vs.add(c,vs.NW),e.x0=f+u*vs.uX(c),e.y0=p+h*vs.uY(c),c=vs.add(c,2),e.x1=f+u*vs.uX(c),e.y1=p+h*vs.uY(c),c=vs.add(c,2),e.x2=f+u*vs.uX(c),e.y2=p+h*vs.uY(c),c=vs.add(c,2),e.x3=f+u*vs.uX(c),e.y3=p+h*vs.uY(c)}else e.x0=s,e.y0=a,e.x1=s+o,e.y1=a,e.x2=s+o,e.y2=a+l,e.x3=s,e.y3=a+l}destroy(e=!1){this._source&&(this._source.off("resize",this.update,this),e&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return kr(Ri,"Texture.baseTexture is now Texture.source"),this._source}}Gn.EMPTY=new Gn({label:"EMPTY",source:new zp({label:"EMPTY"})});Gn.EMPTY.destroy=Tue;Gn.WHITE=new Gn({source:new Gj({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Gn.WHITE.destroy=Tue;function ZYe(t,e,n){const{width:r,height:i}=n.orig,s=n.trim;if(s){const a=s.width,o=s.height;t.minX=s.x-e._x*r,t.maxX=t.minX+a,t.minY=s.y-e._y*i,t.maxY=t.minY+o}else t.minX=-e._x*r,t.maxX=t.minX+r,t.minY=-e._y*i,t.maxY=t.minY+i}const XH=new fi;class Np{constructor(e=1/0,n=1/0,r=-1/0,i=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=XH,this.minX=e,this.minY=n,this.maxX=r,this.maxY=i}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new es);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=XH,this}set(e,n,r,i){this.minX=e,this.minY=n,this.maxX=r,this.maxY=i}addFrame(e,n,r,i,s){s||(s=this.matrix);const a=s.a,o=s.b,l=s.c,c=s.d,u=s.tx,h=s.ty;let f=this.minX,p=this.minY,m=this.maxX,v=this.maxY,A=a*e+l*n+u,x=o*e+c*n+h;A<f&&(f=A),x<p&&(p=x),A>m&&(m=A),x>v&&(v=x),A=a*r+l*n+u,x=o*r+c*n+h,A<f&&(f=A),x<p&&(p=x),A>m&&(m=A),x>v&&(v=x),A=a*e+l*i+u,x=o*e+c*i+h,A<f&&(f=A),x<p&&(p=x),A>m&&(m=A),x>v&&(v=x),A=a*r+l*i+u,x=o*r+c*i+h,A<f&&(f=A),x<p&&(p=x),A>m&&(m=A),x>v&&(v=x),this.minX=f,this.minY=p,this.maxX=m,this.maxY=v}addRect(e,n){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,n)}addBounds(e,n){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,n)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const n=this.minX,r=this.minY,i=this.maxX,s=this.maxY,{a,b:o,c:l,d:c,tx:u,ty:h}=e;let f=a*n+l*r+u,p=o*n+c*r+h;this.minX=f,this.minY=p,this.maxX=f,this.maxY=p,f=a*i+l*r+u,p=o*i+c*r+h,this.minX=f<this.minX?f:this.minX,this.minY=p<this.minY?p:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=p>this.maxY?p:this.maxY,f=a*n+l*s+u,p=o*n+c*s+h,this.minX=f<this.minX?f:this.minX,this.minY=p<this.minY?p:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=p>this.maxY?p:this.maxY,f=a*i+l*s+u,p=o*i+c*s+h,this.minX=f<this.minX?f:this.minX,this.minY=p<this.minY?p:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=p>this.maxY?p:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,n,r,i){return this.minX<e&&(this.minX=e),this.maxX>n&&(this.maxX=n),this.minY<r&&(this.minY=r),this.maxY>i&&(this.maxY=i),this}pad(e,n=e){return this.minX-=e,this.maxX+=e,this.minY-=n,this.maxY+=n,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Np(this.minX,this.minY,this.maxX,this.maxY)}scale(e,n=e){return this.minX*=e,this.minY*=n,this.maxX*=e,this.maxY*=n,this}get x(){return this.minX}set x(e){const n=this.maxX-this.minX;this.minX=e,this.maxX=e+n}get y(){return this.minY}set y(e){const n=this.maxY-this.minY;this.minY=e,this.maxY=e+n}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,n,r,i){let s=this.minX,a=this.minY,o=this.maxX,l=this.maxY;i||(i=this.matrix);const c=i.a,u=i.b,h=i.c,f=i.d,p=i.tx,m=i.ty;for(let v=n;v<r;v+=2){const A=e[v],x=e[v+1],E=c*A+h*x+p,w=u*A+f*x+m;s=E<s?E:s,a=w<a?w:a,o=E>o?E:o,l=w>l?w:l}this.minX=s,this.minY=a,this.maxX=o,this.maxY=l}containsPoint(e,n){return this.minX<=e&&this.minY<=n&&this.maxX>=e&&this.maxY>=n}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var eXe={grad:.9,turn:360,rad:360/(2*Math.PI)},qm=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},bl=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},sf=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},Nue=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},JH=function(t){return{r:sf(t.r,0,255),g:sf(t.g,0,255),b:sf(t.b,0,255),a:sf(t.a)}},Fk=function(t){return{r:bl(t.r),g:bl(t.g),b:bl(t.b),a:bl(t.a,3)}},tXe=/^#([0-9a-f]{3,8})$/i,p3=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},Lue=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=Math.max(e,n,r),a=s-Math.min(e,n,r),o=a?s===e?(n-r)/a:s===n?2+(r-e)/a:4+(e-n)/a:0;return{h:60*(o<0?o+6:o),s:s?a/s*100:0,v:s/255*100,a:i}},Fue=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var s=Math.floor(e),a=r*(1-n),o=r*(1-(e-s)*n),l=r*(1-(1-e+s)*n),c=s%6;return{r:255*[r,o,a,a,l,r][c],g:255*[l,r,r,o,a,a][c],b:255*[a,a,l,r,r,o][c],a:i}},ZH=function(t){return{h:Nue(t.h),s:sf(t.s,0,100),l:sf(t.l,0,100),a:sf(t.a)}},eG=function(t){return{h:bl(t.h),s:bl(t.s),l:bl(t.l),a:bl(t.a,3)}},tG=function(t){return Fue((n=(e=t).s,{h:e.h,s:(n*=((r=e.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:e.a}));var e,n,r},c_=function(t){return{h:(e=Lue(t)).h,s:(i=(200-(n=e.s))*(r=e.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,n,r,i},nXe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,rXe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,iXe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,sXe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Q6={string:[[function(t){var e=tXe.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?bl(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?bl(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=iXe.exec(t)||sXe.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:JH({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=nXe.exec(t)||rXe.exec(t);if(!e)return null;var n,r,i=ZH({h:(n=e[1],r=e[2],r===void 0&&(r="deg"),Number(n)*(eXe[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return tG(i)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=i===void 0?1:i;return qm(e)&&qm(n)&&qm(r)?JH({r:Number(e),g:Number(n),b:Number(r),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,n=t.s,r=t.l,i=t.a,s=i===void 0?1:i;if(!qm(e)||!qm(n)||!qm(r))return null;var a=ZH({h:Number(e),s:Number(n),l:Number(r),a:Number(s)});return tG(a)},"hsl"],[function(t){var e=t.h,n=t.s,r=t.v,i=t.a,s=i===void 0?1:i;if(!qm(e)||!qm(n)||!qm(r))return null;var a=(function(o){return{h:Nue(o.h),s:sf(o.s,0,100),v:sf(o.v,0,100),a:sf(o.a)}})({h:Number(e),s:Number(n),v:Number(r),a:Number(s)});return Fue(a)},"hsv"]]},nG=function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0](t);if(r)return[r,e[n][1]]}return[null,void 0]},aXe=function(t){return typeof t=="string"?nG(t.trim(),Q6.string):typeof t=="object"&&t!==null?nG(t,Q6.object):[null,void 0]},jk=function(t,e){var n=c_(t);return{h:n.h,s:sf(n.s+100*e,0,100),l:n.l,a:n.a}},Ok=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},rG=function(t,e){var n=c_(t);return{h:n.h,s:n.s,l:sf(n.l+100*e,0,100),a:n.a}},U6=(function(){function t(e){this.parsed=aXe(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return bl(Ok(this.rgba),2)},t.prototype.isDark=function(){return Ok(this.rgba)<.5},t.prototype.isLight=function(){return Ok(this.rgba)>=.5},t.prototype.toHex=function(){return e=Fk(this.rgba),n=e.r,r=e.g,i=e.b,a=(s=e.a)<1?p3(bl(255*s)):"","#"+p3(n)+p3(r)+p3(i)+a;var e,n,r,i,s,a},t.prototype.toRgb=function(){return Fk(this.rgba)},t.prototype.toRgbString=function(){return e=Fk(this.rgba),n=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+n+", "+r+", "+i+", "+s+")":"rgb("+n+", "+r+", "+i+")";var e,n,r,i,s},t.prototype.toHsl=function(){return eG(c_(this.rgba))},t.prototype.toHslString=function(){return e=eG(c_(this.rgba)),n=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+s+")":"hsl("+n+", "+r+"%, "+i+"%)";var e,n,r,i,s},t.prototype.toHsv=function(){return e=Lue(this.rgba),{h:bl(e.h),s:bl(e.s),v:bl(e.v),a:bl(e.a,3)};var e},t.prototype.invert=function(){return Tg({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Tg(jk(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Tg(jk(this.rgba,-e))},t.prototype.grayscale=function(){return Tg(jk(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Tg(rG(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Tg(rG(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Tg({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):bl(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=c_(this.rgba);return typeof e=="number"?Tg({h:e,s:n.s,l:n.l,a:n.a}):bl(n.h)},t.prototype.isEqual=function(e){return this.toHex()===Tg(e).toHex()},t})(),Tg=function(t){return t instanceof U6?t:new U6(t)},iG=[],oXe=function(t){t.forEach(function(e){iG.indexOf(e)<0&&(e(U6,Q6),iG.push(e))})};function lXe(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var s={};t.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,l,c=r[this.toHex()];if(c)return c;if(a?.closest){var u=this.toRgb(),h=1/0,f="black";if(!s.length)for(var p in n)s[p]=new t(n[p]).toRgb();for(var m in n){var v=(o=u,l=s[m],Math.pow(o.r-l.r,2)+Math.pow(o.g-l.g,2)+Math.pow(o.b-l.b,2));v<h&&(h=v,f=m)}return f}},e.string.push([function(a){var o=a.toLowerCase(),l=o==="transparent"?"#0000":n[o];return l?new t(l).toRgb():null},"name"])}oXe([lXe]);const BE=class zw{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof zw)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,n){const r=typeof e;if(r!==typeof n)return!1;if(r==="number"||r==="string"||e instanceof Number)return e===n;if(Array.isArray(e)&&Array.isArray(n)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(n))return e.length!==n.length?!1:e.every((s,a)=>s===n[a]);if(e!==null&&n!==null){const s=Object.keys(e),a=Object.keys(n);return s.length!==a.length?!1:s.every(o=>e[o]===n[o])}return e===n}toRgba(){const[e,n,r,i]=this._components;return{r:e,g:n,b:r,a:i}}toRgb(){const[e,n,r]=this._components;return{r:e,g:n,b:r}}toRgbaString(){const[e,n,r]=this.toUint8RgbArray();return`rgba(${e},${n},${r},${this.alpha})`}toUint8RgbArray(e){const[n,r,i]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(n*255),e[1]=Math.round(r*255),e[2]=Math.round(i*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[n,r,i,s]=this._components;return e[0]=n,e[1]=r,e[2]=i,e[3]=s,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[n,r,i]=this._components;return e[0]=n,e[1]=r,e[2]=i,e}toNumber(){return this._int}toBgrNumber(){const[e,n,r]=this.toUint8RgbArray();return(r<<16)+(n<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[n,r,i,s]=zw._temp.setValue(e)._components;return this._components[0]*=n,this._components[1]*=r,this._components[2]*=i,this._components[3]*=s,this._refreshInt(),this._value=null,this}premultiply(e,n=!0){return n&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,n=!0){if(e===1)return(255<<24)+this._int;if(e===0)return n?0:this._int;let r=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return n&&(r=r*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(r<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const n=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-n.length)+n}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let n,r,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const a=e;n=(a>>16&255)/255,r=(a>>8&255)/255,i=(a&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[n,r,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[n,r,i,s=255]=e,n/=255,r/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const o=zw.HEX_PATTERN.exec(e);o&&(e=`#${o[2]}`)}const a=Tg(e);a.isValid()&&({r:n,g:r,b:i,a:s}=a.rgba,n/=255,r/=255,i/=255)}if(n!==void 0)this._components[0]=n,this._components[1]=r,this._components[2]=i,this._components[3]=s,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,n,r]=this._components;this._int=(e*255<<16)+(n*255<<8)+(r*255|0)}_clamp(e,n=0,r=1){return typeof e=="number"?Math.min(Math.max(e,n),r):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,n),r)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof zw||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};BE.shared=new BE;BE._temp=new BE;BE.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let io=BE;const cXe={cullArea:null,cullable:!1,cullableChildren:!0};let zk=0;const sG=500;function Zs(...t){zk!==sG&&(zk++,zk===sG?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...t))}const WI={_registeredResources:new Set,register(t){this._registeredResources.add(t)},unregister(t){this._registeredResources.delete(t)},release(){this._registeredResources.forEach(t=>t.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(t){return this._registeredResources.has(t)},reset(){this._registeredResources.clear()}};class uXe{constructor(e,n){this._pool=[],this._count=0,this._index=0,this._classType=e,n&&this.prepopulate(n)}prepopulate(e){for(let n=0;n<e;n++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){let n;return this._index>0?n=this._pool[--this._index]:(n=new this._classType,this._count++),n.init?.(e),n}return(e){e.reset?.(),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class dXe{constructor(){this._poolsByClass=new Map}prepopulate(e,n){this.getPool(e).prepopulate(n)}get(e,n){return this.getPool(e).get(n)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new uXe(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(n=>{const r=e[n._classType.name]?n._classType.name+n._classType.ID:n._classType.name;e[r]={free:n.totalFree,used:n.totalUsed,size:n.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}const lf=new dXe;WI.register(lf);const hXe={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(t){typeof t=="boolean"&&t===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(t===!0?{}:t))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(t){kr("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(t)}};function fXe(t,e,n){const r=t.length;let i;if(e>=r||n===0)return;n=e+n>r?r-e:n;const s=r-n;for(i=e;i<s;++i)t[i]=t[i+n];t.length=s}const pXe={allowChildren:!0,removeChildren(t=0,e){const n=e??this.children.length,r=n-t,i=[];if(r>0&&r<=n){for(let a=n-1;a>=t;a--){const o=this.children[a];o&&(i.push(o),o.parent=null)}fXe(this.children,t,n);const s=this.renderGroup||this.parentRenderGroup;s&&s.removeChildren(i);for(let a=0;a<i.length;++a){const o=i[a];o.parentRenderLayer?.detach(o),this.emit("childRemoved",o,this,a),i[a].emit("removed",this)}return i.length>0&&this._didViewChangeTick++,i}else if(r===0&&this.children.length===0)return i;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(t){const e=this.getChildAt(t);return this.removeChild(e)},getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]},setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(t),this.addChildAt(t,e)},getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(t,e){this.allowChildren||kr(Ri,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:n}=this;if(e<0||e>n.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${n.length}`);if(t.parent){const i=t.parent.children.indexOf(t);if(t.parent===this&&i===e)return t;i!==-1&&t.parent.children.splice(i,1)}e===n.length?n.push(t):n.splice(e,0,t),t.parent=this,t.didChange=!0,t._updateFlags=15;const r=this.renderGroup||this.parentRenderGroup;return r&&r.addChild(t),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",t,this,e),t.emit("added",this),t},swapChildren(t,e){if(t===e)return;const n=this.getChildIndex(t),r=this.getChildIndex(e);this.children[n]=e,this.children[r]=t;const i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...t){return t.length===1?this.reparentChildAt(t[0],this.children.length):(t.forEach(e=>this.reparentChildAt(e,this.children.length)),t[0])},reparentChildAt(t,e){if(t.parent===this)return this.setChildIndex(t,e),t;const n=t.worldTransform.clone();t.removeFromParent(),this.addChildAt(t,e);const r=this.worldTransform.clone();return r.invert(),n.prepend(r),t.setFromMatrix(n),t},replaceChild(t,e){t.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(t)),e.setFromMatrix(t.localTransform),e.updateLocalTransform(),this.removeChild(t)}},gXe={collectRenderables(t,e,n){this.parentRenderLayer&&this.parentRenderLayer!==n||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(t,e,n):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,t):this.collectRenderablesWithEffects(t,e,n))},collectRenderablesSimple(t,e,n){const r=this.children,i=r.length;for(let s=0;s<i;s++)r[s].collectRenderables(t,e,n)},collectRenderablesWithEffects(t,e,n){const{renderPipes:r}=e;for(let i=0;i<this.effects.length;i++){const s=this.effects[i];r[s.pipe].push(s,this,t)}this.collectRenderablesSimple(t,e,n);for(let i=this.effects.length-1;i>=0;i--){const s=this.effects[i];r[s.pipe].pop(s,this,t)}}};class aG{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class mXe{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let n=0;n<this._tests.length;n++){const r=this._tests[n];if(r.test(e))return lf.get(r.maskClass,e)}return e}returnMaskEffect(e){lf.return(e)}}const H6=new mXe;ha.handleByList(Vn.MaskEffect,H6._effectClasses);const AXe={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const t=this.renderGroup||this.parentRenderGroup;t&&(t.structureDidChange=!0)},addEffect(t){this.effects.indexOf(t)===-1&&(this.effects.push(t),this.effects.sort((n,r)=>n.priority-r.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(t){const e=this.effects.indexOf(t);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(t){const e=this._maskEffect;e?.mask!==t&&(e&&(this.removeEffect(e),H6.returnMaskEffect(e),this._maskEffect=null),t!=null&&(this._maskEffect=H6.getMaskEffect(t),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(t){this._maskOptions={...this._maskOptions,...t},t.mask&&(this.mask=t.mask),this._markStructureAsChanged()},set filters(t){!Array.isArray(t)&&t&&(t=[t]);const e=this._filterEffect||(this._filterEffect=new aG);t=t;const n=t?.length>0,r=e.filters?.length>0,i=n!==r;t=Array.isArray(t)?t.slice(0):t,e.filters=Object.freeze(t),i&&(n?this.addEffect(e):(this.removeEffect(e),e.filters=t??null))},get filters(){return this._filterEffect?.filters},set filterArea(t){this._filterEffect||(this._filterEffect=new aG),this._filterEffect.filterArea=t},get filterArea(){return this._filterEffect?.filterArea}},yXe={label:null,get name(){return kr(Ri,"Container.name property has been removed, use Container.label instead"),this.label},set name(t){kr(Ri,"Container.name property has been removed, use Container.label instead"),this.label=t},getChildByName(t,e=!1){return this.getChildByLabel(t,e)},getChildByLabel(t,e=!1){const n=this.children;for(let r=0;r<n.length;r++){const i=n[r];if(i.label===t||t instanceof RegExp&&t.test(i.label))return i}if(e)for(let r=0;r<n.length;r++){const s=n[r].getChildByLabel(t,!0);if(s)return s}return null},getChildrenByLabel(t,e=!1,n=[]){const r=this.children;for(let i=0;i<r.length;i++){const s=r[i];(s.label===t||t instanceof RegExp&&t.test(s.label))&&n.push(s)}if(e)for(let i=0;i<r.length;i++)r[i].getChildrenByLabel(t,!0,n);return n}},du=lf.getPool(fi),w0=lf.getPool(Np),vXe=new fi,xXe={getFastGlobalBounds(t,e){e||(e=new Np),e.clear(),this._getGlobalBoundsRecursive(!!t,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const n=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(n.worldTransform),e},_getGlobalBoundsRecursive(t,e,n){let r=e;if(t&&this.parentRenderLayer&&this.parentRenderLayer!==n||this.localDisplayStatus!==7||!this.measurable)return;const i=!!this.effects.length;if((this.renderGroup||i)&&(r=w0.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const a=this.bounds;r.addFrame(a.minX,a.minY,a.maxX,a.maxY,this.groupTransform)}const s=this.children;for(let a=0;a<s.length;a++)s[a]._getGlobalBoundsRecursive(t,r,n)}if(i){let s=!1;const a=this.renderGroup||this.parentRenderGroup;for(let o=0;o<this.effects.length;o++)this.effects[o].addBounds&&(s||(s=!0,r.applyMatrix(a.worldTransform)),this.effects[o].addBounds(r,!0));s&&r.applyMatrix(a.worldTransform.copyTo(vXe).invert()),e.addBounds(r),w0.return(r)}else this.renderGroup&&(e.addBounds(r,this.relativeGroupTransform),w0.return(r))}};function jue(t,e,n){n.clear();let r,i;return t.parent?e?r=t.parent.worldTransform:(i=du.get().identity(),r=Vj(t,i)):r=fi.IDENTITY,Oue(t,n,r,e),i&&du.return(i),n.isValid||n.set(0,0,0,0),n}function Oue(t,e,n,r){if(!t.visible||!t.measurable)return;let i;r?i=t.worldTransform:(t.updateLocalTransform(),i=du.get(),i.appendFrom(t.localTransform,n));const s=e,a=!!t.effects.length;if(a&&(e=w0.get().clear()),t.boundsArea)e.addRect(t.boundsArea,i);else{const o=t.bounds;o&&!o.isEmpty()&&(e.matrix=i,e.addBounds(o));for(let l=0;l<t.children.length;l++)Oue(t.children[l],e,i,r)}if(a){for(let o=0;o<t.effects.length;o++)t.effects[o].addBounds?.(e);s.addBounds(e,fi.IDENTITY),w0.return(e)}r||du.return(i)}function Vj(t,e){const n=t.parent;return n&&(Vj(n,e),n.updateLocalTransform(),e.append(n.localTransform)),e}function zue(t,e){if(t===16777215||!e)return e;if(e===16777215||!t)return t;const n=t>>16&255,r=t>>8&255,i=t&255,s=e>>16&255,a=e>>8&255,o=e&255,l=n*s/255|0,c=r*a/255|0,u=i*o/255|0;return(l<<16)+(c<<8)+u}const oG=16777215;function lG(t,e){return t===oG?e:e===oG?t:zue(t,e)}function pT(t){return((t&255)<<16)+(t&65280)+(t>>16&255)}const bXe={getGlobalAlpha(t){if(t)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,n=this.parent;for(;n;)e*=n.alpha,n=n.parent;return e},getGlobalTransform(t=new fi,e){if(e)return t.copyFrom(this.worldTransform);this.updateLocalTransform();const n=Vj(this,du.get().identity());return t.appendFrom(this.localTransform,n),du.return(n),t},getGlobalTint(t){if(t)return this.renderGroup?pT(this.renderGroup.worldColor):this.parentRenderGroup?pT(lG(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,n=this.parent;for(;n;)e=lG(e,n.localColor),n=n.parent;return pT(e)}};function $ue(t,e,n){return e.clear(),n||(n=fi.IDENTITY),Que(t,e,n,t,!0),e.isValid||e.set(0,0,0,0),e}function Que(t,e,n,r,i){let s;if(i)s=du.get(),s=n.copyTo(s);else{if(!t.visible||!t.measurable)return;t.updateLocalTransform();const l=t.localTransform;s=du.get(),s.appendFrom(l,n)}const a=e,o=!!t.effects.length;if(o&&(e=w0.get().clear()),t.boundsArea)e.addRect(t.boundsArea,s);else{t.renderPipeId&&(e.matrix=s,e.addBounds(t.bounds));const l=t.children;for(let c=0;c<l.length;c++)Que(l[c],e,s,r,!1)}if(o){for(let l=0;l<t.effects.length;l++)t.effects[l].addLocalBounds?.(e,r);a.addBounds(e,fi.IDENTITY),w0.return(e)}du.return(s)}function Uue(t,e){const n=t.children;for(let r=0;r<n.length;r++){const i=n[r],s=i.uid,a=(i._didViewChangeTick&65535)<<16|i._didContainerChangeTick&65535,o=e.index;(e.data[o]!==s||e.data[o+1]!==a)&&(e.data[e.index]=s,e.data[e.index+1]=a,e.didChange=!0),e.index=o+2,i.children.length&&Uue(i,e)}return e.didChange}const CXe=new fi,EXe={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(t,e){const n=Math.sign(this.scale.x)||1;e!==0?this.scale.x=t/e*n:this.scale.x=n},_setHeight(t,e){const n=Math.sign(this.scale.y)||1;e!==0?this.scale.y=t/e*n:this.scale.y=n},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Np});const t=this._localBoundsCacheData;return t.index=1,t.didChange=!1,t.data[0]!==this._didViewChangeTick&&(t.didChange=!0,t.data[0]=this._didViewChangeTick),Uue(this,t),t.didChange&&$ue(this,t.localBounds,CXe),t.localBounds},getBounds(t,e){return jue(this,t,e||new Np)}},SXe={_onRender:null,set onRender(t){const e=this.renderGroup||this.parentRenderGroup;if(!t){this._onRender&&e?.removeOnRender(this),this._onRender=null;return}this._onRender||e?.addOnRender(this),this._onRender=t},get onRender(){return this._onRender}},wXe={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(_Xe))}};function _Xe(t,e){return t._zIndex-e._zIndex}const IXe={getGlobalPosition(t=new no,e=!1){return this.parent?this.parent.toGlobal(this._position,t,e):(t.x=this._position.x,t.y=this._position.y),t},toGlobal(t,e,n=!1){const r=this.getGlobalTransform(du.get(),n);return e=r.apply(t,e),du.return(r),e},toLocal(t,e,n,r){e&&(t=e.toGlobal(t,n,r));const i=this.getGlobalTransform(du.get(),r);return n=i.applyInverse(t,n),du.return(i),n}};class Hue{constructor(){this.uid=Ua("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let BXe=0;class TXe{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new IE(this.textureOptions)}createTexture(e,n,r){const i=new zp({...this.textureOptions,width:e,height:n,resolution:1,antialias:r,autoGarbageCollect:!1});return new Gn({source:i,label:`texturePool_${BXe++}`})}getOptimalTexture(e,n,r=1,i){let s=Math.ceil(e*r-1e-6),a=Math.ceil(n*r-1e-6);s=_E(s),a=_E(a);const o=(s<<17)+(a<<1)+(i?1:0);this._texturePool[o]||(this._texturePool[o]=[]);let l=this._texturePool[o].pop();return l||(l=this.createTexture(s,a,i)),l.source._resolution=r,l.source.width=s/r,l.source.height=a/r,l.source.pixelWidth=s,l.source.pixelHeight=a,l.frame.x=0,l.frame.y=0,l.frame.width=e,l.frame.height=n,l.updateUvs(),this._poolKeyHash[l.uid]=o,l}getSameSizeTexture(e,n=!1){const r=e.source;return this.getOptimalTexture(e.width,e.height,r._resolution,n)}returnTexture(e,n=!1){const r=this._poolKeyHash[e.uid];n&&(e.source.style=this.textureStyle),this._texturePool[r].push(e)}clear(e){if(e=e!==!1,e)for(const n in this._texturePool){const r=this._texturePool[n];if(r)for(let i=0;i<r.length;i++)r[i].destroy(!0)}this._texturePool={}}}const Gue=new TXe;WI.register(Gue);class MXe{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new fi,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Hue,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const n=e.children;for(let r=0;r<n.length;r++){const i=n[r];i._updateFlags=15,this.addChild(i)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Gue.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const n=this.childrenToUpdate[e];n.list.fill(null),n.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const n=this.renderGroupChildren.indexOf(e);n>-1&&this.renderGroupChildren.splice(n,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const n=e.children;for(let r=0;r<n.length;r++)this.addChild(n[r])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const n=e.children;for(let r=0;r<n.length;r++)this.removeChild(n[r])}removeChildren(e){for(let n=0;n<e.length;n++)this.removeChild(e[n])}onChildUpdate(e){let n=this.childrenToUpdate[e.relativeRenderGroupDepth];n||(n=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),n.list[n.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let n=0;n<this._onRenderContainers.length;n++)this._onRenderContainers[n]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const n=this.root.children;for(let r=0;r<n.length;r++)this._getChildren(n[r],e);return e}_getChildren(e,n=[]){if(n.push(e),e.renderGroup)return n;const r=e.children;for(let i=0;i<r.length;i++)this._getChildren(r[i],n);return n}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new fi),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new fi),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new fi),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function DXe(t,e,n={}){for(const r in e)!n[r]&&e[r]!==void 0&&(t[r]=e[r])}const $k=new la(null),g3=new la(null),Qk=new la(null,1,1),m3=new la(null),cG=1,RXe=2,Uk=4;class hr extends Op{constructor(e={}){super(),this.uid=Ua("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new fi,this.relativeGroupTransform=new fi,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new la(this,0,0),this._scale=Qk,this._pivot=g3,this._origin=m3,this._skew=$k,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],DXe(this,e,{children:!0,parent:!0,effects:!0}),e.children?.forEach(n=>this.addChild(n)),e.parent?.addChild(this)}static mixin(e){kr("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),ha.mixin(hr,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||kr(Ri,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let i=0;i<e.length;i++)this.addChild(e[i]);return e[0]}const n=e[0],r=this.renderGroup||this.parentRenderGroup;return n.parent===this?(this.children.splice(this.children.indexOf(n),1),this.children.push(n),r&&(r.structureDidChange=!0),n):(n.parent&&n.parent.removeChild(n),this.children.push(n),this.sortableChildren&&(this.sortDirty=!0),n.parent=this,n.didChange=!0,n._updateFlags=15,r&&r.addChild(n),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this),this._didViewChangeTick++,n._zIndex!==0&&n.depthOfChildModified(),n)}removeChild(...e){if(e.length>1){for(let i=0;i<e.length;i++)this.removeChild(e[i]);return e[0]}const n=e[0],r=this.children.indexOf(n);return r>-1&&(this._didViewChangeTick++,this.children.splice(r,1),this.renderGroup?this.renderGroup.removeChild(n):this.parentRenderGroup&&this.parentRenderGroup.removeChild(n),n.parentRenderLayer&&n.parentRenderLayer.detach(n),n.parent=null,this.emit("childRemoved",n,this,r),n.emit("removed",this)),n}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),this.renderGroup=lf.get(MXe,this),this.groupTransform=fi.IDENTITY,e?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),lf.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new fi),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*GYe}set angle(e){this.rotation=e*VYe}get pivot(){return this._pivot===g3&&(this._pivot=new la(this,0,0)),this._pivot}set pivot(e){this._pivot===g3&&(this._pivot=new la(this,0,0),this._origin!==m3&&Zs("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===$k&&(this._skew=new la(this,0,0)),this._skew}set skew(e){this._skew===$k&&(this._skew=new la(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===Qk&&(this._scale=new la(this,1,1)),this._scale}set scale(e){this._scale===Qk&&(this._scale=new la(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===m3&&(this._origin=new la(this,0,0)),this._origin}set origin(e){this._origin===m3&&(this._origin=new la(this,0,0),this._pivot!==g3&&Zs("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const n=this.getLocalBounds().width;this._setWidth(e,n)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const n=this.getLocalBounds().height;this._setHeight(e,n)}getSize(e){e||(e={});const n=this.getLocalBounds();return e.width=Math.abs(this.scale.x*n.width),e.height=Math.abs(this.scale.y*n.height),e}setSize(e,n){const r=this.getLocalBounds();typeof e=="object"?(n=e.height??e.width,e=e.width):n??(n=e),e!==void 0&&this._setWidth(e,r.width),n!==void 0&&this._setHeight(n,r.height)}_updateSkew(){const e=this._rotation,n=this._skew;this._cx=Math.cos(e+n._y),this._sx=Math.sin(e+n._y),this._cy=-Math.sin(e-n._x),this._sy=Math.cos(e-n._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const n=this.localTransform,r=this._scale,i=this._pivot,s=this._origin,a=this._position,o=r._x,l=r._y,c=i._x,u=i._y,h=-s._x,f=-s._y;n.a=this._cx*o,n.b=this._sx*o,n.c=this._cy*l,n.d=this._sy*l,n.tx=a._x-(c*n.a+u*n.c)+(h*n.a+f*n.c)-h,n.ty=a._y-(c*n.b+u*n.d)+(h*n.b+f*n.d)-f}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=cG,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const r=io.shared.setValue(e??16777215).toBgrNumber();r!==this.localColor&&(this.localColor=r,this._updateFlags|=cG,this._onUpdate())}get tint(){return pT(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=RXe,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const n=e?2:0;(this.localDisplayStatus&2)!==n&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Uk,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const n=e?0:4;(this.localDisplayStatus&4)!==n&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Uk,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const n=e?1:0;(this.localDisplayStatus&1)!==n&&(this._updateFlags|=Uk,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){if(this.destroyed)return;this.destroyed=!0;let n;if(this.children.length&&(n=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e?.children)&&n)for(let i=0;i<n.length;++i)n[i].destroy(e);this.renderGroup?.destroy(),this.renderGroup=null}}ha.mixin(hr,pXe,xXe,IXe,SXe,EXe,AXe,yXe,wXe,cXe,hXe,bXe,gXe);class qb extends hr{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new Np(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const n=this.bounds,{x:r,y:i}=e;return r>=n.minX&&r<=n.maxX&&i>=n.minY&&i<=n.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){super.destroy(e),this._bounds=null;for(const n in this._gpuData)this._gpuData[n].destroy?.();this._gpuData=null}collectRenderablesSimple(e,n,r){const{renderPipes:i}=n;i.blendMode.pushBlendMode(this,this.groupBlendMode,e),i[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;const a=this.children,o=a.length;for(let l=0;l<o;l++)a[l].collectRenderables(e,n,r);i.blendMode.popBlendMode(e)}}let dd=class G6 extends qb{constructor(e=Gn.EMPTY){e instanceof Gn&&(e={texture:e});const{texture:n=Gn.EMPTY,anchor:r,roundPixels:i,width:s,height:a,...o}=e;super({label:"Sprite",...o}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new la({_onUpdate:()=>{this.onViewUpdate()}}),r?this.anchor=r:n.defaultAnchor&&(this.anchor=n.defaultAnchor),this.texture=n,this.allowChildren=!1,this.roundPixels=i??!1,s!==void 0&&(this.width=s),a!==void 0&&(this.height=a)}static from(e,n=!1){return e instanceof Gn?new G6(e):new G6(Gn.from(e,n))}set texture(e){e||(e=Gn.EMPTY);const n=this._texture;n!==e&&(n&&n.dynamic&&n.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return ZYe(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return kr("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,n=this._texture,r=this._bounds,{width:i,height:s}=n.orig;r.minX=-e._x*i,r.maxX=r.minX+i,r.minY=-e._y*s,r.maxY=r.minY+s}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){const r=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(r)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,n){typeof e=="object"?(n=e.height??e.width,e=e.width):n??(n=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),n!==void 0&&this._setHeight(n,this._texture.orig.height)}};const PXe=new Np;function Vue(t,e,n){const r=PXe;t.measurable=!0,jue(t,n,r),e.addBoundsMask(r),t.measurable=!1}function Wue(t,e,n){const r=w0.get();t.measurable=!0;const i=du.get().identity(),s=Kue(t,n,i);$ue(t,r,s),t.measurable=!1,e.addBoundsMask(r),du.return(i),w0.return(r)}function Kue(t,e,n){return t?(t!==e&&(Kue(t.parent,e,n),t.updateLocalTransform(),n.append(t.localTransform)),n):(Zs("Mask bounds, renderable is not inside the root container"),n)}class que{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof dd),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,n){this.inverse||Vue(this.mask,e,n)}addLocalBounds(e,n){Wue(this.mask,e,n)}containsPoint(e,n){const r=this.mask;return n(r,e)}destroy(){this.reset()}static test(e){return e instanceof dd}}que.extension=Vn.MaskEffect;class Yue{constructor(e){this.priority=0,this.pipe="colorMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}Yue.extension=Vn.MaskEffect;class Xue{constructor(e){this.priority=0,this.pipe="stencilMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,n){Vue(this.mask,e,n)}addLocalBounds(e,n){Wue(this.mask,e,n)}containsPoint(e,n){const r=this.mask;return n(r,e)}destroy(){this.reset()}static test(e){return e instanceof hr}}Xue.extension=Vn.MaskEffect;const kXe={createCanvas:(t,e)=>{const n=document.createElement("canvas");return n.width=t,n.height=e,n},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")};let uG=kXe;const ls={get(){return uG},set(t){uG=t}};class Wj extends zp{constructor(e){e.resource||(e.resource=ls.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,n=this.height,r=this._resolution){const i=super.resize(e,n,r);return i&&this.resizeCanvas(),i}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Wj.extension=Vn.TextureSource;class Pb extends zp{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}Pb.extension=Vn.TextureSource;var V6=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(V6||{});class Hk{constructor(e,n=null,r=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=n,this.priority=r,this._once=i}match(e,n=null){return this._fn===e&&this._context===n}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const n=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=e?null:n,this.previous=null,n}}const Jue=class Qd{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Hk(null,null,1/0),this.deltaMS=1/Qd.targetFPMS,this.elapsedMS=1/Qd.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,n,r=V6.NORMAL){return this._addListener(new Hk(e,n,r))}addOnce(e,n,r=V6.NORMAL){return this._addListener(new Hk(e,n,r,!0))}_addListener(e){let n=this._head.next,r=this._head;if(!n)e.connect(r);else{for(;n;){if(e.priority>n.priority){e.connect(r);break}r=n,n=n.next}e.previous||e.connect(r)}return this._startIfPossible(),this}remove(e,n){let r=this._head.next;for(;r;)r.match(e,n)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,n=this._head;for(;n=n.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let n;if(e>this.lastTime){if(n=this.elapsedMS=e-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*Qd.targetFPMS;const r=this._head;let i=r.next;for(;i;)i=i.emit(this);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const n=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,n)/1e3,Qd.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const n=Math.max(this.minFPS,e);this._minElapsedMS=1/(n/1e3)}}static get shared(){if(!Qd._shared){const e=Qd._shared=new Qd;e.autoStart=!0,e._protected=!0}return Qd._shared}static get system(){if(!Qd._system){const e=Qd._system=new Qd;e.autoStart=!0,e._protected=!0}return Qd._system}};Jue.targetFPMS=.06;let A0=Jue,Gk;async function Zue(){return Gk??(Gk=(async()=>{const e=ls.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const n=await new Promise(a=>{const o=document.createElement("video");o.onloadeddata=()=>a(o),o.onerror=()=>a(null),o.autoplay=!1,o.crossOrigin="anonymous",o.preload="auto",o.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",o.load()});if(!n)return"premultiply-alpha-on-upload";const r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n);const s=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,s),e.deleteFramebuffer(i),e.deleteTexture(r),e.getExtension("WEBGL_lose_context")?.loseContext(),s[0]<=s[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Gk}const H4=class ede extends zp{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...ede.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=A0.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,n=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(n.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await Zue(),this._load=new Promise((r,i)=>{this.isValid?r(this):(this._resolve=r,this._reject=i,n.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${n.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(A0.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(A0.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(A0.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};H4.extension=Vn.TextureSource;H4.defaultOptions={...zp.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};H4.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let u_=H4;const bp=(t,e,n=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(r=>typeof r=="string"||n?e(r):r):t);class NXe{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const n=this._cache.get(e);return n||Zs(`[Assets] Asset id ${e} was not found in the Cache`),n}set(e,n){const r=bp(e);let i;for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];if(c.test(n)){i=c.getCacheableAssets(r,n);break}}const s=new Map(Object.entries(i||{}));i||r.forEach(l=>{s.set(l,n)});const a=[...s.keys()],o={cacheKeys:a,keys:r};r.forEach(l=>{this._cacheMap.set(l,o)}),a.forEach(l=>{const c=i?i[l]:n;this._cache.has(l)&&this._cache.get(l)!==c&&Zs("[Cache] already has key:",l),this._cache.set(l,s.get(l))})}remove(e){if(!this._cacheMap.has(e)){Zs(`[Assets] Asset id ${e} was not found in the Cache`);return}const n=this._cacheMap.get(e);n.cacheKeys.forEach(i=>{this._cache.delete(i)}),n.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const Fs=new NXe,W6=[];ha.handleByList(Vn.TextureSource,W6);function tde(t={}){const e=t&&t.resource,n=e?t.resource:t,r=e?t:{resource:t};for(let i=0;i<W6.length;i++){const s=W6[i];if(s.test(n))return new s(r)}throw new Error(`Could not find a source type for resource: ${r.resource}`)}function LXe(t={},e=!1){const n=t&&t.resource,r=n?t.resource:t,i=n?t:{resource:t};if(!e&&Fs.has(r))return Fs.get(r);const s=new Gn({source:tde(i)});return s.on("destroy",()=>{Fs.has(r)&&Fs.remove(r)}),e||Fs.set(r,s),s}function FXe(t,e=!1){return typeof t=="string"?Fs.get(t):t instanceof zp?new Gn({source:t}):LXe(t,e)}Gn.from=FXe;zp.from=tde;ha.add(que,Yue,Xue,u_,Pb,Wj,Gj);var Jy=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(Jy||{});function cp(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function rw(t){return t.split("?")[0].split("#")[0]}function jXe(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function OXe(t,e,n){return t.replace(new RegExp(jXe(e),"g"),n)}function zXe(t,e){let n="",r=0,i=-1,s=0,a=-1;for(let o=0;o<=t.length;++o){if(o<t.length)a=t.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){const l=n.lastIndexOf("/");if(l!==n.length-1){l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length===2||n.length===1){n="",r=0,i=o,s=0;continue}}}else n.length>0?n+=`/${t.slice(i+1,o)}`:n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s!==-1?++s:s=-1}return n}const hd={toPosix(t){return OXe(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){cp(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const n=/^[^/:]+:\/{0,2}/.exec(t);return n?n[0]:""},toAbsolute(t,e,n){if(cp(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const r=rw(this.toPosix(e??ls.get().getBaseUrl())),i=rw(this.toPosix(n??this.rootname(r)));return t=this.toPosix(t),t.startsWith("/")?hd.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(r,t)},normalize(t){if(cp(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="";const n=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const r=t.endsWith("/");return t=zXe(t),t.length>0&&r&&(t+="/"),n?`/${t}`:e+t},isAbsolute(t){return cp(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let n=0;n<t.length;++n){const r=t[n];if(cp(r),r.length>0)if(e===void 0)e=r;else{const i=t[n-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${r}`:e+=`/${r}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(cp(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const n=e===47;let r=-1,i=!0;const s=this.getProtocol(t),a=t;t=t.slice(s.length);for(let o=t.length-1;o>=1;--o)if(e=t.charCodeAt(o),e===47){if(!i){r=o;break}}else i=!1;return r===-1?n?"/":this.isUrl(a)?s+t:s:n&&r===1?"//":s+t.slice(0,r)},rootname(t){cp(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const n=t.indexOf("/",e.length);n!==-1?e=t.slice(0,n):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){cp(t),e&&cp(e),t=rw(this.toPosix(t));let n=0,r=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let a=e.length-1,o=-1;for(s=t.length-1;s>=0;--s){const l=t.charCodeAt(s);if(l===47){if(!i){n=s+1;break}}else o===-1&&(i=!1,o=s+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(r=s):(a=-1,r=o))}return n===r?r=o:r===-1&&(r=t.length),t.slice(n,r)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!i){n=s+1;break}}else r===-1&&(i=!1,r=s+1);return r===-1?"":t.slice(n,r)},extname(t){cp(t),t=rw(this.toPosix(t));let e=-1,n=0,r=-1,i=!0,s=0;for(let a=t.length-1;a>=0;--a){const o=t.charCodeAt(a);if(o===47){if(!i){n=a+1;break}continue}r===-1&&(i=!1,r=a+1),o===46?e===-1?e=a:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||r===-1||s===0||s===1&&e===r-1&&e===n+1?"":t.slice(e,r)},parse(t){cp(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=rw(this.toPosix(t));let n=t.charCodeAt(0);const r=this.isAbsolute(t);let i;e.root=this.rootname(t),r||this.hasProtocol(t)?i=1:i=0;let s=-1,a=0,o=-1,l=!0,c=t.length-1,u=0;for(;c>=i;--c){if(n=t.charCodeAt(c),n===47){if(!l){a=c+1;break}continue}o===-1&&(l=!1,o=c+1),n===46?s===-1?s=c:u!==1&&(u=1):s!==-1&&(u=-1)}return s===-1||o===-1||u===0||u===1&&s===o-1&&s===a+1?o!==-1&&(a===0&&r?e.base=e.name=t.slice(1,o):e.base=e.name=t.slice(a,o)):(a===0&&r?(e.name=t.slice(1,s),e.base=t.slice(1,o)):(e.name=t.slice(a,s),e.base=t.slice(a,o)),e.ext=t.slice(s,o)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function nde(t,e,n,r,i){const s=e[n];for(let a=0;a<s.length;a++){const o=s[a];n<e.length-1?nde(t.replace(r[n],o),e,n+1,r,i):i.push(t.replace(r[n],o))}}function $Xe(t){const e=/\{(.*?)\}/g,n=t.match(e),r=[];if(n){const i=[];n.forEach(s=>{const a=s.substring(1,s.length-1).split(",");i.push(a)}),nde(t,i,0,n,r)}else r.push(t);return r}const SM=t=>!Array.isArray(t);class eS{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,n)=>`${e}${this._bundleIdConnector}${n}`,extractAssetIdFromBundle:(e,n)=>n.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const n=e;this._defaultSearchParams=Object.keys(n).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`).join("&")}}getAlias(e){const{alias:n,src:r}=e;return bp(n||r,s=>typeof s=="string"?s:Array.isArray(s)?s.map(a=>a?.src??a):s?.src?s.src:s,!0)}addManifest(e){this._manifest&&Zs("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(e,n){const r=[];let i=n;Array.isArray(n)||(i=Object.entries(n).map(([s,a])=>typeof a=="string"||Array.isArray(a)?{alias:s,src:a}:{alias:s,...a})),i.forEach(s=>{const a=s.src,o=s.alias;let l;if(typeof o=="string"){const c=this._createBundleAssetId(e,o);r.push(c),l=[o,c]}else{const c=o.map(u=>this._createBundleAssetId(e,u));r.push(...c),l=[...o,...c]}this.add({...s,alias:l,src:a})}),this._bundles[e]=r}add(e){const n=[];Array.isArray(e)?n.push(...e):n.push(e);let r;r=s=>{this.hasKey(s)&&Zs(`[Resolver] already has key: ${s} overwriting`)},bp(n).forEach(s=>{const{src:a}=s;let{data:o,format:l,loadParser:c,parser:u}=s;const h=bp(a).map(v=>typeof v=="string"?$Xe(v):Array.isArray(v)?v:[v]),f=this.getAlias(s);Array.isArray(f)?f.forEach(r):r(f);const p=[],m=v=>({...this._parsers.find(x=>x.test(v))?.parse(v),src:v});h.forEach(v=>{v.forEach(A=>{let x={};if(typeof A!="object"?x=m(A):(o=A.data??o,l=A.format??l,(A.loadParser||A.parser)&&(c=A.loadParser??c,u=A.parser??u),x={...m(A.src),...A}),!f)throw new Error(`[Resolver] alias is undefined for this asset: ${x.src}`);x=this._buildResolvedAsset(x,{aliases:f,data:o,format:l,loadParser:c,parser:u,progressSize:s.progressSize}),p.push(x)})}),f.forEach(v=>{this._assetMap[v]=p})})}resolveBundle(e){const n=SM(e);e=bp(e);const r={};return e.forEach(i=>{const s=this._bundles[i];if(s){const a=this.resolve(s),o={};for(const l in a){const c=a[l];o[this._extractAssetIdFromBundle(i,l)]=c}r[i]=o}}),n?r[e[0]]:r}resolveUrl(e){const n=this.resolve(e);if(typeof e!="string"){const r={};for(const i in n)r[i]=n[i].src;return r}return n.src}resolve(e){const n=SM(e);e=bp(e);const r={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const a=this._getPreferredOrder(s);a?.priority.forEach(o=>{a.params[o].forEach(l=>{const c=s.filter(u=>u[o]?u[o]===l:!1);c.length&&(s=c)})}),this._resolverHash[i]=s[0]}else this._resolverHash[i]=this._buildResolvedAsset({alias:[i],src:i},{});r[i]=this._resolverHash[i]}),n?r[e[0]]:r}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let n=0;n<e.length;n++){const r=e[n],i=this._preferredOrder.find(s=>s.params.format.includes(r.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const n=/\?/.test(e)?"&":"?";return`${e}${n}${this._defaultSearchParams}`}_buildResolvedAsset(e,n){const{aliases:r,data:i,loadParser:s,parser:a,format:o,progressSize:l}=n;return(this._basePath||this._rootPath)&&(e.src=hd.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=r??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=s??e.loadParser,e.parser=a??e.parser,e.format=o??e.format??QXe(e.src),l!==void 0&&(e.progressSize=l),e}}eS.RETINA_PREFIX=/@([0-9\.]+)x/;function QXe(t){return t.split(".").pop().split("?").shift().split("#").shift()}const K6=(t,e)=>{const n=e.split("?")[1];return n&&(t+=`?${n}`),t},rde=class $w{constructor(e,n){this.linkedSheets=[];let r=e;e?.source instanceof zp&&(r={texture:e,data:n});const{texture:i,data:s,cachePrefix:a=""}=r;this.cachePrefix=a,this._texture=i instanceof Gn?i:null,this.textureSource=i.source,this.textures={},this.animations={},this.data=s;const o=parseFloat(s.meta.scale);o?(this.resolution=o,i.source.resolution=this.resolution):this.resolution=i.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=$w.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let n=e;const r=$w.BATCH_SIZE;for(;n-e<r&&n<this._frameKeys.length;){const i=this._frameKeys[n],s=this._frames[i],a=s.frame;if(a){let o=null,l=null;const c=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,u=new es(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);s.rotated?o=new es(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):o=new es(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new es(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[i]=new Gn({source:this.textureSource,frame:o,orig:u,trim:l,rotate:s.rotated?2:0,defaultAnchor:s.anchor,defaultBorders:s.borders,label:i.toString()})}n++}}_processAnimations(){const e=this.data.animations||{};for(const n in e){this.animations[n]=[];for(let r=0;r<e[n].length;r++){const i=e[n][r];this.animations[n].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*$w.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*$w.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};rde.BATCH_SIZE=1e3;let dG=rde;const UXe=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function ide(t,e,n){const r={};if(t.forEach(i=>{r[i]=e}),Object.keys(e.textures).forEach(i=>{r[`${e.cachePrefix}${i}`]=e.textures[i]}),!n){const i=hd.dirname(t[0]);e.linkedSheets.forEach((s,a)=>{const o=ide([`${i}/${e.data.meta.related_multi_packs[a]}`],s,!0);Object.assign(r,o)})}return r}const HXe={extension:Vn.Asset,cache:{test:t=>t instanceof dG,getCacheableAssets:(t,e)=>ide(t,e,!1)},resolver:{extension:{type:Vn.ResolveParser,name:"resolveSpritesheet"},test:t=>{const n=t.split("?")[0].split("."),r=n.pop(),i=n.pop();return r==="json"&&UXe.includes(i)},parse:t=>{const e=t.split(".");return{resolution:parseFloat(eS.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:Vn.LoadParser,priority:Jy.Normal,name:"spritesheetLoader"},async testParse(t,e){return hd.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,n){const{texture:r,imageFilename:i,textureOptions:s,cachePrefix:a}=e?.data??{};let o=hd.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let l;if(r instanceof Gn)l=r;else{const h=K6(o+(i??t.meta.image),e.src);l=(await n.load([{src:h,data:s}]))[h]}const c=new dG({texture:l.source,data:t,cachePrefix:a});await c.parse();const u=t?.meta?.related_multi_packs;if(Array.isArray(u)){const h=[];for(const p of u){if(typeof p!="string")continue;let m=o+p;e.data?.ignoreMultiPack||(m=K6(m,e.src),h.push(n.load({src:m,data:{textureOptions:s,ignoreMultiPack:!0}})))}const f=await Promise.all(h);c.linkedSheets=f,f.forEach(p=>{p.linkedSheets=[c].concat(c.linkedSheets.filter(m=>m!==p))})}return c},async unload(t,e,n){await n.unload(t.textureSource._sourceOrigin),t.destroy(!1)}}};ha.add(HXe);var Vk=/iPhone/i,hG=/iPod/i,fG=/iPad/i,pG=/\biOS-universal(?:.+)Mac\b/i,Wk=/\bAndroid(?:.+)Mobile\b/i,gG=/Android/i,l1=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,A3=/Silk/i,Ym=/Windows Phone/i,mG=/\bWindows(?:.+)ARM\b/i,AG=/BlackBerry/i,yG=/BB10/i,vG=/Opera Mini/i,xG=/\b(CriOS|Chrome)(?:.+)Mobile/i,bG=/Mobile(?:.+)Firefox\b/i,CG=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function GXe(t){return function(e){return e.test(t)}}function EG(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var n=e.userAgent,r=n.split("[FBAN");typeof r[1]<"u"&&(n=r[0]),r=n.split("Twitter"),typeof r[1]<"u"&&(n=r[0]);var i=GXe(n),s={apple:{phone:i(Vk)&&!i(Ym),ipod:i(hG),tablet:!i(Vk)&&(i(fG)||CG(e))&&!i(Ym),universal:i(pG),device:(i(Vk)||i(hG)||i(fG)||i(pG)||CG(e))&&!i(Ym)},amazon:{phone:i(l1),tablet:!i(l1)&&i(A3),device:i(l1)||i(A3)},android:{phone:!i(Ym)&&i(l1)||!i(Ym)&&i(Wk),tablet:!i(Ym)&&!i(l1)&&!i(Wk)&&(i(A3)||i(gG)),device:!i(Ym)&&(i(l1)||i(A3)||i(Wk)||i(gG))||i(/\bokhttp\b/i)},windows:{phone:i(Ym),tablet:i(mG),device:i(Ym)||i(mG)},other:{blackberry:i(AG),blackberry10:i(yG),opera:i(vG),firefox:i(bG),chrome:i(xG),device:i(AG)||i(yG)||i(vG)||i(bG)||i(xG)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const VXe=EG.default??EG,_p=VXe(globalThis.navigator),Kk=Object.create(null),SG=Object.create(null);function Kj(t,e){let n=SG[t];return n===void 0&&(Kk[e]===void 0&&(Kk[e]=1),SG[t]=n=Kk[e]++),n}let y3;function sde(){return(!y3||y3?.isContextLost())&&(y3=ls.get().createCanvas().getContext("webgl",{})),y3}let v3;function WXe(){if(!v3){v3="mediump";const t=sde();t&&t.getShaderPrecisionFormat&&(v3=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?"highp":"mediump")}return v3}function KXe(t,e,n){return e?t:n?(t=t.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${t}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${t}
        `}function qXe(t,e,n){const r=n?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(t.substring(0,9)!=="precision"){let i=n?e.requestedFragmentPrecision:e.requestedVertexPrecision;return i==="highp"&&r!=="highp"&&(i="mediump"),`precision ${i} float;
${t}`}else if(r!=="highp"&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}function YXe(t,e){return e?`#version 300 es
${t}`:t}const XXe={},JXe={};function ZXe(t,{name:e="pixi-program"},n=!0){e=e.replace(/\s+/g,"-"),e+=n?"-fragment":"-vertex";const r=n?XXe:JXe;return r[e]?(r[e]++,e+=`-${r[e]}`):r[e]=1,t.indexOf("#define SHADER_NAME")!==-1?t:`${`#define SHADER_NAME ${e}`}
${t}`}function eJe(t,e){return e?t.replace("#version 300 es",""):t}const qk={stripVersion:eJe,ensurePrecision:qXe,addProgramDefines:KXe,setProgramName:ZXe,insertVersion:YXe},iw=Object.create(null),ade=class q6{constructor(e){e={...q6.defaultOptions,...e};const n=e.fragment.indexOf("#version 300 es")!==-1,r={stripVersion:n,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:WXe()},setProgramName:{name:e.name},addProgramDefines:n,insertVersion:n};let i=e.fragment,s=e.vertex;Object.keys(qk).forEach(a=>{const o=r[a];i=qk[a](i,o,!0),s=qk[a](s,o,!1)}),this.fragment=i,this.vertex=s,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=Kj(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,iw[this._cacheKey]=null}static from(e){const n=`${e.vertex}:${e.fragment}`;return iw[n]||(iw[n]=new q6(e),iw[n]._cacheKey=n),iw[n]}};ade.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let qj=ade;const wG={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function tJe(t){return wG[t]??wG.float32}const nJe={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function rJe({source:t,entryPoint:e}){const n={},r=t.indexOf(`fn ${e}`);if(r!==-1){const i=t.indexOf("->",r);if(i!==-1){const s=t.substring(r,i),a=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let o;for(;(o=a.exec(s))!==null;){const l=nJe[o[3]]??"float32";n[o[2]]={location:parseInt(o[1],10),format:l,stride:tJe(l).stride,offset:0,instance:!1,start:0}}}}return n}function Yk(t){const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,n=/@group\((\d+)\)/,r=/@binding\((\d+)\)/,i=/var(<[^>]+>)? (\w+)/,s=/:\s*(\w+)/,a=/struct\s+(\w+)\s*{([^}]+)}/g,o=/(\w+)\s*:\s*([\w\<\>]+)/g,l=/struct\s+(\w+)/,c=t.match(e)?.map(h=>({group:parseInt(h.match(n)[1],10),binding:parseInt(h.match(r)[1],10),name:h.match(i)[2],isUniform:h.match(i)[1]==="<uniform>",type:h.match(s)[1]}));if(!c)return{groups:[],structs:[]};const u=t.match(a)?.map(h=>{const f=h.match(l)[1],p=h.match(o).reduce((m,v)=>{const[A,x]=v.split(":");return m[A.trim()]=x.trim(),m},{});return p?{name:f,members:p}:null}).filter(({name:h})=>c.some(f=>f.type===h))??[];return{groups:c,structs:u}}var Qw=(t=>(t[t.VERTEX=1]="VERTEX",t[t.FRAGMENT=2]="FRAGMENT",t[t.COMPUTE=4]="COMPUTE",t))(Qw||{});function iJe({groups:t}){const e=[];for(let n=0;n<t.length;n++){const r=t[n];e[r.group]||(e[r.group]=[]),r.isUniform?e[r.group].push({binding:r.binding,visibility:Qw.VERTEX|Qw.FRAGMENT,buffer:{type:"uniform"}}):r.type==="sampler"?e[r.group].push({binding:r.binding,visibility:Qw.FRAGMENT,sampler:{type:"filtering"}}):r.type==="texture_2d"&&e[r.group].push({binding:r.binding,visibility:Qw.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function sJe({groups:t}){const e=[];for(let n=0;n<t.length;n++){const r=t[n];e[r.group]||(e[r.group]={}),e[r.group][r.name]=r.binding}return e}function aJe(t,e){const n=new Set,r=new Set,i=[...t.structs,...e.structs].filter(a=>n.has(a.name)?!1:(n.add(a.name),!0)),s=[...t.groups,...e.groups].filter(a=>{const o=`${a.name}-${a.binding}`;return r.has(o)?!1:(r.add(o),!0)});return{structs:i,groups:s}}const sw=Object.create(null);class KI{constructor(e){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:n,vertex:r,layout:i,gpuLayout:s,name:a}=e;if(this.name=a,this.fragment=n,this.vertex=r,n.source===r.source){const o=Yk(n.source);this.structsAndGroups=o}else{const o=Yk(r.source),l=Yk(n.source);this.structsAndGroups=aJe(o,l)}this.layout=i??sJe(this.structsAndGroups),this.gpuLayout=s??iJe(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:n}=this,r=e.source+n.source+e.entryPoint+n.entryPoint;this._layoutKey=Kj(r,"program")}get attributeData(){return this._attributeData??(this._attributeData=rJe(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,sw[this._cacheKey]=null}static from(e){const n=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return sw[n]||(sw[n]=new KI(e),sw[n]._cacheKey=n),sw[n]}}const ode=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],oJe=ode.reduce((t,e)=>(t[e]=!0,t),{});function lJe(t,e){switch(t){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const lde=class cde{constructor(e,n){this._touched=0,this.uid=Ua("uniform"),this._resourceType="uniformGroup",this._resourceId=Ua("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,n={...cde.defaultOptions,...n},this.uniformStructures=e;const r={};for(const i in e){const s=e[i];if(s.name=i,s.size=s.size??1,!oJe[s.type]){const a=s.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(a){const[,o,l]=a;throw new Error(`Uniform type ${s.type} is not supported. Use type: '${o}', size: ${l} instead.`)}throw new Error(`Uniform type ${s.type} is not supported. Supported uniform types are: ${ode.join(", ")}`)}s.value??(s.value=lJe(s.type,s.size)),r[i]=s.value}this.uniforms=r,this._dirtyId=1,this.ubo=n.ubo,this.isStatic=n.isStatic,this._signature=Kj(Object.keys(r).map(i=>`${i}-${e[i].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};lde.defaultOptions={ubo:!1,isStatic:!1};let ude=lde;class gT{constructor(e){this.resources=Object.create(null),this._dirty=!0;let n=0;for(const r in e){const i=e[r];this.setResource(i,n++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let n=0;for(const r in this.resources)e[n++]=this.resources[r]._resourceId;this._key=e.join("|")}setResource(e,n){const r=this.resources[n];e!==r&&(r&&e.off?.("change",this.onResourceChange,this),e.on?.("change",this.onResourceChange,this),this.resources[n]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const n=this.resources;for(const r in n)n[r]._touched=e}destroy(){const e=this.resources;for(const n in e)e[n]?.off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const n=this.resources;for(const r in n)n[r]===e&&(n[r]=null)}else this._updateKey()}}var Y6=(t=>(t[t.WEBGL=1]="WEBGL",t[t.WEBGPU=2]="WEBGPU",t[t.BOTH=3]="BOTH",t))(Y6||{});class G4 extends Op{constructor(e){super(),this.uid=Ua("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:n,glProgram:r,groups:i,resources:s,compatibleRenderers:a,groupMap:o}=e;this.gpuProgram=n,this.glProgram=r,a===void 0&&(a=0,n&&(a|=Y6.WEBGPU),r&&(a|=Y6.WEBGL)),this.compatibleRenderers=a;const l={};if(!s&&!i&&(s={}),s&&i)throw new Error("[Shader] Cannot have both resources and groups");if(!n&&i&&!o)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!n&&i&&o)for(const c in o)for(const u in o[c]){const h=o[c][u];l[h]={group:c,binding:u,name:h}}else if(n&&i&&!o){const c=n.structsAndGroups.groups;o={},c.forEach(u=>{o[u.group]=o[u.group]||{},o[u.group][u.binding]=u.name,l[u.name]=u})}else if(s){i={},o={},n&&n.structsAndGroups.groups.forEach(h=>{o[h.group]=o[h.group]||{},o[h.group][h.binding]=h.name,l[h.name]=h});let c=0;for(const u in s)l[u]||(i[99]||(i[99]=new gT,this._ownedBindGroups.push(i[99])),l[u]={group:99,binding:c,name:u},o[99]=o[99]||{},o[99][c]=u,c++);for(const u in s){const h=u;let f=s[u];!f.source&&!f._resourceType&&(f=new ude(f));const p=l[h];p&&(i[p.group]||(i[p.group]=new gT,this._ownedBindGroups.push(i[p.group])),i[p.group].setResource(f,p.binding))}}this.groups=i,this._uniformBindMap=o,this.resources=this._buildResourceAccessor(i,l)}addResource(e,n,r){var i,s;(i=this._uniformBindMap)[n]||(i[n]={}),(s=this._uniformBindMap[n])[r]||(s[r]=e),this.groups[n]||(this.groups[n]=new gT,this._ownedBindGroups.push(this.groups[n]))}_buildResourceAccessor(e,n){const r={};for(const i in n){const s=n[i];Object.defineProperty(r,s.name,{get(){return e[s.group].getResource(s.binding)},set(a){e[s.group].setResource(a,s.binding)}})}return r}destroy(e=!1){this._destroyed||(this._destroyed=!0,this.emit("destroy",this),e&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(n=>{n.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(e){const{gpu:n,gl:r,...i}=e;let s,a;return n&&(s=KI.from(n)),r&&(a=qj.from(r)),new G4({gpuProgram:s,glProgram:a,...i})}}const cJe={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},Xk=0,Jk=1,Zk=2,eN=3,tN=4,nN=5,X6=class dde{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Xk)}set blend(e){!!(this.data&1<<Xk)!==e&&(this.data^=1<<Xk)}get offsets(){return!!(this.data&1<<Jk)}set offsets(e){!!(this.data&1<<Jk)!==e&&(this.data^=1<<Jk)}set cullMode(e){if(e==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=e==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<Zk)}set culling(e){!!(this.data&1<<Zk)!==e&&(this.data^=1<<Zk)}get depthTest(){return!!(this.data&1<<eN)}set depthTest(e){!!(this.data&1<<eN)!==e&&(this.data^=1<<eN)}get depthMask(){return!!(this.data&1<<nN)}set depthMask(e){!!(this.data&1<<nN)!==e&&(this.data^=1<<nN)}get clockwiseFrontFace(){return!!(this.data&1<<tN)}set clockwiseFrontFace(e){!!(this.data&1<<tN)!==e&&(this.data^=1<<tN)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!=="none",this._blendMode=e,this._blendModeId=cJe[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new dde;return e.depthTest=!1,e.blend=!0,e}};X6.default2d=X6.for2d();let uJe=X6;const hde=class J6 extends G4{constructor(e){e={...J6.defaultOptions,...e},super(e),this.enabled=!0,this._state=uJe.for2d(),this.blendMode=e.blendMode,this.padding=e.padding,typeof e.antialias=="boolean"?this.antialias=e.antialias?"on":"off":this.antialias=e.antialias,this.resolution=e.resolution,this.blendRequired=e.blendRequired,this.clipToViewport=e.clipToViewport,this.addResource("uTexture",0,1),e.blendRequired&&this.addResource("uBackTexture",0,3)}apply(e,n,r,i){e.applyFilter(this,n,r,i)}get blendMode(){return this._state.blendMode}set blendMode(e){this._state.blendMode=e}static from(e){const{gpu:n,gl:r,...i}=e;let s,a;return n&&(s=KI.from(n)),r&&(a=qj.from(r)),new J6({gpuProgram:s,glProgram:a,...i})}};hde.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};let Yb=hde;const Z6=[];ha.handleByNamedList(Vn.Environment,Z6);async function dJe(t){if(!t)for(let e=0;e<Z6.length;e++){const n=Z6[e];if(n.value.test()){await n.value.load();return}}}let aw;function hJe(){if(typeof aw=="boolean")return aw;try{aw=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{aw=!1}return aw}function _G(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=fde(t,0,i,n,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c;if(r&&(s=AJe(t,e,s,n)),t.length>80*n){o=t[0],l=t[1];let u=o,h=l;for(let f=n;f<i;f+=n){const p=t[f],m=t[f+1];p<o&&(o=p),m<l&&(l=m),p>u&&(u=p),m>h&&(h=m)}c=Math.max(u-o,h-l),c=c!==0?32767/c:0}return tI(s,a,n,o,l,c,0),a}function fde(t,e,n,r,i){let s;if(i===BJe(t,e,n,r)>0)for(let a=e;a<n;a+=r)s=IG(a/r|0,t[a],t[a+1],s);else for(let a=n-r;a>=e;a-=r)s=IG(a/r|0,t[a],t[a+1],s);return s&&TE(s,s.next)&&(rI(s),s=s.next),s}function kb(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(TE(n,n.next)||Ba(n.prev,n,n.next)===0)){if(rI(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function tI(t,e,n,r,i,s,a){if(!t)return;!a&&s&&CJe(t,r,i,s);let o=t;for(;t.prev!==t.next;){const l=t.prev,c=t.next;if(s?pJe(t,r,i,s):fJe(t)){e.push(l.i,t.i,c.i),rI(t),t=c.next,o=c.next;continue}if(t=c,t===o){a?a===1?(t=gJe(kb(t),e),tI(t,e,n,r,i,s,2)):a===2&&mJe(t,e,n,r,i,s):tI(kb(t),e,n,r,i,s,1);break}}}function fJe(t){const e=t.prev,n=t,r=t.next;if(Ba(e,n,r)>=0)return!1;const i=e.x,s=n.x,a=r.x,o=e.y,l=n.y,c=r.y,u=Math.min(i,s,a),h=Math.min(o,l,c),f=Math.max(i,s,a),p=Math.max(o,l,c);let m=r.next;for(;m!==e;){if(m.x>=u&&m.x<=f&&m.y>=h&&m.y<=p&&Uw(i,o,s,l,a,c,m.x,m.y)&&Ba(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function pJe(t,e,n,r){const i=t.prev,s=t,a=t.next;if(Ba(i,s,a)>=0)return!1;const o=i.x,l=s.x,c=a.x,u=i.y,h=s.y,f=a.y,p=Math.min(o,l,c),m=Math.min(u,h,f),v=Math.max(o,l,c),A=Math.max(u,h,f),x=e8(p,m,e,n,r),E=e8(v,A,e,n,r);let w=t.prevZ,B=t.nextZ;for(;w&&w.z>=x&&B&&B.z<=E;){if(w.x>=p&&w.x<=v&&w.y>=m&&w.y<=A&&w!==i&&w!==a&&Uw(o,u,l,h,c,f,w.x,w.y)&&Ba(w.prev,w,w.next)>=0||(w=w.prevZ,B.x>=p&&B.x<=v&&B.y>=m&&B.y<=A&&B!==i&&B!==a&&Uw(o,u,l,h,c,f,B.x,B.y)&&Ba(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;w&&w.z>=x;){if(w.x>=p&&w.x<=v&&w.y>=m&&w.y<=A&&w!==i&&w!==a&&Uw(o,u,l,h,c,f,w.x,w.y)&&Ba(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;B&&B.z<=E;){if(B.x>=p&&B.x<=v&&B.y>=m&&B.y<=A&&B!==i&&B!==a&&Uw(o,u,l,h,c,f,B.x,B.y)&&Ba(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function gJe(t,e){let n=t;do{const r=n.prev,i=n.next.next;!TE(r,i)&&gde(r,n,n.next,i)&&nI(r,i)&&nI(i,r)&&(e.push(r.i,n.i,i.i),rI(n),rI(n.next),n=t=i),n=n.next}while(n!==t);return kb(n)}function mJe(t,e,n,r,i,s){let a=t;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&wJe(a,o)){let l=mde(a,o);a=kb(a,a.next),l=kb(l,l.next),tI(a,e,n,r,i,s,0),tI(l,e,n,r,i,s,0);return}o=o.next}a=a.next}while(a!==t)}function AJe(t,e,n,r){const i=[];for(let s=0,a=e.length;s<a;s++){const o=e[s]*r,l=s<a-1?e[s+1]*r:t.length,c=fde(t,o,l,r,!1);c===c.next&&(c.steiner=!0),i.push(SJe(c))}i.sort(yJe);for(let s=0;s<i.length;s++)n=vJe(i[s],n);return n}function yJe(t,e){let n=t.x-e.x;if(n===0&&(n=t.y-e.y,n===0)){const r=(t.next.y-t.y)/(t.next.x-t.x),i=(e.next.y-e.y)/(e.next.x-e.x);n=r-i}return n}function vJe(t,e){const n=xJe(t,e);if(!n)return e;const r=mde(n,t);return kb(r,r.next),kb(n,n.next)}function xJe(t,e){let n=e;const r=t.x,i=t.y;let s=-1/0,a;if(TE(t,n))return n;do{if(TE(t,n.next))return n.next;if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const h=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=r&&h>s&&(s=h,a=n.x<n.next.x?n:n.next,h===r))return a}n=n.next}while(n!==e);if(!a)return null;const o=a,l=a.x,c=a.y;let u=1/0;n=a;do{if(r>=n.x&&n.x>=l&&r!==n.x&&pde(i<c?r:s,i,l,c,i<c?s:r,i,n.x,n.y)){const h=Math.abs(i-n.y)/(r-n.x);nI(n,t)&&(h<u||h===u&&(n.x>a.x||n.x===a.x&&bJe(a,n)))&&(a=n,u=h)}n=n.next}while(n!==o);return a}function bJe(t,e){return Ba(t.prev,t,e.prev)<0&&Ba(e.next,t,t.next)<0}function CJe(t,e,n,r){let i=t;do i.z===0&&(i.z=e8(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,EJe(i)}function EJe(t){let e,n=1;do{let r=t,i;t=null;let s=null;for(e=0;r;){e++;let a=r,o=0;for(let c=0;c<n&&(o++,a=a.nextZ,!!a);c++);let l=n;for(;o>0||l>0&&a;)o!==0&&(l===0||!a||r.z<=a.z)?(i=r,r=r.nextZ,o--):(i=a,a=a.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;r=a}s.nextZ=null,n*=2}while(e>1);return t}function e8(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function SJe(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function pde(t,e,n,r,i,s,a,o){return(i-a)*(e-o)>=(t-a)*(s-o)&&(t-a)*(r-o)>=(n-a)*(e-o)&&(n-a)*(s-o)>=(i-a)*(r-o)}function Uw(t,e,n,r,i,s,a,o){return!(t===a&&e===o)&&pde(t,e,n,r,i,s,a,o)}function wJe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!_Je(t,e)&&(nI(t,e)&&nI(e,t)&&IJe(t,e)&&(Ba(t.prev,t,e.prev)||Ba(t,e.prev,e))||TE(t,e)&&Ba(t.prev,t,t.next)>0&&Ba(e.prev,e,e.next)>0)}function Ba(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function TE(t,e){return t.x===e.x&&t.y===e.y}function gde(t,e,n,r){const i=b3(Ba(t,e,n)),s=b3(Ba(t,e,r)),a=b3(Ba(n,r,t)),o=b3(Ba(n,r,e));return!!(i!==s&&a!==o||i===0&&x3(t,n,e)||s===0&&x3(t,r,e)||a===0&&x3(n,t,r)||o===0&&x3(n,e,r))}function x3(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function b3(t){return t>0?1:t<0?-1:0}function _Je(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&gde(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function nI(t,e){return Ba(t.prev,t,t.next)<0?Ba(t,e,t.next)>=0&&Ba(t,t.prev,e)>=0:Ba(t,e,t.prev)<0||Ba(t,t.next,e)<0}function IJe(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function mde(t,e){const n=t8(t.i,t.x,t.y),r=t8(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function IG(t,e,n,r){const i=t8(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function rI(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function t8(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function BJe(t,e,n,r){let i=0;for(let s=e,a=n-r;s<n;s+=r)i+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return i}const TJe=_G.default||_G;var Ade=(t=>(t[t.NONE=0]="NONE",t[t.COLOR=16384]="COLOR",t[t.STENCIL=1024]="STENCIL",t[t.DEPTH=256]="DEPTH",t[t.COLOR_DEPTH=16640]="COLOR_DEPTH",t[t.COLOR_STENCIL=17408]="COLOR_STENCIL",t[t.DEPTH_STENCIL=1280]="DEPTH_STENCIL",t[t.ALL=17664]="ALL",t))(Ade||{});class MJe{constructor(e){this.items=[],this._name=e}emit(e,n,r,i,s,a,o,l){const{name:c,items:u}=this;for(let h=0,f=u.length;h<f;h++)u[h][c](e,n,r,i,s,a,o,l);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const n=this.items.indexOf(e);return n!==-1&&this.items.splice(n,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const DJe=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],yde=class vde extends Op{constructor(e){super(),this.uid=Ua("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const n=[...DJe,...this.config.runners??[]];this._addRunners(...n),this._unsafeEvalCheck()}async init(e={}){const n=e.skipExtensionImports===!0?!0:e.manageImports===!1;await dJe(n),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const r in this._systemsHash)e={...this._systemsHash[r].constructor.defaultOptions,...e};e={...vde.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let r=0;r<this.runners.init.items.length;r++)await this.runners.init.items[r].init(e);this._initOptions=e}render(e,n){let r=e;if(r instanceof hr&&(r={container:r},n&&(kr(Ri,"passing a second argument is deprecated, please use render options instead"),r.target=n.renderTexture)),r.target||(r.target=this.view.renderTarget),r.target===this.view.renderTarget&&(this._lastObjectRendered=r.container,r.clearColor??(r.clearColor=this.background.colorRgba),r.clear??(r.clear=this.background.clearBeforeRender)),r.clearColor){const i=Array.isArray(r.clearColor)&&r.clearColor.length===4;r.clearColor=i?r.clearColor:io.shared.setValue(r.clearColor).toArray()}r.transform||(r.container.updateLocalTransform(),r.transform=r.container.localTransform),r.container.visible&&(r.container.enableRenderGroup(),this.runners.prerender.emit(r),this.runners.renderStart.emit(r),this.runners.render.emit(r),this.runners.renderEnd.emit(r),this.runners.postrender.emit(r))}resize(e,n,r){const i=this.view.resolution;this.view.resize(e,n,r),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),r!==void 0&&r!==i&&this.runners.resolutionChange.emit(r)}clear(e={}){const n=this;e.target||(e.target=n.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=Ade.ALL);const{clear:r,clearColor:i,target:s}=e;io.shared.setValue(i??this.background.colorRgba),n.renderTarget.clear(s,r,io.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(n=>{this.runners[n]=new MJe(n)})}_addSystems(e){let n;for(n in e){const r=e[n];this._addSystem(r.value,r.name)}}_addSystem(e,n){const r=new e(this);if(this[n])throw new Error(`Whoops! The name "${n}" is already in use`);this[n]=r,this._systemsHash[n]=r;for(const i in this.runners)this.runners[i].add(r);return this}_addPipes(e,n){const r=n.reduce((i,s)=>(i[s.name]=s.value,i),{});e.forEach(i=>{const s=i.value,a=i.name,o=r[a];this.renderPipes[a]=new s(this,o?new o:null),this.runners.destroy.add(this.renderPipes[a])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&WI.release(),Object.values(this.runners).forEach(n=>{n.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!hJe())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};yde.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let xde=yde,C3;function RJe(t){return C3!==void 0||(C3=(()=>{const e={stencil:!0,failIfMajorPerformanceCaveat:t??xde.defaultOptions.failIfMajorPerformanceCaveat};try{if(!ls.get().getWebGLRenderingContext())return!1;let r=ls.get().createCanvas().getContext("webgl",e);const i=!!r?.getContextAttributes()?.stencil;if(r){const s=r.getExtension("WEBGL_lose_context");s&&s.loseContext()}return r=null,i}catch{return!1}})()),C3}let E3;async function PJe(t={}){return E3!==void 0||(E3=await(async()=>{const e=ls.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(t)).requestDevice(),!0}catch{return!1}})()),E3}const BG=["webgl","webgpu","canvas"];async function kJe(t){let e=[];t.preference?(e.push(t.preference),BG.forEach(s=>{s!==t.preference&&e.push(s)})):e=BG.slice();let n,r={};for(let s=0;s<e.length;s++){const a=e[s];if(a==="webgpu"&&await PJe()){const{WebGPURenderer:o}=await fn(async()=>{const{WebGPURenderer:l}=await import("./WebGPURenderer-Cems1nwP.js");return{WebGPURenderer:l}},__vite__mapDeps([85,84,86]));n=o,r={...t,...t.webgpu};break}else if(a==="webgl"&&RJe(t.failIfMajorPerformanceCaveat??xde.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:o}=await fn(async()=>{const{WebGLRenderer:l}=await import("./WebGLRenderer-DwbTyxZC.js");return{WebGLRenderer:l}},__vite__mapDeps([87,84,86]));n=o,r={...t,...t.webgl};break}else if(a==="canvas")throw r={...t},new Error("CanvasRenderer is not yet implemented")}if(delete r.webgpu,delete r.webgl,!n)throw new Error("No available renderer for the current environment");const i=new n;return await i.init(r),i}const bde="8.14.3";class Cde{static init(){globalThis.__PIXI_APP_INIT__?.(this,bde)}static destroy(){}}Cde.extension=Vn.Application;class NJe{constructor(e){this._renderer=e}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,bde)}destroy(){this._renderer=null}}NJe.extension={type:[Vn.WebGLSystem,Vn.WebGPUSystem],name:"initHook",priority:-10};const Ede=class n8{constructor(...e){this.stage=new hr,e[0]!==void 0&&kr(Ri,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.stage||(this.stage=new hr),this.renderer=await kJe(e),n8._plugins.forEach(n=>{n.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return kr(Ri,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,n=!1){const r=n8._plugins.slice(0);r.reverse(),r.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(e),this.renderer=null}};Ede._plugins=[];let Yj=Ede;ha.handleByList(Vn.Application,Yj._plugins);ha.add(Cde);class Sde extends Op{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return kr(Ri,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return kr(Ri,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return kr(Ri,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return kr(Ri,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return kr(Ri,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners();for(const n in this.chars)this.chars[n].texture?.destroy();this.chars=null,e&&(this.pages.forEach(n=>n.texture.destroy(!0)),this.pages=null)}}class LJe{constructor(e=0,n=0,r=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=r,this.size=0,this.ttl=n}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const n=this.items[e];delete this.items[e],this.size--,n.prev!==null&&(n.prev.next=n.next),n.next!==null&&(n.next.prev=n.prev),this.first===n&&(this.first=n.next),this.last===n&&(this.last=n.prev)}return this}entries(e=this.keys()){return e.map(n=>[n,this.get(n)])}evict(e=!1){if(e||this.size>0){const n=this.first;delete this.items[n.key],--this.size===0?(this.first=null,this.last=null):(this.first=n.next,this.first.prev=null)}return this}expiresAt(e){let n;return this.has(e)&&(n=this.items[e].expiry),n}get(e){const n=this.items[e];if(n!==void 0){if(this.ttl>0&&n.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(n),n.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){const e=[];let n=this.first;for(;n!==null;)e.push(n.key),n=n.next;return e}setWithEvicted(e,n,r=this.resetTtl){let i=null;if(this.has(e))this.set(e,n,!0,r);else{this.max>0&&this.size===this.max&&(i={...this.first},this.evict(!0));let s=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:n};++this.size===1?this.first=s:this.last.next=s,this.last=s}return i}set(e,n,r=!1,i=this.resetTtl){let s=this.items[e];return r||s!==void 0?(s.value=n,r===!1&&i&&(s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(s)):(this.max>0&&this.size===this.max&&this.evict(!0),s=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:n},++this.size===1?this.first=s:this.last.next=s,this.last=s),this}values(e=this.keys()){return e.map(n=>this.get(n))}}function wde(t=1e3,e=0,n=!1){if(isNaN(t)||t<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof n!="boolean")throw new TypeError("Invalid resetTtl value");return new LJe(t,e,n)}const FJe=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function wM(t){const e=typeof t.fontSize=="number"?`${t.fontSize}px`:t.fontSize;let n=t.fontFamily;Array.isArray(t.fontFamily)||(n=t.fontFamily.split(","));for(let r=n.length-1;r>=0;r--){let i=n[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!FJe.includes(i)&&(i=`"${i}"`),n[r]=i}return`${t.fontStyle} ${t.fontVariant} ${t.fontWeight} ${e} ${n.join(",")}`}const rN={willReadFrequently:!0},$p=class $n{static get experimentalLetterSpacingSupported(){let e=$n._experimentalLetterSpacingSupported;if(e===void 0){const n=ls.get().getCanvasRenderingContext2D().prototype;e=$n._experimentalLetterSpacingSupported="letterSpacing"in n||"textLetterSpacing"in n}return e}constructor(e,n,r,i,s,a,o,l,c){this.text=e,this.style=n,this.width=r,this.height=i,this.lines=s,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=l,this.fontProperties=c}static measureText(e=" ",n,r=$n._canvas,i=n.wordWrap){const s=`${e}-${n.styleKey}-wordWrap-${i}`;if($n._measurementCache.has(s))return $n._measurementCache.get(s);const a=wM(n),o=$n.measureFont(a);o.fontSize===0&&(o.fontSize=n.fontSize,o.ascent=n.fontSize);const l=$n.__context;l.font=a;const u=(i?$n._wordWrap(e,n,r):e).split(/(?:\r\n|\r|\n)/),h=new Array(u.length);let f=0;for(let E=0;E<u.length;E++){const w=$n._measureText(u[E],n.letterSpacing,l);h[E]=w,f=Math.max(f,w)}const p=n._stroke?.width||0;let m=f+p;n.dropShadow&&(m+=n.dropShadow.distance);const v=n.lineHeight||o.fontSize;let A=Math.max(v,o.fontSize+p)+(u.length-1)*(v+n.leading);n.dropShadow&&(A+=n.dropShadow.distance);const x=new $n(e,n,m,A,u,h,v+n.leading,f,o);return $n._measurementCache.set(s,x),x}static _measureText(e,n,r){let i=!1;$n.experimentalLetterSpacingSupported&&($n.experimentalLetterSpacing?(r.letterSpacing=`${n}px`,r.textLetterSpacing=`${n}px`,i=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));const s=r.measureText(e);let a=s.width;const o=-s.actualBoundingBoxLeft;let c=s.actualBoundingBoxRight-o;if(a>0)if(i)a-=n,c-=n;else{const u=($n.graphemeSegmenter(e).length-1)*n;a+=u,c+=u}return Math.max(a,c)}static _wordWrap(e,n,r=$n._canvas){const i=r.getContext("2d",rN);let s=0,a="",o="";const l=Object.create(null),{letterSpacing:c,whiteSpace:u}=n,h=$n._collapseSpaces(u),f=$n._collapseNewlines(u);let p=!h;const m=n.wordWrapWidth+c,v=$n._tokenize(e);for(let A=0;A<v.length;A++){let x=v[A];if($n._isNewline(x)){if(!f){o+=$n._addLine(a),p=!h,a="",s=0;continue}x=" "}if(h){const w=$n.isBreakingSpace(x),B=$n.isBreakingSpace(a[a.length-1]);if(w&&B)continue}const E=$n._getFromCache(x,c,l,i);if(E>m)if(a!==""&&(o+=$n._addLine(a),a="",s=0),$n.canBreakWords(x,n.breakWords)){const w=$n.wordWrapSplit(x);for(let B=0;B<w.length;B++){let D=w[B],T=D,M=1;for(;w[B+M];){const k=w[B+M];if(!$n.canBreakChars(T,k,x,B,n.breakWords))D+=k;else break;T=k,M++}B+=M-1;const R=$n._getFromCache(D,c,l,i);R+s>m&&(o+=$n._addLine(a),p=!1,a="",s=0),a+=D,s+=R}}else{a.length>0&&(o+=$n._addLine(a),a="",s=0);const w=A===v.length-1;o+=$n._addLine(x,!w),p=!1,a="",s=0}else E+s>m&&(p=!1,o+=$n._addLine(a),a="",s=0),(a.length>0||!$n.isBreakingSpace(x)||p)&&(a+=x,s+=E)}return o+=$n._addLine(a,!1),o}static _addLine(e,n=!0){return e=$n._trimRight(e),e=n?`${e}
`:e,e}static _getFromCache(e,n,r,i){let s=r[e];return typeof s!="number"&&(s=$n._measureText(e,n,i)+n,r[e]=s),s}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let n=e.length-1;n>=0;n--){const r=e[n];if(!$n.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:$n._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,n){return typeof e!="string"?!1:$n._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const n=[];let r="";if(typeof e!="string")return n;for(let i=0;i<e.length;i++){const s=e[i],a=e[i+1];if($n.isBreakingSpace(s,a)||$n._isNewline(s)){r!==""&&(n.push(r),r=""),s==="\r"&&a===`
`?(n.push(`\r
`),i++):n.push(s);continue}r+=s}return r!==""&&n.push(r),n}static canBreakWords(e,n){return n}static canBreakChars(e,n,r,i,s){return!0}static wordWrapSplit(e){return $n.graphemeSegmenter(e)}static measureFont(e){if($n._fonts[e])return $n._fonts[e];const n=$n._context;n.font=e;const r=n.measureText($n.METRICS_STRING+$n.BASELINE_SYMBOL),i={ascent:r.actualBoundingBoxAscent,descent:r.actualBoundingBoxDescent,fontSize:r.actualBoundingBoxAscent+r.actualBoundingBoxDescent};return $n._fonts[e]=i,i}static clearMetrics(e=""){e?delete $n._fonts[e]:$n._fonts={}}static get _canvas(){if(!$n.__canvas){let e;try{const n=new OffscreenCanvas(0,0);if(n.getContext("2d",rN)?.measureText)return $n.__canvas=n,n;e=ls.get().createCanvas()}catch{e=ls.get().createCanvas()}e.width=e.height=10,$n.__canvas=e}return $n.__canvas}static get _context(){return $n.__context||($n.__context=$n._canvas.getContext("2d",rN)),$n.__context}};$p.METRICS_STRING="|q";$p.BASELINE_SYMBOL="M";$p.BASELINE_MULTIPLIER=1.4;$p.HEIGHT_MULTIPLIER=2;$p.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const t=new Intl.Segmenter;return e=>{const n=t.segment(e),r=[];let i=0;for(const s of n)r[i++]=s.segment;return r}}return t=>[...t]})();$p.experimentalLetterSpacing=!1;$p._fonts={};$p._newlines=[10,13];$p._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];$p._measurementCache=wde(1e3);let os=$p;const TG=[{offset:0,color:"white"},{offset:1,color:"black"}],Xj=class r8{constructor(...e){this.uid=Ua("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let n=jJe(e);n={...n.type==="radial"?r8.defaultRadialOptions:r8.defaultLinearOptions,...Mue(n)},this._textureSize=n.textureSize,this._wrapMode=n.wrapMode,n.type==="radial"?(this.center=n.center,this.outerCenter=n.outerCenter??this.center,this.innerRadius=n.innerRadius,this.outerRadius=n.outerRadius,this.scale=n.scale,this.rotation=n.rotation):(this.start=n.start,this.end=n.end),this.textureSpace=n.textureSpace,this.type=n.type,n.colorStops.forEach(i=>{this.addColorStop(i.offset,i.color)})}addColorStop(e,n){return this.colorStops.push({offset:e,color:io.shared.setValue(n).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:n}=this.start,{x:r,y:i}=this.end,s=r-e,a=i-n;const o=s<0||a<0;if(this._wrapMode==="clamp-to-edge"){if(s<0){const A=e;e=r,r=A,s*=-1}if(a<0){const A=n;n=i,i=A,a*=-1}}const l=this.colorStops.length?this.colorStops:TG,c=this._textureSize,{canvas:u,context:h}=DG(c,1),f=o?h.createLinearGradient(this._textureSize,0,0,0):h.createLinearGradient(0,0,this._textureSize,0);MG(f,l),h.fillStyle=f,h.fillRect(0,0,c,1),this.texture=new Gn({source:new Pb({resource:u,addressMode:this._wrapMode})});const p=Math.sqrt(s*s+a*a),m=Math.atan2(a,s),v=new fi;v.scale(p/c,1),v.rotate(m),v.translate(e,n),this.textureSpace==="local"&&v.scale(c,c),this.transform=v}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:TG,n=this._textureSize,{canvas:r,context:i}=DG(n,n),{x:s,y:a}=this.center,{x:o,y:l}=this.outerCenter,c=this.innerRadius,u=this.outerRadius,h=o-u,f=l-u,p=n/(u*2),m=(s-h)*p,v=(a-f)*p,A=i.createRadialGradient(m,v,c*p,(o-h)*p,(l-f)*p,u*p);MG(A,e),i.fillStyle=e[e.length-1].color,i.fillRect(0,0,n,n),i.fillStyle=A,i.translate(m,v),i.rotate(this.rotation),i.scale(1,this.scale),i.translate(-m,-v),i.fillRect(0,0,n,n),this.texture=new Gn({source:new Pb({resource:r,addressMode:this._wrapMode})});const x=new fi;x.scale(1/p,1/p),x.translate(h,f),this.textureSpace==="local"&&x.scale(n,n),this.transform=x}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};Xj.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};Xj.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let F0=Xj;function MG(t,e){for(let n=0;n<e.length;n++){const r=e[n];t.addColorStop(r.offset,r.color)}}function DG(t,e){const n=ls.get().createCanvas(t,e),r=n.getContext("2d");return{canvas:n,context:r}}function jJe(t){let e=t[0]??{};return(typeof e=="number"||t[1])&&(kr("8.5.2","use options object instead"),e={type:"linear",start:{x:t[0],y:t[1]},end:{x:t[2],y:t[3]},textureSpace:t[4],textureSize:t[5]??F0.defaultLinearOptions.textureSize}),e}const RG={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class V4{constructor(e,n){this.uid=Ua("fillPattern"),this._tick=0,this.transform=new fi,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),n&&(e.source.style.addressModeU=RG[n].addressModeU,e.source.style.addressModeV=RG[n].addressModeV)}setTransform(e){const n=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/n.frame.width,1/n.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var iN,PG;function OJe(){if(PG)return iN;PG=1,iN=n;var t={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function n(s){var a=[];return s.replace(e,function(o,l,c){var u=l.toLowerCase();for(c=i(c),u=="m"&&c.length>2&&(a.push([l].concat(c.splice(0,2))),u="l",l=l=="m"?"l":"L");;){if(c.length==t[u])return c.unshift(l),a.push(c);if(c.length<t[u])throw new Error("malformed path data");a.push([l].concat(c.splice(0,t[u])))}}),a}var r=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function i(s){var a=s.match(r);return a?a.map(Number):[]}return iN}var zJe=OJe();const $Je=qg(zJe);function QJe(t,e){const n=$Je(t),r=[];let i=null,s=0,a=0;for(let o=0;o<n.length;o++){const l=n[o],c=l[0],u=l;switch(c){case"M":s=u[1],a=u[2],e.moveTo(s,a);break;case"m":s+=u[1],a+=u[2],e.moveTo(s,a);break;case"H":s=u[1],e.lineTo(s,a);break;case"h":s+=u[1],e.lineTo(s,a);break;case"V":a=u[1],e.lineTo(s,a);break;case"v":a+=u[1],e.lineTo(s,a);break;case"L":s=u[1],a=u[2],e.lineTo(s,a);break;case"l":s+=u[1],a+=u[2],e.lineTo(s,a);break;case"C":s=u[5],a=u[6],e.bezierCurveTo(u[1],u[2],u[3],u[4],s,a);break;case"c":e.bezierCurveTo(s+u[1],a+u[2],s+u[3],a+u[4],s+u[5],a+u[6]),s+=u[5],a+=u[6];break;case"S":s=u[3],a=u[4],e.bezierCurveToShort(u[1],u[2],s,a);break;case"s":e.bezierCurveToShort(s+u[1],a+u[2],s+u[3],a+u[4]),s+=u[3],a+=u[4];break;case"Q":s=u[3],a=u[4],e.quadraticCurveTo(u[1],u[2],s,a);break;case"q":e.quadraticCurveTo(s+u[1],a+u[2],s+u[3],a+u[4]),s+=u[3],a+=u[4];break;case"T":s=u[1],a=u[2],e.quadraticCurveToShort(s,a);break;case"t":s+=u[1],a+=u[2],e.quadraticCurveToShort(s,a);break;case"A":s=u[6],a=u[7],e.arcToSvg(u[1],u[2],u[3],u[4],u[5],s,a);break;case"a":s+=u[6],a+=u[7],e.arcToSvg(u[1],u[2],u[3],u[4],u[5],s,a);break;case"Z":case"z":e.closePath(),r.length>0&&(i=r.pop(),i?(s=i.startX,a=i.startY):(s=0,a=0)),i=null;break;default:Zs(`Unknown SVG path command: ${c}`)}c!=="Z"&&c!=="z"&&i===null&&(i={startX:s,startY:a},r.push(i))}return e}class Jj{constructor(e=0,n=0,r=0){this.type="circle",this.x=e,this.y=n,this.radius=r}clone(){return new Jj(this.x,this.y,this.radius)}contains(e,n){if(this.radius<=0)return!1;const r=this.radius*this.radius;let i=this.x-e,s=this.y-n;return i*=i,s*=s,i+s<=r}strokeContains(e,n,r,i=.5){if(this.radius===0)return!1;const s=this.x-e,a=this.y-n,o=this.radius,l=(1-i)*r,c=Math.sqrt(s*s+a*a);return c<=o+l&&c>o-(r-l)}getBounds(e){return e||(e=new es),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Zj{constructor(e=0,n=0,r=0,i=0){this.type="ellipse",this.x=e,this.y=n,this.halfWidth=r,this.halfHeight=i}clone(){return new Zj(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,n){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let r=(e-this.x)/this.halfWidth,i=(n-this.y)/this.halfHeight;return r*=r,i*=i,r+i<=1}strokeContains(e,n,r,i=.5){const{halfWidth:s,halfHeight:a}=this;if(s<=0||a<=0)return!1;const o=r*(1-i),l=r-o,c=s-l,u=a-l,h=s+o,f=a+o,p=e-this.x,m=n-this.y,v=p*p/(c*c)+m*m/(u*u),A=p*p/(h*h)+m*m/(f*f);return v>1&&A<=1}getBounds(e){return e||(e=new es),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function UJe(t,e,n,r,i,s){const a=t-n,o=e-r,l=i-n,c=s-r,u=a*l+o*c,h=l*l+c*c;let f=-1;h!==0&&(f=u/h);let p,m;f<0?(p=n,m=r):f>1?(p=i,m=s):(p=n+f*l,m=r+f*c);const v=t-p,A=e-m;return v*v+A*A}let HJe,GJe;class d_{constructor(...e){this.type="polygon";let n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){const r=[];for(let i=0,s=n.length;i<s;i++)r.push(n[i].x,n[i].y);n=r}this.points=n,this.closePath=!0}isClockwise(){let e=0;const n=this.points,r=n.length;for(let i=0;i<r;i+=2){const s=n[i],a=n[i+1],o=n[(i+2)%r],l=n[(i+3)%r];e+=(o-s)*(l+a)}return e<0}containsPolygon(e){const n=this.getBounds(HJe),r=e.getBounds(GJe);if(!n.containsRect(r))return!1;const i=e.points;for(let s=0;s<i.length;s+=2){const a=i[s],o=i[s+1];if(!this.contains(a,o))return!1}return!0}clone(){const e=this.points.slice(),n=new d_(e);return n.closePath=this.closePath,n}contains(e,n){let r=!1;const i=this.points.length/2;for(let s=0,a=i-1;s<i;a=s++){const o=this.points[s*2],l=this.points[s*2+1],c=this.points[a*2],u=this.points[a*2+1];l>n!=u>n&&e<(c-o)*((n-l)/(u-l))+o&&(r=!r)}return r}strokeContains(e,n,r,i=.5){const s=r*r,a=s*(1-i),o=s-a,{points:l}=this,c=l.length-(this.closePath?0:2);for(let u=0;u<c;u+=2){const h=l[u],f=l[u+1],p=l[(u+2)%l.length],m=l[(u+3)%l.length],v=UJe(e,n,h,f,p,m),A=Math.sign((p-h)*(n-f)-(m-f)*(e-h));if(v<=(A<0?o:a))return!0}return!1}getBounds(e){e||(e=new es);const n=this.points;let r=1/0,i=-1/0,s=1/0,a=-1/0;for(let o=0,l=n.length;o<l;o+=2){const c=n[o],u=n[o+1];r=c<r?c:r,i=c>i?c:i,s=u<s?u:s,a=u>a?u:a}return e.x=r,e.width=i-r,e.y=s,e.height=a-s,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,n)=>`${e}, ${n}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return kr("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return kr("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const S3=(t,e,n,r,i,s,a)=>{const o=t-n,l=e-r,c=Math.sqrt(o*o+l*l);return c>=i-s&&c<=i+a};class eO{constructor(e=0,n=0,r=0,i=0,s=20){this.type="roundedRectangle",this.x=e,this.y=n,this.width=r,this.height=i,this.radius=s}getBounds(e){return e||(e=new es),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new eO(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,n){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+r&&n<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let i=e-(this.x+r),s=n-(this.y+r);const a=r*r;if(i*i+s*s<=a||(i=e-(this.x+this.width-r),i*i+s*s<=a)||(s=n-(this.y+this.height-r),i*i+s*s<=a)||(i=e-(this.x+r),i*i+s*s<=a))return!0}return!1}strokeContains(e,n,r,i=.5){const{x:s,y:a,width:o,height:l,radius:c}=this,u=r*(1-i),h=r-u,f=s+c,p=a+c,m=o-c*2,v=l-c*2,A=s+o,x=a+l;return(e>=s-u&&e<=s+h||e>=A-h&&e<=A+u)&&n>=p&&n<=p+v||(n>=a-u&&n<=a+h||n>=x-h&&n<=x+u)&&e>=f&&e<=f+m?!0:e<f&&n<p&&S3(e,n,f,p,c,h,u)||e>A-c&&n<p&&S3(e,n,A-c,p,c,h,u)||e>A-c&&n>x-c&&S3(e,n,A-c,x-c,c,h,u)||e<f&&n>x-c&&S3(e,n,f,x-c,c,h,u)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const _de={};function VJe(t,e,n){let r=2166136261;for(let i=0;i<e;i++)r^=t[i].uid,r=Math.imul(r,16777619),r>>>=0;return _de[r]||WJe(t,e,r,n)}function WJe(t,e,n,r){const i={};let s=0;for(let o=0;o<r;o++){const l=o<e?t[o]:Gn.EMPTY.source;i[s++]=l.source,i[s++]=l.style}const a=new gT(i);return _de[n]=a,a}class kG{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function NG(t,e){const n=t.byteLength/8|0,r=new Float64Array(t,0,n);new Float64Array(e,0,n).set(r);const s=t.byteLength-n*8;if(s>0){const a=new Uint8Array(t,n*8,s);new Uint8Array(e,n*8,s).set(a)}}const KJe={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var qJe=(t=>(t[t.DISABLED=0]="DISABLED",t[t.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",t[t.MASK_ACTIVE=2]="MASK_ACTIVE",t[t.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",t[t.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",t[t.NONE=5]="NONE",t))(qJe||{});function LG(t,e){return e.alphaMode==="no-premultiply-alpha"&&KJe[t]||t}const YJe=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function XJe(t){let e="";for(let n=0;n<t;++n)n>0&&(e+=`
else `),n<t-1&&(e+=`if(test == ${n}.0){}`);return e}function JJe(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const r=YJe.replace(/%forloop%/gi,XJe(t));if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))t=t/2|0;else break}}finally{e.deleteShader(n)}return t}let c1=null;function ZJe(){if(c1)return c1;const t=sde();return c1=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),c1=JJe(c1,t),t.getExtension("WEBGL_lose_context")?.loseContext(),c1}class eZe{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const n=this.textures[e];this.textures[e]=null,this.ids[n.uid]=null}this.count=0}}class tZe{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new eZe,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const h_=[];let _M=0;WI.register({clear:()=>{if(h_.length>0)for(const t of h_)t&&t.destroy();h_.length=0,_M=0}});function FG(){return _M>0?h_[--_M]:new tZe}function jG(t){h_[_M++]=t}let ow=0;const Ide=class Bde{constructor(e){this.uid=Ua("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...Bde.defaultOptions,...e},e.maxTextures||(kr("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=ZJe());const{maxTextures:n,attributesInitialSize:r,indicesInitialSize:i}=e;this.attributeBuffer=new kG(r*4),this.indexBuffer=new Uint16Array(i),this.maxTextures=n}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)jG(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,n){const r=e._batch.textures.ids[n._source.uid];return!r&&r!==0?!1:(e._textureId=r,e.texture=n,!0)}updateElement(e){this.dirty=!0;const n=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,n.float32View,n.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,n.float32View,n.uint32View,e._attributeStart,e._textureId)}break(e){const n=this._elements;if(!n[this.elementStart])return;let r=FG(),i=r.textures;i.clear();const s=n[this.elementStart];let a=LG(s.blendMode,s.texture._source),o=s.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const l=this.attributeBuffer.float32View,c=this.attributeBuffer.uint32View,u=this.indexBuffer;let h=this._batchIndexSize,f=this._batchIndexStart,p="startBatch";const m=this.maxTextures;for(let v=this.elementStart;v<this.elementSize;++v){const A=n[v];n[v]=null;const E=A.texture._source,w=LG(A.blendMode,E),B=a!==w||o!==A.topology;if(E._batchTick===ow&&!B){A._textureId=E._textureBindLocation,h+=A.indexSize,A.packAsQuad?(this.packQuadAttributes(A,l,c,A._attributeStart,A._textureId),this.packQuadIndex(u,A._indexStart,A._attributeStart/this.vertexSize)):(this.packAttributes(A,l,c,A._attributeStart,A._textureId),this.packIndex(A,u,A._indexStart,A._attributeStart/this.vertexSize)),A._batch=r;continue}E._batchTick=ow,(i.count>=m||B)&&(this._finishBatch(r,f,h-f,i,a,o,e,p),p="renderBatch",f=h,a=w,o=A.topology,r=FG(),i=r.textures,i.clear(),++ow),A._textureId=E._textureBindLocation=i.count,i.ids[E.uid]=i.count,i.textures[i.count++]=E,A._batch=r,h+=A.indexSize,A.packAsQuad?(this.packQuadAttributes(A,l,c,A._attributeStart,A._textureId),this.packQuadIndex(u,A._indexStart,A._attributeStart/this.vertexSize)):(this.packAttributes(A,l,c,A._attributeStart,A._textureId),this.packIndex(A,u,A._indexStart,A._attributeStart/this.vertexSize))}i.count>0&&(this._finishBatch(r,f,h-f,i,a,o,e,p),f=h,++ow),this.elementStart=this.elementSize,this._batchIndexStart=f,this._batchIndexSize=h}_finishBatch(e,n,r,i,s,a,o,l){e.gpuBindGroup=null,e.bindGroup=null,e.action=l,e.batcher=this,e.textures=i,e.blendMode=s,e.topology=a,e.start=n,e.size=r,++ow,this.batches[this.batchIndex++]=e,o.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const n=Math.max(e,this.attributeBuffer.size*2),r=new kG(n);NG(this.attributeBuffer.rawBinaryData,r.rawBinaryData),this.attributeBuffer=r}_resizeIndexBuffer(e){const n=this.indexBuffer;let r=Math.max(e,n.length*1.5);r+=r%2;const i=r>65535?new Uint32Array(r):new Uint16Array(r);if(i.BYTES_PER_ELEMENT!==n.BYTES_PER_ELEMENT)for(let s=0;s<n.length;s++)i[s]=n[s];else NG(n.buffer,i.buffer);this.indexBuffer=i}packQuadIndex(e,n,r){e[n]=r+0,e[n+1]=r+1,e[n+2]=r+2,e[n+3]=r+0,e[n+4]=r+2,e[n+5]=r+3}packIndex(e,n,r,i){const s=e.indices,a=e.indexSize,o=e.indexOffset,l=e.attributeOffset;for(let c=0;c<a;c++)n[r++]=i+s[c+o]-l}destroy(e={}){if(this.batches!==null){for(let n=0;n<this.batches.length;n++)jG(this.batches[n]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,e.shader&&(this.shader?.destroy(),this.shader=null);for(let n=0;n<this._elements.length;n++)this._elements[n]&&(this._elements[n]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};Ide.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let nZe=Ide;var ko=(t=>(t[t.MAP_READ=1]="MAP_READ",t[t.MAP_WRITE=2]="MAP_WRITE",t[t.COPY_SRC=4]="COPY_SRC",t[t.COPY_DST=8]="COPY_DST",t[t.INDEX=16]="INDEX",t[t.VERTEX=32]="VERTEX",t[t.UNIFORM=64]="UNIFORM",t[t.STORAGE=128]="STORAGE",t[t.INDIRECT=256]="INDIRECT",t[t.QUERY_RESOLVE=512]="QUERY_RESOLVE",t[t.STATIC=1024]="STATIC",t))(ko||{});let Py=class extends Op{constructor(e){let{data:n,size:r}=e;const{usage:i,label:s,shrinkToFit:a}=e;super(),this.uid=Ua("buffer"),this._resourceType="buffer",this._resourceId=Ua("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,n instanceof Array&&(n=new Float32Array(n)),this._data=n,r??(r=n?.byteLength);const o=!!n;this.descriptor={size:r,usage:i,mappedAtCreation:o,label:s},this.shrinkToFit=a??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&ko.STATIC)}set static(e){e?this.descriptor.usage|=ko.STATIC:this.descriptor.usage&=~ko.STATIC}setDataWithSize(e,n,r){if(this._updateID++,this._updateSize=n*e.BYTES_PER_ELEMENT,this._data===e){r&&this.emit("update",this);return}const i=this._data;if(this._data=e,this._dataInt32=null,!i||i.length!==e.length){!this.shrinkToFit&&i&&e.byteLength<i.byteLength?r&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=Ua("resource"),this.emit("change",this));return}r&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}};function Tde(t,e){if(!(t instanceof Py)){let n=e?ko.INDEX:ko.VERTEX;t instanceof Array&&(e?(t=new Uint32Array(t),n=ko.INDEX|ko.COPY_DST):(t=new Float32Array(t),n=ko.VERTEX|ko.COPY_DST)),t=new Py({data:t,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:n})}return t}function rZe(t,e,n){const r=t.getAttribute(e);if(!r)return n.minX=0,n.minY=0,n.maxX=0,n.maxY=0,n;const i=r.buffer.data;let s=1/0,a=1/0,o=-1/0,l=-1/0;const c=i.BYTES_PER_ELEMENT,u=(r.offset||0)/c,h=(r.stride||8)/c;for(let f=u;f<i.length;f+=h){const p=i[f],m=i[f+1];p>o&&(o=p),m>l&&(l=m),p<s&&(s=p),m<a&&(a=m)}return n.minX=s,n.minY=a,n.maxX=o,n.maxY=l,n}function iZe(t){return(t instanceof Py||Array.isArray(t)||t.BYTES_PER_ELEMENT)&&(t={buffer:t}),t.buffer=Tde(t.buffer,!1),t}class Mde extends Op{constructor(e={}){super(),this.uid=Ua("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Np,this._boundsDirty=!0;const{attributes:n,indexBuffer:r,topology:i}=e;if(this.buffers=[],this.attributes={},n)for(const s in n)this.addAttribute(s,n[s]);this.instanceCount=e.instanceCount??1,r&&this.addIndex(r),this.topology=i||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const n=this.attributes[e];return n.buffer.data.length/(n.stride/4||n.size)}return 0}addAttribute(e,n){const r=iZe(n);this.buffers.indexOf(r.buffer)===-1&&(this.buffers.push(r.buffer),r.buffer.on("update",this.onBufferUpdate,this),r.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=r}addIndex(e){this.indexBuffer=Tde(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,rZe(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(n=>n.destroy()),this.indexBuffer?.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const sZe=new Float32Array(1),aZe=new Uint32Array(1);class oZe extends Mde{constructor(){const n=new Py({data:sZe,label:"attribute-batch-buffer",usage:ko.VERTEX|ko.COPY_DST,shrinkToFit:!1}),r=new Py({data:aZe,label:"index-batch-buffer",usage:ko.INDEX|ko.COPY_DST,shrinkToFit:!1}),i=24;super({attributes:{aPosition:{buffer:n,format:"float32x2",stride:i,offset:0},aUV:{buffer:n,format:"float32x2",stride:i,offset:8},aColor:{buffer:n,format:"unorm8x4",stride:i,offset:16},aTextureIdAndRound:{buffer:n,format:"uint16x2",stride:i,offset:20}},indexBuffer:r})}}function OG(t,e,n){if(t)for(const r in t){const i=r.toLocaleLowerCase(),s=e[i];if(s){let a=t[r];r==="header"&&(a=a.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),n&&s.push(`//----${n}----//`),s.push(a)}else Zs(`${r} placement hook does not exist in shader`)}}const lZe=/\{\{(.*?)\}\}/g;function zG(t){const e={};return(t.match(lZe)?.map(r=>r.replace(/[{()}]/g,""))??[]).forEach(r=>{e[r]=[]}),e}function $G(t,e){let n;const r=/@in\s+([^;]+);/g;for(;(n=r.exec(t))!==null;)e.push(n[1])}function QG(t,e,n=!1){const r=[];$G(e,r),t.forEach(o=>{o.header&&$G(o.header,r)});const i=r;n&&i.sort();const s=i.map((o,l)=>`       @location(${l}) ${o},`).join(`
`);let a=e.replace(/@in\s+[^;]+;\s*/g,"");return a=a.replace("{{in}}",`
${s}
`),a}function UG(t,e){let n;const r=/@out\s+([^;]+);/g;for(;(n=r.exec(t))!==null;)e.push(n[1])}function cZe(t){const n=/\b(\w+)\s*:/g.exec(t);return n?n[1]:""}function uZe(t){const e=/@.*?\s+/g;return t.replace(e,"")}function dZe(t,e){const n=[];UG(e,n),t.forEach(l=>{l.header&&UG(l.header,n)});let r=0;const i=n.sort().map(l=>l.indexOf("builtin")>-1?l:`@location(${r++}) ${l}`).join(`,
`),s=n.sort().map(l=>`       var ${uZe(l)};`).join(`
`),a=`return VSOutput(
            ${n.sort().map(l=>` ${cZe(l)}`).join(`,
`)});`;let o=e.replace(/@out\s+[^;]+;\s*/g,"");return o=o.replace("{{struct}}",`
${i}
`),o=o.replace("{{start}}",`
${s}
`),o=o.replace("{{return}}",`
${a}
`),o}function HG(t,e){let n=t;for(const r in e){const i=e[r];i.join(`
`).length?n=n.replace(`{{${r}}}`,`//-----${r} START-----//
${i.join(`
`)}
//----${r} FINISH----//`):n=n.replace(`{{${r}}}`,"")}return n}const wy=Object.create(null),sN=new Map;let hZe=0;function fZe({template:t,bits:e}){const n=Dde(t,e);if(wy[n])return wy[n];const{vertex:r,fragment:i}=gZe(t,e);return wy[n]=Rde(r,i,e),wy[n]}function pZe({template:t,bits:e}){const n=Dde(t,e);return wy[n]||(wy[n]=Rde(t.vertex,t.fragment,e)),wy[n]}function gZe(t,e){const n=e.map(a=>a.vertex).filter(a=>!!a),r=e.map(a=>a.fragment).filter(a=>!!a);let i=QG(n,t.vertex,!0);i=dZe(n,i);const s=QG(r,t.fragment,!0);return{vertex:i,fragment:s}}function Dde(t,e){return e.map(n=>(sN.has(n)||sN.set(n,hZe++),sN.get(n))).sort((n,r)=>n-r).join("-")+t.vertex+t.fragment}function Rde(t,e,n){const r=zG(t),i=zG(e);return n.forEach(s=>{OG(s.vertex,r,s.name),OG(s.fragment,i,s.name)}),{vertex:HG(t,r),fragment:HG(e,i)}}const mZe=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,AZe=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,yZe=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,vZe=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,xZe={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},bZe={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function CZe({bits:t,name:e}){const n=fZe({template:{fragment:AZe,vertex:mZe},bits:[xZe,...t]});return KI.from({name:e,vertex:{source:n.vertex,entryPoint:"main"},fragment:{source:n.fragment,entryPoint:"main"}})}function EZe({bits:t,name:e}){return new qj({name:e,...pZe({template:{vertex:yZe,fragment:vZe},bits:[bZe,...t]})})}const SZe={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},wZe={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},aN={};function _Ze(t){const e=[];if(t===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let n=0;for(let r=0;r<t;r++)e.push(`@group(1) @binding(${n++}) var textureSource${r+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${n++}) var textureSampler${r+1}: sampler;`)}return e.join(`
`)}function IZe(t){const e=[];if(t===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let n=0;n<t;n++)n===t-1?e.push("  default:{"):e.push(`  case ${n}:{`),e.push(`      outColor = textureSampleGrad(textureSource${n+1}, textureSampler${n+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function BZe(t){return aN[t]||(aN[t]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${_Ze(t)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${IZe(t)}
            `}}),aN[t]}const oN={};function TZe(t){const e=[];for(let n=0;n<t;n++)n>0&&e.push("else"),n<t-1&&e.push(`if(vTextureId < ${n}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${n}], vUV);`),e.push("}");return e.join(`
`)}function MZe(t){return oN[t]||(oN[t]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${t}];

            `,main:`

                ${TZe(t)}
            `}}),oN[t]}const DZe={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},RZe={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},GG={};function PZe(t){let e=GG[t];if(e)return e;const n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=r;return e=GG[t]=new ude({uTextures:{value:n,type:"i32",size:t}},{isStatic:!0}),e}class VG extends G4{constructor(e){const n=EZe({name:"batch",bits:[wZe,MZe(e),RZe]}),r=CZe({name:"batch",bits:[SZe,BZe(e),DZe]});super({glProgram:n,gpuProgram:r,resources:{batchSamplers:PZe(e)}}),this.maxTextures=e}}let lw=null;const Pde=class kde extends nZe{constructor(e){super(e),this.geometry=new oZe,this.name=kde.extension.name,this.vertexSize=6,lw??(lw=new VG(e.maxTextures)),this.shader=lw}packAttributes(e,n,r,i,s){const a=s<<16|e.roundPixels&65535,o=e.transform,l=o.a,c=o.b,u=o.c,h=o.d,f=o.tx,p=o.ty,{positions:m,uvs:v}=e,A=e.color,x=e.attributeOffset,E=x+e.attributeSize;for(let w=x;w<E;w++){const B=w*2,D=m[B],T=m[B+1];n[i++]=l*D+u*T+f,n[i++]=h*T+c*D+p,n[i++]=v[B],n[i++]=v[B+1],r[i++]=A,r[i++]=a}}packQuadAttributes(e,n,r,i,s){const a=e.texture,o=e.transform,l=o.a,c=o.b,u=o.c,h=o.d,f=o.tx,p=o.ty,m=e.bounds,v=m.maxX,A=m.minX,x=m.maxY,E=m.minY,w=a.uvs,B=e.color,D=s<<16|e.roundPixels&65535;n[i+0]=l*A+u*E+f,n[i+1]=h*E+c*A+p,n[i+2]=w.x0,n[i+3]=w.y0,r[i+4]=B,r[i+5]=D,n[i+6]=l*v+u*E+f,n[i+7]=h*E+c*v+p,n[i+8]=w.x1,n[i+9]=w.y1,r[i+10]=B,r[i+11]=D,n[i+12]=l*v+u*x+f,n[i+13]=h*x+c*v+p,n[i+14]=w.x2,n[i+15]=w.y2,r[i+16]=B,r[i+17]=D,n[i+18]=l*A+u*x+f,n[i+19]=h*x+c*A+p,n[i+20]=w.x3,n[i+21]=w.y3,r[i+22]=B,r[i+23]=D}_updateMaxTextures(e){this.shader.maxTextures!==e&&(lw=new VG(e),this.shader=lw)}destroy(){this.shader=null,super.destroy()}};Pde.extension={type:[Vn.Batcher],name:"default"};let kZe=Pde;function NZe(t,e,n,r,i,s,a,o=null){let l=0;n*=e,i*=s;const c=o.a,u=o.b,h=o.c,f=o.d,p=o.tx,m=o.ty;for(;l<a;){const v=t[n],A=t[n+1];r[i]=c*v+h*A+p,r[i+1]=u*v+f*A+m,i+=s,n+=e,l++}}function LZe(t,e,n,r){let i=0;for(e*=n;i<r;)t[e]=0,t[e+1]=0,e+=n,i++}function Nde(t,e,n,r,i){const s=e.a,a=e.b,o=e.c,l=e.d,c=e.tx,u=e.ty;n||(n=0),r||(r=2),i||(i=t.length/r-n);let h=n*r;for(let f=0;f<i;f++){const p=t[h],m=t[h+1];t[h]=s*p+o*m+c,t[h+1]=a*p+l*m+u,h+=r}}const FZe=new fi;class Lde{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,n=e>>16|e&65280|(e&255)<<16,r=this.renderable;return r?zue(n,r.groupColor)+(this.alpha*r.groupAlpha*255<<24):n+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||FZe}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const iI={extension:{type:Vn.ShapeBuilder,name:"circle"},build(t,e){let n,r,i,s,a,o;if(t.type==="circle"){const B=t;if(a=o=B.radius,a<=0)return!1;n=B.x,r=B.y,i=s=0}else if(t.type==="ellipse"){const B=t;if(a=B.halfWidth,o=B.halfHeight,a<=0||o<=0)return!1;n=B.x,r=B.y,i=s=0}else{const B=t,D=B.width/2,T=B.height/2;n=B.x+D,r=B.y+T,a=o=Math.max(0,Math.min(B.radius,Math.min(D,T))),i=D-a,s=T-o}if(i<0||s<0)return!1;const l=Math.ceil(2.3*Math.sqrt(a+o)),c=l*8+(i?4:0)+(s?4:0);if(c===0)return!1;if(l===0)return e[0]=e[6]=n+i,e[1]=e[3]=r+s,e[2]=e[4]=n-i,e[5]=e[7]=r-s,!0;let u=0,h=l*4+(i?2:0)+2,f=h,p=c,m=i+a,v=s,A=n+m,x=n-m,E=r+v;if(e[u++]=A,e[u++]=E,e[--h]=E,e[--h]=x,s){const B=r-v;e[f++]=x,e[f++]=B,e[--p]=B,e[--p]=A}for(let B=1;B<l;B++){const D=Math.PI/2*(B/l),T=i+Math.cos(D)*a,M=s+Math.sin(D)*o,R=n+T,k=n-T,L=r+M,F=r-M;e[u++]=R,e[u++]=L,e[--h]=L,e[--h]=k,e[f++]=k,e[f++]=F,e[--p]=F,e[--p]=R}m=i,v=s+o,A=n+m,x=n-m,E=r+v;const w=r-v;return e[u++]=A,e[u++]=E,e[--p]=w,e[--p]=A,i&&(e[u++]=x,e[u++]=E,e[--p]=w,e[--p]=x),!0},triangulate(t,e,n,r,i,s){if(t.length===0)return;let a=0,o=0;for(let u=0;u<t.length;u+=2)a+=t[u],o+=t[u+1];a/=t.length/2,o/=t.length/2;let l=r;e[l*n]=a,e[l*n+1]=o;const c=l++;for(let u=0;u<t.length;u+=2)e[l*n]=t[u],e[l*n+1]=t[u+1],u>0&&(i[s++]=l,i[s++]=c,i[s++]=l-1),l++;i[s++]=c+1,i[s++]=c,i[s++]=l-1}},jZe={...iI,extension:{...iI.extension,name:"ellipse"}},OZe={...iI,extension:{...iI.extension,name:"roundedRectangle"}},Fde=1e-4,WG=1e-4;function zZe(t){const e=t.length;if(e<6)return 1;let n=0;for(let r=0,i=t[e-2],s=t[e-1];r<e;r+=2){const a=t[r],o=t[r+1];n+=(a-i)*(o+s),i=a,s=o}return n<0?-1:1}function KG(t,e,n,r,i,s,a,o){const l=t-n*i,c=e-r*i,u=t+n*s,h=e+r*s;let f,p;a?(f=r,p=-n):(f=-r,p=n);const m=l+f,v=c+p,A=u+f,x=h+p;return o.push(m,v),o.push(A,x),2}function bx(t,e,n,r,i,s,a,o){const l=n-t,c=r-e;let u=Math.atan2(l,c),h=Math.atan2(i-t,s-e);o&&u<h?u+=Math.PI*2:!o&&u>h&&(h+=Math.PI*2);let f=u;const p=h-u,m=Math.abs(p),v=Math.sqrt(l*l+c*c),A=(15*m*Math.sqrt(v)/Math.PI>>0)+1,x=p/A;if(f+=x,o){a.push(t,e),a.push(n,r);for(let E=1,w=f;E<A;E++,w+=x)a.push(t,e),a.push(t+Math.sin(w)*v,e+Math.cos(w)*v);a.push(t,e),a.push(i,s)}else{a.push(n,r),a.push(t,e);for(let E=1,w=f;E<A;E++,w+=x)a.push(t+Math.sin(w)*v,e+Math.cos(w)*v),a.push(t,e);a.push(i,s),a.push(t,e)}return A*2}function $Ze(t,e,n,r,i,s){const a=Fde;if(t.length===0)return;const o=e;let l=o.alignment;if(e.alignment!==.5){let X=zZe(t);l=(l-.5)*X+.5}const c=new no(t[0],t[1]),u=new no(t[t.length-2],t[t.length-1]),h=r,f=Math.abs(c.x-u.x)<a&&Math.abs(c.y-u.y)<a;if(h){t=t.slice(),f&&(t.pop(),t.pop(),u.set(t[t.length-2],t[t.length-1]));const X=(c.x+u.x)*.5,re=(u.y+c.y)*.5;t.unshift(X,re),t.push(X,re)}const p=i,m=t.length/2;let v=t.length;const A=p.length/2,x=o.width/2,E=x*x,w=o.miterLimit*o.miterLimit;let B=t[0],D=t[1],T=t[2],M=t[3],R=0,k=0,L=-(D-M),F=B-T,z=0,G=0,V=Math.sqrt(L*L+F*F);L/=V,F/=V,L*=x,F*=x;const q=l,O=(1-q)*2,H=q*2;h||(o.cap==="round"?v+=bx(B-L*(O-H)*.5,D-F*(O-H)*.5,B-L*O,D-F*O,B+L*H,D+F*H,p,!0)+2:o.cap==="square"&&(v+=KG(B,D,L,F,O,H,!0,p))),p.push(B-L*O,D-F*O),p.push(B+L*H,D+F*H);for(let X=1;X<m-1;++X){B=t[(X-1)*2],D=t[(X-1)*2+1],T=t[X*2],M=t[X*2+1],R=t[(X+1)*2],k=t[(X+1)*2+1],L=-(D-M),F=B-T,V=Math.sqrt(L*L+F*F),L/=V,F/=V,L*=x,F*=x,z=-(M-k),G=T-R,V=Math.sqrt(z*z+G*G),z/=V,G/=V,z*=x,G*=x;const re=T-B,J=D-M,Z=T-R,ee=k-M,te=re*Z+J*ee,oe=J*Z-ee*re,ae=oe<0;if(Math.abs(oe)<.001*Math.abs(te)){p.push(T-L*O,M-F*O),p.push(T+L*H,M+F*H),te>=0&&(o.join==="round"?v+=bx(T,M,T-L*O,M-F*O,T-z*O,M-G*O,p,!1)+4:v+=2,p.push(T-z*H,M-G*H),p.push(T+z*O,M+G*O));continue}const se=(-L+B)*(-F+M)-(-L+T)*(-F+D),fe=(-z+R)*(-G+M)-(-z+T)*(-G+k),Ee=(re*fe-Z*se)/oe,Be=(ee*se-J*fe)/oe,_e=(Ee-T)*(Ee-T)+(Be-M)*(Be-M),Ce=T+(Ee-T)*O,Se=M+(Be-M)*O,Me=T-(Ee-T)*H,ce=M-(Be-M)*H,$e=Math.min(re*re+J*J,Z*Z+ee*ee),qe=ae?O:H,ft=$e+qe*qe*E;_e<=ft?o.join==="bevel"||_e/E>w?(ae?(p.push(Ce,Se),p.push(T+L*H,M+F*H),p.push(Ce,Se),p.push(T+z*H,M+G*H)):(p.push(T-L*O,M-F*O),p.push(Me,ce),p.push(T-z*O,M-G*O),p.push(Me,ce)),v+=2):o.join==="round"?ae?(p.push(Ce,Se),p.push(T+L*H,M+F*H),v+=bx(T,M,T+L*H,M+F*H,T+z*H,M+G*H,p,!0)+4,p.push(Ce,Se),p.push(T+z*H,M+G*H)):(p.push(T-L*O,M-F*O),p.push(Me,ce),v+=bx(T,M,T-L*O,M-F*O,T-z*O,M-G*O,p,!1)+4,p.push(T-z*O,M-G*O),p.push(Me,ce)):(p.push(Ce,Se),p.push(Me,ce)):(p.push(T-L*O,M-F*O),p.push(T+L*H,M+F*H),o.join==="round"?ae?v+=bx(T,M,T+L*H,M+F*H,T+z*H,M+G*H,p,!0)+2:v+=bx(T,M,T-L*O,M-F*O,T-z*O,M-G*O,p,!1)+2:o.join==="miter"&&_e/E<=w&&(ae?(p.push(Me,ce),p.push(Me,ce)):(p.push(Ce,Se),p.push(Ce,Se)),v+=2),p.push(T-z*O,M-G*O),p.push(T+z*H,M+G*H),v+=2)}B=t[(m-2)*2],D=t[(m-2)*2+1],T=t[(m-1)*2],M=t[(m-1)*2+1],L=-(D-M),F=B-T,V=Math.sqrt(L*L+F*F),L/=V,F/=V,L*=x,F*=x,p.push(T-L*O,M-F*O),p.push(T+L*H,M+F*H),h||(o.cap==="round"?v+=bx(T-L*(O-H)*.5,M-F*(O-H)*.5,T-L*O,M-F*O,T+L*H,M+F*H,p,!1)+2:o.cap==="square"&&(v+=KG(T,M,L,F,O,H,!1,p)));const K=WG*WG;for(let X=A;X<v+A-2;++X)B=p[X*2],D=p[X*2+1],T=p[(X+1)*2],M=p[(X+1)*2+1],R=p[(X+2)*2],k=p[(X+2)*2+1],!(Math.abs(B*(M-k)+T*(k-D)+R*(D-M))<K)&&s.push(X,X+1,X+2)}function QZe(t,e,n,r){const i=Fde;if(t.length===0)return;const s=t[0],a=t[1],o=t[t.length-2],l=t[t.length-1],c=e||Math.abs(s-o)<i&&Math.abs(a-l)<i,u=n,h=t.length/2,f=u.length/2;for(let p=0;p<h;p++)u.push(t[p*2]),u.push(t[p*2+1]);for(let p=0;p<h-1;p++)r.push(f+p,f+p+1);c&&r.push(f+h-1,f)}function jde(t,e,n,r,i,s,a){const o=TJe(t,e,2);if(!o)return;for(let c=0;c<o.length;c+=3)s[a++]=o[c]+i,s[a++]=o[c+1]+i,s[a++]=o[c+2]+i;let l=i*r;for(let c=0;c<t.length;c+=2)n[l]=t[c],n[l+1]=t[c+1],l+=r}const UZe=[],HZe={extension:{type:Vn.ShapeBuilder,name:"polygon"},build(t,e){for(let n=0;n<t.points.length;n++)e[n]=t.points[n];return!0},triangulate(t,e,n,r,i,s){jde(t,UZe,e,n,r,i,s)}},GZe={extension:{type:Vn.ShapeBuilder,name:"rectangle"},build(t,e){const n=t,r=n.x,i=n.y,s=n.width,a=n.height;return s>0&&a>0?(e[0]=r,e[1]=i,e[2]=r+s,e[3]=i,e[4]=r+s,e[5]=i+a,e[6]=r,e[7]=i+a,!0):!1},triangulate(t,e,n,r,i,s){let a=0;r*=n,e[r+a]=t[0],e[r+a+1]=t[1],a+=n,e[r+a]=t[2],e[r+a+1]=t[3],a+=n,e[r+a]=t[6],e[r+a+1]=t[7],a+=n,e[r+a]=t[4],e[r+a+1]=t[5],a+=n;const o=r/n;i[s++]=o,i[s++]=o+1,i[s++]=o+2,i[s++]=o+1,i[s++]=o+3,i[s++]=o+2}},VZe={extension:{type:Vn.ShapeBuilder,name:"triangle"},build(t,e){return e[0]=t.x,e[1]=t.y,e[2]=t.x2,e[3]=t.y2,e[4]=t.x3,e[5]=t.y3,!0},triangulate(t,e,n,r,i,s){let a=0;r*=n,e[r+a]=t[0],e[r+a+1]=t[1],a+=n,e[r+a]=t[2],e[r+a+1]=t[3],a+=n,e[r+a]=t[4],e[r+a+1]=t[5];const o=r/n;i[s++]=o,i[s++]=o+1,i[s++]=o+2}},WZe=new fi,KZe=new es;function qZe(t,e,n,r){const i=e.matrix?t.copyFrom(e.matrix).invert():t.identity();if(e.textureSpace==="local"){const a=n.getBounds(KZe);e.width&&a.pad(e.width);const{x:o,y:l}=a,c=1/a.width,u=1/a.height,h=-o*c,f=-l*u,p=i.a,m=i.b,v=i.c,A=i.d;i.a*=c,i.b*=c,i.c*=u,i.d*=u,i.tx=h*p+f*v+i.tx,i.ty=h*m+f*A+i.ty}else i.translate(e.texture.frame.x,e.texture.frame.y),i.scale(1/e.texture.source.width,1/e.texture.source.height);const s=e.texture.source.style;return!(e.fill instanceof F0)&&s.addressMode==="clamp-to-edge"&&(s.addressMode="repeat",s.update()),r&&i.append(WZe.copyFrom(r).invert()),i}const W4={};ha.handleByMap(Vn.ShapeBuilder,W4);ha.add(GZe,HZe,VZe,iI,jZe,OZe);const YZe=new es,XZe=new fi;function JZe(t,e){const{geometryData:n,batches:r}=e;r.length=0,n.indices.length=0,n.vertices.length=0,n.uvs.length=0;for(let i=0;i<t.instructions.length;i++){const s=t.instructions[i];if(s.action==="texture")ZZe(s.data,r,n);else if(s.action==="fill"||s.action==="stroke"){const a=s.action==="stroke",o=s.data.path.shapePath,l=s.data.style,c=s.data.hole;a&&c&&qG(c.shapePath,l,!0,r,n),c&&(o.shapePrimitives[o.shapePrimitives.length-1].holes=c.shapePath.shapePrimitives),qG(o,l,a,r,n)}}}function ZZe(t,e,n){const r=[],i=W4.rectangle,s=YZe;s.x=t.dx,s.y=t.dy,s.width=t.dw,s.height=t.dh;const a=t.transform;if(!i.build(s,r))return;const{vertices:o,uvs:l,indices:c}=n,u=c.length,h=o.length/2;a&&Nde(r,a),i.triangulate(r,o,2,h,c,u);const f=t.image,p=f.uvs;l.push(p.x0,p.y0,p.x1,p.y1,p.x3,p.y3,p.x2,p.y2);const m=lf.get(Lde);m.indexOffset=u,m.indexSize=c.length-u,m.attributeOffset=h,m.attributeSize=o.length/2-h,m.baseColor=t.style,m.alpha=t.alpha,m.texture=f,m.geometryData=n,e.push(m)}function qG(t,e,n,r,i){const{vertices:s,uvs:a,indices:o}=i;t.shapePrimitives.forEach(({shape:l,transform:c,holes:u})=>{const h=[],f=W4[l.type];if(!f.build(l,h))return;const p=o.length,m=s.length/2;let v="triangle-list";if(c&&Nde(h,c),n){const w=l.closePath??!0,B=e;B.pixelLine?(QZe(h,w,s,o),v="line-list"):$Ze(h,B,!1,w,s,o)}else if(u){const w=[],B=h.slice();eet(u).forEach(T=>{w.push(B.length/2),B.push(...T)}),jde(B,w,s,2,m,o,p)}else f.triangulate(h,s,2,m,o,p);const A=a.length/2,x=e.texture;if(x!==Gn.WHITE){const w=qZe(XZe,e,l,c);NZe(s,2,m,a,A,2,s.length/2-m,w)}else LZe(a,A,2,s.length/2-m);const E=lf.get(Lde);E.indexOffset=p,E.indexSize=o.length-p,E.attributeOffset=m,E.attributeSize=s.length/2-m,E.baseColor=e.color,E.alpha=e.alpha,E.texture=x,E.geometryData=i,E.topology=v,r.push(E)})}function eet(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n].shape,i=[];W4[r.type].build(r,i)&&e.push(i)}return e}class tet{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class net{constructor(){this.instructions=new Hue}init(e){const n=e.maxTextures;this.batcher?this.batcher._updateMaxTextures(n):this.batcher=new kZe({maxTextures:n}),this.instructions.reset()}get geometry(){return kr(YYe,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const tO=class i8{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){i8.defaultOptions.bezierSmoothness=e?.bezierSmoothness??i8.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let n=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){n?this._cleanGraphicsContextData(e):n=this._initContext(e),JZe(e,n);const r=e.batchMode;e.customShader||r==="no-batch"?n.isBatchable=!1:r==="auto"?n.isBatchable=n.geometryData.vertices.length<400:n.isBatchable=!0,e.dirty=!1}return n}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const n=lf.get(net,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:r,geometryData:i}=this._gpuContextHash[e.uid],s=i.vertices.length,a=i.indices.length;for(let u=0;u<r.length;u++)r[u].applyTransform=!1;const o=n.batcher;o.ensureAttributeBuffer(s),o.ensureIndexBuffer(a),o.begin();for(let u=0;u<r.length;u++){const h=r[u];o.add(h)}o.finish(n.instructions);const l=o.geometry;l.indexBuffer.setDataWithSize(o.indexBuffer,o.indexSize,!0),l.buffers[0].setDataWithSize(o.attributeBuffer.float32View,o.attributeSize,!0);const c=o.batches;for(let u=0;u<c.length;u++){const h=c[u];h.bindGroup=VJe(h.textures.textures,h.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[e.uid]=n,n}_initContext(e){const n=new tet;return n.context=e,this._gpuContextHash[e.uid]=n,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const n=this._gpuContextHash[e.uid];n.isBatchable||this._graphicsDataContextHash[e.uid]&&(lf.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),n.batches&&n.batches.forEach(r=>{lf.return(r)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context);this._gpuContextHash={},this._graphicsDataContextHash={},this._renderer=null}};tO.extension={type:[Vn.WebGLSystem,Vn.WebGPUSystem,Vn.CanvasSystem],name:"graphicsContext"};tO.defaultOptions={bezierSmoothness:.5};let Ode=tO;const ret=8,w3=11920929e-14,iet=1;function zde(t,e,n,r,i,s,a,o,l,c){const h=Math.min(.99,Math.max(0,c??Ode.defaultOptions.bezierSmoothness));let f=(iet-h)/1;return f*=f,set(e,n,r,i,s,a,o,l,t,f),t}function set(t,e,n,r,i,s,a,o,l,c){s8(t,e,n,r,i,s,a,o,l,c,0),l.push(a,o)}function s8(t,e,n,r,i,s,a,o,l,c,u){if(u>ret)return;const h=(t+n)/2,f=(e+r)/2,p=(n+i)/2,m=(r+s)/2,v=(i+a)/2,A=(s+o)/2,x=(h+p)/2,E=(f+m)/2,w=(p+v)/2,B=(m+A)/2,D=(x+w)/2,T=(E+B)/2;if(u>0){let M=a-t,R=o-e;const k=Math.abs((n-a)*R-(r-o)*M),L=Math.abs((i-a)*R-(s-o)*M);if(k>w3&&L>w3){if((k+L)*(k+L)<=c*(M*M+R*R)){l.push(D,T);return}}else if(k>w3){if(k*k<=c*(M*M+R*R)){l.push(D,T);return}}else if(L>w3){if(L*L<=c*(M*M+R*R)){l.push(D,T);return}}else if(M=D-(t+a)/2,R=T-(e+o)/2,M*M+R*R<=c){l.push(D,T);return}}s8(t,e,h,f,x,E,D,T,l,c,u+1),s8(D,T,w,B,v,A,a,o,l,c,u+1)}const aet=8,oet=11920929e-14,cet=1;function uet(t,e,n,r,i,s,a,o){const c=Math.min(.99,Math.max(0,o??Ode.defaultOptions.bezierSmoothness));let u=(cet-c)/1;return u*=u,det(e,n,r,i,s,a,t,u),t}function det(t,e,n,r,i,s,a,o){a8(a,t,e,n,r,i,s,o,0),a.push(i,s)}function a8(t,e,n,r,i,s,a,o,l){if(l>aet)return;const c=(e+r)/2,u=(n+i)/2,h=(r+s)/2,f=(i+a)/2,p=(c+h)/2,m=(u+f)/2;let v=s-e,A=a-n;const x=Math.abs((r-s)*A-(i-a)*v);if(x>oet){if(x*x<=o*(v*v+A*A)){t.push(p,m);return}}else if(v=p-(e+s)/2,A=m-(n+a)/2,v*v+A*A<=o){t.push(p,m);return}a8(t,e,n,c,u,p,m,o,l+1),a8(t,p,m,h,f,s,a,o,l+1)}function $de(t,e,n,r,i,s,a,o){let l=Math.abs(i-s);(!a&&i>s||a&&s>i)&&(l=2*Math.PI-l),o||(o=Math.max(6,Math.floor(6*Math.pow(r,1/3)*(l/Math.PI)))),o=Math.max(o,3);let c=l/o,u=i;c*=a?-1:1;for(let h=0;h<o+1;h++){const f=Math.cos(u),p=Math.sin(u),m=e+f*r,v=n+p*r;t.push(m,v),u+=c}}function het(t,e,n,r,i,s){const a=t[t.length-2],l=t[t.length-1]-n,c=a-e,u=i-n,h=r-e,f=Math.abs(l*h-c*u);if(f<1e-8||s===0){(t[t.length-2]!==e||t[t.length-1]!==n)&&t.push(e,n);return}const p=l*l+c*c,m=u*u+h*h,v=l*u+c*h,A=s*Math.sqrt(p)/f,x=s*Math.sqrt(m)/f,E=A*v/p,w=x*v/m,B=A*h+x*c,D=A*u+x*l,T=c*(x+E),M=l*(x+E),R=h*(A+w),k=u*(A+w),L=Math.atan2(M-D,T-B),F=Math.atan2(k-D,R-B);$de(t,B+e,D+n,s,L,F,c*u>h*l)}const f_=Math.PI*2,lN={centerX:0,centerY:0,ang1:0,ang2:0},cN=({x:t,y:e},n,r,i,s,a,o,l)=>{t*=n,e*=r;const c=i*t-s*e,u=s*t+i*e;return l.x=c+a,l.y=u+o,l};function fet(t,e){const n=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=e===1.5707963267948966?.551915024494:n,i=Math.cos(t),s=Math.sin(t),a=Math.cos(t+e),o=Math.sin(t+e);return[{x:i-s*r,y:s+i*r},{x:a+o*r,y:o-a*r},{x:a,y:o}]}const YG=(t,e,n,r)=>{const i=t*r-e*n<0?-1:1;let s=t*n+e*r;return s>1&&(s=1),s<-1&&(s=-1),i*Math.acos(s)},pet=(t,e,n,r,i,s,a,o,l,c,u,h,f)=>{const p=Math.pow(i,2),m=Math.pow(s,2),v=Math.pow(u,2),A=Math.pow(h,2);let x=p*m-p*A-m*v;x<0&&(x=0),x/=p*A+m*v,x=Math.sqrt(x)*(a===o?-1:1);const E=x*i/s*h,w=x*-s/i*u,B=c*E-l*w+(t+n)/2,D=l*E+c*w+(e+r)/2,T=(u-E)/i,M=(h-w)/s,R=(-u-E)/i,k=(-h-w)/s,L=YG(1,0,T,M);let F=YG(T,M,R,k);o===0&&F>0&&(F-=f_),o===1&&F<0&&(F+=f_),f.centerX=B,f.centerY=D,f.ang1=L,f.ang2=F};function get(t,e,n,r,i,s,a,o=0,l=0,c=0){if(s===0||a===0)return;const u=Math.sin(o*f_/360),h=Math.cos(o*f_/360),f=h*(e-r)/2+u*(n-i)/2,p=-u*(e-r)/2+h*(n-i)/2;if(f===0&&p===0)return;s=Math.abs(s),a=Math.abs(a);const m=Math.pow(f,2)/Math.pow(s,2)+Math.pow(p,2)/Math.pow(a,2);m>1&&(s*=Math.sqrt(m),a*=Math.sqrt(m)),pet(e,n,r,i,s,a,l,c,u,h,f,p,lN);let{ang1:v,ang2:A}=lN;const{centerX:x,centerY:E}=lN;let w=Math.abs(A)/(f_/4);Math.abs(1-w)<1e-7&&(w=1);const B=Math.max(Math.ceil(w),1);A/=B;let D=t[t.length-2],T=t[t.length-1];const M={x:0,y:0};for(let R=0;R<B;R++){const k=fet(v,A),{x:L,y:F}=cN(k[0],s,a,h,u,x,E,M),{x:z,y:G}=cN(k[1],s,a,h,u,x,E,M),{x:V,y:q}=cN(k[2],s,a,h,u,x,E,M);zde(t,D,T,L,F,z,G,V,q),D=V,T=q,v+=A}}function met(t,e,n){const r=(a,o)=>{const l=o.x-a.x,c=o.y-a.y,u=Math.sqrt(l*l+c*c),h=l/u,f=c/u;return{len:u,nx:h,ny:f}},i=(a,o)=>{a===0?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y)};let s=e[e.length-1];for(let a=0;a<e.length;a++){const o=e[a%e.length],l=o.radius??n;if(l<=0){i(a,o),s=o;continue}const c=e[(a+1)%e.length],u=r(o,s),h=r(o,c);if(u.len<1e-4||h.len<1e-4){i(a,o),s=o;continue}let f=Math.asin(u.nx*h.ny-u.ny*h.nx),p=1,m=!1;u.nx*h.nx-u.ny*-h.ny<0?f<0?f=Math.PI+f:(f=Math.PI-f,p=-1,m=!0):f>0&&(p=-1,m=!0);const v=f/2;let A,x=Math.abs(Math.cos(v)*l/Math.sin(v));x>Math.min(u.len/2,h.len/2)?(x=Math.min(u.len/2,h.len/2),A=Math.abs(x*Math.sin(v)/Math.cos(v))):A=l;const E=o.x+h.nx*x+-h.ny*A*p,w=o.y+h.ny*x+h.nx*A*p,B=Math.atan2(u.ny,u.nx)+Math.PI/2*p,D=Math.atan2(h.ny,h.nx)-Math.PI/2*p;a===0&&t.moveTo(E+Math.cos(B)*A,w+Math.sin(B)*A),t.arc(E,w,A,B,D,m),s=o}}function Aet(t,e,n,r){const i=(o,l)=>Math.sqrt((o.x-l.x)**2+(o.y-l.y)**2),s=(o,l,c)=>({x:o.x+(l.x-o.x)*c,y:o.y+(l.y-o.y)*c}),a=e.length;for(let o=0;o<a;o++){const l=e[(o+1)%a],c=l.radius??n;if(c<=0){o===0?t.moveTo(l.x,l.y):t.lineTo(l.x,l.y);continue}const u=e[o],h=e[(o+2)%a],f=i(u,l);let p;if(f<1e-4)p=l;else{const A=Math.min(f/2,c);p=s(l,u,A/f)}const m=i(h,l);let v;if(m<1e-4)v=l;else{const A=Math.min(m/2,c);v=s(l,h,A/m)}o===0?t.moveTo(p.x,p.y):t.lineTo(p.x,p.y),t.quadraticCurveTo(l.x,l.y,v.x,v.y,r)}}const yet=new es;class vet{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Np,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,n){return this.startPoly(e,n),this}lineTo(e,n){this._ensurePoly();const r=this._currentPoly.points,i=r[r.length-2],s=r[r.length-1];return(i!==e||s!==n)&&r.push(e,n),this}arc(e,n,r,i,s,a){this._ensurePoly(!1);const o=this._currentPoly.points;return $de(o,e,n,r,i,s,a),this}arcTo(e,n,r,i,s){this._ensurePoly();const a=this._currentPoly.points;return het(a,e,n,r,i,s),this}arcToSvg(e,n,r,i,s,a,o){const l=this._currentPoly.points;return get(l,this._currentPoly.lastX,this._currentPoly.lastY,a,o,e,n,r,i,s),this}bezierCurveTo(e,n,r,i,s,a,o){this._ensurePoly();const l=this._currentPoly;return zde(this._currentPoly.points,l.lastX,l.lastY,e,n,r,i,s,a,o),this}quadraticCurveTo(e,n,r,i,s){this._ensurePoly();const a=this._currentPoly;return uet(this._currentPoly.points,a.lastX,a.lastY,e,n,r,i,s),this}closePath(){return this.endPoly(!0),this}addPath(e,n){this.endPoly(),n&&!n.isIdentity()&&(e=e.clone(!0),e.transform(n));const r=this.shapePrimitives,i=r.length;for(let s=0;s<e.instructions.length;s++){const a=e.instructions[s];this[a.action](...a.data)}if(e.checkForHoles&&r.length-i>1){let s=null;for(let a=i;a<r.length;a++){const o=r[a];if(o.shape.type==="polygon"){const l=o.shape,c=s?.shape;c&&c.containsPolygon(l)?(s.holes||(s.holes=[]),s.holes.push(o),r.copyWithin(a,a+1),r.length--,a--):s=o}}}return this}finish(e=!1){this.endPoly(e)}rect(e,n,r,i,s){return this.drawShape(new es(e,n,r,i),s),this}circle(e,n,r,i){return this.drawShape(new Jj(e,n,r),i),this}poly(e,n,r){const i=new d_(e);return i.closePath=n,this.drawShape(i,r),this}regularPoly(e,n,r,i,s=0,a){i=Math.max(i|0,3);const o=-1*Math.PI/2+s,l=Math.PI*2/i,c=[];for(let u=0;u<i;u++){const h=o-u*l;c.push(e+r*Math.cos(h),n+r*Math.sin(h))}return this.poly(c,!0,a),this}roundPoly(e,n,r,i,s,a=0,o){if(i=Math.max(i|0,3),s<=0)return this.regularPoly(e,n,r,i,a);const l=r*Math.sin(Math.PI/i)-.001;s=Math.min(s,l);const c=-1*Math.PI/2+a,u=Math.PI*2/i,h=(i-2)*Math.PI/i/2;for(let f=0;f<i;f++){const p=f*u+c,m=e+r*Math.cos(p),v=n+r*Math.sin(p),A=p+Math.PI+h,x=p-Math.PI-h,E=m+s*Math.cos(A),w=v+s*Math.sin(A),B=m+s*Math.cos(x),D=v+s*Math.sin(x);f===0?this.moveTo(E,w):this.lineTo(E,w),this.quadraticCurveTo(m,v,B,D,o)}return this.closePath()}roundShape(e,n,r=!1,i){return e.length<3?this:(r?Aet(this,e,n,i):met(this,e,n),this.closePath())}filletRect(e,n,r,i,s){if(s===0)return this.rect(e,n,r,i);const a=Math.min(r,i)/2,o=Math.min(a,Math.max(-a,s)),l=e+r,c=n+i,u=o<0?-o:0,h=Math.abs(o);return this.moveTo(e,n+h).arcTo(e+u,n+u,e+h,n,h).lineTo(l-h,n).arcTo(l-u,n+u,l,n+h,h).lineTo(l,c-h).arcTo(l-u,c-u,e+r-h,c,h).lineTo(e+h,c).arcTo(e+u,c-u,e,c-h,h).closePath()}chamferRect(e,n,r,i,s,a){if(s<=0)return this.rect(e,n,r,i);const o=Math.min(s,Math.min(r,i)/2),l=e+r,c=n+i,u=[e+o,n,l-o,n,l,n+o,l,c-o,l-o,c,e+o,c,e,c-o,e,n+o];for(let h=u.length-1;h>=2;h-=2)u[h]===u[h-2]&&u[h-1]===u[h-3]&&u.splice(h-1,2);return this.poly(u,!0,a)}ellipse(e,n,r,i,s){return this.drawShape(new Zj(e,n,r,i),s),this}roundRect(e,n,r,i,s,a){return this.drawShape(new eO(e,n,r,i,s),a),this}drawShape(e,n){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:n}),this}startPoly(e,n){let r=this._currentPoly;return r&&this.endPoly(),r=new d_,r.points.push(e,n),this._currentPoly=r,this}endPoly(e=!1){const n=this._currentPoly;return n&&n.points.length>2&&(n.closePath=e,this.shapePrimitives.push({shape:n})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new d_,e)){const n=this.shapePrimitives[this.shapePrimitives.length-1];if(n){let r=n.shape.x,i=n.shape.y;if(n.transform&&!n.transform.isIdentity()){const s=n.transform,a=r;r=s.a*r+s.c*i+s.tx,i=s.b*a+s.d*i+s.ty}this._currentPoly.points.push(r,i)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let n=0;n<e.instructions.length;n++){const r=e.instructions[n];this[r.action](...r.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const n=this.shapePrimitives;for(let r=0;r<n.length;r++){const i=n[r],s=i.shape.getBounds(yet);i.transform?e.addRect(s,i.transform):e.addRect(s)}return e}}class _0{constructor(e,n=!1){this.instructions=[],this.uid=Ua("graphicsPath"),this._dirty=!0,this.checkForHoles=n,typeof e=="string"?QJe(e,this):this.instructions=e?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new vet(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,n){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,n]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,n,r,i,s){const a=this.instructions[this.instructions.length-1],o=this.getLastPoint(no.shared);let l=0,c=0;if(!a||a.action!=="bezierCurveTo")l=o.x,c=o.y;else{l=a.data[2],c=a.data[3];const u=o.x,h=o.y;l=u+(u-l),c=h+(h-c)}return this.instructions.push({action:"bezierCurveTo",data:[l,c,e,n,r,i,s]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,n,r){const i=this.instructions[this.instructions.length-1],s=this.getLastPoint(no.shared);let a=0,o=0;if(!i||i.action!=="quadraticCurveTo")a=s.x,o=s.y;else{a=i.data[0],o=i.data[1];const l=s.x,c=s.y;a=l+(l-a),o=c+(c-o)}return this.instructions.push({action:"quadraticCurveTo",data:[a,o,e,n,r]}),this._dirty=!0,this}rect(e,n,r,i,s){return this.instructions.push({action:"rect",data:[e,n,r,i,s]}),this._dirty=!0,this}circle(e,n,r,i){return this.instructions.push({action:"circle",data:[e,n,r,i]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,n,r,i,s,a,o){s||(s=i/2);const l=-1*Math.PI/2+a,c=r*2,u=Math.PI*2/c,h=[];for(let f=0;f<c;f++){const p=f%2?s:i,m=f*u+l;h.push(e+p*Math.cos(m),n+p*Math.sin(m))}return this.poly(h,!0,o),this}clone(e=!1){const n=new _0;if(n.checkForHoles=this.checkForHoles,!e)n.instructions=this.instructions.slice();else for(let r=0;r<this.instructions.length;r++){const i=this.instructions[r];n.instructions.push({action:i.action,data:i.data.slice()})}return n}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const n=e.a,r=e.b,i=e.c,s=e.d,a=e.tx,o=e.ty;let l=0,c=0,u=0,h=0,f=0,p=0,m=0,v=0;for(let A=0;A<this.instructions.length;A++){const x=this.instructions[A],E=x.data;switch(x.action){case"moveTo":case"lineTo":l=E[0],c=E[1],E[0]=n*l+i*c+a,E[1]=r*l+s*c+o;break;case"bezierCurveTo":u=E[0],h=E[1],f=E[2],p=E[3],l=E[4],c=E[5],E[0]=n*u+i*h+a,E[1]=r*u+s*h+o,E[2]=n*f+i*p+a,E[3]=r*f+s*p+o,E[4]=n*l+i*c+a,E[5]=r*l+s*c+o;break;case"quadraticCurveTo":u=E[0],h=E[1],l=E[2],c=E[3],E[0]=n*u+i*h+a,E[1]=r*u+s*h+o,E[2]=n*l+i*c+a,E[3]=r*l+s*c+o;break;case"arcToSvg":l=E[5],c=E[6],m=E[0],v=E[1],E[0]=n*m+i*v,E[1]=r*m+s*v,E[5]=n*l+i*c+a,E[6]=r*l+s*c+o;break;case"circle":E[4]=cw(E[3],e);break;case"rect":E[4]=cw(E[4],e);break;case"ellipse":E[8]=cw(E[8],e);break;case"roundRect":E[5]=cw(E[5],e);break;case"addPath":E[0].transform(e);break;case"poly":E[2]=cw(E[2],e);break;default:Zs("unknown transform action",x.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let n=this.instructions.length-1,r=this.instructions[n];if(!r)return e.x=0,e.y=0,e;for(;r.action==="closePath";){if(n--,n<0)return e.x=0,e.y=0,e;r=this.instructions[n]}switch(r.action){case"moveTo":case"lineTo":e.x=r.data[0],e.y=r.data[1];break;case"quadraticCurveTo":e.x=r.data[2],e.y=r.data[3];break;case"bezierCurveTo":e.x=r.data[4],e.y=r.data[5];break;case"arc":case"arcToSvg":e.x=r.data[5],e.y=r.data[6];break;case"addPath":r.data[0].getLastPoint(e);break}return e}}function cw(t,e){return t?t.prepend(e):e.clone()}function Qa(t,e,n){const r=t.getAttribute(e);return r?Number(r):n}function xet(t,e){const n=t.querySelectorAll("defs");for(let r=0;r<n.length;r++){const i=n[r];for(let s=0;s<i.children.length;s++){const a=i.children[s];switch(a.nodeName.toLowerCase()){case"lineargradient":e.defs[a.id]=bet(a);break;case"radialgradient":e.defs[a.id]=Cet();break}}}}function bet(t){const e=Qa(t,"x1",0),n=Qa(t,"y1",0),r=Qa(t,"x2",1),i=Qa(t,"y2",0),s=t.getAttribute("gradientUnits")||"objectBoundingBox",a=new F0(e,n,r,i,s==="objectBoundingBox"?"local":"global");for(let o=0;o<t.children.length;o++){const l=t.children[o],c=Qa(l,"offset",0),u=io.shared.setValue(l.getAttribute("stop-color")).toNumber();a.addColorStop(c,u)}return a}function Cet(t){return Zs("[SVG Parser] Radial gradients are not yet supported"),new F0(0,0,1,0)}function XG(t){const e=t.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const JG={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function Qde(t,e){const n=t.getAttribute("style"),r={},i={},s={strokeStyle:r,fillStyle:i,useFill:!1,useStroke:!1};for(const a in JG){const o=t.getAttribute(a);o&&ZG(e,s,a,o.trim())}if(n){const a=n.split(";");for(let o=0;o<a.length;o++){const l=a[o].trim(),[c,u]=l.split(":");JG[c]&&ZG(e,s,c,u.trim())}}return{strokeStyle:s.useStroke?r:null,fillStyle:s.useFill?i:null,useFill:s.useFill,useStroke:s.useStroke}}function ZG(t,e,n,r){switch(n){case"stroke":if(r!=="none"){if(r.startsWith("url(")){const i=XG(r);e.strokeStyle.fill=t.defs[i]}else e.strokeStyle.color=io.shared.setValue(r).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(r);break;case"fill":if(r!=="none"){if(r.startsWith("url(")){const i=XG(r);e.fillStyle.fill=t.defs[i]}else e.fillStyle.color=io.shared.setValue(r).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(r);break;case"stroke-opacity":e.strokeStyle.alpha=Number(r);break;case"opacity":e.fillStyle.alpha=Number(r),e.strokeStyle.alpha=Number(r);break}}function Eet(t){if(t.length<=2)return!0;const e=t.map(o=>o.area).sort((o,l)=>l-o),[n,r]=e,i=e[e.length-1],s=n/r,a=r/i;return!(s>3&&a<2)}function wet(t){return t.split(/(?=[Mm])/).filter(r=>r.trim().length>0)}function _et(t){const e=t.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;const n=e.map(Number),r=[],i=[];for(let u=0;u<n.length;u+=2)u+1<n.length&&(r.push(n[u]),i.push(n[u+1]));if(r.length===0||i.length===0)return 0;const s=Math.min(...r),a=Math.max(...r),o=Math.min(...i),l=Math.max(...i);return(a-s)*(l-o)}function eV(t,e){const n=new _0(t,!1);for(const r of n.instructions)e.instructions.push(r)}function Iet(t,e){if(typeof t=="string"){const a=document.createElement("div");a.innerHTML=t.trim(),t=a.querySelector("svg")}const n={context:e,defs:{},path:new _0};xet(t,n);const r=t.children,{fillStyle:i,strokeStyle:s}=Qde(t,n);for(let a=0;a<r.length;a++){const o=r[a];o.nodeName.toLowerCase()!=="defs"&&Ude(o,n,i,s)}return e}function Ude(t,e,n,r){const i=t.children,{fillStyle:s,strokeStyle:a}=Qde(t,e);s&&n?n={...n,...s}:s&&(n=s),a&&r?r={...r,...a}:a&&(r=a);const o=!n&&!r;o&&(n={color:0});let l,c,u,h,f,p,m,v,A,x,E,w,B,D,T,M,R;switch(t.nodeName.toLowerCase()){case"path":{D=t.getAttribute("d");const k=t.getAttribute("fill-rule"),L=wet(D),F=k==="evenodd",z=L.length>1;if(F&&z){const V=L.map(O=>({path:O,area:_et(O)}));if(V.sort((O,H)=>H.area-O.area),L.length>3||!Eet(V))for(let O=0;O<V.length;O++){const H=V[O],K=O===0;e.context.beginPath();const X=new _0(void 0,!0);eV(H.path,X),e.context.path(X),K?(n&&e.context.fill(n),r&&e.context.stroke(r)):e.context.cut()}else for(let O=0;O<V.length;O++){const H=V[O],K=O%2===1;e.context.beginPath();const X=new _0(void 0,!0);eV(H.path,X),e.context.path(X),K?e.context.cut():(n&&e.context.fill(n),r&&e.context.stroke(r))}}else{const V=k?k==="evenodd":!0;T=new _0(D,V),e.context.path(T),n&&e.context.fill(n),r&&e.context.stroke(r)}break}case"circle":m=Qa(t,"cx",0),v=Qa(t,"cy",0),A=Qa(t,"r",0),e.context.ellipse(m,v,A,A),n&&e.context.fill(n),r&&e.context.stroke(r);break;case"rect":l=Qa(t,"x",0),c=Qa(t,"y",0),M=Qa(t,"width",0),R=Qa(t,"height",0),x=Qa(t,"rx",0),E=Qa(t,"ry",0),x||E?e.context.roundRect(l,c,M,R,x||E):e.context.rect(l,c,M,R),n&&e.context.fill(n),r&&e.context.stroke(r);break;case"ellipse":m=Qa(t,"cx",0),v=Qa(t,"cy",0),x=Qa(t,"rx",0),E=Qa(t,"ry",0),e.context.beginPath(),e.context.ellipse(m,v,x,E),n&&e.context.fill(n),r&&e.context.stroke(r);break;case"line":u=Qa(t,"x1",0),h=Qa(t,"y1",0),f=Qa(t,"x2",0),p=Qa(t,"y2",0),e.context.beginPath(),e.context.moveTo(u,h),e.context.lineTo(f,p),r&&e.context.stroke(r);break;case"polygon":B=t.getAttribute("points"),w=B.match(/\d+/g).map(k=>parseInt(k,10)),e.context.poly(w,!0),n&&e.context.fill(n),r&&e.context.stroke(r);break;case"polyline":B=t.getAttribute("points"),w=B.match(/\d+/g).map(k=>parseInt(k,10)),e.context.poly(w,!1),r&&e.context.stroke(r);break;case"g":case"svg":break;default:{Zs(`[SVG parser] <${t.nodeName}> elements unsupported`);break}}o&&(n=null);for(let k=0;k<i.length;k++)Ude(i[k],e,n,r)}function Bet(t){return io.isColorLike(t)}function tV(t){return t instanceof V4}function nV(t){return t instanceof F0}function Tet(t){return t instanceof Gn}function Met(t,e,n){const r=io.shared.setValue(e??0);return t.color=r.toNumber(),t.alpha=r.alpha===1?n.alpha:r.alpha,t.texture=Gn.WHITE,{...n,...t}}function Det(t,e,n){return t.texture=e,{...n,...t}}function rV(t,e,n){return t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,{...n,...t}}function iV(t,e,n){return e.buildGradient(),t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,t.textureSpace=e.textureSpace,{...n,...t}}function Ret(t,e){const n={...e,...t},r=io.shared.setValue(n.color);return n.alpha*=r.alpha,n.color=r.toNumber(),n}function nb(t,e){if(t==null)return null;const n={},r=t;return Bet(t)?Met(n,t,e):Tet(t)?Det(n,t,e):tV(t)?rV(n,t,e):nV(t)?iV(n,t,e):r.fill&&tV(r.fill)?rV(r,r.fill,e):r.fill&&nV(r.fill)?iV(r,r.fill,e):Ret(r,e)}function IM(t,e){const{width:n,alignment:r,miterLimit:i,cap:s,join:a,pixelLine:o,...l}=e,c=nb(t,l);return c?{width:n,alignment:r,miterLimit:i,cap:s,join:a,pixelLine:o,...c}:null}const Pet=new no,sV=new fi,nO=class Mg extends Op{constructor(){super(...arguments),this.uid=Ua("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new _0,this._transform=new fi,this._fillStyle={...Mg.defaultFillStyle},this._strokeStyle={...Mg.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Np,this._boundsDirty=!0}clone(){const e=new Mg;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=nb(e,Mg.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=IM(e,Mg.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=nb(e,Mg.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=nb(e,Mg.defaultStrokeStyle),this}texture(e,n,r,i,s,a){return this.instructions.push({action:"texture",data:{image:e,dx:r||0,dy:i||0,dw:s||e.frame.width,dh:a||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:n?io.shared.setValue(n).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new _0,this}fill(e,n){let r;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i?.action==="stroke"?r=i.data.path:r=this._activePath.clone(),r?(e!=null&&(n!==void 0&&typeof e=="number"&&(kr(Ri,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:n}),this._fillStyle=nb(e,Mg.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:r}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:n}=this._activePath.getLastPoint(no.shared);this._activePath.clear(),this._activePath.moveTo(e,n)}stroke(e){let n;const r=this.instructions[this.instructions.length-1];return this._tick===0&&r?.action==="fill"?n=r.data.path:n=this._activePath.clone(),n?(e!=null&&(this._strokeStyle=IM(e,Mg.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const n=this.instructions[this.instructions.length-1-e],r=this._activePath.clone();if(n&&(n.action==="stroke"||n.action==="fill"))if(n.data.hole)n.data.hole.addPath(r);else{n.data.hole=r;break}}return this._initNextPathLocation(),this}arc(e,n,r,i,s,a){this._tick++;const o=this._transform;return this._activePath.arc(o.a*e+o.c*n+o.tx,o.b*e+o.d*n+o.ty,r,i,s,a),this}arcTo(e,n,r,i,s){this._tick++;const a=this._transform;return this._activePath.arcTo(a.a*e+a.c*n+a.tx,a.b*e+a.d*n+a.ty,a.a*r+a.c*i+a.tx,a.b*r+a.d*i+a.ty,s),this}arcToSvg(e,n,r,i,s,a,o){this._tick++;const l=this._transform;return this._activePath.arcToSvg(e,n,r,i,s,l.a*a+l.c*o+l.tx,l.b*a+l.d*o+l.ty),this}bezierCurveTo(e,n,r,i,s,a,o){this._tick++;const l=this._transform;return this._activePath.bezierCurveTo(l.a*e+l.c*n+l.tx,l.b*e+l.d*n+l.ty,l.a*r+l.c*i+l.tx,l.b*r+l.d*i+l.ty,l.a*s+l.c*a+l.tx,l.b*s+l.d*a+l.ty,o),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(e,n,r,i){return this._tick++,this._activePath.ellipse(e,n,r,i,this._transform.clone()),this}circle(e,n,r){return this._tick++,this._activePath.circle(e,n,r,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,n){this._tick++;const r=this._transform;return this._activePath.lineTo(r.a*e+r.c*n+r.tx,r.b*e+r.d*n+r.ty),this}moveTo(e,n){this._tick++;const r=this._transform,i=this._activePath.instructions,s=r.a*e+r.c*n+r.tx,a=r.b*e+r.d*n+r.ty;return i.length===1&&i[0].action==="moveTo"?(i[0].data[0]=s,i[0].data[1]=a,this):(this._activePath.moveTo(s,a),this)}quadraticCurveTo(e,n,r,i,s){this._tick++;const a=this._transform;return this._activePath.quadraticCurveTo(a.a*e+a.c*n+a.tx,a.b*e+a.d*n+a.ty,a.a*r+a.c*i+a.tx,a.b*r+a.d*i+a.ty,s),this}rect(e,n,r,i){return this._tick++,this._activePath.rect(e,n,r,i,this._transform.clone()),this}roundRect(e,n,r,i,s){return this._tick++,this._activePath.roundRect(e,n,r,i,s,this._transform.clone()),this}poly(e,n){return this._tick++,this._activePath.poly(e,n,this._transform.clone()),this}regularPoly(e,n,r,i,s=0,a){return this._tick++,this._activePath.regularPoly(e,n,r,i,s,a),this}roundPoly(e,n,r,i,s,a){return this._tick++,this._activePath.roundPoly(e,n,r,i,s,a),this}roundShape(e,n,r,i){return this._tick++,this._activePath.roundShape(e,n,r,i),this}filletRect(e,n,r,i,s){return this._tick++,this._activePath.filletRect(e,n,r,i,s),this}chamferRect(e,n,r,i,s,a){return this._tick++,this._activePath.chamferRect(e,n,r,i,s,a),this}star(e,n,r,i,s=0,a=0){return this._tick++,this._activePath.star(e,n,r,i,s,a,this._transform.clone()),this}svg(e){return this._tick++,Iet(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,n=e){return this._transform.scale(e,n),this}setTransform(e,n,r,i,s,a){return e instanceof fi?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,n,r,i,s,a),this)}transform(e,n,r,i,s,a){return e instanceof fi?(this._transform.append(e),this):(sV.set(e,n,r,i,s,a),this._transform.append(sV),this)}translate(e,n=e){return this._transform.translate(e,n),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let n=0;n<this.instructions.length;n++){const r=this.instructions[n],i=r.action;if(i==="fill"){const s=r.data;e.addBounds(s.path.bounds)}else if(i==="texture"){const s=r.data;e.addFrame(s.dx,s.dy,s.dx+s.dw,s.dy+s.dh,s.transform)}if(i==="stroke"){const s=r.data,a=s.style.alignment,o=s.style.width*(1-a),l=s.path.bounds;e.addFrame(l.minX-o,l.minY-o,l.maxX+o,l.maxY+o)}}return e}containsPoint(e){if(!this.bounds.containsPoint(e.x,e.y))return!1;const n=this.instructions;let r=!1;for(let i=0;i<n.length;i++){const s=n[i],a=s.data,o=a.path;if(!s.action||!o)continue;const l=a.style,c=o.shapePath.shapePrimitives;for(let u=0;u<c.length;u++){const h=c[u].shape;if(!l||!h)continue;const f=c[u].transform,p=f?f.applyInverse(e,Pet):e;if(s.action==="fill")r=h.contains(p.x,p.y);else{const v=l;r=h.strokeContains(p.x,p.y,v.width,v.alignment)}const m=a.hole;if(m){const v=m.shapePath?.shapePrimitives;if(v)for(let A=0;A<v.length;A++)v[A].shape.contains(p.x,p.y)&&(r=!1)}if(r)return!0}}return r}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){const r=typeof e=="boolean"?e:e?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(r)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(r))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};nO.defaultFillStyle={color:16777215,alpha:1,texture:Gn.WHITE,matrix:null,fill:null,textureSpace:"local"};nO.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Gn.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let ef=nO;const rO=class E1 extends Op{constructor(e={}){super(),this.uid=Ua("textStyle"),this._tick=0,ket(e);const n={...E1.defaultTextStyle,...e};for(const r in n){const i=r;this[i]=n[r]}this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...E1.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...E1.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...ef.defaultFillStyle,...e},()=>{this._fill=nb({...this._originalFill},ef.defaultFillStyle)})),this._fill=nb(e===0?"black":e,ef.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...ef.defaultStrokeStyle,...e},()=>{this._stroke=IM({...this._originalStroke},ef.defaultStrokeStyle)})),this._stroke=IM(e,ef.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const e=E1.defaultTextStyle;for(const n in e)this[n]=e[n]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new E1({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let n=0;n<this._filters.length;n++)e+=this._filters[n].padding;return Math.max(this._padding,e)}destroy(e=!1){if(this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){const r=typeof e=="boolean"?e:e?.textureSource;this._fill?.texture&&this._fill.texture.destroy(r),this._originalFill?.texture&&this._originalFill.texture.destroy(r),this._stroke?.texture&&this._stroke.texture.destroy(r),this._originalStroke?.texture&&this._originalStroke.texture.destroy(r)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,n){return new Proxy(e,{set:(r,i,s)=>(r[i]===s||(r[i]=s,n?.(i,s),this.update()),!0)})}_isFillStyle(e){return(e??null)!==null&&!(io.isColorLike(e)||e instanceof F0||e instanceof V4)}};rO.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};rO.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let bn=rO;function ket(t){const e=t;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const n=bn.defaultDropShadow;t.dropShadow={alpha:e.dropShadowAlpha??n.alpha,angle:e.dropShadowAngle??n.angle,blur:e.dropShadowBlur??n.blur,color:e.dropShadowColor??n.color,distance:e.dropShadowDistance??n.distance}}if(e.strokeThickness!==void 0){kr(Ri,"strokeThickness is now a part of stroke");const n=e.stroke;let r={};if(io.isColorLike(n))r.color=n;else if(n instanceof F0||n instanceof V4)r.fill=n;else if(Object.hasOwnProperty.call(n,"color")||Object.hasOwnProperty.call(n,"fill"))r=n;else throw new Error("Invalid stroke value.");t.stroke={...r,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if(kr(Ri,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&Zs("The number of fill colors must match the number of fill gradient stops.");const n=new F0({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),r=e.fillGradientStops.slice(),i=e.fill.map(s=>io.shared.setValue(s).toNumber());r.forEach((s,a)=>{n.addColorStop(s,i[a])}),t.fill={fill:n}}}class Net{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,n){const r=ls.get().createCanvas();r.width=e,r.height=n;const i=r.getContext("2d");return{canvas:r,context:i}}getOptimalCanvasAndContext(e,n,r=1){e=Math.ceil(e*r-1e-6),n=Math.ceil(n*r-1e-6),e=_E(e),n=_E(n);const i=(e<<17)+(n<<1);this._canvasPool[i]||(this._canvasPool[i]=[]);let s=this._canvasPool[i].pop();return s||(s=this._createCanvasAndContext(e,n)),s}returnCanvasAndContext(e){const n=e.canvas,{width:r,height:i}=n,s=(r<<17)+(i<<1);e.context.resetTransform(),e.context.clearRect(0,0,r,i),this._canvasPool[s].push(e)}clear(){this._canvasPool={}}}const sI=new Net;WI.register(sI);const aV=1e5;function BM(t,e,n,r=0){if(t.texture===Gn.WHITE&&!t.fill)return io.shared.setValue(t.color).setAlpha(t.alpha??1).toHexa();if(t.fill){if(t.fill instanceof V4){const i=t.fill,s=e.createPattern(i.texture.source.resource,"repeat"),a=i.transform.copyTo(fi.shared);return a.scale(i.texture.frame.width,i.texture.frame.height),s.setTransform(a),s}else if(t.fill instanceof F0){const i=t.fill,s=i.type==="linear",a=i.textureSpace==="local";let o=1,l=1;a&&n&&(o=n.width+r,l=n.height+r);let c,u=!1;if(s){const{start:h,end:f}=i;c=e.createLinearGradient(h.x*o,h.y*l,f.x*o,f.y*l),u=Math.abs(f.x-h.x)<Math.abs((f.y-h.y)*.1)}else{const{center:h,innerRadius:f,outerCenter:p,outerRadius:m}=i;c=e.createRadialGradient(h.x*o,h.y*l,f*o,p.x*o,p.y*l,m*o)}if(u&&a&&n){const h=n.lineHeight/l;for(let f=0;f<n.lines.length;f++){const p=(f*n.lineHeight+r/2)/l;i.colorStops.forEach(m=>{const v=p+m.offset*h;c.addColorStop(Math.floor(v*aV)/aV,io.shared.setValue(m.color).toHex())})}}else i.colorStops.forEach(h=>{c.addColorStop(h.offset,io.shared.setValue(h.color).toHex())});return c}}else{const i=e.createPattern(t.texture.source.resource,"repeat"),s=t.matrix.copyTo(fi.shared);return s.scale(t.texture.frame.width,t.texture.frame.height),i.setTransform(s),i}return Zs("FillStyle not recognised",t),"red"}const Hde=class Gde extends Sde{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const n={...Gde.defaultOptions,...e};this._textureSize=n.textureSize,this._mipmap=n.mipmap;const r=n.style.clone();n.overrideFill&&(r._fill.color=16777215,r._fill.alpha=1,r._fill.texture=Gn.WHITE,r._fill.fill=null),this.applyFillAsTint=n.overrideFill;const i=r.fontSize;r.fontSize=this.baseMeasurementFontSize;const s=wM(r);n.overrideSize?r._stroke&&(r._stroke.width*=this.baseRenderedFontSize/i):r.fontSize=this.baseRenderedFontSize=i,this._style=r,this._skipKerning=n.skipKerning??!1,this.resolution=n.resolution??1,this._padding=n.padding??4,n.textureStyle&&(this._textureStyle=n.textureStyle instanceof IE?n.textureStyle:new IE(n.textureStyle)),this.fontMetrics=os.measureFont(s),this.lineHeight=r.lineHeight||this.fontMetrics.fontSize||r.fontSize}ensureCharacters(e){const n=os.graphemeSegmenter(e).filter(A=>!this._currentChars.includes(A)).filter((A,x,E)=>E.indexOf(A)===x);if(!n.length)return;this._currentChars=[...this._currentChars,...n];let r;this._currentPageIndex===-1?r=this._nextPage():r=this.pages[this._currentPageIndex];let{canvas:i,context:s}=r.canvasAndContext,a=r.texture.source;const o=this._style;let l=this._currentX,c=this._currentY,u=this._currentMaxCharHeight;const h=this.baseRenderedFontSize/this.baseMeasurementFontSize,f=this._padding*h;let p=!1;const m=i.width/this.resolution,v=i.height/this.resolution;for(let A=0;A<n.length;A++){const x=n[A],E=os.measureText(x,o,i,!1);E.lineHeight=E.height;const w=E.width*h,B=Math.ceil((o.fontStyle==="italic"?2:1)*w),D=E.height*h,T=B+f*2,M=D+f*2;if(p=!1,x!==`
`&&x!=="\r"&&x!=="	"&&x!==" "&&(p=!0,u=Math.ceil(Math.max(M,u))),l+T>m&&(c+=u,u=M,l=0,c+u>v)){a.update();const k=this._nextPage();i=k.canvasAndContext.canvas,s=k.canvasAndContext.context,a=k.texture.source,l=0,c=0,u=0}const R=w/h-(o.dropShadow?.distance??0)-(o._stroke?.width??0);if(this.chars[x]={id:x.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:R,kerning:{}},p){this._drawGlyph(s,E,l+f,c+f,h,o);const k=a.width*h,L=a.height*h,F=new es(l/k*a.width,c/L*a.height,T/k*a.width,M/L*a.height);this.chars[x].texture=new Gn({source:a,frame:F}),l+=Math.ceil(T)}}a.update(),this._currentX=l,this._currentY=c,this._currentMaxCharHeight=u,this._skipKerning&&this._applyKerning(n,s)}get pageTextures(){return kr(Ri,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,n){const r=this._measureCache;for(let i=0;i<e.length;i++){const s=e[i];for(let a=0;a<this._currentChars.length;a++){const o=this._currentChars[a];let l=r[s];l||(l=r[s]=n.measureText(s).width);let c=r[o];c||(c=r[o]=n.measureText(o).width);let u=n.measureText(s+o).width,h=u-(l+c);h&&(this.chars[s].kerning[o]=h),u=n.measureText(s+o).width,h=u-(l+c),h&&(this.chars[o].kerning[s]=h)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,n=sI.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(n.context,this._style,e);const r=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),i=new Gn({source:new Pb({resource:n.canvas,resolution:r,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(i.source.style=this._textureStyle);const s={canvasAndContext:n,texture:i};return this.pages[this._currentPageIndex]=s,s}_setupContext(e,n,r){n.fontSize=this.baseRenderedFontSize,e.scale(r,r),e.font=wM(n),n.fontSize=this.baseMeasurementFontSize,e.textBaseline=n.textBaseline;const i=n._stroke,s=i?.width??0;if(i&&(e.lineWidth=s,e.lineJoin=i.join,e.miterLimit=i.miterLimit,e.strokeStyle=BM(i,e)),n._fill&&(e.fillStyle=BM(n._fill,e)),n.dropShadow){const a=n.dropShadow,o=io.shared.setValue(a.color).toArray(),l=a.blur*r,c=a.distance*r;e.shadowColor=`rgba(${o[0]*255},${o[1]*255},${o[2]*255},${a.alpha})`,e.shadowBlur=l,e.shadowOffsetX=Math.cos(a.angle)*c,e.shadowOffsetY=Math.sin(a.angle)*c}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,n,r,i,s,a){const o=n.text,l=n.fontProperties,u=(a._stroke?.width??0)*s,h=r+u/2,f=i-u/2,p=l.descent*s,m=n.lineHeight*s;let v=!1;a.stroke&&u&&(v=!0,e.strokeText(o,h,f+m-p));const{shadowBlur:A,shadowOffsetX:x,shadowOffsetY:E}=e;a._fill&&(v&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(o,h,f+m-p)),v&&(e.shadowBlur=A,e.shadowOffsetX=x,e.shadowOffsetY=E)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:n,texture:r}=this.pages[e];sI.returnCanvasAndContext(n),r.destroy(!0)}this.pages=null}};Hde.defaultOptions={textureSize:512,style:new bn,mipmap:!0};let oV=Hde;function Let(t,e,n,r){const i={width:0,height:0,offsetY:0,scale:e.fontSize/n.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};i.offsetY=n.baseLineOffset;let s=i.lines[0],a=null,o=!0;const l={width:0,start:0,index:0,positions:[],chars:[]},c=n.baseMeasurementFontSize/e.fontSize,u=e.letterSpacing*c,h=e.wordWrapWidth*c,f=e.lineHeight?e.lineHeight*c:n.lineHeight,p=e.wordWrap&&e.breakWords,m=x=>{const E=s.width;for(let w=0;w<l.index;w++){const B=x.positions[w];s.chars.push(x.chars[w]),s.charPositions.push(B+E)}s.width+=x.width,o=!1,l.width=0,l.index=0,l.chars.length=0},v=()=>{let x=s.chars.length-1;if(r){let E=s.chars[x];for(;E===" ";)s.width-=n.chars[E].xAdvance,E=s.chars[--x]}i.width=Math.max(i.width,s.width),s={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},o=!0,i.lines.push(s),i.height+=f},A=x=>x-u>h;for(let x=0;x<t.length+1;x++){let E;const w=x===t.length;w||(E=t[x]);const B=n.chars[E]||n.chars[" "];if(/(?:\s)/.test(E)||E==="\r"||E===`
`||w){if(!o&&e.wordWrap&&A(s.width+l.width)?(v(),m(l),w||s.charPositions.push(0)):(l.start=s.width,m(l),w||s.charPositions.push(0)),E==="\r"||E===`
`)v();else if(!w){const R=B.xAdvance+(B.kerning[a]||0)+u;s.width+=R,s.spaceWidth=R,s.spacesIndex.push(s.charPositions.length),s.chars.push(E)}}else{const M=B.kerning[a]||0,R=B.xAdvance+M+u;p&&A(s.width+l.width+R)&&(m(l),v()),l.positions[l.index++]=l.width+M,l.chars.push(E),l.width+=R}a=E}return v(),e.align==="center"?Fet(i):e.align==="right"?jet(i):e.align==="justify"&&Oet(i),i}function Fet(t){for(let e=0;e<t.lines.length;e++){const n=t.lines[e],r=t.width/2-n.width/2;for(let i=0;i<n.charPositions.length;i++)n.charPositions[i]+=r}}function jet(t){for(let e=0;e<t.lines.length;e++){const n=t.lines[e],r=t.width-n.width;for(let i=0;i<n.charPositions.length;i++)n.charPositions[i]+=r}}function Oet(t){const e=t.width;for(let n=0;n<t.lines.length;n++){const r=t.lines[n];let i=0,s=r.spacesIndex[i++],a=0;const o=r.spacesIndex.length,c=(e-r.width)/o;for(let u=0;u<r.charPositions.length;u++)u===s&&(s=r.spacesIndex[i++],a+=c),r.charPositions[u]+=a}}function zet(t){if(t==="")return[];typeof t=="string"&&(t=[t]);const e=[];for(let n=0,r=t.length;n<r;n++){const i=t[n];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);if(i[0].length===0||i[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const s=i[0].charCodeAt(0),a=i[1].charCodeAt(0);if(a<s)throw new Error("[BitmapFont]: Invalid character range.");for(let o=s,l=a;o<=l;o++)e.push(String.fromCharCode(o))}else e.push(...Array.from(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}let _3=0;class $et{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=wde(1e3)}getFont(e,n){let r=`${n.fontFamily}-bitmap`,i=!0;if(n._fill.fill&&!n._stroke?(r+=n._fill.fill.styleKey,i=!1):(n._stroke||n.dropShadow)&&(r=`${n.styleKey}-bitmap`,i=!1),!Fs.has(r)){const a=Object.create(n);a.lineHeight=0;const o=new oV({style:a,overrideFill:i,overrideSize:!0,...this.defaultOptions});_3++,_3>50&&Zs("BitmapText",`You have dynamically created ${_3} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),o.once("destroy",()=>{_3--,Fs.remove(r)}),Fs.set(r,o)}const s=Fs.get(r);return s.ensureCharacters?.(e),s}getLayout(e,n,r=!0){const i=this.getFont(e,n),s=`${e}-${n.styleKey}-${r}`;if(this.measureCache.has(s))return this.measureCache.get(s);const a=os.graphemeSegmenter(e),o=Let(a,n,i,r);return this.measureCache.set(s,o),o}measureText(e,n,r=!0){return this.getLayout(e,n,r)}install(...e){let n=e[0];typeof n=="string"&&(n={name:n,style:e[1],chars:e[2]?.chars,resolution:e[2]?.resolution,padding:e[2]?.padding,skipKerning:e[2]?.skipKerning},kr(Ri,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const r=n?.name;if(!r)throw new Error("[BitmapFontManager] Property `name` is required.");n={...this.defaultOptions,...n};const i=n.style,s=i instanceof bn?i:new bn(i),a=n.dynamicFill??this._canUseTintForStyle(s),o=new oV({style:s,overrideFill:a,skipKerning:n.skipKerning,padding:n.padding,resolution:n.resolution,overrideSize:!1,textureStyle:n.textureStyle}),l=zet(n.chars);return o.ensureCharacters(l.join("")),Fs.set(`${r}-bitmap`,o),o.once("destroy",()=>Fs.remove(`${r}-bitmap`)),o}uninstall(e){const n=`${e}-bitmap`,r=Fs.get(n);r&&r.destroy()}_canUseTintForStyle(e){return!e._stroke&&(!e.dropShadow||e.dropShadow.color===0)&&!e._fill.fill&&e._fill.color===16777215}}const lV=new $et;class Vde extends Sde{constructor(e,n){super();const{textures:r,data:i}=e;Object.keys(i.pages).forEach(s=>{const a=i.pages[parseInt(s,10)],o=r[a.id];this.pages.push({texture:o})}),Object.keys(i.chars).forEach(s=>{const a=i.chars[s],{frame:o,source:l,rotate:c}=r[a.page],u=vs.transformRectCoords(a,o,c,new es),h=new Gn({frame:u,orig:new es(0,0,a.width,a.height),source:l,rotate:c});this.chars[s]={id:s.codePointAt(0),xOffset:a.xOffset,yOffset:a.yOffset,xAdvance:a.xAdvance,kerning:a.kerning??{},texture:h}}),this.baseRenderedFontSize=i.fontSize,this.baseMeasurementFontSize=i.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:i.fontSize},this.baseLineOffset=i.baseLineOffset,this.lineHeight=i.lineHeight,this.fontFamily=i.fontFamily,this.distanceField=i.distanceField??{type:"none",range:0},this.url=n}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:n}=this.pages[e];n.destroy(!0)}this.pages=null}static install(e){lV.install(e)}static uninstall(e){lV.uninstall(e)}}const uN={test(t){return typeof t=="string"&&t.startsWith("info face=")},parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const h in e){const f=e[h].match(/^[a-z]+/gm)[0],p=e[h].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),m={};for(const v in p){const A=p[v].split("="),x=A[0],E=A[1].replace(/"/gm,""),w=parseFloat(E),B=isNaN(w)?E:w;m[x]=B}n[f].push(m)}const r={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[i]=n.info,[s]=n.common,[a]=n.distanceField??[];a&&(r.distanceField={range:parseInt(a.distanceRange,10),type:a.fieldType}),r.fontSize=parseInt(i.size,10),r.fontFamily=i.face,r.lineHeight=parseInt(s.lineHeight,10);const o=n.page;for(let h=0;h<o.length;h++)r.pages.push({id:parseInt(o[h].id,10)||0,file:o[h].file});const l={};r.baseLineOffset=r.lineHeight-parseInt(s.base,10);const c=n.char;for(let h=0;h<c.length;h++){const f=c[h],p=parseInt(f.id,10);let m=f.letter??f.char??String.fromCharCode(p);m==="space"&&(m=" "),l[p]=m,r.chars[m]={id:p,page:parseInt(f.page,10)||0,x:parseInt(f.x,10),y:parseInt(f.y,10),width:parseInt(f.width,10),height:parseInt(f.height,10),xOffset:parseInt(f.xoffset,10),yOffset:parseInt(f.yoffset,10),xAdvance:parseInt(f.xadvance,10),kerning:{}}}const u=n.kerning||[];for(let h=0;h<u.length;h++){const f=parseInt(u[h].first,10),p=parseInt(u[h].second,10),m=parseInt(u[h].amount,10);r.chars[l[p]].kerning[l[f]]=m}return r}},cV={test(t){const e=t;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(t){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},n=t.getElementsByTagName("info")[0],r=t.getElementsByTagName("common")[0],i=t.getElementsByTagName("distanceField")[0];i&&(e.distanceField={type:i.getAttribute("fieldType"),range:parseInt(i.getAttribute("distanceRange"),10)});const s=t.getElementsByTagName("page"),a=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning");e.fontSize=parseInt(n.getAttribute("size"),10),e.fontFamily=n.getAttribute("face"),e.lineHeight=parseInt(r.getAttribute("lineHeight"),10);for(let c=0;c<s.length;c++)e.pages.push({id:parseInt(s[c].getAttribute("id"),10)||0,file:s[c].getAttribute("file")});const l={};e.baseLineOffset=e.lineHeight-parseInt(r.getAttribute("base"),10);for(let c=0;c<a.length;c++){const u=a[c],h=parseInt(u.getAttribute("id"),10);let f=u.getAttribute("letter")??u.getAttribute("char")??String.fromCharCode(h);f==="space"&&(f=" "),l[h]=f,e.chars[f]={id:h,page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xOffset:parseInt(u.getAttribute("xoffset"),10),yOffset:parseInt(u.getAttribute("yoffset"),10),xAdvance:parseInt(u.getAttribute("xadvance"),10),kerning:{}}}for(let c=0;c<o.length;c++){const u=parseInt(o[c].getAttribute("first"),10),h=parseInt(o[c].getAttribute("second"),10),f=parseInt(o[c].getAttribute("amount"),10);e.chars[l[h]].kerning[l[u]]=f}return e}},uV={test(t){return typeof t=="string"&&t.match(/<font(\s|>)/)?cV.test(ls.get().parseXML(t)):!1},parse(t){return cV.parse(ls.get().parseXML(t))}},Qet=[".xml",".fnt"],Uet={extension:{type:Vn.CacheParser,name:"cacheBitmapFont"},test:t=>t instanceof Vde,getCacheableAssets(t,e){const n={};return t.forEach(r=>{n[r]=e,n[`${r}-bitmap`]=e}),n[`${e.fontFamily}-bitmap`]=e,n}},Het={extension:{type:Vn.LoadParser,priority:Jy.Normal},name:"loadBitmapFont",id:"bitmap-font",test(t){return Qet.includes(hd.extname(t).toLowerCase())},async testParse(t){return uN.test(t)||uV.test(t)},async parse(t,e,n){const r=uN.test(t)?uN.parse(t):uV.parse(t),{src:i}=e,{pages:s}=r,a=[],o=r.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let h=0;h<s.length;++h){const f=s[h].file;let p=hd.join(hd.dirname(i),f);p=K6(p,i),a.push({src:p,data:o})}const l=await n.load(a),c=a.map(h=>l[h.src]);return new Vde({data:r,textures:c},i)},async load(t,e){return await(await ls.get().fetch(t)).text()},async unload(t,e,n){await Promise.all(t.pages.map(r=>n.unload(r.texture.source._sourceOrigin))),t.destroy()}};class Get{constructor(e,n=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(e){e.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],n=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<n;r++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const Vet={extension:{type:Vn.CacheParser,name:"cacheTextureArray"},test:t=>Array.isArray(t)&&t.every(e=>e instanceof Gn),getCacheableAssets:(t,e)=>{const n={};return t.forEach(r=>{e.forEach((i,s)=>{n[r+(s===0?"":s+1)]=i})}),n}};async function Wde(t){if("Image"in globalThis)return new Promise(e=>{const n=new Image;n.onload=()=>{e(!0)},n.onerror=()=>{e(!1)},n.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const Wet={extension:{type:Vn.DetectionParser,priority:1},test:async()=>Wde("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")},dV=["png","jpg","jpeg"],Ket={extension:{type:Vn.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...dV],remove:async t=>t.filter(e=>!dV.includes(e))},qet="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function K4(t){return qet?!1:document.createElement("video").canPlayType(t)!==""}const Yet={extension:{type:Vn.DetectionParser,priority:0},test:async()=>K4("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")},Xet={extension:{type:Vn.DetectionParser,priority:0},test:async()=>K4("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")},Jet={extension:{type:Vn.DetectionParser,priority:0},test:async()=>K4("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")},Zet={extension:{type:Vn.DetectionParser,priority:0},test:async()=>Wde("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")},Kde=class mT{constructor(){this.loadOptions={...mT.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,n,r)=>(this._parsersValidated=!1,e[n]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,n){const r={promise:null,parser:null};return r.promise=(async()=>{let i=null,s=null;if((n.parser||n.loadParser)&&(s=this._parserHash[n.parser||n.loadParser],n.loadParser&&Zs(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),s||Zs(`[Assets] specified load parser "${n.parser||n.loadParser}" not found while loading ${e}`)),!s){for(let a=0;a<this.parsers.length;a++){const o=this.parsers[a];if(o.load&&o.test?.(e,n,this)){s=o;break}}if(!s)return Zs(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,n,this),r.parser=s;for(let a=0;a<this.parsers.length;a++){const o=this.parsers[a];o.parse&&o.parse&&await o.testParse?.(i,n,this)&&(i=await o.parse(i,n,this)||i,r.parser=o)}return i})(),r}async load(e,n){this._parsersValidated||this._validateParsers();const r=typeof n=="function"?{...mT.defaultOptions,...this.loadOptions,onProgress:n}:{...mT.defaultOptions,...this.loadOptions,...n||{}},{onProgress:i,onError:s,strategy:a,retryCount:o,retryDelay:l}=r;let c=0;const u={},h=SM(e),f=bp(e,v=>({alias:[v],src:v,data:{}})),p=f.reduce((v,A)=>v+(A.progressSize||1),0),m=f.map(async v=>{const A=hd.toAbsolute(v.src);u[v.src]||(await this._loadAssetWithRetry(A,v,{onProgress:i,onError:s,strategy:a,retryCount:o,retryDelay:l},u),c+=v.progressSize||1,i&&i(c/p))});return await Promise.all(m),h?u[f[0].src]:u}async unload(e){const r=bp(e,i=>({alias:[i],src:i})).map(async i=>{const s=hd.toAbsolute(i.src),a=this.promiseCache[s];if(a){const o=await a.promise;delete this.promiseCache[s],await a.parser?.unload?.(o,i,this)}});await Promise.all(r)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,n)=>(!n.name&&!n.id?Zs("[Assets] parser should have an id"):(e[n.name]||e[n.id])&&Zs(`[Assets] parser id conflict "${n.id}"`),e[n.name]=n,n.id&&(e[n.id]=n),e),{})}async _loadAssetWithRetry(e,n,r,i){let s=0;const{onError:a,strategy:o,retryCount:l,retryDelay:c}=r,u=h=>new Promise(f=>setTimeout(f,h));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,n)),i[n.src]=await this.promiseCache[e].promise;return}catch(h){delete this.promiseCache[e],delete i[n.src],s++;const f=o!=="retry"||s>l;if(o==="retry"&&!f){a&&a(h,n),await u(c);continue}if(o==="skip"){a&&a(h,n);return}throw a&&a(h,n),new Error(`[Loader.load] Failed to load ${e}.
${h}`)}}};Kde.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let ett=Kde;function tS(t,e){if(Array.isArray(e)){for(const n of e)if(t.startsWith(`data:${n}`))return!0;return!1}return t.startsWith(`data:${e}`)}function nS(t,e){const n=t.split("?")[0],r=hd.extname(n).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}const ttt=".json",ntt="application/json",rtt={extension:{type:Vn.LoadParser,priority:Jy.Low},name:"loadJson",id:"json",test(t){return tS(t,ntt)||nS(t,ttt)},async load(t){return await(await ls.get().fetch(t)).json()}},itt=".txt",stt="text/plain",att={name:"loadTxt",id:"text",extension:{type:Vn.LoadParser,priority:Jy.Low,name:"loadTxt"},test(t){return tS(t,stt)||nS(t,itt)},async load(t){return await(await ls.get().fetch(t)).text()}},ott=["normal","bold","100","200","300","400","500","600","700","800","900"],ltt=[".ttf",".otf",".woff",".woff2"],ctt=["font/ttf","font/otf","font/woff","font/woff2"],utt=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function dtt(t){const e=hd.extname(t),i=hd.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1));let s=i.length>0;for(const o of i)if(!o.match(utt)){s=!1;break}let a=i.join(" ");return s||(a=`"${a.replace(/[\\"]/g,"\\$&")}"`),a}const htt=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function ftt(t){return htt.test(t)?t:encodeURI(t)}const ptt={extension:{type:Vn.LoadParser,priority:Jy.Low},name:"loadWebFont",id:"web-font",test(t){return tS(t,ctt)||nS(t,ltt)},async load(t,e){const n=ls.get().getFontFaceSet();if(n){const r=[],i=e.data?.family??dtt(t),s=e.data?.weights?.filter(o=>ott.includes(o))??["normal"],a=e.data??{};for(let o=0;o<s.length;o++){const l=s[o],c=new FontFace(i,`url(${ftt(t)})`,{...a,weight:l});await c.load(),n.add(c),r.push(c)}return Fs.has(`${i}-and-url`)?Fs.get(`${i}-and-url`).entries.push({url:t,faces:r}):Fs.set(`${i}-and-url`,{entries:[{url:t,faces:r}]}),r.length===1?r[0]:r}return Zs("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){const e=Array.isArray(t)?t:[t],n=e[0].family,r=Fs.get(`${n}-and-url`),i=r.entries.find(s=>s.faces.some(a=>e.indexOf(a)!==-1));i.faces=i.faces.filter(s=>e.indexOf(s)===-1),i.faces.length===0&&(r.entries=r.entries.filter(s=>s!==i)),e.forEach(s=>{ls.get().getFontFaceSet().delete(s)}),r.entries.length===0&&Fs.remove(`${n}-and-url`)}};function iO(t,e=1){const n=eS.RETINA_PREFIX?.exec(t);return n?parseFloat(n[1]):e}function sO(t,e,n){t.label=n,t._sourceOrigin=n;const r=new Gn({source:t,label:n}),i=()=>{delete e.promiseCache[n],Fs.has(n)&&Fs.remove(n)};return r.source.once("destroy",()=>{e.promiseCache[n]&&(Zs("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),i())}),r.once("destroy",()=>{t.destroyed||(Zs("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),r}const gtt=".svg",mtt="image/svg+xml",Att={extension:{type:Vn.LoadParser,priority:Jy.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(t){return tS(t,mtt)||nS(t,gtt)},async load(t,e,n){return e.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?vtt(t):ytt(t,e,n,this.config.crossOrigin)},unload(t){t.destroy(!0)}};async function ytt(t,e,n,r){const i=await ls.get().fetch(t),s=ls.get().createImage();s.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await i.text())}`,s.crossOrigin=r,await s.decode();const a=e.data?.width??s.width,o=e.data?.height??s.height,l=e.data?.resolution||iO(t),c=Math.ceil(a*l),u=Math.ceil(o*l),h=ls.get().createCanvas(c,u),f=h.getContext("2d");f.imageSmoothingEnabled=!0,f.imageSmoothingQuality="high",f.drawImage(s,0,0,a*l,o*l);const{parseAsGraphicsContext:p,...m}=e.data??{},v=new Pb({resource:h,alphaMode:"premultiply-alpha-on-upload",resolution:l,...m});return sO(v,n,t)}async function vtt(t){const n=await(await ls.get().fetch(t)).text(),r=new ef;return r.svg(n),r}const xtt=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let X1=null,o8=class{constructor(){X1||(X1=URL.createObjectURL(new Blob([xtt],{type:"application/javascript"}))),this.worker=new Worker(X1)}};o8.revokeObjectURL=function(){X1&&(URL.revokeObjectURL(X1),X1=null)};const btt=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let J1=null;class qde{constructor(){J1||(J1=URL.createObjectURL(new Blob([btt],{type:"application/javascript"}))),this.worker=new Worker(J1)}}qde.revokeObjectURL=function(){J1&&(URL.revokeObjectURL(J1),J1=null)};let hV=0,dN;class Ctt{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:n}=new o8;n.addEventListener("message",r=>{n.terminate(),o8.revokeObjectURL(),e(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,n){return this._run("loadImageBitmap",[e,n?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){dN===void 0&&(dN=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<dN&&(this._createdWorkers++,e=new qde().worker,e.addEventListener("message",n=>{this._complete(n.data),this._returnWorker(n.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){this._resolveHash[e.uuid]&&(e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),delete this._resolveHash[e.uuid])}async _run(e,n){await this._initWorkers();const r=new Promise((i,s)=>{this._queue.push({id:e,arguments:n,resolve:i,reject:s})});return this._next(),r}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const n=this._queue.pop(),r=n.id;this._resolveHash[hV]={resolve:n.resolve,reject:n.reject},e.postMessage({data:n.arguments,uuid:hV++,id:r})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e?.(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const fV=new Ctt,Ett=[".jpeg",".jpg",".png",".webp",".avif"],Stt=["image/jpeg","image/png","image/webp","image/avif"];async function wtt(t,e){const n=await ls.get().fetch(t);if(!n.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${n.status} ${n.statusText}`);const r=await n.blob();return e?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(r,{premultiplyAlpha:"none"}):createImageBitmap(r)}const Yde={name:"loadTextures",id:"texture",extension:{type:Vn.LoadParser,priority:Jy.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return tS(t,Stt)||nS(t,Ett)},async load(t,e,n){let r=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await fV.isImageBitmapSupported()?r=await fV.loadImageBitmap(t,e):r=await wtt(t,e):r=await new Promise((s,a)=>{r=ls.get().createImage(),r.crossOrigin=this.config.crossOrigin,r.src=t,r.complete?s(r):(r.onload=()=>{s(r)},r.onerror=a)});const i=new Pb({resource:r,alphaMode:"premultiply-alpha-on-upload",resolution:e.data?.resolution||iO(t),...e.data});return sO(i,n,t)},unload(t){t.destroy(!0)}},_tt=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let hN,fN;function Itt(t,e,n){n===void 0&&!e.startsWith("data:")?t.crossOrigin=Ttt(e):n!==!1&&(t.crossOrigin=typeof n=="string"?n:"anonymous")}function Btt(t){return new Promise((e,n)=>{t.addEventListener("canplaythrough",r),t.addEventListener("error",i),t.load();function r(){s(),e()}function i(a){s(),n(a)}function s(){t.removeEventListener("canplaythrough",r),t.removeEventListener("error",i)}})}function Ttt(t,e=globalThis.location){if(t.startsWith("data:"))return"";e||(e=globalThis.location);const n=new URL(t,document.baseURI);return n.hostname!==e.hostname||n.port!==e.port||n.protocol!==e.protocol?"anonymous":""}function Mtt(){const t=[],e=[];for(const n of _tt){const r=u_.MIME_TYPES[n.substring(1)]||`video/${n.substring(1)}`;K4(r)&&(t.push(n),e.includes(r)||e.push(r))}return{validVideoExtensions:t,validVideoMime:e}}const Dtt={name:"loadVideo",id:"video",extension:{type:Vn.LoadParser,name:"loadVideo"},test(t){if(!hN||!fN){const{validVideoExtensions:r,validVideoMime:i}=Mtt();hN=r,fN=i}const e=tS(t,fN),n=nS(t,hN);return e||n},async load(t,e,n){const r={...u_.defaultOptions,resolution:e.data?.resolution||iO(t),alphaMode:e.data?.alphaMode||await Zue(),...e.data},i=document.createElement("video"),s={preload:r.autoLoad!==!1?"auto":void 0,"webkit-playsinline":r.playsinline!==!1?"":void 0,playsinline:r.playsinline!==!1?"":void 0,muted:r.muted===!0?"":void 0,loop:r.loop===!0?"":void 0,autoplay:r.autoPlay!==!1?"":void 0};Object.keys(s).forEach(l=>{const c=s[l];c!==void 0&&i.setAttribute(l,c)}),r.muted===!0&&(i.muted=!0),Itt(i,t,r.crossorigin);const a=document.createElement("source");let o;if(r.mime)o=r.mime;else if(t.startsWith("data:"))o=t.slice(5,t.indexOf(";"));else if(!t.startsWith("blob:")){const l=t.split("?")[0].slice(t.lastIndexOf(".")+1).toLowerCase();o=u_.MIME_TYPES[l]||`video/${l}`}return a.src=t,o&&(a.type=o),new Promise(l=>{const c=async()=>{const u=new u_({...r,resource:i});i.removeEventListener("canplay",c),e.data.preload&&await Btt(i),l(sO(u,n,t))};r.preload&&!r.autoPlay&&i.load(),i.addEventListener("canplay",c),i.appendChild(a)})},unload(t){t.destroy(!0)}},Xde={extension:{type:Vn.ResolveParser,name:"resolveTexture"},test:Yde.test,parse:t=>({resolution:parseFloat(eS.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t})},Rtt={extension:{type:Vn.ResolveParser,priority:-2,name:"resolveJson"},test:t=>eS.RETINA_PREFIX.test(t)&&t.endsWith(".json"),parse:Xde.parse};class Ptt{constructor(){this._detections=[],this._initialized=!1,this.resolver=new eS,this.loader=new ett,this.cache=Fs,this._backgroundLoader=new Get(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized){Zs("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let s=e.manifest;typeof s=="string"&&(s=await this.load(s)),this.resolver.addManifest(s)}const n=e.texturePreference?.resolution??1,r=typeof n=="number"?[n]:n,i=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:r}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,n){this._initialized||await this.init();const r=SM(e),i=bp(e).map(o=>{if(typeof o!="string"){const l=this.resolver.getAlias(o);return l.some(c=>!this.resolver.hasKey(c))&&this.add(o),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(o)||this.add({alias:o,src:o}),o}),s=this.resolver.resolve(i),a=await this._mapLoadToResolve(s,n);return r?a[i[0]]:a}addBundle(e,n){this.resolver.addBundle(e,n)}async loadBundle(e,n){this._initialized||await this.init();let r=!1;typeof e=="string"&&(r=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},a=Object.keys(i);let o=0;const l=[],c=()=>{n?.(l.reduce((h,f)=>h+f,0)/o)},u=a.map((h,f)=>{const p=i[h],m=Object.values(p),A=[...new Set(m.flat())].reduce((x,E)=>x+(E.progressSize||1),0);return l.push(0),o+=A,this._mapLoadToResolve(p,x=>{l[f]=x*A,c()}).then(x=>{s[h]=x})});return await Promise.all(u),r?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(n))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolveBundle(e);Object.values(n).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Fs.get(e);const n={};for(let r=0;r<e.length;r++)n[r]=Fs.get(e[r]);return n}async _mapLoadToResolve(e,n){const r=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const i=await this.loader.load(r,n);this._backgroundLoader.active=!0;const s={};return r.forEach(a=>{const o=i[a.src],l=[a.src];a.alias&&l.push(...a.alias),l.forEach(c=>{s[c]=o}),Fs.set(l,o)}),s}async unload(e){this._initialized||await this.init();const n=bp(e).map(i=>typeof i!="string"?i.src:i),r=this.resolver.resolve(n);await this._unloadFromResolved(r)}async unloadBundle(e){this._initialized||await this.init(),e=bp(e);const n=this.resolver.resolveBundle(e),r=Object.keys(n).map(i=>this._unloadFromResolved(n[i]));await Promise.all(r)}async _unloadFromResolved(e){const n=Object.values(e);n.forEach(r=>{Fs.remove(r.src)}),await this.loader.unload(n)}async _detectFormats(e){let n=[];e.preferredFormats&&(n=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const r of e.detections)e.skipDetections||await r.test()?n=await r.add(n):e.skipDetections||(n=await r.remove(n));return n=n.filter((r,i)=>n.indexOf(r)===i),n}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(n=>{n.config&&Object.keys(n.config).filter(r=>r in e).forEach(r=>{n.config[r]=e[r]})})}}const Hw=new Ptt;ha.handleByList(Vn.LoadParser,Hw.loader.parsers).handleByList(Vn.ResolveParser,Hw.resolver.parsers).handleByList(Vn.CacheParser,Hw.cache.parsers).handleByList(Vn.DetectionParser,Hw.detections);ha.add(Vet,Ket,Wet,Zet,Yet,Xet,Jet,rtt,att,ptt,Att,Yde,Dtt,Het,Uet,Xde,Rtt);const pV={loader:Vn.LoadParser,resolver:Vn.ResolveParser,cache:Vn.CacheParser,detection:Vn.DetectionParser};ha.handle(Vn.Asset,t=>{const e=t.ref;Object.entries(pV).filter(([n])=>!!e[n]).forEach(([n,r])=>ha.add(Object.assign(e[n],{extension:e[n].extension??r})))},t=>{const e=t.ref;Object.keys(pV).filter(n=>!!e[n]).forEach(n=>ha.remove(e[n]))});let _i=class l8 extends qb{constructor(e){e instanceof ef&&(e={context:e});const{context:n,roundPixels:r,...i}=e||{};super({label:"Graphics",...i}),this.renderPipeId="graphics",n?this._context=n:this._context=this._ownedContext=new ef,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=r??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||e?.context===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,n){return this.context[e](...n),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new l8(this._context.clone()):(this._ownedContext=null,new l8(this._context))}lineStyle(e,n,r){kr(Ri,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const i={};return e&&(i.width=e),n&&(i.color=n),r&&(i.alpha=r),this.context.strokeStyle=i,this}beginFill(e,n){kr(Ri,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const r={};return e!==void 0&&(r.color=e),n!==void 0&&(r.alpha=n),this.context.fillStyle=r,this}endFill(){kr(Ri,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==ef.defaultStrokeStyle.width||e.color!==ef.defaultStrokeStyle.color||e.alpha!==ef.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return kr(Ri,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return kr(Ri,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return kr(Ri,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return kr(Ri,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return kr(Ri,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return kr(Ri,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}};const Jde=class Zde extends Mde{constructor(...e){let n=e[0]??{};n instanceof Float32Array&&(kr(Ri,"use new MeshGeometry({ positions, uvs, indices }) instead"),n={positions:n,uvs:e[1],indices:e[2]}),n={...Zde.defaultOptions,...n};const r=n.positions||new Float32Array([0,0,1,0,1,1,0,1]);let i=n.uvs;i||(n.positions?i=new Float32Array(r.length):i=new Float32Array([0,0,1,0,1,1,0,1]));const s=n.indices||new Uint32Array([0,1,2,0,2,3]),a=n.shrinkBuffersToFit,o=new Py({data:r,label:"attribute-mesh-positions",shrinkToFit:a,usage:ko.VERTEX|ko.COPY_DST}),l=new Py({data:i,label:"attribute-mesh-uvs",shrinkToFit:a,usage:ko.VERTEX|ko.COPY_DST}),c=new Py({data:s,label:"index-mesh-buffer",shrinkToFit:a,usage:ko.INDEX|ko.COPY_DST});super({attributes:{aPosition:{buffer:o,format:"float32x2",stride:8,offset:0},aUV:{buffer:l,format:"float32x2",stride:8,offset:0}},indexBuffer:c,topology:n.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(e){this.attributes.aPosition.buffer.data=e}get uvs(){return this.attributes.aUV.buffer.data}set uvs(e){this.attributes.aUV.buffer.data=e}get indices(){return this.indexBuffer.data}set indices(e){this.indexBuffer.data=e}};Jde.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};let ktt=Jde;class Ntt{constructor({matrix:e,observer:n}={}){this.dirty=!0,this._matrix=e??new fi,this.observer=n,this.position=new la(this,0,0),this.scale=new la(this,1,1),this.pivot=new la(this,0,0),this.skew=new la(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){const e=this._matrix;return this.dirty&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this.dirty=!1),e}_onUpdate(e){this.dirty=!0,e===this.skew&&this.updateSkew(),this.observer?._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}toString(){return`[pixi.js/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}setFromMatrix(e){e.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this.skew))}}const ehe=class AT extends qb{constructor(...e){let n=e[0]||{};n instanceof Gn&&(n={texture:n}),e.length>1&&(kr(Ri,"use new TilingSprite({ texture, width:100, height:100 }) instead"),n.width=e[1],n.height=e[2]),n={...AT.defaultOptions,...n};const{texture:r,anchor:i,tilePosition:s,tileScale:a,tileRotation:o,width:l,height:c,applyAnchorToTexture:u,roundPixels:h,...f}=n??{};super({label:"TilingSprite",...f}),this.renderPipeId="tilingSprite",this.batched=!0,this.allowChildren=!1,this._anchor=new la({_onUpdate:()=>{this.onViewUpdate()}}),this.applyAnchorToTexture=u,this.texture=r,this._width=l??r.width,this._height=c??r.height,this._tileTransform=new Ntt({observer:{_onUpdate:()=>this.onViewUpdate()}}),i&&(this.anchor=i),this.tilePosition=s,this.tileScale=a,this.tileRotation=o,this.roundPixels=h??!1}static from(e,n={}){return typeof e=="string"?new AT({texture:Fs.get(e),...n}):new AT({texture:e,...n})}get uvRespectAnchor(){return kr(Ri,"uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture}set uvRespectAnchor(e){kr(Ri,"uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture=e}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(e){this._texture.textureMatrix.clampMargin=e}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get tilePosition(){return this._tileTransform.position}set tilePosition(e){this._tileTransform.position.copyFrom(e)}get tileScale(){return this._tileTransform.scale}set tileScale(e){typeof e=="number"?this._tileTransform.scale.set(e):this._tileTransform.scale.copyFrom(e)}set tileRotation(e){this._tileTransform.rotation=e}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}set texture(e){e||(e=Gn.EMPTY);const n=this._texture;n!==e&&(n&&n.dynamic&&n.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}set width(e){this._width=e,this.onViewUpdate()}get width(){return this._width}set height(e){this._height=e,this.onViewUpdate()}get height(){return this._height}setSize(e,n){typeof e=="object"&&(n=e.height??e.width,e=e.width),this._width=e,this._height=n??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}updateBounds(){const e=this._bounds,n=this._anchor,r=this._width,i=this._height;e.minX=-n._x*r,e.maxX=e.minX+r,e.minY=-n._y*i,e.maxY=e.minY+i}containsPoint(e){const n=this._width,r=this._height,i=-n*this._anchor._x;let s=0;return e.x>=i&&e.x<=i+n&&(s=-r*this._anchor._y,e.y>=s&&e.y<=s+r)}destroy(e=!1){if(super.destroy(e),this._anchor=null,this._tileTransform=null,this._bounds=null,typeof e=="boolean"?e:e?.texture){const r=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(r)}this._texture=null}};ehe.defaultOptions={texture:Gn.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};let Ltt=ehe;class q4 extends qb{constructor(e,n){const{text:r,resolution:i,style:s,anchor:a,width:o,height:l,roundPixels:c,...u}=e;super({...u}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=n,this.text=r??"",this.style=s,this.resolution=i??null,this.allowChildren=!1,this._anchor=new la({_onUpdate:()=>{this.onViewUpdate()}}),a&&(this.anchor=a),this.roundPixels=c??!1,o!==void 0&&(this.width=o),l!==void 0&&(this.height=l)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){e||(e={}),this._style?.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,n){typeof e=="object"?(n=e.height??e.width,e=e.width):n??(n=e),e!==void 0&&this._setWidth(e,this.bounds.width),n!==void 0&&this._setHeight(n,this.bounds.height)}containsPoint(e){const n=this.bounds.width,r=this.bounds.height,i=-n*this.anchor.x;let s=0;return e.x>=i&&e.x<=i+n&&(s=-r*this.anchor.y,e.y>=s&&e.y<=s+r)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e?.style)&&this._style.destroy(e),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function Ftt(t,e){let n=t[0]??{};return(typeof n=="string"||t[1])&&(kr(Ri,`use new ${e}({ text: "hi!", style }) instead`),n={text:n,style:t[1]}),n}let Cx=null,c0=null;function jtt(t,e){Cx||(Cx=ls.get().createCanvas(256,128),c0=Cx.getContext("2d",{willReadFrequently:!0}),c0.globalCompositeOperation="copy",c0.globalAlpha=1),(Cx.width<t||Cx.height<e)&&(Cx.width=_E(t),Cx.height=_E(e))}function gV(t,e,n){for(let r=0,i=4*n*e;r<e;++r,i+=4)if(t[i+3]!==0)return!1;return!0}function mV(t,e,n,r,i){const s=4*e;for(let a=r,o=r*s+4*n;a<=i;++a,o+=s)if(t[o+3]!==0)return!1;return!0}function Ott(...t){let e=t[0];e.canvas||(e={canvas:t[0],resolution:t[1]});const{canvas:n}=e,r=Math.min(e.resolution??1,1),i=e.width??n.width,s=e.height??n.height;let a=e.output;if(jtt(i,s),!c0)throw new TypeError("Failed to get canvas 2D context");c0.drawImage(n,0,0,i,s,0,0,i*r,s*r);const l=c0.getImageData(0,0,i,s).data;let c=0,u=0,h=i-1,f=s-1;for(;u<s&&gV(l,i,u);)++u;if(u===s)return es.EMPTY;for(;gV(l,i,f);)--f;for(;mV(l,i,c,u,f);)++c;for(;mV(l,i,h,u,f);)--h;return++h,++f,c0.globalCompositeOperation="source-over",c0.strokeRect(c,u,h-c,f-u),c0.globalCompositeOperation="copy",a??(a=new es),a.set(c/r,u/r,(h-c)/r,(f-u)/r),a}const AV=new es;class ztt{getCanvasAndContext(e){const{text:n,style:r,resolution:i=1}=e,s=r._getFinalPadding(),a=os.measureText(n||" ",r),o=Math.ceil(Math.ceil(Math.max(1,a.width)+s*2)*i),l=Math.ceil(Math.ceil(Math.max(1,a.height)+s*2)*i),c=sI.getOptimalCanvasAndContext(o,l);this._renderTextToCanvas(n,r,s,i,c);const u=r.trim?Ott({canvas:c.canvas,width:o,height:l,resolution:1,output:AV}):AV.set(0,0,o,l);return{canvasAndContext:c,frame:u}}returnCanvasAndContext(e){sI.returnCanvasAndContext(e)}_renderTextToCanvas(e,n,r,i,s){const{canvas:a,context:o}=s,l=wM(n),c=os.measureText(e||" ",n),u=c.lines,h=c.lineHeight,f=c.lineWidths,p=c.maxLineWidth,m=c.fontProperties,v=a.height;if(o.resetTransform(),o.scale(i,i),o.textBaseline=n.textBaseline,n._stroke?.width){const w=n._stroke;o.lineWidth=w.width,o.miterLimit=w.miterLimit,o.lineJoin=w.join,o.lineCap=w.cap}o.font=l;let A,x;const E=n.dropShadow?2:1;for(let w=0;w<E;++w){const B=n.dropShadow&&w===0,D=B?Math.ceil(Math.max(1,v)+r*2):0,T=D*i;if(B){o.fillStyle="black",o.strokeStyle="black";const k=n.dropShadow,L=k.color,F=k.alpha;o.shadowColor=io.shared.setValue(L).setAlpha(F).toRgbaString();const z=k.blur*i,G=k.distance*i;o.shadowBlur=z,o.shadowOffsetX=Math.cos(k.angle)*G,o.shadowOffsetY=Math.sin(k.angle)*G+T}else{if(o.fillStyle=n._fill?BM(n._fill,o,c,r*2):null,n._stroke?.width){const k=n._stroke.width*.5+r*2;o.strokeStyle=BM(n._stroke,o,c,k)}o.shadowColor="black"}let M=(h-m.fontSize)/2;h-m.fontSize<0&&(M=0);const R=n._stroke?.width??0;for(let k=0;k<u.length;k++)A=R/2,x=R/2+k*h+m.ascent+M,n.align==="right"?A+=p-f[k]:n.align==="center"&&(A+=(p-f[k])/2),n._stroke?.width&&this._drawLetterSpacing(u[k],n,s,A+r,x+r-D,!0),n._fill!==void 0&&this._drawLetterSpacing(u[k],n,s,A+r,x+r-D)}}_drawLetterSpacing(e,n,r,i,s,a=!1){const{context:o}=r,l=n.letterSpacing;let c=!1;if(os.experimentalLetterSpacingSupported&&(os.experimentalLetterSpacing?(o.letterSpacing=`${l}px`,o.textLetterSpacing=`${l}px`,c=!0):(o.letterSpacing="0px",o.textLetterSpacing="0px")),l===0||c){a?o.strokeText(e,i,s):o.fillText(e,i,s);return}let u=i;const h=os.graphemeSegmenter(e);let f=o.measureText(e).width,p=0;for(let m=0;m<h.length;++m){const v=h[m];a?o.strokeText(v,u,s):o.fillText(v,u,s);let A="";for(let x=m+1;x<h.length;++x)A+=h[x];p=o.measureText(A).width,u+=f-p+l,f=p}}}const yV=new ztt;let kc=class extends q4{constructor(...e){const n=Ftt(e,"Text");super(n,bn),this.renderPipeId="text",n.textureStyle&&(this.textureStyle=n.textureStyle instanceof IE?n.textureStyle:new IE(n.textureStyle))}updateBounds(){const e=this._bounds,n=this._anchor;let r=0,i=0;if(this._style.trim){const{frame:s,canvasAndContext:a}=yV.getCanvasAndContext({text:this.text,style:this._style,resolution:1});yV.returnCanvasAndContext(a),r=s.width,i=s.height}else{const s=os.measureText(this._text,this._style);r=s.width,i=s.height}e.minX=-n._x*r,e.maxX=e.minX+r,e.minY=-n._y*i,e.maxY=e.minY+i}};const the=class nhe extends ktt{constructor(...e){super({});let n=e[0]??{};typeof n=="number"&&(kr(Ri,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),n={width:n,height:e[1],verticesX:e[2],verticesY:e[3]}),this.build(n)}build(e){e={...nhe.defaultOptions,...e},this.verticesX=this.verticesX??e.verticesX,this.verticesY=this.verticesY??e.verticesY,this.width=this.width??e.width,this.height=this.height??e.height;const n=this.verticesX*this.verticesY,r=[],i=[],s=[],a=this.verticesX-1,o=this.verticesY-1,l=this.width/a,c=this.height/o;for(let h=0;h<n;h++){const f=h%this.verticesX,p=h/this.verticesX|0;r.push(f*l,p*c),i.push(f/a,p/o)}const u=a*o;for(let h=0;h<u;h++){const f=h%a,p=h/a|0,m=p*this.verticesX+f,v=p*this.verticesX+f+1,A=(p+1)*this.verticesX+f,x=(p+1)*this.verticesX+f+1;s.push(m,v,A,v,x,A)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint32Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};the.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};let $tt=the;const rhe=class ihe extends $tt{constructor(e={}){e={...ihe.defaultOptions,...e},super({width:e.width,height:e.height,verticesX:4,verticesY:4}),this.update(e)}update(e){this.width=e.width??this.width,this.height=e.height??this.height,this._originalWidth=e.originalWidth??this._originalWidth,this._originalHeight=e.originalHeight??this._originalHeight,this._leftWidth=e.leftWidth??this._leftWidth,this._rightWidth=e.rightWidth??this._rightWidth,this._topHeight=e.topHeight??this._topHeight,this._bottomHeight=e.bottomHeight??this._bottomHeight,this._anchorX=e.anchor?.x,this._anchorY=e.anchor?.y,this.updateUvs(),this.updatePositions()}updatePositions(){const e=this.positions,{width:n,height:r,_leftWidth:i,_rightWidth:s,_topHeight:a,_bottomHeight:o,_anchorX:l,_anchorY:c}=this,u=i+s,h=n>u?1:n/u,f=a+o,p=r>f?1:r/f,m=Math.min(h,p),v=l*n,A=c*r;e[0]=e[8]=e[16]=e[24]=-v,e[2]=e[10]=e[18]=e[26]=i*m-v,e[4]=e[12]=e[20]=e[28]=n-s*m-v,e[6]=e[14]=e[22]=e[30]=n-v,e[1]=e[3]=e[5]=e[7]=-A,e[9]=e[11]=e[13]=e[15]=a*m-A,e[17]=e[19]=e[21]=e[23]=r-o*m-A,e[25]=e[27]=e[29]=e[31]=r-A,this.getBuffer("aPosition").update()}updateUvs(){const e=this.uvs;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1;const n=1/this._originalWidth,r=1/this._originalHeight;e[2]=e[10]=e[18]=e[26]=n*this._leftWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[4]=e[12]=e[20]=e[28]=1-n*this._rightWidth,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.getBuffer("aUV").update()}};rhe.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};let u1=rhe;const she=class ahe extends qb{constructor(e){e instanceof Gn&&(e={texture:e});const{width:n,height:r,anchor:i,leftWidth:s,rightWidth:a,topHeight:o,bottomHeight:l,texture:c,roundPixels:u,...h}=e;super({label:"NineSliceSprite",...h}),this.renderPipeId="nineSliceSprite",this.batched=!0,this._leftWidth=s??c?.defaultBorders?.left??u1.defaultOptions.leftWidth,this._topHeight=o??c?.defaultBorders?.top??u1.defaultOptions.topHeight,this._rightWidth=a??c?.defaultBorders?.right??u1.defaultOptions.rightWidth,this._bottomHeight=l??c?.defaultBorders?.bottom??u1.defaultOptions.bottomHeight,this._width=n??c.width??u1.defaultOptions.width,this._height=r??c.height??u1.defaultOptions.height,this.allowChildren=!1,this.texture=c??ahe.defaultOptions.texture,this.roundPixels=u??!1,this._anchor=new la({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:this.texture.defaultAnchor&&(this.anchor=this.texture.defaultAnchor)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return this._width}set width(e){this._width=e,this.onViewUpdate()}get height(){return this._height}set height(e){this._height=e,this.onViewUpdate()}setSize(e,n){typeof e=="object"&&(n=e.height??e.width,e=e.width),this._width=e,this._height=n??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this.onViewUpdate()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this.onViewUpdate()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this.onViewUpdate()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this.onViewUpdate()}get texture(){return this._texture}set texture(e){e||(e=Gn.EMPTY);const n=this._texture;n!==e&&(n&&n.dynamic&&n.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get originalWidth(){return this._texture.width}get originalHeight(){return this._texture.height}destroy(e){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){const r=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(r)}this._texture=null}updateBounds(){const e=this._bounds,n=this._anchor,r=this._width,i=this._height;e.minX=-n._x*r,e.maxX=e.minX+r,e.minY=-n._y*i,e.maxY=e.minY+i}};she.defaultOptions={texture:Gn.EMPTY};let Ug=she;ha.add(zYe,$Ye);var pN={exports:{}},Xm={};var vV;function Qtt(){return vV||(vV=1,Xm.ConcurrentRoot=1,Xm.ContinuousEventPriority=8,Xm.DefaultEventPriority=32,Xm.DiscreteEventPriority=2,Xm.IdleEventPriority=268435456,Xm.LegacyRoot=0,Xm.NoEventPriority=0),Xm}var xV;function Utt(){return xV||(xV=1,pN.exports=Qtt()),pN.exports}var N1=Utt();const aO=C.createContext({}),Htt=aO.Provider;aO.Consumer;function ohe(t,e){const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyDescriptor(n,e);return!(typeof r>"u"||r.writable||r.set)}const Uy={currentUpdatePriority:N1.DefaultEventPriority,unmountQueue:new Set};function bV(t,...e){}function lhe(t,e={}){const n=t;return n.__pixireact=Object.assign({filters:[],parent:null,root:null,type:""},e),n}var Gtt="0.0.0-development",Vtt={version:Gtt};function Wtt(){}function che(t,e,n){e instanceof Yb&&(e.__pixireact.parent=t,typeof n=="number"?t.__pixireact.filters.splice(n,0,e):t.__pixireact.filters.push(e),t.filters=t.__pixireact.filters)}function gN(t,e){e&&(e instanceof hr?t.addChild(e):e instanceof Yb&&che(t,e))}function Ktt(){}function qtt(){return!1}const c8=Object.freeze({onclick:"onClick",onglobalmousemove:"onGlobalMouseMove",onglobalpointermove:"onGlobalPointerMove",onglobaltouchmove:"onGlobalTouchMove",onmousedown:"onMouseDown",onmouseenter:"onMouseEnter",onmouseleave:"onMouseLeave",onmousemove:"onMouseMove",onmouseout:"onMouseOut",onmouseover:"onMouseOver",onmouseup:"onMouseUp",onmouseupoutside:"onMouseUpOutside",onpointercancel:"onPointerCancel",onpointerdown:"onPointerDown",onpointerenter:"onPointerEnter",onpointerleave:"onPointerLeave",onpointermove:"onPointerMove",onpointerout:"onPointerOut",onpointerover:"onPointerOver",onpointertap:"onPointerTap",onpointerup:"onPointerUp",onpointerupoutside:"onPointerUpOutside",onrightclick:"onRightClick",onrightdown:"onRightDown",onrightup:"onRightUp",onrightupoutside:"onRightUpOutside",ontap:"onTap",ontouchcancel:"onTouchCancel",ontouchend:"onTouchEnd",ontouchendoutside:"onTouchEndOutside",ontouchmove:"onTouchMove",ontouchstart:"onTouchStart",onwheel:"onWheel"}),TM=Object.freeze({onClick:"onclick",onGlobalMouseMove:"onglobalmousemove",onGlobalPointerMove:"onglobalpointermove",onGlobalTouchMove:"onglobaltouchmove",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseUpOutside:"onmouseupoutside",onPointerCancel:"onpointercancel",onPointerDown:"onpointerdown",onPointerEnter:"onpointerenter",onPointerLeave:"onpointerleave",onPointerMove:"onpointermove",onPointerOut:"onpointerout",onPointerOver:"onpointerover",onPointerTap:"onpointertap",onPointerUp:"onpointerup",onPointerUpOutside:"onpointerupoutside",onRightClick:"onrightclick",onRightDown:"onrightdown",onRightUp:"onrightup",onRightUpOutside:"onrightupoutside",onTap:"ontap",onTouchCancel:"ontouchcancel",onTouchEnd:"ontouchend",onTouchEndOutside:"ontouchendoutside",onTouchMove:"ontouchmove",onTouchStart:"ontouchstart",onWheel:"onwheel"});function uhe(t){return Array.isArray(t)}function dhe(t,e,n={arrays:"reference",objects:"reference",strict:!0}){const{arrays:r,objects:i,strict:s}=n;if(typeof t!=typeof e||!!t!=!!e)return!1;if(Ztt(t)||Xtt(t))return t===e;const a=Jtt(t);if(a&&i==="reference")return t===e;const o=uhe(t);if(o&&r==="reference")return t===e;if((o||a)&&t===e)return!0;let l;for(l in t)if(!(l in e))return!1;let c=t;if(s&&(c=e),a&&r==="shallow"&&i==="shallow"){for(l in c)if(!dhe(t[l],e[l],{strict:s,objects:"reference"}))return!1}else for(l in c)if(t[l]!==e[l])return!1;if(hhe(l)){if(o&&t.length===0&&e.length===0||a&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}function Ytt(t){return t===null}function Xtt(t){return typeof t=="number"}function Jtt(t){return!(t!==Object(t)||uhe(t)||typeof t=="function")}function Ztt(t){return typeof t=="string"}function hhe(t){return t===void 0}const ent=Object.freeze(["children","key","ref"]);function tnt(t,e=[]){const n={};return Object.entries(t).reduce((r,[i,s])=>(e.includes(i)||(r[i]=s),r),n)}function u8(t,e=[]){return tnt(t,ent.concat(e))}const nnt="__default";function fhe(t,e={},n=!1){const r=u8(t),i=u8(e),s=Object.entries(r),a=[];if(n){const o=Object.keys(i);let l=0;for(;l<o.length;){const c=o[l];!(c in r)&&s.unshift([c,`${nnt}remove`]),l+=1}}return s.forEach(([o,l])=>{if(dhe(l,i[o]))return;if(o in TM){a.push([o,l,!0,[]]);return}let c=[];o.includes("-")&&(c=o.split("-")),a.push([o,l,!1,c]);for(const u in r){const h=r[u];u.startsWith(`${o}-`)&&a.push([u,h,!1,u.split("-")])}}),{changes:a}}function rnt(t){const e=t;return!(!e||!e.changes)}const int="__default",CV=new Map,EV={};function SV(t,e){if(t){const n=t[e];if(!hhe(n)&&!Ytt(n))return n}return t}function phe(t,e){const{__pixireact:n={},...r}=t;let i;rnt(e)?i=e:i=fhe(e,r);const{changes:s}=i;let a=0;for(;a<s.length;){const o=s[a];let l=!1,c=o[0],u=o[1];const h=o[2],f=o[3];let p=t,m=p[c];if(c==="draw"&&typeof u=="function"&&(t instanceof _i?u(t):(l=!0,bV("warn",`The \`draw\` prop was used on a \`${n.type}\` component, but it's only valid on \`graphics\` components.`))),c in c8){const v=c;l=!0,EV[c]||(EV[c]=!0,bV("warn",`Event names must be pascal case; instead of \`${c}\`, you probably want \`${c8[v]}\`.`))}if(!l){if(f.length&&(m=f.reduce(SV,p),!(m&&m.set))){const[v,...A]=f.reverse();p=A.reverse().reduce(SV,p),c=v}if(u===`${int}remove`)if(p instanceof hr){let v=CV.get(p.constructor);v||(v=p.constructor,v=new v,CV.set(p.constructor,v)),u=v[c]}else u=0;if(h&&n){const A=TM[c];u?p[A]=u:delete p[A]}else ohe(p,c)||(p[c]=u)}a+=1}return t}function snt(t,e,n,r){const{children:i,...s}=r,{children:a,...o}=n,l=fhe(s,o,!0);return l.changes.length?l:null}function ant(t,e,n,r){const i=snt(t,e,n,r);i&&phe(t,i)}const ont=Object.freeze([...Object.keys(c8),"draw"]),d8={};function lnt(t){const e=t.charAt(0),n=t.substring(1);return`${e.toUpperCase()}${n}`}function cnt(t,e){return e.toLowerCase()}function unt(t){let e=t;return t.startsWith("pixi")&&(e=t.replace(/^pixi([A-Z])/,cnt)),e}function dnt(t,e,n){const r=unt(t),i=lnt(r);if(!(i in d8))throw new Error(`${i} is not part of the PIXI namespace! Did you forget to extend?`);const s=d8[i],a=u8(e,ont);Object.entries(e).forEach(([l,c])=>{if(l in TM){const u=TM[l];a[u]=c}});const o=lhe(new s(a),{root:n,type:r});return phe(o,e),o}var mN={exports:{}},AN={exports:{}},yN={exports:{}},vN={};var wV;function hnt(){return wV||(wV=1,(function(t){function e(O,H){var K=O.length;O.push(H);e:for(;0<K;){var X=K-1>>>1,re=O[X];if(0<i(re,H))O[X]=H,O[K]=re,K=X;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var H=O[0],K=O.pop();if(K!==H){O[0]=K;e:for(var X=0,re=O.length,J=re>>>1;X<J;){var Z=2*(X+1)-1,ee=O[Z],te=Z+1,oe=O[te];if(0>i(ee,K))te<re&&0>i(oe,ee)?(O[X]=oe,O[te]=K,X=te):(O[X]=ee,O[Z]=K,X=Z);else if(te<re&&0>i(oe,K))O[X]=oe,O[te]=K,X=te;else break e}}return H}function i(O,H){var K=O.sortIndex-H.sortIndex;return K!==0?K:O.id-H.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,h=null,f=3,p=!1,m=!1,v=!1,A=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function w(O){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=O)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(c)}}function B(O){if(v=!1,w(O),!m)if(n(l)!==null)m=!0,V();else{var H=n(c);H!==null&&q(B,H.startTime-O)}}var D=!1,T=-1,M=5,R=-1;function k(){return!(t.unstable_now()-R<M)}function L(){if(D){var O=t.unstable_now();R=O;var H=!0;try{e:{m=!1,v&&(v=!1,x(T),T=-1),p=!0;var K=f;try{t:{for(w(O),h=n(l);h!==null&&!(h.expirationTime>O&&k());){var X=h.callback;if(typeof X=="function"){h.callback=null,f=h.priorityLevel;var re=X(h.expirationTime<=O);if(O=t.unstable_now(),typeof re=="function"){h.callback=re,w(O),H=!0;break t}h===n(l)&&r(l),w(O)}else r(l);h=n(l)}if(h!==null)H=!0;else{var J=n(c);J!==null&&q(B,J.startTime-O),H=!1}}break e}finally{h=null,f=K,p=!1}H=void 0}}finally{H?F():D=!1}}}var F;if(typeof E=="function")F=function(){E(L)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,G=z.port2;z.port1.onmessage=L,F=function(){G.postMessage(null)}}else F=function(){A(L,0)};function V(){D||(D=!0,F())}function q(O,H){T=A(function(){O(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,V())},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var K=f;f=H;try{return O()}finally{f=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,H){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var K=f;f=O;try{return H()}finally{f=K}},t.unstable_scheduleCallback=function(O,H,K){var X=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?X+K:X):K=X,O){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=K+re,O={id:u++,callback:H,priorityLevel:O,startTime:K,expirationTime:re,sortIndex:-1},K>X?(O.sortIndex=K,e(c,O),n(l)===null&&O===n(c)&&(v?(x(T),T=-1):v=!0,q(B,K-X))):(O.sortIndex=re,e(l,O),m||p||(m=!0,V())),O},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(O){var H=f;return function(){var K=f;f=H;try{return O.apply(this,arguments)}finally{f=K}}}})(vN)),vN}var _V;function fnt(){return _V||(_V=1,yN.exports=hnt()),yN.exports}var IV;function pnt(){return IV||(IV=1,(function(t){t.exports=function(e){function n(b,S,j,Q){return new rl(b,S,j,Q)}function r(){}function i(b){var S="https://react.dev/errors/"+b;if(1<arguments.length){S+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)S+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+b+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(b){return b===null||typeof b!="object"?null:(b=fm&&b[fm]||b["@@iterator"],typeof b=="function"?b:null)}function a(b){if(b==null)return null;if(typeof b=="function")return b.$$typeof===Gc?null:b.displayName||b.name||null;if(typeof b=="string")return b;switch(b){case oc:return"Fragment";case Hc:return"Portal";case Cv:return"Profiler";case bv:return"StrictMode";case cA:return"Suspense";case Sh:return"SuspenseList"}if(typeof b=="object")switch(b.$$typeof){case Iu:return(b.displayName||"Context")+".Provider";case Eh:return(b._context.displayName||"Context")+".Consumer";case ng:var S=b.render;return b=b.displayName,b||(b=S.displayName||S.name||"",b=b!==""?"ForwardRef("+b+")":"ForwardRef"),b;case rg:return S=b.displayName||null,S!==null?S:a(b.type)||"Memo";case cc:S=b._payload,b=b._init;try{return a(b(S))}catch{}}return null}function o(b){if(uA===void 0)try{throw Error()}catch(j){var S=j.stack.trim().match(/\n( *(at )?)/);uA=S&&S[1]||"",dA=-1<j.stack.indexOf(`
    at`)?" (<anonymous>)":-1<j.stack.indexOf("@")?"@unknown:0:0":""}return`
`+uA+b+dA}function l(b,S){if(!b||wh)return"";wh=!0;var j=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var Q={DetermineComponentFrameRoot:function(){try{if(S){var hn=function(){throw Error()};if(Object.defineProperty(hn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(hn,[])}catch(ur){var An=ur}Reflect.construct(b,[],hn)}else{try{hn.call()}catch(ur){An=ur}b.call(hn.prototype)}}else{try{throw Error()}catch(ur){An=ur}(hn=b())&&typeof hn.catch=="function"&&hn.catch(function(){})}}catch(ur){if(ur&&An&&typeof ur.stack=="string")return[ur.stack,An.stack]}return[null,null]}};Q.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Y=Object.getOwnPropertyDescriptor(Q.DetermineComponentFrameRoot,"name");Y&&Y.configurable&&Object.defineProperty(Q.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ie=Q.DetermineComponentFrameRoot(),xe=ie[0],Re=ie[1];if(xe&&Re){var Ze=xe.split(`
`),Mt=Re.split(`
`);for(Y=Q=0;Q<Ze.length&&!Ze[Q].includes("DetermineComponentFrameRoot");)Q++;for(;Y<Mt.length&&!Mt[Y].includes("DetermineComponentFrameRoot");)Y++;if(Q===Ze.length||Y===Mt.length)for(Q=Ze.length-1,Y=Mt.length-1;1<=Q&&0<=Y&&Ze[Q]!==Mt[Y];)Y--;for(;1<=Q&&0<=Y;Q--,Y--)if(Ze[Q]!==Mt[Y]){if(Q!==1||Y!==1)do if(Q--,Y--,0>Y||Ze[Q]!==Mt[Y]){var Jt=`
`+Ze[Q].replace(" at new "," at ");return b.displayName&&Jt.includes("<anonymous>")&&(Jt=Jt.replace("<anonymous>",b.displayName)),Jt}while(1<=Q&&0<=Y);break}}}finally{wh=!1,Error.prepareStackTrace=j}return(j=b?b.displayName||b.name:"")?o(j):""}function c(b){switch(b.tag){case 26:case 27:case 5:return o(b.type);case 16:return o("Lazy");case 13:return o("Suspense");case 19:return o("SuspenseList");case 0:case 15:return b=l(b.type,!1),b;case 11:return b=l(b.type.render,!1),b;case 1:return b=l(b.type,!0),b;default:return""}}function u(b){try{var S="";do S+=c(b),b=b.return;while(b);return S}catch(j){return`
Error generating stack: `+j.message+`
`+j.stack}}function h(b){var S=b,j=b;if(b.alternate)for(;S.return;)S=S.return;else{b=S;do S=b,(S.flags&4098)!==0&&(j=S.return),b=S.return;while(b)}return S.tag===3?j:null}function f(b){if(h(b)!==b)throw Error(i(188))}function p(b){var S=b.alternate;if(!S){if(S=h(b),S===null)throw Error(i(188));return S!==b?null:b}for(var j=b,Q=S;;){var Y=j.return;if(Y===null)break;var ie=Y.alternate;if(ie===null){if(Q=Y.return,Q!==null){j=Q;continue}break}if(Y.child===ie.child){for(ie=Y.child;ie;){if(ie===j)return f(Y),b;if(ie===Q)return f(Y),S;ie=ie.sibling}throw Error(i(188))}if(j.return!==Q.return)j=Y,Q=ie;else{for(var xe=!1,Re=Y.child;Re;){if(Re===j){xe=!0,j=Y,Q=ie;break}if(Re===Q){xe=!0,Q=Y,j=ie;break}Re=Re.sibling}if(!xe){for(Re=ie.child;Re;){if(Re===j){xe=!0,j=ie,Q=Y;break}if(Re===Q){xe=!0,Q=ie,j=Y;break}Re=Re.sibling}if(!xe)throw Error(i(189))}}if(j.alternate!==Q)throw Error(i(190))}if(j.tag!==3)throw Error(i(188));return j.stateNode.current===j?b:S}function m(b){var S=b.tag;if(S===5||S===26||S===27||S===6)return b;for(b=b.child;b!==null;){if(S=m(b),S!==null)return S;b=b.sibling}return null}function v(b){var S=b.tag;if(S===5||S===26||S===27||S===6)return b;for(b=b.child;b!==null;){if(b.tag!==4&&(S=v(b),S!==null))return S;b=b.sibling}return null}function A(b){return{current:b}}function x(b){0>Ru||(b.current=Ph[Ru],Ph[Ru]=null,Ru--)}function E(b,S){Ru++,Ph[Ru]=b.current,b.current=S}function w(b){return b>>>=0,b===0?32:31-(kh(b)/uC|0)|0}function B(b){var S=b&42;if(S!==0)return S;switch(b&-b){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return b&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return b}}function D(b,S){var j=b.pendingLanes;if(j===0)return 0;var Q=0,Y=b.suspendedLanes,ie=b.pingedLanes,xe=b.warmLanes;b=b.finishedLanes!==0;var Re=j&134217727;return Re!==0?(j=Re&~Y,j!==0?Q=B(j):(ie&=Re,ie!==0?Q=B(ie):b||(xe=Re&~xe,xe!==0&&(Q=B(xe))))):(Re=j&~Y,Re!==0?Q=B(Re):ie!==0?Q=B(ie):b||(xe=j&~xe,xe!==0&&(Q=B(xe)))),Q===0?0:S!==0&&S!==Q&&(S&Y)===0&&(Y=Q&-Q,xe=S&-S,Y>=xe||Y===32&&(xe&4194176)!==0)?S:Q}function T(b,S){return(b.pendingLanes&~(b.suspendedLanes&~b.pingedLanes)&S)===0}function M(b,S){switch(b){case 1:case 2:case 4:case 8:return S+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return S+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function R(){var b=Hf;return Hf<<=1,(Hf&4194176)===0&&(Hf=128),b}function k(){var b=Nh;return Nh<<=1,(Nh&62914560)===0&&(Nh=4194304),b}function L(b){for(var S=[],j=0;31>j;j++)S.push(b);return S}function F(b,S){b.pendingLanes|=S,S!==268435456&&(b.suspendedLanes=0,b.pingedLanes=0,b.warmLanes=0)}function z(b,S,j,Q,Y,ie){var xe=b.pendingLanes;b.pendingLanes=j,b.suspendedLanes=0,b.pingedLanes=0,b.warmLanes=0,b.expiredLanes&=j,b.entangledLanes&=j,b.errorRecoveryDisabledLanes&=j,b.shellSuspendCounter=0;var Re=b.entanglements,Ze=b.expirationTimes,Mt=b.hiddenUpdates;for(j=xe&~j;0<j;){var Jt=31-vo(j),hn=1<<Jt;Re[Jt]=0,Ze[Jt]=-1;var An=Mt[Jt];if(An!==null)for(Mt[Jt]=null,Jt=0;Jt<An.length;Jt++){var ur=An[Jt];ur!==null&&(ur.lane&=-536870913)}j&=~hn}Q!==0&&G(b,Q,0),ie!==0&&Y===0&&b.tag!==0&&(b.suspendedLanes|=ie&~(xe&~S))}function G(b,S,j){b.pendingLanes|=S,b.suspendedLanes&=~S;var Q=31-vo(S);b.entangledLanes|=S,b.entanglements[Q]=b.entanglements[Q]|1073741824|j&4194218}function V(b,S){var j=b.entangledLanes|=S;for(b=b.entanglements;j;){var Q=31-vo(j),Y=1<<Q;Y&S|b[Q]&S&&(b[Q]|=S),j&=~Y}}function q(b){return b&=-b,2<b?8<b?(b&134217727)!==0?32:268435456:8:2}function O(b){if(xo&&typeof xo.onCommitFiberRoot=="function")try{xo.onCommitFiberRoot(ll,b,void 0,(b.current.flags&128)===128)}catch{}}function H(b){if(typeof hC=="function"&&Hv(b),xo&&typeof xo.setStrictMode=="function")try{xo.setStrictMode(ll,b)}catch{}}function K(b,S){return b===S&&(b!==0||1/b===1/S)||b!==b&&S!==S}function X(b,S){if(typeof b=="object"&&b!==null){var j=ug.get(b);return j!==void 0?j:(S={value:b,source:S,stack:u(S)},ug.set(b,S),S)}return{value:b,source:S,stack:u(S)}}function re(b,S){Vi[Yi++]=Lh,Vi[Yi++]=zn,zn=b,Lh=S}function J(b,S,j){Uo[Ea++]=gc,Uo[Ea++]=Fl,Uo[Ea++]=qc,qc=b;var Q=gc;b=Fl;var Y=32-vo(Q)-1;Q&=~(1<<Y),j+=1;var ie=32-vo(S)+Y;if(30<ie){var xe=Y-Y%5;ie=(Q&(1<<xe)-1).toString(32),Q>>=xe,Y-=xe,gc=1<<32-vo(S)+Y|j<<Y|Q,Fl=ie+b}else gc=1<<ie|j<<Y|Q,Fl=b}function Z(b){b.return!==null&&(re(b,1),J(b,1,0))}function ee(b){for(;b===zn;)zn=Vi[--Yi],Vi[Yi]=null,Lh=Vi[--Yi],Vi[Yi]=null;for(;b===qc;)qc=Uo[--Ea],Uo[Ea]=null,Fl=Uo[--Ea],Uo[Ea]=null,gc=Uo[--Ea],Uo[Ea]=null}function te(b,S){E(Yc,S),E(Sm,b),E(ci,null),b=_h(S),x(ci),E(ci,b)}function oe(){x(ci),x(Sm),x(Yc)}function ae(b){b.memoizedState!==null&&E(Wf,b);var S=ci.current,j=Ev(S,b.type);S!==j&&(E(Sm,b),E(ci,j))}function se(b){Sm.current===b&&(x(ci),x(Sm)),Wf.current===b&&(x(Wf),xa?tr._currentValue=Oa:tr._currentValue2=Oa)}function fe(b){var S=Error(i(418,""));throw Se(X(S,b)),Ol}function Ee(b,S){if(!Gs)throw Error(i(175));Nv(b.stateNode,b.type,b.memoizedProps,S,b)||fe(b)}function Be(b){for(bo=b.return;bo;)switch(bo.tag){case 3:case 27:mc=!0;return;case 5:case 13:mc=!1;return;default:bo=bo.return}}function _e(b){if(!Gs||b!==bo)return!1;if(!ui)return Be(b),ui=!0,!1;var S=!1;if(za?b.tag!==3&&b.tag!==27&&(b.tag!==5||oC(b.type)&&!Ih(b.type,b.memoizedProps))&&(S=!0):b.tag!==3&&(b.tag!==5||oC(b.type)&&!Ih(b.type,b.memoizedProps))&&(S=!0),S&&$a&&fe(b),Be(b),b.tag===13){if(!Gs)throw Error(i(316));if(b=b.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(i(317));$a=aC(b)}else $a=bo?Du(b.stateNode):null;return!0}function Ce(){Gs&&($a=bo=null,ui=!1)}function Se(b){jl===null?jl=[b]:jl.push(b)}function Me(){for(var b=ku,S=dg=ku=0;S<b;){var j=Xi[S];Xi[S++]=null;var Q=Xi[S];Xi[S++]=null;var Y=Xi[S];Xi[S++]=null;var ie=Xi[S];if(Xi[S++]=null,Q!==null&&Y!==null){var xe=Q.pending;xe===null?Y.next=Y:(Y.next=xe.next,xe.next=Y),Q.pending=Y}ie!==0&&ft(j,Y,ie)}}function ce(b,S,j,Q){Xi[ku++]=b,Xi[ku++]=S,Xi[ku++]=j,Xi[ku++]=Q,dg|=Q,b.lanes|=Q,b=b.alternate,b!==null&&(b.lanes|=Q)}function $e(b,S,j,Q){return ce(b,S,j,Q),Ie(b)}function qe(b,S){return ce(b,null,null,S),Ie(b)}function ft(b,S,j){b.lanes|=j;var Q=b.alternate;Q!==null&&(Q.lanes|=j);for(var Y=!1,ie=b.return;ie!==null;)ie.childLanes|=j,Q=ie.alternate,Q!==null&&(Q.childLanes|=j),ie.tag===22&&(b=ie.stateNode,b===null||b._visibility&1||(Y=!0)),b=ie,ie=ie.return;Y&&S!==null&&b.tag===3&&(ie=b.stateNode,Y=31-vo(j),ie=ie.hiddenUpdates,b=ie[Y],b===null?ie[Y]=[S]:b.push(S),S.lane=j|536870912)}function Ie(b){if(50<tp)throw tp=0,Go=null,Error(i(185));for(var S=b.return;S!==null;)b=S,S=b.return;return b.tag===3?b.stateNode:null}function ht(b){b!==Kf&&b.next===null&&(Kf===null?Fh=Kf=b:Kf=Kf.next=b),Md=!0,wm||(wm=!0,He(xt))}function Ue(b,S){if(!Ac&&Md){Ac=!0;do for(var j=!1,Q=Fh;Q!==null;){if(b!==0){var Y=Q.pendingLanes;if(Y===0)var ie=0;else{var xe=Q.suspendedLanes,Re=Q.pingedLanes;ie=(1<<31-vo(42|b)+1)-1,ie&=Y&~(xe&~Re),ie=ie&201326677?ie&201326677|1:ie?ie|2:0}ie!==0&&(j=!0,ke(Q,ie))}else ie=Rr,ie=D(Q,Q===jr?ie:0),(ie&3)===0||T(Q,ie)||(j=!0,ke(Q,ie));Q=Q.next}while(j);Ac=!1}}function xt(){Md=wm=!1;var b=0;Dd!==0&&(Th()&&(b=Dd),Dd=0);for(var S=hs(),j=null,Q=Fh;Q!==null;){var Y=Q.next,ie=ve(Q,S);ie===0?(Q.next=null,j===null?Fh=Y:j.next=Y,Y===null&&(Kf=j)):(j=Q,(b!==0||(ie&3)!==0)&&(Md=!0)),Q=Y}Ue(b)}function ve(b,S){for(var j=b.suspendedLanes,Q=b.pingedLanes,Y=b.expirationTimes,ie=b.pendingLanes&-62914561;0<ie;){var xe=31-vo(ie),Re=1<<xe,Ze=Y[xe];Ze===-1?((Re&j)===0||(Re&Q)!==0)&&(Y[xe]=M(Re,S)):Ze<=S&&(b.expiredLanes|=Re),ie&=~Re}if(S=jr,j=Rr,j=D(b,b===S?j:0),Q=b.callbackNode,j===0||b===S&&Wi===2||b.cancelPendingCommit!==null)return Q!==null&&Q!==null&&Vf(Q),b.callbackNode=null,b.callbackPriority=0;if((j&3)===0||T(b,j)){if(S=j&-j,S===b.callbackPriority)return S;switch(Q!==null&&Vf(Q),q(j)){case 2:case 8:j=Uv;break;case 32:j=DA;break;case 268435456:j=Em;break;default:j=DA}return Q=ue.bind(null,b),j=Gf(j,Q),b.callbackPriority=S,b.callbackNode=j,S}return Q!==null&&Q!==null&&Vf(Q),b.callbackPriority=2,b.callbackNode=null,2}function ue(b,S){var j=b.callbackNode;if(La()&&b.callbackNode!==j)return null;var Q=Rr;return Q=D(b,b===jr?Q:0),Q===0?null:(cm(b,Q,S),ve(b,hs()),b.callbackNode!=null&&b.callbackNode===j?ue.bind(null,b):null)}function ke(b,S){if(La())return null;cm(b,S,!0)}function He(b){Ms?mm(function(){(Ln&6)!==0?Gf(MA,b):b()}):Gf(MA,b)}function Qe(){return Dd===0&&(Dd=R()),Dd}function Ke(b,S){if(_m===null){var j=_m=[];RA=0,cl=Qe(),jh={status:"pending",value:void 0,then:function(Q){j.push(Q)}}}return RA++,S.then(jt,jt),S}function jt(){if(--RA===0&&_m!==null){jh!==null&&(jh.status="fulfilled");var b=_m;_m=null,cl=0,jh=null;for(var S=0;S<b.length;S++)(0,b[S])()}}function St(b,S){var j=[],Q={status:"pending",value:null,reason:null,then:function(Y){j.push(Y)}};return b.then(function(){Q.status="fulfilled",Q.value=S;for(var Y=0;Y<j.length;Y++)(0,j[Y])(S)},function(Y){for(Q.status="rejected",Q.reason=Y,Y=0;Y<j.length;Y++)(0,j[Y])(void 0)}),Q}function Zt(b){b.updateQueue={baseState:b.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bt(b,S){b=b.updateQueue,S.updateQueue===b&&(S.updateQueue={baseState:b.baseState,firstBaseUpdate:b.firstBaseUpdate,lastBaseUpdate:b.lastBaseUpdate,shared:b.shared,callbacks:null})}function at(b){return{lane:b,tag:0,payload:null,callback:null,next:null}}function pt(b,S,j){var Q=b.updateQueue;if(Q===null)return null;if(Q=Q.shared,(Ln&2)!==0){var Y=Q.pending;return Y===null?S.next=S:(S.next=Y.next,Y.next=S),Q.pending=S,S=Ie(b),ft(b,null,j),S}return ce(b,Q,S,j),Ie(b)}function Vt(b,S,j){if(S=S.updateQueue,S!==null&&(S=S.shared,(j&4194176)!==0)){var Q=S.lanes;Q&=b.pendingLanes,j|=Q,S.lanes=j,V(b,j)}}function qt(b,S){var j=b.updateQueue,Q=b.alternate;if(Q!==null&&(Q=Q.updateQueue,j===Q)){var Y=null,ie=null;if(j=j.firstBaseUpdate,j!==null){do{var xe={lane:j.lane,tag:j.tag,payload:j.payload,callback:null,next:null};ie===null?Y=ie=xe:ie=ie.next=xe,j=j.next}while(j!==null);ie===null?Y=ie=S:ie=ie.next=S}else Y=ie=S;j={baseState:Q.baseState,firstBaseUpdate:Y,lastBaseUpdate:ie,shared:Q.shared,callbacks:Q.callbacks},b.updateQueue=j;return}b=j.lastBaseUpdate,b===null?j.firstBaseUpdate=S:b.next=S,j.lastBaseUpdate=S}function Wt(){if(qf){var b=jh;if(b!==null)throw b}}function gn(b,S,j,Q){qf=!1;var Y=b.updateQueue;Nu=!1;var ie=Y.firstBaseUpdate,xe=Y.lastBaseUpdate,Re=Y.shared.pending;if(Re!==null){Y.shared.pending=null;var Ze=Re,Mt=Ze.next;Ze.next=null,xe===null?ie=Mt:xe.next=Mt,xe=Ze;var Jt=b.alternate;Jt!==null&&(Jt=Jt.updateQueue,Re=Jt.lastBaseUpdate,Re!==xe&&(Re===null?Jt.firstBaseUpdate=Mt:Re.next=Mt,Jt.lastBaseUpdate=Ze))}if(ie!==null){var hn=Y.baseState;xe=0,Jt=Mt=Ze=null,Re=ie;do{var An=Re.lane&-536870913,ur=An!==Re.lane;if(ur?(Rr&An)===An:(Q&An)===An){An!==0&&An===cl&&(qf=!0),Jt!==null&&(Jt=Jt.next={lane:0,tag:Re.tag,payload:Re.payload,callback:null,next:null});e:{var fl=b,Rm=Re;An=S;var np=j;switch(Rm.tag){case 1:if(fl=Rm.payload,typeof fl=="function"){hn=fl.call(np,hn,An);break e}hn=fl;break e;case 3:fl.flags=fl.flags&-65537|128;case 0:if(fl=Rm.payload,An=typeof fl=="function"?fl.call(np,hn,An):fl,An==null)break e;hn=jf({},hn,An);break e;case 2:Nu=!0}}An=Re.callback,An!==null&&(b.flags|=64,ur&&(b.flags|=8192),ur=Y.callbacks,ur===null?Y.callbacks=[An]:ur.push(An))}else ur={lane:An,tag:Re.tag,payload:Re.payload,callback:Re.callback,next:null},Jt===null?(Mt=Jt=ur,Ze=hn):Jt=Jt.next=ur,xe|=An;if(Re=Re.next,Re===null){if(Re=Y.shared.pending,Re===null)break;ur=Re,Re=ur.next,ur.next=null,Y.lastBaseUpdate=ur,Y.shared.pending=null}}while(!0);Jt===null&&(Ze=hn),Y.baseState=Ze,Y.firstBaseUpdate=Mt,Y.lastBaseUpdate=Jt,ie===null&&(Y.shared.lanes=0),Hl|=xe,b.lanes=xe,b.memoizedState=hn}}function Ne(b,S){if(typeof b!="function")throw Error(i(191,b));b.call(S)}function Ht(b,S){var j=b.callbacks;if(j!==null)for(b.callbacks=null,b=0;b<j.length;b++)Ne(j[b],S)}function Qt(b,S){if(Qo(b,S))return!0;if(typeof b!="object"||b===null||typeof S!="object"||S===null)return!1;var j=Object.keys(b),Q=Object.keys(S);if(j.length!==Q.length)return!1;for(Q=0;Q<j.length;Q++){var Y=j[Q];if(!Im.call(S,Y)||!Qo(b[Y],S[Y]))return!1}return!0}function $t(b){return b=b.status,b==="fulfilled"||b==="rejected"}function It(){}function Ct(b,S,j){switch(j=b[j],j===void 0?b.push(S):j!==S&&(S.then(It,It),S=j),S.status){case"fulfilled":return S.value;case"rejected":throw b=S.reason,b===xi?Error(i(483)):b;default:if(typeof S.status=="string")S.then(It,It);else{if(b=jr,b!==null&&100<b.shellSuspendCounter)throw Error(i(482));b=S,b.status="pending",b.then(function(Q){if(S.status==="pending"){var Y=S;Y.status="fulfilled",Y.value=Q}},function(Q){if(S.status==="pending"){var Y=S;Y.status="rejected",Y.reason=Q}})}switch(S.status){case"fulfilled":return S.value;case"rejected":throw b=S.reason,b===xi?Error(i(483)):b}throw Rd=S,xi}}function ln(){if(Rd===null)throw Error(i(459));var b=Rd;return Rd=null,b}function lt(b){var S=zl;return zl+=1,Xc===null&&(Xc=[]),Ct(Xc,b,S)}function _t(b,S){S=S.props.ref,b.ref=S!==void 0?S:null}function Pt(b,S){throw S.$$typeof===xv?Error(i(525)):(b=Object.prototype.toString.call(S),Error(i(31,b==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":b)))}function zt(b){var S=b._init;return S(b._payload)}function Wn(b){function S(ut,Xe){if(b){var At=ut.deletions;At===null?(ut.deletions=[Xe],ut.flags|=16):At.push(Xe)}}function j(ut,Xe){if(!b)return null;for(;Xe!==null;)S(ut,Xe),Xe=Xe.sibling;return null}function Q(ut){for(var Xe=new Map;ut!==null;)ut.key!==null?Xe.set(ut.key,ut):Xe.set(ut.index,ut),ut=ut.sibling;return Xe}function Y(ut,Xe){return ut=fo(ut,Xe),ut.index=0,ut.sibling=null,ut}function ie(ut,Xe,At){return ut.index=At,b?(At=ut.alternate,At!==null?(At=At.index,At<Xe?(ut.flags|=33554434,Xe):At):(ut.flags|=33554434,Xe)):(ut.flags|=1048576,Xe)}function xe(ut){return b&&ut.alternate===null&&(ut.flags|=33554434),ut}function Re(ut,Xe,At,Gt){return Xe===null||Xe.tag!==6?(Xe=Ch(At,ut.mode,Gt),Xe.return=ut,Xe):(Xe=Y(Xe,At),Xe.return=ut,Xe)}function Ze(ut,Xe,At,Gt){var Pn=At.type;return Pn===oc?Jt(ut,Xe,At.props.children,Gt,At.key):Xe!==null&&(Xe.elementType===Pn||typeof Pn=="object"&&Pn!==null&&Pn.$$typeof===cc&&zt(Pn)===Xe.type)?(Xe=Y(Xe,At.props),_t(Xe,At),Xe.return=ut,Xe):(Xe=ac(At.type,At.key,At.props,null,ut.mode,Gt),_t(Xe,At),Xe.return=ut,Xe)}function Mt(ut,Xe,At,Gt){return Xe===null||Xe.tag!==4||Xe.stateNode.containerInfo!==At.containerInfo||Xe.stateNode.implementation!==At.implementation?(Xe=tg(At,ut.mode,Gt),Xe.return=ut,Xe):(Xe=Y(Xe,At.children||[]),Xe.return=ut,Xe)}function Jt(ut,Xe,At,Gt,Pn){return Xe===null||Xe.tag!==7?(Xe=$o(At,ut.mode,Gt,Pn),Xe.return=ut,Xe):(Xe=Y(Xe,At),Xe.return=ut,Xe)}function hn(ut,Xe,At){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint")return Xe=Ch(""+Xe,ut.mode,At),Xe.return=ut,Xe;if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case Td:return At=ac(Xe.type,Xe.key,Xe.props,null,ut.mode,At),_t(At,Xe),At.return=ut,At;case Hc:return Xe=tg(Xe,ut.mode,At),Xe.return=ut,Xe;case cc:var Gt=Xe._init;return Xe=Gt(Xe._payload),hn(ut,Xe,At)}if(po(Xe)||s(Xe))return Xe=$o(Xe,ut.mode,At,null),Xe.return=ut,Xe;if(typeof Xe.then=="function")return hn(ut,lt(Xe),At);if(Xe.$$typeof===Iu)return hn(ut,im(ut,Xe),At);Pt(ut,Xe)}return null}function An(ut,Xe,At,Gt){var Pn=Xe!==null?Xe.key:null;if(typeof At=="string"&&At!==""||typeof At=="number"||typeof At=="bigint")return Pn!==null?null:Re(ut,Xe,""+At,Gt);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case Td:return At.key===Pn?Ze(ut,Xe,At,Gt):null;case Hc:return At.key===Pn?Mt(ut,Xe,At,Gt):null;case cc:return Pn=At._init,At=Pn(At._payload),An(ut,Xe,At,Gt)}if(po(At)||s(At))return Pn!==null?null:Jt(ut,Xe,At,Gt,null);if(typeof At.then=="function")return An(ut,Xe,lt(At),Gt);if(At.$$typeof===Iu)return An(ut,Xe,im(ut,At),Gt);Pt(ut,At)}return null}function ur(ut,Xe,At,Gt,Pn){if(typeof Gt=="string"&&Gt!==""||typeof Gt=="number"||typeof Gt=="bigint")return ut=ut.get(At)||null,Re(Xe,ut,""+Gt,Pn);if(typeof Gt=="object"&&Gt!==null){switch(Gt.$$typeof){case Td:return ut=ut.get(Gt.key===null?At:Gt.key)||null,Ze(Xe,ut,Gt,Pn);case Hc:return ut=ut.get(Gt.key===null?At:Gt.key)||null,Mt(Xe,ut,Gt,Pn);case cc:var Ni=Gt._init;return Gt=Ni(Gt._payload),ur(ut,Xe,At,Gt,Pn)}if(po(Gt)||s(Gt))return ut=ut.get(At)||null,Jt(Xe,ut,Gt,Pn,null);if(typeof Gt.then=="function")return ur(ut,Xe,At,lt(Gt),Pn);if(Gt.$$typeof===Iu)return ur(ut,Xe,At,im(Xe,Gt),Pn);Pt(Xe,Gt)}return null}function fl(ut,Xe,At,Gt){for(var Pn=null,Ni=null,nr=Xe,oi=Xe=0,ra=null;nr!==null&&oi<At.length;oi++){nr.index>oi?(ra=nr,nr=null):ra=nr.sibling;var ti=An(ut,nr,At[oi],Gt);if(ti===null){nr===null&&(nr=ra);break}b&&nr&&ti.alternate===null&&S(ut,nr),Xe=ie(ti,Xe,oi),Ni===null?Pn=ti:Ni.sibling=ti,Ni=ti,nr=ra}if(oi===At.length)return j(ut,nr),ui&&re(ut,oi),Pn;if(nr===null){for(;oi<At.length;oi++)nr=hn(ut,At[oi],Gt),nr!==null&&(Xe=ie(nr,Xe,oi),Ni===null?Pn=nr:Ni.sibling=nr,Ni=nr);return ui&&re(ut,oi),Pn}for(nr=Q(nr);oi<At.length;oi++)ra=ur(nr,ut,oi,At[oi],Gt),ra!==null&&(b&&ra.alternate!==null&&nr.delete(ra.key===null?oi:ra.key),Xe=ie(ra,Xe,oi),Ni===null?Pn=ra:Ni.sibling=ra,Ni=ra);return b&&nr.forEach(function(zu){return S(ut,zu)}),ui&&re(ut,oi),Pn}function Rm(ut,Xe,At,Gt){if(At==null)throw Error(i(151));for(var Pn=null,Ni=null,nr=Xe,oi=Xe=0,ra=null,ti=At.next();nr!==null&&!ti.done;oi++,ti=At.next()){nr.index>oi?(ra=nr,nr=null):ra=nr.sibling;var zu=An(ut,nr,ti.value,Gt);if(zu===null){nr===null&&(nr=ra);break}b&&nr&&zu.alternate===null&&S(ut,nr),Xe=ie(zu,Xe,oi),Ni===null?Pn=zu:Ni.sibling=zu,Ni=zu,nr=ra}if(ti.done)return j(ut,nr),ui&&re(ut,oi),Pn;if(nr===null){for(;!ti.done;oi++,ti=At.next())ti=hn(ut,ti.value,Gt),ti!==null&&(Xe=ie(ti,Xe,oi),Ni===null?Pn=ti:Ni.sibling=ti,Ni=ti);return ui&&re(ut,oi),Pn}for(nr=Q(nr);!ti.done;oi++,ti=At.next())ti=ur(nr,ut,oi,ti.value,Gt),ti!==null&&(b&&ti.alternate!==null&&nr.delete(ti.key===null?oi:ti.key),Xe=ie(ti,Xe,oi),Ni===null?Pn=ti:Ni.sibling=ti,Ni=ti);return b&&nr.forEach(function(Pm){return S(ut,Pm)}),ui&&re(ut,oi),Pn}function np(ut,Xe,At,Gt){if(typeof At=="object"&&At!==null&&At.type===oc&&At.key===null&&(At=At.props.children),typeof At=="object"&&At!==null){switch(At.$$typeof){case Td:e:{for(var Pn=At.key;Xe!==null;){if(Xe.key===Pn){if(Pn=At.type,Pn===oc){if(Xe.tag===7){j(ut,Xe.sibling),Gt=Y(Xe,At.props.children),Gt.return=ut,ut=Gt;break e}}else if(Xe.elementType===Pn||typeof Pn=="object"&&Pn!==null&&Pn.$$typeof===cc&&zt(Pn)===Xe.type){j(ut,Xe.sibling),Gt=Y(Xe,At.props),_t(Gt,At),Gt.return=ut,ut=Gt;break e}j(ut,Xe);break}else S(ut,Xe);Xe=Xe.sibling}At.type===oc?(Gt=$o(At.props.children,ut.mode,Gt,At.key),Gt.return=ut,ut=Gt):(Gt=ac(At.type,At.key,At.props,null,ut.mode,Gt),_t(Gt,At),Gt.return=ut,ut=Gt)}return xe(ut);case Hc:e:{for(Pn=At.key;Xe!==null;){if(Xe.key===Pn)if(Xe.tag===4&&Xe.stateNode.containerInfo===At.containerInfo&&Xe.stateNode.implementation===At.implementation){j(ut,Xe.sibling),Gt=Y(Xe,At.children||[]),Gt.return=ut,ut=Gt;break e}else{j(ut,Xe);break}else S(ut,Xe);Xe=Xe.sibling}Gt=tg(At,ut.mode,Gt),Gt.return=ut,ut=Gt}return xe(ut);case cc:return Pn=At._init,At=Pn(At._payload),np(ut,Xe,At,Gt)}if(po(At))return fl(ut,Xe,At,Gt);if(s(At)){if(Pn=s(At),typeof Pn!="function")throw Error(i(150));return At=Pn.call(At),Rm(ut,Xe,At,Gt)}if(typeof At.then=="function")return np(ut,Xe,lt(At),Gt);if(At.$$typeof===Iu)return np(ut,Xe,im(ut,At),Gt);Pt(ut,At)}return typeof At=="string"&&At!==""||typeof At=="number"||typeof At=="bigint"?(At=""+At,Xe!==null&&Xe.tag===6?(j(ut,Xe.sibling),Gt=Y(Xe,At),Gt.return=ut,ut=Gt):(j(ut,Xe),Gt=Ch(At,ut.mode,Gt),Gt.return=ut,ut=Gt),xe(ut)):j(ut,Xe)}return function(ut,Xe,At,Gt){try{zl=0;var Pn=np(ut,Xe,At,Gt);return Xc=null,Pn}catch(nr){if(nr===xi)throw nr;var Ni=n(29,nr,null,ut.mode);return Ni.lanes=Gt,Ni.return=ut,Ni}finally{}}}function In(b,S){b=Zc,E(wa,b),E(Sa,S),Zc=b|S.baseLanes}function tn(){E(wa,Zc),E(Sa,Sa.current)}function cn(){Zc=wa.current,x(Sa),x(wa)}function Zn(b){var S=b.alternate;E(ta,ta.current&1),E($l,b),Ql===null&&(S===null||Sa.current!==null||S.memoizedState!==null)&&(Ql=b)}function pr(b){if(b.tag===22){if(E(ta,ta.current),E($l,b),Ql===null){var S=b.alternate;S!==null&&S.memoizedState!==null&&(Ql=b)}}else zr()}function zr(){E(ta,ta.current),E($l,$l.current)}function qi(b){x($l),Ql===b&&(Ql=null),x(ta)}function Nr(b){for(var S=b;S!==null;){if(S.tag===13){var j=S.memoizedState;if(j!==null&&(j=j.dehydrated,j===null||bA(j)||Mh(j)))return S}else if(S.tag===19&&S.memoizedProps.revealOrder!==void 0){if((S.flags&128)!==0)return S}else if(S.child!==null){S.child.return=S,S=S.child;continue}if(S===b)break;for(;S.sibling===null;){if(S.return===null||S.return===b)return null;S=S.return}S.sibling.return=S.return,S=S.sibling}return null}function Yn(){throw Error(i(321))}function Ii(b,S){if(S===null)return!1;for(var j=0;j<S.length&&j<b.length;j++)if(!Qo(b[j],S[j]))return!1;return!0}function bs(b,S,j,Q,Y,ie){return Lu=ie,Tr=S,S.memoizedState=null,S.updateQueue=null,S.lanes=0,Hn.H=b===null||b.memoizedState===null?na:Co,Pd=!1,ie=j(Q,Y),Pd=!1,fs&&(ie=Nc(S,j,Q,Y)),oo(b),ie}function oo(b){Hn.H=ii;var S=bi!==null&&bi.next!==null;if(Lu=0,Ws=bi=Tr=null,yc=!1,Ds=0,hg=null,S)throw Error(i(300));b===null||Ks||(b=b.dependencies,b!==null&&Cu(b)&&(Ks=!0))}function Nc(b,S,j,Q){Tr=b;var Y=0;do{if(fs&&(hg=null),Ds=0,fs=!1,25<=Y)throw Error(i(301));if(Y+=1,Ws=bi=null,b.updateQueue!=null){var ie=b.updateQueue;ie.lastEffect=null,ie.events=null,ie.stores=null,ie.memoCache!=null&&(ie.memoCache.index=0)}Hn.H=zh,ie=S(j,Q)}while(fs);return ie}function Ad(){var b=Hn.H,S=b.useState()[0];return S=typeof S.then=="function"?Ge(S):S,b=b.useState()[0],(bi!==null?bi.memoizedState:null)!==b&&(Tr.flags|=1024),S}function Au(){var b=Bm!==0;return Bm=0,b}function Tl(b,S,j){S.updateQueue=b.updateQueue,S.flags&=-2053,b.lanes&=~j}function ec(b){if(yc){for(b=b.memoizedState;b!==null;){var S=b.queue;S!==null&&(S.pending=null),b=b.next}yc=!1}Lu=0,Ws=bi=Tr=null,fs=!1,Ds=Bm=0,hg=null}function Qi(){var b={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ws===null?Tr.memoizedState=Ws=b:Ws=Ws.next=b,Ws}function me(){if(bi===null){var b=Tr.alternate;b=b!==null?b.memoizedState:null}else b=bi.next;var S=Ws===null?Tr.memoizedState:Ws.next;if(S!==null)Ws=S,bi=b;else{if(b===null)throw Tr.alternate===null?Error(i(467)):Error(i(310));bi=b,b={memoizedState:bi.memoizedState,baseState:bi.baseState,baseQueue:bi.baseQueue,queue:bi.queue,next:null},Ws===null?Tr.memoizedState=Ws=b:Ws=Ws.next=b}return Ws}function Ge(b){var S=Ds;return Ds+=1,hg===null&&(hg=[]),b=Ct(hg,b,S),S=Tr,(Ws===null?S.memoizedState:Ws.next)===null&&(S=S.alternate,Hn.H=S===null||S.memoizedState===null?na:Co),b}function rt(b){if(b!==null&&typeof b=="object"){if(typeof b.then=="function")return Ge(b);if(b.$$typeof===Iu)return ka(b)}throw Error(i(438,String(b)))}function nt(b){var S=null,j=Tr.updateQueue;if(j!==null&&(S=j.memoCache),S==null){var Q=Tr.alternate;Q!==null&&(Q=Q.updateQueue,Q!==null&&(Q=Q.memoCache,Q!=null&&(S={data:Q.data.map(function(Y){return Y.slice()}),index:0})))}if(S==null&&(S={data:[],index:0}),j===null&&(j=Tm(),Tr.updateQueue=j),j.memoCache=S,j=S.data[S.index],j===void 0)for(j=S.data[S.index]=Array(b),Q=0;Q<b;Q++)j[Q]=rC;return S.index++,j}function We(b,S){return typeof S=="function"?S(b):S}function Kt(b){var S=me();return nn(S,bi,b)}function nn(b,S,j){var Q=b.queue;if(Q===null)throw Error(i(311));Q.lastRenderedReducer=j;var Y=b.baseQueue,ie=Q.pending;if(ie!==null){if(Y!==null){var xe=Y.next;Y.next=ie.next,ie.next=xe}S.baseQueue=Y=ie,Q.pending=null}if(ie=b.baseState,Y===null)b.memoizedState=ie;else{S=Y.next;var Re=xe=null,Ze=null,Mt=S,Jt=!1;do{var hn=Mt.lane&-536870913;if(hn!==Mt.lane?(Rr&hn)===hn:(Lu&hn)===hn){var An=Mt.revertLane;if(An===0)Ze!==null&&(Ze=Ze.next={lane:0,revertLane:0,action:Mt.action,hasEagerState:Mt.hasEagerState,eagerState:Mt.eagerState,next:null}),hn===cl&&(Jt=!0);else if((Lu&An)===An){Mt=Mt.next,An===cl&&(Jt=!0);continue}else hn={lane:0,revertLane:Mt.revertLane,action:Mt.action,hasEagerState:Mt.hasEagerState,eagerState:Mt.eagerState,next:null},Ze===null?(Re=Ze=hn,xe=ie):Ze=Ze.next=hn,Tr.lanes|=An,Hl|=An;hn=Mt.action,Pd&&j(ie,hn),ie=Mt.hasEagerState?Mt.eagerState:j(ie,hn)}else An={lane:hn,revertLane:Mt.revertLane,action:Mt.action,hasEagerState:Mt.hasEagerState,eagerState:Mt.eagerState,next:null},Ze===null?(Re=Ze=An,xe=ie):Ze=Ze.next=An,Tr.lanes|=hn,Hl|=hn;Mt=Mt.next}while(Mt!==null&&Mt!==S);if(Ze===null?xe=ie:Ze.next=Re,!Qo(ie,b.memoizedState)&&(Ks=!0,Jt&&(j=jh,j!==null)))throw j;b.memoizedState=ie,b.baseState=xe,b.baseQueue=Ze,Q.lastRenderedState=ie}return Y===null&&(Q.lanes=0),[b.memoizedState,Q.dispatch]}function un(b){var S=me(),j=S.queue;if(j===null)throw Error(i(311));j.lastRenderedReducer=b;var Q=j.dispatch,Y=j.pending,ie=S.memoizedState;if(Y!==null){j.pending=null;var xe=Y=Y.next;do ie=b(ie,xe.action),xe=xe.next;while(xe!==Y);Qo(ie,S.memoizedState)||(Ks=!0),S.memoizedState=ie,S.baseQueue===null&&(S.baseState=ie),j.lastRenderedState=ie}return[ie,Q]}function dn(b,S,j){var Q=Tr,Y=me(),ie=ui;if(ie){if(j===void 0)throw Error(i(407));j=j()}else j=S();var xe=!Qo((bi||Y).memoizedState,j);if(xe&&(Y.memoizedState=j,Ks=!0),Y=Y.queue,yd(Sn.bind(null,Q,Y,b),[b]),Y.getSnapshot!==S||xe||Ws!==null&&Ws.memoizedState.tag&1){if(Q.flags|=2048,Lr(9,En.bind(null,Q,Y,j,S),{destroy:void 0},null),jr===null)throw Error(i(349));ie||(Lu&60)!==0||Bn(Q,S,j)}return j}function Bn(b,S,j){b.flags|=16384,b={getSnapshot:S,value:j},S=Tr.updateQueue,S===null?(S=Tm(),Tr.updateQueue=S,S.stores=[b]):(j=S.stores,j===null?S.stores=[b]:j.push(b))}function En(b,S,j,Q){S.value=j,S.getSnapshot=Q,ir(S)&&he(b)}function Sn(b,S,j){return j(function(){ir(S)&&he(b)})}function ir(b){var S=b.getSnapshot;b=b.value;try{var j=S();return!Qo(b,j)}catch{return!0}}function he(b){var S=qe(b,2);S!==null&&ho(S,b,2)}function pe(b){var S=Qi();if(typeof b=="function"){var j=b;if(b=j(),Pd){H(!0);try{j()}finally{H(!1)}}}return S.memoizedState=S.baseState=b,S.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:We,lastRenderedState:b},S}function Te(b,S,j,Q){return b.baseState=j,nn(b,bi,typeof Q=="function"?Q:We)}function Le(b,S,j,Q,Y){if(Sf(b))throw Error(i(485));if(b=S.action,b!==null){var ie={payload:Y,action:b,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(xe){ie.listeners.push(xe)}};Hn.T!==null?j(!0):ie.isTransition=!1,Q(ie),j=S.pending,j===null?(ie.next=S.pending=ie,Fe(S,ie)):(ie.next=j.next,S.pending=j.next=ie)}}function Fe(b,S){var j=S.action,Q=S.payload,Y=b.state;if(S.isTransition){var ie=Hn.T,xe={};Hn.T=xe;try{var Re=j(Y,Q),Ze=Hn.S;Ze!==null&&Ze(xe,Re),ct(b,S,Re)}catch(Mt){Tt(b,S,Mt)}finally{Hn.T=ie}}else try{ie=j(Y,Q),ct(b,S,ie)}catch(Mt){Tt(b,S,Mt)}}function ct(b,S,j){j!==null&&typeof j=="object"&&typeof j.then=="function"?j.then(function(Q){vt(b,S,Q)},function(Q){return Tt(b,S,Q)}):vt(b,S,j)}function vt(b,S,j){S.status="fulfilled",S.value=j,Xt(S),b.state=j,S=b.pending,S!==null&&(j=S.next,j===S?b.pending=null:(j=j.next,S.next=j,Fe(b,j)))}function Tt(b,S,j){var Q=b.pending;if(b.pending=null,Q!==null){Q=Q.next;do S.status="rejected",S.reason=j,Xt(S),S=S.next;while(S!==Q)}b.action=null}function Xt(b){b=b.listeners;for(var S=0;S<b.length;S++)(0,b[S])()}function Dt(b,S){return S}function rn(b,S){if(ui){var j=jr.formState;if(j!==null){e:{var Q=Tr;if(ui){if($a){var Y=Dv($a,mc);if(Y){$a=Du(Y),Q=al(Y);break e}}fe(Q)}Q=!1}Q&&(S=j[0])}}j=Qi(),j.memoizedState=j.baseState=S,Q={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dt,lastRenderedState:S},j.queue=Q,j=K0.bind(null,Tr,Q),Q.dispatch=j,Q=pe(!1);var ie=ki.bind(null,Tr,!1,Q.queue);return Q=Qi(),Y={state:S,dispatch:null,action:b,pending:null},Q.queue=Y,j=Le.bind(null,Tr,Y,ie,j),Y.dispatch=j,Q.memoizedState=b,[S,j,!1]}function sn(b){var S=me();return Un(S,bi,b)}function Un(b,S,j){S=nn(b,S,Dt)[0],b=Kt(We)[0],S=typeof S=="object"&&S!==null&&typeof S.then=="function"?Ge(S):S;var Q=me(),Y=Q.queue,ie=Y.dispatch;return j!==Q.memoizedState&&(Tr.flags|=2048,Lr(9,gr.bind(null,Y,j),{destroy:void 0},null)),[S,ie,b]}function gr(b,S){b.action=S}function qn(b){var S=me(),j=bi;if(j!==null)return Un(S,j,b);me(),S=S.memoizedState,j=me();var Q=j.queue.dispatch;return j.memoizedState=b,[S,Q,!1]}function Lr(b,S,j,Q){return b={tag:b,create:S,inst:j,deps:Q,next:null},S=Tr.updateQueue,S===null&&(S=Tm(),Tr.updateQueue=S),j=S.lastEffect,j===null?S.lastEffect=b.next=b:(Q=j.next,j.next=b,b.next=Q,S.lastEffect=b),b}function Ui(){return me().memoizedState}function ma(b,S,j,Q){var Y=Qi();Tr.flags|=b,Y.memoizedState=Lr(1|S,j,{destroy:void 0},Q===void 0?null:Q)}function lo(b,S,j,Q){var Y=me();Q=Q===void 0?null:Q;var ie=Y.memoizedState.inst;bi!==null&&Q!==null&&Ii(Q,bi.memoizedState.deps)?Y.memoizedState=Lr(S,j,ie,Q):(Tr.flags|=b,Y.memoizedState=Lr(1|S,j,ie,Q))}function Qp(b,S){ma(8390656,8,b,S)}function yd(b,S){lo(2048,8,b,S)}function Zy(b,S){return lo(4,2,b,S)}function ev(b,S){return lo(4,4,b,S)}function Up(b,S){if(typeof S=="function"){b=b();var j=S(b);return function(){typeof j=="function"?j():S(null)}}if(S!=null)return b=b(),S.current=b,function(){S.current=null}}function yu(b,S,j){j=j!=null?j.concat([b]):null,lo(4,4,Up.bind(null,S,b),j)}function Jg(){}function G0(b,S){var j=me();S=S===void 0?null:S;var Q=j.memoizedState;return S!==null&&Ii(S,Q[1])?Q[0]:(j.memoizedState=[b,S],b)}function ch(b,S){var j=me();S=S===void 0?null:S;var Q=j.memoizedState;if(S!==null&&Ii(S,Q[1]))return Q[0];if(Q=b(),Pd){H(!0);try{b()}finally{H(!1)}}return j.memoizedState=[Q,S],Q}function uh(b,S,j){return j===void 0||(Lu&1073741824)!==0?b.memoizedState=S:(b.memoizedState=j,b=Ml(),Tr.lanes|=b,Hl|=b,j)}function tv(b,S,j,Q){return Qo(j,S)?j:Sa.current!==null?(b=uh(b,j,Q),Qo(b,S)||(Ks=!0),b):(Lu&42)===0?(Ks=!0,b.memoizedState=j):(b=Ml(),Tr.lanes|=b,Hl|=b,S)}function V0(b,S,j,Q,Y){var ie=Ca();ja(ie!==0&&8>ie?ie:8);var xe=Hn.T,Re={};Hn.T=Re,ki(b,!1,S,j);try{var Ze=Y(),Mt=Hn.S;if(Mt!==null&&Mt(Re,Ze),Ze!==null&&typeof Ze=="object"&&typeof Ze.then=="function"){var Jt=St(Ze,Q);pi(b,S,Jt,Qs(b))}else pi(b,S,Q,Qs(b))}catch(hn){pi(b,S,{then:function(){},status:"rejected",reason:hn},Qs())}finally{ja(ie),Hn.T=xe}}function nv(b){var S=b.memoizedState;if(S!==null)return S;S={memoizedState:Oa,baseState:Oa,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:We,lastRenderedState:Oa},next:null};var j={};return S.next={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:We,lastRenderedState:j},next:null},b.memoizedState=S,b=b.alternate,b!==null&&(b.memoizedState=S),S}function vd(){return ka(tr)}function vu(){return me().memoizedState}function W0(){return me().memoizedState}function Zg(b){for(var S=b.return;S!==null;){switch(S.tag){case 24:case 3:var j=Qs();b=at(j);var Q=pt(S,b,j);Q!==null&&(ho(Q,S,j),Vt(Q,S,j)),S={cache:Vp()},b.payload=S;return}S=S.return}}function dh(b,S,j){var Q=Qs();j={lane:Q,revertLane:0,action:j,hasEagerState:!1,eagerState:null,next:null},Sf(b)?em(S,j):(j=$e(b,S,j,Q),j!==null&&(ho(j,b,Q),rv(j,S,Q)))}function K0(b,S,j){var Q=Qs();pi(b,S,j,Q)}function pi(b,S,j,Q){var Y={lane:Q,revertLane:0,action:j,hasEagerState:!1,eagerState:null,next:null};if(Sf(b))em(S,Y);else{var ie=b.alternate;if(b.lanes===0&&(ie===null||ie.lanes===0)&&(ie=S.lastRenderedReducer,ie!==null))try{var xe=S.lastRenderedState,Re=ie(xe,j);if(Y.hasEagerState=!0,Y.eagerState=Re,Qo(Re,xe))return ce(b,S,Y,0),jr===null&&Me(),!1}catch{}finally{}if(j=$e(b,S,Y,Q),j!==null)return ho(j,b,Q),rv(j,S,Q),!0}return!1}function ki(b,S,j,Q){if(Q={lane:2,revertLane:Qe(),action:Q,hasEagerState:!1,eagerState:null,next:null},Sf(b)){if(S)throw Error(i(479))}else S=$e(b,j,Q,2),S!==null&&ho(S,b,2)}function Sf(b){var S=b.alternate;return b===Tr||S!==null&&S===Tr}function em(b,S){fs=yc=!0;var j=b.pending;j===null?S.next=S:(S.next=j.next,j.next=S),b.pending=S}function rv(b,S,j){if((j&4194176)!==0){var Q=S.lanes;Q&=b.pendingLanes,j|=Q,S.lanes=j,V(b,j)}}function co(b,S,j,Q){S=b.memoizedState,j=j(Q,S),j=j==null?S:jf({},S,j),b.memoizedState=j,b.lanes===0&&(b.updateQueue.baseState=j)}function hh(b,S,j,Q,Y,ie,xe){return b=b.stateNode,typeof b.shouldComponentUpdate=="function"?b.shouldComponentUpdate(Q,ie,xe):S.prototype&&S.prototype.isPureReactComponent?!Qt(j,Q)||!Qt(Y,ie):!0}function tm(b,S,j,Q){b=S.state,typeof S.componentWillReceiveProps=="function"&&S.componentWillReceiveProps(j,Q),typeof S.UNSAFE_componentWillReceiveProps=="function"&&S.UNSAFE_componentWillReceiveProps(j,Q),S.state!==b&&Mm.enqueueReplaceState(S,S.state,null)}function tc(b,S){var j=S;if("ref"in S){j={};for(var Q in S)Q!=="ref"&&(j[Q]=S[Q])}if(b=b.defaultProps){j===S&&(j=jf({},j));for(var Y in b)j[Y]===void 0&&(j[Y]=b[Y])}return j}function q0(b,S){try{var j=b.onUncaughtError;j(S.value,{componentStack:S.stack})}catch(Q){setTimeout(function(){throw Q})}}function ea(b,S,j){try{var Q=b.onCaughtError;Q(j.value,{componentStack:j.stack,errorBoundary:S.tag===1?S.stateNode:null})}catch(Y){setTimeout(function(){throw Y})}}function wf(b,S,j){return j=at(j),j.tag=3,j.payload={element:null},j.callback=function(){q0(b,S)},j}function nc(b){return b=at(b),b.tag=3,b}function Hp(b,S,j,Q){var Y=j.type.getDerivedStateFromError;if(typeof Y=="function"){var ie=Q.value;b.payload=function(){return Y(ie)},b.callback=function(){ea(S,j,Q)}}var xe=j.stateNode;xe!==null&&typeof xe.componentDidCatch=="function"&&(b.callback=function(){ea(S,j,Q),typeof Y!="function"&&(Gl===null?Gl=new Set([this]):Gl.add(this));var Re=Q.stack;this.componentDidCatch(Q.value,{componentStack:Re!==null?Re:""})})}function Y0(b,S,j,Q,Y){if(j.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){if(S=j.alternate,S!==null&&fh(S,j,Y,!0),j=$l.current,j!==null){switch(j.tag){case 13:return Ql===null?nl():j.alternate===null&&ai===0&&(ai=3),j.flags&=-257,j.flags|=65536,j.lanes=Y,Q===Oh?j.flags|=16384:(S=j.updateQueue,S===null?j.updateQueue=new Set([Q]):S.add(Q),Lf(b,Q,Y)),!1;case 22:return j.flags|=65536,Q===Oh?j.flags|=16384:(S=j.updateQueue,S===null?(S={transitions:null,markerInstances:null,retryQueue:new Set([Q])},j.updateQueue=S):(j=S.retryQueue,j===null?S.retryQueue=new Set([Q]):j.add(Q)),Lf(b,Q,Y)),!1}throw Error(i(435,j.tag))}return Lf(b,Q,Y),nl(),!1}if(ui)return S=$l.current,S!==null?((S.flags&65536)===0&&(S.flags|=256),S.flags|=65536,S.lanes=Y,Q!==Ol&&(b=Error(i(422),{cause:Q}),Se(X(b,j)))):(Q!==Ol&&(S=Error(i(423),{cause:Q}),Se(X(S,j))),b=b.current.alternate,b.flags|=65536,Y&=-Y,b.lanes|=Y,Q=X(Q,j),Y=wf(b.stateNode,Q,Y),qt(b,Y),ai!==4&&(ai=2)),!1;var ie=Error(i(520),{cause:Q});if(ie=X(ie,j),pg===null?pg=[ie]:pg.push(ie),ai!==4&&(ai=2),S===null)return!0;Q=X(Q,j),j=S;do{switch(j.tag){case 3:return j.flags|=65536,b=Y&-Y,j.lanes|=b,b=wf(j.stateNode,Q,b),qt(j,b),!1;case 1:if(S=j.type,ie=j.stateNode,(j.flags&128)===0&&(typeof S.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(Gl===null||!Gl.has(ie))))return j.flags|=65536,Y&=-Y,j.lanes|=Y,Y=nc(Y),Hp(Y,b,j,Q),qt(j,Y),!1}j=j.return}while(j!==null);return!1}function Hi(b,S,j,Q){S.child=b===null?kA(S,null,j,Q):Jc(S,b.child,j,Q)}function iv(b,S,j,Q,Y){j=j.render;var ie=S.ref;if("ref"in Q){var xe={};for(var Re in Q)Re!=="ref"&&(xe[Re]=Q[Re])}else xe=Q;return bd(S),Q=bs(b,S,j,xe,ie,Y),Re=Au(),b!==null&&!Ks?(Tl(b,S,Y),xd(b,S,Y)):(ui&&Re&&Z(S),S.flags|=1,Hi(b,S,Q,Y),S.child)}function sv(b,S,j,Q,Y){if(b===null){var ie=j.type;return typeof ie=="function"&&!mr(ie)&&ie.defaultProps===void 0&&j.compare===null?(S.tag=15,S.type=ie,nm(b,S,ie,Q,Y)):(b=ac(j.type,null,Q,S,S.mode,Y),b.ref=S.ref,b.return=S,S.child=b)}if(ie=b.child,!lv(b,Y)){var xe=ie.memoizedProps;if(j=j.compare,j=j!==null?j:Qt,j(xe,Q)&&b.ref===S.ref)return xd(b,S,Y)}return S.flags|=1,b=fo(ie,Q),b.ref=S.ref,b.return=S,S.child=b}function nm(b,S,j,Q,Y){if(b!==null){var ie=b.memoizedProps;if(Qt(ie,Q)&&b.ref===S.ref)if(Ks=!1,S.pendingProps=Q=ie,lv(b,Y))(b.flags&131072)!==0&&(Ks=!0);else return S.lanes=b.lanes,xd(b,S,Y)}return jo(b,S,j,Q,Y)}function av(b,S,j){var Q=S.pendingProps,Y=Q.children,ie=(S.stateNode._pendingVisibility&2)!==0,xe=b!==null?b.memoizedState:null;if(Gp(b,S),Q.mode==="hidden"||ie){if((S.flags&128)!==0){if(Q=xe!==null?xe.baseLanes|j:j,b!==null){for(Y=S.child=b.child,ie=0;Y!==null;)ie=ie|Y.lanes|Y.childLanes,Y=Y.sibling;S.childLanes=ie&~Q}else S.childLanes=0,S.child=null;return ov(b,S,Q,j)}if((j&536870912)!==0)S.memoizedState={baseLanes:0,cachePool:null},b!==null&&uo(S,xe!==null?xe.cachePool:null),xe!==null?In(S,xe):tn(),pr(S);else return S.lanes=S.childLanes=536870912,ov(b,S,xe!==null?xe.baseLanes|j:j,j)}else xe!==null?(uo(S,xe.cachePool),In(S,xe),zr(),S.memoizedState=null):(b!==null&&uo(S,null),tn(),zr());return Hi(b,S,Y,j),S.child}function ov(b,S,j,Q){var Y=Cd();return Y=Y===null?null:{parent:xa?Ci._currentValue:Ci._currentValue2,pool:Y},S.memoizedState={baseLanes:j,cachePool:Y},b!==null&&uo(S,null),tn(),pr(S),b!==null&&fh(b,S,Q,!0),null}function Gp(b,S){var j=S.ref;if(j===null)b!==null&&b.ref!==null&&(S.flags|=2097664);else{if(typeof j!="function"&&typeof j!="object")throw Error(i(284));(b===null||b.ref!==j)&&(S.flags|=2097664)}}function jo(b,S,j,Q,Y){return bd(S),j=bs(b,S,j,Q,void 0,Y),Q=Au(),b!==null&&!Ks?(Tl(b,S,Y),xd(b,S,Y)):(ui&&Q&&Z(S),S.flags|=1,Hi(b,S,j,Y),S.child)}function Xb(b,S,j,Q,Y,ie){return bd(S),S.updateQueue=null,j=Nc(S,Q,j,Y),oo(b),Q=Au(),b!==null&&!Ks?(Tl(b,S,ie),xd(b,S,ie)):(ui&&Q&&Z(S),S.flags|=1,Hi(b,S,j,ie),S.child)}function el(b,S,j,Q,Y){if(bd(S),S.stateNode===null){var ie=Pu,xe=j.contextType;typeof xe=="object"&&xe!==null&&(ie=ka(xe)),ie=new j(Q,ie),S.memoizedState=ie.state!==null&&ie.state!==void 0?ie.state:null,ie.updater=Mm,S.stateNode=ie,ie._reactInternals=S,ie=S.stateNode,ie.props=Q,ie.state=S.memoizedState,ie.refs={},Zt(S),xe=j.contextType,ie.context=typeof xe=="object"&&xe!==null?ka(xe):Pu,ie.state=S.memoizedState,xe=j.getDerivedStateFromProps,typeof xe=="function"&&(co(S,j,xe,Q),ie.state=S.memoizedState),typeof j.getDerivedStateFromProps=="function"||typeof ie.getSnapshotBeforeUpdate=="function"||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(xe=ie.state,typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount(),xe!==ie.state&&Mm.enqueueReplaceState(ie,ie.state,null),gn(S,Q,ie,Y),Wt(),ie.state=S.memoizedState),typeof ie.componentDidMount=="function"&&(S.flags|=4194308),Q=!0}else if(b===null){ie=S.stateNode;var Re=S.memoizedProps,Ze=tc(j,Re);ie.props=Ze;var Mt=ie.context,Jt=j.contextType;xe=Pu,typeof Jt=="object"&&Jt!==null&&(xe=ka(Jt));var hn=j.getDerivedStateFromProps;Jt=typeof hn=="function"||typeof ie.getSnapshotBeforeUpdate=="function",Re=S.pendingProps!==Re,Jt||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(Re||Mt!==xe)&&tm(S,ie,Q,xe),Nu=!1;var An=S.memoizedState;ie.state=An,gn(S,Q,ie,Y),Wt(),Mt=S.memoizedState,Re||An!==Mt||Nu?(typeof hn=="function"&&(co(S,j,hn,Q),Mt=S.memoizedState),(Ze=Nu||hh(S,j,Ze,Q,An,Mt,xe))?(Jt||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount()),typeof ie.componentDidMount=="function"&&(S.flags|=4194308)):(typeof ie.componentDidMount=="function"&&(S.flags|=4194308),S.memoizedProps=Q,S.memoizedState=Mt),ie.props=Q,ie.state=Mt,ie.context=xe,Q=Ze):(typeof ie.componentDidMount=="function"&&(S.flags|=4194308),Q=!1)}else{ie=S.stateNode,Bt(b,S),xe=S.memoizedProps,Jt=tc(j,xe),ie.props=Jt,hn=S.pendingProps,An=ie.context,Mt=j.contextType,Ze=Pu,typeof Mt=="object"&&Mt!==null&&(Ze=ka(Mt)),Re=j.getDerivedStateFromProps,(Mt=typeof Re=="function"||typeof ie.getSnapshotBeforeUpdate=="function")||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(xe!==hn||An!==Ze)&&tm(S,ie,Q,Ze),Nu=!1,An=S.memoizedState,ie.state=An,gn(S,Q,ie,Y),Wt();var ur=S.memoizedState;xe!==hn||An!==ur||Nu||b!==null&&b.dependencies!==null&&Cu(b.dependencies)?(typeof Re=="function"&&(co(S,j,Re,Q),ur=S.memoizedState),(Jt=Nu||hh(S,j,Jt,Q,An,ur,Ze)||b!==null&&b.dependencies!==null&&Cu(b.dependencies))?(Mt||typeof ie.UNSAFE_componentWillUpdate!="function"&&typeof ie.componentWillUpdate!="function"||(typeof ie.componentWillUpdate=="function"&&ie.componentWillUpdate(Q,ur,Ze),typeof ie.UNSAFE_componentWillUpdate=="function"&&ie.UNSAFE_componentWillUpdate(Q,ur,Ze)),typeof ie.componentDidUpdate=="function"&&(S.flags|=4),typeof ie.getSnapshotBeforeUpdate=="function"&&(S.flags|=1024)):(typeof ie.componentDidUpdate!="function"||xe===b.memoizedProps&&An===b.memoizedState||(S.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||xe===b.memoizedProps&&An===b.memoizedState||(S.flags|=1024),S.memoizedProps=Q,S.memoizedState=ur),ie.props=Q,ie.state=ur,ie.context=Ze,Q=Jt):(typeof ie.componentDidUpdate!="function"||xe===b.memoizedProps&&An===b.memoizedState||(S.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||xe===b.memoizedProps&&An===b.memoizedState||(S.flags|=1024),Q=!1)}return ie=Q,Gp(b,S),Q=(S.flags&128)!==0,ie||Q?(ie=S.stateNode,j=Q&&typeof j.getDerivedStateFromError!="function"?null:ie.render(),S.flags|=1,b!==null&&Q?(S.child=Jc(S,b.child,null,Y),S.child=Jc(S,null,j,Y)):Hi(b,S,j,Y),S.memoizedState=ie.state,b=S.child):b=xd(b,S,Y),b}function Jb(b,S,j,Q){return Ce(),S.flags|=256,Hi(b,S,j,Q),S.child}function X0(b){return{baseLanes:b,cachePool:nA()}}function xu(b,S,j){return b=b!==null?b.childLanes&~j:0,S&&(b|=hl),b}function rm(b,S,j){var Q=S.pendingProps,Y=!1,ie=(S.flags&128)!==0,xe;if((xe=ie)||(xe=b!==null&&b.memoizedState===null?!1:(ta.current&2)!==0),xe&&(Y=!0,S.flags&=-129),xe=(S.flags&32)!==0,S.flags&=-33,b===null){if(ui){if(Y?Zn(S):zr(),ui){var Re=$a,Ze;(Ze=Re)&&(Re=kv(Re,mc),Re!==null?(S.memoizedState={dehydrated:Re,treeContext:qc!==null?{id:gc,overflow:Fl}:null,retryLane:536870912},Ze=n(18,null,null,0),Ze.stateNode=Re,Ze.return=S,S.child=Ze,bo=S,$a=null,Ze=!0):Ze=!1),Ze||fe(S)}if(Re=S.memoizedState,Re!==null&&(Re=Re.dehydrated,Re!==null))return Mh(Re)?S.lanes=16:S.lanes=536870912,null;qi(S)}return Re=Q.children,Q=Q.fallback,Y?(zr(),Y=S.mode,Re=ts({mode:"hidden",children:Re},Y),Q=$o(Q,Y,j,null),Re.return=S,Q.return=S,Re.sibling=Q,S.child=Re,Y=S.child,Y.memoizedState=X0(j),Y.childLanes=xu(b,xe,j),S.memoizedState=Eo,Q):(Zn(S),_f(S,Re))}if(Ze=b.memoizedState,Ze!==null&&(Re=Ze.dehydrated,Re!==null)){if(ie)S.flags&256?(Zn(S),S.flags&=-257,S=bu(b,S,j)):S.memoizedState!==null?(zr(),S.child=b.child,S.flags|=128,S=null):(zr(),Y=Q.fallback,Re=S.mode,Q=ts({mode:"visible",children:Q.children},Re),Y=$o(Y,Re,j,null),Y.flags|=2,Q.return=S,Y.return=S,Q.sibling=Y,S.child=Q,Jc(S,b.child,null,j),Q=S.child,Q.memoizedState=X0(j),Q.childLanes=xu(b,xe,j),S.memoizedState=Eo,S=Y);else if(Zn(S),Mh(Re))xe=CA(Re).digest,Q=Error(i(419)),Q.stack="",Q.digest=xe,Se({value:Q,source:null,stack:null}),S=bu(b,S,j);else if(Ks||fh(b,S,j,!1),xe=(j&b.childLanes)!==0,Ks||xe){if(xe=jr,xe!==null){if(Q=j&-j,(Q&42)!==0)Q=1;else switch(Q){case 2:Q=1;break;case 8:Q=4;break;case 32:Q=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:Q=64;break;case 268435456:Q=134217728;break;default:Q=0}if(Q=(Q&(xe.suspendedLanes|j))!==0?0:Q,Q!==0&&Q!==Ze.retryLane)throw Ze.retryLane=Q,qe(b,Q),ho(xe,b,Q),fC}bA(Re)||nl(),S=bu(b,S,j)}else bA(Re)?(S.flags|=128,S.child=b.child,S=Ae.bind(null,b),sC(Re,S),S=null):(b=Ze.treeContext,Gs&&($a=ym(Re),bo=S,ui=!0,jl=null,mc=!1,b!==null&&(Uo[Ea++]=gc,Uo[Ea++]=Fl,Uo[Ea++]=qc,gc=b.id,Fl=b.overflow,qc=S)),S=_f(S,Q.children),S.flags|=4096);return S}return Y?(zr(),Y=Q.fallback,Re=S.mode,Ze=b.child,ie=Ze.sibling,Q=fo(Ze,{mode:"hidden",children:Q.children}),Q.subtreeFlags=Ze.subtreeFlags&31457280,ie!==null?Y=fo(ie,Y):(Y=$o(Y,Re,j,null),Y.flags|=2),Y.return=S,Q.return=S,Q.sibling=Y,S.child=Q,Q=Y,Y=S.child,Re=b.child.memoizedState,Re===null?Re=X0(j):(Ze=Re.cachePool,Ze!==null?(ie=xa?Ci._currentValue:Ci._currentValue2,Ze=Ze.parent!==ie?{parent:ie,pool:ie}:Ze):Ze=nA(),Re={baseLanes:Re.baseLanes|j,cachePool:Ze}),Y.memoizedState=Re,Y.childLanes=xu(b,xe,j),S.memoizedState=Eo,Q):(Zn(S),j=b.child,b=j.sibling,j=fo(j,{mode:"visible",children:Q.children}),j.return=S,j.sibling=null,b!==null&&(xe=S.deletions,xe===null?(S.deletions=[b],S.flags|=16):xe.push(b)),S.child=j,S.memoizedState=null,j)}function _f(b,S){return S=ts({mode:"visible",children:S},b.mode),S.return=b,b.child=S}function ts(b,S){return lA(b,S,0,null)}function bu(b,S,j){return Jc(S,b.child,null,j),b=_f(S,S.pendingProps.children),b.flags|=2,S.memoizedState=null,b}function J0(b,S,j){b.lanes|=S;var Q=b.alternate;Q!==null&&(Q.lanes|=S),uv(b.return,S,j)}function Z0(b,S,j,Q,Y){var ie=b.memoizedState;ie===null?b.memoizedState={isBackwards:S,rendering:null,renderingStartTime:0,last:Q,tail:j,tailMode:Y}:(ie.isBackwards=S,ie.rendering=null,ie.renderingStartTime=0,ie.last=Q,ie.tail=j,ie.tailMode=Y)}function eA(b,S,j){var Q=S.pendingProps,Y=Q.revealOrder,ie=Q.tail;if(Hi(b,S,Q.children,j),Q=ta.current,(Q&2)!==0)Q=Q&1|2,S.flags|=128;else{if(b!==null&&(b.flags&128)!==0)e:for(b=S.child;b!==null;){if(b.tag===13)b.memoizedState!==null&&J0(b,j,S);else if(b.tag===19)J0(b,j,S);else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===S)break e;for(;b.sibling===null;){if(b.return===null||b.return===S)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}Q&=1}switch(E(ta,Q),Y){case"forwards":for(j=S.child,Y=null;j!==null;)b=j.alternate,b!==null&&Nr(b)===null&&(Y=j),j=j.sibling;j=Y,j===null?(Y=S.child,S.child=null):(Y=j.sibling,j.sibling=null),Z0(S,!1,Y,j,ie);break;case"backwards":for(j=null,Y=S.child,S.child=null;Y!==null;){if(b=Y.alternate,b!==null&&Nr(b)===null){S.child=Y;break}b=Y.sibling,Y.sibling=j,j=Y,Y=b}Z0(S,!0,j,null,ie);break;case"together":Z0(S,!1,null,null,void 0);break;default:S.memoizedState=null}return S.child}function xd(b,S,j){if(b!==null&&(S.dependencies=b.dependencies),Hl|=S.lanes,(j&S.childLanes)===0)if(b!==null){if(fh(b,S,j,!1),(j&S.childLanes)===0)return null}else return null;if(b!==null&&S.child!==b.child)throw Error(i(153));if(S.child!==null){for(b=S.child,j=fo(b,b.pendingProps),S.child=j,j.return=S;b.sibling!==null;)b=b.sibling,j=j.sibling=fo(b,b.pendingProps),j.return=S;j.sibling=null}return S.child}function lv(b,S){return(b.lanes&S)!==0?!0:(b=b.dependencies,!!(b!==null&&Cu(b)))}function rS(b,S,j){switch(S.tag){case 3:te(S,S.stateNode.containerInfo),Lc(S,Ci,b.memoizedState.cache),Ce();break;case 27:case 5:ae(S);break;case 4:te(S,S.stateNode.containerInfo);break;case 10:Lc(S,S.type,S.memoizedProps.value);break;case 13:var Q=S.memoizedState;if(Q!==null)return Q.dehydrated!==null?(Zn(S),S.flags|=128,null):(j&S.child.childLanes)!==0?rm(b,S,j):(Zn(S),b=xd(b,S,j),b!==null?b.sibling:null);Zn(S);break;case 19:var Y=(b.flags&128)!==0;if(Q=(j&S.childLanes)!==0,Q||(fh(b,S,j,!1),Q=(j&S.childLanes)!==0),Y){if(Q)return eA(b,S,j);S.flags|=128}if(Y=S.memoizedState,Y!==null&&(Y.rendering=null,Y.tail=null,Y.lastEffect=null),E(ta,ta.current),Q)break;return null;case 22:case 23:return S.lanes=0,av(b,S,j);case 24:Lc(S,Ci,b.memoizedState.cache)}return xd(b,S,j)}function cv(b,S,j){if(b!==null)if(b.memoizedProps!==S.pendingProps)Ks=!0;else{if(!lv(b,j)&&(S.flags&128)===0)return Ks=!1,rS(b,S,j);Ks=(b.flags&131072)!==0}else Ks=!1,ui&&(S.flags&1048576)!==0&&J(S,Lh,S.index);switch(S.lanes=0,S.tag){case 16:e:{b=S.pendingProps;var Q=S.elementType,Y=Q._init;if(Q=Y(Q._payload),S.type=Q,typeof Q=="function")mr(Q)?(b=tc(Q,b),S.tag=1,S=el(null,S,Q,b,j)):(S.tag=0,S=jo(null,S,Q,b,j));else{if(Q!=null){if(Y=Q.$$typeof,Y===ng){S.tag=11,S=iv(null,S,Q,b,j);break e}else if(Y===rg){S.tag=14,S=sv(null,S,Q,b,j);break e}}throw S=a(Q)||Q,Error(i(306,S,""))}}return S;case 0:return jo(b,S,S.type,S.pendingProps,j);case 1:return Q=S.type,Y=tc(Q,S.pendingProps),el(b,S,Q,Y,j);case 3:e:{if(te(S,S.stateNode.containerInfo),b===null)throw Error(i(387));var ie=S.pendingProps;Y=S.memoizedState,Q=Y.element,Bt(b,S),gn(S,ie,null,j);var xe=S.memoizedState;if(ie=xe.cache,Lc(S,Ci,ie),ie!==Y.cache&&tA(S,[Ci],j,!0),Wt(),ie=xe.element,Gs&&Y.isDehydrated)if(Y={element:ie,isDehydrated:!1,cache:xe.cache},S.updateQueue.baseState=Y,S.memoizedState=Y,S.flags&256){S=Jb(b,S,ie,j);break e}else if(ie!==Q){Q=X(Error(i(424)),S),Se(Q),S=Jb(b,S,ie,j);break e}else for(Gs&&($a=Rv(S.stateNode.containerInfo),bo=S,ui=!0,jl=null,mc=!0),j=kA(S,null,ie,j),S.child=j;j;)j.flags=j.flags&-3|4096,j=j.sibling;else{if(Ce(),ie===Q){S=xd(b,S,j);break e}Hi(b,S,ie,j)}S=S.child}return S;case 26:if(ol)return Gp(b,S),b===null?(j=bm(S.type,null,S.pendingProps,null))?S.memoizedState=j:ui||(S.stateNode=BA(S.type,S.pendingProps,Yc.current,S)):S.memoizedState=bm(S.type,b.memoizedProps,S.pendingProps,b.memoizedState),null;case 27:if(za)return ae(S),b===null&&za&&ui&&(Q=S.stateNode=Rh(S.type,S.pendingProps,Yc.current,ci.current,!1),bo=S,mc=!0,$a=cg(Q)),Q=S.pendingProps.children,b!==null||ui?Hi(b,S,Q,j):S.child=Jc(S,null,Q,j),Gp(b,S),S.child;case 5:return b===null&&ui&&(lC(S.type,S.pendingProps,ci.current),(Y=Q=$a)&&(Q=Pv(Q,S.type,S.pendingProps,mc),Q!==null?(S.stateNode=Q,bo=S,$a=cg(Q),mc=!1,Y=!0):Y=!1),Y||fe(S)),ae(S),Y=S.type,ie=S.pendingProps,xe=b!==null?b.memoizedProps:null,Q=ie.children,Ih(Y,ie)?Q=null:xe!==null&&Ih(Y,xe)&&(S.flags|=32),S.memoizedState!==null&&(Y=bs(b,S,Ad,null,null,j),xa?tr._currentValue=Y:tr._currentValue2=Y),Gp(b,S),Hi(b,S,Q,j),S.child;case 6:return b===null&&ui&&(cC(S.pendingProps,ci.current),(b=j=$a)&&(j=EA(j,S.pendingProps,mc),j!==null?(S.stateNode=j,bo=S,$a=null,b=!0):b=!1),b||fe(S)),null;case 13:return rm(b,S,j);case 4:return te(S,S.stateNode.containerInfo),Q=S.pendingProps,b===null?S.child=Jc(S,null,Q,j):Hi(b,S,Q,j),S.child;case 11:return iv(b,S,S.type,S.pendingProps,j);case 7:return Hi(b,S,S.pendingProps,j),S.child;case 8:return Hi(b,S,S.pendingProps.children,j),S.child;case 12:return Hi(b,S,S.pendingProps.children,j),S.child;case 10:return Q=S.pendingProps,Lc(S,S.type,Q.value),Hi(b,S,Q.children,j),S.child;case 9:return Y=S.type._context,Q=S.pendingProps.children,bd(S),Y=ka(Y),Q=Q(Y),S.flags|=1,Hi(b,S,Q,j),S.child;case 14:return sv(b,S,S.type,S.pendingProps,j);case 15:return nm(b,S,S.type,S.pendingProps,j);case 19:return eA(b,S,j);case 22:return av(b,S,j);case 24:return bd(S),Q=ka(Ci),b===null?(Y=Cd(),Y===null&&(Y=jr,ie=Vp(),Y.pooledCache=ie,ie.refCount++,ie!==null&&(Y.pooledCacheLanes|=j),Y=ie),S.memoizedState={parent:Q,cache:Y},Zt(S),Lc(S,Ci,Y)):((b.lanes&j)!==0&&(Bt(b,S),gn(S,null,null,j),Wt()),Y=b.memoizedState,ie=S.memoizedState,Y.parent!==Q?(Y={parent:Q,cache:Q},S.memoizedState=Y,S.lanes===0&&(S.memoizedState=S.updateQueue.baseState=Y),Lc(S,Ci,Q)):(Q=ie.cache,Lc(S,Ci,Q),Q!==Y.cache&&tA(S,[Ci],j,!0))),Hi(b,S,S.pendingProps.children,j),S.child;case 29:throw S.pendingProps}throw Error(i(156,S.tag))}function Lc(b,S,j){xa?(E(ul,S._currentValue),S._currentValue=j):(E(ul,S._currentValue2),S._currentValue2=j)}function tl(b){var S=ul.current;xa?b._currentValue=S:b._currentValue2=S,x(ul)}function uv(b,S,j){for(;b!==null;){var Q=b.alternate;if((b.childLanes&S)!==S?(b.childLanes|=S,Q!==null&&(Q.childLanes|=S)):Q!==null&&(Q.childLanes&S)!==S&&(Q.childLanes|=S),b===j)break;b=b.return}}function tA(b,S,j,Q){var Y=b.child;for(Y!==null&&(Y.return=b);Y!==null;){var ie=Y.dependencies;if(ie!==null){var xe=Y.child;ie=ie.firstContext;e:for(;ie!==null;){var Re=ie;ie=Y;for(var Ze=0;Ze<S.length;Ze++)if(Re.context===S[Ze]){ie.lanes|=j,Re=ie.alternate,Re!==null&&(Re.lanes|=j),uv(ie.return,j,b),Q||(xe=null);break e}ie=Re.next}}else if(Y.tag===18){if(xe=Y.return,xe===null)throw Error(i(341));xe.lanes|=j,ie=xe.alternate,ie!==null&&(ie.lanes|=j),uv(xe,j,b),xe=null}else xe=Y.child;if(xe!==null)xe.return=Y;else for(xe=Y;xe!==null;){if(xe===b){xe=null;break}if(Y=xe.sibling,Y!==null){Y.return=xe.return,xe=Y;break}xe=xe.return}Y=xe}}function fh(b,S,j,Q){b=null;for(var Y=S,ie=!1;Y!==null;){if(!ie){if((Y.flags&524288)!==0)ie=!0;else if((Y.flags&262144)!==0)break}if(Y.tag===10){var xe=Y.alternate;if(xe===null)throw Error(i(387));if(xe=xe.memoizedProps,xe!==null){var Re=Y.type;Qo(Y.pendingProps.value,xe.value)||(b!==null?b.push(Re):b=[Re])}}else if(Y===Wf.current){if(xe=Y.alternate,xe===null)throw Error(i(387));xe.memoizedState.memoizedState!==Y.memoizedState.memoizedState&&(b!==null?b.push(tr):b=[tr])}Y=Y.return}b!==null&&tA(S,b,j,Q),S.flags|=262144}function Cu(b){for(b=b.firstContext;b!==null;){var S=b.context;if(!Qo(xa?S._currentValue:S._currentValue2,b.memoizedValue))return!0;b=b.next}return!1}function bd(b){$h=b,di=null,b=b.dependencies,b!==null&&(b.firstContext=null)}function ka(b){return sm($h,b)}function im(b,S){return $h===null&&bd(b),sm(b,S)}function sm(b,S){var j=xa?S._currentValue:S._currentValue2;if(S={context:S,memoizedValue:j,next:null},di===null){if(b===null)throw Error(i(308));di=S,b.dependencies={lanes:0,firstContext:S},b.flags|=524288}else di=di.next=S;return j}function Vp(){return{controller:new pC,data:new Map,refCount:0}}function Wp(b){b.refCount--,b.refCount===0&&kd(Yf,function(){b.controller.abort()})}function Cd(){var b=Nd.current;return b!==null?b:jr.pooledCache}function uo(b,S){S===null?E(Nd,Nd.current):E(Nd,S.pool)}function nA(){var b=Cd();return b===null?null:{parent:xa?Ci._currentValue:Ci._currentValue2,pool:b}}function Ha(b){b.flags|=4}function rA(b,S){if(b!==null&&b.child===S.child)return!1;if((S.flags&16)!==0)return!0;for(b=S.child;b!==null;){if((b.flags&13878)!==0||(b.subtreeFlags&13878)!==0)return!0;b=b.sibling}return!1}function am(b,S,j,Q){if(ba)for(j=S.child;j!==null;){if(j.tag===5||j.tag===6)Tu(b,j.stateNode);else if(!(j.tag===4||za&&j.tag===27)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===S)break;for(;j.sibling===null;){if(j.return===null||j.return===S)return;j=j.return}j.sibling.return=j.return,j=j.sibling}else if(mo)for(var Y=S.child;Y!==null;){if(Y.tag===5){var ie=Y.stateNode;j&&Q&&(ie=Mv(ie,Y.type,Y.memoizedProps)),Tu(b,ie)}else if(Y.tag===6)ie=Y.stateNode,j&&Q&&(ie=sl(ie,Y.memoizedProps)),Tu(b,ie);else if(Y.tag!==4){if(Y.tag===22&&Y.memoizedState!==null)ie=Y.child,ie!==null&&(ie.return=Y),am(b,Y,!0,!0);else if(Y.child!==null){Y.child.return=Y,Y=Y.child;continue}}if(Y===S)break;for(;Y.sibling===null;){if(Y.return===null||Y.return===S)return;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}}function Kp(b,S,j,Q){if(mo)for(var Y=S.child;Y!==null;){if(Y.tag===5){var ie=Y.stateNode;j&&Q&&(ie=Mv(ie,Y.type,Y.memoizedProps)),Qf(b,ie)}else if(Y.tag===6)ie=Y.stateNode,j&&Q&&(ie=sl(ie,Y.memoizedProps)),Qf(b,ie);else if(Y.tag!==4){if(Y.tag===22&&Y.memoizedState!==null)ie=Y.child,ie!==null&&(ie.return=Y),Kp(b,Y,!(Y.memoizedProps!==null&&Y.memoizedProps.mode==="manual"),!0);else if(Y.child!==null){Y.child.return=Y,Y=Y.child;continue}}if(Y===S)break;for(;Y.sibling===null;){if(Y.return===null||Y.return===S)return;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}}function qp(b,S){if(mo&&rA(b,S)){b=S.stateNode;var j=b.containerInfo,Q=xA();Kp(Q,S,!1,!1),b.pendingChildren=Q,Ha(S),Bv(j,Q)}}function dv(b,S,j,Q){if(ba)b.memoizedProps!==Q&&Ha(S);else if(mo){var Y=b.stateNode,ie=b.memoizedProps;if((b=rA(b,S))||ie!==Q){var xe=ci.current;ie=Iv(Y,j,ie,Q,!b,null),ie===Y?S.stateNode=Y:(dc(ie,j,Q,xe)&&Ha(S),S.stateNode=ie,b?am(ie,S,!1,!1):Ha(S))}else S.stateNode=Y}}function Yp(b,S,j){if(iC(S,j)){if(b.flags|=16777216,!Nl(S,j))if(Cs())b.flags|=8192;else throw Rd=Oh,PA}else b.flags&=-16777217}function hv(b,S){if(Ov(S)){if(b.flags|=16777216,!TA(S))if(Cs())b.flags|=8192;else throw Rd=Oh,PA}else b.flags&=-16777217}function Eu(b,S){S!==null&&(b.flags|=4),b.flags&16384&&(S=b.tag!==22?k():536870912,b.lanes|=S,ju|=S)}function If(b,S){if(!ui)switch(b.tailMode){case"hidden":S=b.tail;for(var j=null;S!==null;)S.alternate!==null&&(j=S),S=S.sibling;j===null?b.tail=null:j.sibling=null;break;case"collapsed":j=b.tail;for(var Q=null;j!==null;)j.alternate!==null&&(Q=j),j=j.sibling;Q===null?S||b.tail===null?b.tail=null:b.tail.sibling=null:Q.sibling=null}}function us(b){var S=b.alternate!==null&&b.alternate.child===b.child,j=0,Q=0;if(S)for(var Y=b.child;Y!==null;)j|=Y.lanes|Y.childLanes,Q|=Y.subtreeFlags&31457280,Q|=Y.flags&31457280,Y.return=b,Y=Y.sibling;else for(Y=b.child;Y!==null;)j|=Y.lanes|Y.childLanes,Q|=Y.subtreeFlags,Q|=Y.flags,Y.return=b,Y=Y.sibling;return b.subtreeFlags|=Q,b.childLanes=j,S}function iA(b,S,j){var Q=S.pendingProps;switch(ee(S),S.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return us(S),null;case 1:return us(S),null;case 3:return j=S.stateNode,Q=null,b!==null&&(Q=b.memoizedState.cache),S.memoizedState.cache!==Q&&(S.flags|=2048),tl(Ci),oe(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(b===null||b.child===null)&&(_e(S)?Ha(S):b===null||b.memoizedState.isDehydrated&&(S.flags&256)===0||(S.flags|=1024,jl!==null&&(Sd(jl),jl=null))),qp(b,S),us(S),null;case 26:if(ol){j=S.type;var Y=S.memoizedState;return b===null?(Ha(S),Y!==null?(us(S),hv(S,Y)):(us(S),Yp(S,j,Q))):Y?Y!==b.memoizedState?(Ha(S),us(S),hv(S,Y)):(us(S),S.flags&=-16777217):(ba?b.memoizedProps!==Q&&Ha(S):dv(b,S,j,Q),us(S),Yp(S,j,Q)),null}case 27:if(za){if(se(S),j=Yc.current,Y=S.type,b!==null&&S.stateNode!=null)ba?b.memoizedProps!==Q&&Ha(S):dv(b,S,Y,Q);else{if(!Q){if(S.stateNode===null)throw Error(i(166));return us(S),null}b=ci.current,_e(S)?Ee(S,b):(b=Rh(Y,Q,j,b,!0),S.stateNode=b,Ha(S))}return us(S),null}case 5:if(se(S),j=S.type,b!==null&&S.stateNode!=null)dv(b,S,j,Q);else{if(!Q){if(S.stateNode===null)throw Error(i(166));return us(S),null}b=ci.current,_e(S)?Ee(S,b):(Y=hA(j,Q,Yc.current,b,S),am(Y,S,!1,!1),S.stateNode=Y,dc(Y,j,Q,b)&&Ha(S))}return us(S),Yp(S,S.type,S.pendingProps),null;case 6:if(b&&S.stateNode!=null)j=b.memoizedProps,ba?j!==Q&&Ha(S):mo&&(j!==Q?(S.stateNode=pm(Q,Yc.current,ci.current,S),Ha(S)):S.stateNode=b.stateNode);else{if(typeof Q!="string"&&S.stateNode===null)throw Error(i(166));if(b=Yc.current,j=ci.current,_e(S)){if(!Gs)throw Error(i(176));if(b=S.stateNode,j=S.memoizedProps,Q=null,Y=bo,Y!==null)switch(Y.tag){case 27:case 5:Q=Y.memoizedProps}SA(b,j,S,Q)||fe(S)}else S.stateNode=pm(Q,b,j,S)}return us(S),null;case 13:if(Q=S.memoizedState,b===null||b.memoizedState!==null&&b.memoizedState.dehydrated!==null){if(Y=_e(S),Q!==null&&Q.dehydrated!==null){if(b===null){if(!Y)throw Error(i(318));if(!Gs)throw Error(i(344));if(Y=S.memoizedState,Y=Y!==null?Y.dehydrated:null,!Y)throw Error(i(317));Ll(Y,S)}else Ce(),(S.flags&128)===0&&(S.memoizedState=null),S.flags|=4;us(S),Y=!1}else jl!==null&&(Sd(jl),jl=null),Y=!0;if(!Y)return S.flags&256?(qi(S),S):(qi(S),null)}if(qi(S),(S.flags&128)!==0)return S.lanes=j,S;if(j=Q!==null,b=b!==null&&b.memoizedState!==null,j){Q=S.child,Y=null,Q.alternate!==null&&Q.alternate.memoizedState!==null&&Q.alternate.memoizedState.cachePool!==null&&(Y=Q.alternate.memoizedState.cachePool.pool);var ie=null;Q.memoizedState!==null&&Q.memoizedState.cachePool!==null&&(ie=Q.memoizedState.cachePool.pool),ie!==Y&&(Q.flags|=2048)}return j!==b&&j&&(S.child.flags|=8192),Eu(S,S.updateQueue),us(S),null;case 4:return oe(),qp(b,S),b===null&&Wa(S.stateNode.containerInfo),us(S),null;case 10:return tl(S.type),us(S),null;case 19:if(x(ta),Y=S.memoizedState,Y===null)return us(S),null;if(Q=(S.flags&128)!==0,ie=Y.rendering,ie===null)if(Q)If(Y,!1);else{if(ai!==0||b!==null&&(b.flags&128)!==0)for(b=S.child;b!==null;){if(ie=Nr(b),ie!==null){for(S.flags|=128,If(Y,!1),b=ie.updateQueue,S.updateQueue=b,Eu(S,b),S.subtreeFlags=0,b=j,j=S.child;j!==null;)Bd(j,b),j=j.sibling;return E(ta,ta.current&1|2),S.child}b=b.sibling}Y.tail!==null&&hs()>ws&&(S.flags|=128,Q=!0,If(Y,!1),S.lanes=4194304)}else{if(!Q)if(b=Nr(ie),b!==null){if(S.flags|=128,Q=!0,b=b.updateQueue,S.updateQueue=b,Eu(S,b),If(Y,!0),Y.tail===null&&Y.tailMode==="hidden"&&!ie.alternate&&!ui)return us(S),null}else 2*hs()-Y.renderingStartTime>ws&&j!==536870912&&(S.flags|=128,Q=!0,If(Y,!1),S.lanes=4194304);Y.isBackwards?(ie.sibling=S.child,S.child=ie):(b=Y.last,b!==null?b.sibling=ie:S.child=ie,Y.last=ie)}return Y.tail!==null?(S=Y.tail,Y.rendering=S,Y.tail=S.sibling,Y.renderingStartTime=hs(),S.sibling=null,b=ta.current,E(ta,Q?b&1|2:b&1),S):(us(S),null);case 22:case 23:return qi(S),cn(),Q=S.memoizedState!==null,b!==null?b.memoizedState!==null!==Q&&(S.flags|=8192):Q&&(S.flags|=8192),Q?(j&536870912)!==0&&(S.flags&128)===0&&(us(S),S.subtreeFlags&6&&(S.flags|=8192)):us(S),j=S.updateQueue,j!==null&&Eu(S,j.retryQueue),j=null,b!==null&&b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(j=b.memoizedState.cachePool.pool),Q=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(Q=S.memoizedState.cachePool.pool),Q!==j&&(S.flags|=2048),b!==null&&x(Nd),null;case 24:return j=null,b!==null&&(j=b.memoizedState.cache),S.memoizedState.cache!==j&&(S.flags|=2048),tl(Ci),us(S),null;case 25:return null}throw Error(i(156,S.tag))}function fv(b,S){switch(ee(S),S.tag){case 1:return b=S.flags,b&65536?(S.flags=b&-65537|128,S):null;case 3:return tl(Ci),oe(),b=S.flags,(b&65536)!==0&&(b&128)===0?(S.flags=b&-65537|128,S):null;case 26:case 27:case 5:return se(S),null;case 13:if(qi(S),b=S.memoizedState,b!==null&&b.dehydrated!==null){if(S.alternate===null)throw Error(i(340));Ce()}return b=S.flags,b&65536?(S.flags=b&-65537|128,S):null;case 19:return x(ta),null;case 4:return oe(),null;case 10:return tl(S.type),null;case 22:case 23:return qi(S),cn(),b!==null&&x(Nd),b=S.flags,b&65536?(S.flags=b&-65537|128,S):null;case 24:return tl(Ci),null;case 25:return null;default:return null}}function Su(b,S){switch(ee(S),S.tag){case 3:tl(Ci),oe();break;case 26:case 27:case 5:se(S);break;case 4:oe();break;case 13:qi(S);break;case 19:x(ta);break;case 10:tl(S.type);break;case 22:case 23:qi(S),cn(),b!==null&&x(Nd);break;case 24:tl(Ci)}}function ph(b,S){try{var j=S.updateQueue,Q=j!==null?j.lastEffect:null;if(Q!==null){var Y=Q.next;j=Y;do{if((j.tag&b)===b){Q=void 0;var ie=j.create,xe=j.inst;Q=ie(),xe.destroy=Q}j=j.next}while(j!==Y)}}catch(Re){Kr(S,S.return,Re)}}function gh(b,S,j){try{var Q=S.updateQueue,Y=Q!==null?Q.lastEffect:null;if(Y!==null){var ie=Y.next;Q=ie;do{if((Q.tag&b)===b){var xe=Q.inst,Re=xe.destroy;if(Re!==void 0){xe.destroy=void 0,Y=S;var Ze=j;try{Re()}catch(Mt){Kr(Y,Ze,Mt)}}}Q=Q.next}while(Q!==ie)}}catch(Mt){Kr(S,S.return,Mt)}}function Zb(b){var S=b.updateQueue;if(S!==null){var j=b.stateNode;try{Ht(S,j)}catch(Q){Kr(b,b.return,Q)}}}function eC(b,S,j){j.props=tc(b.type,b.memoizedProps),j.state=b.memoizedState;try{j.componentWillUnmount()}catch(Q){Kr(b,S,Q)}}function rc(b,S){try{var j=b.ref;if(j!==null){var Q=b.stateNode;switch(b.tag){case 26:case 27:case 5:var Y=sg(Q);break;default:Y=Q}typeof j=="function"?b.refCleanup=j(Y):j.current=Y}}catch(ie){Kr(b,S,ie)}}function Zr(b,S){var j=b.ref,Q=b.refCleanup;if(j!==null)if(typeof Q=="function")try{Q()}catch(Y){Kr(b,S,Y)}finally{b.refCleanup=null,b=b.alternate,b!=null&&(b.refCleanup=null)}else if(typeof j=="function")try{j(null)}catch(Y){Kr(b,S,Y)}else j.current=null}function Bf(b){var S=b.type,j=b.memoizedProps,Q=b.stateNode;try{sS(Q,S,j,b)}catch(Y){Kr(b,b.return,Y)}}function pv(b,S,j){try{yA(b.stateNode,b.type,j,S,b)}catch(Q){Kr(b,b.return,Q)}}function gv(b){return b.tag===5||b.tag===3||(ol?b.tag===26:!1)||(za?b.tag===27:!1)||b.tag===4}function sA(b){e:for(;;){for(;b.sibling===null;){if(b.return===null||gv(b.return))return null;b=b.return}for(b.sibling.return=b.return,b=b.sibling;b.tag!==5&&b.tag!==6&&(!za||b.tag!==27)&&b.tag!==18;){if(b.flags&2||b.child===null||b.tag===4)continue e;b.child.return=b,b=b.child}if(!(b.flags&2))return b.stateNode}}function aA(b,S,j){var Q=b.tag;if(Q===5||Q===6)b=b.stateNode,S?wv(j,b,S):Sv(j,b);else if(!(Q===4||za&&Q===27)&&(b=b.child,b!==null))for(aA(b,S,j),b=b.sibling;b!==null;)aA(b,S,j),b=b.sibling}function Xp(b,S,j){var Q=b.tag;if(Q===5||Q===6)b=b.stateNode,S?vA(j,b,S):AA(j,b);else if(!(Q===4||za&&Q===27)&&(b=b.child,b!==null))for(Xp(b,S,j),b=b.sibling;b!==null;)Xp(b,S,j),b=b.sibling}function Tf(b,S,j){b=b.containerInfo;try{Tv(b,j)}catch(Q){Kr(S,S.return,Q)}}function Ve(b,S){for(uc(b.containerInfo),Rs=S;Rs!==null;)if(b=Rs,S=b.child,(b.subtreeFlags&1028)!==0&&S!==null)S.return=b,Rs=S;else for(;Rs!==null;){b=Rs;var j=b.alternate;switch(S=b.flags,b.tag){case 0:break;case 11:case 15:break;case 1:if((S&1024)!==0&&j!==null){S=void 0;var Q=b,Y=j.memoizedProps;j=j.memoizedState;var ie=Q.stateNode;try{var xe=tc(Q.type,Y,Q.elementType===Q.type);S=ie.getSnapshotBeforeUpdate(xe,j),ie.__reactInternalSnapshotBeforeUpdate=S}catch(Re){Kr(Q,Q.return,Re)}}break;case 3:(S&1024)!==0&&ba&&_r(b.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((S&1024)!==0)throw Error(i(163))}if(S=b.sibling,S!==null){S.return=b.return,Rs=S;break}Rs=b.return}return xe=Xf,Xf=!1,xe}function Et(b,S,j){var Q=j.flags;switch(j.tag){case 0:case 11:case 15:wu(b,j),Q&4&&ph(5,j);break;case 1:if(wu(b,j),Q&4)if(b=j.stateNode,S===null)try{b.componentDidMount()}catch(Re){Kr(j,j.return,Re)}else{var Y=tc(j.type,S.memoizedProps);S=S.memoizedState;try{b.componentDidUpdate(Y,S,b.__reactInternalSnapshotBeforeUpdate)}catch(Re){Kr(j,j.return,Re)}}Q&64&&Zb(j),Q&512&&rc(j,j.return);break;case 3:if(wu(b,j),Q&64&&(Q=j.updateQueue,Q!==null)){if(b=null,j.child!==null)switch(j.child.tag){case 27:case 5:b=sg(j.child.stateNode);break;case 1:b=j.child.stateNode}try{Ht(Q,b)}catch(Re){Kr(j,j.return,Re)}}break;case 26:if(ol){wu(b,j),Q&512&&rc(j,j.return);break}case 27:case 5:wu(b,j),S===null&&Q&4&&Bf(j),Q&512&&rc(j,j.return);break;case 12:wu(b,j);break;case 13:wu(b,j),Q&4&&Fr(b,j);break;case 22:if(Y=j.memoizedState!==null||_a,!Y){S=S!==null&&S.memoizedState!==null||Es;var ie=_a,xe=Es;_a=Y,(Es=S)&&!xe?jc(b,j,(j.subtreeFlags&8772)!==0):wu(b,j),_a=ie,Es=xe}Q&512&&(j.memoizedProps.mode==="manual"?rc(j,j.return):Zr(j,j.return));break;default:wu(b,j)}}function gt(b){var S=b.alternate;S!==null&&(b.alternate=null,gt(S)),b.child=null,b.deletions=null,b.sibling=null,b.tag===5&&(S=b.stateNode,S!==null&&gm(S)),b.stateNode=null,b.return=null,b.dependencies=null,b.memoizedProps=null,b.memoizedState=null,b.pendingProps=null,b.stateNode=null,b.updateQueue=null}function on(b,S,j){for(j=j.child;j!==null;)sr(b,S,j),j=j.sibling}function sr(b,S,j){if(xo&&typeof xo.onCommitFiberUnmount=="function")try{xo.onCommitFiberUnmount(ll,j)}catch{}switch(j.tag){case 26:if(ol){Es||Zr(j,S),on(b,S,j),j.memoizedState?yo(j.memoizedState):j.stateNode&&jv(j.stateNode);break}case 27:if(za){Es||Zr(j,S);var Q=qs,Y=dl;qs=j.stateNode,on(b,S,j),$v(j.stateNode),qs=Q,dl=Y;break}case 5:Es||Zr(j,S);case 6:if(ba){if(Q=qs,Y=dl,qs=null,on(b,S,j),qs=Q,dl=Y,qs!==null)if(dl)try{Vs(qs,j.stateNode)}catch(ie){Kr(j,S,ie)}else try{Ao(qs,j.stateNode)}catch(ie){Kr(j,S,ie)}}else on(b,S,j);break;case 18:ba&&qs!==null&&(dl?xm(qs,j.stateNode):Lv(qs,j.stateNode));break;case 4:ba?(Q=qs,Y=dl,qs=j.stateNode.containerInfo,dl=!0,on(b,S,j),qs=Q,dl=Y):(mo&&Tf(j.stateNode,j,xA()),on(b,S,j));break;case 0:case 11:case 14:case 15:Es||gh(2,j,S),Es||gh(4,j,S),on(b,S,j);break;case 1:Es||(Zr(j,S),Q=j.stateNode,typeof Q.componentWillUnmount=="function"&&eC(j,S,Q)),on(b,S,j);break;case 21:on(b,S,j);break;case 22:Es||Zr(j,S),Es=(Q=Es)||j.memoizedState!==null,on(b,S,j),Es=Q;break;default:on(b,S,j)}}function Fr(b,S){if(Gs&&S.memoizedState===null&&(b=S.alternate,b!==null&&(b=b.memoizedState,b!==null&&(b=b.dehydrated,b!==null))))try{vm(b)}catch(j){Kr(S,S.return,j)}}function ms(b){switch(b.tag){case 13:case 19:var S=b.stateNode;return S===null&&(S=b.stateNode=new fg),S;case 22:return b=b.stateNode,S=b._retryCache,S===null&&(S=b._retryCache=new fg),S;default:throw Error(i(435,b.tag))}}function yi(b,S){var j=ms(b);S.forEach(function(Q){var Y=xh.bind(null,b,Q);j.has(Q)||(j.add(Q),Q.then(Y,Y))})}function Ga(b,S){var j=S.deletions;if(j!==null)for(var Q=0;Q<j.length;Q++){var Y=j[Q],ie=b,xe=S;if(ba){var Re=xe;e:for(;Re!==null;){switch(Re.tag){case 27:case 5:qs=Re.stateNode,dl=!1;break e;case 3:qs=Re.stateNode.containerInfo,dl=!0;break e;case 4:qs=Re.stateNode.containerInfo,dl=!0;break e}Re=Re.return}if(qs===null)throw Error(i(160));sr(ie,xe,Y),qs=null,dl=!1}else sr(ie,xe,Y);ie=Y.alternate,ie!==null&&(ie.return=null),Y.return=null}if(S.subtreeFlags&13878)for(S=S.child;S!==null;)mh(S,b),S=S.sibling}function mh(b,S){var j=b.alternate,Q=b.flags;switch(b.tag){case 0:case 11:case 14:case 15:Ga(S,b),ds(b),Q&4&&(gh(3,b,b.return),ph(3,b),gh(5,b,b.return));break;case 1:Ga(S,b),ds(b),Q&512&&(Es||j===null||Zr(j,j.return)),Q&64&&_a&&(b=b.updateQueue,b!==null&&(Q=b.callbacks,Q!==null&&(j=b.shared.hiddenCallbacks,b.shared.hiddenCallbacks=j===null?Q:j.concat(Q))));break;case 26:if(ol){var Y=Ho;Ga(S,b),ds(b),Q&512&&(Es||j===null||Zr(j,j.return)),Q&4&&(Q=j!==null?j.memoizedState:null,S=b.memoizedState,j===null?S===null?b.stateNode===null?b.stateNode=pc(Y,b.type,b.memoizedProps,b):Fv(Y,b.type,b.stateNode):b.stateNode=IA(Y,S,b.memoizedProps):Q!==S?(Q===null?j.stateNode!==null&&jv(j.stateNode):yo(Q),S===null?Fv(Y,b.type,b.stateNode):IA(Y,S,b.memoizedProps)):S===null&&b.stateNode!==null&&pv(b,b.memoizedProps,j.memoizedProps));break}case 27:if(za&&Q&4&&b.alternate===null){Y=b.stateNode;var ie=b.memoizedProps;try{Cm(Y),aS(b.type,ie,Y,b)}catch(Jt){Kr(b,b.return,Jt)}}case 5:if(Ga(S,b),ds(b),Q&512&&(Es||j===null||Zr(j,j.return)),ba){if(b.flags&32){S=b.stateNode;try{$f(S)}catch(Jt){Kr(b,b.return,Jt)}}Q&4&&b.stateNode!=null&&(S=b.memoizedProps,pv(b,S,j!==null?j.memoizedProps:S)),Q&1024&&(Fu=!0)}break;case 6:if(Ga(S,b),ds(b),Q&4&&ba){if(b.stateNode===null)throw Error(i(162));Q=b.memoizedProps,j=j!==null?j.memoizedProps:Q,S=b.stateNode;try{Am(S,j,Q)}catch(Jt){Kr(b,b.return,Jt)}}break;case 3:if(ol?(Dh(),Y=Ho,Ho=_A(S.containerInfo),Ga(S,b),Ho=Y):Ga(S,b),ds(b),Q&4){if(ba&&Gs&&j!==null&&j.memoizedState.isDehydrated)try{Kc(S.containerInfo)}catch(Jt){Kr(b,b.return,Jt)}if(mo){Q=S.containerInfo,j=S.pendingChildren;try{Tv(Q,j)}catch(Jt){Kr(b,b.return,Jt)}}}Fu&&(Fu=!1,Jp(b));break;case 4:ol?(j=Ho,Ho=_A(b.stateNode.containerInfo),Ga(S,b),ds(b),Ho=j):(Ga(S,b),ds(b)),Q&4&&mo&&Tf(b.stateNode,b,b.stateNode.pendingChildren);break;case 12:Ga(S,b),ds(b);break;case 13:Ga(S,b),ds(b),b.child.flags&8192&&b.memoizedState!==null!=(j!==null&&j.memoizedState!==null)&&(Ou=hs()),Q&4&&(Q=b.updateQueue,Q!==null&&(b.updateQueue=null,yi(b,Q)));break;case 22:Q&512&&(Es||j===null||Zr(j,j.return)),Y=b.memoizedState!==null;var xe=j!==null&&j.memoizedState!==null,Re=_a,Ze=Es;if(_a=Re||Y,Es=Ze||xe,Ga(S,b),Es=Ze,_a=Re,ds(b),S=b.stateNode,S._current=b,S._visibility&=-3,S._visibility|=S._pendingVisibility&2,Q&8192&&(S._visibility=Y?S._visibility&-2:S._visibility|1,Y&&(S=_a||Es,j===null||xe||S||Fc(b)),ba&&(b.memoizedProps===null||b.memoizedProps.mode!=="manual"))){e:if(j=null,ba)for(S=b;;){if(S.tag===5||ol&&S.tag===26||za&&S.tag===27){if(j===null){xe=j=S;try{ie=xe.stateNode,Y?og(ie):_v(xe.stateNode,xe.memoizedProps)}catch(Jt){Kr(xe,xe.return,Jt)}}}else if(S.tag===6){if(j===null){xe=S;try{var Mt=xe.stateNode;Y?lg(Mt):Wc(Mt,xe.memoizedProps)}catch(Jt){Kr(xe,xe.return,Jt)}}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===b)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===b)break e;for(;S.sibling===null;){if(S.return===null||S.return===b)break e;j===S&&(j=null),S=S.return}j===S&&(j=null),S.sibling.return=S.return,S=S.sibling}}Q&4&&(Q=b.updateQueue,Q!==null&&(j=Q.retryQueue,j!==null&&(Q.retryQueue=null,yi(b,j))));break;case 19:Ga(S,b),ds(b),Q&4&&(Q=b.updateQueue,Q!==null&&(b.updateQueue=null,yi(b,Q)));break;case 21:break;default:Ga(S,b),ds(b)}}function ds(b){var S=b.flags;if(S&2){try{if(ba&&(!za||b.tag!==27)){e:{for(var j=b.return;j!==null;){if(gv(j)){var Q=j;break e}j=j.return}throw Error(i(160))}switch(Q.tag){case 27:if(za){var Y=Q.stateNode,ie=sA(b);Xp(b,ie,Y);break}case 5:var xe=Q.stateNode;Q.flags&32&&($f(xe),Q.flags&=-33);var Re=sA(b);Xp(b,Re,xe);break;case 3:case 4:var Ze=Q.stateNode.containerInfo,Mt=sA(b);aA(b,Mt,Ze);break;default:throw Error(i(161))}}}catch(Jt){Kr(b,b.return,Jt)}b.flags&=-3}S&4096&&(b.flags&=-4097)}function Jp(b){if(b.subtreeFlags&1024)for(b=b.child;b!==null;){var S=b;Jp(S),S.tag===5&&S.flags&1024&&Gi(S.stateNode),b=b.sibling}}function wu(b,S){if(S.subtreeFlags&8772)for(S=S.child;S!==null;)Et(b,S.alternate,S),S=S.sibling}function Fc(b){for(b=b.child;b!==null;){var S=b;switch(S.tag){case 0:case 11:case 14:case 15:gh(4,S,S.return),Fc(S);break;case 1:Zr(S,S.return);var j=S.stateNode;typeof j.componentWillUnmount=="function"&&eC(S,S.return,j),Fc(S);break;case 26:case 27:case 5:Zr(S,S.return),Fc(S);break;case 22:Zr(S,S.return),S.memoizedState===null&&Fc(S);break;default:Fc(S)}b=b.sibling}}function jc(b,S,j){for(j=j&&(S.subtreeFlags&8772)!==0,S=S.child;S!==null;){var Q=S.alternate,Y=b,ie=S,xe=ie.flags;switch(ie.tag){case 0:case 11:case 15:jc(Y,ie,j),ph(4,ie);break;case 1:if(jc(Y,ie,j),Q=ie,Y=Q.stateNode,typeof Y.componentDidMount=="function")try{Y.componentDidMount()}catch(Mt){Kr(Q,Q.return,Mt)}if(Q=ie,Y=Q.updateQueue,Y!==null){var Re=Q.stateNode;try{var Ze=Y.shared.hiddenCallbacks;if(Ze!==null)for(Y.shared.hiddenCallbacks=null,Y=0;Y<Ze.length;Y++)Ne(Ze[Y],Re)}catch(Mt){Kr(Q,Q.return,Mt)}}j&&xe&64&&Zb(ie),rc(ie,ie.return);break;case 26:case 27:case 5:jc(Y,ie,j),j&&Q===null&&xe&4&&Bf(ie),rc(ie,ie.return);break;case 12:jc(Y,ie,j);break;case 13:jc(Y,ie,j),j&&xe&4&&Fr(Y,ie);break;case 22:ie.memoizedState===null&&jc(Y,ie,j),rc(ie,ie.return);break;default:jc(Y,ie,j)}S=S.sibling}}function Zp(b,S){var j=null;b!==null&&b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(j=b.memoizedState.cachePool.pool),b=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(b=S.memoizedState.cachePool.pool),b!==j&&(b!=null&&b.refCount++,j!=null&&Wp(j))}function gi(b,S){b=null,S.alternate!==null&&(b=S.alternate.memoizedState.cache),S=S.memoizedState.cache,S!==b&&(S.refCount++,b!=null&&Wp(b))}function Ed(b,S,j,Q){if(S.subtreeFlags&10256)for(S=S.child;S!==null;)om(b,S,j,Q),S=S.sibling}function om(b,S,j,Q){var Y=S.flags;switch(S.tag){case 0:case 11:case 15:Ed(b,S,j,Q),Y&2048&&ph(9,S);break;case 3:Ed(b,S,j,Q),Y&2048&&(b=null,S.alternate!==null&&(b=S.alternate.memoizedState.cache),S=S.memoizedState.cache,S!==b&&(S.refCount++,b!=null&&Wp(b)));break;case 12:if(Y&2048){Ed(b,S,j,Q),b=S.stateNode;try{var ie=S.memoizedProps,xe=ie.id,Re=ie.onPostCommit;typeof Re=="function"&&Re(xe,S.alternate===null?"mount":"update",b.passiveEffectDuration,-0)}catch(Ze){Kr(S,S.return,Ze)}}else Ed(b,S,j,Q);break;case 23:break;case 22:ie=S.stateNode,S.memoizedState!==null?ie._visibility&4?Ed(b,S,j,Q):Ah(b,S):ie._visibility&4?Ed(b,S,j,Q):(ie._visibility|=4,Aa(b,S,j,Q,(S.subtreeFlags&10256)!==0)),Y&2048&&Zp(S.alternate,S);break;case 24:Ed(b,S,j,Q),Y&2048&&gi(S.alternate,S);break;default:Ed(b,S,j,Q)}}function Aa(b,S,j,Q,Y){for(Y=Y&&(S.subtreeFlags&10256)!==0,S=S.child;S!==null;){var ie=b,xe=S,Re=j,Ze=Q,Mt=xe.flags;switch(xe.tag){case 0:case 11:case 15:Aa(ie,xe,Re,Ze,Y),ph(8,xe);break;case 23:break;case 22:var Jt=xe.stateNode;xe.memoizedState!==null?Jt._visibility&4?Aa(ie,xe,Re,Ze,Y):Ah(ie,xe):(Jt._visibility|=4,Aa(ie,xe,Re,Ze,Y)),Y&&Mt&2048&&Zp(xe.alternate,xe);break;case 24:Aa(ie,xe,Re,Ze,Y),Y&&Mt&2048&&gi(xe.alternate,xe);break;default:Aa(ie,xe,Re,Ze,Y)}S=S.sibling}}function Ah(b,S){if(S.subtreeFlags&10256)for(S=S.child;S!==null;){var j=b,Q=S,Y=Q.flags;switch(Q.tag){case 22:Ah(j,Q),Y&2048&&Zp(Q.alternate,Q);break;case 24:Ah(j,Q),Y&2048&&gi(Q.alternate,Q);break;default:Ah(j,Q)}S=S.sibling}}function Na(b){if(b.subtreeFlags&Jf)for(b=b.child;b!==null;)Mf(b),b=b.sibling}function Mf(b){switch(b.tag){case 26:Na(b),b.flags&Jf&&(b.memoizedState!==null?zv(Ho,b.memoizedState,b.memoizedProps):Ts(b.type,b.memoizedProps));break;case 5:Na(b),b.flags&Jf&&Ts(b.type,b.memoizedProps);break;case 3:case 4:if(ol){var S=Ho;Ho=_A(b.stateNode.containerInfo),Na(b),Ho=S}else Na(b);break;case 22:b.memoizedState===null&&(S=b.alternate,S!==null&&S.memoizedState!==null?(S=Jf,Jf=16777216,Na(b),Jf=S):Na(b));break;default:Na(b)}}function Df(b){var S=b.alternate;if(S!==null&&(b=S.child,b!==null)){S.child=null;do S=b.sibling,b.sibling=null,b=S;while(b!==null)}}function Oo(b){var S=b.deletions;if((b.flags&16)!==0){if(S!==null)for(var j=0;j<S.length;j++){var Q=S[j];Rs=Q,Oc(Q,b)}Df(b)}if(b.subtreeFlags&10256)for(b=b.child;b!==null;)yh(b),b=b.sibling}function yh(b){switch(b.tag){case 0:case 11:case 15:Oo(b),b.flags&2048&&gh(9,b,b.return);break;case 3:Oo(b);break;case 12:Oo(b);break;case 22:var S=b.stateNode;b.memoizedState!==null&&S._visibility&4&&(b.return===null||b.return.tag!==13)?(S._visibility&=-5,Rf(b)):Oo(b);break;default:Oo(b)}}function Rf(b){var S=b.deletions;if((b.flags&16)!==0){if(S!==null)for(var j=0;j<S.length;j++){var Q=S[j];Rs=Q,Oc(Q,b)}Df(b)}for(b=b.child;b!==null;){switch(S=b,S.tag){case 0:case 11:case 15:gh(8,S,S.return),Rf(S);break;case 22:j=S.stateNode,j._visibility&4&&(j._visibility&=-5,Rf(S));break;default:Rf(S)}b=b.sibling}}function Oc(b,S){for(;Rs!==null;){var j=Rs;switch(j.tag){case 0:case 11:case 15:gh(8,j,S);break;case 23:case 22:if(j.memoizedState!==null&&j.memoizedState.cachePool!==null){var Q=j.memoizedState.cachePool.pool;Q!=null&&Q.refCount++}break;case 24:Wp(j.memoizedState.cache)}if(Q=j.child,Q!==null)Q.return=j,Rs=Q;else e:for(j=b;Rs!==null;){Q=Rs;var Y=Q.sibling,ie=Q.return;if(gt(Q),Q===j){Rs=null;break e}if(Y!==null){Y.return=ie,Rs=Y;break e}Rs=ie}}}function lm(b){var S=fA(b);if(S!=null){if(typeof S.memoizedProps["data-testname"]!="string")throw Error(i(364));return S}if(b=zf(b),b===null)throw Error(i(362));return b.stateNode.current}function Pf(b,S){var j=b.tag;switch(S.$$typeof){case Dm:if(b.type===S.value)return!0;break;case FA:e:{for(S=S.value,b=[b,0],j=0;j<b.length;){var Q=b[j++],Y=Q.tag,ie=b[j++],xe=S[ie];if(Y!==5&&Y!==26&&Y!==27||!fc(Q)){for(;xe!=null&&Pf(Q,xe);)ie++,xe=S[ie];if(ie===S.length){S=!0;break e}else for(Q=Q.child;Q!==null;)b.push(Q,ie),Q=Q.sibling}}S=!1}return S;case jA:if((j===5||j===26||j===27)&&iS(b.stateNode,S.value))return!0;break;case Bi:if((j===5||j===6||j===26||j===27)&&(b=ag(b),b!==null&&0<=b.indexOf(S.value)))return!0;break;case si:if((j===5||j===26||j===27)&&(b=b.memoizedProps["data-testname"],typeof b=="string"&&b.toLowerCase()===S.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function zc(b){switch(b.$$typeof){case Dm:return"<"+(a(b.value)||"Unknown")+">";case FA:return":has("+(zc(b)||"")+")";case jA:return'[role="'+b.value+'"]';case Bi:return'"'+b.value+'"';case si:return'[data-testname="'+b.value+'"]';default:throw Error(i(365))}}function mv(b,S){var j=[];b=[b,0];for(var Q=0;Q<b.length;){var Y=b[Q++],ie=Y.tag,xe=b[Q++],Re=S[xe];if(ie!==5&&ie!==26&&ie!==27||!fc(Y)){for(;Re!=null&&Pf(Y,Re);)xe++,Re=S[xe];if(xe===S.length)j.push(Y);else for(Y=Y.child;Y!==null;)b.push(Y,xe),Y=Y.sibling}}return j}function ya(b,S){if(!Mu)throw Error(i(363));b=lm(b),b=mv(b,S),S=[],b=Array.from(b);for(var j=0;j<b.length;){var Q=b[j++],Y=Q.tag;if(Y===5||Y===26||Y===27)fc(Q)||S.push(Q.stateNode);else for(Q=Q.child;Q!==null;)b.push(Q),Q=Q.sibling}return S}function Qs(){if((Ln&2)!==0&&Rr!==0)return Rr&-Rr;if(Hn.T!==null){var b=cl;return b!==0?b:Qe()}return hc()}function Ml(){hl===0&&(hl=(Rr&536870912)===0||ui?R():536870912);var b=$l.current;return b!==null&&(b.flags|=32),hl}function ho(b,S,j){(b===jr&&Wi===2||b.cancelPendingCommit!==null)&&($c(b,0),Dl(b,Rr,hl,!1)),F(b,j),((Ln&2)===0||b!==jr)&&(b===jr&&((Ln&2)===0&&(eu|=j),ai===4&&Dl(b,Rr,hl,!1)),ht(b))}function cm(b,S,j){if((Ln&6)!==0)throw Error(i(327));var Q=!j&&(S&60)===0&&(S&b.expiredLanes)===0||T(b,S),Y=Q?ic(b,S):Qc(b,S,!0),ie=Q;do{if(Y===0){Ul&&!Q&&Dl(b,S,0,!1);break}else if(Y===6)Dl(b,S,0,!Ei);else{if(j=b.current.alternate,ie&&!um(j)){Y=Qc(b,S,!1),ie=!1;continue}if(Y===2){if(ie=S,b.errorRecoveryDisabledLanes&ie)var xe=0;else xe=b.pendingLanes&-536870913,xe=xe!==0?xe:xe&536870912?536870912:0;if(xe!==0){S=xe;e:{var Re=b;Y=pg;var Ze=Gs&&Re.current.memoizedState.isDehydrated;if(Ze&&($c(Re,xe).flags|=256),xe=Qc(Re,xe,!1),xe!==2){if(Ld&&!Ze){Re.errorRecoveryDisabledLanes|=ie,eu|=ie,Y=4;break e}ie=wo,wo=Y,ie!==null&&Sd(ie)}Y=xe}if(ie=!1,Y!==2)continue}}if(Y===1){$c(b,0),Dl(b,S,0,!0);break}e:{switch(Q=b,Y){case 0:case 1:throw Error(i(345));case 4:if((S&4194176)===S){Dl(Q,S,hl,!Ei);break e}break;case 2:wo=null;break;case 3:case 5:break;default:throw Error(i(329))}if(Q.finishedWork=j,Q.finishedLanes=S,(S&62914560)===S&&(ie=Ou+300-hs(),10<ie)){if(Dl(Q,S,hl,!Ei),D(Q,0)!==0)break e;Q.timeoutHandle=va(kf.bind(null,Q,j,wo,tu,gg,S,hl,eu,ju,Ei,2,-0,0),ie);break e}kf(Q,j,wo,tu,gg,S,hl,eu,ju,Ei,0,-0,0)}}break}while(!0);ht(b)}function Sd(b){wo===null?wo=b:wo.push.apply(wo,b)}function kf(b,S,j,Q,Y,ie,xe,Re,Ze,Mt,Jt,hn,An){var ur=S.subtreeFlags;if((ur&8192||(ur&16785408)===16785408)&&(il(),Mf(S),S=pA(),S!==null)){b.cancelPendingCommit=S(vi.bind(null,b,j,Q,Y,xe,Re,Ze,1,hn,An)),Dl(b,ie,xe,!Mt);return}vi(b,j,Q,Y,xe,Re,Ze,Jt,hn,An)}function um(b){for(var S=b;;){var j=S.tag;if((j===0||j===11||j===15)&&S.flags&16384&&(j=S.updateQueue,j!==null&&(j=j.stores,j!==null)))for(var Q=0;Q<j.length;Q++){var Y=j[Q],ie=Y.getSnapshot;Y=Y.value;try{if(!Qo(ie(),Y))return!1}catch{return!1}}if(j=S.child,S.subtreeFlags&16384&&j!==null)j.return=S,S=j;else{if(S===b)break;for(;S.sibling===null;){if(S.return===null||S.return===b)return!0;S=S.return}S.sibling.return=S.return,S=S.sibling}}return!0}function Dl(b,S,j,Q){S&=~So,S&=~eu,b.suspendedLanes|=S,b.pingedLanes&=~S,Q&&(b.warmLanes|=S),Q=b.expirationTimes;for(var Y=S;0<Y;){var ie=31-vo(Y),xe=1<<ie;Q[ie]=-1,Y&=~xe}j!==0&&G(b,j,S)}function Av(){return(Ln&6)===0?(Ue(0),!1):!0}function zo(){if(Ar!==null){if(Wi===0)var b=Ar.return;else b=Ar,di=$h=null,ec(b),Xc=null,zl=0,b=Ar;for(;b!==null;)Su(b.alternate,b),b=b.return;Ar=null}}function $c(b,S){b.finishedWork=null,b.finishedLanes=0;var j=b.timeoutHandle;j!==Bh&&(b.timeoutHandle=Bh,Of(j)),j=b.cancelPendingCommit,j!==null&&(b.cancelPendingCommit=null,j()),zo(),jr=b,Ar=j=fo(b.current,null),Rr=S,Wi=0,Ss=null,Ei=!1,Ul=T(b,S),Ld=!1,ju=hl=So=eu=Hl=ai=0,wo=pg=null,gg=!1,(S&8)!==0&&(S|=S&32);var Q=b.entangledLanes;if(Q!==0)for(b=b.entanglements,Q&=S;0<Q;){var Y=31-vo(Q),ie=1<<Y;S|=b[Y],Q&=~ie}return Zc=S,Me(),j}function Nf(b,S){Tr=null,Hn.H=ii,S===xi?(S=ln(),Wi=3):S===PA?(S=ln(),Wi=4):Wi=S===fC?8:S!==null&&typeof S=="object"&&typeof S.then=="function"?6:1,Ss=S,Ar===null&&(ai=1,q0(b,X(S,b.current)))}function Cs(){var b=$l.current;return b===null?!0:(Rr&4194176)===Rr?Ql===null:(Rr&62914560)===Rr||(Rr&536870912)!==0?b===Ql:!1}function Us(){var b=Hn.H;return Hn.H=ii,b===null?ii:b}function Rl(){var b=Hn.A;return Hn.A=LA,b}function nl(){ai=4,Ei||(Rr&4194176)!==Rr&&$l.current!==null||(Ul=!0),(Hl&134217727)===0&&(eu&134217727)===0||jr===null||Dl(jr,Rr,hl,!1)}function Qc(b,S,j){var Q=Ln;Ln|=2;var Y=Us(),ie=Rl();(jr!==b||Rr!==S)&&(tu=null,$c(b,S)),S=!1;var xe=ai;e:do try{if(Wi!==0&&Ar!==null){var Re=Ar,Ze=Ss;switch(Wi){case 8:zo(),xe=6;break e;case 3:case 2:case 6:$l.current===null&&(S=!0);var Mt=Wi;if(Wi=0,Ss=null,sc(b,Re,Ze,Mt),j&&Ul){xe=0;break e}break;default:Mt=Wi,Wi=0,Ss=null,sc(b,Re,Ze,Mt)}}_u(),xe=ai;break}catch(Jt){Nf(b,Jt)}while(!0);return S&&b.shellSuspendCounter++,di=$h=null,Ln=Q,Hn.H=Y,Hn.A=ie,Ar===null&&(jr=null,Rr=0,Me()),xe}function _u(){for(;Ar!==null;)dm(Ar)}function ic(b,S){var j=Ln;Ln|=2;var Q=Us(),Y=Rl();jr!==b||Rr!==S?(tu=null,ws=hs()+500,$c(b,S)):Ul=T(b,S);e:do try{if(Wi!==0&&Ar!==null){S=Ar;var ie=Ss;t:switch(Wi){case 1:Wi=0,Ss=null,sc(b,S,ie,1);break;case 2:if($t(ie)){Wi=0,Ss=null,wd(S);break}S=function(){Wi===2&&jr===b&&(Wi=7),ht(b)},ie.then(S,S);break e;case 3:Wi=7;break e;case 4:Wi=5;break e;case 7:$t(ie)?(Wi=0,Ss=null,wd(S)):(Wi=0,Ss=null,sc(b,S,ie,7));break;case 5:var xe=null;switch(Ar.tag){case 26:xe=Ar.memoizedState;case 5:case 27:var Re=Ar,Ze=Re.type,Mt=Re.pendingProps;if(xe?TA(xe):Nl(Ze,Mt)){Wi=0,Ss=null;var Jt=Re.sibling;if(Jt!==null)Ar=Jt;else{var hn=Re.return;hn!==null?(Ar=hn,_d(hn)):Ar=null}break t}}Wi=0,Ss=null,sc(b,S,ie,5);break;case 6:Wi=0,Ss=null,sc(b,S,ie,6);break;case 8:zo(),ai=6;break e;default:throw Error(i(462))}}Pl();break}catch(An){Nf(b,An)}while(!0);return di=$h=null,Hn.H=Q,Hn.A=Y,Ln=j,Ar!==null?0:(jr=null,Rr=0,Me(),ai)}function Pl(){for(;Ar!==null&&!dC();)dm(Ar)}function dm(b){var S=cv(b.alternate,b,Zc);b.memoizedProps=b.pendingProps,S===null?_d(b):Ar=S}function wd(b){var S=b,j=S.alternate;switch(S.tag){case 15:case 0:S=Xb(j,S,S.pendingProps,S.type,void 0,Rr);break;case 11:S=Xb(j,S,S.pendingProps,S.type.render,S.ref,Rr);break;case 5:ec(S);default:Su(j,S),S=Ar=Bd(S,Zc),S=cv(j,S,Zc)}b.memoizedProps=b.pendingProps,S===null?_d(b):Ar=S}function sc(b,S,j,Q){di=$h=null,ec(S),Xc=null,zl=0;var Y=S.return;try{if(Y0(b,Y,S,j,Rr)){ai=1,q0(b,X(j,b.current)),Ar=null;return}}catch(ie){if(Y!==null)throw Ar=Y,ie;ai=1,q0(b,X(j,b.current)),Ar=null;return}S.flags&32768?(ui||Q===1?b=!0:Ul||(Rr&536870912)!==0?b=!1:(Ei=b=!0,(Q===2||Q===3||Q===6)&&(Q=$l.current,Q!==null&&Q.tag===13&&(Q.flags|=16384))),Hs(S,b)):_d(S)}function _d(b){var S=b;do{if((S.flags&32768)!==0){Hs(S,Ei);return}b=S.return;var j=iA(S.alternate,S,Zc);if(j!==null){Ar=j;return}if(S=S.sibling,S!==null){Ar=S;return}Ar=S=b}while(S!==null);ai===0&&(ai=5)}function Hs(b,S){do{var j=fv(b.alternate,b);if(j!==null){j.flags&=32767,Ar=j;return}if(j=b.return,j!==null&&(j.flags|=32768,j.subtreeFlags=0,j.deletions=null),!S&&(b=b.sibling,b!==null)){Ar=b;return}Ar=b=j}while(b!==null);ai=6,Ar=null}function vi(b,S,j,Q,Y,ie,xe,Re,Ze,Mt){var Jt=Hn.T,hn=Ca();try{ja(2),Hn.T=null,ei(b,S,j,Q,hn,Y,ie,xe,Re,Ze,Mt)}finally{Hn.T=Jt,ja(hn)}}function ei(b,S,j,Q,Y,ie,xe,Re){do La();while(Fd!==null);if((Ln&6)!==0)throw Error(i(327));var Ze=b.finishedWork;if(Q=b.finishedLanes,Ze===null)return null;if(b.finishedWork=null,b.finishedLanes=0,Ze===b.current)throw Error(i(177));b.callbackNode=null,b.callbackPriority=0,b.cancelPendingCommit=null;var Mt=Ze.lanes|Ze.childLanes;if(Mt|=dg,z(b,Q,Mt,ie,xe,Re),b===jr&&(Ar=jr=null,Rr=0),(Ze.subtreeFlags&10256)===0&&(Ze.flags&10256)===0||vc||(vc=!0,OA=Mt,ep=j,bh(DA,function(){return La(),null})),j=(Ze.flags&15990)!==0,(Ze.subtreeFlags&15990)!==0||j?(j=Hn.T,Hn.T=null,ie=Ca(),ja(2),xe=Ln,Ln|=4,Ve(b,Ze),mh(Ze,b),Bu(b.containerInfo),b.current=Ze,Et(b,Ze.alternate,Ze),Qv(),Ln=xe,ja(ie),Hn.T=j):b.current=Ze,vc?(vc=!1,Fd=b,Zf=Q):Id(b,Mt),Mt=b.pendingLanes,Mt===0&&(Gl=null),O(Ze.stateNode),ht(b),S!==null)for(Y=b.onRecoverableError,Ze=0;Ze<S.length;Ze++)Mt=S[Ze],Y(Mt.value,{componentStack:Mt.stack});return(Zf&3)!==0&&La(),Mt=b.pendingLanes,(Q&4194218)!==0&&(Mt&42)!==0?b===Go?tp++:(tp=0,Go=b):tp=0,Ue(0),null}function Id(b,S){(b.pooledCacheLanes&=S)===0&&(S=b.pooledCache,S!=null&&(b.pooledCache=null,Wp(S)))}function La(){if(Fd!==null){var b=Fd,S=OA;OA=0;var j=q(Zf),Q=32>j?32:j;j=Hn.T;var Y=Ca();try{if(ja(Q),Hn.T=null,Fd===null)var ie=!1;else{Q=ep,ep=null;var xe=Fd,Re=Zf;if(Fd=null,Zf=0,(Ln&6)!==0)throw Error(i(331));var Ze=Ln;if(Ln|=4,yh(xe.current),om(xe,xe.current,Re,Q),Ln=Ze,Ue(0,!1),xo&&typeof xo.onPostCommitFiberRoot=="function")try{xo.onPostCommitFiberRoot(ll,xe)}catch{}ie=!0}return ie}finally{ja(Y),Hn.T=j,Id(b,S)}}return!1}function oA(b,S,j){S=X(j,S),S=wf(b.stateNode,S,2),b=pt(b,S,2),b!==null&&(F(b,2),ht(b))}function Kr(b,S,j){if(b.tag===3)oA(b,b,j);else for(;S!==null;){if(S.tag===3){oA(S,b,j);break}else if(S.tag===1){var Q=S.stateNode;if(typeof S.type.getDerivedStateFromError=="function"||typeof Q.componentDidCatch=="function"&&(Gl===null||!Gl.has(Q))){b=X(j,b),j=nc(2),Q=pt(S,j,2),Q!==null&&(Hp(j,Q,S,b),F(Q,2),ht(Q));break}}S=S.return}}function Lf(b,S,j){var Q=b.pingCache;if(Q===null){Q=b.pingCache=new qr;var Y=new Set;Q.set(S,Y)}else Y=Q.get(S),Y===void 0&&(Y=new Set,Q.set(S,Y));Y.has(j)||(Ld=!0,Y.add(j),b=eg.bind(null,b,S,j),S.then(b,b))}function eg(b,S,j){var Q=b.pingCache;Q!==null&&Q.delete(S),b.pingedLanes|=b.suspendedLanes&j,b.warmLanes&=~j,jr===b&&(Rr&j)===j&&(ai===4||ai===3&&(Rr&62914560)===Rr&&300>hs()-Ou?(Ln&2)===0&&$c(b,0):So|=j,ju===Rr&&(ju=0)),ht(b)}function vh(b,S){S===0&&(S=k()),b=qe(b,S),b!==null&&(F(b,S),ht(b))}function Ae(b){var S=b.memoizedState,j=0;S!==null&&(j=S.retryLane),vh(b,j)}function xh(b,S){var j=0;switch(b.tag){case 13:var Q=b.stateNode,Y=b.memoizedState;Y!==null&&(j=Y.retryLane);break;case 19:Q=b.stateNode;break;case 22:Q=b.stateNode._retryCache;break;default:throw Error(i(314))}Q!==null&&Q.delete(S),vh(b,j)}function bh(b,S){return Gf(b,S)}function rl(b,S,j,Q){this.tag=b,this.key=j,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=S,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Q,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(b){return b=b.prototype,!(!b||!b.isReactComponent)}function fo(b,S){var j=b.alternate;return j===null?(j=n(b.tag,S,b.key,b.mode),j.elementType=b.elementType,j.type=b.type,j.stateNode=b.stateNode,j.alternate=b,b.alternate=j):(j.pendingProps=S,j.type=b.type,j.flags=0,j.subtreeFlags=0,j.deletions=null),j.flags=b.flags&31457280,j.childLanes=b.childLanes,j.lanes=b.lanes,j.child=b.child,j.memoizedProps=b.memoizedProps,j.memoizedState=b.memoizedState,j.updateQueue=b.updateQueue,S=b.dependencies,j.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext},j.sibling=b.sibling,j.index=b.index,j.ref=b.ref,j.refCleanup=b.refCleanup,j}function Bd(b,S){b.flags&=31457282;var j=b.alternate;return j===null?(b.childLanes=0,b.lanes=S,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=j.childLanes,b.lanes=j.lanes,b.child=j.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=j.memoizedProps,b.memoizedState=j.memoizedState,b.updateQueue=j.updateQueue,b.type=j.type,S=j.dependencies,b.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext}),b}function ac(b,S,j,Q,Y,ie){var xe=0;if(Q=b,typeof b=="function")mr(b)&&(xe=1);else if(typeof b=="string")xe=ol&&za?wA(b,j,ci.current)?26:Uf(b)?27:5:ol?wA(b,j,ci.current)?26:5:za&&Uf(b)?27:5;else e:switch(b){case oc:return $o(j.children,Y,ie,S);case bv:xe=8,Y|=24;break;case Cv:return b=n(12,j,S,Y|2),b.elementType=Cv,b.lanes=ie,b;case cA:return b=n(13,j,S,Y),b.elementType=cA,b.lanes=ie,b;case Sh:return b=n(19,j,S,Y),b.elementType=Sh,b.lanes=ie,b;case hm:return lA(j,Y,ie,S);default:if(typeof b=="object"&&b!==null)switch(b.$$typeof){case lc:case Iu:xe=10;break e;case Eh:xe=9;break e;case ng:xe=11;break e;case rg:xe=14;break e;case cc:xe=16,Q=null;break e}xe=29,j=Error(i(130,b===null?"null":typeof b,"")),Q=null}return S=n(xe,j,S,Y),S.elementType=b,S.type=Q,S.lanes=ie,S}function $o(b,S,j,Q){return b=n(7,b,Q,S),b.lanes=j,b}function lA(b,S,j,Q){b=n(22,b,Q,S),b.elementType=hm,b.lanes=j;var Y={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var ie=Y._current;if(ie===null)throw Error(i(456));if((Y._pendingVisibility&2)===0){var xe=qe(ie,2);xe!==null&&(Y._pendingVisibility|=2,ho(xe,ie,2))}},attach:function(){var ie=Y._current;if(ie===null)throw Error(i(456));if((Y._pendingVisibility&2)!==0){var xe=qe(ie,2);xe!==null&&(Y._pendingVisibility&=-3,ho(xe,ie,2))}}};return b.stateNode=Y,b}function Ch(b,S,j){return b=n(6,b,null,S),b.lanes=j,b}function tg(b,S,j){return S=n(4,b.children!==null?b.children:[],b.key,S),S.lanes=j,S.stateNode={containerInfo:b.containerInfo,pendingChildren:null,implementation:b.implementation},S}function Ff(b,S,j,Q,Y,ie,xe,Re){this.tag=1,this.containerInfo=b,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Bh,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=L(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L(0),this.hiddenUpdates=L(null),this.identifierPrefix=Q,this.onUncaughtError=Y,this.onCaughtError=ie,this.onRecoverableError=xe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Re,this.incompleteTransitions=new Map}function Fa(b,S,j,Q,Y,ie,xe,Re,Ze,Mt,Jt,hn){return b=new Ff(b,S,j,xe,Re,Ze,Mt,hn),S=1,ie===!0&&(S|=24),ie=n(3,null,null,S),b.current=ie,ie.stateNode=b,S=Vp(),S.refCount++,b.pooledCache=S,S.refCount++,ie.memoizedState={element:Q,isDehydrated:j,cache:S},Zt(ie),b}function kl(b){return b?(b=Pu,b):Pu}function yv(b){var S=b._reactInternals;if(S===void 0)throw typeof b.render=="function"?Error(i(188)):(b=Object.keys(b).join(","),Error(i(268,b)));return b=p(S),b=b!==null?m(b):null,b===null?null:sg(b.stateNode)}function tC(b,S,j,Q,Y,ie){Y=kl(Y),Q.context===null?Q.context=Y:Q.pendingContext=Y,Q=at(S),Q.payload={element:j},ie=ie===void 0?null:ie,ie!==null&&(Q.callback=ie),j=pt(b,Q,S),j!==null&&(ho(j,b,S),Vt(j,b,S))}function nC(b,S){if(b=b.memoizedState,b!==null&&b.dehydrated!==null){var j=b.retryLane;b.retryLane=j!==0&&j<S?j:S}}function vv(b,S){nC(b,S),(b=b.alternate)&&nC(b,S)}var Nn={},Uc=DE(),Va=fnt(),jf=Object.assign,xv=Symbol.for("react.element"),Td=Symbol.for("react.transitional.element"),Hc=Symbol.for("react.portal"),oc=Symbol.for("react.fragment"),bv=Symbol.for("react.strict_mode"),Cv=Symbol.for("react.profiler"),lc=Symbol.for("react.provider"),Eh=Symbol.for("react.consumer"),Iu=Symbol.for("react.context"),ng=Symbol.for("react.forward_ref"),cA=Symbol.for("react.suspense"),Sh=Symbol.for("react.suspense_list"),rg=Symbol.for("react.memo"),cc=Symbol.for("react.lazy"),hm=Symbol.for("react.offscreen"),rC=Symbol.for("react.memo_cache_sentinel"),fm=Symbol.iterator,Gc=Symbol.for("react.client.reference"),Hn=Uc.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,uA,dA,wh=!1,po=Array.isArray,ig=e.rendererVersion,Vc=e.rendererPackageName,go=e.extraDevToolsConfig,sg=e.getPublicInstance,_h=e.getRootHostContext,Ev=e.getChildHostContext,uc=e.prepareForCommit,Bu=e.resetAfterCommit,hA=e.createInstance,Tu=e.appendInitialChild,dc=e.finalizeInitialChildren,Ih=e.shouldSetTextContent,pm=e.createTextInstance,va=e.scheduleTimeout,Of=e.cancelTimeout,Bh=e.noTimeout,xa=e.isPrimaryRenderer;e.warnsIfNotActing;var ba=e.supportsMutation,mo=e.supportsPersistence,Gs=e.supportsHydration,fA=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Wa=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var ja=e.setCurrentUpdatePriority,Ca=e.getCurrentUpdatePriority,hc=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Th=e.shouldAttemptEagerTransition,gm=e.detachDeletedInstance;e.requestPostPaintCallback;var iC=e.maySuspendCommit,Nl=e.preloadInstance,il=e.startSuspendingCommit,Ts=e.suspendInstance,pA=e.waitForCommitToBeReady,Oa=e.NotPendingTransition,tr=e.HostTransitionContext,Gi=e.resetFormInstance;e.bindToConsole;var Ms=e.supportsMicrotasks,mm=e.scheduleMicrotask,Mu=e.supportsTestSelectors,zf=e.findFiberRoot,gA=e.getBoundingRect,ag=e.getTextContent,fc=e.isHiddenSubtree,iS=e.matchAccessibilityRole,As=e.setFocusIfFocusable,mA=e.setupIntersectionObserver,AA=e.appendChild,Sv=e.appendChildToContainer,Am=e.commitTextUpdate,sS=e.commitMount,yA=e.commitUpdate,vA=e.insertBefore,wv=e.insertInContainerBefore,Ao=e.removeChild,Vs=e.removeChildFromContainer,$f=e.resetTextContent,og=e.hideInstance,lg=e.hideTextInstance,_v=e.unhideInstance,Wc=e.unhideTextInstance,_r=e.clearContainer,Iv=e.cloneInstance,xA=e.createContainerChildSet,Qf=e.appendChildToContainerChildSet,Bv=e.finalizeContainerChildren,Tv=e.replaceContainerChildren,Mv=e.cloneHiddenInstance,sl=e.cloneHiddenTextInstance,bA=e.isSuspenseInstancePending,Mh=e.isSuspenseInstanceFallback,CA=e.getSuspenseInstanceFallbackErrorDetails,sC=e.registerSuspenseInstanceRetry,Dv=e.canHydrateFormStateMarker,al=e.isFormStateMarkerMatching,Du=e.getNextHydratableSibling,cg=e.getFirstHydratableChild,Rv=e.getFirstHydratableChildWithinContainer,ym=e.getFirstHydratableChildWithinSuspenseInstance,Pv=e.canHydrateInstance,EA=e.canHydrateTextInstance,kv=e.canHydrateSuspenseInstance,Nv=e.hydrateInstance,SA=e.hydrateTextInstance,Ll=e.hydrateSuspenseInstance,aC=e.getNextHydratableInstanceAfterSuspenseInstance,Kc=e.commitHydratedContainer,vm=e.commitHydratedSuspenseInstance,Lv=e.clearSuspenseBoundary,xm=e.clearSuspenseBoundaryFromContainer,oC=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var lC=e.validateHydratableInstance,cC=e.validateHydratableTextInstance,ol=e.supportsResources,wA=e.isHostHoistableType,_A=e.getHoistableRoot,bm=e.getResource,IA=e.acquireResource,yo=e.releaseResource,pc=e.hydrateHoistable,Fv=e.mountHoistable,jv=e.unmountHoistable,BA=e.createHoistableInstance,Dh=e.prepareToCommitHoistables,Ov=e.mayResourceSuspendCommit,TA=e.preloadResource,zv=e.suspendResource,za=e.supportsSingletons,Rh=e.resolveSingletonInstance,Cm=e.clearSingleton,aS=e.acquireSingletonInstance,$v=e.releaseSingletonInstance,Uf=e.isHostSingletonType,Ph=[],Ru=-1,Pu={},vo=Math.clz32?Math.clz32:w,kh=Math.log,uC=Math.LN2,Hf=128,Nh=4194304,Gf=Va.unstable_scheduleCallback,Vf=Va.unstable_cancelCallback,dC=Va.unstable_shouldYield,Qv=Va.unstable_requestPaint,hs=Va.unstable_now,MA=Va.unstable_ImmediatePriority,Uv=Va.unstable_UserBlockingPriority,DA=Va.unstable_NormalPriority,Em=Va.unstable_IdlePriority,hC=Va.log,Hv=Va.unstable_setDisableYieldValue,ll=null,xo=null,Qo=typeof Object.is=="function"?Object.is:K,ug=new WeakMap,Vi=[],Yi=0,zn=null,Lh=0,Uo=[],Ea=0,qc=null,gc=1,Fl="",ci=A(null),Sm=A(null),Yc=A(null),Wf=A(null),bo=null,$a=null,ui=!1,jl=null,mc=!1,Ol=Error(i(519)),Xi=[],ku=0,dg=0,Fh=null,Kf=null,wm=!1,Md=!1,Ac=!1,Dd=0,_m=null,RA=0,cl=0,jh=null,Nu=!1,qf=!1,Im=Object.prototype.hasOwnProperty,xi=Error(i(460)),PA=Error(i(474)),Oh={then:function(){}},Rd=null,Xc=null,zl=0,Jc=Wn(!0),kA=Wn(!1),Sa=A(null),wa=A(0),$l=A(null),Ql=null,ta=A(0),Lu=0,Tr=null,bi=null,Ws=null,yc=!1,fs=!1,Pd=!1,Bm=0,Ds=0,hg=null,Gv=0,Tm=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},ii={readContext:ka,use:rt,useCallback:Yn,useContext:Yn,useEffect:Yn,useImperativeHandle:Yn,useLayoutEffect:Yn,useInsertionEffect:Yn,useMemo:Yn,useReducer:Yn,useRef:Yn,useState:Yn,useDebugValue:Yn,useDeferredValue:Yn,useTransition:Yn,useSyncExternalStore:Yn,useId:Yn};ii.useCacheRefresh=Yn,ii.useMemoCache=Yn,ii.useHostTransitionStatus=Yn,ii.useFormState=Yn,ii.useActionState=Yn,ii.useOptimistic=Yn;var na={readContext:ka,use:rt,useCallback:function(b,S){return Qi().memoizedState=[b,S===void 0?null:S],b},useContext:ka,useEffect:Qp,useImperativeHandle:function(b,S,j){j=j!=null?j.concat([b]):null,ma(4194308,4,Up.bind(null,S,b),j)},useLayoutEffect:function(b,S){return ma(4194308,4,b,S)},useInsertionEffect:function(b,S){ma(4,2,b,S)},useMemo:function(b,S){var j=Qi();S=S===void 0?null:S;var Q=b();if(Pd){H(!0);try{b()}finally{H(!1)}}return j.memoizedState=[Q,S],Q},useReducer:function(b,S,j){var Q=Qi();if(j!==void 0){var Y=j(S);if(Pd){H(!0);try{j(S)}finally{H(!1)}}}else Y=S;return Q.memoizedState=Q.baseState=Y,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:b,lastRenderedState:Y},Q.queue=b,b=b.dispatch=dh.bind(null,Tr,b),[Q.memoizedState,b]},useRef:function(b){var S=Qi();return b={current:b},S.memoizedState=b},useState:function(b){b=pe(b);var S=b.queue,j=K0.bind(null,Tr,S);return S.dispatch=j,[b.memoizedState,j]},useDebugValue:Jg,useDeferredValue:function(b,S){var j=Qi();return uh(j,b,S)},useTransition:function(){var b=pe(!1);return b=V0.bind(null,Tr,b.queue,!0,!1),Qi().memoizedState=b,[!1,b]},useSyncExternalStore:function(b,S,j){var Q=Tr,Y=Qi();if(ui){if(j===void 0)throw Error(i(407));j=j()}else{if(j=S(),jr===null)throw Error(i(349));(Rr&60)!==0||Bn(Q,S,j)}Y.memoizedState=j;var ie={value:j,getSnapshot:S};return Y.queue=ie,Qp(Sn.bind(null,Q,ie,b),[b]),Q.flags|=2048,Lr(9,En.bind(null,Q,ie,j,S),{destroy:void 0},null),j},useId:function(){var b=Qi(),S=jr.identifierPrefix;if(ui){var j=Fl,Q=gc;j=(Q&~(1<<32-vo(Q)-1)).toString(32)+j,S=":"+S+"R"+j,j=Bm++,0<j&&(S+="H"+j.toString(32)),S+=":"}else j=Gv++,S=":"+S+"r"+j.toString(32)+":";return b.memoizedState=S},useCacheRefresh:function(){return Qi().memoizedState=Zg.bind(null,Tr)}};na.useMemoCache=nt,na.useHostTransitionStatus=vd,na.useFormState=rn,na.useActionState=rn,na.useOptimistic=function(b){var S=Qi();S.memoizedState=S.baseState=b;var j={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return S.queue=j,S=ki.bind(null,Tr,!0,j),j.dispatch=S,[b,S]};var Co={readContext:ka,use:rt,useCallback:G0,useContext:ka,useEffect:yd,useImperativeHandle:yu,useInsertionEffect:Zy,useLayoutEffect:ev,useMemo:ch,useReducer:Kt,useRef:Ui,useState:function(){return Kt(We)},useDebugValue:Jg,useDeferredValue:function(b,S){var j=me();return tv(j,bi.memoizedState,b,S)},useTransition:function(){var b=Kt(We)[0],S=me().memoizedState;return[typeof b=="boolean"?b:Ge(b),S]},useSyncExternalStore:dn,useId:vu};Co.useCacheRefresh=W0,Co.useMemoCache=nt,Co.useHostTransitionStatus=vd,Co.useFormState=sn,Co.useActionState=sn,Co.useOptimistic=function(b,S){var j=me();return Te(j,bi,b,S)};var zh={readContext:ka,use:rt,useCallback:G0,useContext:ka,useEffect:yd,useImperativeHandle:yu,useInsertionEffect:Zy,useLayoutEffect:ev,useMemo:ch,useReducer:un,useRef:Ui,useState:function(){return un(We)},useDebugValue:Jg,useDeferredValue:function(b,S){var j=me();return bi===null?uh(j,b,S):tv(j,bi.memoizedState,b,S)},useTransition:function(){var b=un(We)[0],S=me().memoizedState;return[typeof b=="boolean"?b:Ge(b),S]},useSyncExternalStore:dn,useId:vu};zh.useCacheRefresh=W0,zh.useMemoCache=nt,zh.useHostTransitionStatus=vd,zh.useFormState=qn,zh.useActionState=qn,zh.useOptimistic=function(b,S){var j=me();return bi!==null?Te(j,bi,b,S):(j.baseState=b,[b,j.queue.dispatch])};var Mm={isMounted:function(b){return(b=b._reactInternals)?h(b)===b:!1},enqueueSetState:function(b,S,j){b=b._reactInternals;var Q=Qs(),Y=at(Q);Y.payload=S,j!=null&&(Y.callback=j),S=pt(b,Y,Q),S!==null&&(ho(S,b,Q),Vt(S,b,Q))},enqueueReplaceState:function(b,S,j){b=b._reactInternals;var Q=Qs(),Y=at(Q);Y.tag=1,Y.payload=S,j!=null&&(Y.callback=j),S=pt(b,Y,Q),S!==null&&(ho(S,b,Q),Vt(S,b,Q))},enqueueForceUpdate:function(b,S){b=b._reactInternals;var j=Qs(),Q=at(j);Q.tag=2,S!=null&&(Q.callback=S),S=pt(b,Q,j),S!==null&&(ho(S,b,j),Vt(S,b,j))}},Vv=typeof reportError=="function"?reportError:function(b){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var S=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof b=="object"&&b!==null&&typeof b.message=="string"?String(b.message):String(b),error:b});if(!window.dispatchEvent(S))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",b);return}console.error(b)},fC=Error(i(461)),Ks=!1,Eo={dehydrated:null,treeContext:null,retryLane:0},ul=A(null),$h=null,di=null,pC=typeof AbortController<"u"?AbortController:function(){var b=[],S=this.signal={aborted:!1,addEventListener:function(j,Q){b.push(Q)}};this.abort=function(){S.aborted=!0,b.forEach(function(j){return j()})}},kd=Va.unstable_scheduleCallback,Yf=Va.unstable_NormalPriority,Ci={$$typeof:Iu,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},NA=Hn.S;Hn.S=function(b,S){typeof S=="object"&&S!==null&&typeof S.then=="function"&&Ke(b,S),NA!==null&&NA(b,S)};var Nd=A(null),_a=!1,Es=!1,Fu=!1,fg=typeof WeakSet=="function"?WeakSet:Set,Rs=null,Xf=!1,qs=null,dl=!1,Ho=null,Jf=8192,LA={getCacheForType:function(b){var S=ka(Ci),j=S.data.get(b);return j===void 0&&(j=b(),S.data.set(b,j)),j}},Dm=0,FA=1,jA=2,si=3,Bi=4;if(typeof Symbol=="function"&&Symbol.for){var Mr=Symbol.for;Dm=Mr("selector.component"),FA=Mr("selector.has_pseudo_class"),jA=Mr("selector.role"),si=Mr("selector.test_id"),Bi=Mr("selector.text")}var qr=typeof WeakMap=="function"?WeakMap:Map,Ln=0,jr=null,Ar=null,Rr=0,Wi=0,Ss=null,Ei=!1,Ul=!1,Ld=!1,Zc=0,ai=0,Hl=0,eu=0,So=0,hl=0,ju=0,pg=null,wo=null,gg=!1,Ou=0,ws=1/0,tu=null,Gl=null,vc=!1,Fd=null,Zf=0,OA=0,ep=null,tp=0,Go=null;return Nn.attemptContinuousHydration=function(b){if(b.tag===13){var S=qe(b,67108864);S!==null&&ho(S,b,67108864),vv(b,67108864)}},Nn.attemptHydrationAtCurrentPriority=function(b){if(b.tag===13){var S=Qs(),j=qe(b,S);j!==null&&ho(j,b,S),vv(b,S)}},Nn.attemptSynchronousHydration=function(b){switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var S=B(b.pendingLanes);if(S!==0){for(b.pendingLanes|=2,b.entangledLanes|=2;S;){var j=1<<31-vo(S);b.entanglements[1]|=j,S&=~j}ht(b),(Ln&6)===0&&(ws=hs()+500,Ue(0))}}break;case 13:S=qe(b,2),S!==null&&ho(S,b,2),Av(),vv(b,2)}},Nn.batchedUpdates=function(b,S){return b(S)},Nn.createComponentSelector=function(b){return{$$typeof:Dm,value:b}},Nn.createContainer=function(b,S,j,Q,Y,ie,xe,Re,Ze,Mt){return Fa(b,S,!1,null,j,Q,ie,xe,Re,Ze,Mt,null)},Nn.createHasPseudoClassSelector=function(b){return{$$typeof:FA,value:b}},Nn.createHydrationContainer=function(b,S,j,Q,Y,ie,xe,Re,Ze,Mt,Jt,hn,An){return b=Fa(j,Q,!0,b,Y,ie,Re,Ze,Mt,Jt,hn,An),b.context=kl(null),j=b.current,Q=Qs(),Y=at(Q),Y.callback=S??null,pt(j,Y,Q),b.current.lanes=Q,F(b,Q),ht(b),b},Nn.createPortal=function(b,S,j){var Q=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hc,key:Q==null?null:""+Q,children:b,containerInfo:S,implementation:j}},Nn.createRoleSelector=function(b){return{$$typeof:jA,value:b}},Nn.createTestNameSelector=function(b){return{$$typeof:si,value:b}},Nn.createTextSelector=function(b){return{$$typeof:Bi,value:b}},Nn.defaultOnCaughtError=function(b){console.error(b)},Nn.defaultOnRecoverableError=function(b){Vv(b)},Nn.defaultOnUncaughtError=function(b){Vv(b)},Nn.deferredUpdates=function(b){var S=Hn.T,j=Ca();try{return ja(32),Hn.T=null,b()}finally{ja(j),Hn.T=S}},Nn.discreteUpdates=function(b,S,j,Q,Y){var ie=Hn.T,xe=Ca();try{return ja(2),Hn.T=null,b(S,j,Q,Y)}finally{ja(xe),Hn.T=ie,Ln===0&&(ws=hs()+500)}},Nn.findAllNodes=ya,Nn.findBoundingRects=function(b,S){if(!Mu)throw Error(i(363));S=ya(b,S),b=[];for(var j=0;j<S.length;j++)b.push(gA(S[j]));for(S=b.length-1;0<S;S--){j=b[S];for(var Q=j.x,Y=Q+j.width,ie=j.y,xe=ie+j.height,Re=S-1;0<=Re;Re--)if(S!==Re){var Ze=b[Re],Mt=Ze.x,Jt=Mt+Ze.width,hn=Ze.y,An=hn+Ze.height;if(Q>=Mt&&ie>=hn&&Y<=Jt&&xe<=An){b.splice(S,1);break}else if(Q!==Mt||j.width!==Ze.width||An<ie||hn>xe){if(!(ie!==hn||j.height!==Ze.height||Jt<Q||Mt>Y)){Mt>Q&&(Ze.width+=Mt-Q,Ze.x=Q),Jt<Y&&(Ze.width=Y-Mt),b.splice(S,1);break}}else{hn>ie&&(Ze.height+=hn-ie,Ze.y=ie),An<xe&&(Ze.height=xe-hn),b.splice(S,1);break}}}return b},Nn.findHostInstance=yv,Nn.findHostInstanceWithNoPortals=function(b){return b=p(b),b=b!==null?v(b):null,b===null?null:sg(b.stateNode)},Nn.findHostInstanceWithWarning=function(b){return yv(b)},Nn.flushPassiveEffects=La,Nn.flushSyncFromReconciler=function(b){var S=Ln;Ln|=1;var j=Hn.T,Q=Ca();try{if(ja(2),Hn.T=null,b)return b()}finally{ja(Q),Hn.T=j,Ln=S,(Ln&6)===0&&Ue(0)}},Nn.flushSyncWork=Av,Nn.focusWithin=function(b,S){if(!Mu)throw Error(i(363));for(b=lm(b),S=mv(b,S),S=Array.from(S),b=0;b<S.length;){var j=S[b++],Q=j.tag;if(!fc(j)){if((Q===5||Q===26||Q===27)&&As(j.stateNode))return!0;for(j=j.child;j!==null;)S.push(j),j=j.sibling}}return!1},Nn.getFindAllNodesFailureDescription=function(b,S){if(!Mu)throw Error(i(363));var j=0,Q=[];b=[lm(b),0];for(var Y=0;Y<b.length;){var ie=b[Y++],xe=ie.tag,Re=b[Y++],Ze=S[Re];if((xe!==5&&xe!==26&&xe!==27||!fc(ie))&&(Pf(ie,Ze)&&(Q.push(zc(Ze)),Re++,Re>j&&(j=Re)),Re<S.length))for(ie=ie.child;ie!==null;)b.push(ie,Re),ie=ie.sibling}if(j<S.length){for(b=[];j<S.length;j++)b.push(zc(S[j]));return`findAllNodes was able to match part of the selector:
  `+(Q.join(" > ")+`

No matching component was found for:
  `)+b.join(" > ")}return null},Nn.getPublicRootInstance=function(b){if(b=b.current,!b.child)return null;switch(b.child.tag){case 27:case 5:return sg(b.child.stateNode);default:return b.child.stateNode}},Nn.injectIntoDevTools=function(){var b={bundleType:0,version:ig,rendererPackageName:Vc,currentDispatcherRef:Hn,findFiberByHostInstance:fA,reconcilerVersion:"19.0.0"};if(go!==null&&(b.rendererConfig=go),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")b=!1;else{var S=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(S.isDisabled||!S.supportsFiber)b=!0;else{try{ll=S.inject(b),xo=S}catch{}b=!!S.checkDCE}}return b},Nn.isAlreadyRendering=function(){return!1},Nn.observeVisibleRects=function(b,S,j,Q){if(!Mu)throw Error(i(363));b=ya(b,S);var Y=mA(b,j,Q).disconnect;return{disconnect:function(){Y()}}},Nn.shouldError=function(){return null},Nn.shouldSuspend=function(){return!1},Nn.startHostTransition=function(b,S,j,Q){if(b.tag!==5)throw Error(i(476));var Y=nv(b).queue;V0(b,Y,S,Oa,j===null?r:function(){var ie=nv(b).next.queue;return pi(b,ie,{},Qs()),j(Q)})},Nn.updateContainer=function(b,S,j,Q){var Y=S.current,ie=Qs();return tC(Y,ie,b,S,j,Q),ie},Nn.updateContainerSync=function(b,S,j,Q){return S.tag===0&&La(),tC(S.current,2,b,S,j,Q),2},Nn},t.exports.default=t.exports,Object.defineProperty(t.exports,"__esModule",{value:!0})})(AN)),AN.exports}var BV;function gnt(){return BV||(BV=1,mN.exports=pnt()),mN.exports}var mnt=gnt();const Ant=qg(mnt),ynt=Ant;function vnt(t,e,n,r){throw new Error("Text instances are not yet supported. Please use a `<text>` component.")}function xnt(){}function bnt(){return!1}const ghe={};function Cnt(t){return t??ghe}function Ent(){return Uy.currentUpdatePriority}function Snt(){return null}function wnt(t){throw new Error("Not yet implemented.")}function _nt(t){return t}function Int(){return ghe}function Bnt(t){t instanceof hr?t.visible=!1:t instanceof Yb&&(t.enabled=!1)}function Tnt(t){throw new Error("Text instances are not yet supported. Please use a `<text>` component.")}function mhe(t){if(t instanceof Yb){const e=t.__pixireact.parent;if(e){const n=e.__pixireact.filters.indexOf(t);e.__pixireact.filters.splice(n,1),e.filters=e.__pixireact.filters}t.__pixireact.parent=null}}function Ahe(t,e,...n){}function TV(t,e,n){if(Ahe(),e instanceof hr){const r=e,i=e,s=n;r.parent===t&&t.removeChild(i);const a=t.getChildIndex(s);t.addChildAt(i,a)}else if(e instanceof Yb){const s=e.__pixireact.filters.indexOf(n);mhe(e),che(t,e,s)}}function Mnt(){return!1}function Dnt(){return!0}function Rnt(){return null}function Pnt(){}function knt(){}function MV(t,e){e instanceof Yb&&mhe(e),e.destroy()}function Nnt(t){}function Lnt(){}function Fnt(){}function jnt(){return-1.1}function Ont(){return null}function znt(){if(Uy.currentUpdatePriority)return Uy.currentUpdatePriority;const t=typeof self<"u"&&self||typeof window<"u"&&window;if(!t)return N1.DefaultEventPriority;switch(t.event?.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return N1.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return N1.ContinuousEventPriority;default:return N1.DefaultEventPriority}}function $nt(t){Uy.currentUpdatePriority=t}function Qnt(){return!1}function Unt(){return!1}function Hnt(){}function Gnt(){}function Vnt(){}function Wnt(t){t instanceof hr?t.visible=!0:t instanceof Yb&&(t.enabled=!0)}function Knt(t){throw new Error("Text instances are not yet supported. Please use a `<text>` component.")}function qnt(){return null}const Ynt={isPrimaryRenderer:!1,noTimeout:-1,NotPendingTransition:null,supportsHydration:!1,supportsMutation:!0,supportsPersistence:!1,warnsIfNotActing:!1,afterActiveInstanceBlur:Wtt,appendChild:gN,appendChildToContainer:gN,appendInitialChild:gN,beforeActiveInstanceBlur:Ktt,cancelTimeout:clearTimeout,clearContainer:qtt,commitUpdate:ant,createInstance:dnt,createTextInstance:vnt,hideTextInstance:Tnt,unhideTextInstance:Knt,detachDeletedInstance:xnt,finalizeInitialChildren:bnt,getChildHostContext:Cnt,getCurrentUpdatePriority:Ent,getInstanceFromNode:Snt,getInstanceFromScope:wnt,getPublicInstance:_nt,getRootHostContext:Int,hideInstance:Bnt,insertBefore:TV,insertInContainerBefore:TV,maySuspendCommit:Mnt,preloadInstance:Dnt,prepareForCommit:Rnt,preparePortalMount:Pnt,prepareScopeUpdate:knt,removeChild:MV,removeChildFromContainer:MV,requestPostPaintCallback:Nnt,resetAfterCommit:Lnt,resetFormInstance:Fnt,resolveEventTimeStamp:jnt,resolveEventType:Ont,resolveUpdatePriority:znt,scheduleTimeout:setTimeout,shouldAttemptEagerTransition:Qnt,setCurrentUpdatePriority:$nt,shouldSetTextContent:Unt,startSuspendingCommit:Hnt,suspendInstance:Gnt,trackSchedulerEvent:Vnt,unhideInstance:Wnt,waitForCommitToBeReady:qnt,rendererPackageName:"@pixi/react",rendererVersion:Vtt.version},MM=ynt(Ynt);MM.injectIntoDevTools();const ME=new Map;function Xnt(t,e={}){let n=ME.get(t),r=n?.applicationState??{isInitialised:!1,isInitialising:!1};const i=n?.internalState??{};n||(r.app=new Yj,i.rootContainer=lhe(r.app.stage));const s=n?.fiber??MM.createContainer(i.rootContainer,N1.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null);if(!n){let a;t instanceof HTMLCanvasElement&&(a=t),a||(a=document.createElement("canvas"),t.innerHTML="",t.appendChild(a)),i.canvas=a,n={applicationState:r,fiber:s,internalState:i,render:async(l,c)=>(!r.app.renderer&&!r.isInitialised&&!r.isInitialising&&(r.isInitialising=!0,await r.app.init({...c,canvas:a}),r.isInitialising=!1,r.isInitialised=!0,r={...r},e.onInit?.(r.app)),Object.entries(c).forEach(([u,h])=>{const f=u;ohe(c,f)||(r.app[f]=h)}),MM.updateContainer(d.jsx(Htt,{value:r,children:l}),s,null,()=>{}),r.app)},ME.set(a,n)}return n}function yhe(t){Uy.unmountQueue.delete(t);const e=t.fiber;e&&MM.updateContainer(null,e,null,()=>{t.applicationState.app&&t.applicationState.app.destroy(),ME.delete(t.internalState.canvas)})}function Jnt(){for(const t of Uy.unmountQueue)yhe(t)}function Znt(t){const e=ME.get(t);e&&(e.applicationState.isInitialised?yhe(e):Uy.unmountQueue.add(e))}function ert(t){const e=ME.get(t);e&&Uy.unmountQueue.delete(e)}const I3=typeof window<"u"&&(window.document?.createElement||window.navigator?.product==="ReactNative")?C.useLayoutEffect:C.useEffect,trt={...bn.defaultTextStyle},nrt=C.forwardRef(function(e,n){const{children:r,className:i,defaultTextStyle:s,extensions:a,onInit:o,resizeTo:l,...c}=e,u=OYe(),h=C.useRef(null),f=C.useRef(null),p=C.useRef(new Set);C.useImperativeHandle(n,()=>({getApplication(){return h.current},getCanvas(){return f.current}}));const m=C.useCallback(()=>{const A=h.current;A&&(l?"current"in l?l.current instanceof HTMLElement&&(A.resizeTo=l.current):A.resizeTo=l:A.resizeTo=void 0)},[l]),v=C.useCallback(A=>{Jnt(),h.current=A,m(),o?.(A)},[o]);return I3(()=>{if(a){const A=[...a],x=p.current;for(const E of x.values()){const w=A.indexOf(E);w===-1&&(ha.remove(E),x.delete(E)),A.splice(w,1)}for(const E of A)ha.add(E),x.add(E)}},[a]),I3(()=>{const A=f.current;if(A){let x=ME.get(A);x||(x=Xnt(A,{onInit:v})),x.render(d.jsx(u,{children:r}),c)}},[c,r,v,l]),I3(()=>{m()},[l]),I3(()=>{s?Object.assign(bn.defaultTextStyle,s):Object.assign(bn.defaultTextStyle,trt)},[s]),C.useEffect(()=>{const A=f.current;if(A)return ert(A),()=>{Znt(A)}},[]),d.jsx("canvas",{ref:f,className:i})}),rrt=C.forwardRef(function(e,n){return d.jsx(Iue,{children:d.jsx(nrt,{ref:n,...e})})});function vhe(t){Object.assign(d8,t)}function Ef(){const t=C.useContext(aO);return Ahe(t.app instanceof Yj,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider"),t}function mn(t){C.useMemo(()=>{vhe(t)},[t])}var irt=(()=>{var t=import.meta.url;return(function(e){e=e||{};var n;n||(n=typeof e<"u"?e:{});var r,i;n.ready=new Promise(function(he,pe){r=he,i=pe});var s=Object.assign({},n),a="";typeof document<"u"&&document.currentScript&&(a=document.currentScript.src),t&&(a=t),a.indexOf("blob:")!==0?a=a.substr(0,a.replace(/[?#].*/,"").lastIndexOf("/")+1):a="";var o=n.print||console.log.bind(console),l=n.printErr||console.warn.bind(console);Object.assign(n,s),s=null;var c;n.wasmBinary&&(c=n.wasmBinary),n.noExitRuntime,typeof WebAssembly!="object"&&V("no native wasm support detected");var u,h=!1;function f(he,pe,Te){Te=pe+Te;for(var Le="";!(pe>=Te);){var Fe=he[pe++];if(!Fe)break;if(Fe&128){var ct=he[pe++]&63;if((Fe&224)==192)Le+=String.fromCharCode((Fe&31)<<6|ct);else{var vt=he[pe++]&63;Fe=(Fe&240)==224?(Fe&15)<<12|ct<<6|vt:(Fe&7)<<18|ct<<12|vt<<6|he[pe++]&63,65536>Fe?Le+=String.fromCharCode(Fe):(Fe-=65536,Le+=String.fromCharCode(55296|Fe>>10,56320|Fe&1023))}}else Le+=String.fromCharCode(Fe)}return Le}var p,m,v,A,x,E,w,B,D;function T(){var he=u.buffer;p=he,n.HEAP8=m=new Int8Array(he),n.HEAP16=A=new Int16Array(he),n.HEAP32=E=new Int32Array(he),n.HEAPU8=v=new Uint8Array(he),n.HEAPU16=x=new Uint16Array(he),n.HEAPU32=w=new Uint32Array(he),n.HEAPF32=B=new Float32Array(he),n.HEAPF64=D=new Float64Array(he)}var M,R=[],k=[],L=[];function F(){var he=n.preRun.shift();R.unshift(he)}var z=0,G=null;function V(he){throw n.onAbort&&n.onAbort(he),he="Aborted("+he+")",l(he),h=!0,he=new WebAssembly.RuntimeError(he+". Build with -sASSERTIONS for more info."),i(he),he}function q(he){return he.startsWith("data:application/octet-stream;base64,")}var O;if(O="data:application/octet-stream;base64,AGFzbQEAAAABugM3YAF/AGACf38AYAF/AX9gA39/fwBgAn98AGACf38Bf2ADf39/AX9gBH9/f30BfWADf398AGAAAGAEf39/fwBgAX8BfGACf38BfGAFf39/f38Bf2AAAX9gA39/fwF9YAZ/f31/fX8AYAV/f39/fwBgAn9/AX1gBX9/f319AX1gAX8BfWADf35/AX5gB39/f39/f38AYAZ/f39/f38AYAR/f39/AX9gBn9/f319fQF9YAR/f31/AGADf399AX1gBn98f39/fwF/YAR/fHx/AGACf30AYAh/f39/f39/fwBgDX9/f39/f39/f39/f38AYAp/f39/f39/f39/AGAFf39/f38BfGAEfHx/fwF9YA1/fX1/f399fX9/f39/AX9gB39/f319f38AYAJ+fwF/YAN/fX0BfWABfAF8YAN/fHwAYAR/f319AGAHf39/fX19fQF9YA1/fX99f31/fX19fX1/AX9gC39/f39/f399fX19AX9gCH9/f39/f319AGAEf39+fgBgB39/f39/f38Bf2ACfH8BfGAFf398fH8AYAN/f38BfGAEf39/fABgA39/fQBgBn9/fX99fwF/ArUBHgFhAWEAHwFhAWIAAwFhAWMACQFhAWQAFgFhAWUAEQFhAWYAIAFhAWcAAAFhAWgAIQFhAWkAAwFhAWoAAAFhAWsAFwFhAWwACgFhAW0ABQFhAW4AAwFhAW8AAQFhAXAAFwFhAXEABgFhAXIAAAFhAXMAIgFhAXQACgFhAXUADQFhAXYAFgFhAXcAAgFhAXgAAwFhAXkAGAFhAXoAAgFhAUEAAQFhAUIAEQFhAUMAAQFhAUQAAAOiAqACAgMSBwcACRkDAAoRBgYKEwAPDxMBBiMTCgcHGgMUASQFJRQHAwMKCgMmAQYYDxobFAAKBw8KBwMDAgkCAAAFGwACBwIHBgIDAQMIDAABKAkHBQURACkZASoAAAIrLAIALQcHBy4HLwkFCgMCMA0xAgMJAgACAQYKAQIBBQEACQIFAQEABQAODQ0GFQIBHBUGAgkCEAAAAAUyDzMMBQYINAUCAwUODg41AgMCAgIDBgICNgIBDAwMAQsLCwsLCx0CAAIAAAABABABBQICAQMCEgMMCwEBAQEBAQsLAQICAwICAgICAgIDAgIICAEICAgEBAQEBAQEBAQABAQABAQEBAAEBAQBAQEICAEBAQEBAQEBCAgBAQEAAg4CAgUBAR4DBAcBcAHUAdQBBQcBAYACgIACBg0CfwFBkMQEC38BQQALByQIAUUCAAFGAG0BRwCwAQFIAK8BAUkAYQFKAQABSwAjAUwApgEJjQMBAEEBC9MBqwGqAaUB5QHiAZwB0AFazwHOAVlZWpsBmgGZAc0BzAHLAcoBWpgByQFZWVqbAZoBmQHIAccBxgGjAZcBpAGWAaMBvQKVAbwCxQG7Ajq6Ajq5ApQBuAI+twI+xAFqwwFqwgFqaWjBAcABvwGhAZcBtgK+AbUClgGhAbQCmAGzAjqxAjqwAr0BrwKuAq0CrAKrAqoCqAKnAqYCpQKkAqMCogKhArwBoAKfAp4CnQKcApsCmgKZApgClwKWApUClAKTApICkQKQAo8CjgKyAo0CjAKLAooCiAKHAqkChQI+hAK7AYMCggKBAoAC/gH9AfwB+QG6AfgBuQH3AfYB9QH0AfMB8gHxAYYC8AHvAbgB+wH6Ae4B7QG3AesBlQHqATrpAT7oAT7nAZQB0QE67AE+iQLmATrkAeMBOuEB4AHfAT7eAd0B3AG2AdsB2gHZAdgB1wHWAdUBtQHUAdMB0gH/AWloaWiPAZABsgGxAZEBhQGSAbQBswGRAa4BrQGsAakBqAGnAYUBCtj+A6ACMwEBfyAAQQEgABshAAJAA0AgABBhIgENAUGIxAAoAgAiAQRAIAERCQAMAQsLEAIACyABC+0BAgJ9A39DAADAfyEEAkACQAJAAkAgAkEHcSIGDgUCAQEBAAELQQMhBQwBCyAGQQFrQQJPDQEgAkHw/wNxQQR2IQcCfSACQQhxBEAgASAHEJ4BvgwBC0EAIAdB/w9xIgFrIAEgAsFBAEgbsgshAyAGQQFGBEAgAyADXA0BQwAAwH8gAyADQwAAgH9bIANDAACA/1tyIgEbIQQgAUUhBQwBCyADIANcDQBBAEECIANDAACAf1sgA0MAAID/W3IiARshBUMAAMB/IAMgARshBAsgACAFOgAEIAAgBDgCAA8LQfQNQakYQTpB+RYQCwALZwIBfQF/QwAAwH8hAgJAAkACQCABQQdxDgQCAAABAAtBxBJBqRhByQBBuhIQCwALIAFB8P8DcUEEdiEDIAFBCHEEQCAAIAMQngG+DwtBACADQf8PcSIAayAAIAHBQQBIG7IhAgsgAgt4AgF/AX0jAEEQayIEJAAgBEEIaiAAQQMgAkECR0EBdCABQf4BcUECRxsgAhAoQwAAwH8hBQJAAkACQCAELQAMQQFrDgIAAQILIAQqAgghBQwBCyAEKgIIIAOUQwrXIzyUIQULIARBEGokACAFQwAAAAAgBSAFWxsLeAIBfwF9IwBBEGsiBCQAIARBCGogAEEBIAJBAkZBAXQgAUH+AXFBAkcbIAIQKEMAAMB/IQUCQAJAAkAgBC0ADEEBaw4CAAECCyAEKgIIIQUMAQsgBCoCCCADlEMK1yM8lCEFCyAEQRBqJAAgBUMAAAAAIAUgBVsbC8wCAQV/IAAEQCAAQQRrIgEoAgAiBSEDIAEhAiAAQQhrKAIAIgAgAEF+cSIERwRAIAEgBGsiAigCBCIAIAIoAgg2AgggAigCCCAANgIEIAQgBWohAwsgASAFaiIEKAIAIgEgASAEakEEaygCAEcEQCAEKAIEIgAgBCgCCDYCCCAEKAIIIAA2AgQgASADaiEDCyACIAM2AgAgA0F8cSACakEEayADQQFyNgIAIAICfyACKAIAQQhrIgFB/wBNBEAgAUEDdkEBawwBCyABQR0gAWciAGt2QQRzIABBAnRrQe4AaiABQf8fTQ0AGkE/IAFBHiAAa3ZBAnMgAEEBdGtBxwBqIgAgAEE/TxsLIgFBBHQiAEHgMmo2AgQgAiAAQegyaiIAKAIANgIIIAAgAjYCACACKAIIIAI2AgRB6DpB6DopAwBCASABrYaENwMACwsOAEHYMigCABEJABBYAAunAQIBfQJ/IABBFGoiByACIAFBAkkiCCAEIAUQNSEGAkAgByACIAggBCAFEC0iBEMAAAAAYCADIARecQ0AIAZDAAAAAGBFBEAgAyEEDAELIAYgAyADIAZdGyEECyAAQRRqIgAgASACIAUQOCAAIAEgAhAwkiAAIAEgAiAFEDcgACABIAIQL5KSIgMgBCADIAReGyADIAQgBCAEXBsgBCAEWyADIANbcRsLvwEBA38gAC0AAEEgcUUEQAJAIAEhAwJAIAIgACIBKAIQIgAEfyAABSABEJ0BDQEgASgCEAsgASgCFCIFa0sEQCABIAMgAiABKAIkEQYAGgwCCwJAIAEoAlBBAEgNACACIQADQCAAIgRFDQEgAyAEQQFrIgBqLQAAQQpHDQALIAEgAyAEIAEoAiQRBgAgBEkNASADIARqIQMgAiAEayECIAEoAhQhBQsgBSADIAIQKxogASABKAIUIAJqNgIUCwsLCwYAIAAQIwtQAAJAAkACQAJAAkAgAg4EBAABAgMLIAAgASABQQxqEEMPCyAAIAEgAUEMaiADEEQPCyAAIAEgAUEMahBCDwsQJAALIAAgASABQQxqIAMQRQttAQF/IwBBgAJrIgUkACAEQYDABHEgAiADTHJFBEAgBSABQf8BcSACIANrIgNBgAIgA0GAAkkiARsQKhogAUUEQANAIAAgBUGAAhAmIANBgAJrIgNB/wFLDQALCyAAIAUgAxAmCyAFQYACaiQAC/ICAgJ/AX4CQCACRQ0AIAAgAToAACAAIAJqIgNBAWsgAToAACACQQNJDQAgACABOgACIAAgAToAASADQQNrIAE6AAAgA0ECayABOgAAIAJBB0kNACAAIAE6AAMgA0EEayABOgAAIAJBCUkNACAAQQAgAGtBA3EiBGoiAyABQf8BcUGBgoQIbCIBNgIAIAMgAiAEa0F8cSIEaiICQQRrIAE2AgAgBEEJSQ0AIAMgATYCCCADIAE2AgQgAkEIayABNgIAIAJBDGsgATYCACAEQRlJDQAgAyABNgIYIAMgATYCFCADIAE2AhAgAyABNgIMIAJBEGsgATYCACACQRRrIAE2AgAgAkEYayABNgIAIAJBHGsgATYCACAEIANBBHFBGHIiBGsiAkEgSQ0AIAGtQoGAgIAQfiEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkEgayICQR9LDQALCyAAC4AEAQN/IAJBgARPBEAgACABIAIQFyAADwsgACACaiEDAkAgACABc0EDcUUEQAJAIABBA3FFBEAgACECDAELIAJFBEAgACECDAELIAAhAgNAIAIgAS0AADoAACABQQFqIQEgAkEBaiICQQNxRQ0BIAIgA0kNAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgACADQQRrIgRLBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAtIAQF/IwBBEGsiBCQAIAQgAzYCDAJAIABFBEBBAEEAIAEgAiAEKAIMEHEMAQsgACgC9AMgACABIAIgBCgCDBBxCyAEQRBqJAALkwECAX0BfyMAQRBrIgYkACAGQQhqIABB6ABqIAAgAkEBdGovAWIQH0MAAMB/IQUCQAJAAkAgBi0ADEEBaw4CAAECCyAGKgIIIQUMAQsgBioCCCADlEMK1yM8lCEFCyAALQADQRB0QYCAwABxBEAgBSAAIAEgAiAEEFQiA0MAAAAAIAMgA1sbkiEFCyAGQRBqJAAgBQu1AQECfyAAKAIEQQFqIgEgACgCACICKALsAyACKALoAyICa0ECdU8EQANAIAAoAggiAUUEQCAAQQA2AgggAEIANwIADwsgACABKAIENgIAIAAgASgCCDYCBCAAIAEoAgA2AgggARAjIAAoAgRBAWoiASAAKAIAIgIoAuwDIAIoAugDIgJrQQJ1Tw0ACwsgACABNgIEIAIgAUECdGooAgAtABdBEHRBgIAwcUGAgCBGBEAgABB9CwuBAQIBfwF9IwBBEGsiAyQAIANBCGogAEEDIAJBAkdBAXQgAUH+AXFBAkcbIAIQU0MAAMB/IQQCQAJAAkAgAy0ADEEBaw4CAAECCyADKgIIIQQMAQsgAyoCCEMAAAAAlEMK1yM8lCEECyADQRBqJAAgBEMAAAAAl0MAAAAAIAQgBFsbC4EBAgF/AX0jAEEQayIDJAAgA0EIaiAAQQEgAkECRkEBdCABQf4BcUECRxsgAhBTQwAAwH8hBAJAAkACQCADLQAMQQFrDgIAAQILIAMqAgghBAwBCyADKgIIQwAAAACUQwrXIzyUIQQLIANBEGokACAEQwAAAACXQwAAAAAgBCAEWxsLeAICfQF/IAAgAkEDdGoiByoC+AMhBkMAAMB/IQUCQAJAAkAgBy0A/ANBAWsOAgABAgsgBiEFDAELIAYgA5RDCtcjPJQhBQsgAC0AF0EQdEGAgMAAcQR9IAUgAEEUaiABIAIgBBBUIgNDAAAAACADIANbG5IFIAULC1EBAX8CQCABKALoAyICIAEoAuwDRwRAIABCADcCBCAAIAE2AgAgAigCAC0AF0EQdEGAgDBxQYCAIEcNASAAEH0PCyAAQgA3AgAgAEEANgIICwvoAgECfwJAIAAgAUYNACABIAAgAmoiBGtBACACQQF0a00EQCAAIAEgAhArDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkEBayECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkEBayICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQQRrIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkEBayICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AA0AgAyABKAIANgIAIAFBBGohASADQQRqIQMgAkEEayICQQNLDQALCyACRQ0AA0AgAyABLQAAOgAAIANBAWohAyABQQFqIQEgAkEBayICDQALCyAAC5QCAgF8AX8CQCAAIAGiIgAQbCIERAAAAAAAAPA/oCAEIAREAAAAAAAAAABjGyIEIARiIgUgBJlELUMc6+I2Gj9jRXJFBEAgACAEoSEADAELIAUgBEQAAAAAAADwv6CZRC1DHOviNho/Y0VyRQRAIAAgBKFEAAAAAAAA8D+gIQAMAQsgACAEoSEAIAIEQCAARAAAAAAAAPA/oCEADAELIAMNACAAAnxEAAAAAAAAAAAgBQ0AGkQAAAAAAADwPyAERAAAAAAAAOA/ZA0AGkQAAAAAAADwP0QAAAAAAAAAACAERAAAAAAAAOC/oJlELUMc6+I2Gj9jGwugIQALIAAgAGIgASABYnIEQEMAAMB/DwsgACABo7YLkwECAX0BfyMAQRBrIgYkACAGQQhqIABB6ABqIAAgAkEBdGovAV4QH0MAAMB/IQUCQAJAAkAgBi0ADEEBaw4CAAECCyAGKgIIIQUMAQsgBioCCCADlEMK1yM8lCEFCyAALQADQRB0QYCAwABxBEAgBSAAIAEgAiAEEFQiA0MAAAAAIAMgA1sbkiEFCyAGQRBqJAAgBQtQAAJAAkACQAJAAkAgAg4EBAABAgMLIAAgASABQR5qEEMPCyAAIAEgAUEeaiADEEQPCyAAIAEgAUEeahBCDwsQJAALIAAgASABQR5qIAMQRQt+AgF/AX0jAEEQayIEJAAgBEEIaiAAQQMgAkECR0EBdCABQf4BcUECRxsgAhBQQwAAwH8hBQJAAkACQCAELQAMQQFrDgIAAQILIAQqAgghBQwBCyAEKgIIIAOUQwrXIzyUIQULIARBEGokACAFQwAAAACXQwAAAAAgBSAFWxsLfgIBfwF9IwBBEGsiBCQAIARBCGogAEEBIAJBAkZBAXQgAUH+AXFBAkcbIAIQUEMAAMB/IQUCQAJAAkAgBC0ADEEBaw4CAAECCyAEKgIIIQUMAQsgBCoCCCADlEMK1yM8lCEFCyAEQRBqJAAgBUMAAAAAl0MAAAAAIAUgBVsbC08AAkACQAJAIANB/wFxIgMOBAACAgECCyABIAEvAABB+P8DcTsAAA8LIAEgAS8AAEH4/wNxQQRyOwAADwsgACABIAJBAUECIANBAUYbEEwLNwEBfyABIAAoAgQiA0EBdWohASAAKAIAIQAgASACIANBAXEEfyABKAIAIABqKAIABSAACxEBAAtiAgJ9An8CQCAAKALkA0UNACAAQfwAaiIDIABBGmoiBC8BABAgIgIgAlwEQCADIABBGGoiBC8BABAgIgIgAlwNASADIAAvARgQIEMAAAAAXkUNAQsgAyAELwEAECAhAQsgAQtfAQN/IAEEQEEMEB4iAyABKQIENwIEIAMhAiABKAIAIgEEQCADIQQDQEEMEB4iAiABKQIENwIEIAQgAjYCACACIQQgASgCACIBDQALCyACIAAoAgA2AgAgACADNgIACwvXawMtfxx9AX4CfwJAIAAtAABBBHEEQCAAKAKgASAMRw0BCyAAKAKkASAAKAL0AygCDEcNAEEAIAAtAKgBIANGDQEaCyAAQoCAgPyLgIDAv383AoADIABCgYCAgBA3AvgCIABCgICA/IuAgMC/fzcC8AIgAEEANgKsAUEBCyErAkACQAJAAkAgACgCCARAIABBFGoiDkECQQEgBhAiIT4gDkECQQEgBhAhITwgDkEAQQEgBhAiITsgDkEAQQEgBhAhIUAgBCABIAUgAiAAKAL4AiAAQfACaiIOKgIAIAAoAvwCIAAqAvQCIAAqAoADIAAqAoQDID4gPJIiPiA7IECSIjwgACgC9AMiEBB7DQEgACgCrAEiEUUNAyAAQbABaiETA0AgBCABIAUgAiATIB1BGGxqIg4oAgggDioCACAOKAIMIA4qAgQgDioCECAOKgIUID4gPCAQEHsNAiAdQQFqIh0gEUcNAAsMAgsgCEUEQCAAKAKsASITRQ0CIABBsAFqIRADQAJAAkAgECAdQRhsIhFqIg4qAgAiPiA+XCABIAFcckUEQCA+IAGTi0MXt9E4XQ0BDAILIAEgAVsgPiA+W3INAQsCQCAQIBFqIhEqAgQiPiA+XCACIAJcckUEQCA+IAKTi0MXt9E4XQ0BDAILIAIgAlsgPiA+W3INAQsgESgCCCAERw0AIBEoAgwgBUYNAwsgEyAdQQFqIh1HDQALDAILAkAgAEHwAmoiDioCACI+ID5cIAEgAVxyRQRAID4gAZOLQxe30ThdDQEMBAsgASABWyA+ID5bcg0DCyAOQQAgACgC/AIgBUYbQQAgACgC+AIgBEYbQQACfyACIAJcIg4gACoC9AIiPiA+XHJFBEAgPiACk4tDF7fROF0MAQtBACA+ID5bDQAaIA4LGyEOCyAORSArcgRAIA4hHQwCCyAAIA4qAhA4ApQDIAAgDioCFDgCmAMgCkEMQRAgCBtqIgMgAygCAEEBajYCACAOIR0MAgtBACEdCyAGIUAgByFHIAtBAWohIiMAQaABayINJAACQAJAIARBAUYgASABW3JFBEAgDUGqCzYCICAAQQVB2CUgDUEgahAsDAELIAVBAUYgAiACW3JFBEAgDUHZCjYCECAAQQVB2CUgDUEQahAsDAELIApBAEEEIAgbaiILIAsoAgBBAWo2AgAgACAALQCIA0H8AXEgAC0AFEEDcSILIANBASADGyIsIAsbIg9BA3FyOgCIAyAAQawDaiIQIA9BAUdBA3QiC2ogAEEUaiIUQQNBAiAPQQJGGyIRIA8gQBAiIgY4AgAgECAPQQFGQQN0Ig5qIBQgESAPIEAQISIHOAIAIAAgFEEAIA8gQBAiIjw4ArADIAAgFEEAIA8gQBAhIjs4ArgDIABBvANqIhAgC2ogFCARIA8QMDgCACAOIBBqIBQgESAPEC84AgAgACAUQQAgDxAwOALAAyAAIBRBACAPEC84AsgDIAsgAEHMA2oiC2ogFCARIA8gQBA4OAIAIAsgDmogFCARIA8gQBA3OAIAIAAgFEEAIA8gQBA4OALQAyAAIBRBACAPIEAQNyI6OALYAyAGIAeSIT4gPCA7kiE8AkACQCAAKAIIIgsEQEMAAMB/IAEgPpMgBEEBRhshBkMAAMB/IAIgPJMgBUEBRhshPiAAAn0gBCAFckUEQCAAIABBAiAPIAYgQCBAECU4ApQDIABBACAPID4gRyBAECUMAQsgBEEDTyAFQQNPcg0EIA1BiAFqIAAgBiAGIAAqAswDIAAqAtQDkiAAKgK8A5IgACoCxAOSIjyTIgdDAAAAACAHQwAAAABeGyAGIAZcG0GBgAggBEEDdEH4//8HcXZB/wFxID4gPiAAKgLQAyA6kiAAKgLAA5IgACoCyAOSIjuTIgdDAAAAACAHQwAAAABeGyA+ID5cG0GBgAggBUEDdEH4//8HcXZB/wFxIAsREAAgDSoCjAEiPUMAAAAAYCANKgKIASIHQwAAAABgcUUEQCANID27OQMIIA0gB7s5AwAgAEEBQdwdIA0QLCANKgKMASIHQwAAAAAgB0MAAAAAXhshPSANKgKIASIHQwAAAAAgB0MAAAAAXhshBwsgCiAKKAIUQQFqNgIUIAogCUECdGoiCSAJKAIYQQFqNgIYIAAgAEECIA8gPCAHkiAGIARBAWtBAkkbIEAgQBAlOAKUAyAAQQAgDyA7ID2SID4gBUEBa0ECSRsgRyBAECULOAKYAwwBCwJAIAAoAuADRQRAIAAoAuwDIAAoAugDa0ECdSELDAELIA1BiAFqIAAQMgJAIA0oAogBRQRAQQAhCyANKAKMAUUNAQsgDUGAAWohEEEAIQsDQCANQQA2AoABIA0gDSkDiAE3A3ggECANKAKQARA8IA1BiAFqEC4gDSgCgAEiCQRAA0AgCSgCACEOIAkQJyAOIgkNAAsLIAtBAWohCyANQQA2AoABIA0oAowBIA0oAogBcg0ACwsgDSgCkAEiCUUNAANAIAkoAgAhDiAJECcgDiIJDQALCyALRQRAIAAgAEECIA8gBEEBa0EBSwR9IAEgPpMFIAAqAswDIAAqAtQDkiAAKgK8A5IgACoCxAOSCyBAIEAQJTgClAMgACAAQQAgDyAFQQFrQQFLBH0gAiA8kwUgACoC0AMgACoC2AOSIAAqAsADkiAAKgLIA5ILIEcgQBAlOAKYAwwBCwJAIAgNACAFQQJGIAIgPJMiBiAGW3EgBkMAAAAAX3EgBCAFckUgBEECRiABID6TIgdDAAAAAF9xcnJFDQAgACAAQQIgD0MAAAAAQwAAAAAgByAHQwAAAABdGyAHIARBAkYbIAcgB1wbIEAgQBAlOAKUAyAAIABBACAPQwAAAABDAAAAACAGIAZDAAAAAF0bIAYgBUECRhsgBiAGXBsgRyBAECU4ApgDDAELIAAQTyAAIAAtAIgDQfsBcToAiAMgABBeQQMhEyAALQAUQQJ2QQNxIQkCQAJAIA9BAkcNAAJAIAlBAmsOAgIAAQtBAiETDAELIAkhEwsgAC8AFSEnIBQgEyAPIEAQOCEGIBQgEyAPEDAhByAUIBMgDyBAEDchOyAUIBMgDxAvITpBACEQIBQgEUEAIBNBAkkbIhYgDyBAEDghPyAUIBYgDxAwIT0gFCAWIA8gQBA3IUEgFCAWIA8QLyFEIBQgFiAPIEAQYCFCIBQgFiAPEEshQyAAIA9BACABID6TIlAgBiAHkiA7IDqSkiJKID8gPZIgQSBEkpIiRiATQQFLIhkbIEAgQBB6ITsgACAPQQEgAiA8kyJRIEYgSiAZGyBHIEAQeiFFAkACQCAEIAUgGRsiHA0AIA1BiAFqIAAQMgJAAkAgDSgCiAEiDiANKAKMASIJckUNAANAIA4oAuwDIA4oAugDIg5rQQJ1IAlNDQQCQCAOIAlBAnRqKAIAIgkQeUUNACAQDQIgCRA7IgYgBlsgBotDF7fROF1xDQIgCRBAIgYgBlwEQCAJIRAMAQsgCSEQIAaLQxe30ThdDQILIA1BiAFqEC4gDSgCjAEiCSANKAKIASIOcg0ACwwBC0EAIRALIA0oApABIglFDQADQCAJKAIAIQ4gCRAnIA4iCQ0ACwsgDUGIAWogABAyIA0oAowBIQkCQCANKAKIASIORQRAQwAAAAAhPSAJRQ0BCyBFIEVcIiMgBUEAR3IhKCA7IDtcIiQgBEEAR3IhKUMAAAAAIT0DQCAOKALsAyAOKALoAyIOa0ECdSAJTQ0CIA4gCUECdGooAgAiDhB4AkAgDi8AFSAOLQAXQRB0ciIJQYCAMHFBgIAQRgRAIA4QdyAOIA4tAAAiCUEBciIOQfsBcSAOIAlBBHEbOgAADAELIAgEfyAOIA4tABRBA3EiCSAPIAkbIDsgRRB2IA4vABUgDi0AF0EQdHIFIAkLQYDgAHFBgMAARg0AIA5BFGohEQJAIA4gEEYEQCAQQQA2ApwBIBAgDDYCmAFDAAAAACEHDAELIBQtAABBAnZBA3EhCQJAAkAgD0ECRw0AQQMhEgJAIAlBAmsOAgIAAQtBAiESDAELIAkhEgsgDUGAgID+BzYCaCANQYCAgP4HNgJQIA1B+ABqIA5B/ABqIhcgDi8BHhAfIDsgRSASQQFLIh4bIT4CQAJAAkACQCANLQB8IgkOBAABAQABCwJAIBcgDi8BGBAgIgYgBlwNACAXIA4vARgQIEMAAAAAXkUNACAOKAL0Ay0ACEEBcSIJDQBDAADAf0MAAAAAIAkbIQcMAgtDAADAfyEGDAILIA0qAnghB0MAAMB/IQYCQCAJQQFrDgIBAAILIAcgPpRDCtcjPJQhBgwBCyAHIQYLIA4tABdBEHRBgIDAAHEEQCAGIBEgD0GBAiASQQN0dkEBcSA7EFQiBkMAAAAAIAYgBlsbkiEGCyAOKgL4AyEHQQAhH0EAIRgCQAJAAkAgDi0A/ANBAWsOAgEAAgsgOyAHlEMK1yM8lCEHCyAHIAdcDQAgB0MAAAAAYCEYCyAOKgKABCEHAkACQAJAIA4tAIQEQQFrDgIBAAILIEUgB5RDCtcjPJQhBwsgByAHXA0AIAdDAAAAAGAhHwsCQCAOAn0gBiAGXCIJID4gPlxyRQRAIA4qApwBIgcgB1sEQCAOKAL0Ay0AEEEBcUUNAyAOKAKYASAMRg0DCyARIBIgDyA7EDggESASIA8QMJIgESASIA8gOxA3IBEgEiAPEC+SkiIHIAYgBiAHXRsgByAGIAkbIAYgBlsgByAHW3EbDAELIBggHnEEQCARQQIgDyA7EDggEUECIA8QMJIgEUECIA8gOxA3IBFBAiAPEC+SkiIHIA4gD0EAIDsgOxAxIgYgBiAHXRsgByAGIAYgBlwbIAYgBlsgByAHW3EbDAELIB4gH0VyRQRAIBFBACAPIDsQOCARQQAgDxAwkiARQQAgDyA7EDcgEUEAIA8QL5KSIgcgDiAPQQEgRSA7EDEiBiAGIAddGyAHIAYgBiAGXBsgBiAGWyAHIAdbcRsMAQtBASEaIA1BATYCZCANQQE2AnggEUECQQEgOxAiIBFBAkEBIDsQIZIhPiARQQBBASA7ECIhPCARQQBBASA7ECEhOkMAAMB/IQdBASEVQwAAwH8hBiAYBEAgDiAPQQAgOyA7EDEhBiANQQA2AnggDSA+IAaSIgY4AmhBACEVCyA8IDqSITwgHwRAIA4gD0EBIEUgOxAxIQcgDUEANgJkIA0gPCAHkiIHOAJQQQAhGgsCQAJAAkAgAC0AF0EQdEGAgAxxQYCACEYiCSASQQJJIiBxRQRAIAkgJHINAiAGIAZcDQEMAgsgJCAGIAZbcg0CC0ECIRUgDUECNgJ4IA0gOzgCaCA7IQYLAkAgIEEBIAkbBEAgCSAjcg0CIAcgB1wNAQwCCyAjIAcgB1tyDQELQQIhGiANQQI2AmQgDSBFOAJQIEUhBwsCQCAXIA4vAXoQICI6IDpcDQACfyAVIB5yRQRAIBcgDi8BehAgIQcgDUEANgJkIA0gPCAGID6TIAeVkjgCUEEADAELIBogIHINASAXIA4vAXoQICEGIA1BADYCeCANIAYgByA8k5QgPpI4AmhBAAshGkEAIRULIA4vABZBD3EiCUUEQCAALQAVQQR2IQkLAkAgFUUgCUEFRiAeciAYIClyIAlBBEdycnINACANQQA2AnggDSA7OAJoIBcgDi8BehAgIgYgBlwNAEEAIRogFyAOLwF6ECAhBiANQQA2AmQgDSA7ID6TIAaVOAJQCyAOLwAWQQ9xIhhFBEAgAC0AFUEEdiEYCwJAICAgKHIgH3IgGEEFRnIgGkUgGEEER3JyDQAgDUEANgJkIA0gRTgCUCAXIA4vAXoQICIGIAZcDQAgFyAOLwF6ECAhBiANQQA2AnggDSAGIEUgPJOUOAJoCyAOIA9BAiA7IDsgDUH4AGogDUHoAGoQPyAOIA9BACBFIDsgDUHkAGogDUHQAGoQPyAOIA0qAmggDSoCUCAPIA0oAnggDSgCZCA7IEVBAEEFIAogIiAMED0aIA4gEkECdEH8JWooAgBBAnRqKgKUAyEGIBEgEiAPIDsQOCARIBIgDxAwkiARIBIgDyA7EDcgESASIA8QL5KSIgcgBiAGIAddGyAHIAYgBiAGXBsgBiAGWyAHIAdbcRsLIgc4ApwBCyAOIAw2ApgBCyA9IAcgESATQQEgOxAiIBEgE0EBIDsQIZKSkiE9CyANQYgBahAuIA0oAowBIgkgDSgCiAEiDnINAAsLIA0oApABIgkEQANAIAkoAgAhDiAJECcgDiIJDQALCyA7IEUgGRshByA9QwAAAACSIQYgC0ECTwRAIBQgEyAHEE0gC0EBa7OUIAaSIQYLIEIgQ5IhPiAFIAQgGRshGiBHIEAgGRshTSBAIEcgGRshSSANQdAAaiAAEDJBACAcIAYgB14iCxsgHCAcQQJGGyAcICdBgIADcSIfGyEeIBQgFiBFIDsgGRsiRBBNIU8gDSgCVCIRIA0oAlAiCXIEQEEBQQIgRCBEXCIpGyEtIAtFIBxBAUZyIS4gE0ECSSEZIABB8gBqIS8gAEH8AGohMCATQQJ0IgtB7CVqITEgC0HcJWohMiAWQQJ0Ig5B7CVqIRwgDkHcJWohICALQfwlaiEkIA5B/CVqISMgGkEARyIzIAhyITQgGkUiNSAIQQFzcSE2IBogH3JFITcgDUHwAGohOCANQYABaiEnQYECIBNBA3R2Qf8BcSEoIBpBAWtBAkkhOQNAIA1BADYCgAEgDUIANwN4AkAgACgC7AMiCyAAKALoAyIORg0AIAsgDmsiC0EASA0DIA1BiAFqIAtBAnVBACAnEEohECANKAKMASANKAJ8IA0oAngiC2siDmsgCyAOEDMhDiANIA0oAngiCzYCjAEgDSAONgJ4IA0pA5ABIVYgDSANKAJ8Ig42ApABIA0oAoABIRIgDSBWNwJ8IA0gEjYClAEgECALNgIAIAsgDkcEQCANIA4gCyAOa0EDakF8cWo2ApABCyALRQ0AIAsQJwsgFC0AACIOQQJ2QQNxIQsCQAJAIA5BA3EiDiAsIA4bIhJBAkcNAEEDIRACQCALQQJrDgICAAELQQIhEAwBCyALIRALIAAvABUhCyAUIBAgBxBNIT8CQCAJIBFyRQRAQwAAAAAhQ0EAIRFDAAAAACFCQwAAAAAhQUEAIRUMAQsgC0GAgANxISUgEEECSSEYIBBBAnQiC0HsJWohISALQdwlaiEqQQAhFUMAAAAAIUEgESEOQwAAAAAhQkMAAAAAIUNBACEXQwAAAAAhPQNAIAkoAuwDIAkoAugDIglrQQJ1IA5NDQQCQCAJIA5BAnRqKAIAIgkvABUgCS0AF0EQdHIiC0GAgDBxQYCAEEYgC0GA4ABxQYDAAEZyDQAgDUGIAWoiESAJQRRqIgsgKigCACADECggDS0AjAEhJiARIAsgISgCACADECggDS0AjAEhESAJIBs2AtwDIBUgJkEDRmohFSARQQNGIREgCyAQQQEgOxAiIUsgCyAQQQEgOxAhIU4gCSAXIAkgFxsiF0YhJiAJKgKcASE8IAsgEiAYIEkgQBA1IToCQCALIBIgGCBJIEAQLSIGQwAAAABgIAYgPF1xDQAgOkMAAAAAYEUEQCA8IQYMAQsgOiA8IDogPF4bIQYLIBEgFWohFQJAICVFQwAAAAAgPyAmGyI8IEsgTpIiOiA9IAaSkpIgB15Fcg0AIA0oAnggDSgCfEYNACAOIREMAwsgCRB5BEAgQiAJEDuSIUIgQyAJEEAgCSoCnAGUkyFDCyBBIDwgOiAGkpIiBpIhQSA9IAaSIT0gDSgCfCILIA0oAoABRwRAIAsgCTYCACANIAtBBGo2AnwMAQsgCyANKAJ4ayILQQJ1IhFBAWoiDkGAgICABE8NBSANQYgBakH/////AyALQQF1IiYgDiAOICZJGyALQfz///8HTxsgESAnEEohDiANKAKQASAJNgIAIA0gDSgCkAFBBGo2ApABIA0oAowBIA0oAnwgDSgCeCIJayILayAJIAsQMyELIA0gDSgCeCIJNgKMASANIAs2AnggDSkDkAEhViANIA0oAnwiCzYCkAEgDSgCgAEhESANIFY3AnwgDSARNgKUASAOIAk2AgAgCSALRwRAIA0gCyAJIAtrQQNqQXxxajYCkAELIAlFDQAgCRAnCyANQQA2AnAgDSANKQNQNwNoIDggDSgCWBA8IA1B0ABqEC4gDSgCcCIJBEADQCAJKAIAIQsgCRAnIAsiCQ0ACwtBACERIA1BADYCcCANKAJUIg4gDSgCUCIJcg0ACwtDAACAPyBCIEJDAACAP10bIEIgQkMAAAAAXhshPCANKAJ8IRcgDSgCeCEJAn0CQAJ9AkACQAJAIB5FDQAgFCAPQQAgQCBAEDUhBiAUIA9BACBAIEAQLSE6IBQgD0EBIEcgQBA1IT8gFCAPQQEgRyBAEC0hPSAGID8gE0EBSyILGyBKkyIGIAZbIAYgQV5xDQEgOiA9IAsbIEqTIgYgBlsgBiBBXXENASAAKAL0Ay0AFEEBcQ0AIEEgPEMAAAAAWw0DGiAAEDsiBiAGXA0CIEEgABA7QwAAAABbDQMaDAILIAchBgsgBiAGWw0CIAYhBwsgBwshBiBBjEMAAAAAIEFDAAAAAF0bIT8gBgwBCyAGIEGTIT8gBgshByA2RQRAAkAgCSAXRgRAQwAAAAAhQQwBC0MAAIA/IEMgQ0MAAIA/XRsgQyBDQwAAAABeGyE9QwAAAAAhQSAJIQ4DQCAOKAIAIgsqApwBITogC0EUaiIQIA8gGSBJIEAQNSFCAkAgECAPIBkgSSBAEC0iBkMAAAAAYCAGIDpdcQ0AIEJDAAAAAGBFBEAgOiEGDAELIEIgOiA6IEJdGyEGCwJAID9DAAAAAF0EQCAGIAsQQIyUIjpDAAAAAF4gOkMAAAAAXXJFDQEgCyATIA8gPyA9lSA6lCAGkiJCIAcgOxAlITogQiBCXCA6IDpcciA6IEJbcg0BIEEgOiAGk5IhQSALEEAgCyoCnAGUID2SIT0MAQsgP0MAAAAAXkUNACALEDsiQkMAAAAAXiBCQwAAAABdckUNACALIBMgDyA/IDyVIEKUIAaSIkMgByA7ECUhOiBDIENcIDogOlxyIDogQ1tyDQAgPCBCkyE8IEEgOiAGk5IhQQsgDkEEaiIOIBdHDQALID8gQZMiQiA9lSFLIEIgPJUhTiAALwAVQYCAA3FFIC5yISVDAAAAACFBIAkhCwNAIAsoAgAiDioCnAEhPCAOQRRqIhggDyAZIEkgQBA1IToCQCAYIA8gGSBJIEAQLSIGQwAAAABgIAYgPF1xDQAgOkMAAAAAYEUEQCA8IQYMAQsgOiA8IDogPF4bIQYLAn0gDiATIA8CfSBCQwAAAABdBEAgBiAGIA4QQIyUIjxDAAAAAFsNAhogBiA8kiA9QwAAAABbDQEaIEsgPJQgBpIMAQsgBiBCQwAAAABeRQ0BGiAGIA4QOyI8QwAAAABeIDxDAAAAAF1yRQ0BGiBOIDyUIAaSCyAHIDsQJQshQyAYIBNBASA7ECIhPCAYIBNBASA7ECEhOiAYIBZBASA7ECIhUiAYIBZBASA7ECEhUyANIEMgPCA6kiJUkiJVOAJoIA1BADYCYCBSIFOSITwCQCAOQfwAaiIQIA4vAXoQICI6IDpbBEAgECAOLwF6ECAhOiANQQA2AmQgDSA8IFUgVJMiPCA6lCA8IDqVIBkbkjgCeAwBCyAjKAIAIRACQCApDQAgDiAQQQN0aiIhKgL4AyE6QQAhEgJAAkACQCAhLQD8A0EBaw4CAQACCyBEIDqUQwrXIzyUIToLIDogOlwNACA6QwAAAABgIRILICUgNSASQQFzcXFFDQAgDi8AFkEPcSISBH8gEgUgAC0AFUEEdgtBBEcNACANQYgBaiAYICAoAgAgDxAoIA0tAIwBQQNGDQAgDUGIAWogGCAcKAIAIA8QKCANLQCMAUEDRg0AIA1BADYCZCANIEQ4AngMAQsgDkH4A2oiEiAQQQN0aiIQKgIAIToCQAJAAkACQCAQLQAEQQFrDgIBAAILIEQgOpRDCtcjPJQhOgsgOkMAAAAAYA0BCyANIC02AmQgDSBEOAJ4DAELAkACfwJAAkACQCAWQQJrDgICAAELIDwgDiAPQQAgRCA7EDGSITpBAAwCC0EBIRAgDSA8IA4gD0EBIEQgOxAxkiI6OAJ4IBNBAU0NDAwCCyA8IA4gD0EAIEQgOxAxkiE6QQALIRAgDSA6OAJ4CyANIDMgEiAQQQN0ajEABEIghkKAgICAIFFxIDogOlxyNgJkCyAOIA8gEyAHIDsgDUHgAGogDUHoAGoQPyAOIA8gFiBEIDsgDUHkAGogDUH4AGoQPyAOICMoAgBBA3RqIhAqAvgDIToCQAJAAkACQCAQLQD8A0EBaw4CAQACCyBEIDqUQwrXIzyUIToLQQEhECA6QwAAAABgDQELQQEhECAOLwAWQQ9xIhIEfyASBSAALQAVQQR2C0EERw0AIA1BiAFqIBggICgCACAPECggDS0AjAFBA0YNACANQYgBaiAYIBwoAgAgDxAoIA0tAIwBQQNGIRALIA4gDSoCaCI8IA0qAngiOiATQQFLIhIbIDogPCASGyAALQCIA0EDcSANKAJgIhggDSgCZCIhIBIbICEgGCASGyA7IEUgCCAQcSIQQQRBByAQGyAKICIgDBA9GiBBIEMgBpOSIUEgAAJ/IAAtAIgDIhBBBHFFBEBBACAOLQCIA0EEcUUNARoLQQQLIBBB+wFxcjoAiAMgC0EEaiILIBdHDQALCyA/IEGTIT8LIAAgAC0AiAMiC0H7AXFBBCA/QwAAAABdQQJ0IAtBBHFBAnYbcjoAiAMgFCATIA8gQBBgIBQgEyAPEEuSITogFCATIA8gQBB/IBQgEyAPEFKSIUsgFCATIAcQTSFCAn8CQAJ9ID9DAAAAAF5FIB5BAkdyRQRAIA1BiAFqIDAgLyAkKAIAQQF0ai8BABAfAkAgDS0AjAEEQCAUIA8gKCBJIEAQNSIGIAZbDQELQwAAAAAMAgtDAAAAACAUIA8gKCBJIEAQNSA6kyBLkyAHID+TkyI/QwAAAABeRQ0BGgsgP0MAAAAAYEUNASA/CyE8IBQtAABBBHZBB3EMAQsgPyE8IBQtAABBBHZBB3EiC0EAIAtBA2tBA08bCyELQwAAAAAhBgJAAkAgFQ0AQwAAAAAhPQJAAkACQAJAAkAgC0EBaw4FAAECBAMGCyA8QwAAAD+UIT0MBQsgPCE9DAQLIBcgCWsiC0EFSQ0CIEIgPCALQQJ1QQFrs5WSIUIMAgsgQiA8IBcgCWtBAnVBAWqzlSI9kiFCDAILIDxDAAAAP5QgFyAJa0ECdbOVIj0gPZIgQpIhQgwBC0MAAAAAIT0LIDogPZIhPSAAEHwhEgJAIAkgF0YiGARAQwAAAAAhP0MAAAAAIToMAQsgF0EEayElIDwgFbOVIU4gMigCACEhQwAAAAAhOkMAAAAAIT8gCSELA0AgDUGIAWogCygCACIOQRRqIhAgISAPECggPUMAAACAIE5DAAAAgCA8QwAAAABeGyJBIA0tAIwBQQNHG5IhPSAIBEACfwJAAkACQAJAIBNBAWsOAwECAwALQQEhFSAOQaADagwDC0EDIRUgDkGoA2oMAgtBACEVIA5BnANqDAELQQIhFSAOQaQDagshKiAOIBVBAnRqICoqAgAgPZI4ApwDCyAlKAIAIRUgDUGIAWogECAxKAIAIA8QKCA9QwAAAIAgQiAOIBVGG5JDAAAAgCBBIA0tAIwBQQNHG5IhPQJAIDRFBEAgPSAQIBNBASA7ECIgECATQQEgOxAhkiAOKgKcAZKSIT0gRCEGDAELIA4gEyA7EF0gPZIhPSASBEAgDhBOIUEgEEEAIA8gOxBBIUMgDioCmAMgEEEAQQEgOxAiIBBBAEEBIDsQIZKSIEEgQ5IiQZMiQyA/ID8gQ10bIEMgPyA/ID9cGyA/ID9bIEMgQ1txGyE/IEEgOiA6IEFdGyBBIDogOiA6XBsgOiA6WyBBIEFbcRshOgwBCyAOIBYgOxBdIkEgBiAGIEFdGyBBIAYgBiAGXBsgBiAGWyBBIEFbcRshBgsgC0EEaiILIBdHDQALCyA/IDqSIAYgEhshQQJ9IDkEQCAAIBYgDyBGIEGSIE0gQBAlIEaTDAELIEQgQSA3GyFBIEQLIT8gH0UEQCAAIBYgDyBGIEGSIE0gQBAlIEaTIUELIEsgPZIhPAJAIAhFDQAgCSELIBgNAANAIAsoAgAiFS8AFkEPcSIORQRAIAAtABVBBHYhDgsCQAJAAkACQCAOQQRrDgIAAQILIA1BiAFqIBVBFGoiECAgKAIAIA8QKEEEIQ4gDS0AjAFBA0YNASANQYgBaiAQIBwoAgAgDxAoIA0tAIwBQQNGDQEgFSAjKAIAQQN0aiIOKgL4AyE9AkACQAJAIA4tAPwDQQFrDgIBAAILIEQgPZRDCtcjPJQhPQsgPiEGID1DAAAAAGANAwsgFSAkKAIAQQJ0aioClAMhBiANIBVB/ABqIg4gFS8BehAgIjogOlsEfSAQIBZBASA7ECIgECAWQQEgOxAhkiAGIA4gFS8BehAgIjqUIAYgOpUgGRuSBSBBCzgCeCANIAYgECATQQEgOxAiIBAgE0EBIDsQIZKSOAKIASANQQA2AmggDUEANgJkIBUgDyATIAcgOyANQegAaiANQYgBahA/IBUgDyAWIEQgOyANQeQAaiANQfgAahA/IA0qAngiOiANKgKIASI9IBNBAUsiGCIOGyEGIB9BAEcgAC8AFUEPcUEER3EiECAZcSA9IDogDhsiOiA6XHIhDiAVIDogBiAPIA4gECAYcSAGIAZcciA7IEVBAUECIAogIiAMED0aID4hBgwCC0EFQQEgFC0AAEEIcRshDgsgFSAWIDsQXSEGIA1BiAFqIBVBFGoiECAgKAIAIhggDxAoID8gBpMhOgJAIA0tAIwBQQNHBEAgHCgCACESDAELIA1BiAFqIBAgHCgCACISIA8QKCANLQCMAUEDRw0AID4gOkMAAAA/lCIGQwAAAAAgBkMAAAAAXhuSIQYMAQsgDUGIAWogECASIA8QKCA+IQYgDS0AjAFBA0YNACANQYgBaiAQIBggDxAoIA0tAIwBQQNGBEAgPiA6QwAAAAAgOkMAAAAAXhuSIQYMAQsCQAJAIA5BAWsOAgIAAQsgPiA6QwAAAD+UkiEGDAELID4gOpIhBgsCfwJAAkACQAJAIBZBAWsOAwECAwALQQEhECAVQaADagwDC0EDIRAgFUGoA2oMAgtBACEQIBVBnANqDAELQQIhECAVQaQDagshDiAVIBBBAnRqIAYgTCAOKgIAkpI4ApwDIAtBBGoiCyAXRw0ACwsgCQRAIAkQJwsgPCBIIDwgSF4bIDwgSCBIIEhcGyBIIEhbIDwgPFtxGyFIIEwgT0MAAAAAIBsbIEGSkiFMIBtBAWohGyANKAJQIgkgEXINAAsLAkAgCEUNACAfRQRAIAAQfEUNAQsgACAWIA8CfSBGIESSIBpFDQAaIAAgFkECdEH8JWooAgBBA3RqIgkqAvgDIQYCQAJAAkAgCS0A/ANBAWsOAgEAAgsgTSAGlEMK1yM8lCEGCyAGQwAAAABgRQ0AIAAgD0GBAiAWQQN0dkEBcSBNIEAQMQwBCyBGIEySCyBHIEAQJSEGQwAAAAAhPCAALwAVQQ9xIQkCQAJAAkACQAJAAkACQAJAAkAgBiBGkyBMkyIGQwAAAABgRQRAQwAAAAAhQyAJQQJrDgICAQcLQwAAAAAhQyAJQQJrDgcBAAUGBAIDBgsgPiAGkiE+DAULID4gBkMAAAA/lJIhPgwECyAGIBuzIjqVITwgPiAGIDogOpKVkiE+DAMLID4gBiAbQQFqs5UiPJIhPgwCCyAbQQJJBEAMAgsgDUGIAWogABAyIAYgG0EBa7OVITwMAgsgBiAbs5UhQwsgDUGIAWogABAyIBtFDQELIBZBAnQiCUHcJWohECAJQfwlaiERIA1BOGohGCANQcgAaiEZIA1B8ABqIRUgDUGQAWohHCANQYABaiEfQQAhEgNAIA1BADYCgAEgDSANKQOIATcDeCAfIA0oApABEDwgDUEANgJwIA0gDSkDeCJWNwNoIBUgDSgCgAEiCxA8IA0oAmwhCQJAAkAgDSgCaCIOBEBDAAAAACE6QwAAAAAhP0MAAAAAIQYMAQtDAAAAACE6QwAAAAAhP0MAAAAAIQYgCUUNAQsDQCAOKALsAyAOKALoAyIOa0ECdSAJTQ0FAkAgDiAJQQJ0aigCACIJLwAVIAktABdBEHRyIhdBgIAwcUGAgBBGIBdBgOAAcUGAwABGcg0AIAkoAtwDIBJHDQIgCUEUaiEOIAkgESgCAEECdGoqApQDIj1DAAAAAGAEfyA9IA4gFkEBIDsQIiAOIBZBASA7ECGSkiI9IAYgBiA9XRsgPSAGIAYgBlwbIAYgBlsgPSA9W3EbIQYgCS0AFgUgF0EIdgtBD3EiFwR/IBcFIAAtABVBBHYLQQVHDQAgFC0AAEEIcUUNACAJEE4gDkEAIA8gOxBBkiI9ID8gPSA/XhsgPSA/ID8gP1wbID8gP1sgPSA9W3EbIj8gCSoCmAMgDkEAQQEgOxAiIA5BAEEBIDsQIZKSID2TIj0gOiA6ID1dGyA9IDogOiA6XBsgOiA6WyA9ID1bcRsiOpIiPSAGIAYgPV0bID0gBiAGIAZcGyAGIAZbID0gPVtxGyEGCyANQQA2AkggDSANKQNoNwNAIBkgDSgCcBA8IA1B6ABqEC4gDSgCSCIJBEADQCAJKAIAIQ4gCRAnIA4iCQ0ACwsgDUEANgJIIA0oAmwiCSANKAJoIg5yDQALCyANIA0pA2g3A4gBIBwgDSgCcBB1IA0gVjcDaCAVIAsQdSA+IE9DAAAAACASG5IhPiBDIAaSIT0gDSgCbCEJAkAgDSgCaCIOIA0oAogBRgRAIAkgDSgCjAFGDQELID4gP5IhQiA+ID2SIUsgPCA9kiEGA0AgDigC7AMgDigC6AMiDmtBAnUgCU0NBQJAIA4gCUECdGooAgAiCS8AFSAJLQAXQRB0ciIXQYCAMHFBgIAQRiAXQYDgAHFBgMAARnINACAJQRRqIQ4CQAJAAkACQAJAAkAgF0EIdkEPcSIXBH8gFwUgAC0AFUEEdgtBAWsOBQEDAgQABgsgFC0AAEEIcQ0ECyAOIBYgDyA7EFEhOiAJIBAoAgBBAnRqID4gOpI4ApwDDAQLIA4gFiAPIDsQYiE/AkACQAJAAkAgFkECaw4CAgABCyAJKgKUAyE6QQIhDgwCC0EBIQ4gCSoCmAMhOgJAIBYOAgIADwtBAyEODAELIAkqApQDITpBACEOCyAJIA5BAnRqIEsgP5MgOpM4ApwDDAMLAkACQAJAAkAgFkECaw4CAgABCyAJKgKUAyE/QQIhDgwCC0EBIQ4gCSoCmAMhPwJAIBYOAgIADgtBAyEODAELIAkqApQDIT9BACEOCyAJIA5BAnRqID4gPSA/k0MAAAA/lJI4ApwDDAILIA4gFiAPIDsQQSE6IAkgECgCAEECdGogPiA6kjgCnAMgCSARKAIAQQN0aiIXKgL4AyE/AkACQAJAIBctAPwDQQFrDgIBAAILIEQgP5RDCtcjPJQhPwsgP0MAAAAAYA0CCwJAAkACfSATQQFNBEAgCSoCmAMgDiAWQQEgOxAiIA4gFkEBIDsQIZKSITogBgwBCyAGITogCSoClAMgDiATQQEgOxAiIA4gE0EBIDsQIZKSCyI/ID9cIAkqApQDIkEgQVxyRQRAID8gQZOLQxe30ThdDQEMAgsgPyA/WyBBIEFbcg0BCyAJKgKYAyJBIEFcIg4gOiA6XHJFBEAgOiBBk4tDF7fROF1FDQEMAwsgOiA6Ww0AIA4NAgsgCSA/IDogD0EAQQAgOyBFQQFBAyAKICIgDBA9GgwBCyAJIEIgCRBOkyAOQQAgDyBEEFGSOAKgAwsgDUEANgI4IA0gDSkDaDcDMCAYIA0oAnAQPCANQegAahAuIA0oAjgiCQRAA0AgCSgCACEOIAkQJyAOIgkNAAsLIA1BADYCOCANKAJsIQkgDSgCaCIOIA0oAogBRw0AIAkgDSgCjAFHDQALCyANKAJwIgkEQANAIAkoAgAhDiAJECcgDiIJDQALCyALBEADQCALKAIAIQkgCxAnIAkiCw0ACwsgPCA+kiA9kiE+IBJBAWoiEiAbRw0ACwsgDSgCkAEiCUUNAANAIAkoAgAhCyAJECcgCyIJDQALCyAAQZQDaiIQIABBAiAPIFAgQCBAECU4AgAgAEGYA2oiESAAQQAgDyBRIEcgQBAlOAIAAkAgEEGBAiATQQN0dkEBcUECdGoCfQJAIB5BAUcEQCAALQAXQQNxIglBAkYgHkECR3INAQsgACATIA8gSCBJIEAQJQwBCyAeQQJHIAlBAkdyDQEgSiAAIA8gEyBIIEkgQBB0Ij4gSiAHkiIGIAYgPl4bID4gBiAGIAZcGyAGIAZbID4gPltxGyIGIAYgSl0bIEogBiAGIAZcGyAGIAZbIEogSltxGws4AgALAkAgEEGBAiAWQQN0dkEBcUECdGoCfQJAIBpBAUcEQCAaQQJHIgkgAC0AF0EDcSILQQJGcg0BCyAAIBYgDyBGIEySIE0gQBAlDAELIAkgC0ECR3INASBGIAAgDyAWIEYgTJIgTSBAEHQiByBGIESSIgYgBiAHXhsgByAGIAYgBlwbIAYgBlsgByAHW3EbIgYgBiBGXRsgRiAGIAYgBlwbIAYgBlsgRiBGW3EbCzgCAAsCQCAIRQ0AAkAgAC8AFUGAgANxQYCAAkcNACANQYgBaiAAEDIDQCANKAKMASIJIA0oAogBIgtyRQRAIA0oApABIglFDQIDQCAJKAIAIQsgCRAnIAsiCQ0ACwwCCyALKALsAyALKALoAyILa0ECdSAJTQ0DIAsgCUECdGooAgAiCS8AFUGA4ABxQYDAAEcEQCAJAn8CQAJAAkAgFkECaw4CAAECCyAJQZQDaiEOIBAqAgAgCSoCnAOTIQZBAAwCCyAJQZQDaiEOIBAqAgAgCSoCpAOTIQZBAgwBCyARKgIAIQYCQAJAIBYOAgABCgsgCUGYA2ohDiAGIAkqAqADkyEGQQEMAQsgCUGYA2ohDiAGIAkqAqgDkyEGQQMLQQJ0aiAGIA4qAgCTOAKcAwsgDUGIAWoQLgwACwALAkAgEyAWckEBcUUNACAWQQFxIRQgE0EBcSEVIA1BiAFqIAAQMgNAIA0oAowBIgkgDSgCiAEiC3JFBEAgDSgCkAEiCUUNAgNAIAkoAgAhCyAJECcgCyIJDQALDAILIAsoAuwDIAsoAugDIgtrQQJ1IAlNDQMCQCALIAlBAnRqKAIAIgkvABUgCS0AF0EQdHIiC0GAgDBxQYCAEEYgC0GA4ABxQYDAAEZyDQAgFQRAAn8CfwJAAkACQCATQQFrDgMAAQINCyAJQZgDaiEOIAlBqANqIQtBASESIBEMAwsgCUGUA2ohDkECIRIgCUGcA2oMAQsgCUGUA2ohDkEAIRIgCUGkA2oLIQsgEAshGyAJIBJBAnRqIBsqAgAgDioCAJMgCyoCAJM4ApwDCyAURQ0AAn8CfwJAAkACQCAWQQFrDgMAAQIMCyAJQZgDaiELIAlBqANqIRJBASEXIBEMAwsgCUGUA2ohCyAJQZwDaiESQQIMAQsgCUGUA2ohCyAJQaQDaiESQQALIRcgEAshDiAJIBdBAnRqIA4qAgAgCyoCAJMgEioCAJM4ApwDCyANQYgBahAuDAALAAsgAC8AFUGA4ABxICJBAUZyRQRAIAAtAABBCHFFDQELIAAgACAeIAQgE0EBSxsgDyAKICIgDEMAAAAAQwAAAAAgOyBFEH4aCyANKAJYIglFDQIDQCAJKAIAIQsgCRAnIAsiCQ0ACwwCCxACAAsgABBeCyANQaABaiQADAELECQACyAAIAM6AKgBIAAgACgC9AMoAgw2AqQBIB0NACAKIAooAggiAyAAKAKsASIOQQFqIgkgAyAJSxs2AgggDkEIRgRAIABBADYCrAFBACEOCyAIBH8gAEHwAmoFIAAgDkEBajYCrAEgACAOQRhsakGwAWoLIgMgBTYCDCADIAQ2AgggAyACOAIEIAMgATgCACADIAAqApQDOAIQIAMgACoCmAM4AhRBACEdCyAIBEAgACAAKQKUAzcCjAMgACAALQAAIgNBAXIiBEH7AXEgBCADQQRxGzoAAAsgACAMNgKgASArIB1Fcgs1AQF/IAEgACgCBCICQQF1aiEBIAAoAgAhACABIAJBAXEEfyABKAIAIABqKAIABSAACxECAAt9ACAAQRRqIgAgAUGBAiACQQN0dkH/AXEgAyAEEC0gACACQQEgBBAiIAAgAkEBIAQQIZKSIQQCQAJAAkACQCAFKAIADgMAAQADCyAGKgIAIgMgAyAEIAMgBF0bIAQgBFwbIQQMAQsgBCAEXA0BIAVBAjYCAAsgBiAEOAIACwuMAQIBfwF9IAAoAuQDRQRAQwAAAAAPCyAAQfwAaiIBIAAvARwQICICIAJbBEAgASAALwEcECAPCwJAIAAoAvQDLQAIQQFxDQAgASAALwEYECAiAiACXA0AIAEgAC8BGBAgQwAAAABdRQ0AIAEgAC8BGBAgjA8LQwAAgD9DAAAAACAAKAL0Ay0ACEEBcRsLcAIBfwF9IwBBEGsiBCQAIARBCGogACABQQJ0QdwlaigCACACEChDAADAfyEFAkACQAJAIAQtAAxBAWsOAgABAgsgBCoCCCEFDAELIAQqAgggA5RDCtcjPJQhBQsgBEEQaiQAIAVDAAAAACAFIAVbGwtHAQF/IAIvAAYiA0EHcQRAIAAgAUHoAGogAxAfDwsgAUHoAGohASACLwAOIgNBB3EEQCAAIAEgAxAfDwsgACABIAIvABAQHwtHAQF/IAIvAAIiA0EHcQRAIAAgAUHoAGogAxAfDwsgAUHoAGohASACLwAOIgNBB3EEQCAAIAEgAxAfDwsgACABIAIvABAQHwt7AAJAAkACQAJAIANBAWsOAgABAgsgAi8ACiIDQQdxRQ0BDAILIAIvAAgiA0EHcUUNAAwBCyACLwAEIgNBB3EEQAwBCyABQegAaiEBIAIvAAwiA0EHcQRAIAAgASADEB8PCyAAIAEgAi8AEBAfDwsgACABQegAaiADEB8LewACQAJAAkACQCADQQFrDgIAAQILIAIvAAgiA0EHcUUNAQwCCyACLwAKIgNBB3FFDQAMAQsgAi8AACIDQQdxBEAMAQsgAUHoAGohASACLwAMIgNBB3EEQCAAIAEgAxAfDwsgACABIAIvABAQHw8LIAAgAUHoAGogAxAfC84BAgN/An0jAEEQayIDJABBASEEIANBCGogAEH8AGoiBSAAIAFBAXRqQe4AaiIBLwEAEB8CQAJAIAMqAggiByACKgIAIgZcBEAgByAHWwRAIAItAAQhAgwCCyAGIAZcIQQLIAItAAQhAiAERQ0AIAMtAAwgAkH/AXFGDQELIAUgASAGIAIQOQNAIAAtAAAiAUEEcQ0BIAAgAUEEcjoAACAAKAIQIgEEQCAAIAERAAALIABBgICA/gc2ApwBIAAoAuQDIgANAAsLIANBEGokAAuFAQIDfwF+AkAgAEKAgICAEFQEQCAAIQUMAQsDQCABQQFrIgEgAEIKgCIFQvYBfiAAfKdBMHI6AAAgAEL/////nwFWIQIgBSEAIAINAAsLIAWnIgIEQANAIAFBAWsiASACQQpuIgNB9gFsIAJqQTByOgAAIAJBCUshBCADIQIgBA0ACwsgAQs3AQJ/QQQQHiICIAE2AgBBBBAeIgMgATYCAEHBOyAAQeI7QfooQb8BIAJB4jtB/ihBwAEgAxAHCw8AIAAgASACQQFBAhCLAQteAQF/IABBADYCDCAAIAM2AhACQCABBEAgAUGAgICABE8NASABQQJ0EB4hBAsgACAENgIAIAAgBCACQQJ0aiICNgIIIAAgBCABQQJ0ajYCDCAAIAI2AgQgAA8LEFgAC3kCAX8BfSMAQRBrIgMkACADQQhqIAAgAUECdEHcJWooAgAgAhBTQwAAwH8hBAJAAkACQCADLQAMQQFrDgIAAQILIAMqAgghBAwBCyADKgIIQwAAAACUQwrXIzyUIQQLIANBEGokACAEQwAAAACXQwAAAAAgBCAEWxsLnAoBC38jAEEQayIIJAAgASABLwAAQXhxIANyIgM7AAACQAJAAkACQAJAAkACQAJAAkACQCADQQhxBEAgA0H//wNxIgZBBHYhBCAGQT9NBH8gACAEQQJ0akEEagUgBEEEayIEIAAoAhgiACgCBCAAKAIAIgBrQQJ1Tw0CIAAgBEECdGoLIAI4AgAMCgsCfyACi0MAAABPXQRAIAKoDAELQYCAgIB4CyIEQf8PakH+H0sgBLIgAlxyRQRAIANBD3FBACAEa0GAEHIgBCACQwAAAABdG0EEdHIhAwwKCyAAIAAvAQAiC0EBajsBACALQYAgTw0DIAtBA00EQCAAIAtBAnRqIAI4AgQMCQsgACgCGCIDRQRAQRgQHiIDQgA3AgAgA0IANwIQIANCADcCCCAAIAM2AhgLAkAgAygCBCIEIAMoAghHBEAgBCACOAIAIAMgBEEEajYCBAwBCyAEIAMoAgAiB2siBEECdSIJQQFqIgZBgICAgARPDQECf0H/////AyAEQQF1IgUgBiAFIAZLGyAEQfz///8HTxsiBkUEQEEAIQUgCQwBCyAGQYCAgIAETw0GIAZBAnQQHiEFIAMoAgQgAygCACIHayIEQQJ1CyEKIAUgCUECdGoiCSACOAIAIAkgCkECdGsgByAEEDMhByADIAUgBkECdGo2AgggAyAJQQRqNgIEIAMoAgAhBCADIAc2AgAgBEUNACAEECMLIAAoAhgiBigCECIDIAYoAhQiAEEFdEcNByADQQFqQQBIDQAgA0H+////A0sNASADIABBBnQiACADQWBxQSBqIgQgACAESxsiAE8NByAAQQBODQILEAIAC0H/////ByEAIANB/////wdPDQULIAhBADYCCCAIQgA3AwAgCCAAEJ8BIAYoAgwhBCAIIAgoAgQiByAGKAIQIgBBH3FqIABBYHFqIgM2AgQgB0UEQCADQQFrIQUMAwsgA0EBayIFIAdBAWtzQR9LDQIgCCgCACEKDAMLQZUlQeEXQSJB3BcQCwALEFgACyAIKAIAIgogBUEFdkEAIANBIU8bQQJ0akEANgIACyAKIAdBA3ZB/P///wFxaiEDAkAgB0EfcSIHRQRAIABBAEwNASAAQSBtIQUgAEEfakE/TwRAIAMgBCAFQQJ0EDMaCyAAIAVBBXRrIgBBAEwNASADIAVBAnQiBWoiAyADKAIAQX9BICAAa3YiAEF/c3EgBCAFaigCACAAcXI2AgAMAQsgAEEATA0AQX8gB3QhDEEgIAdrIQkgAEEgTgRAIAxBf3MhDSADKAIAIQUDQCADIAUgDXEgBCgCACIFIAd0cjYCACADIAMoAgQgDHEgBSAJdnIiBTYCBCAEQQRqIQQgA0EEaiEDIABBP0shDiAAQSBrIQAgDg0ACyAAQQBMDQELIAMgAygCAEF/IAkgCSAAIAAgCUobIgVrdiAMcUF/c3EgBCgCAEF/QSAgAGt2cSIEIAd0cjYCACAAIAVrIgBBAEwNACADIAUgB2pBA3ZB/P///wFxaiIDIAMoAgBBf0EgIABrdkF/c3EgBCAFdnI2AgALIAYoAgwhACAGIAo2AgwgBiAIKAIEIgM2AhAgBiAIKAIINgIUIABFDQAgABAjIAYoAhAhAwsgBiADQQFqNgIQIAYoAgwgA0EDdkH8////AXFqIgAgACgCAEF+IAN3cTYCACABLwAAIQMLIANBB3EgC0EEdHJBCHIhAwsgASADOwAAIAhBEGokAAuPAQIBfwF9IwBBEGsiAyQAIANBCGogAEHoAGogAEHUAEHWACABQf4BcUECRhtqLwEAIgEgAC8BWCABQQdxGxAfQwAAwH8hBAJAAkACQCADLQAMQQFrDgIAAQILIAMqAgghBAwBCyADKgIIIAKUQwrXIzyUIQQLIANBEGokACAEQwAAAACXQwAAAAAgBCAEWxsL2AICBH8BfSMAQSBrIgMkAAJAIAAoAgwiAQRAIAAgACoClAMgACoCmAMgAREnACIFIAVbDQEgA0GqHjYCACAAQQVB2CUgAxAsECQACyADQRBqIAAQMgJAIAMoAhAiAiADKAIUIgFyRQ0AAkADQCABIAIoAuwDIAIoAugDIgJrQQJ1SQRAIAIgAUECdGooAgAiASgC3AMNAyABLwAVIAEtABdBEHRyIgJBgOAAcUGAwABHBEAgAkEIdkEPcSICBH8gAgUgAC0AFUEEdgtBBUYEQCAALQAUQQhxDQQLIAEtAABBAnENAyAEIAEgBBshBAsgA0EQahAuIAMoAhQiASADKAIQIgJyDQEMAwsLEAIACyABIQQLIAMoAhgiAQRAA0AgASgCACECIAEQIyACIgENAAsLIARFBEAgACoCmAMhBQwBCyAEEE4gBCoCoAOSIQULIANBIGokACAFC6EDAQh/AkAgACgC6AMiBSAAKALsAyIHRwRAA0AgACAFKAIAIgIoAuQDRwRAAkAgACgC9AMoAgAiAQRAIAIgACAGIAERBgAiAQ0BC0GIBBAeIgEgAigCEDYCECABIAIpAgg3AgggASACKQIANwIAIAFBFGogAkEUakHoABArGiABQgA3AoABIAFB/ABqIgNBADsBACABQgA3AogBIAFCADcCkAEgAyACQfwAahCgASABQZgBaiACQZgBakHQAhArGiABQQA2AvADIAFCADcC6AMgAigC7AMiAyACKALoAyIERwRAIAMgBGsiBEEASA0FIAEgBBAeIgM2AuwDIAEgAzYC6AMgASADIARqNgLwAyACKALoAyIEIAIoAuwDIghHBEADQCADIAQoAgA2AgAgA0EEaiEDIARBBGoiBCAIRw0ACwsgASADNgLsAwsgASACKQL0AzcC9AMgASACKAKEBDYChAQgASACKQL8AzcC/AMgAUEANgLkAwsgBSABNgIAIAEgADYC5AMLIAZBAWohBiAFQQRqIgUgB0cNAAsLDwsQAgALUAACQAJAAkACQAJAIAIOBAQAAQIDCyAAIAEgAUEwahBDDwsgACABIAFBMGogAxBEDwsgACABIAFBMGoQQg8LECQACyAAIAEgAUEwaiADEEULcAIBfwF9IwBBEGsiBCQAIARBCGogACABQQJ0QdwlaigCACACEDZDAADAfyEFAkACQAJAIAQtAAxBAWsOAgABAgsgBCoCCCEFDAELIAQqAgggA5RDCtcjPJQhBQsgBEEQaiQAIAVDAAAAACAFIAVbGwt5AgF/AX0jAEEQayIDJAAgA0EIaiAAIAFBAnRB7CVqKAIAIAIQU0MAAMB/IQQCQAJAAkAgAy0ADEEBaw4CAAECCyADKgIIIQQMAQsgAyoCCEMAAAAAlEMK1yM8lCEECyADQRBqJAAgBEMAAAAAl0MAAAAAIAQgBFsbC1QAAkACQAJAAkACQCACDgQEAAECAwsgACABIAFBwgBqEEMPCyAAIAEgAUHCAGogAxBEDwsgACABIAFBwgBqEEIPCxAkAAsgACABIAFBwgBqIAMQRQsvACAAIAJFQQF0IgIgASADEGAgACACIAEQS5IgACACIAEgAxB/IAAgAiABEFKSkgvOAQIDfwJ9IwBBEGsiAyQAQQEhBCADQQhqIABB/ABqIgUgACABQQF0akH2AGoiAS8BABAfAkACQCADKgIIIgcgAioCACIGXARAIAcgB1sEQCACLQAEIQIMAgsgBiAGXCEECyACLQAEIQIgBEUNACADLQAMIAJB/wFxRg0BCyAFIAEgBiACEDkDQCAALQAAIgFBBHENASAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQALCyADQRBqJAALzgECA38CfSMAQRBrIgMkAEEBIQQgA0EIaiAAQfwAaiIFIAAgAUEBdGpB8gBqIgEvAQAQHwJAAkAgAyoCCCIHIAIqAgAiBlwEQCAHIAdbBEAgAi0ABCECDAILIAYgBlwhBAsgAi0ABCECIARFDQAgAy0ADCACQf8BcUYNAQsgBSABIAYgAhA5A0AgAC0AACIBQQRxDQEgACABQQRyOgAAIAAoAhAiAQRAIAAgAREAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsgA0EQaiQACwoAIABBMGtBCkkLBQAQAgALBAAgAAsUACAABEAgACAAKAIAKAIEEQAACwsrAQF/IAAoAgwiAQRAIAEQIwsgACgCACIBBEAgACABNgIEIAEQIwsgABAjC4EEAQN/IwBBEGsiAyQAIABCADcCBCAAQcEgOwAVIABCADcCDCAAQoCAgICAgIACNwIYIAAgAC0AF0HgAXE6ABcgACAALQAAQeABcUEFcjoAACAAIAAtABRBgAFxOgAUIABBIGpBAEHOABAqGiAAQgA3AXIgAEGEgBA2AW4gAEEANgF6IABCADcCgAEgAEIANwKIASAAQgA3ApABIABCADcCoAEgAEKAgICAgICA4P8ANwKYASAAQQA6AKgBIABBrAFqQQBBxAEQKhogAEHwAmohBCAAQbABaiECA0AgAkKAgID8i4CAwL9/NwIQIAJCgYCAgBA3AgggAkKAgID8i4CAwL9/NwIAIAJBGGoiAiAERw0ACyAAQoCAgPyLgIDAv383AvACIABCgICA/IuAgMC/fzcCgAMgAEKBgICAEDcC+AIgAEKAgID+h4CA4P8ANwKUAyAAQoCAgP6HgIDg/wA3AowDIABBiANqIgIgAi0AAEH4AXE6AAAgAEGcA2pBAEHYABAqGiAAQQA6AIQEIABBgICA/gc2AoAEIABBADoA/AMgAEGAgID+BzYC+AMgACABNgL0AyABBEAgAS0ACEEBcQRAIAAgAC0AFEHzAXFBCHI6ABQgACAALwAVQfD/A3FBBHI7ABULIANBEGokACAADwsgA0GiGjYCACADEHIQJAALMwAgACABQQJ0QfwlaigCAEECdGoqApQDIABBFGoiACABQQEgAhAiIAAgAUEBIAIQIZKSC44DAQp/IwBB0AJrIgEkACAAKALoAyIDIAAoAuwDIgVHBEAgAUGMAmohBiABQeABaiEHIAFBIGohCCABQRxqIQkgAUEQaiEEA0AgAygCACICLQAXQRB0QYCAMHFBgIAgRgRAIAFBCGpBAEHEAhAqGiABQYCAgP4HNgIMIARBADoACCAEQgA3AgAgCUEAQcQBECoaIAghAANAIABCgICA/IuAgMC/fzcCECAAQoGAgIAQNwIIIABCgICA/IuAgMC/fzcCACAAQRhqIgAgB0cNAAsgAUKAgID8i4CAwL9/NwPwASABQoGAgIAQNwPoASABQoCAgPyLgIDAv383A+ABIAFCgICA/oeAgOD/ADcChAIgAUKAgID+h4CA4P8ANwL8ASABIAEtAPgBQfgBcToA+AEgBkEAQcAAECoaIAJBmAFqIAFBCGpBxAIQKxogAkIANwKMAyACIAItAAAiAEEBciIKQfsBcSAKIABBBHEbOgAAIAIQTyACEF4LIANBBGoiAyAFRw0ACwsgAUHQAmokAAtMAQF/QQEhAQJAIAAtAB5BB3ENACAALQAiQQdxDQAgAC0ALkEHcQ0AIAAtACpBB3ENACAALQAmQQdxDQAgAC0AKEEHcUEARyEBCyABC3YCAX8BfSMAQRBrIgQkACAEQQhqIAAgAUECdEHcJWooAgAgAhBQQwAAwH8hBQJAAkACQCAELQAMQQFrDgIAAQILIAQqAgghBQwBCyAEKgIIIAOUQwrXIzyUIQULIARBEGokACAFQwAAAACXQwAAAAAgBSAFWxsLogQCBn8CfgJ/QQghBAJAAkAgAEFHSw0AA0BBCCAEIARBCE0bIQRB6DopAwAiBwJ/QQggAEEDakF8cSAAQQhNGyIAQf8ATQRAIABBA3ZBAWsMAQsgAEEdIABnIgFrdkEEcyABQQJ0a0HuAGogAEH/H00NABpBPyAAQR4gAWt2QQJzIAFBAXRrQccAaiIBIAFBP08bCyIDrYgiCFBFBEADQCAIIAh6IgiIIQcCfiADIAinaiIDQQR0IgJB6DJqKAIAIgEgAkHgMmoiBkcEQCABIAQgABBjIgUNBSABKAIEIgUgASgCCDYCCCABKAIIIAU2AgQgASAGNgIIIAEgAkHkMmoiAigCADYCBCACIAE2AgAgASgCBCABNgIIIANBAWohAyAHQgGIDAELQeg6Qeg6KQMAQn4gA62JgzcDACAHQgGFCyIIQgBSDQALQeg6KQMAIQcLAkAgB1BFBEBBPyAHeadrIgZBBHQiAkHoMmooAgAhAQJAIAdCgICAgARUDQBB4wAhAyABIAJB4DJqIgJGDQADQCADRQ0BIAEgBCAAEGMiBQ0FIANBAWshAyABKAIIIgEgAkcNAAsgAiEBCyAAQTBqEGQNASABRQ0EIAEgBkEEdEHgMmoiAkYNBANAIAEgBCAAEGMiBQ0EIAEoAggiASACRw0ACwwECyAAQTBqEGRFDQMLQQAhBSAEIARBAWtxDQEgAEFHTQ0ACwsgBQwBC0EACwtwAgF/AX0jAEEQayIEJAAgBEEIaiAAIAFBAnRB7CVqKAIAIAIQKEMAAMB/IQUCQAJAAkAgBC0ADEEBaw4CAAECCyAEKgIIIQUMAQsgBCoCCCADlEMK1yM8lCEFCyAEQRBqJAAgBUMAAAAAIAUgBVsbC6ADAQN/IAEgAEEEaiIEakEBa0EAIAFrcSIFIAJqIAAgACgCACIBakEEa00EfyAAKAIEIgMgACgCCDYCCCAAKAIIIAM2AgQgBCAFRwRAIAAgAEEEaygCAEF+cWsiAyAFIARrIgQgAygCAGoiBTYCACAFQXxxIANqQQRrIAU2AgAgACAEaiIAIAEgBGsiATYCAAsCQCABIAJBGGpPBEAgACACakEIaiIDIAEgAmtBCGsiATYCACABQXxxIANqQQRrIAFBAXI2AgAgAwJ/IAMoAgBBCGsiAUH/AE0EQCABQQN2QQFrDAELIAFnIQQgAUEdIARrdkEEcyAEQQJ0a0HuAGogAUH/H00NABpBPyABQR4gBGt2QQJzIARBAXRrQccAaiIBIAFBP08bCyIBQQR0IgRB4DJqNgIEIAMgBEHoMmoiBCgCADYCCCAEIAM2AgAgAygCCCADNgIEQeg6Qeg6KQMAQgEgAa2GhDcDACAAIAJBCGoiATYCACABQXxxIABqQQRrIAE2AgAMAQsgACABakEEayABNgIACyAAQQRqBSADCwvmAwEFfwJ/QbAwKAIAIgEgAEEHakF4cSIDaiECAkAgA0EAIAEgAk8bDQAgAj8AQRB0SwRAIAIQFkUNAQtBsDAgAjYCACABDAELQfw7QTA2AgBBfwsiAkF/RwRAIAAgAmoiA0EQayIBQRA2AgwgAUEQNgIAAkACf0HgOigCACIABH8gACgCCAVBAAsgAkYEQCACIAJBBGsoAgBBfnFrIgRBBGsoAgAhBSAAIAM2AghBcCAEIAVBfnFrIgAgACgCAGpBBGstAABBAXFFDQEaIAAoAgQiAyAAKAIINgIIIAAoAgggAzYCBCAAIAEgAGsiATYCAAwCCyACQRA2AgwgAkEQNgIAIAIgAzYCCCACIAA2AgRB4DogAjYCAEEQCyACaiIAIAEgAGsiATYCAAsgAUF8cSAAakEEayABQQFyNgIAIAACfyAAKAIAQQhrIgFB/wBNBEAgAUEDdkEBawwBCyABQR0gAWciA2t2QQRzIANBAnRrQe4AaiABQf8fTQ0AGkE/IAFBHiADa3ZBAnMgA0EBdGtBxwBqIgEgAUE/TxsLIgFBBHQiA0HgMmo2AgQgACADQegyaiIDKAIANgIIIAMgADYCACAAKAIIIAA2AgRB6DpB6DopAwBCASABrYaENwMACyACQX9HC80BAgN/An0jAEEQayIDJABBASEEIANBCGogAEH8AGoiBSAAIAFBAXRqQSBqIgEvAQAQHwJAAkAgAyoCCCIHIAIqAgAiBlwEQCAHIAdbBEAgAi0ABCECDAILIAYgBlwhBAsgAi0ABCECIARFDQAgAy0ADCACQf8BcUYNAQsgBSABIAYgAhA5A0AgAC0AACIBQQRxDQEgACABQQRyOgAAIAAoAhAiAQRAIAAgAREAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsgA0EQaiQAC0ABAX8CQEGsOy0AAEEBcQRAQag7KAIAIQIMAQtBAUGAJxAMIQJBrDtBAToAAEGoOyACNgIACyACIAAgAUEAEBMLzQECA38CfSMAQRBrIgMkAEEBIQQgA0EIaiAAQfwAaiIFIAAgAUEBdGpBMmoiAS8BABAfAkACQCADKgIIIgcgAioCACIGXARAIAcgB1sEQCACLQAEIQIMAgsgBiAGXCEECyACLQAEIQIgBEUNACADLQAMIAJB/wFxRg0BCyAFIAEgBiACEDkDQCAALQAAIgFBBHENASAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQALCyADQRBqJAALDwAgASAAKAIAaiACOQMACw0AIAEgACgCAGorAwALCwAgAARAIAAQIwsLxwECBH8CfSMAQRBrIgIkACACQQhqIABB/ABqIgQgAEEeaiIFLwEAEB9BASEDAkACQCACKgIIIgcgASoCACIGXARAIAcgB1sEQCABLQAEIQEMAgsgBiAGXCEDCyABLQAEIQEgA0UNACACLQAMIAFB/wFxRg0BCyAEIAUgBiABEDkDQCAALQAAIgFBBHENASAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQALCyACQRBqJAALlgMCA34CfyAAvSICQjSIp0H/D3EiBEH/D0YEQCAARAAAAAAAAPA/oiIAIACjDwsgAkIBhiIBQoCAgICAgIDw/wBYBEAgAEQAAAAAAAAAAKIgACABQoCAgICAgIDw/wBRGw8LAn4gBEUEQEEAIQQgAkIMhiIBQgBZBEADQCAEQQFrIQQgAUIBhiIBQgBZDQALCyACQQEgBGuthgwBCyACQv////////8Hg0KAgICAgICACIQLIQEgBEH/B0oEQANAAkAgAUKAgICAgICACH0iA0IAUw0AIAMiAUIAUg0AIABEAAAAAAAAAACiDwsgAUIBhiEBIARBAWsiBEH/B0oNAAtB/wchBAsCQCABQoCAgICAgIAIfSIDQgBTDQAgAyIBQgBSDQAgAEQAAAAAAAAAAKIPCyABQv////////8HWARAA0AgBEEBayEEIAFCgICAgICAgARUIQUgAUIBhiEBIAUNAAsLIAJCgICAgICAgICAf4MgAUKAgICAgICACH0gBK1CNIaEIAFBASAEa62IIARBAEobhL8LiwEBA38DQCAAQQR0IgFB5DJqIAFB4DJqIgI2AgAgAUHoMmogAjYCACAAQQFqIgBBwABHDQALQTAQZBpBmDtBBjYCAEGcO0EANgIAEJwBQZw7Qcg7KAIANgIAQcg7QZg7NgIAQcw7QcMBNgIAQdA7QQA2AgAQjwFB0DtByDsoAgA2AgBByDtBzDs2AgALjwEBAn8jAEEQayIEJAACfUMAAAAAIAAvABVBgOAAcUUNABogBEEIaiAAQRRqIgBBASACQQJGQQF0IAFB/gFxQQJHGyIFIAIQNgJAIAQtAAxFDQAgBEEIaiAAIAUgAhA2IAQtAAxBA0YNACAAIAEgAiADEIEBDAELIAAgASACIAMQgAGMCyEDIARBEGokACADC4QBAQJ/AkACQCAAKALoAyICIAAoAuwDIgNGDQADQCACKAIAIAFGDQEgAkEEaiICIANHDQALDAELIAIgA0YNACABLQAXQRB0QYCAMHFBgIAgRgRAIAAgACgC4ANBAWs2AuADCyACIAJBBGoiASADIAFrEDMaIAAgA0EEazYC7ANBAQ8LQQALCwBByDEgACABEEkLPAAgAEUEQCACQQVHQQAgAhtFBEBBuDAgAyAEEEkaDwsgAyAEEHAaDwsgACABIAIgAyAEIAAoAgQRDQAaCyYBAX8jAEEQayIBJAAgASAANgIMQbgwQdglIAAQSRogAUEQaiQAC4cDAwN/BXwCfSAAKgKgA7siBiACoCECIAAqApwDuyIHIAGgIQggACgC9AMqAhgiC0MAAAAAXARAIAAqApADuyEJIAAqAowDIQwgACAHIAu7IgFBACAALQAAQRBxIgNBBHYiBBA0OAKcAyAAIAYgAUEAIAQQNDgCoAMgASAMuyIHohBsIgYgBmIiBEUgBplELUMc6+I2Gj9jcUUEQCAEIAZEAAAAAAAA8L+gmUQtQxzr4jYaP2NFciEFCyACIAmgIQogCCAHoCEHAn8gASAJohBsIgYgBmIiBEUEQEEAIAaZRC1DHOviNho/Yw0BGgsgBCAGRAAAAAAAAPC/oJlELUMc6+I2Gj9jRXILIQQgACAHIAEgA0EARyIDIAVxIAMgBUEBc3EQNCAIIAFBACADEDSTOAKMAyAAIAogASADIARxIAMgBEEBc3EQNCACIAFBACADEDSTOAKQAwsgACgC6AMiAyAAKALsAyIARwRAA0AgAygCACAIIAIQcyADQQRqIgMgAEcNAAsLC1UBAX0gAEEUaiIAIAEgAkECSSICIAQgBRA1IQYgACABIAIgBCAFEC0iBUMAAAAAYCADIAVecQR9IAUFIAZDAAAAAGBFBEAgAw8LIAYgAyADIAZdGwsLeAEBfwJAIAAoAgAiAgRAA0AgAUUNAiACIAEoAgQ2AgQgAiABKAIINgIIIAEoAgAhASAAKAIAIQAgAigCACICDQALCyAAIAEQPA8LAkAgAEUNACAAKAIAIgFFDQAgAEEANgIAA0AgASgCACEAIAEQIyAAIgENAAsLC5kCAgZ/AX0gAEEUaiEHQQMhBCAALQAUQQJ2QQNxIQUCQAJ/AkAgAUEBIAAoAuQDGyIIQQJGBEACQCAFQQJrDgIEAAILQQIhBAwDC0ECIQRBACAFQQFLDQEaCyAECyEGIAUhBAsgACAEIAggAyACIARBAkkiBRsQbiEKIAAgBiAIIAIgAyAFGxBuIQMgAEGcA2oiAEEBIAFBAkZBAXQiCCAFG0ECdGogCiAHIAQgASACECKSOAIAIABBAyABQQJHQQF0IgkgBRtBAnRqIAogByAEIAEgAhAhkjgCACAAIAhBASAGQQF2IgQbQQJ0aiADIAcgBiABIAIQIpI4AgAgACAJQQMgBBtBAnRqIAMgByAGIAEgAhAhkjgCAAvUAgEDfyMAQdACayIBJAAgAUEIakEAQcQCECoaIAFBADoAGCABQgA3AxAgAUGAgID+BzYCDCABQRxqQQBBxAEQKhogAUHgAWohAyABQSBqIQIDQCACQoCAgPyLgIDAv383AhAgAkKBgICAEDcCCCACQoCAgPyLgIDAv383AgAgAkEYaiICIANHDQALIAFCgICA/IuAgMC/fzcD8AEgAUKBgICAEDcD6AEgAUKAgID8i4CAwL9/NwPgASABQoCAgP6HgIDg/wA3AoQCIAFCgICA/oeAgOD/ADcC/AEgASABLQD4AUH4AXE6APgBIAFBjAJqQQBBwAAQKhogAEGYAWogAUEIakHEAhArGiAAQgA3AowDIAAgAC0AAEEBcjoAACAAEE8gACgC6AMiAiAAKALsAyIARwRAA0AgAigCABB3IAJBBGoiAiAARw0ACwsgAUHQAmokAAuuAgIKfwJ9IwBBIGsiASQAIAFBgAI7AB4gAEHuAGohByAAQfgDaiEFIABB8gBqIQggAEH2AGohCSAAQfwAaiEDQQAhAANAIAFBEGogAyAJIAFBHmogBGotAAAiAkEBdCIEaiIGLwEAEB8CQAJAIAEtABRFDQAgAUEIaiADIAYvAQAQHyABIAMgBCAIai8BABAfIAEtAAwgAS0ABEcNAAJAIAEqAggiDCAMXCIKIAEqAgAiCyALXHJFBEAgDCALk4tDF7fROF0NAQwCCyAKRSALIAtbcg0BCyABQRBqIAMgBi8BABAfDAELIAFBEGogAyAEIAdqLwEAEB8LIAUgAkEDdGoiAiABLQAUOgAEIAIgASgCEDYCAEEBIQQgACECQQEhACACRQ0ACyABQSBqJAALMgACf0EAIAAvABVBgOAAcUGAwABGDQAaQQEgABA7QwAAAABcDQAaIAAQQEMAAAAAXAsLewEBfSADIASTIgMgA1sEfUMAAAAAIABBFGoiACABIAIgBSAGEDUiByAEkyAHIAdcGyIHQ///f38gACABIAIgBSAGEC0iBSAEkyAFIAVcGyIEIAMgAyAEXhsiAyADIAddGyAHIAMgAyADXBsgAyADWyAHIAdbcRsFIAMLC98FAwR/BX0BfCAJQwAAAABdIAhDAAAAAF1yBH8gDQUgBSESIAEhEyADIRQgByERIAwqAhgiFUMAAAAAXARAIAG7IBW7IhZBAEEAEDQhEyADuyAWQQBBABA0IRQgBbsgFkEAQQAQNCESIAe7IBZBAEEAEDQhEQsCf0EAIAAgBEcNABogEiATk4tDF7fROF0gEyATXCINIBIgElxyRQ0AGkEAIBIgElsNABogDQshDAJAIAIgBkcNACAUIBRcIg0gESARXHJFBEAgESAUk4tDF7fROF0hDwwBCyARIBFbDQAgDSEPC0EBIQ5BASENAkAgDA0AIAEgCpMhAQJAIABFBEAgASABXCIAIAggCFxyRQRAQQAhDCABIAiTi0MXt9E4XUUNAgwDC0EAIQwgCCAIWw0BIAANAgwBCyAAQQJGIQwgAEECRw0AIARBAUcNACABIAhgDQECQCAIIAhcIgAgASABXHJFBEAgASAIk4tDF7fROF1FDQEMAwtBACENIAEgAVsNAkEBIQ0gAA0CC0EAIQ0MAQtBACENIAggCFwiACABIAVdRXINACAMRSABIAFcIhAgBSAFXHIgBEECR3JyDQBBASENIAEgCGANAEEAIQ0gACAQcg0AIAEgCJOLQxe30ThdIQ0LAkAgDw0AIAMgC5MhAQJAAkAgAkUEQCABIAFcIgIgCSAJXHJFBEBBACEAIAEgCZOLQxe30ThdRQ0CDAQLQQAhACAJIAlbDQEgAg0DDAELIAJBAkYhACACQQJHIAZBAUdyDQAgASAJYARADAMLIAkgCVwiACABIAFcckUEQCABIAmTi0MXt9E4XUUNAgwDC0EAIQ4gASABWw0CQQEhDiAADQIMAQsgCSAJXCICIAEgB11Fcg0AIABFIAEgAVwiBCAHIAdcciAGQQJHcnINACABIAlgDQFBACEOIAIgBHINASABIAmTi0MXt9E4XSEODAELQQAhDgsgDSAOcQsL4wEBA38jAEEQayIBJAACQAJAIAAtABRBCHFFDQBBASEDIAAvABVB8AFxQdAARg0AIAEgABAyIAEoAgQhAAJAIAEoAgAiAkUEQEEAIQMgAEUNAQsDQCACKALsAyACKALoAyICa0ECdSAATQ0DIAIgAEECdGooAgAiAC8AFSAALQAXQRB0ciIAQYDgAHFBgMAARyAAQYAecUGACkZxIgMNASABEC4gASgCBCIAIAEoAgAiAnINAAsLIAEoAggiAEUNAANAIAAoAgAhAiAAECMgAiIADQALCyABQRBqJAAgAw8LEAIAC7IBAQR/AkACQCAAKAIEIgMgACgCACIEKALsAyAEKALoAyIBa0ECdUkEQCABIANBAnRqIQIDQCACKAIAIgEtABdBEHRBgIAwcUGAgCBHDQMgASgC7AMgASgC6ANGDQJBDBAeIgIgBDYCBCACIAM2AgggAiAAKAIINgIAQQAhAyAAQQA2AgQgACABNgIAIAAgAjYCCCABIQQgASgC6AMiAiABKALsA0cNAAsLEAIACyAAEC4LC4wQAgx/B30jAEEgayINJAAgDUEIaiABEDIgDSgCCCIOIA0oAgwiDHIEQCADQQEgAxshFSAAQRRqIRQgBUEBaiEWA0ACQAJAAn8CQAJAAkACQAJAIAwgDigC7AMgDigC6AMiDmtBAnVJBEAgDiAMQQJ0aigCACILLwAVIAstABdBEHRyIgxBgIAwcUGAgBBGDQgCQAJAIAxBDHZBA3EOAwEKAAoLIAkhFyAKIRogASgC9AMtABRBBHFFBEAgACoClAMgFEECQQEQMCAUQQJBARAvkpMhFyAAKgKYAyAUQQBBARAwIBRBAEEBEC+SkyEaCyALQRRqIQ8gAS0AFEECdkEDcSEQAkACfwJAIANBAkciE0UEQEEAIQ5BAyEMAkAgEEECaw4CBAACC0ECIQwMAwtBAiEMQQAgEEEBSw0BGgsgDAshDiAQIQwLIA9BAkEBIBcQIiAPQQJBASAXECGSIR0gD0EAQQEgFxAiIRwgD0EAQQEgFxAhIRsgCyoC+AMhGAJAAkACQAJAIAstAPwDQQFrDgIBAAILIBggF5RDCtcjPJQhGAsgGEMAAAAAYEUNACAdIAsgA0EAIBcgFxAxkiEYDAELIA1BGGogDyALQTJqIhAgAxBFQwAAwH8hGCANLQAcRQ0AIA1BGGogDyAQIAMQRCANLQAcRQ0AIA1BGGogDyAQIAMQRSANLQAcQQNGDQAgDUEYaiAPIBAgAxBEIA0tABxBA0YNACALQQIgAyAAKgKUAyAUQQIgAxBLIBRBAiADEFKSkyAPQQIgAyAXEFEgD0ECIAMgFxCDAZKTIBcgFxAlIRgLIBwgG5IhHCALKgKABCEZAkACQAJAIAstAIQEQQFrDgIBAAILIBkgGpRDCtcjPJQhGQsgGUMAAAAAYEUNACAcIAsgA0EBIBogFxAxkiEZDAMLIA1BGGogDyALQTJqIhAQQwJAIA0tABxFDQAgDUEYaiAPIBAQQiANLQAcRQ0AIA1BGGogDyAQEEMgDS0AHEEDRg0AIA1BGGogDyAQEEIgDS0AHEEDRg0AIAtBACADIAAqApgDIBRBACADEEsgFEEAIAMQUpKTIA9BACADIBoQUSAPQQAgAyAaEIMBkpMgGiAXECUhGQwDC0MAAMB/IRkgGCAYXA0GIAtB/ABqIhAgC0H6AGoiEi8BABAgIhsgG1sNAwwFCyALLQAAQQhxDQggCxBPIAAgCyACIAstABRBA3EiDCAVIAwbIAQgFiAGIAsqApwDIAeSIAsqAqADIAiSIAkgChB+IBFyIQxBACERIAxBAXFFDQhBASERIAsgCy0AAEEBcjoAAAwICxACAAsgGCAYXCAZIBlcRg0BIAtB/ABqIhAgC0H6AGoiEi8BABAgIhsgG1wNASAYIBhcBEAgGSAckyAQIAsvAXoQIJQgHZIhGAwCCyAZIBlbDQELIBwgGCAdkyAQIBIvAQAQIJWSIRkLIBggGFwNASAZIBlbDQMLQQAMAQtBAQshEiALIBcgGCACQQFHIAxBAklxIBdDAAAAAF5xIBJxIhAbIBkgA0ECIBIgEBsgGSAZXCAXIBpBAEEGIAQgBSAGED0aIAsqApQDIA9BAkEBIBcQIiAPQQJBASAXECGSkiEYIAsqApgDIA9BAEEBIBcQIiAPQQBBASAXECGSkiEZC0EBIRAgCyAYIBkgA0EAQQAgFyAaQQFBASAEIAUgBhA9GiAAIAEgCyADIAxBASAXIBoQggEgACABIAsgAyAOQQAgFyAaEIIBIBFBAXFFBEAgCy0AAEEBcSEQCyABLQAUIhJBAnZBA3EhDAJAAn8CQAJAAkACQAJAAkACQAJAAkACfwJAIBNFBEBBACERQQMhDiAMQQJrDgIDDQELQQIhDkEAIAxBAUsNARoLIA4LIREgEkEEcUUNBCASQQhxRQ0BIAwhDgsgASEMIA8QXw0BDAILAkAgCy0ANEEHcQ0AIAstADhBB3ENACALLQBCQQdxDQAgDCEOIAEhDCALQUBrLwEAQQdxRQ0CDAELIAwhDgsgACEMCwJ/AkACQAJAIA5BAWsOAwABAgULIAtBmANqIQ4gC0GoA2ohE0EBIRIgDEGYA2oMAgsgC0GUA2ohDiALQZwDaiETQQIhEiAMQZQDagwBCyALQZQDaiEOIAtBpANqIRNBACESIAxBlANqCyEMIAsgEkECdGogDCoCACAOKgIAkyATKgIAkzgCnAMLIBFBAXFFDQUCQAJAIBFBAnEEQCABIQwgDxBfDQEMAgsgCy0ANEEHcQ0AIAstADhBB3ENACALLQBCQQdxDQAgASEMIAtBQGsvAQBBB3FFDQELIAAhDAsgEUEBaw4DAQIDAAsQJAALIAtBmANqIREgC0GoA2ohDkEBIRMgDEGYA2oMAgsgC0GUA2ohESALQZwDaiEOQQIhEyAMQZQDagwBCyALQZQDaiERIAtBpANqIQ5BACETIAxBlANqCyEMIAsgE0ECdGogDCoCACARKgIAkyAOKgIAkzgCnAMLIAsqAqADIRsgCyoCnAMgB0MAAAAAIA8QXxuTIRcCfQJAIAstADRBB3ENACALLQA4QQdxDQAgCy0AQkEHcQ0AIAtBQGsvAQBBB3ENAEMAAAAADAELIAgLIRogCyAXOAKcAyALIBsgGpM4AqADIBAhEQsgDUEIahAuIA0oAgwiDCANKAIIIg5yDQALCyANKAIQIgwEQANAIAwoAgAhACAMECMgACIMDQALCyANQSBqJAAgEUEBcQt2AgF/AX0jAEEQayIEJAAgBEEIaiAAIAFBAnRB7CVqKAIAIAIQUEMAAMB/IQUCQAJAAkAgBC0ADEEBaw4CAAECCyAEKgIIIQUMAQsgBCoCCCADlEMK1yM8lCEFCyAEQRBqJAAgBUMAAAAAl0MAAAAAIAUgBVsbC3gCAX8BfSMAQRBrIgQkACAEQQhqIABBAyACQQJHQQF0IAFB/gFxQQJHGyACEDZDAADAfyEFAkACQAJAIAQtAAxBAWsOAgABAgsgBCoCCCEFDAELIAQqAgggA5RDCtcjPJQhBQsgBEEQaiQAIAVDAAAAACAFIAVbGwt4AgF/AX0jAEEQayIEJAAgBEEIaiAAQQEgAkECRkEBdCABQf4BcUECRxsgAhA2QwAAwH8hBQJAAkACQCAELQAMQQFrDgIAAQILIAQqAgghBQwBCyAEKgIIIAOUQwrXIzyUIQULIARBEGokACAFQwAAAAAgBSAFWxsLoA0BBH8jAEEQayIJJAAgCUEIaiACQRRqIgggA0ECRkEBdEEBIARB/gFxQQJGIgobIgsgAxA2IAYgByAKGyEHAkACQAJAAkACQAJAIAktAAxFDQAgCUEIaiAIIAsgAxA2IAktAAxBA0YNACAIIAQgAyAHEIEBIABBFGogBCADEDCSIAggBCADIAcQIpIhBkEBIQMCQAJ/AkACQAJAAkAgBA4EAgMBAAcLQQIhAwwBC0EAIQMLIAMgC0YNAgJAAkAgBA4EAgIAAQYLIABBlANqIQNBAAwCCyAAQZQDaiEDQQAMAQsgAEGYA2ohA0EBCyEAIAMqAgAgAiAAQQJ0aioClAOTIAaTIQYLIAIgBEECdEHcJWooAgBBAnRqIAY4ApwDDAULIAlBCGogCCADQQJHQQF0QQMgChsiCiADEDYCQCAJLQAMRQ0AIAlBCGogCCAKIAMQNiAJLQAMQQNGDQACfwJAAkACQCAEDgQCAgABBQsgAEGUA2ohBUEADAILIABBlANqIQVBAAwBCyAAQZgDaiEFQQELIQEgBSoCACACQZQDaiIFIAFBAnRqKgIAkyAAQRRqIAQgAxAvkyAIIAQgAyAHECGTIAggBCADIAcQgAGTIQZBASEDAkACfwJAAkACQAJAIAQOBAIDAQAHC0ECIQMMAQtBACEDCyADIAtGDQICQAJAIAQOBAICAAEGCyAAQZQDaiEDQQAMAgsgAEGUA2ohA0EADAELIABBmANqIQNBAQshACADKgIAIAUgAEECdGoqAgCTIAaTIQYLIAIgBEECdEHcJWooAgBBAnRqIAY4ApwDDAULAkACQAJAIAUEQCABLQAUQQR2QQdxIgBBBUsNCEEBIAB0IgBBMnENASAAQQlxBEAgBEECdEHcJWooAgAhACAIIAQgAyAGEEEgASAAQQJ0IgBqIgEqArwDkiEGIAAgAmogAigC9AMtABRBAnEEfSAGBSAGIAEqAswDkgs4ApwDDAkLIAEgBEECdEHsJWooAgBBAnRqIgAqArwDIAggBCADIAYQYpIhBiACKAL0Ay0AFEECcUUEQCAGIAAqAswDkiEGCwJAAkACQAJAIAQOBAEBAgAICyABKgKUAyACKgKUA5MhB0ECIQMMAgsgASoCmAMgAioCmAOTIQdBASEDAkAgBA4CAgAHC0EDIQMMAQsgASoClAMgAioClAOTIQdBACEDCyACIANBAnRqIAcgBpM4ApwDDAgLIAIvABZBD3EiBUUEQCABLQAVQQR2IQULIAVBBUYEQCABLQAUQQhxRQ0CCyABLwAVQYCAA3FBgIACRgRAIAVBAmsOAgEHAwsgBUEISw0HQQEgBXRB8wNxDQYgBUECRw0CC0EAIQACfQJ/AkACQAJAAkACfwJAAkACQCAEDgQCAgABBAsgASoClAMhB0ECIQAgAUG8A2oMAgsgASoClAMhByABQcQDagwBCyABKgKYAyEHAkACQCAEDgIAAQMLQQMhACABQcADagwBC0EBIQAgAUHIA2oLIQUgByAFKgIAkyABQbwDaiIIIABBAnRqKgIAkyIHIAIoAvQDLQAUQQJxDQUaAkAgBA4EAAIDBAELQQMhACABQdADagwECxAkAAtBASEAIAFB2ANqDAILQQIhACABQcwDagwBC0EAIQAgAUHUA2oLIQUgByAFKgIAkyABIABBAnRqKgLMA5MLIAIgBEECdCIFQfwlaigCAEECdGoqApQDIAJBFGoiACAEQQEgBhAiIAAgBEEBIAYQIZKSk0MAAAA/lCAIIAVB3CVqKAIAIgVBAnRqKgIAkiAAIAQgAyAGEEGSIQYgAiAFQQJ0aiACKAL0Ay0AFEECcQR9IAYFIAYgASAFQQJ0aioCzAOSCzgCnAMMBgsgAS8AFUGAgANxQYCAAkcNBAsgASAEQQJ0QewlaigCAEECdGoiACoCvAMgCCAEIAMgBhBikiEGIAIoAvQDLQAUQQJxRQRAIAYgACoCzAOSIQYLAkACQCAEDgQBAQMAAgsgASoClAMgAioClAOTIQdBAiEDDAMLIAEqApgDIAIqApgDkyEHQQEhAwJAIAQOAgMAAQtBAyEDDAILECQACyABKgKUAyACKgKUA5MhB0EAIQMLIAIgA0ECdGogByAGkzgCnAMMAQsgBEECdEHcJWooAgAhACAIIAQgAyAGEEEgASAAQQJ0IgBqIgEqArwDkiEGIAAgAmogAigC9AMtABRBAnEEfSAGBSAGIAEqAswDkgs4ApwDCyAJQRBqJAALcAIBfwF9IwBBEGsiBCQAIARBCGogACABQQJ0QewlaigCACACEDZDAADAfyEFAkACQAJAIAQtAAxBAWsOAgABAgsgBCoCCCEFDAELIAQqAgggA5RDCtcjPJQhBQsgBEEQaiQAIAVDAAAAACAFIAVbGwscACAAIAFBCCACpyACQiCIpyADpyADQiCIpxAVCwUAEFgACzkAIABFBEBBAA8LAn8gAUGAf3FBgL8DRiABQf8ATXJFBEBB/DtBGTYCAEF/DAELIAAgAToAAEEBCwvEAgACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABQQlrDhIACgsMCgsCAwQFDAsMDAoLBwgJCyACIAIoAgAiAUEEajYCACAAIAEoAgA2AgAPCwALIAIgAigCACIBQQRqNgIAIAAgATIBADcDAA8LIAIgAigCACIBQQRqNgIAIAAgATMBADcDAA8LIAIgAigCACIBQQRqNgIAIAAgATAAADcDAA8LIAIgAigCACIBQQRqNgIAIAAgATEAADcDAA8LAAsgAiACKAIAQQdqQXhxIgFBCGo2AgAgACABKwMAOQMADwsgACACIAMRAQALDwsgAiACKAIAIgFBBGo2AgAgACABNAIANwMADwsgAiACKAIAIgFBBGo2AgAgACABNQIANwMADwsgAiACKAIAQQdqQXhxIgFBCGo2AgAgACABKQMANwMAC84BAgN/An0jAEEQayIDJABBASEEIANBCGogAEH8AGoiBSAAIAFBAXRqQegAaiIBLwEAEB8CQAJAIAMqAggiByACKgIAIgZcBEAgByAHWwRAIAItAAQhAgwCCyAGIAZcIQQLIAItAAQhAiAERQ0AIAMtAAwgAkH/AXFGDQELIAUgASAGIAIQOQNAIAAtAAAiAUEEcQ0BIAAgAUEEcjoAACAAKAIQIgEEQCAAIAERAAALIABBgICA/gc2ApwBIAAoAuQDIgANAAsLIANBEGokAAtdAQR/IAAoAgAhAgNAIAIsAAAiAxBXBEBBfyEEIAAgAkEBaiICNgIAIAFBzJmz5gBNBH9BfyADQTBrIgMgAUEKbCIEaiADIARB/////wdzShsFIAQLIQEMAQsLIAELrhQCEn8BfiMAQdAAayIIJAAgCCABNgJMIAhBN2ohFyAIQThqIRQCQAJAAkACQANAIAEhDSAHIA5B/////wdzSg0BIAcgDmohDgJAAkACQCANIgctAAAiCQRAA0ACQAJAIAlB/wFxIgFFBEAgByEBDAELIAFBJUcNASAHIQkDQCAJLQABQSVHBEAgCSEBDAILIAdBAWohByAJLQACIQogCUECaiIBIQkgCkElRg0ACwsgByANayIHIA5B/////wdzIhhKDQcgAARAIAAgDSAHECYLIAcNBiAIIAE2AkwgAUEBaiEHQX8hEgJAIAEsAAEiChBXRQ0AIAEtAAJBJEcNACABQQNqIQcgCkEwayESQQEhFQsgCCAHNgJMQQAhDAJAIAcsAAAiCUEgayIBQR9LBEAgByEKDAELIAchCkEBIAF0IgFBidEEcUUNAANAIAggB0EBaiIKNgJMIAEgDHIhDCAHLAABIglBIGsiAUEgTw0BIAohB0EBIAF0IgFBidEEcQ0ACwsCQCAJQSpGBEACfwJAIAosAAEiARBXRQ0AIAotAAJBJEcNACABQQJ0IARqQcABa0EKNgIAIApBA2ohCUEBIRUgCiwAAUEDdCADakGAA2soAgAMAQsgFQ0GIApBAWohCSAARQRAIAggCTYCTEEAIRVBACETDAMLIAIgAigCACIBQQRqNgIAQQAhFSABKAIACyETIAggCTYCTCATQQBODQFBACATayETIAxBgMAAciEMDAELIAhBzABqEIkBIhNBAEgNCCAIKAJMIQkLQQAhB0F/IQsCfyAJLQAAQS5HBEAgCSEBQQAMAQsgCS0AAUEqRgRAAn8CQCAJLAACIgEQV0UNACAJLQADQSRHDQAgAUECdCAEakHAAWtBCjYCACAJQQRqIQEgCSwAAkEDdCADakGAA2soAgAMAQsgFQ0GIAlBAmohAUEAIABFDQAaIAIgAigCACIKQQRqNgIAIAooAgALIQsgCCABNgJMIAtBf3NBH3YMAQsgCCAJQQFqNgJMIAhBzABqEIkBIQsgCCgCTCEBQQELIQ8DQCAHIRFBHCEKIAEiECwAACIHQfsAa0FGSQ0JIBBBAWohASAHIBFBOmxqQf8qai0AACIHQQFrQQhJDQALIAggATYCTAJAAkAgB0EbRwRAIAdFDQsgEkEATgRAIAQgEkECdGogBzYCACAIIAMgEkEDdGopAwA3A0AMAgsgAEUNCCAIQUBrIAcgAiAGEIcBDAILIBJBAE4NCgtBACEHIABFDQcLIAxB//97cSIJIAwgDEGAwABxGyEMQQAhEkGPCSEWIBQhCgJAAkACQAJ/AkACQAJAAkACfwJAAkACQAJAAkACQAJAIBAsAAAiB0FfcSAHIAdBD3FBA0YbIAcgERsiB0HYAGsOIQQUFBQUFBQUFA4UDwYODg4UBhQUFBQCBQMUFAkUARQUBAALAkAgB0HBAGsOBw4UCxQODg4ACyAHQdMARg0JDBMLIAgpA0AhGUGPCQwFC0EAIQcCQAJAAkACQAJAAkACQCARQf8BcQ4IAAECAwQaBQYaCyAIKAJAIA42AgAMGQsgCCgCQCAONgIADBgLIAgoAkAgDqw3AwAMFwsgCCgCQCAOOwEADBYLIAgoAkAgDjoAAAwVCyAIKAJAIA42AgAMFAsgCCgCQCAOrDcDAAwTC0EIIAsgC0EITRshCyAMQQhyIQxB+AAhBwsgFCENIAgpA0AiGVBFBEAgB0EgcSEQA0AgDUEBayINIBmnQQ9xQZAvai0AACAQcjoAACAZQg9WIQkgGUIEiCEZIAkNAAsLIAxBCHFFIAgpA0BQcg0DIAdBBHZBjwlqIRZBAiESDAMLIBQhByAIKQNAIhlQRQRAA0AgB0EBayIHIBmnQQdxQTByOgAAIBlCB1YhDSAZQgOIIRkgDQ0ACwsgByENIAxBCHFFDQIgCyAUIA1rIgdBAWogByALSBshCwwCCyAIKQNAIhlCAFMEQCAIQgAgGX0iGTcDQEEBIRJBjwkMAQsgDEGAEHEEQEEBIRJBkAkMAQtBkQlBjwkgDEEBcSISGwshFiAZIBQQRyENCyAPQQAgC0EASBsNDiAMQf//e3EgDCAPGyEMIAgpA0AiGUIAUiALckUEQCAUIQ1BACELDAwLIAsgGVAgFCANa2oiByAHIAtIGyELDAsLQQAhDAJ/Qf////8HIAsgC0H/////B08bIgoiEUEARyEQAkACfwJAAkAgCCgCQCIHQY4lIAcbIg0iD0EDcUUgEUVyDQADQCAPLQAAIgxFDQIgEUEBayIRQQBHIRAgD0EBaiIPQQNxRQ0BIBENAAsLIBBFDQICQCAPLQAARSARQQRJckUEQANAIA8oAgAiB0F/cyAHQYGChAhrcUGAgYKEeHENAiAPQQRqIQ8gEUEEayIRQQNLDQALCyARRQ0DC0EADAELQQELIRADQCAQRQRAIA8tAAAhDEEBIRAMAQsgDyAMRQ0CGiAPQQFqIQ8gEUEBayIRRQ0BQQAhEAwACwALQQALIgcgDWsgCiAHGyIHIA1qIQogC0EATgRAIAkhDCAHIQsMCwsgCSEMIAchCyAKLQAADQ0MCgsgCwRAIAgoAkAMAgtBACEHIABBICATQQAgDBApDAILIAhBADYCDCAIIAgpA0A+AgggCCAIQQhqIgc2AkBBfyELIAcLIQlBACEHAkADQCAJKAIAIg1FDQEgCEEEaiANEIYBIgpBAEgiDSAKIAsgB2tLckUEQCAJQQRqIQkgCyAHIApqIgdLDQEMAgsLIA0NDQtBPSEKIAdBAEgNCyAAQSAgEyAHIAwQKSAHRQRAQQAhBwwBC0EAIQogCCgCQCEJA0AgCSgCACINRQ0BIAhBBGogDRCGASINIApqIgogB0sNASAAIAhBBGogDRAmIAlBBGohCSAHIApLDQALCyAAQSAgEyAHIAxBgMAAcxApIBMgByAHIBNIGyEHDAgLIA9BACALQQBIGw0IQT0hCiAAIAgrA0AgEyALIAwgByAFERwAIgdBAE4NBwwJCyAIIAgpA0A8ADdBASELIBchDSAJIQwMBAsgBy0AASEJIAdBAWohBwwACwALIAANByAVRQ0CQQEhBwNAIAQgB0ECdGooAgAiAARAIAMgB0EDdGogACACIAYQhwFBASEOIAdBAWoiB0EKRw0BDAkLC0EBIQ4gB0EKTw0HA0AgBCAHQQJ0aigCAA0BIAdBAWoiB0EKRw0ACwwHC0EcIQoMBAsgCyAKIA1rIhAgCyAQShsiCSASQf////8Hc0oNAkE9IQogEyAJIBJqIgsgCyATSBsiByAYSg0DIABBICAHIAsgDBApIAAgFiASECYgAEEwIAcgCyAMQYCABHMQKSAAQTAgCSAQQQAQKSAAIA0gEBAmIABBICAHIAsgDEGAwABzECkMAQsLQQAhDgwDC0E9IQoLQfw7IAo2AgALQX8hDgsgCEHQAGokACAOC9kCAQR/IwBB0AFrIgUkACAFIAI2AswBIAVBoAFqIgJBAEEoECoaIAUgBSgCzAE2AsgBAkBBACABIAVByAFqIAVB0ABqIAIgAyAEEIoBQQBIBEBBfyEEDAELQQEgBiAAKAJMQQBOGyEGIAAoAgAhByAAKAJIQQBMBEAgACAHQV9xNgIACwJ/AkACQCAAKAIwRQRAIABB0AA2AjAgAEEANgIcIABCADcDECAAKAIsIQggACAFNgIsDAELIAAoAhANAQtBfyAAEJ0BDQEaCyAAIAEgBUHIAWogBUHQAGogBUGgAWogAyAEEIoBCyECIAgEQCAAQQBBACAAKAIkEQYAGiAAQQA2AjAgACAINgIsIABBADYCHCAAKAIUIQEgAEIANwMQIAJBfyABGyECCyAAIAAoAgAiACAHQSBxcjYCAEF/IAIgAEEgcRshBCAGRQ0ACyAFQdABaiQAIAQLfwIBfwF+IAC9IgNCNIinQf8PcSICQf8PRwR8IAJFBEAgASAARAAAAAAAAAAAYQR/QQAFIABEAAAAAAAA8EOiIAEQjAEhACABKAIAQUBqCzYCACAADwsgASACQf4HazYCACADQv////////+HgH+DQoCAgICAgIDwP4S/BSAACwsVACAARQRAQQAPC0H8OyAANgIAQX8LzgECA38CfSMAQRBrIgMkAEEBIQQgA0EIaiAAQfwAaiIFIAAgAUEBdGpBxABqIgEvAQAQHwJAAkAgAyoCCCIHIAIqAgAiBlwEQCAHIAdbBEAgAi0ABCECDAILIAYgBlwhBAsgAi0ABCECIARFDQAgAy0ADCACQf8BcUYNAQsgBSABIAYgAhA5A0AgAC0AACIBQQRxDQEgACABQQRyOgAAIAAoAhAiAQRAIAAgAREAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsgA0EQaiQAC9EDAEHUO0GoHBAcQdU7QYoWQQFBAUEAEBtB1jtB/RJBAUGAf0H/ABAEQdc7QfYSQQFBgH9B/wAQBEHYO0H0EkEBQQBB/wEQBEHZO0GUCkECQYCAfkH//wEQBEHaO0GLCkECQQBB//8DEARB2ztBsQpBBEGAgICAeEH/////BxAEQdw7QagKQQRBAEF/EARB3TtB+BhBBEGAgICAeEH/////BxAEQd47Qe8YQQRBAEF/EARB3ztBjxBCgICAgICAgICAf0L///////////8AEIQBQeA7QY4QQgBCfxCEAUHhO0GIEEEEEA1B4jtB9BtBCBANQeM7QaQZEA5B5DtBmSIQDkHlO0EEQZcZEAhB5jtBAkGwGRAIQec7QQRBvxkQCEHoO0GPFhAaQek7QQBB1CEQAUHqO0EAQboiEAFB6ztBAUHyIRABQew7QQJB5B4QAUHtO0EDQYMfEAFB7jtBBEGrHxABQe87QQVByB8QAUHwO0EEQd8iEAFB8TtBBUH9IhABQeo7QQBBriAQAUHrO0EBQY0gEAFB7DtBAkHwIBABQe07QQNBziAQAUHuO0EEQbMhEAFB7ztBBUGRIRABQfI7QQZB7h8QAUHzO0EHQaQjEAELJQAgAEH0JjYCACAALQAEBEAgACgCCEH9DxBmCyAAKAIIEAYgAAsDAAALJQAgAEHsJzYCACAALQAEBEAgACgCCEH9DxBmCyAAKAIIEAYgAAs3AQJ/QQQQHiICIAE2AgBBBBAeIgMgATYCAEGjOyAAQeI7QfooQcEBIAJB4jtB/ihBwgEgAxAHCzcBAX8gASAAKAIEIgNBAXVqIQEgACgCACEAIAEgAiADQQFxBH8gASgCACAAaigCAAUgAAsRBQALOQEBfyABIAAoAgQiBEEBdWohASAAKAIAIQAgASACIAMgBEEBcQR/IAEoAgAgAGooAgAFIAALEQMACwkAIAEgABEAAAsHACAAEQ4ACzUBAX8gASAAKAIEIgJBAXVqIQEgACgCACEAIAEgAkEBcQR/IAEoAgAgAGooAgAFIAALEQAACzABAX8jAEEQayICJAAgAiABNgIIIAJBCGogABECACEAIAIoAggQBiACQRBqJAAgAAsMACABIAAoAgARAAALCQAgAEEBOgAEC9coAQJ/QaA7QaE7QaI7QQBBjCZBB0GPJkEAQY8mQQBB2RZBkSZBCBAFQQgQHiIAQoiAgIAQNwMAQaA7QZcbQQZBoCZBuCZBCSAAQQEQAEGkO0GlO0GmO0GgO0GMJkEKQYwmQQtBjCZBDEG4EUGRJkENEAVBBBAeIgBBDjYCAEGkO0HoFEECQcAmQcgmQQ8gAEEAEABBoDtBowxBAkHMJkHUJkEQQREQA0GgO0GAHEEDQaQnQbAnQRJBExADQbg7Qbk7Qbo7QQBBjCZBFEGPJkEAQY8mQQBB6RZBkSZBFRAFQQgQHiIAQoiAgIAQNwMAQbg7QegcQQJBuCdByCZBFiAAQQEQAEG7O0G8O0G9O0G4O0GMJkEXQYwmQRhBjCZBGUHPEUGRJkEaEAVBBBAeIgBBGzYCAEG7O0HoFEECQcAnQcgmQRwgAEEAEABBuDtBowxBAkHIJ0HUJkEdQR4QA0G4O0GAHEEDQaQnQbAnQRJBHxADQb47Qb87QcA7QQBBjCZBIEGPJkEAQY8mQQBB2hpBkSZBIRAFQb47QQFB+CdBjCZBIkEjEA9BvjtBkBtBAUH4J0GMJkEiQSMQA0G+O0HpCEECQfwnQcgmQSRBJRADQQgQHiIAQQA2AgQgAEEmNgIAQb47Qa0cQQRBkChBoChBJyAAQQAQAEEIEB4iAEEANgIEIABBKDYCAEG+O0GkEUEDQagoQbQoQSkgAEEAEABBCBAeIgBBADYCBCAAQSo2AgBBvjtByB1BA0G8KEHIKEErIABBABAAQQgQHiIAQQA2AgQgAEEsNgIAQb47QaYQQQNB0ChByChBLSAAQQAQAEEIEB4iAEEANgIEIABBLjYCAEG+O0HLHEEDQdwoQbAnQS8gAEEAEABBCBAeIgBBADYCBCAAQTA2AgBBvjtB0h1BAkHoKEHUJkExIABBABAAQQgQHiIAQQA2AgQgAEEyNgIAQb47QZcQQQJB8ChB1CZBMyAAQQAQAEHBO0GECkH4KEE0QZEmQTUQCkHiD0EAEEhB6g5BCBBIQYITQRAQSEHxFUEYEEhBgxdBIBBIQfAOQSgQSEHBOxAJQaM7Qf8aQfgoQTZBkSZBNxAKQYMXQQAQkwFB8A5BCBCTAUGjOxAJQcI7QYobQfgoQThBkSZBORAKQQQQHiIAQQg2AgBBBBAeIgFBCDYCAEHCO0GEG0HiO0H6KEE6IABB4jtB/ihBOyABEAdBBBAeIgBBADYCAEEEEB4iAUEANgIAQcI7QeUOQds7QdQmQTwgAEHbO0HIKEE9IAEQB0HCOxAJQcM7QcQ7QcU7QQBBjCZBPkGPJkEAQY8mQQBB+xtBkSZBPxAFQcM7QQFBhClBjCZBwABBwQAQD0HDO0HXDkEBQYQpQYwmQcAAQcEAEANBwztB0BpBAkGIKUHUJkHCAEHDABADQcM7QekIQQJBkClByCZBxABBxQAQA0EIEB4iAEEANgIEIABBxgA2AgBBwztB9w9BAkGQKUHIJkHHACAAQQAQAEEIEB4iAEEANgIEIABByAA2AgBBwztB6htBA0GYKUHIKEHJACAAQQAQAEEIEB4iAEEANgIEIABBygA2AgBBwztBnxtBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABBzAA2AgBBwztB0BRBBEGwKUHAKUHNACAAQQAQAEEIEB4iAEEANgIEIABBzgA2AgBBwztBiA1BBEGwKUHAKUHNACAAQQAQAEEIEB4iAEEANgIEIABBzwA2AgBBwztB3RNBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB0AA2AgBBwztB+QtBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB0QA2AgBBwztBuBBBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB0gA2AgBBwztB5RpBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB0wA2AgBBwztB/BRBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB1AA2AgBBwztBlRNBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB1QA2AgBBwztBtQpBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB1gA2AgBBwztBuBVBBEGwKUHAKUHNACAAQQAQAEEIEB4iAEEANgIEIABB1wA2AgBBwztBmw1BBEGwKUHAKUHNACAAQQAQAEEIEB4iAEEANgIEIABB2AA2AgBBwztB7RNBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB2QA2AgBBwztBxAlBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB2gA2AgBBwztB8QhBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB2wA2AgBBwztBhwlBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB3QA2AgBBwztB1BBBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB3gA2AgBBwztB5gxBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB3wA2AgBBwztBzBNBAkGQKUHIJkHHACAAQQAQAEEIEB4iAEEANgIEIABB4AA2AgBBwztBrAlBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB4QA2AgBBwztBnxZBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB4gA2AgBBwztBoRdBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB4wA2AgBBwztBvw1BA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB5AA2AgBBwztB+xNBAkGQKUHIJkHHACAAQQAQAEEIEB4iAEEANgIEIABB5QA2AgBBwztBkQ9BA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB5gA2AgBBwztBwQxBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB5wA2AgBBwztBvhNBAkGQKUHIJkHHACAAQQAQAEEIEB4iAEEANgIEIABB6AA2AgBBwztBsxdBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB6QA2AgBBwztBzw1BA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB6gA2AgBBwztBpQ9BA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB6wA2AgBBwztB0gxBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB7AA2AgBBwztBiRdBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB7QA2AgBBwztBrA1BA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB7gA2AgBBwztB9w5BA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB7wA2AgBBwztBrQxBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB8AA2AgBBwztB/RhBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB8QA2AgBBwztBshRBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB8gA2AgBBwztBlBJBBEGwKUHAKUHNACAAQQAQAEEIEB4iAEEANgIEIABB8wA2AgBBwztBzhlBBEGwKUHAKUHNACAAQQAQAEEIEB4iAEEANgIEIABB9AA2AgBBwztB4g1BBEGwKUHAKUHNACAAQQAQAEEIEB4iAEEANgIEIABB9QA2AgBBwztBrRNBBEGwKUHAKUHNACAAQQAQAEEIEB4iAEEANgIEIABB9gA2AgBBwztB+gxBBEGwKUHAKUHNACAAQQAQAEEIEB4iAEEANgIEIABB9wA2AgBBwztBnhVBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB+AA2AgBBwztBrxtBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABB+gA2AgBBwztB3BRBA0HcKUGwJ0H7ACAAQQAQAEEIEB4iAEEANgIEIABB/AA2AgBBwztBiQxBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABB/QA2AgBBwztBxhBBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABB/gA2AgBBwztB8hpBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABB/wA2AgBBwztBjRVBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABBgAE2AgBBwztBoRNBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABBgQE2AgBBwztBxwpBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABBggE2AgBBwztBwhVBA0HcKUGwJ0H7ACAAQQAQAEEIEB4iAEEANgIEIABBgwE2AgBBwztB4RBBAkHoKUHUJkGEASAAQQAQAEEIEB4iAEEANgIEIABBhQE2AgBBwztBuAlBAkHwKUH6KEGGASAAQQAQAEEIEB4iAEEANgIEIABBhwE2AgBBwztBrRZBAkHwKUH6KEGGASAAQQAQAEEIEB4iAEEANgIEIABBiAE2AgBBwztBqhdBAkHoKUHUJkGEASAAQQAQAEEIEB4iAEEANgIEIABBiQE2AgBBwztBmw9BAkHoKUHUJkGEASAAQQAQAEEIEB4iAEEANgIEIABBigE2AgBBwztBvxdBAkHoKUHUJkGEASAAQQAQAEEIEB4iAEEANgIEIABBiwE2AgBBwztBsg9BAkHoKUHUJkGEASAAQQAQAEEIEB4iAEEANgIEIABBjAE2AgBBwztBlRdBAkHoKUHUJkGEASAAQQAQAEEIEB4iAEEANgIEIABBjQE2AgBBwztBhA9BAkHoKUHUJkGEASAAQQAQAEEIEB4iAEEANgIEIABBjgE2AgBBwztBihlBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABBjwE2AgBBwztBwRRBAkHwKUH6KEGGASAAQQAQAEEIEB4iAEEANgIEIABBkAE2AgBBwztBnhJBA0H4KUGEKkGRASAAQQAQAEEIEB4iAEEANgIEIABBkgE2AgBBwztB0AlBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABBkwE2AgBBwztB/AhBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABBlAE2AgBBwztB2RlBA0HcKUGwJ0H7ACAAQQAQAEEIEB4iAEEANgIEIABBlQE2AgBBwztBtBNBA0GMKkGYKkGWASAAQQAQAEEIEB4iAEEANgIEIABBlwE2AgBBwztBhxxBBEGgKkGgKEGYASAAQQAQAEEIEB4iAEEANgIEIABBmQE2AgBBwztBnBxBA0GwKkHIKEGaASAAQQAQAEEIEB4iAEEANgIEIABBmwE2AgBBwztBmgpBAkG8KkHUJkGcASAAQQAQAEEIEB4iAEEANgIEIABBnQE2AgBBwztBmQxBAkHEKkHUJkGeASAAQQAQAEEIEB4iAEEANgIEIABBnwE2AgBBwztBkxxBA0HMKkGwJ0GgASAAQQAQAEEIEB4iAEEANgIEIABBoQE2AgBBwztBuxZBA0HYKkHIKEGiASAAQQAQAEEIEB4iAEEANgIEIABBowE2AgBBwztBvxtBAkHkKkHUJkGkASAAQQAQAEEIEB4iAEEANgIEIABBpQE2AgBBwztB0xtBA0HYKkHIKEGiASAAQQAQAEEIEB4iAEEANgIEIABBpgE2AgBBwztBqB1BA0HsKkHIKEGnASAAQQAQAEEIEB4iAEEANgIEIABBqAE2AgBBwztBph1BAkGQKUHIJkHHACAAQQAQAEEIEB4iAEEANgIEIABBqQE2AgBBwztBuR1BA0H4KkHIKEGqASAAQQAQAEEIEB4iAEEANgIEIABBqwE2AgBBwztBtx1BAkGQKUHIJkHHACAAQQAQAEEIEB4iAEEANgIEIABBrAE2AgBBwztB3whBAkGQKUHIJkHHACAAQQAQAEEIEB4iAEEANgIEIABBrQE2AgBBwztB1whBAkGEK0HUJkGuASAAQQAQAEEIEB4iAEEANgIEIABBrwE2AgBBwztB3hVBAkGQKUHIJkHHACAAQQAQAEEIEB4iAEEANgIEIABBsAE2AgBBwztB3AlBAkGEK0HUJkGuASAAQQAQAEEIEB4iAEEANgIEIABBsQE2AgBBwztB6QlBBUGQK0GkK0GyASAAQQAQAEEIEB4iAEEANgIEIABBswE2AgBBwztB5w9BAkHwKUH6KEGGASAAQQAQAEEIEB4iAEEANgIEIABBtAE2AgBBwztB0Q9BAkHwKUH6KEGGASAAQQAQAEEIEB4iAEEANgIEIABBtQE2AgBBwztBhhNBAkHwKUH6KEGGASAAQQAQAEEIEB4iAEEANgIEIABBtgE2AgBBwztB+BVBAkHwKUH6KEGGASAAQQAQAEEIEB4iAEEANgIEIABBtwE2AgBBwztByxdBAkHwKUH6KEGGASAAQQAQAEEIEB4iAEEANgIEIABBuAE2AgBBwztBvw9BAkHwKUH6KEGGASAAQQAQAEEIEB4iAEEANgIEIABBuQE2AgBBwztB+QlBAkGsK0HUJkG6ASAAQQAQAEEIEB4iAEEANgIEIABBuwE2AgBBwztBzBVBA0H4KUGEKkGRASAAQQAQAEEIEB4iAEEANgIEIABBvAE2AgBBwztBqBJBA0H4KUGEKkGRASAAQQAQAEEIEB4iAEEANgIEIABBvQE2AgBBwztB5BlBA0H4KUGEKkGRASAAQQAQAEEIEB4iAEEANgIEIABBvgE2AgBBwztBqxVBAkHUKUHUJkH5ACAAQQAQAAtZAQF/IAAgACgCSCIBQQFrIAFyNgJIIAAoAgAiAUEIcQRAIAAgAUEgcjYCAEF/DwsgAEIANwIEIAAgACgCLCIBNgIcIAAgATYCFCAAIAEgACgCMGo2AhBBAAtHAAJAIAFBA00EfyAAIAFBAnRqQQRqBSABQQRrIgEgACgCGCIAKAIEIAAoAgAiAGtBAnVPDQEgACABQQJ0agsoAgAPCxACAAs4AQF/IAFBAEgEQBACAAsgAUEBa0EFdkEBaiIBQQJ0EB4hAiAAIAE2AgggAEEANgIEIAAgAjYCAAvSBQEJfyAAIAEvAQA7AQAgACABKQIENwIEIAAgASkCDDcCDCAAIAEoAhQ2AhQCQAJAIAEoAhgiA0UNAEEYEB4iBUEANgIIIAVCADcCACADKAIEIgEgAygCACICRwRAIAEgAmsiAkEASA0CIAUgAhAeIgE2AgAgBSABIAJqNgIIIAMoAgAiAiADKAIEIgZHBEADQCABIAIoAgA2AgAgAUEEaiEBIAJBBGoiAiAGRw0ACwsgBSABNgIECyAFQgA3AgwgBUEANgIUIAMoAhAiAUUNACAFQQxqIAEQnwEgAygCDCEGIAUgBSgCECIEIAMoAhAiAkEfcWogAkFgcWoiATYCEAJAAkAgBEUEQCABQQFrIQMMAQsgAUEBayIDIARBAWtzQSBJDQELIAUoAgwgA0EFdkEAIAFBIU8bQQJ0akEANgIACyAFKAIMIARBA3ZB/P///wFxaiEBIARBH3EiA0UEQCACQQBMDQEgAkEgbSEDIAJBH2pBP08EQCABIAYgA0ECdBAzGgsgAiADQQV0ayICQQBMDQEgASADQQJ0IgNqIgEgASgCAEF/QSAgAmt2IgFBf3NxIAMgBmooAgAgAXFyNgIADAELIAJBAEwNAEF/IAN0IQhBICADayEEIAJBIE4EQCAIQX9zIQkgASgCACEHA0AgASAHIAlxIAYoAgAiByADdHI2AgAgASABKAIEIAhxIAcgBHZyIgc2AgQgBkEEaiEGIAFBBGohASACQT9LIQogAkEgayECIAoNAAsgAkEATA0BCyABIAEoAgBBfyAEIAQgAiACIARKGyIEa3YgCHFBf3NxIAYoAgBBf0EgIAJrdnEiBiADdHI2AgAgAiAEayICQQBMDQAgASADIARqQQN2Qfz///8BcWoiASABKAIAQX9BICACa3ZBf3NxIAYgBHZyNgIACyAAKAIYIQEgACAFNgIYIAEEQCABEFsLDwsQAgALvQMBB38gAARAIwBBIGsiBiQAIAAoAgAiASgC5AMiAwRAIAMgARBvGiABQQA2AuQDCyABKALsAyICIAEoAugDIgNHBEBBASACIANrQQJ1IgIgAkEBTRshBEEAIQIDQCADIAJBAnRqKAIAQQA2AuQDIAJBAWoiAiAERw0ACwsgASADNgLsAwJAIAMgAUHwA2oiAigCAEYNACAGQQhqQQBBACACEEoiAigCBCABKALsAyABKALoAyIEayIFayIDIAQgBRAzIQUgASgC6AMhBCABIAU2AugDIAIgBDYCBCABKALsAyEFIAEgAigCCDYC7AMgAiAFNgIIIAEoAvADIQcgASACKAIMNgLwAyACIAQ2AgAgAiAHNgIMIAQgBUcEQCACIAUgBCAFa0EDakF8cWo2AggLIARFDQAgBBAnIAEoAugDIQMLIAMEQCABIAM2AuwDIAMQJwsgASgClAEhAyABQQA2ApQBIAMEQCADEFsLIAEQJyAAKAIIIQEgAEEANgIIIAEEQCABIAEoAgAoAgQRAAALIAAoAgQhASAAQQA2AgQgAQRAIAEgASgCACgCBBEAAAsgBkEgaiQAIAAQIwsLtQEBAX8jAEEQayICJAACfyABBEAgASgCACEBQYgEEB4gARBcIAENARogAkH3GTYCACACEHIQJAALQZQ7LQAARQRAQfg6QQM2AgBBiDtCgICAgICAgMA/NwIAQYA7QgA3AgBBlDtBAToAAEH8OkH8Oi0AAEH+AXE6AABB9DpBADYCAEGQO0EANgIAC0GIBBAeQfQ6EFwLIQEgAEIANwIEIAAgATYCACABIAA2AgQgAkEQaiQAIAALGwEBfyAABEAgACgCACIBBEAgARAjCyAAECMLC0kBAn9BBBAeIQFBIBAeIgBBADYCHCAAQoCAgICAgIDAPzcCFCAAQgA3AgwgAEEAOgAIIABBAzYCBCAAQQA2AgAgASAANgIAIAELIAAgAkEFR0EAIAIbRQRAQbgwIAMgBBBJDwsgAyAEEHALIgEBfiABIAKtIAOtQiCGhCAEIAARFQAiBUIgiKckASAFpwuoAQEFfyAAKAJUIgMoAgAhBSADKAIEIgQgACgCFCAAKAIcIgdrIgYgBCAGSRsiBgRAIAUgByAGECsaIAMgAygCACAGaiIFNgIAIAMgAygCBCAGayIENgIECyAEIAIgAiAESxsiBARAIAUgASAEECsaIAMgAygCACAEaiIFNgIAIAMgAygCBCAEazYCBAsgBUEAOgAAIAAgACgCLCIBNgIcIAAgATYCFCACCwQAQgALBABBAAuKBQIGfgJ/IAEgASgCAEEHakF4cSIBQRBqNgIAIAAhCSABKQMAIQMgASkDCCEGIwBBIGsiCCQAAkAgBkL///////////8AgyIEQoCAgICAgMCAPH0gBEKAgICAgIDA/8MAfVQEQCAGQgSGIANCPIiEIQQgA0L//////////w+DIgNCgYCAgICAgIAIWgRAIARCgYCAgICAgIDAAHwhAgwCCyAEQoCAgICAgICAQH0hAiADQoCAgICAgICACFINASACIARCAYN8IQIMAQsgA1AgBEKAgICAgIDA//8AVCAEQoCAgICAgMD//wBRG0UEQCAGQgSGIANCPIiEQv////////8Dg0KAgICAgICA/P8AhCECDAELQoCAgICAgID4/wAhAiAEQv///////7//wwBWDQBCACECIARCMIinIgBBkfcASQ0AIAMhAiAGQv///////z+DQoCAgICAgMAAhCIFIQcCQCAAQYH3AGsiAUHAAHEEQCACIAFBQGqthiEHQgAhAgwBCyABRQ0AIAcgAa0iBIYgAkHAACABa62IhCEHIAIgBIYhAgsgCCACNwMQIAggBzcDGAJAQYH4ACAAayIAQcAAcQRAIAUgAEFAaq2IIQNCACEFDAELIABFDQAgBUHAACAAa62GIAMgAK0iAoiEIQMgBSACiCEFCyAIIAM3AwAgCCAFNwMIIAgpAwhCBIYgCCkDACIDQjyIhCECIAgpAxAgCCkDGIRCAFKtIANC//////////8Pg4QiA0KBgICAgICAgAhaBEAgAkIBfCECDAELIANCgICAgICAgIAIUg0AIAJCAYMgAnwhAgsgCEEgaiQAIAkgAiAGQoCAgICAgICAgH+DhL85AwALmRgDEn8BfAN+IwBBsARrIgwkACAMQQA2AiwCQCABvSIZQgBTBEBBASERQZkJIRMgAZoiAb0hGQwBCyAEQYAQcQRAQQEhEUGcCSETDAELQZ8JQZoJIARBAXEiERshEyARRSEVCwJAIBlCgICAgICAgPj/AINCgICAgICAgPj/AFEEQCAAQSAgAiARQQNqIgMgBEH//3txECkgACATIBEQJiAAQe0VQdweIAVBIHEiBRtB4RpB4B4gBRsgASABYhtBAxAmIABBICACIAMgBEGAwABzECkgAyACIAIgA0gbIQoMAQsgDEEQaiESAkACfwJAIAEgDEEsahCMASIBIAGgIgFEAAAAAAAAAABiBEAgDCAMKAIsIgZBAWs2AiwgBUEgciIOQeEARw0BDAMLIAVBIHIiDkHhAEYNAiAMKAIsIQlBBiADIANBAEgbDAELIAwgBkEdayIJNgIsIAFEAAAAAAAAsEGiIQFBBiADIANBAEgbCyELIAxBMGpBoAJBACAJQQBOG2oiDSEHA0AgBwJ/IAFEAAAAAAAA8EFjIAFEAAAAAAAAAABmcQRAIAGrDAELQQALIgM2AgAgB0EEaiEHIAEgA7ihRAAAAABlzc1BoiIBRAAAAAAAAAAAYg0ACwJAIAlBAEwEQCAJIQMgByEGIA0hCAwBCyANIQggCSEDA0BBHSADIANBHU4bIQMCQCAHQQRrIgYgCEkNACADrSEaQgAhGQNAIAYgGUL/////D4MgBjUCACAahnwiG0KAlOvcA4AiGUKA7JSjDH4gG3w+AgAgBkEEayIGIAhPDQALIBmnIgZFDQAgCEEEayIIIAY2AgALA0AgCCAHIgZJBEAgBkEEayIHKAIARQ0BCwsgDCAMKAIsIANrIgM2AiwgBiEHIANBAEoNAAsLIANBAEgEQCALQRlqQQluQQFqIQ8gDkHmAEYhEANAQQlBACADayIDIANBCU4bIQoCQCAGIAhNBEAgCCgCACEHDAELQYCU69wDIAp2IRRBfyAKdEF/cyEWQQAhAyAIIQcDQCAHIAMgBygCACIXIAp2ajYCACAWIBdxIBRsIQMgB0EEaiIHIAZJDQALIAgoAgAhByADRQ0AIAYgAzYCACAGQQRqIQYLIAwgDCgCLCAKaiIDNgIsIA0gCCAHRUECdGoiCCAQGyIHIA9BAnRqIAYgBiAHa0ECdSAPShshBiADQQBIDQALC0EAIQMCQCAGIAhNDQAgDSAIa0ECdUEJbCEDQQohByAIKAIAIgpBCkkNAANAIANBAWohAyAKIAdBCmwiB08NAAsLIAsgA0EAIA5B5gBHG2sgDkHnAEYgC0EAR3FrIgcgBiANa0ECdUEJbEEJa0gEQEEEQaQCIAlBAEgbIAxqIAdBgMgAaiIKQQltIg9BAnRqQdAfayEJQQohByAPQXdsIApqIgpBB0wEQANAIAdBCmwhByAKQQFqIgpBCEcNAAsLAkAgCSgCACIQIBAgB24iDyAHbCIKRiAJQQRqIhQgBkZxDQAgECAKayEQAkAgD0EBcUUEQEQAAAAAAABAQyEBIAdBgJTr3ANHIAggCU9yDQEgCUEEay0AAEEBcUUNAQtEAQAAAAAAQEMhAQtEAAAAAAAA4D9EAAAAAAAA8D9EAAAAAAAA+D8gBiAURhtEAAAAAAAA+D8gECAHQQF2IhRGGyAQIBRJGyEYAkAgFQ0AIBMtAABBLUcNACAYmiEYIAGaIQELIAkgCjYCACABIBigIAFhDQAgCSAHIApqIgM2AgAgA0GAlOvcA08EQANAIAlBADYCACAIIAlBBGsiCUsEQCAIQQRrIghBADYCAAsgCSAJKAIAQQFqIgM2AgAgA0H/k+vcA0sNAAsLIA0gCGtBAnVBCWwhA0EKIQcgCCgCACIKQQpJDQADQCADQQFqIQMgCiAHQQpsIgdPDQALCyAJQQRqIgcgBiAGIAdLGyEGCwNAIAYiByAITSIKRQRAIAdBBGsiBigCAEUNAQsLAkAgDkHnAEcEQCAEQQhxIQkMAQsgA0F/c0F/IAtBASALGyIGIANKIANBe0pxIgkbIAZqIQtBf0F+IAkbIAVqIQUgBEEIcSIJDQBBdyEGAkAgCg0AIAdBBGsoAgAiDkUNAEEKIQpBACEGIA5BCnANAANAIAYiCUEBaiEGIA4gCkEKbCIKcEUNAAsgCUF/cyEGCyAHIA1rQQJ1QQlsIQogBUFfcUHGAEYEQEEAIQkgCyAGIApqQQlrIgZBACAGQQBKGyIGIAYgC0obIQsMAQtBACEJIAsgAyAKaiAGakEJayIGQQAgBkEAShsiBiAGIAtKGyELC0F/IQogC0H9////B0H+////ByAJIAtyIhAbSg0BIAsgEEEAR2pBAWohDgJAIAVBX3EiFUHGAEYEQCADIA5B/////wdzSg0DIANBACADQQBKGyEGDAELIBIgAyADQR91IgZzIAZrrSASEEciBmtBAUwEQANAIAZBAWsiBkEwOgAAIBIgBmtBAkgNAAsLIAZBAmsiDyAFOgAAIAZBAWtBLUErIANBAEgbOgAAIBIgD2siBiAOQf////8Hc0oNAgsgBiAOaiIDIBFB/////wdzSg0BIABBICACIAMgEWoiBSAEECkgACATIBEQJiAAQTAgAiAFIARBgIAEcxApAkACQAJAIBVBxgBGBEAgDEEQaiIGQQhyIQMgBkEJciEJIA0gCCAIIA1LGyIKIQgDQCAINQIAIAkQRyEGAkAgCCAKRwRAIAYgDEEQak0NAQNAIAZBAWsiBkEwOgAAIAYgDEEQaksNAAsMAQsgBiAJRw0AIAxBMDoAGCADIQYLIAAgBiAJIAZrECYgCEEEaiIIIA1NDQALIBAEQCAAQYwlQQEQJgsgC0EATCAHIAhNcg0BA0AgCDUCACAJEEciBiAMQRBqSwRAA0AgBkEBayIGQTA6AAAgBiAMQRBqSw0ACwsgACAGQQkgCyALQQlOGxAmIAtBCWshBiAIQQRqIgggB08NAyALQQlKIQMgBiELIAMNAAsMAgsCQCALQQBIDQAgByAIQQRqIAcgCEsbIQogDEEQaiIGQQhyIQMgBkEJciENIAghBwNAIA0gBzUCACANEEciBkYEQCAMQTA6ABggAyEGCwJAIAcgCEcEQCAGIAxBEGpNDQEDQCAGQQFrIgZBMDoAACAGIAxBEGpLDQALDAELIAAgBkEBECYgBkEBaiEGIAkgC3JFDQAgAEGMJUEBECYLIAAgBiALIA0gBmsiBiAGIAtKGxAmIAsgBmshCyAHQQRqIgcgCk8NASALQQBODQALCyAAQTAgC0ESakESQQAQKSAAIA8gEiAPaxAmDAILIAshBgsgAEEwIAZBCWpBCUEAECkLIABBICACIAUgBEGAwABzECkgBSACIAIgBUgbIQoMAQsgEyAFQRp0QR91QQlxaiELAkAgA0ELSw0AQQwgA2shBkQAAAAAAAAwQCEYA0AgGEQAAAAAAAAwQKIhGCAGQQFrIgYNAAsgCy0AAEEtRgRAIBggAZogGKGgmiEBDAELIAEgGKAgGKEhAQsgEUECciEJIAVBIHEhCCASIAwoAiwiByAHQR91IgZzIAZrrSASEEciBkYEQCAMQTA6AA8gDEEPaiEGCyAGQQJrIg0gBUEPajoAACAGQQFrQS1BKyAHQQBIGzoAACAEQQhxIQYgDEEQaiEHA0AgByIFAn8gAZlEAAAAAAAA4EFjBEAgAaoMAQtBgICAgHgLIgdBkC9qLQAAIAhyOgAAIAYgA0EASnJFIAEgB7ehRAAAAAAAADBAoiIBRAAAAAAAAAAAYXEgBUEBaiIHIAxBEGprQQFHckUEQCAFQS46AAEgBUECaiEHCyABRAAAAAAAAAAAYg0AC0F/IQpB/f///wcgCSASIA1rIgVqIgZrIANIDQAgAEEgIAIgBgJ/AkAgA0UNACAHIAxBEGprIghBAmsgA04NACADQQJqDAELIAcgDEEQamsiCAsiB2oiAyAEECkgACALIAkQJiAAQTAgAiADIARBgIAEcxApIAAgDEEQaiAIECYgAEEwIAcgCGtBAEEAECkgACANIAUQJiAAQSAgAiADIARBgMAAcxApIAMgAiACIANIGyEKCyAMQbAEaiQAIAoLRgEBfyAAKAI8IQMjAEEQayIAJAAgAyABpyABQiCIpyACQf8BcSAAQQhqEBQQjQEhAiAAKQMIIQEgAEEQaiQAQn8gASACGwu+AgEHfyMAQSBrIgMkACADIAAoAhwiBDYCECAAKAIUIQUgAyACNgIcIAMgATYCGCADIAUgBGsiATYCFCABIAJqIQVBAiEGIANBEGohAQJ/A0ACQAJAAkAgACgCPCABIAYgA0EMahAYEI0BRQRAIAUgAygCDCIHRg0BIAdBAE4NAgwDCyAFQX9HDQILIAAgACgCLCIBNgIcIAAgATYCFCAAIAEgACgCMGo2AhAgAgwDCyABIAcgASgCBCIISyIJQQN0aiIEIAcgCEEAIAkbayIIIAQoAgBqNgIAIAFBDEEEIAkbaiIBIAEoAgAgCGs2AgAgBSAHayEFIAYgCWshBiAEIQEMAQsLIABBADYCHCAAQgA3AxAgACAAKAIAQSByNgIAQQAgBkECRg0AGiACIAEoAgRrCyEEIANBIGokACAECwkAIAAoAjwQGQsjAQF/Qcg7KAIAIgAEQANAIAAoAgARCQAgACgCBCIADQALCwu/AgEFfyMAQeAAayICJAAgAiAANgIAIwBBEGsiAyQAIAMgAjYCDCMAQZABayIAJAAgAEGgL0GQARArIgAgAkEQaiIFIgE2AiwgACABNgIUIABB/////wdBfiABayIEIARB/////wdPGyIENgIwIAAgASAEaiIBNgIcIAAgATYCECAAQbsTIAJBAEEAEIsBGiAEBEAgACgCFCIBIAEgACgCEEZrQQA6AAALIABBkAFqJAAgA0EQaiQAAkAgBSIAQQNxBEADQCAALQAARQ0CIABBAWoiAEEDcQ0ACwsDQCAAIgFBBGohACABKAIAIgNBf3MgA0GBgoQIa3FBgIGChHhxRQ0ACwNAIAEiAEEBaiEBIAAtAAANAAsLIAAgBWtBAWoiABBhIgEEfyABIAUgABArBUEACyEAIAJB4ABqJAAgAAvFAQICfwF8IwBBMGsiBiQAIAEoAgghBwJAQbQ7LQAAQQFxBEBBsDsoAgAhAQwBC0EFQZAnEAwhAUG0O0EBOgAAQbA7IAE2AgALIAYgBTYCKCAGIAQ4AiAgBiADNgIYIAYgAjgCEAJ/IAEgB0GXGyAGQQxqIAZBEGoQEiIIRAAAAAAAAPBBYyAIRAAAAAAAAAAAZnEEQCAIqwwBC0EACyEBIAYoAgwhAyAAIAEpAwA3AwAgACABKQMINwMIIAMQESAGQTBqJAALCQAgABCQARAjCwwAIAAoAghB6BwQZgsJACAAEJIBECMLVQECfyMAQTBrIgIkACABIAAoAgQiA0EBdWohASAAKAIAIQAgAiABIANBAXEEfyABKAIAIABqKAIABSAACxEBAEEwEB4gAkEwECshACACQTBqJAAgAAs7AQF/IAEgACgCBCIFQQF1aiEBIAAoAgAhACABIAIgAyAEIAVBAXEEfyABKAIAIABqKAIABSAACxEdAAs3AQF/IAEgACgCBCIDQQF1aiEBIAAoAgAhACABIAIgA0EBcQR/IAEoAgAgAGooAgAFIAALERIACzcBAX8gASAAKAIEIgNBAXVqIQEgACgCACEAIAEgAiADQQFxBH8gASgCACAAaigCAAUgAAsRDAALNQEBfyABIAAoAgQiAkEBdWohASAAKAIAIQAgASACQQFxBH8gASgCACAAaigCAAUgAAsRCwALYQECfyMAQRBrIgIkACABIAAoAgQiA0EBdWohASAAKAIAIQAgAiABIANBAXEEfyABKAIAIABqKAIABSAACxEBAEEQEB4iACACKQMINwMIIAAgAikDADcDACACQRBqJAAgAAtjAQJ/IwBBEGsiAyQAIAEgACgCBCIEQQF1aiEBIAAoAgAhACADIAEgAiAEQQFxBH8gASgCACAAaigCAAUgAAsRAwBBEBAeIgAgAykDCDcDCCAAIAMpAwA3AwAgA0EQaiQAIAALNwEBfyABIAAoAgQiA0EBdWohASAAKAIAIQAgASACIANBAXEEfyABKAIAIABqKAIABSAACxEEAAs5AQF/IAEgACgCBCIEQQF1aiEBIAAoAgAhACABIAIgAyAEQQFxBH8gASgCACAAaigCAAUgAAsRCAALCQAgASAAEQIACwUAQcM7Cw8AIAEgACgCAGogAjYCAAsNACABIAAoAgBqKAIACxgBAX9BEBAeIgBCADcDCCAAQQA2AgAgAAsYAQF/QRAQHiIAQgA3AwAgAEIANwMIIAALDABBMBAeQQBBMBAqCzcBAX8gASAAKAIEIgNBAXVqIQEgACgCACEAIAEgAiADQQFxBH8gASgCACAAaigCAAUgAAsRHgALBQBBvjsLIQAgACABKAIAIAEgASwAC0EASBtBuzsgAigCABAQNgIACyoBAX9BDBAeIgFBADoABCABIAAoAgA2AgggAEEANgIAIAFB2Cc2AgAgAQsFAEG7OwsFAEG4OwshACAAIAEoAgAgASABLAALQQBIG0GkOyACKAIAEBA2AgAL2AEBBH8jAEEgayIDJAAgASgCACIEQfD///8HSQRAAkACQCAEQQtPBEAgBEEPckEBaiIFEB4hBiADIAVBgICAgHhyNgIQIAMgBjYCCCADIAQ2AgwgBCAGaiEFDAELIAMgBDoAEyADQQhqIgYgBGohBSAERQ0BCyAGIAFBBGogBBArGgsgBUEAOgAAIAMgAjYCACADQRhqIANBCGogAyAAEQMAIAMoAhgQHSADKAIYIgAQBiADKAIAEAYgAywAE0EASARAIAMoAggQIwsgA0EgaiQAIAAPCxACAAsqAQF/QQwQHiIBQQA6AAQgASAAKAIANgIIIABBADYCACABQeAmNgIAIAELBQBBpDsLaQECfyMAQRBrIgYkACABIAAoAgQiB0EBdWohASAAKAIAIQAgBiABIAIgAyAEIAUgB0EBcQR/IAEoAgAgAGooAgAFIAALERAAQRAQHiIAIAYpAwg3AwggACAGKQMANwMAIAZBEGokACAACwUAQaA7Cx0AIAAoAgAiACAALQAAQfcBcUEIQQAgARtyOgAAC6oBAgJ/AX0jAEEQayICJAAgACgCACEAIAFB/wFxIgNBBkkEQAJ/AkACQAJAIANBBGsOAgABAgsgAEHUA2ogAC0AiANBA3FBAkYNAhogAEHMA2oMAgsgAEHMA2ogAC0AiANBA3FBAkYNARogAEHUA2oMAQsgACABQf8BcUECdGpBzANqCyoCACEEIAJBEGokACAEuw8LIAJB7hA2AgAgAEEFQdglIAIQLBAkAAuqAQICfwF9IwBBEGsiAiQAIAAoAgAhACABQf8BcSIDQQZJBEACfwJAAkACQCADQQRrDgIAAQILIABBxANqIAAtAIgDQQNxQQJGDQIaIABBvANqDAILIABBvANqIAAtAIgDQQNxQQJGDQEaIABBxANqDAELIAAgAUH/AXFBAnRqQbwDagsqAgAhBCACQRBqJAAgBLsPCyACQe4QNgIAIABBBUHYJSACECwQJAALqgECAn8BfSMAQRBrIgIkACAAKAIAIQAgAUH/AXEiA0EGSQRAAn8CQAJAAkAgA0EEaw4CAAECCyAAQbQDaiAALQCIA0EDcUECRg0CGiAAQawDagwCCyAAQawDaiAALQCIA0EDcUECRg0BGiAAQbQDagwBCyAAIAFB/wFxQQJ0akGsA2oLKgIAIQQgAkEQaiQAIAS7DwsgAkHuEDYCACAAQQVB2CUgAhAsECQAC08AIAAgASgCACIBKgKcA7s5AwAgACABKgKkA7s5AwggACABKgKgA7s5AxAgACABKgKoA7s5AxggACABKgKMA7s5AyAgACABKgKQA7s5AygLDAAgACgCACoCkAO7CwwAIAAoAgAqAowDuwsMACAAKAIAKgKoA7sLDAAgACgCACoCoAO7CwwAIAAoAgAqAqQDuwsMACAAKAIAKgKcA7sL6AMCBH0FfyMAQUBqIgokACAAKAIAIQAgCkEIakEAQTgQKhpB8DpB8DooAgBBAWo2AgAgABB4IAAtABRBA3EiCCADQQEgA0H/AXEbIAgbIQkgAEEUaiEIIAG2IQQgACoC+AMhBQJ9AkACQAJAIAAtAPwDQQFrDgIBAAILIAUgBJRDCtcjPJQhBQsgBUMAAAAAYEUNACAAIAlB/wFxQQAgBCAEEDEgCEECQQEgBBAiIAhBAkEBIAQQIZKSDAELIAggCUH/AXFBACAEIAQQLSIFIAVbBEBBAiELIAggCUH/AXFBACAEIAQQLQwBCyAEIARcIQsgBAshByACtiEFIAAqAoAEIQYgACAHAn0CQAJAAkAgAC0AhARBAWsOAgEAAgsgBiAFlEMK1yM8lCEGCyAGQwAAAABgRQ0AIAAgCUH/AXFBASAFIAQQMSAIQQBBASAEECIgCEEAQQEgBBAhkpIMAQsgCCAJQf8BcSIJQQEgBSAEEC0iBiAGWwRAQQIhDCAIIAlBASAFIAQQLQwBCyAFIAVcIQwgBQsgA0H/AXEgCyAMIAQgBUEBQQAgCkEIakEAQfA6KAIAED0EQCAAIAAtAIgDQQNxIAQgBRB2IABEAAAAAAAAAABEAAAAAAAAAAAQcwsgCkFAayQACw0AIAAoAgAtAABBAXELFQAgACgCACIAIAAtAABB/gFxOgAACxAAIAAoAgAtAABBBHFBAnYLegECfyMAQRBrIgEkACAAKAIAIgAoAggEQANAIAAtAAAiAkEEcUUEQCAAIAJBBHI6AAAgACgCECICBEAgACACEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQELCyABQRBqJAAPCyABQYAINgIAIABBBUHYJSABECwQJAALLgEBfyAAKAIIIQEgAEEANgIIIAEEQCABIAEoAgAoAgQRAAALIAAoAgBBADYCEAsXACAAKAIEKAIIIgAgACgCACgCCBEAAAsuAQF/IAAoAgghAiAAIAE2AgggAgRAIAIgAigCACgCBBEAAAsgACgCAEEFNgIQCz4BAX8gACgCBCEBIABBADYCBCABBEAgASABKAIAKAIEEQAACyAAKAIAIgBBADYCCCAAIAAtAABB7wFxOgAAC0kBAX8jAEEQayIGJAAgBiABKAIEKAIEIgEgAiADIAQgBSABKAIAKAIIERAAIAAgBisDALY4AgAgACAGKwMItjgCBCAGQRBqJAALcwECfyMAQRBrIgIkACAAKAIEIQMgACABNgIEIAMEQCADIAMoAgAoAgQRAAALIAAoAgAiACgC6AMgACgC7ANHBEAgAkH5IzYCACAAQQVB2CUgAhAsECQACyAAQQQ2AgggACAALQAAQRByOgAAIAJBEGokAAs8AQF/AkAgACgCACIAKALsAyAAKALoAyIAa0ECdSABTQ0AIAAgAUECdGooAgAiAEUNACAAKAIEIQILIAILGQAgACgCACgC5AMiAEUEQEEADwsgACgCBAsXACAAKAIAIgAoAuwDIAAoAugDa0ECdQuOAwEDfyMAQdACayICJAACQCAAKAIAIgAoAuwDIAAoAugDRg0AIAEoAgAiAygC5AMhASAAIAMQb0UNACAAIAFGBEAgAkEIakEAQcQCECoaIAJBADoAGCACQgA3AxAgAkGAgID+BzYCDCACQRxqQQBBxAEQKhogAkHgAWohBCACQSBqIQEDQCABQoCAgPyLgIDAv383AhAgAUKBgICAEDcCCCABQoCAgPyLgIDAv383AgAgAUEYaiIBIARHDQALIAJCgICA/IuAgMC/fzcD8AEgAkKBgICAEDcD6AEgAkKAgID8i4CAwL9/NwPgASACQoCAgP6HgIDg/wA3AoQCIAJCgICA/oeAgOD/ADcC/AEgAiACLQD4AUH4AXE6APgBIAJBjAJqQQBBwAAQKhogA0GYAWogAkEIakHEAhArGiADQQA2AuQDCwNAIAAtAAAiAUEEcQ0BIAAgAUEEcjoAACAAKAIQIgEEQCAAIAERAAALIABBgICA/gc2ApwBIAAoAuQDIgANAAsLIAJB0AJqJAAL4AcBCH8jAEHQAGsiByQAIAAoAgAhAAJAAkAgASgCACIIKALkA0UEQCAAKAIIDQEgCC0AF0EQdEGAgDBxQYCAIEYEQCAAIAAoAuADQQFqNgLgAwsgACgC6AMiASACQQJ0aiEGAkAgACgC7AMiBCAAQfADaiIDKAIAIgVJBEAgBCAGRgRAIAYgCDYCACAAIAZBBGo2AuwDDAILIAQgBCICQQRrIgFLBEADQCACIAEoAgA2AgAgAkEEaiECIAFBBGoiASAESQ0ACwsgACACNgLsAyAGQQRqIgEgBEcEQCAEIAQgAWsiAUF8cWsgBiABEDMaCyAGIAg2AgAMAQsgBCABa0ECdUEBaiIEQYCAgIAETw0DAkAgB0EgakH/////AyAFIAFrIgFBAXUiBSAEIAQgBUkbIAFB/P///wdPGyACIAMQSiIDKAIIIgIgAygCDEcNACADKAIEIgEgAygCACIESwRAIAMgASABIARrQQJ1QQFqQX5tQQJ0IgRqIAEgAiABayIBEDMgAWoiAjYCCCADIAMoAgQgBGo2AgQMAQsgB0E4akEBIAIgBGtBAXUgAiAERhsiASABQQJ2IAMoAhAQSiIFKAIIIQQCfyADKAIIIgIgAygCBCIBRgRAIAQhAiABDAELIAQgAiABa2ohAgNAIAQgASgCADYCACABQQRqIQEgBEEEaiIEIAJHDQALIAMoAgghASADKAIECyEEIAMoAgAhCSADIAUoAgA2AgAgBSAJNgIAIAMgBSgCBDYCBCAFIAQ2AgQgAyACNgIIIAUgATYCCCADKAIMIQogAyAFKAIMNgIMIAUgCjYCDCABIARHBEAgBSABIAQgAWtBA2pBfHFqNgIICyAJRQ0AIAkQIyADKAIIIQILIAIgCDYCACADIAMoAghBBGo2AgggAyADKAIEIAYgACgC6AMiAWsiAmsgASACEDM2AgQgAygCCCAGIAAoAuwDIAZrIgQQMyEGIAAoAugDIQEgACADKAIENgLoAyADIAE2AgQgACgC7AMhAiAAIAQgBmo2AuwDIAMgAjYCCCAAKALwAyEEIAAgAygCDDYC8AMgAyABNgIAIAMgBDYCDCABIAJHBEAgAyACIAEgAmtBA2pBfHFqNgIICyABRQ0AIAEQIwsgCCAANgLkAwNAIAAtAAAiAUEEcUUEQCAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQELCyAHQdAAaiQADwsgB0HEIzYCECAAQQVB2CUgB0EQahAsECQACyAHQckkNgIAIABBBUHYJSAHECwQJAALEAIACxAAIAAoAgAtAABBAnFBAXYLWQIBfwF9IwBBEGsiAiQAIAJBCGogACgCACIAQfwAaiAAIAFB/wFxQQF0ai8BaBAfQwAAwH8hAwJAAkAgAi0ADA4EAQAAAQALIAIqAgghAwsgAkEQaiQAIAMLTgEBfyMAQRBrIgMkACADQQhqIAEoAgAiAUH8AGogASACQf8BcUEBdGovAUQQHyADLQAMIQEgACADKgIIuzkDCCAAIAE2AgAgA0EQaiQAC14CAX8BfCMAQRBrIgIkACACQQhqIAAoAgAiAEH8AGogACABQf8BcUEBdGovAVYQH0QAAAAAAAD4fyEDAkACQCACLQAMDgQBAAABAAsgAioCCLshAwsgAkEQaiQAIAMLJAEBfUMAAMB/IAAoAgAiAEH8AGogAC8BehAgIgEgASABXBu7C0QBAX8jAEEQayICJAAgAkEIaiABKAIAIgFB/ABqIAEvAXgQHyACLQAMIQEgACACKgIIuzkDCCAAIAE2AgAgAkEQaiQAC0QBAX8jAEEQayICJAAgAkEIaiABKAIAIgFB/ABqIAEvAXYQHyACLQAMIQEgACACKgIIuzkDCCAAIAE2AgAgAkEQaiQAC0QBAX8jAEEQayICJAAgAkEIaiABKAIAIgFB/ABqIAEvAXQQHyACLQAMIQEgACACKgIIuzkDCCAAIAE2AgAgAkEQaiQAC0QBAX8jAEEQayICJAAgAkEIaiABKAIAIgFB/ABqIAEvAXIQHyACLQAMIQEgACACKgIIuzkDCCAAIAE2AgAgAkEQaiQAC0QBAX8jAEEQayICJAAgAkEIaiABKAIAIgFB/ABqIAEvAXAQHyACLQAMIQEgACACKgIIuzkDCCAAIAE2AgAgAkEQaiQAC0QBAX8jAEEQayICJAAgAkEIaiABKAIAIgFB/ABqIAEvAW4QHyACLQAMIQEgACACKgIIuzkDCCAAIAE2AgAgAkEQaiQAC0gCAX8BfQJ9IAAoAgAiAEH8AGoiASAALwEcECAiAiACXARAQwAAgD9DAAAAACAAKAL0Ay0ACEEBcRsMAQsgASAALwEcECALuws2AgF/AX0gACgCACIAQfwAaiIBIAAvARoQICICIAJcBEBEAAAAAAAAAAAPCyABIAAvARoQILsLRAEBfyMAQRBrIgIkACACQQhqIAEoAgAiAUH8AGogAS8BHhAfIAItAAwhASAAIAIqAgi7OQMIIAAgATYCACACQRBqJAALEAAgACgCAC0AF0ECdkEDcQsNACAAKAIALQAXQQNxC04BAX8jAEEQayIDJAAgA0EIaiABKAIAIgFB/ABqIAEgAkH/AXFBAXRqLwEgEB8gAy0ADCEBIAAgAyoCCLs5AwggACABNgIAIANBEGokAAsQACAAKAIALQAUQQR2QQdxCw0AIAAoAgAvABVBDnYLDQAgACgCAC0AFEEDcQsQACAAKAIALQAUQQJ2QQNxCw0AIAAoAgAvABZBD3ELEAAgACgCAC8AFUEEdkEPcQsNACAAKAIALwAVQQ9xC04BAX8jAEEQayIDJAAgA0EIaiABKAIAIgFB/ABqIAEgAkH/AXFBAXRqLwEyEB8gAy0ADCEBIAAgAyoCCLs5AwggACABNgIAIANBEGokAAsQACAAKAIALwAVQQx2QQNxCxAAIAAoAgAtABdBBHZBAXELgQECA38BfSMAQRBrIgMkACAAKAIAIQQCfSACtiIGIAZcBEBBACEAQwAAwH8MAQtBAEECIAZDAACAf1sgBkMAAID/W3IiBRshAEMAAMB/IAYgBRsLIQYgAyAAOgAMIAMgBjgCCCADIAMpAwg3AwAgBCABQf8BcSADEIgBIANBEGokAAt5AgF9An8jAEEQayIEJAAgACgCACEFIAQCfyACtiIDIANcBEBDAADAfyEDQQAMAQtDAADAfyADIANDAACAf1sgA0MAAID/W3IiABshAyAARQs6AAwgBCADOAIIIAQgBCkDCDcDACAFIAFB/wFxIAQQiAEgBEEQaiQAC3EBAX8CQCAAKAIAIgAtAAAiAkECcUEBdiABRg0AIAAgAkH9AXFBAkEAIAEbcjoAAANAIAAtAAAiAUEEcQ0BIAAgAUEEcjoAACAAKAIQIgEEQCAAIAERAAALIABBgICA/gc2ApwBIAAoAuQDIgANAAsLC4EBAgN/AX0jAEEQayIDJAAgACgCACEEAn0gArYiBiAGXARAQQAhAEMAAMB/DAELQQBBAiAGQwAAgH9bIAZDAACA/1tyIgUbIQBDAADAfyAGIAUbCyEGIAMgADoADCADIAY4AgggAyADKQMINwMAIAQgAUH/AXEgAxCOASADQRBqJAALeQIBfQJ/IwBBEGsiBCQAIAAoAgAhBSAEAn8gArYiAyADXARAQwAAwH8hA0EADAELQwAAwH8gAyADQwAAgH9bIANDAACA/1tyIgAbIQMgAEULOgAMIAQgAzgCCCAEIAQpAwg3AwAgBSABQf8BcSAEEI4BIARBEGokAAv5AQICfQR/IwBBEGsiBSQAIAAoAgAhAAJ/IAK2IgMgA1wEQEMAAMB/IQNBAAwBC0MAAMB/IAMgA0MAAIB/WyADQwAAgP9bciIGGyEDIAZFCyEGQQEhByAFQQhqIABB/ABqIgggACABQf8BcUEBdGpB1gBqIgEvAQAQHwJAAkAgAyAFKgIIIgRcBH8gBCAEWw0BIAMgA1wFIAcLRQ0AIAUtAAwgBkYNAQsgCCABIAMgBhA5A0AgAC0AACIBQQRxDQEgACABQQRyOgAAIAAoAhAiAQRAIAAgAREAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsgBUEQaiQAC7UBAgN/An0CQCAAKAIAIgBB/ABqIgMgAEH6AGoiAi8BABAgIgYgAbYiBVsNACAFIAVbIgRFIAYgBlxxDQACQCAEIAVDAAAAAFsgBYtDAACAf1tyRXFFBEAgAiACLwEAQfj/A3E7AQAMAQsgAyACIAVBAxBMCwNAIAAtAAAiAkEEcQ0BIAAgAkEEcjoAACAAKAIQIgIEQCAAIAIRAAALIABBgICA/gc2ApwBIAAoAuQDIgANAAsLC3wCA38BfSMAQRBrIgIkACAAKAIAIQMCfSABtiIFIAVcBEBBACEAQwAAwH8MAQtBAEECIAVDAACAf1sgBUMAAID/W3IiBBshAEMAAMB/IAUgBBsLIQUgAiAAOgAMIAIgBTgCCCACIAIpAwg3AwAgA0EBIAIQVSACQRBqJAALdAIBfQJ/IwBBEGsiAyQAIAAoAgAhBCADAn8gAbYiAiACXARAQwAAwH8hAkEADAELQwAAwH8gAiACQwAAgH9bIAJDAACA/1tyIgAbIQIgAEULOgAMIAMgAjgCCCADIAMpAwg3AwAgBEEBIAMQVSADQRBqJAALfAIDfwF9IwBBEGsiAiQAIAAoAgAhAwJ9IAG2IgUgBVwEQEEAIQBDAADAfwwBC0EAQQIgBUMAAIB/WyAFQwAAgP9bciIEGyEAQwAAwH8gBSAEGwshBSACIAA6AAwgAiAFOAIIIAIgAikDCDcDACADQQAgAhBVIAJBEGokAAt0AgF9An8jAEEQayIDJAAgACgCACEEIAMCfyABtiICIAJcBEBDAADAfyECQQAMAQtDAADAfyACIAJDAACAf1sgAkMAAID/W3IiABshAiAARQs6AAwgAyACOAIIIAMgAykDCDcDACAEQQAgAxBVIANBEGokAAt8AgN/AX0jAEEQayICJAAgACgCACEDAn0gAbYiBSAFXARAQQAhAEMAAMB/DAELQQBBAiAFQwAAgH9bIAVDAACA/1tyIgQbIQBDAADAfyAFIAQbCyEFIAIgADoADCACIAU4AgggAiACKQMINwMAIANBASACEFYgAkEQaiQAC3QCAX0CfyMAQRBrIgMkACAAKAIAIQQgAwJ/IAG2IgIgAlwEQEMAAMB/IQJBAAwBC0MAAMB/IAIgAkMAAIB/WyACQwAAgP9bciIAGyECIABFCzoADCADIAI4AgggAyADKQMINwMAIARBASADEFYgA0EQaiQAC3wCA38BfSMAQRBrIgIkACAAKAIAIQMCfSABtiIFIAVcBEBBACEAQwAAwH8MAQtBAEECIAVDAACAf1sgBUMAAID/W3IiBBshAEMAAMB/IAUgBBsLIQUgAiAAOgAMIAIgBTgCCCACIAIpAwg3AwAgA0EAIAIQViACQRBqJAALdAIBfQJ/IwBBEGsiAyQAIAAoAgAhBCADAn8gAbYiAiACXARAQwAAwH8hAkEADAELQwAAwH8gAiACQwAAgH9bIAJDAACA/1tyIgAbIQIgAEULOgAMIAMgAjgCCCADIAMpAwg3AwAgBEEAIAMQViADQRBqJAALPwEBfyMAQRBrIgEkACAAKAIAIQAgAUEDOgAMIAFBgICA/gc2AgggASABKQMINwMAIABBASABEEYgAUEQaiQAC3wCA38BfSMAQRBrIgIkACAAKAIAIQMCfSABtiIFIAVcBEBBACEAQwAAwH8MAQtBAEECIAVDAACAf1sgBUMAAID/W3IiBBshAEMAAMB/IAUgBBsLIQUgAiAAOgAMIAIgBTgCCCACIAIpAwg3AwAgA0EBIAIQRiACQRBqJAALdAIBfQJ/IwBBEGsiAyQAIAAoAgAhBCADAn8gAbYiAiACXARAQwAAwH8hAkEADAELQwAAwH8gAiACQwAAgH9bIAJDAACA/1tyIgAbIQIgAEULOgAMIAMgAjgCCCADIAMpAwg3AwAgBEEBIAMQRiADQRBqJAALPwEBfyMAQRBrIgEkACAAKAIAIQAgAUEDOgAMIAFBgICA/gc2AgggASABKQMINwMAIABBACABEEYgAUEQaiQAC3wCA38BfSMAQRBrIgIkACAAKAIAIQMCfSABtiIFIAVcBEBBACEAQwAAwH8MAQtBAEECIAVDAACAf1sgBUMAAID/W3IiBBshAEMAAMB/IAUgBBsLIQUgAiAAOgAMIAIgBTgCCCACIAIpAwg3AwAgA0EAIAIQRiACQRBqJAALdAIBfQJ/IwBBEGsiAyQAIAAoAgAhBCADAn8gAbYiAiACXARAQwAAwH8hAkEADAELQwAAwH8gAiACQwAAgH9bIAJDAACA/1tyIgAbIQIgAEULOgAMIAMgAjgCCCADIAMpAwg3AwAgBEEAIAMQRiADQRBqJAALoAECA38CfQJAIAAoAgAiAEH8AGoiAyAAQRxqIgIvAQAQICIGIAG2IgVbDQAgBSAFWyIERSAGIAZccQ0AAkAgBEUEQCACIAIvAQBB+P8DcTsBAAwBCyADIAIgBUEDEEwLA0AgAC0AACICQQRxDQEgACACQQRyOgAAIAAoAhAiAgRAIAAgAhEAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsLoAECA38CfQJAIAAoAgAiAEH8AGoiAyAAQRpqIgIvAQAQICIGIAG2IgVbDQAgBSAFWyIERSAGIAZccQ0AAkAgBEUEQCACIAIvAQBB+P8DcTsBAAwBCyADIAIgBUEDEEwLA0AgAC0AACICQQRxDQEgACACQQRyOgAAIAAoAhAiAgRAIAAgAhEAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsLPQEBfyMAQRBrIgEkACAAKAIAIQAgAUEDOgAMIAFBgICA/gc2AgggASABKQMINwMAIAAgARBrIAFBEGokAAt6AgN/AX0jAEEQayICJAAgACgCACEDAn0gAbYiBSAFXARAQQAhAEMAAMB/DAELQQBBAiAFQwAAgH9bIAVDAACA/1tyIgQbIQBDAADAfyAFIAQbCyEFIAIgADoADCACIAU4AgggAiACKQMINwMAIAMgAhBrIAJBEGokAAtyAgF9An8jAEEQayIDJAAgACgCACEEIAMCfyABtiICIAJcBEBDAADAfyECQQAMAQtDAADAfyACIAJDAACAf1sgAkMAAID/W3IiABshAiAARQs6AAwgAyACOAIIIAMgAykDCDcDACAEIAMQayADQRBqJAALoAECA38CfQJAIAAoAgAiAEH8AGoiAyAAQRhqIgIvAQAQICIGIAG2IgVbDQAgBSAFWyIERSAGIAZccQ0AAkAgBEUEQCACIAIvAQBB+P8DcTsBAAwBCyADIAIgBUEDEEwLA0AgAC0AACICQQRxDQEgACACQQRyOgAAIAAoAhAiAgRAIAAgAhEAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsLkAEBAX8CQCAAKAIAIgBBF2otAAAiAkECdkEDcSABQf8BcUYNACAAIAAvABUgAkEQdHIiAjsAFSAAIAJB///PB3EgAUEDcUESdHJBEHY6ABcDQCAALQAAIgFBBHENASAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQALCwuNAQEBfwJAIAAoAgAiAEEXai0AACICQQNxIAFB/wFxRg0AIAAgAC8AFSACQRB0ciICOwAVIAAgAkH///MHcSABQQNxQRB0ckEQdjoAFwNAIAAtAAAiAUEEcQ0BIAAgAUEEcjoAACAAKAIQIgEEQCAAIAERAAALIABBgICA/gc2ApwBIAAoAuQDIgANAAsLC0MBAX8jAEEQayICJAAgACgCACEAIAJBAzoADCACQYCAgP4HNgIIIAIgAikDCDcDACAAIAFB/wFxIAIQZSACQRBqJAALgAECA38BfSMAQRBrIgMkACAAKAIAIQQCfSACtiIGIAZcBEBBACEAQwAAwH8MAQtBAEECIAZDAACAf1sgBkMAAID/W3IiBRshAEMAAMB/IAYgBRsLIQYgAyAAOgAMIAMgBjgCCCADIAMpAwg3AwAgBCABQf8BcSADEGUgA0EQaiQAC3gCAX0CfyMAQRBrIgQkACAAKAIAIQUgBAJ/IAK2IgMgA1wEQEMAAMB/IQNBAAwBC0MAAMB/IAMgA0MAAIB/WyADQwAAgP9bciIAGyEDIABFCzoADCAEIAM4AgggBCAEKQMINwMAIAUgAUH/AXEgBBBlIARBEGokAAt3AQF/AkAgACgCACIALQAUIgJBBHZBB3EgAUH/AXFGDQAgACACQY8BcSABQQR0QfAAcXI6ABQDQCAALQAAIgFBBHENASAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQALCwuJAQEBfwJAIAFB/wFxIAAoAgAiAC8AFSICQQ52Rg0AIABBF2ogAiAALQAXQRB0ciICQRB2OgAAIAAgAkH//wBxIAFBDnRyOwAVA0AgAC0AACIBQQRxDQEgACABQQRyOgAAIAAoAhAiAQRAIAAgAREAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsLcAEBfwJAIAAoAgAiAC0AFCICQQNxIAFB/wFxRg0AIAAgAkH8AXEgAUEDcXI6ABQDQCAALQAAIgFBBHENASAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQALCwt2AQF/AkAgACgCACIALQAUIgJBAnZBA3EgAUH/AXFGDQAgACACQfMBcSABQQJ0QQxxcjoAFANAIAAtAAAiAUEEcQ0BIAAgAUEEcjoAACAAKAIQIgEEQCAAIAERAAALIABBgICA/gc2ApwBIAAoAuQDIgANAAsLC48BAQF/AkAgACgCACIALwAVIgJBCHZBD3EgAUH/AXFGDQAgAEEXaiACIAAtABdBEHRyIgJBEHY6AAAgACACQf/hA3EgAUEPcUEIdHI7ABUDQCAALQAAIgFBBHENASAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQALCwuPAQEBfwJAIAFB/wFxIAAoAgAiAC8AFSAAQRdqLQAAQRB0ciICQfABcUEEdkYNACAAIAJBEHY6ABcgACACQY/+A3EgAUEEdEHwAXFyOwAVA0AgAC0AACIBQQRxDQEgACABQQRyOgAAIAAoAhAiAQRAIAAgAREAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsLhwEBAX8CQCAAKAIAIgAvABUgAEEXai0AAEEQdHIiAkEPcSABQf8BcUYNACAAIAJBEHY6ABcgACACQfD/A3EgAUEPcXI7ABUDQCAALQAAIgFBBHENASAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQALCwtDAQF/IwBBEGsiAiQAIAAoAgAhACACQQM6AAwgAkGAgID+BzYCCCACIAIpAwg3AwAgACABQf8BcSACEGcgAkEQaiQAC4ABAgN/AX0jAEEQayIDJAAgACgCACEEAn0gArYiBiAGXARAQQAhAEMAAMB/DAELQQBBAiAGQwAAgH9bIAZDAACA/1tyIgUbIQBDAADAfyAGIAUbCyEGIAMgADoADCADIAY4AgggAyADKQMINwMAIAQgAUH/AXEgAxBnIANBEGokAAt4AgF9An8jAEEQayIEJAAgACgCACEFIAQCfyACtiIDIANcBEBDAADAfyEDQQAMAQtDAADAfyADIANDAACAf1sgA0MAAID/W3IiABshAyAARQs6AAwgBCADOAIIIAQgBCkDCDcDACAFIAFB/wFxIAQQZyAEQRBqJAALjwEBAX8CQCAAKAIAIgAvABUiAkEMdkEDcSABQf8BcUYNACAAQRdqIAIgAC0AF0EQdHIiAkEQdjoAACAAIAJB/58DcSABQQNxQQx0cjsAFQNAIAAtAAAiAUEEcQ0BIAAgAUEEcjoAACAAKAIQIgEEQCAAIAERAAALIABBgICA/gc2ApwBIAAoAuQDIgANAAsLC5ABAQF/AkAgACgCACIAQRdqLQAAIgJBBHZBAXEgAUH/AXFGDQAgACAALwAVIAJBEHRyIgI7ABUgACACQf//vwdxIAFBAXFBFHRyQRB2OgAXA0AgAC0AACIBQQRxDQEgACABQQRyOgAAIAAoAhAiAQRAIAAgAREAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsL9g0CCH8CfSMAQRBrIgIkAAJAAkAgASgCACIFLQAUIAAoAgAiAS0AFHNB/wBxDQAgBS8AFSAFLQAXQRB0ciABLwAVIAEtABdBEHRyc0H//z9xDQAgBUH8AGohByABQfwAaiEIAkAgAS8AGCIAQQdxRQRAIAUtABhBB3FFDQELIAggABAgIgogByAFLwAYECAiC1sNACAKIApbIAsgC1tyDQELAkAgAS8AGiIAQQdxRQRAIAUtABpBB3FFDQELIAggABAgIgogByAFLwAaECAiC1sNACAKIApbIAsgC1tyDQELAkAgAS8AHCIAQQdxRQRAIAUtABxBB3FFDQELIAggABAgIgogByAFLwAcECAiC1sNACAKIApbIAsgC1tyDQELAkAgAS8AHiIAQQdxRQRAIAUtAB5BB3FFDQELIAJBCGogCCAAEB8gAiAHIAUvAB4QH0EBIQAgAioCCCIKIAIqAgAiC1wEfyAKIApbDQIgCyALXAUgAAtFDQEgAi0ADCACLQAERw0BCyAFQSBqIQAgAUEgaiEGA0ACQCAGIANBAXRqLwAAIgRBB3FFBEAgAC0AAEEHcUUNAQsgAkEIaiAIIAQQHyACIAcgAC8AABAfQQEhBCACKgIIIgogAioCACILXAR/IAogClsNAyALIAtcBSAEC0UNAiACLQAMIAItAARHDQILIABBAmohACADQQFqIgNBCUcNAAsgBUEyaiEAIAFBMmohBkEAIQMDQAJAIAYgA0EBdGovAAAiBEEHcUUEQCAALQAAQQdxRQ0BCyACQQhqIAggBBAfIAIgByAALwAAEB9BASEEIAIqAggiCiACKgIAIgtcBH8gCiAKWw0DIAsgC1wFIAQLRQ0CIAItAAwgAi0ABEcNAgsgAEECaiEAIANBAWoiA0EJRw0ACyAFQcQAaiEAIAFBxABqIQZBACEDA0ACQCAGIANBAXRqLwAAIgRBB3FFBEAgAC0AAEEHcUUNAQsgAkEIaiAIIAQQHyACIAcgAC8AABAfQQEhBCACKgIIIgogAioCACILXAR/IAogClsNAyALIAtcBSAEC0UNAiACLQAMIAItAARHDQILIABBAmohACADQQFqIgNBCUcNAAsgBUHWAGohACABQdYAaiEGQQAhAwNAAkAgBiADQQF0ai8AACIEQQdxRQRAIAAtAABBB3FFDQELIAJBCGogCCAEEB8gAiAHIAAvAAAQH0EBIQQgAioCCCIKIAIqAgAiC1wEfyAKIApbDQMgCyALXAUgBAtFDQIgAi0ADCACLQAERw0CCyAAQQJqIQAgA0EBaiIDQQlHDQALIAVB6ABqIQAgAUHoAGohBkEAIQMDQAJAIAYgA0EBdGovAAAiBEEHcUUEQCAALQAAQQdxRQ0BCyACQQhqIAggBBAfIAIgByAALwAAEB9BASEEIAIqAggiCiACKgIAIgtcBH8gCiAKWw0DIAsgC1wFIAQLRQ0CIAItAAwgAi0ABEcNAgsgAEECaiEAIANBAWoiA0EDRw0ACyAFQe4AaiEAIAFB7gBqIQlBACEEQQAhAwNAAkAgCSADQQF0ai8AACIGQQdxRQRAIAAtAABBB3FFDQELIAJBCGogCCAGEB8gAiAHIAAvAAAQH0EBIQMgAioCCCIKIAIqAgAiC1wEfyAKIApbDQMgCyALXAUgAwtFDQIgAi0ADCACLQAERw0CCyAAQQJqIQBBASEDIAQhBkEBIQQgBkUNAAsgBUHyAGohACABQfIAaiEJQQAhBEEAIQMDQAJAIAkgA0EBdGovAAAiBkEHcUUEQCAALQAAQQdxRQ0BCyACQQhqIAggBhAfIAIgByAALwAAEB9BASEDIAIqAggiCiACKgIAIgtcBH8gCiAKWw0DIAsgC1wFIAMLRQ0CIAItAAwgAi0ABEcNAgsgAEECaiEAQQEhAyAEIQZBASEEIAZFDQALIAVB9gBqIQAgAUH2AGohCUEAIQRBACEDA0ACQCAJIANBAXRqLwAAIgZBB3FFBEAgAC0AAEEHcUUNAQsgAkEIaiAIIAYQHyACIAcgAC8AABAfQQEhAyACKgIIIgogAioCACILXAR/IAogClsNAyALIAtcBSADC0UNAiACLQAMIAItAARHDQILIABBAmohAEEBIQMgBCEGQQEhBCAGRQ0ACyABLwB6IgBBB3FFBEAgBS0AekEHcUUNAgsgCCAAECAiCiAHIAUvAHoQICILWw0BIAogClsNACALIAtcDQELIAFBFGogBUEUakHoABArGiABQfwAaiAFQfwAahCgAQNAIAEtAAAiAEEEcQ0BIAEgAEEEcjoAACABKAIQIgAEQCABIAARAAALIAFBgICA/gc2ApwBIAEoAuQDIgENAAsLIAJBEGokAAvGAwEEfyMAQaAEayICJAAgACgCBCEBIABBADYCBCABBEAgASABKAIAKAIEEQAACyAAKAIIIQEgAEEANgIIIAEEQCABIAEoAgAoAgQRAAALAkAgACgCACIAKALoAyAAKALsA0YEQCAAKALkAw0BIAAgAkEYaiAAKAL0AxBcIgEpAgA3AgAgACABKAIQNgIQIAAgASkCCDcCCCAAQRRqIAFBFGpB6AAQKxogACABKQKMATcCjAEgACABKQKEATcChAEgACABKQJ8NwJ8IAEoApQBIQQgAUEANgKUASAAKAKUASEDIAAgBDYClAEgAwRAIAMQWwsgAEGYAWogAUGYAWpB0AIQKxogACgC6AMiAwRAIAAgAzYC7AMgAxAjCyAAIAEoAugDNgLoAyAAIAEoAuwDNgLsAyAAIAEoAvADNgLwAyABQQA2AvADIAFCADcC6AMgACABKQL8AzcC/AMgACABKQL0AzcC9AMgACABKAKEBDYChAQgASgClAEhACABQQA2ApQBIAAEQCAAEFsLIAJBoARqJAAPCyACQfAcNgIQIABBBUHYJSACQRBqECwQJAALIAJB5hE2AgAgAEEFQdglIAIQLBAkAAsLAEEMEB4gABCiAQsLAEEMEB5BABCiAQsNACAAKAIALQAIQQFxCwoAIAAoAgAoAhQLGQAgAUH/AXEEQBACAAsgACgCACgCEEEBcQsYACAAKAIAIgAgAC0ACEH+AXEgAXI6AAgLJgAgASAAKAIAIgAoAhRHBEAgACABNgIUIAAgACgCDEEBajYCDAsLkgEBAn8jAEEQayICJAAgACgCACEAIAFDAAAAAGAEQCABIAAqAhhcBEAgACABOAIYIAAgACgCDEEBajYCDAsgAkEQaiQADwsgAkGIFDYCACMAQRBrIgMkACADIAI2AgwCQCAARQRAQbgwQdglIAIQSRoMAQsgAEEAQQVB2CUgAiAAKAIEEQ0AGgsgA0EQaiQAECQACz8AIAFB/wFxRQRAIAIgACgCACIAKAIQIgFBAXFHBEAgACABQX5xIAJyNgIQIAAgACgCDEEBajYCDAsPCxACAAsL4CYjAEGACAuBHk9ubHkgbGVhZiBub2RlcyB3aXRoIGN1c3RvbSBtZWFzdXJlIGZ1bmN0aW9ucyBzaG91bGQgbWFudWFsbHkgbWFyayB0aGVtc2VsdmVzIGFzIGRpcnR5AGlzRGlydHkAbWFya0RpcnR5AGRlc3Ryb3kAc2V0RGlzcGxheQBnZXREaXNwbGF5AHNldEZsZXgALSsgICAwWDB4AC0wWCswWCAwWC0weCsweCAweABzZXRGbGV4R3JvdwBnZXRGbGV4R3JvdwBzZXRPdmVyZmxvdwBnZXRPdmVyZmxvdwBoYXNOZXdMYXlvdXQAY2FsY3VsYXRlTGF5b3V0AGdldENvbXB1dGVkTGF5b3V0AHVuc2lnbmVkIHNob3J0AGdldENoaWxkQ291bnQAdW5zaWduZWQgaW50AHNldEp1c3RpZnlDb250ZW50AGdldEp1c3RpZnlDb250ZW50AGF2YWlsYWJsZUhlaWdodCBpcyBpbmRlZmluaXRlIHNvIGhlaWdodFNpemluZ01vZGUgbXVzdCBiZSBTaXppbmdNb2RlOjpNYXhDb250ZW50AGF2YWlsYWJsZVdpZHRoIGlzIGluZGVmaW5pdGUgc28gd2lkdGhTaXppbmdNb2RlIG11c3QgYmUgU2l6aW5nTW9kZTo6TWF4Q29udGVudABzZXRBbGlnbkNvbnRlbnQAZ2V0QWxpZ25Db250ZW50AGdldFBhcmVudABpbXBsZW1lbnQAc2V0TWF4SGVpZ2h0UGVyY2VudABzZXRIZWlnaHRQZXJjZW50AHNldE1pbkhlaWdodFBlcmNlbnQAc2V0RmxleEJhc2lzUGVyY2VudABzZXRHYXBQZXJjZW50AHNldFBvc2l0aW9uUGVyY2VudABzZXRNYXJnaW5QZXJjZW50AHNldE1heFdpZHRoUGVyY2VudABzZXRXaWR0aFBlcmNlbnQAc2V0TWluV2lkdGhQZXJjZW50AHNldFBhZGRpbmdQZXJjZW50AGhhbmRsZS50eXBlKCkgPT0gU3R5bGVWYWx1ZUhhbmRsZTo6VHlwZTo6UG9pbnQgfHwgaGFuZGxlLnR5cGUoKSA9PSBTdHlsZVZhbHVlSGFuZGxlOjpUeXBlOjpQZXJjZW50AGNyZWF0ZURlZmF1bHQAdW5pdAByaWdodABoZWlnaHQAc2V0TWF4SGVpZ2h0AGdldE1heEhlaWdodABzZXRIZWlnaHQAZ2V0SGVpZ2h0AHNldE1pbkhlaWdodABnZXRNaW5IZWlnaHQAZ2V0Q29tcHV0ZWRIZWlnaHQAZ2V0Q29tcHV0ZWRSaWdodABsZWZ0AGdldENvbXB1dGVkTGVmdAByZXNldABfX2Rlc3RydWN0AGZsb2F0AHVpbnQ2NF90AHVzZVdlYkRlZmF1bHRzAHNldFVzZVdlYkRlZmF1bHRzAHNldEFsaWduSXRlbXMAZ2V0QWxpZ25JdGVtcwBzZXRGbGV4QmFzaXMAZ2V0RmxleEJhc2lzAENhbm5vdCBnZXQgbGF5b3V0IHByb3BlcnRpZXMgb2YgbXVsdGktZWRnZSBzaG9ydGhhbmRzAHNldFBvaW50U2NhbGVGYWN0b3IATWVhc3VyZUNhbGxiYWNrV3JhcHBlcgBEaXJ0aWVkQ2FsbGJhY2tXcmFwcGVyAENhbm5vdCByZXNldCBhIG5vZGUgc3RpbGwgYXR0YWNoZWQgdG8gYSBvd25lcgBzZXRCb3JkZXIAZ2V0Qm9yZGVyAGdldENvbXB1dGVkQm9yZGVyAGdldE51bWJlcgBoYW5kbGUudHlwZSgpID09IFN0eWxlVmFsdWVIYW5kbGU6OlR5cGU6Ok51bWJlcgB1bnNpZ25lZCBjaGFyAHRvcABnZXRDb21wdXRlZFRvcABzZXRGbGV4V3JhcABnZXRGbGV4V3JhcABzZXRHYXAAZ2V0R2FwACVwAHNldEhlaWdodEF1dG8Ac2V0RmxleEJhc2lzQXV0bwBzZXRQb3NpdGlvbkF1dG8Ac2V0TWFyZ2luQXV0bwBzZXRXaWR0aEF1dG8AU2NhbGUgZmFjdG9yIHNob3VsZCBub3QgYmUgbGVzcyB0aGFuIHplcm8Ac2V0QXNwZWN0UmF0aW8AZ2V0QXNwZWN0UmF0aW8Ac2V0UG9zaXRpb24AZ2V0UG9zaXRpb24Abm90aWZ5T25EZXN0cnVjdGlvbgBzZXRGbGV4RGlyZWN0aW9uAGdldEZsZXhEaXJlY3Rpb24Ac2V0RGlyZWN0aW9uAGdldERpcmVjdGlvbgBzZXRNYXJnaW4AZ2V0TWFyZ2luAGdldENvbXB1dGVkTWFyZ2luAG1hcmtMYXlvdXRTZWVuAG5hbgBib3R0b20AZ2V0Q29tcHV0ZWRCb3R0b20AYm9vbABlbXNjcmlwdGVuOjp2YWwAc2V0RmxleFNocmluawBnZXRGbGV4U2hyaW5rAHNldEFsd2F5c0Zvcm1zQ29udGFpbmluZ0Jsb2NrAE1lYXN1cmVDYWxsYmFjawBEaXJ0aWVkQ2FsbGJhY2sAZ2V0TGVuZ3RoAHdpZHRoAHNldE1heFdpZHRoAGdldE1heFdpZHRoAHNldFdpZHRoAGdldFdpZHRoAHNldE1pbldpZHRoAGdldE1pbldpZHRoAGdldENvbXB1dGVkV2lkdGgAcHVzaAAvaG9tZS9ydW5uZXIvd29yay95b2dhL3lvZ2EvamF2YXNjcmlwdC8uLi95b2dhL3N0eWxlL1NtYWxsVmFsdWVCdWZmZXIuaAAvaG9tZS9ydW5uZXIvd29yay95b2dhL3lvZ2EvamF2YXNjcmlwdC8uLi95b2dhL3N0eWxlL1N0eWxlVmFsdWVQb29sLmgAdW5zaWduZWQgbG9uZwBzZXRCb3hTaXppbmcAZ2V0Qm94U2l6aW5nAHN0ZDo6d3N0cmluZwBzdGQ6OnN0cmluZwBzdGQ6OnUxNnN0cmluZwBzdGQ6OnUzMnN0cmluZwBzZXRQYWRkaW5nAGdldFBhZGRpbmcAZ2V0Q29tcHV0ZWRQYWRkaW5nAFRyaWVkIHRvIGNvbnN0cnVjdCBZR05vZGUgd2l0aCBudWxsIGNvbmZpZwBBdHRlbXB0aW5nIHRvIGNvbnN0cnVjdCBOb2RlIHdpdGggbnVsbCBjb25maWcAY3JlYXRlV2l0aENvbmZpZwBpbmYAc2V0QWxpZ25TZWxmAGdldEFsaWduU2VsZgBTaXplAHZhbHVlAFZhbHVlAGNyZWF0ZQBtZWFzdXJlAHNldFBvc2l0aW9uVHlwZQBnZXRQb3NpdGlvblR5cGUAaXNSZWZlcmVuY2VCYXNlbGluZQBzZXRJc1JlZmVyZW5jZUJhc2VsaW5lAGNvcHlTdHlsZQBkb3VibGUATm9kZQBleHRlbmQAaW5zZXJ0Q2hpbGQAZ2V0Q2hpbGQAcmVtb3ZlQ2hpbGQAdm9pZABzZXRFeHBlcmltZW50YWxGZWF0dXJlRW5hYmxlZABpc0V4cGVyaW1lbnRhbEZlYXR1cmVFbmFibGVkAGRpcnRpZWQAQ2Fubm90IHJlc2V0IGEgbm9kZSB3aGljaCBzdGlsbCBoYXMgY2hpbGRyZW4gYXR0YWNoZWQAdW5zZXRNZWFzdXJlRnVuYwB1bnNldERpcnRpZWRGdW5jAHNldEVycmF0YQBnZXRFcnJhdGEATWVhc3VyZSBmdW5jdGlvbiByZXR1cm5lZCBhbiBpbnZhbGlkIGRpbWVuc2lvbiB0byBZb2dhOiBbd2lkdGg9JWYsIGhlaWdodD0lZl0ARXhwZWN0IGN1c3RvbSBiYXNlbGluZSBmdW5jdGlvbiB0byBub3QgcmV0dXJuIE5hTgBOQU4ASU5GAGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHNob3J0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBzaG9ydD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBpbnQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGZsb2F0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50OF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQ4X3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50MzJfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50MzJfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8Y2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dW5zaWduZWQgY2hhcj4Ac3RkOjpiYXNpY19zdHJpbmc8dW5zaWduZWQgY2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8c2lnbmVkIGNoYXI+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGxvbmc+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVuc2lnbmVkIGxvbmc+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGRvdWJsZT4AQ2hpbGQgYWxyZWFkeSBoYXMgYSBvd25lciwgaXQgbXVzdCBiZSByZW1vdmVkIGZpcnN0LgBDYW5ub3Qgc2V0IG1lYXN1cmUgZnVuY3Rpb246IE5vZGVzIHdpdGggbWVhc3VyZSBmdW5jdGlvbnMgY2Fubm90IGhhdmUgY2hpbGRyZW4uAENhbm5vdCBhZGQgY2hpbGQ6IE5vZGVzIHdpdGggbWVhc3VyZSBmdW5jdGlvbnMgY2Fubm90IGhhdmUgY2hpbGRyZW4uAChudWxsKQBpbmRleCA8IDQwOTYgJiYgIlNtYWxsVmFsdWVCdWZmZXIgY2FuIG9ubHkgaG9sZCB1cCB0byA0MDk2IGNodW5rcyIAJXMKAAEAAAADAAAAAAAAAAIAAAADAAAAAQAAAAIAAAAAAAAAAQAAAAEAQYwmCwdpaQB2AHZpAEGgJgs3ox0AAKEdAADhHQAA2x0AAOEdAADbHQAAaWlpZmlmaQDUHQAApB0AAHZpaQClHQAA6B0AAGlpaQBB4CYLCcQAAADFAAAAxgBB9CYLDsQAAADHAAAAyAAAANQdAEGQJws+ox0AAOEdAADbHQAA4R0AANsdAADoHQAA4x0AAOgdAABpaWlpAAAAANQdAAC5HQAA1B0AALsdAAC8HQAA6B0AQdgnCwnJAAAAygAAAMsAQewnCxbJAAAAzAAAAMgAAAC/HQAA1B0AAL8dAEGQKAuiA9QdAAC/HQAA2x0AANUdAAB2aWlpaQAAANQdAAC/HQAA4R0AAHZpaWYAAAAA1B0AAL8dAADbHQAAdmlpaQAAAADUHQAAvx0AANUdAADVHQAAwB0AANsdAADbHQAAwB0AANUdAADAHQAAaQBkaWkAdmlpZAAAxB0AAMQdAAC/HQAA1B0AAMQdAADUHQAAxB0AAMMdAADUHQAAxB0AANsdAADUHQAAxB0AANsdAADiHQAAdmlpaWQAAADUHQAAxB0AAOIdAADbHQAAxR0AAMIdAADFHQAA2x0AAMIdAADFHQAA4h0AAMUdAADiHQAAxR0AANsdAABkaWlpAAAAAOEdAADEHQAA2x0AAGZpaWkAAAAA1B0AAMQdAADEHQAA3B0AANQdAADEHQAAxB0AANwdAADFHQAAxB0AAMQdAADEHQAAxB0AANwdAADUHQAAxB0AANUdAADVHQAAxB0AANQdAADEHQAAoR0AANQdAADEHQAAuR0AANUdAADFHQAAAAAAANQdAADEHQAA4h0AAOIdAADbHQAAdmlpZGRpAADBHQAAxR0AQcArC0EZAAoAGRkZAAAAAAUAAAAAAAAJAAAAAAsAAAAAAAAAABkAEQoZGRkDCgcAAQAJCxgAAAkGCwAACwAGGQAAABkZGQBBkSwLIQ4AAAAAAAAAABkACg0ZGRkADQAAAgAJDgAAAAkADgAADgBByywLAQwAQdcsCxUTAAAAABMAAAAACQwAAAAAAAwAAAwAQYUtCwEQAEGRLQsVDwAAAAQPAAAAAAkQAAAAAAAQAAAQAEG/LQsBEgBByy0LHhEAAAAAEQAAAAAJEgAAAAAAEgAAEgAAGgAAABoaGgBBgi4LDhoAAAAaGhoAAAAAAAAJAEGzLgsBFABBvy4LFRcAAAAAFwAAAAAJFAAAAAAAFAAAFABB7S4LARYAQfkuCycVAAAAABUAAAAACRYAAAAAABYAABYAADAxMjM0NTY3ODlBQkNERUYAQcQvCwHSAEHsLwsI//////////8AQbAwCwkQIgEAAAAAAAUAQcQwCwHNAEHcMAsKzgAAAM8AAAD8HQBB9DALAQIAQYQxCwj//////////wBByDELAQUAQdQxCwHQAEHsMQsOzgAAANEAAAAIHgAAAAQAQYQyCwEBAEGUMgsF/////woAQdgyCwHT",!q(O)){var H=O;O=n.locateFile?n.locateFile(H,a):a+H}function K(){var he=O;try{if(he==O&&c)return new Uint8Array(c);if(q(he))try{var pe=nn(he.slice(37)),Te=new Uint8Array(pe.length);for(he=0;he<pe.length;++he)Te[he]=pe.charCodeAt(he);var Le=Te}catch{throw Error("Converting base64 string to bytes failed.")}else Le=void 0;var Fe=Le;if(Fe)return Fe;throw"both async and sync fetching of the wasm failed"}catch(ct){V(ct)}}function X(){return c||typeof fetch!="function"?Promise.resolve().then(function(){return K()}):fetch(O,{credentials:"same-origin"}).then(function(he){if(!he.ok)throw"failed to load wasm binary file at '"+O+"'";return he.arrayBuffer()}).catch(function(){return K()})}function re(he){for(;0<he.length;)he.shift()(n)}function J(he){if(he===void 0)return"_unknown";he=he.replace(/[^a-zA-Z0-9_]/g,"$");var pe=he.charCodeAt(0);return 48<=pe&&57>=pe?"_"+he:he}function Z(he,pe){return he=J(he),function(){return pe.apply(this,arguments)}}var ee=[{},{value:void 0},{value:null},{value:!0},{value:!1}],te=[];function oe(he){var pe=Error,Te=Z(he,function(Le){this.name=he,this.message=Le,Le=Error(Le).stack,Le!==void 0&&(this.stack=this.toString()+`
`+Le.replace(/^Error(:[^\n]*)?\n/,""))});return Te.prototype=Object.create(pe.prototype),Te.prototype.constructor=Te,Te.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},Te}var ae=void 0;function se(he){throw new ae(he)}var fe=he=>(he||se("Cannot use deleted val. handle = "+he),ee[he].value),Ee=he=>{switch(he){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var pe=te.length?te.pop():ee.length;return ee[pe]={ga:1,value:he},pe}},Be=void 0,_e=void 0;function Ce(he){for(var pe="";v[he];)pe+=_e[v[he++]];return pe}var Se=[];function Me(){for(;Se.length;){var he=Se.pop();he.M.$=!1,he.delete()}}var ce=void 0,$e={};function qe(he,pe){for(pe===void 0&&se("ptr should not be undefined");he.R;)pe=he.ba(pe),he=he.R;return pe}var ft={};function Ie(he){he=dn(he);var pe=Ce(he);return En(he),pe}function ht(he,pe){var Te=ft[he];return Te===void 0&&se(pe+" has unknown type "+Ie(he)),Te}function Ue(){}var xt=!1;function ve(he){--he.count.value,he.count.value===0&&(he.T?he.U.W(he.T):he.P.N.W(he.O))}function ue(he,pe,Te){return pe===Te?he:Te.R===void 0?null:(he=ue(he,pe,Te.R),he===null?null:Te.na(he))}var ke={};function He(he,pe){return pe=qe(he,pe),$e[pe]}var Qe=void 0;function Ke(he){throw new Qe(he)}function jt(he,pe){return pe.P&&pe.O||Ke("makeClassHandle requires ptr and ptrType"),!!pe.U!=!!pe.T&&Ke("Both smartPtrType and smartPtr must be specified"),pe.count={value:1},St(Object.create(he,{M:{value:pe}}))}function St(he){return typeof FinalizationRegistry>"u"?(St=pe=>pe,he):(xt=new FinalizationRegistry(pe=>{ve(pe.M)}),St=pe=>{var Te=pe.M;return Te.T&&xt.register(pe,{M:Te},pe),pe},Ue=pe=>{xt.unregister(pe)},St(he))}var Zt={};function Bt(he){for(;he.length;){var pe=he.pop();he.pop()(pe)}}function at(he){return this.fromWireType(E[he>>2])}var pt={},Vt={};function qt(he,pe,Te){function Le(Tt){Tt=Te(Tt),Tt.length!==he.length&&Ke("Mismatched type converter count");for(var Xt=0;Xt<he.length;++Xt)gn(he[Xt],Tt[Xt])}he.forEach(function(Tt){Vt[Tt]=pe});var Fe=Array(pe.length),ct=[],vt=0;pe.forEach((Tt,Xt)=>{ft.hasOwnProperty(Tt)?Fe[Xt]=ft[Tt]:(ct.push(Tt),pt.hasOwnProperty(Tt)||(pt[Tt]=[]),pt[Tt].push(()=>{Fe[Xt]=ft[Tt],++vt,vt===ct.length&&Le(Fe)}))}),ct.length===0&&Le(Fe)}function Wt(he){switch(he){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+he)}}function gn(he,pe,Te={}){if(!("argPackAdvance"in pe))throw new TypeError("registerType registeredInstance requires argPackAdvance");var Le=pe.name;if(he||se('type "'+Le+'" must have a positive integer typeid pointer'),ft.hasOwnProperty(he)){if(Te.ua)return;se("Cannot register type '"+Le+"' twice")}ft[he]=pe,delete Vt[he],pt.hasOwnProperty(he)&&(pe=pt[he],delete pt[he],pe.forEach(Fe=>Fe()))}function Ne(he){se(he.M.P.N.name+" instance already deleted")}function Ht(){}function Qt(he,pe,Te){if(he[pe].S===void 0){var Le=he[pe];he[pe]=function(){return he[pe].S.hasOwnProperty(arguments.length)||se("Function '"+Te+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+he[pe].S+")!"),he[pe].S[arguments.length].apply(this,arguments)},he[pe].S=[],he[pe].S[Le.Z]=Le}}function $t(he,pe){n.hasOwnProperty(he)?(se("Cannot register public name '"+he+"' twice"),Qt(n,he,he),n.hasOwnProperty(void 0)&&se("Cannot register multiple overloads of a function with the same number of arguments (undefined)!"),n[he].S[void 0]=pe):n[he]=pe}function It(he,pe,Te,Le,Fe,ct,vt,Tt){this.name=he,this.constructor=pe,this.X=Te,this.W=Le,this.R=Fe,this.pa=ct,this.ba=vt,this.na=Tt,this.ja=[]}function Ct(he,pe,Te){for(;pe!==Te;)pe.ba||se("Expected null or instance of "+Te.name+", got an instance of "+pe.name),he=pe.ba(he),pe=pe.R;return he}function ln(he,pe){return pe===null?(this.ea&&se("null is not a valid "+this.name),0):(pe.M||se('Cannot pass "'+qi(pe)+'" as a '+this.name),pe.M.O||se("Cannot pass deleted object as a pointer of type "+this.name),Ct(pe.M.O,pe.M.P.N,this.N))}function lt(he,pe){if(pe===null){if(this.ea&&se("null is not a valid "+this.name),this.da){var Te=this.fa();return he!==null&&he.push(this.W,Te),Te}return 0}if(pe.M||se('Cannot pass "'+qi(pe)+'" as a '+this.name),pe.M.O||se("Cannot pass deleted object as a pointer of type "+this.name),!this.ca&&pe.M.P.ca&&se("Cannot convert argument of type "+(pe.M.U?pe.M.U.name:pe.M.P.name)+" to parameter type "+this.name),Te=Ct(pe.M.O,pe.M.P.N,this.N),this.da)switch(pe.M.T===void 0&&se("Passing raw pointer to smart pointer is illegal"),this.Ba){case 0:pe.M.U===this?Te=pe.M.T:se("Cannot convert argument of type "+(pe.M.U?pe.M.U.name:pe.M.P.name)+" to parameter type "+this.name);break;case 1:Te=pe.M.T;break;case 2:if(pe.M.U===this)Te=pe.M.T;else{var Le=pe.clone();Te=this.xa(Te,Ee(function(){Le.delete()})),he!==null&&he.push(this.W,Te)}break;default:se("Unsupporting sharing policy")}return Te}function _t(he,pe){return pe===null?(this.ea&&se("null is not a valid "+this.name),0):(pe.M||se('Cannot pass "'+qi(pe)+'" as a '+this.name),pe.M.O||se("Cannot pass deleted object as a pointer of type "+this.name),pe.M.P.ca&&se("Cannot convert argument of type "+pe.M.P.name+" to parameter type "+this.name),Ct(pe.M.O,pe.M.P.N,this.N))}function Pt(he,pe,Te,Le){this.name=he,this.N=pe,this.ea=Te,this.ca=Le,this.da=!1,this.W=this.xa=this.fa=this.ka=this.Ba=this.wa=void 0,pe.R!==void 0?this.toWireType=lt:(this.toWireType=Le?ln:_t,this.V=null)}function zt(he,pe){n.hasOwnProperty(he)||Ke("Replacing nonexistant public symbol"),n[he]=pe,n[he].Z=void 0}function Wn(he,pe){var Te=[];return function(){if(Te.length=0,Object.assign(Te,arguments),he.includes("j")){var Le=n["dynCall_"+he];Le=Te&&Te.length?Le.apply(null,[pe].concat(Te)):Le.call(null,pe)}else Le=M.get(pe).apply(null,Te);return Le}}function In(he,pe){he=Ce(he);var Te=he.includes("j")?Wn(he,pe):M.get(pe);return typeof Te!="function"&&se("unknown function pointer with signature "+he+": "+pe),Te}var tn=void 0;function cn(he,pe){function Te(ct){Fe[ct]||ft[ct]||(Vt[ct]?Vt[ct].forEach(Te):(Le.push(ct),Fe[ct]=!0))}var Le=[],Fe={};throw pe.forEach(Te),new tn(he+": "+Le.map(Ie).join([", "]))}function Zn(he,pe,Te,Le,Fe){var ct=pe.length;2>ct&&se("argTypes array size mismatch! Must at least get return value and 'this' types!");var vt=pe[1]!==null&&Te!==null,Tt=!1;for(Te=1;Te<pe.length;++Te)if(pe[Te]!==null&&pe[Te].V===void 0){Tt=!0;break}var Xt=pe[0].name!=="void",Dt=ct-2,rn=Array(Dt),sn=[],Un=[];return function(){if(arguments.length!==Dt&&se("function "+he+" called with "+arguments.length+" arguments, expected "+Dt+" args!"),Un.length=0,sn.length=vt?2:1,sn[0]=Fe,vt){var gr=pe[1].toWireType(Un,this);sn[1]=gr}for(var qn=0;qn<Dt;++qn)rn[qn]=pe[qn+2].toWireType(Un,arguments[qn]),sn.push(rn[qn]);if(qn=Le.apply(null,sn),Tt)Bt(Un);else for(var Lr=vt?1:2;Lr<pe.length;Lr++){var Ui=Lr===1?gr:rn[Lr-2];pe[Lr].V!==null&&pe[Lr].V(Ui)}return gr=Xt?pe[0].fromWireType(qn):void 0,gr}}function pr(he,pe){for(var Te=[],Le=0;Le<he;Le++)Te.push(w[pe+4*Le>>2]);return Te}function zr(he){4<he&&--ee[he].ga===0&&(ee[he]=void 0,te.push(he))}function qi(he){if(he===null)return"null";var pe=typeof he;return pe==="object"||pe==="array"||pe==="function"?he.toString():""+he}function Nr(he,pe){switch(pe){case 2:return function(Te){return this.fromWireType(B[Te>>2])};case 3:return function(Te){return this.fromWireType(D[Te>>3])};default:throw new TypeError("Unknown float type: "+he)}}function Yn(he,pe,Te){switch(pe){case 0:return Te?function(Le){return m[Le]}:function(Le){return v[Le]};case 1:return Te?function(Le){return A[Le>>1]}:function(Le){return x[Le>>1]};case 2:return Te?function(Le){return E[Le>>2]}:function(Le){return w[Le>>2]};default:throw new TypeError("Unknown integer type: "+he)}}function Ii(he,pe){for(var Te="",Le=0;!(Le>=pe/2);++Le){var Fe=A[he+2*Le>>1];if(Fe==0)break;Te+=String.fromCharCode(Fe)}return Te}function bs(he,pe,Te){if(Te===void 0&&(Te=2147483647),2>Te)return 0;Te-=2;var Le=pe;Te=Te<2*he.length?Te/2:he.length;for(var Fe=0;Fe<Te;++Fe)A[pe>>1]=he.charCodeAt(Fe),pe+=2;return A[pe>>1]=0,pe-Le}function oo(he){return 2*he.length}function Nc(he,pe){for(var Te=0,Le="";!(Te>=pe/4);){var Fe=E[he+4*Te>>2];if(Fe==0)break;++Te,65536<=Fe?(Fe-=65536,Le+=String.fromCharCode(55296|Fe>>10,56320|Fe&1023)):Le+=String.fromCharCode(Fe)}return Le}function Ad(he,pe,Te){if(Te===void 0&&(Te=2147483647),4>Te)return 0;var Le=pe;Te=Le+Te-4;for(var Fe=0;Fe<he.length;++Fe){var ct=he.charCodeAt(Fe);if(55296<=ct&&57343>=ct){var vt=he.charCodeAt(++Fe);ct=65536+((ct&1023)<<10)|vt&1023}if(E[pe>>2]=ct,pe+=4,pe+4>Te)break}return E[pe>>2]=0,pe-Le}function Au(he){for(var pe=0,Te=0;Te<he.length;++Te){var Le=he.charCodeAt(Te);55296<=Le&&57343>=Le&&++Te,pe+=4}return pe}var Tl={};function ec(he){var pe=Tl[he];return pe===void 0?Ce(he):pe}var Qi=[];function me(he){var pe=Qi.length;return Qi.push(he),pe}function Ge(he,pe){for(var Te=Array(he),Le=0;Le<he;++Le)Te[Le]=ht(w[pe+4*Le>>2],"parameter "+Le);return Te}var rt=[],nt=[null,[],[]];ae=n.BindingError=oe("BindingError"),n.count_emval_handles=function(){for(var he=0,pe=5;pe<ee.length;++pe)ee[pe]!==void 0&&++he;return he},n.get_first_emval=function(){for(var he=5;he<ee.length;++he)if(ee[he]!==void 0)return ee[he];return null},Be=n.PureVirtualError=oe("PureVirtualError");for(var We=Array(256),Kt=0;256>Kt;++Kt)We[Kt]=String.fromCharCode(Kt);_e=We,n.getInheritedInstanceCount=function(){return Object.keys($e).length},n.getLiveInheritedInstances=function(){var he=[],pe;for(pe in $e)$e.hasOwnProperty(pe)&&he.push($e[pe]);return he},n.flushPendingDeletes=Me,n.setDelayFunction=function(he){ce=he,Se.length&&ce&&ce(Me)},Qe=n.InternalError=oe("InternalError"),Ht.prototype.isAliasOf=function(he){if(!(this instanceof Ht&&he instanceof Ht))return!1;var pe=this.M.P.N,Te=this.M.O,Le=he.M.P.N;for(he=he.M.O;pe.R;)Te=pe.ba(Te),pe=pe.R;for(;Le.R;)he=Le.ba(he),Le=Le.R;return pe===Le&&Te===he},Ht.prototype.clone=function(){if(this.M.O||Ne(this),this.M.aa)return this.M.count.value+=1,this;var he=St,pe=Object,Te=pe.create,Le=Object.getPrototypeOf(this),Fe=this.M;return he=he(Te.call(pe,Le,{M:{value:{count:Fe.count,$:Fe.$,aa:Fe.aa,O:Fe.O,P:Fe.P,T:Fe.T,U:Fe.U}}})),he.M.count.value+=1,he.M.$=!1,he},Ht.prototype.delete=function(){this.M.O||Ne(this),this.M.$&&!this.M.aa&&se("Object already scheduled for deletion"),Ue(this),ve(this.M),this.M.aa||(this.M.T=void 0,this.M.O=void 0)},Ht.prototype.isDeleted=function(){return!this.M.O},Ht.prototype.deleteLater=function(){return this.M.O||Ne(this),this.M.$&&!this.M.aa&&se("Object already scheduled for deletion"),Se.push(this),Se.length===1&&ce&&ce(Me),this.M.$=!0,this},Pt.prototype.qa=function(he){return this.ka&&(he=this.ka(he)),he},Pt.prototype.ha=function(he){this.W&&this.W(he)},Pt.prototype.argPackAdvance=8,Pt.prototype.readValueFromPointer=at,Pt.prototype.deleteObject=function(he){he!==null&&he.delete()},Pt.prototype.fromWireType=function(he){function pe(){return this.da?jt(this.N.X,{P:this.wa,O:Te,U:this,T:he}):jt(this.N.X,{P:this,O:he})}var Te=this.qa(he);if(!Te)return this.ha(he),null;var Le=He(this.N,Te);if(Le!==void 0)return Le.M.count.value===0?(Le.M.O=Te,Le.M.T=he,Le.clone()):(Le=Le.clone(),this.ha(he),Le);if(Le=this.N.pa(Te),Le=ke[Le],!Le)return pe.call(this);Le=this.ca?Le.la:Le.pointerType;var Fe=ue(Te,this.N,Le.N);return Fe===null?pe.call(this):this.da?jt(Le.N.X,{P:Le,O:Fe,U:this,T:he}):jt(Le.N.X,{P:Le,O:Fe})},tn=n.UnboundTypeError=oe("UnboundTypeError");var nn=typeof atob=="function"?atob:function(he){var pe="",Te=0;he=he.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var Le="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(he.charAt(Te++)),Fe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(he.charAt(Te++)),ct="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(he.charAt(Te++)),vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(he.charAt(Te++));Le=Le<<2|Fe>>4,Fe=(Fe&15)<<4|ct>>2;var Tt=(ct&3)<<6|vt;pe+=String.fromCharCode(Le),ct!==64&&(pe+=String.fromCharCode(Fe)),vt!==64&&(pe+=String.fromCharCode(Tt))}while(Te<he.length);return pe},un={l:function(he,pe,Te,Le){V("Assertion failed: "+(he?f(v,he):"")+", at: "+[pe?pe?f(v,pe):"":"unknown filename",Te,Le?Le?f(v,Le):"":"unknown function"])},q:function(he,pe,Te){he=Ce(he),pe=ht(pe,"wrapper"),Te=fe(Te);var Le=[].slice,Fe=pe.N,ct=Fe.X,vt=Fe.R.X,Tt=Fe.R.constructor;he=Z(he,function(){Fe.R.ja.forEach((function(Dt){if(this[Dt]===vt[Dt])throw new Be("Pure virtual function "+Dt+" must be implemented in JavaScript")}).bind(this)),Object.defineProperty(this,"__parent",{value:ct}),this.__construct.apply(this,Le.call(arguments))}),ct.__construct=function(){this===ct&&se("Pass correct 'this' to __construct");var Dt=Tt.implement.apply(void 0,[this].concat(Le.call(arguments)));Ue(Dt);var rn=Dt.M;Dt.notifyOnDestruction(),rn.aa=!0,Object.defineProperties(this,{M:{value:rn}}),St(this),Dt=rn.O,Dt=qe(Fe,Dt),$e.hasOwnProperty(Dt)?se("Tried to register registered instance: "+Dt):$e[Dt]=this},ct.__destruct=function(){this===ct&&se("Pass correct 'this' to __destruct"),Ue(this);var Dt=this.M.O;Dt=qe(Fe,Dt),$e.hasOwnProperty(Dt)?delete $e[Dt]:se("Tried to unregister unregistered instance: "+Dt)},he.prototype=Object.create(ct);for(var Xt in Te)he.prototype[Xt]=Te[Xt];return Ee(he)},j:function(he){var pe=Zt[he];delete Zt[he];var Te=pe.fa,Le=pe.W,Fe=pe.ia,ct=Fe.map(vt=>vt.ta).concat(Fe.map(vt=>vt.za));qt([he],ct,vt=>{var Tt={};return Fe.forEach((Xt,Dt)=>{var rn=vt[Dt],sn=Xt.ra,Un=Xt.sa,gr=vt[Dt+Fe.length],qn=Xt.ya,Lr=Xt.Aa;Tt[Xt.oa]={read:Ui=>rn.fromWireType(sn(Un,Ui)),write:(Ui,ma)=>{var lo=[];qn(Lr,Ui,gr.toWireType(lo,ma)),Bt(lo)}}}),[{name:pe.name,fromWireType:function(Xt){var Dt={},rn;for(rn in Tt)Dt[rn]=Tt[rn].read(Xt);return Le(Xt),Dt},toWireType:function(Xt,Dt){for(var rn in Tt)if(!(rn in Dt))throw new TypeError('Missing field:  "'+rn+'"');var sn=Te();for(rn in Tt)Tt[rn].write(sn,Dt[rn]);return Xt!==null&&Xt.push(Le,sn),sn},argPackAdvance:8,readValueFromPointer:at,V:Le}]})},v:function(){},B:function(he,pe,Te,Le,Fe){var ct=Wt(Te);pe=Ce(pe),gn(he,{name:pe,fromWireType:function(vt){return!!vt},toWireType:function(vt,Tt){return Tt?Le:Fe},argPackAdvance:8,readValueFromPointer:function(vt){if(Te===1)var Tt=m;else if(Te===2)Tt=A;else if(Te===4)Tt=E;else throw new TypeError("Unknown boolean type size: "+pe);return this.fromWireType(Tt[vt>>ct])},V:null})},f:function(he,pe,Te,Le,Fe,ct,vt,Tt,Xt,Dt,rn,sn,Un){rn=Ce(rn),ct=In(Fe,ct),Tt&&(Tt=In(vt,Tt)),Dt&&(Dt=In(Xt,Dt)),Un=In(sn,Un);var gr=J(rn);$t(gr,function(){cn("Cannot construct "+rn+" due to unbound types",[Le])}),qt([he,pe,Te],Le?[Le]:[],function(qn){if(qn=qn[0],Le)var Lr=qn.N,Ui=Lr.X;else Ui=Ht.prototype;qn=Z(gr,function(){if(Object.getPrototypeOf(this)!==ma)throw new ae("Use 'new' to construct "+rn);if(lo.Y===void 0)throw new ae(rn+" has no accessible constructor");var yd=lo.Y[arguments.length];if(yd===void 0)throw new ae("Tried to invoke ctor of "+rn+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(lo.Y).toString()+") parameters instead!");return yd.apply(this,arguments)});var ma=Object.create(Ui,{constructor:{value:qn}});qn.prototype=ma;var lo=new It(rn,qn,ma,Un,Lr,ct,Tt,Dt);Lr=new Pt(rn,lo,!0,!1),Ui=new Pt(rn+"*",lo,!1,!1);var Qp=new Pt(rn+" const*",lo,!1,!0);return ke[he]={pointerType:Ui,la:Qp},zt(gr,qn),[Lr,Ui,Qp]})},d:function(he,pe,Te,Le,Fe,ct,vt){var Tt=pr(Te,Le);pe=Ce(pe),ct=In(Fe,ct),qt([],[he],function(Xt){function Dt(){cn("Cannot call "+rn+" due to unbound types",Tt)}Xt=Xt[0];var rn=Xt.name+"."+pe;pe.startsWith("@@")&&(pe=Symbol[pe.substring(2)]);var sn=Xt.N.constructor;return sn[pe]===void 0?(Dt.Z=Te-1,sn[pe]=Dt):(Qt(sn,pe,rn),sn[pe].S[Te-1]=Dt),qt([],Tt,function(Un){return Un=Zn(rn,[Un[0],null].concat(Un.slice(1)),null,ct,vt),sn[pe].S===void 0?(Un.Z=Te-1,sn[pe]=Un):sn[pe].S[Te-1]=Un,[]}),[]})},p:function(he,pe,Te,Le,Fe,ct){0<pe||V();var vt=pr(pe,Te);Fe=In(Le,Fe),qt([],[he],function(Tt){Tt=Tt[0];var Xt="constructor "+Tt.name;if(Tt.N.Y===void 0&&(Tt.N.Y=[]),Tt.N.Y[pe-1]!==void 0)throw new ae("Cannot register multiple constructors with identical number of parameters ("+(pe-1)+") for class '"+Tt.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return Tt.N.Y[pe-1]=()=>{cn("Cannot construct "+Tt.name+" due to unbound types",vt)},qt([],vt,function(Dt){return Dt.splice(1,0,null),Tt.N.Y[pe-1]=Zn(Xt,Dt,null,Fe,ct),[]}),[]})},a:function(he,pe,Te,Le,Fe,ct,vt,Tt){var Xt=pr(Te,Le);pe=Ce(pe),ct=In(Fe,ct),qt([],[he],function(Dt){function rn(){cn("Cannot call "+sn+" due to unbound types",Xt)}Dt=Dt[0];var sn=Dt.name+"."+pe;pe.startsWith("@@")&&(pe=Symbol[pe.substring(2)]),Tt&&Dt.N.ja.push(pe);var Un=Dt.N.X,gr=Un[pe];return gr===void 0||gr.S===void 0&&gr.className!==Dt.name&&gr.Z===Te-2?(rn.Z=Te-2,rn.className=Dt.name,Un[pe]=rn):(Qt(Un,pe,sn),Un[pe].S[Te-2]=rn),qt([],Xt,function(qn){return qn=Zn(sn,qn,Dt,ct,vt),Un[pe].S===void 0?(qn.Z=Te-2,Un[pe]=qn):Un[pe].S[Te-2]=qn,[]}),[]})},A:function(he,pe){pe=Ce(pe),gn(he,{name:pe,fromWireType:function(Te){var Le=fe(Te);return zr(Te),Le},toWireType:function(Te,Le){return Ee(Le)},argPackAdvance:8,readValueFromPointer:at,V:null})},n:function(he,pe,Te){Te=Wt(Te),pe=Ce(pe),gn(he,{name:pe,fromWireType:function(Le){return Le},toWireType:function(Le,Fe){return Fe},argPackAdvance:8,readValueFromPointer:Nr(pe,Te),V:null})},e:function(he,pe,Te,Le,Fe){pe=Ce(pe),Fe===-1&&(Fe=4294967295),Fe=Wt(Te);var ct=Tt=>Tt;if(Le===0){var vt=32-8*Te;ct=Tt=>Tt<<vt>>>vt}Te=pe.includes("unsigned")?function(Tt,Xt){return Xt>>>0}:function(Tt,Xt){return Xt},gn(he,{name:pe,fromWireType:ct,toWireType:Te,argPackAdvance:8,readValueFromPointer:Yn(pe,Fe,Le!==0),V:null})},b:function(he,pe,Te){function Le(ct){ct>>=2;var vt=w;return new Fe(p,vt[ct+1],vt[ct])}var Fe=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][pe];Te=Ce(Te),gn(he,{name:Te,fromWireType:Le,argPackAdvance:8,readValueFromPointer:Le},{ua:!0})},o:function(he,pe){pe=Ce(pe);var Te=pe==="std::string";gn(he,{name:pe,fromWireType:function(Le){var Fe=w[Le>>2],ct=Le+4;if(Te)for(var vt=ct,Tt=0;Tt<=Fe;++Tt){var Xt=ct+Tt;if(Tt==Fe||v[Xt]==0){if(vt=vt?f(v,vt,Xt-vt):"",Dt===void 0)var Dt=vt;else Dt+="\0",Dt+=vt;vt=Xt+1}}else{for(Dt=Array(Fe),Tt=0;Tt<Fe;++Tt)Dt[Tt]=String.fromCharCode(v[ct+Tt]);Dt=Dt.join("")}return En(Le),Dt},toWireType:function(Le,Fe){Fe instanceof ArrayBuffer&&(Fe=new Uint8Array(Fe));var ct,vt=typeof Fe=="string";if(vt||Fe instanceof Uint8Array||Fe instanceof Uint8ClampedArray||Fe instanceof Int8Array||se("Cannot pass non-string to std::string"),Te&&vt){var Tt=0;for(ct=0;ct<Fe.length;++ct){var Xt=Fe.charCodeAt(ct);127>=Xt?Tt++:2047>=Xt?Tt+=2:55296<=Xt&&57343>=Xt?(Tt+=4,++ct):Tt+=3}ct=Tt}else ct=Fe.length;if(Tt=Bn(4+ct+1),Xt=Tt+4,w[Tt>>2]=ct,Te&&vt){if(vt=Xt,Xt=ct+1,ct=v,0<Xt){Xt=vt+Xt-1;for(var Dt=0;Dt<Fe.length;++Dt){var rn=Fe.charCodeAt(Dt);if(55296<=rn&&57343>=rn){var sn=Fe.charCodeAt(++Dt);rn=65536+((rn&1023)<<10)|sn&1023}if(127>=rn){if(vt>=Xt)break;ct[vt++]=rn}else{if(2047>=rn){if(vt+1>=Xt)break;ct[vt++]=192|rn>>6}else{if(65535>=rn){if(vt+2>=Xt)break;ct[vt++]=224|rn>>12}else{if(vt+3>=Xt)break;ct[vt++]=240|rn>>18,ct[vt++]=128|rn>>12&63}ct[vt++]=128|rn>>6&63}ct[vt++]=128|rn&63}}ct[vt]=0}}else if(vt)for(vt=0;vt<ct;++vt)Dt=Fe.charCodeAt(vt),255<Dt&&(En(Xt),se("String has UTF-16 code units that do not fit in 8 bits")),v[Xt+vt]=Dt;else for(vt=0;vt<ct;++vt)v[Xt+vt]=Fe[vt];return Le!==null&&Le.push(En,Tt),Tt},argPackAdvance:8,readValueFromPointer:at,V:function(Le){En(Le)}})},i:function(he,pe,Te){if(Te=Ce(Te),pe===2)var Le=Ii,Fe=bs,ct=oo,vt=()=>x,Tt=1;else pe===4&&(Le=Nc,Fe=Ad,ct=Au,vt=()=>w,Tt=2);gn(he,{name:Te,fromWireType:function(Xt){for(var Dt=w[Xt>>2],rn=vt(),sn,Un=Xt+4,gr=0;gr<=Dt;++gr){var qn=Xt+4+gr*pe;(gr==Dt||rn[qn>>Tt]==0)&&(Un=Le(Un,qn-Un),sn===void 0?sn=Un:(sn+="\0",sn+=Un),Un=qn+pe)}return En(Xt),sn},toWireType:function(Xt,Dt){typeof Dt!="string"&&se("Cannot pass non-string to C++ string type "+Te);var rn=ct(Dt),sn=Bn(4+rn+pe);return w[sn>>2]=rn>>Tt,Fe(Dt,sn+4,rn+pe),Xt!==null&&Xt.push(En,sn),sn},argPackAdvance:8,readValueFromPointer:at,V:function(Xt){En(Xt)}})},k:function(he,pe,Te,Le,Fe,ct){Zt[he]={name:Ce(pe),fa:In(Te,Le),W:In(Fe,ct),ia:[]}},h:function(he,pe,Te,Le,Fe,ct,vt,Tt,Xt,Dt){Zt[he].ia.push({oa:Ce(pe),ta:Te,ra:In(Le,Fe),sa:ct,za:vt,ya:In(Tt,Xt),Aa:Dt})},C:function(he,pe){pe=Ce(pe),gn(he,{va:!0,name:pe,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},s:function(he,pe,Te,Le,Fe){he=Qi[he],pe=fe(pe),Te=ec(Te);var ct=[];return w[Le>>2]=Ee(ct),he(pe,Te,ct,Fe)},t:function(he,pe,Te,Le){he=Qi[he],pe=fe(pe),Te=ec(Te),he(pe,Te,null,Le)},g:zr,m:function(he,pe){var Te=Ge(he,pe),Le=Te[0];pe=Le.name+"_$"+Te.slice(1).map(function(vt){return vt.name}).join("_")+"$";var Fe=rt[pe];if(Fe!==void 0)return Fe;var ct=Array(he-1);return Fe=me((vt,Tt,Xt,Dt)=>{for(var rn=0,sn=0;sn<he-1;++sn)ct[sn]=Te[sn+1].readValueFromPointer(Dt+rn),rn+=Te[sn+1].argPackAdvance;for(vt=vt[Tt].apply(vt,ct),sn=0;sn<he-1;++sn)Te[sn+1].ma&&Te[sn+1].ma(ct[sn]);if(!Le.va)return Le.toWireType(Xt,vt)}),rt[pe]=Fe},D:function(he){4<he&&(ee[he].ga+=1)},r:function(he){var pe=fe(he);Bt(pe),zr(he)},c:function(){V("")},x:function(he,pe,Te){v.copyWithin(he,pe,pe+Te)},w:function(he){var pe=v.length;if(he>>>=0,2147483648<he)return!1;for(var Te=1;4>=Te;Te*=2){var Le=pe*(1+.2/Te);Le=Math.min(Le,he+100663296);var Fe=Math;Le=Math.max(he,Le),Fe=Fe.min.call(Fe,2147483648,Le+(65536-Le%65536)%65536);e:{try{u.grow(Fe-p.byteLength+65535>>>16),T();var ct=1;break e}catch{}ct=void 0}if(ct)return!0}return!1},z:function(){return 52},u:function(){return 70},y:function(he,pe,Te,Le){for(var Fe=0,ct=0;ct<Te;ct++){var vt=w[pe>>2],Tt=w[pe+4>>2];pe+=8;for(var Xt=0;Xt<Tt;Xt++){var Dt=v[vt+Xt],rn=nt[he];Dt===0||Dt===10?((he===1?o:l)(f(rn,0)),rn.length=0):rn.push(Dt)}Fe+=Tt}return w[Le>>2]=Fe,0}};(function(){function he(Fe){n.asm=Fe.exports,u=n.asm.E,T(),M=n.asm.J,k.unshift(n.asm.F),z--,n.monitorRunDependencies&&n.monitorRunDependencies(z),z==0&&G&&(Fe=G,G=null,Fe())}function pe(Fe){he(Fe.instance)}function Te(Fe){return X().then(function(ct){return WebAssembly.instantiate(ct,Le)}).then(function(ct){return ct}).then(Fe,function(ct){l("failed to asynchronously prepare wasm: "+ct),V(ct)})}var Le={a:un};if(z++,n.monitorRunDependencies&&n.monitorRunDependencies(z),n.instantiateWasm)try{return n.instantiateWasm(Le,he)}catch(Fe){l("Module.instantiateWasm callback failed with error: "+Fe),i(Fe)}return(function(){return c||typeof WebAssembly.instantiateStreaming!="function"||q(O)||typeof fetch!="function"?Te(pe):fetch(O,{credentials:"same-origin"}).then(function(Fe){return WebAssembly.instantiateStreaming(Fe,Le).then(pe,function(ct){return l("wasm streaming compile failed: "+ct),l("falling back to ArrayBuffer instantiation"),Te(pe)})})})().catch(i),{}})(),n.___wasm_call_ctors=function(){return(n.___wasm_call_ctors=n.asm.F).apply(null,arguments)};var dn=n.___getTypeName=function(){return(dn=n.___getTypeName=n.asm.G).apply(null,arguments)};n.__embind_initialize_bindings=function(){return(n.__embind_initialize_bindings=n.asm.H).apply(null,arguments)};var Bn=n._malloc=function(){return(Bn=n._malloc=n.asm.I).apply(null,arguments)},En=n._free=function(){return(En=n._free=n.asm.K).apply(null,arguments)};n.dynCall_jiji=function(){return(n.dynCall_jiji=n.asm.L).apply(null,arguments)};var Sn;G=function he(){Sn||ir(),Sn||(G=he)};function ir(){function he(){if(!Sn&&(Sn=!0,n.calledRun=!0,!h)){if(re(k),r(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;){var pe=n.postRun.shift();L.unshift(pe)}re(L)}}if(!(0<z)){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)F();re(R),0<z||(n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),he()},1)):he())}}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);0<n.preInit.length;)n.preInit.pop()();return ir(),e.ready})})();let Hr=(function(t){return t[t.Auto=0]="Auto",t[t.FlexStart=1]="FlexStart",t[t.Center=2]="Center",t[t.FlexEnd=3]="FlexEnd",t[t.Stretch=4]="Stretch",t[t.Baseline=5]="Baseline",t[t.SpaceBetween=6]="SpaceBetween",t[t.SpaceAround=7]="SpaceAround",t[t.SpaceEvenly=8]="SpaceEvenly",t})({}),Nb=(function(t){return t[t.BorderBox=0]="BorderBox",t[t.ContentBox=1]="ContentBox",t})({}),h8=(function(t){return t[t.Width=0]="Width",t[t.Height=1]="Height",t})({}),I0=(function(t){return t[t.Inherit=0]="Inherit",t[t.LTR=1]="LTR",t[t.RTL=2]="RTL",t})({}),db=(function(t){return t[t.Flex=0]="Flex",t[t.None=1]="None",t[t.Contents=2]="Contents",t})({}),Dn=(function(t){return t[t.Left=0]="Left",t[t.Top=1]="Top",t[t.Right=2]="Right",t[t.Bottom=3]="Bottom",t[t.Start=4]="Start",t[t.End=5]="End",t[t.Horizontal=6]="Horizontal",t[t.Vertical=7]="Vertical",t[t.All=8]="All",t})({}),Lx=(function(t){return t[t.None=0]="None",t[t.StretchFlexBasis=1]="StretchFlexBasis",t[t.AbsolutePositionWithoutInsetsExcludesPadding=2]="AbsolutePositionWithoutInsetsExcludesPadding",t[t.AbsolutePercentAgainstInnerSize=4]="AbsolutePercentAgainstInnerSize",t[t.All=2147483647]="All",t[t.Classic=2147483646]="Classic",t})({}),xhe=(function(t){return t[t.WebFlexBasis=0]="WebFlexBasis",t})({}),cu=(function(t){return t[t.Column=0]="Column",t[t.ColumnReverse=1]="ColumnReverse",t[t.Row=2]="Row",t[t.RowReverse=3]="RowReverse",t})({}),Mp=(function(t){return t[t.Column=0]="Column",t[t.Row=1]="Row",t[t.All=2]="All",t})({}),Po=(function(t){return t[t.FlexStart=0]="FlexStart",t[t.Center=1]="Center",t[t.FlexEnd=2]="FlexEnd",t[t.SpaceBetween=3]="SpaceBetween",t[t.SpaceAround=4]="SpaceAround",t[t.SpaceEvenly=5]="SpaceEvenly",t})({}),Fx=(function(t){return t[t.Error=0]="Error",t[t.Warn=1]="Warn",t[t.Info=2]="Info",t[t.Debug=3]="Debug",t[t.Verbose=4]="Verbose",t[t.Fatal=5]="Fatal",t})({}),yT=(function(t){return t[t.Undefined=0]="Undefined",t[t.Exactly=1]="Exactly",t[t.AtMost=2]="AtMost",t})({}),f8=(function(t){return t[t.Default=0]="Default",t[t.Text=1]="Text",t})({}),hb=(function(t){return t[t.Visible=0]="Visible",t[t.Hidden=1]="Hidden",t[t.Scroll=2]="Scroll",t})({}),ky=(function(t){return t[t.Static=0]="Static",t[t.Relative=1]="Relative",t[t.Absolute=2]="Absolute",t})({}),mp=(function(t){return t[t.Undefined=0]="Undefined",t[t.Point=1]="Point",t[t.Percent=2]="Percent",t[t.Auto=3]="Auto",t})({}),Vg=(function(t){return t[t.NoWrap=0]="NoWrap",t[t.Wrap=1]="Wrap",t[t.WrapReverse=2]="WrapReverse",t})({});const srt={ALIGN_AUTO:Hr.Auto,ALIGN_FLEX_START:Hr.FlexStart,ALIGN_CENTER:Hr.Center,ALIGN_FLEX_END:Hr.FlexEnd,ALIGN_STRETCH:Hr.Stretch,ALIGN_BASELINE:Hr.Baseline,ALIGN_SPACE_BETWEEN:Hr.SpaceBetween,ALIGN_SPACE_AROUND:Hr.SpaceAround,ALIGN_SPACE_EVENLY:Hr.SpaceEvenly,BOX_SIZING_BORDER_BOX:Nb.BorderBox,BOX_SIZING_CONTENT_BOX:Nb.ContentBox,DIMENSION_WIDTH:h8.Width,DIMENSION_HEIGHT:h8.Height,DIRECTION_INHERIT:I0.Inherit,DIRECTION_LTR:I0.LTR,DIRECTION_RTL:I0.RTL,DISPLAY_FLEX:db.Flex,DISPLAY_NONE:db.None,DISPLAY_CONTENTS:db.Contents,EDGE_LEFT:Dn.Left,EDGE_TOP:Dn.Top,EDGE_RIGHT:Dn.Right,EDGE_BOTTOM:Dn.Bottom,EDGE_START:Dn.Start,EDGE_END:Dn.End,EDGE_HORIZONTAL:Dn.Horizontal,EDGE_VERTICAL:Dn.Vertical,EDGE_ALL:Dn.All,ERRATA_NONE:Lx.None,ERRATA_STRETCH_FLEX_BASIS:Lx.StretchFlexBasis,ERRATA_ABSOLUTE_POSITION_WITHOUT_INSETS_EXCLUDES_PADDING:Lx.AbsolutePositionWithoutInsetsExcludesPadding,ERRATA_ABSOLUTE_PERCENT_AGAINST_INNER_SIZE:Lx.AbsolutePercentAgainstInnerSize,ERRATA_ALL:Lx.All,ERRATA_CLASSIC:Lx.Classic,EXPERIMENTAL_FEATURE_WEB_FLEX_BASIS:xhe.WebFlexBasis,FLEX_DIRECTION_COLUMN:cu.Column,FLEX_DIRECTION_COLUMN_REVERSE:cu.ColumnReverse,FLEX_DIRECTION_ROW:cu.Row,FLEX_DIRECTION_ROW_REVERSE:cu.RowReverse,GUTTER_COLUMN:Mp.Column,GUTTER_ROW:Mp.Row,GUTTER_ALL:Mp.All,JUSTIFY_FLEX_START:Po.FlexStart,JUSTIFY_CENTER:Po.Center,JUSTIFY_FLEX_END:Po.FlexEnd,JUSTIFY_SPACE_BETWEEN:Po.SpaceBetween,JUSTIFY_SPACE_AROUND:Po.SpaceAround,JUSTIFY_SPACE_EVENLY:Po.SpaceEvenly,LOG_LEVEL_ERROR:Fx.Error,LOG_LEVEL_WARN:Fx.Warn,LOG_LEVEL_INFO:Fx.Info,LOG_LEVEL_DEBUG:Fx.Debug,LOG_LEVEL_VERBOSE:Fx.Verbose,LOG_LEVEL_FATAL:Fx.Fatal,MEASURE_MODE_UNDEFINED:yT.Undefined,MEASURE_MODE_EXACTLY:yT.Exactly,MEASURE_MODE_AT_MOST:yT.AtMost,NODE_TYPE_DEFAULT:f8.Default,NODE_TYPE_TEXT:f8.Text,OVERFLOW_VISIBLE:hb.Visible,OVERFLOW_HIDDEN:hb.Hidden,OVERFLOW_SCROLL:hb.Scroll,POSITION_TYPE_STATIC:ky.Static,POSITION_TYPE_RELATIVE:ky.Relative,POSITION_TYPE_ABSOLUTE:ky.Absolute,UNIT_UNDEFINED:mp.Undefined,UNIT_POINT:mp.Point,UNIT_PERCENT:mp.Percent,UNIT_AUTO:mp.Auto,WRAP_NO_WRAP:Vg.NoWrap,WRAP_WRAP:Vg.Wrap,WRAP_WRAP_REVERSE:Vg.WrapReverse};function art(t){function e(i,s,a){const o=i[s];i[s]=function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a.call(this,o,...c)}}for(const i of["setPosition","setMargin","setFlexBasis","setWidth","setHeight","setMinWidth","setMinHeight","setMaxWidth","setMaxHeight","setPadding","setGap"]){const s={[mp.Point]:t.Node.prototype[i],[mp.Percent]:t.Node.prototype[`${i}Percent`],[mp.Auto]:t.Node.prototype[`${i}Auto`]};e(t.Node.prototype,i,function(a){for(var o=arguments.length,l=new Array(o>1?o-1:0),c=1;c<o;c++)l[c-1]=arguments[c];const u=l.pop();let h,f;if(u==="auto")h=mp.Auto,f=void 0;else if(typeof u=="object")h=u.unit,f=u.valueOf();else if(h=typeof u=="string"&&u.endsWith("%")?mp.Percent:mp.Point,f=parseFloat(u),u!==void 0&&!Number.isNaN(u)&&Number.isNaN(f))throw new Error(`Invalid value ${u} for ${i}`);if(!s[h])throw new Error(`Failed to execute "${i}": Unsupported unit '${u}'`);return f!==void 0?s[h].call(this,...l,f):s[h].call(this,...l)})}function n(i){return t.MeasureCallback.implement({measure:function(){const{width:s,height:a}=i(...arguments);return{width:s??NaN,height:a??NaN}}})}e(t.Node.prototype,"setMeasureFunc",function(i,s){return s?i.call(this,n(s)):this.unsetMeasureFunc()});function r(i){return t.DirtiedCallback.implement({dirtied:i})}return e(t.Node.prototype,"setDirtiedFunc",function(i,s){i.call(this,r(s))}),e(t.Config.prototype,"free",function(){t.Config.destroy(this)}),e(t.Node,"create",(i,s)=>s?t.Node.createWithConfig(s):t.Node.createDefault()),e(t.Node.prototype,"free",function(){t.Node.destroy(this)}),e(t.Node.prototype,"freeRecursive",function(){for(let i=0,s=this.getChildCount();i<s;++i)this.getChild(0).freeRecursive();this.free()}),e(t.Node.prototype,"calculateLayout",function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:I0.LTR;return i.call(this,s,a,o)}),{Config:t.Config,Node:t.Node,...srt}}async function bhe(){return art(await irt())}const ort=Object.freeze(Object.defineProperty({__proto__:null,Align:Hr,BoxSizing:Nb,Dimension:h8,Direction:I0,Display:db,Edge:Dn,Errata:Lx,ExperimentalFeature:xhe,FlexDirection:cu,Gutter:Mp,Justify:Po,LogLevel:Fx,MeasureMode:yT,NodeType:f8,Overflow:hb,PositionType:ky,Unit:mp,Wrap:Vg,loadYoga:bhe},Symbol.toStringTag,{value:"Module"}));var lrt=Object.defineProperty,crt=(t,e,n)=>e in t?lrt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uw=(t,e,n)=>crt(t,typeof e!="symbol"?e+"":e,n);let urt=class{constructor(e={}){uw(this,"x"),uw(this,"ax"),uw(this,"dx"),uw(this,"tx"),uw(this,"_options"),this.x=0,this.ax=0,this.dx=0,this.tx=0,this._options=e,this._options.max=e.max??160,this._options.damp=e.damp??.8,this._options.springiness=e.springiness??.1}update(){this.ax=(this.tx-this.x)*this._options.springiness,this.dx+=this.ax,this.dx*=this._options.damp,this.dx<-this._options.max?this.dx=-this._options.max:this.dx>this._options.max&&(this.dx=this._options.max),this.x+=this.dx}};var drt=Object.defineProperty,hrt=(t,e,n)=>e in t?drt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,d1=(t,e,n)=>hrt(t,typeof e!="symbol"?e+"":e,n);let frt=class{constructor(e={}){d1(this,"done"),d1(this,"to"),d1(this,"_spring"),d1(this,"_pos"),d1(this,"_speed"),d1(this,"_correctSpeed"),this._spring=new urt(e),this._pos=0,this.to=0}start(e,n,r){this._speed=e,this._pos=n,this.to=r,this.done=!1,this._spring.x=this._pos,this._spring.tx=this.to;const i=this.to-this._pos,s=Math.abs(i)/i,a=Math.abs(this._speed)/this._speed;s!==a?this._correctSpeed=!0:this._correctSpeed=!1}update(){if(this._correctSpeed)this._speed*=.6,Math.abs(this._speed)<2&&(this._correctSpeed=!1),this._pos+=this._speed,this._spring.x=this._pos;else{const e=this.to-this._pos;Math.abs(e)<.05?(this._pos=this.to,this.done=!0):(this._spring.tx=this.to,this._spring.update(),this._pos=this._spring.x)}return this._pos}};var prt=Object.defineProperty,grt=(t,e,n)=>e in t?prt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,au=(t,e,n)=>grt(t,typeof e!="symbol"?e+"":e,n);let DV=class{constructor(e={}){au(this,"position",0),au(this,"maxSpeed"),au(this,"constrainPercent"),au(this,"constrain"),au(this,"min",0),au(this,"max",0),au(this,"_ease"),au(this,"_offset",0),au(this,"_prev",0),au(this,"_speed",0),au(this,"_hasStopped",!0),au(this,"_targetSpeed",0),au(this,"_speedChecker",0),au(this,"_grab",0),au(this,"_activeEase",null),this.constrain=e.constrain??!0,this.maxSpeed=e.maxSpeed??400,this._ease=e.ease??new frt,this.constrainPercent=e.constrainPercent??0}set value(e){this._speed=0,this.position=e}get value(){return this.position}grab(e){this._grab=e,this._offset=this.position-e,this._speedChecker=0,this._targetSpeed=this._speed=0,this._hasStopped=!1}hold(e){this._speedChecker++,this.position=e+this._offset,this._speedChecker>1&&(this._targetSpeed=this.position-this._prev),this._speed+=(this._targetSpeed-this._speed)/2,this._speed>this.maxSpeed?this._speed=this.maxSpeed:this._speed<-this.maxSpeed&&(this._speed=-this.maxSpeed),this._prev=this.position,this.constrain&&(this.constrainPercent<0?(this.position=0,this._speed=0,this._hasStopped=!0):this.constrainPercent===0?this.position>this.min?this.position=this.min:this.position<this.max&&(this.position=this.max):this.position>this.min?this.position-=(this.position-this.min)/(1+this.constrainPercent):this.position<this.max&&(this.position+=(this.max-this.position)/(1+this.constrainPercent)))}slide(e=!1){this._hasStopped||(this.constrain?this._updateConstrain(e):this._updateDefault())}_updateDefault(){this._speed*=.9,this.position+=this._speed,(this._speed<0?this._speed*-1:this._speed)<.01&&(this._hasStopped=!0),this.position>this.min?(this.position=this.min,this._hasStopped=!0):this.position<this.max&&(this.position=this.max,this._hasStopped=!0)}_updateConstrain(e=!1){const n=this.max;e?this.position>this.min?this.position=this.min:this.position<this.max&&(this.position=this.max):this.position>this.min||this.position<n||this._activeEase?(this._activeEase||(this._activeEase=this._ease,this.position>this.min?this._activeEase.start(this._speed,this.position,this.min):this._activeEase.start(this._speed,this.position,n)),this.position=this._activeEase.update(),this._activeEase.done&&(this.position=this._activeEase.to,this._speed=0,this._activeEase=null)):this._updateDefault()}};var mrt=Object.defineProperty,Art=(t,e,n)=>e in t?mrt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ly=(t,e,n)=>Art(t,typeof e!="symbol"?e+"":e,n);let yrt=class{constructor(e){ly(this,"xAxis"),ly(this,"yAxis"),ly(this,"_isDown"),ly(this,"_globalPosition"),ly(this,"_frame"),ly(this,"_bounds"),ly(this,"_dirty"),ly(this,"disableEasing",!1),this.xAxis=new DV({ease:e.xEase,maxSpeed:e.maxSpeed,constrain:e.constrain,constrainPercent:e.xConstrainPercent}),this.yAxis=new DV({ease:e.yEase,maxSpeed:e.maxSpeed,constrain:e.constrain,constrainPercent:e.yConstrainPercent}),this.disableEasing=e.disableEasing??!1,this._frame=new es,this._bounds=new es,this._globalPosition=new no}pointerDown(e){this._globalPosition=e,this.xAxis.grab(e.x),this.yAxis.grab(e.y),this._isDown=!0}pointerUp(){this._isDown=!1}pointerMove(e){this._globalPosition=e}update(){this._dirty&&(this._dirty=!1,this.xAxis.min=this._bounds.left,this.xAxis.min=this._bounds.right-this._frame.width,this.xAxis.min=this._bounds.top,this.xAxis.min=this._bounds.bottom-this._frame.height),this._isDown?(this.xAxis.hold(this._globalPosition.x),this.yAxis.hold(this._globalPosition.y)):(this.xAxis.slide(this.disableEasing),this.yAxis.slide(this.disableEasing))}resize(e,n){this._frame.x=0,this._frame.width=e,this._frame.y=0,this._frame.height=n,this._dirty=!0}setBounds(e,n,r,i){this._bounds.x=e,this._bounds.width=n-e,this._bounds.y=r,this._bounds.height=i-r,this._dirty=!0}get x(){return this.xAxis.value}set x(e){this.xAxis.value=e}get y(){return this.yAxis.value}set y(e){this.yAxis.value=e}};var vrt=Object.defineProperty,xrt=(t,e,n)=>e in t?vrt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jm=(t,e,n)=>xrt(t,typeof e!="symbol"?e+"":e,n);function brt(t,e,n){const r={},i=Object.getPrototypeOf(t);for(const s of n){const a=i[s];r[s]=a.bind(t),t[s]=(...o)=>e[s](...o)}return r}class Che extends hr{constructor(e={}){const{layout:n,trackpad:r,background:i,children:s,...a}=e;super(a),Jm(this,"background"),Jm(this,"stroke",new _i({label:"stroke"})),Jm(this,"overflowContainer",new hr({label:"overflowContainer"})),Jm(this,"containerMethods"),Jm(this,"_trackpad"),Jm(this,"_mask",new _i),Jm(this,"_isUserBackground",!1),Jm(this,"_visualBounds",new es),Jm(this,"_scrollBounds",new es),this.layout=n??{},s?.forEach(o=>this.addChild(o)),this.overflowContainer.isOverflowContainer=!0,this.background=i??new _i({label:"background"}),this._isUserBackground=!!i,this.addChild(this.background,this.overflowContainer,this._mask,this.stroke),this.containerMethods=brt(this,this.overflowContainer,["addChild","addChildAt","removeChild","removeChildAt","getChildAt","getChildIndex","setChildIndex","getChildByName","removeChildren","sortChildren","swapChildren","reparentChild","reparentChildAt","getChildByLabel","getChildrenByLabel"]),this._trackpad=new yrt({constrain:!0,...r}),this.eventMode="static",this.on("pointerdown",o=>this.isPointWithinBounds(o.global.x,o.global.y)&&this._trackpad.pointerDown(o.global)),this.on("pointerup",()=>this._trackpad.pointerUp()),this.on("pointerupoutside",()=>this._trackpad.pointerUp()),this.on("pointermove",o=>this.isPointWithinBounds(o.global.x,o.global.y)&&this._trackpad.pointerMove(o.global)),this.on("pointercancel",()=>this._trackpad.pointerUp()),this.on("wheel",o=>{var l;if(((l=this.layout)==null?void 0:l.style.overflow)!=="scroll"||!this.isPointWithinBounds(o.global.x,o.global.y))return;const u=o.shiftKey?1:0,h=o.deltaX*(u?1:-1),f=o.deltaY*(u?-1:1),p=this._trackpad.xAxis.value-h,m=this._trackpad.yAxis.value-f;this._trackpad.xAxis.constrainPercent>=0&&(this._trackpad.xAxis.value=Math.max(this._trackpad.xAxis.max,Math.min(this._trackpad.xAxis.min,p))),this._trackpad.yAxis.constrainPercent>=0&&(this._trackpad.yAxis.value=Math.max(this._trackpad.yAxis.max,Math.min(this._trackpad.yAxis.min,m)))}),A0.shared.add(this.update,this)}computeLayoutData(e){return this._drawBackground(e),{x:e.left,y:e.top,offsetX:0,offsetY:0,scaleX:1,scaleY:1}}_updateMask(e,n,r=0,i=0,s=!1){const a=s?-i:0,o=s?-i:0,l=s?e+i*2:e,c=s?n+i*2:n;this._mask.clear(),this._mask.roundRect(0,0,l,c,r),this._mask.position.set(a,o),this._mask.fill(16777215),this._scrollBounds.set(a+i,o+i,l-i*2,c-i*2)}_updateBackground(e){const n=this.layout.style,{backgroundColor:r,borderRadius:i}=n;if(this._isUserBackground)this.background.position.set(0,0),this.background.setSize(e.width,e.height);else{const s=this.background;s.clear(),s.roundRect(0,0,e.width,e.height,i??0),r!=null?s.fill({color:r}):s.fill({color:16777215,alpha:0})}}_drawBackground(e){var n;let r=this.layout.yoga.getBorder(Dn.All);(isNaN(r)||r<0)&&(r=0);const i=this.layout.yoga.getBoxSizing(),s=i===Nb.BorderBox?1:0,a=this.layout.style,{borderColor:o,borderRadius:l}=a;if(this._updateBackground(e),this.stroke.clear(),r>0&&o!=null&&(this.stroke.roundRect(0,0,e.width,e.height,l??0),this.stroke.stroke({color:o,width:r,alignment:s})),((n=this.layout)==null?void 0:n.style.overflow)!=="visible"){this._updateMask(e.width,e.height,a.borderRadius??0,r,i===Nb.ContentBox),this._updateScrollArea(),this.setMask({mask:this._mask});const u=e.width-this._visualBounds.width,h=e.height-this._visualBounds.height;this._trackpad.xAxis.max=Math.min(0,u),this._trackpad.yAxis.max=Math.min(0,h)}else this.mask=null,this._trackpad.xAxis.value=0,this._trackpad.yAxis.value=0,this.overflowContainer.position.set(0,0)}_updateScrollArea(){let e=0,n=0;for(let i=0;i<this.layout.yoga.getChildCount();i++){const s=this.layout.yoga.getChild(i),a=s.getComputedTop()+s.getComputedHeight(),o=s.getComputedLeft()+s.getComputedWidth();o>n&&(n=o),a>e&&(e=a)}n+=this.layout.yoga.getComputedPadding(Dn.Right),e+=this.layout.yoga.getComputedPadding(Dn.Bottom);const r=this.layout.yoga.getBorder(Dn.All)||0;n+=r,e+=r,this._visualBounds.width=Math.max(0,n),this._visualBounds.height=Math.max(0,e)}isPointWithinBounds(e,n){return this._scrollBounds.contains(e-this.worldTransform.tx,n-this.worldTransform.ty)}update(){var e;((e=this.layout)==null?void 0:e.style.overflow)==="scroll"&&(this._trackpad.update(),this.overflowContainer.x=this._trackpad.x,this.overflowContainer.y=this._trackpad.y)}destroy(e){super.destroy(e),A0.shared.remove(this.update,this)}}var Crt=Object.defineProperty,Ert=(t,e,n)=>e in t?Crt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Srt=(t,e,n)=>Ert(t,e+"",n);class wrt extends Che{constructor(e){const{slot:n,layout:r,...i}=e;super(i),Srt(this,"slot"),this.slot=e.slot??new hr({label:"slot"}),this.layout=r??{},this.addChild(this.slot),this.addChild=this._addChild.bind(this)}get layout(){return super.layout}set layout(e){if(e=e===!0?{}:e,!e){this.slot.layout=null,super.layout=null;return}const{applySizeDirectly:n,objectFit:r,objectPosition:i,isLeaf:s,...a}=e??{};super.layout=a,this.layout&&this.slot&&(this.slot.layout={width:"100%",height:"100%",...r&&{objectFit:r},...i&&{objectPosition:i},...n&&{applySizeDirectly:n},...s&&{isLeaf:s}})}_addChild(...e){if(this.overflowContainer.children.length>=1)throw new Error("Leaf nodes should not have multiple children");return this.overflowContainer.addChild(...e)}}var Zm={},xN={},e0={},RV;function Ehe(){if(RV)return e0;RV=1,Object.defineProperty(e0,"__esModule",{value:!0}),e0.loop=e0.conditional=e0.parse=void 0;var t=function r(i,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:a;if(Array.isArray(s))s.forEach(function(c){return r(i,c,a,o)});else if(typeof s=="function")s(i,a,o,r);else{var l=Object.keys(s)[0];Array.isArray(s[l])?(o[l]={},r(i,s[l],a,o[l])):o[l]=s[l](i,a,o,r)}return a};e0.parse=t;var e=function(i,s){return function(a,o,l,c){s(a,o,l)&&c(a,i,o,l)}};e0.conditional=e;var n=function(i,s){return function(a,o,l,c){for(var u=[],h=a.pos;s(a,o,l);){var f={};if(c(a,i,o,f),a.pos===h)break;h=a.pos,u.push(f)}return u}};return e0.loop=n,e0}var Ya={},PV;function She(){if(PV)return Ya;PV=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.readBits=Ya.readArray=Ya.readUnsigned=Ya.readString=Ya.peekBytes=Ya.readBytes=Ya.peekByte=Ya.readByte=Ya.buildStream=void 0;var t=function(h){return{data:h,pos:0}};Ya.buildStream=t;var e=function(){return function(h){return h.data[h.pos++]}};Ya.readByte=e;var n=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return function(f){return f.data[f.pos+h]}};Ya.peekByte=n;var r=function(h){return function(f){return f.data.subarray(f.pos,f.pos+=h)}};Ya.readBytes=r;var i=function(h){return function(f){return f.data.subarray(f.pos,f.pos+h)}};Ya.peekBytes=i;var s=function(h){return function(f){return Array.from(r(h)(f)).map(function(p){return String.fromCharCode(p)}).join("")}};Ya.readString=s;var a=function(h){return function(f){var p=r(2)(f);return h?(p[1]<<8)+p[0]:(p[0]<<8)+p[1]}};Ya.readUnsigned=a;var o=function(h,f){return function(p,m,v){for(var A=typeof f=="function"?f(p,m,v):f,x=r(h),E=new Array(A),w=0;w<A;w++)E[w]=x(p);return E}};Ya.readArray=o;var l=function(h,f,p){for(var m=0,v=0;v<p;v++)m+=h[f+v]&&Math.pow(2,p-v-1);return m},c=function(h){return function(f){for(var p=e()(f),m=new Array(8),v=0;v<8;v++)m[7-v]=!!(p&1<<v);return Object.keys(h).reduce(function(A,x){var E=h[x];return E.length?A[x]=l(m,E.index,E.length):A[x]=m[E.index],A},{})}};return Ya.readBits=c,Ya}var kV;function _rt(){return kV||(kV=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=Ehe(),n=She(),r={blocks:function(f){for(var p=0,m=[],v=f.data.length,A=0,x=(0,n.readByte)()(f);x!==p&&x;x=(0,n.readByte)()(f)){if(f.pos+x>=v){var E=v-f.pos;m.push((0,n.readBytes)(E)(f)),A+=E;break}m.push((0,n.readBytes)(x)(f)),A+=x}for(var w=new Uint8Array(A),B=0,D=0;D<m.length;D++)w.set(m[D],B),B+=m[D].length;return w}},i=(0,e.conditional)({gce:[{codes:(0,n.readBytes)(2)},{byteSize:(0,n.readByte)()},{extras:(0,n.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,n.readUnsigned)(!0)},{transparentColorIndex:(0,n.readByte)()},{terminator:(0,n.readByte)()}]},function(h){var f=(0,n.peekBytes)(2)(h);return f[0]===33&&f[1]===249}),s=(0,e.conditional)({image:[{code:(0,n.readByte)()},{descriptor:[{left:(0,n.readUnsigned)(!0)},{top:(0,n.readUnsigned)(!0)},{width:(0,n.readUnsigned)(!0)},{height:(0,n.readUnsigned)(!0)},{lct:(0,n.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,e.conditional)({lct:(0,n.readArray)(3,function(h,f,p){return Math.pow(2,p.descriptor.lct.size+1)})},function(h,f,p){return p.descriptor.lct.exists}),{data:[{minCodeSize:(0,n.readByte)()},r]}]},function(h){return(0,n.peekByte)()(h)===44}),a=(0,e.conditional)({text:[{codes:(0,n.readBytes)(2)},{blockSize:(0,n.readByte)()},{preData:function(f,p,m){return(0,n.readBytes)(m.text.blockSize)(f)}},r]},function(h){var f=(0,n.peekBytes)(2)(h);return f[0]===33&&f[1]===1}),o=(0,e.conditional)({application:[{codes:(0,n.readBytes)(2)},{blockSize:(0,n.readByte)()},{id:function(f,p,m){return(0,n.readString)(m.blockSize)(f)}},r]},function(h){var f=(0,n.peekBytes)(2)(h);return f[0]===33&&f[1]===255}),l=(0,e.conditional)({comment:[{codes:(0,n.readBytes)(2)},r]},function(h){var f=(0,n.peekBytes)(2)(h);return f[0]===33&&f[1]===254}),c=[{header:[{signature:(0,n.readString)(3)},{version:(0,n.readString)(3)}]},{lsd:[{width:(0,n.readUnsigned)(!0)},{height:(0,n.readUnsigned)(!0)},{gct:(0,n.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,n.readByte)()},{pixelAspectRatio:(0,n.readByte)()}]},(0,e.conditional)({gct:(0,n.readArray)(3,function(h,f){return Math.pow(2,f.lsd.gct.size+1)})},function(h,f){return f.lsd.gct.exists}),{frames:(0,e.loop)([i,o,l,s,a],function(h){var f=(0,n.peekByte)()(h);return f===33||f===44})}],u=c;t.default=u})(xN)),xN}var dw={},NV;function Irt(){if(NV)return dw;NV=1,Object.defineProperty(dw,"__esModule",{value:!0}),dw.deinterlace=void 0;var t=function(n,r){for(var i=new Array(n.length),s=n.length/r,a=function(p,m){var v=n.slice(m*r,(m+1)*r);i.splice.apply(i,[p*r,r].concat(v))},o=[0,4,2,1],l=[8,8,4,2],c=0,u=0;u<4;u++)for(var h=o[u];h<s;h+=l[u])a(h,c),c++;return i};return dw.deinterlace=t,dw}var hw={},LV;function Brt(){if(LV)return hw;LV=1,Object.defineProperty(hw,"__esModule",{value:!0}),hw.lzw=void 0;var t=function(n,r,i){var s=4096,a=-1,o=i,l,c,u,h,f,p,m,M,v,A,T,x,R,k,F,L,E=new Array(i),w=new Array(s),B=new Array(s),D=new Array(s+1);for(x=n,c=1<<x,f=c+1,l=c+2,m=a,h=x+1,u=(1<<h)-1,v=0;v<c;v++)w[v]=0,B[v]=v;var T,M,R,k,L,F;for(T=M=R=k=L=F=0,A=0;A<o;){if(k===0){if(M<h){T+=r[F]<<M,M+=8,F++;continue}if(v=T&u,T>>=h,M-=h,v>l||v==f)break;if(v==c){h=x+1,u=(1<<h)-1,l=c+2,m=a;continue}if(m==a){D[k++]=B[v],m=v,R=v;continue}for(p=v,v==l&&(D[k++]=R,v=m);v>c;)D[k++]=B[v],v=w[v];R=B[v]&255,D[k++]=R,l<s&&(w[l]=m,B[l]=R,l++,(l&u)===0&&l<s&&(h++,u+=l)),m=p}k--,E[L++]=D[k],A++}for(A=L;A<o;A++)E[A]=0;return E};return hw.lzw=t,hw}var FV;function Trt(){if(FV)return Zm;FV=1,Object.defineProperty(Zm,"__esModule",{value:!0}),Zm.decompressFrames=Zm.decompressFrame=Zm.parseGIF=void 0;var t=s(_rt()),e=Ehe(),n=She(),r=Irt(),i=Brt();function s(u){return u&&u.__esModule?u:{default:u}}var a=function(h){var f=new Uint8Array(h);return(0,e.parse)((0,n.buildStream)(f),t.default)};Zm.parseGIF=a;var o=function(h){for(var f=h.pixels.length,p=new Uint8ClampedArray(f*4),m=0;m<f;m++){var v=m*4,A=h.pixels[m],x=h.colorTable[A]||[0,0,0];p[v]=x[0],p[v+1]=x[1],p[v+2]=x[2],p[v+3]=A!==h.transparentIndex?255:0}return p},l=function(h,f,p){if(!h.image){console.warn("gif frame does not have associated image.");return}var m=h.image,v=m.descriptor.width*m.descriptor.height,A=(0,i.lzw)(m.data.minCodeSize,m.data.blocks,v);m.descriptor.lct.interlaced&&(A=(0,r.deinterlace)(A,m.descriptor.width));var x={pixels:A,dims:{top:h.image.descriptor.top,left:h.image.descriptor.left,width:h.image.descriptor.width,height:h.image.descriptor.height}};return m.descriptor.lct&&m.descriptor.lct.exists?x.colorTable=m.lct:x.colorTable=f,h.gce&&(x.delay=(h.gce.delay||10)*10,x.disposalType=h.gce.extras.disposal,h.gce.extras.transparentColorGiven&&(x.transparentIndex=h.gce.transparentColorIndex)),p&&(x.patch=o(x)),x};Zm.decompressFrame=l;var c=function(h,f){return h.frames.filter(function(p){return p.image}).map(function(p){return l(p,h.gct,f)})};return Zm.decompressFrames=c,Zm}var jV=Trt();class oO{constructor(e){if(!e||!e.length)throw new Error("Invalid frames");const[{texture:{width:n,height:r}}]=e;this.width=n,this.height=r,this.frames=e,this.textures=this.frames.map(i=>i.texture),this.totalFrames=this.frames.length,this.duration=this.frames[this.totalFrames-1].end}destroy(){for(const e of this.textures)e.destroy(!0);for(const e of this.frames)e.texture=null;this.frames.length=0,this.textures.length=0,Object.assign(this,{frames:null,textures:null,width:0,height:0,duration:0,totalFrames:0})}static from(e,n){if(!e||e.byteLength===0)throw new Error("Invalid buffer");const r=E=>{let w=null;for(const B of E.frames)w=B.gce??w,"image"in B&&!("gce"in B)&&(B.gce=w)},i=jV.parseGIF(e);r(i);const s=jV.decompressFrames(i,!0),a=[],o=i.lsd.width,l=i.lsd.height,c=ls.get().createCanvas(o,l),u=c.getContext("2d",{willReadFrequently:!0}),h=ls.get().createCanvas(),f=h.getContext("2d");let p=0,m=null;const{fps:v=30,...A}=n??{},x=1e3/v;for(let E=0;E<s.length;E++){const{disposalType:w=2,delay:B=x,patch:D,dims:{width:T,height:M,left:R,top:k}}=s[E];h.width=T,h.height=M,f.clearRect(0,0,T,M);const L=f.createImageData(T,M);L.data.set(D),f.putImageData(L,0,0),w===3&&(m=u.getImageData(0,0,o,l)),u.drawImage(h,R,k);const F=u.getImageData(0,0,o,l);w===2?u.clearRect(0,0,o,l):w===3&&u.putImageData(m,0,0);const z=ls.get().createCanvas(F.width,F.height);z.getContext("2d").putImageData(F,0,0),a.push({start:p,end:p+B,texture:new Gn({source:new Wj({resource:z,...A})})}),p+=B}return c.width=c.height=0,h.width=h.height=0,new oO(a)}}const Mrt={extension:Vn.Asset,detection:{test:async()=>!0,add:async t=>[...t,"gif"],remove:async t=>t.filter(e=>e!=="gif")},loader:{name:"gifLoader",id:"gif",test:t=>hd.extname(t)===".gif"||t.startsWith("data:image/gif"),load:async(t,e)=>{const r=await(await ls.get().fetch(t)).arrayBuffer();return oO.from(r,e?.data)},unload:async t=>{t.destroy()}}};ha.add(Mrt);class Drt extends wrt{constructor(e){const{layout:n,background:r,trackpad:i,ClassType:s,...a}=e,o=new s(a);super({slot:o,layout:n,background:r,trackpad:i})}}class Rrt extends Drt{constructor(e){super({...e,ClassType:kc})}}var bN={},fw={},OV;function qI(){if(OV)return fw;OV=1,Object.defineProperty(fw,"__esModule",{value:!0}),fw.Collector=void 0;let t=class{constructor(n){this.emit=(...r)=>{n.emitCollecting(this,r)}}};return fw.Collector=t,fw}var pw={},zV;function Prt(){if(zV)return pw;zV=1,Object.defineProperty(pw,"__esModule",{value:!0}),pw.CollectorArray=void 0;const t=qI();let e=class extends t.Collector{constructor(){super(...arguments),this.result=[]}handleResult(r){return this.result.push(r),!0}getResult(){return this.result}reset(){this.result.length=0}};return pw.CollectorArray=e,pw}var gw={},$V;function krt(){if($V)return gw;$V=1,Object.defineProperty(gw,"__esModule",{value:!0}),gw.CollectorLast=void 0;const t=qI();let e=class extends t.Collector{handleResult(r){return this.result=r,!0}getResult(){return this.result}reset(){delete this.result}};return gw.CollectorLast=e,gw}var mw={},QV;function Nrt(){if(QV)return mw;QV=1,Object.defineProperty(mw,"__esModule",{value:!0}),mw.CollectorUntil0=void 0;const t=qI();let e=class extends t.Collector{constructor(){super(...arguments),this.result=!1}handleResult(r){return this.result=r,this.result}getResult(){return this.result}reset(){this.result=!1}};return mw.CollectorUntil0=e,mw}var Aw={},UV;function Lrt(){if(UV)return Aw;UV=1,Object.defineProperty(Aw,"__esModule",{value:!0}),Aw.CollectorWhile0=void 0;const t=qI();let e=class extends t.Collector{constructor(){super(...arguments),this.result=!1}handleResult(r){return this.result=r,!this.result}getResult(){return this.result}reset(){this.result=!1}};return Aw.CollectorWhile0=e,Aw}var yw={},vw={},HV;function Frt(){if(HV)return vw;HV=1,Object.defineProperty(vw,"__esModule",{value:!0}),vw.SignalConnectionImpl=void 0;class t{constructor(n,r){this.link=n,this.parentCleanup=r}disconnect(){return this.link!==null?(this.link.unlink(),this.link=null,this.parentCleanup(),this.parentCleanup=null,!0):!1}set enabled(n){this.link&&this.link.setEnabled(n)}get enabled(){return this.link!==null&&this.link.isEnabled()}}return vw.SignalConnectionImpl=t,vw}var xw={},GV;function jrt(){if(GV)return xw;GV=1,Object.defineProperty(xw,"__esModule",{value:!0}),xw.SignalLink=void 0;let t=class whe{constructor(n=null,r=null,i=0){this.enabled=!0,this.newLink=!1,this.callback=null,this.prev=n??this,this.next=r??this,this.order=i}isEnabled(){return this.enabled&&!this.newLink}setEnabled(n){this.enabled=n}unlink(){this.callback=null,this.next.prev=this.prev,this.prev.next=this.next}insert(n,r){let i=this.prev;for(;i!==this&&!(i.order<=r);)i=i.prev;const s=new whe(i,i.next,r);return s.callback=n,i.next=s,s.next.prev=s,s}};return xw.SignalLink=t,xw}var VV;function Ort(){if(VV)return yw;VV=1,Object.defineProperty(yw,"__esModule",{value:!0}),yw.Signal=void 0;const t=Frt(),e=jrt();let n=class{constructor(){this.head=new e.SignalLink,this.hasNewLinks=!1,this.emitDepth=0,this.connectionsCount=0}getConnectionsCount(){return this.connectionsCount}hasConnections(){return this.connectionsCount>0}connect(i,s=0){this.connectionsCount++;const a=this.head.insert(i,s);return this.emitDepth>0&&(this.hasNewLinks=!0,a.newLink=!0),new t.SignalConnectionImpl(a,()=>this.decrementConnectionCount())}decrementConnectionCount(){this.connectionsCount--}disconnect(i){for(let s=this.head.next;s!==this.head;s=s.next)if(s.callback===i)return this.decrementConnectionCount(),s.unlink(),!0;return!1}disconnectAll(){for(;this.head.next!==this.head;)this.head.next.unlink();this.connectionsCount=0}emit(...i){this.emitDepth++;for(let s=this.head.next;s!==this.head;s=s.next)s.isEnabled()&&s.callback&&s.callback.apply(null,i);this.emitDepth--,this.unsetNewLink()}emitCollecting(i,s){this.emitDepth++;for(let a=this.head.next;a!==this.head;a=a.next)if(a.isEnabled()&&a.callback){const o=a.callback.apply(null,s);if(!i.handleResult(o))break}this.emitDepth--,this.unsetNewLink()}unsetNewLink(){if(this.hasNewLinks&&this.emitDepth===0){for(let i=this.head.next;i!==this.head;i=i.next)i.newLink=!1;this.hasNewLinks=!1}}};return yw.Signal=n,yw}var bw={},WV;function zrt(){if(WV)return bw;WV=1,Object.defineProperty(bw,"__esModule",{value:!0}),bw.SignalConnections=void 0;let t=class{constructor(){this.list=[]}add(n){this.list.push(n)}disconnectAll(){for(const n of this.list)n.disconnect();this.list=[]}getCount(){return this.list.length}isEmpty(){return this.list.length===0}};return bw.SignalConnections=t,bw}var KV;function $rt(){return KV||(KV=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SignalConnections=t.Signal=t.CollectorWhile0=t.CollectorUntil0=t.CollectorLast=t.CollectorArray=t.Collector=void 0;var e=qI();Object.defineProperty(t,"Collector",{enumerable:!0,get:function(){return e.Collector}});var n=Prt();Object.defineProperty(t,"CollectorArray",{enumerable:!0,get:function(){return n.CollectorArray}});var r=krt();Object.defineProperty(t,"CollectorLast",{enumerable:!0,get:function(){return r.CollectorLast}});var i=Nrt();Object.defineProperty(t,"CollectorUntil0",{enumerable:!0,get:function(){return i.CollectorUntil0}});var s=Lrt();Object.defineProperty(t,"CollectorWhile0",{enumerable:!0,get:function(){return s.CollectorWhile0}});var a=Ort();Object.defineProperty(t,"Signal",{enumerable:!0,get:function(){return a.Signal}});var o=zrt();Object.defineProperty(t,"SignalConnections",{enumerable:!0,get:function(){return o.SignalConnections}})})(bN)),bN}var nd=$rt(),Qrt=Object.defineProperty,Urt=(t,e,n)=>e in t?Qrt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cy=(t,e,n)=>Urt(t,typeof e!="symbol"?e+"":e,n);class Hrt{constructor(){cy(this,"_isMouseIn",!1),cy(this,"_isDown",!1),cy(this,"onDown"),cy(this,"onUp"),cy(this,"onUpOut"),cy(this,"onOut"),cy(this,"onPress"),cy(this,"onHover"),this.onPress=new nd.Signal,this.onDown=new nd.Signal,this.onUp=new nd.Signal,this.onHover=new nd.Signal,this.onOut=new nd.Signal,this.onUpOut=new nd.Signal}connectEvents(e){_p.any?(e.on("pointerdown",this.processDown,this),e.on("pointerup",this.processUp,this),e.on("pointerupoutside",this.processUpOut,this),e.on("pointerout",this.processOut,this),e.on("pointertap",this.processPress,this),e.on("pointerover",this.processOver,this)):(e.on("mousedown",this.processDown,this),e.on("mouseup",this.processUp,this),e.on("mouseupoutside",this.processUpOut,this),e.on("mouseout",this.processOut,this),e.on("click",this.processPress,this),e.on("mouseover",this.processOver,this))}disconnectEvents(e){_p.any?(e.off("pointerdown",this.processDown,this),e.off("pointerup",this.processUp,this),e.off("pointerupoutside",this.processUpOut,this),e.off("pointerout",this.processOut,this),e.off("pointertap",this.processPress,this),e.off("pointerover",this.processOver,this)):(e.off("mousedown",this.processDown,this),e.off("mouseup",this.processUp,this),e.off("mouseupoutside",this.processUpOut,this),e.off("mouseout",this.processOut,this),e.off("click",this.processPress,this),e.off("mouseover",this.processOver,this))}processDown(e){this._isDown=!0,this.onDown.emit(this,e),this.down(e)}processUp(e){this._isDown&&(this.onUp.emit(this,e),this.up(e)),this._isDown=!1}processUpOut(e){this._isDown&&(this.onUp.emit(this,e),this.onUpOut.emit(this,e),this.up(e),this.upOut(e)),this._isDown=!1}processOut(e){this._isMouseIn&&(this._isMouseIn=!1,this.onOut.emit(this,e),this.out(e))}processPress(e){this._isDown=!1,this.onPress.emit(this,e),this.press(e)}processOver(e){_p.any||(this._isMouseIn=!0,this.onHover.emit(this,e),this.hover(e))}down(e){}up(e){}upOut(e){}out(e){}press(e){}hover(e){}get isDown(){return this._isDown}}var Grt=Object.defineProperty,Vrt=(t,e,n)=>e in t?Grt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dy=(t,e,n)=>Vrt(t,typeof e!="symbol"?e+"":e,n);class Wrt extends Hrt{constructor(e){super(),dy(this,"_view"),e&&(this.view=e,this.enabled=!0)}set view(e){!!this._view&&this._view&&this.disconnectEvents(this._view),this._view=e,this.connectEvents(this._view)}get view(){return this._view}set enabled(e){if(!this.view){console.error("Button view is not set. Please set it before enabling the button.");return}this.view.eventMode=e?"static":"auto",this.view.cursor=e?"pointer":"default",!e&&this.isDown&&this.processUp()}get enabled(){return this.view?.eventMode==="static"}}class Krt extends hr{constructor(e){super(),dy(this,"button"),dy(this,"onDown"),dy(this,"onUp"),dy(this,"onUpOut"),dy(this,"onOut"),dy(this,"onPress"),dy(this,"onHover"),this.button=new Wrt(this),this.button.enabled=!0,e&&this.addChild(e),this.onPress=this.button.onPress,this.onDown=this.button.onDown,this.onUp=this.button.onUp,this.onHover=this.button.onHover,this.onOut=this.button.onOut,this.onUpOut=this.button.onUpOut}set enabled(e){this.button.enabled=e}get enabled(){return this.button.enabled}}function Zd(t){return typeof t=="string"?dd.from(t):t instanceof Gn?new dd(t):t}var qrt=Object.defineProperty,Yrt=(t,e,n)=>e in t?qrt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,B3=(t,e,n)=>Yrt(t,typeof e!="symbol"?e+"":e,n);class Xrt extends hr{constructor(e,n,r){super(),B3(this,"_triggerEvents",new Set(["onPress"])),B3(this,"innerView"),B3(this,"_active"),B3(this,"onChange"),this.innerView=new hr,this.addChild(this.innerView),this.onChange=new nd.Signal,e&&(this.views=e),n&&(this.triggerEvents=n),r!==void 0&&this.views.length>0&&(this.active=r),this.setInteractionEvents()}setInteractionEvents(){this.innerView.eventMode="static",this.innerView.on("pointerdown",()=>this.handleEvents("onDown")),this.innerView.on("pointerup",()=>this.handleEvents("onUp")),this.innerView.on("pointerupoutside",()=>this.handleEvents("onUpOut")),this.innerView.on("pointerout",()=>this.handleEvents("onOut")),this.innerView.on("pointertap",()=>this.handleEvents("onPress")),this.innerView.on("pointerover",()=>this.handleEvents("onHover"))}handleEvents(e){this._triggerEvents.has(e)&&this.switch()}get activeView(){if(this.views&&this.active!==void 0&&this.views[this.active])return this.views[this.active]}set views(e){this.innerView.removeChildren(),e.forEach(n=>this.add(n))}get views(){return this.innerView.children}add(e){const n=Zd(e);this.innerView.addChild(n),n.visible=!1,this.views.length===1&&(this.active=0)}remove(e){this.views[e]&&this.innerView.removeChild(this.views[e])}set triggerEvents(e){this._triggerEvents=new Set(Array.isArray(e)?e:[e])}get triggerEvents(){return Array.from(this._triggerEvents)}switch(e){if(e!==void 0&&e===this.active)return;const n=this.active;if(this.forceSwitch(e),n!==this.active){const r=this.views.length>2?this.active??0:this.active===1;this.onChange.emit(r)}}forceSwitch(e){if(!(e!==void 0&&e===this.active)){if(this.activeView&&(this.activeView.visible=!1),e!==void 0&&!this.views[e])throw new Error(`View with id ${e} does not exist.`);this._active=e===void 0?this.nextActive:e,this._active!==void 0&&(this.views[this._active].visible=!0)}}get nextActive(){if(this.views.length!==0)return this.active===void 0?0:this.active<this.views.length-1?this.active+1:0}set active(e){this.switch(e)}get active(){return this._active}}let Gw;typeof self>"u"&&typeof process<"u"&&process.hrtime?Gw=function(){const t=process.hrtime();return t[0]*1e3+t[1]/1e6}:typeof self<"u"&&self.performance!==void 0&&self.performance.now!==void 0?Gw=self.performance.now.bind(self.performance):Date.now!==void 0?Gw=Date.now:Gw=function(){return new Date().getTime()};class hp{constructor(){hp.prototype.__init.call(this),hp.prototype.__init2.call(this),hp.prototype.__init3.call(this),hp.prototype.__init4.call(this)}__init(){this._tweens={}}static get shared(){return hp._shared||(hp._shared=new hp),hp._shared}__init2(){this._paused=!1}isPaused(){return this._paused}pause(){this._paused=!0}resume(){this._paused=!1}__init3(){this._lastUpdateTime=void 0}__init4(){this.now=Gw}getAll(){return Object.keys(this._tweens).map(e=>this._tweens[e])}removeAll(){this._tweens={}}add(e){this._tweens[e.getId()]=e}remove(e){delete this._tweens[e.getId()]}update(e,n=!1){if(e==null&&(this._lastUpdateTime==null?(this._lastUpdateTime=this.now(),e=0):e=this.now()-this._lastUpdateTime),this._lastUpdateTime=this.now(),this._paused)return!1;const r=Object.keys(this._tweens);if(r.length==0)return!1;for(let i=0;i<r.length;i++){const s=this._tweens[r[i]];s&&s.update(e,!0)==!1&&!n&&delete this._tweens[r[i]]}return!0}}const Jrt={Linear:{None(t){return t}}},_he={Geom:{Linear(t,e){const n=t.length-1,r=n*e,i=Math.floor(r),s=_he.Utils.Linear;return e<0?s(t[0],t[1],r):e>1?s(t[n],t[n-1],n-r):s(t[i],t[i+1>n?n:i+1],r-i)}},Utils:{Linear(t,e,n){return(e-t)*n+t}}};class Y4{static __initStatic(){this._nextId=0}static nextId(){return Y4._nextId++}}Y4.__initStatic();const T3={safetyCheckFunction:t=>!0,easingFunction:Jrt.Linear.None,yoyoEasingFunction:void 0,interpolationFunction:_he.Geom.Linear};class Ys{__init(){this._isPaused=!1}__init2(){this._valuesStart={}}__init3(){this._valuesEnd={}}__init4(){this._valuesStartRepeat={}}__init5(){this._duration=0}__init6(){this._repeatCount=0}__init7(){this._repeat=0}__init8(){this._yoyo=!1}__init9(){this._isPlaying=!1}get _reversed(){return this.yoyo&&this._repeatCount%2!==0}__init10(){this._delayTime=0}__init11(){this._startTime=0}__init12(){this._elapsedTime=0}__init13(){this._timescale=1}__init14(){this._safetyCheckFunction=T3.safetyCheckFunction}__init15(){this._easingFunction=T3.easingFunction}__init16(){this._yoyoEasingFunction=T3.yoyoEasingFunction}__init17(){this._interpolationFunction=T3.interpolationFunction}__init18(){this._chainedTweens=[]}__init19(){this._onStartCallbackFired=!1}__init20(){this._onAfterDelayCallbackFired=!1}__init21(){this._id=Y4.nextId()}__init22(){this._isChainStopped=!1}get _group(){return this._groupRef?this._groupRef:hp.shared}set _group(e){this._groupRef=e}constructor(e,n){Ys.prototype.__init.call(this),Ys.prototype.__init2.call(this),Ys.prototype.__init3.call(this),Ys.prototype.__init4.call(this),Ys.prototype.__init5.call(this),Ys.prototype.__init6.call(this),Ys.prototype.__init7.call(this),Ys.prototype.__init8.call(this),Ys.prototype.__init9.call(this),Ys.prototype.__init10.call(this),Ys.prototype.__init11.call(this),Ys.prototype.__init12.call(this),Ys.prototype.__init13.call(this),Ys.prototype.__init14.call(this),Ys.prototype.__init15.call(this),Ys.prototype.__init16.call(this),Ys.prototype.__init17.call(this),Ys.prototype.__init18.call(this),Ys.prototype.__init19.call(this),Ys.prototype.__init20.call(this),Ys.prototype.__init21.call(this),Ys.prototype.__init22.call(this),this._object=e,this._group=n}getId(){return this._id}getGroup(){return this._group}getTimescale(){return this._timescale}isPlaying(){return this._isPlaying}isPaused(){return this._isPaused}from(e){try{JSON.stringify(e)}catch{throw new Error("The object you provided to the from() method has a circular reference!")}return this._setupProperties(e,this._valuesStart,e,this._valuesStartRepeat,!0),this}to(e,n){try{this._valuesEnd=JSON.parse(JSON.stringify(e))}catch{return console.warn("The object you provided to the to() method has a circular reference!. It can't be cloned. Falling back to dynamic targeting"),this.dynamicTo(e,n)}return n!==void 0&&(this._duration=n),this}dynamicTo(e,n){return this._valuesEnd=e,n!==void 0&&(this._duration=n),this}duration(e){return this._duration=e,this}start(e){return this._isPlaying?this:(e!=null&&(this._delayTime=e),this._group.add(this),this._reversed&&(this._swapEndStartRepeatValues(this._valuesStartRepeat,this._valuesEnd),this._valuesStart=JSON.parse(JSON.stringify(this._valuesStartRepeat))),this._repeatCount=0,this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onAfterDelayCallbackFired=!1,this._isChainStopped=!1,this._startTime=-this._delayTime,this._elapsedTime=0,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,!1),this)}restart(e){return this.reset(),this.start(e)}reset(){return this._isPlaying&&this.stop(),this._valuesStart={},this._valuesStartRepeat={},this}rewind(){this._isPlaying&&this.stop(),this._reversed&&this._swapEndStartRepeatValues(this._valuesStartRepeat,this._valuesEnd);const e=this._easingFunction(0);return this._updateProperties(this._object,this._valuesStart,this._valuesEnd,e),this}_setupProperties(e,n,r,i,s){for(const a in r){const o=e[a],l=Array.isArray(o),c=!Number.isNaN(Number(o)),u=l?"array":typeof o,h=u=="object",f=typeof r[a]=="object",p=!l&&Array.isArray(r[a]);u=="undefined"||u=="function"||r[a]==null||!l&&!c&&!h||((h||l||f)&&o&&!p?(typeof n[a]>"u"&&(n[a]=l?[]:{}),typeof i[a]>"u"&&(i[a]=l?[]:{}),this._setupProperties(o,n[a],r[a],i[a],s)):((typeof n[a]>"u"||s)&&(n[a]=o),(typeof i[a]>"u"||s)&&(p?i[a]=r[a].slice().reverse()[0]:i[a]=n[a]||0)))}}stop(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object,this),this):this}end(e=!1){let n=[];if(e||(n=this._chainedTweens,this._chainedTweens=[]),this.resume(),this.update(1/0),!e){this._chainedTweens=n;for(let r=0,i=this._chainedTweens.length;r<i;r++)this._chainedTweens[r].start()}return this}skip(e,n=!1){return this.resume(),this.update(e*this._duration-(n?this._elapsedTime:0)),this}pause(){return this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._group.remove(this),this)}resume(){return!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._group.add(this),this)}stopChainedTweens(){for(let e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this}startChainedTweens(e=!1){e&&this.stop();for(let n=0,r=this._chainedTweens.length;n<r;n++)this._chainedTweens[n].start();return this}group(e){return this._group=e,this}delay(e){return this._delayTime=e,this}timescale(e){return this._timescale=e,this}repeat(e=1/0){return this._repeat=e,this}repeatDelay(e){return this._repeatDelayTime=e,this}yoyo(e=!0){return this._yoyo=e,this}easing(e){return this._easingFunction=e,this}safetyCheck(e){return this._safetyCheckFunction=e,this}yoyoEasing(e){return this._yoyoEasingFunction=e,this}interpolation(e){return this._interpolationFunction=e,this}chain(...e){return this._chainedTweens=e,this}onStart(e){return this._onStartCallback=e,this}onAfterDelay(e){return this._onAfterDelayCallback=e,this}onUpdate(e){return this._onUpdateCallback=e,this}onRepeat(e){return this._onRepeatCallback=e,this}onComplete(e){return this._onCompleteCallback=e,this}onStop(e){return this._onStopCallback=e,this}update(e,n=!1){const r=this._internalUpdate(e);return!r&&!n&&this._group.remove(this),r}_internalUpdate(e){if(!this._safetyCheckFunction(this._object)||this._isPaused)return!1;e*=this._timescale;let n;this._elapsedTime+=e;const r=this._duration,i=this._startTime+this._elapsedTime;if(i>r&&!this._isPlaying)return!1;this.isPlaying||this.start(),this._onStartCallbackFired==!1&&(this._onStartCallback&&this._onStartCallback(this._object,this),this._onStartCallbackFired=!0),this._onAfterDelayCallbackFired==!1&&i>=0&&(this._onAfterDelayCallback&&this._onAfterDelayCallback(this._object,this),this._onAfterDelayCallbackFired=!0),n=i/this._duration,this._duration==0&&(i>=0?n=1:n=0),n=Math.min(1,n),n=Math.max(0,n);let s=Number.isFinite(i)?i%this._duration:i;Number.isNaN(s)&&(s=0);const a=Math.floor(i/this._duration);let o;if(this._reversed&&this._yoyoEasingFunction?o=this._yoyoEasingFunction(n):o=this._easingFunction(n),this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&(n!=1||this._repeat-this._repeatCount<=0)&&this._onUpdateCallback(this._object,n,this),n==1){if(this._repeat-this._repeatCount>0){const l=this._repeatCount;if(this._repeatCount=Math.min(this._repeat+1,this._repeatCount+a),this._onUpdateCallback&&(this._repeat-this._repeatCount<0||s<=0)&&this._onUpdateCallback(this._object,n,this),this._yoyo?this._swapEndStartRepeatValues(this._valuesStartRepeat,this._valuesEnd):this._moveForwardStartRepeatValues(this._valuesStartRepeat,this._valuesEnd),this._valuesStart=JSON.parse(JSON.stringify(this._valuesStartRepeat)),this._repeatDelayTime!==void 0?this._startTime=-this._repeatDelayTime:this._startTime=0,this._onRepeatCallback){let c=1;Number.isFinite(a)?c=this._repeatCount-l:Number.isFinite(this._repeat)&&(c=this._repeat-l);for(let u=0;u<c;u++)this._onRepeatCallback(this._object,l+1+u,this)}if(this._elapsedTime=0,this._repeat-this._repeatCount>=0)return s>0&&Number.isFinite(this._repeat)&&this._internalUpdate(s),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object,this);for(let l=0,c=this._chainedTweens.length;l<c;l++)this._chainedTweens[l].start(),s>0&&this._chainedTweens[l].update(s);return this._isPlaying=!1,!1}return!0}_updateProperties(e,n,r,i){for(const s in r){if(n[s]==null)continue;const a=n[s];let o=r[s];const l=Array.isArray(e[s]),c=Array.isArray(o);!l&&c?this._reversed?e[s]=this._interpolationFunction(o.concat([a]),i):e[s]=this._interpolationFunction([a].concat(o),i):typeof o=="object"&&o?this._updateProperties(e[s],a,o,i):(o=this._handleRelativeValue(a,o),typeof o=="number"&&(typeof a=="number"||typeof a=="string")&&(e[s]=Number(a)+(o-Number(a))*i,typeof a=="string"&&(e[s]=String(e[s]))))}}_handleRelativeValue(e,n){return typeof n!="string"?n:n.charAt(0)=="+"||n.charAt(0)=="-"?e+Number(n):Number(n)}_swapEndStartRepeatValues(e,n){for(const r in e){const i=!Array.isArray(e[r])&&Array.isArray(n[r]);if(typeof e[r]=="object")this._swapEndStartRepeatValues(e[r],n[r]);else{const s=e[r];if(typeof n[r]=="string")e[r]=Number(e[r])+Number(n[r]),n[r]=s;else if(i){const a=n[r].slice().reverse();e[r]=a[0],n[r]=a}else e[r]=n[r],n[r]=s}}}_moveForwardStartRepeatValues(e,n){for(const r in e)typeof n[r]=="object"?this._moveForwardStartRepeatValues(e[r],n[r]):typeof n[r]=="string"&&(e[r]=Number(e[r])+Number(n[r]))}}function qV(t,e,n=0,r=!0){let i=e.scale.x,s=e.scale.y;if(!t)throw new Error("Parent is not defined");const a=t.width-n*2,o=t.height-n*2,l=a-Math.round(e.width),c=o-Math.round(e.height);if(l<0&&(i=a/(e.width/i)),c<0&&(s=o/(e.height/s)),i<=0||s<=0){e.scale.set(0);return}if(r||e.scale.x===e.scale.y){const u=Math.min(i,s);e.scale.set(u,u)}else{const u=e.scale.x/e.scale.y;l<c?e.scale.set(i,i/u):e.scale.set(s*u,s)}}function Zrt(t){return typeof t=="string"||typeof t=="number"?new kc({text:String(t)}):t}var eit=Object.defineProperty,tit=(t,e,n)=>e in t?eit(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mc=(t,e,n)=>tit(t,typeof e!="symbol"?e+"":e,n);class fb extends Krt{constructor(e){super(),Mc(this,"animations"),Mc(this,"originalInnerViewState"),Mc(this,"defaultDuration",100),Mc(this,"options"),Mc(this,"_padding",0),Mc(this,"_offset",{}),Mc(this,"_textOffset",{}),Mc(this,"iconOffset",{}),Mc(this,"innerView",new hr),Mc(this,"_views",{}),Mc(this,"state","default"),Mc(this,"anchor"),Mc(this,"_defaultTextScale",{x:1,y:1}),Mc(this,"_defaultIconScale",{x:1,y:1}),Mc(this,"_defaultTextAnchor",{x:.5,y:.5}),Mc(this,"_defaultIconAnchor",{x:.5,y:.5}),this.options=e??{};const{defaultView:n,hoverView:r,pressedView:i,disabledView:s,text:a,padding:o,offset:l,textOffset:c,iconOffset:u,defaultTextScale:h,defaultIconScale:f,defaultTextAnchor:p,defaultIconAnchor:m,scale:v,anchor:A,anchorX:x,anchorY:E,icon:w,animations:B}=e??{};this.addChild(this.innerView),this.anchor=new la({_onUpdate:()=>this.updateAnchor()}),this.anchor.set(x??A??0,E??A??0),this.padding=o??0,this.offset=l??{},this.textOffset=c??{},this.iconOffset=u??{},this.defaultTextScale=h??{x:1,y:1},this.defaultIconScale=f??{x:1,y:1},this.defaultTextAnchor=p??{x:.5,y:.5},this.defaultIconAnchor=m??{x:.5,y:.5},this.scale.set(v??1),B&&(this.animations=B,this.setOriginalInnerViewState(),A0.shared.add(()=>hp.shared.update())),this.setState("default"),this.defaultView=n,this.hoverView=r,this.pressedView=i,this.disabledView=s,this.text=a??"",w!==void 0&&(this.iconView=w),this.initStateControl()}set text(e){if(!e||e===0){this.removeView("textView");return}if(!this._views.textView){this.createTextView(e);return}this._views.textView.text=e.toString()}get text(){return this._views.textView?.text}set enabled(e){this.button.enabled=e,this.setState(e?"default":"disabled")}get enabled(){return this.button.enabled}setState(e,n=!1){if(!n&&this.state===e)return;const r=this.getStateView(this.state);r&&(r.visible=!1),this.state=e;const i=this.getStateView(e);i&&(this.setOffset(i,e,this.offset),i.visible=!0),this.updateAnchor(),this.playAnimations(e)}createTextView(e){if(this._views.textView=Zrt(e),this.options?.defaultTextScale===void 0){const{x:n,y:r}=this._views.textView.scale;this._defaultTextScale={x:n,y:r}}this.innerView.addChild(this._views.textView),this.adjustTextView(this.state)}setOffset(e,n,r){const i=r?r[n]:{x:0,y:0},s=r?.default;i?(e.x+=i.x??0,e.y+=i.y??0):s?(e.x+=s.x??0,e.y+=s.y??0):(r.x||r.y)&&(e.x+=r.x??0,e.y+=r.y??0)}getStateView(e){if(this._views)switch(e){case"hover":return this._views.hoverView??this._views.defaultView??void 0;case"pressed":return this._views.pressedView??this._views.hoverView??this._views.defaultView??void 0;case"disabled":return this._views.disabledView??this._views.defaultView??void 0;case"default":return this._views.defaultView??void 0;default:return}}adjustTextView(e){if(!this.text||!this._views.textView)return;const n=this.getStateView(this.state),r=this._defaultTextAnchor.x??.5,i=this._defaultTextAnchor.y??.5;if(n){if(this.options?.ignoreRefitting||this._views.textView.scale.set(this._defaultTextScale.x,this._defaultTextScale.y),this.contentFittingMode==="default"&&qV(n,this._views.textView,this.padding,!1),this.contentFittingMode==="fill"){this._views.textView.scale.set(1);const s=n.width-this.padding*2,a=n.height-this.padding*2,o=s/this._views.textView.width,l=a/this._views.textView.height,c=Math.min(o,l);this._views.textView.scale.set(c*(this._defaultTextScale.x??1),c*(this._defaultTextScale.y??1))}this._views.textView.x=n.x+n.width/2,this._views.textView.y=n.y+n.height/2}this._views.textView.anchor.set(r,i),this.setOffset(this._views.textView,e,this.textOffset)}adjustIconView(e){if(!this._views.iconView)return;const n=this.getStateView(e);if(!n)return;if(this.options?.ignoreRefitting||this._views.iconView.scale.set(this._defaultIconScale.x,this._defaultIconScale.y),this.contentFittingMode==="default"&&qV(n,this._views.iconView,this.padding,!1),this.contentFittingMode==="fill"){this._views.iconView.scale.set(1);const s=n.width-this.padding*2,a=n.height-this.padding*2,o=s/this._views.iconView.width,l=a/this._views.iconView.height,c=Math.min(o,l);this._views.iconView.scale.set(c*(this._defaultIconScale.x??1),c*(this._defaultIconScale.y??1))}const r=this._defaultIconAnchor.x??.5,i=this._defaultIconAnchor.y??.5;"anchor"in this._views.iconView?this._views.iconView.anchor.set(r,i):this._views.iconView.pivot.set(r*(this._views.iconView.width/this._views.iconView.scale.x),i*(this._views.iconView.height/this._views.iconView.scale.y)),this._views.iconView.x=n.x+n.width/2,this._views.iconView.y=n.y+n.height/2,this.setOffset(this._views.iconView,e,this.iconOffset)}updateAnchor(){if(!this._views)return;const e=this.anchor.x??0,n=this.anchor.y??0;if([this._views.defaultView,this._views.hoverView,this._views.pressedView,this._views.disabledView].forEach(i=>{i&&(i.anchor?.set(0),i.x=-i.width*e,i.y=-i.height*n)}),this._views.defaultView){const{x:i,y:s,width:a,height:o}=this._views.defaultView;this.hitArea=new es(i,s,a,o)}this.adjustIconView(this.state),this.adjustTextView(this.state)}set contentFittingMode(e){this.options.contentFittingMode=e}get contentFittingMode(){return this.options.contentFittingMode??"default"}set defaultView(e){this.updateView("defaultView",e),this._views.disabledView&&this.state!=="default"&&(this._views.disabledView.visible=!1)}get defaultView(){return this._views.defaultView}set hoverView(e){this.updateView("hoverView",e),this._views.hoverView&&this.state!=="hover"&&(this._views.hoverView.visible=!1)}get hoverView(){return this._views.hoverView}set pressedView(e){this.updateView("pressedView",e),this._views.pressedView&&this.state!=="pressed"&&(this._views.pressedView.visible=!1)}get pressedView(){return this._views.pressedView}set disabledView(e){this.updateView("disabledView",e),this._views.disabledView&&this.state!=="disabled"&&(this._views.disabledView.visible=!1)}get disabledView(){return this._views.disabledView}updateView(e,n){n!==void 0&&(this.removeView(e),this.options?.nineSliceSprite&&(typeof n=="string"?this._views[e]=new Ug({texture:Gn.from(n),leftWidth:this.options.nineSliceSprite[0],topHeight:this.options.nineSliceSprite[1],rightWidth:this.options.nineSliceSprite[2],bottomHeight:this.options.nineSliceSprite[3]}):n instanceof Gn?this._views[e]=new Ug({texture:n,leftWidth:this.options.nineSliceSprite[0],topHeight:this.options.nineSliceSprite[1],rightWidth:this.options.nineSliceSprite[2],bottomHeight:this.options.nineSliceSprite[3]}):console.warn("NineSliceSprite can not be used with views set as Container. Pass the texture or texture name as instead of the Container extended instance.")),this._views[e]||(this._views[e]=Zd(n)),this.setOffset(this._views[e],this.state,this.offset),this._views[e].parent||this.innerView.addChild(this._views[e]),this.updateAnchor(),this._views.iconView&&this.innerView.addChild(this._views.iconView),this._views.textView&&this.innerView.addChild(this._views.textView),this.setState(this.state,!0))}removeView(e){this._views[e]&&(this.innerView.removeChild(this._views[e]),this._views[e]=void 0)}set textView(e){e!==void 0&&(this.removeView("textView"),e!==null&&this.createTextView(e))}get textView(){return this._views.textView}set iconView(e){if(e!==void 0&&(this.removeView("iconView"),e!==null)){if(this._views.iconView=Zd(e),this.options?.defaultIconScale===void 0){const{x:n,y:r}=this._views.iconView.scale;this._defaultIconScale={x:n,y:r}}this._views.iconView.parent||this.innerView.addChild(this._views.iconView),this.setState(this.state,!0)}}get iconView(){return this._views.iconView}playAnimations(e){if(!this.animations)return;const n=this.animations[e]??this.animations.default;if(n){const r=n;this.defaultDuration=r.duration??this.defaultDuration,new Ys(this.innerView).to(r.props,r.duration).start();return}new Ys(this.innerView).to(this.originalInnerViewState,this.defaultDuration).start()}setOriginalInnerViewState(){this.originalInnerViewState={x:this.innerView.x,y:this.innerView.y,width:this.innerView.width,height:this.innerView.height,scale:{x:this.innerView.scale.x,y:this.innerView.scale.y}};const e=this.animations?.default;e&&(this.innerView.x=e.props.x??this.originalInnerViewState.x??0,this.innerView.y=e.props.y??this.originalInnerViewState.y??0,this.innerView.width=e.props.width??this.originalInnerViewState.width??0,this.innerView.height=e.props.height??this.originalInnerViewState.height??0,this.innerView.scale.x=e.props.scale?.x??this.originalInnerViewState.scale?.x??1,this.innerView.scale.y=e.props.scale?.y??this.originalInnerViewState.scale?.y??1)}initStateControl(){this.onDown.connect(()=>{this.setState("pressed")}),this.onUp.connect(()=>{this.setState(_p.any?"default":"hover")}),this.onUpOut.connect(()=>{this.setState("default")}),this.onOut.connect(()=>{this.button.isDown||this.setState("default")}),this.onPress.connect(()=>{this.setState(_p.any?"default":"hover")}),this.onHover.connect(()=>{this.button.isDown||this.setState(_p.any?"default":"hover")})}set padding(e){this._padding=e,this.adjustTextView(this.state),this.adjustIconView(this.state)}get padding(){return this._padding}set offset(e){this._offset=e,this.updateAnchor()}get offset(){return this._offset}set textOffset(e){this._textOffset=e,this.adjustTextView(this.state)}get textOffset(){return this._textOffset}set defaultTextScale(e){if(e===void 0)return;this.options.defaultTextScale=e;const n=typeof e=="number";this._defaultTextScale.x=n?e:e.x??1,this._defaultTextScale.y=n?e:e.y??1,this.adjustTextView(this.state)}get defaultTextScale(){return this.defaultTextScale}set defaultIconScale(e){if(e===void 0)return;this.options.defaultIconScale=e;const n=typeof e=="number";this._defaultIconScale.x=n?e:e.x??1,this._defaultIconScale.y=n?e:e.y??1,this.adjustIconView(this.state)}get defaultIconScale(){return this.defaultIconScale}set defaultTextAnchor(e){if(e===void 0)return;this.options.defaultTextAnchor=e;const n=typeof e=="number";this._defaultTextAnchor.x=n?e:e.x??1,this._defaultTextAnchor.y=n?e:e.y??1,this.adjustTextView(this.state)}get defaultTextAnchor(){return this.defaultTextAnchor}set defaultIconAnchor(e){if(e===void 0)return;this.options.defaultIconAnchor=e;const n=typeof e=="number";this._defaultIconAnchor.x=n?e:e.x??1,this._defaultIconAnchor.y=n?e:e.y??1,this.adjustIconView(this.state)}get defaultIconAnchor(){return this.defaultIconAnchor}set width(e){this.options?.nineSliceSprite?(this._views.defaultView&&(this._views.defaultView.width=e),this._views.hoverView&&(this._views.hoverView.width=e),this._views.pressedView&&(this._views.pressedView.width=e),this._views.disabledView&&(this._views.disabledView.width=e),this.adjustTextView(this.state),this.adjustIconView(this.state),this.updateAnchor()):super.width=e}get width(){return super.width}set height(e){this.options?.nineSliceSprite?(this._views.defaultView&&(this._views.defaultView.height=e),this._views.hoverView&&(this._views.hoverView.height=e),this._views.pressedView&&(this._views.pressedView.height=e),this._views.disabledView&&(this._views.disabledView.height=e),this.adjustTextView(this.state),this.adjustIconView(this.state),this.updateAnchor()):super.height=e}get height(){return super.height}setSize(e,n){this.options?.nineSliceSprite?(this._views.defaultView&&this._views.defaultView.setSize(e,n),this._views.hoverView&&this._views.hoverView.setSize(e,n),this._views.pressedView&&this._views.pressedView.setSize(e,n),this._views.disabledView&&this._views.disabledView.setSize(e,n),this.adjustTextView(this.state),this.adjustIconView(this.state),this.updateAnchor()):super.setSize(e,n)}}var nit=Object.defineProperty,rit=(t,e,n)=>e in t?nit(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,M3=(t,e,n)=>rit(t,typeof e!="symbol"?e+"":e,n);class Ihe extends hr{constructor(e){super(),M3(this,"options"),M3(this,"_type","bidirectional"),M3(this,"_maxWidth",0),M3(this,"children",[]),e&&(e.maxWidth&&(this._maxWidth=e.maxWidth),this.init(e)),e?.items?.forEach(n=>this.addChild(n)),this.on("added",()=>this.arrangeChildren()),this.on("childAdded",()=>this.arrangeChildren())}init(e){this.options=e,e?.type&&(this.type=e.type),e?.children&&e.children.forEach(n=>this.addChild(n))}set type(e){this._type=e,this.arrangeChildren()}get type(){return this._type}set elementsMargin(e){if(!this.options)throw new Error("List has not been initiated!");this.options.elementsMargin=e,this.arrangeChildren()}get elementsMargin(){return this.options?.elementsMargin??0}set padding(e){if(!this.options)throw new Error("List has not been initiated!");this.options.padding=e,this.options.vertPadding=e,this.options.horPadding=e,this.options.leftPadding=e,this.options.rightPadding=e,this.options.topPadding=e,this.options.bottomPadding=e,this.arrangeChildren()}get padding(){return this.options?.padding??0}set vertPadding(e){if(!this.options)throw new Error("List has not been initiated!");this.options.vertPadding=e,this.options.topPadding=e,this.options.bottomPadding=e,this.arrangeChildren()}get vertPadding(){return this.options?.vertPadding??this.padding??0}set horPadding(e){if(!this.options)throw new Error("List has not been initiated!");this.options.horPadding=e,this.options.leftPadding=e,this.options.rightPadding=e,this.arrangeChildren()}get horPadding(){return this.options?.horPadding??this.padding??0}set leftPadding(e){if(!this.options)throw new Error("List has not been initiated!");this.options.leftPadding=e,this.arrangeChildren()}get leftPadding(){return this.options?.leftPadding??this.horPadding}set rightPadding(e){if(!this.options)throw new Error("List has not been initiated!");this.options.rightPadding=e,this.arrangeChildren()}get rightPadding(){return this.options?.rightPadding??this.horPadding}set topPadding(e){if(!this.options)throw new Error("List has not been initiated!");this.options.topPadding=e,this.arrangeChildren()}get topPadding(){return this.options?.topPadding??this.vertPadding}set bottomPadding(e){if(!this.options)throw new Error("List has not been initiated!");this.options.bottomPadding=e,this.arrangeChildren()}get bottomPadding(){return this.options?.bottomPadding??this.vertPadding}arrangeChildren(){let e=0,n=this.leftPadding,r=this.topPadding;const i=this.options?.elementsMargin??0;let s=this.maxWidth||this.parent?.width;this.rightPadding&&(s-=this.rightPadding),this.children.forEach((a,o)=>{switch(this.type){case"vertical":a.y=r,a.x=n,r+=i+a.height;break;case"horizontal":a.x=n,a.y=r,n+=i+a.width;break;case"bidirectional":default:a.x=n,a.y=r,a.x+a.width>s&&o>0&&(r+=i+e,n=this.leftPadding,a.x=n,a.y=r,e=0),e=Math.max(e,a.height),n+=i+a.width;break}})}removeItem(e){const n=this.children[e];n&&(this.removeChild(n),this.arrangeChildren())}set maxWidth(e){this._maxWidth=e,this.arrangeChildren()}get maxWidth(){return this._maxWidth}}var iit=Object.defineProperty,sit=(t,e,n)=>e in t?iit(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cw=(t,e,n)=>sit(t,typeof e!="symbol"?e+"":e,n);class ait{constructor(e={}){Cw(this,"x"),Cw(this,"ax"),Cw(this,"dx"),Cw(this,"tx"),Cw(this,"_options"),this.x=0,this.ax=0,this.dx=0,this.tx=0,this._options={max:e.max??160,damp:e.damp??.8,springiness:e.springiness??.1}}update(){this.ax=(this.tx-this.x)*this._options.springiness,this.dx+=this.ax,this.dx*=this._options.damp,this.dx<-this._options.max?this.dx=-this._options.max:this.dx>this._options.max&&(this.dx=this._options.max),this.x+=this.dx}reset(){this.x=0,this.ax=0,this.dx=0,this.tx=0}get max(){return this._options.max}set max(e){this._options.max=e}get damp(){return this._options.damp}set damp(e){this._options.damp=e}get springiness(){return this._options.springiness}set springiness(e){this._options.springiness=e}}var oit=Object.defineProperty,lit=(t,e,n)=>e in t?oit(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,h1=(t,e,n)=>lit(t,typeof e!="symbol"?e+"":e,n);class cit{constructor(){h1(this,"done",!1),h1(this,"to",0),h1(this,"_spring"),h1(this,"_pos",0),h1(this,"_speed",0),h1(this,"_correctSpeed",!1),this._spring=new ait,this._pos=0,this.to=0}start(e,n,r){this._speed=e,this._pos=n,this.to=r,this.done=!1,this._spring.x=this._pos,this._spring.tx=this.to;const i=this.to-this._pos,s=Math.abs(i)/i,a=Math.abs(this._speed)/this._speed;s!==a?this._correctSpeed=!0:this._correctSpeed=!1}update(){if(this._correctSpeed)this._speed*=.6,Math.abs(this._speed)<2&&(this._correctSpeed=!1),this._pos+=this._speed,this._spring.x=this._pos;else{const e=this.to-this._pos;Math.abs(e)<.05?(this._pos=this.to,this.done=!0):(this._spring.tx=this.to,this._spring.update(),this._pos=this._spring.x)}return this._pos}cancel(){}}var uit=Object.defineProperty,dit=(t,e,n)=>e in t?uit(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vu=(t,e,n)=>dit(t,typeof e!="symbol"?e+"":e,n);class YV{constructor(e={}){Vu(this,"position",0),Vu(this,"constrain",!0),Vu(this,"min",0),Vu(this,"max",0),Vu(this,"maxSpeed",400),Vu(this,"_ease"),Vu(this,"_offset",0),Vu(this,"_prev",0),Vu(this,"_speed",0),Vu(this,"_hasStopped",!1),Vu(this,"_targetSpeed",0),Vu(this,"_speedChecker",0),Vu(this,"_grab",0),Vu(this,"_activeEase"),this.constrain=e.constrain??!0,this.maxSpeed=e.maxSpeed??400,this._ease=e.ease??new cit}set value(e){this._speed=0,this.position=e}get value(){return this.position}grab(e){this._grab=e,this._offset=this.position-e,this._speedChecker=0,this._targetSpeed=this._speed=0,this._hasStopped=!1}hold(e){this._speedChecker++,this.position=e+this._offset,this._speedChecker>1&&(this._targetSpeed=this.position-this._prev),this._speed+=(this._targetSpeed-this._speed)/2,this._speed>this.maxSpeed?this._speed=this.maxSpeed:this._speed<-this.maxSpeed&&(this._speed=-this.maxSpeed),this._prev=this.position,this.constrain&&(this._activeEase=void 0,this.position>this.min?this.position-=(this.position-this.min)/1.5:this.position<this.max&&(this.position+=(this.max-this.position)/1.5))}slide(e=!1){this._hasStopped||(this.constrain?this._updateConstrain(e):this._updateDefault())}get moveAmount(){return-(this.position-this._offset-this._grab)}_updateDefault(){this._speed*=.9,this.position+=this._speed,(this._speed<0?this._speed*-1:this._speed)<.01&&(this._hasStopped=!0)}_updateConstrain(e=!1){const n=this.max;e?(this.value>0&&(this.value=0),this.value>0&&(this.value=0),this.value<this.max&&(this.value=this.max),this.value<this.max&&(this.value=this.max)):this.position>this.min||this.position<n||this._activeEase?(this._activeEase||(this._activeEase=this._ease,this.position>this.min?this._activeEase.start(this._speed,this.position,this.min):this._activeEase.start(this._speed,this.position,n)),this.position=this._activeEase.update(),this._activeEase.done&&(this.position=this._activeEase.to,this._speed=0,this._activeEase=void 0)):this._updateDefault()}}var hit=Object.defineProperty,fit=(t,e,n)=>e in t?hit(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uy=(t,e,n)=>fit(t,typeof e!="symbol"?e+"":e,n);class pit{constructor(e){uy(this,"xAxis"),uy(this,"yAxis"),uy(this,"_isDown",!1),uy(this,"_globalPosition"),uy(this,"_frame"),uy(this,"_bounds"),uy(this,"_dirty",!1),uy(this,"disableEasing",!1),this.xAxis=new YV({ease:e.xEase,maxSpeed:e.maxSpeed,constrain:e.constrain}),this.yAxis=new YV({ease:e.yEase,maxSpeed:e.maxSpeed,constrain:e.constrain}),this.disableEasing=e.disableEasing??!1,this._frame=new es,this._bounds=new es,this._globalPosition=new no}pointerDown(e){this._globalPosition=e,this.xAxis.grab(e.x),this.yAxis.grab(e.y),this._isDown=!0}pointerUp(){this._isDown=!1}pointerMove(e){this._globalPosition=e}update(){this._dirty&&this._bounds&&this._frame&&(this._dirty=!1,this.xAxis.min=this._bounds.left,this.xAxis.min=this._bounds.right-this._frame.width,this.xAxis.min=this._bounds.top,this.xAxis.min=this._bounds.bottom-this._frame.height),this._isDown&&this._globalPosition?(this.xAxis.hold(this._globalPosition.x),this.yAxis.hold(this._globalPosition.y)):(this.xAxis.slide(this.disableEasing),this.yAxis.slide(this.disableEasing))}resize(e,n){this._frame&&(this._frame.x=0,this._frame.width=e,this._frame.y=0,this._frame.height=n,this._dirty=!0)}setBounds(e,n,r,i){this._bounds&&(this._bounds.x=e,this._bounds.width=n-e,this._bounds.y=r,this._bounds.height=i-r,this._dirty=!0)}get x(){return this.xAxis.value}get y(){return this.yAxis.value}}var git=Object.defineProperty,mit=(t,e,n)=>e in t?git(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ks=(t,e,n)=>mit(t,typeof e!="symbol"?e+"":e,n);class Bhe extends hr{constructor(e){super(),ks(this,"background"),ks(this,"borderMask"),ks(this,"lastWidth",0),ks(this,"lastHeight",0),ks(this,"_width",0),ks(this,"_height",0),ks(this,"_dimensionChanged",!1),ks(this,"list"),ks(this,"_trackpad"),ks(this,"isDragging",0),ks(this,"interactiveStorage",[]),ks(this,"visibleItems",[]),ks(this,"pressedChild"),ks(this,"ticker",A0.shared),ks(this,"options",{}),ks(this,"stopRenderHiddenItemsTimeout"),ks(this,"onMouseScrollBinding",this.onMouseScroll.bind(this)),ks(this,"dragStarTouchPoint"),ks(this,"isOver",!1),ks(this,"proximityRange",0),ks(this,"proximityStatusCache",[]),ks(this,"lastScrollX"),ks(this,"lastScrollY"),ks(this,"proximityCheckFrameCounter",0),ks(this,"onProximityChange",new nd.Signal),ks(this,"onScroll",new nd.Signal),e&&this.init(e),this.ticker.add(this.update,this)}init(e){this.options=e,this.setBackground(e.background),this._width=e.width??this.background?.width??100,this._height=e.height??this.background?.height??100,this.proximityRange=e.proximityRange??0,this.list||(this.list=new Ihe,super.addChild(this.list)),this.list?.init({type:e.type,elementsMargin:e.elementsMargin,padding:e.padding,vertPadding:e.vertPadding,horPadding:e.horPadding,topPadding:e.topPadding,bottomPadding:e.bottomPadding,leftPadding:e.leftPadding,rightPadding:e.rightPadding,maxWidth:e.maxWidth||(e.type!=="horizontal"&&e.type!=="vertical"?this._width:0)}),e.items&&this.addItems(e.items),this.hasBounds&&(this.addMask(),this.makeScrollable()),this._trackpad&&(this._trackpad.xAxis.value=0,this._trackpad.yAxis.value=0),this.options.globalScroll=e.globalScroll??!0,this.options.shiftScroll=e.shiftScroll??!1,this.resize()}get hasBounds(){return!!this._width||!!this._height}addItems(e){e?.length&&e.forEach(n=>this.addItem(n))}removeItems(){this.proximityStatusCache.length=0,this.list?.removeChildren()}addItem(...e){if(e.length>1)e.forEach(n=>this.addItem(n));else{const n=e[0];(!n.width||!n.height)&&console.error("ScrollBox item should have size"),n.eventMode="static",this.list?.addChild(n),this.proximityStatusCache.push(!1),this.options.disableDynamicRendering||(n.renderable=this.isItemVisible(n))}return this.resize(),e[0]}removeItem(e){this.list?.removeItem(e),this.proximityStatusCache.splice(e,1),this.resize()}isItemVisible(e,n=0){let r=!1;const i=this.list;if(!i)return!1;if(this.isVertical||this.isBidirectional){const s=e.y+i.y;s+e.height>=-n&&s<=(this.options.height??this._height)+n&&(r=!0)}if(this.isHorizontal||this.isBidirectional){const s=e.x+i.x;s+e.width>=-n&&s<=(this.options.width??this._width)+n&&(r=!0)}return r}get items(){return this.list?.children??[]}setBackground(e){this.background&&this.removeChild(this.background),this.options.background=e,this.background=new _i,this.addChildAt(this.background,0),this.resize()}addMask(){this.borderMask||(this.borderMask=new _i,super.addChild(this.borderMask),this.mask=this.borderMask),this.resize()}makeScrollable(){this._trackpad||(this._trackpad=new pit({disableEasing:this.options.disableEasing})),this.on("pointerdown",e=>{this.renderAllItems(),this.isDragging=1,this.dragStarTouchPoint=this.worldTransform.applyInverse(e.global),this._trackpad&&this.dragStarTouchPoint&&this._trackpad.pointerDown(new no(this.dragStarTouchPoint.x,this.dragStarTouchPoint.y));const n=this.list?.worldTransform.applyInverse(e.global);n&&this.visibleItems.forEach(r=>{r.x<n.x&&r.x+r.width>n.x&&r.y<n.y&&r.y+r.height>n.y&&(this.pressedChild=r)})}),this.on("pointerup",()=>{this.isDragging=0,this._trackpad?.pointerUp(),this.restoreItemsInteractivity(),this.pressedChild=void 0,this.stopRenderHiddenItems()}),this.on("pointerover",()=>{this.isOver=!0}),this.on("pointerout",()=>{this.isOver=!1}),this.on("pointerupoutside",()=>{this.isDragging=0,this._trackpad?.pointerUp(),this.restoreItemsInteractivity(),this.pressedChild=void 0,this.stopRenderHiddenItems()}),this.on("globalpointermove",e=>{if(!this.isDragging)return;const n=this.worldTransform.applyInverse(e.global);if(this.dragStarTouchPoint){const r=this.options.dragTrashHold??10;if(this.isHorizontal||this.isBidirectional){const i=n.x-this.dragStarTouchPoint.x;Math.abs(i)>r&&(this.isDragging=2)}if(this.isVertical||this.isBidirectional){const i=n.y-this.dragStarTouchPoint.y;Math.abs(i)>r&&(this.isDragging=2)}}this.dragStarTouchPoint&&this.isDragging!==2||(this._trackpad?.pointerMove(new no(n.x,n.y)),this.pressedChild&&(this.revertClick(this.pressedChild),this.pressedChild=void 0),this.isBidirectional?this.onScroll?.emit({x:this.scrollX,y:this.scrollY}):this.onScroll?.emit(this.isVertical?this.scrollY:this.scrollX))}),document.addEventListener("wheel",this.onMouseScrollBinding,!0)}setInteractive(e){this.eventMode=e?"static":"auto"}get listHeight(){return(this.list?.height??0)+(this.list?.topPadding??0)+(this.list?.bottomPadding??0)}get listWidth(){return(this.list?.width??0)+(this.list?.leftPadding??0)+(this.list?.rightPadding??0)}resize(e=!1){if(this.hasBounds){if(this.renderAllItems(),this.borderMask&&(e||this._dimensionChanged||this.lastWidth!==this.listWidth||this.lastHeight!==this.listHeight)){this.options.width||(this._width+=this.listWidth),this.options.height||(this._height+=this.listHeight),this.borderMask?.clear().roundRect(0,0,this._width,this._height,(this.options.radius??0)|0).fill(16711935).stroke(0),this.borderMask&&(this.borderMask.eventMode="none");const n=this.options.background;this.background?.clear().roundRect(0,0,this._width,this._height,(this.options.radius??0)|0).fill({color:n??0,alpha:n?1:1e-7}),this.isBidirectional?this.setInteractive(this.listWidth>this._width||this.listHeight>this._height):this.isHorizontal?this.setInteractive(this.listWidth>this._width):this.setInteractive(this.listHeight>this._height),this.lastWidth=this.listWidth,this.lastHeight=this.listHeight}if(this._trackpad&&this.borderMask){const n=this.borderMask.width-(this.list?.width??0)-(this.list?.leftPadding??0)-(this.list?.rightPadding??0),r=this.borderMask.height-(this.list?.height??0)-(this.list?.topPadding??0)-(this.list?.bottomPadding??0);this.isBidirectional?(this._trackpad.yAxis.max=-Math.abs(r),this._trackpad.xAxis.max=-Math.abs(n)):this.isVertical?this._trackpad.yAxis.max=-Math.abs(r):this.isHorizontal&&(this._trackpad.xAxis.max=-Math.abs(n))}this._dimensionChanged?(this.list?.arrangeChildren(),this.stopRenderHiddenItems(),this._dimensionChanged=!1):(e&&this.list?.arrangeChildren(),this.updateVisibleItems()),this.lastScrollX=void 0,this.lastScrollY=void 0}}onMouseScroll(e){if(!this.isOver&&!this.options.globalScroll)return;this.renderAllItems();const n=!!this.options.shiftScroll,r=n?typeof e.deltaX<"u"||typeof e.deltaY<"u":typeof e.deltaX<"u",i=typeof e.deltaY<"u";if((this.isHorizontal||this.isBidirectional)&&r){const s=n||this.isBidirectional?e.deltaX:e.deltaY,a=(this.list?.x??0)-s;if(this.listWidth<this._width)this._trackpad&&(this._trackpad.xAxis.value=0);else{const o=this._width-this.listWidth,l=0;this._trackpad&&(this._trackpad.xAxis.value=Math.min(l,Math.max(o,a)))}}if((this.isVertical||this.isBidirectional)&&i){const s=(this.list?.y??0)-e.deltaY;if(this.listHeight<this._height)this._trackpad&&(this._trackpad.yAxis.value=0);else{const a=this._height-this.listHeight,o=0;this._trackpad&&(this._trackpad.yAxis.value=Math.min(o,Math.max(a,s)))}}this.isBidirectional&&(r||i)?this.onScroll?.emit({x:this._trackpad?.xAxis.value??0,y:this._trackpad?.yAxis.value??0}):this.isHorizontal&&r?this.onScroll?.emit(this._trackpad?.xAxis.value??0):this.isVertical&&i&&this.onScroll?.emit(this._trackpad?.yAxis.value??0),this.stopRenderHiddenItems()}scrollBottom(){this.interactive?this.scrollTo((this.list?.children.length??1)-1):this.scrollTop()}scrollTop(){this.renderAllItems(),this._trackpad&&(this._trackpad.xAxis.value=0,this._trackpad.yAxis.value=0),this.stopRenderHiddenItems()}renderAllItems(){clearTimeout(this.stopRenderHiddenItemsTimeout),this.stopRenderHiddenItemsTimeout=void 0,!this.options.disableDynamicRendering&&this.items.forEach(e=>{e.renderable=!0})}stopRenderHiddenItems(){this.options.disableDynamicRendering||(this.stopRenderHiddenItemsTimeout&&(clearTimeout(this.stopRenderHiddenItemsTimeout),this.stopRenderHiddenItemsTimeout=void 0),this.stopRenderHiddenItemsTimeout=setTimeout(()=>this.updateVisibleItems(),2e3))}updateVisibleItems(){this.visibleItems.length=0,this.items.forEach(e=>{e.renderable=this.isItemVisible(e),this.visibleItems.push(e)})}scrollTo(e){if(!this.interactive||!this._trackpad||!this.list)return;const n=this.list.children[e];n&&(this.renderAllItems(),this._trackpad.xAxis.value=this.isHorizontal||this.isBidirectional?this._width-n.x-n.width-this.list.rightPadding:0,this._trackpad.yAxis.value=this.isVertical||this.isBidirectional?this._height-n.y-n.height-this.list.bottomPadding:0,this.stopRenderHiddenItems())}scrollToPosition({x:e,y:n}){e===void 0&&n===void 0||(this.renderAllItems(),e!==void 0&&(this.scrollX=-e),n!==void 0&&(this.scrollY=-n),this.stopRenderHiddenItems())}get height(){return this._height}set height(e){this._height=e,this._dimensionChanged=!0,this.resize(),this.scrollTop()}get width(){return this._width}set width(e){this._width=e,this._dimensionChanged=!0,this.resize(),this.scrollTop()}setSize(e,n){typeof e=="object"?(n=e.height??e.width,e=e.width):n=n??e,this._width=e,this._height=n,this._dimensionChanged=!0,this.resize(),this.scrollTop()}getSize(e){return e=e||{width:0,height:0},e.width=this._width,e.height=this._height,e}get scrollX(){return this._trackpad?.xAxis.value??0}set scrollX(e){this._trackpad&&(this._trackpad.xAxis.value=e)}get scrollY(){return this._trackpad?.yAxis.value??0}set scrollY(e){this._trackpad&&(this._trackpad.yAxis.value=e)}update(){!this.list||!this._trackpad||(this._trackpad.update(),(this.isHorizontal||this.isBidirectional)&&this.list.x!==this._trackpad.x&&(this.list.x=this._trackpad.x),(this.isVertical||this.isBidirectional)&&this.list.y!==this._trackpad.y&&(this.list.y=this._trackpad.y),!this.options.disableProximityCheck&&(this._trackpad.x!==this.lastScrollX||this._trackpad.y!==this.lastScrollY)&&(this.proximityCheckFrameCounter++,this.proximityCheckFrameCounter>=(this.options.proximityDebounce??10)&&(this.items.forEach((e,n)=>{const r=this.isItemVisible(e,this.proximityRange),i=this.proximityStatusCache[n];r!==i&&(this.proximityStatusCache[n]=r,this.onProximityChange.emit({item:e,index:n,inRange:r}))}),this.lastScrollX=this._trackpad.x,this.lastScrollY=this._trackpad.y,this.proximityCheckFrameCounter=0)))}destroy(e){this.ticker.remove(this.update,this),document.removeEventListener("wheel",this.onMouseScrollBinding,!0),this.background?.destroy(),this.list?.destroy(),super.destroy(e)}restoreItemsInteractivity(){this.interactiveStorage.forEach(e=>{e.item.eventMode=e.eventMode}),this.interactiveStorage.length=0}revertClick(e){e.eventMode!=="auto"&&(_p.any?e.emit("pointerupoutside",{target:e}):e.emit("mouseupoutside",{target:e}),this.interactiveStorage.push({item:e,eventMode:e.eventMode??"auto"}),e.eventMode="auto"),e instanceof hr&&e.children&&e.children.forEach(n=>this.revertClick(n))}get scrollHeight(){return this.list?.height??0}get scrollWidth(){return this.list?.width??0}get isVertical(){return(this.options.type??"vertical")==="vertical"}get isHorizontal(){return this.options.type==="horizontal"}get isBidirectional(){return this.options.type==="bidirectional"}}var Ait=Object.defineProperty,yit=(t,e,n)=>e in t?Ait(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ex=(t,e,n)=>yit(t,typeof e!="symbol"?e+"":e,n);class The extends hr{constructor(e){super(),Ex(this,"bg"),Ex(this,"fill"),Ex(this,"fillMask"),Ex(this,"progressStart",0),Ex(this,"_progress",0),Ex(this,"options"),Ex(this,"innerView");const n={bg:Gn.WHITE,fill:Gn.WHITE,fillPaddings:{top:0,right:0,bottom:0,left:0},progress:0};this.options={...n,...e},this.innerView=new hr,this.addChild(this.innerView),this.init(this.options)}init({bg:e,fill:n,fillPaddings:r,progress:i}){this.setBackground(e),this.setFill(n,r),this.progress=i??0}setBackground(e){this.bg&&this.bg.destroy(),this.options?.nineSliceSprite&&(typeof e=="string"?this.bg=new Ug({texture:Gn.from(e),leftWidth:this.options.nineSliceSprite.bg[0],topHeight:this.options.nineSliceSprite.bg[1],rightWidth:this.options.nineSliceSprite.bg[2],bottomHeight:this.options.nineSliceSprite.bg[3]}):e instanceof Gn?this.bg=new Ug({texture:e,leftWidth:this.options.nineSliceSprite.bg[0],topHeight:this.options.nineSliceSprite.bg[1],rightWidth:this.options.nineSliceSprite.bg[2],bottomHeight:this.options.nineSliceSprite.bg[3]}):console.warn(`NineSliceSprite can not be used with views set as Container.
                    Pass the texture or texture name as instead of the Container extended instance.`)),this.bg||(this.bg=Zd(e)),this.innerView.addChildAt(this.bg,0)}setFill(e,n){if(this.fill&&this.fill.destroy(),this.bg instanceof dd&&e===this.bg){console.warn("Can not use same Sprite instance for bg and fill.");return}this.options?.nineSliceSprite?typeof e=="string"||e instanceof Gn?this.fill=new Ug({texture:typeof e=="string"?Gn.from(e):e,leftWidth:this.options.nineSliceSprite.fill[0],topHeight:this.options.nineSliceSprite.fill[1],rightWidth:this.options.nineSliceSprite.fill[2],bottomHeight:this.options.nineSliceSprite.fill[3]}):(console.warn(`NineSliceSprite can not be used with views set as Container.
                    Pass the texture or texture name as instead of the Container extended instance.`),this.fill=Zd(e)):this.fill=Zd(e),this.innerView.addChildAt(this.fill,1);const r=n?.left??0,i=n?.top??0;this.fill.x=r,this.fill.y=i,this.fillMask&&(this.fill.mask=null,this.fillMask.destroy());const s=this.fill.width/2,a=this.fill.width/2,o=this.fill.height/2,l=this.fill.height/2;let c=Gn.WHITE;this.fill instanceof dd&&this.fill.texture&&(c=this.fill.texture),this.fillMask=new Ug({texture:c,leftWidth:s,topHeight:o,rightWidth:a,bottomHeight:l}),this.fillMask.position.copyFrom(this.fill),this.addChild(this.fillMask),this.fill.mask=this.fillMask}validate(e){return e=Math.round(e),e<0?0:e>100?100:e}set progress(e){this._progress=this.validate(e),this.fill&&this.fillMask&&(this.fill.mask=null,this.fillMask.width=this.fill.width/100*(this._progress-this.progressStart),this.fillMask.x=this.progressStart/100*this.fill.width+this.fill.x,this.fillMask.height=this.fill.height,this.fill.mask=this.fillMask)}get progress(){return this._progress}set width(e){if(this.options?.nineSliceSprite){if(this.bg&&(this.bg.width=e),this.fill){const n=this.options.fillPaddings?.left??0,r=this.options.fillPaddings?.right??0;this.fill.width=e-n-r,this.fillMask.width=e-n-r}this.progress=this._progress}else super.width=e}get width(){return super.width}set height(e){if(this.options?.nineSliceSprite){if(this.bg&&(this.bg.height=e),this.fill){const n=this.options.fillPaddings?.top??0,r=this.options.fillPaddings?.bottom??0;this.fill.height=e-n-r,this.fillMask.height=e-n-r}this.progress=this._progress}else super.height=e}get height(){return super.height}setSize(e,n){if(this.options?.nineSliceSprite){if(this.bg&&this.bg.setSize(e,n),this.fill){typeof e=="object"?(n=e.height??e.width,e=e.width):n=n??e;const r=this.options.fillPaddings?.top??0,i=this.options.fillPaddings?.bottom??0,s=this.options.fillPaddings?.left??0,a=this.options.fillPaddings?.right??0;this.fill.setSize(e-s-a,n-r-i),this.fillMask.setSize(e-s-a,n-r-i)}this.progress=this._progress}else super.setSize(e,n)}}var vit=Object.defineProperty,xit=(t,e,n)=>e in t?vit(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wu=(t,e,n)=>xit(t,typeof e!="symbol"?e+"":e,n);class bit extends The{constructor(e){super(e),Wu(this,"_slider1"),Wu(this,"_slider2"),Wu(this,"value1Text"),Wu(this,"value2Text"),Wu(this,"_value1",0),Wu(this,"_value2",0),Wu(this,"dragging",0),Wu(this,"_min",0),Wu(this,"_max",100),Wu(this,"_step",1),Wu(this,"startX"),Wu(this,"startUpdateValue1"),Wu(this,"startUpdateValue2"),Wu(this,"settings"),this.settings=e,e.slider1&&(this.slider1=e.slider1),e.slider2&&(this.slider2=e.slider2),this.min=e.min??0,this.max=e.max??100}init(e){super.init(e),this.fill&&(this.fill.eventMode="none")}set slider1(e){if(e&&(this._slider1&&(this._slider1.removeAllListeners(),this._slider1.destroy()),this._slider1=this.createSlider(e),this.settings.showValue&&!this.value1Text)){const n=this.settings.valueTextClass??kc;this.value1Text=new n({text:"",style:this.settings.valueTextStyle||{fill:16777215}}),this.value1Text.anchor.set(.5),this.addChild(this.value1Text)}}get slider1(){return this._slider1}set slider2(e){if(e&&(this._slider2&&(this._slider2.removeAllListeners(),this._slider2.destroy()),this._slider2=this.createSlider(e),this.settings.showValue&&!this.value2Text)){const n=this.settings.valueTextClass??kc;this.value2Text=new n({text:"",style:this.settings.valueTextStyle||{fill:16777215}}),this.value2Text.anchor.set(.5),this.addChild(this.value2Text)}}get slider2(){return this._slider2}setBackground(e){this.bg&&this.bg.removeAllListeners(),super.setBackground(e),this.activateBG()}activateBG(){this.bg.eventMode="static",this.bg.on("pointerdown",this.startUpdate,this).on("globalpointermove",this.update,this).on("pointerup",this.endUpdate,this).on("pointerupoutside",this.endUpdate,this)}createSlider(e){const n=Zd(e),r=s=>{this.bg&&(s.currentTarget=this.bg),this.startUpdate(s)};n.eventMode="static",n.on("pointerdown",r).on("pointerup",this.endUpdate,this).on("pointerupoutside",this.endUpdate,this),n.x=n.width/2;const i=new hr;return i.addChild(n),n instanceof dd&&n.anchor.set(.5),i.y=this.bg?.height?this.bg?.height/2:0,this.addChild(i),i}startUpdate(e){this.dragging=1;const n=e.currentTarget;this.startX=n.parent.worldTransform.applyInverse(e.global).x,this.startUpdateValue1=this._value1,this.startUpdateValue2=this._value2,this.update(e)}endUpdate(){this.dragging&&(this.dragging=0,(this.startX||this.startUpdateValue1!==this._value1||this.startUpdateValue2!==this._value2)&&this.change(),this.startUpdateValue1=0,this.startUpdateValue2=0)}onClick(){this.change()}update(e){const n=e.currentTarget,{x:r}=n.parent.worldTransform.applyInverse(e.global);r!==this.startX&&(this.startX=0)}change(){}set max(e){this._max=e}get max(){return this._max}set min(e){this._min=e}get min(){return this._min}set step(e){this._step=e}get step(){return this._step}}var Cit=Object.defineProperty,Eit=(t,e,n)=>e in t?Cit(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sa=(t,e,n)=>Eit(t,typeof e!="symbol"?e+"":e,n);const Sit="*";class wit extends hr{constructor(e){super(),sa(this,"_bg"),sa(this,"inputMask"),sa(this,"_cursor"),sa(this,"_value",""),sa(this,"_secure",!1),sa(this,"inputField"),sa(this,"placeholder"),sa(this,"editing",!1),sa(this,"tick",0),sa(this,"lastInputData",""),sa(this,"activation",!1),sa(this,"options"),sa(this,"input"),sa(this,"handleActivationBinding",this.handleActivation.bind(this)),sa(this,"onKeyUpBinding",this.onKeyUp.bind(this)),sa(this,"stopEditingBinding",this.stopEditing.bind(this)),sa(this,"onInputBinding",this.onInput.bind(this)),sa(this,"onPasteBinding",this.onPaste.bind(this)),sa(this,"onEnter"),sa(this,"onChange"),sa(this,"paddingTop",0),sa(this,"paddingRight",0),sa(this,"paddingBottom",0),sa(this,"paddingLeft",0);const n={bg:Gn.WHITE,textStyle:{fill:0,align:"center"},TextClass:kc,placeholder:"",value:"",maxLength:void 0,secure:!1,align:"left",padding:0,cleanOnFocus:!1,addMask:!1};this.options={...n,...e};const{padding:r=0,secure:i=!1}=this.options;this.padding=r,this._secure=i,this.cursor="text",this.interactive=!0,this.on("pointertap",()=>{this.activation=!0,_p.any&&this.handleActivation()}),window.addEventListener(_p.any?"touchstart":"click",this.handleActivationBinding),this.onEnter=new nd.Signal,this.onChange=new nd.Signal,A0.shared.add(s=>this.update(s.deltaTime)),e.bg?this.bg=e.bg:console.error("Input: bg is not defined, please define it.")}onInput(e){this.lastInputData=e.data??""}onKeyUp(e){const n=e.key;["Shift","Control","Alt","Meta","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","CapsLock","AltGraph","Tab","ContextMenu","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","ScrollLock","Pause","Insert","Delete","Home","End","PageUp","PageDown","NumLock","Dead"].includes(n)||e.metaKey||e.ctrlKey||(n==="Backspace"?this._delete():n==="Escape"||n==="Enter"?this.stopEditing():n.length===1?this._add(n):this.lastInputData&&this.lastInputData.length===1&&this._add(this.lastInputData),this.input&&(this.input.value=""))}init(){const{textStyle:e={fill:0,align:"center"},TextClass:n=kc,placeholder:r=""}=this.options,i=e.fill&&io.isColorLike(e.fill)?e.fill:0;this.inputField=new n({text:"",style:e}),this._cursor=new dd(Gn.WHITE),this._cursor.tint=i,this._cursor.anchor.set(.5),this._cursor.width=2,this._cursor.height=this.inputField.height*.8,this._cursor.alpha=0,this.placeholder=new n({text:r,style:e}),this.placeholder.visible=!!r,this.addChild(this.inputField,this.placeholder,this._cursor),this.value=this.options.value??"",this.align()}set bg(e){this._bg&&this._bg.destroy();const n=e??Gn.WHITE;this.options?.nineSliceSprite&&(typeof n=="string"?this._bg=new Ug({texture:Gn.from(n),leftWidth:this.options.nineSliceSprite[0],topHeight:this.options.nineSliceSprite[1],rightWidth:this.options.nineSliceSprite[2],bottomHeight:this.options.nineSliceSprite[3]}):n instanceof Gn?this._bg=new Ug({texture:n,leftWidth:this.options.nineSliceSprite[0],topHeight:this.options.nineSliceSprite[1],rightWidth:this.options.nineSliceSprite[2],bottomHeight:this.options.nineSliceSprite[3]}):console.warn(`NineSliceSprite can not be used with views set as Container.
                    Pass the texture or texture name as instead of the Container extended instance.`)),this._bg||(this._bg=Zd(n)),this._bg.cursor="text",this._bg.interactive=!0,this.addChildAt(this._bg,0),this.inputField||this.init(),this.options.addMask&&this.createInputMask(e)}get bg(){return this._bg}_add(e){this.editing&&(this.options.maxLength&&this.value.length>=this.options.maxLength||(this.value=this.value+e,this.onChange.emit(this.value)))}_delete(){const e=this.value.length;!this.editing||e===0||(this.value=this.value.substring(0,e-1),this.onChange.emit(this.value))}_startEditing(){this.options.cleanOnFocus&&(this.value=""),this.tick=0,this.editing=!0,this.placeholder&&(this.placeholder.visible=!1),this._cursor&&(this._cursor.alpha=1),this.createInputField(),this.align()}createInputField(){this.input&&(this.input.removeEventListener("blur",this.stopEditingBinding),this.input.removeEventListener("keydown",this.onKeyUpBinding),this.input.removeEventListener("input",this.onInputBinding),this.input.removeEventListener("paste",this.onPasteBinding),this.input?.blur(),this.input?.remove(),this.input=void 0);const e=document.createElement("input");document.body.appendChild(e),e.style.position="fixed",e.style.left=`${this.getGlobalPosition().x}px`,e.style.top=`${this.getGlobalPosition().y}px`,e.style.opacity="0.0000001",e.style.width=`${this._bg?.width??100}px`,e.style.height=`${this._bg?.height??30}px`,e.style.border="none",e.style.outline="none",e.style.background="white",_p.android.device?setTimeout(()=>{e.focus(),e.click()},100):(e.focus(),e.click()),e.addEventListener("blur",this.stopEditingBinding),e.addEventListener("keydown",this.onKeyUpBinding),e.addEventListener("input",this.onInputBinding),e.addEventListener("paste",this.onPasteBinding),this.input=e,this.align()}handleActivation(){this.editing||(this.stopEditing(),this.activation&&(this._startEditing(),this.activation=!1))}stopEditing(){this.editing&&(this._cursor&&(this._cursor.alpha=0),this.editing=!1,this.placeholder&&this.value.length===0&&(this.placeholder.visible=!0),this.input?.blur(),this.input?.remove(),this.input=void 0,this.align(),this.onEnter.emit(this.value))}update(e){this.editing&&(this.tick+=e*.1,this._cursor&&(this._cursor.alpha=Math.round(Math.sin(this.tick)*.5+.5)))}align(){if(!this._bg)return;const e=this.getAlign();this.inputField&&(this.inputField.anchor.set(e,.5),this.inputField.x=this._bg.width*e+(e===1?-this.paddingRight:this.paddingLeft),this.inputField.y=this._bg.height/2+this.paddingTop-this.paddingBottom),this.placeholder&&(this.placeholder.anchor.set(e,.5),this.placeholder.x=this._bg.width*e+(e===1?-this.paddingRight:this.paddingLeft),this.placeholder.y=this._bg.height/2),this._cursor&&this.inputField&&(this._cursor.x=this.getCursorPosX(),this._cursor.y=this.inputField.y)}getAlign(){if(!(this._bg&&this.inputField))return 0;const e=this._bg.width*.95,n=this.paddingLeft+this.paddingRight-10;if(this.inputField.width+n>e)return this.editing?1:0;switch(this.options.align){case"left":return 0;case"center":return .5;case"right":return 1;default:return 0}}getCursorPosX(){if(!this.inputField)return 0;switch(this.getAlign()){case 0:return this.inputField.x+this.inputField.width;case .5:return this.inputField.x+this.inputField.width*.5;case 1:return this.inputField.x;default:return 0}}set value(e){const n=e.length;this._value=e,this.inputField&&(this.inputField.text=this.secure?Sit.repeat(n):e),this.placeholder&&(this.placeholder.visible=n===0&&!this.editing),this.align()}get value(){return this._value}set secure(e){this._secure=e,this.value=this._value}get secure(){return this._secure}set padding(e){typeof e=="number"&&(this.paddingTop=e,this.paddingRight=e,this.paddingBottom=e,this.paddingLeft=e),Array.isArray(e)?(this.paddingTop=e[0]??0,this.paddingRight=e[1]??e[0]??0,this.paddingBottom=e[2]??e[0]??0,this.paddingLeft=e[3]??e[1]??e[0]??0):typeof e=="object"&&(this.paddingTop=e.top??0,this.paddingRight=e.right??0,this.paddingBottom=e.bottom??0,this.paddingLeft=e.left??0)}get padding(){return[this.paddingTop,this.paddingRight,this.paddingBottom,this.paddingLeft]}destroy(e){this.off("pointertap"),window.removeEventListener(_p.any?"touchstart":"click",this.handleActivationBinding),super.destroy(e)}set width(e){this.options?.nineSliceSprite?(this._bg&&(this._bg.width=e),this.updateInputMaskSize(),this.align()):super.width=e}get width(){return super.width}set height(e){this.options?.nineSliceSprite?(this._bg&&(this._bg.height=e),this.updateInputMaskSize(),this.align()):super.height=e}get height(){return super.height}setSize(e,n){this.options?.nineSliceSprite?(this._bg&&this._bg.setSize(e,n),this.updateInputMaskSize(),this.align()):super.setSize(e,n)}createInputMask(e){this.inputMask&&(this.inputField&&(this.inputField.mask=null),this._cursor&&(this._cursor.mask=null),this.inputMask.destroy()),this.options?.nineSliceSprite&&typeof e=="string"?this.inputMask=new Ug({texture:Gn.from(e),leftWidth:this.options.nineSliceSprite[0],topHeight:this.options.nineSliceSprite[1],rightWidth:this.options.nineSliceSprite[2],bottomHeight:this.options.nineSliceSprite[3]}):e instanceof dd?this.inputMask=new dd(e.texture):e instanceof _i?this.inputMask=e.clone(!0):this.inputMask=Zd(e),this.inputField&&(this.inputField.mask=this.inputMask),this._cursor&&(this._cursor.mask=this.inputMask),this.updateInputMaskSize(),this.addChildAt(this.inputMask,0)}updateInputMaskSize(){!this.inputMask||!this._bg||(this.inputMask.setSize(this._bg.width-this.paddingLeft-this.paddingRight,this._bg.height-this.paddingTop-this.paddingBottom),this.inputMask.position.set(this.paddingLeft,this.paddingTop))}onPaste(e){e.preventDefault();const n=(e.clipboardData||window.clipboardData).getData("text");n&&this._add(n)}}var _it=Object.defineProperty,Iit=(t,e,n)=>e in t?_it(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,f1=(t,e,n)=>Iit(t,typeof e!="symbol"?e+"":e,n);class Bit extends hr{constructor(e){super(),f1(this,"target"),f1(this,"border",new _i),f1(this,"_targetMask"),f1(this,"maskData"),f1(this,"borderWidth",0),f1(this,"borderColor",0),e?.target&&this.init(e)}init({target:e,mask:n,borderWidth:r,borderColor:i}){this.target&&this.removeChild(this.target),e&&(this.target=Zd(e)),this.addChild(this.border),this.target&&this.addChild(this.target),n&&this.applyMask(n),r&&this.setBorder(r,i??0)}applyMask(e){this.maskData=e,this._targetMask=Zd(e),this.addChild(this._targetMask),this.target&&(this.target.mask=this._targetMask)}setBorder(e,n){if(this.borderWidth=e,this.borderColor=n,this.showBorder(),this.maskData&&this._targetMask){const r=typeof this.maskData=="string"?dd.from(this.maskData):this.maskData.clone(!0);r.width+=e*2,r.height+=e*2,this.mask=r,this.addChild(r),this._targetMask.position.set(e)}}showBorder(){if(!this.target)return;const e=this.borderWidth*2;this.border.clear().rect(0,0,this.target.width+e,this.target.height+e).fill(this.borderColor),this.target.x=this.borderWidth,this.target.y=this.borderWidth}hideBorder(){this.border.clear()}}var Tit=Object.defineProperty,Mit=(t,e,n)=>e in t?Tit(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sx=(t,e,n)=>Mit(t,typeof e!="symbol"?e+"":e,n);const Dit=5;class Rit extends hr{constructor(e){super(),Sx(this,"view",new hr),Sx(this,"openButton"),Sx(this,"closeButton"),Sx(this,"openView"),Sx(this,"scrollBox"),Sx(this,"value",-1),Sx(this,"onSelect"),this.addChild(this.view),this.onSelect=new nd.Signal,e&&this.init(e)}init({closedBG:e,textStyle:n,TextClass:r,items:i,openBG:s,selected:a,selectedTextOffset:o,scrollBox:l,visibleItems:c}){r=r??kc,this.openView&&this.openView!==s&&this.view.removeChild(this.openView),this.openButton?(this.openButton.defaultView=Zd(e),this.openButton.textView=new r({text:i?.items?i.items[0]:"",style:n}),this.openButton.textOffset=o??{}):(this.openButton=new fb({defaultView:e,text:new r({text:i?.items?i.items[0]:"",style:n}),textOffset:o}),this.openButton.onPress.connect(()=>this.toggle()),this.addChild(this.openButton)),this.openView!==s&&(this.openView=Zd(s),this.view.visible=!1,this.view.addChild(this.openView)),this.closeButton?(this.closeButton.defaultView=new _i().rect(0,0,this.openButton.width,this.openButton.height).fill({color:0,alpha:1e-5}),this.closeButton.textView=new r({text:i?.items?i.items[0]:"",style:n}),this.openButton.textOffset=o??{}):(this.closeButton=new fb({defaultView:new _i().rect(0,0,this.openButton.width,this.openButton.height).fill({color:0,alpha:1e-5}),text:new r({text:i?.items?i.items[0]:"",style:n}),textOffset:o}),this.closeButton.onPress.connect(()=>this.toggle()),this.view.addChild(this.closeButton)),this.scrollBox?this.scrollBox.removeItems():(this.scrollBox=new Bhe,this.view.addChild(this.scrollBox)),this.scrollBox.init({type:"vertical",elementsMargin:0,width:this.openButton.width,height:this.openButton.height*(c??Dit),radius:0,padding:0,...l}),this.scrollBox.y=this.openButton.height,l?.offset&&(this.scrollBox.x=l.offset.x??0,this.scrollBox.y+=l.offset.y??0),this.addItems(i,a)}addItems(e,n=0){this.convertItemsToButtons(e).forEach((r,i)=>{const s=r.text;i===n&&(this.openButton.text=s??"",this.closeButton.text=s??""),r.onPress.connect(()=>{this.value=i,this.onSelect.emit(i,s??""),this.openButton.text=s??"",this.closeButton.text=s??"",this.close()}),this.scrollBox?.addItem(r)})}removeItem(e){this.scrollBox&&this.scrollBox.removeItem(e)}toggle(){this.view.visible=!this.view.visible,this.openButton.visible=!this.openButton.visible}open(){this.view.visible=!0,this.openButton.visible=!1}close(){this.view.visible=!1,this.openButton.visible=!0}convertItemsToButtons({items:e,backgroundColor:n,hoverColor:r,width:i,height:s,textStyle:a,TextClass:o,radius:l}){o=o??kc;const c=[];return e.forEach(u=>{const h=new _i().roundRect(0,0,i,s,l).fill(n),f=r??n,p=new _i().roundRect(0,0,i,s,l).fill(f),m=new o({text:u,style:a}),v=new fb({defaultView:h,hoverView:p,text:m});c.push(v)}),c}}var Pit=Object.defineProperty,kit=(t,e,n)=>e in t?Pit(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,CN=(t,e,n)=>kit(t,typeof e!="symbol"?e+"":e,n);class Nit extends bit{constructor(e){super({slider1:e.slider,value1:e.value,...e}),CN(this,"sliderOptions"),CN(this,"onUpdate",new nd.Signal),CN(this,"onChange",new nd.Signal),this.sliderOptions=e,this.step=e.step||1,this.value=e.value??this.min,this.updateSlider()}get value(){return this._value1}set value(e){e!==this._value1&&(e<this.min&&(e=this.min),e>this.max&&(e=this.max),this._value1=e,this.updateSlider(),this.onUpdate?.emit(this.value))}set max(e){super.max=e,this.updateSlider()}get max(){return super.max}set min(e){super.min=e,this.updateSlider()}get min(){return super.min}set step(e){super.step=e,this.updateSlider()}get step(){return super.step}set slider(e){this.slider1=e,this.updateSlider()}update(e){if(super.update(e),!this.dragging)return;const n=e.currentTarget,{x:r}=n.parent.worldTransform.applyInverse(e.global),i=r/(this.bg?.width||1),s=this.min+i*(this.max-this.min);this.value=Math.round(s/this.step)*this.step}change(){this.onChange?.emit(this.value)}updateSlider(){if(this._slider1&&(this.progress=((this.value??this.min)-this.min)/(this.max-this.min)*100,this._slider1.x=(this.bg?.width??0)/100*this.progress-this._slider1.width/2,this._slider1.y=(this.bg?.height??0)/2,this.sliderOptions?.showValue&&this.value1Text)){this.value1Text.text=`${Math.round(this.value)}`;const e=this._slider1.x+this._slider1.width/2,n=this._slider1.y;this.value1Text.x=e+(this.sliderOptions.valueTextOffset?.x??0),this.value1Text.y=n+(this.sliderOptions.valueTextOffset?.y??0)}}set width(e){super.width=e,this.updateSlider()}get width(){return super.width}set height(e){super.height=e,this.updateSlider()}get height(){return super.height}setSize(e,n){super.setSize(e,n),this.updateSlider()}}const pn={pixiContainer:hr,pixiGraphics:_i,pixiSprite:dd,pixiText:kc,Container:hr,Graphics:_i,Sprite:dd,Text:kc,LayoutContainer:Che,LayoutText:Rrt,FancyButton:fb};vhe(pn);const Lit={vramUsed:0,textureCount:0,spriteCount:0,lastFrameTime:0,averageFps:60},XV={renderVersion:0,lastPixiRenderVersion:0,isCanvasReady:!1,isContextLost:!1,zoom:1,panOffset:{x:0,y:0},gpuMetrics:Lit},El=Jl()(nF((t,e)=>({...XV,incrementRenderVersion:()=>{t(n=>({renderVersion:n.renderVersion+1}))},syncPixiVersion:n=>{t({lastPixiRenderVersion:n});const{renderVersion:r}=e();r-n>2&&console.warn(`[CanvasSync] Mismatch detected: store=${r}, pixi=${n}`)},setCanvasReady:n=>{t({isCanvasReady:n}),n&&console.log(" [CanvasSync] Canvas ready")},setContextLost:n=>{t({isContextLost:n}),n?console.warn(" [CanvasSync] WebGL context lost"):console.log(" [CanvasSync] WebGL context restored")},setZoom:n=>{t({zoom:Math.max(.1,Math.min(5,n))})},setPanOffset:n=>{t({panOffset:n})},updateGPUMetrics:n=>{t(r=>({gpuMetrics:{...r.gpuMetrics,...n}}))},reset:()=>{t(XV)}})));function wr(t,e=0){if(!t)return e;if(t.startsWith("#")){const i=t.slice(1);if(i.length===3){const s=i.split("").map(a=>a+a).join("");return parseInt(s,16)}return parseInt(i,16)}const n=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(n){const i=parseInt(n[1],10),s=parseInt(n[2],10),a=parseInt(n[3],10);return i<<16|s<<8|a}return{white:16777215,black:0,red:16711680,green:65280,blue:255,yellow:16776960,cyan:65535,magenta:16711935,gray:8421504,grey:8421504,transparent:0}[t.toLowerCase()]??e}function X4(t){if(!t)return 1;const e=t.match(/rgba\([\d\s,]+,\s*([\d.]+)\)/);return e?parseFloat(e[1]):t.toLowerCase()==="transparent"?0:1}function ot(t,e,n=0){if(t==null)return n;if(typeof t=="number")return t;if(t.endsWith("px"))return parseFloat(t);if(t.endsWith("rem")||t.endsWith("em"))return parseFloat(t)*16;if(t.endsWith("%"),t==="auto")return n;const r=parseFloat(t);return isNaN(r)?n:r}function Fit(t){return t?{x:ot(t.left,void 0,0),y:ot(t.top,void 0,0),width:ot(t.width,void 0,100),height:ot(t.height,void 0,100)}:{x:0,y:0,width:100,height:100}}function jit(t){const e=wr(t?.backgroundColor,16777215),n=t?.opacity!==void 0?ot(t.opacity,void 0,1):X4(t?.backgroundColor);return{color:e,alpha:n}}function Oit(t){return!t?.borderWidth&&!t?.borderColor?null:{width:ot(t.borderWidth,void 0,1),color:wr(t.borderColor,0),alpha:X4(t.borderColor)}}function zit(t,e=100){const n=ot(t?.fontSize,void 0,16);let r=0;if(t?.lineHeight){const i=ot(t.lineHeight,void 0,0);typeof t.lineHeight=="number"&&i<10?r=(i-1)*n:r=Math.max(0,i-n)}return{fontFamily:t?.fontFamily||"Pretendard, sans-serif",fontSize:n,fontWeight:String(t?.fontWeight||"normal"),fontStyle:t?.fontStyle||"normal",fill:wr(t?.color,0),align:t?.textAlign||"left",letterSpacing:ot(t?.letterSpacing,void 0,0),leading:r,wordWrap:!0,wordWrapWidth:e}}function $it(t,e){if(!e||e==="none")return t;switch(e.toLowerCase()){case"uppercase":return t.toUpperCase();case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/\b\w/g,n=>n.toUpperCase());default:return t}}function Qit(t){return t?ot(t,void 0,0):0}function lO(t){const e=Fit(t);return{transform:e,fill:jit(t),stroke:Oit(t),text:zit(t,e.width),borderRadius:Qit(t?.borderRadius)}}function Uit(t){if(t==null)return null;if(typeof t=="number")return{top:t,right:t,bottom:t,left:t};const e=t.trim();if(!e)return null;const n=e.split(/\s+/).map(r=>ot(r,void 0,0));switch(n.length){case 1:return{top:n[0],right:n[0],bottom:n[0],left:n[0]};case 2:return{top:n[0],right:n[1],bottom:n[0],left:n[1]};case 3:return{top:n[0],right:n[1],bottom:n[2],left:n[1]};case 4:return{top:n[0],right:n[1],bottom:n[2],left:n[3]};default:return null}}function Lb(t,e=0){if(!t)return{top:e,right:e,bottom:e,left:e};const r=Uit(t.padding)||{top:e,right:e,bottom:e,left:e};return{top:t.paddingTop!==void 0?ot(t.paddingTop,void 0,r.top):r.top,right:t.paddingRight!==void 0?ot(t.paddingRight,void 0,r.right):r.right,bottom:t.paddingBottom!==void 0?ot(t.paddingBottom,void 0,r.bottom):r.bottom,left:t.paddingLeft!==void 0?ot(t.paddingLeft,void 0,r.left):r.left}}function Mhe(t,e,n){return{x:n.left,y:n.top,width:Math.max(0,t-n.left-n.right),height:Math.max(0,e-n.top-n.bottom)}}function Hit(t){if(!t||t==="none")return"none";const e=t.toLowerCase();return e==="dashed"?"dashed":e==="dotted"?"dotted":e==="double"?"double":"solid"}function J4(t){if(!t||!t.borderWidth&&!t.borderColor)return null;const e=ot(t.borderWidth,void 0,0);return e<=0?null:{width:e,color:wr(t.borderColor,0),alpha:X4(t.borderColor),style:Hit(t.borderStyle),radius:ot(t.borderRadius,void 0,0)}}function Git(t){return t/2}function Vit(t,e){return Math.max(0,t-e)}function Wit(t,e,n,r){const i=Git(n);return{x:i,y:i,width:Math.max(0,t-n),height:Math.max(0,e-n),radius:Vit(r,i)}}function Kit(t){return t!=null&&t.width>0&&t.style!=="none"}function cs(t,e){t.clear();const{width:n,height:r,backgroundColor:i=16777215,backgroundAlpha:s=1,borderRadius:a,border:o}=e,l=a??o?.radius??0;if(l>0?t.roundRect(0,0,n,r,l):t.rect(0,0,n,r),t.fill({color:i,alpha:s}),Kit(o)){const c=Wit(n,r,o.width,l);qit(t,n,r,c,o)}}function Dhe(t,e){const{x:n,y:r,radius:i,backgroundColor:s=16777215,backgroundAlpha:a=1,border:o}=e,l=o?.width??0,c=Math.max(0,i-l/2);t.circle(n,r,c),t.fill({color:s,alpha:a}),o&&l>0&&(t.circle(n,r,c),t.stroke({width:l,color:o.color,alpha:o.alpha??1}))}function qit(t,e,n,r,i){switch(i.style){case"dashed":Xit(t,r,i);break;case"dotted":Jit(t,r,i);break;case"double":Zit(t,e,n,i);break;case"solid":default:Yit(t,r,i);break}}function Yit(t,e,n){e.radius>0?t.roundRect(e.x,e.y,e.width,e.height,e.radius):t.rect(e.x,e.y,e.width,e.height),t.stroke({width:n.width,color:n.color,alpha:n.alpha})}function Xit(t,e,n){const r=Math.max(n.width*3,6),i=Math.max(n.width*2,4);if(t.setStrokeStyle({width:n.width,color:n.color,alpha:n.alpha}),e.radius>0){t.roundRect(e.x,e.y,e.width,e.height,e.radius),t.stroke();return}const{x:s,y:a,width:o,height:l}=e,c=s+o,u=a+l;for(let h=s;h<c;h+=r+i)t.moveTo(h,a),t.lineTo(Math.min(h+r,c),a);for(let h=a;h<u;h+=r+i)t.moveTo(c,h),t.lineTo(c,Math.min(h+r,u));for(let h=c;h>s;h-=r+i)t.moveTo(h,u),t.lineTo(Math.max(h-r,s),u);for(let h=u;h>a;h-=r+i)t.moveTo(s,h),t.lineTo(s,Math.max(h-r,a));t.stroke()}function Jit(t,e,n){const r=n.width/2,i=n.width*2,{x:s,y:a,width:o,height:l}=e,c=s+o,u=a+l;for(let h=s+r;h<c-r;h+=i)t.circle(h,a,r);for(let h=a+r;h<u-r;h+=i)t.circle(c,h,r);for(let h=c-r;h>s+r;h-=i)t.circle(h,u,r);for(let h=u-r;h>a+r;h-=i)t.circle(s,h,r);t.fill({color:n.color,alpha:n.alpha})}function Zit(t,e,n,r){const i=r.width/3,s=i/2,a=r.width-i/2,o=Math.max(0,r.radius-a);if(t.setStrokeStyle({width:i,color:r.color,alpha:r.alpha}),r.radius>0){const l=Math.max(0,r.radius-s);t.roundRect(s,s,e-i,n-i,l)}else t.rect(s,s,e-i,n-i);t.stroke(),o>0?t.roundRect(a,a,e-a*2,n-a*2,o):t.rect(a,a,e-a*2,n-a*2),t.stroke()}function Ft(t){return getComputedStyle(document.documentElement).getPropertyValue(t).trim()}function vl(t,e){if(!t)return e;if(t.startsWith("#")){const r=t.slice(1);if(r.length===3){const i=r.split("").map(s=>s+s).join("");return parseInt(i,16)}return parseInt(r,16)}const n=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(n){const r=parseInt(n[1],10),i=parseInt(n[2],10),s=parseInt(n[3],10);return r<<16|i<<8|s}return t.startsWith("color-mix")?est(t,e):e}function est(t,e){try{const n=document.createElement("div");n.style.color=t,n.style.display="none",document.body.appendChild(n);const r=getComputedStyle(n).color;return document.body.removeChild(n),vl(r,e)}catch{return e}}function Gh(t,e){const n=e/100,r=Math.round((t>>16&255)*n),i=Math.round((t>>8&255)*n),s=Math.round((t&255)*n);return r<<16|i<<8|s}function D3(t,e){const n=e/100,r=1-n,i=Math.round((t>>16&255)*n+255*r),s=Math.round((t>>8&255)*n+255*r),a=Math.round((t&255)*n+255*r);return i<<16|s<<8|a}const qu={primary:6770852,onPrimary:16777215,secondary:6445937,onSecondary:16777215,tertiary:8213088,onTertiary:16777215,error:11740702,onError:16777215,surfaceContainerHigh:15525616,surfaceContainerHighest:15130857,onSurface:1907488,outline:7959678,outlineVariant:13288656};function JV(){const t=vl(Ft("--primary"),qu.primary),e=vl(Ft("--on-primary"),qu.onPrimary),n=vl(Ft("--secondary"),qu.secondary),r=vl(Ft("--on-secondary"),qu.onSecondary),i=vl(Ft("--tertiary"),qu.tertiary),s=vl(Ft("--on-tertiary"),qu.onTertiary),a=vl(Ft("--error"),qu.error),o=vl(Ft("--on-error"),qu.onError),l=vl(Ft("--surface-container-high"),qu.surfaceContainerHigh),c=vl(Ft("--surface-container-highest"),qu.surfaceContainerHighest),u=vl(Ft("--on-surface"),qu.onSurface),h=vl(Ft("--outline"),qu.outline),f=vl(Ft("--outline-variant"),qu.outlineVariant);return{defaultBg:l,defaultBgHover:Gh(l,92),defaultBgPressed:Gh(l,88),defaultText:u,defaultBorder:f,primaryBg:t,primaryBgHover:Gh(t,92),primaryBgPressed:Gh(t,88),primaryText:e,secondaryBg:n,secondaryBgHover:Gh(n,92),secondaryBgPressed:Gh(n,88),secondaryText:r,tertiaryBg:i,tertiaryBgHover:Gh(i,92),tertiaryBgPressed:Gh(i,88),tertiaryText:s,errorBg:a,errorBgHover:Gh(a,92),errorBgPressed:Gh(a,88),errorText:o,surfaceBg:c,surfaceBgHover:Gh(c,92),surfaceBgPressed:Gh(c,88),surfaceText:u,surfaceBorder:f,outlineBg:16777215,outlineBgHover:D3(t,8),outlineBgPressed:D3(t,12),outlineText:t,outlineBorder:h,ghostBg:16777215,ghostBgHover:D3(t,8),ghostBgPressed:D3(t,12),ghostText:t}}function tst(){return vl(Ft("--outline-variant"),qu.outlineVariant)}function p8(t,e){switch(t){case"primary":return{bg:e.primaryBg,bgHover:e.primaryBgHover,bgPressed:e.primaryBgPressed,text:e.primaryText};case"secondary":return{bg:e.secondaryBg,bgHover:e.secondaryBgHover,bgPressed:e.secondaryBgPressed,text:e.secondaryText};case"tertiary":return{bg:e.tertiaryBg,bgHover:e.tertiaryBgHover,bgPressed:e.tertiaryBgPressed,text:e.tertiaryText};case"error":return{bg:e.errorBg,bgHover:e.errorBgHover,bgPressed:e.errorBgPressed,text:e.errorText};case"surface":return{bg:e.surfaceBg,bgHover:e.surfaceBgHover,bgPressed:e.surfaceBgPressed,text:e.surfaceText,border:e.surfaceBorder};case"outline":return{bg:e.outlineBg,bgHover:e.outlineBgHover,bgPressed:e.outlineBgPressed,text:e.outlineText,border:e.outlineBorder,bgAlpha:0};case"ghost":return{bg:e.ghostBg,bgHover:e.ghostBgHover,bgPressed:e.ghostBgPressed,text:e.ghostText,bgAlpha:0};case"default":default:return{bg:e.defaultBg,bgHover:e.defaultBgHover,bgPressed:e.defaultBgPressed,text:e.defaultText,border:e.defaultBorder}}}function Yt(t,e){if(!t)return e;const n=t.trim();if(n.endsWith("px"))return parseFloat(n)||e;if(n.endsWith("rem")){const i=parseFloat(n);return i?i*16:e}const r=parseFloat(n);return isNaN(r)?e:r}const nst={xs:{fontSize:"--text-2xs",paddingY:"--spacing-2xs",paddingX:"--spacing-sm",borderRadius:"--radius-sm"},sm:{fontSize:"--text-sm",paddingY:"--spacing",paddingX:"--spacing-md",borderRadius:"--radius-sm"},md:{fontSize:"--text-base",paddingY:"--spacing-sm",paddingX:"--spacing-xl",borderRadius:"--radius-md"},lg:{fontSize:"--text-lg",paddingY:"--spacing-md",paddingX:"--spacing-2xl",borderRadius:"--radius-lg"},xl:{fontSize:"--text-xl",paddingY:"--spacing-lg",paddingX:"--spacing-3xl",borderRadius:"--radius-lg"}},ZV={xs:{fontSize:10,paddingX:8,paddingY:2,borderRadius:4},sm:{fontSize:14,paddingX:12,paddingY:4,borderRadius:4},md:{fontSize:16,paddingX:24,paddingY:8,borderRadius:6},lg:{fontSize:18,paddingX:32,paddingY:12,borderRadius:8},xl:{fontSize:20,paddingX:40,paddingY:16,borderRadius:8}};function Rhe(t){const e=nst[t],n=ZV[t]||ZV.sm;if(!e)return n;const r=Yt(Ft(e.fontSize),n.fontSize),i=Yt(Ft(e.paddingX),n.paddingX),s=Yt(Ft(e.paddingY),n.paddingY),a=Yt(Ft(e.borderRadius),n.borderRadius);return{fontSize:r,paddingX:i,paddingY:s,borderRadius:a}}const rst={sm:{boxSize:"--spacing-lg",fontSize:"--text-sm"},md:{boxSize:"--spacing-xl",fontSize:"--text-sm"},lg:{boxSize:"--spacing-xl",fontSize:"--text-base"}},eW={sm:{boxSize:16,fontSize:14,gap:8},md:{boxSize:20,fontSize:14,gap:8},lg:{boxSize:24,fontSize:16,gap:8}};function ist(t){const e=rst[t],n=eW[t]||eW.md;if(!e)return n;const r=t==="md"?20:Yt(Ft(e.boxSize),n.boxSize),i=Yt(Ft(e.fontSize),n.fontSize),s=Yt(Ft("--spacing-sm"),n.gap);return{boxSize:r,fontSize:i,gap:s}}const sst={sm:{thumbSize:"--text-xl"},md:{thumbSize:"--text-2xl"},lg:{thumbSize:"--text-3xl"}},tW={sm:{trackHeight:24,trackWidth:1,thumbSize:20},md:{trackHeight:30,trackWidth:2,thumbSize:24},lg:{trackHeight:36,trackWidth:3,thumbSize:30}};function ast(t){const e=sst[t],n=tW[t]||tW.md;if(!e)return n;const r=Yt(Ft(e.thumbSize),n.thumbSize);return{trackHeight:n.trackHeight,trackWidth:n.trackWidth,thumbSize:r}}const ost={sm:{radioSize:"--text-lg",fontSize:"--text-sm"},md:{radioSize:"--text-xl",fontSize:"--text-base"},lg:{radioSize:"--text-2xl",fontSize:"--text-lg"}},nW={sm:{radioSize:18,fontSize:14,selectedBorderWidth:5,gap:8},md:{radioSize:20,fontSize:16,selectedBorderWidth:6,gap:8},lg:{radioSize:24,fontSize:18,selectedBorderWidth:7,gap:10}};function cO(t){const e=ost[t],n=nW[t]||nW.md;if(!e)return n;const r=Yt(Ft(e.radioSize),n.radioSize),i=Yt(Ft(e.fontSize),n.fontSize),s=Yt(Ft("--spacing-sm"),n.gap);return{radioSize:r,fontSize:i,selectedBorderWidth:n.selectedBorderWidth,gap:s}}const lst={sm:{fontSize:"--text-sm",borderRadius:"--radius-sm"},md:{fontSize:"--text-base",borderRadius:"--radius-md"},lg:{fontSize:"--text-lg",borderRadius:"--radius-lg"}},rW={sm:{width:200,barHeight:6,fontSize:14,borderRadius:4},md:{width:250,barHeight:10,fontSize:16,borderRadius:6},lg:{width:300,barHeight:14,fontSize:18,borderRadius:8}};function cst(t){const e=lst[t],n=rW[t]||rW.md;if(!e)return n;const r=Yt(Ft(e.fontSize),n.fontSize),i=Yt(Ft(e.borderRadius),n.borderRadius);return{width:n.width,barHeight:n.barHeight,fontSize:r,borderRadius:i}}const ust={sm:{labelSize:"--text-xs",fontSize:"--text-xs",paddingY:"--spacing-sm",paddingX:"--spacing"},md:{labelSize:"--text-sm",fontSize:"--text-sm",paddingY:"--spacing",paddingX:"--spacing-md"},lg:{labelSize:"--text-base",fontSize:"--text-base",paddingY:"--spacing-md",paddingX:"--spacing-lg"}},iW={sm:{fontSize:12,labelSize:12,paddingX:8,paddingY:6,borderRadius:6},md:{fontSize:14,labelSize:14,paddingX:12,paddingY:8,borderRadius:6},lg:{fontSize:16,labelSize:16,paddingX:16,paddingY:12,borderRadius:6}};function dst(t){const e=ust[t],n=iW[t]||iW.md;if(!e)return n;const r=Yt(Ft(e.fontSize),n.fontSize),i=Yt(Ft(e.labelSize),n.labelSize),s=Yt(Ft(e.paddingX),n.paddingX),a=Yt(Ft(e.paddingY),n.paddingY),o=Yt(Ft("--border-radius"),n.borderRadius);return{fontSize:r,labelSize:i,paddingX:s,paddingY:a,borderRadius:o}}const hst={sm:{labelSize:"--text-xs",fontSize:"--text-xs",paddingY:"--spacing-sm",paddingX:"--spacing"},md:{labelSize:"--text-sm",fontSize:"--text-sm",paddingY:"--spacing",paddingX:"--spacing-md"},lg:{labelSize:"--text-base",fontSize:"--text-base",paddingY:"--spacing-md",paddingX:"--spacing-lg"}},sW={sm:{fontSize:12,labelSize:12,paddingX:8,paddingY:6,chevronSize:20,borderRadius:6},md:{fontSize:14,labelSize:14,paddingX:12,paddingY:8,chevronSize:24,borderRadius:6},lg:{fontSize:16,labelSize:16,paddingX:16,paddingY:12,chevronSize:28,borderRadius:6}};function fst(t){const e=hst[t],n=sW[t]||sW.md;if(!e)return n;const r=Yt(Ft(e.fontSize),n.fontSize),i=Yt(Ft(e.labelSize),n.labelSize),s=Yt(Ft(e.paddingX),n.paddingX),a=Yt(Ft(e.paddingY),n.paddingY),o=Yt(Ft("--border-radius"),n.borderRadius);return{fontSize:r,labelSize:i,paddingX:s,paddingY:a,chevronSize:n.chevronSize,borderRadius:o}}const pst={sm:{fontSize:"--text-sm",paddingY:"--spacing",paddingX:"--spacing-md"},md:{fontSize:"--text-base",paddingY:"--spacing-sm",paddingX:"--spacing-xl"},lg:{fontSize:"--text-lg",paddingY:"--spacing-md",paddingX:"--spacing-2xl"}},aW={sm:{fontSize:14,paddingY:4,paddingX:12,borderRadius:6},md:{fontSize:16,paddingY:8,paddingX:20,borderRadius:8},lg:{fontSize:18,paddingY:12,paddingX:24,borderRadius:10}};function gst(t){const e=pst[t],n=aW[t]||aW.md;if(!e)return n;const r=Yt(Ft(e.fontSize),n.fontSize),i=Yt(Ft(e.paddingY),n.paddingY),s=Yt(Ft(e.paddingX),n.paddingX),a=Yt(Ft("--radius-md"),n.borderRadius);return{fontSize:r,paddingY:i,paddingX:s,borderRadius:a}}const oW={default:{background:16777215,border:13751771,text:3621201,selectedBackground:3900150,selectedBorder:3900150,selectedText:16777215,hoverBackground:15987958,pressedBackground:15067115},primary:{background:16777215,border:13751771,text:3621201,selectedBackground:3900150,selectedBorder:3900150,selectedText:16777215,hoverBackground:14412542,pressedBackground:12573694},secondary:{background:16777215,border:13751771,text:3621201,selectedBackground:6514417,selectedBorder:6514417,selectedText:16777215,hoverBackground:14739455,pressedBackground:13095678},surface:{background:16777215,border:13751771,text:3621201,selectedBackground:7041664,selectedBorder:7041664,selectedText:16777215,hoverBackground:15987958,pressedBackground:15067115}};function mst(t){const e=oW[t]||oW.default;return{background:vl(Ft("--color-white"),e.background),border:vl(Ft("--color-gray-300"),e.border),text:vl(Ft("--color-gray-700"),e.text),selectedBackground:e.selectedBackground,selectedBorder:e.selectedBorder,selectedText:e.selectedText,hoverBackground:e.hoverBackground,pressedBackground:e.pressedBackground}}const Ast={sm:{fontSize:"--text-xs",paddingY:"--spacing-sm",paddingX:"--spacing"},md:{fontSize:"--text-sm",paddingY:"--spacing",paddingX:"--spacing-md"},lg:{fontSize:"--text-base",paddingY:"--spacing-md",paddingX:"--spacing-lg"}},lW={sm:{fontSize:12,itemPaddingY:8,itemPaddingX:4,itemHeight:32,borderRadius:4,containerPadding:2,gap:2},md:{fontSize:14,itemPaddingY:4,itemPaddingX:12,itemHeight:40,borderRadius:8,containerPadding:4,gap:4},lg:{fontSize:16,itemPaddingY:12,itemPaddingX:16,itemHeight:48,borderRadius:8,containerPadding:8,gap:6}};function yst(t){const e=Ast[t],n=lW[t]||lW.md;if(!e)return n;const r=Yt(Ft(e.fontSize),n.fontSize),i=Yt(Ft(e.paddingY),n.itemPaddingY),s=Yt(Ft(e.paddingX),n.itemPaddingX),a=Yt(Ft("--radius-xs"),n.borderRadius);return{fontSize:r,itemPaddingY:i,itemPaddingX:s,itemHeight:r+i*2+4,borderRadius:a,containerPadding:n.containerPadding,gap:n.gap}}const cW={primary:{containerBackground:16777215,containerBorder:15067115,itemBackground:16777215,itemHoverBackground:15987958,itemSelectedBackground:14412542,textColor:3621201,selectedTextColor:1982639},secondary:{containerBackground:16777215,containerBorder:15067115,itemBackground:16777215,itemHoverBackground:15987958,itemSelectedBackground:14739455,textColor:3621201,selectedTextColor:3616931},tertiary:{containerBackground:16777215,containerBorder:15067115,itemBackground:16777215,itemHoverBackground:15987958,itemSelectedBackground:16574451,textColor:3621201,selectedTextColor:10295117},error:{containerBackground:16777215,containerBorder:16557477,itemBackground:16777215,itemHoverBackground:16708338,itemSelectedBackground:16704226,textColor:3621201,selectedTextColor:12131356},filled:{containerBackground:15987958,containerBorder:15987958,itemBackground:15987958,itemHoverBackground:15067115,itemSelectedBackground:14412542,textColor:3621201,selectedTextColor:1982639},surface:{containerBackground:16777215,containerBorder:15067115,itemBackground:16777215,itemHoverBackground:15987958,itemSelectedBackground:15987958,textColor:3621201,selectedTextColor:1120295}};function vst(t){return cW[t]||cW.primary}const xst={sm:{fontSize:"--text-sm",paddingX:"--spacing-md"},md:{fontSize:"--text-base",paddingX:"--spacing-md"},lg:{fontSize:"--text-lg",paddingX:"--spacing-lg"}},uW={sm:{fontSize:14,paddingY:2,paddingX:12,height:20,minWidth:20,dotSize:8},md:{fontSize:16,paddingY:8,paddingX:12,height:24,minWidth:24,dotSize:10},lg:{fontSize:18,paddingY:8,paddingX:16,height:28,minWidth:28,dotSize:12}};function bst(t){const e=xst[t],n=uW[t]||uW.md;if(!e)return n;const r=Yt(Ft(e.fontSize),n.fontSize),i=Yt(Ft(e.paddingX),n.paddingX);return{fontSize:r,paddingY:n.paddingY,paddingX:i,height:n.height,minWidth:n.minWidth,dotSize:n.dotSize}}const dW={default:{background:15067115,text:7041664},primary:{background:3900150,text:16777215},secondary:{background:6514417,text:16777215},tertiary:{background:15485081,text:16777215},error:{background:15680580,text:16777215},surface:{background:15987958,text:3621201}};function Cst(t){return dW[t]||dW.default}const Est={sm:{fontSize:"--text-sm",borderRadius:"--radius-sm"},md:{fontSize:"--text-base",borderRadius:"--radius-md"},lg:{fontSize:"--text-lg",borderRadius:"--radius-lg"}},hW={sm:{width:200,barHeight:6,borderRadius:4,fontSize:14,gap:4},md:{width:250,barHeight:10,borderRadius:8,fontSize:16,gap:4},lg:{width:300,barHeight:14,borderRadius:12,fontSize:18,gap:4}};function Sst(t){const e=Est[t],n=hW[t]||hW.md;if(!e)return n;const r=Yt(Ft(e.fontSize),n.fontSize),i=Yt(Ft(e.borderRadius),n.borderRadius);return{width:n.width,barHeight:n.barHeight,borderRadius:i,fontSize:r,gap:n.gap}}const fW={default:{trackColor:15067115,fillColor:3900150,labelColor:3621201,valueColor:7041664},primary:{trackColor:15067115,fillColor:3900150,labelColor:3621201,valueColor:7041664},secondary:{trackColor:15067115,fillColor:6514417,labelColor:3621201,valueColor:7041664},tertiary:{trackColor:15067115,fillColor:15485081,labelColor:3621201,valueColor:7041664},error:{trackColor:15067115,fillColor:15680580,labelColor:3621201,valueColor:7041664},surface:{trackColor:15067115,fillColor:7041664,labelColor:3621201,valueColor:7041664}};function wst(t){return fW[t]||fW.primary}const _st={sm:{margin:"--spacing-2"},md:{margin:"--spacing-4"},lg:{margin:"--spacing-6"}},pW={sm:{thickness:1,margin:4},md:{thickness:1,margin:8},lg:{thickness:2,margin:12}};function Ist(t){const e=_st[t],n=pW[t]||pW.md;if(!e)return n;const r=Yt(Ft(e.margin),n.margin);return{thickness:n.thickness,margin:r}}const gW={default:{color:13292508},primary:{color:3900150},secondary:{color:6514417},surface:{color:10265519}};function Bst(t){return gW[t]||gW.default}const Tst={sm:{fontSize:"--text-sm"},md:{fontSize:"--text-base"},lg:{fontSize:"--text-lg"}},mW={sm:{fontSize:14},md:{fontSize:16},lg:{fontSize:18}};function Mst(t){const e=Tst[t],n=mW[t]||mW.md;return e?{fontSize:Yt(Ft(e.fontSize),n.fontSize)}:n}const AW={default:{color:3900150,hoverColor:2450411,pressedColor:1920728},primary:{color:3900150,hoverColor:2450411,pressedColor:1920728},secondary:{color:6514417,hoverColor:5195493,pressedColor:4405450}};function Dst(t){return AW[t]||AW.primary}const Rst={sm:{fontSize:"--text-xs",gap:"--spacing-xs"},md:{fontSize:"--text-sm",gap:"--spacing"},lg:{fontSize:"--text-base",gap:"--spacing-sm"}},yW={sm:{fontSize:12,gap:4,padding:4},md:{fontSize:14,gap:8,padding:8},lg:{fontSize:16,gap:10,padding:12}};function Pst(t){const e=Rst[t],n=yW[t]||yW.md;if(!e)return n;const r=Yt(Ft(e.fontSize),n.fontSize),i=Yt(Ft(e.gap),n.gap);return{fontSize:r,gap:i,padding:n.padding}}const vW={default:{textColor:7041664,currentColor:3621201,separatorColor:10265519},primary:{textColor:7041664,currentColor:3900150,separatorColor:10265519},secondary:{textColor:7041664,currentColor:6514417,separatorColor:10265519},tertiary:{textColor:7041664,currentColor:15485081,separatorColor:10265519},error:{textColor:7041664,currentColor:15680580,separatorColor:10265519}};function kst(t){return vW[t]||vW.default}const Nst={sm:{padding:"--spacing-sm",borderRadius:"--radius-md"},md:{padding:"--spacing-md",borderRadius:"--radius-lg"},lg:{padding:"--spacing-lg",borderRadius:"--radius-xl"}},xW={sm:{padding:8,borderRadius:8},md:{padding:12,borderRadius:12},lg:{padding:16,borderRadius:16}};function Lst(t){const e=Nst[t],n=xW[t]||xW.md;if(!e)return n;const r=Yt(Ft(e.padding),n.padding),i=Yt(Ft(e.borderRadius),n.borderRadius);return{padding:r,borderRadius:i}}const bW={default:{backgroundColor:15987958,borderColor:13292508,textColor:3621201,hoverBgColor:15067115},primary:{backgroundColor:3900150,borderColor:3900150,textColor:16777215,hoverBgColor:2450411},secondary:{backgroundColor:6514417,borderColor:6514417,textColor:16777215,hoverBgColor:5195493},surface:{backgroundColor:16382715,borderColor:13292508,textColor:3621201,hoverBgColor:15987958},elevated:{backgroundColor:16777215,borderColor:0,textColor:3621201,hoverBgColor:16382715},outlined:{backgroundColor:16777215,borderColor:10265519,textColor:3621201,hoverBgColor:16382715}};function Fst(t){return bW[t]||bW.default}const jst={sm:{fontSize:"--text-xs",paddingX:"--spacing",paddingY:"--spacing-sm"},md:{fontSize:"--text-sm",paddingX:"--spacing-md",paddingY:"--spacing"},lg:{fontSize:"--text-base",paddingX:"--spacing-lg",paddingY:"--spacing-md"}},CW={sm:{fontSize:12,itemPaddingX:8,itemPaddingY:6,containerPadding:6,minWidth:120,borderRadius:6},md:{fontSize:14,itemPaddingX:12,itemPaddingY:8,containerPadding:8,minWidth:150,borderRadius:8},lg:{fontSize:16,itemPaddingX:16,itemPaddingY:12,containerPadding:12,minWidth:180,borderRadius:10}};function Ost(t){const e=jst[t],n=CW[t]||CW.md;if(!e)return n;const r=Yt(Ft(e.fontSize),n.fontSize),i=Yt(Ft(e.paddingX),n.itemPaddingX),s=Yt(Ft(e.paddingY),n.itemPaddingY);return{fontSize:r,itemPaddingX:i,itemPaddingY:s,containerPadding:n.containerPadding,minWidth:n.minWidth,borderRadius:n.borderRadius}}const EW={default:{backgroundColor:15987958,borderColor:13292508,textColor:3621201,hoverBgColor:14412542,hoverTextColor:1982639,separatorColor:13292508},primary:{backgroundColor:15987958,borderColor:3900150,textColor:3621201,hoverBgColor:14412542,hoverTextColor:1982639,separatorColor:3900150},secondary:{backgroundColor:15987958,borderColor:6514417,textColor:3621201,hoverBgColor:14739455,hoverTextColor:3616931,separatorColor:6514417},tertiary:{backgroundColor:15987958,borderColor:15485081,textColor:3621201,hoverBgColor:16574451,hoverTextColor:10295117,separatorColor:15485081},error:{backgroundColor:15987958,borderColor:15680580,textColor:3621201,hoverBgColor:16704226,hoverTextColor:10033947,separatorColor:15680580},filled:{backgroundColor:16382715,borderColor:0,textColor:3621201,hoverBgColor:15067115,hoverTextColor:3621201,separatorColor:10265519}};function zst(t){return EW[t]||EW.default}const $st={sm:{fontSize:"--text-xs",paddingX:"--spacing-md",paddingY:"--spacing-sm"},md:{fontSize:"--text-sm",paddingX:"--spacing-lg",paddingY:"--spacing"},lg:{fontSize:"--text-base",paddingX:"--spacing-xl",paddingY:"--spacing-md"}},SW={sm:{fontSize:12,tabPaddingX:12,tabPaddingY:6,indicatorHeight:2,panelPadding:12},md:{fontSize:14,tabPaddingX:16,tabPaddingY:8,indicatorHeight:3,panelPadding:16},lg:{fontSize:16,tabPaddingX:20,tabPaddingY:12,indicatorHeight:4,panelPadding:20}};function Qst(t){const e=$st[t],n=SW[t]||SW.md;if(!e)return n;const r=Yt(Ft(e.fontSize),n.fontSize),i=Yt(Ft(e.paddingX),n.tabPaddingX),s=Yt(Ft(e.paddingY),n.tabPaddingY);return{fontSize:r,tabPaddingX:i,tabPaddingY:s,indicatorHeight:n.indicatorHeight,panelPadding:n.panelPadding}}const wW={default:{textColor:7041664,selectedTextColor:3621201,indicatorColor:3900150,hoverBgColor:20,borderColor:13292508},primary:{textColor:7041664,selectedTextColor:3900150,indicatorColor:3900150,hoverBgColor:998438420,borderColor:13292508},secondary:{textColor:7041664,selectedTextColor:6514417,indicatorColor:6514417,hoverBgColor:1667690772,borderColor:13292508},tertiary:{textColor:7041664,selectedTextColor:15485081,indicatorColor:15485081,hoverBgColor:3964180756,borderColor:13292508}};function Ust(t){return wW[t]||wW.default}const Hst={sm:{fontSize:"--text-xs",labelSize:"--text-xs",paddingY:"--spacing-sm",paddingX:"--spacing"},md:{fontSize:"--text-sm",labelSize:"--text-sm",paddingY:"--spacing",paddingX:"--spacing-md"},lg:{fontSize:"--text-base",labelSize:"--text-base",paddingY:"--spacing-md",paddingX:"--spacing-lg"}},_W={sm:{fontSize:12,labelFontSize:12,buttonWidth:28,inputWidth:80,paddingX:8,paddingY:6,borderRadius:6},md:{fontSize:14,labelFontSize:14,buttonWidth:32,inputWidth:120,paddingX:12,paddingY:8,borderRadius:6},lg:{fontSize:16,labelFontSize:16,buttonWidth:40,inputWidth:160,paddingX:16,paddingY:12,borderRadius:8}};function Gst(t){const e=Hst[t],n=_W[t]||_W.md;if(!e)return n;const r=Yt(Ft(e.fontSize),n.fontSize),i=Yt(Ft(e.labelSize),n.labelFontSize),s=Yt(Ft(e.paddingX),n.paddingX),a=Yt(Ft(e.paddingY),n.paddingY);return{fontSize:r,labelFontSize:i,buttonWidth:n.buttonWidth,inputWidth:n.inputWidth,paddingX:s,paddingY:a,borderRadius:n.borderRadius}}const IW={default:{backgroundColor:15987958,borderColor:13292508,textColor:3621201,labelColor:3621201,buttonBgColor:15067115,buttonHoverBgColor:13751771,focusColor:3900150},primary:{backgroundColor:15987958,borderColor:3900150,textColor:3621201,labelColor:3900150,buttonBgColor:14412542,buttonHoverBgColor:12573694,focusColor:3900150},secondary:{backgroundColor:15987958,borderColor:6514417,textColor:3621201,labelColor:6514417,buttonBgColor:14739455,buttonHoverBgColor:13095678,focusColor:6514417},tertiary:{backgroundColor:15987958,borderColor:15485081,textColor:3621201,labelColor:15485081,buttonBgColor:16574451,buttonHoverBgColor:16502760,focusColor:15485081},error:{backgroundColor:15987958,borderColor:15680580,textColor:3621201,labelColor:15680580,buttonBgColor:16704226,buttonHoverBgColor:16698058,focusColor:15680580},filled:{backgroundColor:16382715,borderColor:13292508,textColor:3621201,labelColor:3621201,buttonBgColor:15067115,buttonHoverBgColor:13751771,focusColor:3900150}};function Vst(t){return IW[t]||IW.default}const Wst={sm:{fontSize:"--text-xs",labelSize:"--text-xs",paddingY:"--spacing-sm",paddingX:"--spacing"},md:{fontSize:"--text-sm",labelSize:"--text-sm",paddingY:"--spacing",paddingX:"--spacing-md"},lg:{fontSize:"--text-base",labelSize:"--text-base",paddingY:"--spacing-md",paddingX:"--spacing-lg"}},BW={sm:{fontSize:12,labelFontSize:12,inputWidth:160,paddingX:8,paddingY:6,clearButtonSize:20,borderRadius:6},md:{fontSize:14,labelFontSize:14,inputWidth:200,paddingX:12,paddingY:8,clearButtonSize:24,borderRadius:6},lg:{fontSize:16,labelFontSize:16,inputWidth:240,paddingX:16,paddingY:12,clearButtonSize:28,borderRadius:8}};function Kst(t){const e=Wst[t],n=BW[t]||BW.md;if(!e)return n;const r=Yt(Ft(e.fontSize),n.fontSize),i=Yt(Ft(e.labelSize),n.labelFontSize),s=Yt(Ft(e.paddingX),n.paddingX),a=Yt(Ft(e.paddingY),n.paddingY);return{fontSize:r,labelFontSize:i,inputWidth:n.inputWidth,paddingX:s,paddingY:a,clearButtonSize:n.clearButtonSize,borderRadius:n.borderRadius}}const TW={default:{backgroundColor:15987958,borderColor:13292508,textColor:3621201,labelColor:3621201,placeholderColor:10265519,clearButtonBgColor:15067115,clearButtonHoverBgColor:13751771,focusColor:3900150},primary:{backgroundColor:15987958,borderColor:3900150,textColor:3621201,labelColor:3900150,placeholderColor:10265519,clearButtonBgColor:14412542,clearButtonHoverBgColor:12573694,focusColor:3900150},secondary:{backgroundColor:15987958,borderColor:6514417,textColor:3621201,labelColor:6514417,placeholderColor:10265519,clearButtonBgColor:14739455,clearButtonHoverBgColor:13095678,focusColor:6514417},tertiary:{backgroundColor:15987958,borderColor:15485081,textColor:3621201,labelColor:15485081,placeholderColor:10265519,clearButtonBgColor:16574451,clearButtonHoverBgColor:16502760,focusColor:15485081},error:{backgroundColor:15987958,borderColor:15680580,textColor:3621201,labelColor:15680580,placeholderColor:10265519,clearButtonBgColor:16704226,clearButtonHoverBgColor:16698058,focusColor:15680580},filled:{backgroundColor:16382715,borderColor:13292508,textColor:3621201,labelColor:3621201,placeholderColor:10265519,clearButtonBgColor:15067115,clearButtonHoverBgColor:13751771,focusColor:3900150}};function qst(t){return TW[t]||TW.default}const Yst={sm:{fontSize:"--text-xs",labelSize:"--text-xs",paddingY:"--spacing-sm",paddingX:"--spacing",itemPaddingY:"--spacing-sm",itemPaddingX:"--spacing"},md:{fontSize:"--text-sm",labelSize:"--text-sm",paddingY:"--spacing",paddingX:"--spacing-md",itemPaddingY:"--spacing",itemPaddingX:"--spacing-md"},lg:{fontSize:"--text-base",labelSize:"--text-base",paddingY:"--spacing-md",paddingX:"--spacing-lg",itemPaddingY:"--spacing-md",itemPaddingX:"--spacing-lg"}},MW={sm:{fontSize:12,labelFontSize:12,inputWidth:160,paddingX:8,paddingY:6,buttonSize:20,itemPaddingX:8,itemPaddingY:6,borderRadius:6},md:{fontSize:14,labelFontSize:14,inputWidth:200,paddingX:12,paddingY:8,buttonSize:24,itemPaddingX:12,itemPaddingY:8,borderRadius:6},lg:{fontSize:16,labelFontSize:16,inputWidth:240,paddingX:16,paddingY:12,buttonSize:28,itemPaddingX:16,itemPaddingY:12,borderRadius:8}};function Xst(t){const e=Yst[t],n=MW[t]||MW.md;if(!e)return n;const r=Yt(Ft(e.fontSize),n.fontSize),i=Yt(Ft(e.labelSize),n.labelFontSize),s=Yt(Ft(e.paddingX),n.paddingX),a=Yt(Ft(e.paddingY),n.paddingY),o=Yt(Ft(e.itemPaddingX),n.itemPaddingX),l=Yt(Ft(e.itemPaddingY),n.itemPaddingY);return{fontSize:r,labelFontSize:i,inputWidth:n.inputWidth,paddingX:s,paddingY:a,buttonSize:n.buttonSize,itemPaddingX:o,itemPaddingY:l,borderRadius:n.borderRadius}}const DW={default:{backgroundColor:15987958,borderColor:13292508,textColor:3621201,labelColor:3621201,placeholderColor:10265519,buttonBgColor:15067115,buttonHoverBgColor:13751771,dropdownBgColor:15987958,itemHoverBgColor:15067115,itemSelectedBgColor:14412542,itemSelectedTextColor:1982639,focusColor:3900150},primary:{backgroundColor:15987958,borderColor:3900150,textColor:3621201,labelColor:3900150,placeholderColor:10265519,buttonBgColor:14412542,buttonHoverBgColor:12573694,dropdownBgColor:15987958,itemHoverBgColor:14412542,itemSelectedBgColor:12573694,itemSelectedTextColor:1982639,focusColor:3900150},secondary:{backgroundColor:15987958,borderColor:6514417,textColor:3621201,labelColor:6514417,placeholderColor:10265519,buttonBgColor:14739455,buttonHoverBgColor:13095678,dropdownBgColor:15987958,itemHoverBgColor:14739455,itemSelectedBgColor:13095678,itemSelectedTextColor:3616931,focusColor:6514417},tertiary:{backgroundColor:15987958,borderColor:15485081,textColor:3621201,labelColor:15485081,placeholderColor:10265519,buttonBgColor:16574451,buttonHoverBgColor:16502760,dropdownBgColor:15987958,itemHoverBgColor:16574451,itemSelectedBgColor:16502760,itemSelectedTextColor:10295117,focusColor:15485081},error:{backgroundColor:15987958,borderColor:15680580,textColor:3621201,labelColor:15680580,placeholderColor:10265519,buttonBgColor:16704226,buttonHoverBgColor:16698058,dropdownBgColor:15987958,itemHoverBgColor:16704226,itemSelectedBgColor:16698058,itemSelectedTextColor:10033947,focusColor:15680580},filled:{backgroundColor:16382715,borderColor:13292508,textColor:3621201,labelColor:3621201,placeholderColor:10265519,buttonBgColor:15067115,buttonHoverBgColor:13751771,dropdownBgColor:16382715,itemHoverBgColor:15067115,itemSelectedBgColor:14412542,itemSelectedTextColor:1982639,focusColor:3900150}};function Jst(t){return DW[t]||DW.default}const Zst={sm:{fontSize:"--text-xs",itemPaddingY:"--spacing-sm",itemPaddingX:"--spacing",listPadding:"--spacing-2xs",listGap:"--spacing-3xs"},md:{fontSize:"--text-sm",itemPaddingY:"--spacing",itemPaddingX:"--spacing-md",listPadding:"--spacing-xs",listGap:"--spacing-2xs"},lg:{fontSize:"--text-base",itemPaddingY:"--spacing-md",itemPaddingX:"--spacing-lg",listPadding:"--spacing-sm",listGap:"--spacing-xs"}},RW={sm:{fontSize:12,itemMinHeight:32,itemPaddingX:8,itemPaddingY:6,listPadding:4,listGap:2,borderRadius:6},md:{fontSize:14,itemMinHeight:40,itemPaddingX:12,itemPaddingY:8,listPadding:6,listGap:4,borderRadius:6},lg:{fontSize:16,itemMinHeight:48,itemPaddingX:16,itemPaddingY:12,listPadding:8,listGap:6,borderRadius:8}};function eat(t){const e=Zst[t],n=RW[t]||RW.md;if(!e)return n;const r=Yt(Ft(e.fontSize),n.fontSize),i=Yt(Ft(e.itemPaddingX),n.itemPaddingX),s=Yt(Ft(e.itemPaddingY),n.itemPaddingY),a=Yt(Ft(e.listPadding),n.listPadding),o=Yt(Ft(e.listGap),n.listGap);return{fontSize:r,itemMinHeight:n.itemMinHeight,itemPaddingX:i,itemPaddingY:s,listPadding:a,listGap:o,borderRadius:n.borderRadius}}const PW={default:{backgroundColor:15987958,borderColor:13292508,textColor:3621201,itemHoverBgColor:15067115,itemSelectedBgColor:14412542,itemSelectedTextColor:1982639,focusColor:3900150},primary:{backgroundColor:15987958,borderColor:3900150,textColor:3621201,itemHoverBgColor:14412542,itemSelectedBgColor:12573694,itemSelectedTextColor:1982639,focusColor:3900150},secondary:{backgroundColor:15987958,borderColor:6514417,textColor:3621201,itemHoverBgColor:14739455,itemSelectedBgColor:13095678,itemSelectedTextColor:3616931,focusColor:6514417},tertiary:{backgroundColor:15987958,borderColor:15485081,textColor:3621201,itemHoverBgColor:16574451,itemSelectedBgColor:16502760,itemSelectedTextColor:10295117,focusColor:15485081},error:{backgroundColor:15987958,borderColor:15680580,textColor:3621201,itemHoverBgColor:16704226,itemSelectedBgColor:16698058,itemSelectedTextColor:10033947,focusColor:15680580},filled:{backgroundColor:16382715,borderColor:0,textColor:3621201,itemHoverBgColor:15067115,itemSelectedBgColor:14412542,itemSelectedTextColor:1982639,focusColor:3900150}};function tat(t){return PW[t]||PW.default}const nat={sm:{fontSize:"--text-sm",paddingY:"--spacing-2xs",paddingX:"--spacing-sm"},md:{fontSize:"--text-base",paddingY:"--spacing-xs",paddingX:"--spacing-md"},lg:{fontSize:"--text-lg",paddingY:"--spacing-sm",paddingX:"--spacing-lg"}},kW={sm:{fontSize:14,tagPaddingX:8,tagPaddingY:4,tagGap:4,borderRadius:4},md:{fontSize:16,tagPaddingX:12,tagPaddingY:6,tagGap:4,borderRadius:6},lg:{fontSize:18,tagPaddingX:16,tagPaddingY:8,tagGap:6,borderRadius:8}};function rat(t){const e=nat[t],n=kW[t]||kW.md;if(!e)return n;const r=Yt(Ft(e.fontSize),n.fontSize),i=Yt(Ft(e.paddingX),n.tagPaddingX),s=Yt(Ft(e.paddingY),n.tagPaddingY);return{fontSize:r,tagPaddingX:i,tagPaddingY:s,tagGap:n.tagGap,borderRadius:n.borderRadius}}const NW={default:{backgroundColor:15067115,borderColor:13292508,textColor:3621201,hoverBgColor:13751771,selectedBgColor:3900150,selectedTextColor:16777215,removeButtonColor:7041664},primary:{backgroundColor:3900150,borderColor:3900150,textColor:16777215,hoverBgColor:2450411,selectedBgColor:1920728,selectedTextColor:16777215,removeButtonColor:16777215},secondary:{backgroundColor:6514417,borderColor:6514417,textColor:16777215,hoverBgColor:5195493,selectedBgColor:4405450,selectedTextColor:16777215,removeButtonColor:16777215},tertiary:{backgroundColor:15485081,borderColor:15485081,textColor:16777215,hoverBgColor:14362487,selectedBgColor:12458077,selectedTextColor:16777215,removeButtonColor:16777215},error:{backgroundColor:15680580,borderColor:15680580,textColor:16777215,hoverBgColor:14427686,selectedBgColor:12131356,selectedTextColor:16777215,removeButtonColor:16777215},surface:{backgroundColor:16382715,borderColor:13292508,textColor:3621201,hoverBgColor:15067115,selectedBgColor:13751771,selectedTextColor:3621201,removeButtonColor:7041664}};function iat(t){return NW[t]||NW.default}const sat={sm:{fontSize:"--text-xs",itemPaddingY:"--spacing-2xs",itemPaddingX:"--spacing-xs",treePadding:"--spacing-sm"},md:{fontSize:"--text-sm",itemPaddingY:"--spacing-xs",itemPaddingX:"--spacing-sm",treePadding:"--spacing"},lg:{fontSize:"--text-base",itemPaddingY:"--spacing-sm",itemPaddingX:"--spacing",treePadding:"--spacing-md"}},LW={sm:{fontSize:12,itemMinHeight:28,itemPaddingX:6,itemPaddingY:4,treePadding:8,treeGap:1,chevronSize:12,indentSize:16,borderRadius:4},md:{fontSize:14,itemMinHeight:32,itemPaddingX:8,itemPaddingY:6,treePadding:8,treeGap:4,chevronSize:16,indentSize:20,borderRadius:4},lg:{fontSize:16,itemMinHeight:40,itemPaddingX:12,itemPaddingY:8,treePadding:12,treeGap:6,chevronSize:20,indentSize:24,borderRadius:6}};function aat(t){const e=sat[t],n=LW[t]||LW.md;if(!e)return n;const r=Yt(Ft(e.fontSize),n.fontSize),i=Yt(Ft(e.itemPaddingX),n.itemPaddingX),s=Yt(Ft(e.itemPaddingY),n.itemPaddingY),a=Yt(Ft(e.treePadding),n.treePadding);return{fontSize:r,itemMinHeight:n.itemMinHeight,itemPaddingX:i,itemPaddingY:s,treePadding:a,treeGap:n.treeGap,chevronSize:n.chevronSize,indentSize:n.indentSize,borderRadius:n.borderRadius}}const FW={default:{backgroundColor:15987958,borderColor:13292508,textColor:3621201,itemHoverBgColor:20,itemSelectedBgColor:14412542,itemSelectedTextColor:1982639,chevronColor:7041664,focusColor:3900150},primary:{backgroundColor:15987958,borderColor:13292508,textColor:3621201,itemHoverBgColor:20,itemSelectedBgColor:14412542,itemSelectedTextColor:1982639,chevronColor:7041664,focusColor:3900150},secondary:{backgroundColor:15987958,borderColor:13292508,textColor:3621201,itemHoverBgColor:20,itemSelectedBgColor:14739455,itemSelectedTextColor:3616931,chevronColor:7041664,focusColor:6514417},tertiary:{backgroundColor:15987958,borderColor:13292508,textColor:3621201,itemHoverBgColor:20,itemSelectedBgColor:16574451,itemSelectedTextColor:10295117,chevronColor:7041664,focusColor:15485081}};function oat(t){return FW[t]||FW.default}const lat={sm:{fontSize:"--text-xs",cellPaddingY:"--spacing-sm",cellPaddingX:"--spacing"},md:{fontSize:"--text-sm",cellPaddingY:"--spacing",cellPaddingX:"--spacing-md"},lg:{fontSize:"--text-base",cellPaddingY:"--spacing-md",cellPaddingX:"--spacing-lg"}},jW={sm:{fontSize:12,headerFontSize:12,cellPaddingX:8,cellPaddingY:6,rowMinHeight:32,borderRadius:6},md:{fontSize:14,headerFontSize:14,cellPaddingX:12,cellPaddingY:8,rowMinHeight:40,borderRadius:6},lg:{fontSize:16,headerFontSize:16,cellPaddingX:16,cellPaddingY:12,rowMinHeight:48,borderRadius:8}};function cat(t){const e=lat[t],n=jW[t]||jW.md;if(!e)return n;const r=Yt(Ft(e.fontSize),n.fontSize),i=Yt(Ft(e.cellPaddingX),n.cellPaddingX),s=Yt(Ft(e.cellPaddingY),n.cellPaddingY);return{fontSize:r,headerFontSize:r,cellPaddingX:i,cellPaddingY:s,rowMinHeight:n.rowMinHeight,borderRadius:n.borderRadius}}const OW={default:{backgroundColor:15987958,borderColor:13292508,headerBgColor:15987958,headerTextColor:7041664,textColor:3621201,rowHoverBgColor:15067115,rowSelectedBgColor:14412542,rowSelectedTextColor:1982639,focusColor:3900150},primary:{backgroundColor:15987958,borderColor:3900150,headerBgColor:15987958,headerTextColor:7041664,textColor:3621201,rowHoverBgColor:15067115,rowSelectedBgColor:14412542,rowSelectedTextColor:1982639,focusColor:3900150},secondary:{backgroundColor:15987958,borderColor:6514417,headerBgColor:15987958,headerTextColor:7041664,textColor:3621201,rowHoverBgColor:15067115,rowSelectedBgColor:14739455,rowSelectedTextColor:3616931,focusColor:6514417},tertiary:{backgroundColor:15987958,borderColor:15485081,headerBgColor:15987958,headerTextColor:7041664,textColor:3621201,rowHoverBgColor:15067115,rowSelectedBgColor:16574451,rowSelectedTextColor:10295117,focusColor:15485081},error:{backgroundColor:15987958,borderColor:15680580,headerBgColor:15987958,headerTextColor:7041664,textColor:3621201,rowHoverBgColor:15067115,rowSelectedBgColor:16704226,rowSelectedTextColor:10033947,focusColor:15680580},filled:{backgroundColor:16382715,borderColor:0,headerBgColor:16382715,headerTextColor:7041664,textColor:3621201,rowHoverBgColor:15067115,rowSelectedBgColor:14412542,rowSelectedTextColor:1982639,focusColor:3900150}};function uat(t){return OW[t]||OW.default}const dat={sm:{fontSize:"--text-sm",padding:"--spacing-xs",gap:"--spacing-xs"},md:{fontSize:"--text-base",padding:"--spacing-sm",gap:"--spacing-sm"},lg:{fontSize:"--text-lg",padding:"--spacing",gap:"--spacing"}},zW={sm:{fontSize:14,padding:4,gap:4,chevronSize:12,panelIndent:20,borderRadius:4},md:{fontSize:16,padding:8,gap:8,chevronSize:16,panelIndent:32,borderRadius:6},lg:{fontSize:18,padding:8,gap:8,chevronSize:20,panelIndent:44,borderRadius:8}};function Phe(t){const e=dat[t],n=zW[t]||zW.md;return e?{fontSize:Yt(Ft(e.fontSize),n.fontSize),padding:Yt(Ft(e.padding),n.padding),gap:Yt(Ft(e.gap),n.gap),chevronSize:n.chevronSize,panelIndent:n.panelIndent,borderRadius:n.borderRadius}:n}const $W={default:{backgroundColor:15987958,borderColor:13292508,textColor:3621201,triggerHoverBgColor:20,expandedBgColor:15987958,panelTextColor:7041664,focusColor:3900150},primary:{backgroundColor:15987958,borderColor:3900150,textColor:3900150,triggerHoverBgColor:998438420,expandedBgColor:998438410,panelTextColor:7041664,focusColor:3900150},secondary:{backgroundColor:15987958,borderColor:6514417,textColor:6514417,triggerHoverBgColor:1667690772,expandedBgColor:1667690762,panelTextColor:7041664,focusColor:6514417}};function khe(t){return $W[t]||$W.default}const hat={sm:{fontSize:"--text-2xs",paddingX:"--spacing-xs",paddingY:"--spacing-2xs"},md:{fontSize:"--text-xs",paddingX:"--spacing",paddingY:"--spacing-xs"},lg:{fontSize:"--text-sm",paddingX:"--spacing-sm",paddingY:"--spacing-xs"}},QW={sm:{fontSize:10,paddingX:4,paddingY:2,maxWidth:120,borderRadius:4},md:{fontSize:12,paddingX:8,paddingY:4,maxWidth:150,borderRadius:4},lg:{fontSize:14,paddingX:8,paddingY:4,maxWidth:200,borderRadius:4}};function fat(t){const e=hat[t],n=QW[t]||QW.md;return e?{fontSize:Yt(Ft(e.fontSize),n.fontSize),paddingX:Yt(Ft(e.paddingX),n.paddingX),paddingY:Yt(Ft(e.paddingY),n.paddingY),maxWidth:n.maxWidth,borderRadius:n.borderRadius}:n}const UW={default:{backgroundColor:3621201,textColor:16777215,arrowColor:3621201},primary:{backgroundColor:3900150,textColor:16777215,arrowColor:3900150},secondary:{backgroundColor:6514417,textColor:16777215,arrowColor:6514417},tertiary:{backgroundColor:15485081,textColor:16777215,arrowColor:15485081},error:{backgroundColor:15680580,textColor:16777215,arrowColor:15680580},filled:{backgroundColor:16382715,textColor:3621201,arrowColor:16382715}};function pat(t){return UW[t]||UW.default}const gat={sm:{fontSize:"--text-sm"},md:{fontSize:"--text-base"},lg:{fontSize:"--text-lg"}},HW={sm:{fontSize:14,maxWidth:200,borderRadius:8,padding:12},md:{fontSize:16,maxWidth:250,borderRadius:12,padding:16},lg:{fontSize:18,maxWidth:320,borderRadius:16,padding:20}};function mat(t){const e=gat[t],n=HW[t]||HW.md;return e?{fontSize:Yt(Ft(e.fontSize),n.fontSize),maxWidth:n.maxWidth,borderRadius:n.borderRadius,padding:n.padding}:n}const GW={default:{backgroundColor:15987958,borderColor:13292508,textColor:3621201,arrowFillColor:15987958,arrowStrokeColor:13292508,shadowColor:38},primary:{backgroundColor:15987958,borderColor:3900150,textColor:3621201,arrowFillColor:15987958,arrowStrokeColor:3900150,shadowColor:38},secondary:{backgroundColor:15987958,borderColor:6514417,textColor:3621201,arrowFillColor:15987958,arrowStrokeColor:6514417,shadowColor:38},tertiary:{backgroundColor:15987958,borderColor:15485081,textColor:3621201,arrowFillColor:15987958,arrowStrokeColor:15485081,shadowColor:38},error:{backgroundColor:15987958,borderColor:15680580,textColor:3621201,arrowFillColor:15987958,arrowStrokeColor:15680580,shadowColor:38},filled:{backgroundColor:16382715,borderColor:0,textColor:3621201,arrowFillColor:16382715,arrowStrokeColor:0,shadowColor:38}};function Aat(t){return GW[t]||GW.default}const yat={sm:{fontSize:"--text-sm",titleFontSize:"--text-lg",padding:"--spacing-md"},md:{fontSize:"--text-base",titleFontSize:"--text-xl",padding:"--spacing-lg"},lg:{fontSize:"--text-lg",titleFontSize:"--text-2xl",padding:"--spacing-xl"}},VW={sm:{fontSize:14,titleFontSize:18,padding:12,borderRadius:12,minWidth:280},md:{fontSize:16,titleFontSize:20,padding:16,borderRadius:16,minWidth:320},lg:{fontSize:18,titleFontSize:24,padding:24,borderRadius:20,minWidth:400}};function vat(t){const e=yat[t],n=VW[t]||VW.md;return e?{fontSize:Yt(Ft(e.fontSize),n.fontSize),titleFontSize:Yt(Ft(e.titleFontSize),n.titleFontSize),padding:Yt(Ft(e.padding),n.padding),borderRadius:n.borderRadius,minWidth:n.minWidth}:n}const WW={default:{backgroundColor:15987958,borderColor:0,titleColor:3621201,textColor:3621201,backdropColor:128},primary:{backgroundColor:15987958,borderColor:3900150,titleColor:3900150,textColor:3621201,backdropColor:128},secondary:{backgroundColor:15987958,borderColor:6514417,titleColor:6514417,textColor:3621201,backdropColor:128},tertiary:{backgroundColor:15987958,borderColor:15485081,titleColor:15485081,textColor:3621201,backdropColor:128},error:{backgroundColor:15987958,borderColor:15680580,titleColor:15680580,textColor:3621201,backdropColor:128},filled:{backgroundColor:16382715,borderColor:0,titleColor:3621201,textColor:3621201,backdropColor:128}};function xat(t){return WW[t]||WW.default}const bat={sm:{size:"--text-sm"},md:{size:"--text-lg"},lg:{size:"--text-2xl"}},KW={sm:{width:14,height:14,borderRadius:4,borderWidth:1},md:{width:18,height:18,borderRadius:6,borderWidth:1},lg:{width:24,height:24,borderRadius:8,borderWidth:2}};function Cat(t){const e=bat[t],n=KW[t]||KW.md;if(!e)return n;const r=Yt(Ft(e.size),n.width);return{width:r,height:r,borderRadius:n.borderRadius,borderWidth:n.borderWidth}}const qW={default:{borderColor:13292508,checkerColor:15067115,selectedBorderColor:3900150},primary:{borderColor:3900150,checkerColor:15067115,selectedBorderColor:3900150},secondary:{borderColor:6514417,checkerColor:15067115,selectedBorderColor:6514417},tertiary:{borderColor:15485081,checkerColor:15067115,selectedBorderColor:15485081},error:{borderColor:15680580,checkerColor:15067115,selectedBorderColor:15680580}};function Eat(t){return qW[t]||qW.default}const YW={sm:{trackWidth:160,trackHeight:20,thumbSize:16,thumbBorderWidth:2,borderRadius:10},md:{trackWidth:192,trackHeight:28,thumbSize:20,thumbBorderWidth:2,borderRadius:14},lg:{trackWidth:240,trackHeight:36,thumbSize:24,thumbBorderWidth:3,borderRadius:18}};function Sat(t){return YW[t]||YW.md}const XW={default:{thumbBorderColor:16777215,thumbInnerBorderColor:51,focusRingColor:3900150},primary:{thumbBorderColor:16777215,thumbInnerBorderColor:998438451,focusRingColor:3900150},secondary:{thumbBorderColor:16777215,thumbInnerBorderColor:1667690803,focusRingColor:6514417},tertiary:{thumbBorderColor:16777215,thumbInnerBorderColor:3964180787,focusRingColor:15485081},error:{thumbBorderColor:16777215,thumbInnerBorderColor:4014228531,focusRingColor:15680580}};function wat(t){return XW[t]||XW.default}const _at={sm:{fontSize:"--text-sm",height:"--spacing-xl",padding:"--spacing-xs"},md:{fontSize:"--text-base",height:"--spacing-2xl",padding:"--spacing-sm"},lg:{fontSize:"--text-lg",height:"--spacing-3xl",padding:"--spacing-md"}},JW={sm:{fontSize:14,height:32,padding:4,gap:2,borderRadius:6,segmentPadding:2},md:{fontSize:16,height:40,padding:8,gap:4,borderRadius:8,segmentPadding:4},lg:{fontSize:18,height:48,padding:12,gap:6,borderRadius:10,segmentPadding:6}};function Iat(t){const e=_at[t],n=JW[t]||JW.md;return e?{fontSize:Yt(Ft(e.fontSize),n.fontSize),height:Yt(Ft(e.height),n.height),padding:Yt(Ft(e.padding),n.padding),gap:n.gap,borderRadius:n.borderRadius,segmentPadding:n.segmentPadding}:n}const ZW={default:{backgroundColor:16777215,borderColor:13292508,textColor:3621201,placeholderColor:10265519,focusBorderColor:3900150,segmentSelectedBg:3900150,segmentSelectedText:16777215},primary:{backgroundColor:16777215,borderColor:3900150,textColor:3621201,placeholderColor:10265519,focusBorderColor:3900150,segmentSelectedBg:3900150,segmentSelectedText:16777215},secondary:{backgroundColor:16777215,borderColor:6514417,textColor:3621201,placeholderColor:10265519,focusBorderColor:6514417,segmentSelectedBg:6514417,segmentSelectedText:16777215},tertiary:{backgroundColor:16777215,borderColor:15485081,textColor:3621201,placeholderColor:10265519,focusBorderColor:15485081,segmentSelectedBg:15485081,segmentSelectedText:16777215},error:{backgroundColor:16777215,borderColor:15680580,textColor:3621201,placeholderColor:10265519,focusBorderColor:15680580,segmentSelectedBg:15680580,segmentSelectedText:16777215},filled:{backgroundColor:15987958,borderColor:0,textColor:3621201,placeholderColor:10265519,focusBorderColor:3900150,segmentSelectedBg:3900150,segmentSelectedText:16777215}};function Bat(t){return ZW[t]||ZW.default}const Tat={sm:{fontSize:"--text-sm",height:"--spacing-xl",padding:"--spacing-xs"},md:{fontSize:"--text-base",height:"--spacing-2xl",padding:"--spacing-sm"},lg:{fontSize:"--text-lg",height:"--spacing-3xl",padding:"--spacing-md"}},eK={sm:{fontSize:14,height:32,padding:4,gap:2,borderRadius:6,segmentPadding:2},md:{fontSize:16,height:40,padding:8,gap:4,borderRadius:8,segmentPadding:4},lg:{fontSize:18,height:48,padding:12,gap:6,borderRadius:10,segmentPadding:6}};function Mat(t){const e=Tat[t],n=eK[t]||eK.md;return e?{fontSize:Yt(Ft(e.fontSize),n.fontSize),height:Yt(Ft(e.height),n.height),padding:Yt(Ft(e.padding),n.padding),gap:n.gap,borderRadius:n.borderRadius,segmentPadding:n.segmentPadding}:n}const tK={default:{backgroundColor:16777215,borderColor:13292508,textColor:3621201,placeholderColor:10265519,focusBorderColor:3900150,segmentSelectedBg:3900150,segmentSelectedText:16777215},primary:{backgroundColor:16777215,borderColor:3900150,textColor:3621201,placeholderColor:10265519,focusBorderColor:3900150,segmentSelectedBg:3900150,segmentSelectedText:16777215},secondary:{backgroundColor:16777215,borderColor:6514417,textColor:3621201,placeholderColor:10265519,focusBorderColor:6514417,segmentSelectedBg:6514417,segmentSelectedText:16777215},tertiary:{backgroundColor:16777215,borderColor:15485081,textColor:3621201,placeholderColor:10265519,focusBorderColor:15485081,segmentSelectedBg:15485081,segmentSelectedText:16777215},error:{backgroundColor:16777215,borderColor:15680580,textColor:3621201,placeholderColor:10265519,focusBorderColor:15680580,segmentSelectedBg:15680580,segmentSelectedText:16777215},filled:{backgroundColor:15987958,borderColor:0,textColor:3621201,placeholderColor:10265519,focusBorderColor:3900150,segmentSelectedBg:3900150,segmentSelectedText:16777215}};function Dat(t){return tK[t]||tK.default}const nK={sm:{width:144,height:144,thumbSize:16,thumbBorderWidth:2,borderRadius:8},md:{width:192,height:192,thumbSize:20,thumbBorderWidth:2,borderRadius:10},lg:{width:256,height:256,thumbSize:24,thumbBorderWidth:3,borderRadius:12}};function Rat(t){return nK[t]||nK.md}const rK={default:{borderColor:13292508,thumbBorderColor:16777215,thumbInnerBorderColor:51,focusRingColor:3900150},primary:{borderColor:3900150,thumbBorderColor:16777215,thumbInnerBorderColor:998438451,focusRingColor:3900150},secondary:{borderColor:6514417,thumbBorderColor:16777215,thumbInnerBorderColor:1667690803,focusRingColor:6514417},tertiary:{borderColor:15485081,thumbBorderColor:16777215,thumbInnerBorderColor:3964180787,focusRingColor:15485081},error:{borderColor:15680580,thumbBorderColor:16777215,thumbInnerBorderColor:4014228531,focusRingColor:15680580}};function Pat(t){return rK[t]||rK.default}const kat={sm:{fontSize:"--text-sm",headerFontSize:"--text-base"},md:{fontSize:"--text-base",headerFontSize:"--text-lg"},lg:{fontSize:"--text-lg",headerFontSize:"--text-xl"}},iK={sm:{fontSize:14,headerFontSize:16,cellSize:28,padding:8,gap:2,borderRadius:8,buttonSize:24},md:{fontSize:16,headerFontSize:18,cellSize:36,padding:12,gap:4,borderRadius:10,buttonSize:28},lg:{fontSize:18,headerFontSize:20,cellSize:44,padding:16,gap:6,borderRadius:12,buttonSize:32}};function uO(t){const e=kat[t],n=iK[t]||iK.md;return e?{fontSize:Yt(Ft(e.fontSize),n.fontSize),headerFontSize:Yt(Ft(e.headerFontSize),n.headerFontSize),cellSize:n.cellSize,padding:n.padding,gap:n.gap,borderRadius:n.borderRadius,buttonSize:n.buttonSize}:n}const sK={default:{backgroundColor:16777215,borderColor:13292508,headerColor:3621201,textColor:3621201,weekdayColor:7041664,disabledColor:13751771,todayBorderColor:3900150,selectedBgColor:3900150,selectedTextColor:16777215,hoverBgColor:15987958,outsideMonthColor:10265519},primary:{backgroundColor:16777215,borderColor:3900150,headerColor:3900150,textColor:3621201,weekdayColor:7041664,disabledColor:13751771,todayBorderColor:3900150,selectedBgColor:3900150,selectedTextColor:16777215,hoverBgColor:15726335,outsideMonthColor:10265519},secondary:{backgroundColor:16777215,borderColor:6514417,headerColor:6514417,textColor:3621201,weekdayColor:7041664,disabledColor:13751771,todayBorderColor:6514417,selectedBgColor:6514417,selectedTextColor:16777215,hoverBgColor:15659775,outsideMonthColor:10265519},tertiary:{backgroundColor:16777215,borderColor:15485081,headerColor:15485081,textColor:3621201,weekdayColor:7041664,disabledColor:13751771,todayBorderColor:15485081,selectedBgColor:15485081,selectedTextColor:16777215,hoverBgColor:16642808,outsideMonthColor:10265519},error:{backgroundColor:16777215,borderColor:15680580,headerColor:15680580,textColor:3621201,weekdayColor:7041664,disabledColor:13751771,todayBorderColor:15680580,selectedBgColor:15680580,selectedTextColor:16777215,hoverBgColor:16708338,outsideMonthColor:10265519},filled:{backgroundColor:16382715,borderColor:0,headerColor:3621201,textColor:3621201,weekdayColor:7041664,disabledColor:13751771,todayBorderColor:3900150,selectedBgColor:3900150,selectedTextColor:16777215,hoverBgColor:15987958,outsideMonthColor:10265519}};function dO(t){return sK[t]||sK.default}const aK={sm:{outerRadius:72,innerRadius:56,thumbSize:16,thumbBorderWidth:2},md:{outerRadius:96,innerRadius:72,thumbSize:20,thumbBorderWidth:2},lg:{outerRadius:128,innerRadius:96,thumbSize:24,thumbBorderWidth:3}};function Nat(t){return aK[t]||aK.md}const oK={default:{thumbBorderColor:16777215,thumbInnerBorderColor:51,focusRingColor:3900150},primary:{thumbBorderColor:16777215,thumbInnerBorderColor:998438451,focusRingColor:3900150},secondary:{thumbBorderColor:16777215,thumbInnerBorderColor:1667690803,focusRingColor:6514417},tertiary:{thumbBorderColor:16777215,thumbInnerBorderColor:3964180787,focusRingColor:15485081},error:{thumbBorderColor:16777215,thumbInnerBorderColor:4014228531,focusRingColor:15680580}};function Lat(t){return oK[t]||oK.default}const Fat={sm:{fontSize:"--text-sm"},md:{fontSize:"--text-base"},lg:{fontSize:"--text-lg"}},lK={sm:{fieldHeight:32,fieldPadding:8,fieldFontSize:14,fieldBorderRadius:6,buttonSize:28,calendarWidth:260,calendarCellSize:28,gap:8},md:{fieldHeight:40,fieldPadding:12,fieldFontSize:16,fieldBorderRadius:8,buttonSize:32,calendarWidth:300,calendarCellSize:36,gap:12},lg:{fieldHeight:48,fieldPadding:16,fieldFontSize:18,fieldBorderRadius:10,buttonSize:40,calendarWidth:360,calendarCellSize:44,gap:16}};function jat(t){const e=Fat[t],n=lK[t]||lK.md;return e?{...n,fieldFontSize:Yt(Ft(e.fontSize),n.fieldFontSize)}:n}const cK={default:{fieldBackgroundColor:16777215,fieldBorderColor:13292508,fieldTextColor:3621201,fieldPlaceholderColor:10265519,buttonBackgroundColor:15987958,buttonIconColor:3621201,focusBorderColor:3900150,popoverBackgroundColor:16777215,popoverBorderColor:13292508},primary:{fieldBackgroundColor:16777215,fieldBorderColor:3900150,fieldTextColor:3621201,fieldPlaceholderColor:10265519,buttonBackgroundColor:15726335,buttonIconColor:3900150,focusBorderColor:3900150,popoverBackgroundColor:16777215,popoverBorderColor:3900150},secondary:{fieldBackgroundColor:16777215,fieldBorderColor:6514417,fieldTextColor:3621201,fieldPlaceholderColor:10265519,buttonBackgroundColor:15659775,buttonIconColor:6514417,focusBorderColor:6514417,popoverBackgroundColor:16777215,popoverBorderColor:6514417},tertiary:{fieldBackgroundColor:16777215,fieldBorderColor:15485081,fieldTextColor:3621201,fieldPlaceholderColor:10265519,buttonBackgroundColor:16642808,buttonIconColor:15485081,focusBorderColor:15485081,popoverBackgroundColor:16777215,popoverBorderColor:15485081},error:{fieldBackgroundColor:16777215,fieldBorderColor:15680580,fieldTextColor:3621201,fieldPlaceholderColor:10265519,buttonBackgroundColor:16708338,buttonIconColor:15680580,focusBorderColor:15680580,popoverBackgroundColor:16777215,popoverBorderColor:15680580},filled:{fieldBackgroundColor:15987958,fieldBorderColor:0,fieldTextColor:3621201,fieldPlaceholderColor:10265519,buttonBackgroundColor:15067115,buttonIconColor:3621201,focusBorderColor:3900150,popoverBackgroundColor:16777215,popoverBorderColor:13292508}};function Oat(t){return cK[t]||cK.default}const uK={sm:{areaSize:144,sliderWidth:144,sliderHeight:20,swatchSize:20,thumbSize:16,padding:8,gap:8,borderRadius:8},md:{areaSize:192,sliderWidth:192,sliderHeight:28,swatchSize:24,thumbSize:20,padding:12,gap:12,borderRadius:10},lg:{areaSize:256,sliderWidth:256,sliderHeight:36,swatchSize:32,thumbSize:24,padding:16,gap:16,borderRadius:12}};function zat(t){return uK[t]||uK.md}const dK={default:{backgroundColor:16777215,borderColor:13292508,thumbBorderColor:16777215,thumbInnerBorderColor:51,focusRingColor:3900150,labelColor:3621201},primary:{backgroundColor:16777215,borderColor:3900150,thumbBorderColor:16777215,thumbInnerBorderColor:998438451,focusRingColor:3900150,labelColor:3621201},secondary:{backgroundColor:16777215,borderColor:6514417,thumbBorderColor:16777215,thumbInnerBorderColor:1667690803,focusRingColor:6514417,labelColor:3621201},tertiary:{backgroundColor:16777215,borderColor:15485081,thumbBorderColor:16777215,thumbInnerBorderColor:3964180787,focusRingColor:15485081,labelColor:3621201},error:{backgroundColor:16777215,borderColor:15680580,thumbBorderColor:16777215,thumbInnerBorderColor:4014228531,focusRingColor:15680580,labelColor:3621201}};function $at(t){return dK[t]||dK.default}const Qat={sm:{fontSize:"--text-sm"},md:{fontSize:"--text-base"},lg:{fontSize:"--text-lg"}},hK={sm:{fieldHeight:32,fieldPadding:8,fieldFontSize:14,fieldBorderRadius:6,buttonSize:28,calendarWidth:520,calendarCellSize:28,gap:8,separatorWidth:16},md:{fieldHeight:40,fieldPadding:12,fieldFontSize:16,fieldBorderRadius:8,buttonSize:32,calendarWidth:600,calendarCellSize:36,gap:12,separatorWidth:24},lg:{fieldHeight:48,fieldPadding:16,fieldFontSize:18,fieldBorderRadius:10,buttonSize:40,calendarWidth:720,calendarCellSize:44,gap:16,separatorWidth:32}};function Uat(t){const e=Qat[t],n=hK[t]||hK.md;return e?{...n,fieldFontSize:Yt(Ft(e.fontSize),n.fieldFontSize)}:n}const fK={default:{fieldBackgroundColor:16777215,fieldBorderColor:13292508,fieldTextColor:3621201,fieldPlaceholderColor:10265519,buttonBackgroundColor:15987958,buttonIconColor:3621201,focusBorderColor:3900150,popoverBackgroundColor:16777215,popoverBorderColor:13292508,rangeBgColor:15726335,rangeTextColor:3621201,separatorColor:10265519},primary:{fieldBackgroundColor:16777215,fieldBorderColor:3900150,fieldTextColor:3621201,fieldPlaceholderColor:10265519,buttonBackgroundColor:15726335,buttonIconColor:3900150,focusBorderColor:3900150,popoverBackgroundColor:16777215,popoverBorderColor:3900150,rangeBgColor:15726335,rangeTextColor:3621201,separatorColor:3900150},secondary:{fieldBackgroundColor:16777215,fieldBorderColor:6514417,fieldTextColor:3621201,fieldPlaceholderColor:10265519,buttonBackgroundColor:15659775,buttonIconColor:6514417,focusBorderColor:6514417,popoverBackgroundColor:16777215,popoverBorderColor:6514417,rangeBgColor:15659775,rangeTextColor:3621201,separatorColor:6514417},tertiary:{fieldBackgroundColor:16777215,fieldBorderColor:15485081,fieldTextColor:3621201,fieldPlaceholderColor:10265519,buttonBackgroundColor:16642808,buttonIconColor:15485081,focusBorderColor:15485081,popoverBackgroundColor:16777215,popoverBorderColor:15485081,rangeBgColor:16642808,rangeTextColor:3621201,separatorColor:15485081},error:{fieldBackgroundColor:16777215,fieldBorderColor:15680580,fieldTextColor:3621201,fieldPlaceholderColor:10265519,buttonBackgroundColor:16708338,buttonIconColor:15680580,focusBorderColor:15680580,popoverBackgroundColor:16777215,popoverBorderColor:15680580,rangeBgColor:16708338,rangeTextColor:3621201,separatorColor:15680580},filled:{fieldBackgroundColor:15987958,fieldBorderColor:0,fieldTextColor:3621201,fieldPlaceholderColor:10265519,buttonBackgroundColor:15067115,buttonIconColor:3621201,focusBorderColor:3900150,popoverBackgroundColor:16777215,popoverBorderColor:13292508,rangeBgColor:15726335,rangeTextColor:3621201,separatorColor:10265519}};function Hat(t){return fK[t]||fK.default}const pK={sm:{fontSize:12,height:32,padding:6,paddingX:10,borderRadius:6,labelFontSize:12,descriptionFontSize:11,gap:4},md:{fontSize:14,height:40,padding:8,paddingX:12,borderRadius:8,labelFontSize:14,descriptionFontSize:12,gap:6},lg:{fontSize:16,height:48,padding:10,paddingX:14,borderRadius:10,labelFontSize:16,descriptionFontSize:14,gap:8}};function Nhe(t){return pK[t]||pK.md}const DM={default:{backgroundColor:16777215,borderColor:13292508,textColor:3621201,placeholderColor:10265519,labelColor:3621201,descriptionColor:7041664,focusBorderColor:3900150,errorBorderColor:15680580,errorTextColor:15680580,disabledBackgroundColor:15987958,disabledTextColor:10265519},primary:{backgroundColor:16777215,borderColor:3900150,textColor:3621201,placeholderColor:10265519,labelColor:3900150,descriptionColor:7041664,focusBorderColor:2450411,errorBorderColor:15680580,errorTextColor:15680580,disabledBackgroundColor:15987958,disabledTextColor:10265519},secondary:{backgroundColor:16777215,borderColor:6514417,textColor:3621201,placeholderColor:10265519,labelColor:6514417,descriptionColor:7041664,focusBorderColor:5195493,errorBorderColor:15680580,errorTextColor:15680580,disabledBackgroundColor:15987958,disabledTextColor:10265519},filled:{backgroundColor:15987958,borderColor:0,textColor:3621201,placeholderColor:10265519,labelColor:3621201,descriptionColor:7041664,focusBorderColor:3900150,errorBorderColor:15680580,errorTextColor:15680580,disabledBackgroundColor:15067115,disabledTextColor:10265519}};function Gat(t){return DM[t]||DM.default}const gK={sm:{trackWidth:36,trackHeight:20,thumbSize:16,thumbOffset:2,borderRadius:10,labelFontSize:12,gap:8},md:{trackWidth:44,trackHeight:24,thumbSize:20,thumbOffset:2,borderRadius:12,labelFontSize:14,gap:10},lg:{trackWidth:52,trackHeight:28,thumbSize:24,thumbOffset:2,borderRadius:14,labelFontSize:16,gap:12}};function Lhe(t){return gK[t]||gK.md}const mK={default:{trackColor:15067115,trackSelectedColor:3900150,thumbColor:16777215,thumbBorderColor:13292508,labelColor:3621201,focusRingColor:3900150,disabledTrackColor:15987958,disabledThumbColor:15067115},primary:{trackColor:15067115,trackSelectedColor:3900150,thumbColor:16777215,thumbBorderColor:13292508,labelColor:3621201,focusRingColor:3900150,disabledTrackColor:15987958,disabledThumbColor:15067115},secondary:{trackColor:15067115,trackSelectedColor:6514417,thumbColor:16777215,thumbBorderColor:13292508,labelColor:3621201,focusRingColor:6514417,disabledTrackColor:15987958,disabledThumbColor:15067115},tertiary:{trackColor:15067115,trackSelectedColor:15485081,thumbColor:16777215,thumbBorderColor:13292508,labelColor:3621201,focusRingColor:15485081,disabledTrackColor:15987958,disabledThumbColor:15067115},error:{trackColor:15067115,trackSelectedColor:15680580,thumbColor:16777215,thumbBorderColor:13292508,labelColor:3621201,focusRingColor:15680580,disabledTrackColor:15987958,disabledThumbColor:15067115}};function Vat(t){return mK[t]||mK.default}const AK={sm:{fontSize:12,minHeight:64,padding:8,paddingX:10,borderRadius:6,labelFontSize:12,descriptionFontSize:11,gap:4,lineHeight:1.4},md:{fontSize:14,minHeight:80,padding:10,paddingX:12,borderRadius:8,labelFontSize:14,descriptionFontSize:12,gap:6,lineHeight:1.5},lg:{fontSize:16,minHeight:96,padding:12,paddingX:14,borderRadius:10,labelFontSize:16,descriptionFontSize:14,gap:8,lineHeight:1.6}};function Wat(t){return AK[t]||AK.md}function Kat(t){return DM[t]||DM.default}const yK={sm:{padding:12,gap:12,borderRadius:8,labelFontSize:12,sectionGap:16},md:{padding:16,gap:16,borderRadius:10,labelFontSize:14,sectionGap:24},lg:{padding:20,gap:20,borderRadius:12,labelFontSize:16,sectionGap:32}};function qat(t){return yK[t]||yK.md}const vK={default:{backgroundColor:16777215,borderColor:13292508,labelColor:3621201,separatorColor:15067115},primary:{backgroundColor:16777215,borderColor:3900150,labelColor:3900150,separatorColor:15726335},secondary:{backgroundColor:16777215,borderColor:6514417,labelColor:6514417,separatorColor:15659775},filled:{backgroundColor:16382715,borderColor:0,labelColor:3621201,separatorColor:15067115}};function Yat(t){return vK[t]||vK.default}const xK={sm:{height:36,padding:6,gap:4,borderRadius:6,separatorWidth:1,separatorHeight:20},md:{height:44,padding:8,gap:6,borderRadius:8,separatorWidth:1,separatorHeight:24},lg:{height:52,padding:10,gap:8,borderRadius:10,separatorWidth:1,separatorHeight:28}};function Xat(t){return xK[t]||xK.md}const bK={default:{backgroundColor:16777215,borderColor:13292508,separatorColor:15067115,iconColor:3621201,hoverBackgroundColor:15987958},primary:{backgroundColor:15726335,borderColor:3900150,separatorColor:12573694,iconColor:3900150,hoverBackgroundColor:14412542},secondary:{backgroundColor:15659775,borderColor:6514417,separatorColor:13095678,iconColor:6514417,hoverBackgroundColor:14739455},filled:{backgroundColor:15987958,borderColor:0,separatorColor:15067115,iconColor:3621201,hoverBackgroundColor:15067115}};function Jat(t){return bK[t]||bK.default}const CK={sm:{fontSize:12,height:32,padding:6,paddingX:12,borderRadius:6,iconSize:14,gap:6},md:{fontSize:14,height:40,padding:8,paddingX:16,borderRadius:8,iconSize:16,gap:8},lg:{fontSize:16,height:48,padding:10,paddingX:20,borderRadius:10,iconSize:18,gap:10}};function Zat(t){return CK[t]||CK.md}const EK={default:{backgroundColor:16777215,borderColor:13292508,textColor:3621201,iconColor:7041664,hoverBackgroundColor:15987958,focusRingColor:3900150},primary:{backgroundColor:3900150,borderColor:3900150,textColor:16777215,iconColor:16777215,hoverBackgroundColor:2450411,focusRingColor:3900150},secondary:{backgroundColor:6514417,borderColor:6514417,textColor:16777215,iconColor:16777215,hoverBackgroundColor:5195493,focusRingColor:6514417},surface:{backgroundColor:15987958,borderColor:0,textColor:3621201,iconColor:7041664,hoverBackgroundColor:15067115,focusRingColor:3900150}};function eot(t){return EK[t]||EK.default}const SK={sm:{minHeight:80,padding:16,borderRadius:8,borderWidth:2,iconSize:24,fontSize:12,labelFontSize:14,gap:8},md:{minHeight:120,padding:24,borderRadius:10,borderWidth:2,iconSize:32,fontSize:14,labelFontSize:16,gap:12},lg:{minHeight:160,padding:32,borderRadius:12,borderWidth:2,iconSize:40,fontSize:16,labelFontSize:18,gap:16}};function tot(t){return SK[t]||SK.md}const wK={default:{backgroundColor:16448250,borderColor:13292508,textColor:7041664,labelColor:3621201,iconColor:10265519,hoverBackgroundColor:15987958,hoverBorderColor:10265519,dropTargetBackgroundColor:15726335,dropTargetBorderColor:3900150},primary:{backgroundColor:15726335,borderColor:9684477,textColor:3900150,labelColor:1920728,iconColor:6333946,hoverBackgroundColor:14412542,hoverBorderColor:3900150,dropTargetBackgroundColor:14412542,dropTargetBorderColor:2450411},secondary:{backgroundColor:15659775,borderColor:10859772,textColor:6514417,labelColor:4405450,iconColor:8490232,hoverBackgroundColor:14739455,hoverBorderColor:6514417,dropTargetBackgroundColor:14739455,dropTargetBorderColor:5195493}};function not(t){return wK[t]||wK.default}const _K={sm:{height:16,borderRadius:4,avatarSize:32,lineHeight:12,lineGap:8},md:{height:20,borderRadius:6,avatarSize:40,lineHeight:16,lineGap:10},lg:{height:24,borderRadius:8,avatarSize:48,lineHeight:20,lineGap:12}};function rot(t){return _K[t]||_K.md}const IK={default:{baseColor:15067115,shimmerColor:15987958,borderRadius:6},primary:{baseColor:14412542,shimmerColor:15726335,borderRadius:6},secondary:{baseColor:14739455,shimmerColor:15659775,borderRadius:6}};function iot(t){return IK[t]||IK.default}const BK={sm:{fontSize:12,padding:8,paddingX:12,borderRadius:6,iconSize:16,gap:8,maxWidth:320,dismissButtonSize:20},md:{fontSize:14,padding:10,paddingX:14,borderRadius:8,iconSize:18,gap:10,maxWidth:400,dismissButtonSize:24},lg:{fontSize:16,padding:12,paddingX:16,borderRadius:10,iconSize:20,gap:12,maxWidth:480,dismissButtonSize:28}};function sot(t){return BK[t]||BK.md}const TK={info:{backgroundColor:16777215,borderColor:3900150,textColor:3621201,accentColor:3900150,iconColor:3900150,dismissButtonColor:7041664,shadowColor:0},success:{backgroundColor:16777215,borderColor:2278750,textColor:3621201,accentColor:2278750,iconColor:2278750,dismissButtonColor:7041664,shadowColor:0},warning:{backgroundColor:16777215,borderColor:15381256,textColor:3621201,accentColor:15381256,iconColor:15381256,dismissButtonColor:7041664,shadowColor:0},error:{backgroundColor:16777215,borderColor:15680580,textColor:3621201,accentColor:15680580,iconColor:15680580,dismissButtonColor:7041664,shadowColor:0}};function aot(t){return TK[t]||TK.info}const MK={sm:{fontSize:12,buttonSize:28,padding:4,gap:4,borderRadius:4},md:{fontSize:14,buttonSize:32,padding:6,gap:6,borderRadius:6},lg:{fontSize:16,buttonSize:40,padding:8,gap:8,borderRadius:8}};function oot(t){return MK[t]||MK.md}const DK={default:{backgroundColor:15987958,textColor:3621201,currentBackgroundColor:3900150,currentTextColor:16777215,hoverBackgroundColor:15067115,disabledTextColor:10265519,borderColor:13292508,ellipsisColor:7041664},primary:{backgroundColor:15726335,textColor:3621201,currentBackgroundColor:3900150,currentTextColor:16777215,hoverBackgroundColor:14412542,disabledTextColor:10265519,borderColor:9684477,ellipsisColor:3900150},secondary:{backgroundColor:15659775,textColor:3621201,currentBackgroundColor:6514417,currentTextColor:16777215,hoverBackgroundColor:14739455,disabledTextColor:10265519,borderColor:10859772,ellipsisColor:6514417}};function lot(t){return DK[t]||DK.default}const RK={sm:{fontSize:12,height:28,padding:6,borderRadius:4,maxWidth:100,labelFontSize:11,gap:4},md:{fontSize:14,height:32,padding:8,borderRadius:6,maxWidth:120,labelFontSize:12,gap:6},lg:{fontSize:16,height:40,padding:10,borderRadius:8,maxWidth:140,labelFontSize:14,gap:8}};function cot(t){return RK[t]||RK.md}const PK={default:{backgroundColor:16777215,borderColor:13292508,textColor:3621201,labelColor:3621201,focusBorderColor:3900150,errorBorderColor:15680580,disabledBackgroundColor:15987958},primary:{backgroundColor:16777215,borderColor:3900150,textColor:3621201,labelColor:3900150,focusBorderColor:2450411,errorBorderColor:15680580,disabledBackgroundColor:15987958},secondary:{backgroundColor:16777215,borderColor:6514417,textColor:3621201,labelColor:6514417,focusBorderColor:5195493,errorBorderColor:15680580,disabledBackgroundColor:15987958},filled:{backgroundColor:15987958,borderColor:0,textColor:3621201,labelColor:3621201,focusBorderColor:3900150,errorBorderColor:15680580,disabledBackgroundColor:15067115}};function uot(t){return PK[t]||PK.default}const kK={sm:{swatchSize:24,gap:6,borderRadius:4,selectionBorderWidth:2},md:{swatchSize:32,gap:8,borderRadius:4,selectionBorderWidth:2},lg:{swatchSize:40,gap:10,borderRadius:6,selectionBorderWidth:3}};function dot(t){return kK[t]||kK.md}const NK={default:{selectionOuterColor:0,selectionInnerColor:16777215,focusRingColor:3900150,disabledOpacity:.2},primary:{selectionOuterColor:3900150,selectionInnerColor:16777215,focusRingColor:3900150,disabledOpacity:.2},secondary:{selectionOuterColor:6514417,selectionInnerColor:16777215,focusRingColor:6514417,disabledOpacity:.2}};function hot(t){return NK[t]||NK.default}const LK={sm:{padding:8,gap:6,borderRadius:4,labelFontSize:10,labelPadding:4},md:{padding:12,gap:8,borderRadius:6,labelFontSize:12,labelPadding:6},lg:{padding:16,gap:10,borderRadius:8,labelFontSize:14,labelPadding:8}};function fot(t){return LK[t]||LK.md}const FK={default:{borderColor:13292508,hoverBorderColor:998438528,focusBorderColor:3900150,labelBackgroundColor:16777215,labelTextColor:7041664,disabledOpacity:.5},primary:{borderColor:9684477,hoverBorderColor:3900150,focusBorderColor:2450411,labelBackgroundColor:16777215,labelTextColor:3900150,disabledOpacity:.5},secondary:{borderColor:10859772,hoverBorderColor:6514417,focusBorderColor:5195493,labelBackgroundColor:16777215,labelTextColor:6514417,disabledOpacity:.5}};function pot(t){return FK[t]||FK.default}const jK={sm:{minHeight:60,padding:12,borderWidth:2,borderRadius:6,iconSize:32,labelFontSize:12,descriptionFontSize:10,gap:8},md:{minHeight:80,padding:16,borderWidth:2,borderRadius:8,iconSize:48,labelFontSize:14,descriptionFontSize:12,gap:10},lg:{minHeight:100,padding:20,borderWidth:2,borderRadius:10,iconSize:56,labelFontSize:16,descriptionFontSize:14,gap:12}};function got(t){return jK[t]||jK.md}const OK={default:{backgroundColor:16448250,borderColor:13292508,emptyBorderColor:10265519,textColor:7041664,iconBackgroundColor:15067115,iconColor:10265519,hoverBorderColor:3900150,selectedBorderColor:3900150,requiredBorderColor:15381256,requiredBadgeBackgroundColor:16708551,requiredBadgeTextColor:11817737},primary:{backgroundColor:15726335,borderColor:9684477,emptyBorderColor:6333946,textColor:3900150,iconBackgroundColor:14412542,iconColor:6333946,hoverBorderColor:3900150,selectedBorderColor:2450411,requiredBorderColor:15381256,requiredBadgeBackgroundColor:16708551,requiredBadgeTextColor:11817737},secondary:{backgroundColor:15659775,borderColor:10859772,emptyBorderColor:8490232,textColor:6514417,iconBackgroundColor:14739455,iconColor:8490232,hoverBorderColor:6514417,selectedBorderColor:5195493,requiredBorderColor:15381256,requiredBadgeBackgroundColor:16708551,requiredBadgeTextColor:11817737}};function mot(t){return OK[t]||OK.default}class Aot{frameCount=0;lastTime=0;frameTimes=[];rafId=null;config;constructor(e={}){this.config={sampleInterval:e.sampleInterval??1e3,sampleCount:e.sampleCount??60,autoUpdate:e.autoUpdate??!0}}start(){this.rafId===null&&(this.lastTime=performance.now(),this.frameCount=0,this.frameTimes=[],this.config.autoUpdate&&this.tick())}stop(){this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null)}tick=()=>{const e=performance.now(),n=e-this.lastTime;this.frameCount++,this.frameTimes.push(n),this.frameTimes.length>this.config.sampleCount&&this.frameTimes.shift(),(this.frameCount>=60||n>=this.config.sampleInterval)&&(this.updateMetrics(),this.frameCount=0),this.lastTime=e,this.rafId=requestAnimationFrame(this.tick)};updateMetrics(){const e=this.frameTimes.length>0?this.frameTimes.reduce((r,i)=>r+i,0)/this.frameTimes.length:16.67,n=1e3/e;El.getState().updateGPUMetrics({lastFrameTime:e,averageFps:Math.min(60,Math.round(n))})}markFrame(){const e=performance.now(),n=e-this.lastTime;this.frameCount++,this.frameTimes.push(n),this.frameTimes.length>this.config.sampleCount&&this.frameTimes.shift(),this.lastTime=e}getFPS(){if(this.frameTimes.length===0)return 60;const e=this.frameTimes.reduce((n,r)=>n+r,0)/this.frameTimes.length;return Math.min(60,Math.round(1e3/e))}getFrameTime(){return this.frameTimes.length===0?16.67:this.frameTimes[this.frameTimes.length-1]}getAverageFrameTime(){return this.frameTimes.length===0?16.67:this.frameTimes.reduce((e,n)=>e+n,0)/this.frameTimes.length}}new Aot;function zK({element:t,onClick:e}){mn(pn);const n=t.props?.style,r=C.useMemo(()=>lO(n),[n]),{transform:i,fill:s,borderRadius:a}=r,o=C.useMemo(()=>J4(n),[n]),l=C.useMemo(()=>{const A=t.props,x=A?.children||A?.text||A?.label;return x?String(x):""},[t.props]),c=C.useMemo(()=>new bn({fontFamily:n?.fontFamily||"Pretendard, sans-serif",fontSize:typeof n?.fontSize=="number"?n.fontSize:14,fontWeight:n?.fontWeight||"normal",fill:wr(n?.color,0),align:"center"}),[n]),u=C.useMemo(()=>Lb(n),[n]),h=C.useCallback(A=>{cs(A,{width:i.width,height:i.height,backgroundColor:s.color,backgroundAlpha:s.alpha,borderRadius:typeof a=="number"?a:a?.[0]??0,border:o})},[i.width,i.height,s.color,s.alpha,a,o]),f=C.useCallback(A=>{const x=A,E=x?.metaKey??x?.nativeEvent?.metaKey??!1,w=x?.shiftKey??x?.nativeEvent?.shiftKey??!1,B=x?.ctrlKey??x?.nativeEvent?.ctrlKey??!1;e?.(t.id,{metaKey:E,shiftKey:w,ctrlKey:B})},[t.id,e]),p=C.useMemo(()=>Mhe(i.width,i.height,u),[i.width,i.height,u]),m=p.x+p.width/2,v=p.y+p.height/2;return d.jsxs("pixiContainer",{x:i.x,y:i.y,children:[d.jsx("pixiGraphics",{draw:h,eventMode:"static",cursor:"pointer",onPointerDown:f}),l&&d.jsx("pixiText",{text:l,style:c,x:m,y:v,anchor:.5})]})}function yot(t){if(!t||t==="none")return{underline:!1,lineThrough:!1,overline:!1};const e=t.toLowerCase();return{underline:e.includes("underline"),lineThrough:e.includes("line-through"),overline:e.includes("overline")}}function vot({element:t,isSelected:e,onClick:n,onDoubleClick:r}){mn(pn);const i=t.props?.style,s=C.useMemo(()=>lO(i),[i]),{transform:a,fill:o,text:l,borderRadius:c}=s,u=C.useMemo(()=>J4(i),[i]),h=C.useMemo(()=>{const R=t.props,k=String(R?.children||R?.text||R?.label||t.tag);return $it(k,i?.textTransform)},[t.props,t.tag,i?.textTransform]),f=C.useMemo(()=>yot(i?.textDecoration),[i?.textDecoration]),p=f.underline||f.lineThrough||f.overline,m=C.useRef(null),v=C.useMemo(()=>new bn({fontFamily:l.fontFamily,fontSize:l.fontSize,fontWeight:l.fontWeight,fontStyle:l.fontStyle,fill:l.fill,align:l.align,letterSpacing:l.letterSpacing,leading:l.leading,wordWrap:l.wordWrap,wordWrapWidth:l.wordWrapWidth||a.width}),[l,a.width]),A=C.useCallback(R=>{if(R.clear(),!p||!m.current)return;const k=m.current.getBounds(),L=k.width,F=k.height,z=l.fontSize,G=l.fill,V=Math.max(1,Math.floor(z/12));if(R.setStrokeStyle({width:V,color:G,alpha:1}),f.underline){const q=F*.85;R.moveTo(0,q),R.lineTo(L,q),R.stroke()}if(f.lineThrough){const q=F*.45;R.moveTo(0,q),R.lineTo(L,q),R.stroke()}if(f.overline){const q=V;R.moveTo(0,q),R.lineTo(L,q),R.stroke()}},[p,l.fontSize,l.fill,f]),x=typeof c=="number"?c:c?.[0]??0,E=C.useCallback(R=>{if((!i?.backgroundColor||i.backgroundColor==="transparent")&&!u&&!x){R.clear();return}cs(R,{width:a.width,height:a.height,backgroundColor:o.color,backgroundAlpha:o.alpha,borderRadius:x,border:u})},[i?.backgroundColor,a.width,a.height,o.color,o.alpha,x,u]),w=C.useCallback(R=>{const k=R,L=k?.metaKey??k?.nativeEvent?.metaKey??!1,F=k?.shiftKey??k?.nativeEvent?.shiftKey??!1,z=k?.ctrlKey??k?.nativeEvent?.ctrlKey??!1;n?.(t.id,{metaKey:L,shiftKey:F,ctrlKey:z})},[t.id,n]),B=C.useRef(0),D=C.useCallback(R=>{const k=Date.now(),L=!!r&&k-B.current<300;B.current=k,w(R),L&&r?.(t.id)},[t.id,w,r]),T=C.useMemo(()=>Lb(i),[i]),M=C.useCallback(R=>{m.current=R},[]);return d.jsxs("pixiContainer",{x:a.x,y:a.y,children:[d.jsx("pixiGraphics",{draw:E,eventMode:"static",cursor:"text",onPointerDown:D}),d.jsx("pixiText",{ref:M,text:h,style:v,x:T.left,y:T.top}),p&&d.jsx("pixiGraphics",{draw:A,x:T.left,y:T.top})]})}const xot=15067115;function bot({element:t,isSelected:e,onClick:n}){mn(pn);const r=t.props?.style,i=C.useMemo(()=>lO(r),[r]),{transform:s,borderRadius:a}=i,o=C.useMemo(()=>J4(r),[r]),l=typeof a=="number"?a:a?.[0]??0,c=C.useMemo(()=>Lb(r),[r]),u=C.useMemo(()=>Mhe(s.width,s.height,c),[s.width,s.height,c]),h=C.useMemo(()=>{const T=t.props;return String(T?.src||T?.source||"")},[t.props]),[f,p]=C.useState(null),[m,v]=C.useState(null);C.useEffect(()=>{if(!h)return;let T=!1;return Hw.load(h).then(M=>{T||(p({src:h,texture:M}),v(null))}).catch(M=>{T||(console.warn(`[ImageSprite] Failed to load: ${h}`,M),v(h),p(null))}),()=>{T=!0}},[h]);const A=f?.src===h?f.texture:null,x=m===h,E=!!h&&!A&&!x,w=C.useCallback(T=>{cs(T,{width:s.width,height:s.height,backgroundColor:xot,backgroundAlpha:1,borderRadius:l,border:o});const M=Math.min(u.width,u.height)*.3,R=u.x+(u.width-M)/2,k=u.y+(u.height-M)/2;x?(T.setStrokeStyle({width:3,color:15680580}),T.moveTo(R,k),T.lineTo(R+M,k+M),T.moveTo(R+M,k),T.lineTo(R,k+M),T.stroke()):(T.moveTo(R,k+M),T.lineTo(R+M*.3,k+M*.5),T.lineTo(R+M*.5,k+M*.7),T.lineTo(R+M*.7,k+M*.3),T.lineTo(R+M,k+M),T.closePath(),T.fill({color:10265519,alpha:1}),T.circle(R+M*.7,k+M*.25,M*.1),T.fill({color:10265519,alpha:1}))},[s.width,s.height,l,o,x,u]),B=C.useCallback(T=>{T.clear()},[s]),D=C.useCallback(T=>{const M=T,R=M?.metaKey??M?.nativeEvent?.metaKey??!1,k=M?.shiftKey??M?.nativeEvent?.shiftKey??!1,L=M?.ctrlKey??M?.nativeEvent?.ctrlKey??!1;n?.(t.id,{metaKey:R,shiftKey:k,ctrlKey:L})},[t.id,n]);return d.jsxs("pixiContainer",{x:s.x,y:s.y,children:[A&&!x?d.jsxs(d.Fragment,{children:[d.jsx("pixiSprite",{texture:A,x:u.x,y:u.y,width:u.width,height:u.height,eventMode:"static",cursor:"pointer",onPointerDown:D}),d.jsx("pixiGraphics",{draw:B})]}):d.jsx("pixiGraphics",{draw:w,eventMode:"static",cursor:"pointer",onPointerDown:D}),E&&d.jsx("pixiGraphics",{draw:T=>{T.clear();const M=Math.min(u.width,u.height)*.2,R=u.x+u.width/2,k=u.y+u.height/2;T.circle(R,k,M),T.fill({color:3900150,alpha:.3})}})]})}function hO(){const[t,e]=C.useState(()=>JV()),n=C.useCallback(()=>{e(JV())},[]);return C.useEffect(()=>{const r=new MutationObserver(a=>{for(const o of a)if(o.type==="attributes"&&(o.attributeName==="data-theme"||o.attributeName==="data-builder-theme"||o.attributeName==="class")){requestAnimationFrame(()=>{n()});break}});r.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme","data-builder-theme","class"]}),r.observe(document.body,{attributes:!0,attributeFilter:["data-theme","data-builder-theme","class"]});const i=window.matchMedia("(prefers-color-scheme: dark)"),s=()=>{requestAnimationFrame(()=>{n()})};return i.addEventListener("change",s),()=>{r.disconnect(),i.removeEventListener("change",s)}},[n]),t}const Cot=32,Eot=24,Sot={fontSize:14,paddingX:12,paddingY:4,borderRadius:4};function wot(t,e,n,r){const i=e.size||"sm",s=!!e.isDisabled,a=!!e.isLoading,o=Rhe(i)||Sot,l=ot(t?.fontSize,void 0,o.fontSize),c=t?.fontFamily||"Pretendard, sans-serif",u=ot(t?.paddingTop,void 0,o.paddingY),h=ot(t?.paddingRight,void 0,o.paddingX),f=ot(t?.paddingBottom,void 0,o.paddingY),p=ot(t?.paddingLeft,void 0,o.paddingX),m=ot(t?.borderRadius,void 0,o.borderRadius);ot(t?.borderWidth,void 0,r.border?1:0);const v=t?.backgroundColor!==void 0,A=t?.color!==void 0,x=v?wr(t?.backgroundColor,r.bg):r.bg,E=r.bgAlpha!==void 0?r.bgAlpha:1,w=A?wr(t?.color,r.text):r.text;let B,D;v?(B=Math.min(x+1381653,16777215),D=Math.max(x-1381653,0)):(B=r.bgHover,D=r.bgPressed);const T=r.border??null,M=new bn({fontSize:l,fontFamily:c}),R=os.measureText(n,M),k=R.width,L=R.height,F=p+k+h,z=u+L+f,G=ot(t?.width,void 0,0),V=ot(t?.height,void 0,0),q=!t?.width||t?.width==="auto"||G<F,O=!t?.height||t?.height==="auto"||V<z;let H,K;return q?(H=F,H=Math.max(H,Cot)):H=G,O?(K=z,K=Math.max(K,Eot)):K=V,{left:ot(t?.left,void 0,0),top:ot(t?.top,void 0,0),width:H,height:K,backgroundColor:x,backgroundAlpha:E,hoverColor:B,pressedColor:D,textColor:w,borderColor:T,borderRadius:m,fontSize:l,fontFamily:c,isDisabled:s,isLoading:a}}function EN(t,e,n,r,i){const s=new _i,a=i?.alpha??1,o=i?.borderColor,l=i?.borderWidth;return cs(s,{width:t,height:e,backgroundColor:n,backgroundAlpha:a,borderRadius:r,border:o!=null?{width:l,color:o,alpha:1,style:"solid",radius:r}:null}),s}function _ot(t,e,n){const r=new _i;return cs(r,{width:t,height:e,backgroundColor:16777215,backgroundAlpha:.5,borderRadius:n}),r}function Iot(t,e){const n=new _i,r=3,i=8,s=t/2,a=e/2;for(let o=-1;o<=1;o++)n.circle(s+o*i,a,r);return n.fill({color:16777215,alpha:.8}),n}const Bot=C.memo(function({element:e,onClick:n}){mn(pn);const r=e.props?.style,i=e.props,s=hO(),a=C.useMemo(()=>{const A=i?.variant||"default";return p8(A,s)},[i?.variant,s]),o=C.useMemo(()=>i?.isLoading?"":String(i?.children||i?.text||i?.label||"Button"),[i?.children,i?.text,i?.label,i?.isLoading]),l=C.useMemo(()=>wot(r,i||{},o||"Button",a),[r,i,o,a]),c=C.useRef(null),u=C.useRef(null),h=C.useRef(null),f=C.useRef(null);C.useEffect(()=>{const A=c.current;if(!A)return;u.current&&(A.removeChild(u.current),u.current.destroy(),u.current=null),h.current&&(A.removeChild(h.current),h.current.destroy(),h.current=null),f.current&&(A.removeChild(f.current),f.current.destroy(),f.current=null);const x={alpha:l.backgroundAlpha,borderColor:l.borderColor,borderWidth:1},E=EN(l.width,l.height,l.backgroundColor,l.borderRadius,x),w=EN(l.width,l.height,l.hoverColor,l.borderRadius,x),B=EN(l.width,l.height,l.pressedColor,l.borderRadius,x),D=new bn({fill:l.textColor,fontSize:l.fontSize,fontFamily:l.fontFamily,align:"center"}),T=new kc({text:o,style:D}),M=new fb({defaultView:E,hoverView:w,pressedView:B,text:l.isLoading?void 0:T,anchor:.5,padding:0});if(M.x=l.width/2,M.y=l.height/2,M.eventMode="none",A.addChild(M),u.current=M,l.isDisabled||l.isLoading){const R=_ot(l.width,l.height,l.borderRadius);A.addChild(R),h.current=R}if(l.isLoading){const R=Iot(l.width,l.height);A.addChild(R),f.current=R}return()=>{u.current&&A.children.includes(u.current)&&(A.removeChild(u.current),u.current.destroy(),u.current=null),h.current&&A.children.includes(h.current)&&(A.removeChild(h.current),h.current.destroy(),h.current=null),f.current&&A.children.includes(f.current)&&(A.removeChild(f.current),f.current.destroy(),f.current=null)}},[l.width,l.height,l.backgroundColor,l.backgroundAlpha,l.hoverColor,l.pressedColor,l.borderColor,l.borderRadius,l.textColor,l.fontSize,l.fontFamily,l.isDisabled,l.isLoading,o]);const p=C.useCallback(A=>{A.clear(),A.rect(0,0,l.width,l.height),A.fill({color:16777215,alpha:0})},[l.width,l.height]),m=C.useCallback(A=>{if(l.isDisabled||l.isLoading)return;const x=A,E=x?.metaKey??x?.nativeEvent?.metaKey??!1,w=x?.shiftKey??x?.nativeEvent?.shiftKey??!1,B=x?.ctrlKey??x?.nativeEvent?.ctrlKey??!1;n?.(e.id,{metaKey:E,shiftKey:w,ctrlKey:B})},[e.id,n,l.isDisabled,l.isLoading]),v=l.isDisabled||l.isLoading?"not-allowed":"pointer";return d.jsx("pixiContainer",{x:l.left,y:l.top,ref:A=>{c.current=A},children:d.jsx("pixiGraphics",{draw:p,eventMode:"static",cursor:v,onPointerDown:m})})});function Tot(t){const e=wr(t?.backgroundColor,3900150);return{x:ot(t?.left,void 0,0),y:ot(t?.top,void 0,0),width:ot(t?.width,void 0,120),height:ot(t?.height,void 0,40),backgroundColor:e,hoverColor:$K(e,.9),pressedColor:$K(e,.8),disabledColor:13421772,textColor:wr(t?.color,16777215),fontSize:ot(t?.fontSize,void 0,14),fontFamily:t?.fontFamily||"Pretendard, sans-serif",borderRadius:ot(t?.borderRadius,void 0,8),paddingLeft:ot(t?.paddingLeft||t?.padding,void 0,16),paddingRight:ot(t?.paddingRight||t?.padding,void 0,16),paddingTop:ot(t?.paddingTop||t?.padding,void 0,8),paddingBottom:ot(t?.paddingBottom||t?.padding,void 0,8)}}function $K(t,e){const n=Math.floor((t>>16&255)*e),r=Math.floor((t>>8&255)*e),i=Math.floor((t&255)*e);return n<<16|r<<8|i}function R3(t,e,n,r){const i=new _i;return i.roundRect(0,0,t,e,r),i.fill({color:n,alpha:1}),i}const Mot=C.memo(function({element:e,isSelected:n,onClick:r}){mn(pn);const{app:i}=Ef(),s=C.useRef(null),a=C.useRef(null),o=e.props?.style,l=e.props,c=C.useMemo(()=>Tot(o),[o]),u=C.useMemo(()=>String(l?.children||l?.text||l?.label||"FancyButton"),[l?.children,l?.text,l?.label]),h=C.useMemo(()=>!!l?.disabled,[l?.disabled]),f=C.useCallback(()=>{h||r?.(e.id)},[e.id,r,h]);return C.useEffect(()=>{if(!i?.stage)return;const p=new hr;p.x=c.x,p.y=c.y;const m=new bn({fontSize:c.fontSize,fontFamily:c.fontFamily,fill:c.textColor}),v=R3(c.width,c.height,c.backgroundColor,c.borderRadius),A=R3(c.width,c.height,c.hoverColor,c.borderRadius),x=R3(c.width,c.height,c.pressedColor,c.borderRadius),E=R3(c.width,c.height,c.disabledColor,c.borderRadius),w=new kc({text:u,style:m}),B=new fb({defaultView:v,hoverView:A,pressedView:x,disabledView:E,text:w,padding:c.paddingTop});return B.width=c.width,B.height=c.height,B.enabled=!h,B.onPress.connect(f),p.addChild(B),i.stage.addChild(p),s.current=p,a.current=B,()=>{B.onPress.disconnectAll(),i.stage.removeChild(p),p.destroy({children:!0}),s.current=null,a.current=null}},[i,c,u,f,h]),null}),Dot=4,Rot=3900150,Pot=13751771,kot=3621201,Not=C.memo(function({element:e,isSelected:n,onChange:r,onClick:i}){mn(pn);const s=e.props?.style,a=e.props,o=C.useMemo(()=>!!(a?.isSelected||a?.checked||a?.defaultSelected),[a]),l=C.useMemo(()=>String(a?.children||a?.label||a?.text||""),[a]),c=C.useMemo(()=>{const z=a?.size?String(a.size):"md";return ist(z)},[a?.size]),u=c.boxSize,h=ot(s?.borderRadius,void 0,Dot),f=wr(s?.backgroundColor,Rot),p=o?f:Pot,m=o?f:16777215,v=wr(s?.color,kot),A=ot(s?.fontSize,void 0,c.fontSize),x=ot(s?.left,void 0,0),E=ot(s?.top,void 0,0),w=C.useCallback(z=>{if(cs(z,{width:u,height:u,backgroundColor:m,backgroundAlpha:1,borderRadius:h,border:{width:2,color:p,alpha:1,style:"solid",radius:h}}),o){const G=u*.2,V=G,q=u*.5,O=u*.4,H=u-G,K=u-G,X=G;z.setStrokeStyle({width:2.5,color:16777215,cap:"round",join:"round"}),z.moveTo(V,q),z.lineTo(O,H),z.lineTo(K,X),z.stroke()}},[u,h,m,p,o]),B=C.useMemo(()=>new bn({fontFamily:s?.fontFamily||"Pretendard, sans-serif",fontSize:A,fill:v}),[s?.fontFamily,A,v]),D=C.useCallback(()=>{i?.(e.id),r?.(e.id,!o)},[e.id,i,r,o]),T=l?Math.max(l.length*A*.6,50):0,M=u+(l?8+T:0),R=Math.max(u,A+4),k=(R-u)/2,L=(R-A)/2,F=C.useCallback(z=>{z.clear(),z.rect(0,0,M,R),z.fill({color:16777215,alpha:0})},[M,R]);return d.jsxs("pixiContainer",{x,y:E,children:[d.jsx("pixiGraphics",{draw:F,eventMode:"static",cursor:"pointer",onPointerDown:D}),d.jsx("pixiGraphics",{draw:w,y:k,eventMode:"none"}),l&&d.jsx("pixiText",{text:l,style:B,x:u+8,y:L,eventMode:"none"})]})}),Lot=20,Fot=4,jot=3900150,Oot=13751771,zot=3621201,$ot=12,Qot=8,Uot=[{value:"option1",label:"Option 1",checked:!1},{value:"option2",label:"Option 2",checked:!1}];function Hot(t){return t&&Array.isArray(t.options)&&t.options.length>0?t.options.map((e,n)=>{if(typeof e=="string")return{value:e,label:e,checked:!1};if(typeof e=="object"&&e!==null){const r=e;return{value:String(r.value||r.id||n),label:String(r.label||r.name||r.value||""),checked:!!(r.checked||r.isSelected||r.defaultSelected)}}return{value:String(n),label:String(e),checked:!1}}):null}function Got(t){return t.length===0?null:t.sort((e,n)=>(e.order_num||0)-(n.order_num||0)).map((e,n)=>{const r=e.props;return{value:String(r?.value||r?.id||e.id||n),label:String(r?.children||r?.label||r?.text||`Option ${n+1}`),checked:!!(r?.isSelected||r?.checked||r?.defaultSelected)}})}const Vot=C.memo(function({option:e,isOptionChecked:n,x:r,y:i,checkboxSize:s,borderRadius:a,primaryColor:o,textColor:l,fontSize:c,fontFamily:u,onToggle:h}){const f=n?o:Oot,p=n?o:16777215,m=C.useCallback(x=>{if(x.clear(),cs(x,{width:s,height:s,backgroundColor:p,backgroundAlpha:1,borderRadius:a,border:{width:2,color:f,alpha:1,style:"solid",radius:a}}),n){const E=s*.2,w=E,B=s*.5,D=s*.4,T=s-E,M=s-E,R=E;x.setStrokeStyle({width:2.5,color:16777215,cap:"round",join:"round"}),x.moveTo(w,B),x.lineTo(D,T),x.lineTo(M,R),x.stroke()}},[s,a,p,f,n]),v=C.useMemo(()=>new bn({fontFamily:u,fontSize:c,fill:l}),[u,c,l]),A=C.useCallback(()=>{h(e.value)},[e.value,h]);return d.jsxs("pixiContainer",{x:r,y:i,children:[d.jsx("pixiGraphics",{draw:m,eventMode:"static",cursor:"pointer",onPointerDown:A}),d.jsx("pixiText",{text:e.label,style:v,x:s+Qot,y:(s-c)/2,eventMode:"static",cursor:"pointer",onPointerDown:A})]})}),Wot=C.memo(function({element:e,isSelected:n,onChange:r,onClick:i}){mn(pn);const s=e.props?.style,a=e.props,o=je(k=>k.elements),l=C.useMemo(()=>o.filter(k=>k.parent_id===e.id&&(k.tag==="Checkbox"||k.tag==="CheckBox")),[o,e.id]),c=C.useMemo(()=>{const k=Got(l);if(k)return k;const L=Hot(a);return L||Uot},[l,a]),u=C.useMemo(()=>{const k=a?.value||a?.selectedValues||a?.defaultValue;if(Array.isArray(k)&&k.length>0)return k.map(String);const L=l.filter(F=>{const z=F.props;return!!(z?.isSelected||z?.checked||z?.defaultSelected)}).map(F=>{const z=F.props;return String(z?.value||F.id)});return L.length>0?L:c.filter(F=>F.checked).map(F=>F.value)},[a,l,c]),h=C.useMemo(()=>String(a?.label||a?.children||a?.text||""),[a]),f=C.useMemo(()=>{const k=a?.orientation;return k==="horizontal"?!0:k==="vertical"?!1:s?.flexDirection==="row"},[a?.orientation,s]),p=Lot,m=Fot,v=wr(s?.backgroundColor,jot),A=wr(s?.color,zot),x=ot(s?.fontSize,void 0,14),E=s?.fontFamily||"Pretendard, sans-serif",w=ot(s?.left,void 0,0),B=ot(s?.top,void 0,0),D=h?x+8:0,T=C.useMemo(()=>new bn({fontFamily:E,fontSize:x,fontWeight:"bold",fill:A}),[E,x,A]),M=C.useCallback(()=>{i?.(e.id)},[e.id,i]),R=C.useCallback(k=>{i?.(e.id);const L=u.includes(k)?u.filter(F=>F!==k):[...u,k];r?.(e.id,L)},[e.id,i,r,u]);return d.jsxs("pixiContainer",{x:w,y:B,eventMode:"static",onPointerDown:M,children:[h&&d.jsx("pixiText",{text:h,style:T,x:0,y:0,eventMode:"none"}),c.map((k,L)=>{const F=u.includes(k.value),z=f?L*120:0,G=D+(f?0:L*(p+$ot));return d.jsx(Vot,{option:k,isOptionChecked:F,x:z,y:G,checkboxSize:p,borderRadius:m,primaryColor:v,textColor:A,fontSize:x,fontFamily:E,onToggle:R},k.value)})]})}),Kot=20,qot=8,Yot=C.memo(function({element:e,isSelected:n,onClick:r}){mn(pn);const i=e.props?.style,s=e.props,a=C.useMemo(()=>String(s?.children||s?.label||s?.text||""),[s]),o=Kot,l=ot(i?.fontSize,void 0,14),c=ot(i?.left,void 0,0),u=ot(i?.top,void 0,0),h=ot(i?.width,void 0,0),f=ot(i?.height,void 0,0),p=a?Math.max(a.length*l*.6,50):0,m=h>0?h:o+(a?qot+p:0),v=f>0?f:Math.max(o,l+4),A=C.useCallback(()=>{r?.(e.id)},[e.id,r]),x=C.useCallback(E=>{E.clear(),E.rect(0,0,m,v),E.fill({color:16777215,alpha:0})},[m,v]);return d.jsx("pixiContainer",{x:c,y:u,children:d.jsx("pixiGraphics",{draw:x,eventMode:"static",cursor:"pointer",onPointerDown:A})})}),Xot=3900150,Jot=13751771,Zot=3621201,elt=8,tlt=[{value:"option1",label:"Option 1"},{value:"option2",label:"Option 2"}];function nlt(t){return t&&Array.isArray(t.options)&&t.options.length>0?t.options.map((e,n)=>{if(typeof e=="string")return{value:e,label:e};if(typeof e=="object"&&e!==null){const r=e;return{value:String(r.value||r.id||n),label:String(r.label||r.name||r.value||"")}}return{value:String(n),label:String(e)}}):null}function rlt(t){return t.length===0?null:t.sort((e,n)=>(e.order_num||0)-(n.order_num||0)).map((e,n)=>{const r=e.props;return{value:String(r?.value||r?.id||e.id||n),label:String(r?.children||r?.label||r?.text||`Option ${n+1}`)}})}const ilt=C.memo(function({option:e,isOptionSelected:n,x:r,y:i,radioSize:s,primaryColor:a,textColor:o,fontSize:l,fontFamily:c,onSelect:u}){const h=n?a:Jot,f=n?a:16777215,p=C.useCallback(A=>{A.clear();const x=s/2,E=x,w=x;if(Dhe(A,{x:E,y:w,radius:x,backgroundColor:f,backgroundAlpha:1,border:{width:2,color:h,alpha:1}}),n){const B=s*.2;A.circle(E,w,B),A.fill({color:16777215,alpha:1})}},[s,f,h,n]),m=C.useMemo(()=>new bn({fontFamily:c,fontSize:l,fill:o}),[c,l,o]),v=C.useCallback(()=>{u(e.value)},[e.value,u]);return d.jsxs("pixiContainer",{x:r,y:i,children:[d.jsx("pixiGraphics",{draw:p,eventMode:"static",cursor:"pointer",onPointerDown:v}),d.jsx("pixiText",{text:e.label,style:m,x:s+elt,y:(s-l)/2,eventMode:"static",cursor:"pointer",onPointerDown:v})]})}),slt=C.memo(function({element:e,isSelected:n,onChange:r,onClick:i}){mn(pn);const s=e.props?.style,a=e.props,o=je(F=>F.elements),l=C.useMemo(()=>o.filter(F=>F.parent_id===e.id&&F.tag==="Radio"),[o,e.id]),c=C.useMemo(()=>{const F=rlt(l);if(F)return F;const z=nlt(a);return z||tlt},[l,a]),u=C.useMemo(()=>{if(a?.value||a?.selectedValue||a?.defaultValue)return String(a.value||a.selectedValue||a.defaultValue);const F=l.find(z=>{const G=z.props;return!!(G?.isSelected||G?.checked||G?.defaultSelected)});if(F){const z=F.props;return String(z?.value||F.id)}return""},[a,l]),h=C.useMemo(()=>String(a?.label||a?.children||a?.text||""),[a]),f=C.useMemo(()=>{const F=a?.orientation;return F==="horizontal"?!0:F==="vertical"?!1:s?.flexDirection==="row"},[a?.orientation,s]),p=C.useMemo(()=>String(a?.size||"md"),[a?.size]),m=C.useMemo(()=>cO(p),[p]),v=m.radioSize,A=m.gap,x=wr(s?.backgroundColor,Xot),E=wr(s?.color,Zot),w=ot(s?.fontSize,void 0,m.fontSize),B=s?.fontFamily||"Pretendard, sans-serif",D=ot(s?.left,void 0,0),T=ot(s?.top,void 0,0),M=h?w+8:0,R=C.useMemo(()=>new bn({fontFamily:B,fontSize:w,fontWeight:"bold",fill:E}),[B,w,E]),k=C.useCallback(()=>{i?.(e.id)},[e.id,i]),L=C.useCallback(F=>{i?.(e.id),r?.(e.id,F)},[e.id,i,r]);return d.jsxs("pixiContainer",{x:D,y:T,eventMode:"static",onPointerDown:k,children:[h&&d.jsx("pixiText",{text:h,style:R,x:0,y:0,eventMode:"none"}),c.map((F,z)=>{const G=F.value===u,V=f?z*120:0,q=M+(f?0:z*(v+A));return d.jsx(ilt,{option:F,isOptionSelected:G,x:V,y:q,radioSize:v,primaryColor:x,textColor:E,fontSize:w,fontFamily:B,onSelect:L},F.value)})]})}),alt=20,olt=8,llt=C.memo(function({element:e,isSelected:n,onClick:r}){mn(pn);const i=e.props?.style,s=e.props,a=C.useMemo(()=>String(s?.children||s?.label||s?.text||""),[s]),o=alt,l=ot(i?.fontSize,void 0,14),c=ot(i?.left,void 0,0),u=ot(i?.top,void 0,0),h=ot(i?.width,void 0,0),f=ot(i?.height,void 0,0),p=a?Math.max(a.length*l*.6,50):0,m=h>0?h:o+(a?olt+p:0),v=f>0?f:Math.max(o,l+4),A=C.useCallback(()=>{r?.(e.id)},[e.id,r]),x=C.useCallback(E=>{E.clear(),E.rect(0,0,m,v),E.fill({color:16777215,alpha:0})},[m,v]);return d.jsx("pixiContainer",{x:c,y:u,children:d.jsx("pixiGraphics",{draw:x,eventMode:"static",cursor:"pointer",onPointerDown:A})})});function clt(t,e){const n=wr(t?.backgroundColor,3900150),r=wr(t?.borderColor,15067115),i=ast(e);return{x:ot(t?.left,void 0,0),y:ot(t?.top,void 0,0),width:ot(t?.width,void 0,200),height:ot(t?.height,void 0,i.trackHeight),trackColor:r,fillColor:n,handleColor:n,trackHeight:i.trackWidth,handleSize:i.thumbSize}}function ult(t,e,n){const r=new _i;return cs(r,{width:t,height:e,backgroundColor:n,backgroundAlpha:1,borderRadius:e/2}),r}function dlt(t,e,n){const r=new _i;return cs(r,{width:t,height:e,backgroundColor:n,backgroundAlpha:1,borderRadius:e/2}),r}function hlt(t,e){const n=new _i;return Dhe(n,{x:0,y:0,radius:t/2,backgroundColor:e,backgroundAlpha:1,border:{width:2,color:16777215,alpha:1}}),n}const flt=C.memo(function({element:e,isSelected:n,onClick:r,onChange:i}){mn(pn);const{app:s}=Ef(),a=C.useRef(null),o=C.useRef(null),l=e.props?.style,c=e.props,u=C.useMemo(()=>String(c?.size||"md"),[c?.size]),h=C.useMemo(()=>clt(l,u),[l,u]),f=C.useMemo(()=>Number(c?.min??0),[c?.min]),p=C.useMemo(()=>Number(c?.max??100),[c?.max]),m=C.useMemo(()=>Number(c?.step??1),[c?.step]),v=C.useMemo(()=>Number(c?.value??50),[c?.value]),A=C.useCallback(E=>{i?.(e.id,E)},[e.id,i]),x=C.useCallback(()=>{r?.(e.id)},[e.id,r]);return C.useEffect(()=>{if(!s?.stage)return;const E=new hr;E.x=h.x,E.y=h.y,E.eventMode="static",E.cursor="pointer",E.on("pointerdown",x);const w=ult(h.width,h.trackHeight,h.trackColor),B=dlt(h.width,h.trackHeight,h.fillColor),D=hlt(h.handleSize,h.handleColor),T=new Nit({bg:w,fill:B,slider:D,min:f,max:p,step:m});return T.y=(h.height-h.trackHeight)/2,T.onUpdate.connect(A),E.addChild(T),s.stage.addChild(E),a.current=E,o.current=T,()=>{T.onUpdate.disconnectAll(),s.stage.removeChild(E),E.destroy({children:!0}),a.current=null,o.current=null}},[s,h,f,p,m,x,A]),C.useEffect(()=>{o.current&&o.current.value!==v&&(o.current.value=v)},[v]),null});function plt(t,e){const n=dst(e),r=n.fontSize+n.paddingY*2+8;return{x:ot(t?.left,void 0,0),y:ot(t?.top,void 0,0),width:ot(t?.width,void 0,200),height:ot(t?.height,void 0,r),backgroundColor:wr(t?.backgroundColor,16777215),borderColor:wr(t?.borderColor,13751771),borderWidth:ot(t?.borderWidth,void 0,1),borderRadius:ot(t?.borderRadius,void 0,n.borderRadius),textColor:wr(t?.color,0),fontSize:ot(t?.fontSize,void 0,n.fontSize),fontFamily:t?.fontFamily||"Pretendard, sans-serif",paddingLeft:ot(t?.paddingLeft||t?.padding,void 0,n.paddingX),paddingRight:ot(t?.paddingRight||t?.padding,void 0,n.paddingX)}}function glt(t,e,n,r,i,s){const a=new _i;return cs(a,{width:t,height:e,backgroundColor:n,backgroundAlpha:1,borderRadius:s,border:{width:i,color:r,alpha:1,style:"solid",radius:s}}),a}const mlt=C.memo(function({element:e,isSelected:n,onClick:r,onChange:i}){mn(pn);const{app:s}=Ef(),a=C.useRef(null),o=C.useRef(null),l=e.props?.style,c=e.props,u=C.useMemo(()=>String(c?.size||"md"),[c?.size]),h=C.useMemo(()=>plt(l,u),[l,u]),f=C.useMemo(()=>String(c?.value||c?.defaultValue||""),[c?.value,c?.defaultValue]),p=C.useMemo(()=>String(c?.placeholder||""),[c?.placeholder]),m=C.useCallback(A=>{i?.(e.id,A)},[e.id,i]),v=C.useCallback(()=>{r?.(e.id)},[e.id,r]);return C.useEffect(()=>{if(!s?.stage)return;const A=new hr;A.x=h.x,A.y=h.y,A.eventMode="static",A.cursor="text",A.on("pointerdown",v);const x=glt(h.width,h.height,h.backgroundColor,h.borderColor,h.borderWidth,h.borderRadius),E=new bn({fontSize:h.fontSize,fontFamily:h.fontFamily,fill:h.textColor}),w=new wit({bg:x,textStyle:E,placeholder:p,padding:[0,h.paddingRight,0,h.paddingLeft]});return w.width=h.width,w.height=h.height,w.onEnter.connect(m),w.onChange.connect(m),A.addChild(w),s.stage.addChild(A),a.current=A,o.current=w,()=>{w.onEnter.disconnectAll(),w.onChange.disconnectAll(),s.stage.removeChild(A),A.destroy({children:!0}),a.current=null,o.current=null}},[s,h,p,v,m]),C.useEffect(()=>{o.current&&o.current.value!==f&&(o.current.value=f)},[f]),null});function Alt(t,e){const n=fst(e),r=n.fontSize+n.paddingY*2+8;return{x:ot(t?.left,void 0,0),y:ot(t?.top,void 0,0),width:ot(t?.width,void 0,200),height:ot(t?.height,void 0,r),backgroundColor:wr(t?.backgroundColor,16777215),borderColor:wr(t?.borderColor,13751771),borderWidth:ot(t?.borderWidth,void 0,1),borderRadius:ot(t?.borderRadius,void 0,n.borderRadius),textColor:wr(t?.color,0),fontSize:ot(t?.fontSize,void 0,n.fontSize),fontFamily:t?.fontFamily||"Pretendard, sans-serif",paddingLeft:ot(t?.paddingLeft||t?.padding,void 0,n.paddingX),paddingRight:ot(t?.paddingRight||t?.padding,void 0,n.paddingX),chevronSize:n.chevronSize}}function ylt(t){return t?Array.isArray(t.options)?t.options.map((e,n)=>{if(typeof e=="string")return{value:e,label:e};if(typeof e=="object"&&e!==null){const r=e;return{value:String(r.value||r.id||n),label:String(r.label||r.name||r.value||"")}}return{value:String(n),label:String(e)}}):[]:[]}function QK(t,e,n,r,i,s){const a=new _i;return cs(a,{width:t,height:e,backgroundColor:n,backgroundAlpha:1,borderRadius:s,border:{width:i,color:r,alpha:1,style:"solid",radius:s}}),a}const vlt=C.memo(function({element:e,isSelected:n,onClick:r,onChange:i}){mn(pn);const{app:s}=Ef(),a=C.useRef(null),o=C.useRef(null),l=e.props?.style,c=e.props,u=C.useMemo(()=>String(c?.size||"md"),[c?.size]),h=C.useMemo(()=>Alt(l,u),[l,u]),f=C.useMemo(()=>ylt(c),[c]),p=C.useMemo(()=>String(c?.value||c?.selectedValue||c?.defaultValue||""),[c?.value,c?.selectedValue,c?.defaultValue]),m=C.useCallback((A,x)=>{i?.(e.id,x)},[e.id,i]),v=C.useCallback(()=>{r?.(e.id)},[e.id,r]);return C.useEffect(()=>{if(!s?.stage||f.length===0)return;const A=new hr;A.x=h.x,A.y=h.y,A.eventMode="static",A.cursor="pointer",A.on("pointerdown",v);const x=new bn({fontSize:h.fontSize,fontFamily:h.fontFamily,fill:h.textColor}),E=new Rit({closedBG:QK(h.width,h.height,h.backgroundColor,h.borderColor,h.borderWidth,h.borderRadius),openBG:QK(h.width,h.height*(f.length+1),h.backgroundColor,h.borderColor,h.borderWidth,h.borderRadius),textStyle:x,items:{items:f.map(B=>B.label),backgroundColor:16382715,hoverColor:15067115,width:h.width,height:h.height,textOffset:[h.paddingLeft,0]},scrollBox:{width:h.width,height:h.height*Math.min(f.length,5)}}),w=f.findIndex(B=>B.value===p);return w>=0&&(E.value=w),E.onSelect.connect(m),A.addChild(E),s.stage.addChild(A),a.current=A,o.current=E,()=>{E.onSelect.disconnectAll(),s.stage.removeChild(A),A.destroy({children:!0}),a.current=null,o.current=null}},[s,h,f,p,v,m]),null});function xlt(t,e){const n=wr(t?.backgroundColor,3900150),r=wr(t?.borderColor,15067115),i=cst(e);return{x:ot(t?.left,void 0,0),y:ot(t?.top,void 0,0),width:ot(t?.width,void 0,i.width),height:ot(t?.height,void 0,i.barHeight),backgroundColor:r,fillColor:n,borderColor:r,borderWidth:0,borderRadius:ot(t?.borderRadius,void 0,i.borderRadius)}}function blt(t,e,n,r){const i=new _i;return i.roundRect(0,0,t,e,r),i.fill({color:n,alpha:1}),i}function Clt(t,e,n,r){const i=new _i;return i.roundRect(0,0,t,e,r),i.fill({color:n,alpha:1}),i}const Elt=C.memo(function({element:e,isSelected:n,onClick:r}){mn(pn);const{app:i}=Ef(),s=C.useRef(null),a=C.useRef(null),o=e.props?.style,l=e.props,c=C.useMemo(()=>String(l?.size||"md"),[l?.size]),u=C.useMemo(()=>xlt(o,c),[o,c]),h=C.useMemo(()=>{const p=Number(l?.value??l?.progress??50);return Math.max(0,Math.min(100,p))},[l?.value,l?.progress]),f=C.useCallback(()=>{r?.(e.id)},[e.id,r]);return C.useEffect(()=>{if(!i?.stage)return;const p=new hr;p.x=u.x,p.y=u.y,p.eventMode="static",p.cursor="pointer",p.on("pointerdown",f);const m=blt(u.width,u.height,u.backgroundColor,u.borderRadius),v=Clt(u.width,u.height,u.fillColor,u.borderRadius),A=new The({bg:m,fill:v});return A.width=u.width,A.height=u.height,p.addChild(A),i.stage.addChild(p),s.current=p,a.current=A,()=>{i.stage.removeChild(p),p.destroy({children:!0}),s.current=null,a.current=null}},[i,u,f]),C.useEffect(()=>{a.current&&(a.current.progress=h)},[h]),null});function Slt(t,e,n){const r=ot(t?.width,void 0,240),i=Lhe(n),s=i.indicatorHeight+8;return{x:ot(t?.left,void 0,0),y:ot(t?.top,void 0,0),width:r,height:ot(t?.height,void 0,s),backgroundColor:wr(t?.backgroundColor,15067115),activeColor:wr(t?.borderColor,3900150),textColor:wr(t?.color,7041664),activeTextColor:16777215,fontSize:ot(t?.fontSize,void 0,i.fontSize),fontFamily:t?.fontFamily||"Pretendard, sans-serif",borderRadius:ot(t?.borderRadius,void 0,i.indicatorHeight/2),itemWidth:e>0?r/e:r}}function wlt(t){return t?Array.isArray(t.items)?t.items.map((e,n)=>{if(typeof e=="string")return{label:e,value:e};if(typeof e=="object"&&e!==null){const r=e;return{label:String(r.label||r.name||`Tab ${n+1}`),value:String(r.value||r.id||n)}}return{label:`Tab ${n+1}`,value:String(n)}}):Array.isArray(t.children)?t.children.map((e,n)=>typeof e=="string"?{label:e,value:e}:{label:`Tab ${n+1}`,value:String(n)}):[{label:"Tab 1"},{label:"Tab 2"}]:[{label:"Tab 1"},{label:"Tab 2"}]}function _lt(t,e,n,r){const i=new _i;return i.roundRect(0,0,t,e,r),i.fill({color:n,alpha:1}),i}function Ilt(t,e,n,r,i){const s=new hr,a=new _i;a.roundRect(2,2,t-4,e-4,i.borderRadius-2),a.fill({color:r?i.activeColor:i.backgroundColor,alpha:r?1:0}),s.addChild(a);const o=new bn({fontSize:i.fontSize,fontFamily:i.fontFamily,fill:r?i.activeTextColor:i.textColor}),l=new kc({text:n,style:o});return l.x=(t-l.width)/2,l.y=(e-l.height)/2,s.addChild(l),s}const Blt=C.memo(function({element:e,isSelected:n,onClick:r,onChange:i}){mn(pn);const{app:s}=Ef(),a=C.useRef(null),o=C.useRef(null),l=e.props?.style,c=e.props,u=C.useMemo(()=>wlt(c),[c]),h=C.useMemo(()=>String(c?.size||"md"),[c?.size]),f=C.useMemo(()=>Slt(l,u.length,h),[l,u.length,h]),p=C.useMemo(()=>{const A=Number(c?.activeIndex??c?.value??0);return Math.max(0,Math.min(u.length-1,A))},[c?.activeIndex,c?.value,u.length]),m=C.useCallback(A=>{i?.(e.id,A)},[e.id,i]),v=C.useCallback(()=>{r?.(e.id)},[e.id,r]);return C.useEffect(()=>{if(!s?.stage||u.length===0)return;const A=new hr;A.x=f.x,A.y=f.y,A.eventMode="static",A.cursor="pointer",A.on("pointerdown",v);const x=_lt(f.width,f.height,f.backgroundColor,f.borderRadius);A.addChild(x);const E=u.map((B,D)=>Ilt(f.itemWidth,f.height,B.label,D===p,f)),w=new Xrt(E);return p>=0&&p<u.length&&w.show(p),E.forEach((B,D)=>{B.eventMode="static",B.cursor="pointer",B.on("pointerdown",T=>{T.stopPropagation(),w.show(D),m(D)})}),E.forEach((B,D)=>{B.x=D*f.itemWidth,A.addChild(B)}),s.stage.addChild(A),a.current=A,o.current=w,()=>{s.stage.removeChild(A),A.destroy({children:!0}),a.current=null,o.current=null}},[s,f,u,p,v,m]),null});function Tlt(t){return{x:ot(t?.left,void 0,0),y:ot(t?.top,void 0,0),width:ot(t?.width,void 0,300),height:ot(t?.height,void 0,200),backgroundColor:wr(t?.backgroundColor,16777215),borderColor:wr(t?.borderColor,15067115),borderWidth:ot(t?.borderWidth,void 0,1),borderRadius:ot(t?.borderRadius,void 0,8),scrollbarWidth:8,scrollbarColor:10265519,scrollbarBgColor:15067115}}function Mlt(t,e,n,r,i,s){const a=new _i;return cs(a,{width:t,height:e,backgroundColor:n,backgroundAlpha:1,borderRadius:s,border:i>0?{width:i,color:r,alpha:1,style:"solid",radius:s}:null}),a}function Dlt(t,e){const n=new hr,r=new bn({fontSize:14,fontFamily:"Pretendard, sans-serif",fill:3621201});for(let i=0;i<e;i++){const s=new _i;s.roundRect(8,i*40+8,t-24,32,4),s.fill({color:i%2===0?15987958:16777215,alpha:1}),n.addChild(s);const a=new kc({text:`Item ${i+1}`,style:r});a.x=16,a.y=i*40+14,n.addChild(a)}return n}const Rlt=C.memo(function({element:e,isSelected:n,onClick:r}){mn(pn);const{app:i}=Ef(),s=C.useRef(null),a=C.useRef(null),o=e.props?.style,l=e.props,c=C.useMemo(()=>Tlt(o),[o]),u=C.useMemo(()=>{const f=Number(l?.itemCount??l?.count??10);return Math.max(1,f)},[l?.itemCount,l?.count]),h=C.useCallback(()=>{r?.(e.id)},[e.id,r]);return C.useEffect(()=>{if(!i?.stage)return;const f=new hr;f.x=c.x,f.y=c.y,f.eventMode="static",f.cursor="pointer",f.on("pointerdown",h);const p=Mlt(c.width,c.height,c.backgroundColor,c.borderColor,c.borderWidth,c.borderRadius);f.addChild(p);const m=Dlt(c.width,u),v=new Bhe({width:c.width-c.borderWidth*2,height:c.height-c.borderWidth*2,elementsMargin:0,globalScroll:!1,type:"vertical",radius:c.borderRadius,padding:0});return v.addItem(m),v.x=c.borderWidth,v.y=c.borderWidth,f.addChild(v),i.stage.addChild(f),s.current=f,a.current=v,()=>{i.stage.removeChild(f),f.destroy({children:!0}),s.current=null,a.current=null}},[i,c,u,h]),null});function Plt(t){return{x:ot(t?.left,void 0,0),y:ot(t?.top,void 0,0),width:ot(t?.width,void 0,200),height:ot(t?.height,void 0,250),backgroundColor:wr(t?.backgroundColor,16777215),itemBackgroundColor:15987958,itemHoverColor:15067115,textColor:wr(t?.color,3621201),fontSize:ot(t?.fontSize,void 0,14),fontFamily:t?.fontFamily||"Pretendard, sans-serif",borderRadius:ot(t?.borderRadius,void 0,8),itemHeight:40,gap:ot(t?.gap,void 0,4),padding:ot(t?.padding,void 0,8)}}function klt(t){return t?Array.isArray(t.items)?t.items.map((e,n)=>{if(typeof e=="string")return{label:e,value:e};if(typeof e=="object"&&e!==null){const r=e;return{label:String(r.label||r.name||r.title||`Item ${n+1}`),value:String(r.value||r.id||n)}}return{label:`Item ${n+1}`,value:String(n)}}):[{label:"Item 1",value:"1"},{label:"Item 2",value:"2"},{label:"Item 3",value:"3"},{label:"Item 4",value:"4"},{label:"Item 5",value:"5"}]:[]}function Nlt(t,e,n,r){const i=new hr,s=new _i;cs(s,{width:t,height:e,backgroundColor:r.itemBackgroundColor,backgroundAlpha:1,borderRadius:4}),i.addChild(s);const a=new bn({fontSize:r.fontSize,fontFamily:r.fontFamily,fill:r.textColor}),o=new kc({text:n,style:a});return o.x=12,o.y=(e-o.height)/2,i.addChild(o),i.eventMode="static",i.cursor="pointer",i.on("pointerover",()=>{cs(s,{width:t,height:e,backgroundColor:r.itemHoverColor,backgroundAlpha:1,borderRadius:4})}),i.on("pointerout",()=>{cs(s,{width:t,height:e,backgroundColor:r.itemBackgroundColor,backgroundAlpha:1,borderRadius:4})}),i}function Llt(t,e,n,r){const i=new _i;return cs(i,{width:t,height:e,backgroundColor:n,backgroundAlpha:1,borderRadius:r,border:{width:1,color:15067115,alpha:1,style:"solid",radius:r}}),i}const Flt=C.memo(function({element:e,isSelected:n,onClick:r,onItemClick:i}){mn(pn);const{app:s}=Ef(),a=C.useRef(null),o=C.useRef(null),l=e.props?.style,c=e.props,u=C.useMemo(()=>Plt(l),[l]),h=C.useMemo(()=>klt(c),[c]),f=C.useMemo(()=>{const v=c?.direction||c?.orientation;return v==="horizontal"||v==="row"},[c?.direction,c?.orientation]),p=C.useCallback(()=>{r?.(e.id)},[e.id,r]),m=C.useCallback(v=>{i?.(e.id,v)},[e.id,i]);return C.useEffect(()=>{if(!s?.stage)return;const v=new hr;v.x=u.x,v.y=u.y,v.eventMode="static",v.cursor="pointer",v.on("pointerdown",p);const A=Llt(u.width,u.height,u.backgroundColor,u.borderRadius);v.addChild(A);const x=f?(u.width-u.padding*2-u.gap*(h.length-1))/h.length:u.width-u.padding*2,E=u.itemHeight,w=h.map((D,T)=>{const M=Nlt(x,E,D.label,u);return M.on("pointerdown",R=>{R.stopPropagation(),m(T)}),M}),B=new Ihe({elementsMargin:u.gap,type:f?"horizontal":"vertical",children:w});return B.x=u.padding,B.y=u.padding,v.addChild(B),s.stage.addChild(v),a.current=v,o.current=B,()=>{s.stage.removeChild(v),v.destroy({children:!0}),a.current=null,o.current=null}},[s,u,h,f,p,m]),null});function jlt(t,e){let n="rounded";if(e?.maskShape){const r=String(e.maskShape).toLowerCase();r==="circle"?n="circle":r==="ellipse"?n="ellipse":r==="rectangle"||r==="rect"?n="rectangle":n="rounded"}else(t?.borderRadius==="50%"||t?.borderRadius==="100%")&&(n="circle");return{x:ot(t?.left,void 0,0),y:ot(t?.top,void 0,0),width:ot(t?.width,void 0,100),height:ot(t?.height,void 0,100),borderColor:wr(t?.borderColor,15067115),borderWidth:ot(t?.borderWidth,void 0,0),borderRadius:ot(t?.borderRadius,void 0,8),maskShape:n}}function Olt(t,e,n,r){const i=new _i;switch(n){case"circle":{const s=Math.min(t,e)/2;i.circle(t/2,e/2,s);break}case"ellipse":{i.ellipse(t/2,e/2,t/2,e/2);break}case"rectangle":{i.rect(0,0,t,e);break}case"rounded":default:{i.roundRect(0,0,t,e,r);break}}return i.fill({color:16777215,alpha:1}),i}function zlt(t,e){const n=new _i,r=10;for(let i=0;i<t;i+=r)for(let s=0;s<e;s+=r){const a=(i/r+s/r)%2===0;n.rect(i,s,r,r),n.fill({color:a?15987958:15067115,alpha:1})}return n}const $lt=C.memo(function({element:e,isSelected:n,onClick:r}){mn(pn);const{app:i}=Ef(),s=C.useRef(null),a=C.useRef(null),o=e.props?.style,l=e.props,c=C.useMemo(()=>jlt(o,l),[o,l]),u=C.useMemo(()=>String(l?.src||l?.image||l?.url||""),[l?.src,l?.image,l?.url]),h=C.useCallback(()=>{r?.(e.id)},[e.id,r]);return C.useEffect(()=>{if(!i?.stage)return;const f=new hr;f.x=c.x,f.y=c.y,f.eventMode="static",f.cursor="pointer",f.on("pointerdown",h);const p=Olt(c.width,c.height,c.maskShape,c.borderRadius);let m;if(u){const A=Gn.from(u);m=new dd(A),m.width=c.width,m.height=c.height}else m=zlt(c.width,c.height);const v=new Bit({target:m,mask:p,borderWidth:c.borderWidth,borderColor:c.borderColor});return f.addChild(v),i.stage.addChild(f),s.current=f,a.current=v,()=>{i.stage.removeChild(f),f.destroy({children:!0}),s.current=null,a.current=null}},[i,c,u,h]),null}),Qlt=32,Ult=24,Hlt={fontSize:14,paddingX:12,paddingY:8,borderRadius:6};function Glt(t,e,n,r,i){const s=e.size||"sm",a=!!e.isSelected,o=!!e.isDisabled,l=Rhe(s)||Hlt,c=ot(t?.fontSize,void 0,l.fontSize),u=t?.fontFamily||"Pretendard, sans-serif",h=ot(t?.paddingTop,void 0,l.paddingY),f=ot(t?.paddingRight,void 0,l.paddingX),p=ot(t?.paddingBottom,void 0,l.paddingY),m=ot(t?.paddingLeft,void 0,l.paddingX),v=ot(t?.borderRadius,void 0,l.borderRadius);ot(t?.borderWidth,void 0,1);const A=t?.backgroundColor!==void 0,x=t?.color!==void 0,E=A?wr(t?.backgroundColor,r.bg):r.bg,w=x?wr(t?.color,r.text):r.text,B=r.border??13751771;let D,T;A?(D=Math.min(E+1381653,16777215),T=Math.max(E-1381653,0)):(D=r.bgHover,T=r.bgPressed);const M=i.bg,R=i.text,k=i.border??i.bg,L=i.bgHover,F=i.bgPressed,z=new bn({fontSize:c,fontFamily:u}),G=os.measureText(n,z),V=G.width,q=G.height,O=m+V+f,H=h+q+p,K=ot(t?.width,void 0,0),X=ot(t?.height,void 0,0),re=!t?.width||t?.width==="auto"||K<O,J=!t?.height||t?.height==="auto"||X<H;let Z,ee;return re?(Z=O,Z=Math.max(Z,Qlt)):Z=K,J?(ee=H,ee=Math.max(ee,Ult)):ee=X,{left:ot(t?.left,void 0,0),top:ot(t?.top,void 0,0),width:Z,height:ee,backgroundColor:E,hoverColor:D,pressedColor:T,textColor:w,borderColor:B,selectedBackgroundColor:M,selectedHoverColor:L,selectedPressedColor:F,selectedTextColor:R,selectedBorderColor:k,borderRadius:v,fontSize:c,fontFamily:u,isToggleSelected:a,isDisabled:o}}function SN(t,e,n,r,i){const s=new _i;return cs(s,{width:t,height:e,backgroundColor:n,backgroundAlpha:1,borderRadius:i,border:{width:1,color:r,alpha:1,style:"solid",radius:i}}),s}function Vlt(t,e,n){const r=new _i;return cs(r,{width:t,height:e,backgroundColor:16777215,backgroundAlpha:.5,borderRadius:n}),r}const Wlt=C.memo(function({element:e,onClick:n,onToggle:r}){mn(pn);const i=e.props?.style,s=e.props,a=hO(),o=C.useMemo(()=>p8("default",a),[a]),l=C.useMemo(()=>{const x=s?.variant||"primary";return p8(x,a)},[s?.variant,a]),c=C.useMemo(()=>String(s?.children||s?.text||s?.label||"Toggle"),[s?.children,s?.text,s?.label]),u=C.useMemo(()=>Glt(i,s||{},c,o,l),[i,s,c,o,l]),h=C.useRef(null),f=C.useRef(null),p=C.useRef(null);C.useEffect(()=>{const x=h.current;if(!x)return;f.current&&(x.removeChild(f.current),f.current.destroy(),f.current=null),p.current&&(x.removeChild(p.current),p.current.destroy(),p.current=null);const E=u.isToggleSelected?u.selectedBackgroundColor:u.backgroundColor,w=u.isToggleSelected?u.selectedHoverColor:u.hoverColor,B=u.isToggleSelected?u.selectedPressedColor:u.pressedColor,D=u.isToggleSelected?u.selectedBorderColor:u.borderColor,T=u.isToggleSelected?u.selectedTextColor:u.textColor,M=SN(u.width,u.height,E,D,u.borderRadius),R=SN(u.width,u.height,w,D,u.borderRadius),k=SN(u.width,u.height,B,D,u.borderRadius),L=new bn({fill:T,fontSize:u.fontSize,fontFamily:u.fontFamily,align:"center"}),F=new kc({text:c,style:L}),z=new fb({defaultView:M,hoverView:R,pressedView:k,text:F,anchor:.5,padding:0});if(z.x=u.width/2,z.y=u.height/2,z.eventMode="none",x.addChild(z),f.current=z,u.isDisabled){const G=Vlt(u.width,u.height,u.borderRadius);x.addChild(G),p.current=G}return()=>{f.current&&x.children.includes(f.current)&&(x.removeChild(f.current),f.current.destroy(),f.current=null),p.current&&x.children.includes(p.current)&&(x.removeChild(p.current),p.current.destroy(),p.current=null)}},[u.width,u.height,u.backgroundColor,u.hoverColor,u.pressedColor,u.textColor,u.borderColor,u.selectedBackgroundColor,u.selectedHoverColor,u.selectedPressedColor,u.selectedTextColor,u.selectedBorderColor,u.borderRadius,u.fontSize,u.fontFamily,u.isToggleSelected,u.isDisabled,c]);const m=C.useCallback(x=>{x.clear(),x.rect(0,0,u.width,u.height),x.fill({color:16777215,alpha:0})},[u.width,u.height]),v=C.useCallback(x=>{if(u.isDisabled)return;const E=x,w=E?.metaKey??E?.nativeEvent?.metaKey??!1,B=E?.shiftKey??E?.nativeEvent?.shiftKey??!1,D=E?.ctrlKey??E?.nativeEvent?.ctrlKey??!1;n?.(e.id,{metaKey:w,shiftKey:B,ctrlKey:D}),r?.(e.id,!u.isToggleSelected)},[e.id,n,r,u.isDisabled,u.isToggleSelected]),A=u.isDisabled?"not-allowed":"pointer";return d.jsx("pixiContainer",{x:u.left,y:u.top,ref:x=>{h.current=x},children:d.jsx("pixiGraphics",{draw:m,eventMode:"static",cursor:A,onPointerDown:v})})}),Klt=4,qlt=48;function Ylt(t){return t.length===0?[]:t.sort((e,n)=>(e.order_num||0)-(n.order_num||0)).map((e,n)=>{const r=e.props;return{id:e.id,value:String(r?.value||r?.id||e.id||n),label:String(r?.children||r?.label||r?.text||`Button ${n+1}`),isDisabled:!!r?.isDisabled}})}function Xlt(t){return!t||!Array.isArray(t.items)||t.items.length===0?null:t.items.map((e,n)=>{if(typeof e=="string")return{id:String(n),value:e,label:e};if(typeof e=="object"&&e!==null){const r=e;return{id:String(r.id||n),value:String(r.value||r.id||n),label:String(r.label||r.name||r.text||`Button ${n+1}`),isDisabled:!!r.isDisabled}}return{id:String(n),value:String(n),label:String(e)}})}const Jlt=C.memo(function({item:e,isItemSelected:n,x:r,y:i,width:s,height:a,sizePreset:o,colorPreset:l,onPress:c}){const u=n?l.selectedBackground:l.background,h=n?l.selectedBorder:l.border,f=n?l.selectedText:l.text,p=C.useCallback(D=>{D.clear(),cs(D,{width:s,height:a,backgroundColor:u,backgroundAlpha:1,borderRadius:o.borderRadius,border:{width:1,color:h,alpha:1,style:"solid",radius:o.borderRadius}})},[s,a,u,h,o.borderRadius]),m=C.useMemo(()=>new bn({fontFamily:"Pretendard, sans-serif",fontSize:o.fontSize,fill:f,align:"center"}),[o.fontSize,f]),v=C.useCallback(()=>{e.isDisabled||c(e.value)},[e.value,e.isDisabled,c]),A=os.measureText(e.label,m),x=(s-A.width)/2,E=(a-A.height)/2,w=e.isDisabled?"not-allowed":"pointer",B=e.isDisabled?.5:1;return d.jsxs("pixiContainer",{x:r,y:i,alpha:B,children:[d.jsx("pixiGraphics",{draw:p,eventMode:"static",cursor:w,onPointerDown:v}),d.jsx("pixiText",{text:e.label,style:m,x,y:E,eventMode:"static",cursor:w,onPointerDown:v})]})}),Zlt=C.memo(function({element:e,onClick:n,onChange:r}){mn(pn);const i=e.props?.style,s=e.props,a=je(L=>L.elements),o=C.useMemo(()=>a.filter(L=>L.parent_id===e.id&&L.tag==="ToggleButton"),[a,e.id]),l=C.useMemo(()=>{const L=Ylt(o);if(L.length>0)return L;const F=Xlt(s);return F||[{id:"1",value:"option1",label:"Option 1"},{id:"2",value:"option2",label:"Option 2"}]},[o,s]),c=C.useMemo(()=>String(s?.variant||"default"),[s?.variant]),u=C.useMemo(()=>String(s?.size||"md"),[s?.size]),h=C.useMemo(()=>gst(u),[u]),f=C.useMemo(()=>mst(c),[c]),p=C.useMemo(()=>String(s?.selectionMode||"single"),[s?.selectionMode]),m=C.useMemo(()=>{const L=s?.selectedKeys||s?.value||s?.defaultSelectedKeys;if(Array.isArray(L))return L.map(String);if(typeof L=="string"||typeof L=="number")return[String(L)];const F=o.filter(z=>!!z.props?.isSelected).map(z=>{const G=z.props;return String(G?.value||z.id)});return F.length>0?F:[]},[s?.selectedKeys,s?.value,s?.defaultSelectedKeys,o]),v=C.useMemo(()=>{const L=String(s?.orientation||"horizontal"),F=i?.flexDirection;return L==="horizontal"||F==="row"},[s?.orientation,i]),A=ot(i?.gap,void 0,Klt),x=ot(i?.left,void 0,0),E=ot(i?.top,void 0,0),w=C.useMemo(()=>{const L=new bn({fontFamily:"Pretendard, sans-serif",fontSize:h.fontSize});return l.map(F=>{const z=os.measureText(F.label,L),G=Math.max(qlt,z.width+h.paddingX*2),V=z.height+h.paddingY*2;return{width:G,height:V}})},[l,h.fontSize,h.paddingX,h.paddingY]),B=C.useMemo(()=>v?w.reduce((L,F)=>L+F.width,0)+A*(l.length-1):Math.max(...w.map(L=>L.width)),[v,w,A,l.length]),D=C.useMemo(()=>v?Math.max(...w.map(L=>L.height)):w.reduce((L,F)=>L+F.height,0)+A*(l.length-1),[v,w,A,l.length]),T=C.useCallback(L=>{L.clear(),cs(L,{width:B,height:D,backgroundColor:f.background,backgroundAlpha:.3,borderRadius:h.borderRadius+2,border:{width:1,color:f.border,alpha:.5,style:"solid",radius:h.borderRadius+2}})},[B,D,f.background,f.border,h.borderRadius]),M=C.useCallback(()=>{n?.(e.id)},[e.id,n]),R=C.useCallback(L=>{n?.(e.id);let F;p==="multiple"?m.includes(L)?F=m.filter(z=>z!==L):F=[...m,L]:m.includes(L)?F=m:F=[L],r?.(e.id,F)},[e.id,n,r,p,m]),k=C.useMemo(()=>{let L=0;return w.map(F=>{const z=L;return L+=(v?F.width:F.height)+A,z})},[w,v,A]);return d.jsxs("pixiContainer",{x,y:E,eventMode:"static",onPointerDown:M,children:[d.jsx("pixiGraphics",{draw:T,eventMode:"none"}),l.map((L,F)=>{const z=m.includes(L.value),G=v?k[F]:0,V=v?0:k[F];return d.jsx(Jlt,{item:L,isItemSelected:z,x:G,y:V,width:w[F].width,height:w[F].height,sizePreset:h,colorPreset:f,onPress:R},L.id)})]})});function ect(t){return t.length===0?[]:t.sort((e,n)=>(e.order_num||0)-(n.order_num||0)).map((e,n)=>{const r=e.props;return{id:e.id,value:String(r?.value||r?.id||e.id||n),label:String(r?.children||r?.textValue||r?.label||r?.text||`Item ${n+1}`),isDisabled:!!r?.isDisabled}})}function tct(t){return!t||!Array.isArray(t.items)||t.items.length===0?null:t.items.map((e,n)=>{if(typeof e=="string")return{id:String(n),value:e,label:e};if(typeof e=="object"&&e!==null){const r=e;return{id:String(r.id||n),value:String(r.value||r.id||n),label:String(r.label||r.name||r.text||`Item ${n+1}`),isDisabled:!!r.isDisabled}}return{id:String(n),value:String(n),label:String(e)}})}const nct=C.memo(function({item:e,isItemSelected:n,x:r,y:i,width:s,height:a,sizePreset:o,colorPreset:l,onPress:c}){const u=n?l.itemSelectedBackground:l.itemBackground,h=n?l.selectedTextColor:l.textColor,f=C.useRef(!1),p=C.useRef(null),m=C.useCallback(M=>{p.current=M,M.clear();const R=f.current&&!n?l.itemHoverBackground:u;cs(M,{width:s,height:a,backgroundColor:R,backgroundAlpha:1,borderRadius:o.borderRadius})},[s,a,u,n,l.itemHoverBackground,o.borderRadius]),v=C.useMemo(()=>new bn({fontFamily:"Pretendard, sans-serif",fontSize:o.fontSize,fill:h,fontWeight:n?"600":"400"}),[o.fontSize,h,n]),A=C.useCallback(()=>{e.isDisabled||c(e.value)},[e.value,e.isDisabled,c]),x=C.useCallback(()=>{if(!e.isDisabled&&p.current){f.current=!0;const M=p.current;M.clear(),cs(M,{width:s,height:a,backgroundColor:n?u:l.itemHoverBackground,backgroundAlpha:1,borderRadius:o.borderRadius})}},[e.isDisabled,n,u,l.itemHoverBackground,s,a,o.borderRadius]),E=C.useCallback(()=>{if(p.current){f.current=!1;const M=p.current;M.clear(),cs(M,{width:s,height:a,backgroundColor:u,backgroundAlpha:1,borderRadius:o.borderRadius})}},[u,s,a,o.borderRadius]),w=o.itemPaddingX,B=(a-o.fontSize)/2,D=e.isDisabled?"not-allowed":"pointer",T=e.isDisabled?.5:1;return d.jsxs("pixiContainer",{x:r,y:i,alpha:T,children:[d.jsx("pixiGraphics",{draw:m,eventMode:"static",cursor:D,onPointerDown:A,onPointerOver:x,onPointerOut:E}),d.jsx("pixiText",{text:e.label,style:v,x:w,y:B,eventMode:"static",cursor:D,onPointerDown:A}),n&&d.jsx("pixiText",{text:"",style:new bn({fontFamily:"Pretendard, sans-serif",fontSize:o.fontSize,fill:h,fontWeight:"600"}),x:s-o.itemPaddingX-12,y:B,eventMode:"none"})]})}),rct=C.memo(function({element:e,onClick:n,onChange:r}){mn(pn);const i=e.props?.style,s=e.props,a=je(z=>z.elements),o=C.useMemo(()=>a.filter(z=>z.parent_id===e.id&&z.tag==="ListBoxItem"),[a,e.id]),l=C.useMemo(()=>{const z=ect(o);if(z.length>0)return z;const G=tct(s);return G||[{id:"1",value:"item1",label:"Item 1"},{id:"2",value:"item2",label:"Item 2"},{id:"3",value:"item3",label:"Item 3"}]},[o,s]),c=C.useMemo(()=>String(s?.variant||"primary"),[s?.variant]),u=C.useMemo(()=>String(s?.size||"md"),[s?.size]),h=C.useMemo(()=>yst(u),[u]),f=C.useMemo(()=>vst(c),[c]),p=C.useMemo(()=>String(s?.selectionMode||"single"),[s?.selectionMode]),m=C.useMemo(()=>{const z=s?.selectedKeys||s?.value||s?.defaultSelectedKeys;if(Array.isArray(z))return z.map(String);if(typeof z=="string"||typeof z=="number")return[String(z)];const G=o.filter(V=>!!V.props?.isSelected).map(V=>{const q=V.props;return String(q?.value||V.id)});return G.length>0?G:[]},[s?.selectedKeys,s?.value,s?.defaultSelectedKeys,o]),v=ot(i?.width,void 0,200),A=ot(i?.height,void 0,200),x=v-h.containerPadding*2,E=ot(i?.left,void 0,0),w=ot(i?.top,void 0,0),D=C.useMemo(()=>l.length*(h.itemHeight+h.gap)-h.gap,[l.length,h.itemHeight,h.gap])>A-h.containerPadding*2,T=C.useRef(null),M=C.useRef(null),R=C.useCallback(z=>{z.clear(),cs(z,{width:v,height:A,backgroundColor:f.containerBackground,backgroundAlpha:1,borderRadius:h.borderRadius+4,border:{width:1,color:f.containerBorder,alpha:1,style:"solid",radius:h.borderRadius+4}})},[v,A,f.containerBackground,f.containerBorder,h.borderRadius]),k=C.useCallback(()=>{n?.(e.id)},[e.id,n]),L=C.useCallback(z=>{n?.(e.id);let G;p==="multiple"?m.includes(z)?G=m.filter(V=>V!==z):G=[...m,z]:m.includes(z)?G=m:G=[z],r?.(e.id,G)},[e.id,n,r,p,m]);C.useEffect(()=>{if(!(!D||!M.current))return T.current&&(M.current.removeChild(T.current),T.current.destroy(),T.current=null),()=>{T.current&&(T.current.destroy(),T.current=null)}},[D]);const F=C.useMemo(()=>l.map((z,G)=>G*(h.itemHeight+h.gap)),[l,h.itemHeight,h.gap]);return d.jsxs("pixiContainer",{x:E,y:w,eventMode:"static",onPointerDown:k,children:[d.jsx("pixiGraphics",{draw:R,eventMode:"none"}),d.jsxs("pixiContainer",{x:h.containerPadding,y:h.containerPadding,ref:z=>{M.current=z},children:[D&&d.jsx("pixiGraphics",{draw:z=>{z.clear(),z.rect(0,0,v-h.containerPadding*2,A-h.containerPadding*2),z.fill({color:16777215})},eventMode:"none"}),l.map((z,G)=>{const V=m.includes(z.value);return d.jsx(nct,{item:z,isItemSelected:V,x:0,y:F[G],width:x,height:h.itemHeight,sizePreset:h,colorPreset:f,onPress:L},z.id)})]})]})}),ict=C.memo(function({element:e,onClick:n}){mn(pn);const r=e.props?.style,i=e.props,s=C.useMemo(()=>i?.dot?"":i?.count!==void 0?String(i.count):String(i?.children||i?.text||i?.label||""),[i?.children,i?.text,i?.label,i?.count,i?.dot]),a=C.useMemo(()=>String(i?.variant||"default"),[i?.variant]),o=C.useMemo(()=>String(i?.size||"md"),[i?.size]),l=!!i?.dot,c=!!i?.pulsing,u=C.useMemo(()=>bst(o),[o]),h=C.useMemo(()=>Cst(a),[a]),f=C.useMemo(()=>r?.backgroundColor?wr(r.backgroundColor,h.background):h.background,[r?.backgroundColor,h.background]),p=C.useMemo(()=>r?.color?wr(r.color,h.text):h.text,[r?.color,h.text]),m=C.useMemo(()=>{if(l)return{width:u.dotSize,height:u.dotSize};const M=new bn({fontFamily:"Pretendard, sans-serif",fontSize:u.fontSize,fontWeight:"600"});if(s){const R=os.measureText(s,M);return{width:Math.max(u.minWidth,R.width+u.paddingX*2),height:u.height}}return{width:u.minWidth,height:u.height}},[l,u,s]),v=ot(r?.left,void 0,0),A=ot(r?.top,void 0,0),x=C.useRef(null),E=C.useRef(null);C.useEffect(()=>{if(!c||!x.current){E.current&&(cancelAnimationFrame(E.current),E.current=null),x.current&&(x.current.alpha=1);return}let M=null;const R=2e3,k=L=>{M||(M=L);const z=(L-M)%R/R;let G;z<.5?G=1-z*1:G=.5+(z-.5)*1,x.current&&(x.current.alpha=G),E.current=requestAnimationFrame(k)};return E.current=requestAnimationFrame(k),()=>{E.current&&(cancelAnimationFrame(E.current),E.current=null)}},[c]);const w=C.useCallback(M=>{if(M.clear(),l)M.circle(m.width/2,m.height/2,m.width/2),M.fill({color:f});else{const R=m.height/2;cs(M,{width:m.width,height:m.height,backgroundColor:f,backgroundAlpha:1,borderRadius:R})}},[l,m.width,m.height,f]),B=C.useCallback(()=>{n?.(e.id)},[e.id,n]),D=C.useMemo(()=>new bn({fontFamily:"Pretendard, sans-serif",fontSize:u.fontSize,fill:p,fontWeight:"600",align:"center"}),[u.fontSize,p]),T=C.useMemo(()=>{if(l||!s)return{x:0,y:0};const M=os.measureText(s,D);return{x:(m.width-M.width)/2,y:(m.height-M.height)/2}},[l,s,m.width,m.height,D]);return d.jsxs("pixiContainer",{x:v,y:A,ref:M=>{x.current=M},children:[d.jsx("pixiGraphics",{draw:w,eventMode:"static",cursor:"pointer",onPointerDown:B}),!l&&s&&d.jsx("pixiText",{text:s,style:D,x:T.x,y:T.y,eventMode:"static",cursor:"pointer",onPointerDown:B})]})});function sct(t,e,n,r,i){const s=(t-e)/(n-e)*100;switch(r){case"percent":return`${Math.round(s)}%`;case"custom":return i?.style==="unit"&&i?.unit?`${t} ${i.unit}`:String(t);default:return String(t)}}const act=C.memo(function({element:e,onClick:n}){mn(pn);const r=e.props?.style,i=e.props,s=C.useMemo(()=>{const G=Number(i?.value??50);return Math.max(i?.minValue??0,Math.min(i?.maxValue??100,G))},[i?.value,i?.minValue,i?.maxValue]),a=C.useMemo(()=>Number(i?.minValue??0),[i?.minValue]),o=C.useMemo(()=>Number(i?.maxValue??100),[i?.maxValue]),l=C.useMemo(()=>(s-a)/(o-a)*100,[s,a,o]),c=C.useMemo(()=>String(i?.variant||"primary"),[i?.variant]),u=C.useMemo(()=>String(i?.size||"md"),[i?.size]),h=C.useMemo(()=>Sst(u),[u]),f=C.useMemo(()=>wst(c),[c]),p=C.useMemo(()=>String(i?.label||""),[i?.label]),m=i?.showValue!==!1,v=C.useMemo(()=>String(i?.valueFormat||"percent"),[i?.valueFormat]),A=C.useMemo(()=>sct(s,a,o,v,i?.formatOptions),[s,a,o,v,i?.formatOptions]),x=ot(r?.width,void 0,h.width),E=h.barHeight,w=x*l/100,B=p||m,D=B?h.fontSize+h.gap:0,T=ot(r?.left,void 0,0),M=ot(r?.top,void 0,0),R=C.useCallback(G=>{G.clear(),cs(G,{width:x,height:E,backgroundColor:f.trackColor,backgroundAlpha:1,borderRadius:h.borderRadius})},[x,E,f.trackColor,h.borderRadius]),k=C.useCallback(G=>{G.clear(),w>0&&cs(G,{width:w,height:E,backgroundColor:f.fillColor,backgroundAlpha:1,borderRadius:h.borderRadius})},[w,E,f.fillColor,h.borderRadius]),L=C.useCallback(()=>{n?.(e.id)},[e.id,n]),F=C.useMemo(()=>new bn({fontFamily:"Pretendard, sans-serif",fontSize:h.fontSize,fill:f.labelColor}),[h.fontSize,f.labelColor]),z=C.useMemo(()=>new bn({fontFamily:"Pretendard, sans-serif",fontSize:h.fontSize,fill:f.valueColor}),[h.fontSize,f.valueColor]);return d.jsxs("pixiContainer",{x:T,y:M,eventMode:"static",cursor:"pointer",onPointerDown:L,children:[B&&d.jsxs("pixiContainer",{x:0,y:0,children:[p&&d.jsx("pixiText",{text:p,style:F,x:0,y:0,eventMode:"none"}),m&&d.jsx("pixiText",{text:A,style:z,x:x-A.length*(h.fontSize*.6),y:0,eventMode:"none"})]}),d.jsxs("pixiContainer",{x:0,y:D,children:[d.jsx("pixiGraphics",{draw:R,eventMode:"none"}),d.jsx("pixiGraphics",{draw:k,eventMode:"none"})]})]})}),oct=C.memo(function({element:e,onClick:n}){mn(pn);const r=e.props?.style,i=e.props,s=C.useMemo(()=>String(i?.variant||"default"),[i?.variant]),a=C.useMemo(()=>String(i?.size||"md"),[i?.size]),o=C.useMemo(()=>String(i?.orientation||"horizontal"),[i?.orientation]),l=C.useMemo(()=>String(i?.lineStyle||"solid"),[i?.lineStyle]),c=C.useMemo(()=>Ist(a),[a]),u=C.useMemo(()=>Bst(s),[s]),h=C.useMemo(()=>r?.backgroundColor?wr(r.backgroundColor,u.color):r?.borderColor?wr(r.borderColor,u.color):u.color,[r?.backgroundColor,r?.borderColor,u.color]),f=C.useMemo(()=>{if(o==="vertical"){const E=ot(r?.height,void 0,100);return{width:c.thickness,height:E}}return{width:ot(r?.width,void 0,200),height:c.thickness}},[o,r?.width,r?.height,c.thickness]),p=ot(r?.left,void 0,0),m=ot(r?.top,void 0,0),v=C.useCallback(x=>{x.clear();let E=[];if(l==="dashed"?E=[6,4]:l==="dotted"&&(E=[2,2]),l==="solid")x.rect(0,0,f.width,f.height),x.fill({color:h});else{if(x.setStrokeStyle({width:c.thickness,color:h}),o==="vertical"){let w=0,B=0;for(;w<f.height;){const D=E[B%E.length];B%2===0&&(x.moveTo(c.thickness/2,w),x.lineTo(c.thickness/2,Math.min(w+D,f.height))),w+=D,B++}}else{let w=0,B=0;for(;w<f.width;){const D=E[B%E.length];B%2===0&&(x.moveTo(w,c.thickness/2),x.lineTo(Math.min(w+D,f.width),c.thickness/2)),w+=D,B++}}x.stroke()}},[o,f.width,f.height,h,l,c.thickness]),A=C.useCallback(()=>{n?.(e.id)},[e.id,n]);return d.jsx("pixiContainer",{x:p,y:m,children:d.jsx("pixiGraphics",{draw:v,eventMode:"static",cursor:"pointer",onPointerDown:A})})}),lct=C.memo(function({element:e,onClick:n}){mn(pn);const r=e.props?.style,i=e.props,[s,a]=C.useState(!1),[o,l]=C.useState(!1),c=C.useMemo(()=>String(i?.children||i?.text||"Link"),[i?.children,i?.text]),u=C.useMemo(()=>String(i?.variant||"primary"),[i?.variant]),h=C.useMemo(()=>String(i?.size||"md"),[i?.size]),f=!!i?.isDisabled,p=C.useMemo(()=>Mst(h),[h]),m=C.useMemo(()=>Dst(u),[u]),v=C.useMemo(()=>f?10265519:o?m.pressedColor:s?m.hoverColor:r?.color?wr(r.color,m.color):m.color,[f,o,s,r?.color,m]),A=C.useMemo(()=>new bn({fontFamily:"Pretendard, sans-serif",fontSize:p.fontSize,fill:v,fontWeight:"500"}),[p.fontSize,v]),x=C.useMemo(()=>{const k=os.measureText(c,A);return{width:k.width,height:k.height}},[c,A]),E=ot(r?.left,void 0,0),w=ot(r?.top,void 0,0),B=C.useCallback(k=>{k.clear(),s&&!f&&(k.setStrokeStyle({width:2,color:v}),k.moveTo(0,x.height+2),k.lineTo(x.width,x.height+2),k.stroke())},[s,f,v,x.width,x.height]),D=C.useCallback(()=>{f||a(!0)},[f]),T=C.useCallback(()=>{a(!1),l(!1)},[]),M=C.useCallback(()=>{f||l(!0)},[f]),R=C.useCallback(()=>{l(!1),f||n?.(e.id)},[f,e.id,n]);return d.jsxs("pixiContainer",{x:E,y:w,children:[d.jsx("pixiText",{text:c,style:A,eventMode:"static",cursor:f?"not-allowed":"pointer",onPointerEnter:D,onPointerLeave:T,onPointerDown:M,onPointerUp:R}),d.jsx("pixiGraphics",{draw:B})]})}),cct=C.memo(function({element:e,onClick:n}){mn(pn);const r=e.props?.style,i=e.props,s=je(M=>M.elements),a=C.useMemo(()=>s.filter(M=>M.parent_id===e.id&&M.tag==="Breadcrumb").sort((M,R)=>(M.order_num||0)-(R.order_num||0)),[s,e.id]),o=C.useMemo(()=>String(i?.variant||"default"),[i?.variant]),l=C.useMemo(()=>String(i?.size||"md"),[i?.size]),c=C.useMemo(()=>String(i?.separator||""),[i?.separator]),u=C.useMemo(()=>Pst(l),[l]),h=C.useMemo(()=>kst(o),[o]),f=C.useMemo(()=>r?.color?wr(r.color,h.textColor):h.textColor,[r?.color,h.textColor]),p=ot(r?.left,void 0,0),m=ot(r?.top,void 0,0),[v,A]=C.useState(null),x=C.useCallback((M,R)=>new bn({fontFamily:"Pretendard, sans-serif",fontSize:u.fontSize,fill:M||R?h.currentColor:f,fontWeight:M?"500":"400"}),[u.fontSize,h.currentColor,f]),E=C.useMemo(()=>new bn({fontFamily:"Pretendard, sans-serif",fontSize:u.fontSize,fill:h.separatorColor,fontWeight:"400"}),[u.fontSize,h.separatorColor]),w=C.useMemo(()=>{let M=0;const R=[];return a.forEach((k,L)=>{const F=String(k.props?.children||k.props?.text||k.props?.title||"Item"),z=L===a.length-1,G=x(z,!1),V=os.measureText(F,G);if(R.push({type:"item",text:F,x:M,width:V.width,index:L}),M+=V.width,!z){const q=os.measureText(c,E);R.push({type:"separator",text:c,x:M+u.gap,width:q.width}),M+=u.gap*2+q.width}}),R},[a,x,E,c,u.gap]),B=C.useCallback(M=>{const R=a[M];R&&n?.(R.id)},[a,n]),D=C.useCallback(M=>{if(M.clear(),o==="filled"){const R=w.length>0?w[w.length-1].x+w[w.length-1].width+u.padding*2:100;M.roundRect(0,0,R,u.fontSize+u.padding*2,8),M.fill({color:15987958})}},[o,w,u.fontSize,u.padding]),T=o==="filled"?u.padding:0;return d.jsxs("pixiContainer",{x:p,y:m,children:[d.jsx("pixiGraphics",{draw:D}),d.jsx("pixiContainer",{x:T,y:T,children:w.map((M,R)=>{if(M.type==="separator")return d.jsx("pixiText",{text:M.text,style:E,x:M.x,y:0},`sep-${R}`);const k=M.index,L=k===a.length-1,F=v===k;return d.jsx("pixiText",{text:M.text,style:x(L,F),x:M.x,y:0,eventMode:"static",cursor:L?"default":"pointer",onPointerEnter:()=>!L&&A(k),onPointerLeave:()=>A(null),onPointerDown:()=>!L&&B(k)},`item-${R}`)})})]})}),uct=C.memo(function({element:e,onClick:n}){mn(pn);const r=e.props?.style,i=e.props,[s,a]=C.useState(!1),o=C.useMemo(()=>String(i?.variant||"default"),[i?.variant]),l=C.useMemo(()=>String(i?.size||"md"),[i?.size]),c=C.useMemo(()=>Lst(l),[l]),u=C.useMemo(()=>Fst(o),[o]),h=C.useMemo(()=>r?.backgroundColor?wr(r.backgroundColor,u.backgroundColor):s?u.hoverBgColor:u.backgroundColor,[r?.backgroundColor,s,u]),f=C.useMemo(()=>r?.color?wr(r.color,u.textColor):u.textColor,[r?.color,u.textColor]),p=C.useMemo(()=>r?.borderColor?wr(r.borderColor,u.borderColor):u.borderColor,[r?.borderColor,u.borderColor]),m=ot(r?.width,void 0,200),v=ot(r?.height,void 0,120),A=ot(r?.left,void 0,0),x=ot(r?.top,void 0,0),E=C.useMemo(()=>String(i?.children||i?.title||""),[i?.children,i?.title]),w=C.useCallback(k=>{k.clear();const L=o==="outlined"?2:o==="elevated"?0:1;if(o==="elevated")for(let z=3;z>=1;z--){const G=.05*(4-z);k.roundRect(z*2,z*2,m,v,c.borderRadius),k.fill({color:0,alpha:G})}cs(k,{width:m,height:v,backgroundColor:h,backgroundAlpha:1,borderRadius:c.borderRadius,border:L>0?{width:L,color:p}:void 0})},[o,m,v,c.borderRadius,h,p]),B=C.useMemo(()=>new bn({fontFamily:"Pretendard, sans-serif",fontSize:14,fill:f,fontWeight:"400",wordWrap:!0,wordWrapWidth:m-c.padding*2}),[f,m,c.padding]),D=C.useMemo(()=>E?{x:c.padding,y:c.padding}:{x:0,y:0},[E,c.padding]),T=C.useCallback(()=>{a(!0)},[]),M=C.useCallback(()=>{a(!1)},[]),R=C.useCallback(()=>{n?.(e.id)},[e.id,n]);return d.jsxs("pixiContainer",{x:A,y:x,children:[d.jsx("pixiGraphics",{draw:w,eventMode:"static",cursor:"pointer",onPointerEnter:T,onPointerLeave:M,onPointerDown:R}),E&&d.jsx("pixiText",{text:E,style:B,x:D.x,y:D.y,eventMode:"static",cursor:"pointer",onPointerEnter:T,onPointerLeave:M,onPointerDown:R})]})}),dct=C.memo(function({element:e,onClick:n}){mn(pn);const r=e.props?.style,i=e.props,s=je(M=>M.elements),a=C.useMemo(()=>s.filter(M=>M.parent_id===e.id&&(M.tag==="MenuItem"||M.tag==="MenuSeparator"||M.tag==="Separator")).sort((M,R)=>(M.order_num||0)-(R.order_num||0)),[s,e.id]),o=C.useMemo(()=>String(i?.variant||"default"),[i?.variant]),l=C.useMemo(()=>String(i?.size||"md"),[i?.size]),c=C.useMemo(()=>Ost(l),[l]),u=C.useMemo(()=>zst(o),[o]),[h,f]=C.useState(null),p=C.useMemo(()=>r?.backgroundColor?wr(r.backgroundColor,u.backgroundColor):u.backgroundColor,[r?.backgroundColor,u.backgroundColor]),m=C.useMemo(()=>r?.borderColor?wr(r.borderColor,u.borderColor):u.borderColor,[r?.borderColor,u.borderColor]),v=ot(r?.left,void 0,0),A=ot(r?.top,void 0,0),x=C.useMemo(()=>{const M=[];let R=c.containerPadding,k=c.minWidth;const L=new bn({fontFamily:"Pretendard, sans-serif",fontSize:c.fontSize,fontWeight:"600"});return a.forEach(F=>{const z=F.tag==="MenuSeparator"||F.tag==="Separator",G=!!F.props?.isDisabled;if(z)M.push({id:F.id,text:"",isSeparator:!0,y:R,height:1+c.itemPaddingY*2}),R+=1+c.itemPaddingY*2;else{const V=String(F.props?.children||F.props?.text||F.props?.title||"Menu Item"),q=F.props?.shortcut,O=os.measureText(V,L),H=q?os.measureText(q,L).width+20:0,K=c.itemPaddingX*2+O.width+H+20;k=Math.max(k,K);const X=c.fontSize+c.itemPaddingY*2;M.push({id:F.id,text:V,shortcut:q,isDisabled:G,y:R,height:X}),R+=X}}),{items:M,totalWidth:k+c.containerPadding*2,totalHeight:R+c.containerPadding}},[a,c]),E=C.useCallback(M=>{M.clear(),cs(M,{width:x.totalWidth,height:x.totalHeight,backgroundColor:p,backgroundAlpha:1,borderRadius:c.borderRadius,border:m!==0?{width:1,color:m}:void 0})},[x.totalWidth,x.totalHeight,p,m,c.borderRadius]),w=C.useCallback((M,R,k)=>{M.clear(),R.isSeparator?(M.rect(c.containerPadding,0,x.totalWidth-c.containerPadding*2,1),M.fill({color:u.separatorColor,alpha:.3})):k&&!R.isDisabled&&(M.roundRect(c.containerPadding/2,0,x.totalWidth-c.containerPadding,R.height,4),M.fill({color:u.hoverBgColor}))},[x.totalWidth,c.containerPadding,u]),B=C.useCallback((M,R)=>new bn({fontFamily:"Pretendard, sans-serif",fontSize:c.fontSize,fill:R?10265519:M?u.hoverTextColor:u.textColor,fontWeight:"600"}),[c.fontSize,u]),D=C.useMemo(()=>new bn({fontFamily:"monospace",fontSize:c.fontSize-2,fill:10265519,fontWeight:"400"}),[c.fontSize]),T=C.useCallback(M=>{!M.isSeparator&&!M.isDisabled&&n?.(M.id)},[n]);return d.jsxs("pixiContainer",{x:v,y:A,children:[d.jsx("pixiGraphics",{draw:E}),x.items.map((M,R)=>{const k=h===R;return d.jsxs("pixiContainer",{x:0,y:M.y,children:[d.jsx("pixiGraphics",{draw:L=>w(L,M,k),eventMode:"static",cursor:M.isSeparator||M.isDisabled?"default":"pointer",onPointerEnter:()=>!M.isSeparator&&f(R),onPointerLeave:()=>f(null),onPointerDown:()=>T(M)}),!M.isSeparator&&d.jsxs(d.Fragment,{children:[d.jsx("pixiText",{text:M.text,style:B(k,!!M.isDisabled),x:c.containerPadding+c.itemPaddingX,y:c.itemPaddingY,eventMode:"static",cursor:M.isDisabled?"default":"pointer",onPointerEnter:()=>f(R),onPointerLeave:()=>f(null),onPointerDown:()=>T(M)}),M.shortcut&&d.jsx("pixiText",{text:M.shortcut,style:D,x:x.totalWidth-c.containerPadding-c.itemPaddingX-40,y:c.itemPaddingY+1})]})]},M.id)})]})}),hct=C.memo(function({element:e,onClick:n}){mn(pn);const r=e.props?.style,i=e.props,s=je(k=>k.elements),a=C.useMemo(()=>s.filter(k=>k.parent_id===e.id&&k.tag==="Tab").sort((k,L)=>(k.order_num||0)-(L.order_num||0)),[s,e.id]),o=C.useMemo(()=>String(i?.variant||"default"),[i?.variant]),l=C.useMemo(()=>String(i?.size||"md"),[i?.size]),u=C.useMemo(()=>String(i?.orientation||"horizontal"),[i?.orientation])==="vertical",[h,f]=C.useState(()=>i?.selectedKey?i.selectedKey:a.length>0?a[0].props?.tabId||a[0].id:null),p=C.useMemo(()=>Qst(l),[l]),m=C.useMemo(()=>Ust(o),[o]),[v,A]=C.useState(null),x=ot(r?.left,void 0,0),E=ot(r?.top,void 0,0),w=C.useMemo(()=>{const k=[];let L=0,F=0,z=0,G=0;const V=new bn({fontFamily:"Pretendard, sans-serif",fontSize:p.fontSize,fontWeight:"500"});return a.forEach(q=>{const O=String(q.props?.children||q.props?.text||q.props?.title||"Tab"),H=q.props?.tabId||q.id,K=!!q.props?.isDisabled,re=os.measureText(O,V).width+p.tabPaddingX*2,J=p.fontSize+p.tabPaddingY*2;k.push({id:q.id,tabId:H,text:O,isDisabled:K,x:u?0:L,y:u?F:0,width:re,height:J}),u?(F+=J,z=Math.max(z,re),G=F):(L+=re,z=L,G=Math.max(G,J))}),{tabs:k,totalWidth:z,totalHeight:G}},[a,p,u]),B=C.useCallback(k=>{k.clear(),k.setStrokeStyle({width:1,color:m.borderColor}),u?(k.moveTo(w.totalWidth,0),k.lineTo(w.totalWidth,w.totalHeight)):(k.moveTo(0,w.totalHeight),k.lineTo(w.totalWidth,w.totalHeight)),k.stroke()},[u,w.totalWidth,w.totalHeight,m.borderColor]),D=C.useCallback((k,L)=>{k.clear(),L.tabId===h&&(k.rect(0,0,u?p.indicatorHeight:L.width,u?L.height:p.indicatorHeight),k.fill({color:m.indicatorColor}))},[h,u,p.indicatorHeight,m.indicatorColor]),T=C.useCallback((k,L,F)=>{k.clear(),F&&!L.isDisabled&&L.tabId!==h&&(k.rect(0,0,L.width,L.height),k.fill({color:m.hoverBgColor}))},[h,m.hoverBgColor]),M=C.useCallback((k,L,F)=>new bn({fontFamily:"Pretendard, sans-serif",fontSize:p.fontSize,fill:F?10265519:k||L?m.selectedTextColor:m.textColor,fontWeight:"500"}),[p.fontSize,m]),R=C.useCallback(k=>{k.isDisabled||(f(k.tabId),n?.(k.id))},[n]);return d.jsxs("pixiContainer",{x,y:E,children:[d.jsx("pixiGraphics",{draw:B}),w.tabs.map((k,L)=>{const F=v===L,z=k.tabId===h,G=u?k.width-p.indicatorHeight:0,V=u?0:k.height-p.indicatorHeight;return d.jsxs("pixiContainer",{x:k.x,y:k.y,children:[d.jsx("pixiGraphics",{draw:q=>T(q,k,F),eventMode:"static",cursor:k.isDisabled?"not-allowed":"pointer",onPointerEnter:()=>!k.isDisabled&&A(L),onPointerLeave:()=>A(null),onPointerDown:()=>R(k)}),d.jsx("pixiText",{text:k.text,style:M(z,F,!!k.isDisabled),x:p.tabPaddingX,y:p.tabPaddingY,eventMode:"static",cursor:k.isDisabled?"not-allowed":"pointer",onPointerEnter:()=>!k.isDisabled&&A(L),onPointerLeave:()=>A(null),onPointerDown:()=>R(k)}),d.jsx("pixiContainer",{x:G,y:V,children:d.jsx("pixiGraphics",{draw:q=>D(q,k)})})]},k.id)})]})}),fct=C.memo(function({element:e,onClick:n}){mn(pn);const r=e.props?.style,i=e.props,s=C.useMemo(()=>String(i?.variant||"default"),[i?.variant]),a=C.useMemo(()=>String(i?.size||"md"),[i?.size]),o=C.useMemo(()=>String(i?.label||""),[i?.label]),l=C.useMemo(()=>Number(i?.value??0),[i?.value]),c=!!i?.isDisabled,u=C.useMemo(()=>Gst(a),[a]),h=C.useMemo(()=>Vst(s),[s]),[f,p]=C.useState(null),m=ot(r?.left,void 0,0),v=ot(r?.top,void 0,0),A=u.paddingY*2+u.fontSize;u.buttonWidth*2+u.inputWidth;const x=o?u.labelFontSize+4:0,E=C.useCallback(k=>{k.clear();const F=c?17:f==="decrement"?h.buttonHoverBgColor:h.buttonBgColor;k.roundRect(0,0,u.buttonWidth,A,u.borderRadius),k.fill({color:F}),k.setStrokeStyle({width:1,color:h.borderColor}),k.stroke()},[f,c,h,u,A]),w=C.useCallback(k=>{k.clear();const F=c?17:f==="increment"?h.buttonHoverBgColor:h.buttonBgColor;k.roundRect(0,0,u.buttonWidth,A,u.borderRadius),k.fill({color:F}),k.setStrokeStyle({width:1,color:h.borderColor}),k.stroke()},[f,c,h,u,A]),B=C.useCallback(k=>{k.clear(),k.rect(0,0,u.inputWidth,A),k.fill({color:h.backgroundColor}),k.setStrokeStyle({width:1,color:h.borderColor}),k.stroke()},[h,u,A]),D=C.useMemo(()=>new bn({fontFamily:"Pretendard, sans-serif",fontSize:u.fontSize,fill:c?10265519:h.textColor,fontWeight:"500"}),[u.fontSize,c,h.textColor]),T=C.useMemo(()=>new bn({fontFamily:"Pretendard, sans-serif",fontSize:u.labelFontSize,fill:h.labelColor,fontWeight:"500"}),[u.labelFontSize,h.labelColor]),M=C.useMemo(()=>new bn({fontFamily:"Pretendard, sans-serif",fontSize:u.fontSize,fill:c?10265519:h.textColor,fontWeight:"400"}),[u.fontSize,c,h.textColor]),R=C.useCallback(()=>{n?.(e.id)},[n,e.id]);return d.jsxs("pixiContainer",{x:m,y:v,children:[o&&d.jsx("pixiText",{text:o,style:T,x:0,y:0}),d.jsxs("pixiContainer",{y:x,children:[d.jsx("pixiGraphics",{draw:E,x:0,y:0,eventMode:"static",cursor:c?"not-allowed":"pointer",onPointerEnter:()=>!c&&p("decrement"),onPointerLeave:()=>p(null),onPointerDown:R}),d.jsx("pixiText",{text:"",style:D,x:u.buttonWidth/2,y:A/2,anchor:.5}),d.jsx("pixiGraphics",{draw:B,x:u.buttonWidth,y:0,eventMode:"static",cursor:"text",onPointerDown:R}),d.jsx("pixiText",{text:String(l),style:M,x:u.buttonWidth+u.inputWidth/2,y:A/2,anchor:.5}),d.jsx("pixiGraphics",{draw:w,x:u.buttonWidth+u.inputWidth,y:0,eventMode:"static",cursor:c?"not-allowed":"pointer",onPointerEnter:()=>!c&&p("increment"),onPointerLeave:()=>p(null),onPointerDown:R}),d.jsx("pixiText",{text:"+",style:D,x:u.buttonWidth+u.inputWidth+u.buttonWidth/2,y:A/2,anchor:.5})]})]})}),pct=C.memo(function({element:e,onClick:n}){mn(pn);const r=e.props?.style,i=e.props,s=C.useMemo(()=>String(i?.variant||"default"),[i?.variant]),a=C.useMemo(()=>String(i?.size||"md"),[i?.size]),o=C.useMemo(()=>String(i?.label||""),[i?.label]),l=C.useMemo(()=>String(i?.value||""),[i?.value]),c=C.useMemo(()=>String(i?.placeholder||"Search..."),[i?.placeholder]),u=!!i?.isDisabled,h=l.length>0,f=C.useMemo(()=>Kst(a),[a]),p=C.useMemo(()=>qst(s),[s]),[m,v]=C.useState(!1),A=ot(r?.left,void 0,0),x=ot(r?.top,void 0,0),E=f.paddingY*2+f.fontSize,w=o?f.labelFontSize+4:0,B=C.useCallback(F=>{F.clear(),F.roundRect(0,0,f.inputWidth,E,f.borderRadius),F.fill({color:p.backgroundColor}),F.setStrokeStyle({width:1,color:p.borderColor}),F.stroke()},[p,f,E]),D=C.useCallback(F=>{if(F.clear(),!h)return;const z=f.clearButtonSize,G=m?p.clearButtonHoverBgColor:p.clearButtonBgColor;F.circle(z/2,z/2,z/2),F.fill({color:G});const V=z*.3;F.setStrokeStyle({width:2,color:p.textColor}),F.moveTo(V,V),F.lineTo(z-V,z-V),F.moveTo(z-V,V),F.lineTo(V,z-V),F.stroke()},[h,m,p,f.clearButtonSize]),T=C.useMemo(()=>new bn({fontFamily:"Pretendard, sans-serif",fontSize:f.labelFontSize,fill:p.labelColor,fontWeight:"500"}),[f.labelFontSize,p.labelColor]),M=C.useMemo(()=>new bn({fontFamily:"Pretendard, sans-serif",fontSize:f.fontSize,fill:u?10265519:h?p.textColor:p.placeholderColor,fontWeight:"400"}),[f.fontSize,u,h,p.textColor,p.placeholderColor]),R=C.useCallback(()=>{n?.(e.id)},[n,e.id]),k=f.inputWidth-f.clearButtonSize-f.paddingX,L=(E-f.clearButtonSize)/2;return d.jsxs("pixiContainer",{x:A,y:x,children:[o&&d.jsx("pixiText",{text:o,style:T,x:0,y:0}),d.jsxs("pixiContainer",{y:w,children:[d.jsx("pixiGraphics",{draw:B,eventMode:"static",cursor:"text",onPointerDown:R}),d.jsx("pixiText",{text:"",style:new bn({fontFamily:"Pretendard, sans-serif",fontSize:f.fontSize-2,fill:p.placeholderColor}),x:f.paddingX,y:E/2,anchor:{x:0,y:.5}}),d.jsx("pixiText",{text:h?l:c,style:M,x:f.paddingX+f.fontSize+4,y:E/2,anchor:{x:0,y:.5}}),h&&d.jsx("pixiGraphics",{draw:D,x:k,y:L,eventMode:"static",cursor:"pointer",onPointerEnter:()=>v(!0),onPointerLeave:()=>v(!1),onPointerDown:R})]})]})}),gct=C.memo(function({element:e,onClick:n}){mn(pn);const r=e.props?.style,i=e.props,s=je(J=>J.elements),a=C.useMemo(()=>s.filter(J=>J.parent_id===e.id&&J.tag==="ComboBoxItem").sort((J,Z)=>(J.order_num||0)-(Z.order_num||0)),[s,e.id]),o=C.useMemo(()=>String(i?.variant||"default"),[i?.variant]),l=C.useMemo(()=>String(i?.size||"md"),[i?.size]),c=C.useMemo(()=>String(i?.label||""),[i?.label]),u=C.useMemo(()=>String(i?.value||""),[i?.value]),h=C.useMemo(()=>String(i?.placeholder||"Select..."),[i?.placeholder]),f=!!i?.isDisabled,p=!!i?.isOpen,m=C.useMemo(()=>Xst(l),[l]),v=C.useMemo(()=>Jst(o),[o]),[A,x]=C.useState(!1),[E,w]=C.useState(null),B=ot(r?.left,void 0,0),D=ot(r?.top,void 0,0),T=m.paddingY*2+m.fontSize,M=c?m.labelFontSize+4:0,R=C.useMemo(()=>a.map(J=>({id:J.id,text:String(J.props?.children||J.props?.text||J.props?.textValue||"Item"),isSelected:!!J.props?.isSelected,isDisabled:!!J.props?.isDisabled})),[a]),k=C.useMemo(()=>{const J=m.itemPaddingY*2+m.fontSize;return Math.min(R.length,5)*J+m.paddingY*2},[R.length,m]),L=C.useCallback(J=>{J.clear(),J.roundRect(0,0,m.inputWidth,T,m.borderRadius),J.fill({color:v.backgroundColor}),J.setStrokeStyle({width:1,color:v.borderColor}),J.stroke()},[v,m,T]),F=C.useCallback(J=>{J.clear();const Z=m.buttonSize,ee=A?v.buttonHoverBgColor:v.buttonBgColor;J.roundRect(0,0,Z,Z,4),J.fill({color:ee});const te=Z*.4,oe=Z/2,ae=Z/2;J.setStrokeStyle({width:2,color:v.textColor}),J.moveTo(oe-te/2,ae-te/4),J.lineTo(oe,ae+te/4),J.lineTo(oe+te/2,ae-te/4),J.stroke()},[A,v,m.buttonSize]),z=C.useCallback(J=>{J.clear(),p&&(J.roundRect(0,0,m.inputWidth,k,m.borderRadius),J.fill({color:v.dropdownBgColor}),J.setStrokeStyle({width:1,color:v.borderColor}),J.stroke())},[p,v,m,k]),G=C.useCallback((J,Z,ee)=>{J.clear();const te=m.itemPaddingY*2+m.fontSize,oe=E===ee;let ae=0;Z.isSelected?ae=v.itemSelectedBgColor:oe&&!Z.isDisabled&&(ae=v.itemHoverBgColor),ae!==0&&(J.roundRect(m.paddingX/2,0,m.inputWidth-m.paddingX,te,4),J.fill({color:ae}))},[E,v,m]),V=C.useMemo(()=>new bn({fontFamily:"Pretendard, sans-serif",fontSize:m.labelFontSize,fill:v.labelColor,fontWeight:"500"}),[m.labelFontSize,v.labelColor]),q=C.useMemo(()=>new bn({fontFamily:"Pretendard, sans-serif",fontSize:m.fontSize,fill:f?10265519:u?v.textColor:v.placeholderColor,fontWeight:"400"}),[m.fontSize,f,u,v.textColor,v.placeholderColor]),O=C.useCallback(J=>new bn({fontFamily:"Pretendard, sans-serif",fontSize:m.fontSize,fill:J.isDisabled?10265519:J.isSelected?v.itemSelectedTextColor:v.textColor,fontWeight:J.isSelected?"500":"400"}),[m.fontSize,v]),H=C.useCallback(()=>{n?.(e.id)},[n,e.id]),K=m.inputWidth-m.buttonSize-m.paddingX,X=(T-m.buttonSize)/2,re=m.itemPaddingY*2+m.fontSize;return d.jsxs("pixiContainer",{x:B,y:D,children:[c&&d.jsx("pixiText",{text:c,style:V,x:0,y:0}),d.jsxs("pixiContainer",{y:M,children:[d.jsx("pixiGraphics",{draw:L,eventMode:"static",cursor:"text",onPointerDown:H}),d.jsx("pixiText",{text:u||h,style:q,x:m.paddingX,y:T/2,anchor:{x:0,y:.5}}),d.jsx("pixiGraphics",{draw:F,x:K,y:X,eventMode:"static",cursor:"pointer",onPointerEnter:()=>x(!0),onPointerLeave:()=>x(!1),onPointerDown:H}),p&&d.jsxs("pixiContainer",{y:T+4,children:[d.jsx("pixiGraphics",{draw:z}),R.map((J,Z)=>d.jsxs("pixiContainer",{x:0,y:m.paddingY+Z*re,children:[d.jsx("pixiGraphics",{draw:ee=>G(ee,J,Z),eventMode:"static",cursor:J.isDisabled?"not-allowed":"pointer",onPointerEnter:()=>!J.isDisabled&&w(Z),onPointerLeave:()=>w(null),onPointerDown:()=>!J.isDisabled&&n?.(J.id)}),d.jsx("pixiText",{text:J.text,style:O(J),x:m.itemPaddingX,y:re/2,anchor:{x:0,y:.5}})]},J.id))]})]})]})});function mct({element:t,isSelected:e=!1,onClick:n,onChange:r}){mn(pn);const i=t.props||{},s=i.variant||"default",a=i.size||"md",o=C.useMemo(()=>eat(a),[a]),l=C.useMemo(()=>tat(s),[s]),c=je(T=>T.elements),u=C.useMemo(()=>c.filter(T=>T.parent_id===t.id&&T.tag==="GridListItem").sort((T,M)=>(T.order_num||0)-(M.order_num||0)).map(T=>({id:T.id,text:T.props?.children||T.props?.textValue||"Item",isSelected:T.props?.isSelected||!1})),[c,t.id]),[h,f]=C.useState(null),p=200,m=Math.min(300,o.listPadding*2+u.length*(o.itemMinHeight+o.listGap)-o.listGap),v=C.useMemo(()=>new bn({fontSize:o.fontSize,fill:l.textColor,fontFamily:"Inter, system-ui, sans-serif"}),[o.fontSize,l.textColor]),A=C.useMemo(()=>new bn({fontSize:o.fontSize,fill:l.itemSelectedTextColor,fontFamily:"Inter, system-ui, sans-serif",fontWeight:"500"}),[o.fontSize,l.itemSelectedTextColor]),x=C.useCallback(T=>{T.clear(),T.roundRect(0,0,p,m,o.borderRadius),T.fill(l.backgroundColor),T.stroke({width:1,color:l.borderColor}),e&&(T.roundRect(-2,-2,p+4,m+4,o.borderRadius+2),T.stroke({width:2,color:l.focusColor}))},[p,m,o.borderRadius,l,e]),E=C.useCallback((T,M,R,k,L)=>{T.clear();let F=l.backgroundColor;L?F=l.itemSelectedBgColor:k&&(F=l.itemHoverBgColor),T.roundRect(0,0,M,R,4),T.fill(F)},[l]),w=C.useCallback(T=>{r&&r(t.id,{selectedItemId:T})},[t.id,r]),B=C.useCallback(()=>{n&&n(t.id)},[t.id,n]),D=p-o.listPadding*2;return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",pointerdown:B,children:[d.jsx("pixiGraphics",{draw:x}),u.map((T,M)=>{const R=o.listPadding+M*(o.itemMinHeight+o.listGap),k=h===T.id,L=T.isSelected;return d.jsxs("pixiContainer",{x:o.listPadding,y:R,eventMode:"static",cursor:"pointer",pointerover:()=>f(T.id),pointerout:()=>f(null),pointerdown:F=>{F.stopPropagation(),w(T.id)},children:[d.jsx("pixiGraphics",{draw:F=>E(F,D,o.itemMinHeight,k,L)}),d.jsx(Text,{text:T.text,style:L?A:v,x:o.itemPaddingX,y:(o.itemMinHeight-o.fontSize)/2})]},T.id)}),u.length===0&&d.jsx(Text,{text:"No items",style:new bn({fontSize:o.fontSize,fill:10265519,fontFamily:"Inter, system-ui, sans-serif",fontStyle:"italic"}),x:p/2,y:m/2,anchor:.5})]})}function Act({element:t,isSelected:e=!1,onClick:n,onChange:r}){mn(pn);const i=t.props||{},s=i.variant||"default",a=i.size||"md",o=i.label||"",l=C.useMemo(()=>rat(a),[a]),c=C.useMemo(()=>iat(s),[s]),u=je(M=>M.elements),h=C.useMemo(()=>u.filter(M=>M.parent_id===t.id&&M.tag==="Tag").sort((M,R)=>(M.order_num||0)-(R.order_num||0)).map(M=>({id:M.id,text:M.props?.children||M.props?.textValue||"Tag",isSelected:M.props?.isSelected||!1,isRemovable:M.props?.isRemovable||!1})),[u,t.id]),[f,p]=C.useState(null),m=C.useMemo(()=>{const M=[];let R=0,k=o?l.fontSize+8:0;const L=300;return h.forEach(F=>{const G=F.text.length*l.fontSize*.6+l.tagPaddingX*2+(F.isRemovable?20:0);R+G>L&&R>0&&(R=0,k+=l.fontSize+l.tagPaddingY*2+l.tagGap),M.push({x:R,y:k,width:G}),R+=G+l.tagGap}),M},[h,l,o]),v=C.useMemo(()=>m.length===0?40:m[m.length-1].y+l.fontSize+l.tagPaddingY*2+4,[m,l]),A=C.useMemo(()=>new bn({fontSize:l.fontSize-2,fill:7041664,fontFamily:"Inter, system-ui, sans-serif"}),[l.fontSize]);C.useMemo(()=>new bn({fontSize:l.fontSize,fill:c.textColor,fontFamily:"Inter, system-ui, sans-serif"}),[l.fontSize,c.textColor]);const x=C.useCallback(M=>{if(M.clear(),e){const R=Math.max(...m.map(k=>k.x+k.width),100);M.roundRect(-4,-4,R+8,v+8,4),M.stroke({width:2,color:3900150})}},[e,m,v]),E=C.useCallback((M,R,k,L)=>{M.clear();let F=c.backgroundColor;L?F=c.selectedBgColor:k&&(F=c.hoverBgColor);const z=l.fontSize+l.tagPaddingY*2;M.roundRect(0,0,R,z,l.borderRadius),M.fill(F),M.stroke({width:1,color:c.borderColor})},[l,c]),w=C.useCallback((M,R)=>{M.clear();const k=14;R&&(M.circle(k/2,k/2,k/2),M.fill(32)),M.moveTo(4,4),M.lineTo(k-4,k-4),M.moveTo(k-4,4),M.lineTo(4,k-4),M.stroke({width:1.5,color:c.removeButtonColor})},[c.removeButtonColor]),B=C.useCallback(M=>{r&&r(t.id,{selectedTagId:M})},[t.id,r]),D=C.useCallback((M,R)=>{R.stopPropagation(),r&&r(t.id,{removedTagId:M})},[t.id,r]),T=C.useCallback(()=>{n&&n(t.id)},[t.id,n]);return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",pointerdown:T,children:[d.jsx("pixiGraphics",{draw:x}),o&&d.jsx("pixiText",{text:o,style:A,x:0,y:0}),h.map((M,R)=>{const k=m[R];if(!k)return null;const L=f===M.id,F=l.fontSize+l.tagPaddingY*2,z=M.isSelected||s!=="default"&&s!=="surface"?c.selectedTextColor:c.textColor;return d.jsxs("pixiContainer",{x:k.x,y:k.y,eventMode:"static",cursor:"pointer",pointerover:()=>p(M.id),pointerout:()=>p(null),pointerdown:G=>{G.stopPropagation(),B(M.id)},children:[d.jsx("pixiGraphics",{draw:G=>E(G,k.width,L,M.isSelected||!1)}),d.jsx(Text,{text:M.text,style:new bn({fontSize:l.fontSize,fill:z,fontFamily:"Inter, system-ui, sans-serif"}),x:l.tagPaddingX,y:l.tagPaddingY}),M.isRemovable&&d.jsx("pixiContainer",{x:k.width-18,y:(F-14)/2,eventMode:"static",cursor:"pointer",pointerdown:G=>D(M.id,G),children:d.jsx("pixiGraphics",{draw:G=>w(G,L)})})]},M.id)}),h.length===0&&d.jsx(Text,{text:"No tags",style:new bn({fontSize:l.fontSize,fill:10265519,fontFamily:"Inter, system-ui, sans-serif",fontStyle:"italic"}),x:0,y:o?l.fontSize+8:0})]})}function yct({element:t,isSelected:e=!1,onClick:n,onChange:r}){mn(pn);const i=t.props||{},s=i.variant||"default",a=i.size||"md",o=C.useMemo(()=>aat(a),[a]),l=C.useMemo(()=>oat(s),[s]),[c,u]=C.useState(new Set),[h,f]=C.useState(null),p=je(L=>L.elements),m=C.useMemo(()=>{const L=[],F=(z,G)=>{p.filter(q=>q.parent_id===z&&q.tag==="TreeItem").sort((q,O)=>(q.order_num||0)-(O.order_num||0)).forEach(q=>{const H=p.filter(X=>X.parent_id===q.id&&X.tag==="TreeItem").length>0,K=c.has(q.id);L.push({id:q.id,text:q.props?.children||q.props?.textValue||"Item",depth:G,hasChildren:H,isExpanded:K,isSelected:q.props?.isSelected||!1,parentId:z}),H&&K&&F(q.id,G+1)})};return F(t.id,0),L},[p,t.id,c]),v=250,A=Math.max(80,o.treePadding*2+m.length*(o.itemMinHeight+o.treeGap)-(m.length>0?o.treeGap:0)),x=C.useMemo(()=>new bn({fontSize:o.fontSize,fill:l.textColor,fontFamily:"Inter, system-ui, sans-serif"}),[o.fontSize,l.textColor]),E=C.useMemo(()=>new bn({fontSize:o.fontSize,fill:l.itemSelectedTextColor,fontFamily:"Inter, system-ui, sans-serif",fontWeight:"500"}),[o.fontSize,l.itemSelectedTextColor]),w=C.useCallback(L=>{L.clear(),L.roundRect(0,0,v,A,o.borderRadius),L.fill(l.backgroundColor),L.stroke({width:1,color:l.borderColor}),e&&(L.roundRect(-2,-2,v+4,A+4,o.borderRadius+2),L.stroke({width:2,color:l.focusColor}))},[v,A,o.borderRadius,l,e]),B=C.useCallback((L,F,z,G,V)=>{L.clear();let q=4294967040;V?q=l.itemSelectedBgColor:G&&(q=l.itemHoverBgColor),q!==4294967040&&(L.roundRect(0,0,F,z,4),L.fill(q))},[l]),D=C.useCallback((L,F,z)=>{if(L.clear(),!z)return;const G=o.chevronSize,V=G/2,q=G/2;L.setTransform(V,q),F&&(L.rotation=Math.PI/2),L.moveTo(-3,-5),L.lineTo(3,0),L.lineTo(-3,5),L.stroke({width:2,color:l.chevronColor}),L.setTransform(0,0)},[o.chevronSize,l.chevronColor]),T=C.useCallback(L=>{u(F=>{const z=new Set(F);return z.has(L)?z.delete(L):z.add(L),z})},[]),M=C.useCallback(L=>{r&&r(t.id,{selectedItemId:L})},[t.id,r]),R=C.useCallback(()=>{n&&n(t.id)},[t.id,n]),k=v-o.treePadding*2;return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",pointerdown:R,children:[d.jsx("pixiGraphics",{draw:w}),m.map((L,F)=>{const z=o.treePadding+F*(o.itemMinHeight+o.treeGap),G=L.depth*o.indentSize,V=h===L.id;return d.jsxs("pixiContainer",{x:o.treePadding,y:z,eventMode:"static",cursor:"pointer",pointerover:()=>f(L.id),pointerout:()=>f(null),pointerdown:q=>{q.stopPropagation(),M(L.id)},children:[d.jsx("pixiGraphics",{draw:q=>B(q,k,o.itemMinHeight,V,L.isSelected||!1)}),L.hasChildren&&d.jsx("pixiContainer",{x:G,y:(o.itemMinHeight-o.chevronSize)/2,eventMode:"static",cursor:"pointer",pointerdown:q=>{q.stopPropagation(),T(L.id)},children:d.jsx("pixiGraphics",{draw:q=>D(q,L.isExpanded,L.hasChildren)})}),d.jsx(Text,{text:L.text,style:L.isSelected?E:x,x:G+o.chevronSize+4,y:(o.itemMinHeight-o.fontSize)/2})]},L.id)}),m.length===0&&d.jsx(Text,{text:"No items",style:new bn({fontSize:o.fontSize,fill:10265519,fontFamily:"Inter, system-ui, sans-serif",fontStyle:"italic"}),x:v/2,y:A/2,anchor:.5})]})}function vct({element:t,isSelected:e=!1,onClick:n,onChange:r}){mn(pn);const i=t.props||{},s=i.variant||"default",a=i.size||"md",o=C.useMemo(()=>cat(a),[a]),l=C.useMemo(()=>uat(s),[s]),[c,u]=C.useState(null),h=je(L=>L.elements),f=C.useMemo(()=>{const L=[],F=h.find(z=>z.parent_id===t.id&&(z.tag==="TableHeader"||z.tag==="ColumnGroup"));return F&&h.filter(G=>G.parent_id===F.id&&G.tag==="Column").sort((G,V)=>(G.order_num||0)-(V.order_num||0)).forEach(G=>{L.push({id:G.id,label:G.props?.children||G.props?.label||"Column",width:G.props?.width||100})}),L.length===0&&(L.push({id:"col1",label:"Column 1",width:100}),L.push({id:"col2",label:"Column 2",width:100})),L},[h,t.id]),p=C.useMemo(()=>{const L=[],z=h.find(V=>V.parent_id===t.id&&V.tag==="TableBody")?.id||t.id;return h.filter(V=>V.parent_id===z&&V.tag==="Row").sort((V,q)=>(V.order_num||0)-(q.order_num||0)).forEach(V=>{const O=h.filter(H=>H.parent_id===V.id&&H.tag==="Cell").sort((H,K)=>(H.order_num||0)-(K.order_num||0)).map(H=>({id:H.id,value:H.props?.children||H.props?.value||""}));for(;O.length<f.length;)O.push({id:`empty-${O.length}`,value:""});L.push({id:V.id,cells:O,isSelected:V.props?.isSelected||!1})}),L},[h,t.id,f.length]),m=f.reduce((L,F)=>L+F.width,0),v=o.rowMinHeight,A=v+p.length*o.rowMinHeight+(p.length>0?0:40),x=C.useMemo(()=>new bn({fontSize:o.headerFontSize,fill:l.headerTextColor,fontFamily:"Inter, system-ui, sans-serif",fontWeight:"500"}),[o.headerFontSize,l.headerTextColor]),E=C.useMemo(()=>new bn({fontSize:o.fontSize,fill:l.textColor,fontFamily:"Inter, system-ui, sans-serif"}),[o.fontSize,l.textColor]),w=C.useMemo(()=>new bn({fontSize:o.fontSize,fill:l.rowSelectedTextColor,fontFamily:"Inter, system-ui, sans-serif"}),[o.fontSize,l.rowSelectedTextColor]),B=C.useCallback(L=>{L.clear(),L.roundRect(0,0,m,A,o.borderRadius),L.fill(l.backgroundColor),L.stroke({width:1,color:l.borderColor}),e&&(L.roundRect(-2,-2,m+4,A+4,o.borderRadius+2),L.stroke({width:2,color:l.focusColor}))},[m,A,o.borderRadius,l,e]),D=C.useCallback(L=>{L.clear(),L.roundRect(0,0,m,v,[o.borderRadius,o.borderRadius,0,0]),L.fill(l.headerBgColor),L.moveTo(0,v),L.lineTo(m,v),L.stroke({width:1,color:l.borderColor})},[m,v,o.borderRadius,l]),T=C.useCallback((L,F)=>{L.clear(),L.moveTo(0,0),L.lineTo(0,F),L.stroke({width:1,color:l.borderColor,alpha:.5})},[l.borderColor]),M=C.useCallback((L,F,z,G,V)=>{L.clear();let q=4294967040;V?q=l.rowSelectedBgColor:G&&(q=l.rowHoverBgColor),q!==4294967040&&(L.rect(0,0,F,z),L.fill(q)),L.moveTo(0,z),L.lineTo(F,z),L.stroke({width:1,color:l.borderColor,alpha:.3})},[l]),R=C.useCallback(L=>{r&&r(t.id,{selectedRowId:L})},[t.id,r]),k=C.useCallback(()=>{n&&n(t.id)},[t.id,n]);return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",pointerdown:k,children:[d.jsx("pixiGraphics",{draw:B}),d.jsxs("pixiContainer",{y:0,children:[d.jsx("pixiGraphics",{draw:D}),f.map((L,F)=>{const z=f.slice(0,F).reduce((G,V)=>G+V.width,0);return d.jsxs("pixiContainer",{x:z,children:[F>0&&d.jsx("pixiGraphics",{draw:G=>T(G,v)}),d.jsx(Text,{text:L.label,style:x,x:o.cellPaddingX,y:(v-o.headerFontSize)/2})]},L.id)})]}),p.map((L,F)=>{const z=v+F*o.rowMinHeight,G=c===L.id;return d.jsxs("pixiContainer",{y:z,eventMode:"static",cursor:"pointer",pointerover:()=>u(L.id),pointerout:()=>u(null),pointerdown:V=>{V.stopPropagation(),R(L.id)},children:[d.jsx("pixiGraphics",{draw:V=>M(V,m,o.rowMinHeight,G,L.isSelected||!1)}),f.map((V,q)=>{const O=f.slice(0,q).reduce((K,X)=>K+X.width,0),H=L.cells[q]?.value||"";return d.jsxs("pixiContainer",{x:O,children:[q>0&&d.jsx("pixiGraphics",{draw:K=>T(K,o.rowMinHeight)}),d.jsx(Text,{text:H,style:L.isSelected?w:E,x:o.cellPaddingX,y:(o.rowMinHeight-o.fontSize)/2})]},`${L.id}-${V.id}`)})]},L.id)}),p.length===0&&d.jsx(Text,{text:"No data",style:new bn({fontSize:o.fontSize,fill:10265519,fontFamily:"Inter, system-ui, sans-serif",fontStyle:"italic"}),x:m/2,y:v+20,anchor:{x:.5,y:0}})]})}function xct({element:t,isSelected:e=!1,onClick:n,onChange:r}){mn(pn);const i=t.props||{},s=i.variant||"default",a=i.size||"md",o=i.title||i.label||"Disclosure",l=i.content||i.children||"Panel content",c=i.defaultExpanded||i.isExpanded||!1,[u,h]=C.useState(c),[f,p]=C.useState(!1),m=C.useMemo(()=>Phe(a),[a]),v=C.useMemo(()=>khe(s),[s]),A=i.width||280,x=m.fontSize+m.padding*2+m.gap,E=u?m.fontSize*2+m.padding*2:0,w=x+(u?E+m.gap:0),B=C.useCallback(L=>{L.clear(),L.roundRect(0,0,A,w,m.borderRadius),L.fill({color:u?v.expandedBgColor:v.backgroundColor}),L.stroke({color:v.borderColor,width:1}),e&&(L.roundRect(-2,-2,A+4,w+4,m.borderRadius+2),L.stroke({color:v.focusColor,width:2}))},[A,w,m,v,e,u]),D=C.useCallback(L=>{L.clear(),f&&(L.roundRect(m.padding,m.padding,A-m.padding*2,x-m.padding,m.borderRadius-2),L.fill({color:v.triggerHoverBgColor}));const F=m.padding*2,z=x/2,G=m.chevronSize/2;L.moveTo(F,z-G),u?(L.lineTo(F+G,z+G/2),L.lineTo(F-G,z+G/2)):(L.lineTo(F+G,z),L.lineTo(F,z+G)),L.closePath(),L.fill({color:v.textColor})},[A,x,m,v,f,u]),T=C.useCallback(L=>{L.clear(),u&&(L.moveTo(m.panelIndent,0),L.lineTo(A-m.padding,0),L.stroke({color:v.borderColor,width:1,alpha:.3}))},[A,m,v,u]),M=C.useMemo(()=>({fontSize:m.fontSize,fontWeight:"500",fill:v.textColor,fontFamily:"Inter, system-ui, sans-serif"}),[m,v]),R=C.useMemo(()=>({fontSize:m.fontSize*.9,fill:v.panelTextColor,fontFamily:"Inter, system-ui, sans-serif",wordWrap:!0,wordWrapWidth:A-m.panelIndent-m.padding*2}),[m,v,A]),k=C.useCallback(()=>{h(!u),n?.(t.id),r?.(t.id,!u)},[t.id,u,n,r]);return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointerenter:()=>p(!0),onpointerleave:()=>p(!1),onpointertap:k,children:[d.jsx("pixiGraphics",{draw:B}),d.jsx("pixiGraphics",{draw:D}),d.jsx(Text,{text:o,style:M,x:m.padding*2+m.chevronSize+m.gap,y:x/2-m.fontSize/2}),u&&d.jsxs("pixiContainer",{y:x+m.gap,children:[d.jsx("pixiGraphics",{draw:T}),d.jsx(Text,{text:l,style:R,x:m.panelIndent,y:m.padding})]})]})}function bct({element:t,isSelected:e=!1,onClick:n,onChange:r}){mn(pn);const i=t.props||{},s=i.variant||"default",a=i.size||"md",o=i.allowsMultipleExpanded||!1,l=je(L=>L.elements),c=C.useMemo(()=>l.filter(L=>L.parent_id===t.id).sort((L,F)=>(L.order_num||0)-(F.order_num||0)).map(L=>({id:L.id,title:L.props?.title||L.props?.label||"Item",content:L.props?.content||L.props?.children||"Content",defaultExpanded:L.props?.defaultExpanded||!1})),[l,t.id]),[u,h]=C.useState(()=>{const L=new Set;return c.forEach(F=>{F.defaultExpanded&&L.add(F.id)}),L}),[f,p]=C.useState(null),m=C.useMemo(()=>Phe(a),[a]),v=C.useMemo(()=>khe(s),[s]),A=i.width||280,x=m.gap,E=m.fontSize+m.padding*2+m.gap,w=m.fontSize*2+m.padding*2,B=C.useMemo(()=>{let L=m.padding*2;return c.forEach((F,z)=>{L+=E,u.has(F.id)&&(L+=w+m.gap),z<c.length-1&&(L+=x)}),Math.max(L,50)},[c,u,E,w,m,x]),D=C.useCallback(L=>{h(F=>{const z=new Set(F);return z.has(L)?z.delete(L):(o||z.clear(),z.add(L)),z}),n?.(t.id),r?.(t.id,{expandedId:L})},[t.id,o,n,r]),T=C.useCallback(L=>{L.clear(),L.roundRect(0,0,A,B,m.borderRadius),L.fill({color:v.backgroundColor}),L.stroke({color:v.borderColor,width:1}),e&&(L.roundRect(-2,-2,A+4,B+4,m.borderRadius+2),L.stroke({color:v.focusColor,width:2}))},[A,B,m,v,e]),M=C.useMemo(()=>({fontSize:m.fontSize,fontWeight:"500",fill:v.textColor,fontFamily:"Inter, system-ui, sans-serif"}),[m,v]),R=C.useMemo(()=>({fontSize:m.fontSize*.9,fill:v.panelTextColor,fontFamily:"Inter, system-ui, sans-serif",wordWrap:!0,wordWrapWidth:A-m.panelIndent-m.padding*2}),[m,v,A]);if(c.length===0){const L={fontSize:m.fontSize,fill:10265519,fontFamily:"Inter, system-ui, sans-serif"};return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:T}),d.jsx(Text,{text:"No items",style:L,x:A/2,y:B/2,anchor:.5})]})}let k=m.padding;return d.jsxs("pixiContainer",{children:[d.jsx("pixiGraphics",{draw:T}),c.map((L,F)=>{const z=k,G=u.has(L.id),V=f===L.id;k+=E,G&&(k+=w+m.gap),F<c.length-1&&(k+=x);const q=O=>{O.clear(),V&&(O.roundRect(m.padding,0,A-m.padding*2,E,m.borderRadius-2),O.fill({color:v.triggerHoverBgColor})),G&&(O.roundRect(m.padding,0,A-m.padding*2,E+w+m.gap,m.borderRadius-2),O.fill({color:v.expandedBgColor}));const H=m.padding*2,K=E/2,X=m.chevronSize/2;O.moveTo(H,K-X),G?(O.lineTo(H+X,K+X/2),O.lineTo(H-X,K+X/2)):(O.lineTo(H+X,K),O.lineTo(H,K+X)),O.closePath(),O.fill({color:v.textColor}),F<c.length-1&&!G&&(O.moveTo(m.padding,E+x/2),O.lineTo(A-m.padding,E+x/2),O.stroke({color:v.borderColor,width:1,alpha:.3}))};return d.jsxs("pixiContainer",{y:z,eventMode:"static",cursor:"pointer",onpointerenter:()=>p(L.id),onpointerleave:()=>p(null),onpointertap:()=>D(L.id),children:[d.jsx("pixiGraphics",{draw:q}),d.jsx(Text,{text:L.title,style:M,x:m.padding*2+m.chevronSize+m.gap,y:E/2-m.fontSize/2}),G&&d.jsx(Text,{text:L.content,style:R,x:m.panelIndent,y:E+m.gap})]},L.id)})]})}function Cct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.placement||"top",o=r.content||r.children||"Tooltip",l=C.useMemo(()=>fat(s),[s]),c=C.useMemo(()=>pat(i),[i]),h=Math.min(o.length*l.fontSize*.6,l.maxWidth-l.paddingX*2)+l.paddingX*2,f=l.fontSize+l.paddingY*2,p=6,m=C.useCallback(A=>{A.clear(),A.roundRect(0,0,h,f,l.borderRadius),A.fill({color:c.backgroundColor});const x=h/2;switch(a){case"top":A.moveTo(x-p,f),A.lineTo(x,f+p),A.lineTo(x+p,f),A.closePath(),A.fill({color:c.arrowColor});break;case"bottom":A.moveTo(x-p,0),A.lineTo(x,-p),A.lineTo(x+p,0),A.closePath(),A.fill({color:c.arrowColor});break;case"left":A.moveTo(h,f/2-p),A.lineTo(h+p,f/2),A.lineTo(h,f/2+p),A.closePath(),A.fill({color:c.arrowColor});break;case"right":A.moveTo(0,f/2-p),A.lineTo(-p,f/2),A.lineTo(0,f/2+p),A.closePath(),A.fill({color:c.arrowColor});break}e&&(A.roundRect(-2,-2,h+4,f+4,l.borderRadius+2),A.stroke({color:3900150,width:2}))},[h,f,l,c,a,e]),v=C.useMemo(()=>({fontSize:l.fontSize,fill:c.textColor,fontFamily:"Inter, system-ui, sans-serif",wordWrap:!0,wordWrapWidth:l.maxWidth-l.paddingX*2}),[l,c]);return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:m}),d.jsx(Text,{text:o,style:v,x:l.paddingX,y:l.paddingY})]})}function Ect({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.placement||"bottom",o=r.title||"",l=r.content||r.children||"Popover content",[c,u]=C.useState(!1),h=C.useMemo(()=>mat(s),[s]),f=C.useMemo(()=>Aat(i),[i]),p=r.width||h.maxWidth,m=o?h.fontSize*1.5:0,v=Math.ceil(l.length*h.fontSize*.5/(p-h.padding*2)),A=Math.max(v,1)*h.fontSize*1.4,x=h.padding*2+m+A,E=8,w=C.useCallback(T=>{T.clear(),T.roundRect(2,2,p,x,h.borderRadius),T.fill({color:f.shadowColor}),T.roundRect(0,0,p,x,h.borderRadius),T.fill({color:f.backgroundColor}),f.borderColor!==0&&(T.roundRect(0,0,p,x,h.borderRadius),T.stroke({color:f.borderColor,width:1}));const M=p/2;switch(a){case"top":T.moveTo(M-E,x),T.lineTo(M,x+E),T.lineTo(M+E,x),T.closePath(),T.fill({color:f.arrowFillColor}),f.arrowStrokeColor!==0&&(T.moveTo(M-E,x),T.lineTo(M,x+E),T.lineTo(M+E,x),T.stroke({color:f.arrowStrokeColor,width:1}));break;case"bottom":T.moveTo(M-E,0),T.lineTo(M,-E),T.lineTo(M+E,0),T.closePath(),T.fill({color:f.arrowFillColor}),f.arrowStrokeColor!==0&&(T.moveTo(M-E,0),T.lineTo(M,-E),T.lineTo(M+E,0),T.stroke({color:f.arrowStrokeColor,width:1}));break;case"left":T.moveTo(p,x/2-E),T.lineTo(p+E,x/2),T.lineTo(p,x/2+E),T.closePath(),T.fill({color:f.arrowFillColor});break;case"right":T.moveTo(0,x/2-E),T.lineTo(-E,x/2),T.lineTo(0,x/2+E),T.closePath(),T.fill({color:f.arrowFillColor});break}e&&(T.roundRect(-2,-2,p+4,x+4,h.borderRadius+2),T.stroke({color:3900150,width:2})),c&&!e&&(T.roundRect(-1,-1,p+2,x+2,h.borderRadius+1),T.stroke({color:10265519,width:1}))},[p,x,h,f,a,e,c]),B=C.useMemo(()=>({fontSize:h.fontSize,fontWeight:"bold",fill:f.textColor,fontFamily:"Inter, system-ui, sans-serif"}),[h,f]),D=C.useMemo(()=>({fontSize:h.fontSize*.9,fill:f.textColor,fontFamily:"Inter, system-ui, sans-serif",wordWrap:!0,wordWrapWidth:p-h.padding*2}),[h,f,p]);return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointerenter:()=>u(!0),onpointerleave:()=>u(!1),onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:w}),o&&d.jsx(Text,{text:o,style:B,x:h.padding,y:h.padding}),d.jsx(Text,{text:l,style:D,x:h.padding,y:h.padding+m})]})}function Sct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.title||"Dialog Title",o=r.content||r.children||"Dialog content goes here.",l=r.showBackdrop!==!1,[c,u]=C.useState(!1),h=C.useMemo(()=>vat(s),[s]),f=C.useMemo(()=>xat(i),[i]),p=r.width||h.minWidth,m=h.titleFontSize+h.padding,v=Math.ceil(o.length*h.fontSize*.5/(p-h.padding*2)),A=Math.max(v,2)*h.fontSize*1.5,x=40+h.padding,E=h.padding*2+m+A+x,w=20,B=p+w*2,D=E+w*2,T=C.useCallback(K=>{K.clear(),l&&(K.rect(0,0,B,D),K.fill({color:f.backdropColor}))},[B,D,f,l]),M=C.useCallback(K=>{K.clear(),K.roundRect(4,4,p,E,h.borderRadius),K.fill({color:51}),K.roundRect(0,0,p,E,h.borderRadius),K.fill({color:f.backgroundColor}),f.borderColor!==0&&(K.roundRect(0,0,p,E,h.borderRadius),K.stroke({color:f.borderColor,width:1})),K.moveTo(h.padding,m+h.padding),K.lineTo(p-h.padding,m+h.padding),K.stroke({color:13292508,width:1});const X=E-x;K.moveTo(h.padding,X),K.lineTo(p-h.padding,X),K.stroke({color:13292508,width:1});const re=80,J=32,Z=X+(x-J)/2,ee=p-h.padding-re*2-8;K.roundRect(ee,Z,re,J,6),K.stroke({color:10265519,width:1});const te=p-h.padding-re;K.roundRect(te,Z,re,J,6),K.fill({color:f.titleColor!==3621201?f.titleColor:3900150}),e&&(K.roundRect(-2,-2,p+4,E+4,h.borderRadius+2),K.stroke({color:3900150,width:2})),c&&!e&&(K.roundRect(-1,-1,p+2,E+2,h.borderRadius+1),K.stroke({color:10265519,width:1}))},[p,E,m,x,h,f,e,c]),R=C.useMemo(()=>({fontSize:h.titleFontSize,fontWeight:"500",fill:f.titleColor,fontFamily:"Inter, system-ui, sans-serif"}),[h,f]),k=C.useMemo(()=>({fontSize:h.fontSize,fill:f.textColor,fontFamily:"Inter, system-ui, sans-serif",wordWrap:!0,wordWrapWidth:p-h.padding*2,lineHeight:h.fontSize*1.5}),[h,f,p]),L=C.useMemo(()=>({fontSize:14,fill:7041664,fontFamily:"Inter, system-ui, sans-serif"}),[]),F=C.useMemo(()=>({fontSize:14,fill:16777215,fontFamily:"Inter, system-ui, sans-serif"}),[]),z=80,G=32,q=E-x+(x-G)/2,O=p-h.padding-z*2-8,H=p-h.padding-z;return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointerenter:()=>u(!0),onpointerleave:()=>u(!1),onpointertap:()=>n?.(t.id),children:[l&&d.jsx("pixiGraphics",{draw:T}),d.jsxs("pixiContainer",{x:l?w:0,y:l?w:0,children:[d.jsx("pixiGraphics",{draw:M}),d.jsx(Text,{text:a,style:R,x:h.padding,y:h.padding}),d.jsx(Text,{text:o,style:k,x:h.padding,y:m+h.padding*1.5}),d.jsx(Text,{text:"Cancel",style:L,x:O+z/2,y:q+G/2,anchor:.5}),d.jsx(Text,{text:"Confirm",style:F,x:H+z/2,y:q+G/2,anchor:.5})]})]})}function wct(t){if(!t)return 3900150;if(t.startsWith("#"))return parseInt(t.slice(1),16);if(t.startsWith("rgb")){const e=t.match(/\d+/g);if(e&&e.length>=3){const[n,r,i]=e.map(Number);return n<<16|r<<8|i}}return 3900150}function _ct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.color,o=C.useMemo(()=>Cat(s),[s]),l=C.useMemo(()=>Eat(i),[i]),c=C.useMemo(()=>wct(a),[a]),u=C.useCallback(h=>{h.clear();const f=4;for(let p=0;p<o.width;p+=f*2)for(let m=0;m<o.height;m+=f*2)h.rect(p,m,f,f),h.rect(p+f,m+f,f,f);h.fill({color:l.checkerColor}),h.roundRect(0,0,o.width,o.height,o.borderRadius),h.fill({color:c}),h.roundRect(0,0,o.width,o.height,o.borderRadius),h.stroke({color:e?l.selectedBorderColor:l.borderColor,width:o.borderWidth}),e&&(h.roundRect(-2,-2,o.width+4,o.height+4,o.borderRadius+2),h.stroke({color:l.selectedBorderColor,width:2}))},[o,l,c,e]);return d.jsx("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),children:d.jsx("pixiGraphics",{draw:u})})}function Ict({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.channel||"hue",o=r.value??.5,l=C.useMemo(()=>Sat(s),[s]),c=C.useMemo(()=>wat(i),[i]),u=C.useMemo(()=>{const p=l.trackWidth-l.thumbSize;return l.thumbSize/2+o*p},[l,o]),h=C.useCallback(p=>{p.clear();const m=(l.trackHeight-l.trackHeight*.8)/2,v=l.trackHeight*.8,A=12,x=l.trackWidth/A;for(let E=0;E<A;E++){let w;if(a==="hue")w=Ew(E/A,1,.5);else if(a==="saturation")w=Ew(.6,E/A,.5);else if(a==="lightness"||a==="brightness"){const B=E/A;w=Math.floor(B*255)<<16|Math.floor(B*255)<<8|Math.floor(B*255)}else a==="alpha"?w=3900150:w=Ew(E/A,1,.5);p.rect(E*x,m,x+1,v),p.fill({color:w})}p.roundRect(0,m,l.trackWidth,v,l.borderRadius/2),p.stroke({color:13292508,width:1}),e&&(p.roundRect(-2,m-2,l.trackWidth+4,v+4,l.borderRadius/2+2),p.stroke({color:c.focusRingColor,width:2}))},[l,c,a,e]),f=C.useCallback(p=>{p.clear();const m=l.trackHeight/2;p.circle(0,m,l.thumbSize/2),p.fill({color:c.thumbBorderColor}),p.circle(0,m,l.thumbSize/2-l.thumbBorderWidth),p.stroke({color:c.thumbInnerBorderColor,width:1});const v=a==="hue"?Ew(o,1,.5):a==="saturation"?Ew(.6,o,.5):Math.floor(o*255)<<16|Math.floor(o*255)<<8|Math.floor(o*255);p.circle(0,m,l.thumbSize/2-l.thumbBorderWidth-2),p.fill({color:v})},[l,c,a,o]);return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:h}),d.jsx("pixiGraphics",{draw:f,x:u})]})}function Ew(t,e,n){const r=(1-Math.abs(2*n-1))*e,i=r*(1-Math.abs(t*6%2-1)),s=n-r/2;let a=0,o=0,l=0;const c=t*6;c<1?(a=r,o=i,l=0):c<2?(a=i,o=r,l=0):c<3?(a=0,o=r,l=i):c<4?(a=0,o=i,l=r):c<5?(a=i,o=0,l=r):(a=r,o=0,l=i);const u=Math.floor((a+s)*255),h=Math.floor((o+s)*255),f=Math.floor((l+s)*255);return u<<16|h<<8|f}function Bct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.value||"12:00",o=r.hourCycle||12,l=r.showSeconds??!1,c=C.useMemo(()=>Iat(s),[s]),u=C.useMemo(()=>Bat(i),[i]),h=C.useMemo(()=>{const[D,T]=a.split(" "),M=D.split(":");return{hour:M[0]||"12",minute:M[1]||"00",second:M[2]||"00",period:T||(o===12?"PM":"")}},[a,o]),f=c.fontSize*1.5,p=c.fontSize*.5,m=C.useMemo(()=>{let D=c.padding*2;return D+=f*2,D+=p,D+=f*2,l&&(D+=p,D+=f*2),o===12&&(D+=c.gap,D+=f*1.5),D},[c,f,p,l,o]),v=C.useCallback(D=>{D.clear(),D.roundRect(0,0,m,c.height,c.borderRadius),D.fill({color:u.backgroundColor}),D.stroke({color:e?u.focusBorderColor:u.borderColor,width:1}),e&&(D.roundRect(-2,-2,m+4,c.height+4,c.borderRadius+2),D.stroke({color:u.focusBorderColor,width:2}))},[m,c,u,e]),A=C.useMemo(()=>({fontSize:c.fontSize,fill:u.textColor,fontFamily:"monospace"}),[c,u]),x=C.useMemo(()=>({fontSize:c.fontSize,fill:u.placeholderColor,fontFamily:"monospace"}),[c,u]);let E=c.padding;const w=c.height/2-c.fontSize/2,B=[];return B.push({text:h.hour.padStart(2,"0"),x:E,isSeparator:!1}),E+=f*1.2,B.push({text:":",x:E,isSeparator:!0}),E+=p,B.push({text:h.minute.padStart(2,"0"),x:E,isSeparator:!1}),E+=f*1.2,l&&(B.push({text:":",x:E,isSeparator:!0}),E+=p,B.push({text:h.second.padStart(2,"0"),x:E,isSeparator:!1}),E+=f*1.2),o===12&&(E+=c.gap,B.push({text:h.period,x:E,isSeparator:!1})),d.jsxs("pixiContainer",{eventMode:"static",cursor:"text",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:v}),B.map((D,T)=>d.jsx(Text,{text:D.text,style:D.isSeparator?x:A,x:D.x,y:w},T))]})}function Tct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.value||"2024-01-15",o=C.useMemo(()=>Mat(s),[s]),l=C.useMemo(()=>Dat(i),[i]),c=C.useMemo(()=>{const w=a.split("-");return{year:w[0]||"2024",month:w[1]||"01",day:w[2]||"15"}},[a]),u=o.fontSize*1.2,h=o.fontSize*.6,f=C.useMemo(()=>{let w=o.padding*2;return w+=u*3,w+=h,w+=u*1.5,w+=h,w+=u*1.5,w},[o,u,h]),p=C.useCallback(w=>{w.clear(),w.roundRect(0,0,f,o.height,o.borderRadius),w.fill({color:l.backgroundColor}),w.stroke({color:e?l.focusBorderColor:l.borderColor,width:1}),e&&(w.roundRect(-2,-2,f+4,o.height+4,o.borderRadius+2),w.stroke({color:l.focusBorderColor,width:2}))},[f,o,l,e]),m=C.useMemo(()=>({fontSize:o.fontSize,fill:l.textColor,fontFamily:"monospace"}),[o,l]),v=C.useMemo(()=>({fontSize:o.fontSize,fill:l.placeholderColor,fontFamily:"monospace"}),[o,l]);let A=o.padding;const x=o.height/2-o.fontSize/2,E=[];return E.push({text:c.year,x:A,isSeparator:!1}),A+=u*2.5,E.push({text:"/",x:A,isSeparator:!0}),A+=h,E.push({text:c.month.padStart(2,"0"),x:A,isSeparator:!1}),A+=u*1.3,E.push({text:"/",x:A,isSeparator:!0}),A+=h,E.push({text:c.day.padStart(2,"0"),x:A,isSeparator:!1}),d.jsxs("pixiContainer",{eventMode:"static",cursor:"text",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:p}),E.map((w,B)=>d.jsx(Text,{text:w.text,style:w.isSeparator?v:m,x:w.x,y:x},B))]})}function Mct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.hue??0,o=r.xValue??.7,l=r.yValue??.3,c=C.useMemo(()=>Rat(s),[s]),u=C.useMemo(()=>Pat(i),[i]),h=o*c.width,f=(1-l)*c.height,p=C.useCallback(v=>{v.clear();const A=8,x=c.width/A,E=c.height/A;for(let w=0;w<A;w++)for(let B=0;B<A;B++){const D=w/(A-1),T=1-B/(A-1),M=UK(a,D,T);v.rect(w*x,B*E,x+1,E+1),v.fill({color:M})}v.roundRect(0,0,c.width,c.height,c.borderRadius),v.stroke({color:u.borderColor,width:1}),e&&(v.roundRect(-2,-2,c.width+4,c.height+4,c.borderRadius+2),v.stroke({color:u.focusRingColor,width:2}))},[c,u,a,e]),m=C.useCallback(v=>{v.clear(),v.circle(0,0,c.thumbSize/2),v.fill({color:u.thumbBorderColor}),v.circle(0,0,c.thumbSize/2-c.thumbBorderWidth),v.stroke({color:u.thumbInnerBorderColor,width:1});const A=UK(a,o,l);v.circle(0,0,c.thumbSize/2-c.thumbBorderWidth-1),v.fill({color:A})},[c,u,a,o,l]);return d.jsxs("pixiContainer",{eventMode:"static",cursor:"crosshair",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:p}),d.jsx("pixiGraphics",{draw:m,x:h,y:f})]})}function UK(t,e,n){const r=n*e,i=r*(1-Math.abs(t/60%2-1)),s=n-r;let a=0,o=0,l=0;const c=t%360;c<60?(a=r,o=i,l=0):c<120?(a=i,o=r,l=0):c<180?(a=0,o=r,l=i):c<240?(a=0,o=i,l=r):c<300?(a=i,o=0,l=r):(a=r,o=0,l=i);const u=Math.floor((a+s)*255),h=Math.floor((o+s)*255),f=Math.floor((l+s)*255);return u<<16|h<<8|f}const Dct=["S","M","T","W","T","F","S"],Rct=["January","February","March","April","May","June","July","August","September","October","November","December"];function Pct({element:t,isSelected:e=!1,onClick:n,onChange:r}){mn(pn);const i=t.props||{},s=i.variant||"default",a=i.size||"md",o=i.value||"",l=C.useMemo(()=>uO(a),[a]),c=C.useMemo(()=>dO(s),[s]),u=new Date,[h,f]=C.useState(u.getFullYear()),[p,m]=C.useState(u.getMonth()),v=C.useMemo(()=>{if(!o)return null;const O=o.split("-");return{year:parseInt(O[0]),month:parseInt(O[1])-1,day:parseInt(O[2])}},[o]),A=l.cellSize,x=A*7+l.gap*6+l.padding*2,E=l.buttonSize+l.gap,w=l.fontSize+l.gap,B=6,D=A*B+l.gap*(B-1),T=l.padding*2+E+w+D,M=C.useMemo(()=>{const O=new Date(h,p,1).getDay(),H=new Date(h,p+1,0).getDate(),K=new Date(h,p,0).getDate(),X=[];for(let J=O-1;J>=0;J--)X.push({day:K-J,isCurrentMonth:!1,isToday:!1,isSelected:!1});for(let J=1;J<=H;J++){const Z=J===u.getDate()&&p===u.getMonth()&&h===u.getFullYear(),ee=v&&J===v.day&&p===v.month&&h===v.year;X.push({day:J,isCurrentMonth:!0,isToday:Z,isSelected:!!ee})}const re=42-X.length;for(let J=1;J<=re;J++)X.push({day:J,isCurrentMonth:!1,isToday:!1,isSelected:!1});return X},[h,p,v,u]),R=C.useCallback(O=>{O.clear(),O.roundRect(0,0,x,T,l.borderRadius),O.fill({color:c.backgroundColor}),O.stroke({color:c.borderColor,width:1}),e&&(O.roundRect(-2,-2,x+4,T+4,l.borderRadius+2),O.stroke({color:3900150,width:2}))},[x,T,l,c,e]),k=C.useCallback((O,H)=>{O.clear(),O.roundRect(0,0,l.buttonSize,l.buttonSize,4),O.fill({color:c.hoverBgColor});const K=l.buttonSize/2,X=l.buttonSize/2,re=l.buttonSize*.25;H?(O.moveTo(K+re/2,X-re),O.lineTo(K-re/2,X),O.lineTo(K+re/2,X+re)):(O.moveTo(K-re/2,X-re),O.lineTo(K+re/2,X),O.lineTo(K-re/2,X+re)),O.stroke({color:c.textColor,width:2})},[l,c]),L=C.useMemo(()=>({fontSize:l.headerFontSize,fontWeight:"600",fill:c.headerColor,fontFamily:"Inter, system-ui, sans-serif"}),[l,c]),F=C.useMemo(()=>({fontSize:l.fontSize*.85,fill:c.weekdayColor,fontFamily:"Inter, system-ui, sans-serif"}),[l,c]),z=C.useMemo(()=>({fontSize:l.fontSize,fill:c.textColor,fontFamily:"Inter, system-ui, sans-serif"}),[l,c]),G=C.useCallback(()=>{p===0?(m(11),f(h-1)):m(p-1)},[p,h]),V=C.useCallback(()=>{p===11?(m(0),f(h+1)):m(p+1)},[p,h]),q=C.useMemo(()=>M.map((O,H)=>{const K=H%7,X=Math.floor(H/7),re=l.padding+K*(A+l.gap)+A/2,J=l.padding+E+w+X*(A+l.gap)+A/2,Z=te=>{te.clear(),O.isSelected?(te.circle(0,0,A/2-2),te.fill({color:c.selectedBgColor})):O.isToday&&(te.circle(0,0,A/2-2),te.stroke({color:c.todayBorderColor,width:2}))},ee=O.isSelected?c.selectedTextColor:O.isCurrentMonth?c.textColor:c.outsideMonthColor;return d.jsxs("pixiContainer",{x:re,y:J,children:[d.jsx("pixiGraphics",{draw:Z}),d.jsx(Text,{text:String(O.day),style:{...z,fill:ee},anchor:.5})]},H)}),[M,l,c,A,E,w,z]);return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:R}),d.jsx("pixiContainer",{x:l.padding,y:l.padding,eventMode:"static",cursor:"pointer",onpointertap:G,children:d.jsx("pixiGraphics",{draw:O=>k(O,!0)})}),d.jsx(Text,{text:`${Rct[p]} ${h}`,style:L,x:x/2,y:l.padding+l.buttonSize/2,anchor:.5}),d.jsx("pixiContainer",{x:x-l.padding-l.buttonSize,y:l.padding,eventMode:"static",cursor:"pointer",onpointertap:V,children:d.jsx("pixiGraphics",{draw:O=>k(O,!1)})}),Dct.map((O,H)=>d.jsx(Text,{text:O,style:F,x:l.padding+H*(A+l.gap)+A/2,y:l.padding+E+l.fontSize/2,anchor:.5},O+H)),q]})}function kct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.hue??0,o=C.useMemo(()=>Nat(s),[s]),l=C.useMemo(()=>Lat(i),[i]),c=a*Math.PI/180,u=(o.outerRadius+o.innerRadius)/2,h=o.outerRadius+Math.cos(c-Math.PI/2)*u,f=o.outerRadius+Math.sin(c-Math.PI/2)*u,p=C.useCallback(v=>{v.clear();const A=o.outerRadius,x=o.outerRadius,E=60,w=Math.PI*2/E;for(let B=0;B<E;B++){const D=B*w-Math.PI/2,T=D+w+.01,M=B/E*360,R=HK(M/360,1,.5);v.moveTo(A+Math.cos(D)*o.innerRadius,x+Math.sin(D)*o.innerRadius),v.lineTo(A+Math.cos(D)*o.outerRadius,x+Math.sin(D)*o.outerRadius),v.arc(A,x,o.outerRadius,D,T),v.lineTo(A+Math.cos(T)*o.innerRadius,x+Math.sin(T)*o.innerRadius),v.arc(A,x,o.innerRadius,T,D,!0),v.closePath(),v.fill({color:R})}e&&(v.circle(A,x,o.outerRadius+4),v.stroke({color:l.focusRingColor,width:2}))},[o,l,e]),m=C.useCallback(v=>{v.clear(),v.circle(0,0,o.thumbSize/2),v.fill({color:l.thumbBorderColor}),v.circle(0,0,o.thumbSize/2-o.thumbBorderWidth),v.stroke({color:l.thumbInnerBorderColor,width:1});const A=HK(a/360,1,.5);v.circle(0,0,o.thumbSize/2-o.thumbBorderWidth-1),v.fill({color:A})},[o,l,a]);return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:p}),d.jsx("pixiGraphics",{draw:m,x:h,y:f})]})}function HK(t,e,n){const r=(1-Math.abs(2*n-1))*e,i=r*(1-Math.abs(t*6%2-1)),s=n-r/2;let a=0,o=0,l=0;const c=t*6;c<1?(a=r,o=i,l=0):c<2?(a=i,o=r,l=0):c<3?(a=0,o=r,l=i):c<4?(a=0,o=i,l=r):c<5?(a=i,o=0,l=r):(a=r,o=0,l=i);const u=Math.floor((a+s)*255),h=Math.floor((o+s)*255),f=Math.floor((l+s)*255);return u<<16|h<<8|f}const Nct=["S","M","T","W","T","F","S"],GK=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Lct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.value||"",o=r.isOpen??!0,l=C.useMemo(()=>jat(s),[s]),c=C.useMemo(()=>Oat(i),[i]),u=C.useMemo(()=>uO(s),[s]),h=C.useMemo(()=>dO(i),[i]),f=new Date,[p,m]=C.useState(f.getFullYear()),[v,A]=C.useState(f.getMonth()),x=C.useMemo(()=>{if(!a)return null;const q=a.split("-");return{year:parseInt(q[0]),month:parseInt(q[1])-1,day:parseInt(q[2])}},[a]),E=C.useMemo(()=>a?x?`${GK[x.month]} ${x.day}, ${x.year}`:a:"Select date",[a,x]),w=l.calendarWidth,B=l.calendarCellSize,D=B*7+u.gap*6+u.padding*2,T=u.buttonSize+u.gap,M=u.fontSize+u.gap,R=B*6+u.gap*5,k=u.padding*2+T+M+R,L=C.useMemo(()=>{const q=new Date(p,v,1).getDay(),O=new Date(p,v+1,0).getDate(),H=new Date(p,v,0).getDate(),K=[];for(let re=q-1;re>=0;re--)K.push({day:H-re,isCurrentMonth:!1,isToday:!1,isSelected:!1});for(let re=1;re<=O;re++){const J=re===f.getDate()&&v===f.getMonth()&&p===f.getFullYear(),Z=x&&re===x.day&&v===x.month&&p===x.year;K.push({day:re,isCurrentMonth:!0,isToday:J,isSelected:!!Z})}const X=42-K.length;for(let re=1;re<=X;re++)K.push({day:re,isCurrentMonth:!1,isToday:!1,isSelected:!1});return K},[p,v,x,f]),F=C.useCallback(q=>{q.clear(),q.roundRect(0,0,w,l.fieldHeight,l.fieldBorderRadius),q.fill({color:c.fieldBackgroundColor}),q.stroke({color:e?c.focusBorderColor:c.fieldBorderColor,width:1});const O=w-l.buttonSize-l.fieldPadding/2;q.roundRect(O,(l.fieldHeight-l.buttonSize)/2,l.buttonSize,l.buttonSize,4),q.fill({color:c.buttonBackgroundColor});const H=O+l.buttonSize/2,K=l.fieldHeight/2,X=l.buttonSize*.4;q.rect(H-X/2,K-X/2,X,X),q.stroke({color:c.buttonIconColor,width:1.5}),q.moveTo(H-X/2,K-X/4),q.lineTo(H+X/2,K-X/4),q.stroke({color:c.buttonIconColor,width:1}),e&&(q.roundRect(-2,-2,w+4,l.fieldHeight+4,l.fieldBorderRadius+2),q.stroke({color:c.focusBorderColor,width:2}))},[w,l,c,e]),z=C.useCallback(q=>{q.clear(),q.roundRect(2,2,D,k,u.borderRadius),q.fill({color:32}),q.roundRect(0,0,D,k,u.borderRadius),q.fill({color:h.backgroundColor}),q.stroke({color:c.popoverBorderColor,width:1})},[D,k,u,h,c]),G=C.useMemo(()=>({fontSize:l.fieldFontSize,fill:a?c.fieldTextColor:c.fieldPlaceholderColor,fontFamily:"Inter, system-ui, sans-serif"}),[l,c,a]),V=C.useMemo(()=>({fontSize:u.fontSize,fill:h.textColor,fontFamily:"Inter, system-ui, sans-serif"}),[u,h]);return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:F}),d.jsx(Text,{text:E,style:G,x:l.fieldPadding,y:l.fieldHeight/2-l.fieldFontSize/2}),o&&d.jsxs("pixiContainer",{y:l.fieldHeight+l.gap,children:[d.jsx("pixiGraphics",{draw:z}),d.jsx(Text,{text:`${GK[v]} ${p}`,style:{...V,fontWeight:"600",fontSize:u.headerFontSize},x:D/2,y:u.padding+u.buttonSize/2,anchor:.5}),Nct.map((q,O)=>d.jsx(Text,{text:q,style:{...V,fill:h.weekdayColor,fontSize:u.fontSize*.85},x:u.padding+O*(B+u.gap)+B/2,y:u.padding+T+u.fontSize/2,anchor:.5},q+O)),L.slice(0,35).map((q,O)=>{const H=O%7,K=Math.floor(O/7),X=u.padding+H*(B+u.gap)+B/2,re=u.padding+T+M+K*(B+u.gap)+B/2,J=ee=>{ee.clear(),q.isSelected?(ee.circle(0,0,B/2-2),ee.fill({color:h.selectedBgColor})):q.isToday&&(ee.circle(0,0,B/2-2),ee.stroke({color:h.todayBorderColor,width:2}))},Z=q.isSelected?h.selectedTextColor:q.isCurrentMonth?h.textColor:h.outsideMonthColor;return d.jsxs("pixiContainer",{x:X,y:re,children:[d.jsx("pixiGraphics",{draw:J}),d.jsx("pixiText",{text:String(q.day),style:{...V,fill:Z},anchor:.5})]},O)})]})]})}function Fct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.hue??0,o=r.saturation??.8,l=r.brightness??.7,c=r.alpha??1,u=C.useMemo(()=>zat(s),[s]),h=C.useMemo(()=>$at(i),[i]),f=u.areaSize+u.padding*2,p=u.areaSize+u.gap*2+u.sliderHeight*2+u.gap+u.swatchSize+u.padding*2,m=C.useMemo(()=>P3(a,o,l),[a,o,l]),v=C.useCallback(z=>{z.clear(),z.roundRect(0,0,f,p,u.borderRadius),z.fill({color:h.backgroundColor}),z.stroke({color:h.borderColor,width:1}),e&&(z.roundRect(-2,-2,f+4,p+4,u.borderRadius+2),z.stroke({color:h.focusRingColor,width:2}))},[f,p,u,h,e]),A=C.useCallback(z=>{z.clear();const G=8,V=u.areaSize/G,q=u.areaSize/G;for(let O=0;O<G;O++)for(let H=0;H<G;H++){const K=O/(G-1),X=1-H/(G-1),re=P3(a,K,X);z.rect(O*V,H*q,V+1,q+1),z.fill({color:re})}z.roundRect(0,0,u.areaSize,u.areaSize,4),z.stroke({color:13292508,width:1})},[u,a]),x=C.useCallback(z=>{z.clear(),z.circle(0,0,u.thumbSize/2),z.fill({color:h.thumbBorderColor}),z.circle(0,0,u.thumbSize/2-2),z.stroke({color:h.thumbInnerBorderColor,width:1}),z.circle(0,0,u.thumbSize/2-3),z.fill({color:m})},[u,h,m]),E=C.useCallback(z=>{z.clear();const G=12,V=u.sliderWidth/G;for(let q=0;q<G;q++){const O=P3(q/G,1,1);z.rect(q*V,0,V+1,u.sliderHeight),z.fill({color:O})}z.roundRect(0,0,u.sliderWidth,u.sliderHeight,4),z.stroke({color:13292508,width:1})},[u]),w=C.useCallback(z=>{z.clear();const G=4;for(let O=0;O<u.sliderWidth;O+=G*2)for(let H=0;H<u.sliderHeight;H+=G*2)z.rect(O,H,G,G),z.rect(O+G,H+G,G,G);z.fill({color:15067115});const V=8,q=u.sliderWidth/V;for(let O=0;O<V;O++){const H=O/(V-1);z.rect(O*q,0,q+1,u.sliderHeight),z.fill({color:m,alpha:H})}z.roundRect(0,0,u.sliderWidth,u.sliderHeight,4),z.stroke({color:13292508,width:1})},[u,m]),B=C.useCallback((z,G)=>{z.clear(),z.circle(0,u.sliderHeight/2,u.thumbSize/2),z.fill({color:h.thumbBorderColor}),z.circle(0,u.sliderHeight/2,u.thumbSize/2-2),z.fill({color:G})},[u,h]),D=C.useCallback(z=>{z.clear();const G=4;for(let V=0;V<u.swatchSize;V+=G*2)for(let q=0;q<u.swatchSize;q+=G*2)z.rect(V,q,G,G),z.rect(V+G,q+G,G,G);z.fill({color:15067115}),z.roundRect(0,0,u.swatchSize,u.swatchSize,4),z.fill({color:m,alpha:c}),z.roundRect(0,0,u.swatchSize,u.swatchSize,4),z.stroke({color:13292508,width:1})},[u,m,c]),T=C.useMemo(()=>({fontSize:11,fill:h.labelColor,fontFamily:"Inter, system-ui, sans-serif"}),[h]),M=u.padding,R=u.padding,k=R+u.areaSize+u.gap,L=k+u.sliderHeight+u.gap,F=L+u.sliderHeight+u.gap;return M+o*u.areaSize,R+(1-l)*u.areaSize,M+a/360*u.sliderWidth,M+c*u.sliderWidth,d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:v}),d.jsxs("pixiContainer",{x:M,y:R,children:[d.jsx("pixiGraphics",{draw:A}),d.jsx("pixiGraphics",{draw:x,x:o*u.areaSize,y:(1-l)*u.areaSize})]}),d.jsxs("pixiContainer",{x:M,y:k,children:[d.jsx("pixiGraphics",{draw:E}),d.jsx("pixiGraphics",{draw:z=>B(z,P3(a,1,1)),x:a/360*u.sliderWidth})]}),d.jsxs("pixiContainer",{x:M,y:L,children:[d.jsx("pixiGraphics",{draw:w}),d.jsx("pixiGraphics",{draw:z=>B(z,m),x:c*u.sliderWidth})]}),d.jsxs("pixiContainer",{x:M,y:F,children:[d.jsx("pixiGraphics",{draw:D}),d.jsx(Text,{text:`#${m.toString(16).padStart(6,"0").toUpperCase()}`,style:T,x:u.swatchSize+u.gap,y:u.swatchSize/2-6})]})]})}function P3(t,e,n){const r=t%360/360,i=n*e,s=i*(1-Math.abs(r*6%2-1)),a=n-i;let o=0,l=0,c=0;const u=r*6;u<1?(o=i,l=s,c=0):u<2?(o=s,l=i,c=0):u<3?(o=0,l=i,c=s):u<4?(o=0,l=s,c=i):u<5?(o=s,l=0,c=i):(o=i,l=0,c=s);const h=Math.floor((o+a)*255),f=Math.floor((l+a)*255),p=Math.floor((c+a)*255);return h<<16|f<<8|p}const VK=["S","M","T","W","T","F","S"],k3=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function jct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.startValue||r.start||"",o=r.endValue||r.end||"",l=r.isOpen??!0,c=C.useMemo(()=>Uat(s),[s]),u=C.useMemo(()=>Hat(i),[i]),h=C.useMemo(()=>uO(s),[s]),f=C.useMemo(()=>dO(i),[i]),p=new Date,[m,v]=C.useState(p.getFullYear()),[A,x]=C.useState(p.getMonth()),E=C.useMemo(()=>{if(!a)return null;const oe=a.split("-");return{year:parseInt(oe[0]),month:parseInt(oe[1])-1,day:parseInt(oe[2])}},[a]),w=C.useMemo(()=>{if(!o)return null;const oe=o.split("-");return{year:parseInt(oe[0]),month:parseInt(oe[1])-1,day:parseInt(oe[2])}},[o]),B=E?`${k3[E.month]} ${E.day}`:"Start",D=w?`${k3[w.month]} ${w.day}`:"End",T=(c.calendarWidth-c.separatorWidth)/2-c.gap,M=T*2+c.separatorWidth+c.gap*2,R=c.calendarCellSize,k=R*7+h.gap*6+h.padding*2,L=h.buttonSize+h.gap,F=h.fontSize+h.gap,z=R*5+h.gap*4,G=h.padding*2+L+F+z,V=(oe,ae)=>{const se=new Date(oe,ae,1).getDay(),fe=new Date(oe,ae+1,0).getDate(),Ee=new Date(oe,ae,0).getDate(),Be=[];for(let Ce=se-1;Ce>=0;Ce--)Be.push({day:Ee-Ce,isCurrentMonth:!1,isToday:!1,isStart:!1,isEnd:!1,isInRange:!1});for(let Ce=1;Ce<=fe;Ce++){const Se=Ce===p.getDate()&&ae===p.getMonth()&&oe===p.getFullYear(),Me=E&&Ce===E.day&&ae===E.month&&oe===E.year,ce=w&&Ce===w.day&&ae===w.month&&oe===w.year;let $e=!1;if(E&&w){const qe=new Date(oe,ae,Ce),ft=new Date(E.year,E.month,E.day),Ie=new Date(w.year,w.month,w.day);$e=qe>ft&&qe<Ie}Be.push({day:Ce,isCurrentMonth:!0,isToday:Se,isStart:!!Me,isEnd:!!ce,isInRange:$e})}const _e=35-Be.length;for(let Ce=1;Ce<=_e;Ce++)Be.push({day:Ce,isCurrentMonth:!1,isToday:!1,isStart:!1,isEnd:!1,isInRange:!1});return Be},q=C.useMemo(()=>V(m,A),[m,A,E,w,p]),O=A===11?0:A+1,H=A===11?m+1:m,K=C.useMemo(()=>V(H,O),[H,O,E,w,p]),X=C.useCallback((oe,ae)=>{oe.clear(),oe.roundRect(0,0,ae,c.fieldHeight,c.fieldBorderRadius),oe.fill({color:u.fieldBackgroundColor}),oe.stroke({color:e?u.focusBorderColor:u.fieldBorderColor,width:1})},[c,u,e]),re=C.useCallback(oe=>{oe.clear(),oe.roundRect(0,0,k*2+c.gap,G,h.borderRadius),oe.fill({color:f.backgroundColor}),oe.stroke({color:u.popoverBorderColor,width:1})},[k,G,h,f,u,c]),J=C.useMemo(()=>({fontSize:c.fieldFontSize,fill:u.fieldTextColor,fontFamily:"Inter, system-ui, sans-serif"}),[c,u]),Z=C.useMemo(()=>({fontSize:c.fieldFontSize,fill:u.separatorColor,fontFamily:"Inter, system-ui, sans-serif"}),[c,u]),ee=C.useMemo(()=>({fontSize:h.fontSize,fill:f.textColor,fontFamily:"Inter, system-ui, sans-serif"}),[h,f]),te=(oe,ae)=>oe.slice(0,35).map((se,fe)=>{const Ee=fe%7,Be=Math.floor(fe/7),_e=ae+h.padding+Ee*(R+h.gap)+R/2,Ce=h.padding+L+F+Be*(R+h.gap)+R/2,Se=ce=>{ce.clear(),se.isInRange&&se.isCurrentMonth&&(ce.rect(-R/2,-R/2+2,R,R-4),ce.fill({color:u.rangeBgColor})),se.isStart||se.isEnd?(ce.circle(0,0,R/2-2),ce.fill({color:f.selectedBgColor})):se.isToday&&(ce.circle(0,0,R/2-2),ce.stroke({color:f.todayBorderColor,width:2}))},Me=se.isStart||se.isEnd?f.selectedTextColor:se.isCurrentMonth?f.textColor:f.outsideMonthColor;return d.jsxs("pixiContainer",{x:_e,y:Ce,children:[d.jsx("pixiGraphics",{draw:Se}),d.jsx("pixiText",{text:String(se.day),style:{...ee,fill:Me},anchor:.5})]},fe)});return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:oe=>X(oe,T)}),d.jsx("pixiText",{text:B,style:J,x:c.fieldPadding,y:c.fieldHeight/2-c.fieldFontSize/2}),d.jsx("pixiText",{text:"",style:Z,x:T+c.gap+c.separatorWidth/2,y:c.fieldHeight/2,anchor:.5}),d.jsxs("pixiContainer",{x:T+c.separatorWidth+c.gap*2,children:[d.jsx("pixiGraphics",{draw:oe=>X(oe,T)}),d.jsx("pixiText",{text:D,style:J,x:c.fieldPadding,y:c.fieldHeight/2-c.fieldFontSize/2})]}),e&&d.jsx("pixiGraphics",{draw:oe=>{oe.clear(),oe.roundRect(-2,-2,M+4,c.fieldHeight+4,c.fieldBorderRadius+2),oe.stroke({color:u.focusBorderColor,width:2})}}),l&&d.jsxs("pixiContainer",{y:c.fieldHeight+c.gap,children:[d.jsx("pixiGraphics",{draw:re}),d.jsx(Text,{text:`${k3[A]} ${m}`,style:{...ee,fontWeight:"600",fontSize:h.headerFontSize},x:k/2,y:h.padding+h.buttonSize/2,anchor:.5}),d.jsx(Text,{text:`${k3[O]} ${H}`,style:{...ee,fontWeight:"600",fontSize:h.headerFontSize},x:k+c.gap+k/2,y:h.padding+h.buttonSize/2,anchor:.5}),VK.map((oe,ae)=>d.jsx(Text,{text:oe,style:{...ee,fill:f.weekdayColor,fontSize:h.fontSize*.85},x:h.padding+ae*(R+h.gap)+R/2,y:h.padding+L+h.fontSize/2,anchor:.5},`left-${oe}-${ae}`)),VK.map((oe,ae)=>d.jsx(Text,{text:oe,style:{...ee,fill:f.weekdayColor,fontSize:h.fontSize*.85},x:k+c.gap+h.padding+ae*(R+h.gap)+R/2,y:h.padding+L+h.fontSize/2,anchor:.5},`right-${oe}-${ae}`)),te(q,0),te(K,k+c.gap)]})]})}function Oct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.style,s=r.variant||"default",a=r.size||"md",o=r.label||"",l=r.placeholder||"",c=r.value||"",u=r.description||"",h=r.isDisabled||!1,f=r.isInvalid||!1,p=r.errorMessage||"",m=ot(i?.left,void 0,0),v=ot(i?.top,void 0,0),A=C.useMemo(()=>Nhe(a),[a]),x=C.useMemo(()=>Gat(s),[s]),E=r.width||240,w=o?A.labelFontSize+A.gap:0,B=u||f&&p?A.descriptionFontSize+A.gap:0;w+A.height+B;const D=C.useCallback(F=>{F.clear();const z=h?x.disabledBackgroundColor:x.backgroundColor;F.roundRect(0,0,E,A.height,A.borderRadius),F.fill({color:z});const G=f?x.errorBorderColor:e?x.focusBorderColor:x.borderColor;F.stroke({color:G,width:1}),e&&(F.roundRect(-2,-2,E+4,A.height+4,A.borderRadius+2),F.stroke({color:x.focusBorderColor,width:2}))},[E,A,x,e,h,f]),T=C.useMemo(()=>({fontSize:A.labelFontSize,fill:x.labelColor,fontFamily:"Inter, system-ui, sans-serif",fontWeight:"500"}),[A,x]),M=C.useMemo(()=>({fontSize:A.fontSize,fill:h?x.disabledTextColor:c?x.textColor:x.placeholderColor,fontFamily:"Inter, system-ui, sans-serif"}),[A,x,c,h]),R=C.useMemo(()=>({fontSize:A.descriptionFontSize,fill:f?x.errorTextColor:x.descriptionColor,fontFamily:"Inter, system-ui, sans-serif"}),[A,x,f]),k=c||l,L=f&&p?p:u;return d.jsxs("pixiContainer",{x:m,y:v,eventMode:"static",cursor:"pointer",onPointerDown:()=>n?.(t.id),children:[o&&d.jsx("pixiText",{text:o,style:T,x:0,y:0}),d.jsxs("pixiContainer",{y:w,children:[d.jsx("pixiGraphics",{draw:D}),d.jsx("pixiText",{text:k,style:M,x:A.paddingX,y:(A.height-A.fontSize)/2})]}),L&&d.jsx("pixiText",{text:L,style:R,x:0,y:w+A.height+A.gap})]})}function zct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.label||r.children||"",o=r.isSelected||r.checked||!1,l=r.isDisabled||!1,c=C.useMemo(()=>Lhe(s),[s]),u=C.useMemo(()=>Vat(i),[i]),h=o?c.trackWidth-c.thumbSize-c.thumbOffset:c.thumbOffset,f=(c.trackHeight-c.thumbSize)/2,p=C.useCallback(A=>{A.clear();const x=l?u.disabledTrackColor:o?u.trackSelectedColor:u.trackColor;A.roundRect(0,0,c.trackWidth,c.trackHeight,c.borderRadius),A.fill({color:x}),e&&(A.roundRect(-2,-2,c.trackWidth+4,c.trackHeight+4,c.borderRadius+2),A.stroke({color:u.focusRingColor,width:2}))},[c,u,o,l,e]),m=C.useCallback(A=>{A.clear();const x=l?u.disabledThumbColor:u.thumbColor,E=c.thumbSize/2;A.circle(E,E,E),A.fill({color:x}),l||(A.circle(E,E,E),A.stroke({color:u.thumbBorderColor,width:.5}))},[c,u,l]),v=C.useMemo(()=>({fontSize:c.labelFontSize,fill:l?u.disabledThumbColor:u.labelColor,fontFamily:"Inter, system-ui, sans-serif"}),[c,u,l]);return d.jsxs("pixiContainer",{eventMode:"static",cursor:l?"not-allowed":"pointer",onpointertap:()=>!l&&n?.(t.id),children:[d.jsx("pixiGraphics",{draw:p}),d.jsx("pixiGraphics",{draw:m,x:h,y:f}),a&&d.jsx(Text,{text:a,style:v,x:c.trackWidth+c.gap,y:(c.trackHeight-c.labelFontSize)/2})]})}function $ct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.label||"",o=r.placeholder||"",l=r.value||"",c=r.description||"",u=r.isDisabled||!1,h=r.isInvalid||!1,f=r.errorMessage||"",p=r.rows||3,m=C.useMemo(()=>Wat(s),[s]),v=C.useMemo(()=>Kat(i),[i]),A=r.width||280,x=Math.max(m.minHeight,p*m.fontSize*m.lineHeight+m.padding*2),E=a?m.labelFontSize+m.gap:0;(c||h&&f)&&m.descriptionFontSize+m.gap;const w=C.useCallback(k=>{k.clear();const L=u?v.disabledBackgroundColor:v.backgroundColor;k.roundRect(0,0,A,x,m.borderRadius),k.fill({color:L});const F=h?v.errorBorderColor:e?v.focusBorderColor:v.borderColor;k.stroke({color:F,width:1}),e&&(k.roundRect(-2,-2,A+4,x+4,m.borderRadius+2),k.stroke({color:v.focusBorderColor,width:2}))},[A,x,m,v,e,u,h]),B=C.useMemo(()=>({fontSize:m.labelFontSize,fill:v.labelColor,fontFamily:"Inter, system-ui, sans-serif",fontWeight:"500"}),[m,v]),D=C.useMemo(()=>({fontSize:m.fontSize,fill:u?v.disabledTextColor:l?v.textColor:v.placeholderColor,fontFamily:"Inter, system-ui, sans-serif",wordWrap:!0,wordWrapWidth:A-m.paddingX*2,lineHeight:m.fontSize*m.lineHeight}),[m,v,l,u,A]),T=C.useMemo(()=>({fontSize:m.descriptionFontSize,fill:h?v.errorTextColor:v.descriptionColor,fontFamily:"Inter, system-ui, sans-serif"}),[m,v,h]),M=l||o,R=h&&f?f:c;return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),children:[a&&d.jsx(Text,{text:a,style:B,x:0,y:0}),d.jsxs("pixiContainer",{y:E,children:[d.jsx("pixiGraphics",{draw:w}),d.jsx(Text,{text:M,style:D,x:m.paddingX,y:m.padding})]}),R&&d.jsx(Text,{text:R,style:T,x:0,y:E+x+m.gap})]})}function Qct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.showBorder??!0,o=C.useMemo(()=>qat(s),[s]),l=C.useMemo(()=>Yat(i),[i]),c=r.width||320,u=r.height||200,h=C.useCallback(m=>{m.clear(),m.roundRect(0,0,c,u,o.borderRadius),m.fill({color:l.backgroundColor}),a&&m.stroke({color:l.borderColor,width:1}),e&&(m.roundRect(-2,-2,c+4,u+4,o.borderRadius+2),m.stroke({color:3900150,width:2}))},[c,u,o,l,a,e]),f=C.useCallback(m=>{m.clear();const v=c/2,A=u/2,x=60,E=8,w=16;for(let B=0;B<3;B++){const D=A-w+B*w;m.roundRect(v-x/2,D-E/2,x,E,4),m.fill({color:l.separatorColor})}},[c,u,l]),p=C.useMemo(()=>({fontSize:o.labelFontSize,fill:l.labelColor,fontFamily:"Inter, system-ui, sans-serif",fontWeight:"500"}),[o,l]);return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:h}),d.jsx("pixiGraphics",{draw:f}),d.jsx(Text,{text:"Form",style:p,x:o.padding,y:o.padding,alpha:.5})]})}function Uct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.orientation||"horizontal",o=C.useMemo(()=>Xat(s),[s]),l=C.useMemo(()=>Jat(i),[i]),c=a==="horizontal",u=c?r.width||200:o.height,h=c?o.height:r.height||200,f=C.useCallback(m=>{m.clear(),m.roundRect(0,0,u,h,o.borderRadius),m.fill({color:l.backgroundColor}),m.stroke({color:l.borderColor,width:1}),e&&(m.roundRect(-2,-2,u+4,h+4,o.borderRadius+2),m.stroke({color:3900150,width:2}))},[u,h,o,l,e]),p=C.useCallback(m=>{m.clear();const v=o.height-o.padding*2,A=4;for(let x=0;x<A;x++)if(c){const E=o.padding+x*(v+o.gap);x===2&&(m.rect(E-o.gap/2-o.separatorWidth/2,(h-o.separatorHeight)/2,o.separatorWidth,o.separatorHeight),m.fill({color:l.separatorColor})),m.roundRect(E,o.padding,v,v,4),m.fill({color:l.hoverBackgroundColor});const w=v*.5,B=E+(v-w)/2,D=o.padding+(v-w)/2;m.roundRect(B,D,w,w,2),m.fill({color:l.iconColor,alpha:.3})}else{const E=o.padding+x*(v+o.gap);x===2&&(m.rect((u-o.separatorHeight)/2,E-o.gap/2-o.separatorWidth/2,o.separatorHeight,o.separatorWidth),m.fill({color:l.separatorColor})),m.roundRect(o.padding,E,v,v,4),m.fill({color:l.hoverBackgroundColor});const w=v*.5,B=o.padding+(v-w)/2,D=E+(v-w)/2;m.roundRect(B,D,w,w,2),m.fill({color:l.iconColor,alpha:.3})}},[o,l,u,h,c]);return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:f}),d.jsx("pixiGraphics",{draw:p})]})}function Hct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.label||r.children||"Choose file",o=C.useMemo(()=>Zat(s),[s]),l=C.useMemo(()=>eot(i),[i]),c=r.width||140,u=C.useCallback(x=>{x.clear(),x.roundRect(0,0,c,o.height,o.borderRadius),x.fill({color:l.backgroundColor}),x.stroke({color:l.borderColor,width:1}),e&&(x.roundRect(-2,-2,c+4,o.height+4,o.borderRadius+2),x.stroke({color:l.focusRingColor,width:2}))},[c,o,l,e]),h=C.useCallback(x=>{x.clear();const E=o.iconSize,w=E/2,B=E/2,D=E*.5,T=E*.4;x.moveTo(w,B-T/2),x.lineTo(w-D/2,B),x.lineTo(w+D/2,B),x.closePath(),x.fill({color:l.iconColor}),x.rect(w-D/6,B-T/4,D/3,T*.6),x.fill({color:l.iconColor}),x.rect(w-D/2,B+T/3,D,2),x.fill({color:l.iconColor})},[o,l]),f=C.useMemo(()=>({fontSize:o.fontSize,fill:l.textColor,fontFamily:"Inter, system-ui, sans-serif"}),[o,l]),p=o.paddingX,m=(o.height-o.iconSize)/2,v=p+o.iconSize+o.gap,A=(o.height-o.fontSize)/2;return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:u}),d.jsx("pixiGraphics",{draw:h,x:p,y:m}),d.jsx(Text,{text:a,style:f,x:v,y:A})]})}function Gct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.label||"Drop files here",o=r.description||"or click to browse",l=C.useMemo(()=>tot(s),[s]),c=C.useMemo(()=>not(i),[i]),u=r.width||280,h=r.height||l.minHeight,f=C.useCallback(x=>{x.clear(),x.roundRect(0,0,u,h,l.borderRadius),x.fill({color:c.backgroundColor});const E=8,w=4,B=l.borderRadius;Vct(x,0,0,u,h,B,E,w,c.borderColor,l.borderWidth),e&&(x.roundRect(-2,-2,u+4,h+4,l.borderRadius+2),x.stroke({color:3900150,width:2}))},[u,h,l,c,e]),p=C.useCallback(x=>{x.clear();const E=l.iconSize,w=E/2,B=E/2,D=E*.8,T=E*.5;x.circle(w-D*.15,B,T*.4),x.circle(w+D*.15,B,T*.35),x.circle(w,B-T*.15,T*.45),x.fill({color:c.iconColor}),x.roundRect(w-D*.35,B,D*.7,T*.3,2),x.fill({color:c.iconColor});const M=E*.25;x.moveTo(w,B+T*.3),x.lineTo(w-M,B+T*.5+M),x.lineTo(w+M,B+T*.5+M),x.closePath(),x.fill({color:c.iconColor})},[l,c]),m=C.useMemo(()=>({fontSize:l.labelFontSize,fill:c.labelColor,fontFamily:"Inter, system-ui, sans-serif",fontWeight:"500"}),[l,c]),v=C.useMemo(()=>({fontSize:l.fontSize,fill:c.textColor,fontFamily:"Inter, system-ui, sans-serif"}),[l,c]),A=(h-l.iconSize-l.gap*2-l.labelFontSize-l.fontSize)/2;return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:f}),d.jsx("pixiGraphics",{draw:p,x:(u-l.iconSize)/2,y:A}),d.jsx(Text,{text:a,style:m,x:u/2,y:A+l.iconSize+l.gap,anchor:{x:.5,y:0}}),d.jsx(Text,{text:o,style:v,x:u/2,y:A+l.iconSize+l.gap+l.labelFontSize+l.gap/2,anchor:{x:.5,y:0}})]})}function Vct(t,e,n,r,i,s,a,o,l,c){const u=a+o;let h=e+s;const f=n;for(;h<e+r-s;){const x=Math.min(h+a,e+r-s);t.moveTo(h,f),t.lineTo(x,f),h+=u}let p=n+s;const m=e+r;for(;p<n+i-s;){const x=Math.min(p+a,n+i-s);t.moveTo(m,p),t.lineTo(m,x),p+=u}h=e+r-s;const v=n+i;for(;h>e+s;){const x=Math.max(h-a,e+s);t.moveTo(h,v),t.lineTo(x,v),h-=u}p=n+i-s;const A=e;for(;p>n+s;){const x=Math.max(p-a,n+s);t.moveTo(A,p),t.lineTo(A,x),p-=u}t.arc(e+s,n+s,s,Math.PI,Math.PI*1.5),t.arc(e+r-s,n+s,s,Math.PI*1.5,0),t.arc(e+r-s,n+i-s,s,0,Math.PI*.5),t.arc(e+s,n+i-s,s,Math.PI*.5,Math.PI),t.stroke({color:l,width:c})}function Wct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.skeletonVariant||"text",o=C.useMemo(()=>rot(s),[s]),l=C.useMemo(()=>iot(i),[i]),u=(()=>{switch(a){case"avatar":return{width:o.avatarSize,height:o.avatarSize,isCircle:!0};case"card":return{width:r.width||240,height:r.height||120,isCircle:!1};case"list":return{width:r.width||280,height:o.lineHeight*3+o.lineGap*2,isCircle:!1};case"text":default:return{width:r.width||200,height:o.height,isCircle:!1}}})(),h=C.useCallback(p=>{switch(p.clear(),a){case"avatar":p.circle(u.width/2,u.height/2,u.width/2),p.fill({color:l.baseColor});break;case"card":p.roundRect(0,0,u.width,u.height,o.borderRadius),p.fill({color:l.baseColor});const m=u.height*.5;p.roundRect(0,0,u.width,m,o.borderRadius),p.fill({color:l.shimmerColor});const v=m+o.lineGap,A=12;p.roundRect(A,v,u.width*.7,o.lineHeight,4),p.fill({color:l.shimmerColor}),p.roundRect(A,v+o.lineHeight+o.lineGap/2,u.width*.5,o.lineHeight*.8,4),p.fill({color:l.shimmerColor});break;case"list":for(let x=0;x<3;x++){const E=x*(o.avatarSize+o.lineGap);p.circle(o.avatarSize/2,E+o.avatarSize/2,o.avatarSize/2),p.fill({color:l.baseColor});const w=o.avatarSize+o.lineGap;p.roundRect(w,E+4,u.width*.5,o.lineHeight,4),p.fill({color:l.baseColor}),p.roundRect(w,E+o.lineHeight+8,u.width*.3,o.lineHeight*.8,4),p.fill({color:l.shimmerColor})}break;case"text":default:p.roundRect(0,0,u.width,u.height,o.borderRadius),p.fill({color:l.baseColor});break}e&&(u.isCircle?(p.circle(u.width/2,u.height/2,u.width/2+4),p.stroke({color:3900150,width:2})):(p.roundRect(-2,-2,u.width+4,u.height+4,o.borderRadius+2),p.stroke({color:3900150,width:2})))},[u,o,l,a,e]),f=C.useCallback(p=>{p.clear();const m=u.width*.3;a==="avatar"?(p.arc(u.width/2,u.height/2,u.width/2,-.5,.5),p.fill({color:l.shimmerColor,alpha:.5})):a!=="list"&&(p.roundRect(u.width*.3,0,m,u.height,o.borderRadius),p.fill({color:l.shimmerColor,alpha:.5}))},[u,o,l,a]);return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:h}),d.jsx("pixiGraphics",{draw:f})]})}function Kct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.type||"info",s=r.size||"md",a=r.message||r.children||"Toast notification message",o=C.useMemo(()=>sot(s),[s]),l=C.useMemo(()=>aot(i),[i]),c=r.width||Math.min(o.maxWidth,300),u=o.padding*2+Math.max(o.iconSize,o.fontSize*1.4),h=C.useCallback(D=>{D.clear(),D.roundRect(2,2,c,u,o.borderRadius),D.fill({color:l.shadowColor,alpha:.1}),D.roundRect(0,0,c,u,o.borderRadius),D.fill({color:l.backgroundColor}),D.roundRect(0,0,c,u,o.borderRadius),D.stroke({color:l.borderColor,width:1}),D.roundRect(0,0,3,u,{topLeft:o.borderRadius,bottomLeft:o.borderRadius,topRight:0,bottomRight:0}),D.fill({color:l.accentColor}),e&&(D.roundRect(-2,-2,c+4,u+4,o.borderRadius+2),D.stroke({color:3900150,width:2}))},[c,u,o,l,e]),f=C.useCallback(D=>{D.clear();const T=o.iconSize,M=T/2,R=T/2,k=T*.4;switch(i){case"success":D.circle(M,R,k),D.fill({color:l.iconColor}),D.moveTo(M-k*.4,R),D.lineTo(M-k*.1,R+k*.3),D.lineTo(M+k*.4,R-k*.3),D.stroke({color:16777215,width:2});break;case"warning":D.moveTo(M,R-k),D.lineTo(M+k,R+k*.7),D.lineTo(M-k,R+k*.7),D.closePath(),D.fill({color:l.iconColor}),D.rect(M-1,R-k*.3,2,k*.5),D.fill({color:16777215}),D.circle(M,R+k*.3,1.5),D.fill({color:16777215});break;case"error":D.circle(M,R,k),D.fill({color:l.iconColor}),D.moveTo(M-k*.35,R-k*.35),D.lineTo(M+k*.35,R+k*.35),D.moveTo(M+k*.35,R-k*.35),D.lineTo(M-k*.35,R+k*.35),D.stroke({color:16777215,width:2});break;case"info":default:D.circle(M,R,k),D.fill({color:l.iconColor}),D.circle(M,R-k*.35,1.5),D.fill({color:16777215}),D.rect(M-1.5,R-k*.1,3,k*.6),D.fill({color:16777215});break}},[o,l,i]),p=C.useCallback(D=>{D.clear();const T=o.dismissButtonSize,M=T/2,R=T/2;D.roundRect(0,0,T,T,4),D.fill({color:l.dismissButtonColor,alpha:.1});const k=T*.25;D.moveTo(M-k,R-k),D.lineTo(M+k,R+k),D.moveTo(M+k,R-k),D.lineTo(M-k,R+k),D.stroke({color:l.dismissButtonColor,width:1.5})},[o,l]),m=C.useMemo(()=>({fontSize:o.fontSize,fill:l.textColor,fontFamily:"Inter, system-ui, sans-serif",wordWrap:!0,wordWrapWidth:c-o.paddingX*2-o.iconSize-o.dismissButtonSize-o.gap*2-10}),[o,l,c]),v=o.paddingX+4,A=(u-o.iconSize)/2,x=v+o.iconSize+o.gap,E=(u-o.fontSize)/2,w=c-o.paddingX-o.dismissButtonSize,B=(u-o.dismissButtonSize)/2;return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:h}),d.jsx("pixiGraphics",{draw:f,x:v,y:A}),d.jsx(Text,{text:a,style:m,x,y:E}),d.jsx("pixiGraphics",{draw:p,x:w,y:B})]})}function qct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.currentPage||1,o=r.totalPages||5,l=r.showInfo??!0,c=C.useMemo(()=>oot(s),[s]),u=C.useMemo(()=>lot(i),[i]),f=(()=>{const M=[];if(o<=7)for(let k=1;k<=o;k++)M.push(k);else{M.push(1),a>3&&M.push("...");const k=Math.max(2,a-1),L=Math.min(o-1,a+1);for(let F=k;F<=L;F++)M.push(F);a<o-2&&M.push("..."),M.push(o)}return M})(),m=c.buttonSize*2+c.gap*(f.length+1)+c.buttonSize*f.length,v=c.buttonSize+(l?c.fontSize+c.gap:0),A=C.useCallback((M,R,k)=>{M.clear(),M.roundRect(0,0,c.buttonSize,c.buttonSize,c.borderRadius),M.fill({color:R?u.backgroundColor:u.hoverBackgroundColor,alpha:R?.5:1});const L=c.buttonSize/2,F=c.buttonSize/2,z=c.buttonSize*.2;k?(M.moveTo(L-z/2,F-z),M.lineTo(L+z/2,F),M.lineTo(L-z/2,F+z)):(M.moveTo(L+z/2,F-z),M.lineTo(L-z/2,F),M.lineTo(L+z/2,F+z)),M.stroke({color:R?u.disabledTextColor:u.textColor,width:2})},[c,u]),x=C.useCallback((M,R)=>{M.clear(),M.roundRect(0,0,c.buttonSize,c.buttonSize,c.borderRadius),M.fill({color:R?u.currentBackgroundColor:u.backgroundColor})},[c,u]),E=C.useCallback(M=>{M.clear(),e&&(M.roundRect(-2,-2,m+4,v+4,c.borderRadius+2),M.stroke({color:3900150,width:2}))},[m,v,c,e]),w=C.useCallback(M=>({fontSize:c.fontSize,fill:M?u.currentTextColor:u.textColor,fontFamily:"Inter, system-ui, sans-serif",fontWeight:M?"bold":"normal"}),[c,u]),B=C.useMemo(()=>({fontSize:c.fontSize,fill:u.ellipsisColor,fontFamily:"Inter, system-ui, sans-serif"}),[c,u]),D=C.useMemo(()=>({fontSize:c.fontSize*.85,fill:u.ellipsisColor,fontFamily:"Inter, system-ui, sans-serif"}),[c,u]);let T=0;return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:E}),d.jsx("pixiGraphics",{draw:M=>A(M,a===1,!1),x:T,y:0}),(T+=c.buttonSize+c.gap,null),f.map((M,R)=>{const k=T;if(T+=(typeof M=="number"?c.buttonSize:c.buttonSize*.6)+c.gap,typeof M=="string")return d.jsx(Text,{text:"...",style:B,x:k+c.buttonSize*.2,y:(c.buttonSize-c.fontSize)/2},`ellipsis-${R}`);const L=M===a;return d.jsxs("pixiContainer",{x:k,y:0,children:[d.jsx("pixiGraphics",{draw:F=>x(F,L)}),d.jsx(Text,{text:String(M),style:w(L),x:c.buttonSize/2,y:c.buttonSize/2,anchor:{x:.5,y:.5}})]},M)}),d.jsx("pixiGraphics",{draw:M=>A(M,a===o,!0),x:T,y:0}),l&&d.jsx(Text,{text:`Page ${a} of ${o}`,style:D,x:m/2,y:c.buttonSize+c.gap,anchor:{x:.5,y:0}})]})}function Yct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.label||"",o=r.value||"#3b82f6",l=r.isDisabled||!1,c=r.isInvalid||!1,u=C.useMemo(()=>cot(s),[s]),h=C.useMemo(()=>uot(i),[i]),f=C.useMemo(()=>{const R=o.replace("#","");return parseInt(R,16)||3900150},[o]),p=u.height-u.padding*2,m=u.maxWidth,v=a?u.labelFontSize+u.gap:0,A=C.useCallback(R=>{R.clear();const k=l?h.disabledBackgroundColor:h.backgroundColor;R.roundRect(0,0,m,u.height,u.borderRadius),R.fill({color:k});const L=c?h.errorBorderColor:e?h.focusBorderColor:h.borderColor;R.stroke({color:L,width:1}),e&&(R.roundRect(-2,-2,m+4,u.height+4,u.borderRadius+2),R.stroke({color:h.focusBorderColor,width:2}))},[m,u,h,e,l,c]),x=C.useCallback(R=>{R.clear(),R.roundRect(0,0,p,p,4),R.fill({color:15067115}),R.roundRect(0,0,p,p,4),R.fill({color:f}),R.stroke({color:13292508,width:.5})},[p,f]),E=C.useMemo(()=>({fontSize:u.labelFontSize,fill:h.labelColor,fontFamily:"Inter, system-ui, sans-serif",fontWeight:"500"}),[u,h]),w=C.useMemo(()=>({fontSize:u.fontSize,fill:l?h.disabledBackgroundColor:h.textColor,fontFamily:"monospace"}),[u,h,l]),B=u.padding,D=(u.height-p)/2,T=B+p+u.gap,M=(u.height-u.fontSize)/2;return d.jsxs("pixiContainer",{eventMode:"static",cursor:l?"not-allowed":"pointer",onpointertap:()=>!l&&n?.(t.id),children:[a&&d.jsx(Text,{text:a,style:E,x:0,y:0}),d.jsxs("pixiContainer",{y:v,children:[d.jsx("pixiGraphics",{draw:A}),d.jsx("pixiGraphics",{draw:x,x:B,y:D}),d.jsx(Text,{text:o.toUpperCase(),style:w,x:T,y:M})]})]})}const Xct=["#ef4444","#f97316","#eab308","#22c55e","#14b8a6","#3b82f6","#6366f1","#8b5cf6","#ec4899","#f43f5e"];function Jct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.colors||Xct,o=r.value||r.selectedColor||"",l=r.layout||"grid",c=r.columns||5,u=C.useMemo(()=>dot(s),[s]),h=C.useMemo(()=>hot(i),[i]),p=l==="stack"?1:Math.min(c,a.length),m=Math.ceil(a.length/p),v=p*u.swatchSize+(p-1)*u.gap,A=m*u.swatchSize+(m-1)*u.gap,x=C.useCallback(B=>{const D=B.replace("#","");return parseInt(D,16)||3900150},[]),E=C.useCallback(B=>{B.clear(),e&&(B.roundRect(-4,-4,v+8,A+8,u.borderRadius+2),B.stroke({color:h.focusRingColor,width:2}))},[v,A,u,h,e]),w=C.useCallback((B,D,T)=>{if(B.clear(),B.roundRect(0,0,u.swatchSize,u.swatchSize,u.borderRadius),B.fill({color:D}),T){B.roundRect(0,0,u.swatchSize,u.swatchSize,u.borderRadius),B.stroke({color:h.selectionOuterColor,width:u.selectionBorderWidth});const M=u.selectionBorderWidth+2;B.roundRect(M,M,u.swatchSize-M*2,u.swatchSize-M*2,Math.max(0,u.borderRadius-M)),B.stroke({color:h.selectionInnerColor,width:u.selectionBorderWidth})}},[u,h]);return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:E}),a.map((B,D)=>{const T=D%p,M=Math.floor(D/p),R=T*(u.swatchSize+u.gap),k=M*(u.swatchSize+u.gap),L=x(B),F=B.toLowerCase()===o.toLowerCase();return d.jsx("pixiGraphics",{draw:z=>w(z,L,F),x:R,y:k},`swatch-${D}`)})]})}function Zct({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.label||r["data-group-label"]||"",o=r.isDisabled||!1,l=C.useMemo(()=>fot(s),[s]),c=C.useMemo(()=>pot(i),[i]),u=r.width||200,h=r.height||120,f=C.useCallback(A=>{A.clear();const x=6,E=4;let w=0;for(;w<u;){const T=Math.min(w+x,u);A.moveTo(w,0),A.lineTo(T,0),w+=x+E}let B=0;for(;B<h;){const T=Math.min(B+x,h);A.moveTo(u,B),A.lineTo(u,T),B+=x+E}for(w=u;w>0;){const T=Math.max(w-x,0);A.moveTo(w,h),A.lineTo(T,h),w-=x+E}for(B=h;B>0;){const T=Math.max(B-x,0);A.moveTo(0,B),A.lineTo(0,T),B-=x+E}const D=e?c.focusBorderColor:c.borderColor;A.stroke({color:D,width:1,alpha:o?c.disabledOpacity:1}),e&&(A.roundRect(-2,-2,u+4,h+4,l.borderRadius+2),A.stroke({color:c.focusBorderColor,width:2}))},[u,h,l,c,e,o]),p=C.useCallback((A,x)=>{A.clear();const E=x+l.labelPadding*2,w=l.labelFontSize+l.labelPadding;A.roundRect(0,0,E,w,4),A.fill({color:c.labelBackgroundColor}),A.stroke({color:c.borderColor,width:.5})},[l,c]),m=C.useMemo(()=>({fontSize:l.labelFontSize,fill:c.labelTextColor,fontFamily:"Inter, system-ui, sans-serif"}),[l,c]),v=a.length*l.labelFontSize*.6;return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),alpha:o?c.disabledOpacity:1,children:[d.jsx("pixiGraphics",{draw:f}),a&&d.jsxs("pixiContainer",{x:0,y:-l.labelFontSize-l.labelPadding-4,children:[d.jsx("pixiGraphics",{draw:A=>p(A,v)}),d.jsx(Text,{text:a,style:m,x:l.labelPadding,y:l.labelPadding/2})]})]})}function eut({element:t,isSelected:e=!1,onClick:n}){mn(pn);const r=t.props||{},i=r.variant||"default",s=r.size||"md",a=r.name||"Content",o=r.description||"Drop content here",l=r.isRequired||r.required||!1,c=r.isEmpty??!0,u=C.useMemo(()=>got(s),[s]),h=C.useMemo(()=>mot(i),[i]),f=r.width||280,p=r.height||u.minHeight,m=C.useCallback(T=>{if(T.clear(),c){const R=l?h.requiredBorderColor:h.backgroundColor;T.roundRect(0,0,f,p,u.borderRadius),T.fill({color:R,alpha:.05});const k=8;for(let L=-p;L<f+p;L+=k)T.moveTo(L,0),T.lineTo(L+p,p);T.stroke({color:h.borderColor,width:.5,alpha:.2})}const M=c?l?h.requiredBorderColor:h.emptyBorderColor:h.borderColor;tut(T,0,0,f,p,u.borderRadius,M,u.borderWidth),e&&(T.roundRect(-2,-2,f+4,p+4,u.borderRadius+2),T.stroke({color:h.selectedBorderColor,width:2}))},[f,p,u,h,c,l,e]),v=C.useCallback(T=>{T.clear();const M=u.iconSize,R=M/2,k=M/2,L=M*.4;T.circle(R,k,L),T.fill({color:h.iconBackgroundColor});const F=L*.5;T.rect(R-F,k-1,F*2,2),T.rect(R-1,k-F,2,F*2),T.fill({color:h.iconColor})},[u,h]),A=C.useCallback(T=>{if(T.clear(),!l)return;T.roundRect(0,0,60,18,4),T.fill({color:h.requiredBadgeBackgroundColor})},[h,l]),x=C.useMemo(()=>({fontSize:u.labelFontSize,fill:h.textColor,fontFamily:"Inter, system-ui, sans-serif",fontWeight:"600"}),[u,h]),E=C.useMemo(()=>({fontSize:u.descriptionFontSize,fill:h.textColor,fontFamily:"Inter, system-ui, sans-serif",alpha:.7}),[u,h]),w=C.useMemo(()=>({fontSize:u.descriptionFontSize,fill:h.requiredBadgeTextColor,fontFamily:"Inter, system-ui, sans-serif",fontWeight:"500"}),[u,h]),B=u.iconSize+u.gap+u.labelFontSize+u.gap/2+u.descriptionFontSize,D=(p-B)/2;return d.jsxs("pixiContainer",{eventMode:"static",cursor:"pointer",onpointertap:()=>n?.(t.id),children:[d.jsx("pixiGraphics",{draw:m}),c&&d.jsxs("pixiContainer",{children:[d.jsx("pixiGraphics",{draw:v,x:(f-u.iconSize)/2,y:D}),d.jsxs("pixiContainer",{y:D+u.iconSize+u.gap,children:[d.jsx(Text,{text:a,style:x,x:f/2,y:0,anchor:{x:.5,y:0}}),l&&d.jsxs("pixiContainer",{x:f/2+40,y:-2,children:[d.jsx("pixiGraphics",{draw:A}),d.jsx(Text,{text:"Required",style:w,x:8,y:2})]})]}),d.jsx(Text,{text:o,style:E,x:f/2,y:D+u.iconSize+u.gap+u.labelFontSize+u.gap/2,anchor:{x:.5,y:0}})]})]})}function tut(t,e,n,r,i,s,a,o){let u=e+s;for(;u<e+r-s;){const f=Math.min(u+6,e+r-s);t.moveTo(u,n),t.lineTo(f,n),u+=10}let h=n+s;for(;h<n+i-s;){const f=Math.min(h+6,n+i-s);t.moveTo(e+r,h),t.lineTo(e+r,f),h+=10}for(u=e+r-s;u>e+s;){const f=Math.max(u-6,e+s);t.moveTo(u,n+i),t.lineTo(f,n+i),u-=10}for(h=n+i-s;h>n+s;){const f=Math.max(h-6,n+s);t.moveTo(e,h),t.lineTo(e,f),h-=10}t.arc(e+s,n+s,s,Math.PI,Math.PI*1.5),t.arc(e+r-s,n+s,s,Math.PI*1.5,0),t.arc(e+r-s,n+i-s,s,0,Math.PI*.5),t.arc(e+s,n+i-s,s,Math.PI*.5,Math.PI),t.stroke({color:a,width:o})}let Fhe;function jhe(){return Fhe}function Ohe(t){Fhe=t}let zhe;function nut(t){zhe=t}function rut(){return zhe}function RM(t,e){return t?typeof t=="number"?t:typeof t=="string"&&t.endsWith("%")?(e??(e=1),e*(parseFloat(t)/100)):Number.isNaN(parseFloat(t))?0:parseFloat(t):0}function rb(t){return typeof t=="number"?"number":t.endsWith("%")?"percentage":Number.isNaN(parseInt(t,10))?"keyword":"number"}function N3(t,e,n){return(e[t]-n[t])/2}function WK(t,e,n,r,i){const s=e==="percentage"?r[n]-i[n]:1;return RM(t)*s}function $he(t,e,n){const[r,i]=t,s=rb(r),a=rb(i),o={x:void 0,y:void 0};switch(r){case"top":o.y=0;break;case"bottom":o.y=e.height-n.height;break;case"center":i==="left"||i==="right"?o.y=N3("height",e,n):o.x=N3("width",e,n);break;case"left":o.x=0;break;case"right":o.x=e.width-n.width;break;default:{const l=i==="top"||i==="bottom"||a!=="keyword"?"width":"height",c=l==="width"?"x":"y";o[c]=WK(r,s,l,e,n)}}switch(i){case"top":o.y=0;break;case"bottom":o.y=e.height-n.height;break;case"center":o.y===void 0?o.y=N3("height",e,n):o.x=N3("width",e,n);break;case"left":o.x=0;break;case"right":o.x=e.width-n.width;break;default:{const l=o.y===void 0?"y":"x",c=l==="y"?"height":"width";o[l]=WK(i,a,c,e,n)}}return o}function L3(t,e,n,r){const i=t==="right"||t==="bottom",s=n==="percentage"?e*r:e;return i?-s:s}function iut(t,e,n){const[r,i,s,a]=t,o=rb(r),l=rb(i),c=rb(s),u=rb(a);if(l==="keyword"||u==="keyword")throw new Error("Invalid objectPosition value: second and fourth values must be numbers or percentages");if(o!=="keyword"||c!=="keyword")throw new Error("Invalid objectPosition value: first and third values must be keywords");const h=$he([r,s],e,n),f={...h},p=RM(i),m=RM(a);return r==="left"||r==="right"?f.x=h.x+L3(r,p,l,n.width):(r==="top"||r==="bottom")&&(f.y=h.y+L3(r,p,l,n.height)),s==="left"||s==="right"?f.x=h.x+L3(s,m,u,n.width):(s==="top"||s==="bottom")&&(f.y=h.y+L3(s,m,u,n.height)),f}function sut(t,e,n){const r=t[0],i={x:void 0,y:void 0};switch(r){case"top":i.y=0,i.x=(e.width-n.width)/2;break;case"bottom":i.y=e.height-n.height,i.x=(e.width-n.width)/2;break;case"left":i.x=0,i.y=(e.height-n.height)/2;break;case"right":i.x=e.width-n.width,i.y=(e.height-n.height)/2;break;case"center":i.x=(e.width-n.width)/2,i.y=(e.height-n.height)/2;break;default:{const a=rb(r)==="percentage"?e.width-n.width:1;i.x=RM(r)*a,i.y=(e.height-n.height)/2}}return i}function fO(t,e,n){if(!t)return{x:0,y:0};const r=typeof t=="string"?t.split(" "):[t];switch(r.length){case 1:return sut(r,e,n);case 2:return $he(r,e,n);case 4:return iut(r,e,n);default:throw new Error("Invalid objectPosition value: must have 1, 2, or 4 values")}}const wN={width:0,height:0};function Qhe(t){const e=t.target.getLocalBounds(),n=t.target.scale;return wN.width=Math.abs(e.width*n.x),wN.height=Math.abs(e.height*n.y),wN}function KK(t,e,n=.49){return Math.abs(t-e)<n}function aut(t,e=0,n={}){let r,i;const s=n.maxWait?n.maxWait:e;let a,o,l,c=0;const u=!!n.leading,h="maxWait"in n,f=n.trailing??!0,p=e!==0&&typeof globalThis.requestAnimationFrame=="function";if(typeof t!="function")throw new TypeError("Expected a function");function m(L){const F=r,z=i;return r=i=void 0,c=L,a=t.apply(z,F),a}function v(L,F){return p?(typeof o=="number"&&globalThis.cancelAnimationFrame(o),globalThis.requestAnimationFrame(L)):setTimeout(L,F)}function A(L){if(p){globalThis.cancelAnimationFrame(L);return}clearTimeout(L)}function x(L){return c=L,o=v(B,e),u?m(L):a}function E(L){const F=L-(l||0),z=L-c,G=e-F;return h?Math.min(G,s-z):G}function w(L){const F=L-(l||0),z=L-c;return l===void 0||F>=e||F<0||h&&z>=s}function B(){const L=Date.now();if(w(L))return D(L);o=v(B,E(L))}function D(L){return o=void 0,f&&r?m(L):(r=i=void 0,a)}function T(){o!==void 0&&A(o),c=0,r=l=i=o=void 0}function M(){return o===void 0?a:D(Date.now())}function R(){return o!==void 0}function k(...L){const F=Date.now(),z=w(F);if(r=L,i=this,l=F,z){if(o===void 0)return x(l);if(h)return o=v(B,e),m(l)}return o===void 0&&(o=v(B,e)),a}return k.cancel=T,k.flush=M,k.pending=R,k}function out(t,e,n={}){const r=n.leading??!0,i=n.trailing??!0;if(typeof t!="function")throw new TypeError("Expected a function");return aut(t,e,{leading:r,trailing:i,maxWait:e})}var lut=Object.defineProperty,cut=(t,e,n)=>e in t?lut(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jx=(t,e,n)=>cut(t,typeof e!="symbol"?e+"":e,n);class Uhe{constructor(){jx(this,"autoUpdate",!0),jx(this,"_debugEnabled",!1),jx(this,"_debugRenderer",null),jx(this,"_throttledUpdateSize"),jx(this,"_throttle",100),jx(this,"_modificationCount",50)}async init(e){Ohe(await bhe()),nut(jhe().Config.create());const{layout:n}=e??{},{autoUpdate:r,enableDebug:i,throttle:s,debugModificationCount:a}=n??{};i&&this.enableDebug(!0),r!==void 0&&(this.autoUpdate=r),this._throttle=s??this._throttle,this._throttledUpdateSize=out(o=>this._updateSize(o),this._throttle,{leading:!0,trailing:!0}),this._modificationCount=a??this._modificationCount}async enableDebug(e=!this._debugEnabled){if(this._debugEnabled=e,!this._debugRenderer){const n=await fn(()=>import("./DebugRenderer-DdBwJGJ_.js"),[]);this._debugRenderer=new n.DebugRenderer}this._debugEnabled||this._debugRenderer.reset()}update(e){this._debugEnabled&&this._debugRenderer&&(this._debugRenderer.reset(),e.addChild(this._debugRenderer.holder)),this._throttle===0?this._updateSize(e):this._throttledUpdateSize(e),this.updateLayout(e)}prerender({container:e}){this.autoUpdate&&this.update(e)}_updateSize(e){if(e.destroyed)return;const n=e._layout;if(n){const r=n.style;if(r.width==="intrinsic"||r.height==="intrinsic"){const i=Qhe(n);if(r.width==="intrinsic"){const s=n.yoga.getWidth().value;KK(s,i.width)||(n.yoga.setWidth(i.width),n.invalidateRoot())}if(r.height==="intrinsic"){const s=n.yoga.getHeight().value;KK(s,i.height)||(n.yoga.setHeight(i.height),n.invalidateRoot())}}if(!e.visible){n._onChildRemoved();return}}for(let r=0;r<e.children.length;r++)this._updateSize(e.children[r])}updateLayout(e){var n,r,i,s;const a=e._layout;if(e.visible){if(a){const o=a.yoga,l=a.style,c=(n=e.parent)==null?void 0:n.isOverflowContainer;if(!((r=e.parent)==null?void 0:r._layout)&&!c&&a._isDirty&&(a._isDirty=!1,o.calculateLayout(l.width,l.height,o.getDirection()??I0.LTR)),o.hasNewLayout()||a._forceUpdate){o.markLayoutSeen(),a._forceUpdate=!1,a._computedLayout=o.getComputedLayout();const h=fO(l.transformOrigin,a._computedLayout,{width:0,height:0});a._computedPixiLayout={...e.computeLayoutData(a._computedLayout),originX:h.x,originY:h.y},e.emit("layout",a),(i=e.onLayout)==null||i.call(e,a),e._onUpdate()}this._debugEnabled&&(a._styles.custom.debug||a._modificationCount>this._modificationCount&&a._styles.custom.debugHeat!==!1)&&((s=this._debugRenderer)==null||s.render(a))}for(let o=0;o<e.children.length;o++)this.updateLayout(e.children[o])}}destroy(){!this._debugEnabled&&this._debugRenderer&&this._debugRenderer.destroy()}}jx(Uhe,"extension",{type:[Vn.WebGLSystem,Vn.WebGPUSystem],name:"layout"});const qK={"flex-start":Hr.FlexStart,"flex-end":Hr.FlexEnd,center:Hr.Center,stretch:Hr.Stretch,"space-between":Hr.SpaceBetween,"space-around":Hr.SpaceAround,"space-evenly":Hr.SpaceEvenly},YK={"flex-start":Hr.FlexStart,"flex-end":Hr.FlexEnd,center:Hr.Center,stretch:Hr.Stretch,baseline:Hr.Baseline},XK={auto:Hr.Auto,"flex-start":Hr.FlexStart,"flex-end":Hr.FlexEnd,center:Hr.Center,stretch:Hr.Stretch,baseline:Hr.Baseline},JK={"border-box":Nb.BorderBox,"content-box":Nb.ContentBox},ZK={ltr:I0.LTR,rtl:I0.RTL},eq={none:db.None,flex:db.Flex,contents:db.Contents},tq={row:cu.Row,column:cu.Column,"row-reverse":cu.RowReverse,"column-reverse":cu.ColumnReverse},nq={wrap:Vg.Wrap,nowrap:Vg.NoWrap,"wrap-reverse":Vg.WrapReverse},rq={"flex-start":Po.FlexStart,"flex-end":Po.FlexEnd,center:Po.Center,"space-between":Po.SpaceBetween,"space-around":Po.SpaceAround,"space-evenly":Po.SpaceEvenly},iq={visible:hb.Visible,hidden:hb.Hidden,scroll:hb.Scroll},sq={absolute:ky.Absolute,relative:ky.Relative,static:ky.Static},uut={alignContent:(t,e)=>t.setAlignContent(dut(e)),alignItems:(t,e)=>t.setAlignItems(hut(e)),alignSelf:(t,e)=>t.setAlignSelf(fut(e)),aspectRatio:(t,e)=>t.setAspectRatio(e),borderBottomWidth:(t,e)=>t.setBorder(Dn.Bottom,e),borderEndWidth:(t,e)=>t.setBorder(Dn.End,e),borderLeftWidth:(t,e)=>t.setBorder(Dn.Left,e),borderRightWidth:(t,e)=>t.setBorder(Dn.Right,e),borderStartWidth:(t,e)=>t.setBorder(Dn.Start,e),borderTopWidth:(t,e)=>t.setBorder(Dn.Top,e),borderWidth:(t,e)=>t.setBorder(Dn.All,e),borderInlineWidth:(t,e)=>t.setBorder(Dn.Horizontal,e),borderBlockWidth:(t,e)=>t.setBorder(Dn.Vertical,e),bottom:(t,e)=>t.setPosition(Dn.Bottom,e),boxSizing:(t,e)=>t.setBoxSizing(put(e)),direction:(t,e)=>t.setDirection(gut(e)),display:(t,e)=>t.setDisplay(mut(e)),end:(t,e)=>t.setPosition(Dn.End,e),flex:(t,e)=>t.setFlex(e),flexBasis:(t,e)=>t.setFlexBasis(e),flexDirection:(t,e)=>t.setFlexDirection(Aut(e)),rowGap:(t,e)=>t.setGap(Mp.Row,e),gap:(t,e)=>t.setGap(Mp.All,e),columnGap:(t,e)=>t.setGap(Mp.Column,e),flexGrow:(t,e)=>t.setFlexGrow(e),flexShrink:(t,e)=>t.setFlexShrink(e),flexWrap:(t,e)=>t.setFlexWrap(yut(e)),height:(t,e)=>t.setHeight(e),justifyContent:(t,e)=>t.setJustifyContent(vut(e)),left:(t,e)=>t.setPosition(Dn.Left,e),margin:(t,e)=>t.setMargin(Dn.All,e),marginBottom:(t,e)=>t.setMargin(Dn.Bottom,e),marginEnd:(t,e)=>t.setMargin(Dn.End,e),marginLeft:(t,e)=>t.setMargin(Dn.Left,e),marginRight:(t,e)=>t.setMargin(Dn.Right,e),marginStart:(t,e)=>t.setMargin(Dn.Start,e),marginTop:(t,e)=>t.setMargin(Dn.Top,e),marginInline:(t,e)=>t.setMargin(Dn.Horizontal,e),marginBlock:(t,e)=>t.setMargin(Dn.Vertical,e),maxHeight:(t,e)=>t.setMaxHeight(e),maxWidth:(t,e)=>t.setMaxWidth(e),minHeight:(t,e)=>t.setMinHeight(e),minWidth:(t,e)=>t.setMinWidth(e),overflow:(t,e)=>t.setOverflow(xut(e)),padding:(t,e)=>t.setPadding(Dn.All,e),paddingBottom:(t,e)=>t.setPadding(Dn.Bottom,e),paddingEnd:(t,e)=>t.setPadding(Dn.End,e),paddingLeft:(t,e)=>t.setPadding(Dn.Left,e),paddingRight:(t,e)=>t.setPadding(Dn.Right,e),paddingStart:(t,e)=>t.setPadding(Dn.Start,e),paddingTop:(t,e)=>t.setPadding(Dn.Top,e),paddingInline:(t,e)=>t.setPadding(Dn.Horizontal,e),paddingBlock:(t,e)=>t.setPadding(Dn.Vertical,e),position:(t,e)=>t.setPositionType(but(e)),right:(t,e)=>t.setPosition(Dn.Right,e),start:(t,e)=>t.setPosition(Dn.Start,e),top:(t,e)=>t.setPosition(Dn.Top,e),insetInline:(t,e)=>t.setPosition(Dn.Horizontal,e),insetBlock:(t,e)=>t.setPosition(Dn.Vertical,e),inset:(t,e)=>t.setPosition(Dn.All,e),width:(t,e)=>t.setWidth(e)};function dut(t){if(t in qK)return qK[t];throw new Error(`"${t}" is not a valid value for alignContent`)}function hut(t){if(t in YK)return YK[t];throw new Error(`"${t}" is not a valid value for alignItems`)}function fut(t){if(t in XK)return XK[t];throw new Error(`"${t}" is not a valid value for alignSelf`)}function put(t){if(t in JK)return JK[t];throw new Error(`"${t}" is not a valid value for boxSizing`)}function gut(t){if(t in ZK)return ZK[t];throw new Error(`"${t}" is not a valid value for direction`)}function mut(t){if(t in eq)return eq[t];throw new Error(`"${t}" is not a valid value for display`)}function Aut(t){if(t in tq)return tq[t];throw new Error(`"${t}" is not a valid value for flexDirection`)}function yut(t){if(t in nq)return nq[t];throw new Error(`"${t}" is not a valid value for flexWrap`)}function vut(t){if(t in rq)return rq[t];throw new Error(`"${t}" is not a valid value for justifyContent`)}function xut(t){if(t in iq)return iq[t];throw new Error(`"${t}" is not a valid value for overflow`)}function but(t){if(t in sq)return sq[t];throw new Error(`"${t}" is not a valid value for position`)}function Cut(t,e={}){for(const[n,r]of Object.entries(e))try{const i=uut[n];i&&i(t,r)}catch{}if(e.width!==void 0){const n=e.left!==void 0&&e.right!==void 0?"auto":e.width;t.setWidth(n)}if(e.height!==void 0){const n=e.top!==void 0&&e.bottom!==void 0?"auto":e.height;t.setHeight(n)}}function Eut(t,e){let r={...t._styles.custom,...e};r={...{...L1.defaultStyle.shared,...t.target instanceof qb||r.isLeaf||L1.defaultStyle.shared.isLeaf?L1.defaultStyle.leaf:L1.defaultStyle.container},...r};const s={...r},a=r.width==="intrinsic",o=r.height==="intrinsic";if(a||o){const{width:l,height:c}=Qhe(t);a&&(s.width=l),o&&(s.height=c)}return{custom:r,yoga:s}}function Sut(t,e){var n;let r=e.layout,i;if(!r&&e.isOverflowContainer&&(i=e,r=(n=i.parent)==null?void 0:n.layout,e=i.parent),!r)return!1;const s=t.yoga.getParent();s&&s.removeChild(t.yoga);const a=wut(t,e,i);return a===-1?!1:(a===r.yoga.getChildCount(),r.yoga.insertChild(t.yoga,a),!0)}function wut(t,e,n){const r=t.target;let i=0;if(n){for(const s of e.children){if(s===n){for(const a of n.children)if(!(!a.layout||!a.visible)){if(a===r)return i;i++}return-1}s.layout&&s.visible&&i++}return-1}for(const s of e.children)if(!(!s.layout||!s.visible)){if(s===r)return i;i++}return-1}function _ut(t){const e=t.yoga.getParent();e&&e.removeChild(t.yoga)}var Iut=Object.defineProperty,But=(t,e,n)=>e in t?Iut(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vh=(t,e,n)=>But(t,typeof e!="symbol"?e+"":e,n);class L1{constructor({target:e}){Vh(this,"yoga"),Vh(this,"target"),Vh(this,"destroyed",!1),Vh(this,"_isDirty",!1),Vh(this,"_computedPixiLayout",{x:0,y:0,offsetX:0,offsetY:0,scaleX:1,scaleY:1,originX:0,originY:0}),Vh(this,"_computedLayout",{left:0,right:0,top:0,bottom:0,width:0,height:0}),Vh(this,"_styles",{custom:{},yoga:{}}),Vh(this,"_modificationCount",0),Vh(this,"_forceUpdate",!1),Vh(this,"hasParent",!1),Vh(this,"_trackedStyleKeys",["borderRadius","borderColor","backgroundColor","objectFit","objectPosition","transformOrigin","isLeaf"]),this.target=e,this.yoga=jhe().Node.create(rut()),e.on("added",this._onChildAdded,this),e.on("removed",this._onChildRemoved,this),e.on("destroyed",this.destroy,this)}get style(){return this._styles.custom}get computedLayout(){return this._computedLayout}get computedPixiLayout(){return this._computedPixiLayout}get realX(){return this.target.localTransform.tx}get realY(){return this.target.localTransform.ty}get realScaleX(){return this.target.localTransform.a}get realScaleY(){return this.target.localTransform.d}setStyle(e){const n=Eut(this,e),r=JSON.stringify(this._styles.custom)!==JSON.stringify(n.custom),i=JSON.stringify(this._styles.yoga)!==JSON.stringify(n.yoga),s=r||i,a=this._trackedStyleKeys.some(o=>n.custom[o]!==this._styles.custom[o]);this._styles=n,a&&(this._forceUpdate=!0),s&&(Cut(this.yoga,this._styles.yoga),this.target._onUpdate(),this.invalidateRoot())}invalidateRoot(e){const n=this.getRoot(e);n.destroyed||(n._layout._isDirty=!0,n._onUpdate(),this._modificationCount++)}forceUpdate(){this._forceUpdate=!0}getRoot(e){var n,r;let i=e||this.target;for(;(n=i.parent)!=null&&n._layout||(r=i.parent)!=null&&r.isOverflowContainer;)i=i.parent,i.isOverflowContainer&&(i=i.parent);return i}_onChildAdded(e){this.hasParent||Sut(this,e)!==!1&&(this.hasParent=!0,this.invalidateRoot())}_onChildRemoved(e){this.hasParent&&(this.hasParent=!1,this.invalidateRoot(e),_ut(this))}destroy(){this.destroyed||(this.destroyed=!0,this.invalidateRoot(),this.yoga.free(),this.target.off("added",this._onChildAdded,this),this.target.off("removed",this._onChildRemoved,this),this._styles=null,this._computedPixiLayout=null,this._computedLayout=null,this.target=null,this.hasParent=!1)}}Vh(L1,"defaultStyle",{leaf:{width:"intrinsic",height:"intrinsic"},container:{width:"auto",height:"auto"},shared:{transformOrigin:"50%",objectPosition:"center",flexShrink:1,flexDirection:"row",alignContent:"stretch",flexWrap:"nowrap",overflow:"visible"}});function Hhe(t,e,n){let r=1,i=1;switch(t){case"fill":r=e.width/n.width,i=e.height/n.height;break;case"contain":{const s=Math.min(e.width/n.width,e.height/n.height);r=s,i=s;break}case"cover":{const s=Math.max(e.width/n.width,e.height/n.height);r=s,i=s;break}case"none":r=1,i=1;break;case"scale-down":{const s=Math.min(1,e.width/n.width,e.height/n.height);r=s,i=s;break}}return{offsetScaleX:r,offsetScaleY:i}}function Ghe(t,e,n,r){const i=t.getLocalBounds(),s=t.layout.style.objectFit||n;let{offsetScaleX:a,offsetScaleY:o}=Hhe(s,e,i);const l={width:i.width*a,height:i.height*o};let{x:c,y:u}=fO(t.layout.style.objectPosition,e,l);r?(c+=i.width*a*r._x,u+=i.height*o*r._y):(c-=i.minX*a,u-=i.minY*o);const h=t.layout.style.applySizeDirectly;return(h===!0||h==null&&(t instanceof Ltt||t instanceof Ug))&&(t.width=i.width*a,t.height=i.height*o,a=1,o=1),{x:e.left,y:e.top,offsetX:c,offsetY:u,scaleX:a,scaleY:o}}const _N=Object.getOwnPropertyDescriptor(hr.prototype,"visible"),Tut={_layout:null,get layout(){return this._layout??null},set layout(t){if(t=t===!0?{}:t,!t){this._layout&&(this._layout.destroy(),this._layout=null,this.updateLocalTransform=hr.prototype.updateLocalTransform,Object.defineProperty(hr.prototype,"visible",_N));return}if(!this._layout){this._layout=new L1({target:this}),Object.defineProperty(hr.prototype,"visible",{..._N,set(e){_N.set.call(this,e),this.layout&&(e&&this.parent?this.layout._onChildAdded(this.parent):this.layout._onChildRemoved())}});for(const e of this.children)e.layout&&e.visible&&(e.layout._onChildRemoved(),e.layout._onChildAdded(this));this.parent&&this.visible&&this._layout._onChildAdded(this.parent)}this._layout.setStyle(t),this.updateLocalTransform=this.updateLocalTransformWithLayout,this._onUpdate()},updateLocalTransformWithLayout(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const e=this._layout,{x:n,y:r,offsetX:i,offsetY:s,scaleX:a,scaleY:o,originX:l,originY:c}=e._computedPixiLayout,u=this.localTransform,{rotation:h,skew:f,scale:p,position:m}=this,v=h+f._y,A=h-f._x,x=Math.cos(v)*p._x,E=Math.sin(v)*p._x,w=-Math.sin(A)*p._y,B=Math.cos(A)*p._y,D=m._x+n-l*x-c*w,T=m._y+r-l*E-c*B;u.a=x*a,u.b=E*a,u.c=w*o,u.d=B*o,u.tx=D+(i*x+s*w)+l,u.ty=T+(i*E+s*B)+c},computeLayoutData(t){const e=this._layout,{isLeaf:n}=e._styles.custom;return n?Ghe(this,t,"fill"):{x:t.left,y:t.top,offsetX:0,offsetY:0,scaleX:1,scaleY:1}}};ha.mixin(hr,Tut);const aq=new no(0,0),Mut={computeLayoutData(t){const e=this._style;aq.copyFrom(this.scale),this.scale=1,e.wordWrap&&(e.wordWrapWidth=t.width);let n=this.getLocalBounds();const r=this.layout.style.objectFit||"scale-down",{offsetScaleX:i,offsetScaleY:s}=Hhe(r,t,n);e.wordWrap&&(e.wordWrapWidth=t.width/Math.min(1,Math.max(i,s))),n=this.getLocalBounds();const a={width:n.width*i,height:n.height*s};let{x:o,y:l}=fO(this.layout.style.objectPosition,t,a);return o+=n.width*i*this.anchor._x,l+=n.height*s*this.anchor._y,this.layout.style.applySizeDirectly===!0&&(this.width=n.width*i,this.height=n.height*s),this.scale.copyFrom(aq),{x:t.left,y:t.top,offsetX:o,offsetY:l,scaleX:i,scaleY:s}}};ha.mixin(q4,Mut);const IN=Object.getOwnPropertyDescriptor(q4.prototype,"text");Object.defineProperty(q4.prototype,"text",{...IN,set(t){var e;const n=IN.get.call(this);IN.set.call(this,t),n!==t&&((e=this.layout)==null||e.forceUpdate())}});const Dut={computeLayoutData(t){return Ghe(this,t,"fill",this._anchor)}};ha.mixin(qb,Dut);ha.add(Uhe);let Z1=null,F3=null;async function Rut(){return Z1||(F3||(F3=fn(()=>Promise.resolve().then(()=>ort),void 0).then(async t=>{const e=await t.loadYoga();return Z1=e,Ohe(e),console.log("[LayoutEngine] Yoga initialized successfully (also set for @pixi/layout)"),e}).catch(t=>{throw console.error("[LayoutEngine] Failed to initialize Yoga:",t),F3=null,t})),F3)}function Put(){if(!Z1)throw new Error("Yoga not initialized. Call initYoga() first.");return Z1}function Vhe(t){return typeof t=="string"&&t.trim().endsWith("%")}function xs(t,e=0){if(typeof t=="number")return t;if(typeof t=="string"){const n=parseFloat(t);return isNaN(n)?e:n}return e}function oq(t,e,n){if(n==null||n===""||n==="auto")return;const r=xs(n,0);r<=0||(Vhe(n)?e==="width"?t.setWidthPercent(r):t.setHeightPercent(r):e==="width"?t.setWidth(r):t.setHeight(r))}function j3(t,e,n){if(n==null||n==="")return;const r=xs(n,0);if(r<=0)return;const i=Vhe(n);switch(e){case"minWidth":i?t.setMinWidthPercent(r):t.setMinWidth(r);break;case"minHeight":i?t.setMinHeightPercent(r):t.setMinHeight(r);break;case"maxWidth":i?t.setMaxWidthPercent(r):t.setMaxWidth(r);break;case"maxHeight":i?t.setMaxHeightPercent(r):t.setMaxHeight(r);break}}const kut=new Set(["Text","Heading","Label","Badge","h1","h2","h3","h4","h5","h6","p","span","Button","Link","a","Tab","Tag","Breadcrumb","Switch","ToggleButton"]),Nut=new Set(["Checkbox","CheckboxGroup","RadioGroup"]),YI={sm:{boxSize:16,gap:8},md:{boxSize:20,gap:8},lg:{boxSize:24,gap:8}},Z4=YI.md,Whe={xs:{fontSize:10,paddingX:8,paddingY:2},sm:{fontSize:14,paddingX:12,paddingY:4},md:{fontSize:16,paddingX:24,paddingY:8},lg:{fontSize:18,paddingX:32,paddingY:12},xl:{fontSize:20,paddingX:40,paddingY:16}},Lut=Whe.sm;function Fut(t){return kut.has(t.tag)}function jut(t){const n=t.props?.size||"sm",r=Whe[n]||Lut;return{paddingX:r.paddingX,paddingY:r.paddingY,fontSize:r.fontSize}}function Out(t,e){const n=t.props,r=String(n?.children||n?.text||n?.label||"");if(!r)return null;const s=t.tag==="Button"||t.tag==="SubmitButton"||t.tag==="ToggleButton"?jut(t):null,a=xs(e?.fontSize,s?.fontSize??16),o=new bn({fontFamily:e?.fontFamily||"Arial",fontSize:a,fontWeight:e?.fontWeight||"normal",fontStyle:e?.fontStyle||"normal",letterSpacing:xs(e?.letterSpacing,0)}),l=os.measureText(r,o);let c,u,h,f;if(s){const v=Lb(e);e?.padding||e?.paddingTop||e?.paddingRight||e?.paddingBottom||e?.paddingLeft?(c=v.left,u=v.right,h=v.top,f=v.bottom):(c=s.paddingX,u=s.paddingX,h=s.paddingY,f=s.paddingY)}else{const v=Lb(e);c=v.left,u=v.right,h=v.top,f=v.bottom}const p=l.width+c+u,m=l.height+h+f;return{width:Math.ceil(p),height:Math.ceil(m)}}function zut(t,e){const n=t.props,r=n?.size||"md",i=YI[r]||Z4,{boxSize:s,gap:a}=i,o=String(n?.children||n?.label||n?.text||"");if(!o)return{width:s,height:s};const l=xs(e?.fontSize,14),c=new bn({fontFamily:e?.fontFamily||"Pretendard, sans-serif",fontSize:l,fontWeight:e?.fontWeight||"normal",fontStyle:e?.fontStyle||"normal",letterSpacing:xs(e?.letterSpacing,0)}),u=os.measureText(o,c),h=s+a+u.width,f=Math.max(s,u.height);return{width:Math.ceil(h),height:Math.ceil(f)}}function $ut(t,e,n){const r=t.props,i=r?.size||"md",s=YI[i]||Z4,{boxSize:a,gap:o}=s,l=xs(e?.fontSize,14),c=String(r?.label||r?.children||r?.text||""),u=c?l+8:0,h=r?.orientation,f=h==="horizontal"?!0:h==="vertical"?!1:e?.flexDirection==="row",p=n.filter(D=>D.parent_id===t.id&&(D.tag==="Checkbox"||D.tag==="CheckBox")).sort((D,T)=>(D.order_num||0)-(T.order_num||0)),m=[{value:"option1",label:"Option 1"},{value:"option2",label:"Option 2"}];let v;p.length>0?v=p.map(D=>{const T=D.props;return{value:String(T?.value||D.id),label:String(T?.children||T?.label||T?.text||"")}}):Array.isArray(r?.options)&&r.options.length>0?v=r.options:v=m;const A=12,x=120,E=new bn({fontFamily:e?.fontFamily||"Pretendard, sans-serif",fontSize:l,fontWeight:e?.fontWeight||"normal",fontStyle:e?.fontStyle||"normal",letterSpacing:xs(e?.letterSpacing,0)});let w=0;c&&(w=os.measureText(c,E).width);const B=v.map(D=>{const T=String(D.label||D.name||D.value||"");if(!T)return{width:a,height:a};const M=os.measureText(T,E);return{width:a+o+M.width,height:Math.max(a,M.height)}});if(f){const D=B.length-1,T=D*x,M=B[D]?.width||a,R=T+M,k=Math.max(R,w),L=Math.max(...B.map(F=>F.height),a);return{width:Math.ceil(k),height:Math.ceil(u+L)}}else{const D=Math.max(...B.map(R=>R.width),a),T=Math.max(D,w),M=v.length*(a+A)-A;return{width:Math.ceil(T),height:Math.ceil(u+M)}}}function Qut(t,e,n){const r=t.props,i=r?.size||"md",s=cO(i),a=s.radioSize,o=s.gap,l=xs(e?.fontSize,s.fontSize),c=String(r?.label||r?.children||r?.text||""),u=c?l+8:0,h=r?.orientation,f=h==="horizontal"?!0:h==="vertical"?!1:e?.flexDirection==="row",p=n.filter(D=>D.parent_id===t.id&&D.tag==="Radio").sort((D,T)=>(D.order_num||0)-(T.order_num||0)),m=[{value:"option1",label:"Option 1"},{value:"option2",label:"Option 2"}];let v;p.length>0?v=p.map(D=>{const T=D.props;return{value:String(T?.value||D.id),label:String(T?.children||T?.label||T?.text||"")}}):Array.isArray(r?.options)&&r.options.length>0?v=r.options:v=m;const A=12,x=120,E=new bn({fontFamily:e?.fontFamily||"Pretendard, sans-serif",fontSize:l,fontWeight:e?.fontWeight||"normal",fontStyle:e?.fontStyle||"normal",letterSpacing:xs(e?.letterSpacing,0)});let w=0;c&&(w=os.measureText(c,E).width);const B=v.map(D=>{const T=String(D.label||D.name||D.value||"");if(!T)return{width:a,height:a};const M=os.measureText(T,E);return{width:a+o+M.width,height:Math.max(a,M.height)}});if(f){const D=B.length-1,T=D*x,M=B[D]?.width||a,R=T+M,k=Math.max(R,w),L=Math.max(...B.map(F=>F.height),a);return{width:Math.ceil(k),height:Math.ceil(u+L)}}else{const D=Math.max(...B.map(R=>R.width),a),T=Math.max(D,w),M=v.length*(a+A)-A;return{width:Math.ceil(T),height:Math.ceil(u+M)}}}function Uut(t){return Nut.has(t.tag)}const Hut=new Set(["TextField","TextInput"]);function Gut(t){return Hut.has(t.tag)}function Vut(t,e){const n=t.props,r=n?.size||"md",i=Nhe(r),s=n?.width||240,o=n?.label||""?i.labelFontSize+i.gap:0,l=n?.description||"",c=n?.errorMessage||"",u=n?.isInvalid||!1,f=l||u&&c?i.descriptionFontSize+i.gap:0,p=o+i.height+f;return{width:s,height:p}}function Wut(t){return t.tag==="Radio"}function Kut(t,e){return t.tag!=="Checkbox"&&t.tag!=="CheckBox"?!1:e.find(r=>r.id===t.parent_id)?.tag==="CheckboxGroup"}function qut(t,e){const n=t.props,r=n?.size||"md",i=YI[r]||Z4,{boxSize:s,gap:a}=i,o=String(n?.children||n?.label||n?.text||"");if(!o)return{width:s,height:s};const l=xs(e?.fontSize,14),c=new bn({fontFamily:e?.fontFamily||"Pretendard, sans-serif",fontSize:l}),u=os.measureText(o,c);return{width:Math.ceil(s+a+u.width),height:Math.ceil(Math.max(s,u.height))}}function Yut(t,e){const n=t.props,r=n?.size||"md",i=YI[r]||Z4,{boxSize:s,gap:a}=i,o=String(n?.children||n?.label||n?.text||"");if(!o)return{width:s,height:s};const l=xs(e?.fontSize,14),c=new bn({fontFamily:e?.fontFamily||"Pretendard, sans-serif",fontSize:l}),u=os.measureText(o,c);return{width:Math.ceil(s+a+u.width),height:Math.ceil(Math.max(s,u.height))}}function Khe(t){switch(t){case"row":return cu.Row;case"row-reverse":return cu.RowReverse;case"column":return cu.Column;case"column-reverse":return cu.ColumnReverse;default:return cu.Row}}function qhe(t){switch(t){case"wrap":return Vg.Wrap;case"wrap-reverse":return Vg.WrapReverse;case"nowrap":default:return Vg.NoWrap}}function Yhe(t){switch(t){case"flex-start":return Po.FlexStart;case"flex-end":return Po.FlexEnd;case"center":return Po.Center;case"space-between":return Po.SpaceBetween;case"space-around":return Po.SpaceAround;case"space-evenly":return Po.SpaceEvenly;default:return Po.FlexStart}}function g8(t){switch(t){case"flex-start":return Hr.FlexStart;case"flex-end":return Hr.FlexEnd;case"center":return Hr.Center;case"stretch":return Hr.Stretch;case"baseline":return Hr.Baseline;default:return Hr.Stretch}}function Xhe(t){switch(t){case"flex-start":return Hr.FlexStart;case"flex-end":return Hr.FlexEnd;case"center":return Hr.Center;case"stretch":return Hr.Stretch;case"space-between":return Hr.SpaceBetween;case"space-around":return Hr.SpaceAround;default:return Hr.Stretch}}function Xut(t,e,n){const r=t.Node.create(),i=e.props?.style,s=i?.width!==void 0&&i.width!==""&&i.width!=="auto",a=i?.height!==void 0&&i.height!==""&&i.height!=="auto";if(s&&oq(r,"width",i?.width),a&&oq(r,"height",i?.height),Fut(e)&&(!s||!a)){const l=Out(e,i);l&&(s||r.setWidth(l.width),a||r.setHeight(l.height))}if(Uut(e)&&(!s||!a)){let l=null;e.tag==="Checkbox"?l=zut(e,i):e.tag==="CheckboxGroup"?l=$ut(e,i,n):e.tag==="RadioGroup"&&(l=Qut(e,i,n)),l&&(s||r.setWidth(l.width),a||r.setHeight(l.height))}if(Gut(e)&&(!s||!a)){const l=Vut(e);l&&(s||r.setWidth(l.width),a||r.setHeight(l.height))}j3(r,"minWidth",i?.minWidth),j3(r,"minHeight",i?.minHeight),j3(r,"maxWidth",i?.maxWidth),j3(r,"maxHeight",i?.maxHeight),i?.marginTop&&r.setMargin(Dn.Top,xs(i.marginTop)),i?.marginRight&&r.setMargin(Dn.Right,xs(i.marginRight)),i?.marginBottom&&r.setMargin(Dn.Bottom,xs(i.marginBottom)),i?.marginLeft&&r.setMargin(Dn.Left,xs(i.marginLeft));const o=Lb(i);return o.top>0&&r.setPadding(Dn.Top,o.top),o.right>0&&r.setPadding(Dn.Right,o.right),o.bottom>0&&r.setPadding(Dn.Bottom,o.bottom),o.left>0&&r.setPadding(Dn.Left,o.left),i?.display==="flex"&&(r.setFlexDirection(Khe(i.flexDirection)),r.setFlexWrap(qhe(i.flexWrap)),r.setJustifyContent(Yhe(i.justifyContent)),r.setAlignItems(g8(i.alignItems)),r.setAlignContent(Xhe(i.alignContent||"stretch")),i.gap&&r.setGap(Mp.All,xs(i.gap)),i.rowGap&&r.setGap(Mp.Row,xs(i.rowGap)),i.columnGap&&r.setGap(Mp.Column,xs(i.columnGap))),r.setFlexShrink(i?.flexShrink!==void 0?i.flexShrink:1),i?.flex!==void 0&&r.setFlex(xs(i.flex,0)),i?.flexGrow!==void 0&&r.setFlexGrow(i.flexGrow),i?.flexBasis!==void 0&&r.setFlexBasis(xs(i.flexBasis)),i?.alignSelf&&r.setAlignSelf(g8(i.alignSelf)),i?.position==="absolute"&&(r.setPositionType(ky.Absolute),i.left!==void 0&&r.setPosition(Dn.Left,xs(i.left)),i.top!==void 0&&r.setPosition(Dn.Top,xs(i.top))),r}function Jhe(t,e,n,r,i,s,a,o){const l=e.filter(u=>u.parent_id===n).sort((u,h)=>(u.order_num||0)-(h.order_num||0));let c=0;for(let u=0;u<l.length;u++){const h=l[u];if(o.has(h.id)){console.warn("[LayoutEngine] Cyclic reference detected:",h.id);continue}if(Wut(h)){o.add(h.id);continue}if(Kut(h,e)){o.add(h.id);continue}o.add(h.id);const f=Xut(t,h,e);r.insertChild(f,c++),a.set(h.id,f);const p=h.props?.style,m=xs(p?.width,i),v=xs(p?.height,40);Jhe(t,e,h.id,f,m,v,a,o)}}function Jut(t,e,n){const r=new Map;for(const[i,s]of t){const a=s.getComputedLayout(),l=n.find(f=>f.id===i)?.parent_id,c=l?e.get(l):{x:0,y:0},u=(c?.x||0)+a.left,h=(c?.y||0)+a.top;r.set(i,{x:u,y:h,width:a.width,height:a.height}),e.set(i,{x:u,y:h})}return r}function Zut(t,e){const n=t.filter(r=>r.tag==="RadioGroup");for(const r of n){const i=e.get(r.id);if(!i)continue;const s=t.filter(E=>E.parent_id===r.id&&E.tag==="Radio").sort((E,w)=>(E.order_num||0)-(w.order_num||0));if(s.length===0)continue;const a=r.props?.style,o=r.props,l=xs(a?.fontSize,14),u=String(o?.label||o?.children||o?.text||"")?l+8:0,h=o?.orientation,f=h==="horizontal"?!0:h==="vertical"?!1:a?.flexDirection==="row",p=o?.size||"md",m=cO(p),v=m.radioSize,A=m.gap,x=120;for(let E=0;E<s.length;E++){const w=s[E],B=w.props?.style,D=Yut(w,B),T=f?E*x:0,M=u+(f?0:E*(v+A));e.set(w.id,{x:i.x+T,y:i.y+M,width:D.width,height:D.height})}}}function edt(t,e){const n=t.filter(r=>r.tag==="CheckboxGroup");for(const r of n){const i=e.get(r.id);if(!i)continue;const s=t.filter(A=>A.parent_id===r.id&&(A.tag==="Checkbox"||A.tag==="CheckBox")).sort((A,x)=>(A.order_num||0)-(x.order_num||0));if(s.length===0)continue;const a=r.props?.style,o=r.props,l=xs(a?.fontSize,14),u=String(o?.label||o?.children||o?.text||"")?l+8:0,h=o?.orientation,f=h==="horizontal"?!0:h==="vertical"?!1:a?.flexDirection==="row",p=12,m=120,v=20;for(let A=0;A<s.length;A++){const x=s[A],E=x.props?.style,w=qut(x,E),B=f?A*m:0,D=u+(f?0:A*(v+p));e.set(x.id,{x:i.x+B,y:i.y+D,width:w.width,height:w.height})}}}function tdt(t,e,n,r){const i=new Map;if(!Z1)return console.warn("[LayoutEngine] Yoga not initialized. Returning empty layout."),{positions:i};const s=Put();if(!s.Node)return console.error("[LayoutEngine] Yoga.Node is not available"),{positions:i};const a=t.filter(v=>v.page_id===e),o=a.find(v=>v.tag.toLowerCase()==="body");if(!o)return{positions:i};const l=s.Node.create();l.setWidth(n),l.setHeight(r),l.setFlexDirection(cu.Column);const c=o.props?.style;c?.display==="flex"&&(l.setFlexDirection(Khe(c.flexDirection)),l.setFlexWrap(qhe(c.flexWrap)),l.setJustifyContent(Yhe(c.justifyContent)),l.setAlignItems(g8(c.alignItems)),l.setAlignContent(Xhe(c.alignContent)),c.gap&&l.setGap(Mp.All,xs(c.gap)));const u=Lb(c);u.top>0&&l.setPadding(Dn.Top,u.top),u.right>0&&l.setPadding(Dn.Right,u.right),u.bottom>0&&l.setPadding(Dn.Bottom,u.bottom),u.left>0&&l.setPadding(Dn.Left,u.left);const h=new Map,f=new Set([o.id]);Jhe(s,a,o.id,l,n,r,h,f),l.calculateLayout(n,r,I0.LTR),i.set(o.id,{x:0,y:0,width:n,height:r});const p=new Map;p.set(o.id,{x:0,y:0});const m=Jut(h,p,a);for(const[v,A]of m)i.set(v,A);return Zut(a,i),edt(a,i),l.freeRecursive(),{positions:i}}function ndt(t){return t.props?.style?.display==="flex"}C.memo(function({element:e,children:n}){mn(pn);const r=e.props?.style,i=C.useMemo(()=>{const s=typeof r?.left=="number"?r.left:typeof r?.left=="string"?parseFloat(r.left):0,a=typeof r?.top=="number"?r.top:typeof r?.top=="string"?parseFloat(r.top):0;return{x:s,y:a}},[r?.left,r?.top]);return d.jsx("pixiContainer",{x:i.x,y:i.y,children:n})});function rdt(t){const n=t.props?.style?.display;return n==="grid"||n==="inline-grid"}const idt=new Set(["Text","Heading","Label","Paragraph","Link","Strong","Em","Code","Pre","Blockquote","ListItem"]),sdt=new Set(["Image","Avatar","Logo","Icon","Thumbnail"]),adt=new Set(["Button","SubmitButton"]),odt=new Set(["FancyButton"]),ldt=new Set(["CheckboxGroup"]),cdt=new Set(["Checkbox","CheckBox","Switch","Toggle"]),udt=new Set(["RadioGroup"]),ddt=new Set(["Radio"]),hdt=new Set(["Slider","RangeSlider"]),fdt=new Set(["Input","TextField","TextInput","SearchField"]),pdt=new Set(["Select","Dropdown","ComboBox"]),gdt=new Set(["ProgressBar","Progress","LoadingBar"]),mdt=new Set(["Switcher","SegmentedControl","TabBar"]),Adt=new Set(["ScrollBox","ScrollContainer","ScrollView"]),ydt=new Set(["List","ItemList","VirtualList"]),vdt=new Set(["MaskedFrame","ClippedImage","MaskedImage","AvatarImage"]),xdt=new Set(["ToggleButton"]),bdt=new Set(["ToggleButtonGroup"]),Cdt=new Set(["ListBox"]),Edt=new Set(["Badge","Tag","Chip"]),Sdt=new Set(["Meter","Gauge"]),wdt=new Set(["Separator","Divider","Hr"]),_dt=new Set(["Link","Anchor","A"]),Idt=new Set(["Breadcrumbs"]),Bdt=new Set(["Card","Panel","Box"]),Tdt=new Set(["Menu","ContextMenu","DropdownMenu"]),Mdt=new Set(["Tabs","TabList"]),Ddt=new Set(["NumberField"]),Rdt=new Set(["SearchField"]),Pdt=new Set(["ComboBox"]),kdt=new Set(["GridList"]),Ndt=new Set(["TagGroup","TagList"]),Ldt=new Set(["Tree","TreeView"]),Fdt=new Set(["Table","DataTable","DataGrid"]),jdt=new Set(["Disclosure"]),Odt=new Set(["DisclosureGroup","Accordion"]),zdt=new Set(["Tooltip"]),$dt=new Set(["Popover"]),Qdt=new Set(["Dialog","Modal","AlertDialog"]),Udt=new Set(["ColorSwatch"]),Hdt=new Set(["ColorSlider"]),Gdt=new Set(["TimeField"]),Vdt=new Set(["DateField"]),Wdt=new Set(["ColorArea"]),Kdt=new Set(["Calendar","RangeCalendar"]),qdt=new Set(["ColorWheel"]),Ydt=new Set(["DatePicker"]),Xdt=new Set(["ColorPicker"]),Jdt=new Set(["DateRangePicker"]),Zdt=new Set(["TextField","TextInput"]),eht=new Set(["Switch"]),tht=new Set(["TextArea","Textarea"]),nht=new Set(["Form"]),rht=new Set(["Toolbar"]),iht=new Set(["FileTrigger","FileUpload","FileInput"]),sht=new Set(["DropZone","FileDropZone"]),aht=new Set(["Skeleton","SkeletonLoader"]),oht=new Set(["Toast"]),lht=new Set(["Pagination"]),cht=new Set(["ColorField"]),uht=new Set(["ColorSwatchPicker"]),dht=new Set(["Group"]),hht=new Set(["Slot"]);function fht(t){const e=t.tag;return adt.has(e)?"button":odt.has(e)?"fancyButton":ldt.has(e)?"checkboxGroup":cdt.has(e)?"checkboxItem":udt.has(e)?"radioGroup":ddt.has(e)?"radioItem":hdt.has(e)?"slider":fdt.has(e)?"input":pdt.has(e)?"select":gdt.has(e)?"progressBar":mdt.has(e)?"switcher":Adt.has(e)?"scrollBox":ydt.has(e)?"list":vdt.has(e)?"maskedFrame":xdt.has(e)?"toggleButton":bdt.has(e)?"toggleButtonGroup":Cdt.has(e)?"listBox":Edt.has(e)?"badge":Sdt.has(e)?"meter":wdt.has(e)?"separator":_dt.has(e)?"link":Idt.has(e)?"breadcrumbs":Bdt.has(e)?"card":Tdt.has(e)?"menu":Mdt.has(e)?"tabs":Ddt.has(e)?"numberField":Rdt.has(e)?"searchField":Pdt.has(e)?"comboBox":kdt.has(e)?"gridList":Ndt.has(e)?"tagGroup":Ldt.has(e)?"tree":Fdt.has(e)?"table":jdt.has(e)?"disclosure":Odt.has(e)?"disclosureGroup":zdt.has(e)?"tooltip":$dt.has(e)?"popover":Qdt.has(e)?"dialog":Udt.has(e)?"colorSwatch":Hdt.has(e)?"colorSlider":Gdt.has(e)?"timeField":Vdt.has(e)?"dateField":Wdt.has(e)?"colorArea":Kdt.has(e)?"calendar":qdt.has(e)?"colorWheel":Ydt.has(e)?"datePicker":Xdt.has(e)?"colorPicker":Jdt.has(e)?"dateRangePicker":Zdt.has(e)?"textField":eht.has(e)?"switch":tht.has(e)?"textArea":nht.has(e)?"form":rht.has(e)?"toolbar":iht.has(e)?"fileTrigger":sht.has(e)?"dropZone":aht.has(e)?"skeleton":oht.has(e)?"toast":lht.has(e)?"pagination":cht.has(e)?"colorField":uht.has(e)?"colorSwatchPicker":dht.has(e)?"group":hht.has(e)?"slot":ndt(t)?"flex":rdt(t)?"grid":idt.has(e)?"text":sdt.has(e)?"image":"box"}const pht=C.memo(function({element:e,isSelected:n,layoutPosition:r,onClick:i,onDoubleClick:s,onChange:a}){mn(pn);const o=e.id,l=je(p=>{const m=p.selectedElementIds;return m.length===0?!1:m.length===1?m[0]===o:m.includes(o)})??n??!1,c=je(p=>e.parent_id?p.elementsMap.get(e.parent_id)??null:null),u=C.useMemo(()=>{if(!r)return e;const p=e.props?.style||{};return{...e,props:{...e.props,style:{...p,left:r.x,top:r.y,width:r.width,height:r.height}}}},[e,r]),h=fht(u),f=h==="checkboxItem"&&c?.tag==="CheckboxGroup";switch(h){case"button":return d.jsx(Bot,{element:u,isSelected:l,onClick:i});case"fancyButton":return d.jsx(Mot,{element:u,isSelected:l,onClick:i});case"checkboxGroup":return d.jsx(Wot,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"checkboxItem":return f?d.jsx(Yot,{element:u,isSelected:l,onClick:i}):d.jsx(Not,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"radioGroup":return d.jsx(slt,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"radioItem":return d.jsx(llt,{element:u,isSelected:l,onClick:i});case"slider":return d.jsx(flt,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"input":return d.jsx(mlt,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"select":return d.jsx(vlt,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"progressBar":return d.jsx(Elt,{element:u,isSelected:l,onClick:i});case"switcher":return d.jsx(Blt,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"scrollBox":return d.jsx(Rlt,{element:u,isSelected:l,onClick:i});case"list":return d.jsx(Flt,{element:u,isSelected:l,onClick:i});case"maskedFrame":return d.jsx($lt,{element:u,isSelected:l,onClick:i});case"toggleButton":return d.jsx(Wlt,{element:u,isSelected:l,onClick:i});case"toggleButtonGroup":return d.jsx(Zlt,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"listBox":return d.jsx(rct,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"badge":return d.jsx(ict,{element:u,isSelected:l,onClick:i});case"meter":return d.jsx(act,{element:u,isSelected:l,onClick:i});case"separator":return d.jsx(oct,{element:u,isSelected:l,onClick:i});case"link":return d.jsx(lct,{element:u,isSelected:l,onClick:i});case"breadcrumbs":return d.jsx(cct,{element:u,isSelected:l,onClick:i});case"card":return d.jsx(uct,{element:u,isSelected:l,onClick:i});case"menu":return d.jsx(dct,{element:u,isSelected:l,onClick:i});case"tabs":return d.jsx(hct,{element:u,isSelected:l,onClick:i});case"numberField":return d.jsx(fct,{element:u,isSelected:l,onClick:i});case"searchField":return d.jsx(pct,{element:u,isSelected:l,onClick:i});case"comboBox":return d.jsx(gct,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"gridList":return d.jsx(mct,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"tagGroup":return d.jsx(Act,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"tree":return d.jsx(yct,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"table":return d.jsx(vct,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"disclosure":return d.jsx(xct,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"disclosureGroup":return d.jsx(bct,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"tooltip":return d.jsx(Cct,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"popover":return d.jsx(Ect,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"dialog":return d.jsx(Sct,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"colorSwatch":return d.jsx(_ct,{element:u,isSelected:l,onClick:i});case"colorSlider":return d.jsx(Ict,{element:u,isSelected:l,onClick:i});case"timeField":return d.jsx(Bct,{element:u,isSelected:l,onClick:i});case"dateField":return d.jsx(Tct,{element:u,isSelected:l,onClick:i});case"colorArea":return d.jsx(Mct,{element:u,isSelected:l,onClick:i});case"calendar":return d.jsx(Pct,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"colorWheel":return d.jsx(kct,{element:u,isSelected:l,onClick:i});case"datePicker":return d.jsx(Lct,{element:u,isSelected:l,onClick:i});case"colorPicker":return d.jsx(Fct,{element:u,isSelected:l,onClick:i});case"dateRangePicker":return d.jsx(jct,{element:u,isSelected:l,onClick:i});case"textField":return d.jsx(Oct,{element:u,isSelected:l,onClick:i});case"switch":return d.jsx(zct,{element:u,isSelected:l,onClick:i});case"textArea":return d.jsx($ct,{element:u,isSelected:l,onClick:i});case"form":return d.jsx(Qct,{element:u,isSelected:l,onClick:i});case"toolbar":return d.jsx(Uct,{element:u,isSelected:l,onClick:i});case"fileTrigger":return d.jsx(Hct,{element:u,isSelected:l,onClick:i});case"dropZone":return d.jsx(Gct,{element:u,isSelected:l,onClick:i});case"skeleton":return d.jsx(Wct,{element:u,isSelected:l,onClick:i});case"toast":return d.jsx(Kct,{element:u,isSelected:l,onClick:i});case"pagination":return d.jsx(qct,{element:u,isSelected:l,onClick:i,onChange:a?(p,m)=>a(p,m):void 0});case"colorField":return d.jsx(Yct,{element:u,isSelected:l,onClick:i});case"colorSwatchPicker":return d.jsx(Jct,{element:u,isSelected:l,onClick:i});case"group":return d.jsx(Zct,{element:u,isSelected:l,onClick:i});case"slot":return d.jsx(eut,{element:u,isSelected:l,onClick:i});case"flex":case"grid":return d.jsx(zK,{element:u,isSelected:l,onClick:i});case"text":return d.jsx(vot,{element:u,isSelected:l,onClick:i,onDoubleClick:s});case"image":return d.jsx(bot,{element:u,isSelected:l,onClick:i});case"box":default:return d.jsx(zK,{element:u,isSelected:l,onClick:i})}}),ght=[{position:"top-left",cursor:"nw-resize",relativeX:0,relativeY:0},{position:"top-center",cursor:"n-resize",relativeX:.5,relativeY:0},{position:"top-right",cursor:"ne-resize",relativeX:1,relativeY:0},{position:"middle-right",cursor:"e-resize",relativeX:1,relativeY:.5},{position:"bottom-right",cursor:"se-resize",relativeX:1,relativeY:1},{position:"bottom-center",cursor:"s-resize",relativeX:.5,relativeY:1},{position:"bottom-left",cursor:"sw-resize",relativeX:0,relativeY:1},{position:"middle-left",cursor:"w-resize",relativeX:0,relativeY:.5}],mht=6,Aht=3900150,yht=16777215,vht=3900150,lq=3900150,xht=.1;function O3(t,e=0){if(typeof t=="number")return t;if(typeof t=="string"){const n=parseFloat(t);return isNaN(n)?e:n}return e}function bht(t){return{x:O3(t?.left,0),y:O3(t?.top,0),width:O3(t?.width,100),height:O3(t?.height,100)}}function Cht(t){if(t.length===0)return null;let e=1/0,n=1/0,r=-1/0,i=-1/0;for(const s of t)e=Math.min(e,s.x),n=Math.min(n,s.y),r=Math.max(r,s.x+s.width),i=Math.max(i,s.y+s.height);return{x:e,y:n,width:r-e,height:i-n}}function Eht(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}const Sht=C.memo(function({config:e,boundsX:n,boundsY:r,boundsWidth:i,boundsHeight:s,zoom:a=1,onDragStart:o,onHoverStart:l,onHoverEnd:c}){mn(pn);const u=mht/a,h=1/a,f=n+i*e.relativeX-u/2,p=r+s*e.relativeY-u/2,m=C.useCallback(E=>{E.clear(),E.rect(0,0,u,u),E.fill({color:yht,alpha:1}),E.setStrokeStyle({width:h,color:vht,alpha:1}),E.rect(0,0,u,u),E.stroke()},[u,h]),v=C.useCallback(()=>{o?.(e.position)},[e.position,o]),A=C.useCallback(()=>{l?.(e.cursor)},[e.cursor,l]),x=C.useCallback(()=>{c?.()},[c]);return d.jsx("pixiGraphics",{draw:m,x:f,y:p,eventMode:"static",cursor:e.cursor,onPointerDown:v,onPointerOver:A,onPointerOut:x})}),wht=C.memo(function({bounds:e,showHandles:n=!0,enableMoveArea:r=!0,zoom:i=1,onDragStart:s,onMoveStart:a,onCursorChange:o}){mn(pn);const l=Math.round(e.x),c=Math.round(e.y),u=Math.round(e.width),h=Math.round(e.height),f=1/i,p=C.useCallback(D=>{D.clear(),D.setStrokeStyle({width:f,color:Aht,alpha:1}),D.rect(0,0,u,h),D.stroke()},[u,h,f]),m=C.useCallback(D=>{D.clear(),D.rect(0,0,u,h),D.fill({color:0,alpha:.001})},[u,h]),v=C.useCallback(D=>{s?.(D)},[s]),A=C.useCallback(D=>{o?.(D)},[o]),x=C.useCallback(()=>{o?.("default")},[o]),E=C.useCallback(()=>{a?.()},[a]),w=C.useCallback(()=>{o?.("move")},[o]),B=C.useCallback(()=>{o?.("default")},[o]);return d.jsxs("pixiContainer",{x:l,y:c,children:[r&&d.jsx("pixiGraphics",{draw:m,eventMode:"static",cursor:"move",onPointerDown:E,onPointerOver:w,onPointerOut:B}),d.jsx("pixiGraphics",{draw:p}),n&&ght.map(D=>d.jsx(Sht,{config:D,boundsX:0,boundsY:0,boundsWidth:u,boundsHeight:h,zoom:i,onDragStart:v,onHoverStart:A,onHoverEnd:x},D.position))]})});function Zhe(t,e){const n=Math.min(t.x,e.x),r=Math.min(t.y,e.y),i=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);return{x:n,y:r,width:i,height:s}}const _ht=C.memo(function({start:e,current:n,zoom:r=1}){mn(pn);const i=Zhe(e,n),s=1/r,a=C.useCallback(o=>{o.clear(),o.fill({color:lq,alpha:xht}),o.rect(i.x,i.y,i.width,i.height),o.fill(),o.setStrokeStyle({width:s,color:lq,alpha:.8}),o.rect(i.x,i.y,i.width,i.height),o.stroke()},[i,s]);return d.jsx("pixiGraphics",{draw:a})}),Iht=C.memo(function({dragState:e,pageWidth:n=1920,pageHeight:r=1080,layoutResult:i,zoom:s=1,onResizeStart:a,onMoveStart:o,onCursorChange:l}){mn(pn);const c=je(B=>B.selectedElementIds),u=je(B=>B.currentPageId),h=C.useCallback(()=>je.getState().elementsMap,[]),f=C.useMemo(()=>{if(!u||c.length===0)return[];const B=h(),D=[];for(const T of c){const M=B.get(T);M&&M.page_id===u&&D.push(M)}return D},[u,c,h]),p=C.useMemo(()=>{if(f.length===0)return new Set;const B=h(),D=new Set(c),T=new Set;return B.forEach(M=>{M.page_id===u&&M.parent_id&&D.has(M.parent_id)&&T.add(M.parent_id)}),T},[f.length,c,u,h]),m=C.useMemo(()=>{if(f.length===0)return null;const B=f.map(D=>{if(D.tag.toLowerCase()==="body")return{x:0,y:0,width:n,height:r};const T=i.positions.get(D.id);return T?{x:T.x,y:T.y,width:T.width,height:T.height}:{x:0,y:0,width:100,height:40}});return Cht(B)},[f,n,r,i]),v=f.length===1,A=C.useMemo(()=>f.length===0?!1:f.some(B=>B.tag.toLowerCase()==="body"?!0:p.has(B.id)),[f,p]),x=C.useCallback(B=>{if(!(!m||f.length===0)&&v){const D=f[0];a?.(D.id,B,m)}},[m,f,v,a]),E=C.useCallback(()=>{if(!m||f.length===0)return;const B=f[0];o?.(B.id,m)},[m,f,o]),w=C.useCallback(B=>{l?.(B)},[l]);return d.jsxs("pixiContainer",{label:"SelectionLayer",children:[m&&d.jsx(wht,{bounds:m,showHandles:v,enableMoveArea:!A,zoom:s,onDragStart:x,onMoveStart:E,onCursorChange:w}),e.isDragging&&e.operation==="lasso"&&e.startPosition&&e.currentPosition&&d.jsx(_ht,{start:e.startPosition,current:e.currentPosition,zoom:s})]})});function Bht(t,e,n){const r=Zhe(e,n);return t.filter(i=>{const s=bht(i.props?.style);return Eht(r,s)}).map(i=>i.id)}const p1={isDragging:!1,operation:null,startPosition:null,currentPosition:null,targetElementId:null,targetHandle:null,startBounds:null};function Tht(t={}){const{onMoveEnd:e,onResizeEnd:n,onLassoEnd:r,findElementsInLasso:i}=t,[s,a]=C.useState(p1),o=C.useRef(p1),l=C.useCallback((m,v,A)=>{const x={isDragging:!0,operation:"move",startPosition:A,currentPosition:A,targetElementId:m,targetHandle:null,startBounds:v};o.current=x,a(x)},[]),c=C.useCallback((m,v,A,x)=>{const E={isDragging:!0,operation:"resize",startPosition:x,currentPosition:x,targetElementId:m,targetHandle:v,startBounds:A};o.current=E,a(E)},[]),u=C.useCallback(m=>{const v={isDragging:!0,operation:"lasso",startPosition:m,currentPosition:m,targetElementId:null,targetHandle:null,startBounds:null};o.current=v,a(v)},[]),h=C.useCallback(m=>{if(!o.current.isDragging)return;const v={...o.current,currentPosition:m};o.current=v,a(v)},[]),f=C.useCallback(()=>{const m=o.current;if(!m.isDragging)return;const{operation:v,startPosition:A,currentPosition:x,targetElementId:E,targetHandle:w,startBounds:B}=m;if(A&&x)switch(v){case"move":if(E){const D={x:x.x-A.x,y:x.y-A.y};e?.(E,D)}break;case"resize":if(E&&w&&B){const D=Mht(B,w,A,x);n?.(E,w,D)}break;case"lasso":if(i){const D=i(A,x);r?.(D)}break}o.current=p1,a(p1)},[e,n,r,i]),p=C.useCallback(()=>{o.current=p1,a(p1)},[]);return{dragState:s,startMove:l,startResize:c,startLasso:u,updateDrag:h,endDrag:f,cancelDrag:p}}function Mht(t,e,n,r){const i=r.x-n.x,s=r.y-n.y;let{x:a,y:o,width:l,height:c}=t;switch(e){case"top-left":a+=i,o+=s,l-=i,c-=s;break;case"top-center":o+=s,c-=s;break;case"top-right":o+=s,l+=i,c-=s;break;case"middle-right":l+=i;break;case"bottom-right":l+=i,c+=s;break;case"bottom-center":c+=s;break;case"bottom-left":a+=i,l-=i,c+=s;break;case"middle-left":a+=i,l-=i;break}const u=10;return l<u&&(e.includes("left")&&(a=t.x+t.width-u),l=u),c<u&&(e.includes("top")&&(o=t.y+t.height-u),c=u),{x:a,y:o,width:l,height:c}}const cq=14870768,uq=.5,dq=9741240,hq=.3,fq=9741240,pq=.5,gq=2,Dht=3900150,Rht=.2;function Pht(t,e){return e<.25?t*4:e<.5?t*2:e>2?t/2:e>4?t/4:t}function kht(t){return t*5}const Nht=C.memo(function({width:e,height:n,zoom:r,showGrid:i=!0,showSnapGrid:s=!1,gridSize:a=20,snapSize:o=10}){mn(pn);const l=C.useMemo(()=>Pht(a,r),[a,r]),c=C.useMemo(()=>kht(l),[l]),u=C.useCallback(h=>{if(h.clear(),!i)return;const f=(p,m,v,A,x,E,w)=>{p===v?h.rect(p-x/2,Math.min(m,A),x,Math.abs(A-m)):h.rect(Math.min(p,v),m-x/2,Math.abs(v-p),x),h.fill({color:E,alpha:w})};for(let p=0;p<=e;p+=l)p%c!==0&&f(p,0,p,n,1,cq,uq);for(let p=0;p<=n;p+=l)p%c!==0&&f(0,p,e,p,1,cq,uq);for(let p=0;p<=e;p+=c)f(p,0,p,n,1,dq,hq);for(let p=0;p<=n;p+=c)f(0,p,e,p,1,dq,hq);if(f(e/2,0,e/2,n,gq,fq,pq),f(0,n/2,e,n/2,gq,fq,pq),s&&o!==l)for(let p=0;p<=e;p+=o)for(let m=0;m<=n;m+=o)h.circle(p,m,1),h.fill({color:Dht,alpha:Rht})},[e,n,l,c,i,s,o]);return d.jsx("pixiGraphics",{draw:u})});class Lht{container=null;options;currentState={x:0,y:0,scale:1};isPanning=!1;lastPanPoint=null;constructor(e={}){this.options={minZoom:e.minZoom??.1,maxZoom:e.maxZoom??5,onStateSync:e.onStateSync??(()=>{})}}attach(e){this.container=e,this.currentState={x:e.x,y:e.y,scale:e.scale.x}}detach(){this.container=null}isAttached(){return this.container!==null}startPan(e,n){this.isPanning=!0,this.lastPanPoint={x:e,y:n}}updatePan(e,n){if(!this.isPanning||!this.lastPanPoint||!this.container)return;const r=e-this.lastPanPoint.x,i=n-this.lastPanPoint.y;this.container.x+=r,this.container.y+=i,this.currentState.x=this.container.x,this.currentState.y=this.container.y,this.lastPanPoint={x:e,y:n}}endPan(){this.isPanning&&(this.isPanning=!1,this.lastPanPoint=null,this.syncToReactState())}zoomAtPoint(e,n,r,i,s=!0){if(!this.container)return;const{minZoom:a,maxZoom:o}=this.options,l=e-r.left,c=n-r.top,u=this.container.scale.x,h=Math.min(Math.max(u*(1+i),a),o);if(h===u)return;const f=h/u,p=l-(l-this.container.x)*f,m=c-(c-this.container.y)*f;this.container.x=p,this.container.y=m,this.container.scale.set(h),this.currentState={x:p,y:m,scale:h},s&&this.syncToReactState()}setPosition(e,n,r){this.container&&(this.container.x=e,this.container.y=n,this.container.scale.set(r),this.currentState={x:e,y:n,scale:r})}getState(){return{...this.currentState}}isPanningActive(){return this.isPanning}syncToReactState(){this.options.onStateSync(this.currentState)}}function Fht(t){const{cameraLabel:e="Camera",minZoom:n=.1,maxZoom:r=5,containerEl:i}=t,{app:s}=Ef(),a=C.useRef(!1),o=C.useRef(!1),l=El(p=>p.setZoom),c=El(p=>p.setPanOffset),u=C.useCallback(p=>{l(p.scale),c({x:p.x,y:p.y})},[l,c]),h=C.useMemo(()=>s?.stage?new Lht({minZoom:n,maxZoom:r,onStateSync:u}):null,[s,n,r,u]),f=C.useRef(null);return C.useEffect(()=>{f.current=i??null},[i]),C.useEffect(()=>{if(!s?.stage||!h)return;const p=s.stage.children.find(A=>A.label===e);if(!p){console.warn(`[useViewportControl] Camera container with label "${e}" not found`);return}h.attach(p);const{zoom:m,panOffset:v}=El.getState();return h.setPosition(v.x,v.y,m),console.log("[useViewportControl] Initial position applied:",{x:v.x,y:v.y,scale:m}),()=>{h.detach()}},[s,e,h]),C.useEffect(()=>{if(!i||!h)return;const p=A=>{(A.altKey&&A.button===0||A.button===1)&&(A.preventDefault(),h.startPan(A.clientX,A.clientY),a.current=!0,i.style.cursor="grabbing")},m=A=>{h.isPanningActive()&&h.updatePan(A.clientX,A.clientY)},v=()=>{h.isPanningActive()&&(h.endPan(),a.current=!1,i.style.cursor="")};return i.addEventListener("mousedown",p),window.addEventListener("mousemove",m),window.addEventListener("mouseup",v),()=>{i.removeEventListener("mousedown",p),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",v)}},[i,h]),C.useEffect(()=>{if(!i||!h)return;const p=m=>{if(m.ctrlKey||m.metaKey){m.preventDefault(),m.stopPropagation();const v=i.getBoundingClientRect(),A=-m.deltaY*.001;h.zoomAtPoint(m.clientX,m.clientY,v,A,!0)}};return i.addEventListener("wheel",p,{passive:!1,capture:!0}),()=>{i.removeEventListener("wheel",p,{capture:!0})}},[i,h]),C.useEffect(()=>{if(!h||h.isPanningActive())return;const{zoom:p,panOffset:m}=El.getState();h.setPosition(m.x,m.y,p)},[h]),C.useEffect(()=>h?El.subscribe((m,v)=>{!h||h.isPanningActive()||(m.zoom!==v.zoom||m.panOffset.x!==v.panOffset.x||m.panOffset.y!==v.panOffset.y)&&h.setPosition(m.panOffset.x,m.panOffset.y,m.zoom)}):void 0,[h]),G_([{key:"Space",code:"Space",modifier:"none",preventDefault:!1,disabled:!i,handler:()=>{const p=f.current;!p||o.current||(o.current=!0,p.style.cursor="grab")}}],[i]),G_([{key:"Space",code:"Space",modifier:"none",preventDefault:!1,disabled:!i,handler:()=>{o.current=!1;const p=f.current;p&&(a.current||(p.style.cursor=""))}}],[i],"keyup"),{controller:h,isPanningRef:a}}function jht({containerEl:t,cameraLabel:e="Camera",minZoom:n=.1,maxZoom:r=5}){const{controller:i}=Fht({containerEl:t,cameraLabel:e,minZoom:n,maxZoom:r});return C.useEffect(()=>()=>{},[i]),null}const Oht=C.memo(function({pageWidth:e,pageHeight:n,onClick:r}){mn(pn);const i=je(v=>v.elementsMap),s=je(v=>v.currentPageId),a=C.useMemo(()=>{for(const v of i.values())if(v.page_id===s&&v.tag.toLowerCase()==="body")return v},[i,s]),o=a?.props?.style,l=o?.backgroundColor,c=C.useMemo(()=>wr(l,16777215),[l]),u=C.useMemo(()=>l?X4(l):1,[l]),h=C.useMemo(()=>J4(o),[o]),f=C.useMemo(()=>ot(o?.borderRadius,void 0,0),[o?.borderRadius]),p=C.useCallback(v=>{cs(v,{width:e,height:n,backgroundColor:c,backgroundAlpha:u,borderRadius:f,border:h})},[e,n,c,u,f,h]),m=C.useCallback(v=>{if(a&&r){const A=v,x=A?.metaKey??A?.nativeEvent?.metaKey??!1,E=A?.shiftKey??A?.nativeEvent?.shiftKey??!1,w=A?.ctrlKey??A?.nativeEvent?.ctrlKey??!1;r(a.id,{metaKey:x,shiftKey:E,ctrlKey:w})}},[a,r]);return d.jsx("pixiGraphics",{label:"BodyLayer",draw:p,eventMode:"static",cursor:"default",onPointerDown:m})});function zht({elementId:t,initialValue:e,position:n,size:r,zoom:i,panOffset:s,style:a={},onChange:o,onComplete:l,onCancel:c}){const u=C.useRef(null),[h,f]=C.useState(e),[p,m]=C.useState(!1),v={x:n.x*i+s.x,y:n.y*i+s.y},A={width:r.width*i,height:r.height*i};C.useEffect(()=>{u.current&&(u.current.focus(),u.current.select())},[]);const x=C.useCallback(M=>{const R=M.target.value;f(R),o?.(t,R)},[t,o]),E=C.useCallback(M=>{p||(M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),l?.(t)),M.key==="Escape"&&(M.preventDefault(),c?.(t)))},[t,p,l,c]),w=C.useCallback(()=>{l?.(t)},[t,l]),B=C.useCallback(()=>{m(!0)},[]),D=C.useCallback(()=>{m(!1)},[]),T={position:"absolute",left:v.x,top:v.y,width:A.width,height:A.height,minWidth:50,minHeight:20,padding:(a.padding||0)*i,margin:0,border:"2px solid #3b82f6",borderRadius:2,outline:"none",resize:"none",overflow:"hidden",backgroundColor:"white",boxSizing:"border-box",fontFamily:a.fontFamily||"Pretendard, sans-serif",fontSize:(a.fontSize||16)*i,fontWeight:a.fontWeight||"normal",color:a.color||"#000000",textAlign:a.textAlign||"left",lineHeight:a.lineHeight||1.4,transformOrigin:"top left",zIndex:1e3};return d.jsx("textarea",{ref:u,value:h,onChange:x,onKeyDown:E,onBlur:w,onCompositionStart:B,onCompositionEnd:D,style:T,spellCheck:!1,autoComplete:"off"})}const $ht=new Set(["Text","Heading","Label","Paragraph","Link","Button"]);function Qht(t){const e=t.props;return String(e?.children||e?.text||e?.label||"")}function Uht(t){const e=t.props?.style;return{fontFamily:String(e?.fontFamily||"Pretendard, sans-serif"),fontSize:Number(e?.fontSize)||16,fontWeight:e?.fontWeight,color:String(e?.color||"#000000"),textAlign:e?.textAlign||"left",lineHeight:e?.lineHeight,padding:Number(e?.padding||e?.paddingLeft||0)}}function Hht(t){const e=t.props?.style;return{x:Number(e?.left)||0,y:Number(e?.top)||0}}function Ght(t){const e=t.props?.style;return{width:Number(e?.width)||100,height:Number(e?.height)||50}}function Vht(){const t=je(c=>c.elements),e=je(c=>c.updateElementProps),[n,r]=C.useState(null),i=C.useCallback(c=>{const u=t.find(f=>f.id===c);if(!u)return;if(!$ht.has(u.tag)){console.warn(`[useTextEdit] Element ${u.tag} is not a text element`);return}const h=Qht(u);r({elementId:c,value:h,position:Hht(u),size:Ght(u),style:Uht(u)})},[t]),s=C.useCallback((c,u)=>{r(h=>!h||h.elementId!==c?h:{...h,value:u})},[]),a=C.useCallback(c=>{if(!n||n.elementId!==c)return;const u=t.find(p=>p.id===c);if(!u)return;const h=u.props,f={...h};"children"in(h||{})?f.children=n.value:"text"in(h||{})?f.text=n.value:"label"in(h||{})?f.label=n.value:f.children=n.value,e(c,f),r(null)},[n,t,e]),o=C.useCallback(c=>{!n||n.elementId!==c||r(null)},[n]);return{editState:n,startEdit:i,updateText:s,completeEdit:a,cancelEdit:o,isEditing:n!==null}}const Wht=1920,Kht=1080,qht=16317180;function Yht(){return mn(pn),null}function Xht({width:t,height:e,zoom:n=1}){mn(pn),hO();const r=Math.round(t),i=Math.round(e),s=1/n,a=C.useCallback(o=>{o.clear();const l=tst();o.setStrokeStyle({width:s,color:l}),o.rect(0,0,r,i),o.stroke()},[r,i,s]);return d.jsx("pixiGraphics",{draw:a})}function Jht({onClick:t,onLassoStart:e,onLassoDrag:n,onLassoEnd:r,zoom:i,panOffset:s}){mn(pn);const{app:a}=Ef(),[o,l]=C.useState(null);C.useEffect(()=>{if(!a?.canvas)return;const v=a.canvas,A=E=>{E.key==="Shift"&&(v.style.cursor="crosshair")},x=E=>{E.key==="Shift"&&(v.style.cursor="default")};return window.addEventListener("keydown",A),window.addEventListener("keyup",x),()=>{window.removeEventListener("keydown",A),window.removeEventListener("keyup",x)}},[a]),C.useEffect(()=>{if(!a)return;let v=0,A=null,x=!1;const E=()=>{if(x)return;const w=a.renderer;if(!w){v=window.requestAnimationFrame(E);return}const B=()=>{l({width:w.screen.width,height:w.screen.height})};B(),w.on("resize",B),A=()=>w.off("resize",B)};return E(),()=>{x=!0,v&&window.cancelAnimationFrame(v),A?.()}},[a]);const c=C.useCallback(v=>{v.clear(),o&&(v.rect(0,0,o.width,o.height),v.fill({color:16777215,alpha:0}))},[o]),u=C.useRef(!1),h=C.useCallback((v,A)=>({x:(v-s.x)/i,y:(A-s.y)/i}),[i,s]),f=C.useCallback(v=>{u.current=!0;const A=h(v.global.x,v.global.y);e?.(A)},[e,h]),p=C.useCallback(v=>{if(u.current){const A=h(v.global.x,v.global.y);n?.(A)}},[n,h]),m=C.useCallback(()=>{u.current?(u.current=!1,r?.()):t?.()},[t,r]);return d.jsx("pixiGraphics",{draw:c,eventMode:"static",cursor:"default",onPointerDown:f,onGlobalPointerMove:p,onPointerUp:m,onPointerUpOutside:m})}const mq=80,Zht=350;function eft({containerEl:t}){const{app:e}=Ef(),n=C.useRef(null),r=C.useRef(0),i=C.useRef(0),s=C.useRef(0);return C.useEffect(()=>{if(!e)return;let a=!1,o=null;const l=()=>{if(a)return;if(!e.renderer){window.requestAnimationFrame(l);return}const u=()=>{if(typeof window>"u")return;const p=typeof performance<"u"?performance.now():Date.now(),m=p-s.current;if(m>=mq){s.current=p,e.queueResize();return}i.current||(i.current=window.setTimeout(()=>{i.current=0,s.current=typeof performance<"u"?performance.now():Date.now(),e.queueResize()},Math.max(0,mq-m)))},h=()=>{r.current&&window.clearTimeout(r.current),r.current=window.setTimeout(()=>{r.current=0,e.resize()},Zht)},f=p=>{if(p.width<=0||p.height<=0)return;const m={width:p.width,height:p.height},v=n.current;n.current=m,(!v||v.width!==m.width||v.height!==m.height)&&u(),h()};e.resize(),o=new ResizeObserver(p=>{const m=p[0];m&&f(m.contentRect)}),o.observe(t)};return l(),()=>{a=!0,r.current&&window.clearTimeout(r.current),i.current&&window.clearTimeout(i.current),o?.disconnect()}},[e,t]),null}const tft=C.memo(function({layoutResult:e,onClick:n,onDoubleClick:r}){const i=je(u=>u.elements),s=je(u=>u.currentPageId),a=C.useMemo(()=>new Map(i.map(u=>[u.id,u])),[i]),o=C.useMemo(()=>{const u=new Map,h=f=>{if(!f)return 0;const p=u.get(f);if(p!==void 0)return p;const m=a.get(f);if(!m||m.tag.toLowerCase()==="body")return u.set(f,0),0;const v=1+h(m.parent_id);return u.set(f,v),v};return i.forEach(f=>{u.set(f.id,h(f.id))}),u},[i,a]),l=C.useMemo(()=>i.filter(u=>!(u.page_id!==s||u.tag.toLowerCase()==="body")),[i,s]),c=C.useMemo(()=>[...l].sort((u,h)=>{const f=o.get(u.id)??0,p=o.get(h.id)??0;return f!==p?f-p:(u.order_num||0)-(h.order_num||0)}),[l,o]);return d.jsx("pixiContainer",{label:"ElementsLayer",eventMode:"static",interactiveChildren:!0,children:c.map(u=>d.jsx(pht,{element:u,layoutPosition:e.positions.get(u.id),onClick:n,onDoubleClick:r},u.id))})});function Aq({pageWidth:t=Wht,pageHeight:e=Kht,backgroundColor:n=qht}){const r=C.useRef(null),[i,s]=C.useState(null),[a,o]=C.useState(!1);C.useEffect(()=>{Rut().then(()=>{o(!0)})},[]);const l=C.useCallback(se=>{r.current=se,s(se)},[]),c=je(se=>se.elements),u=je(se=>se.setSelectedElement),h=je(se=>se.setSelectedElements),f=je(se=>se.clearSelection),p=je(se=>se.updateElementProps),m=je(se=>se.currentPageId),v=je(se=>se.showGrid),A=je(se=>se.gridSize),x=El(se=>se.zoom),E=El(se=>se.panOffset),w=El(se=>se.setCanvasReady),B=El(se=>se.setContextLost),D=El(se=>se.syncPixiVersion),T=El(se=>se.renderVersion),M=C.useMemo(()=>!m||!a?{positions:new Map}:tdt(c,m,t,e),[c,m,t,e,a]),R=C.useMemo(()=>c.filter(se=>se.page_id===m&&se.tag!=="Body"),[c,m]),k=C.useCallback((se,fe)=>Bht(R.map(Ee=>({id:Ee.id,props:{style:Ee.props?.style}})),se,fe),[R]),{dragState:L,startMove:F,startResize:z,startLasso:G,updateDrag:V,endDrag:q}=Tht({onMoveEnd:C.useCallback((se,fe)=>{const Ee=c.find(Se=>Se.id===se);if(!Ee)return;const Be=Ee.props?.style,_e=Number(Be?.left)||0,Ce=Number(Be?.top)||0;p(se,{style:{...Be,left:_e+fe.x,top:Ce+fe.y}})},[c,p]),onResizeEnd:C.useCallback((se,fe,Ee)=>{const Be=c.find(Ce=>Ce.id===se);if(!Be)return;const _e=Be.props?.style;p(se,{style:{..._e,left:Ee.x,top:Ee.y,width:Ee.width,height:Ee.height}})},[c,p]),onLassoEnd:C.useCallback(se=>{se.length>0&&h(se)},[h]),findElementsInLasso:k}),O=C.useCallback((se,fe,Ee)=>{z(se,fe,Ee,{x:0,y:0})},[z]),H=C.useCallback((se,fe)=>{F(se,fe,{x:0,y:0})},[F]),K=C.useCallback(se=>{r.current&&(r.current.style.cursor=se)},[]),{editState:X,startEdit:re,updateText:J,completeEdit:Z,cancelEdit:ee,isEditing:te}=Vht(),oe=C.useCallback((se,fe)=>{if(te)return;if(fe?.metaKey||fe?.ctrlKey){const Be=je.getState().selectedElementIds;if(Be.includes(se)){const Ce=Be.filter(Se=>Se!==se);Ce.length>0?h(Ce):f()}else h([...Be,se])}else u(se)},[u,h,f,te]),ae=C.useCallback(se=>{re(se)},[re]);return C.useEffect(()=>{const se=r.current?.querySelector("canvas");if(!se)return;const fe=Be=>{Be.preventDefault(),B(!0)},Ee=()=>{B(!1)};return se.addEventListener("webglcontextlost",fe),se.addEventListener("webglcontextrestored",Ee),()=>{se.removeEventListener("webglcontextlost",fe),se.removeEventListener("webglcontextrestored",Ee)}},[B]),C.useEffect(()=>{D(T)},[T,D]),C.useEffect(()=>(w(!0),()=>w(!1)),[w]),d.jsxs("div",{ref:l,className:"canvas-container",children:[i&&a&&d.jsxs(rrt,{resizeTo:i,background:n,antialias:!0,resolution:Math.max(window.devicePixelRatio||1,2),autoDensity:!0,roundPixels:!0,children:[d.jsx(Yht,{}),d.jsx(eft,{containerEl:i}),d.jsx(jht,{containerEl:i,cameraLabel:"Camera",minZoom:.1,maxZoom:5}),d.jsx(Jht,{onClick:f,onLassoStart:G,onLassoDrag:V,onLassoEnd:q,zoom:x,panOffset:E}),d.jsxs("pixiContainer",{label:"Camera",eventMode:"static",interactiveChildren:!0,children:[d.jsx(Oht,{pageWidth:t,pageHeight:e,onClick:oe}),d.jsx(Nht,{width:t,height:e,zoom:x,showGrid:v,gridSize:A}),d.jsx(Xht,{width:t,height:e,zoom:x}),d.jsx(tft,{layoutResult:M,onClick:oe,onDoubleClick:ae}),d.jsx(Iht,{dragState:L,pageWidth:t,pageHeight:e,layoutResult:M,zoom:x,onResizeStart:O,onMoveStart:H,onCursorChange:K})]})]}),X&&X.elementId&&d.jsx(zht,{elementId:X.elementId,initialValue:X.value,position:X.position,size:X.size,zoom:x,panOffset:E,style:X.style,onChange:J,onComplete:Z,onCancel:ee})]})}const BN=.1,TN=5,z3=.1,yq=[25,50,75,100,125,150,200,300,400,500];function nft({breakpoint:t,breakpoints:e,fallbackCanvas:n}){const r=C.useRef(null),[i,s]=C.useState({width:0,height:0}),a=nh(),o=xf(),l=C.useMemo(()=>{if(!t||!e||e.length===0)return{width:1920,height:1080};const M=Array.from(t)[0],R=e.find(F=>F.id===M);if(!R)return{width:1920,height:1080};const k=(F,z)=>{if(typeof F=="number")return F;const G=String(F);if(G.includes("%")){const q=parseFloat(G)/100;return z>0?Math.floor(z*q):1920}const V=parseInt(G,10);return isNaN(V)?1920:V};return{width:k(R.max_width,i.width),height:k(R.max_height,i.height)}},[t,e,i]),c=El(M=>M.zoom),u=El(M=>M.panOffset),h=El(M=>M.setZoom),f=El(M=>M.setPanOffset),p=El(M=>M.isCanvasReady),m=El(M=>M.isContextLost);C.useEffect(()=>{if(i.width>0&&i.height>0){const M=i.width/l.width,R=i.height/l.height,k=Math.min(M,R)*.9;h(k),f({x:(i.width-l.width*k)/2,y:(i.height-l.height*k)/2})}},[l.width,l.height,i.width,i.height,h,f]),C.useEffect(()=>{const M=r.current;if(!M)return;const R=()=>{s({width:M.clientWidth,height:M.clientHeight})};R();const k=new ResizeObserver(R);return k.observe(M),()=>k.disconnect()},[]);const v=C.useCallback(M=>{if(i.width===0||i.height===0){h(M);return}const R=i.width/2,k=i.height/2,L=c,F=u,z=Math.max(BN,Math.min(TN,M)),G=z/L,V=R-(R-F.x)*G,q=k-(k-F.y)*G;h(z),f({x:V,y:q})},[i,c,u,h,f]),A=C.useCallback(()=>{if(i.width===0||i.height===0)return;const M=i.width/l.width,R=i.height/l.height,k=Math.min(M,R)*.9;h(k),f({x:(i.width-l.width*k)/2,y:(i.height-l.height*k)/2})},[i,l,h,f]),[x,E]=C.useState("");C.useEffect(()=>{E(`${Math.round(c*100)}%`)},[c]);const w=C.useCallback(M=>{E(M)},[]),B=C.useCallback(M=>{if(M===null)return;const R=Number(M);isNaN(R)||v(R/100)},[v]),D=C.useCallback(M=>{if(M.key==="Enter"){M.preventDefault();const R=x.replace("%","").trim(),k=parseFloat(R);!isNaN(k)&&k>=10&&k<=500?v(k/100):E(`${Math.round(c*100)}%`),M.target.blur()}},[x,v,c]),T=C.useCallback(()=>{const M=x.replace("%","").trim(),R=parseFloat(M);!isNaN(R)&&R>=10&&R<=500?v(R/100):E(`${Math.round(c*100)}%`)},[x,v,c]);return o&&n?d.jsxs("div",{ref:r,className:"workspace workspace--compare-mode",children:[d.jsxs("div",{className:"workspace-compare-panel workspace-compare-panel--left",children:[d.jsx("div",{className:"workspace-compare-label",children:"iframe Preview"}),d.jsx("div",{className:"workspace-compare-content",children:n})]}),d.jsxs("div",{className:"workspace-compare-panel workspace-compare-panel--right",children:[d.jsx("div",{className:"workspace-compare-label",children:"PixiJS Canvas"}),d.jsx("div",{className:"workspace-compare-content",children:d.jsx(Aq,{pageWidth:l.width,pageHeight:l.height})})]}),d.jsxs("div",{className:"workspace-zoom-controls",children:[d.jsx("button",{className:"zoom-control-button",onClick:()=>v(c-z3),disabled:c<=BN,children:d.jsx(YO,{size:16})}),d.jsxs($T,{className:"zoom-combobox",inputValue:x,onInputChange:w,onSelectionChange:B,"aria-label":"Zoom level",allowsCustomValue:!0,children:[d.jsxs("div",{className:"zoom-combobox-container",children:[d.jsx(br,{className:"zoom-combobox-input",onKeyDown:D,onBlur:T}),d.jsx(en,{className:"zoom-combobox-button",children:d.jsx(zs,{size:12})})]}),d.jsx(gs,{className:"zoom-combobox-popover",children:d.jsx($i,{className:"zoom-combobox-listbox",children:yq.map(M=>d.jsxs(Sr,{id:M,className:"zoom-combobox-item",children:[M,"%"]},M))})})]}),d.jsx("button",{className:"zoom-control-button",onClick:()=>v(c+z3),disabled:c>=TN,children:d.jsx(Pc,{size:16})}),d.jsx("button",{className:"zoom-control-button",onClick:A,children:d.jsx(XO,{size:16})})]}),(m||!p)&&d.jsx("div",{className:"workspace-status-indicator",children:m?" GPU   ...":"   ..."})]}):!a&&n?d.jsx("div",{ref:r,className:"workspace",children:n}):d.jsxs("div",{ref:r,className:"workspace",children:[d.jsx(Aq,{pageWidth:l.width,pageHeight:l.height}),d.jsx("div",{className:"workspace-overlay"}),d.jsxs("div",{className:"workspace-zoom-controls",children:[d.jsx("button",{className:"zoom-control-button",onClick:()=>v(c-z3),disabled:c<=BN,children:d.jsx(YO,{size:16})}),d.jsxs($T,{className:"zoom-combobox",inputValue:x,onInputChange:w,onSelectionChange:B,"aria-label":"Zoom level",allowsCustomValue:!0,children:[d.jsxs("div",{className:"zoom-combobox-container",children:[d.jsx(br,{className:"zoom-combobox-input",onKeyDown:D,onBlur:T}),d.jsx(en,{className:"zoom-combobox-button",children:d.jsx(zs,{size:12})})]}),d.jsx(gs,{className:"zoom-combobox-popover",children:d.jsx($i,{className:"zoom-combobox-listbox",children:yq.map(M=>d.jsxs(Sr,{id:M,className:"zoom-combobox-item",children:[M,"%"]},M))})})]}),d.jsx("button",{className:"zoom-control-button",onClick:()=>v(c+z3),disabled:c>=TN,children:d.jsx(Pc,{size:16})}),d.jsx("button",{className:"zoom-control-button",onClick:A,children:d.jsx(XO,{size:16})})]}),(m||!p)&&d.jsx("div",{className:"workspace-status-indicator",children:m?" GPU   ...":"   ..."})]})}Jl()(nF(t=>({zoom:1,panX:0,panY:0,isEditing:!1,editingElementId:null,showGrid:!0,snapToGrid:!0,gridSize:20,setZoom:e=>t({zoom:Math.max(.1,Math.min(5,e))}),setPan:(e,n)=>t({panX:e,panY:n}),setEditing:(e,n=null)=>t({isEditing:e,editingElementId:n}),setGridSettings:e=>t(n=>({showGrid:e.showGrid??n.showGrid,snapToGrid:e.snapToGrid??n.snapToGrid,gridSize:e.gridSize??n.gridSize})),resetView:()=>t({zoom:1,panX:0,panY:0})})));function vq(t){const{style:e,computedStyle:n,events:r,...i}=t.props;return{id:t.id,customId:t.customId,type:t.tag,properties:i,style:e||{},computedStyle:n,semanticClasses:[],cssVariables:{},dataBinding:t.dataBinding,events:r||[]}}function rft(t){const e={...t.properties};return t.style!==void 0&&(e.style=t.style),t.events!==void 0&&(e.events=t.events),{id:t.id,customId:t.customId,tag:t.type,props:e,dataBinding:t.dataBinding}}function ift(){const t=Di(a=>a.selectedElement),e=je(a=>a.updateElement),n=je(a=>a.setElements),r=je(a=>a.historyOperationInProgress),i=C.useRef(null),s=C.useRef(null);C.useEffect(()=>{if(r)return;if(!t){i.current=null,s.current&&(clearTimeout(s.current),s.current=null);return}const{elements:a,elementsMap:o}=je.getState(),l=o.get(t.id);if(!l)return;const{style:c,computedStyle:u,events:h,...f}=l.props,p={customId:t.customId,properties:t.properties,style:t.style,dataBinding:t.dataBinding,events:t.events},m={customId:l.customId,properties:f,style:c,dataBinding:l.dataBinding,events:h},v=JSON.stringify(p),A=JSON.stringify(m);if(v===A||v===i.current)return;i.current=v,s.current&&clearTimeout(s.current);const x=Di.getState().syncVersion,E=rft(t);return s.current=setTimeout(async()=>{try{if(t.type==="Table"&&t.dataBinding?.type==="collection"&&(t.dataBinding?.source==="api"||t.dataBinding?.source==="static"||t.dataBinding?.source==="supabase")){const B=l?.dataBinding?.config,D=t.dataBinding?.config,T=B&&"endpoint"in B?B.endpoint:void 0,M=D&&"endpoint"in D?D.endpoint:void 0,R=T!==M,k=B&&"columnMapping"in B?B.columnMapping:void 0,L=D&&"columnMapping"in D?D.columnMapping:void 0,F=JSON.stringify(k)!==JSON.stringify(L),z=B&&"table"in B?B.table:void 0,G=D&&"table"in D?D.table:void 0,V=B&&"columns"in B?B.columns:void 0,q=D&&"columns"in D?D.columns:void 0,O=z!==G,H=JSON.stringify(V)!==JSON.stringify(q),K=t.dataBinding?.source==="api"&&B&&"columns"in B?B.columns:void 0,X=t.dataBinding?.source==="api"&&D&&"columns"in D?D.columns:void 0,re=t.dataBinding?.source==="api"&&JSON.stringify(K)!==JSON.stringify(X);if(R||re||t.dataBinding?.source==="static"&&F||t.dataBinding?.source==="supabase"&&(O||H||F)){const J=new Set(a.filter(ee=>ee.tag==="TableHeader"&&ee.parent_id===t.id).map(ee=>ee.id)),Z=a.filter(ee=>ee.tag==="Column"&&ee.parent_id&&J.has(ee.parent_id));if(Z.length>0){const ee=new Set(Z.map(oe=>oe.id));try{await ud.deleteMultipleElements([...ee])}catch(oe){console.error(" DB Column  :",oe)}const te=a.filter(oe=>!ee.has(oe.id));n(te)}}}await e(t.id,E);const w={};E.props&&(w.props=E.props),Object.prototype.hasOwnProperty.call(E,"customId")&&(w.custom_id=E.customId),Object.prototype.hasOwnProperty.call(E,"dataBinding")&&E.dataBinding!==null&&(w.data_binding=E.dataBinding),Object.keys(w).length>0&&await Hx.savePropertyChange({table:"elements",id:t.id,data:w},{source:"inspector",allowPreviewSaves:!0,validateSerialization:!0})}catch(w){console.error(" useSyncWithBuilder -  :",w),i.current=null,Di.getState().confirmSync(x)}finally{s.current=null,Di.getState().confirmSync(x)}},100),()=>{i.current=null}},[t,e,n,r])}function sft(){const t=Di(o=>o.setSelectedElement),e=Di(o=>o.isSyncingToBuilder),n=je(o=>o.selectedElementId),r=C.useRef(0),i=C.useRef(null),s=je(o=>o.selectedElementProps),a=C.useMemo(()=>{const o=je.getState().elementsMap,l=n&&o.get(n)||null;return l&&s&&Object.keys(s).length>0?{...l,props:{...l.props,...s}}:l},[n,s]);return ift(),C.useEffect(()=>{const o=a?.id||null;if(o!==i.current){if(i.current=o,!a){t(null);return}const M=vq(a);t(M);return}if(e)return;const c=Di.getState().syncVersion;if(c>r.current){r.current=c;return}const u=Di.getState().selectedElement;if(!a){u&&t(null);return}const h=vq(a),f=u?.properties,p=h.properties,m=u?.dataBinding,v=h.dataBinding,A=u?.style,x=h.style,E=u?.computedStyle,w=h.computedStyle,B=u?.events,D=h.events;if(f===p&&m===v&&A===x&&E===w&&B===D)return;let T=!1;if(f!==p){const M=JSON.stringify(f,Object.keys(f||{}).sort()),R=JSON.stringify(p,Object.keys(p||{}).sort());M!==R&&(T=!0)}if(!T&&m!==v&&JSON.stringify(m)!==JSON.stringify(v)&&(T=!0),!T&&A!==x){const M=JSON.stringify(A,Object.keys(A||{}).sort()),R=JSON.stringify(x,Object.keys(x||{}).sort());M!==R&&(T=!0)}if(!T&&E!==w){const M=JSON.stringify(E,Object.keys(E||{}).sort()),R=JSON.stringify(w,Object.keys(w||{}).sort());M!==R&&(T=!0)}!T&&B!==D&&JSON.stringify(B)!==JSON.stringify(D)&&(T=!0),T&&t(h)},[a,t,e]),null}function aft(t=!0){const e=je(m=>m.currentPageId),n=je(m=>m.loadedPages),r=je(m=>m.loadingPages),i=je(m=>m.lazyLoadingEnabled),s=je(m=>m.lazyLoadPageElements),a=je(m=>m.preloadPage),o=je(m=>m.getLRUStats),l=C.useRef(!1),c=e?r.has(e):!1,u=e?n.has(e):!1,h=C.useCallback(async m=>{if(!l.current){l.current=!0;try{await s(m)}finally{l.current=!1}}},[s]),f=C.useCallback(m=>{a(m)},[a]);C.useEffect(()=>{t&&e&&i&&(u||c||h(e))},[e,t,i,u,c,h]);const p={loadedPages:o().size,maxPages:o().maxPages,hitRate:o().hitRate};return{isLoading:c,isLoaded:u,loadPage:h,preloadPage:f,stats:p}}function oft(){const t=je(i=>i.currentPageId),e=je(i=>i.pages),n=je(i=>i.preloadPage),r=je(i=>i.lazyLoadingEnabled);C.useEffect(()=>{if(!r||!t||e.length===0)return;const i=e.findIndex(a=>a.id===t);if(i===-1)return;[i-1,i+1].forEach(a=>{if(a>=0&&a<e.length){const o=e[a].id;n(o)}})},[t,e,n,r])}function lft(t){const e={checkInterval:3e4,criticalHealthScore:30,warningHealthScore:50,recoveryCooldown:6e4,historyKeepCount:50,enabled:!0,...t?.config},n=C.useRef({totalRecoveries:0,lastRecoveryTime:null,lastRecoveryReason:null,history:[]}),r=C.useRef(!1),i=C.useRef(0),s=je(c=>c.clearAllPages),a=je(c=>c.currentPageId),o=C.useCallback(async c=>{if(r.current){console.warn("[AutoRecovery] Recovery already in progress");return}const u=Date.now();if(n.current.lastRecoveryTime&&u-n.current.lastRecoveryTime<e.recoveryCooldown){console.warn("[AutoRecovery] In cooldown period");return}r.current=!0;const h=Gx.getLastMetrics()?.healthScore??0;console.warn(` [AutoRecovery] Starting recovery: ${c}`),console.log("  Health before:",h);try{console.log("  Step 1: Unloading inactive pages..."),s&&s(),console.log("  Step 2: Trimming history..."),Da.trim(e.historyKeepCount),console.log("  Step 3: Clearing caches..."),a0.getPageIds().forEach(m=>{m!==a&&a0.remove(m)}),"gc"in window&&typeof window.gc=="function"&&(console.log("  Step 4: Requesting GC..."),window.gc?.()),await new Promise(m=>setTimeout(m,100));const p=Gx.collect();n.current.totalRecoveries++,n.current.lastRecoveryTime=u,n.current.lastRecoveryReason=c,n.current.history.push({timestamp:u,reason:c,healthBefore:h,healthAfter:p.healthScore}),n.current.history.length>10&&n.current.history.shift(),console.log(" [AutoRecovery] Recovery complete"),console.log(`  Health after: ${p.healthScore}`),console.log(`  Improvement: +${p.healthScore-h}`),t?.onRecovery?.(c,{...n.current})}catch(f){console.error("[AutoRecovery] Recovery failed:",f)}finally{r.current=!1}},[s,a,e.historyKeepCount,e.recoveryCooldown,t]),l=C.useCallback((c="manual")=>{o(c)},[o]);return C.useEffect(()=>{if(!e.enabled)return;Gx.startAutoCollect(e.checkInterval);const c=Gx.addListener(u=>{const h=Date.now();h-i.current<5e3||(i.current=h,u.healthScore<e.warningHealthScore&&u.healthScore>=e.criticalHealthScore&&(console.warn(` [AutoRecovery] Warning: Health ${u.healthScore}%`),t?.onWarning?.(u)),u.healthScore<e.criticalHealthScore&&(console.error(` [AutoRecovery] Critical: Health ${u.healthScore}%`),o(`critical_health_${u.healthScore}`)))});return()=>{c(),Gx.stopAutoCollect()}},[e.enabled,e.checkInterval,e.criticalHealthScore,e.warningHealthScore,o,t]),{stats:n.current,triggerRecovery:l,isRecovering:r.current}}const cft=()=>{const t=_s(i=>i.loadActiveTheme),e=_s(i=>i.injectThemeCSS),n=C.useCallback(()=>{e()},[e]),r=C.useCallback(i=>{t(i)},[t]);return{applyThemeTokens:n,loadProjectTheme:r}},uft=()=>({validateOrderNumbers:C.useCallback(e=>{},[])});function xq(t,e){if(!e)return t;if(!(typeof t!="object"||t===null))return e.split(".").reduce((n,r)=>{if(n&&typeof n=="object")return n[r]},t)}function dft(t,e,n){const r=[...t],i=Array.isArray(e)?e:[e];for(const s of i){if(typeof s!="object"||s===null)continue;const a=s,o=a[n];if(o===void 0){r.push(a);continue}const l=r.findIndex(c=>c[n]===o);l>=0?r[l]={...r[l],...a}:r.push(a)}return r}function efe(t,e){if(typeof e!="object"||e===null)return t;const n={...t},r=e;for(const i of Object.keys(r)){const s=n[i],a=r[i];typeof s=="object"&&s!==null&&typeof a=="object"&&a!==null&&!Array.isArray(s)&&!Array.isArray(a)?n[i]=efe(s,a):n[i]=a}return n}function bq(t,e){const r=(Array.isArray(e)?e:[e]).filter(i=>typeof i=="object"&&i!==null);return[...t,...r]}function hft(t,e){try{return JSON.parse(t)}catch{return e}}const fft=()=>{const{projectId:t}=Fb(),[e,n]=C.useState(null),r=nh(),i=je(ce=>ce.currentPageId),s=je(ce=>ce.setSelectedElement),a=je(ce=>ce.showOverlay),o=je(ce=>ce.themeMode),l=je(ce=>ce.uiScale),c=je(ce=>ce.historyInfo),u=je(ce=>ce.setHistoryInfo),h=je(ce=>ce.viewMode),f=je(ce=>ce.toggleViewMode);C.useEffect(()=>{if(i){const ce=Da.getCurrentPageHistory();u(ce)}},[i,u]),C.useEffect(()=>{const ce=$e=>{document.documentElement.setAttribute("data-builder-theme",$e)};if(o==="auto"){const $e=window.matchMedia("(prefers-color-scheme: dark)"),qe=ft=>{ce(ft.matches?"dark":"light")};return qe($e),$e.addEventListener("change",qe),()=>{$e.removeEventListener("change",qe)}}else ce(o)},[o]),C.useEffect(()=>{const ce=document.querySelector(".app .contents");ce&&(ce.style.fontSize=`${l}%`)},[l]);const p=c.canUndo,m=c.canRedo,v=C.useCallback(async()=>{const{undo:ce}=je.getState();await ce();const $e=Da.getCurrentPageHistory();u($e)},[u]),A=C.useCallback(async()=>{const{redo:ce}=je.getState();await ce();const $e=Da.getCurrentPageHistory();u($e)},[u]),{error:x,isLoading:E,setError:w,setIsLoading:B,handleError:D,clearError:T}=fle(),{handleIframeLoad:M,handleMessage:R,sendElementsToIframe:k,iframeReadyState:L,requestAutoSelectAfterUpdate:F}=I4(),{pages:z,fetchElements:G,initializeProject:V}=cle({requestAutoSelectAfterUpdate:F}),{applyThemeTokens:q,loadProjectTheme:O}=cft(),{validateOrderNumbers:H}=uft(),{sendThemeTokens:K}=ole(),{isLoading:X}=aft();oft();const{toasts:re,showToast:J,dismissToast:Z}=Ile();lft({onRecovery:C.useCallback(ce=>{J("info",`   : ${ce}`,8e3)},[J]),onWarning:C.useCallback(ce=>{J("warning",` : Health ${ce.healthScore}%`,5e3)},[J])});const[ee,te]=C.useState(()=>{const ce=localStorage.getItem("builder-breakpoint");if(ce)try{return new Set([ce])}catch($e){return console.warn("Failed to parse saved breakpoint:",$e),new Set(["screen"])}return new Set(["screen"])}),[oe]=C.useState([{id:"screen",label:"Screen",max_width:"100%",max_height:"100%"},{id:"desktop",label:"Desktop",max_width:1280,max_height:1080},{id:"tablet",label:"Tablet",max_width:1024,max_height:800},{id:"mobile",label:"Mobile",max_width:390,max_height:844}]),ae=C.useCallback(ce=>{te(new Set([ce])),localStorage.setItem("builder-breakpoint",String(ce))},[]);C.useEffect(()=>{(async()=>{if(t)try{const qe=await(await On()).projects.getById(t);qe?n(qe):console.warn("[BuilderCore]    :",t)}catch($e){console.error("[BuilderCore]    :",$e)}})()},[t]);const se=C.useRef(!1),fe=C.useRef(null);C.useEffect(()=>((async()=>{if(!t||se.current||fe.current===t)return;se.current=!0,B(!0);const $e=await V(t);if(!$e.success){w($e.error?.message||"  "),se.current=!1;return}const qe=sd.getState().mode,ft=Cl.getState().currentLayoutId;if(qe==="layout"&&ft)try{const ht=await(await On()).elements.getByLayout(ft),{elements:Ue,setElements:xt}=je.getState(),ue=[...Ue.filter(He=>He.layout_id!==ft),...ht];xt(ue,{skipHistory:!0});const{fetchLayouts:ke}=Cl.getState();await ke(t),await Oi.getState().initializeForProject(t)}catch(Ie){console.error("[BuilderCore] Layout   :",Ie)}B(!1),O(t),fe.current=t,se.current=!1})(),()=>{Ja.clearIframeCache()}),[t,V,B,w,O]),C.useEffect(()=>{q()},[q]);const Ee=we.useRef(K);we.useEffect(()=>{Ee.current=K},[K]),C.useEffect(()=>{if(L!=="ready")return;const{tokens:ce}=_s.getState();ce.length>0&&Ee.current(ce);let $e=ce.length;const qe=_s.subscribe(ft=>{const Ie=ft.tokens.length;Ie>0&&$e!==Ie&&(Ee.current(ft.tokens),$e=Ie)});return()=>{qe()}},[L]),C.useEffect(()=>{if(!i)return;const ce=je.getState().elements;ce.length>0&&H(ce)},[i,H]);const Be=C.useRef([]),_e=C.useRef("page");C.useEffect(()=>{if(L!=="ready")return;const ce=je.subscribe(($e,qe)=>{if($e.elements===qe.elements)return;const ft=sd.getState().mode,Ie=Cl.getState().currentLayoutId;let ht=$e.elements;ft==="layout"&&Ie&&(ht=$e.elements.filter(ve=>ve.layout_id===Ie));const Ue=_e.current!==ft,xt=Be.current!==ht;!Ue&&!xt||(Be.current=ht,_e.current=ft,k(ht))});return()=>{ce()}},[L,k]),C.useEffect(()=>{const ce=async $e=>{if($e.data?.type!=="NAVIGATE_TO_PAGE")return;const{path:qe}=$e.data.payload,ft=qe.startsWith("/")?qe:`/${qe}`,Ie=z.find(ht=>{const Ue=ht.slug||"/";return(Ue.startsWith("/")?Ue:`/${Ue}`)===ft});if(Ie){const ht=await G(Ie.id);ht.success||D(ht.error||new Error("  ")," ")}else console.warn(`[BuilderCore] Page not found for path: ${qe}`),D(new Error(`   : ${qe}`)," ")};return window.addEventListener("message",ce),()=>{window.removeEventListener("message",ce)}},[z,G,D]),C.useEffect(()=>{const ce=async Ie=>{const{type:ht,payload:Ue}=Ie.data||{};switch(ht){case"LOAD_DATA_TABLE":await $e(Ue);break;case"SYNC_COMPONENT":await qe(Ue);break;case"SAVE_TO_DATA_TABLE":await ft(Ue);break}};async function $e(Ie){const{dataTableName:ht,forceRefresh:Ue}=Ie,{dataTables:xt,loadDataTable:ve,refreshDataTable:ue}=Jx.getState();let ke=null;if(xt.forEach((He,Qe)=>{He.name===ht&&(ke=Qe)}),!ke){console.warn(`[BuilderCore] DataTable '${ht}' not found`);return}Ue?await ue(ke):await ve(ke)}async function qe(Ie){const{sourceId:ht,targetId:Ue,syncMode:xt,dataPath:ve}=Ie,{elements:ue,updateElementProps:ke}=je.getState(),He=ue.find(at=>at.customId===ht||at.id===ht);if(!He){console.warn(`[BuilderCore] Source element '${ht}' not found`);return}const Qe=ue.find(at=>at.customId===Ue||at.id===Ue);if(!Qe){console.warn(`[BuilderCore] Target element '${Ue}' not found`);return}const Ke=He.props;let jt=Ke.selectedKeys||Ke.value||Ke.items;ve&&jt&&(jt=xq(jt,ve));const St=Qe.props,Zt=St.value||St.items||[];let Bt;switch(xt){case"replace":Bt=jt;break;case"merge":typeof Zt=="object"&&!Array.isArray(Zt)?Bt=efe(Zt,jt):Bt=jt;break;case"append":Array.isArray(Zt)?Bt=bq(Zt,jt):Bt=jt;break;default:Bt=jt}await ke(Qe.id,{value:Bt})}async function ft(Ie){const{dataTableName:ht,source:Ue,sourcePath:xt,saveMode:ve,keyField:ue,transform:ke}=Ie,{dataTables:He,dataTableStates:Qe}=Jx.getState();let Ke=null,jt=null;if(He.forEach((pt,Vt)=>{pt.name===ht&&(Ke=Vt,jt=pt)}),!Ke||!jt){console.warn(`[BuilderCore] DataTable '${ht}' not found`);return}let St;switch(Ue){case"response":St=je.getState().lastApiResponse;break;case"variable":xt&&(St=xq(je.getState(),xt));break;case"static":St=hft(xt||"[]",[]);break}if(ke)try{St=new Function("data",`return ${ke}`)(St)}catch(pt){console.warn("[BuilderCore] Transform failed:",pt)}const Bt=Qe.get(Ke)?.data||[];let at;switch(ve){case"replace":at=Array.isArray(St)?St:[St];break;case"merge":at=Bt.map((pt,Vt)=>({...pt,...Array.isArray(St)?St[Vt]:St}));break;case"append":at=bq(Bt,St);break;case"upsert":at=dft(Bt,St,ue||"id");break;default:at=Bt}Jx.setState(pt=>{const Vt=new Map(pt.dataTableStates),qt=Vt.get(Ke);return qt&&Vt.set(Ke,{...qt,data:at,lastLoadedAt:Date.now()}),{dataTableStates:Vt}})}return window.addEventListener("message",ce),()=>{window.removeEventListener("message",ce)}},[]);const Ce=C.useCallback(()=>{},[]),Se=C.useCallback(()=>{},[]),Me=C.useCallback(()=>{},[]);return C.useEffect(()=>{const ce=$e=>{const qe=$e.target;if(qe.closest(".selection-overlay")||qe.closest(".sidebar")||qe.closest(".inspector")||qe.closest(".header")||qe.closest(".footer")||qe.closest("#previewFrame"))return;(qe.classList.contains("workspace")||qe.classList.contains("bg"))&&(s(null),nh()&&!xf()||Ja.clearOverlay())};return document.addEventListener("mousedown",ce),()=>{document.removeEventListener("mousedown",ce)}},[s]),d.jsxs(_Ye,{children:[x&&d.jsxs("div",{className:"error-banner",children:[d.jsxs("span",{children:[" ",x]}),d.jsx("button",{onClick:T,children:""})]}),(E||X)&&d.jsx("div",{className:"loading-overlay",children:d.jsx("div",{className:"loading-spinner",children:E?"Initializing...":"Loading page..."})}),d.jsx(sft,{}),d.jsx(A9e,{projectId:t,projectName:e?.name,breakpoint:ee,breakpoints:oe,onBreakpointChange:ae,historyInfo:{current:c.currentIndex+1,total:c.totalEntries},canUndo:p,canRedo:m,onUndo:v,onRedo:A,onPreview:Ce,onPlay:Se,onPublish:Me,viewMode:h,onViewModeToggle:f}),h==="canvas"?r?d.jsx(nft,{breakpoint:ee,breakpoints:oe,fallbackCanvas:d.jsxs(U9,{projectId:t,breakpoint:new Set(Array.from(ee).map(String)),breakpoints:oe,onIframeLoad:M,onMessage:R,children:[d.jsx(GH,{}),a&&d.jsx(HH,{})]})}):d.jsxs(U9,{projectId:t,breakpoint:new Set(Array.from(ee).map(String)),breakpoints:oe,onIframeLoad:M,onMessage:R,children:[d.jsx(GH,{}),a&&d.jsx(HH,{})]}):d.jsx(wYe,{}),d.jsx("aside",{className:"sidebar",children:d.jsx(Q9,{side:"left"})}),d.jsx("aside",{className:"inspector",children:d.jsx(Q9,{side:"right"})}),d.jsx(m9e,{}),d.jsx(Ble,{toasts:re,onDismiss:Z})]})};function pft(){return d.jsx(fft,{})}const gft=()=>{const t=lI(),[e,n]=C.useState(!1),[r,i]=C.useState(""),[s,a]=C.useState(""),o=rf(async({email:m,password:v})=>{const{error:A}=await ss.auth.signUp({email:m,password:v});if(A)throw A;return" .  ."},{onSuccess:()=>{i(""),a("")}}),l=rf(async({email:m,password:v})=>{const{error:A}=await ss.auth.signInWithPassword({email:m,password:v});if(A)throw A},{onSuccess:()=>{t("/dashboard")}}),c=o.isLoading||l.isLoading,u=o.error||l.error,h=o.data,f=async m=>{m.preventDefault();const v={email:r,password:s};try{e?await o.execute(v):await l.execute(v)}catch(A){console.error("[Signin] Auth failed:",A)}},p=()=>{n(!e),o.reset(),l.reset(),i(""),a("")};return d.jsx("main",{className:"auth-container",children:d.jsxs("div",{className:"auth-card",children:[d.jsxs("div",{className:"auth-header",children:[d.jsx("h1",{className:"auth-title",children:e?"Sign Up":"Sign In"}),d.jsx("p",{className:"auth-subtitle",children:e?"Create a new account":"Log in to your account"})]}),d.jsxs("form",{onSubmit:f,className:"auth-form",children:[d.jsxs(dr,{className:"auth-form-field",value:r,onChange:i,isRequired:!0,isInvalid:!!u,validationBehavior:"aria",children:[d.jsx(xn,{children:"Email Address"}),d.jsx(br,{type:"email"}),u&&d.jsx(zT,{children:u.message})]}),d.jsxs(dr,{className:"auth-form-field",value:s,onChange:a,isRequired:!0,children:[d.jsx(xn,{children:"Password"}),d.jsx(br,{type:"password"}),e&&d.jsx(lE,{slot:"description",children:"Enter a secure password with at least 8 characters."}),!e&&d.jsx(lE,{slot:"description",children:"Enter your account password."})]}),h&&d.jsx("div",{className:"success-message",children:d.jsx("p",{className:"success-text",children:h})}),d.jsx(en,{type:"submit",className:"react-aria-Button primary",isDisabled:c,children:c?e?"Signing Up...":"Signing In...":e?"Sign Up":"Sign In"}),d.jsxs("div",{className:"helper-text",children:[d.jsx(en,{className:"react-aria-Button ghost",onPress:p,children:e?"Log In":"Sign Up"}),e?null:d.jsx(en,{className:"react-aria-Button ghost",onPress:()=>t("/forgot-password"),children:"Forgot Password?"})]})]})]})})};function mft(t){const{projectId:e,enableRealtime:n=!0}=t,r=_s(h=>h.activeTheme),i=_s(h=>h.loading),s=_s(h=>h.error),a=_s(h=>h.setProjectId),o=_s(h=>h.loadActiveTheme),l=_s(h=>h.activateTheme),c=_s(h=>h.subscribeToThemes);return C.useEffect(()=>{a(e),o(e)},[e]),C.useEffect(()=>{if(!n)return;const h=c();return()=>{h&&h()}},[n]),{activeTheme:r,loading:i,error:s,refetch:async()=>{await o(e)},switchTheme:async h=>l(h)}}function eD(t){const e=t.split(".");return{category:e[0]||"other",group:e[1],tokenName:e[2]||e[e.length-1],fullName:t}}function Aft(t){return{...t,parsed:eD(t.name)}}function yft(t){return t.map(Aft)}function vft(t,e){return t.filter(n=>eD(n.name).category===e)}function xft(t,e,n){return t.filter(r=>{const i=eD(r.name);return i.category===e&&i.group===n})}function tD(t){const{themeId:e,filter:n,enableRealtime:r=!0}=t,[i,s]=C.useState([]),[a,o]=C.useState(!0),[l,c]=C.useState(null),u=C.useCallback(async()=>{try{o(!0),c(null);const D=await is.getResolvedTokens(e);s(D)}catch(D){const T=D instanceof Error?D.message:"  ";c(T),console.error("[useTokens] fetchTokens failed:",D)}finally{o(!1)}},[e]);C.useEffect(()=>{u()},[u]),C.useEffect(()=>!r||!e?void 0:is.subscribeToTokenChanges(e,T=>{console.log("[useTokens] Realtime update:",T),u()}),[r,e,u]);const h=C.useMemo(()=>{let D=i;if(n?.category&&(D=vft(D,n.category)),n?.category&&n?.group&&(D=xft(D,n.category,n.group)),n?.scope&&(D=D.filter(T=>T.scope===n.scope)),n?.showInherited===!1&&(D=D.filter(T=>!T.is_inherited)),n?.search){const T=n.search.toLowerCase();D=D.filter(M=>M.name.toLowerCase().includes(T)||M.type.toLowerCase().includes(T)||JSON.stringify(M.value).toLowerCase().includes(T))}return D},[i,n]),f=C.useMemo(()=>yft(h),[h]),p=C.useMemo(()=>h.filter(D=>D.scope==="raw"),[h]),m=C.useMemo(()=>h.filter(D=>D.scope==="semantic"),[h]),v=C.useMemo(()=>h.filter(D=>D.is_inherited),[h]),A=C.useMemo(()=>h.filter(D=>!D.is_inherited),[h]),x=C.useCallback(async D=>{try{return await is.createToken({...D,theme_id:e}),r||await u(),!0}catch(T){const M=T instanceof Error?T.message:"  ";return c(M),console.error("[useTokens] createToken failed:",T),!1}},[e,r,u]),E=C.useCallback(async(D,T)=>{try{return s(M=>M.map(R=>R.id===D?{...R,...T}:R)),await is.updateToken(D,T),r||await u(),!0}catch(M){const R=M instanceof Error?M.message:"  ";return c(R),console.error("[useTokens] updateToken failed:",M),await u(),!1}},[r,u]),w=C.useCallback(async D=>{try{return await is.deleteToken(D),r||await u(),!0}catch(T){const M=T instanceof Error?T.message:"  ";return c(M),console.error("[useTokens] deleteToken failed:",T),!1}},[r,u]),B=C.useCallback(async D=>{try{const T=D.map(R=>({...R,theme_id:e})),M=await is.bulkUpsertTokens(T);return r||await u(),M}catch(T){const M=T instanceof Error?T.message:"   ";return c(M),console.error("[useTokens] bulkUpsertTokens failed:",T),0}},[e,r,u]);return{tokens:h,parsedTokens:f,rawTokens:p,semanticTokens:m,inheritedTokens:v,currentThemeTokens:A,loading:a,error:l,refetch:u,createToken:x,updateToken:E,deleteToken:w,bulkUpsertTokens:B}}const bft={total:0,raw:0,semantic:0,byType:{},inherited:0};function Cft(t){const{themeId:e,enableRealtime:n=!0}=t,[r,i]=C.useState(null),[s,a]=C.useState(!0),[o,l]=C.useState(null),c=C.useCallback(async()=>{try{a(!0),l(null);const f=await is.getTokenStats(e);i(f)}catch(f){const p=f instanceof Error?f.message:"  ";l(p),console.error("[useTokenStats] fetchStats failed:",f),i(bft)}finally{a(!1)}},[e]);C.useEffect(()=>{c()},[c]),C.useEffect(()=>!n||!e?void 0:is.subscribeToTokenChanges(e,p=>{console.log("[useTokenStats] Realtime update:",p),c()}),[n,e,c]);const u={raw:r&&r.total>0?r.raw/r.total*100:0,semantic:r&&r.total>0?r.semantic/r.total*100:0,inherited:r&&r.total>0?r.inherited/r.total*100:0},h=r?Object.entries(r.byType).map(([f,p])=>({type:f,count:p,percentage:r.total>0?p/r.total*100:0})).sort((f,p)=>p.count-f.count):[];return{stats:r,loading:s,error:o,refetch:c,percentages:u,topTypes:h}}const Eft=fr({slots:{container:"ai-generator-container",form:"ai-generator-form",formGroup:"form-group",progressBar:"progress-bar",results:"generation-results"}}),Cq={analyzing:"  ",colors:"   ",typography:"  ",spacing:"   ",radius:"Border radius  ",shadows:"Shadow  ",semantic:"Semantic   ",finalizing:"  ",complete:""};function Sft({projectId:t,onThemeGenerated:e}){const n=Eft(),[r,i]=C.useState(null),[s,a]=C.useState(""),[o,l]=C.useState("#3b82f6"),[c,u]=C.useState("modern"),[h,f]=C.useState(""),p=rf(async A=>{const x=$je();let E=null;for await(const w of x.generateTheme(A))i(w),w.stage==="complete"&&w.data&&(E=w.data);return E},{onSuccess:A=>{e&&A.themeId&&e(A.themeId)}}),m=async()=>{if(!s.trim()){alert("  ");return}i(null);const A={projectId:t,themeName:s,brandColor:o,style:c,description:h||void 0,includeSemanticTokens:!0};try{await p.execute(A)}catch(x){console.error("[AIThemeGenerator] Generation failed:",x)}},v=()=>{i(null),p.reset(),a(""),l("#3b82f6"),u("modern"),f("")};return d.jsxs("div",{className:n.container(),children:[d.jsx("h2",{children:"AI  "}),d.jsx("p",{className:"subtitle",children:"        "}),!p.isLoading&&!p.data&&d.jsxs("form",{className:n.form(),onSubmit:A=>{A.preventDefault(),m()},children:[d.jsxs("div",{className:n.formGroup(),children:[d.jsxs("label",{htmlFor:"theme-name",children:["  ",d.jsx("span",{className:"required",children:"*"})]}),d.jsx("input",{id:"theme-name",type:"text",value:s,onChange:A=>a(A.target.value),placeholder:": Modern SaaS Theme",required:!0})]}),d.jsxs("div",{className:n.formGroup(),children:[d.jsx("label",{htmlFor:"brand-color",children:" "}),d.jsxs("div",{className:"color-input-group",children:[d.jsx("input",{id:"brand-color",type:"color",value:o,onChange:A=>l(A.target.value)}),d.jsx("input",{type:"text",value:o,onChange:A=>l(A.target.value),placeholder:"#3b82f6"})]}),d.jsx("p",{className:"field-hint",children:"      "})]}),d.jsxs("div",{className:n.formGroup(),children:[d.jsx("label",{htmlFor:"theme-style",children:" "}),d.jsxs("select",{id:"theme-style",value:c,onChange:A=>u(A.target.value),children:[d.jsx("option",{value:"modern",children:"Modern -  "}),d.jsx("option",{value:"classic",children:"Classic -  "}),d.jsx("option",{value:"playful",children:"Playful -  "}),d.jsx("option",{value:"professional",children:"Professional -   "}),d.jsx("option",{value:"minimal",children:"Minimal -  "})]})]}),d.jsxs("div",{className:n.formGroup(),children:[d.jsx("label",{htmlFor:"description",children:" ()"}),d.jsx("textarea",{id:"description",value:h,onChange:A=>f(A.target.value),placeholder:":   SaaS  ",rows:3})]}),d.jsx("button",{type:"submit",className:"generate-btn",children:"  "})]}),p.isLoading&&r&&d.jsxs("div",{className:"progress-container",children:[d.jsxs("div",{className:"progress-header",children:[d.jsx("h3",{children:Cq[r.stage]}),d.jsxs("span",{className:"progress-percentage",children:[r.progress,"%"]})]}),d.jsx("div",{className:n.progressBar(),children:d.jsx("div",{className:"progress-fill",style:{width:`${r.progress}%`}})}),d.jsx("p",{className:"progress-message",children:r.message}),d.jsx("div",{className:"stage-indicators",children:["analyzing","colors","typography","spacing","semantic","finalizing"].map(A=>d.jsxs("div",{className:`stage-indicator ${r.stage===A?"active":""} ${["analyzing","colors","typography","spacing","semantic","finalizing"].indexOf(r.stage)>["analyzing","colors","typography","spacing","semantic","finalizing"].indexOf(A)?"completed":""}`,children:[d.jsx("div",{className:"stage-icon"}),d.jsx("span",{className:"stage-label",children:Cq[A]})]},A))})]}),p.data&&d.jsxs("div",{className:n.results(),children:[d.jsxs("div",{className:"result-header",children:[d.jsx("h3",{children:"   !"}),d.jsx("button",{onClick:v,className:"new-theme-btn",children:"+   "})]}),d.jsxs("div",{className:"result-stats",children:[d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:" "}),d.jsx("span",{className:"stat-value",children:p.data.themeName})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:" "}),d.jsxs("span",{className:"stat-value",children:[p.data.metadata.tokenCount,""]})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:" "}),d.jsx("span",{className:"stat-value",children:new Date(p.data.metadata.generatedAt).toLocaleString("ko-KR")})]})]}),d.jsxs("div",{className:"palette-preview",children:[d.jsx("h4",{children:" "}),d.jsx("div",{className:"color-grid",children:Object.entries(p.data.colorPalette).map(([A,x])=>d.jsxs("div",{className:"color-palette-item",children:[d.jsx("span",{className:"palette-name",children:A}),d.jsx("div",{className:"shade-grid",children:Object.entries(x).map(([E,w])=>d.jsx("div",{className:"shade-box",style:{background:`hsl(${w.h}, ${w.s}%, ${w.l}%)`},title:`${A}.${E}`},E))})]},A))})]})]}),p.error&&d.jsxs("div",{className:"error-message",children:[d.jsx("h3",{children:"  "}),d.jsx("p",{children:p.error.message}),d.jsx("button",{onClick:v,children:" "})]})]})}const wft=fr({slots:{container:"hct-generator-container",form:"hct-generator-form",formGroup:"form-group",preview:"hct-preview-section",results:"generation-results"}}),Eq={analyzing:"Analyzing source color",palettes:"Generating tonal palettes",schemes:"Creating color schemes",tokens:"Converting to tokens",saving:"Saving theme",complete:"Complete"},MN={tonalSpot:{name:"Tonal Spot",description:"Default Material 3 scheme. Balanced and versatile."},vibrant:{name:"Vibrant",description:"High chroma colors for bold, energetic designs."},expressive:{name:"Expressive",description:"Playful colors with shifted tertiary for creative apps."},neutral:{name:"Neutral",description:"Subtle colors. Content-focused, minimal UI."},monochrome:{name:"Monochrome",description:"Grayscale scheme. Professional and elegant."},fidelity:{name:"Fidelity",description:"Maximum chroma. True to source color."},content:{name:"Content",description:"Uses source color directly. Best for image-derived colors."}};function _ft({projectId:t,onThemeGenerated:e}){const n=wft(),[r,i]=C.useState(""),[s,a]=C.useState("#6750A4"),[o,l]=C.useState("tonalSpot"),[c,u]=C.useState(0),[h,f]=C.useState(!0),[p,m]=C.useState(""),[v,A]=C.useState("light"),[x,E]=C.useState(null),w=C.useMemo(()=>cOe(s,o,v==="dark",c),[s,o,v,c]),B=C.useMemo(()=>uOe(s,o),[s,o]),D=rf(async R=>{const k=new lOe;let L=null;for await(const F of k.generateTheme(R))E(F),F.stage==="complete"&&F.data&&(L=F.data);return L},{onSuccess:R=>{e&&R.themeId&&e(R.themeId)}}),T=C.useCallback(async()=>{if(!r.trim()){alert("Please enter a theme name");return}E(null);const R={projectId:t,themeName:r,sourceColor:s,variant:o,contrastLevel:c,includeDarkMode:h,description:p||void 0};try{await D.execute(R)}catch(k){console.error("[HctThemeGenerator] Generation failed:",k)}},[r,t,s,o,c,h,p,D]),M=C.useCallback(()=>{E(null),D.reset(),i(""),a("#6750A4"),l("tonalSpot"),u(0),f(!0),m("")},[D]);return d.jsxs("div",{className:n.container(),children:[d.jsxs("div",{className:"hct-header",children:[d.jsx("h2",{children:"HCT Theme Generator"}),d.jsx("p",{className:"subtitle",children:"Generate Material 3 compliant themes using Google's HCT (Hue, Chroma, Tone) algorithm"})]}),d.jsxs("div",{className:"hct-content",children:[d.jsxs("div",{className:"hct-form-section",children:[!D.isLoading&&!D.data&&d.jsxs("form",{className:n.form(),onSubmit:R=>{R.preventDefault(),T()},children:[d.jsxs("div",{className:n.formGroup(),children:[d.jsxs("label",{htmlFor:"hct-theme-name",children:["Theme Name ",d.jsx("span",{className:"required",children:"*"})]}),d.jsx("input",{id:"hct-theme-name",type:"text",value:r,onChange:R=>i(R.target.value),placeholder:"e.g., Ocean Blue Theme",required:!0})]}),d.jsxs("div",{className:n.formGroup(),children:[d.jsx("label",{htmlFor:"hct-source-color",children:"Source Color"}),d.jsxs("div",{className:"color-input-group",children:[d.jsx("input",{id:"hct-source-color",type:"color",value:s,onChange:R=>a(R.target.value)}),d.jsx("input",{type:"text",value:s,onChange:R=>a(R.target.value),placeholder:"#6750A4",pattern:"^#[0-9A-Fa-f]{6}$"})]}),d.jsx("p",{className:"field-hint",children:"All colors will be derived from this source using HCT algorithm"})]}),d.jsxs("div",{className:n.formGroup(),children:[d.jsx("label",{htmlFor:"hct-variant",children:"Scheme Variant"}),d.jsx("select",{id:"hct-variant",value:o,onChange:R=>l(R.target.value),children:Object.entries(MN).map(([R,{name:k}])=>d.jsx("option",{value:R,children:k},R))}),d.jsx("p",{className:"field-hint variant-description",children:MN[o].description})]}),d.jsxs("div",{className:n.formGroup(),children:[d.jsxs("label",{htmlFor:"hct-contrast",children:["Contrast Level: ",c.toFixed(1)]}),d.jsx("input",{id:"hct-contrast",type:"range",min:"-1",max:"1",step:"0.1",value:c,onChange:R=>u(parseFloat(R.target.value))}),d.jsxs("div",{className:"contrast-labels",children:[d.jsx("span",{children:"Low"}),d.jsx("span",{children:"Normal"}),d.jsx("span",{children:"High"})]})]}),d.jsx("div",{className:n.formGroup(),children:d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:h,onChange:R=>f(R.target.checked)}),"Include Dark Mode Tokens"]})}),d.jsxs("div",{className:n.formGroup(),children:[d.jsx("label",{htmlFor:"hct-description",children:"Description (optional)"}),d.jsx("textarea",{id:"hct-description",value:p,onChange:R=>m(R.target.value),placeholder:"Describe your theme purpose...",rows:2})]}),d.jsx("button",{type:"submit",className:"generate-btn hct-generate-btn",children:"Generate Theme"})]}),D.isLoading&&x&&d.jsxs("div",{className:"progress-container",children:[d.jsxs("div",{className:"progress-header",children:[d.jsx("h3",{children:Eq[x.stage]}),d.jsxs("span",{className:"progress-percentage",children:[x.progress,"%"]})]}),d.jsx("div",{className:"progress-bar",children:d.jsx("div",{className:"progress-fill",style:{width:`${x.progress}%`}})}),d.jsx("p",{className:"progress-message",children:x.message}),d.jsx("div",{className:"stage-indicators hct-stages",children:["analyzing","palettes","schemes","tokens","saving"].map(R=>{const k=["analyzing","palettes","schemes","tokens","saving"],L=k.indexOf(x.stage),F=k.indexOf(R);return d.jsxs("div",{className:`stage-indicator ${x.stage===R?"active":""} ${L>F?"completed":""}`,children:[d.jsx("div",{className:"stage-icon"}),d.jsx("span",{className:"stage-label",children:Eq[R]})]},R)})})]}),D.data&&d.jsxs("div",{className:n.results(),children:[d.jsxs("div",{className:"result-header",children:[d.jsx("h3",{children:"Theme Generated!"}),d.jsx("button",{onClick:M,className:"new-theme-btn",children:"+ New Theme"})]}),d.jsxs("div",{className:"result-stats",children:[d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Theme Name"}),d.jsx("span",{className:"stat-value",children:D.data.themeName})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Algorithm"}),d.jsxs("span",{className:"stat-value",children:["HCT (",MN[D.data.variant].name,")"]})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Tokens Generated"}),d.jsx("span",{className:"stat-value",children:D.data.metadata.tokenCount})]})]})]}),D.error&&d.jsxs("div",{className:"error-message",children:[d.jsx("h3",{children:"Error"}),d.jsx("p",{children:D.error.message}),d.jsx("button",{onClick:M,children:"Try Again"})]})]}),d.jsxs("div",{className:n.preview(),children:[d.jsxs("div",{className:"preview-header",children:[d.jsx("h3",{children:"Live Preview"}),d.jsxs("div",{className:"preview-mode-toggle",children:[d.jsx("button",{className:v==="light"?"active":"",onClick:()=>A("light"),children:"Light"}),d.jsx("button",{className:v==="dark"?"active":"",onClick:()=>A("dark"),children:"Dark"})]})]}),d.jsx("div",{className:"scheme-preview","data-mode":v,children:d.jsx(Ift,{scheme:w})}),d.jsxs("div",{className:"palettes-preview",children:[d.jsx("h4",{children:"Tonal Palettes"}),d.jsx(Bft,{palettes:B})]})]})]})]})}function Ift({scheme:t}){const e=[{label:"Primary",colors:[{name:"Primary",value:t.primary,textColor:t.onPrimary},{name:"On Primary",value:t.onPrimary},{name:"Primary Container",value:t.primaryContainer,textColor:t.onPrimaryContainer},{name:"On Primary Container",value:t.onPrimaryContainer}]},{label:"Secondary",colors:[{name:"Secondary",value:t.secondary,textColor:t.onSecondary},{name:"On Secondary",value:t.onSecondary},{name:"Secondary Container",value:t.secondaryContainer,textColor:t.onSecondaryContainer},{name:"On Secondary Container",value:t.onSecondaryContainer}]},{label:"Tertiary",colors:[{name:"Tertiary",value:t.tertiary,textColor:t.onTertiary},{name:"On Tertiary",value:t.onTertiary},{name:"Tertiary Container",value:t.tertiaryContainer,textColor:t.onTertiaryContainer},{name:"On Tertiary Container",value:t.onTertiaryContainer}]},{label:"Error",colors:[{name:"Error",value:t.error,textColor:t.onError},{name:"On Error",value:t.onError},{name:"Error Container",value:t.errorContainer,textColor:t.onErrorContainer},{name:"On Error Container",value:t.onErrorContainer}]},{label:"Surface",colors:[{name:"Surface",value:t.surface,textColor:t.onSurface},{name:"On Surface",value:t.onSurface},{name:"Surface Variant",value:t.surfaceVariant,textColor:t.onSurfaceVariant},{name:"On Surface Variant",value:t.onSurfaceVariant}]},{label:"Container",colors:[{name:"Lowest",value:t.surfaceContainerLowest},{name:"Low",value:t.surfaceContainerLow},{name:"Default",value:t.surfaceContainer},{name:"High",value:t.surfaceContainerHigh},{name:"Highest",value:t.surfaceContainerHighest}]}];return d.jsx("div",{className:"scheme-color-grid",children:e.map(n=>d.jsxs("div",{className:"color-group",children:[d.jsx("span",{className:"group-label",children:n.label}),d.jsx("div",{className:"color-row",children:n.colors.map(r=>d.jsx("div",{className:"color-swatch",style:{backgroundColor:r.value,color:r.textColor||(Tft(r.value)?"#000":"#fff")},title:`${r.name}
${r.value}`,children:d.jsx("span",{className:"swatch-name",children:r.name})},r.name))})]},n.label))})}function Bft({palettes:t}){const e=["primary","secondary","tertiary","neutral","neutralVariant","error"],n=[0,10,20,30,40,50,60,70,80,90,95,99,100];return d.jsx("div",{className:"tonal-palette-grid",children:e.map(r=>{const i=t[r];return d.jsxs("div",{className:"palette-row",children:[d.jsx("span",{className:"palette-name",children:Mft(r)}),d.jsx("div",{className:"tone-swatches",children:n.map(s=>{const a=i.tones[s];return a?d.jsx("div",{className:"tone-swatch",style:{backgroundColor:a},title:`Tone ${s}: ${a}`,children:d.jsx("span",{className:"tone-value",children:s})},s):null})})]},r)})})}function Tft(t){const e=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),r=parseInt(t.slice(5,7),16);return(.299*e+.587*n+.114*r)/255>.5}function Mft(t){return t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim()}const Dft=fr({slots:{container:"figma-importer-container",form:"figma-import-form",results:"import-results"}});function Rft({projectId:t,themeId:e,onImportComplete:n}){const r=Dft(),[i,s]=C.useState(""),[a,o]=C.useState(""),[l,c]=C.useState(!0),[u,h]=C.useState(!0),[f,p]=C.useState(!0),[m,v]=C.useState(!0),[A,x]=C.useState("rename"),E=rf(async D=>await Uje(D.accessToken).importStyles(D),{onSuccess:D=>{n&&n(D)}}),w=async()=>{if(!i.trim()){alert("Figma   ");return}if(!a.trim()){alert("Figma Access Token ");return}const D={projectId:t,themeId:e,fileKey:i,accessToken:a,importColors:l,importTextStyles:u,importEffects:f,importVariables:m,conflictResolution:A};try{await E.execute(D)}catch(T){console.error("[FigmaImporter] Import failed:",T)}},B=()=>{E.reset(),s(""),o("")};return d.jsxs("div",{className:r.container(),children:[d.jsx("h2",{children:"Figma Import"}),d.jsx("p",{className:"subtitle",children:"Figma  , ,   "}),!E.isLoading&&!E.data&&d.jsxs("form",{className:r.form(),onSubmit:D=>{D.preventDefault(),w()},children:[d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{htmlFor:"file-key",children:["Figma   ",d.jsx("span",{className:"required",children:"*"})]}),d.jsx("input",{id:"file-key",type:"text",value:i,onChange:D=>s(D.target.value),placeholder:": ABC123DEF456",required:!0}),d.jsxs("p",{className:"field-hint",children:["Figma URL : figma.com/file/",d.jsx("strong",{children:"FILE_KEY"}),"/..."]})]}),d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{htmlFor:"access-token",children:["Figma Personal Access Token ",d.jsx("span",{className:"required",children:"*"})]}),d.jsx("input",{id:"access-token",type:"password",value:a,onChange:D=>o(D.target.value),placeholder:"figd_...",required:!0}),d.jsx("p",{className:"field-hint",children:"Figma Settings  Account  Personal Access Tokens "})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Import "}),d.jsxs("div",{className:"checkbox-group",children:[d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:l,onChange:D=>c(D.target.checked)})," "]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:u,onChange:D=>h(D.target.checked)})," "]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:f,onChange:D=>p(D.target.checked)}),"  (Shadow)"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:m,onChange:D=>v(D.target.checked)}),"Figma Variables ()"]})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"conflict-resolution",children:"  "}),d.jsxs("select",{id:"conflict-resolution",value:A,onChange:D=>x(D.target.value),children:[d.jsx("option",{value:"skip",children:"Skip -   "}),d.jsx("option",{value:"overwrite",children:"Overwrite -   "}),d.jsx("option",{value:"rename",children:"Rename -    ()"})]}),d.jsx("p",{className:"field-hint",children:"      "})]}),d.jsx("button",{type:"submit",className:"import-btn",disabled:E.isLoading,children:E.isLoading?" Import ...":" Figma "})]}),E.isLoading&&d.jsxs("div",{className:"importing-state",children:[d.jsx("div",{className:"spinner"}),d.jsx("p",{children:"Figma   ..."})]}),E.data&&d.jsxs("div",{className:r.results(),children:[d.jsxs("div",{className:"result-header",children:[d.jsx("h3",{children:E.data.success?" Import !":" Import  ( )"}),d.jsx("button",{onClick:B,className:"reset-btn",children:" Import"})]}),d.jsxs("div",{className:"import-stats",children:[d.jsxs("div",{className:"stat-card",children:[d.jsx("span",{className:"stat-number",children:E.data.imported.colors}),d.jsx("span",{className:"stat-label",children:""})]}),d.jsxs("div",{className:"stat-card",children:[d.jsx("span",{className:"stat-number",children:E.data.imported.textStyles}),d.jsx("span",{className:"stat-label",children:""})]}),d.jsxs("div",{className:"stat-card",children:[d.jsx("span",{className:"stat-number",children:E.data.imported.effects}),d.jsx("span",{className:"stat-label",children:""})]}),d.jsxs("div",{className:"stat-card",children:[d.jsx("span",{className:"stat-number",children:E.data.imported.variables}),d.jsx("span",{className:"stat-label",children:""})]}),d.jsxs("div",{className:"stat-card total",children:[d.jsx("span",{className:"stat-number",children:E.data.imported.total}),d.jsx("span",{className:"stat-label",children:" "})]})]}),E.data.skipped>0&&d.jsx("div",{className:"skipped-notice",children:d.jsxs("span",{children:[" ",E.data.skipped,"   ()"]})}),E.data.errors.length>0&&d.jsxs("div",{className:"error-list",children:[d.jsxs("h4",{children:["  (",E.data.errors.length,")"]}),d.jsxs("ul",{children:[E.data.errors.slice(0,10).map((D,T)=>d.jsxs("li",{children:[d.jsx("strong",{children:D.styleName})," (",D.styleType,"): ",D.reason]},T)),E.data.errors.length>10&&d.jsxs("li",{children:["... ",E.data.errors.length-10,""]})]})]}),E.data.tokens.length>0&&d.jsxs("div",{className:"token-list-preview",children:[d.jsx("h4",{children:"   ( 10)"}),d.jsxs("ul",{children:[E.data.tokens.slice(0,10).map((D,T)=>d.jsxs("li",{children:[d.jsx("span",{className:"token-name",children:D.name}),d.jsx("span",{className:"token-type",children:D.type})]},T)),E.data.tokens.length>10&&d.jsxs("li",{className:"more",children:["... ",E.data.tokens.length-10,""]})]})]})]}),E.error&&d.jsxs("div",{className:"error-message",children:[d.jsx("h3",{children:"  "}),d.jsx("p",{children:E.error.message}),d.jsx("button",{onClick:B,children:" "})]})]})}const Pft=fr({slots:{container:"token-editor-container",sidebar:"token-editor-sidebar",main:"token-editor-main",panel:"token-editor-panel"}});function kft({themeId:t,projectId:e}){const n=Pft(),[r,i]=C.useState(null),[s,a]=C.useState("all"),[o,l]=C.useState("all"),[c,u]=C.useState(""),{tokens:h,loading:f,createToken:p,updateToken:m,deleteToken:v}=tD({themeId:t,filter:{category:s==="all"?void 0:s,scope:o==="all"?void 0:o,search:c||void 0},enableRealtime:!0}),{stats:A}=Cft({themeId:t}),x=C.useMemo(()=>{const R=new Set;return h.forEach(k=>{const L=eD(k.name);R.add(L.category)}),Array.from(R).sort()},[h]),E=C.useMemo(()=>h.find(R=>R.id===r)||null,[h,r]),w=async()=>{const R=prompt("  (: color.brand.primary):");if(!R)return;const L=prompt("  (color/typography/spacing/shadow):")||"color",F=prompt(" :");F&&await p({project_id:e,name:R,type:L,value:F,scope:"raw",css_variable:`--${R.replace(/\./g,"-")}`})},B=async R=>{r&&await m(r,R)},D=async()=>{r&&confirm(" ?")&&(await v(r),i(null))},T=async()=>{if(!E||E.type!=="color")return;if(!l0(E.value)){alert("HSL   .");return}if(E.name.endsWith(".dark")){alert("  .");return}const R=`${E.name}.dark`;if(h.find(z=>z.name===R)){alert("   .");return}const L=E.value,F=R5e(L);await p({project_id:e,name:R,type:"color",value:F,scope:E.scope,css_variable:E.css_variable?`${E.css_variable.replace(/-dark$/,"")}`:`--${R.replace(/\./g,"-")}`}),console.log(`[TokenEditor] Generated dark variant: ${R}`)},M=C.useMemo(()=>{if(!E||E.type!=="color"||E.name.endsWith(".dark"))return!1;const R=`${E.name}.dark`;return!h.some(k=>k.name===R)},[E,h]);return f?d.jsx("div",{className:n.container(),children:d.jsxs("div",{className:"loading-state",children:[d.jsx("div",{className:"spinner"}),d.jsx("p",{children:"  ..."})]})}):d.jsxs("div",{className:n.container(),children:[d.jsxs("aside",{className:n.sidebar(),children:[d.jsxs("div",{className:"sidebar-header",children:[d.jsx("h3",{children:" "}),d.jsx("button",{className:"create-token-btn",onClick:w,children:"+  "})]}),d.jsx("div",{className:"search-box",children:d.jsx("input",{type:"text",placeholder:" ...",value:c,onChange:R=>u(R.target.value)})}),d.jsxs("div",{className:"filters",children:[d.jsxs("div",{className:"filter-group",children:[d.jsx("label",{children:""}),d.jsxs("select",{value:s,onChange:R=>a(R.target.value),children:[d.jsx("option",{value:"all",children:""}),x.map(R=>d.jsx("option",{value:R,children:R},R))]})]}),d.jsxs("div",{className:"filter-group",children:[d.jsx("label",{children:"Scope"}),d.jsxs("select",{value:o,onChange:R=>l(R.target.value),children:[d.jsx("option",{value:"all",children:""}),d.jsx("option",{value:"raw",children:"Raw"}),d.jsx("option",{value:"semantic",children:"Semantic"})]})]})]}),A&&d.jsxs("div",{className:"token-stats",children:[d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:" "}),d.jsx("span",{className:"stat-value",children:A.total})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Raw"}),d.jsx("span",{className:"stat-value",children:A.raw})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Semantic"}),d.jsx("span",{className:"stat-value",children:A.semantic})]})]}),d.jsx("div",{className:"token-list",children:h.length===0?d.jsx("div",{className:"empty-state",children:d.jsx("p",{children:" "})}):h.map(R=>d.jsxs("div",{className:`token-item ${r===R.id?"active":""}`,onClick:()=>i(R.id),children:[d.jsxs("div",{className:"token-item-header",children:[d.jsx("span",{className:"token-name",children:R.name}),d.jsx("span",{className:`token-scope ${R.scope}`,children:R.scope})]}),d.jsxs("div",{className:"token-item-body",children:[d.jsx("span",{className:"token-type",children:R.type}),d.jsx("div",{className:"token-preview",children:R.type==="color"&&l0(R.value)&&d.jsx("div",{className:"color-preview-box",style:{background:`hsl(${R.value.h||0}, ${R.value.s||0}%, ${R.value.l||50}%)`}})})]})]},R.id))})]}),d.jsx("main",{className:n.main(),children:E?d.jsxs("div",{className:"token-detail",children:[d.jsxs("div",{className:"detail-header",children:[d.jsx("h2",{children:E.name}),d.jsxs("div",{className:"detail-header-actions",children:[M&&d.jsx("button",{className:"generate-dark-btn",onClick:T,title:"   ",children:"Generate Dark Variant"}),d.jsx("button",{className:"delete-btn",onClick:D,children:""})]})]}),d.jsxs("div",{className:"detail-body",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:" "}),d.jsx("input",{type:"text",value:E.name,onChange:R=>B({name:R.target.value})})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:""}),d.jsxs("select",{value:E.type,onChange:R=>B({type:R.target.value}),children:[d.jsx("option",{value:"color",children:"Color"}),d.jsx("option",{value:"typography",children:"Typography"}),d.jsx("option",{value:"spacing",children:"Spacing"}),d.jsx("option",{value:"shadow",children:"Shadow"}),d.jsx("option",{value:"border",children:"Border"}),d.jsx("option",{value:"radius",children:"Radius"})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Scope"}),d.jsxs("select",{value:E.scope,onChange:R=>B({scope:R.target.value}),children:[d.jsx("option",{value:"raw",children:"Raw"}),d.jsx("option",{value:"semantic",children:"Semantic"})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:""}),E.type==="color"&&l0(E.value)&&d.jsx("div",{className:"color-editor",children:d.jsxs("div",{className:"color-inputs",children:[d.jsx("input",{type:"number",placeholder:"H (0-360)",value:E.value.h||0,onChange:R=>B({value:{...E.value,h:parseInt(R.target.value)}})}),d.jsx("input",{type:"number",placeholder:"S (0-100)",value:E.value.s||0,onChange:R=>B({value:{...E.value,s:parseInt(R.target.value)}})}),d.jsx("input",{type:"number",placeholder:"L (0-100)",value:E.value.l||50,onChange:R=>B({value:{...E.value,l:parseInt(R.target.value)}})}),d.jsx("input",{type:"number",step:"0.1",placeholder:"A (0-1)",value:E.value.a||1,onChange:R=>B({value:{...E.value,a:parseFloat(R.target.value)}})})]})}),(E.type!=="color"||!l0(E.value))&&d.jsx("textarea",{value:JSON.stringify(E.value,null,2),onChange:R=>{try{const k=JSON.parse(R.target.value);B({value:k})}catch{}},rows:5})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"CSS Variable"}),d.jsx("input",{type:"text",value:E.css_variable||"",onChange:R=>B({css_variable:R.target.value})})]})]}),d.jsxs("div",{className:"token-preview",children:[d.jsx("h3",{children:""}),E.type==="color"&&l0(E.value)&&d.jsxs("div",{className:"preview-content",children:[d.jsx("div",{className:"color-preview-large",style:{background:`hsl(${E.value.h||0}, ${E.value.s||0}%, ${E.value.l||50}%)`}}),d.jsxs("div",{className:"preview-info",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"HSL:"})," hsl(",E.value.h||0,", ",E.value.s||0,"%,"," ",E.value.l||50,"%)"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"CSS Variable:"})," ",E.css_variable||"N/A"]})]})]}),(E.type!=="color"||!l0(E.value))&&d.jsx("div",{className:"preview-content",children:d.jsx("pre",{children:JSON.stringify(E.value,null,2)})})]})]}):d.jsx("div",{className:"empty-selection",children:d.jsx("p",{children:" "})})})]})}const Nft=fr({slots:{container:"theme-exporter-container",form:"exporter-form",preview:"export-preview"}});function Lft({themeId:t}){const e=Nft(),{tokens:n,loading:r}=tD({themeId:t,enableRealtime:!1}),[i,s]=C.useState("css"),[a,o]=C.useState(!0),[l,c]=C.useState(!0),[u,h]=C.useState(!1),f=rf(async A=>await p9.exportTokens(n,A)),p=async()=>{if(n.length===0){alert("Export  ");return}const A={format:i,includeComments:a,groupByCategory:l,minify:u};try{await f.execute(A)}catch(x){console.error("[ThemeExporter] Export failed:",x)}},m=()=>{f.data&&p9.downloadFile(f.data)},v=()=>{f.reset()};return d.jsxs("div",{className:e.container(),children:[d.jsx("h2",{children:"Export "}),d.jsx("p",{className:"subtitle",children:"  CSS, Tailwind, SCSS, JSON  "}),r&&d.jsxs("div",{className:"loading-state",children:[d.jsx("div",{className:"spinner"}),d.jsx("p",{children:"  ..."})]}),!r&&d.jsxs(d.Fragment,{children:[d.jsxs("form",{className:e.form(),onSubmit:A=>{A.preventDefault(),p()},children:[d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{htmlFor:"export-format",children:["Export  ",d.jsx("span",{className:"required",children:"*"})]}),d.jsxs("select",{id:"export-format",value:i,onChange:A=>s(A.target.value),children:[d.jsx("option",{value:"css",children:"CSS Variables"}),d.jsx("option",{value:"tailwind",children:"Tailwind Config"}),d.jsx("option",{value:"scss",children:"SCSS Variables"}),d.jsx("option",{value:"json",children:"JSON"})]}),d.jsxs("p",{className:"field-hint",children:[i==="css"&&"CSS Custom Properties (:root)",i==="tailwind"&&"Tailwind Config (theme.extend)",i==="scss"&&"SCSS Variables ($variable)",i==="json"&&"JSON  (Design Token Format)"]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Export "}),d.jsxs("div",{className:"checkbox-group",children:[d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:a,onChange:A=>o(A.target.checked)}),"  "]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:l,onChange:A=>c(A.target.checked)})," "]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:u,onChange:A=>h(A.target.checked)})," (Minify)"]})]})]}),d.jsxs("div",{className:"token-count-info",children:[d.jsx("span",{className:"info-label",children:"Export  "}),d.jsxs("span",{className:"info-value",children:[n.length,""]})]}),d.jsx("button",{type:"submit",className:"export-btn",children:" Export "})]}),f.data&&d.jsxs("div",{className:e.preview(),children:[d.jsxs("div",{className:"preview-header",children:[d.jsxs("div",{className:"preview-title",children:[d.jsx("h3",{children:"Export "}),d.jsx("span",{className:"file-name",children:f.data.filename})]}),d.jsxs("div",{className:"preview-actions",children:[d.jsx("button",{onClick:m,className:"download-btn",children:" "}),d.jsx("button",{onClick:v,className:"reset-btn",children:"  Export"})]})]}),d.jsxs("div",{className:"preview-stats",children:[d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:""}),d.jsx("span",{className:"stat-value",children:f.data.format.toUpperCase()})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:""}),d.jsx("span",{className:"stat-value",children:f.data.filename})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:""}),d.jsxs("span",{className:"stat-value",children:[(f.data.content.length/1024).toFixed(2)," KB"]})]})]}),d.jsxs("div",{className:"preview-content",children:[d.jsxs("div",{className:"code-header",children:[d.jsx("span",{className:"code-label",children:""}),d.jsx("button",{onClick:()=>{navigator.clipboard.writeText(f.data.content),alert(" ")},className:"copy-btn",children:" "})]}),d.jsx("pre",{className:"code-block",children:d.jsx("code",{children:f.data.content})})]})]}),f.error&&d.jsxs("div",{className:"error-message",children:[d.jsx("h3",{children:"  "}),d.jsx("p",{children:f.error.message}),d.jsx("button",{onClick:v,children:" "})]})]})]})}const Fft=fr({slots:{container:"dark-mode-container",form:"dark-mode-form",preview:"dark-mode-preview"}});function jft({themeId:t,projectId:e,onDarkThemeCreated:n}){const r=Fft(),{tokens:i,loading:s}=tD({themeId:t,enableRealtime:!1}),{createTheme:a}=pj({projectId:e,enableRealtime:!1}),[o,l]=C.useState("default"),[c,u]=C.useState(YB.PRESETS.default),[h,f]=C.useState(""),[p,m]=C.useState([]),v=rf(async({themeName:M,options:R})=>(await YB.generateDarkTheme(t,i,M,R),{themeId:(await a(M)).id}),{onSuccess:M=>{n&&n(M.themeId)}}),A=M=>{l(M),u(YB.PRESETS[M])},x=(M,R)=>{u(k=>({...k,[M]:R}))},E=async()=>{setError(null);try{const M=await YB.convertToDarkMode(i,c);m(M)}catch(M){setError(M instanceof Error?M.message:" "),console.error("[DarkModeGenerator] Preview failed:",M)}},w=async()=>{if(!h.trim()){alert("   ");return}try{await v.execute({themeName:h,options:c})}catch(M){console.error("[DarkModeGenerator] Generation failed:",M)}},B=()=>{m([]),v.reset(),f("")},D=i.filter(M=>M.type==="color"),T=p.filter(M=>M.type==="color");return d.jsxs("div",{className:r.container(),children:[d.jsx("h2",{children:"  "}),d.jsx("p",{className:"subtitle",children:"        "}),s&&d.jsxs("div",{className:"loading-state",children:[d.jsx("div",{className:"spinner"}),d.jsx("p",{children:"  ..."})]}),!s&&!v.isSuccess&&d.jsxs(d.Fragment,{children:[d.jsxs("form",{className:r.form(),onSubmit:M=>{M.preventDefault(),w()},children:[d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{htmlFor:"dark-theme-name",children:["   ",d.jsx("span",{className:"required",children:"*"})]}),d.jsx("input",{id:"dark-theme-name",type:"text",value:h,onChange:M=>f(M.target.value),placeholder:": Dark Theme",required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"preset",children:""}),d.jsxs("select",{id:"preset",value:o,onChange:M=>A(M.target.value),children:[d.jsx("option",{value:"default",children:" ( )"}),d.jsx("option",{value:"oled",children:"  (OLED )"}),d.jsx("option",{value:"soft",children:"  (  )"}),d.jsx("option",{value:"highContrast",children:" ( )"})]}),d.jsx("p",{className:"field-hint",children:"      "})]}),d.jsxs("div",{className:"options-panel",children:[d.jsx("h3",{children:" "}),d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{htmlFor:"inversion-strength",children:[" : ",c.inversionStrength?.toFixed(1)]}),d.jsx("input",{id:"inversion-strength",type:"range",min:"0",max:"1",step:"0.1",value:c.inversionStrength||1,onChange:M=>x("inversionStrength",parseFloat(M.target.value))}),d.jsx("p",{className:"field-hint",children:"    (0 =  , 1 =  )"})]}),d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{htmlFor:"saturation-adjustment",children:[" : ",c.saturationAdjustment,"%"]}),d.jsx("input",{id:"saturation-adjustment",type:"range",min:"-30",max:"30",step:"5",value:c.saturationAdjustment||0,onChange:M=>x("saturationAdjustment",parseInt(M.target.value))}),d.jsx("p",{className:"field-hint",children:"    "})]}),d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{htmlFor:"lightness-offset",children:[" : ",c.lightnessOffset,"%"]}),d.jsx("input",{id:"lightness-offset",type:"range",min:"-20",max:"20",step:"5",value:c.lightnessOffset||0,onChange:M=>x("lightnessOffset",parseInt(M.target.value))}),d.jsx("p",{className:"field-hint",children:"  "})]}),d.jsxs("div",{className:"checkbox-group",children:[d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:c.adjustTextColors!==!1,onChange:M=>x("adjustTextColors",M.target.checked)}),"   "]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:c.ensureContrast!==!1,onChange:M=>x("ensureContrast",M.target.checked)}),"   "]})]})]}),d.jsxs("div",{className:"token-count-info",children:[d.jsx("span",{className:"info-label",children:"   "}),d.jsxs("span",{className:"info-value",children:[D.length,""]})]}),d.jsxs("div",{className:"action-buttons",children:[d.jsx("button",{type:"button",onClick:E,className:"preview-btn",children:" "}),d.jsx("button",{type:"submit",className:"generate-btn",disabled:v.isLoading,children:v.isLoading?"  ...":"   "})]})]}),p.length>0&&d.jsxs("div",{className:r.preview(),children:[d.jsxs("div",{className:"preview-header",children:[d.jsx("h3",{children:" "}),d.jsxs("span",{className:"preview-count",children:[T.length," "]})]}),d.jsxs("div",{className:"comparison-grid",children:[d.jsxs("div",{className:"comparison-column",children:[d.jsx("h4",{children:" "}),d.jsx("div",{className:"color-list",children:D.slice(0,10).map(M=>{const R=M.value;return d.jsxs("div",{className:"color-item",children:[d.jsx("div",{className:"color-swatch",style:{background:`hsl(${R.h}, ${R.s}%, ${R.l}%)`}}),d.jsx("span",{className:"color-name",children:M.name}),d.jsxs("span",{className:"color-value",children:["HSL(",R.h,", ",R.s,"%, ",R.l,"%)"]})]},M.id)})})]}),d.jsxs("div",{className:"comparison-column dark-mode",children:[d.jsx("h4",{children:" "}),d.jsx("div",{className:"color-list",children:T.slice(0,10).map(M=>{const R=M.value;return d.jsxs("div",{className:"color-item",children:[d.jsx("div",{className:"color-swatch",style:{background:`hsl(${R.h}, ${R.s}%, ${R.l}%)`}}),d.jsx("span",{className:"color-name",children:M.name}),d.jsxs("span",{className:"color-value",children:["HSL(",R.h,", ",R.s,"%, ",R.l,"%)"]})]},M.id)})})]})]})]})]}),v.isSuccess&&d.jsxs("div",{className:"success-message",children:[d.jsx("h3",{children:"    !"}),d.jsxs("p",{children:['"',h,'"   .']}),d.jsx("button",{onClick:B,className:"reset-btn",children:"+   "})]}),v.error&&d.jsxs("div",{className:"error-message",children:[d.jsx("h3",{children:"  "}),d.jsx("p",{children:v.error.message}),d.jsx("button",{onClick:B,children:" "})]})]})}const Oft=fr({slots:{container:"figma-plugin-container",form:"figma-plugin-form",preview:"figma-plugin-preview"}});function zft({themeId:t}){const e=Oft(),{tokens:n,loading:r}=tD({themeId:t,enableRealtime:!1}),[i,s]=C.useState("XStudio Theme Import"),[a,o]=C.useState("Import design tokens from XStudio"),[l,c]=C.useState(!0),[u,h]=C.useState(!0),[f,p]=C.useState(!0),[m,v]=C.useState(!0),[A,x]=C.useState(!0),[E,w]=C.useState(!0),[B,D]=C.useState(null),T=rf(async F=>await g9.exportToFigmaPlugin(n,F),{onSuccess:F=>{const z=Object.keys(F.files)[0];z&&D(z)}}),M=async()=>{if(!i.trim()){alert("Plugin  ");return}if(n.length===0){alert("Export  ");return}const F={pluginName:i,description:a||void 0,includeFiles:{manifest:l,code:u,ui:f},exportTargets:{colors:m,textStyles:A,effects:E}};try{await T.execute(F)}catch(z){console.error("[FigmaPluginExporter] Export failed:",z)}},R=async()=>{T.data&&await g9.downloadPluginFiles(T.data)},k=(F,z)=>{const G=new Blob([z],{type:F.endsWith(".html")?"text/html":"text/plain"}),V=URL.createObjectURL(G),q=document.createElement("a");q.href=V,q.download=F,document.body.appendChild(q),q.click(),document.body.removeChild(q),URL.revokeObjectURL(V)},L=()=>{T.reset(),D(null)};return d.jsxs("div",{className:e.container(),children:[d.jsx("h2",{children:"Figma Plugin Export"}),d.jsx("p",{className:"subtitle",children:" Figma Plugin   Figma  Import  "}),r&&d.jsxs("div",{className:"loading-state",children:[d.jsx("div",{className:"spinner"}),d.jsx("p",{children:"  ..."})]}),!r&&!T.data&&d.jsxs("form",{className:e.form(),onSubmit:F=>{F.preventDefault(),M()},children:[d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{htmlFor:"plugin-name",children:["Plugin  ",d.jsx("span",{className:"required",children:"*"})]}),d.jsx("input",{id:"plugin-name",type:"text",value:i,onChange:F=>s(F.target.value),placeholder:": XStudio Theme Import",required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"description",children:" ()"}),d.jsx("textarea",{id:"description",value:a,onChange:F=>o(F.target.value),placeholder:"Plugin ",rows:2})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:" "}),d.jsxs("div",{className:"checkbox-group",children:[d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:l,onChange:F=>c(F.target.checked)}),"manifest.json (Plugin  )"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:u,onChange:F=>h(F.target.checked)}),"code.ts (Plugin )"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:f,onChange:F=>p(F.target.checked)}),"ui.html (Plugin UI)"]})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Export "}),d.jsxs("div",{className:"checkbox-group",children:[d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:m,onChange:F=>v(F.target.checked)})," "]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:A,onChange:F=>x(F.target.checked)})," "]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:E,onChange:F=>w(F.target.checked)}),"  (Shadow)"]})]})]}),d.jsxs("div",{className:"token-count-info",children:[d.jsx("span",{className:"info-label",children:"Export  "}),d.jsxs("span",{className:"info-value",children:[n.length,""]})]}),d.jsx("button",{type:"submit",className:"export-btn",children:" Figma Plugin "})]}),T.data&&d.jsxs("div",{className:e.preview(),children:[d.jsxs("div",{className:"preview-header",children:[d.jsxs("div",{className:"preview-title",children:[d.jsx("h3",{children:"Plugin   "}),d.jsxs("span",{className:"file-count",children:[Object.keys(T.data.files).length," "]})]}),d.jsxs("div",{className:"preview-actions",children:[d.jsx("button",{onClick:R,className:"download-all-btn",children:"  "}),d.jsx("button",{onClick:L,className:"reset-btn",children:"  "})]})]}),d.jsxs("div",{className:"preview-stats",children:[d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Plugin "}),d.jsx("span",{className:"stat-value",children:T.data.metadata.pluginName})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:" "}),d.jsxs("span",{className:"stat-value",children:[T.data.metadata.tokenCount,""]})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:" "}),d.jsx("span",{className:"stat-value",children:new Date(T.data.metadata.generatedAt).toLocaleString("ko-KR")})]})]}),d.jsx("div",{className:"file-tabs",children:Object.keys(T.data.files).map(F=>d.jsxs("button",{className:`file-tab ${B===F?"active":""}`,onClick:()=>D(F),children:[" ",F]},F))}),B&&T.data.files[B]&&d.jsxs("div",{className:"file-content",children:[d.jsxs("div",{className:"file-header",children:[d.jsx("span",{className:"file-name",children:B}),d.jsxs("div",{className:"file-actions",children:[d.jsx("button",{onClick:()=>{navigator.clipboard.writeText(T.data.files[B]),alert(" ")},className:"copy-btn",children:" "}),d.jsx("button",{onClick:()=>k(B,T.data.files[B]),className:"download-btn",children:" "})]})]}),d.jsx("pre",{className:"code-block",children:d.jsx("code",{children:T.data.files[B]})})]}),d.jsxs("div",{className:"instructions",children:[d.jsx("h4",{children:" Figma Plugin  "}),d.jsxs("ol",{children:[d.jsx("li",{children:"Figma Desktop App "}),d.jsx("li",{children:"Menu  Plugins  Development  Import plugin from manifest..."}),d.jsx("li",{children:" manifest.json  "}),d.jsx("li",{children:"Plugin  Plugins    "})]})]})]}),T.error&&d.jsxs("div",{className:"error-message",children:[d.jsx("h3",{children:"  "}),d.jsx("p",{children:T.error.message}),d.jsx("button",{onClick:L,children:" "})]})]})}function $ft(t,e,n){n/=100;const r=e*Math.min(n,1-n)/100,i=s=>{const a=(s+t/30)%12,o=n-r*Math.max(Math.min(a-3,9-a,1),-1);return Math.round(255*o).toString(16).padStart(2,"0")};return`#${i(0)}${i(8)}${i(4)}`}const Qft=[{role:"primary",label:"Primary",lightShade:"primary-600",darkShade:"primary-400",category:"primary"},{role:"on-primary",label:"On Primary",lightShade:"white",darkShade:"primary-900",category:"primary"},{role:"primary-container",label:"Primary Container",lightShade:"primary-100",darkShade:"primary-800",category:"primary"},{role:"on-primary-container",label:"On Primary Container",lightShade:"primary-900",darkShade:"primary-100",category:"primary"},{role:"secondary",label:"Secondary",lightShade:"secondary-600",darkShade:"secondary-400",category:"secondary"},{role:"on-secondary",label:"On Secondary",lightShade:"white",darkShade:"secondary-900",category:"secondary"},{role:"secondary-container",label:"Secondary Container",lightShade:"secondary-100",darkShade:"secondary-800",category:"secondary"},{role:"on-secondary-container",label:"On Secondary Container",lightShade:"secondary-900",darkShade:"secondary-100",category:"secondary"},{role:"tertiary",label:"Tertiary",lightShade:"tertiary-600",darkShade:"tertiary-400",category:"tertiary"},{role:"on-tertiary",label:"On Tertiary",lightShade:"white",darkShade:"tertiary-900",category:"tertiary"},{role:"tertiary-container",label:"Tertiary Container",lightShade:"tertiary-100",darkShade:"tertiary-800",category:"tertiary"},{role:"on-tertiary-container",label:"On Tertiary Container",lightShade:"tertiary-900",darkShade:"tertiary-100",category:"tertiary"},{role:"error",label:"Error",lightShade:"error-600",darkShade:"error-400",category:"error"},{role:"on-error",label:"On Error",lightShade:"white",darkShade:"error-900",category:"error"},{role:"error-container",label:"Error Container",lightShade:"error-100",darkShade:"error-800",category:"error"},{role:"on-error-container",label:"On Error Container",lightShade:"error-900",darkShade:"error-100",category:"error"},{role:"surface",label:"Surface",lightShade:"surface-50",darkShade:"surface-900",category:"surface"},{role:"surface-container",label:"Surface Container",lightShade:"surface-100",darkShade:"surface-800",category:"surface"},{role:"surface-container-high",label:"Surface Container High",lightShade:"surface-200",darkShade:"surface-700",category:"surface"},{role:"surface-container-highest",label:"Surface Container Highest",lightShade:"surface-300",darkShade:"surface-600",category:"surface"}];function Uft({themeId:t,projectId:e,isDarkMode:n=!1}){const[r,i]=C.useState(new Map),[s,a]=C.useState(!0);C.useEffect(()=>{async function u(){try{const{getDB:h}=await fn(async()=>{const{getDB:v}=await Promise.resolve().then(()=>yL);return{getDB:v}},void 0),p=await(await h()).designTokens.getByTheme(t),m=new Map;p.forEach(v=>{if(v.type!=="color")return;let A=v.name;A.startsWith("color.")&&(A=A.replace("color.","")),A=A.replace(/\./g,"-");let x;if(typeof v.value=="string")x=v.value;else if(v.value&&typeof v.value=="object"){const E=v.value;if(typeof E.hex=="string")x=E.hex;else if(typeof E.h=="number"&&typeof E.s=="number"&&typeof E.l=="number")x=$ft(E.h,E.s,E.l);else{console.warn("[M3ColorSystemGuide] Unknown value format:",A,v.value);return}}else return;m.set(A,x)}),m.has("white")||m.set("white","#FFFFFF"),m.has("black")||m.set("black","#000000"),i(m)}catch(h){console.error("[M3ColorSystemGuide] Failed to fetch tokens:",h)}finally{a(!1)}}u()},[t,e,n]);const o=u=>r.get(u)||"#CCCCCC",l=u=>{const h=u.replace("#",""),f=parseInt(h.substr(0,2),16),p=parseInt(h.substr(2,2),16),m=parseInt(h.substr(4,2),16);return(.299*f+.587*p+.114*m)/255>.5?"#000000":"#FFFFFF"};if(s)return d.jsx("div",{className:"m3-color-system-guide",children:d.jsxs("div",{className:"m3-guide-loading",children:[d.jsx("div",{className:"spinner"}),d.jsx("p",{children:"Loading M3 Color Roles..."})]})});const c=["primary","secondary","tertiary","error","surface"];return d.jsxs("div",{className:"m3-color-system-guide",children:[d.jsxs("div",{className:"m3-guide-header",children:[d.jsx("h3",{children:"Material Design 3 Color Roles"}),d.jsxs("p",{className:"m3-guide-description",children:[n?"Dark Mode":"Light Mode","  Current Theme Colors"]})]}),d.jsx("div",{className:"m3-roles-grid",children:c.map(u=>{const h=Qft.filter(f=>f.category===u);return d.jsxs("div",{className:"m3-category",children:[d.jsx("h4",{className:"m3-category-title",children:u.charAt(0).toUpperCase()+u.slice(1)}),d.jsx("div",{className:"m3-role-list",children:h.map(f=>{const p=n?f.darkShade:f.lightShade,m=o(p),v=l(m);return d.jsxs("div",{className:"m3-role-item",style:{backgroundColor:m,color:v},children:[d.jsx("div",{className:"m3-role-label",children:f.label}),d.jsxs("div",{className:"m3-role-value",children:[d.jsx("div",{className:"m3-shade-name",children:p}),d.jsx("div",{className:"m3-color-hex",children:m})]})]},f.role)})})]},u)})}),d.jsxs("div",{className:"m3-guide-footer",children:[d.jsxs("div",{className:"m3-mapping-info",children:[d.jsx("h4",{children:"M3 Mapping Rules"}),d.jsxs("ul",{className:"m3-mapping-list",children:[d.jsxs("li",{children:[d.jsx("span",{className:"mapping-label",children:"Primary/Secondary/Tertiary:"}),d.jsx("span",{className:"mapping-value",children:n?"400 shade":"600 shade"})]}),d.jsxs("li",{children:[d.jsx("span",{className:"mapping-label",children:"Containers:"}),d.jsx("span",{className:"mapping-value",children:n?"800 shade":"100 shade"})]}),d.jsxs("li",{children:[d.jsx("span",{className:"mapping-label",children:"On-Colors:"}),d.jsx("span",{className:"mapping-value",children:n?"900 or 100":"White or 900"})]})]})]}),d.jsx("div",{className:"m3-guide-link",children:d.jsx("a",{href:"https://m3.material.io/styles/color/roles",target:"_blank",rel:"noopener noreferrer",className:"m3-docs-link",children:"View M3 Color Documentation "})})]})]})}const Hft=fr({slots:{container:"themePanel",header:"theme-studio-header",sidebar:"theme-studio-sidebar",main:"theme-studio-main",panel:"theme-studio-panel"}});function Gft({projectId:t}){const e=Hft(),[n,r]=C.useState("tokens"),[i,s]=C.useState(!1),{themes:a,loading:o,createTheme:l,activateTheme:c,deleteTheme:u}=pj({projectId:t,enableRealtime:!0}),{activeTheme:h,loading:f,refetch:p}=mft({projectId:t,enableRealtime:!0}),m=o||f;C.useEffect(()=>{const E=localStorage.getItem("themestudio-preview-dark-mode")==="dark";s(E)},[]);const v=async x=>{await c(x),await p()},A=()=>{const x=!i;s(x),localStorage.setItem("themestudio-preview-dark-mode",x?"dark":"light"),console.log("[ThemeStudio] Preview dark mode:",x?"enabled":"disabled")};return m?d.jsx("div",{className:e.container(),children:d.jsxs("div",{className:"loading-state",children:[d.jsx("div",{className:"spinner"}),d.jsx("p",{children:"  ..."})]})}):d.jsxs("div",{className:e.container(),"data-theme":i?"dark":void 0,children:[d.jsxs("div",{className:"panel-header",children:[d.jsx("h3",{className:"panel-title",children:"Theme"}),d.jsxs("div",{className:"header-actions",children:[d.jsx("select",{value:h?.id||"",onChange:x=>v(x.target.value),children:a.map(x=>d.jsx("option",{value:x.id,children:x.name},x.id))}),d.jsxs("button",{className:"iconButton preview-dark-mode-toggle",onClick:A,title:i?"Light  ":"Dark  ",children:[i?d.jsx(VN,{size:16}):d.jsx(Ww,{size:16}),d.jsx("span",{children:i?"Light":"Dark"})]}),d.jsx("button",{className:n==="tokens"?"active":"",onClick:()=>r("tokens"),children:" "}),d.jsx("button",{className:n==="ai-generator"?"active":"",onClick:()=>r("ai-generator"),children:"AI "}),d.jsx("button",{className:n==="hct-generator"?"active":"",onClick:()=>r("hct-generator"),children:"HCT (M3)"}),d.jsx("button",{className:n==="figma-import"?"active":"",onClick:()=>r("figma-import"),children:"Figma Import"}),d.jsx("button",{className:n==="dark-mode"?"active":"",onClick:()=>r("dark-mode"),children:" "}),d.jsx("button",{className:n==="figma-plugin"?"active":"",onClick:()=>r("figma-plugin"),children:"Figma Plugin"}),d.jsx("button",{className:n==="settings"?"active":"",onClick:()=>r("settings"),children:""})]})]}),d.jsxs("div",{className:"studio-body",children:[d.jsxs("aside",{className:e.sidebar(),children:[d.jsxs("div",{className:"sidebar-header",children:[d.jsx("h2",{children:""}),d.jsx("button",{className:"create-theme-btn",onClick:()=>{const x=prompt("  :");x&&l(x)},children:"+  "})]}),d.jsx("div",{className:"theme-list",children:a.map(x=>d.jsxs("div",{className:`theme-item ${h?.id===x.id?"active":""}`,children:[d.jsxs("div",{className:"theme-info",onClick:()=>v(x.id),children:[d.jsxs("div",{className:"theme-name-row",children:[d.jsx("span",{className:"theme-name",children:x.name}),(x.supports_dark_mode??!0)&&d.jsx(Ww,{size:14,className:"dark-mode-indicator"})]}),d.jsx("span",{className:"theme-status",children:x.status})]}),d.jsx("button",{className:"delete-theme-btn",onClick:E=>{E.stopPropagation(),confirm(`"${x.name}"  ?`)&&u(x.id)},title:" ",children:""})]},x.id))})]}),d.jsxs("main",{className:e.main(),children:[n==="tokens"&&h&&d.jsx(kft,{themeId:h.id,projectId:t}),n==="ai-generator"&&d.jsx("div",{className:"ai-generator-view",children:d.jsx(Sft,{projectId:t,onThemeGenerated:x=>{v(x),r("tokens")}})}),n==="hct-generator"&&d.jsx("div",{className:"hct-generator-view",children:d.jsx(_ft,{projectId:t,onThemeGenerated:x=>{v(x),r("tokens")}})}),n==="figma-import"&&d.jsx("div",{className:"figma-import-view",children:d.jsx(Rft,{projectId:t,themeId:h?.id||"",onImportComplete:x=>{console.log("Figma import complete:",x),r("tokens")}})}),n==="dark-mode"&&h&&d.jsx("div",{className:"dark-mode-view",children:d.jsx(jft,{projectId:t,themeId:h.id,onDarkThemeCreated:x=>{v(x),r("tokens")}})}),n==="figma-plugin"&&h&&d.jsx("div",{className:"figma-plugin-view",children:d.jsx(zft,{projectId:t,themeId:h.id})}),n==="settings"&&h&&d.jsxs("div",{className:"settings-view",children:[d.jsxs("div",{className:"theme-settings-section",children:[d.jsx("h3",{children:" "}),d.jsxs("div",{className:"setting-item",children:[d.jsxs("label",{htmlFor:"dark-mode-support",children:[d.jsx(Ww,{size:16}),d.jsx("span",{children:" "})]}),d.jsx("input",{type:"checkbox",id:"dark-mode-support",checked:h.supports_dark_mode??!0,onChange:async x=>{const E=x.target.checked;try{const{supabase:w}=await fn(async()=>{const{supabase:B}=await Promise.resolve().then(()=>RRe);return{supabase:B}},void 0);await w.from("design_themes").update({supports_dark_mode:E}).eq("id",h.id),console.log("[ThemeStudio] Updated dark mode support:",E)}catch(w){console.error("[ThemeStudio] Failed to update dark mode support:",w)}}}),d.jsx("p",{className:"setting-description",children:"   Builder   ."})]})]}),d.jsx(Lft,{themeId:h.id,projectId:t})]})]}),d.jsx("aside",{className:e.panel(),children:h?d.jsx(Uft,{themeId:h.id,projectId:t,isDarkMode:i}):d.jsx("div",{className:"token-preview",children:d.jsx("p",{children:"  M3 Color Roles "})})})]})]})}const DN=({children:t})=>{const[e,n]=C.useState(null),[r,i]=C.useState(!0);return C.useEffect(()=>{(async()=>{const{data:{session:a}}=await ss.auth.getSession();n(a),i(!1)})()},[]),r?d.jsx("p",{children:"Loading..."}):e?t:d.jsx(ope,{to:"/signin"})};function Vft(){const{projectId:t}=Fb();return t?d.jsx(Gft,{projectId:t}):d.jsx("div",{children:"Project ID required"})}function Wft(){const t=j0(),e=t.pathname==="/"||t.pathname==="/signin"||t.pathname==="/dashboard";return d.jsxs(d.Fragment,{children:[e&&d.jsx(pwe,{}),d.jsxs(cpe,{children:[d.jsx(g1,{path:"/",element:d.jsx(C4e,{})}),d.jsx(g1,{path:"/signin",element:d.jsx(gft,{})}),d.jsx(g1,{path:"/dashboard",element:d.jsx(DN,{children:d.jsx(cNe,{})})}),d.jsx(g1,{path:"/builder/:projectId",element:d.jsx(DN,{children:d.jsx(pft,{})})}),d.jsx(g1,{path:"/theme/:projectId",element:d.jsx(DN,{children:d.jsx(Vft,{})})})]})]})}const Kft=new dge({defaultOptions:{queries:{staleTime:300*1e3,gcTime:1800*1e3,retry:2,refetchOnWindowFocus:!1}}}),qft=document.getElementById("root"),Yft="/xstudio";mfe.createRoot(qft).render(d.jsxs(fge,{client:Kft,children:[d.jsx(Rpe,{basename:Yft,children:d.jsx(xve,{children:d.jsx(Wft,{})})}),!1]}));export{YNe as $,NE as A,iY as B,rY as C,qo as D,js as E,D8 as F,v_ as G,R8 as H,gY as I,M0e as J,W0e as K,hI as L,YO as M,Vw as N,Cl as O,wl as P,pgt as Q,kAe as R,uye as S,jM as T,cP as U,KNe as V,mb as W,pY as X,cY as Y,Yge as Z,eh as _,ygt as a,gT as a$,mgt as a0,ggt as a1,u0e as a2,Oye as a3,tY as a4,Xd as a5,F0e as a6,GAe as a7,Di as a8,x_ as a9,lf as aA,N0e as aB,gf as aC,HN as aD,cE as aE,F3e as aF,gse as aG,N3e as aH,Xn as aI,pu as aJ,QN as aK,A0 as aL,V6 as aM,no as aN,_p as aO,fXe as aP,Vn as aQ,Op as aR,Zs as aS,ha as aT,uJe as aU,VJe as aV,NG as aW,ls as aX,qJe as aY,ko as aZ,Py as a_,Zi as aa,Vge as ab,Kw as ac,$ye as ad,WN as ae,Pc as af,hy as ag,Ny as ah,QF as ai,G0e as aj,ib as ak,KO as al,rve as am,YAe as an,Tye as ao,oAe as ap,cd as aq,mAe as ar,Agt as as,Jx as at,Dn as au,Np as av,es as aw,cu as ax,hr as ay,_i as az,Za as b,Kj as b0,Ade as b1,Wj as b2,zp as b3,ude as b4,sI as b5,fi as b6,CZe as b7,SZe as b8,BZe as b9,$ue as bA,bde as bB,kr as bC,Ri as bD,NJe as bE,Mde as bF,JJe as bG,EZe as bH,wZe as bI,MZe as bJ,RZe as bK,PZe as bL,Lde as bM,LG as bN,kG as bO,u1 as bP,ktt as bQ,lV as bR,os as bS,Let as bT,Fs as bU,ZYe as bV,bn as bW,yV as bX,Ode as bY,DZe as ba,G4 as bb,Gn as bc,xde as bd,Y6 as be,Yb as bf,JYe as bg,KI as bh,qj as bi,kZe as bj,jue as bk,Gue as bl,aG as bm,dd as bn,tJe as bo,hJe as bp,WI as bq,Ua as br,MJe as bs,lG as bt,Uk as bu,cG as bv,RXe as bw,IE as bx,io as by,MXe as bz,Il as c,Hd as d,Rg as e,On as f,mE as g,mme as h,ge as i,d as j,bY as k,yme as l,L8 as m,dY as n,w1 as o,fI as p,tye as q,C as r,I8 as s,Gd as t,je as u,ss as v,wAe as w,tt as x,P8 as y,vgt as z};
